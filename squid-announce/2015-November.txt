From squid3 at treenet.co.nz  Mon Nov  9 01:26:44 2015
From: squid3 at treenet.co.nz (Amos Jeffries)
Date: Mon, 9 Nov 2015 14:26:44 +1300
Subject: [squid-announce] Squid 3.5.11 is available
Message-ID: <563FF654.3060300@treenet.co.nz>

The Squid HTTP Proxy team is very pleased to announce the availability
of the Squid-3.5.11 release!


This release is a bug fix release resolving issues found in the prior
Squid releases.


The major changes to be aware of:


* Regression Bug #4279: FTP-download of non-existing file

When requested to fetch an ftp:// URL for a file which does not exist
earlier Squid would simply hang. An appropriate error page is now
generated and delivered to the client.



* Bug #4347: compile errors with LibreSSL 2.3

LibreSSL 2.3 removed SSLv3 support entirely from its API. Meaning
Squid-3.5 would no longer build with SSL enabled. That is now resolved,
with SSLv3 being made optional in Squid.

OpenSSL allowed builds with SSLv3 removed as well, though this is less
common it also would have the same effect on Squid builds.

NP: since 3.5.11 packaging one related issue has been found that can
result in assert(0) on some CPU architectures.



* Bug #3574: crashes on reconfigure and startup

During machine boot sequence Squid can receive multiple reconfigure
signals during its startup phase as the system configuration is changed
and Squid signalled to reload the information.Leading to overlapping
rconfiguration load sequences and crashes from inconsistent config states
Squid will now ignore reconfigure requests before startup has read the
initial config file and treat repeated signals during reconfigure as a
single request to reload squid.conf when the current operation has
completed.



* Bug #4188: Bumping intercepted SSL connections does not work on
  Solaris

This bug turned out to be missing logics in the I/O module handling
/dev/poll on Solaris. It affects all TLS/SSL connections being received
or generated by Squid. All users of Squid on Solaris wanting to use
TLS/SSL enabled Squid need to upgrade to at least this release.



* Connection stats, including %<lp, missing for persistent connections.

When re-using a persistent connection the statistics and logging state
was not being correctly updated. At least the %<lp and %<la log values
were incorrect for these transactions. As are the SNMP counters for
transactions per upstream server/IP. There may be other state details
affected which we are not aware of, so do not be too alarmed if there
are some traffic anomalies appearing after upgrade.



* Memory Issues

A nasty memory management bug has been found in the "SBuf" buffer
logics. This buffer type is not used very widely in Squid-3.x but as it
is used for generic I/O buffering may still have been responsible for
random unidentifiable crashes.



 All users of Squid are encouraged to upgrade to this release as time
permits.


 See the ChangeLog for the full list of changes in this and earlier
 releases.

Please refer to the release notes at
http://www.squid-cache.org/Versions/v3/3.5/RELEASENOTES.html
when you are ready to make the switch to Squid-3.5

Upgrade tip:
  "squid -k parse" is starting to display even more
   useful hints about squid.conf changes.

This new release can be downloaded from our HTTP or FTP servers

 http://www.squid-cache.org/Versions/v3/3.5/
 ftp://ftp.squid-cache.org/pub/squid/
 ftp://ftp.squid-cache.org/pub/archive/3.5/

or the mirrors. For a list of mirror sites see

 http://www.squid-cache.org/Download/http-mirrors.html
 http://www.squid-cache.org/Download/mirrors.html

If you encounter any issues with this release please file a bug report.
http://bugs.squid-cache.org/


Amos Jeffries


From squid3 at treenet.co.nz  Mon Nov  9 02:25:33 2015
From: squid3 at treenet.co.nz (Amos Jeffries)
Date: Mon, 9 Nov 2015 15:25:33 +1300
Subject: [squid-announce] Squid 4.0.2 beta is available
Message-ID: <5640041D.1060200@treenet.co.nz>

The Squid HTTP Proxy team is very pleased to announce the availability
of the Squid-4.0.2 release!


This release is a beta release resolving issues found in the prior Squid
releases.


The major changes to be aware of:


* Several regression bugs

 - Bug #4356: segmentation fault using proxy_auth ACL
 - Bug #4352: compile errors in OS X 10.11
 - Bug #4351: compile errors when authentication modules disabled
 - Bug #4021: ext_user_regex does exact match

There are also several compile errors with clang which have been
resolved but not in time for this release. To build with clang please
use the latest snapshot package.



* Bug #3574: To avoid crashes, prohibit reconfiguration during shutdown.

This release contains additional fixed for reconfiguration issues during
Squid shutdown sequence.

Note: there are additional shutdown issues yet to be resolved. This only
completes the bug 3574 set of issues surrounding reconfigration signals.



* HTTP/1.1 parser fixes

1xx responses were incorrectly being flagged as final response headers,
eventually leading to the server connection being closed with an abort.
This breaks many PUT transactions, which often rely on
Expect:100-continue feature of HTTP to prevent excessive uploads.

Chunked encoding messages were sometimes not having their terminal bytes
detected properly and causing Squid to abort the transaction and/or the
connection as bad when no actual error had occured.

Note: The new parser also currently rejects URI/URL containing
characters which are not permitted for use in URI due to their dangers
with shell-injection or similar types of attacks. Several major web
services are using such characters anyway. The fix to restore the old
behaviour is still awaiting the final stages of our QA process.



* Re-assign delay pools based on HTTP reply details

The delay_access criteria for delay pools will now be re-assessed on
receipt of a server HTTP response. Meaning it is possible assign pools
based on HTTP reply headers or other server details.

Some initial portion of the response may be received and buffered prior
to the re-assignment happening. That portion will be accounted for in
the earlier request-based pool assignment for the transaction.



 All users of Squid are encouraged to test this release out and plan for
upgrades where possible.


 See the ChangeLog for the full list of changes in this and earlier
 releases.

Please refer to the release notes at
http://www.squid-cache.org/Versions/v4/RELEASENOTES.html
when you are ready to make the switch to Squid-4

Upgrade tip:
  "squid -k parse" is starting to display even more
   useful hints about squid.conf changes.

This new release can be downloaded from our HTTP or FTP servers

 http://www.squid-cache.org/Versions/v4/
 ftp://ftp.squid-cache.org/pub/squid/
 ftp://ftp.squid-cache.org/pub/archive/4/

or the mirrors. For a list of mirror sites see

 http://www.squid-cache.org/Download/http-mirrors.html
 http://www.squid-cache.org/Download/mirrors.html

If you encounter any issues with this release please file a bug report.
http://bugs.squid-cache.org/


Amos Jeffries

From squid3 at treenet.co.nz  Sun Nov 29 06:01:13 2015
From: squid3 at treenet.co.nz (Amos Jeffries)
Date: Sun, 29 Nov 2015 19:01:13 +1300
Subject: [squid-announce] Squid 3.5.12 is available
Message-ID: <565A94A9.1060601@treenet.co.nz>

The Squid HTTP Proxy team is very pleased to announce the availability
of the Squid-3.5.12 release!


This release is a bug fix release resolving issues found in the prior
Squid releases.


The major changes to be aware of:


* Bug #4374: refresh_pattern config parser (%)

For some time the squid.conf parser has been reporting errors when the
refresh_pattern percentage parameter was configured with values over
100%. Due to the nature of the revalidaton algorithm refresh often works
better with very large percentage values, particularly when dealing with
very young objects.
This release now permits large percentage values to be configured.


* Bug #4228: links with krb5 libs despite --without options

The Kerberos library --without-mit-kb5 and --without-heimdal-krb5
options were not working in previous 3.5 releases and could result in
build errors. This has been corrected.


* Bug #4373: assertion 'redirect_state == REDIRECT_NONE'

Squid could exit with the above assertion if a misconfigured SquidGuard
helper was used. This release will now correctly handle the SquidGuard
response without exiting.

Note that it appears the SquidGuard project is no longer being
maintained. All its capabilities are available directly within Squid.
Users still relying on it should evaluate upgrading their config to no
longer use a rewriter, or to migrate to one of the alternative helpers
which are available and being maintained.


* TLS: Handshake Problem during Renegotiation

Previous Squid did not support server-initiated renegotiation and would
close the TLS connection even if the renegotiation occured during the
handshake process. Squid now supports this TLS feature during TLS
handshake when SSL-Bumping the traffic.


* Revert r13921: Migrate StoreEntry to using MEMPROXY_CLASS

An attempted performance optimization in Squid-3.5.10 r13921 has been
found to uncover hidden bugs in the cache handling. As a result objects
could become MISS or revalidate unnecessarily. Some SNMP reporting
issues could also be resulting. The change has now been removed from 3.5.


* Fix SSL_get_certificate() problem detection

The autoconf checks for this sometimes broken function fail on library
builds which don't include SSLv3; as a result of the autoconf decision
this can end up triggering the assert(0) in Ssl::verifySslCertificate().


* Fix cache_peer forceddomain= in CONNECT

CONNECT messages output by Squid to peers in configurations using
forcedomain= parameter could be sent with the original domain name in
the Host: header. While this should not have had any effect, it is
possible that broken recipients and downstream traffic analysis could be
confused. Squid will now consistently apply forcedomain= on all HTTP
requests.



 All users of Squid are encouraged to upgrade to this release as time
permits.


 See the ChangeLog for the full list of changes in this and earlier
 releases.

Please refer to the release notes at
http://www.squid-cache.org/Versions/v3/3.5/RELEASENOTES.html
when you are ready to make the switch to Squid-3.5

Upgrade tip:
  "squid -k parse" is starting to display even more
   useful hints about squid.conf changes.

This new release can be downloaded from our HTTP or FTP servers

 http://www.squid-cache.org/Versions/v3/3.5/
 ftp://ftp.squid-cache.org/pub/squid/
 ftp://ftp.squid-cache.org/pub/archive/3.5/

or the mirrors. For a list of mirror sites see

 http://www.squid-cache.org/Download/http-mirrors.html
 http://www.squid-cache.org/Download/mirrors.html

If you encounter any issues with this release please file a bug report.
http://bugs.squid-cache.org/


Amos Jeffries

From squid3 at treenet.co.nz  Sun Nov 29 06:24:42 2015
From: squid3 at treenet.co.nz (Amos Jeffries)
Date: Sun, 29 Nov 2015 19:24:42 +1300
Subject: [squid-announce] Squid 4.0.3 beta is available
Message-ID: <565A9A2A.8050403@treenet.co.nz>

The Squid HTTP Proxy team is very pleased to announce the availability
of the Squid-4.0.3 release!


This release is a beta release resolving issues found in the prior Squid
releases.


The major changes to be aware of:


* Several regression bugs

 - Bug 4372: missing template files
 - Bug 4371: no such file or directory: DiskIO/*/*DiskIOModule.o
 - Fix various DiskIO bugs
 - Fix compile erorr on clang undefined reference to '__atomic_load_8'
 - ext_kerberos_ldap_group_acl missing workarounds for Heimdal Kerberos
 - Quieten ALE missing messages

There are also several new compile errors which have been uncovered:

 - when Clang is installed alongside GCC 5 it cannot link libstdc++
 - libecap uses TR1 shared_ptr which are incompatible with C++11
   std::shared_ptr definitions assumed by Squid-4. A patch is required.


* Bug 4368: A simpler and more robust HTTP request line parser

As noted in the previous release the new parser was rejecting URI/URL
containing characters which are not permitted for use in URI due to
their dangers with shell-injection or similar types of attacks. Several
major web services are using such characters anyway.

This release now accepts those characters in the request-line parser.
Although they may still be rejected later in the request processing if
they result in an unprocessable URL or invalid DNS lookup.


* ext_ldap_group_acl: Allow unlimited LDAP search filter

Previously this helper restricted the length of search filters, both in
parameter length and constructed fitler length. Those restrictions are
now lifted and any length of filter may be used.

Please note that large filters do have a peformance impact from extra
string manipulation and LDAP parsing. So use of short filters is
recommended.


* ext_unix_group_acl: Support to strip @REALM from usernames

This helper now supports group lookups for Kerbers authenticated users.
The -r command line option can be used to enable stripping Kerberos
format Realm details from the user credentials. This compliments the
existing option to strip NTLM domain details. Both may be used together
if needed.



 All users of Squid are encouraged to test this release out and plan for
upgrades where possible.


 See the ChangeLog for the full list of changes in this and earlier
 releases.

Please refer to the release notes at
http://www.squid-cache.org/Versions/v4/RELEASENOTES.html
when you are ready to make the switch to Squid-4

Upgrade tip:
  "squid -k parse" is starting to display even more
   useful hints about squid.conf changes.

This new release can be downloaded from our HTTP or FTP servers

 http://www.squid-cache.org/Versions/v4/
 ftp://ftp.squid-cache.org/pub/squid/
 ftp://ftp.squid-cache.org/pub/archive/4/

or the mirrors. For a list of mirror sites see

 http://www.squid-cache.org/Download/http-mirrors.html
 http://www.squid-cache.org/Download/mirrors.html

If you encounter any issues with this release please file a bug report.
http://bugs.squid-cache.org/


Amos Jeffries


