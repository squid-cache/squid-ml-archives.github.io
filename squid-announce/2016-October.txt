From squid3 at treenet.co.nz  Thu Oct  6 10:05:33 2016
From: squid3 at treenet.co.nz (squid-users)
Date: RANDOM_Thu, 6 Oct 2016 13:05:33 +0300
Subject: [squid-announce] real facts
Message-ID: <0000e0b388f9$cee8d770$22f528a9$@treenet.co.nz>

An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-announce/attachments/20161006/7beb9f89/attachment.html>

From squid3 at treenet.co.nz  Wed Oct 12 14:42:07 2016
From: squid3 at treenet.co.nz (Amos Jeffries)
Date: Thu, 13 Oct 2016 03:42:07 +1300
Subject: [squid-announce] Squid 4.0.15 beta is available
Message-ID: <a6ebdec8-ee0a-a862-6b85-d1e497b467c7@treenet.co.nz>

The Squid HTTP Proxy team is very pleased to announce the availability
of the Squid-4.0.15 release!


This release is a bug fix and stability release resolving several issues
found in the prior Squid releases.


The major changes to be aware of:

This release there are no major changes. Despite the size of code
commited most of the change has been small polishing and stability
changes. Some incidental and minor memory leaks have been resolved, and
some crashes introduced by the new Squid-4 features have been resolved.


One change shared with 3.5.22 is noteworthy as it affects cache storage
formats:

* Bug #4471: revalidation doesn't work when expired cached object lacks
  Last-Modified header.

Historically Squid used only Last-Modified header value for evaluating
entry's last modification time while making an internal revalidation
requests. So, without Last-Modified it was not possible to correctly
fill the If-Modified-Since header value. Which would result in many
unnecessary MISS. This release now uses Date header to synthesize a
Last-Modified value if none is provided.

IMPORTANT:
This change affects a binary difference in all cache objects stored by
Squid-4.0.15 or later, and by Squid-3.5.22 or later.
 * When upgrading, older cache content is handled automatically.
 * When downgrading for any reason to an older version the cache will
need to be erased and rebuilt from empty to remove those new objects.


 All users of Squid-4.0.x are encouraged to upgrade to this release as
soon as possible.

 All users of Squid-3 are encouraged to test this release out and plan
for upgrades where possible.


 See the ChangeLog for the full list of changes in this and earlier
 releases.

Please refer to the release notes at
http://www.squid-cache.org/Versions/v4/RELEASENOTES.html
when you are ready to make the switch to Squid-4

This new release can be downloaded from our HTTP or FTP servers

 http://www.squid-cache.org/Versions/v4/
 ftp://ftp.squid-cache.org/pub/squid/
 ftp://ftp.squid-cache.org/pub/archive/4/

or the mirrors. For a list of mirror sites see

 http://www.squid-cache.org/Download/http-mirrors.html
 http://www.squid-cache.org/Download/mirrors.html

If you encounter any issues with this release please file a bug report.
http://bugs.squid-cache.org/


Amos Jeffries

From squid3 at treenet.co.nz  Wed Oct 12 14:42:29 2016
From: squid3 at treenet.co.nz (Amos Jeffries)
Date: Thu, 13 Oct 2016 03:42:29 +1300
Subject: [squid-announce] Squid 3.5.22 is available
Message-ID: <aa6d97d2-2174-12e9-b7e3-e50392bc4d7a@treenet.co.nz>

The Squid HTTP Proxy team is very pleased to announce the availability
of the Squid-3.5.22 release!


This release is a bug fix release resolving several issues found in the
prior Squid releases.


The major changes to be aware of:

* Bug #4471: revalidation doesn't work when expired cached object lacks
  Last-Modified header.

Historically Squid used only Last-Modified header value for evaluating
entry's last modification time while making an internal revalidation
requests. So, without Last-Modified it was not possible to correctly
fill the If-Modified-Since header value. Which would result in many
unnecessary MISS. This release now uses Date header to synthesize a
Last-Modified value if none is provided.

IMPORTANT:
This change affects a binary difference in all cache objects stored.
 * When upgrading, older cache content is handled automatically.
 * When downgrading for any reason to an older version the cache will
need to be erased and rebuilt from empty to remove those new objects.


* Bug #4228: ./configure bug/typo

This bug caused Squid ./configure script to incorrectly fail to detect
missing but required Heimdal and GNU GSS Kerberos libraries. Squid would
build as if it were successful, then not provide the expected Kerberos
support and helpers.


* Bug #3819: "fd >= 0" assertion in file_write() during reconfiguration

This bug shows up as UFS code hitting assertions if it has to log
entries or rebuild swap.state during reconfiguration steps.

Asynchronous UFS cache_dirs such as diskd were the most exposed, but
even blocking UFS caching code could probably hit [rebuild] assertions.
The swap.state rebuilding (always initiated at startup) probably did not
work as intended if reconfiguration happened during the rebuild time
because reconfiguration closed the swap.state file being rebuilt.

Squid now protects that swap.state file and delays rebuilding progress
until reconfiguration is over. There may be other related issues still
present.


* Bug #2833: Collapse internal revalidation requests
  (SMP-unaware caches)

This feature extends Collapsed Forwarding to internal revalidation
requests. This implementation does not support Vary-controlled cache
objects and is limited to SMP-unaware caching environments, where each
Squid worker knows nothing about requests and caches handled by other
workers.

Prior to these changes, multiple concurrent HTTP requests for the same
stale cached object always resulted in multiple internal revalidation
requests sent by Squid to the origin server. Those internal requests
were likely to result in multiple competing Squid cache updates, causing
cache misses and/or more internal revalidation requests, negating
collapsed forwarding savings.


* Bug #4302 pt2: IPFilter v5 transparent interception

This bug showed up as NAT lookup failures or strange IP values being
returned when IPv6 traffic was intercepted using IPFilter.


* Fix logged request size (%http::>st) and other size-related %codes.

Squid was previously logging how many bytes it expected the size of HTTP
responses to be. Not the actual transferred sizes. On large aborted
objects it may be wildly wrong.
Also, the %http:: codes used in ICAP logs are related to the HTTP
message being delivered over ICAP, not the ICAP message.



 All users of Squid-3 are encouraged to upgrade to this release as
soon as possible.


 See the ChangeLog for the full list of changes in this and earlier
 releases.

Please refer to the release notes at
http://www.squid-cache.org/Versions/v3/3.5/RELEASENOTES.html
when you are ready to make the switch to Squid-3.5

Upgrade tip:
  "squid -k parse" is starting to display even more
   useful hints about squid.conf changes.

This new release can be downloaded from our HTTP or FTP servers

 http://www.squid-cache.org/Versions/v3/3.5/
 ftp://ftp.squid-cache.org/pub/squid/
 ftp://ftp.squid-cache.org/pub/archive/3.5/

or the mirrors. For a list of mirror sites see

 http://www.squid-cache.org/Download/http-mirrors.html
 http://www.squid-cache.org/Download/mirrors.html

If you encounter any issues with this release please file a bug report.
http://bugs.squid-cache.org/


Amos Jeffries


From squid3 at treenet.co.nz  Fri Oct 28 10:40:17 2016
From: squid3 at treenet.co.nz (Amos Jeffries)
Date: Fri, 28 Oct 2016 23:40:17 +1300
Subject: [squid-announce] Squid Signing key rollover
Message-ID: <4098dd8a-8d48-ca1f-e32b-3761998047f3@treenet.co.nz>

The PGP key I use to sign Squid binaries and associated files is being
refreshed.

Squid-4.0.16 and later releases will be signed with the key;

 Email: Amos Jeffries (Squid Signing Key) <squid3 at treenet.co.nz>
 Fingerprint: B068 84ED B779 C89B 044E  64E3 CD6D BF8E F3B1 7D3E

 This new Squid-4 key has been signed by the Squid-3 key, and is
contained in the Squid Project keyring which can be downloaded from
<http://www.squid-cache.org/pgp.asc>

 It should also be found in the pool.sks-keyservers.net public servers.


Squid-3 releases will continue to be signed with the existing key to the
end of that versions support.


As always the .asc file published for any signed item contains the key
IDs and other details relevant for verifying that item.

If any issues are encountered please do not hesitate to contact me.

Amos Jeffries
The Squid Software Foundation

From squid3 at treenet.co.nz  Mon Oct 31 03:07:05 2016
From: squid3 at treenet.co.nz (Amos Jeffries)
Date: Mon, 31 Oct 2016 16:07:05 +1300
Subject: [squid-announce] Squid 4.0.16 beta is available
Message-ID: <8aae6d8f-f805-b92a-5306-81728b95e95b@treenet.co.nz>

The Squid HTTP Proxy team is very pleased to announce the availability
of the Squid-4.0.16 release!


This release is a bug fix and stability release resolving several issues
found in the prior Squid releases.


The major changes to be aware of:


* Regex ACL performance improvement

The code loading regex ACL data has been refactored. The result has been
a surprisingly large improvement in speed when loading configuration
files containing regex ACLs with many values.


* HTTP: initial support for Cache-Control:immutable

The 'immutable' Cache-Control value is a new experimental caching
control which allows servers to indicate certain responses are not going
to change during their freshness lifetime. It is an improved version the
refresh_pattern 'ignore-reload' option.

NP: the 'ignore-reload' option remains until this control is fully
standardised. It is expected to become increasingly useless as wider use
of 'immutable' grows amongst servers.


Some changes shared with the future 3.5.23 release are noteworthy:

* Bug #4627: fix generate-host-certificates default

The squid.conf documentation has for some time said that this feature
was enabled by default. That was incorrect for Squid-3 and previous
Squid-4 releases.

This release actually enables the certificate generator by default in
Squid-4.


* HTTP: support Vary:* caching

Under RFC 2616 responses containing "Vary: *" header were not cachable.
That requirement has been loosened by RFC 7231 and Squid is now able to
cache these responses.


* ssl::server_name ACL badly broken since inception

The original server_name code mishandled all SNI checks and some rare
host checks. This was most visible with the reports that the
ssl::server_name ACL tests would fail where the equivalent regex ACL
test would behave differently, usually by matching. Or in situations
where neither would match despite the value appearing to be available.


 All users of Squid-4.0.x with ACL type ssl::server_name or
ssl::server_name_regex should upgrade to this release and re-test for
desired SSL-Bump feature behaviour.

 All users of Squid-4.0.x are encouraged to upgrade to this release as
soon as possible.

 All users of Squid-3 are encouraged to test this release out and plan
for upgrades where possible.


 See the ChangeLog for the full list of changes in this and earlier
 releases.

Please refer to the release notes at
http://www.squid-cache.org/Versions/v4/RELEASENOTES.html
when you are ready to make the switch to Squid-4

This new release can be downloaded from our HTTP or FTP servers

 http://www.squid-cache.org/Versions/v4/
 ftp://ftp.squid-cache.org/pub/squid/
 ftp://ftp.squid-cache.org/pub/archive/4/

or the mirrors. For a list of mirror sites see

 http://www.squid-cache.org/Download/http-mirrors.html
 http://www.squid-cache.org/Download/mirrors.html

If you encounter any issues with this release please file a bug report.
http://bugs.squid-cache.org/


Amos Jeffries

