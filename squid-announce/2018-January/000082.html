<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-announce] [ADVISORY] SQUID-2018:1 Denial of Service issue in ESI Response processing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-announce%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-announce%5D%20%5BADVISORY%5D%20SQUID-2018%3A1%20Denial%20of%20Service%20issue%20in%0A%20ESI%20Response%20processing&In-Reply-To=%3Cb04c0b88-9a23-5c07-1f26-55765b38d76b%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="000081.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-announce] [ADVISORY] SQUID-2018:1 Denial of Service issue in ESI Response processing</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-announce%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-announce%5D%20%5BADVISORY%5D%20SQUID-2018%3A1%20Denial%20of%20Service%20issue%20in%0A%20ESI%20Response%20processing&In-Reply-To=%3Cb04c0b88-9a23-5c07-1f26-55765b38d76b%40treenet.co.nz%3E"
       TITLE="[squid-announce] [ADVISORY] SQUID-2018:1 Denial of Service issue in ESI Response processing">squid3 at treenet.co.nz
       </A><BR>
    <I>Sun Jan 21 07:52:36 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="000081.html">[squid-announce] [ADVISORY] SQUID-2018:2 Denial of Service issue in HTTP Message processing
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82">[ date ]</a>
              <a href="thread.html#82">[ thread ]</a>
              <a href="subject.html#82">[ subject ]</a>
              <a href="author.html#82">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>__________________________________________________________________

     Squid Proxy Cache Security Update Advisory SQUID-2018:1
__________________________________________________________________

Advisory ID:        SQUID-2018:1
Date:               Jan 19, 2018
Summary:            Denial of Service issue
                     in ESI Response processing.
Affected versions:  Squid 3.x -&gt; 3.5.27
                     Squid 4.x -&gt; 4.0.22
Fixed in version:   Squid 4.0.23
__________________________________________________________________

     <A HREF="http://www.squid-cache.org/Advisories/SQUID-2018_1.txt">http://www.squid-cache.org/Advisories/SQUID-2018_1.txt</A>
__________________________________________________________________

Problem Description:

  Due to incorrect pointer handling Squid is vulnerable to denial
  of service attack when processing ESI responses.

__________________________________________________________________

Severity:

  This problem allows a remote server delivering certain ESI
  response syntax to trigger a denial of service for all clients
  accessing the Squid service.

  This problem is limited to the Squid custom ESI parser.
  Squid built to use libxml2 or libexpat XML parsers do not have
  this problem.

__________________________________________________________________

Updated Packages:

  This bug is fixed by Squid version 4.0.23.

  In addition, patches addressing this problem for the stable
  releases can be found in our patch archives:

Squid 3.5:
  &lt;<A HREF="http://www.squid-cache.org/Versions/v3/3.5/changesets/SQUID-2018_1.patch">http://www.squid-cache.org/Versions/v3/3.5/changesets/SQUID-2018_1.patch</A>&gt;

Squid 4:
  &lt;<A HREF="http://www.squid-cache.org/Versions/v4/changesets/SQUID-2018_1.patch">http://www.squid-cache.org/Versions/v4/changesets/SQUID-2018_1.patch</A>&gt;

  If you are using a prepackaged version of Squid then please refer
  to the package vendor for availability information on updated
  packages.

__________________________________________________________________

Determining if your version is vulnerable:

  All Squid-2.x are not vulnerable.

  All Squid built with --disable-esi are not vulnerable.

  All Squid configured with &quot;esi_parser expat&quot; are not vulnerable.

  All Squid configured with &quot;esi_parser libxml2&quot; are not
  vulnerable.

  All Squid-3.0 versions built without --enable-esi are not
  vulnerable.

  All Squid-3.0 versions built with --enable-esi and using
  custom ESI parser for reverse-proxy are vulnerable.

  All Squid-3.1 and later versions up to and including
  Squid-3.5.27 being used for reverse-proxy are vulnerable.

  All Squid-3.1 and later versions up to and including
  Squid-3.5.27 being used for TLS / HTTPS interception are
  vulnerable.

  All unpatched Squid-4 up to and including Squid-4.0.22 being
  used as reverse-proxy are vulnerable.

  All unpatched Squid-4 up to and including Squid-4.0.22 being
  used as TLS/HTTPS intercept proxy are vulnerable.

__________________________________________________________________

Workarounds:

Either;

  Build Squid with --disable-esi

Or,

  Build Squid with &quot;--enable-esi --with-libxml2&quot; and in squid.conf
  configure &quot;esi_parser libxml2&quot;

Or,

  Build Squid with &quot;--enable-esi --with-expat&quot; and in squid.conf
  configure &quot;esi_parser expat&quot;

__________________________________________________________________

Contact details for the Squid project:

  For installation / upgrade support on binary packaged versions
  of Squid: Your first point of contact should be your binary
  package vendor.

  If your install and build Squid from the original Squid sources
  then the <A HREF="http://lists.squid-cache.org/listinfo/squid-announce">squid-users at lists.squid-cache.org</A> mailing list is your
  primary support point. For subscription details see
  &lt;<A HREF="http://www.squid-cache.org/Support/mailing-lists.html">http://www.squid-cache.org/Support/mailing-lists.html</A>&gt;.

  For reporting of non-security bugs in the latest STABLE release
  the squid bugzilla database should be used
  &lt;<A HREF="http://bugs.squid-cache.org/">http://bugs.squid-cache.org/</A>&gt;.

  For reporting of security sensitive bugs send an email to the
  <A HREF="http://lists.squid-cache.org/listinfo/squid-announce">squid-bugs at lists.squid-cache.org</A> mailing list. It's a closed
  list (though anyone can post) and security related bug reports
  are treated in confidence until the impact has been established.

__________________________________________________________________

Credits:

  The initial issue was reported by Louis Dion-Marcil on behalf of
  GoSecure.

  Fixed by Amos Jeffries from Treehouse Networks Ltd.

__________________________________________________________________

Revision history:

  2017-12-13 20:09:30 UTC Initial Report
  2018-01-18 23:10:00 UTC Patches Released
  2018-01-21 07:45:00 UTC Advisory and fixed packages released
__________________________________________________________________
END
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000081.html">[squid-announce] [ADVISORY] SQUID-2018:2 Denial of Service issue in HTTP Message processing
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#82">[ date ]</a>
              <a href="thread.html#82">[ thread ]</a>
              <a href="subject.html#82">[ subject ]</a>
              <a href="author.html#82">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-announce">More information about the squid-announce
mailing list</a><br>
</body></html>
