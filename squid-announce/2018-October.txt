From squid3 at treenet.co.nz  Tue Oct  2 11:27:44 2018
From: squid3 at treenet.co.nz (Amos Jeffries)
Date: Wed, 3 Oct 2018 00:27:44 +1300
Subject: [squid-announce] Squid 4.3 is available
Message-ID: <56e9cff4-5292-da8b-ffb6-905dcbcc44d8@treenet.co.nz>

The Squid HTTP Proxy team is very pleased to announce the availability
of the Squid-4.3 release!


This release is a bug fix release resolving several issues found in the
prior Squid releases.


The major changes to be aware of:


* Bug 4885: Excessive memory usage when running out of descriptors

When using some I/O select loops Squid can continue to allocate memory
for client connections after it has reached maximum available FD limits.
This release drops the memory to a fixed amount for each *_port
regardless of how many client connections arrive.


* Bug 4877: Add missing text about external_acl_type %DATA changes

The external_acl_type directive changes to encompass logformat codes
has a side effect on implicit %DATA parameters sent to the helpers.

Previous Squid versions would elide this field sometimes if no data
was contained - but only when implicit. Squid-4 will always send a
value, using '-' when no data exists.

This was omitted in earlier release documentation and caused some
surprises to admin with custom helpers not fully supporting the
current helper protocol.

Any users of this directive with custom helpers written for older
versions of Squid are advised to review what their helper is doing
and ensure that it can cope with the helper protocol fields documented
as 'optional'.


* Bug 4716: Blank lines in cachemgr.conf are not skipped

This bug appears as empty entries in the cachemgr.cgi web interface.
The Squid CGI tool will now elide such entries from display.


* Update systemd dependencies in squid.service

The squid.service file published with earlier releases lacked a
dependency on networking being fully operational. This resulted
in a mix of odd behaviours on machine startup when other networking
tools were slow to initialize NIC, DNS, or resolve.conf settings.

The squid.service file shipped with this release is expected to wait
until all networking resources are operational before Squid is started.



  All users of Squid-4 are encouraged to upgrade as time permits.

  All users of Squid-3 are encouraged to upgrade where possible.


See the ChangeLog for the full list of changes in this and earlier
releases.

Please refer to the release notes at
http://www.squid-cache.org/Versions/v4/RELEASENOTES.html
when you are ready to make the switch to Squid-4

This new release can be downloaded from our HTTP or FTP servers

  http://www.squid-cache.org/Versions/v4/
  ftp://ftp.squid-cache.org/pub/squid/
  ftp://ftp.squid-cache.org/pub/archive/4/

or the mirrors. For a list of mirror sites see

  http://www.squid-cache.org/Download/http-mirrors.html
  http://www.squid-cache.org/Download/mirrors.html

If you encounter any issues with this release please file a bug report.
  http://bugs.squid-cache.org/


Amos Jeffries

From squid3 at treenet.co.nz  Sun Oct 28 16:09:02 2018
From: squid3 at treenet.co.nz (Amos Jeffries)
Date: Mon, 29 Oct 2018 05:09:02 +1300
Subject: [squid-announce] Squid-4.4 is available
Message-ID: <642ea755-c458-fbb3-5bef-1e392e022f41@treenet.co.nz>

The Squid HTTP Proxy team is very pleased to announce the availability
of the Squid-4.4 release!


This release is a security and bug fix release resolving several issues
found in the prior Squid releases.


The major changes to be aware of:

* SQUID-1018:4
  Cross-Site Scripting issue in TLS error processing

 http://www.squid-cache.org/Advisories/SQUID-2018_4.txt

This problem allows a malicious HTTPS server to trigger error
page delivery to a client and also inject arbitrary HTML code
into the resulting error response.

This problem is limited to Squid built with TLS / SSL support.


* SQUID-2018:5
  Denial of Service issue in SNMP processing.

 http://www.squid-cache.org/Advisories/SQUID-2018_5.txt

This problem allows a remote attacker to consume all memory
available to the Squid process, causing it to crash.

In environments where per-process memory restrictions are not
enforced strictly, or configured to large values this may also
affect other processes operating on the same machine. Leading to
a much worse denial of service situation.

This problem is limited to Squid built with SNMP support and
receiving SNMP traffic.


* Bug 4893: Malformed %>ru URIs for CONNECT requests

This bug showed up as "://host:port" URLs being logged for some CONNECT
transactions in Squid-4.2 and 4.3. This release reverts Squid to the
previous log output.


* Fix %USER_CA_CERT_xx and %USER_CERT_xx

Previous Squid-4 would crash when these macros where used to pass values
to external ACL helpers. This issue is now fully resolved.


* Support compilation with minimal OpenSSL

Squid would not build successfully against an OpenSSL library
which had itself been built to omit deprecated features and API.
This Squid release should build in these minimized environments.



  All users of Squid-4 are urged to upgrade as soon as possible.

  All users of Squid-3 are encouraged to upgrade where possible.


See the ChangeLog for the full list of changes in this and earlier
releases.

Please refer to the release notes at
http://www.squid-cache.org/Versions/v4/RELEASENOTES.html
when you are ready to make the switch to Squid-4

This new release can be downloaded from our HTTP or FTP servers

  http://www.squid-cache.org/Versions/v4/
  ftp://ftp.squid-cache.org/pub/squid/
  ftp://ftp.squid-cache.org/pub/archive/4/

or the mirrors. For a list of mirror sites see

  http://www.squid-cache.org/Download/http-mirrors.html
  http://www.squid-cache.org/Download/mirrors.html

If you encounter any issues with this release please file a bug report.
  http://bugs.squid-cache.org/


Amos Jeffries

From squid3 at treenet.co.nz  Sun Oct 28 16:09:05 2018
From: squid3 at treenet.co.nz (Amos Jeffries)
Date: Mon, 29 Oct 2018 05:09:05 +1300
Subject: [squid-announce] [ADVISORY] SQUID-2018:5 Denial of Service issue in
	SNMP processing
Message-ID: <911fa5ae-f7d3-43fb-b452-c09abf73192b@treenet.co.nz>

__________________________________________________________________

    Squid Proxy Cache Security Update Advisory SQUID-2018:5
__________________________________________________________________

Advisory ID:        SQUID-2018:5
Date:               October 28, 2018
Summary:            Denial of Service issue
                    in SNMP processing.
Affected versions:  Squid 3.2.0.10 -> 3.5.28
                    Squid 4.x -> 4.3
Fixed in version:   Squid 4.4
__________________________________________________________________

    http://www.squid-cache.org/Advisories/SQUID-2018_5.txt
__________________________________________________________________

Problem Description:

 Due to a memory leak in SNMP query rejection code, Squid is
 vulnerable to a denial of service attack.

__________________________________________________________________

Severity:

 This problem allows a remote attacker to consume all memory
 available to the Squid process, causing it to crash.

 In environments where per-process memory restrictions are not
 enforced strictly, or configured to large values this may also
 affect other processes operating on the same machine. Leading to
 a much worse denial of service situation.

 This problem is limited to Squid built with SNMP support and
 receiving SNMP traffic.

__________________________________________________________________

Updated Packages:

 This bug is fixed by Squid version 4.4.

 In addition, patches addressing this problem for the stable
 releases can be found in our patch archives:

Squid 3.5:
 http://www.squid-cache.org/Versions/v3/3.5/changesets/squid-3.5-bc9786119f058a76ddf0625424bc33d36460b9a2.patch

Squid 4:
 http://www.squid-cache.org/Versions/v4/changesets/squid-4-983c5c36e5f109512ed1af38a329d0b5d0967498.patch

 If you are using a prepackaged version of Squid then please refer
 to the package vendor for availability information on updated
 packages.

__________________________________________________________________

Determining if your version is vulnerable:

 All Squid built with --disable-snmp are not vulnerable.

 All Squid-2.x and older versions are not vulnerable.

 All Squid-3.x up to and including 3.2.0.9 are not vulnerable.

 All Squid-3.x up to and including 3.5.28 configured with
 "snmp_port 0" are not vulnerable.

 All Squid-3.x up to and including 3.5.28 without snmp_port
 configured are not vulnerable.

 All Squid-3.2.0.10 and later 3.2.x versions with snmp_port
 configured to a non-0 value are vulnerable.

 All Squid-3.3 versions up to and including 3.3.14 with snmp_port
 configured to a non-0 value are vulnerable.

 All Squid-3.4 versions up to and including 3.4.14 with snmp_port
 configured to a non-0 value are vulnerable.

 All Squid-3.5 versions up to and including 3.5.28 with snmp_port
 configured to a non-0 value are vulnerable.

 All Squid-4.x versions up to and including 4.3 with snmp_port
 configured to a non-0 value are vulnerable.


To determine the version of your Squid and its build options use
the command:

 squid -v

To determine whether snmp_port is configured use the command:

 squid -k parse | grep snmp_port

__________________________________________________________________

Workarounds:

Either;

 Enable firewall inspection of SNMP packets to enforce blocking
 of any non-permitted packets prior to their arriving at Squid.

 This restriction of packet sources reduces the risk, but does not
 completely remove the vulnerability.

Or,

 Remove snmp_port and related configuration settings until Squid
 can be upgraded to a fixed build.

 This completely removes the vulnerability at cost of reduced
 management and monitoring capabilities.

__________________________________________________________________

Contact details for the Squid project:

 For installation / upgrade support on binary packaged versions
 of Squid: Your first point of contact should be your binary
 package vendor.

 If your install and build Squid from the original Squid sources
 then the squid-users at lists.squid-cache.org mailing list is your
 primary support point. For subscription details see
 <http://www.squid-cache.org/Support/mailing-lists.html>.

 For reporting of non-security bugs in the latest STABLE release
 the squid bugzilla database should be used
 <http://bugs.squid-cache.org/>.

 For reporting of security sensitive bugs send an email to the
 squid-bugs at lists.squid-cache.org mailing list. It's a closed
 list (though anyone can post) and security related bug reports
 are treated in confidence until the impact has been established.

__________________________________________________________________

Credits:

 This vulnerability was discovered and fixed by Florian Kohnhäuser

__________________________________________________________________

Revision history:

 2018-10-23 06:15:46 UTC Initial Report
 2018-10-23 21:42:58 UTC Patch Released
 2018-10-27 21:19:00 UTC Packages Released
__________________________________________________________________
END

From squid3 at treenet.co.nz  Sun Oct 28 16:09:09 2018
From: squid3 at treenet.co.nz (Amos Jeffries)
Date: Mon, 29 Oct 2018 05:09:09 +1300
Subject: [squid-announce] [ADVISORY] SQUID-2018:4 Cross-Site Scripting issue
 in TLS error processing
Message-ID: <cba3e2f4-bbc8-e639-3775-06b8277afe66@treenet.co.nz>

__________________________________________________________________

    Squid Proxy Cache Security Update Advisory SQUID-2018:4
__________________________________________________________________

Advisory ID:        SQUID-2018:4
Date:               October 28, 2018
Summary:            Cross-Site Scripting issue
                    in TLS error processing.
Affected versions:  Squid 3.1.12.1 -> 3.1.23
                    Squid 3.2.0.4 -> 3.5.28
                    Squid 4.0 -> 4.3
Fixed in version:   Squid 4.4
__________________________________________________________________

    http://www.squid-cache.org/Advisories/SQUID-2018_4.txt
__________________________________________________________________

Problem Description:

 Due to incorrect input handling, Squid is vulnerable to a
 Cross-Site Scripting vulnerability when generating HTTPS response
 messages about TLS errors.

__________________________________________________________________

Severity:

 This problem allows a malicious HTTPS server to trigger error
 page delivery to a client and also inject arbitrary HTML code
 into the resulting error response.

 This problem is limited to Squid built with TLS / SSL support.

__________________________________________________________________

Updated Packages:

 This bug is fixed by Squid version 4.4.

 In addition, patches addressing this problem for the stable
 releases can be found in our patch archives:

Squid 3.5:
 http://www.squid-cache.org/Versions/v3/3.5/changesets/squid-3.5-f1657a9decc820f748fa3aff68168d3145258031.patch

Squid 4:
 http://www.squid-cache.org/Versions/v4/changesets/squid-4-828245b90206602014ce057c3db39fb80fcc4b08.patch

 If you are using a prepackaged version of Squid then please refer
 to the package vendor for availability information on updated
 packages.

__________________________________________________________________

Determining if your version is vulnerable:

 All Squid-2.x and older are not vulnerable.

 All Squid-3.0 and older version are not vulnerable.

 All Squid-3.x versions up to and including 3.4.14 built with
 --disable-ssl are not vulnerable.

 All Squid-3.x versions up to and including 3.4.14 built without
 --enable-ssl are not vulnerable.

 All Squid-3.1.12.1 and later versions up to and including
 Squid-3.1.23 built with --enable-ssl are vulnerable.

 All Squid-3.2.0.4 and later versions up to and including
 Squid-3.2.14 built with --enable-ssl are vulnerable.

 All Squid-3.3 and later versions up to and including
 Squid-3.3.14 built with --enable-ssl are vulnerable.

 All Squid-3.4 and later versions up to and including
 Squid-3.4.14 built with --enable-ssl are vulnerable.

 All Squid-3.5 versions up to and including 3.5.28 built without
 --with-openssl are not vulnerable.

 All Squid-3.5 and later versions up to and including 3.5.28 built
 with --with-openssl are vulnerable.

 All Squid-4 versions built without --with-openssl are not
 vulnerable.

 All Squid-4 versions up to and including 4.3 built with
 --with-openssl are vulnerable.

__________________________________________________________________

Workarounds:

Either;

 Remove %D error page macro from ERR_SECURE_CONNECT_FAIL and any
 custom error pages.

Or,

 Build Squid-3.1 to 3.4.14 without "--enable-ssl"

Or,

 Build Squid-3.5 or later without "--with-openssl"

__________________________________________________________________

Contact details for the Squid project:

 For installation / upgrade support on binary packaged versions
 of Squid: Your first point of contact should be your binary
 package vendor.

 If your install and build Squid from the original Squid sources
 then the squid-users at lists.squid-cache.org mailing list is your
 primary support point. For subscription details see
 <http://www.squid-cache.org/Support/mailing-lists.html>.

 For reporting of non-security bugs in the latest STABLE release
 the squid bugzilla database should be used
 <http://bugs.squid-cache.org/>.

 For reporting of security sensitive bugs send an email to the
 squid-bugs at lists.squid-cache.org mailing list. It's a closed
 list (though anyone can post) and security related bug reports
 are treated in confidence until the impact has been established.

__________________________________________________________________

Credits:

 This vulnerability was discovered by Nikolas Lohmann of eBlocker
 GmbH.

 Fixed by Christos Tsantilas on behalf of Measurement Factory.

__________________________________________________________________

Revision history:

 2018-10-15 10:59:16 UTC Initial Report
 2018-10-17 15:13:41 UTC Patches Released
 2018-10-27 21:19:00 UTC Packages Released
__________________________________________________________________
END

