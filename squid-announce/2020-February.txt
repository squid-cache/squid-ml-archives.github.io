From squid3 at treenet.co.nz  Mon Feb  3 11:54:17 2020
From: squid3 at treenet.co.nz (Amos Jeffries)
Date: Tue, 4 Feb 2020 00:54:17 +1300
Subject: [squid-announce] Squid 4.10 is available
Message-ID: <19c98dc6-3dbc-0c33-4b2d-c75fad7af5a5@treenet.co.nz>

The Squid HTTP Proxy team is very pleased to announce the availability
of the Squid-4.10 release!


This release is a security release resolving several issues found in
the prior Squid releases.


The major changes to be aware of:


 * SQUID-2020:1 Improper Input Validation issues in HTTP Request
   processing
   (CVE-2020-8449, CVE-2020-8450)

This issue allows attackers to perform denial of service on the
proxy and all clients using it.

This issue potentially allows attackers to bypass security access
controls in systems between client and proxy.

This issue potentially allows remote code execution under the
proxy low-privilege level. While restricted, it does have access
to a wide range of information about the network structure and
other clients using the proxy.

This issue is limited to Squid acting as a reverse-proxy. Some
effects also require allow_direct permissions.

See the advisory for updated patches:
 <http://www.squid-cache.org/Advisories/SQUID-2020_1.txt>


Please note that NTLM is a deprecated authentication mechanism.
All users of this tool are advised to plan migration to
Negotiate/Kerberos authentication.


 * SQUID-2020:2 Information Disclosure issue in FTP Gateway.
   (CVE-2019-12528)

Certain FTP server responses can result in Squid revealing
random amounts of memory content from heap.

When Squid mempools feature is enabled the leak is limited to
lines in FTP directory listings, possibly from other clients.

When mempools is disabled the information may be anything from
the heap area including information from other processes on the
machine.

See the advisory for more details:
 <http://www.squid-cache.org/Advisories/SQUID-2020_2.txt>


 * SQUID-2020:3 Buffer Overflow issue in ext_lm_group_acl helper.
   (CVE-2020-8517)

This problem is limited to installations using the ext_lm_group_acl
binary (previously shipped as mswin_check_lm_group).

Due to incorrect input validation the NTLM authentication
credentials parser in ext_lm_group_acl may write to memory
outside the credentials buffer.

On systems with memory access protections this can result in
the the helper process being terminated unexpectedly. Resulting
in Squid process also terminating and a denial of service for
all clients using the proxy.

See the advisory for more details:
 <http://www.squid-cache.org/Advisories/SQUID-2020_3.txt>


 * Bug 5008: SIGBUS in PagePool::level() with custom rock slot size

This shows up as SMP Squids crashing on arm64 with a SIGBUS error. The
issues was incorrect memory alignment with certain cache sizes. This
Squid release now forces alignment of the critical rock page details.


 * Bug 4735: Truncated chunked responses cached as whole

This bug shows up as clients getting the cached truncated response
objects until the cache object expires or is force removed.

In absence of partial-object caching this Squid release treats
incomplete responses as non-cacheable and prevents the chunked encoding
terminator chunk being delivered to the active client(s).


 * Fix server_cert_fingerprint on cert validator-reported errors

This bug shows up as a server_cert_fingerprint ACL mismatch when
sslproxy_cert_error directive was applied to validation errors reported
by the certificate validator, because the ACL could not find the server
certificate.


  All users of Squid are urged to upgrade as soon as possible.


See the ChangeLog for the full list of changes in this and earlier
releases.

Please refer to the release notes at
http://www.squid-cache.org/Versions/v4/RELEASENOTES.html
when you are ready to make the switch to Squid-4

This new release can be downloaded from our HTTP or FTP servers

  http://www.squid-cache.org/Versions/v4/
  ftp://ftp.squid-cache.org/pub/squid/
  ftp://ftp.squid-cache.org/pub/archive/4/

or the mirrors. For a list of mirror sites see

  http://www.squid-cache.org/Download/http-mirrors.html
  http://www.squid-cache.org/Download/mirrors.html

If you encounter any issues with this release please file a bug report.
  http://bugs.squid-cache.org/


Amos Jeffries

From squid3 at treenet.co.nz  Mon Feb  3 11:54:40 2020
From: squid3 at treenet.co.nz (Amos Jeffries)
Date: Tue, 4 Feb 2020 00:54:40 +1300
Subject: [squid-announce] [ADVISORY] SQUID-2020:3 Buffer Overflow issue in
 ext_lm_group_acl helper.
Message-ID: <a7614004-b548-3672-eed0-73a03149532a@treenet.co.nz>

__________________________________________________________________

    Squid Proxy Cache Security Update Advisory SQUID-2020:3
__________________________________________________________________

Advisory ID:        SQUID-2020:3
Date:               February 02, 2020
Summary:            Buffer Overflow issue
                    in ext_lm_group_acl helper.
Affected versions:  Squid 2.x -> 2.7.STABLE9
                    Squid 3.x -> 3.5.28
                    Squid 4.x -> 4.9
Fixed in version:   Squid 4.10
__________________________________________________________________

    http://www.squid-cache.org/Advisories/SQUID-2019_3.txt
    http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-8517
__________________________________________________________________

Problem Description:

 Due to incorrect buffer management ext_lm_group_acl is vulnerable
 to a denial of service attack when processing NTLM Authentication
 credentials.

__________________________________________________________________

Severity:

 This problem is limited to installations using the
 ext_lm_group_acl binary.

 Due to incorrect input validation the NTLM authentication
 credentials parser in ext_lm_group_acl may write to memory
 outside the credentials buffer.

 On systems with memory access protections this can result in
 the the helper process being terminated unexpectedly. Resulting
 in Squid process also terminating and a denial of service for
 all clients using the proxy.

__________________________________________________________________

Updated Packages:

 This bug is fixed by ext_lm_group_acl from Squid version 4.10.

 In addition, patches addressing this problem for the stable
 releases can be found in our patch archives:

Squid 3.5:
 <http://www.squid-cache.org/Versions/v3/3.5/changesets/squid-3.5-c62d2b43ad4962ea44aa0c5edb4cc99cb83a413d.patch>

Squid 4:
 <http://www.squid-cache.org/Versions/v4/changesets/squid-4-6982f1187a26557e582172965e266f544ea562a5.patch>

 If you are using a prepackaged version of Squid then please refer
 to the package vendor for availability information on updated
 packages.

__________________________________________________________________

Determining if your version is vulnerable:

The helper was shipped as mswin_check_lm_group with Squid-3.1 and
older. Also as a third-party helper prior to Squid-2.6.

 All Squid using the mswin_check_lm_group helper for group
 based authorization are vulnerable.


 All Squid not using the ext_lm_group_acl helper for group
 based authorization are not vulnerable.

 All Squid-3.x up to and including 3.5.28 being used for NTLM
 Authentication with ext_lm_group_acl helper are vulnerable.

 All Squid-4.x up to and including 4.9 being used for NTLM
 Authentication with ext_lm_group_acl helper are vulnerable.


To determine whether Squid-3.2 and later are configured to use
the affected helper use the commands:

 squid -k parse | grep ext_lm_group_acl

 squid -k parse | grep mswin_check_lm_group


To determine whether Squid-3.1 and older are configured to use
the affected helper use the commands:

 grep ext_lm_group_acl /etc/squid/squid.conf

 grep mswin_check_lm_group /etc/squid/squid.conf

__________________________________________________________________

Workarounds:

Either;

 Remove 'auth_param NTLM ...' configuration settings from
 squid.conf.

Or,

 Use ext_lm_group_acl binary built from Squid-4.10 or later
 versions.


__________________________________________________________________

Contact details for the Squid project:

 For installation / upgrade support on binary packaged versions
 of Squid: Your first point of contact should be your binary
 package vendor.

 If your install and build Squid from the original Squid sources
 then the squid-users at lists.squid-cache.org mailing list is your
 primary support point. For subscription details see
 <http://www.squid-cache.org/Support/mailing-lists.html>.

 For reporting of non-security bugs in the latest STABLE release
 the squid bugzilla database should be used
 <http://bugs.squid-cache.org/>.

 For reporting of security sensitive bugs send an email to the
 squid-bugs at lists.squid-cache.org mailing list. It's a closed
 list (though anyone can post) and security related bug reports
 are treated in confidence until the impact has been established.

__________________________________________________________________

Credits:

 This vulnerability was discovered and fixed by Aaron Costello
 <aaron.costello at ymail.com>.

__________________________________________________________________

Revision history:

 2019-11-11 10:25:02 UTC Initial Report
 2019-11-22 02:44:29 UTC Patches Released
__________________________________________________________________
END

From squid3 at treenet.co.nz  Mon Feb  3 11:54:23 2020
From: squid3 at treenet.co.nz (Amos Jeffries)
Date: Tue, 4 Feb 2020 00:54:23 +1300
Subject: [squid-announce] [ADVISORY] SQUID-2020:2 Information Disclosure
	issue in FTP Gateway.
Message-ID: <3a32a734-2263-5cf9-3d74-43fa9cdcf4f4@treenet.co.nz>

__________________________________________________________________

    Squid Proxy Cache Security Update Advisory SQUID-2020:2
__________________________________________________________________

Advisory ID:        SQUID-2020:2
Date:               February 02, 2020
Summary:            Information Disclosure issue
                    in FTP Gateway.
Affected versions:  Squid 2.x -> 2.7.STABLE9
                    Squid 3.x -> 3.5.28
                    Squid 4.x -> 4.9
Fixed in version:   Squid 4.10
__________________________________________________________________

    http://www.squid-cache.org/Advisories/SQUID-2020_2.txt
    http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-12528
__________________________________________________________________

Problem Description:

 Due to incorrect data management Squid is vulnerable to a
 information disclosure when translating FTP server listings
 into HTTP responses.

__________________________________________________________________

Severity:

 Certain FTP server responses can result in Squid revealing
 random amounts of memory content from heap.

 When Squid mempools feature is enabled the leak is limited to
 lines in FTP directory listings, possibly from other clients.

 When mempools is disabled the information may be anything from
 the heap area including information from other processes on the
 machine.

__________________________________________________________________

Updated Packages:

 This bug is fixed by Squid version 4.10.

 In addition, a patch addressing this problem for the stable
 releases can be found in our patch archives:

Squid 3:
 <http://www.squid-cache.org/Versions/v3/3.5/changesets/squid-3.5-8cdb18ca1829a0b7faa1c9e472604ed0e7e105ac.patch>

Squid 4:
 <http://www.squid-cache.org/Versions/v4/changesets/squid-4-c1bebac9c1135b7add6589db35c62f16db195b8f.patch>

 If you are using a prepackaged version of Squid then please refer
 to the package vendor for availability information on updated
 packages.

__________________________________________________________________

Determining if your version is vulnerable:

 All Squid-2.x up to and including 2.7.STABLE9 are vulnerable.

 All Squid-3.x up to and including 3.5.28 are vulnerable.

 All Squid-4.x up to and including 4.9 are vulnerable.

__________________________________________________________________

Workarounds:

 * To disable FTP features

  Remove from squid.conf:

    acl Safe_ports 21

  Add to squid.conf:

    acl FTP proto FTP
    http_access deny FTP


 * To reduce leakage while retaining FTP features:

  Remove from squid.conf:

   memory_pools off


__________________________________________________________________

Contact details for the Squid project:

 For installation / upgrade support on binary packaged versions
 of Squid: Your first point of contact should be your binary
 package vendor.

 If your install and build Squid from the original Squid sources
 then the squid-users at lists.squid-cache.org mailing list is your
 primary support point. For subscription details see
 <http://www.squid-cache.org/Support/mailing-lists.html>.

 For reporting of non-security bugs in the latest STABLE release
 the squid bugzilla database should be used
 <http://bugs.squid-cache.org/>.

 For reporting of security sensitive bugs send an email to the
 squid-bugs at lists.squid-cache.org mailing list. It's a closed
 list (though anyone can post) and security related bug reports
 are treated in confidence until the impact has been established.

__________________________________________________________________

Credits:

 This vulnerability was discovered by Jeriko One
 <jeriko.one at gmx.us>.

 Fixed by Christos Tsantilas of The Measurement Factory.

__________________________________________________________________

Revision history:

 2019-05-14 14:56:49 UTC Initial Report
 2019-06-05 15:52:17 UTC CVE Assignment
 2019-12-20 07:29:58 UTC Patches Released
__________________________________________________________________
END

From squid3 at treenet.co.nz  Mon Feb  3 11:54:20 2020
From: squid3 at treenet.co.nz (Amos Jeffries)
Date: Tue, 4 Feb 2020 00:54:20 +1300
Subject: [squid-announce] [ADVISORY] SQUID-2020:1 Improper Input Validation
 issues in HTTP Request processing.
Message-ID: <6b7c023e-5caa-b1e1-8817-7451fc905d5c@treenet.co.nz>

__________________________________________________________________

    Squid Proxy Cache Security Update Advisory SQUID-2020:1
__________________________________________________________________

Advisory ID:        SQUID-2020:1
Date:               February 03, 2020
Summary:            Improper Input Validation issues
                    in HTTP Request processing.
Affected versions:  Squid 2.x -> 2.7.STABLE9
                    Squid 3.x -> 3.5.28
                    Squid 4.x -> 4.9
Fixed in version:   Squid 4.10
__________________________________________________________________

    http://www.squid-cache.org/Advisories/SQUID-2020_1.txt
    http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-8449
    http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-8450
__________________________________________________________________

Problem Description:

 Due to incorrect input validation Squid can interpret crafted
 HTTP requests in unexpected ways to access server resources
 prohibited by earlier security filters.

 Due to incorrect buffer management a remote client can cause
 a buffer overflow in a Squid acting as reverse-proxy.

__________________________________________________________________

Severity:

 This issue allows attackers to perform denial of service on the
 proxy and all clients using it.

 This issue potentially allows attackers to bypass security access
 controls in systems between client and proxy.

 This issue potentially allows remote code execution under the
 proxy low-privilege level. While restricted, it does have access
 to a wide range of information about the network structure and
 other clients using the proxy.

 This issue is limited to Squid acting as a reverse-proxy. Some
 effects also require allow_direct permissions.

__________________________________________________________________

Updated Packages:

 This bug is fixed by Squid version 4.10.

 In addition, patches addressing this problem for the stable
 releases can be found in our patch archives:

Squid 3.5:
 <http://www.squid-cache.org/Versions/v3/3.5/changesets/SQUID-2020_1.patch>

Squid 4.8 and older:
 <http://www.squid-cache.org/Versions/v4/changesets/SQUID-2020_1.patch>

Squid 4.9:
 <http://www.squid-cache.org/Versions/v4/changesets/squid-4-b3a0719affab099c684f1cd62b79ab02816fa962.patch>

 If you are using a prepackaged version of Squid then please refer
 to the package vendor for availability information on updated
 packages.

__________________________________________________________________

Determining if your version is vulnerable:

 All Squid-2.x up to and including 2.7.STABLE9 with http_port
 'accel' or 'vhost' options configured are vulnerable.

 All Squid-3.x up to and including 3.5.28 with http_port
 'accel' or 'vhost' options configured are vulnerable.

 All Squid-4.x up to and including 4.9 with with http_port
 'accel' option configured are vulnerable.


To determine what port options are configured use the command:

 squid -k parse | grep -E _port

__________________________________________________________________

Workarounds:

 There are no workarounds.

__________________________________________________________________

Contact details for the Squid project:

 For installation / upgrade support on binary packaged versions
 of Squid: Your first point of contact should be your binary
 package vendor.

 If your install and build Squid from the original Squid sources
 then the squid-users at lists.squid-cache.org mailing list is your
 primary support point. For subscription details see
 <http://www.squid-cache.org/Support/mailing-lists.html>.

 For reporting of non-security bugs in the latest STABLE release
 the squid bugzilla database should be used
 <http://bugs.squid-cache.org/>.

 For reporting of security sensitive bugs send an email to the
 squid-bugs at lists.squid-cache.org mailing list. It's a closed
 list (though anyone can post) and security related bug reports
 are treated in confidence until the impact has been established.

__________________________________________________________________

Credits:

 Security Bypass and Server Side Request Forgery vulnerability
 was discovered by Regis Leroy (regilero from Makina Corpus).

 Denial of Service and Remote Code Execution vulnerability was
 discovered by Guido Vranken.

 Fixed by Amos Jeffries of Treehouse Networks Ltd. and Guido
 Vranken.

__________________________________________________________________

Revision history:

 2019-07-24 11:52:51 UTC Initial Report
 2019-08-13 13:50:06 UTC Initial Patches Released
 2019-10-05 02:05:23 UTC Additional Report
 2019-12-12 03:27:40 UTC Additional Patches Released
__________________________________________________________________
END

