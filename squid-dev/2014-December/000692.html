<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [PATCH] invalid certificates and spliced connections
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20invalid%20certificates%20and%20spliced%20connections&In-Reply-To=%3C54946E2D.9090400%40users.sourceforge.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="000710.html">
   <LINK REL="Next"  HREF="000705.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [PATCH] invalid certificates and spliced connections</H1>
    <B>Tsantilas Christos</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20invalid%20certificates%20and%20spliced%20connections&In-Reply-To=%3C54946E2D.9090400%40users.sourceforge.net%3E"
       TITLE="[squid-dev] [PATCH] invalid certificates and spliced connections">chtsanti at users.sourceforge.net
       </A><BR>
    <I>Fri Dec 19 18:27:57 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="000710.html">[squid-dev] Jenkins build is back to normal :	3.HEAD-x64-debian-unstable #776
</A></li>
        <LI>Next message: <A HREF="000705.html">[squid-dev] [PATCH] invalid certificates and spliced connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#692">[ date ]</a>
              <a href="thread.html#692">[ thread ]</a>
              <a href="subject.html#692">[ subject ]</a>
              <a href="author.html#692">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Currently peek-and-splice mode have the following bug:
   1) When the certificate validation procedure found that the 
certificate is invalid, splice action is selected and the certificate 
validator helpers are not used it will splice the connection (even if 
certificates found invalid).

   2) When server sends a malformed or unsupported Hello response, squid 
may splice the connection if splice action is configured.

This patch, cause squid to return an error page to the user for both cases.

But about the (2) I need squid developers opinions:

  a) Should we abort with an error when a malformed or unsupported 
server hello message received?
In this case the user may be able to control squid behaviour using 
cert_validator helpers: squid will send empty certificates list, and 
cert validator can respond with en error.

  b) Abort with an error, if the server response can not be parsed.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: invalid-certificates-and-spliced-connections-t3.patch
Type: text/x-patch
Size: 2591 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-dev/attachments/20141219/5b50a7b1/attachment.bin">http://lists.squid-cache.org/pipermail/squid-dev/attachments/20141219/5b50a7b1/attachment.bin</A>&gt;
</PRE>
























































































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000710.html">[squid-dev] Jenkins build is back to normal :	3.HEAD-x64-debian-unstable #776
</A></li>
	<LI>Next message: <A HREF="000705.html">[squid-dev] [PATCH] invalid certificates and spliced connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#692">[ date ]</a>
              <a href="thread.html#692">[ thread ]</a>
              <a href="subject.html#692">[ subject ]</a>
              <a href="author.html#692">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
