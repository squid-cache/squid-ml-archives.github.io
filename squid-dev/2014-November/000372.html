<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [PATCH] New format code %acl_matched to log the last matched acl
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20New%20format%20code%20%25acl_matched%20to%20log%20the%0A%20last%20matched%20acl&In-Reply-To=%3C54688707.9080401%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="000370.html">
   <LINK REL="Next"  HREF="000377.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [PATCH] New format code %acl_matched to log the last matched acl</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20New%20format%20code%20%25acl_matched%20to%20log%20the%0A%20last%20matched%20acl&In-Reply-To=%3C54688707.9080401%40treenet.co.nz%3E"
       TITLE="[squid-dev] [PATCH] New format code %acl_matched to log the last matched acl">squid3 at treenet.co.nz
       </A><BR>
    <I>Sun Nov 16 11:14:15 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="000370.html">[squid-dev] [PATCH] New format code %acl_matched to log the last	matched acl
</A></li>
        <LI>Next message: <A HREF="000377.html">[squid-dev] [PATCH] New format code %acl_matched to log the last matched acl
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#372">[ date ]</a>
              <a href="thread.html#372">[ thread ]</a>
              <a href="subject.html#372">[ subject ]</a>
              <a href="author.html#372">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 16/11/2014 8:00 a.m., Alfonso Ali wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I know that it's possible to obtain the last acl that was matched
</I>&gt;<i> by using the correct debug options, but my company have found some
</I>&gt;<i> use cases (mainly related with accounting) where this info could be
</I>&gt;<i> useful without the need of the extra debug information.
</I>
What exactly are those use-cases please? Accounting what exactly?

This is important to document as it informs us whether this patch is
only useful for you, or could be useful for others. It may also be
that your use-case is far better served by some other feature or patch
addition.

&gt;<i> 
</I>&gt;<i> Our first approach to the problem used external acls but when the
</I>&gt;<i> load was high we found that some log lines were outputting the
</I>&gt;<i> wrong value,
</I>
? sounds like a bug. In which case fixing the bug is the right
approach. Some details on what you found would be appreciated. You can
report through bugzilla to keep this thread clean.

&gt;<i> so we decided to add this new format code.
</I>&gt;<i> 
</I>&gt;<i> I'm sending the patch for your consideration.
</I>
Please be aware the named ACL is not valid to be used outside of
Checklist matching sequences. It contains the last ACL to be named
*including* any ACLs tested in figuring out where to log the traffic.
Even if no ACLs are tested determining the log to write to, the name
may be altered at any time by a concurrent request being processed
through some other ACLs.

Amos

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.22 (MingW32)

iQEcBAEBAgAGBQJUaIcHAAoJELJo5wb/XPRjacAIALUgVqQih+RAd4yiaHLe2y/D
NXB8hwymVroRJ3EfFAv52o543QzNhIw5dgt4kjsenPh5e8L8bqeoOPMGI2PL8KGa
WoPfDAPbqQo3NZOMOwFsl6FwHPXYdwsR2Dz/lM7ntko6W+bkW5DASU2Ff/9M3u7q
dh3pMxbocydyW6Zn16tNdcu7lcrHyTKRCZmDHaTRX4TuBTO0eiTAIjKn3fsOhnLq
2XpgJ8LRfa1ioZg7FqGh0WNRSV5yF8njVfGR4NEHD1rDv3UW9ph/hIveTptyqhhX
h8fxEVUlUa18pfJARmRYaPlfRgznSRGobMyb5Hl6ypvLyQxZa+fa9/YOZ8rTzXY=
=CD1Y
-----END PGP SIGNATURE-----
</PRE>








































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000370.html">[squid-dev] [PATCH] New format code %acl_matched to log the last	matched acl
</A></li>
	<LI>Next message: <A HREF="000377.html">[squid-dev] [PATCH] New format code %acl_matched to log the last matched acl
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#372">[ date ]</a>
              <a href="thread.html#372">[ thread ]</a>
              <a href="subject.html#372">[ subject ]</a>
              <a href="author.html#372">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
