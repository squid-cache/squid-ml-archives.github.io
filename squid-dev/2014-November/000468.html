<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] splay.h replacement
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20splay.h%20replacement&In-Reply-To=%3C546F79C0.1080105%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="000428.html">
   <LINK REL="Next"  HREF="000487.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] splay.h replacement</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20splay.h%20replacement&In-Reply-To=%3C546F79C0.1080105%40treenet.co.nz%3E"
       TITLE="[squid-dev] splay.h replacement">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Nov 21 17:43:29 UTC 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="000428.html">[squid-dev] splay.h replacement
</A></li>
        <LI>Next message: <A HREF="000487.html">[squid-dev] splay.h replacement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#468">[ date ]</a>
              <a href="thread.html#468">[ thread ]</a>
              <a href="subject.html#468">[ subject ]</a>
              <a href="author.html#468">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 19/11/2014 4:08 a.m., Tsantilas Christos wrote:
&gt;<i> The compiler has right....
</I>&gt;<i> 
</I>
I know the cimpilers right about it being garbage. Its just the code
looks like there are things in those templates which are wrongly
depending on the objects being NULL pointers for certain causes.
splay.h needs a serious revamp.


I've gone through now and dropped all the if() and asserts depending
on this==NULL or this!=NULL conditionals. Will apply that when clang
3.5 confirms teh build works.

Amos

&gt;<i> 
</I>&gt;<i> On 11/18/2014 05:23 AM, Amos Jeffries wrote:
</I>&gt;&gt;<i> Y'all may have noticed the clang 3.5 errors.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> lib/MemPoolChunked.cc:370:10: error: 'this' pointer cannot be
</I>&gt;&gt;<i> null in well-defined C++ code; pointer may be assumed to always
</I>&gt;&gt;<i> convert to true [-Werror,-Wundefined-bool-conversion]
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> include/splay.h:228:9: error: 'this' pointer cannot be null in 
</I>&gt;&gt;<i> well-defined C++ code; comparison may be assumed to always
</I>&gt;&gt;<i> evaluate to false [-Werror,-Wtautological-undefined-compare]
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> include/splay.h:198:9: error: 'this' pointer cannot be null in 
</I>&gt;&gt;<i> well-defined C++ code; comparison may be assumed to always
</I>&gt;&gt;<i> evaluate to false [-Werror,-Wtautological-undefined-compare]
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> include/splay.h:167:9: error: 'this' pointer cannot be null in 
</I>&gt;&gt;<i> well-defined C++ code; comparison may be assumed to always
</I>&gt;&gt;<i> evaluate to false [-Werror,-Wtautological-undefined-compare]
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> include/splay.h:228:9: error: 'this' pointer cannot be null in 
</I>&gt;&gt;<i> well-defined C++ code; comparison may be assumed to always
</I>&gt;&gt;<i> evaluate to false [-Werror,-Wtautological-undefined-compare]
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Anyone in a position to update the splay tree code so it stops 
</I>&gt;&gt;<i> depending on NULL pointer dereferences having meaning?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> It is mandatory change for continued FreeBSD support.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Amos
</I>

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.22 (MingW32)

iQEcBAEBAgAGBQJUb3m7AAoJELJo5wb/XPRjdTsIANox6wcjNevn7GJ8QfjXlz/7
kLFgo3j8YRbvhiPhJVkXH53J2o0RppanD3J6+mHTyD/J44X3bv8zk21xZBoyvvPB
d8TUpZcxW6MHnUu4IVkj0KC9D3atgVOOG9lluJZ3QXy+rIGLs3N3zBl/TBGwZiSL
b3FmW4x6epp+ifUsL8p0MJ9yGTALWrCA4XSo0+ZmH3s5q35vO9Qye4N7IDoCsAZV
mUeY4v/vn3RhynFYdRmfVSst+U8X2vY0o+8l4JTsw5n/mkYXxdT/+m6yK1YsEvUt
a3dvabvmceB6Gz6+D9ru/gIxg1Z15UpfJfzP6oU/Zz+/INHtaZiz/pBcJCojHR0=
=L7FS
-----END PGP SIGNATURE-----
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000428.html">[squid-dev] splay.h replacement
</A></li>
	<LI>Next message: <A HREF="000487.html">[squid-dev] splay.h replacement
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#468">[ date ]</a>
              <a href="thread.html#468">[ thread ]</a>
              <a href="subject.html#468">[ subject ]</a>
              <a href="author.html#468">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
