<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [PATCH] server_name ACL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20server_name%20ACL&In-Reply-To=%3C55268233.1010501%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="002028.html">
   <LINK REL="Next"  HREF="002077.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [PATCH] server_name ACL</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20server_name%20ACL&In-Reply-To=%3C55268233.1010501%40treenet.co.nz%3E"
       TITLE="[squid-dev] [PATCH] server_name ACL">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Apr  9 13:44:19 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="002028.html">[squid-dev] [PATCH] server_name ACL
</A></li>
        <LI>Next message: <A HREF="002077.html">[squid-dev] [PATCH] server_name ACL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2030">[ date ]</a>
              <a href="thread.html#2030">[ thread ]</a>
              <a href="subject.html#2030">[ subject ]</a>
              <a href="author.html#2030">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/04/2015 1:06 a.m., Tsantilas Christos wrote:
&gt;<i> Hi all,
</I>&gt;<i>  I am reposting this patch. It is updated to the latest squid-trunk.
</I>&gt;<i> 
</I>&gt;<i> In a discussion with Amos (the period the squid-dev was down):
</I>&gt;<i>   1) The server_name should be renamed to tls_server_name or
</I>&gt;<i> ssl::server_name
</I>&gt;<i>   2) There is a bug in Ssl::matchX509CommonNames function. The
</I>&gt;<i> subjectAltName if exists should be used instead of the subject name.
</I>&gt;<i> 
</I>&gt;<i> The (2) should be fixed as a separate issue/bug, and also applied to
</I>&gt;<i> squid-3.5.
</I>&gt;<i> 
</I>&gt;<i> What about the (1) ?
</I>&gt;<i> The &quot;ssl:&quot; prefix looks better because the new feature can be used for
</I>&gt;<i> ssl v3 too, it is not depends on tls. (However I believe that we should
</I>&gt;<i> agree and use one prefix for all of these features to not confuse users)
</I>
While being usable for SSLv3 is fine, SSL as a whole is already
deprecated (RFC 6101 is &quot;Historic&quot;) and a &quot;die die die&quot; / &quot;MUST NOT use
SSLv3&quot; RFC is already on the fast track for publication within the year
mandating that SSLv3 be rejected on sight.


I'm agreeing with ssl::server_name not because its SSL-compatible test,
but because the existing ACLs for cert related details already use that
prefix. We are already in the unfortunate position of having to rename
at some future point, may as well at least be consistent until then.




As for the audit:

in src/acl/ServerName.h:

* please drop the &quot;\ingroup&quot; on new code
 That feature of doxygen is no longer being used.


in src/cf.data.pre:

* s/SslBmp/SslBump/ or s/SslBmp/Ssl-Bump/


in src/ssl/PeerConnector.cc:

* Ssl::PeerConnector::handleServerCertificate() - please dont add HERE
macro in new code.


+1, conditional on the name agreement and above cosmetic changes.

Amos

</PRE>









































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002028.html">[squid-dev] [PATCH] server_name ACL
</A></li>
	<LI>Next message: <A HREF="002077.html">[squid-dev] [PATCH] server_name ACL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2030">[ date ]</a>
              <a href="thread.html#2030">[ thread ]</a>
              <a href="subject.html#2030">[ subject ]</a>
              <a href="author.html#2030">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
