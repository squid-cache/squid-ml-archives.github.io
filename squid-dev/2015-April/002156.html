<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [PATCH] Negotiate Kerberos authentication request size exceeds output buffer size
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Negotiate%20Kerberos%20authentication%20request%20size%0A%20exceeds%20output%20buffer%20size&In-Reply-To=%3C552E76C0.8020809%40users.sourceforge.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="002163.html">
   <LINK REL="Next"  HREF="002157.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [PATCH] Negotiate Kerberos authentication request size exceeds output buffer size</H1>
    <B>Tsantilas Christos</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Negotiate%20Kerberos%20authentication%20request%20size%0A%20exceeds%20output%20buffer%20size&In-Reply-To=%3C552E76C0.8020809%40users.sourceforge.net%3E"
       TITLE="[squid-dev] [PATCH] Negotiate Kerberos authentication request size exceeds output buffer size">chtsanti at users.sourceforge.net
       </A><BR>
    <I>Wed Apr 15 14:33:36 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="002163.html">[squid-dev] Jenkins build is back to normal : trunk-matrix » clang,d-ubuntu-trusty #170
</A></li>
        <LI>Next message: <A HREF="002157.html">[squid-dev] [PATCH] Negotiate Kerberos authentication request size exceeds output buffer size
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2156">[ date ]</a>
              <a href="thread.html#2156">[ thread ]</a>
              <a href="subject.html#2156">[ subject ]</a>
              <a href="author.html#2156">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Despite the &quot;must match&quot; comment, MAX_AUTHTOKEN_LEN in
auth/UserRequest.h got out of sync with similar constants in Negotiate 
helpers. A 32KB buffer cannot fit some helper requests (e.g., those 
carrying Privilege Account Certificate information in the client's 
Kerberos ticket). Each truncated  request blocks the negotiate helper 
channel, eventually causing helper queue overflow and possibly killing 
Squid.

This patch increases MAX_AUTHTOKEN_LEN in UserRequest.h to 65535 which
is also the maximum used by the negotiate helpers. The patch also adds 
checks to avoid sending truncated requests, treating them as helper 
errors instead.

This is a Measurement Factory project
-------------- next part --------------
A non-text attachment was scrubbed...
Name: max_auth_token_length-t3.patch
Type: text/x-patch
Size: 10150 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-dev/attachments/20150415/ee0bc628/attachment-0001.bin">http://lists.squid-cache.org/pipermail/squid-dev/attachments/20150415/ee0bc628/attachment-0001.bin</A>&gt;
</PRE>



















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002163.html">[squid-dev] Jenkins build is back to normal : trunk-matrix » clang,d-ubuntu-trusty #170
</A></li>
	<LI>Next message: <A HREF="002157.html">[squid-dev] [PATCH] Negotiate Kerberos authentication request size exceeds output buffer size
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2156">[ date ]</a>
              <a href="thread.html#2156">[ thread ]</a>
              <a href="subject.html#2156">[ subject ]</a>
              <a href="author.html#2156">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
