<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] Assorted (minor) patches for Squid
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Assorted%20%28minor%29%20patches%20for%20Squid&In-Reply-To=%3C5540BF87.6010208%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="002287.html">
   <LINK REL="Next"  HREF="002292.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] Assorted (minor) patches for Squid</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Assorted%20%28minor%29%20patches%20for%20Squid&In-Reply-To=%3C5540BF87.6010208%40treenet.co.nz%3E"
       TITLE="[squid-dev] Assorted (minor) patches for Squid">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Apr 29 11:24:55 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="002287.html">[squid-dev] Debian jessie node added to build farm
</A></li>
        <LI>Next message: <A HREF="002292.html">[squid-dev] service_name not used in Segment.cc
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2291">[ date ]</a>
              <a href="thread.html#2291">[ thread ]</a>
              <a href="subject.html#2291">[ subject ]</a>
              <a href="author.html#2291">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 29/04/2015 8:29 p.m., Alex wrote:
&gt;<i> Dear Amos Jefferies,
</I>&gt;<i> 
</I>&gt;<i> Thanks for accepting my recent patches for Squid. Here are several other
</I>&gt;<i> minor patches -- if I should send these to a Squid mailing list, please let
</I>&gt;<i> me know.
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> Alex Dowad
</I>&gt;<i> 
</I>
Hi Alex,

In future please send patches individually to the squid-dev mailing list
with &quot;[PATCH]&quot; prefix on the subject line. That way the other core
developers can audit if they wish, debate decisions, or more quickly
merge patches they feel are urgent.

Our formal patch submission process is outlined at:
 &lt;<A HREF="http://wiki.squid-cache.org/MergeProcedure">http://wiki.squid-cache.org/MergeProcedure</A>&gt;


I am taking these in with a few modifications mentioned below.

* 1/7: adds an extra if-condition, despite being small it is one more
slice out of performance on each read. Not checking also ensures that
xerrno is initialized to 0 from errno (or at worst refects errno
accurately).

- I'm accepting only the documentation change in typedefs.h with slight
modification to doxygen format.


* 2/7: the patch is incomplete. Correct use of errno sets it to 0 before
calling the monitored function.
 - our previous use of xstrerror() inside debugs() has proven to present
incorrect errno details. We need to be using xstrerr(N) instead now.
 - there are also other setsockopt() later in the function which were
using errno incorrectly.

In light of these 2/7 through 5/7, and the other errno instances. I am
thinking a larger patch updating all those mis-uses at once and
replacing xstrerror() with xstrerr(N) globally is worthwhile.
 Would you be interested in working on that?


* 6/7 and 7/7: the HERE maro is deprecated already and we are requesting
that anyone touching debugs() containing one remove it during the change.

 - accepted with that adjustment


Amos

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002287.html">[squid-dev] Debian jessie node added to build farm
</A></li>
	<LI>Next message: <A HREF="002292.html">[squid-dev] service_name not used in Segment.cc
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2291">[ date ]</a>
              <a href="thread.html#2291">[ thread ]</a>
              <a href="subject.html#2291">[ subject ]</a>
              <a href="author.html#2291">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
