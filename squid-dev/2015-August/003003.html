<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] squid-3.5.7 -- xstrerror missing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20squid-3.5.7%20--%20xstrerror%20missing&In-Reply-To=%3C55CBB4C3.3090505%40tlinx.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="002993.html">
   <LINK REL="Next"  HREF="003009.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] squid-3.5.7 -- xstrerror missing</H1>
    <B>Linda W</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20squid-3.5.7%20--%20xstrerror%20missing&In-Reply-To=%3C55CBB4C3.3090505%40tlinx.org%3E"
       TITLE="[squid-dev] squid-3.5.7 -- xstrerror missing">squid-user at tlinx.org
       </A><BR>
    <I>Wed Aug 12 21:04:03 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="002993.html">[squid-dev] squid-3.5.7 -- xstrerror missing
</A></li>
        <LI>Next message: <A HREF="003009.html">[squid-dev] squid-3.5.7 -- xstrerror missing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3003">[ date ]</a>
              <a href="thread.html#3003">[ thread ]</a>
              <a href="subject.html#3003">[ subject ]</a>
              <a href="author.html#3003">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Amos Jeffries wrote:
&gt;<i> On 12/08/2015 10:27 p.m., Amos Jeffries wrote:
</I>&gt;&gt;<i> I think I've cracked this.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Both the helpers mentioned so far are missing libmiscutil.la.
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> Or not. Sorry, got a bit too excited looking at an older version.
</I>&gt;<i> 
</I>&gt;<i> That code did move to libcompat-squid.la by 3.5.7. And your traces show
</I>&gt;<i> that is being linked to the helpers that are failing.
</I>&gt;<i> 
</I>&gt;<i> So what does this produce please ?
</I>&gt;<i>  nm compat/.libs/libcompat-squid.a
</I>----
Ishtar:tools/squid/squid-3.5.7&gt; nm compat/.libs/libcompat-squid.a

assert.o:
0000000000000001 C __gnu_lto_slim
0000000000000001 C __gnu_lto_v1

compat.o:
0000000000000001 C __gnu_lto_slim
0000000000000001 C __gnu_lto_v1

debug.o:
0000000000000001 C __gnu_lto_slim
0000000000000001 C __gnu_lto_v1

eui64_aton.o:
                 U __isoc99_sscanf
0000000000000000 T eui64_aton

getaddrinfo.o:
0000000000000001 C __gnu_lto_slim
0000000000000001 C __gnu_lto_v1

getnameinfo.o:
0000000000000001 C __gnu_lto_slim
0000000000000001 C __gnu_lto_v1

GnuRegex.o:

inet_ntop.o:
0000000000000001 C __gnu_lto_slim
0000000000000001 C __gnu_lto_v1

inet_pton.o:
0000000000000001 C __gnu_lto_slim
0000000000000001 C __gnu_lto_v1

memrchr.o:
0000000000000001 C __gnu_lto_slim
0000000000000001 C __gnu_lto_v1

shm.o:
0000000000000001 C __gnu_lto_slim
0000000000000001 C __gnu_lto_v1

statvfs.o:
0000000000000001 C __gnu_lto_slim
0000000000000001 C __gnu_lto_v1

strnstr.o:
0000000000000001 C __gnu_lto_slim
0000000000000001 C __gnu_lto_v1

strnrchr.o:
0000000000000000 T strnrchr

xalloc.o:
0000000000000001 C __gnu_lto_slim
0000000000000001 C __gnu_lto_v1

xstrerror.o:
0000000000000001 C __gnu_lto_slim
0000000000000001 C __gnu_lto_v1

xstring.o:
0000000000000001 C __gnu_lto_slim
0000000000000001 C __gnu_lto_v1

xstrto.o:
0000000000000001 C __gnu_lto_slim
0000000000000001 C __gnu_lto_v1

mswindows.o:
0000000000000001 C __gnu_lto_slim
0000000000000001 C __gnu_lto_v1
-------------

I pulled out about every optional thing I could get away with and made it to
what I think was a final link.... but LOTS of undef syms....

I tried looking at my distro's squid build for pre-reqs and such, but
they are only at squid-3.4.4, whereas the last one I self compiled was 
3.4.3.

I attached the final link... as a gzip (since uncompressed was about 666K) 
---
these were last ops I used for that 
storeio=aufs   (what I used last time, so didn't bother ufs even
though it is simpler).

log-daemon-helpers=&quot;file&quot;... 
don't know if the disk-io made sense, but =&quot;DiskThreads,AIO,IpcIo,Mmapped&quot;

disabled all auth &amp; extra protocols (I think..)

array with=(  
      aufs-threads=$async_io_threads 
      default-user=$user dl filedescriptors=2048 gnu-ld
      logdir=/var/log/$pkg          
      mandir=/usr/share/man   pidfile=/run/$pkg.pid
      large-files ) 


array enable=( 
      disk-io=&quot;DiskThreads,AIO,IpcIo,Mmapped&quot;
      dependency-tracking
      kill-parent-hack  
      linux-netfilter 
      removal-policies=&quot;heap,lru&quot;
      log-daemon-helpers=&quot;file&quot;
      storeio=&quot;aufs&quot; 
      useragent-log
      xmalloc-statistics zph-qos )


array disable=( ecap    icap-client   storeid_rewrite wccp wccpv2 htcp
      eui 
      auth htcp snmp
      auth-basic auth-ntlm auth-negotiate auth-digest url-rewrite-helpers
      external-acl-helpers
      loadable_modules
      storeid-rewrite-helpers
      auto-locale ident-lookups ipv6  translation )

array  without=()

---
Also attached config.log &amp; config.status gzipped.. if they are of any help

---
Just for the fun of if I'm going to remake my current kernel (4.1.0) to see if that still works...   
  LD [M]  net/sched/sch_teql.ko
  LD [M]  net/sctp/sctp.ko
  LD [M]  net/sctp/sctp_probe.ko
  LD [M]  net/vmw_vsock/vsock.ko
  IHEX    firmware/bnx2/bnx2-mips-09-6.2.1a.fw
  IHEX    firmware/bnx2/bnx2-rv2p-09-6.0.17.fw
  IHEX    firmware/bnx2/bnx2-rv2p-09ax-6.0.17.fw
  IHEX    firmware/bnx2/bnx2-rv2p-06-6.0.15.fw
  IHEX    firmware/bnx2/bnx2-mips-06-6.2.1.fw
166.64sec 1405.74usr 259.11sys (999.31% cpu)
----
If something broke it didn't affect the kernel build...i.e.
building the firmware stuff is always the last thing...

I'm wondering why my disto didn't put out a newer
squid than 4.4.4 -- wondering if they had problems with
newer stuff with the various build utils they included
in 13.2.  Will try to see what story is there as well...

Sorry for the mess...





-------------- next part --------------
A non-text attachment was scrubbed...
Name: make.log.gz
Type: application/x-gzip
Size: 43482 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-dev/attachments/20150812/535fc568/attachment-0003.bin">http://lists.squid-cache.org/pipermail/squid-dev/attachments/20150812/535fc568/attachment-0003.bin</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: config.log.gz
Type: application/x-gzip
Size: 56339 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-dev/attachments/20150812/535fc568/attachment-0004.bin">http://lists.squid-cache.org/pipermail/squid-dev/attachments/20150812/535fc568/attachment-0004.bin</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: config.status.gz
Type: application/x-gzip
Size: 27810 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-dev/attachments/20150812/535fc568/attachment-0005.bin">http://lists.squid-cache.org/pipermail/squid-dev/attachments/20150812/535fc568/attachment-0005.bin</A>&gt;
</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002993.html">[squid-dev] squid-3.5.7 -- xstrerror missing
</A></li>
	<LI>Next message: <A HREF="003009.html">[squid-dev] squid-3.5.7 -- xstrerror missing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3003">[ date ]</a>
              <a href="thread.html#3003">[ thread ]</a>
              <a href="subject.html#3003">[ subject ]</a>
              <a href="author.html#3003">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
