<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [CODE] iterating over enums
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BCODE%5D%20iterating%20over%20enums&In-Reply-To=%3C55CD0CB9.6010009%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="003008.html">
   <LINK REL="Next"  HREF="003012.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [CODE] iterating over enums</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BCODE%5D%20iterating%20over%20enums&In-Reply-To=%3C55CD0CB9.6010009%40measurement-factory.com%3E"
       TITLE="[squid-dev] [CODE] iterating over enums">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Aug 13 21:31:37 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="003008.html">[squid-dev] [CODE] iterating over enums
</A></li>
        <LI>Next message: <A HREF="003012.html">[squid-dev] [CODE] iterating over enums
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3011">[ date ]</a>
              <a href="thread.html#3011">[ thread ]</a>
              <a href="subject.html#3011">[ subject ]</a>
              <a href="author.html#3011">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 08/13/2015 03:20 AM, Kinkie wrote:
&gt;<i> On Wed, Aug 12, 2015 at 9:11 PM, Alex Rousskov wrote:
</I>&gt;<i>     I would encourage you to show actual Squid usage examples (besides
</I>&gt;<i>     artificial test cases), either in the patch itself or in the patch cover
</I>&gt;<i>     email.
</I>

&gt;<i> ./src/HttpHdrCc.cc:HttpHdrCcType &amp;operator++ (HttpHdrCcType &amp;aHeader)
</I>&gt;<i> ./src/HttpHdrSc.cc:http_hdr_sc_type &amp;operator++ (http_hdr_sc_type &amp;aHeader)
</I>&gt;<i> ./src/HttpHdrScTarget.cc:http_hdr_sc_type &amp;operator++ (http_hdr_sc_type
</I>&gt;<i> &amp;aHeader);
</I>&gt;<i> ./src/HttpMsg.cc:HttpMsgParseState &amp;operator++ (HttpMsgParseState &amp;aState)
</I>&gt;<i> ./src/errorpage.cc:err_type &amp;operator++ (err_type &amp;anErr)
</I>&gt;<i> ./src/http/RequestMethod.cc:operator++ (Http::MethodType &amp;aMethod)
</I>&gt;<i> ./src/mem/old_api.cc:mem_type &amp;operator++ (mem_type &amp;aMem)
</I>&gt;<i> 
</I>&gt;<i> These are all used to iterate over enums from what I can tell.
</I>

By &quot;actual Squid usage examples&quot;, I meant examples of your new code used
in Squid code (besides test cases) and not references to places where
the new code might be used in the future. Seeing real usage examples,
especially for unusual cases like iterating a sub-range is often very
helpful when reviewing a new API.

Similarly, proposing a replacement API without showing what changes it
would bring to Squid sources is setting a bad example/precedent, even if
these specific changes themselves are going to be welcomed by everybody.


&gt;<i>     If you have not considered implementing WholeEnum without inheritance,
</I>&gt;<i>     please do so. I speculate that lack of any data members may help inline
</I>&gt;<i>     WholeEnum. Please note that I am just asking you to _consider_ this. I
</I>&gt;<i>     do not have enough information to insist on it.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> As all classes are nonvirtual and everything is in the same translation
</I>&gt;<i> unit, for now I would skip that. and avoid the code duplication.
</I>

I do not understand how &quot;nonvirtual and everything is in the same
translation unit&quot; is related to eliminating data members, but I do
appreciate you considering my request!


&gt;<i> I'm attaching the resulting files. If that's OK by you, I'll start using
</I>&gt;<i> them and merge together with the next round of coverity-fixes.
</I>
As I said, I think these changes should be posted as a regular [PATCH]
and go through the normal review and commit process. &quot;Coverity fixes&quot;
commits should be limited to trivial, small changes. However, I
_personally_ may not need to review your [PATCH] if you post it, so you
may ask Amos whether he needs to review it before spending time on that
repost.


On an unrelated note, it just occurred to me that you can save a little
ink if you s/EnumIterator/Enumerator/g :-). Totally optional, of course.


Thank you,

Alex.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003008.html">[squid-dev] [CODE] iterating over enums
</A></li>
	<LI>Next message: <A HREF="003012.html">[squid-dev] [CODE] iterating over enums
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3011">[ date ]</a>
              <a href="thread.html#3011">[ thread ]</a>
              <a href="subject.html#3011">[ subject ]</a>
              <a href="author.html#3011">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
