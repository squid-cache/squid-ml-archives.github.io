<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [PATCH] Mark aborted RESPMOD bodies as truncated
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Mark%20aborted%20RESPMOD%20bodies%20as%20truncated&In-Reply-To=%3C55D3B25C.7060705%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="003095.html">
   <LINK REL="Next"  HREF="003072.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [PATCH] Mark aborted RESPMOD bodies as truncated</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Mark%20aborted%20RESPMOD%20bodies%20as%20truncated&In-Reply-To=%3C55D3B25C.7060705%40measurement-factory.com%3E"
       TITLE="[squid-dev] [PATCH] Mark aborted RESPMOD bodies as truncated">rousskov at measurement-factory.com
       </A><BR>
    <I>Tue Aug 18 22:31:56 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="003095.html">[squid-dev] [PATCH] FtpServer.cc:1024: &quot;reply != NULL&quot; assertion
</A></li>
        <LI>Next message: <A HREF="003072.html">[squid-dev] [PATCH] Mark aborted RESPMOD bodies as truncated
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3044">[ date ]</a>
              <a href="thread.html#3044">[ thread ]</a>
              <a href="subject.html#3044">[ subject ]</a>
              <a href="author.html#3044">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

    When an adaptation service aborts a transaction (for whatever
reason), the attached patch marks the body produced by that service as
truncated.

Without these changes, the recipient of the truncated body (e.g., HTTP
client) often cannot tell that the body was actually truncated. This may
happen, for example, when Squid uses chunked encoding for body delivery.
Lying about truncation may result in rather serious user-level problems.

I do not know whether these changes fix all related bugs, but they do
help in several eCAP truncation cases we know about.


HTH,

Alex.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SQUID-99-truncate-aborted-resp-bodies-t6.patch
Type: text/x-diff
Size: 17599 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-dev/attachments/20150818/4cc1ee35/attachment-0001.patch">http://lists.squid-cache.org/pipermail/squid-dev/attachments/20150818/4cc1ee35/attachment-0001.patch</A>&gt;
</PRE>

















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003095.html">[squid-dev] [PATCH] FtpServer.cc:1024: &quot;reply != NULL&quot; assertion
</A></li>
	<LI>Next message: <A HREF="003072.html">[squid-dev] [PATCH] Mark aborted RESPMOD bodies as truncated
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3044">[ date ]</a>
              <a href="thread.html#3044">[ thread ]</a>
              <a href="subject.html#3044">[ subject ]</a>
              <a href="author.html#3044">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
