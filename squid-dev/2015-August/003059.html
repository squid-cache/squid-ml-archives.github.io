<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [PATCH] Non-zeroing mempools
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Non-zeroing%20mempools&In-Reply-To=%3CCA%2BY8hcPZh6M7LN0FENC%2BbQbJhLhwujN3e3as59EjTHsX1FpV2Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="003057.html">
   <LINK REL="Next"  HREF="003071.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [PATCH] Non-zeroing mempools</H1>
    <B>Kinkie</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Non-zeroing%20mempools&In-Reply-To=%3CCA%2BY8hcPZh6M7LN0FENC%2BbQbJhLhwujN3e3as59EjTHsX1FpV2Q%40mail.gmail.com%3E"
       TITLE="[squid-dev] [PATCH] Non-zeroing mempools">gkinkie at gmail.com
       </A><BR>
    <I>Wed Aug 19 19:28:46 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="003057.html">[squid-dev] Issues with with build farm
</A></li>
        <LI>Next message: <A HREF="003071.html">[squid-dev] [PATCH] Non-zeroing mempools
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3059">[ date ]</a>
              <a href="thread.html#3059">[ thread ]</a>
              <a href="subject.html#3059">[ subject ]</a>
              <a href="author.html#3059">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,
  the attached patch (a merge request from
lp:~kinkie/squid/mempools-nozero) changes MEMPROXY_CLASS so that it doesn't
zero memory before releasing it to requestors. The constructors of all
classes using that feature were checked, so that they fully initialize all
data members and thus require no zeroing.
It also changes Debug::OutStream to use MEMPROXY_CLASS instead of
new/derelete, and changes constructors to initializer lists whenever
possible and sensible (aka justified by other changes), same for dropping
HERE and adopting nullptr.
It also changes some code in Makefile.am to use make variables in place of
full paths.
The code has been run-tested (default config only), build-farm-tested and
polygraph-tested. It shows a small but noticeable performance improvement
in performance (of course, numbers are to be taken with a big grain of
salt).

When reviewing, please do not focus on formatting issues; if this patch
passes review I'll run a source-formatting before merging.

Thanks!

-- 
    Kinkie
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-dev/attachments/20150819/1542fa7d/attachment-0001.html">http://lists.squid-cache.org/pipermail/squid-dev/attachments/20150819/1542fa7d/attachment-0001.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mempools-nozero-v1.patch
Type: application/octet-stream
Size: 61707 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-dev/attachments/20150819/1542fa7d/attachment-0001.obj">http://lists.squid-cache.org/pipermail/squid-dev/attachments/20150819/1542fa7d/attachment-0001.obj</A>&gt;
</PRE>


















































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003057.html">[squid-dev] Issues with with build farm
</A></li>
	<LI>Next message: <A HREF="003071.html">[squid-dev] [PATCH] Non-zeroing mempools
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3059">[ date ]</a>
              <a href="thread.html#3059">[ thread ]</a>
              <a href="subject.html#3059">[ subject ]</a>
              <a href="author.html#3059">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
