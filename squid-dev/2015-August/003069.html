<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] Developing customized Cache Selection algorithm from Round Robin, Least Load
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Developing%20customized%20Cache%20Selection%20algorithm%0A%20from%20Round%20Robin%2C%20Least%20Load&In-Reply-To=%3C55D55479.20609%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="003051.html">
   <LINK REL="Next"  HREF="003077.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] Developing customized Cache Selection algorithm from Round Robin, Least Load</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Developing%20customized%20Cache%20Selection%20algorithm%0A%20from%20Round%20Robin%2C%20Least%20Load&In-Reply-To=%3C55D55479.20609%40measurement-factory.com%3E"
       TITLE="[squid-dev] Developing customized Cache Selection algorithm from Round Robin, Least Load">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Aug 20 04:15:53 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="003051.html">[squid-dev] Developing customized Cache Selection algorithm from Round Robin, Least Load
</A></li>
        <LI>Next message: <A HREF="003077.html">[squid-dev] Developing customized Cache Selection algorithm from Round Robin, Least Load
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3069">[ date ]</a>
              <a href="thread.html#3069">[ thread ]</a>
              <a href="subject.html#3069">[ subject ]</a>
              <a href="author.html#3069">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 08/19/2015 05:03 AM, Du, Hongfei wrote:

&gt;<i> We are in an attempt to extend Squid Cache selection algorithm to
</I>&gt;<i> develop a solution for controlled storage of subscriber’s content in
</I>&gt;<i> Squid Caches, and thereafter apply access rule on these contents, a few
</I>&gt;<i> questions to start with:
</I>&gt;<i> 
</I>&gt;<i> ·        As we probably has to rewrite new algorithm and recompile it,
</I>&gt;<i> so does anyone know where(or which file) is the existing Round Robin or
</I>&gt;<i> Least Load algorithm defined in source codes?
</I>
Search for the storeDirSelectSwapDir variable in src/store_dir.cc. To
learn more about customizing cache dir selection code, run:

  $ bzr grep Config.store_dir_select_algorithm

or an equivalent search command.


&gt;<i> ·        Is there straight forward method to tell/instruct squid to
</I>&gt;<i> store content(e.g. an URL)  from network in a predefined specific disk
</I>&gt;<i> folder rather than using the selection algorithm itself?
</I>
You can use cache_dir min-size and max-size options to control cache_dir
selection to some extent.

You can use the &quot;cache&quot; directive in squid.conf to control what gets
stored and served from the cache. This directive accepts Squid ACLs, so
it can be applied to specific URLs, but it cannot allow or prohibit
individual cache_dir usage.

I am not aware of any other configurable interface at the individual URL
level. There is no configurable mapping of URLs/StoreIDs to cache_dirs
(and beyond). The storeDirSelectSwapDir variable mentioned above points
to one of the two functions that do the mapping (selected at
configuration time based on store_dir_select_algorithm in squid.conf).


The details of the cache_dir selection code are rather ugly, with
several half-broken interfaces augmented by weird storage
module-dependent implementations. Do not expect a smooth sailing.


Good luck,

Alex.

</PRE>







































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003051.html">[squid-dev] Developing customized Cache Selection algorithm from Round Robin, Least Load
</A></li>
	<LI>Next message: <A HREF="003077.html">[squid-dev] Developing customized Cache Selection algorithm from Round Robin, Least Load
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3069">[ date ]</a>
              <a href="thread.html#3069">[ thread ]</a>
              <a href="subject.html#3069">[ subject ]</a>
              <a href="author.html#3069">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
