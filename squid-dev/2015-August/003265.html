<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] HERE removal script, second attempt
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20HERE%20removal%20script%2C%20second%20attempt&In-Reply-To=%3C55E0A879.9050004%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="003262.html">
   <LINK REL="Next"  HREF="003266.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] HERE removal script, second attempt</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20HERE%20removal%20script%2C%20second%20attempt&In-Reply-To=%3C55E0A879.9050004%40measurement-factory.com%3E"
       TITLE="[squid-dev] HERE removal script, second attempt">rousskov at measurement-factory.com
       </A><BR>
    <I>Fri Aug 28 18:29:13 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="003262.html">[squid-dev] HERE removal script, second attempt
</A></li>
        <LI>Next message: <A HREF="003266.html">[squid-dev] bootstrap_libtoolize: why remove COPYING.LIB?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3265">[ date ]</a>
              <a href="thread.html#3265">[ thread ]</a>
              <a href="subject.html#3265">[ subject ]</a>
              <a href="author.html#3265">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 08/28/2015 01:41 AM, Kinkie wrote:

&gt;<i>   this updated version of the HERE removal script seems to work much
</I>&gt;<i> better then the previous, 
</I>
&gt;<i> also replacing all debugs(...,HERE) with debugs(...MYNAME).
</I>
debugs() already outputs __FUNCTION__ so having MYNAME there would be
pretty much as bad as having HERE, right? I am surprised you have not
noticed that in your tests so perhaps I am missing something.

If you want to avoid changing ~126 debugs(...,HERE) lines, you can
simply #define HERE to be an empty string (&quot;&quot;). This approach will
remove ~11% of the proposed changes without sacrificing anything.

However, if it is better to get rid of HERE completely than to reduce
the conflict area by 11%, then please adjust your code to replace all
debugs(...,HERE) with debugs0(...) or similar macro calls. Those
replacement calls can use an empty string when calling debugs(), of course.

Please note that MYNAME is currently unused in trunk AFAICT.


&gt;<i> Also attached the patch generated by the script on current trunk (not
</I>&gt;<i> meant for merge, just for ease of reviewing).
</I>&gt;<i> After the patch there may be the need of small cleanups (e.g.
</I>&gt;<i> ssl/certificate_db.cc) but these should be viable for a regular patch.
</I>
So, when I take your script to another branch (which was the whole idea
of developing the script), it will not be sufficient to just run it,
right? I will need to do &quot;small cleanup&quot; after I run the script, for
every branch? Is that cleanup required for the post-script branch code
to _work_ or to remove the last remnants of HERE that the script fails
to remove?


After the above issues are resolved:

* Please publish a script or a sed expression that will correctly adjust
any [old] patch that uses HERE so that the patch applies to [newer] code
that has been converted using your script.

* Similarly, please publish a &quot;reverse&quot; script or a sed expression that
will correctly adjust any [new] patch that does not use HERE so that the
patch applies to [older] code that was not converted using your script.


Thank you,

Alex.

</PRE>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003262.html">[squid-dev] HERE removal script, second attempt
</A></li>
	<LI>Next message: <A HREF="003266.html">[squid-dev] bootstrap_libtoolize: why remove COPYING.LIB?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3265">[ date ]</a>
              <a href="thread.html#3265">[ thread ]</a>
              <a href="subject.html#3265">[ subject ]</a>
              <a href="author.html#3265">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
