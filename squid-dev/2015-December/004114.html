<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [RFC] on_crash
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BRFC%5D%20on_crash&In-Reply-To=%3C56689A73.2030801%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="004113.html">
   <LINK REL="Next"  HREF="004116.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [RFC] on_crash</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BRFC%5D%20on_crash&In-Reply-To=%3C56689A73.2030801%40measurement-factory.com%3E"
       TITLE="[squid-dev] [RFC] on_crash">rousskov at measurement-factory.com
       </A><BR>
    <I>Wed Dec  9 21:17:39 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="004113.html">[squid-dev] [RFC] on_crash
</A></li>
        <LI>Next message: <A HREF="004116.html">[squid-dev] [RFC] on_crash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4114">[ date ]</a>
              <a href="thread.html#4114">[ thread ]</a>
              <a href="subject.html#4114">[ subject ]</a>
              <a href="author.html#4114">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 12/09/2015 01:43 PM, Amos Jeffries wrote:

&gt;<i> I am not going to +1 this right now, because the issues below are
</I>&gt;<i> security related. I would like to see at least one round of audit with
</I>&gt;<i> them resolved before it goes in.
</I>
This was not a [PATCH], only an [RFC]. The problems you are referring to
are just artefacts of the current temporary code. I will address the one
problem that was not:


&gt;<i> * function should be &quot;static void&quot; it seems.
</I>
It should not IMO: It is very convenient to call this function from
other code places when triaging something (without crashing Squid), even
though the shipped code may not call it from anywhere else. The function
should be designed so that it can be called from nearly anywhere.

For example, I was calling this function after every mlock(2) to see how
shared memory statistics changes...


&gt;<i> For anyone thinking of bundling a helper for this please make the
</I>&gt;<i> reporter a binary. For the same reasons quoted above regarding system()
</I>&gt;<i> and environment contents. Also avoiding the speed (and memory) overheads
</I>&gt;<i> of bash/cash/ksh/python/php/whatever is a very good idea in these
</I>&gt;<i> situations.
</I>
A binary is great if you know exactly what you need and can easily get
that using C/C++.

For triaging issues, a script usually works much better, especially when
you are the one shipping the script, and the admin is the one
tuning/adjusting it based on the information collected by the script.
This use case was the motivation for the posted hack.

Different use cases benefit from different approaches [and have
different security postures]. Squid itself should be strict enough to
accommodate all major use cases, of course, but the handlers may vary
from a basic insecure shell script to an ISO-certified secure assembly
code :-).


Thank you,

Alex.

</PRE>























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004113.html">[squid-dev] [RFC] on_crash
</A></li>
	<LI>Next message: <A HREF="004116.html">[squid-dev] [RFC] on_crash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4114">[ date ]</a>
              <a href="thread.html#4114">[ thread ]</a>
              <a href="subject.html#4114">[ subject ]</a>
              <a href="author.html#4114">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
