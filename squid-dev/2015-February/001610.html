<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [PATCH] HTTP request-line parser upgrade
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20HTTP%20request-line%20parser%20upgrade&In-Reply-To=%3C54D91C7B.7020905%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="001608.html">
   <LINK REL="Next"  HREF="001616.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [PATCH] HTTP request-line parser upgrade</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20HTTP%20request-line%20parser%20upgrade&In-Reply-To=%3C54D91C7B.7020905%40treenet.co.nz%3E"
       TITLE="[squid-dev] [PATCH] HTTP request-line parser upgrade">squid3 at treenet.co.nz
       </A><BR>
    <I>Mon Feb  9 20:45:47 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="001608.html">[squid-dev] [PATCH] HTTP request-line parser upgrade
</A></li>
        <LI>Next message: <A HREF="001616.html">[squid-dev] [PATCH] HTTP request-line parser upgrade
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1610">[ date ]</a>
              <a href="thread.html#1610">[ thread ]</a>
              <a href="subject.html#1610">[ subject ]</a>
              <a href="author.html#1610">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/02/2015 6:12 a.m., Kinkie wrote:
&gt;<i> Hi,
</I>&gt;<i>   I am not sure whether this is the most uptodate version of the
</I>&gt;<i> patch; I'm auditing lp:~yadi/squid/parser-ng-requestline revno 13879.
</I>&gt;<i> 
</I>
Yes thats the latest right now.

&gt;<i> Short story, I can find nothing obviously evil with it - code is well
</I>&gt;<i> documented and intent is clear; as far as I understand Polygraph,
</I>&gt;<i> Coadvisor and my casual testing all agree that it introduces no
</I>&gt;<i> regressions so for me it could go in right away.
</I>&gt;<i> 
</I>&gt;<i> Only suggestion (non-binding):
</I>&gt;<i> 
</I>&gt;<i> in HttpRequestMethod::HttpRequestMethod:
</I>&gt;<i>  // TODO: Optimize this linear search
</I>&gt;<i>  I suspect this code path is rather hot, and I'd recommend to use a
</I>&gt;<i> trie, a hash or a map here ASAP
</I>&gt;<i> 
</I>
That code is rather hot. The search list is ordered by decrementing
expected frequency of values so lookup time is not too bad, and already
optimal for the GET case. Though it would still be worth going to the
new trie or customized search you are working on when those are in trunk.

Amos

</PRE>





























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001608.html">[squid-dev] [PATCH] HTTP request-line parser upgrade
</A></li>
	<LI>Next message: <A HREF="001616.html">[squid-dev] [PATCH] HTTP request-line parser upgrade
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1610">[ date ]</a>
              <a href="thread.html#1610">[ thread ]</a>
              <a href="subject.html#1610">[ subject ]</a>
              <a href="author.html#1610">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
