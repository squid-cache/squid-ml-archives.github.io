<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] Digest related question.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Digest%20related%20question.&In-Reply-To=%3C54E93183.6050502%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="001736.html">
   <LINK REL="Next"  HREF="001744.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] Digest related question.</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Digest%20related%20question.&In-Reply-To=%3C54E93183.6050502%40ngtech.co.il%3E"
       TITLE="[squid-dev] Digest related question.">eliezer at ngtech.co.il
       </A><BR>
    <I>Sun Feb 22 01:31:47 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="001736.html">[squid-dev] Digest related question.
</A></li>
        <LI>Next message: <A HREF="001744.html">[squid-dev] Digest related question.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1737">[ date ]</a>
              <a href="thread.html#1737">[ thread ]</a>
              <a href="subject.html#1737">[ subject ]</a>
              <a href="author.html#1737">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 22/02/2015 02:46, Amos Jeffries wrote:
&gt;<i> The response to a HEAD request is supposed to be exactly identical to a
</I>&gt;<i> response to the GET, but with the body/payload/entity cropped off. Even
</I>&gt;<i> the Content-Length headers etc should be present saying what size the
</I>&gt;<i> body would have been.
</I>
So just to make sure I understand the reality:
In a case I start squid with 0 objects and run only one transaction of a 
GET request it would create two objects?
 From what I have seen in the code in the past(very long ago) I remember 
that it might not be this way.
So I cannot just run a HEAD request and expect it to reflect too much 
information about the cached data.

About the store log, I have one issue with it and it is that I would not 
be able to &quot;know&quot; if the object is in the cache unless I will follow 
everything in the store log including cache removals.

So one process that will follow the store log and will store it will be 
enough to supply the currently &quot;cached&quot; object list per squid instance 
start till the squid shuts down.
In a case I would try to &quot;save&quot; it for after a shutdown would be more 
difficult.

 From another point of view which is the actual content digest I would 
need some way to receive the file\response content and I was thinking 
about an ICAP based solution which might be combined with the store log 
&quot;follower&quot;.

I have a situation in mind for some situation with this kind of a setup:
Fetch a URL which will be digested as we go and then will be &quot;followed&quot; 
and in a case the associated url will be purged from the cache the 
digest will also be erased from the DB.

Now the next part is the right way to &quot;know&quot; if there is a way to 
pre-find the request digest from the origin server.
And it seems like a HEAD request to the origin server might be enough.
So the origin server must be publicly accessible so the &quot;follower&quot; might 
be able to fetch a HEAD of the file and lookup any digest data in the 
response.
In turn a metalink file link in the HEAD headers might be usable for a 
more complicated options.
There is another issue with digest &quot;validation&quot; which can be considered 
as an option for black\white list a server for digest\metalink credibility.

Do you think this idea looks a bit sane?

Eliezer


</PRE>























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001736.html">[squid-dev] Digest related question.
</A></li>
	<LI>Next message: <A HREF="001744.html">[squid-dev] Digest related question.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1737">[ date ]</a>
              <a href="thread.html#1737">[ thread ]</a>
              <a href="subject.html#1737">[ subject ]</a>
              <a href="author.html#1737">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
