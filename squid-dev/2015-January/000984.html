<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [PATCH] Non-HTTP bypass
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Non-HTTP%20bypass&In-Reply-To=%3C54A6C46F.6050609%40urlfilterdb.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="001116.html">
   <LINK REL="Next"  HREF="000995.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [PATCH] Non-HTTP bypass</H1>
    <B>Marcus Kool</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Non-HTTP%20bypass&In-Reply-To=%3C54A6C46F.6050609%40urlfilterdb.com%3E"
       TITLE="[squid-dev] [PATCH] Non-HTTP bypass">marcus.kool at urlfilterdb.com
       </A><BR>
    <I>Fri Jan  2 16:16:47 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="001116.html">[squid-dev] Fwd:  [MERGE] Fix splay
</A></li>
        <LI>Next message: <A HREF="000995.html">[squid-dev] [PATCH] Non-HTTP bypass
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#984">[ date ]</a>
              <a href="thread.html#984">[ thread ]</a>
              <a href="subject.html#984">[ subject ]</a>
              <a href="author.html#984">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

On 12/31/2014 02:31 PM, Alex Rousskov wrote:
&gt;<i> On 12/31/2014 03:33 AM, Marcus Kool wrote:
</I>&gt;&gt;<i> On 12/31/2014 05:54 AM, Alex Rousskov wrote:
</I>&gt;&gt;&gt;<i> What would help is to decide whether we want to focus on
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     A) multiple conditions for establishing a TCP tunnel;
</I>&gt;&gt;&gt;<i>     B) multiple ways to handle an unrecognized protocol error; OR
</I>&gt;&gt;&gt;<i>     C) multiple ways to handle multiple errors.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> IMO, we want (B) or perhaps (C) while leaving (A) as a separate
</I>&gt;&gt;&gt;<i> out-of-scope feature.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The proposed patch implements (B). To implement (C), the patch needs to
</I>&gt;&gt;&gt;<i> add an ACL type to distinguish an &quot;unrecognized protocol&quot; error from
</I>&gt;&gt;&gt;<i> other errors.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i>  From an administrators point of view, the admins that want Squid to
</I>&gt;&gt;<i> filter internet access, definitely want (B).  They want (B) to block
</I>&gt;&gt;<i> audio, video, SSH tunnnels, VPNs, chat, file sharing, webdisks and all
</I>&gt;&gt;<i> sorts of applications (but not all!) that use port 443.
</I>&gt;<i>
</I>&gt;<i> Agreed, except this is not limited to port 443. The scope includes
</I>&gt;<i> intercepted port 80 connections and even CONNECT tunnels.
</I>
If CONNECT tunnels are in scope, then so are all the applications that use it,
including webdisk, audio, video, SSH etc.

I think it was Amos who said that application builders hould use application-specific
ports, but reality is that all firewalls block those ports by default.
Skype was one of the first applications that worked everywhere, even behind
a corporate firewall and it was done using CONNECT to the web proxy.
And from a security point of view I think that administrators prefer that
applications use CONNECT to the web proxy to have more control and logging
about what traffic is going from a LAN to the internet.

&gt;&gt;<i> Basically
</I>&gt;&gt;<i> this means that admins desire a more fine-grained control about what to
</I>&gt;&gt;<i> do with each tunnel.
</I>&gt;<i>
</I>&gt;<i> There are two different needs here, actually:
</I>&gt;<i>
</I>&gt;<i> 1. A choice of actions (i.e., &quot;what to do&quot;) when dealing with an
</I>&gt;<i> unsupported protocol. Currently, there is only one action: Send an HTTP
</I>&gt;<i> error response. The proposed feature adds another action (tunnel) and,
</I>&gt;<i> more importantly, adds a configuration interface to support more actions
</I>&gt;<i> later.
</I>
Sending an HTTP error to an application that does not speak HTTP is not
very useful.  Skype, SSH, videoplayers etc. only get confused at best.
Simply closing the tunnel may be better and may result in an end user message
'cannot connect to ...' instead of 'server sends garbage' or 'undefined protocol'.

Marcus

&gt;<i> 2. A way to further classify an unsupported protocol (i.e.,
</I>&gt;<i> &quot;fine-grained control&quot;). I started a new thread on this topic as it is
</I>&gt;<i> not about the proposed bypass feature.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i>
</I>&gt;<i> Alex.
</I></PRE>










































































































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001116.html">[squid-dev] Fwd:  [MERGE] Fix splay
</A></li>
	<LI>Next message: <A HREF="000995.html">[squid-dev] [PATCH] Non-HTTP bypass
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#984">[ date ]</a>
              <a href="thread.html#984">[ thread ]</a>
              <a href="subject.html#984">[ subject ]</a>
              <a href="author.html#984">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
