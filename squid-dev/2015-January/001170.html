<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] Moved PID file management from Coordinator to Master
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Moved%20PID%20file%20management%20from%20Coordinator%20to%20Master&In-Reply-To=%3C54B93392.1010709%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="001166.html">
   <LINK REL="Next"  HREF="001290.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] Moved PID file management from Coordinator to Master</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Moved%20PID%20file%20management%20from%20Coordinator%20to%20Master&In-Reply-To=%3C54B93392.1010709%40treenet.co.nz%3E"
       TITLE="[squid-dev] Moved PID file management from Coordinator to Master">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Jan 16 15:51:46 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="001166.html">[squid-dev] Moved PID file management from Coordinator to Master
</A></li>
        <LI>Next message: <A HREF="001290.html">[squid-dev] Moved PID file management from Coordinator to Master
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1170">[ date ]</a>
              <a href="thread.html#1170">[ thread ]</a>
              <a href="subject.html#1170">[ subject ]</a>
              <a href="author.html#1170">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 16/01/2015 11:29 a.m., Alex Rousskov wrote:
&gt;<i> On 01/14/2015 03:09 AM, Amos Jeffries wrote:
</I>&gt;&gt;&gt;<i> On 01/14/2015 11:25 AM, Amos Jeffries wrote:
</I>&gt;&gt;&gt;&gt;<i> Does the master process get exit status of *all* worker
</I>&gt;&gt;&gt;&gt;<i> processes and the sub-childs down N levels? It was my
</I>&gt;&gt;&gt;&gt;<i> understanding that in SMP each worker disker etc is a fork()
</I>&gt;&gt;&gt;&gt;<i> and the child becomes new coordinator.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Hi Amos,
</I>&gt;<i> 
</I>&gt;<i> In SMP, there is only one Coordinator process, created by the
</I>&gt;<i> Master process.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> I suspect we will find that some diskers etc are in fact spawned
</I>&gt;&gt;<i> by either coordinator or a worker and one level deeper than the
</I>&gt;&gt;<i> master can see.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> All SMP kids (Coordinator, workers, and diskers) are started by
</I>&gt;<i> the Master process. There are no multiple levels as far as kid
</I>&gt;<i> startup and waiting are concerned and, hence, there is no &quot;level
</I>&gt;<i> deeper than the master can see&quot;.
</I>&gt;<i> 
</I>&gt;<i> Needless to say, there are processes that are not SMP kids. For
</I>&gt;<i> example, all helpers do not run Squid code and, hence, they are not
</I>&gt;<i> kids and are not affected by the proposed fix.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> HTH,
</I>&gt;<i> 
</I>&gt;<i> Alex.
</I>&gt;<i> 
</I>

Hmm, okay. Then I have no problem per-se to this change of esponsibility.

I do still think the coordinator needs to remain active until last out
of the kids though, so they can still use it to coordinate during
their shutdowns. Having it be the first up and last down would solve a
few architectural problems where kids need to to collaborate on
things, like log rotations or broadcasting their availability.

Amos
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.22 (MingW32)

iQEcBAEBAgAGBQJUuTOSAAoJELJo5wb/XPRj76UIAJk+f4O4aiIp4Hmw7bZpD5zV
3MGcai6k7kTG8/4ncvnsZCT9lG1shgA41JeNpoUzCMvo9kfRJ7wHYpwXZT0UNeEW
mwE2TZXjwt1cWewyfwnb24Pph5vCBEhI7wqgANH3/+duZkAYzHuEl09G62LEpAR3
KBrmAJUP468brWXMLdDAJAUNo4c1e5U74vqI2k2Dnn25NjCxg1yLLx3RB4oDNGqI
WbLAR8hR4ni4gl5jkJwdFb9yFgROaciQxVrLchj/ub73j2yoPF4hBgwwx2hola+f
rJDRDiQugVbTlDl4jyv3QjRc3NLMA27qZKV0DCIxEIYZ7F+3niG4VVTo6mQhgEo=
=Naou
-----END PGP SIGNATURE-----
</PRE>




























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001166.html">[squid-dev] Moved PID file management from Coordinator to Master
</A></li>
	<LI>Next message: <A HREF="001290.html">[squid-dev] Moved PID file management from Coordinator to Master
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1170">[ date ]</a>
              <a href="thread.html#1170">[ thread ]</a>
              <a href="subject.html#1170">[ subject ]</a>
              <a href="author.html#1170">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
