<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [PATCH] received_encrypted ACL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20received_encrypted%20ACL&In-Reply-To=%3C55AD4294.1090204%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="002729.html">
   <LINK REL="Next"  HREF="002755.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [PATCH] received_encrypted ACL</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20received_encrypted%20ACL&In-Reply-To=%3C55AD4294.1090204%40measurement-factory.com%3E"
       TITLE="[squid-dev] [PATCH] received_encrypted ACL">rousskov at measurement-factory.com
       </A><BR>
    <I>Mon Jul 20 18:48:52 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="002729.html">[squid-dev] [PATCH] received_encrypted ACL
</A></li>
        <LI>Next message: <A HREF="002755.html">[squid-dev] [PATCH] received_encrypted ACL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2748">[ date ]</a>
              <a href="thread.html#2748">[ thread ]</a>
              <a href="subject.html#2748">[ subject ]</a>
              <a href="author.html#2748">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 07/20/2015 09:27 AM, Kinkie wrote:

&gt;<i> sorry for butting in but I am a bit confused by this discussion, as it
</I>&gt;<i> seems to be straying from the technical merit; this is my attempt at
</I>&gt;<i> getting back to the core of the topic.
</I>

Thank you for your help!


&gt;<i> Amos claims that its stated objective can be achieved by other,
</I>&gt;<i> already-existing, features, and that it this proposal has a high
</I>&gt;<i> false-positive rate.
</I>&gt;<i> 
</I>&gt;<i> So in my opinion the easiest way to move the discussion forward is to:
</I>
&gt;<i> 1. find one use-case which cannot be covered by existing features
</I>
Absolute impossibility is too high of a bar, IMO. A lot of things are
possible with excessive amount of work and mind boggling complexity.
However, I can suggest this configuration sketch as one example where
the proposed ACL would be very handy if not essential:

# A set of ports that may be changed depending on deployment.
# Some may be configured to bump traffic, some not. Some may intercept.
# The bumping ports do not bump everything (see ssl_bump below).
http_port port1 ssl-bump ...
https_port port2 ssl-bump ...
http_port port3 ...
https_port port4 ssl-bump ...

# SslBumping rules (note that some of these ACLs cannot be computed
# until later bumping stages, some rules create fake CONNECT requests
# for adaptation services, and the order of rules is significant):
ssl_bump splice aclBump0
ssl_bump peek aclBump1
ssl_bump stare aclBump2
ssl_bump splice aclBump3
ssl_bump bump aclBump4

# If all transaction messages were received over SSL or TLS
# connections, then send it to the ICAP service icapS. Otherwise,
# send it to icapN. The rules apply to all transactions, including
#  - plain http: transactions over plain connections to http_port,
#  - plain http: transactions over intercepted plain connections,
#  + plain http: transactions from bumped TLS connections,
#  + plain http: transactions from direct TLS connections to https_port,
#  + plain http: transactions from direct TLS connections to https_port
#  + fake CONNECT messages generated for bumped intercepted transactions
adaptation_access icapS aclIcap
adaptation_access icapN !aclIcap


aclIcap can be a received_encrypted ACL. What ACL expression would you
suggest for aclIcap if received_encrypted is not available?


IIRC, the deployed configuration (before received_encrypted was
implemented) used &quot;all&quot; ACL for aclIcap because the admin could not come
up with anything much better using existing ACLs.


&gt;<i> 2a. claim that the false-positive scenarios found by Amos are either
</I>&gt;<i> intentional or not incorrect, OR
</I>&gt;<i> 2b. find ways to reduce the false positives in the scenarios hihglighted
</I>&gt;<i> by Amos, OR
</I>&gt;<i> 2c. rework the existing features (if possible) to allow the &quot;early
</I>&gt;<i> detection&quot; which is in my understanding the most touted benefit of the
</I>&gt;<i> proposed solution
</I>
I do not know what false positives you are talking about specifically,
but in the above specific example, occasional false positives (if any)
are OK. They simply increase the load on the icapS service. If there is
a large number of them, then we may want to do more work, but keep in
mind that we only need to improve the 100% &quot;all&quot; case that contains a
huge number of false positives!


HTH,

Alex.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002729.html">[squid-dev] [PATCH] received_encrypted ACL
</A></li>
	<LI>Next message: <A HREF="002755.html">[squid-dev] [PATCH] received_encrypted ACL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2748">[ date ]</a>
              <a href="thread.html#2748">[ thread ]</a>
              <a href="subject.html#2748">[ subject ]</a>
              <a href="author.html#2748">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
