<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] libltdl in squid
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20libltdl%20in%20squid&In-Reply-To=%3C557B4361.5040000%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="002420.html">
   <LINK REL="Next"  HREF="002422.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] libltdl in squid</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20libltdl%20in%20squid&In-Reply-To=%3C557B4361.5040000%40treenet.co.nz%3E"
       TITLE="[squid-dev] libltdl in squid">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Jun 12 20:38:57 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="002420.html">[squid-dev] libltdl in squid
</A></li>
        <LI>Next message: <A HREF="002422.html">[squid-dev] [squid-bugs] Squid 3.4.10 with moments CPU 100%
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2421">[ date ]</a>
              <a href="thread.html#2421">[ thread ]</a>
              <a href="subject.html#2421">[ subject ]</a>
              <a href="author.html#2421">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 13/06/2015 1:54 a.m., Eray Aslan wrote:
&gt;<i> Is there any particular reason we are shipping and building libltdl in
</I>&gt;<i> squid tarballs?  Problem I am facing is when I run autoreconf,
</I>&gt;<i> libtoolize blindly copies over am__api_version -which has the automake
</I>&gt;<i> version libtool was compiled with and not the version currently running
</I>&gt;<i> on the system- to aclocal.m4 which later errors out.
</I>&gt;<i> 
</I>&gt;<i> While libtoolize behaviour is certainly not ideal, why is squid not
</I>&gt;<i> using the system libltdl?  That seems to be the correct course of
</I>&gt;<i> action.  Is there a downside to getting rid of libltdl that I am
</I>&gt;<i> missing?
</I>&gt;<i> 
</I>&gt;<i> Gory details at:
</I>&gt;<i> <A HREF="https://bugs.gentoo.org/show_bug.cgi?id=536420">https://bugs.gentoo.org/show_bug.cgi?id=536420</A>
</I>&gt;<i> 
</I>&gt;<i> Thank you.
</I>&gt;<i> 
</I>
Hi Eray,
 Squid should be using the system libltdl.

IIUIC, the ./libltdl/ bits are in two parts:
- the headers and bits for building an lib*.a to link with. Which are
used as if libltdl was installed in the system includes/ directory.
Run-time it dynamicaly loads the system libltdl.

- also a sub-dir with bits to build a static libltdl. This requires the
--use-included-ltdl option to build and overrides the above run-time load.


I am wondering how you can have libtoolize run and not have the contents
of the libltdl directory entirely replaced to be compatible with the
current OS version. Because, thats exactly what we do to generate it in
the first place.
 Is there possibly multiple libltdl installed on the build system and
libtoolize embedding info from the non-dominant system libltdl version
into Squid?
 There was a hint in the bug that automake was embedding code files
indicating bogus version details.


NP: It is bundled for the old OS or ones that dont supply any
libtool/ltdl compatible with the autoconf version we generate Squid with.


Amos
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002420.html">[squid-dev] libltdl in squid
</A></li>
	<LI>Next message: <A HREF="002422.html">[squid-dev] [squid-bugs] Squid 3.4.10 with moments CPU 100%
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2421">[ date ]</a>
              <a href="thread.html#2421">[ thread ]</a>
              <a href="subject.html#2421">[ subject ]</a>
              <a href="author.html#2421">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
