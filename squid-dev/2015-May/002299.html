<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [PATCH] Add chained certificates and signing certificate to bumpAndSpliced connections
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Add%20chained%20certificates%20and%20signing%0A%20certificate%20to%20bumpAndSpliced%20connections&In-Reply-To=%3CCAGUJm7aYUvip9V%3DU6svG9bH4Y41aUfSB30Xvv%3Dk%2BQWn_O8wGOw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="002295.html">
   <LINK REL="Next"  HREF="002365.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [PATCH] Add chained certificates and signing certificate to bumpAndSpliced connections</H1>
    <B>Nathan Hoad</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Add%20chained%20certificates%20and%20signing%0A%20certificate%20to%20bumpAndSpliced%20connections&In-Reply-To=%3CCAGUJm7aYUvip9V%3DU6svG9bH4Y41aUfSB30Xvv%3Dk%2BQWn_O8wGOw%40mail.gmail.com%3E"
       TITLE="[squid-dev] [PATCH] Add chained certificates and signing certificate to bumpAndSpliced connections">nathan at getoffmalawn.com
       </A><BR>
    <I>Tue May  5 07:13:12 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="002295.html">[squid-dev] [PATCH] Add chained certificates and signing certificate to bumpAndSpliced connections
</A></li>
        <LI>Next message: <A HREF="002365.html">[squid-dev] [PATCH] Add chained certificates and signing certificate to bumpAndSpliced connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2299">[ date ]</a>
              <a href="thread.html#2299">[ thread ]</a>
              <a href="subject.html#2299">[ subject ]</a>
              <a href="author.html#2299">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 1 May 2015 at 18:36, Amos Jeffries &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">squid3 at treenet.co.nz</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Which mode? bump or splice or peek-then-bump or peek-then-splice mode?
</I>
Peek then bump! Apologies, I was incredibly unclear on that.

&gt;<i>
</I>&gt;<i> The valid operations are different in each combination of operations.
</I>&gt;<i>
</I>&gt;<i> bump mode is equivalent to the old client-first. Where squid is
</I>&gt;<i> generating teh whole certificate chain sent to the client.
</I>&gt;<i>
</I>&gt;<i> splice or peek-then-splice modes are both equivalent to not bumping at
</I>&gt;<i> all. Squid is expected to pass on exactly what the server emits, no
</I>&gt;<i> matter how screwed.
</I>&gt;<i>
</I>&gt;<i> peek-then-bump is equivalent to server-first mode. Where the
</I>&gt;<i> certificates generated by Squid are expected to mimic what the server
</I>&gt;<i> sent. The full chain is only expected IF the server sent its whole chain.
</I>
The scenario this patch addresses is when Squid is configured with an
intermediate signing CA certificate, and clients have the root CA
installed on their machines. What happens is that the generated
certificates come down with an unknown issuer (the intermediate
signing certificate), with no intermediates, so they are rejected. By
adding the configured certificate chain as old client-first mode did,
the intermediate and root certificates come down as well, resulting in
the issuer being identified and the connection being established
&quot;securely&quot;.

&gt;<i>
</I>&gt;<i> Amos
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-dev mailing list
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">squid-dev at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">http://lists.squid-cache.org/listinfo/squid-dev</A>
</I></PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002295.html">[squid-dev] [PATCH] Add chained certificates and signing certificate to bumpAndSpliced connections
</A></li>
	<LI>Next message: <A HREF="002365.html">[squid-dev] [PATCH] Add chained certificates and signing certificate to bumpAndSpliced connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2299">[ date ]</a>
              <a href="thread.html#2299">[ thread ]</a>
              <a href="subject.html#2299">[ subject ]</a>
              <a href="author.html#2299">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
