<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [PATCH] Handshake Problem during Renegotiation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Handshake%20Problem%20during%20Renegotiation&In-Reply-To=%3C563CEECB.6080104%40chtsanti.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="003684.html">
   <LINK REL="Next"  HREF="003683.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [PATCH] Handshake Problem during Renegotiation</H1>
    <B>Christos Tsantilas</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Handshake%20Problem%20during%20Renegotiation&In-Reply-To=%3C563CEECB.6080104%40chtsanti.net%3E"
       TITLE="[squid-dev] [PATCH] Handshake Problem during Renegotiation">christos at chtsanti.net
       </A><BR>
    <I>Fri Nov  6 18:17:47 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="003684.html">[squid-dev] Jenkins build is back to normal : trunk-polygraph #913
</A></li>
        <LI>Next message: <A HREF="003683.html">[squid-dev] [PATCH] Handshake Problem during Renegotiation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3681">[ date ]</a>
              <a href="thread.html#3681">[ thread ]</a>
              <a href="subject.html#3681">[ subject ]</a>
              <a href="author.html#3681">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Project description:
    - Squid receives SSL Hello from the client (TCP connection A).

    - Squid successfully negotiates an SSL connection with the origin 
server (TCP connection B).

    - Squid successfully negotiates an SSL connection with the client 
(TCP connection A).

    - Squid marks connection B as &quot;idle&quot; and waits an HTTP request from 
connection A.

    - The origin server continues talking to Squid (TCP connection B). 
Squid detects a network read on an idle connection and closes TCP 
connection B (and then the associated TCP connection A as well).

This patch:
- When squid detects a network read on server idle connection do an 
SSL_read to:
     a) see if application data received from server and abort in this case
     b) detect possible SSL error, or SSL shutdown message from server
     c) or ignore if only SSL protocol related packets received.

This is a Measurement Factory project
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Handshake-Problem-during-Renegotiation-t4.patch
Type: text/x-patch
Size: 6876 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-dev/attachments/20151106/36f78741/attachment.bin">http://lists.squid-cache.org/pipermail/squid-dev/attachments/20151106/36f78741/attachment.bin</A>&gt;
</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003684.html">[squid-dev] Jenkins build is back to normal : trunk-polygraph #913
</A></li>
	<LI>Next message: <A HREF="003683.html">[squid-dev] [PATCH] Handshake Problem during Renegotiation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3681">[ date ]</a>
              <a href="thread.html#3681">[ thread ]</a>
              <a href="subject.html#3681">[ subject ]</a>
              <a href="author.html#3681">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
