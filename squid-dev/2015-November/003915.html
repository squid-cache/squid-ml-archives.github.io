<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] &quot;TCP_MISS/304&quot; can we describe it better?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%22TCP_MISS/304%22%20can%20we%20describe%20it%20better%3F&In-Reply-To=%3C565507F2.5050707%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="003914.html">
   <LINK REL="Next"  HREF="003925.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] &quot;TCP_MISS/304&quot; can we describe it better?</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%22TCP_MISS/304%22%20can%20we%20describe%20it%20better%3F&In-Reply-To=%3C565507F2.5050707%40treenet.co.nz%3E"
       TITLE="[squid-dev] &quot;TCP_MISS/304&quot; can we describe it better?">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Nov 25 00:59:30 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="003914.html">[squid-dev] &quot;TCP_MISS/304&quot; can we describe it better?
</A></li>
        <LI>Next message: <A HREF="003925.html">[squid-dev] &quot;TCP_MISS/304&quot; can we describe it better?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3915">[ date ]</a>
              <a href="thread.html#3915">[ thread ]</a>
              <a href="subject.html#3915">[ subject ]</a>
              <a href="author.html#3915">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 25/11/2015 1:19 p.m., Eliezer Croitoru wrote:
&gt;<i> I was wondering for a very long time.
</I>&gt;<i> We have changed some of the access.log syntax and TCP_REFRESH_X was added.
</I>&gt;<i> The TCP_MISS/304 is a bit miss leading when using the current squid
</I>&gt;<i> access.log analytical tools.
</I>&gt;<i> I think that it can be changed to something else since it's the right
</I>&gt;<i> thing to do.
</I>&gt;<i> It is a MISS since the origin was contacted and the full response from
</I>&gt;<i> the server was spliced to the client and this is what the log should
</I>&gt;<i> basically show.
</I>&gt;<i> But admins just count &quot;TCP_MISS&quot; as a loss of HIT.
</I>&gt;<i> I know they are not right and it's their way of understanding the logs
</I>&gt;<i> wrongly but what should happen? Should it stay like this?
</I>&gt;<i> Maybe the statistics tools are not up-to-date and this is not a squid
</I>&gt;<i> issue.
</I>&gt;<i> 
</I>&gt;<i> Will it be a good idea to change it a bit or that &quot;TCP_MISS/304&quot; is a
</I>&gt;<i> good one?
</I>
I suspect that should be TCP_IMS_MISS/304 or
TCP_CLIENT_REFRESH_MISS/304. But de-tangling it could be tricky. And
still will not solve the misunderstanding about &quot;MISS&quot; being in the name.


The problem is that the old code used a single enum value for each tag
name (as a whole) and each point updating the tag has to individually
calculate/estimate the entirety of the Squid processing that might have
been applied previously. Mistakes get made of course, or data needed to
decide properly is unknown, or two paths can reach the same set point.
Which is where that confusing output comes from.

I am wanting to make the LogTags a set of flags that different code
paths in Squid can set only the ones relevant to them. The log then
shows the final set, which is more accurately the code path that acted
on each request.


I got as far as moving the enum value into LogTags class and generating
the log entry from that class. But quick experiments about making &quot;TCP_&quot;
into a flag set by httpAccept() did not go well and its currently on hold.


Amos

</PRE>


















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003914.html">[squid-dev] &quot;TCP_MISS/304&quot; can we describe it better?
</A></li>
	<LI>Next message: <A HREF="003925.html">[squid-dev] &quot;TCP_MISS/304&quot; can we describe it better?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3915">[ date ]</a>
              <a href="thread.html#3915">[ thread ]</a>
              <a href="subject.html#3915">[ subject ]</a>
              <a href="author.html#3915">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
