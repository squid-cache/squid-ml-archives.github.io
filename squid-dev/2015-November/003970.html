<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [PATCH] Restrict SslBump inspections of cache_peer	connections.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Restrict%20SslBump%20inspections%20of%20cache_peer%0A%09connections.&In-Reply-To=%3C5656F247.1080701%40chtsanti.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="004009.html">
   <LINK REL="Next"  HREF="004012.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [PATCH] Restrict SslBump inspections of cache_peer	connections.</H1>
    <B>Christos Tsantilas</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Restrict%20SslBump%20inspections%20of%20cache_peer%0A%09connections.&In-Reply-To=%3C5656F247.1080701%40chtsanti.net%3E"
       TITLE="[squid-dev] [PATCH] Restrict SslBump inspections of cache_peer	connections.">christos at chtsanti.net
       </A><BR>
    <I>Thu Nov 26 11:51:35 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="004009.html">[squid-dev] Jenkins build is back to normal : trunk-full-matrix » clang,d-fedora-21 #52
</A></li>
        <LI>Next message: <A HREF="004012.html">[squid-dev] [PATCH] Restrict SslBump inspections of cache_peer connections.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3970">[ date ]</a>
              <a href="thread.html#3970">[ thread ]</a>
              <a href="subject.html#3970">[ subject ]</a>
              <a href="author.html#3970">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
This change is specific to FwdState code path. It does not affect 
tunneled traffic. Thus, it does not affect CONNECT tunnels unless they 
are being inspected with SslBump code.

The old code always used PeekingPeerConnector when connecting to a 
TLS-related cache_peer. That approach worked because 
PeekingPeerConnector does not always  inspect the SSL/TLS connection it 
establishes. We were kind of lucky that  PeekingPeerConnector exceptions 
matched FwdState needs.

The primary PeekingPeerConnector goal is to inspect. As its code 
evolves, it may enable inspection when FwdState does not want it. 
Non-peeking cases inside PeekingPeerConnector should all deal with 
exceptional situations that are difficult to predict a priori, before 
the connector object is created.

This change restricts inspection to cases where an inspected SSL client 
connection is being forwarded, reducing the probability that a peer 
connection is wrongly inspected. This change does not fix any known bugs.

This is a Measurement Factory project.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: use-BlindPeerConnector-toPeer-t3.patch
Type: text/x-patch
Size: 3532 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-dev/attachments/20151126/ecb40bd7/attachment.bin">http://lists.squid-cache.org/pipermail/squid-dev/attachments/20151126/ecb40bd7/attachment.bin</A>&gt;
</PRE>














































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004009.html">[squid-dev] Jenkins build is back to normal : trunk-full-matrix » clang,d-fedora-21 #52
</A></li>
	<LI>Next message: <A HREF="004012.html">[squid-dev] [PATCH] Restrict SslBump inspections of cache_peer connections.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3970">[ date ]</a>
              <a href="thread.html#3970">[ thread ]</a>
              <a href="subject.html#3970">[ subject ]</a>
              <a href="author.html#3970">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
