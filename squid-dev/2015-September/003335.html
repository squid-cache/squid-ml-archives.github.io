<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] default SSL client and server methods
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20default%20SSL%20client%20and%20server%20methods&In-Reply-To=%3C55F1D725.7090802%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="003333.html">
   <LINK REL="Next"  HREF="003340.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] default SSL client and server methods</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20default%20SSL%20client%20and%20server%20methods&In-Reply-To=%3C55F1D725.7090802%40treenet.co.nz%3E"
       TITLE="[squid-dev] default SSL client and server methods">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Sep 10 19:16:53 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="003333.html">[squid-dev] default SSL client and server methods
</A></li>
        <LI>Next message: <A HREF="003340.html">[squid-dev] Moving from Bump-Server-First to Bump/Peek/Splice
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3335">[ date ]</a>
              <a href="thread.html#3335">[ thread ]</a>
              <a href="subject.html#3335">[ subject ]</a>
              <a href="author.html#3335">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/09/2015 5:04 a.m., Tsantilas Christos wrote:
&gt;<i> Hi all,
</I>&gt;<i> 
</I>&gt;<i>   starting from Stuart Henderson mail about libreSSL I saw that in
</I>&gt;<i> current squid trunk (but not squid-3.5), for many Linux OS systems we
</I>&gt;<i> are always using SSLv23 as default method while connecting to server or
</I>&gt;<i> connecting to clients, without giving an other alternate to the users..
</I>&gt;<i> 
</I>&gt;<i> The problem I am seeing is that we are using the TLS_server_method() and
</I>&gt;<i> TLS_client_method() which are available only in openSSL-1.1.0 and later.
</I>&gt;<i> But many OSes still using older openSSL libraries, so the users for
</I>&gt;<i> these systems are forced to use SSLv23 method without any other alternate.
</I>&gt;<i> 
</I>
Yes. That is intentional. TLS negotiation is different from SSL
negotiation. The code difference is mirrored the squid.conf options
change from sslversion=N to tls-min-version=1.M

Where in SSLv2 or SSLv3 the specification around method allows saying
&quot;this is my single version&quot;, and use only that version (no others).
 - Squid would identify the appropriate X-only method and use it.
 - OR, Squid would fallback to SSLv23_* and let the library use the
options string to determine method.

TLS says use a range from highest the library supports, down to some
minimum. (Until SSLv3 is disabled that should be left at minimum of
TLSv1.0 to avoid issues with FALLBACK_SCSP extension).
 - the library uses the options string to locate the appropriate method.
Always now rather than just as a default fallback.

For a proxy who needs to support maximum range of clients and servers we
should be using the range-based negotiation with configurable range
limits. Admin with more knowledge can use the options= parameters to
achieve X-only behaviour if they like to. Admin without the knowledge
required to do that are protected from shooting themselves and users in
the foot.

Regarding the library API function names;

The SSLv23_*_method() have been renamed to TLS_*_method() in the current
libraries. They operate in close enough the same way to be considered
drop-in replacements according to the OpenSSL documentation.

The method() selection was never something Squid got to decide. It was
always admin configured and the squid.conf settings to achieve it are
now different.

So is there a problem now?

Amos

</PRE>












































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003333.html">[squid-dev] default SSL client and server methods
</A></li>
	<LI>Next message: <A HREF="003340.html">[squid-dev] Moving from Bump-Server-First to Bump/Peek/Splice
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3335">[ date ]</a>
              <a href="thread.html#3335">[ thread ]</a>
              <a href="subject.html#3335">[ subject ]</a>
              <a href="author.html#3335">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
