<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] The next step towards: StoreID and metalink.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20The%20next%20step%20towards%3A%20StoreID%20and%20metalink.&In-Reply-To=%3C55FDEFB8.4000302%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="003411.html">
   <LINK REL="Next"  HREF="003423.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] The next step towards: StoreID and metalink.</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20The%20next%20step%20towards%3A%20StoreID%20and%20metalink.&In-Reply-To=%3C55FDEFB8.4000302%40ngtech.co.il%3E"
       TITLE="[squid-dev] The next step towards: StoreID and metalink.">eliezer at ngtech.co.il
       </A><BR>
    <I>Sat Sep 19 23:28:56 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="003411.html">[squid-dev] Hello
</A></li>
        <LI>Next message: <A HREF="003423.html">[squid-dev] The next step towards: StoreID and metalink.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3414">[ date ]</a>
              <a href="thread.html#3414">[ thread ]</a>
              <a href="subject.html#3414">[ subject ]</a>
              <a href="author.html#3414">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>As a non-direct continuation to StoreID I wanted to test how will a http 
message live hashing will effect a service.(CPU, RPS etc)
So I wrote a small ECAP module that is based on both passthru + modify 
samples and ecap-mongo[<A HREF="https://github.com/creamy/ecap-mongo">https://github.com/creamy/ecap-mongo</A>].

For the purpose of testing I have also built libecap RPM and also 
enabled the ECAP module in the main CentOS 7 squid RPM.
As a result from squid 3.5.9 RPM and on there will be support for ECAP 
modules.

If I will manage to build(probably will) libecap for CentOS 6 I will add 
there ecap support too.

The module source code is at:
<A HREF="http://paste.ngtech.co.il/pcytpgdx7">http://paste.ngtech.co.il/pcytpgdx7</A>

And for the first run it only calculates the hashes of the message 
content and doing nothing more.
The module might not be perfect but it gives the basic wanted result.

Since I want it to be the base for what ever will be related to 
metalinks I am looking for a pesudo on how to implement metalink SUPPORT 
in an ECAP module.
*If you have a idea on how to do that please share it.*

There are things which can help an ECAP module to decide how to do 
things when handling metalinks related affairs.
For example, a cache object lookup from within an ECAP module.
So basically the logic of the ECAP module is 100% blind to the cache 
internals.
For now it will be kind of static and should let the cache do what it can.

I remember some words about the option to use multiple StoreID tag 
responses to allow the cache lookup for each and every one of them but I 
am unsure what will be the right way to look at it.

Also what to do with the calculated hashes? put it in a DB? and then what?

So leaving the doubts and question aside. The first thing I want to do 
is to run some tests with the module ON in couple systems and I am 
looking for voluntaries.
Where do I find them? in the users list?

Eliezer
</PRE>





















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003411.html">[squid-dev] Hello
</A></li>
	<LI>Next message: <A HREF="003423.html">[squid-dev] The next step towards: StoreID and metalink.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3414">[ date ]</a>
              <a href="thread.html#3414">[ thread ]</a>
              <a href="subject.html#3414">[ subject ]</a>
              <a href="author.html#3414">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
