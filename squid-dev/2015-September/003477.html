<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] Fake CONNECT requests during SSL Bump
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Fake%20CONNECT%20requests%20during%20SSL%20Bump&In-Reply-To=%3C56043BEC.4040801%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="003476.html">
   <LINK REL="Next"  HREF="003483.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] Fake CONNECT requests during SSL Bump</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Fake%20CONNECT%20requests%20during%20SSL%20Bump&In-Reply-To=%3C56043BEC.4040801%40measurement-factory.com%3E"
       TITLE="[squid-dev] Fake CONNECT requests during SSL Bump">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Sep 24 18:07:40 UTC 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="003476.html">[squid-dev] Fake CONNECT requests during SSL Bump
</A></li>
        <LI>Next message: <A HREF="003483.html">[squid-dev] Fake CONNECT requests during SSL Bump
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3477">[ date ]</a>
              <a href="thread.html#3477">[ thread ]</a>
              <a href="subject.html#3477">[ subject ]</a>
              <a href="author.html#3477">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 09/24/2015 11:08 AM, Eliezer Croitoru wrote:

&gt;<i> I think that in the design of such a service or &quot;interface&quot; there should
</I>&gt;<i> be some marking of such eCAP-enabled ACLs to allow the helper do it's work.
</I>
The interface for eCAP-enabled ACLs is simple:

  acl &lt;name&gt; ask_adaptation_service &lt;existing adaptation service name&gt;

A REQMOD service receives a request header. A RESPMOD service receives
request and, if available, response headers. If the service responds
with ICAP 204 or equivalent, the ACL &quot;matches&quot;. If the service does not
respond or responds with a different status, the ACL does not match.

Future enhancements may include:

1. configurable status (e.g., to treat 200 OK responses as a &quot;match&quot;)
2. ICAP service support
3. fast ACLs support (see below)
4. custom deny_info responses via service responses
5. virgin body preview
6. full virgin body transfer

We could start by supporting only slow/async ACLs. They would be much
easier to support because the current adaptation service interface
itself is asynchronous.


&gt;<i> Just out of curiosity, what ACLs modules do you have in mind?
</I>
* The beginning of this email thread gives you one example.

* Virtually any existing eCAP or ICAP service currently used for
blocking messages. As Markus email on this thread says, most ICAP
services today are used for access control...

We have seen many problems where an ACL would be the best solution but
an external_acl helper is not (because it does not easily get the virgin
headers, does not get the virgin body, and/or cannot produce an HTTP
response message).

Alex.


&gt;<i> On 24/09/2015 18:12, Alex Rousskov wrote:
</I>&gt;&gt;&gt;<i> &gt;Most admins would be able to understand and write external_acl helpers
</I>&gt;&gt;&gt;<i> &gt;rather than an ICAP services.
</I>&gt;&gt;<i> This is not a sufficient reason to ban introduction of eCAP-enabled
</I>&gt;&gt;<i> ACLs, especially since one does not have to write an ICAP or eCAP
</I>&gt;&gt;<i> service to use it.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Alex.
</I>&gt;&gt;<i>
</I>
</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003476.html">[squid-dev] Fake CONNECT requests during SSL Bump
</A></li>
	<LI>Next message: <A HREF="003483.html">[squid-dev] Fake CONNECT requests during SSL Bump
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3477">[ date ]</a>
              <a href="thread.html#3477">[ thread ]</a>
              <a href="subject.html#3477">[ subject ]</a>
              <a href="author.html#3477">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
