<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [PATCH] Remove ServerOptions &quot;partial copy&quot; copy constructor
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Remove%20ServerOptions%20%22partial%20copy%22%20copy%0A%20constructor&In-Reply-To=%3C5709DEA7.1080008%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="005560.html">
   <LINK REL="Next"  HREF="005583.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [PATCH] Remove ServerOptions &quot;partial copy&quot; copy constructor</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Remove%20ServerOptions%20%22partial%20copy%22%20copy%0A%20constructor&In-Reply-To=%3C5709DEA7.1080008%40treenet.co.nz%3E"
       TITLE="[squid-dev] [PATCH] Remove ServerOptions &quot;partial copy&quot; copy constructor">squid3 at treenet.co.nz
       </A><BR>
    <I>Sun Apr 10 05:03:35 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="005560.html">[squid-dev] [PATCH] Remove ServerOptions &quot;partial copy&quot; copy constructor
</A></li>
        <LI>Next message: <A HREF="005583.html">[squid-dev] [PATCH] Remove ServerOptions &quot;partial copy&quot; copy constructor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5577">[ date ]</a>
              <a href="thread.html#5577">[ thread ]</a>
              <a href="subject.html#5577">[ subject ]</a>
              <a href="author.html#5577">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 8/04/2016 2:57 a.m., Alex Rousskov wrote:
&gt;<i> On 04/07/2016 03:22 AM, Amos Jeffries wrote:
</I>&gt;&gt;<i> On 7/04/2016 6:10 p.m., Alex Rousskov wrote:
</I>&gt;&gt;&gt;<i>     The attached patch removes broken and, AFAICT, unused &quot;partial copy&quot;
</I>&gt;&gt;&gt;<i> ServerOptions copy constructor.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> A (full) copy-constructor is needed on some systems for the clear()
</I>&gt;&gt;<i> method implementation to build.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> AFAICT, the clear() method needs an assignment operator rather than a
</I>&gt;<i> copy constructor. Prohibiting copy construction with &quot;= delete&quot; has no
</I>&gt;<i> effect on the compilation (with GCC v4). The code without manual copy
</I>&gt;<i> constructor builds with clang as well.
</I>&gt;<i> 
</I>&gt;<i> Is there something wrong with the full copy constructor generated by
</I>&gt;<i> default?
</I>&gt;<i> 
</I>&gt;<i> Can you share more information about what happens when there is no
</I>&gt;<i> manual copy constructor and which systems are affected?
</I>

IIRC there the default was none (implicit =delete) but some of the
operators from AnyP::CfgPort try to make use of it.

I dont recall which system or compiler version specifically sorry. But
CfgPort should only have copy-construct actions done on it for
split-stack OS such as OpenBSD. So maybe it only shows up there.

IIRC it was originally found in the BuildFarm testing so if this patch
passes the current BuildFarm matrix it can go in. And/or just apply and
add a proper ctor later if needed.

(I'll tentatively +1 this as-is if you want to do the latter).

Amos

</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005560.html">[squid-dev] [PATCH] Remove ServerOptions &quot;partial copy&quot; copy constructor
</A></li>
	<LI>Next message: <A HREF="005583.html">[squid-dev] [PATCH] Remove ServerOptions &quot;partial copy&quot; copy constructor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5577">[ date ]</a>
              <a href="thread.html#5577">[ thread ]</a>
              <a href="subject.html#5577">[ subject ]</a>
              <a href="author.html#5577">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
