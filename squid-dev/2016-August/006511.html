<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] Benchmarking Performance with reuseport
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Benchmarking%20Performance%20with%20reuseport&In-Reply-To=%3C406d166b-ce82-9134-26f9-077b05ad3bcb%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="006508.html">
   <LINK REL="Next"  HREF="006560.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] Benchmarking Performance with reuseport</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Benchmarking%20Performance%20with%20reuseport&In-Reply-To=%3C406d166b-ce82-9134-26f9-077b05ad3bcb%40treenet.co.nz%3E"
       TITLE="[squid-dev] Benchmarking Performance with reuseport">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Aug  4 11:12:36 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="006508.html">[squid-dev] Benchmarking Performance with reuseport
</A></li>
        <LI>Next message: <A HREF="006560.html">[squid-dev] Benchmarking Performance with reuseport
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6511">[ date ]</a>
              <a href="thread.html#6511">[ thread ]</a>
              <a href="subject.html#6511">[ subject ]</a>
              <a href="author.html#6511">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 4/08/2016 8:48 a.m., Marcus Kool wrote:
&gt;<i> <A HREF="https://www.nginx.com/blog/socket-sharding-nginx-release-1-9-1/">https://www.nginx.com/blog/socket-sharding-nginx-release-1-9-1/</A>
</I>&gt;<i> is an interesting short article about using the SO_REUSEPORT socket
</I>&gt;<i> option which increased performance of nginx and had better balancing
</I>&gt;<i> of connections across sockets of workers.
</I>&gt;<i> Since Squid has the issue that load is not very well balanced between
</I>&gt;<i> workers, I thought it is interesting to look at.
</I>&gt;<i> 
</I>
Thanks. This is something we could maybe use to reduce the amount of UDP
exchanges between workers and coordinator on startup. Since it prevents
the need for each worker to have the exact same FD socket ID for
http_port's. They woudl still have to inform the coordinator of those
IP:port being used anyhow.

But it will not help with the performance side of things during normal
operation since load != connection count.

I imagine that Nginx are seeing latency reduction due to no longer
needing a central worker that receives the connection then spawns a
whole new process to handle it. The behaviour sort of makes sense for a
web server (which Nginx is at heart still, a copy of Apache) spawning
CGI processes to handle each request. But kind of daft in these HTTP/1.1
multiplexed performance-centric days.

Amos

</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006508.html">[squid-dev] Benchmarking Performance with reuseport
</A></li>
	<LI>Next message: <A HREF="006560.html">[squid-dev] Benchmarking Performance with reuseport
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6511">[ date ]</a>
              <a href="thread.html#6511">[ thread ]</a>
              <a href="subject.html#6511">[ subject ]</a>
              <a href="author.html#6511">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
