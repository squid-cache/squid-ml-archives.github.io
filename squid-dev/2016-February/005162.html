<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [RFC] How would you call this &quot;authentication&quot; way?(a bit long)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BRFC%5D%20How%20would%20you%20call%20this%20%22authentication%22%0A%20way%3F%28a%20bit%20long%29&In-Reply-To=%3C56C5FD0F.90209%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="005161.html">
   <LINK REL="Next"  HREF="005165.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [RFC] How would you call this &quot;authentication&quot; way?(a bit long)</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BRFC%5D%20How%20would%20you%20call%20this%20%22authentication%22%0A%20way%3F%28a%20bit%20long%29&In-Reply-To=%3C56C5FD0F.90209%40treenet.co.nz%3E"
       TITLE="[squid-dev] [RFC] How would you call this &quot;authentication&quot; way?(a bit long)">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Feb 18 17:19:11 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="005161.html">[squid-dev] [RFC] How would you call this &quot;authentication&quot; way?(a	bit long)
</A></li>
        <LI>Next message: <A HREF="005165.html">[squid-dev] [RFC] --&gt; Redirect attack
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5162">[ date ]</a>
              <a href="thread.html#5162">[ thread ]</a>
              <a href="subject.html#5162">[ subject ]</a>
              <a href="author.html#5162">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 19/02/2016 5:28 a.m., Eliezer Croitoru wrote:
&gt;<i> After playing with couple SSO ideas in general I noticed that something
</I>&gt;<i> similar can be done with squid while it will not be as secured as
</I>&gt;<i> kerberos and couple other nice implementation.
</I>&gt;<i> 
</I>&gt;<i> Deatils:
</I>&gt;<i> A transparent proxy cannot authenticate users in the session level. The
</I>&gt;<i> current known available options are using some session db(by IP) or
</I>&gt;<i> Radius or LDAP(by ip) and couple others.
</I>&gt;<i> So for couple specific environments which uses either NAT or multiple
</I>&gt;<i> VNC\RDP sessions there is no option to authenticate a specific user but
</I>&gt;<i> a whole IP\machine.
</I>&gt;<i> 
</I>&gt;<i> The real solution would be to somehow make it possible for a browser to
</I>&gt;<i> know about the option of a &quot;transparent proxy&quot; and to also trust it.
</I>&gt;<i> Also this specific network must be secured enough so no rough dhcp
</I>&gt;<i> services will pop up and couple other network level restrictions will be
</I>&gt;<i> applied to ensure that the browser can authenticate to the proxy in the
</I>&gt;<i> case he will be there.(There might be some other attacks which I didn't
</I>&gt;<i> mentioned)
</I>&gt;<i> 
</I>
&quot;transparent proxy&quot; is a badly overloaded phrase.
 * Taken literally it means the same as &quot;forward-proxy&quot; in HTTP terminology.
 * Taken as a colloquial way of saying &quot;interception proxy&quot;, aka. MITM.
It is by definition not possible to have trust since the identity of the
proxy is unverifiable.


&gt;<i> Another approach to the issue:
</I>&gt;<i> Currently browsers use cookies to authenticate banks, police, health and
</I>&gt;<i> many other systems. They are not highly secured but they are being used
</I>&gt;<i> in many places.
</I>
Let me stop you right there.

In order to set a Cookie that is in any way equivalent to the
authentication/authorization sessions. The proxy has to first be able to
determine whether any two random connections came from the same client UA.
  If it is capable of doing that already then that is how the
authoriation session helper should be operating. No need for Cookie to
be involved.

The ability to set Cookies for generic UA-&gt;interceptor authorization is
an *outcome* of having a session. Not the reverse.

They could be used for the much more limited scope of tying two UA
connections for the same domain into a session. But ...

A secondary effect of using Cookie is that the Cookie data is then
delivered by the UA to the origin it thinks that Cookie belongs to.
Including down channels the proxy is not intercepting. This wastes a lot
of bandwidth, reveals not just the proxy existence but its session
credentials as well into the WAN.


There is still the ultimate question of trust needing to verify the
proxies identity. To ensure that the unseen proxy setting the Cookie is
the one its going to be delivered to later.


&gt;<i> 
</I>&gt;<i> Maybe we can use them for something?
</I>&gt;<i> Since the first days of cookies security restrictions was applied on
</I>&gt;<i> them to disable phishing, impersonation etc.
</I>&gt;<i> Many vendors &quot;secure&quot; the cookies based on user-agent string,
</I>&gt;<i> timestamps, origin ip and many others. These in very specific cases can
</I>&gt;<i> make it somehow harder on the cookie finder to use them but it still
</I>&gt;<i> might not be enough for many systems.
</I>
What you go on to describe is a Redirect attack. Its particularly a
favourite when attacking websites using OAuth.

Amos
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005161.html">[squid-dev] [RFC] How would you call this &quot;authentication&quot; way?(a	bit long)
</A></li>
	<LI>Next message: <A HREF="005165.html">[squid-dev] [RFC] --&gt; Redirect attack
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5162">[ date ]</a>
              <a href="thread.html#5162">[ thread ]</a>
              <a href="subject.html#5162">[ subject ]</a>
              <a href="author.html#5162">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
