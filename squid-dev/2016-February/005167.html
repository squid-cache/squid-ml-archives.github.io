<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] Patches proposal
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Patches%20proposal&In-Reply-To=%3C1525379081.365.1455886560688.JavaMail.root%40hscbrasil.com.br%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="005163.html">
   <LINK REL="Next"  HREF="005160.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] Patches proposal</H1>
    <B>William Lima</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Patches%20proposal&In-Reply-To=%3C1525379081.365.1455886560688.JavaMail.root%40hscbrasil.com.br%3E"
       TITLE="[squid-dev] Patches proposal">william.lima at hscbrasil.com.br
       </A><BR>
    <I>Fri Feb 19 12:56:00 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="005163.html">[squid-dev] Patches proposal
</A></li>
        <LI>Next message: <A HREF="005160.html">[squid-dev] Build failed in Jenkins: trunk-polygraph #948
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5167">[ date ]</a>
              <a href="thread.html#5167">[ thread ]</a>
              <a href="subject.html#5167">[ subject ]</a>
              <a href="author.html#5167">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I shall consider all recommendations.

Thank you!

William

----- Original Message -----
From: &quot;Alex Rousskov&quot; &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">rousskov at measurement-factory.com</A>&gt;
To: <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">squid-dev at lists.squid-cache.org</A>
Cc: &quot;Amos Jeffries&quot; &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">squid3 at treenet.co.nz</A>&gt;, &quot;William Lima&quot; &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">william.lima at hscbrasil.com.br</A>&gt;
Sent: Wednesday, February 17, 2016 9:11:21 PM
Subject: Re: [squid-dev] Patches proposal

On 02/17/2016 11:27 AM, Amos Jeffries wrote:
&gt;<i> On 18/02/2016 6:43 a.m., Alex Rousskov wrote:
</I>&gt;&gt;<i> On 02/17/2016 10:29 AM, Amos Jeffries wrote:
</I>&gt;&gt;&gt;<i> FYI: the model we have for helpers is that each backend type is
</I>&gt;&gt;&gt;<i> represented by a different helper binary that end-users configure to be
</I>&gt;&gt;&gt;<i> used (or not).
</I>

&gt;&gt;<i> It is not clear where a helper configuration ends and &quot;backend type&quot;
</I>&gt;&gt;<i> begin. IMHO, it is better to have
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> * a single helper that may be configured to use one of the two caching
</I>&gt;&gt;<i> modes (with reasonable defaults making that customization optional!) than
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> * two helpers, each supporting only one caching mode (requiring the
</I>&gt;&gt;<i> admin to always explicitly pick the right helper!).
</I>

&gt;&gt;&gt;<i> The OpenSSL local filesystem one is now called &quot;security_file_certgen&quot;.
</I>&gt;&gt;&gt;<i> A Redis DB helper would be &quot;security_redis_certgen&quot;.
</I>
&gt;&gt;<i> Why create a whole new binary?
</I>

&gt;<i> Because the &quot;file&quot; in its name means the data is stored to the local
</I>&gt;<i> filesystem in some &quot;flat-file&quot; DB format. My understanding is that redis
</I>&gt;<i> uses its own binary DB format.
</I>
The current helper name does not answer the question: If the current
helper was badly renamed to wrongly limit its scope, then we should
surely rename it again to avoid that limitation.


&gt;<i> The redis version requires a whole new library linkage, its header files
</I>&gt;<i> and code for its API use.
</I>
Yes, but why is that important here? Many Squid features require &quot;whole
library linkage and header files&quot;. Those dependencies do not result in
ten Squid binary names as far as we are concerned.


&gt;<i> As a result the two binaries will act very
</I>&gt;<i> differently when passed the same data.
</I>
They will act exactly the same from the caller point of view. The
database is one of the many internal optimizations.


&gt;<i> With a lot of policy and security implications around those differences.
</I>
Same with configuring Squid to use different cache_dirs, but we do not
create many Squid executables because of the many cache_dir types.


&gt;<i> A generic distro builder who builds two helpers leaves the
</I>&gt;<i> installers with the option to actually install only one binary if the
</I>&gt;<i> other does not meet local policy/security requirements.
</I>
That sounds like a valid argument, although you seem to be invalidating
it below. Not sure our cycles are best spent accommodating such cases,
but you know better.


&gt;<i> In the generic builders this is best supported by providing different
</I>&gt;<i> packages with different binaries inside.
</I>
Which means the &quot;generic builder&quot; is no longer &quot;generic&quot;. It is a person
that understands the difference between various Squid pieces. Such a
person can create multiple binaries using ./configure options and/or VMs.


&gt;<i> Which gets very annoying and/or
</I>&gt;<i> tricky if the difference is ./configure parameters
</I>&gt;<i> (--with/--without-hiredis) to produce different buinaries.
</I>
You may be right, but it is not obvious to me why different ./configure
options is such a big deal to a person who already understands the
difference between two certificate generation helpers that Squid builds
by default and who have installed enough libraries for both helpers to
be built by default.


&gt;<i> Its also about explaining to users why this &quot;file&quot; helper does not
</I>&gt;<i> necessarily store things to the local FS, where all the others do.
</I>
The letters &quot;file&quot; is a red herring IMO. They can and perhaps should be
changed.


William, when creating two binaries, please do not duplicate C++ code.
If that complicates things, just think of all the benefits for the
generic distro builders accommodating installers with special requirements!


Thank you,

Alex.

</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005163.html">[squid-dev] Patches proposal
</A></li>
	<LI>Next message: <A HREF="005160.html">[squid-dev] Build failed in Jenkins: trunk-polygraph #948
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5167">[ date ]</a>
              <a href="thread.html#5167">[ thread ]</a>
              <a href="subject.html#5167">[ subject ]</a>
              <a href="author.html#5167">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
