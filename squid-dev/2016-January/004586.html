<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [RFC] The situation with helpers/
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BRFC%5D%20The%20situation%20with%20helpers/&In-Reply-To=%3C568BF6E6.3010600%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="004518.html">
   <LINK REL="Next"  HREF="004651.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [RFC] The situation with helpers/</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BRFC%5D%20The%20situation%20with%20helpers/&In-Reply-To=%3C568BF6E6.3010600%40measurement-factory.com%3E"
       TITLE="[squid-dev] [RFC] The situation with helpers/">rousskov at measurement-factory.com
       </A><BR>
    <I>Tue Jan  5 17:01:26 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="004518.html">[squid-dev] [RFC] The situation with helpers/
</A></li>
        <LI>Next message: <A HREF="004651.html">[squid-dev] [RFC] The situation with helpers/
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4586">[ date ]</a>
              <a href="thread.html#4586">[ thread ]</a>
              <a href="subject.html#4586">[ subject ]</a>
              <a href="author.html#4586">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 01/04/2016 08:58 PM, Amos Jeffries wrote:
&gt;<i> The SBuf and CharacterSet patch auditing has brought up the questions of
</I>&gt;<i> why helpers/ is separate from src/, built first, what cross-dependency
</I>&gt;<i> there can be, and even why we are bundling C++ helpers to begin with.
</I>&gt;<i> 
</I>&gt;<i> So lets clarify it formally once and for all.
</I>&gt;<i> 
</I>&gt;<i> Q1: why is helpers/ built before src/ ?
</I>
A1: Primarily for historical and paranoia reasons.


&gt;<i> Q2: why is helpers/ separate from src/ ?
</I>
A2: Primarily for historical and paranoia reasons.


&gt;<i> should we shuffle them back to src/*/helpers/ directories on a
</I>&gt;<i> per-component basis ?
</I>
Yes w.r.t. src/. There is no known good reason to enact artificial hard
barriers between parts of Squid code. All Squid code should be in src/.

Not sure whether the helpers/ subdirectory is [always] needed but that
is a separate question.


&gt;<i> * it does somewhat hinder anyone wanting to manually build a single
</I>&gt;<i> helper. Though I have not heard of anyone doing so in many years.
</I>
The move does not preclude anyone from building a helper. The fact that
a few more things may be built along the way is a minor detail IMO.
Patches to improve dependency tracking (by migrating away from recursive
Makefiles??) are welcomed.


&gt;<i> * it does mean we should probably discard the goal of having the helpers
</I>&gt;<i> be demo code examples for people to base their custom helpers on.
</I>
The location of the helper code is pretty much irrelevant for the above
goal. However, if we want to provide demo helpers that are easy to
understand and customize, then we probably should not use C++ to write
those demo helpers.

* If we want to provide the smallest set of default helpers for the
widest possible set of deployment environments, then internal
dependencies are preferred to the external ones and, hence, C++ is the
best language choice.

* If we want to provide default production-quality helpers for the most
demanding deployment environments, then internal dependencies are
irrelevant, and C++ is the best language choice. Please note that I do
not know whether it is wise to declare performance the primary goal,
given the performance deficiencies of the helper interface itself and
the current Squid Project resources.

Any open source helper can be examined, customized, and cloned, of
course. Our decision with regard to programming language and
dependencies may make it easier or more difficult, but not impossible.
It is a question of the primary optimization target: ease of
understanding/customizability versus supported platforms versus performance.


HTH,

Alex.

</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004518.html">[squid-dev] [RFC] The situation with helpers/
</A></li>
	<LI>Next message: <A HREF="004651.html">[squid-dev] [RFC] The situation with helpers/
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4586">[ date ]</a>
              <a href="thread.html#4586">[ thread ]</a>
              <a href="subject.html#4586">[ subject ]</a>
              <a href="author.html#4586">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
