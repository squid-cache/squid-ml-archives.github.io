<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [RFC\PREVIEW] ICAP service nodown option addition.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BRFC%5CPREVIEW%5D%20ICAP%20service%20nodown%20option%20addition.&In-Reply-To=%3C5692BE0D.4010108%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="004597.html">
   <LINK REL="Next"  HREF="004592.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [RFC\PREVIEW] ICAP service nodown option addition.</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BRFC%5CPREVIEW%5D%20ICAP%20service%20nodown%20option%20addition.&In-Reply-To=%3C5692BE0D.4010108%40measurement-factory.com%3E"
       TITLE="[squid-dev] [RFC\PREVIEW] ICAP service nodown option addition.">rousskov at measurement-factory.com
       </A><BR>
    <I>Sun Jan 10 20:24:45 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="004597.html">[squid-dev] [RFC\PREVIEW] ICAP service nodown option addition.
</A></li>
        <LI>Next message: <A HREF="004592.html">[squid-dev] Build failed in Jenkins: trunk-polygraph #940
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4601">[ date ]</a>
              <a href="thread.html#4601">[ thread ]</a>
              <a href="subject.html#4601">[ subject ]</a>
              <a href="author.html#4601">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 01/09/2016 12:35 PM, Eliezer Croitoru wrote:
&gt;<i> On 08/01/2016 17:27, Alex Rousskov wrote:
</I>&gt;&gt;<i> On 01/07/2016 07:03 PM, Eliezer Croitoru wrote:
</I>&gt;&gt;&gt;<i> I added a configurable option to the ICAP services named &quot;nodown&quot; but
</I>&gt;&gt;&gt;<i> maybe another name would be better fit.
</I>
&gt;&gt;<i> Please do not use negative option names. If this feature is committed
</I>&gt;&gt;<i> despite my objections, please consider using &quot;always-up&quot; or another
</I>&gt;&gt;<i> positive name.
</I>
&gt;<i> Both nodown and always-up do not describe the exact meaning of the flag.
</I>&gt;<i> Do you(..and others) think that a longer name would be better? something
</I>&gt;<i> like &quot;options-only-suspened&quot; or &quot;suspend-only-by-options-fail&quot; ?
</I>
Let's finalize the scope of the changes before deciding how to name
them. My comment above was specific to the &quot;negativity&quot; of the name you
have chosen. The negativity should be avoided regardless of the feature
scope. As for the scope of the changes, I continue to think that a
different solution is needed.


&gt;<i> I was thinking about it but this feature eliminates every suspension
</I>&gt;<i> between each OPTIONS fetch\check.
</I>
IMO, the need for &quot;eliminating suspension between OPTIONS&quot; should be
addressed by adding an adaptation_failure directive driven by ACLs
instead of adding optional hard-coded decision logic. For example,

  # &quot;allowed&quot; adaptation failures are not counted as service failures
  adaptation_failure allow all


&gt;<i> I know it doesn't fit all setups but ...
</I>
Being applicable to &quot;all setups&quot; is impossible and is not required for
an optional feature to be accepted. However, while your specific use
case is important, we ought to consider other use cases as well,
especially when adding new configuration options.

The adaptation_failure directive will address a lot more use cases,
including yours. It is not difficult to implement. Thus, if we add
something, we should add the more general adaptation_failure (or
similar) support and not nodown (or similar) support.


&gt;<i> the idea is that the service is essential and the proxy cannot allow any
</I>&gt;<i> traffic without this service 
</I>
Also known as the default bypass=0 setting combined with the &quot;send all
requests to this service&quot; adaptation_access rule. This is already fully
supported. What Squid does not yet support is an admin-configurable
classification of adaptation failures: Which adaptation failures are
specific to the adaptation transaction and which are a sign of a failing
adaptation service? Your &quot;nodown&quot; proposal classifies all adaptation
failures as non-service failures. We can do much better without a lot
more work.


&gt;<i> Do you think a wiki article will be good enough to explain the use cases
</I>&gt;<i> of this option instead of the documentation?
</I>
I think we need a different configuration option or two. I do not think
the right new options require extensive documentation on the wiki, but
describing your specific use case and how you have handled it using
those new options may be useful for many admins, of course.


HTH,

Alex.

</PRE>



























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004597.html">[squid-dev] [RFC\PREVIEW] ICAP service nodown option addition.
</A></li>
	<LI>Next message: <A HREF="004592.html">[squid-dev] Build failed in Jenkins: trunk-polygraph #940
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4601">[ date ]</a>
              <a href="thread.html#4601">[ thread ]</a>
              <a href="subject.html#4601">[ subject ]</a>
              <a href="author.html#4601">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
