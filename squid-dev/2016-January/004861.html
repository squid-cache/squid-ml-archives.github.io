<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] Planning for experiments with Digest,	Link and metalink files.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Planning%20for%20experiments%20with%20Digest%2C%0A%09Link%20and%20metalink%20files.&In-Reply-To=%3C56A9CED5.40607%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="004860.html">
   <LINK REL="Next"  HREF="004863.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] Planning for experiments with Digest,	Link and metalink files.</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Planning%20for%20experiments%20with%20Digest%2C%0A%09Link%20and%20metalink%20files.&In-Reply-To=%3C56A9CED5.40607%40ngtech.co.il%3E"
       TITLE="[squid-dev] Planning for experiments with Digest,	Link and metalink files.">eliezer at ngtech.co.il
       </A><BR>
    <I>Thu Jan 28 08:18:29 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="004860.html">[squid-dev] [RFC] Fix shared memory initialization, cleanup. Ensure its usability.
</A></li>
        <LI>Next message: <A HREF="004863.html">[squid-dev] Planning for experiments with Digest, Link and metalink files.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4861">[ date ]</a>
              <a href="thread.html#4861">[ thread ]</a>
              <a href="subject.html#4861">[ subject ]</a>
              <a href="author.html#4861">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have been working for some time on experimenting things related to 
metalinks files and I have couple things in my mind about it.
Now I am running for more then 4 month my local proxy service with 
SHA256 live digesting of all traffic using an eCAP module.
It's a small service and cannot take too much weight but it seems that 
with digest enabled or disabled squid doesn't loose enough speed that I 
seem to care.

Now I wanted to move into another side of my experiment and to implement 
some web service that uses the metalinks files data.
Since metalinks are for files or static objects the first thing is a 
simple file server.

I do not know what header to use for the digest hashes? I have seen that 
fedora mirror server uses &quot;Digest: TYPE=hash&quot; but from what I remember 
Henrik was talking about Content-MD5 and similar.
I can implement both Content-TYPE headers and Digest but what standards 
are the up-to-date?

Also the other question, how should the If-None-Match or another 
conditional should be used(since it was meant for ETAG)?

For now I am only working on a full hash match leaving aside any partial 
content pieces matching.

The options to validate file hash vs a static web service are:
- via some POST request(which can return a 304\302\200)
- via special if-none-match header

Also I had in my mind a situation that the client has couple hashes and 
want to verify a full match to the whole set or to at-least one from a 
set. What do you think should be done?

The current implementations relies on the fact that everybody uses the 
same default hash but I am almost sure that somewhere in the future 
people would like to run Digest match to some kind of salted algorithm 
so I am considering what would be the right way to allow\implement 
support for such cases.
Am I dreaming too much?

Another issue is a PUT requests, does it makes sense to attach some 
Digest or other headers by the user that will be stored with the file 
metadata or metalink file? compared.. to uploading two files one for the 
object and another one for the metalink file?

Thanks,
Eliezer
</PRE>







<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004860.html">[squid-dev] [RFC] Fix shared memory initialization, cleanup. Ensure its usability.
</A></li>
	<LI>Next message: <A HREF="004863.html">[squid-dev] Planning for experiments with Digest, Link and metalink files.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4861">[ date ]</a>
              <a href="thread.html#4861">[ thread ]</a>
              <a href="subject.html#4861">[ subject ]</a>
              <a href="author.html#4861">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
