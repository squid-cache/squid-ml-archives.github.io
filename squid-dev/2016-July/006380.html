<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [PATCH] Fetch missing certificates
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Fetch%20missing%20certificates&In-Reply-To=%3C578F8C92.2020101%40chtsanti.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="006379.html">
   <LINK REL="Next"  HREF="006452.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [PATCH] Fetch missing certificates</H1>
    <B>Christos Tsantilas</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Fetch%20missing%20certificates&In-Reply-To=%3C578F8C92.2020101%40chtsanti.net%3E"
       TITLE="[squid-dev] [PATCH] Fetch missing certificates">christos at chtsanti.net
       </A><BR>
    <I>Wed Jul 20 14:37:06 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="006379.html">[squid-dev] [PATCH] Fetch missing certificates
</A></li>
        <LI>Next message: <A HREF="006452.html">[squid-dev] [PATCH] Fetch missing certificates
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6380">[ date ]</a>
              <a href="thread.html#6380">[ thread ]</a>
              <a href="subject.html#6380">[ subject ]</a>
              <a href="author.html#6380">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 07/20/2016 04:42 PM, Amos Jeffries wrote:
&gt;<i> On 16/07/2016 2:08 a.m., Christos Tsantilas wrote:
</I>&gt;&gt;<i> A new patch.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It also includes the following fixes:
</I>&gt;&gt;<i>    - Sets the log_uri for ClientHttpRequest build by Downloader
</I>&gt;&gt;<i>    - Removes two XXX comments from PeerConnector class, which are not
</I>&gt;&gt;<i> valid any more
</I>&gt;&gt;<i>    - Make the Downloader::CbDialer a CallDialer kid.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Please also see my comments bellow.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> On 07/14/2016 02:16 PM, Amos Jeffries wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>    - our coding style places documentation of class 'private' methods in
</I>&gt;&gt;&gt;<i> the .cc file not the .h.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ok, I fixed them, but we should change this style.
</I>&gt;&gt;<i> It is easier to have open the .h file and read the documentation for a
</I>&gt;&gt;<i> method you are going to use, than searching in the cc file to find the
</I>&gt;&gt;<i> documentation.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The reasoning behind the guideline was that these are *private* methods
</I>&gt;<i> of the class.
</I>&gt;<i>
</I>&gt;<i> The only time(s) one should be looking at (or bothered by) their
</I>&gt;<i> documentation is when one has the .cc open already. eg, when altering
</I>&gt;<i> the class, or when the public API methods are so badly documented, one
</I>&gt;<i> has resorted to reading their code.
</I>&gt;<i>
</I>&gt;<i> So we can reduce already large .h files a bit by having the
</I>&gt;<i> documentation internal to the .cc for these methods. Away from being a
</I>&gt;<i> distraction to anyone just needing to *use* the class.
</I>&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>    - why is DER format being used here? I think I know, but it needs to be
</I>&gt;&gt;&gt;<i> stated for clarity, Squid normally uses PEM format.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The DER format is used by RFCs for this and similar cases.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Sorry if I wasn't clear. I meant that needed documenting in the code.
</I>&gt;<i>
</I>&gt;<i> &quot;Assume that it is in DER format.&quot; is not enough to inform anyone in
</I>&gt;<i> future what RFCs etc. are saying that makes this assumption reasonable.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> in src/ssl/support.h:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> * can we use Security::CertPointer for the second parameter of
</I>&gt;&gt;&gt;<i> CertsIndexedList ?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I am not seeing any reason.
</I>&gt;&gt;<i> In any case we can do it with an other patch if required.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Reason being to avoid another patch just for that. Your choice though.
</I>
It is a fix unrelated to this patch.

Also the current CertsIndexedList type uses raw X509 pointer. To convert 
it to LockingPointer requires some work to test if all are ok after this 
change (eg for leaks or unexpected object de-structures).

This patch is enough complex alone. Better to finish with the one 
headache before involved with a new one.

&gt;<i>
</I>&gt;<i> FYI: Alex and I have agreed to steer away from raw-pointer usage now
</I>&gt;<i> when we can. And you also mentioned having trouble with the distinction
</I>&gt;<i> between Pointer and Ptr in the SSL/TLS code the other day. So I'm
</I>&gt;<i> looking to start proactively dropping the Ptr whenever possible now, and
</I>&gt;<i> just stick with Pointer.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> +1 from me. Apart from the DER comment improvement I think this is ready
</I>&gt;<i> to go in unless Alex spots anything.
</I>
Thank you. I will try to add short references to the related RFC.

&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks
</I>&gt;<i>
</I>&gt;<i> Amos
</I>

</PRE>












<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006379.html">[squid-dev] [PATCH] Fetch missing certificates
</A></li>
	<LI>Next message: <A HREF="006452.html">[squid-dev] [PATCH] Fetch missing certificates
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6380">[ date ]</a>
              <a href="thread.html#6380">[ thread ]</a>
              <a href="subject.html#6380">[ subject ]</a>
              <a href="author.html#6380">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
