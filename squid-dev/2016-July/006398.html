<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [PATCH] Some failed transactions are not logged
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Some%20failed%20transactions%20are%20not%20logged&In-Reply-To=%3C5790FDC5.1000509%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="006393.html">
   <LINK REL="Next"  HREF="006399.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [PATCH] Some failed transactions are not logged</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Some%20failed%20transactions%20are%20not%20logged&In-Reply-To=%3C5790FDC5.1000509%40measurement-factory.com%3E"
       TITLE="[squid-dev] [PATCH] Some failed transactions are not logged">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Jul 21 16:52:21 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="006393.html">[squid-dev] [PATCH] Some failed transactions are not logged
</A></li>
        <LI>Next message: <A HREF="006399.html">[squid-dev] [PATCH] Some failed transactions are not logged
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6398">[ date ]</a>
              <a href="thread.html#6398">[ thread ]</a>
              <a href="subject.html#6398">[ subject ]</a>
              <a href="author.html#6398">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 07/20/2016 05:27 PM, Eduard Bagdasaryan wrote:

&gt;<i> We do not have a 'getter' for receivedFirstByte_. It easy to add it
</I>&gt;<i> of course, but I assume the current receivedFirstByte() should be
</I>&gt;<i> refactored then
</I>
and renamed. Adding a getter is not going to be easy, is outside your
project scope, and is not really needed in the current code. The change
request itself was wrong given the current code state.


&gt;<i> void
</I>&gt;<i> ConnStateData::receivedFirstByte(bool on)
</I>&gt;<i> {
</I>&gt;<i>     if (on == receivedFirstByte_)
</I>&gt;<i>         return;
</I>&gt;<i>     receivedFirstByte_ = on;
</I>&gt;<i>     if (!receivedFirstByte_)
</I>&gt;<i>         return;
</I>&gt;<i>     // Set timeout to Config.Timeout.request
</I>&gt;<i>     typedef CommCbMemFunT&lt;ConnStateData, CommTimeoutCbParams&gt;
</I>&gt;<i> TimeoutDialer;
</I>&gt;<i>     AsyncCall::Pointer timeoutCall =  JobCallback(33, 5,
</I>&gt;<i>                                       TimeoutDialer, this,
</I>&gt;<i> ConnStateData::requestTimeout);
</I>&gt;<i>     commSetConnTimeout(clientConnection, Config.Timeout.request,
</I>&gt;<i> timeoutCall);
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> Then go through the code and use this new method instead of
</I>&gt;<i> receivedFirstByte_ assignment. Do we need all this?
</I>
Definitely not this monster!


Thank you,

Alex.

</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006393.html">[squid-dev] [PATCH] Some failed transactions are not logged
</A></li>
	<LI>Next message: <A HREF="006399.html">[squid-dev] [PATCH] Some failed transactions are not logged
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6398">[ date ]</a>
              <a href="thread.html#6398">[ thread ]</a>
              <a href="subject.html#6398">[ subject ]</a>
              <a href="author.html#6398">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
