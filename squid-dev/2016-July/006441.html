<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] Broken trunk after r14735
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Broken%20trunk%20after%20r14735&In-Reply-To=%3C57961DD3.3060502%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="006413.html">
   <LINK REL="Next"  HREF="006456.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] Broken trunk after r14735</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Broken%20trunk%20after%20r14735&In-Reply-To=%3C57961DD3.3060502%40measurement-factory.com%3E"
       TITLE="[squid-dev] Broken trunk after r14735">rousskov at measurement-factory.com
       </A><BR>
    <I>Mon Jul 25 14:10:27 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="006413.html">[squid-dev] Broken trunk after r14735
</A></li>
        <LI>Next message: <A HREF="006456.html">[squid-dev] [PATCH] Deletors for std::unique_ptr WAS: Re: Broken trunk after r14735
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6441">[ date ]</a>
              <a href="thread.html#6441">[ thread ]</a>
              <a href="subject.html#6441">[ subject ]</a>
              <a href="author.html#6441">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 07/24/2016 01:04 AM, Amos Jeffries wrote:

&gt;<i>   does replacing &quot;BIO_free&quot; with &quot;BIO_vfree&quot; in the ssl/gadgets.h
</I>&gt;<i> definition of BIO_POinter fix this one?
</I>
Same startup exception (quoted below) after patching trunk revision
14756 with

&gt;<i> -typedef std::unique_ptr&lt;BIO, std::function&lt;decltype(BIO_free)&gt;&gt; BIO_Pointer;
</I>&gt;<i> +typedef std::unique_ptr&lt;BIO, std::function&lt;decltype(BIO_vfree)&gt;&gt; BIO_Pointer;
</I>

Thank you,

Alex.

&gt;<i> terminate called after throwing an instance of 'std::bad_function_call'
</I>&gt;<i>   what():  bad_function_call
</I>&gt;<i> 
</I>&gt;<i> Program received signal SIGABRT, Aborted.
</I>&gt;<i> 0x00007ffff5a9ccc9 in __GI_raise (sig=<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">sig at entry</A>=6)
</I>&gt;<i>     at ../nptl/sysdeps/unix/sysv/linux/raise.c:56
</I>&gt;<i> 56      ../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or directory.
</I>&gt;<i> (gdb) where
</I>&gt;<i> #0  0x00007ffff5a9ccc9 in __GI_raise (sig=<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">sig at entry</A>=6)
</I>&gt;<i>     at ../nptl/sysdeps/unix/sysv/linux/raise.c:56
</I>&gt;<i> #1  0x00007ffff5aa00d8 in __GI_abort () at abort.c:89
</I>&gt;<i> #2  0x00007ffff63a76b5 in __gnu_cxx::__verbose_terminate_handler() ()
</I>&gt;<i>    from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
</I>&gt;<i> #3  0x00007ffff63a5836 in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
</I>&gt;<i> #4  0x00007ffff63a48f9 in ?? () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
</I>&gt;<i> #5  0x00007ffff63a54aa in __gxx_personality_v0 ()
</I>&gt;<i>    from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
</I>&gt;<i> #6  0x00007ffff5e3aff3 in ?? () from /lib/x86_64-linux-gnu/libgcc_s.so.1
</I>&gt;<i> #7  0x00007ffff5e3b37b in _Unwind_RaiseException ()
</I>&gt;<i>    from /lib/x86_64-linux-gnu/libgcc_s.so.1
</I>&gt;<i> #8  0x00007ffff63a5a95 in __cxa_throw ()
</I>&gt;<i>    from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
</I>&gt;<i> #9  0x00007ffff63f7aa2 in std::__throw_bad_function_call() ()
</I>&gt;<i>    from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
</I>&gt;<i> #10 0x00000000009a3604 in std::function&lt;void (bio_st*)&gt;::operator()(bio_st*) const (this=0x7fffffffe0e0, __args#0=0x1026850)
</I>&gt;<i>     at /usr/include/c++/4.8/functional:2463
</I>&gt;<i> #11 0x00000000009a2f4d in std::unique_ptr&lt;bio_st, std::function&lt;void (bio_st*)&gt; &gt;::~unique_ptr() (this=0x7fffffffe0e0, __in_chrg=&lt;optimized out&gt;)
</I>&gt;<i>     at /usr/include/c++/4.8/bits/unique_ptr.h:184
</I>&gt;<i> #12 0x00000000009b106d in Ssl::readSslPrivateKey (
</I>&gt;<i>     keyFilename=0x1000540 &quot;testing/ssl/CA-priv+pub.pem&quot;, 
</I>&gt;<i>     passwd_callback=0x0) at gadgets.cc:672
</I>&gt;<i> #13 0x00000000009a15af in Ssl::readCertChainAndPrivateKeyFromFiles (cert=..., 
</I>&gt;<i>     pkey=..., chain=..., 
</I>&gt;<i>     certFilename=0x1026760 &quot;testing/ssl/CA-priv+pub.pem&quot;, 
</I>&gt;<i>     keyFilename=0x1000540 &quot;testing/ssl/CA-priv+pub.pem&quot;)
</I>&gt;<i>     at support.cc:1270
</I>&gt;<i> #14 0x0000000000a0125c in AnyP::PortCfg::configureSslServerContext (
</I>&gt;<i>     this=0x1000270) at PortCfg.cc:120
</I>&gt;<i> #15 0x00000000006b0810 in configDoConfigure () at cache_cf.cc:910
</I>&gt;<i> #16 0x00000000006afa79 in parseConfigFile (
</I>&gt;<i>     file_name=0xff1d60 &quot;/usr/local/squid/etc/squid-trunk.conf&quot;)
</I>&gt;<i>     at cache_cf.cc:596
</I>&gt;<i> #17 0x00000000007ca4c5 in SquidMain (argc=4, argv=0x7fffffffe698)
</I>&gt;<i>     at main.cc:1521
</I>&gt;<i> #18 0x00000000007ca0ca in SquidMainSafe (argc=4, argv=0x7fffffffe698)
</I>&gt;<i>     at main.cc:1372
</I>&gt;<i> #19 0x00000000007ca0a7 in main (argc=4, argv=0x7fffffffe698) at main.cc:1365
</I>
</PRE>










<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006413.html">[squid-dev] Broken trunk after r14735
</A></li>
	<LI>Next message: <A HREF="006456.html">[squid-dev] [PATCH] Deletors for std::unique_ptr WAS: Re: Broken trunk after r14735
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6441">[ date ]</a>
              <a href="thread.html#6441">[ thread ]</a>
              <a href="subject.html#6441">[ subject ]</a>
              <a href="author.html#6441">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
