<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [PATCH] Use TCP_REFRESH_PENDING while waiting for IMS reply
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Use%20TCP_REFRESH_PENDING%20while%20waiting%20for%0A%20IMS%20reply&In-Reply-To=%3Ca868d6a4-0246-d76a-a4c3-a3f7e857e046%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="005852.html">
   <LINK REL="Next"  HREF="005900.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [PATCH] Use TCP_REFRESH_PENDING while waiting for IMS reply</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Use%20TCP_REFRESH_PENDING%20while%20waiting%20for%0A%20IMS%20reply&In-Reply-To=%3Ca868d6a4-0246-d76a-a4c3-a3f7e857e046%40treenet.co.nz%3E"
       TITLE="[squid-dev] [PATCH] Use TCP_REFRESH_PENDING while waiting for IMS reply">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Jun  1 11:39:20 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="005852.html">[squid-dev] Jenkins build is back to normal : trunk-matrix » clang,j-fbsd-93 #661
</A></li>
        <LI>Next message: <A HREF="005900.html">[squid-dev] [PATCH] Use TCP_REFRESH_PENDING while waiting for IMS reply
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5851">[ date ]</a>
              <a href="thread.html#5851">[ thread ]</a>
              <a href="subject.html#5851">[ subject ]</a>
              <a href="author.html#5851">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 1/06/2016 8:17 a.m., Eduard Bagdasaryan wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> This patch marks refresh-waiting transactions with TCP_REFRESH_PENDING.
</I>&gt;<i> 
</I>&gt;<i> Before this change, transactions initiating a refresh were still marked
</I>&gt;<i> as TCP_HIT*. If such a transaction was terminated (for any reason)
</I>&gt;<i> before receiving an IMS reply, it was logged with that misleading tag.
</I>&gt;<i> Now, such transactions are logged using TCP_REFRESH_PENDING[_ABORTED].
</I>&gt;<i> 
</I>&gt;<i> After the refresh (successful or otherwise), the tag changes to one of
</I>&gt;<i> the other TCP_REFRESH_* values, as before.
</I>
I am planing to make the tags into a bunch of flags that get set
individually by the relevant code. So the logged details would get
incrementally built up, much like this code is doing for the visible
behaviour of REFRESH action.

But to fit with that properly this should be called just &quot;TCP_REFRESH&quot;.

If there are no objections I will apply with that name change in ~24hrs.

Amos

</PRE>

















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005852.html">[squid-dev] Jenkins build is back to normal : trunk-matrix » clang,j-fbsd-93 #661
</A></li>
	<LI>Next message: <A HREF="005900.html">[squid-dev] [PATCH] Use TCP_REFRESH_PENDING while waiting for IMS reply
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5851">[ date ]</a>
              <a href="thread.html#5851">[ thread ]</a>
              <a href="subject.html#5851">[ subject ]</a>
              <a href="author.html#5851">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
