<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [RFC] ICAP external acl services
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BRFC%5D%20ICAP%20external%20acl%20services&In-Reply-To=%3C57680058.2070604%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="006021.html">
   <LINK REL="Next"  HREF="006008.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [RFC] ICAP external acl services</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BRFC%5D%20ICAP%20external%20acl%20services&In-Reply-To=%3C57680058.2070604%40measurement-factory.com%3E"
       TITLE="[squid-dev] [RFC] ICAP external acl services">rousskov at measurement-factory.com
       </A><BR>
    <I>Mon Jun 20 14:40:24 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="006021.html">[squid-dev] [RFC] ICAP external acl services
</A></li>
        <LI>Next message: <A HREF="006008.html">[squid-dev] Build failed in Jenkins: trunk-full-matrix » gcc,d-debian-unstable #185
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6007">[ date ]</a>
              <a href="thread.html#6007">[ thread ]</a>
              <a href="subject.html#6007">[ subject ]</a>
              <a href="author.html#6007">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 06/19/2016 12:53 PM, Eliezer Croitoru wrote:

&gt;<i> Alex mentioned long ago the idea\option to add an ICAP service as an
</I>&gt;<i> external_acl helper.
</I>
Not quite. We could add a new kind of slow ACL that would be backed by
an adaptation service (ICAP or eCAP). This is similar to how an external
ACL is backed by an external ACL helper today, but the new ACL will not
depend on the external ACL interface.

The primary benefits of adding such support are:

1. the new ACL can make decisions based on the message body;
2. the new ACL can make custom decisions faster than an external ACL
   (provided eCAP is used and possibly optimized; ICAP would be slower);
3. message adaptation/modification at numerous new vectoring points.

Everything else is already covered by external ACLs: Today, one can
write an external ACL helper that communicates with an ICAP or even eCAP
service. No Squid changes are necessary for that. However, a solution
based on external ACL does not get the benefits listed above.

Supplying message bodies to ACLs and allowing ACLs to modify messages
would be very difficult to implement given the current Squid code.
Correct configuration would also be difficult. It is not clear to me
whether all that complexity is worth the benefits.


There is also a much simpler idea that only provides benefit #2: A new
[fast] ACL kind that is backed by an eCAP service that provides an
[instant] decision based on message headers. Such ACLs can be made
significantly faster than external ACLs (benefit #2) and do not require
significant code changes. They do not provide benefits #1 and #3.


&gt;<i> Also any ICAP implementation requires a more deep understanding of HTTP
</I>&gt;<i> in general which has it’s own pros and cons.
</I>&gt;<i> 
</I>&gt;<i> The main benefit of an ICAP service as I see it is that it's not bound
</I>&gt;<i> to squid or c++ compared to eCAP.
</I>
eCAP is not bound to Squid either -- eCAP modules can be used in any
host application that supports the eCAP API. Squid is the only [popular]
open source eCAP host application right now, but that does not bind eCAP
adapters to Squid.


HTH,

Alex.

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006021.html">[squid-dev] [RFC] ICAP external acl services
</A></li>
	<LI>Next message: <A HREF="006008.html">[squid-dev] Build failed in Jenkins: trunk-full-matrix » gcc,d-debian-unstable #185
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6007">[ date ]</a>
              <a href="thread.html#6007">[ thread ]</a>
              <a href="subject.html#6007">[ subject ]</a>
              <a href="author.html#6007">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
