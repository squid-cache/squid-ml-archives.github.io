<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [PATCH] assertion failed: Write.cc:41: &quot;!ccb-&gt;active()&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20assertion%20failed%3A%20Write.cc%3A41%3A%0A%20%22%21ccb-%3Eactive%28%29%22&In-Reply-To=%3C56E8465A.6000407%40chtsanti.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="005313.html">
   <LINK REL="Next"  HREF="005322.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [PATCH] assertion failed: Write.cc:41: &quot;!ccb-&gt;active()&quot;</H1>
    <B>Christos Tsantilas</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20assertion%20failed%3A%20Write.cc%3A41%3A%0A%20%22%21ccb-%3Eactive%28%29%22&In-Reply-To=%3C56E8465A.6000407%40chtsanti.net%3E"
       TITLE="[squid-dev] [PATCH] assertion failed: Write.cc:41: &quot;!ccb-&gt;active()&quot;">christos at chtsanti.net
       </A><BR>
    <I>Tue Mar 15 17:28:58 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="005313.html">[squid-dev] [PATCH] assertion failed: Write.cc:41: &quot;!ccb-&gt;active()&quot;
</A></li>
        <LI>Next message: <A HREF="005322.html">[squid-dev] [PATCH] assertion failed: Write.cc:41: &quot;!ccb-&gt;active()&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5321">[ date ]</a>
              <a href="thread.html#5321">[ thread ]</a>
              <a href="subject.html#5321">[ subject ]</a>
              <a href="author.html#5321">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I applied the t4 patch to trunk as r14592

I am attaching the t4 patch for squid-3.5.
I believe that we should apply this patch for this major reasons:
   - The (statefull) FTP protocol requires good coordination between 
client-side and server side. The pinned connections is one mechanism 
which helps, but this is not enough. The stopWaiting/startWaiting adds 
one more mechanism. Will help us to solve more problems in the future.

   - The t4 patch also solves one more bug: In the case the FTP server 
respond with an error status after the download is finished, squid will 
return wrong status code to the user (success). Fixing this bug is 
possible because of the new mechanism.

Christos


On 03/15/2016 01:01 AM, Amos Jeffries wrote:
&gt;<i> On 15/03/2016 10:41 a.m., Alex Rousskov wrote:
</I>&gt;&gt;<i> On 03/10/2016 02:35 PM, Alex Rousskov wrote:
</I>&gt;&gt;&gt;<i> Amos, do you want us to port take2 to v3.5? The take1 patch for v3.5 is
</I>&gt;&gt;&gt;<i> enough to fix the known assertion. Take2 fixes that assertion as well,
</I>&gt;&gt;&gt;<i> but it is bigger because it also fixes design problems that may lead to
</I>&gt;&gt;&gt;<i> other bugs in v3.5. Which one do you want in v3.5?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Amos, that question still stands: What do you want to see in v3.5? The
</I>&gt;&gt;<i> simple take1 patch that only addresses a specific assertion failure OR
</I>&gt;&gt;<i> the ported take4+ patch that attempts to fix the general flaw via the
</I>&gt;&gt;<i> new startWaitingForOrigin()/stopWaitingForOrigin() mechanism?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I dont have a preference for either one.
</I>&gt;<i>
</I>&gt;<i> Amos
</I>-------------- next part --------------
A non-text attachment was scrubbed...
Name: SQUID-156-assertion_failed_Write.cc_41-not_ccb_active-squid-3.5-t4.patch
Type: text/x-patch
Size: 27761 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-dev/attachments/20160315/f3704dc1/attachment-0001.bin">http://lists.squid-cache.org/pipermail/squid-dev/attachments/20160315/f3704dc1/attachment-0001.bin</A>&gt;
</PRE>














<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005313.html">[squid-dev] [PATCH] assertion failed: Write.cc:41: &quot;!ccb-&gt;active()&quot;
</A></li>
	<LI>Next message: <A HREF="005322.html">[squid-dev] [PATCH] assertion failed: Write.cc:41: &quot;!ccb-&gt;active()&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5321">[ date ]</a>
              <a href="thread.html#5321">[ thread ]</a>
              <a href="subject.html#5321">[ subject ]</a>
              <a href="author.html#5321">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
