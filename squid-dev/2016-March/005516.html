<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [PATCH] BUg 4466: removal of -k kill command
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20BUg%204466%3A%20removal%20of%20-k%20kill%20command&In-Reply-To=%3C56FAB9E9.6090609%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="005514.html">
   <LINK REL="Next"  HREF="005515.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [PATCH] BUg 4466: removal of -k kill command</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20BUg%204466%3A%20removal%20of%20-k%20kill%20command&In-Reply-To=%3C56FAB9E9.6090609%40measurement-factory.com%3E"
       TITLE="[squid-dev] [PATCH] BUg 4466: removal of -k kill command">rousskov at measurement-factory.com
       </A><BR>
    <I>Tue Mar 29 17:22:49 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="005514.html">[squid-dev] [PATCH] BUg 4466: removal of -k kill command
</A></li>
        <LI>Next message: <A HREF="005515.html">[squid-dev] [PATCH][pinger][linux] drop capabilities
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5516">[ date ]</a>
              <a href="thread.html#5516">[ thread ]</a>
              <a href="subject.html#5516">[ subject ]</a>
              <a href="author.html#5516">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 03/29/2016 10:22 AM, Amos Jeffries wrote:
&gt;<i> The Squid &quot;-k kill&quot; command line option is equivalent to &quot;kill -9&quot; on
</I>&gt;<i> whatever process has its PID in the .pid file.
</I>
This is how &quot;-k kill&quot; is implemented, but this is not what it is meant
to do IMO.


&gt;<i> Since Squid gained multi-process SMP support it has been declining in
</I>&gt;<i> usefulness, and with recent changes to make thee master process be the
</I>&gt;<i> one operating the .pid file this command has effectively become irrelevant.
</I>
I agree that it is not useful in its current implementation but its
intended use case is still valid IMO.


&gt;<i> Since admin have the &quot;kill -9&quot; command available anyway and also have
</I>&gt;<i> better understanding of what will happen when using that command I
</I>&gt;<i> propose removing &quot;squid -k kill&quot; entirely.
</I>
The decision logic seems flawed to me because the same logic applies to
most other signal-based commands -- they are just wrappers around a
&quot;kill -X&quot; loop. AFAICT, two things make those -k commands useful:

  1. Squid propagates the -k command to the right kids.
  2. The -k command names and their meaning are Squid-specific and,
     hence, stable across all deployment environments.

IMHO, &quot;-k kill&quot; is meant to kill all Squid processes ASAP, bypassing any
shutdown procedure. We know that the current implementation does not do
that and that it is difficult to implement the right thing. However, if
we are to remove this option, it would be because we refuse to implement
what is difficult, not because the option is no longer needed or is
irrelevant.

If you insist on removal, I cannot object to it because the current
implementation is broken. It would be better to fix it though.


HTH,

Alex.

</PRE>








<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005514.html">[squid-dev] [PATCH] BUg 4466: removal of -k kill command
</A></li>
	<LI>Next message: <A HREF="005515.html">[squid-dev] [PATCH][pinger][linux] drop capabilities
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5516">[ date ]</a>
              <a href="thread.html#5516">[ thread ]</a>
              <a href="subject.html#5516">[ subject ]</a>
              <a href="author.html#5516">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
