<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] g++ 4.8.x and std::regex problems
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20g%2B%2B%204.8.x%20and%20std%3A%3Aregex%20problems&In-Reply-To=%3C583CE815.2000503%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="007293.html">
   <LINK REL="Next"  HREF="007296.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] g++ 4.8.x and std::regex problems</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20g%2B%2B%204.8.x%20and%20std%3A%3Aregex%20problems&In-Reply-To=%3C583CE815.2000503%40treenet.co.nz%3E"
       TITLE="[squid-dev] g++ 4.8.x and std::regex problems">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Nov 29 02:29:42 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="007293.html">[squid-dev] g++ 4.8.x and std::regex problems
</A></li>
        <LI>Next message: <A HREF="007296.html">[squid-dev] g++ 4.8.x and std::regex problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7295">[ date ]</a>
              <a href="thread.html#7295">[ thread ]</a>
              <a href="subject.html#7295">[ subject ]</a>
              <a href="author.html#7295">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please note that GCC 4.8 is not capable of building correctly operating 
Squid-4 either. So its not a matter of GCC 4.8 vs Squid. It is a 
question of whether GCC 4.9 is still the newest available GCC on any OS. 
Sadly it seems needed still for CentOS 7 and probably RHEL 7 too.


On 29/11/2016 11:21 a.m., Marcus Kool wrote:
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 11/28/2016 07:46 PM, Alex Rousskov wrote:
</I>&gt;&gt;<i> Please undo that commit and let's discuss whether switching from
</I>&gt;&gt;<i> libregex to std::regex now is a good idea.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thank you,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Alex.
</I>&gt;<i>
</I>&gt;<i> Has anybody considered using RE2?
</I>&gt;<i> It is a regex library that is fast, C++ source, high quality, public 
</I>&gt;<i> domain, and is supported by older compilers.
</I>
That one has not been investigated until just now, I took a brief look. 
The research and testing of this was done in 2008-2014 timeframe.

It looks to me like we cannot use RE2 without a wrapper layer. With v5 
using std::regex the library needs to implement the portable &lt;regex&gt; 
API, then it just needs to be linked in.

When I revert that patch as Alex requested we are back to being stuck 
with the GNURegex API. There are only two libraries I'm aware of 
implementing that API. The GnuRegex bundled with Squid which is horribly 
slow, and the modern version of that library which is available in 
Linux, BSD, etc as -lregex.

The std::regex is for most OS implemented using the libregex that was 
there anyway and probably already being linked to Squid as -lregex. The 
other cases it is supposed to be implemented by something faster, like 
libpcre. The benefits to Squid are that the API is standardized and we 
dont have to care about which library is linked any more. In all cases 
it should be using either the same library as before behind the STL API, 
or something better.

Amos

</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007293.html">[squid-dev] g++ 4.8.x and std::regex problems
</A></li>
	<LI>Next message: <A HREF="007296.html">[squid-dev] g++ 4.8.x and std::regex problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7295">[ date ]</a>
              <a href="thread.html#7295">[ thread ]</a>
              <a href="subject.html#7295">[ subject ]</a>
              <a href="author.html#7295">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
