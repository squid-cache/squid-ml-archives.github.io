<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [PATCH] Incorrect logging of request size
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Incorrect%20logging%20of%20request%20size&In-Reply-To=%3C02db351e-e6f5-2c3c-1340-fa9dd76eb682%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="006781.html">
   <LINK REL="Next"  HREF="006784.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [PATCH] Incorrect logging of request size</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Incorrect%20logging%20of%20request%20size&In-Reply-To=%3C02db351e-e6f5-2c3c-1340-fa9dd76eb682%40measurement-factory.com%3E"
       TITLE="[squid-dev] [PATCH] Incorrect logging of request size">rousskov at measurement-factory.com
       </A><BR>
    <I>Tue Sep 13 14:52:08 UTC 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="006781.html">[squid-dev] [PATCH] Incorrect logging of request size
</A></li>
        <LI>Next message: <A HREF="006784.html">[squid-dev] [PATCH] Incorrect logging of request size
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6783">[ date ]</a>
              <a href="thread.html#6783">[ thread ]</a>
              <a href="subject.html#6783">[ subject ]</a>
              <a href="author.html#6783">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 09/12/2016 10:06 PM, Amos Jeffries wrote:
&gt;<i> Just the new cf.data.pre docs for icap_log contradicting itself:
</I>&gt;<i> 
</I>&gt;<i> &quot;
</I>&gt;<i>   http::&gt;h	...
</I>&gt;<i>       HTTP response headers in RESPMOD) ...
</I>&gt;<i>       currently does not support logging of HTTP response headers in
</I>&gt;<i> RESPMOD ...
</I>&gt;<i> &quot;
</I>&gt;<i> 
</I>&gt;<i> I think that should probably be saying it does not support HTTP
</I>&gt;<i> *request* headers in RESPMOD.
</I>
I assume you are talking about this blob:

&gt;<i> http::&gt;h 
</I>&gt;<i> To-be-adapted HTTP message headers sent by Squid to
</I>&gt;<i> the ICAP service (HTTP request headers in REQMOD; HTTP
</I>&gt;<i> response headers in RESPMOD). Please note that Squid
</I>&gt;<i> currently does not support logging of HTTP response
</I>&gt;<i> headers in RESPMOD for this format code.
</I>
I will clarify that when committing:

http::&gt;h   To-be-adapted HTTP message headers sent by Squid to the ICAP
service (i.e., HTTP request headers in REQMOD or HTTP response headers
in RESPMOD). However, Squid cannot currently log HTTP response headers
sent to the ICAP service (i.e., %http::&gt;h will expand to &quot;-&quot; for RESPMOD
transactions).

Does that sound better?


If the above polished version does not clarify things enough, here is
what is going on:

* The logformat %code is for logging HTTP message headers sent by Squid
to the ICAP service. That will not change and is now properly
documented. What are those to-be-adapted HTTP headers? They are HTTP
request headers in REQMOD and HTTP response headers in RESPMOD. We did
not have to say that, but providing that detail is helpful IMO.

* However, currently, Squid cannot log HTTP response headers sent by
Squid to the ICAP service. The admin will always see &quot;-&quot; in that
specific case. Hopefully, that support will be added in the future. For
now, we just document the lack of support in that particular case.


Thank you,

Alex.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006781.html">[squid-dev] [PATCH] Incorrect logging of request size
</A></li>
	<LI>Next message: <A HREF="006784.html">[squid-dev] [PATCH] Incorrect logging of request size
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6783">[ date ]</a>
              <a href="thread.html#6783">[ thread ]</a>
              <a href="subject.html#6783">[ subject ]</a>
              <a href="author.html#6783">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
