<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [RFC] nullptr conversion (again)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BRFC%5D%20nullptr%20conversion%20%28again%29&In-Reply-To=%3Ce3399606-bbf5-ad8a-5da1-bee590d91710%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="008481.html">
   <LINK REL="Next"  HREF="008477.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [RFC] nullptr conversion (again)</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BRFC%5D%20nullptr%20conversion%20%28again%29&In-Reply-To=%3Ce3399606-bbf5-ad8a-5da1-bee590d91710%40measurement-factory.com%3E"
       TITLE="[squid-dev] [RFC] nullptr conversion (again)">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Apr 13 19:48:02 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="008481.html">[squid-dev] [RFC] nullptr conversion (again)
</A></li>
        <LI>Next message: <A HREF="008477.html">[squid-dev] [PATCH] Honor peer timeouts when forwarding CONNECTs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8490">[ date ]</a>
              <a href="thread.html#8490">[ thread ]</a>
              <a href="subject.html#8490">[ subject ]</a>
              <a href="author.html#8490">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 04/12/2017 11:39 AM, Amos Jeffries wrote:
&gt;<i> On 13/04/2017 4:10 a.m., Alex Rousskov wrote:
</I>&gt;&gt;<i> On 04/12/2017 09:53 AM, Amos Jeffries wrote:
</I>&gt;&gt;<i> Other sources of pain will include &quot;v5 to v4&quot; and &quot;v5 to any v5-based
</I>&gt;&gt;<i> branch&quot; porting AFAICT.
</I>
&gt;<i> Any collisions there will be the lines I bring up in audit as needing
</I>&gt;<i> changes to remove the NULL anyway.
</I>
I am pretty sure there are examples where the above assertion does not
hold, but this is not an important part (at least for now). The
currently important part is below.


&gt;&gt;<i> Is it really difficult to write a script that will rename most NULLs
</I>&gt;&gt;<i> that are safe to rename without breaking anything? Perhaps I am
</I>&gt;&gt;<i> forgetting some context here, but what is the primary reason why making
</I>&gt;&gt;<i> such a script is so difficult?
</I>
&gt;<i> a) branches can use &quot;bzr merge --take-this -cNN ...&quot;
</I>
The &quot;bzr merge&quot; or similar techniques are not the answer I am looking
for: They will often result in either too many NULLs remaining in the
code or too many conflicts to resolve manually (depending on the merge
options). And perhaps more importantly, using bzr merge is impractical
without a nearby common ancestor _and_ the desire to merge with the
official code. Either or both preconditions often do not hold for the
real-world branches we have to deal with.

What is wrong with a sed/NULL/nullptr/ script? In other words, can you
make a simple script that replaces [nearly] all NULLs in [nearly] all
Squid source files with nullptrs? There may be some exceptional NULLs
that should not be replaced (I do not know/remember), but cannot the
script work around those exceptions?


&gt;<i> The 'too complex' part is where major refactoring is needed with change
</I>&gt;<i> spread over multiple files. Such as the C++11 initialization sequence
</I>&gt;<i> cleanups. It is a bit mind-numbingly for me/us manually but a script to
</I>&gt;<i> do that right every time would be effectively AI.
</I>
I just cannot think of anything requiring AI! That is why I keep asking
this &quot;why not a simple conversion script for everybody to apply to their
code?&quot; question... Please give a few specific examples where a simple
s/NULL/nullptr/ conversion does not work (and cannot be easily excluded
in a simple script).


Thank you,

Alex.

</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008481.html">[squid-dev] [RFC] nullptr conversion (again)
</A></li>
	<LI>Next message: <A HREF="008477.html">[squid-dev] [PATCH] Honor peer timeouts when forwarding CONNECTs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8490">[ date ]</a>
              <a href="thread.html#8490">[ thread ]</a>
              <a href="subject.html#8490">[ subject ]</a>
              <a href="author.html#8490">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
