<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] A new 'has' ACL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20A%20new%20%27has%27%20ACL&In-Reply-To=%3C853672eb-6738-5906-93a9-e66c4a49ef3f%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="008549.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] A new 'has' ACL</H1>
    <B>Eduard Bagdasaryan</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20A%20new%20%27has%27%20ACL&In-Reply-To=%3C853672eb-6738-5906-93a9-e66c4a49ef3f%40measurement-factory.com%3E"
       TITLE="[squid-dev] A new 'has' ACL">eduard.bagdasaryan at measurement-factory.com
       </A><BR>
    <I>Sun Apr 30 13:05:47 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="008549.html">[squid-dev] [PATCH] Do not revive unconditionally dead peers after	DNS refresh
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8558">[ date ]</a>
              <a href="thread.html#8558">[ thread ]</a>
              <a href="subject.html#8558">[ subject ]</a>
              <a href="author.html#8558">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,


I am working on a new 'has' ACL:

   acl aclname has &lt;component&gt;

where &quot;component&quot; is one of the following three tokens: request, 
response, or ALE.
For example:

   acl hasRequest has request

Multiple components on one ACL line are not supported because they
would have to be ORed and ORing components would probably go against
admin expectaions in most cases:

   acl hasWhatMyLoggingDaemonNeeds has request response # XXX: Likely to 
be wrong!

Multiple same-name ACL lines would still be ORed to support arguably
rare use cases where ORing is appropriate:

   # OK, this strange logging daemon needs request or response,
   # but can work without either a request or a response:
   acl hasWhatMyLoggingDaemonNeeds has request
   acl hasWhatMyLoggingDaemonNeeds has response

This new ACL addresses a TODO in item #3 of trunk revision 14752,
adding that 'missing' configuration option.

For example, the following configuration:

   acl logMe note important_transaction
   access_log ... logformat=detailed logMe

gives such 'noise' warning messages:

   2017/01/06 12:54:46 kid2| WARNING: logMe ACL is used in context 
without an HTTP request. Assuming mismatch.
   2017/01/06 12:54:46 kid1| WARNING: logMe ACL is used in context 
without an HTTP request. Assuming mismatch.

Once the &quot;has&quot; ACL is available, the admin can do either:

   acl logMe note important_transaction
   access_log ... logformat=detailed hasRequest logMe

   or even

   acl logMe note important_transaction
   access_log ... logformat=detailed hasRequest logMe
   access_log ... logformat=brief !hasRequest logMe

  If you think these specs miss something important, let's discuss.


  Thanks,
  Eduard.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008549.html">[squid-dev] [PATCH] Do not revive unconditionally dead peers after	DNS refresh
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8558">[ date ]</a>
              <a href="thread.html#8558">[ thread ]</a>
              <a href="subject.html#8558">[ subject ]</a>
              <a href="author.html#8558">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
