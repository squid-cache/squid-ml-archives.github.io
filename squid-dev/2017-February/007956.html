<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [PATCH] Bump SSL client on [more] errors encountered before ssl_bump evaluation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Bump%20SSL%20client%20on%20%5Bmore%5D%20errors%20encountered%0A%20before%20ssl_bump%20evaluation&In-Reply-To=%3C90f8a9b8-3d1b-587e-cbbd-8dc453f18292%40chtsanti.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="007955.html">
   <LINK REL="Next"  HREF="007957.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [PATCH] Bump SSL client on [more] errors encountered before ssl_bump evaluation</H1>
    <B>Christos Tsantilas</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Bump%20SSL%20client%20on%20%5Bmore%5D%20errors%20encountered%0A%20before%20ssl_bump%20evaluation&In-Reply-To=%3C90f8a9b8-3d1b-587e-cbbd-8dc453f18292%40chtsanti.net%3E"
       TITLE="[squid-dev] [PATCH] Bump SSL client on [more] errors encountered before ssl_bump evaluation">christos at chtsanti.net
       </A><BR>
    <I>Fri Feb  3 19:27:30 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="007955.html">[squid-dev] [PATCH] convert Delay Pools classes to use MEMPROXY_CLASS
</A></li>
        <LI>Next message: <A HREF="007957.html">[squid-dev] [PATCH] Bump SSL client on [more] errors encountered before ssl_bump evaluation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7956">[ date ]</a>
              <a href="thread.html#7956">[ thread ]</a>
              <a href="subject.html#7956">[ subject ]</a>
              <a href="author.html#7956">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>... such as ERR_ACCESS_DENIED with HTTP/403 Forbidden triggered by an 
http_access deny rule match.

The old code allowed ssl_bump step1 rules to be evaluated in the 
presence of an error. An ssl_bump splicing decision would then trigger 
the useless &quot;send the error to the client now&quot; processing logic instead 
of going down the &quot;to serve an error, bump the client first&quot; path.

Furthermore, the ssl_bump evaluation result itself could be surprising 
to the admin because ssl_bump (and most other) rules are not meant to be 
evaluated for a transaction in an error state. This complicated triage.

Also polished an important comment to clarify that we want to bump on 
error if (and only if) the SslBump feature is applicable to the failed 
transaction (i.e., if the ssl_bump rules would have been evaluated if 
there were no prior errors). The old comment could have been 
misinterpreted that ssl_bump rules must be evaluated to allow an 
&quot;ssl_bump splice&quot; match to hide the error.

This is a Measurement Factory project.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SQUID-272-Blocked-CONNECT-request-not-bumped-t2.patch
Type: text/x-patch
Size: 5261 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-dev/attachments/20170203/b9cb7914/attachment.bin">http://lists.squid-cache.org/pipermail/squid-dev/attachments/20170203/b9cb7914/attachment.bin</A>&gt;
</PRE>













<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007955.html">[squid-dev] [PATCH] convert Delay Pools classes to use MEMPROXY_CLASS
</A></li>
	<LI>Next message: <A HREF="007957.html">[squid-dev] [PATCH] Bump SSL client on [more] errors encountered before ssl_bump evaluation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7956">[ date ]</a>
              <a href="thread.html#7956">[ thread ]</a>
              <a href="subject.html#7956">[ subject ]</a>
              <a href="author.html#7956">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
