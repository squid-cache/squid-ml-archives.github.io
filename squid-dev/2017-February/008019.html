<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [PATCH] VIA creation code duplication
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20VIA%20creation%20code%20duplication&In-Reply-To=%3C0cd136d0-077b-8fd9-8e07-98d99d711283%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="008018.html">
   <LINK REL="Next"  HREF="008021.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [PATCH] VIA creation code duplication</H1>
    <B>Eduard Bagdasaryan</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20VIA%20creation%20code%20duplication&In-Reply-To=%3C0cd136d0-077b-8fd9-8e07-98d99d711283%40measurement-factory.com%3E"
       TITLE="[squid-dev] [PATCH] VIA creation code duplication">eduard.bagdasaryan at measurement-factory.com
       </A><BR>
    <I>Mon Feb 13 13:06:25 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="008018.html">[squid-dev] [PATCH] VIA creation code duplication
</A></li>
        <LI>Next message: <A HREF="008021.html">[squid-dev] [PATCH] VIA creation code duplication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8019">[ date ]</a>
              <a href="thread.html#8019">[ thread ]</a>
              <a href="subject.html#8019">[ subject ]</a>
              <a href="author.html#8019">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I see that String::append asserts when String is unable to &quot;grow&quot;:
String has hardcoded ~64Kb limit for that. It is hardly possible since
most of web servers have header length limit less than this value.
Theoretically a buggy upstream server could generate such huge Via.
However any other header may assert as well, since HttpHeaderEntry
stores its value in String. Why do you think we should care only about
Via header overflow?


Eduard.


On 13.02.2017 00:56, Amos Jeffries wrote:
&gt;<i> Thank you. But if we are going to keep the copy+append behaviour we have
</I>&gt;<i> to consider the assertion in String::append which goes off if the client
</I>&gt;<i> has supplied a large header already. We need to either assemble in the
</I>&gt;<i> SBuf, or to check the strVia length before appending the new parts.
</I>&gt;<i>
</I>&gt;<i> Amos
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-dev mailing list
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">squid-dev at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">http://lists.squid-cache.org/listinfo/squid-dev</A>
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008018.html">[squid-dev] [PATCH] VIA creation code duplication
</A></li>
	<LI>Next message: <A HREF="008021.html">[squid-dev] [PATCH] VIA creation code duplication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8019">[ date ]</a>
              <a href="thread.html#8019">[ thread ]</a>
              <a href="subject.html#8019">[ subject ]</a>
              <a href="author.html#8019">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
