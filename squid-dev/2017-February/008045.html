<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [PATCH] Response delay pools
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Response%20delay%20pools&In-Reply-To=%3C9db24231-a26a-7b02-6dd0-9566e45c589f%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="008041.html">
   <LINK REL="Next"  HREF="008046.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [PATCH] Response delay pools</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Response%20delay%20pools&In-Reply-To=%3C9db24231-a26a-7b02-6dd0-9566e45c589f%40treenet.co.nz%3E"
       TITLE="[squid-dev] [PATCH] Response delay pools">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Feb 16 11:35:42 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="008041.html">[squid-dev] [PATCH] Response delay pools
</A></li>
        <LI>Next message: <A HREF="008046.html">[squid-dev] [PATCH] Response delay pools
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8045">[ date ]</a>
              <a href="thread.html#8045">[ thread ]</a>
              <a href="subject.html#8045">[ subject ]</a>
              <a href="author.html#8045">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 16/02/2017 11:43 a.m., Alex Rousskov wrote:
&gt;<i> On 01/22/2017 12:52 PM, Amos Jeffries wrote:
</I>&gt;&gt;<i>  - a config line should have roughly this generic structure:
</I>&gt;&gt;<i>    1) directive (first label, which determines the syntax)
</I>&gt;&gt;<i>    2) parameters (mandatory values, fixed positions for each one)
</I>&gt;&gt;<i>    3) options (values that may be absent, using key[=value] syntax).
</I>&gt;&gt;<i>    4) acl-list (if relevant)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Just for the record in case somebody tries to use the above as guidance
</I>&gt;<i> for future work:
</I>&gt;<i> 
</I>&gt;<i> Item (2) is too rigid IMO: Required parameters may be named. And if
</I>&gt;<i> there is more than one or two required parameters, they _should_ be
</I>&gt;<i> named. Named parameters/options should not require fixed positions, of
</I>&gt;<i> course.
</I>

Strictly speaking anything on the line - including the directive name is
a parameter.

parameters - plural of parameter - &quot;any of a set of physical properties
whose values determine the characteristics or behavior of something&quot;

In absence of a well-known word specifically implying mandatory-ness of
a parameter I choose to use 'parameter(s)' for that part of the
directive line which cannot be omitted (i.e. mandatory fixed-position
bits [if any]).


&gt;<i> 
</I>&gt;<i> The &quot;absent values&quot; remark in item (3) applies to all all key=value
</I>&gt;<i> parameters, both optional and required -- a named parameter value may be
</I>&gt;<i> optional even if the parameter itself is required.
</I>&gt;<i> 
</I>&gt;<i> In summary, new directives should usually look like this:
</I>&gt;<i> 
</I>&gt;<i>   1) directive name
</I>&gt;<i>   2) unnamed fixed-position parameter or two; keep this list short!
</I>&gt;<i>   3) named any-position parameters
</I>&gt;<i>   4) acl-list; may contain actions
</I>&gt;<i> 
</I>&gt;<i> Items 2, 3, and/or 4 may not be present/supported.
</I>&gt;<i> 
</I>&gt;<i> Some parameters may be optional.
</I>
IMO, the named any-position parameters should all have some sensible
default we can fall back on. Simply because being able to name it
indicates we understand it well enough to know the scope/usage and can
figure out a reasonable default from that.

In which case *all* those parameters in (3) are optional in terms of
whether they can be omitted from squid.conf. None of them are mandatory.


So we might as well use the word with already well-known meaning and
implication of optional-ness to describe those optional parameters.

options - plural of option - &quot;a thing which may be chosen; an
alternative course of action; an item that is offered in addition to or
in place of standard&quot;


&gt;<i> 
</I>&gt;<i> Named parameters have name=value syntax. Parameter names use dashes
</I>&gt;<i> (boo-bar), not underscores/camelCase/etc. (not foo_bar/fooBar/foobar).
</I>&gt;<i> Some named key=value parameters may support optional values.
</I>&gt;<i> 
</I>&gt;<i> I hope this is all common-sense and not be controversial!
</I>&gt;<i> 
</I>
Not too much. I am looking at this mostly with an eye on existing
directives and not deviating from existing pattern too much. So we dont
have a huge editing job to re-document lots of things calling line
values &quot;options&quot;.

We also need some simple way to indicate whether the thing being
described is optional or mandatory in squid-users responses, squid.conf
documentation etc.  For example; &quot;the foo option&quot; or &quot;the foo parameter&quot;.

&quot;the foo named any-position parameter&quot; is not very easily written or
read. Particularly when the sentence or paragraph describing what it
does and why its relevant may already be quite long and difficult to
comprehend for newcomers.


&gt;<i> 
</I>&gt;<i> For directives that support ACLs, is the acl-list in (4) always optional
</I>&gt;<i> (with either &quot;all&quot; or &quot;allow all&quot; as the default)?
</I>
Except when a different default is better. eg. always_direct,
never_direct, and http_access.


&gt;<i> 
</I>&gt;<i> @Eduard, I believe the last version of your patch satisfies the above
</I>&gt;<i> rules but please correct me if I am wrong.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Thank you,
</I>&gt;<i> 
</I>&gt;<i> Alex.
</I>&gt;<i> 
</I>
Amos

</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008041.html">[squid-dev] [PATCH] Response delay pools
</A></li>
	<LI>Next message: <A HREF="008046.html">[squid-dev] [PATCH] Response delay pools
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8045">[ date ]</a>
              <a href="thread.html#8045">[ thread ]</a>
              <a href="subject.html#8045">[ subject ]</a>
              <a href="author.html#8045">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
