<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [PATCH] Case-insensitive URI schemes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Case-insensitive%20URI%20schemes&In-Reply-To=%3Ccc6338a9-502f-542c-b8f9-4b2e14a51cb2%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="007886.html">
   <LINK REL="Next"  HREF="007934.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [PATCH] Case-insensitive URI schemes</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Case-insensitive%20URI%20schemes&In-Reply-To=%3Ccc6338a9-502f-542c-b8f9-4b2e14a51cb2%40measurement-factory.com%3E"
       TITLE="[squid-dev] [PATCH] Case-insensitive URI schemes">rousskov at measurement-factory.com
       </A><BR>
    <I>Mon Jan 30 16:24:34 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="007886.html">[squid-dev] [PATCH] Case-insensitive URI schemes
</A></li>
        <LI>Next message: <A HREF="007934.html">[squid-dev] [PATCH] Case-insensitive URI schemes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7917">[ date ]</a>
              <a href="thread.html#7917">[ thread ]</a>
              <a href="subject.html#7917">[ subject ]</a>
              <a href="author.html#7917">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 01/29/2017 07:10 AM, Amos Jeffries wrote:

&gt;<i> I'm thinking the quick-and-dirty way is to just lowercase the 'proto'
</I>&gt;<i> variable in url.cc urlParse() function. Doing that in the for-loop where
</I>&gt;<i> it is copied from 'src' would be easiest.
</I>&gt;<i>  - it breaks the case preservation on unknown schemes a litte bit. But
</I>&gt;<i> since they are supposed to be insensitive anyway the harm is minimal.
</I>

The UriScheme constructor is broken. No quick-and-dirty fix in some
constructor caller will address that problem. Eduard's patch fixes that
problem the right way. Unfortunately, the fixed constructor is
expensive. Fortunately, it is easy to optimize it, addressing another
old problem (that the patch has documented but did not address). With
that optimization, there will be no motivation for quick-and-dirty
workarounds.

Eduard, please create and use a UriScheme::SchemeImages or similar
static array with lowercase versions of ProtocolType_str.


Thank you,

Alex.

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007886.html">[squid-dev] [PATCH] Case-insensitive URI schemes
</A></li>
	<LI>Next message: <A HREF="007934.html">[squid-dev] [PATCH] Case-insensitive URI schemes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7917">[ date ]</a>
              <a href="thread.html#7917">[ thread ]</a>
              <a href="subject.html#7917">[ subject ]</a>
              <a href="author.html#7917">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
