<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [PATCH] Reuse reserved Negotiate and NTLM helpers after an idle timeout.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Reuse%20reserved%20Negotiate%20and%20NTLM%20helpers%20after%0A%20an%20idle%20timeout.&In-Reply-To=%3C708c2c2e-81fd-54cc-36fc-2311aa8b8a07%40chtsanti.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="009226.html">
   <LINK REL="Next"  HREF="009233.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [PATCH] Reuse reserved Negotiate and NTLM helpers after an idle timeout.</H1>
    <B>Christos Tsantilas</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20Reuse%20reserved%20Negotiate%20and%20NTLM%20helpers%20after%0A%20an%20idle%20timeout.&In-Reply-To=%3C708c2c2e-81fd-54cc-36fc-2311aa8b8a07%40chtsanti.net%3E"
       TITLE="[squid-dev] [PATCH] Reuse reserved Negotiate and NTLM helpers after an idle timeout.">christos at chtsanti.net
       </A><BR>
    <I>Wed Jul 26 09:37:35 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="009226.html">[squid-dev] Build farm updaes?
</A></li>
        <LI>Next message: <A HREF="009233.html">[squid-dev] [PATCH] Reuse reserved Negotiate and NTLM helpers after an idle timeout.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9228">[ date ]</a>
              <a href="thread.html#9228">[ thread ]</a>
              <a href="subject.html#9228">[ subject ]</a>
              <a href="author.html#9228">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Squid can be killed or maimed by enough clients that start multi-step 
connection authentication but never follow up with the second HTTP 
request while keeping their HTTP connection open. Affected helpers 
remain in the &quot;reserved&quot; state and cannot be reused for other clients. 
Observed helper exhaustion has happened without any malicious intent.

To address the problem, we add a helper reservation timeout. Timed out 
reserved helpers may be reused by new clients/connections. To minimize 
problems with slow-to-resume-authentication clients, timed out reserved 
helpers are not reused until there are no unreserved running helpers 
left. The reservations are tracked using unique integer IDs.

Also fixed Squid crashes caused by unexpected helper termination -- the 
raw UserRequest::authserver pointer could point to a deleted helper.

This is a Measurement Factory project.
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009226.html">[squid-dev] Build farm updaes?
</A></li>
	<LI>Next message: <A HREF="009233.html">[squid-dev] [PATCH] Reuse reserved Negotiate and NTLM helpers after an idle timeout.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9228">[ date ]</a>
              <a href="thread.html#9228">[ thread ]</a>
              <a href="subject.html#9228">[ subject ]</a>
              <a href="author.html#9228">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
