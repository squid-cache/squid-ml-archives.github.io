<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] Empty directories during bzr-to-git conversion
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Empty%20directories%20during%20bzr-to-git%20conversion&In-Reply-To=%3C538a15a2-649d-08db-4f5a-c71c697acdac%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   
   <LINK REL="Next"  HREF="008787.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] Empty directories during bzr-to-git conversion</H1>
    <B>Eduard Bagdasaryan</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Empty%20directories%20during%20bzr-to-git%20conversion&In-Reply-To=%3C538a15a2-649d-08db-4f5a-c71c697acdac%40measurement-factory.com%3E"
       TITLE="[squid-dev] Empty directories during bzr-to-git conversion">eduard.bagdasaryan at measurement-factory.com
       </A><BR>
    <I>Thu Jun  1 12:31:37 UTC 2017</I>
    <P><UL>
        
        <LI>Next message: <A HREF="008787.html">[squid-dev] Empty directories during bzr-to-git conversion
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8785">[ date ]</a>
              <a href="thread.html#8785">[ thread ]</a>
              <a href="subject.html#8785">[ subject ]</a>
              <a href="author.html#8785">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

Working on upcoming bzr-to-git migration we noticed empty directories
presence in bzr history. Therefore, since git does not care about
directories (and creates them only for existing files), this conversion
does not exactly preserve bzr history and may theoretically cause
problems (e.g., build problems) for the affected revisions.
Fortunately, there were probably few such cases in the whole history
and all of them are old. Our analysis for Squid trunk showed the last
such revision is 9440 dated 2009-01-18, containing empty
'errors/Japanese' folder. Here is the generated list for trunk:

errors/Japanese, r9401-9440
errors/Czech, r9436-9438
lib/cppunit-1.10.0/contrib, r6693-8121
lib/cppunit-1.10.0/include/msvc6, r6693-8121
lib/cppunit-1.10.0/src/msvc6, r6693-8121
helpers/external_acl, r5495-5516
helpers, r5482-5494
helpers/external_acl, r5482-5494
helpers, r4765-5481

There are 2 possible ways to address this problem:

1. Leave as is.
2. During conversion, add dummy files to the history when the empty
    directory is created and remove those dummy files when the empty
    directory is either removed or becomes non-empty. This requires extra
    development cycles.

Note that both the missing (empty) directories and extra dummy files may
break builds for the related revisions.

If nobody is against, to minimize development overhead,
we are going to follow (1) in the above plan.

Thanks,

Eduard.

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="008787.html">[squid-dev] Empty directories during bzr-to-git conversion
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8785">[ date ]</a>
              <a href="thread.html#8785">[ thread ]</a>
              <a href="subject.html#8785">[ subject ]</a>
              <a href="author.html#8785">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
