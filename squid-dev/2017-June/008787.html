<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] Empty directories during bzr-to-git conversion
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Empty%20directories%20during%20bzr-to-git%20conversion&In-Reply-To=%3Cfd60346b-b927-3b6f-fbe2-79eb76c10e04%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="008785.html">
   <LINK REL="Next"  HREF="008786.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] Empty directories during bzr-to-git conversion</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Empty%20directories%20during%20bzr-to-git%20conversion&In-Reply-To=%3Cfd60346b-b927-3b6f-fbe2-79eb76c10e04%40treenet.co.nz%3E"
       TITLE="[squid-dev] Empty directories during bzr-to-git conversion">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Jun  1 13:04:29 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="008785.html">[squid-dev] Empty directories during bzr-to-git conversion
</A></li>
        <LI>Next message: <A HREF="008786.html">[squid-dev] [PATCH] Fix 'miss_access' and 'cache' checks when no ACL rules matched
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8787">[ date ]</a>
              <a href="thread.html#8787">[ thread ]</a>
              <a href="subject.html#8787">[ subject ]</a>
              <a href="author.html#8787">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 02/06/17 00:31, Eduard Bagdasaryan wrote:
&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> Working on upcoming bzr-to-git migration we noticed empty directories
</I>&gt;<i> presence in bzr history. Therefore, since git does not care about
</I>&gt;<i> directories (and creates them only for existing files), this conversion
</I>&gt;<i> does not exactly preserve bzr history and may theoretically cause
</I>&gt;<i> problems (e.g., build problems) for the affected revisions.
</I>&gt;<i> Fortunately, there were probably few such cases in the whole history
</I>&gt;<i> and all of them are old. Our analysis for Squid trunk showed the last
</I>&gt;<i> such revision is 9440 dated 2009-01-18, containing empty
</I>&gt;<i> 'errors/Japanese' folder. Here is the generated list for trunk:
</I>&gt;<i>
</I>&gt;<i> errors/Japanese, r9401-9440
</I>&gt;<i> errors/Czech, r9436-9438
</I>&gt;<i> lib/cppunit-1.10.0/contrib, r6693-8121
</I>&gt;<i> lib/cppunit-1.10.0/include/msvc6, r6693-8121
</I>&gt;<i> lib/cppunit-1.10.0/src/msvc6, r6693-8121
</I>&gt;<i> helpers/external_acl, r5495-5516
</I>&gt;<i> helpers, r5482-5494
</I>&gt;<i> helpers/external_acl, r5482-5494
</I>&gt;<i> helpers, r4765-5481
</I>&gt;<i>
</I>&gt;<i> There are 2 possible ways to address this problem:
</I>&gt;<i>
</I>&gt;<i> 1. Leave as is.
</I>&gt;<i> 2. During conversion, add dummy files to the history when the empty
</I>&gt;<i>    directory is created and remove those dummy files when the empty
</I>&gt;<i>    directory is either removed or becomes non-empty. This requires extra
</I>&gt;<i>    development cycles.
</I>
For the record there is also:

3. add one of those notes being used for other bzr-specific things to 
the relevant git commit.


&gt;<i>
</I>&gt;<i> Note that both the missing (empty) directories and extra dummy files may
</I>&gt;<i> break builds for the related revisions.
</I>&gt;<i>
</I>
These all being code directories their removal should not break any 
builds, since build recursion into them needs a Makefile(.am) presence. 
IIRC they should all have been deleted in bzr at the point the last file 
was removed, the difference was an oversight.

&gt;<i> If nobody is against, to minimize development overhead,
</I>&gt;<i> we are going to follow (1) in the above plan.
</I>&gt;<i>
</I>
+1 on that.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008785.html">[squid-dev] Empty directories during bzr-to-git conversion
</A></li>
	<LI>Next message: <A HREF="008786.html">[squid-dev] [PATCH] Fix 'miss_access' and 'cache' checks when no ACL rules matched
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8787">[ date ]</a>
              <a href="thread.html#8787">[ thread ]</a>
              <a href="subject.html#8787">[ subject ]</a>
              <a href="author.html#8787">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
