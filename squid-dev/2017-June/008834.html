<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [PATCH] transaction_initiator ACL for detecting various unusual transactions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20transaction_initiator%20ACL%20for%20detecting%0A%20various%20unusual%20transactions&In-Reply-To=%3C4712eb2d-8288-06f0-d9a1-a34f2a2f1c0f%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="008800.html">
   <LINK REL="Next"  HREF="008847.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [PATCH] transaction_initiator ACL for detecting various unusual transactions</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20transaction_initiator%20ACL%20for%20detecting%0A%20various%20unusual%20transactions&In-Reply-To=%3C4712eb2d-8288-06f0-d9a1-a34f2a2f1c0f%40treenet.co.nz%3E"
       TITLE="[squid-dev] [PATCH] transaction_initiator ACL for detecting various unusual transactions">squid3 at treenet.co.nz
       </A><BR>
    <I>Sat Jun 10 13:02:06 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="008800.html">[squid-dev] [PATCH] transaction_initiator ACL for detecting various unusual transactions
</A></li>
        <LI>Next message: <A HREF="008847.html">[squid-dev] [PATCH] transaction_initiator ACL for detecting various unusual transactions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8834">[ date ]</a>
              <a href="thread.html#8834">[ thread ]</a>
              <a href="subject.html#8834">[ subject ]</a>
              <a href="author.html#8834">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 08/06/17 22:41, Christos Tsantilas wrote:
&gt;<i> This ACL is essential in several use cases, including:
</I>&gt;<i>
</I>&gt;<i> * After fetching a missing intermediate certificate, Squid uses the 
</I>&gt;<i> regular cache (and regular caching rules) to store the response. Squid 
</I>&gt;<i> deployments that do not want to cache regular traffic need to cache 
</I>&gt;<i> fetched certificates and only them.
</I>&gt;<i>
</I>&gt;<i>   acl fetched_certificate transaction_initiator certificate-fetching
</I>&gt;<i>   cache allow fetched_certificate
</I>&gt;<i>   cache deny all
</I>&gt;<i>
</I>&gt;<i> * Many traffic policies and tools assume the existence of an HTTP 
</I>&gt;<i> client behind every transaction. Internal Squid requests violate that 
</I>&gt;<i> assumption. Identifying internal requests protects external ACLs, log 
</I>&gt;<i> analysers, and other mechanisms from the transactions they mishandle.
</I>&gt;<i>
</I>&gt;<i>   acl skip_logging transaction_initiator internal
</I>&gt;<i>   access_log ... !skip_logging
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The new transaction_initiator ACL classifies transactions based on 
</I>&gt;<i> their initiator. Currently supported initiators are esi, 
</I>&gt;<i> certificate-fetching, cache-digest, internal, client, and all. In the 
</I>&gt;<i> future, the same ACL will be able to identify HTTP/2 push transactions 
</I>&gt;<i> using the &quot;server&quot; initiator. See src/cf.data.pre for details.
</I>&gt;<i>
</I>&gt;<i> This is a Measurement Factory project.
</I>
+1, though could you please separate the redesign of urlParse*() API 
from the ACL addition. They are changes that can be done in either order 
and not interdependent. In fact the urlParse change is almost identical 
to one of the steps already taken in the class URI refactoring branch 
years back and long overdue being merged.

Amos

</PRE>






<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008800.html">[squid-dev] [PATCH] transaction_initiator ACL for detecting various unusual transactions
</A></li>
	<LI>Next message: <A HREF="008847.html">[squid-dev] [PATCH] transaction_initiator ACL for detecting various unusual transactions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8834">[ date ]</a>
              <a href="thread.html#8834">[ thread ]</a>
              <a href="subject.html#8834">[ subject ]</a>
              <a href="author.html#8834">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
