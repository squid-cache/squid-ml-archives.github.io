<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [PATCH] transaction_initiator ACL for detecting various unusual transactions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20transaction_initiator%20ACL%20for%20detecting%0A%20various%20unusual%20transactions&In-Reply-To=%3C1d11afc1-5238-4fe4-b0a9-c906f4a68902%40chtsanti.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="008834.html">
   <LINK REL="Next"  HREF="008801.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [PATCH] transaction_initiator ACL for detecting various unusual transactions</H1>
    <B>Christos Tsantilas</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20transaction_initiator%20ACL%20for%20detecting%0A%20various%20unusual%20transactions&In-Reply-To=%3C1d11afc1-5238-4fe4-b0a9-c906f4a68902%40chtsanti.net%3E"
       TITLE="[squid-dev] [PATCH] transaction_initiator ACL for detecting various unusual transactions">christos at chtsanti.net
       </A><BR>
    <I>Mon Jun 12 20:29:34 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="008834.html">[squid-dev] [PATCH] transaction_initiator ACL for detecting various unusual transactions
</A></li>
        <LI>Next message: <A HREF="008801.html">[squid-dev] SMP scaling in no_daemon mode?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8847">[ date ]</a>
              <a href="thread.html#8847">[ thread ]</a>
              <a href="subject.html#8847">[ subject ]</a>
              <a href="author.html#8847">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Στις 10/06/2017 04:02 μμ, ο Amos Jeffries έγραψε:
&gt;<i> On 08/06/17 22:41, Christos Tsantilas wrote:
</I>&gt;&gt;<i> This ACL is essential in several use cases, including:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> * After fetching a missing intermediate certificate, Squid uses the 
</I>&gt;&gt;<i> regular cache (and regular caching rules) to store the response. Squid 
</I>&gt;&gt;<i> deployments that do not want to cache regular traffic need to cache 
</I>&gt;&gt;<i> fetched certificates and only them.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   acl fetched_certificate transaction_initiator certificate-fetching
</I>&gt;&gt;<i>   cache allow fetched_certificate
</I>&gt;&gt;<i>   cache deny all
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> * Many traffic policies and tools assume the existence of an HTTP 
</I>&gt;&gt;<i> client behind every transaction. Internal Squid requests violate that 
</I>&gt;&gt;<i> assumption. Identifying internal requests protects external ACLs, log 
</I>&gt;&gt;<i> analysers, and other mechanisms from the transactions they mishandle.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   acl skip_logging transaction_initiator internal
</I>&gt;&gt;<i>   access_log ... !skip_logging
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The new transaction_initiator ACL classifies transactions based on 
</I>&gt;&gt;<i> their initiator. Currently supported initiators are esi, 
</I>&gt;&gt;<i> certificate-fetching, cache-digest, internal, client, and all. In the 
</I>&gt;&gt;<i> future, the same ACL will be able to identify HTTP/2 push transactions 
</I>&gt;&gt;<i> using the &quot;server&quot; initiator. See src/cf.data.pre for details.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This is a Measurement Factory project.
</I>&gt;<i> 
</I>&gt;<i> +1, though could you please separate the redesign of urlParse*() API 
</I>&gt;<i> from the ACL addition. They are changes that can be done in either order 
</I>&gt;<i> and not interdependent. In fact the urlParse change is almost identical 
</I>&gt;<i> to one of the steps already taken in the class URI refactoring branch 
</I>&gt;<i> years back and long overdue being merged.
</I>

The urlParse changes committed as r15191 and 15193.
The patch implement the transaction_initiator acl applied as r15194



&gt;<i> 
</I>&gt;<i> Amos
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I></PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008834.html">[squid-dev] [PATCH] transaction_initiator ACL for detecting various unusual transactions
</A></li>
	<LI>Next message: <A HREF="008801.html">[squid-dev] SMP scaling in no_daemon mode?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8847">[ date ]</a>
              <a href="thread.html#8847">[ thread ]</a>
              <a href="subject.html#8847">[ subject ]</a>
              <a href="author.html#8847">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
