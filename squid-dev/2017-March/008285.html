<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [PATCH] VIA creation code duplication
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20VIA%20creation%20code%20duplication&In-Reply-To=%3C4aa2317e-d6a0-e451-7367-07c54f670a7a%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="008281.html">
   <LINK REL="Next"  HREF="008314.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [PATCH] VIA creation code duplication</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20VIA%20creation%20code%20duplication&In-Reply-To=%3C4aa2317e-d6a0-e451-7367-07c54f670a7a%40measurement-factory.com%3E"
       TITLE="[squid-dev] [PATCH] VIA creation code duplication">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Mar 16 17:17:36 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="008281.html">[squid-dev] [PATCH] VIA creation code duplication
</A></li>
        <LI>Next message: <A HREF="008314.html">[squid-dev] [PATCH] VIA creation code duplication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8285">[ date ]</a>
              <a href="thread.html#8285">[ thread ]</a>
              <a href="subject.html#8285">[ subject ]</a>
              <a href="author.html#8285">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 03/16/2017 05:15 AM, Amos Jeffries wrote:


&gt;<i> Any objections to applying this with this added:
</I>&gt;<i> 
</I>&gt;<i>   // XXX: putStr() still has String 64KB limits
</I>&gt;<i>   Must(strVia.length() &lt; 64*1024);
</I>
No objections from me if you replace the magic constant with a new
inlined String::MaxSizeXXX() method. The slightly misleading source code
comment above becomes unnecessary after that. Why XXX()? Because no
correct caller code should know about internal String limits (but it may
catch exceptions, including exceptions due to those limits).


&gt;<i> (I kind of hate those low-level operations with Must() and assert() like
</I>&gt;<i> the former - far too little context to be useful debugging with such big
</I>&gt;<i> impact when they are triggered.)
</I>
While it is indeed tempting to hate those Must(), we must keep in mind
that low-level assert-replacing Must()s are not meant for debugging or
even traditional error handling. Their purpose is to (hopefully) prevent
Squid death.

When the crash avoidance project completes, we will have a way to dump
stack traces for specific Must()s, which will provide the same level of
triage info as an assert() would, but (hopefully) without killing Squid
in environments where such functionality is supported.


HTH,

Alex.

</PRE>
















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008281.html">[squid-dev] [PATCH] VIA creation code duplication
</A></li>
	<LI>Next message: <A HREF="008314.html">[squid-dev] [PATCH] VIA creation code duplication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8285">[ date ]</a>
              <a href="thread.html#8285">[ thread ]</a>
              <a href="subject.html#8285">[ subject ]</a>
              <a href="author.html#8285">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
