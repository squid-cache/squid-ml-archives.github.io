<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] Support forward unknown protocol using http port which	redirected to squid
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Support%20forward%20unknown%20protocol%20using%20http%20port%20which%0A%09redirected%20to%20squid&In-Reply-To=%3Ctencent_13CD03F13051F93B54B7517A%40qq.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="008278.html">
   <LINK REL="Next"  HREF="008295.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] Support forward unknown protocol using http port which	redirected to squid</H1>
    <B>钱国正</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Support%20forward%20unknown%20protocol%20using%20http%20port%20which%0A%09redirected%20to%20squid&In-Reply-To=%3Ctencent_13CD03F13051F93B54B7517A%40qq.com%3E"
       TITLE="[squid-dev] Support forward unknown protocol using http port which	redirected to squid">richard.qian at magicwifi.com.cn
       </A><BR>
    <I>Fri Mar 17 07:06:23 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="008278.html">[squid-dev] [PATCH] Update refresh_pattern description regarding 'max' option
</A></li>
        <LI>Next message: <A HREF="008295.html">[squid-dev] Support forward unknown protocol using http port which redirected to squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8290">[ date ]</a>
              <a href="thread.html#8290">[ thread ]</a>
              <a href="subject.html#8290">[ subject ]</a>
              <a href="author.html#8290">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Squid-Devs:


I have play with squid for a long tine, but still can not get into its world deeply, that's make me annoying.
Recently, I have encountered a problem when using squid.
It is that I am using squid as a transparent proxy in Router, redirecting data which destination port is 80 to squid,
and it work fine for a long time, just days before, I found there is one case that will not make the mobile app not
work.


The case is the mobile app using 80 port with non-http nor https protocol.


I have searched a lot on that and found an on_unsupported_protocol, but apparently, not for this case.
So, I am wondering if I can get started to work on that, to process such things.


My thoughts is that when accept the connection and if it can not parsing the request (with enough data, at least contain
the method length of HTTP) just send to the destination (before redirect to squid its an public_ip:port, int squid we can
get it).  And the later case, I can not imagine how to do, and whether the thought of mine can be realized ?


Anyone can give some introduction about that or the squid working-model?  anything helpful would be appreciate.
Thanks in advance.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-dev/attachments/20170317/2393c28c/attachment.html">http://lists.squid-cache.org/pipermail/squid-dev/attachments/20170317/2393c28c/attachment.html</A>&gt;
</PRE>




















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008278.html">[squid-dev] [PATCH] Update refresh_pattern description regarding 'max' option
</A></li>
	<LI>Next message: <A HREF="008295.html">[squid-dev] Support forward unknown protocol using http port which redirected to squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8290">[ date ]</a>
              <a href="thread.html#8290">[ thread ]</a>
              <a href="subject.html#8290">[ subject ]</a>
              <a href="author.html#8290">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
