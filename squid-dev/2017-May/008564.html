<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] A new 'has' ACL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20A%20new%20%27has%27%20ACL&In-Reply-To=%3Cd6ecbb10-6e93-c74b-eef7-f93a2e458a82%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="008562.html">
   <LINK REL="Next"  HREF="008565.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] A new 'has' ACL</H1>
    <B>Eduard Bagdasaryan</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20A%20new%20%27has%27%20ACL&In-Reply-To=%3Cd6ecbb10-6e93-c74b-eef7-f93a2e458a82%40measurement-factory.com%3E"
       TITLE="[squid-dev] A new 'has' ACL">eduard.bagdasaryan at measurement-factory.com
       </A><BR>
    <I>Tue May  2 18:38:46 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="008562.html">[squid-dev] A new 'has' ACL
</A></li>
        <LI>Next message: <A HREF="008565.html">[squid-dev] A new 'has' ACL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8564">[ date ]</a>
              <a href="thread.html#8564">[ thread ]</a>
              <a href="subject.html#8564">[ subject ]</a>
              <a href="author.html#8564">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>As I noted before, after r14752 each transaction(even a failed one,
see logAcceptError()) has its ALE created. Normally it is stored in
ClientHttpRequest::al.  However, I see that many ACLFilledChecklist
objects does not initialize their ACLFilledChecklist::al (assigning from
the transaction ALE). That works for now in most cases, probably
because there is the only ACLExternal which needs it and overrides
requiresAle() to return true. On the other hand, the lack of proper
ACLFilledChecklist::al initialization makes impossible correct using
ALE component in our 'has' ACL.

Evidently, if we fix this (e.g., with mandatory initializing
ACLFilledChecklist::al in its constructor), we would not need to
check ALE component either.


Eduard.

On 01.05.2017 19:11, Alex Rousskov wrote:
&gt;<i> On 04/30/2017 10:03 PM, Amos Jeffries wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Is there an explicit need you have found for ALE to be on the
</I>&gt;&gt;<i> component list? Since ALE is currently standing in as a &quot;master
</I>&gt;&gt;<i> transaction&quot; object for most of the Squid code. It needs to be either
</I>&gt;&gt;<i> created or provided/fetched from elsewhere whenever it is used.
</I>&gt;&gt;<i> Having an ACL that bypasses that would defeat bug-finding of places
</I>&gt;&gt;<i> where it is broken.
</I>&gt;<i> I would like to polish that question and correct its justification
</I>&gt;<i> logic: We can abuse admins as bug-finding guinea pigs only if we give
</I>&gt;<i> them tools to turn those bugs off. The &quot;has&quot; ACL is such a tool. Thus,
</I>&gt;<i> we need a &quot;has&quot; ACL component for any object that any ACL or ACL-driven
</I>&gt;<i> code uses (or should be using) conditionally. Hence, the question is:
</I>&gt;<i>
</I>&gt;<i> Does Squid ACL or ACL-driven code correctly use (or should be using) ALE
</I>&gt;<i> conditionally?
</I>&gt;<i>
</I>&gt;<i> If the answer is &quot;yes&quot;, then ALE should be added to &quot;has&quot;. If the answer
</I>&gt;<i> is &quot;maybe&quot;, then ALE may be added to &quot;has&quot;.
</I>&gt;<i>
</I>&gt;<i> Please note that it is not necessary to have a specific crash or warning
</I>&gt;<i> bug report for the answer to become &quot;yes&quot; or &quot;maybe&quot;, justifying ALE
</I>&gt;<i> support in the &quot;has&quot; ACL. Squid code analysis is sufficient.
</I>&gt;<i>
</I>&gt;<i> I cannot answer that question without doing more research, but I am sure
</I>&gt;<i> Eduard can find the right answer.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thank you,
</I>&gt;<i>
</I>&gt;<i> Alex.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-dev mailing list
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">squid-dev at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">http://lists.squid-cache.org/listinfo/squid-dev</A>
</I>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008562.html">[squid-dev] A new 'has' ACL
</A></li>
	<LI>Next message: <A HREF="008565.html">[squid-dev] A new 'has' ACL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8564">[ date ]</a>
              <a href="thread.html#8564">[ thread ]</a>
              <a href="subject.html#8564">[ subject ]</a>
              <a href="author.html#8564">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
