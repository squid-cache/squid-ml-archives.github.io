<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] [PATCH] fix escaping errors in manual pages causing	information loss
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20fix%20escaping%20errors%20in%20manual%20pages%20causing%0A%09information%20loss&In-Reply-To=%3C20170511172255.GE70982%40athene.usta.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="008654.html">
   <LINK REL="Next"  HREF="008591.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] [PATCH] fix escaping errors in manual pages causing	information loss</H1>
    <B>Ingo Schwarze</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20%5BPATCH%5D%20fix%20escaping%20errors%20in%20manual%20pages%20causing%0A%09information%20loss&In-Reply-To=%3C20170511172255.GE70982%40athene.usta.de%3E"
       TITLE="[squid-dev] [PATCH] fix escaping errors in manual pages causing	information loss">schwarze at usta.de
       </A><BR>
    <I>Thu May 11 17:22:55 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="008654.html">[squid-dev] [PATCH] Fix reopened bug 2833
</A></li>
        <LI>Next message: <A HREF="008591.html">[squid-dev] [PATCH] fix escaping errors in manual pages causing information loss
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8590">[ date ]</a>
              <a href="thread.html#8590">[ thread ]</a>
              <a href="subject.html#8590">[ subject ]</a>
              <a href="author.html#8590">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

while auditing manual pages in the OpenBSD ports tree, i noticed
serious escaping errors in four of the squid manuals that cause
information loss, in most cases loss of important information in
the SYNOPSIS.

The following patch against bazaar trunk fixes those issues.

Stuart Henderson, who is maintaining the OpenBSD port of squid,
advised that sending the patch to this list would be appropriate.


The reasons why the escaping is wrong are:

 1) In the roff language, \&quot; introduces a comment,
    hence the rest of the input line is discarded by
    all formatters.

 2) In the roff language, \\ does *not* produce a printable
    backslash but merely delays expansion of the escape sequence
    (which is practically never what you want, unless you are
    programming a new macro package).  Consequently, &quot;\\n'&quot; ends
    up being interpreted as an access to the number register with
    the name &quot;'&quot; (yes, roff does allow identifiers consisting of
    special characters in some contexts), which doesn't exist and
    hence yields the output string &quot;0&quot;.

Thanks for developing squid!

Yours,
  Ingo

P.S.
I'm not attempting to fix all manual page syntax errors that cause
misformatting (that would cause a very serious amount of work), but
only those that cause information loss.

-- 
Ingo Schwarze &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">schwarze at usta.de</A>&gt;
<A HREF="http://www.openbsd.org/">http://www.openbsd.org/</A>   &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">schwarze at openbsd.org</A>&gt;
<A HREF="http://mdocml.bsd.lv/">http://mdocml.bsd.lv/</A>     &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">schwarze at mdocml.bsd.lv</A>&gt;


=== modified file 'src/acl/external/file_userip/ext_file_userip_acl.8'
--- src/acl/external/file_userip/ext_file_userip_acl.8	2017-01-01 00:14:42 +0000
+++ src/acl/external/file_userip/ext_file_userip_acl.8	2017-05-11 16:49:06 +0000
@@ -68,7 +68,7 @@
 .B ALL 
 and 
 .B NONE 
-, which mean \&quot;any user on this IP address may authenticate\&quot; or \&quot;no user on this IP address may authenticate\&quot;.
+, which mean \(dqany user on this IP address may authenticate\(dq or \(dqno user on this IP address may authenticate\(dq.
 .
 .SH AUTHOR
 This program was written by

=== modified file 'src/auth/basic/LDAP/basic_ldap_auth.8'
--- src/auth/basic/LDAP/basic_ldap_auth.8	2017-03-31 08:57:46 +0000
+++ src/auth/basic/LDAP/basic_ldap_auth.8	2017-05-11 16:44:30 +0000
@@ -5,9 +5,9 @@
 .
 .SH SYNOPSIS
 .if !'po4a'hide' .B basic_ldap_auth
-.if !'po4a'hide' .B \-b\ \&quot;
+.if !'po4a'hide' .B \-b\ \(dq
 base DN
-.if !'po4a'hide' .B \&quot;\ [\-u
+.if !'po4a'hide' .B \(dq\ [\-u
 attribute
 .if !'po4a'hide' .B ]\ [
 options
@@ -20,11 +20,11 @@
 .if !'po4a'hide' .B ]...
 .br
 .if !'po4a'hide' .B basic_ldap_auth
-.if !'po4a'hide' .B \-b\ \&quot;
+.if !'po4a'hide' .B \-b\ \(dq
 base DN
-.if !'po4a'hide' .B \&quot;\ \-f\ \&quot;
+.if !'po4a'hide' .B \(dq\ \-f\ \(dq
 LDAP search filter
-.if !'po4a'hide' .B \&quot;\ [
+.if !'po4a'hide' .B \(dq\ [
 options
 .if !'po4a'hide' .B ]\ [
 LDAP server name
@@ -74,7 +74,7 @@
 The search filter can contain up to 15 occurrences of
 .B %s
 which will be replaced by the username, as in
-.B &quot;\&quot;uid\=%s\&quot;&quot;
+.B &quot;\(dquid\=%s\(dq&quot;
 for RFC2037 directories. For a detailed description of LDAP search
 filter syntax see RFC2254.
 .br

=== modified file 'src/auth/basic/RADIUS/basic_radius_auth.8'
--- src/auth/basic/RADIUS/basic_radius_auth.8	2017-01-01 00:14:42 +0000
+++ src/auth/basic/RADIUS/basic_radius_auth.8	2017-05-11 16:47:05 +0000
@@ -9,9 +9,9 @@
 config file
 .br
 .if !'po4a'hide' .B basic_radius_auth
-.if !'po4a'hide' .B &quot;\-h \&quot;&quot;
+.if !'po4a'hide' .B &quot;\-h \(dq&quot;
 server name
-.if !'po4a'hide' .B &quot;\&quot; [\-p &quot;
+.if !'po4a'hide' .B &quot;\(dq [\-p &quot;
 port
 .if !'po4a'hide' .B &quot;] [\-i &quot;
 identifier

=== modified file 'tools/squidclient/squidclient.1'
--- tools/squidclient/squidclient.1	2017-01-01 00:14:42 +0000
+++ tools/squidclient/squidclient.1	2017-05-11 16:51:31 +0000
@@ -86,7 +86,7 @@
 .if !'po4a'hide' .TP
 .if !'po4a'hide' .B &quot;\-H 'string'&quot;
 Extra headers to send. Use
-.B '\\n'
+.B '\en'
 for new lines.
 .
 .if !'po4a'hide' .TP

</PRE>










































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008654.html">[squid-dev] [PATCH] Fix reopened bug 2833
</A></li>
	<LI>Next message: <A HREF="008591.html">[squid-dev] [PATCH] fix escaping errors in manual pages causing information loss
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8590">[ date ]</a>
              <a href="thread.html#8590">[ thread ]</a>
              <a href="subject.html#8590">[ subject ]</a>
              <a href="author.html#8590">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
