<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] OpenSSL 1.1 regression
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20OpenSSL%201.1%20regression&In-Reply-To=%3C004501d2d1bd%243b74a510%24b25def30%24%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="008647.html">
   <LINK REL="Next"  HREF="008653.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] OpenSSL 1.1 regression</H1>
    <B>Eliezer  Croitoru</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20OpenSSL%201.1%20regression&In-Reply-To=%3C004501d2d1bd%243b74a510%24b25def30%24%40ngtech.co.il%3E"
       TITLE="[squid-dev] OpenSSL 1.1 regression">eliezer at ngtech.co.il
       </A><BR>
    <I>Sat May 20 23:03:00 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="008647.html">[squid-dev] OpenSSL 1.1 regression
</A></li>
        <LI>Next message: <A HREF="008653.html">[squid-dev] OpenSSL 1.1 regression
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8652">[ date ]</a>
              <a href="thread.html#8652">[ thread ]</a>
              <a href="subject.html#8652">[ subject ]</a>
              <a href="author.html#8652">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am missing coupe things about the subject and I want to verify it with your all.
&gt;<i>From my point of view when maintaining the RPM's for couple distributions I am looking at:
</I>Would a specific OpenSSL library hit the distributions I maintain or not or just in a couple years?
But I am not sure about the concern of the developers since I read something about gcc 6 which is the cutting edge version of gcc to my knowledge.

And I want to understand:
What is the aim of the Squid-Cache software development team for Versions 3.5, 4.X, 5.X?
Also, Do we expect the main line linux distributions to use the cutting edge gcc or OpenSSL or 
we are just in the stage which we try to patch up things before the actual integration of these tools will be done?(can take even couple years..)

Thanks,
Eliezer

----
Eliezer Croitoru
Linux System Administrator
Mobile: +972-5-28704261
Email: <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">eliezer at ngtech.co.il</A>


-----Original Message-----
From: squid-dev [mailto:<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">squid-dev-bounces at lists.squid-cache.org</A>] On Behalf Of Christos Tsantilas
Sent: Friday, May 19, 2017 7:20 PM
To: <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">squid-dev at lists.squid-cache.org</A>
Subject: Re: [squid-dev] OpenSSL 1.1 regression

The t4 patch

On 19/05/2017 12:27 πμ, Amos Jeffries wrote:
&gt;<i> On 19/05/17 04:04, Christos Tsantilas wrote:
</I>&gt;&gt;<i> On 18/05/2017 03:40 μμ, Amos Jeffries wrote:
</I>&gt;&gt;&gt;<i> On 18/05/17 23:12, Christos Tsantilas wrote:
</I>&gt;&gt;&gt;&gt;<i> +    # check for API functions
</I>&gt;&gt;&gt;&gt;<i> +    AC_CHECK_LIB(ssl, SSL_CTX_get0_certificate,
</I>&gt;&gt;&gt;&gt;<i> [AC_DEFINE(HAVE_SSL_CTX_GET0_CERTIFICATE, 1, [SSL_CTX_get0_certificate
</I>&gt;&gt;&gt;&gt;<i> is available])], [])
</I>&gt;&gt;&gt;&gt;<i> +
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> This bit seems to be correct.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Given the .cc file sequence of macro tests I think we can speed up
</I>&gt;&gt;&gt;<i> ./configure a bit by moving the use of
</I>&gt;&gt;&gt;<i> SQUID_CHECK_OPENSSL_GETCERTIFICATE_WORKS into the if-not-found [] path.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> eg.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> AC_CHECK_LIB(ssl, SSL_CTX_get0_certificate, [
</I>&gt;&gt;&gt;<i>   AC_DEFINE(HAVE_SSL_CTX_GET0_CERTIFICATE, 1, [SSL_CTX_get0_certificate
</I>&gt;&gt;&gt;<i> is available])
</I>&gt;&gt;&gt;<i>   ],[
</I>&gt;&gt;&gt;<i>   # check for bugs and hacks in the old OpenSSL API
</I>&gt;&gt;&gt;<i>   SQUID_CHECK_OPENSSL_GETCERTIFICATE_WORKS
</I>&gt;&gt;&gt;<i>   ])
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I am attaching a new patch.
</I>&gt;&gt;<i> In this patch I moved the SQUID_CHECK_OPENSSL_GETCERTIFICATE_WORKS  as
</I>&gt;&gt;<i> you suggested.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> But also my last patch was buggy, the AC_CHECK_LIB did not search at
</I>&gt;&gt;<i> the correct directories for libssl library.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> In this patch I moved the &quot;SQUID_STATE_ROLLBACK(squid_openssl_state)&quot;
</I>&gt;&gt;<i> line some lines down to have the correct libraries search path.
</I>&gt;&gt;<i> Is it ok, or it is better to open a new SQUID_STATE_SAVE/ROLLBACK just
</I>&gt;&gt;<i> for AC_CHECK_LIB?
</I>&gt;<i>
</I>&gt;<i> Ah. Either moving the check which alters compiler environment above the
</I>&gt;<i> existign ROLLBACK, or a new one. It is important the CXXFLAGS and SSLLIB
</I>&gt;<i> lines directly above where your patch placed it do not get rolled back.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> PS. Finally, this easy to fix issue, is one more prove that it is
</I>&gt;&gt;<i> better to not start fixing files involved with this satanic tool
</I>&gt;&gt;<i> called autoconf!
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> :-P
</I>&gt;<i>
</I>&gt;<i> Amos
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-dev mailing list
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">squid-dev at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">http://lists.squid-cache.org/listinfo/squid-dev</A>
</I>


</PRE>






















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008647.html">[squid-dev] OpenSSL 1.1 regression
</A></li>
	<LI>Next message: <A HREF="008653.html">[squid-dev] OpenSSL 1.1 regression
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8652">[ date ]</a>
              <a href="thread.html#8652">[ thread ]</a>
              <a href="subject.html#8652">[ subject ]</a>
              <a href="author.html#8652">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
