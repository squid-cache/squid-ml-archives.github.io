<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] Repeated assertions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Repeated%20assertions&In-Reply-To=%3C67279393.403.1495812419822.JavaMail.root%40hscbrasil.com.br%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="008784.html">
   <LINK REL="Next"  HREF="008687.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] Repeated assertions</H1>
    <B>Junior Cunha</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Repeated%20assertions&In-Reply-To=%3C67279393.403.1495812419822.JavaMail.root%40hscbrasil.com.br%3E"
       TITLE="[squid-dev] Repeated assertions">junior.cunha at hscbrasil.com.br
       </A><BR>
    <I>Fri May 26 15:26:59 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="008784.html">[squid-dev] [PATCH] ssl::server_name options to control matching logic.
</A></li>
        <LI>Next message: <A HREF="008687.html">[squid-dev] Build failed in Jenkins: template-full-matrix » clang,rs-fbsd-10 #355
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8683">[ date ]</a>
              <a href="thread.html#8683">[ thread ]</a>
              <a href="subject.html#8683">[ subject ]</a>
              <a href="author.html#8683">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

   We are facing a strange problem with a squid 3.5.25 installation in one of our customers. Every minute an assertion like this &quot;assertion failed: Read.cc:73: &quot;fd_table[conn-&gt;fd].halfClosedReader != NULL&quot; can be seen in the cache.log file. Below some information related to our current setup:

   - 2 physical servers running Squid 3.5.25 ( 1 instance per machine ) linked with OpenSSL 1.0.1e-57
   - haproxy to provide load balancing between the nodes + keepalived to provide vip
   - ~3000 users
   - diskd for cache
   - ssl bump enabled (config below)

http_port 58080 require-proxy-header dynamic_cert_mem_cache_size=1KB generate-host-certificates=on ssl-bump cert=/opt/hsc/webcontrol/squid/etc/ssl/myCA.pem sslflags=NO_DEFAULT_CA

   (...)

acl s1_tls_connect at_step SslBump1
sslproxy_cipher ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDSA-RSA-AES256-SHA:ECDSA-RSA-AES256:ECDHE-RSA-AES256-SHA:DHE-RSA-AES256-SHA:AES256-SHA:ECDHE-RSA-RC4-SHA:ECDHE-RSA-AES128-SHA:DHE-RSA-AES128-SHA:DHE-RSA-CAMELLIA128-SHA:AES128-SHA:RC4-SHA:HIGH:!aNULL:!MD5:!ADH
ssl_bump peek s1_tls_connect
ssl_bump bump all

   We have no idea why this is happening since we have another customer with the same setup and this doesn't happen.

   Could someone please help us to solve this problem? Our company is willing to pay for any kind of help (in this case contact me directly via e-mail or skype &quot;juniorcunha.rs&quot;).

   Best regards.

   []s

--
Junior Cunha
HSC Brasil
telefone  55 (51) 3216-7007 | Porto Alegre
telefone  55 (11) 3522-8191 | São Paulo
site:  www.hscbrasil.com.br

</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008784.html">[squid-dev] [PATCH] ssl::server_name options to control matching logic.
</A></li>
	<LI>Next message: <A HREF="008687.html">[squid-dev] Build failed in Jenkins: template-full-matrix » clang,rs-fbsd-10 #355
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8683">[ date ]</a>
              <a href="thread.html#8683">[ thread ]</a>
              <a href="subject.html#8683">[ subject ]</a>
              <a href="author.html#8683">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
