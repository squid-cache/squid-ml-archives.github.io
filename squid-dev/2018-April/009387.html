<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] Merge bot: Disabling GitHub voting enforcement
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Merge%20bot%3A%20Disabling%20GitHub%20voting%20enforcement&In-Reply-To=%3Ca70a8c3e-ed28-c450-66bb-557d7e721994%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="009386.html">
   <LINK REL="Next"  HREF="009388.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] Merge bot: Disabling GitHub voting enforcement</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Merge%20bot%3A%20Disabling%20GitHub%20voting%20enforcement&In-Reply-To=%3Ca70a8c3e-ed28-c450-66bb-557d7e721994%40measurement-factory.com%3E"
       TITLE="[squid-dev] Merge bot: Disabling GitHub voting enforcement">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Apr 19 16:27:17 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="009386.html">[squid-dev] SQUID proxy transparent
</A></li>
        <LI>Next message: <A HREF="009388.html">[squid-dev] [PATCH] Update negotiate_kerberos_auth helper protocol
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9387">[ date ]</a>
              <a href="thread.html#9387">[ thread ]</a>
              <a href="subject.html#9387">[ subject ]</a>
              <a href="author.html#9387">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

    The merge bot has successfully completed several pull request
merges. You can see them in a master:

  $ git log --committer=squid-anubis upstream/master

All of those merges were done while watching Anubis log for signs of
problems. We are now comfortable with allowing Anubis to merge (manually
labeled as M-cleared-for-merge) pull requests without us watching the logs.

The following two configuration and behavior changes are required to
proceed to this next merge automation phase. If there are no objections,
I will change GitHub configuration, and repository administrators should
change their behavior as discussed below.


1. GitHub will stop enforcing master review requirements.

GitHub associates reviews with a pull request. Anubis is merging a
staged commit that, from GitHub point of view, is not a part of a pull
request. In its current configuration, GitHub prohibits the bot from
merging the staged commit because, from GitHub point of view, it has not
been reviewed. I plan to disable that check.

Anubis is configured to enforce Squid Project requirements. In fact, the
bot understands official requirements better than GitHub. For example,
GitHub does not understand that the pull request author normally votes
for their own code. GitHub does not even allow voting for own code.
Anubis does count the author as a positive vote.

Unlike GitHub, Anubis follows official requirements related to voting
timeouts. Anubis also adds a minimal waiting period to give developers a
chance to review a pull request. The lack of such a period was already a
problem on the mailing list, but it becomes a lot more pronounced when
things are automated -- there is no human in the loop to pause and give
others a chance to review.

We will continue to use GitHub for voting. It is the vote counting agent
that is changing, not the voting mechanism.

Anubis merge criteria are documented at
<A HREF="https://github.com/measurement-factory/anubis#which-pull-requests-are-eligible-for-merging">https://github.com/measurement-factory/anubis#which-pull-requests-are-eligible-for-merging</A>


while specific configuration options listed at
<A HREF="https://wiki.squid-cache.org/MergeProcedure#Automation">https://wiki.squid-cache.org/MergeProcedure#Automation</A>


2. Manual master mergers will be prohibited.

Since we have to disable GitHub voting enforcement, we can no longer
rely on GitHub hiding the Big Green merge button until there are enough
votes. The button will be available (to repository owners and
administrators) in cases where the pull request should NOT be merged!

Please do not merge manually when GitHub does not enforce voting rules.

If you want to merge a pull request, double check that the staged commit
is acceptable and add a M-cleared-for-merge label. The bot should merge
the labeled pull request (after the staged commit passes tests and the
pull request gets enough votes, of course).


If you have any objections to the above two changes, please speak up!
Similarly, if you see problems with bot commits, please post here or
file a bug report with Squid Bugzilla (or in Anubis Issues on GitHub).


Thank you,

Alex.
P.S. If this phase is successful, the last step would be to remove the
manual pull request labeling requirement -- the bot will automatically
merge any eligible pull request.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009386.html">[squid-dev] SQUID proxy transparent
</A></li>
	<LI>Next message: <A HREF="009388.html">[squid-dev] [PATCH] Update negotiate_kerberos_auth helper protocol
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9387">[ date ]</a>
              <a href="thread.html#9387">[ thread ]</a>
              <a href="subject.html#9387">[ subject ]</a>
              <a href="author.html#9387">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
