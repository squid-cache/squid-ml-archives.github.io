<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] How to rewrite URL in squid proxy server according to client's custom request header?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20How%20to%20rewrite%20URL%20in%20squid%20proxy%20server%20according%0A%20to%20client%27s%20custom%20request%20header%3F&In-Reply-To=%3Cd7f4ece6-760e-ae24-6263-8d49ae028154%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="009456.html">
   <LINK REL="Next"  HREF="009453.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] How to rewrite URL in squid proxy server according to client's custom request header?</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20How%20to%20rewrite%20URL%20in%20squid%20proxy%20server%20according%0A%20to%20client%27s%20custom%20request%20header%3F&In-Reply-To=%3Cd7f4ece6-760e-ae24-6263-8d49ae028154%40treenet.co.nz%3E"
       TITLE="[squid-dev] How to rewrite URL in squid proxy server according to client's custom request header?">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Aug  2 10:43:59 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="009456.html">[squid-dev] Converting squid to library
</A></li>
        <LI>Next message: <A HREF="009453.html">[squid-dev] TLS proxy-server connection optimization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9452">[ date ]</a>
              <a href="thread.html#9452">[ thread ]</a>
              <a href="subject.html#9452">[ subject ]</a>
              <a href="author.html#9452">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 01/08/18 08:27, Abu Noman wrote:
&gt;<i> How can I rewrite the destination in Squid proxy server according to the
</I>&gt;<i> client's request header?
</I>&gt;<i> 
</I>
This is a usage question. Please followup in squid-users mailing list.

The answer is yes and no.

No - Squid does not do any re-writing. It calls a helper process or
script to determine if, when, and how re-writing is done.

see &lt;<A HREF="http://www.squid-cache.org/Doc/config/url_rewrite_program/">http://www.squid-cache.org/Doc/config/url_rewrite_program/</A>&gt;


&gt;<i> *Details:*
</I>&gt;<i> If I call an API likeÂ |GET www.google.com &lt;<A HREF="http://www.google.com/">http://www.google.com/</A>&gt;
</I>&gt;<i> HTTP/1.0\r\nGo:www.google.com.bd &lt;<A HREF="http://www.google.com.bd/">http://www.google.com.bd/</A>&gt;| 
</I>
That request is invalid, even in HTTP/1.0. Any HTTP agent receiving the
request should reject, or at minimum reformat it to:

 GET / HTTP/1.0
 Host: www.google.com
 Go: www.google.com.bd


As you should see, no need to bother with this &quot;Go&quot; header. Just send
the correct Host header. The client intention will be clear and do the
correct thing regardless of which HTTP agent(s) are processing the
message. The message does not even have to reach the mentioned &quot;API&quot; to
be delivered to the correct server. An intermediary closer to the client
may perform the delivery via a more efficient route.

This valid message being used is _important_ since most HTTP messages go
through between 2 and 8 layers of proxying in the modern Internet.
Whether you can see those layers or not they are there.

Amos
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009456.html">[squid-dev] Converting squid to library
</A></li>
	<LI>Next message: <A HREF="009453.html">[squid-dev] TLS proxy-server connection optimization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9452">[ date ]</a>
              <a href="thread.html#9452">[ thread ]</a>
              <a href="subject.html#9452">[ subject ]</a>
              <a href="author.html#9452">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
