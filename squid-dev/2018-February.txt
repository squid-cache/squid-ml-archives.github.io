From squid3 at treenet.co.nz  Thu Feb  1 13:11:01 2018
From: squid3 at treenet.co.nz (Amos Jeffries)
Date: Fri, 2 Feb 2018 02:11:01 +1300
Subject: [squid-dev] [RFC] http(s)_port TLS/SSL config redesign
In-Reply-To: <2187f117-97a4-4aed-8a43-426a217745cf@treenet.co.nz>
References: <2187f117-97a4-4aed-8a43-426a217745cf@treenet.co.nz>
Message-ID: <7d3312a3-579d-3423-fb08-9c0bf0282413@treenet.co.nz>

The final part of the proposal quoted below are now PR'd for audit.

There are several differences from the initial proposal;

* the ServerOptions::signingCa class changes and new default for
generate-host-certificates have allowed a far simpler back-compat check
using the non-existence of a filename by generate-host-certificates=
instead of relying on cert CA checking.
 That CA checking should still be done, but is no longer a required part
of this project.

* generation of reverse-proxy certificates is happening in a separate
parallel project.


Amos


On 20/07/17 13:27, Amos Jeffries wrote:
> Hi all, Christos and Alex particularly,
> 
> I have been mulling over several ideas for how to improve the config
> parameters on the http(s)_port to make them a bit easier for newbies to
> get right, and pros to do powerfully cool stuff.
> 
> 
> So, the most major change I would like to propose is to move the proxies
> CA for cert generation from cert= parameter to
> generate-host-certificates= parameter. Having it configured with a file
> being the same as generate =on and not configuring it default to =off.
> 
> 
> The matching key= and any CA chain would need to be all bundled in the
> same PEM file. That should be fine since the clients get a separate DER
> file installed, not sharing the PEM file loaded into Squid.
> 
> That will stop confusing newbies have over what should go in cert= for
> what Squid use-case. And will allow pros to configure exactly which
> static cert Squid uses as a fallback when auto-generating others -
> simply by using cert= in the normal non-bumping way.
> 
> Also, we can then easily use the two sets of parameters in identical
> fashion for non-SSL-Bump proxies to auto-generate reverse-proxy certs
> based on SNI, or use a fallback static cert of admins choice.
> 
> Bringing these two different use-cases config into line should vastly
> simplify the complexity of working with Squid TLS certs for everybody,
> including us in the code as we no longer have multiple (8! at least)
> code paths for different cert= possibilities and config error handling
> permutations.
> 
> 
> For backward compatibility concerns with existing SSL-Bump configs I
> think we can use the certificate CA vs non-CA property to auto-detect
> old SSL-Bump configs being loaded and handle the compatibility
> auto-upgrade and warnings. The warning will be useful long-term and not
> just for the transitional period.
> 
> 
> Now would also be a marginally better than usual time to make the change
> since the parameters are migrating to tls-* prefix in v4 and have extra
> admin attention already.
> 
> 
> Amos
> _______________________________________________
> squid-dev mailing list
> squid-dev at lists.squid-cache.org
> http://lists.squid-cache.org/listinfo/squid-dev

From eliezer at ngtech.co.il  Fri Feb  2 10:08:28 2018
From: eliezer at ngtech.co.il (Eliezer Croitoru)
Date: Fri, 2 Feb 2018 12:08:28 +0200
Subject: [squid-dev] [RFC] http(s)_port TLS/SSL config redesign
In-Reply-To: <7d3312a3-579d-3423-fb08-9c0bf0282413@treenet.co.nz>
References: <2187f117-97a4-4aed-8a43-426a217745cf@treenet.co.nz>
 <7d3312a3-579d-3423-fb08-9c0bf0282413@treenet.co.nz>
Message-ID: <123901d39c0d$c57e1a00$507a4e00$@ngtech.co.il>

Great to hear about this.

The RPM's for 4.0.x latest already built and I'm starting to work on the near step towards which I hope is 4.1.0.
I hope that by 4.1 I will have packages for Debian 9.
Are we expecting 4.1 to be released sooner then Ubuntu 18.04 LTS(April 2018)?

* https://wiki.ubuntu.com/Releases

Eliezer

----
Eliezer Croitoru
Linux System Administrator
Mobile: +972-5-28704261
Email: eliezer at ngtech.co.il


-----Original Message-----
From: squid-dev [mailto:squid-dev-bounces at lists.squid-cache.org] On Behalf Of Amos Jeffries
Sent: Thursday, February 1, 2018 15:11
To: squid-dev at lists.squid-cache.org
Subject: Re: [squid-dev] [RFC] http(s)_port TLS/SSL config redesign

The final part of the proposal quoted below are now PR'd for audit.

There are several differences from the initial proposal;

* the ServerOptions::signingCa class changes and new default for
generate-host-certificates have allowed a far simpler back-compat check
using the non-existence of a filename by generate-host-certificates=
instead of relying on cert CA checking.
 That CA checking should still be done, but is no longer a required part
of this project.

* generation of reverse-proxy certificates is happening in a separate
parallel project.


Amos


On 20/07/17 13:27, Amos Jeffries wrote:
> Hi all, Christos and Alex particularly,
> 
> I have been mulling over several ideas for how to improve the config
> parameters on the http(s)_port to make them a bit easier for newbies to
> get right, and pros to do powerfully cool stuff.
> 
> 
> So, the most major change I would like to propose is to move the proxies
> CA for cert generation from cert= parameter to
> generate-host-certificates= parameter. Having it configured with a file
> being the same as generate =on and not configuring it default to =off.
> 
> 
> The matching key= and any CA chain would need to be all bundled in the
> same PEM file. That should be fine since the clients get a separate DER
> file installed, not sharing the PEM file loaded into Squid.
> 
> That will stop confusing newbies have over what should go in cert= for
> what Squid use-case. And will allow pros to configure exactly which
> static cert Squid uses as a fallback when auto-generating others -
> simply by using cert= in the normal non-bumping way.
> 
> Also, we can then easily use the two sets of parameters in identical
> fashion for non-SSL-Bump proxies to auto-generate reverse-proxy certs
> based on SNI, or use a fallback static cert of admins choice.
> 
> Bringing these two different use-cases config into line should vastly
> simplify the complexity of working with Squid TLS certs for everybody,
> including us in the code as we no longer have multiple (8! at least)
> code paths for different cert= possibilities and config error handling
> permutations.
> 
> 
> For backward compatibility concerns with existing SSL-Bump configs I
> think we can use the certificate CA vs non-CA property to auto-detect
> old SSL-Bump configs being loaded and handle the compatibility
> auto-upgrade and warnings. The warning will be useful long-term and not
> just for the transitional period.
> 
> 
> Now would also be a marginally better than usual time to make the change
> since the parameters are migrating to tls-* prefix in v4 and have extra
> admin attention already.
> 
> 
> Amos
> _______________________________________________
> squid-dev mailing list
> squid-dev at lists.squid-cache.org
> http://lists.squid-cache.org/listinfo/squid-dev
_______________________________________________
squid-dev mailing list
squid-dev at lists.squid-cache.org
http://lists.squid-cache.org/listinfo/squid-dev


From amajer at suse.de  Mon Feb  5 09:14:13 2018
From: amajer at suse.de (Adam Majer)
Date: Mon, 5 Feb 2018 10:14:13 +0100
Subject: [squid-dev] [RFC] http(s)_port TLS/SSL config redesign
In-Reply-To: <123901d39c0d$c57e1a00$507a4e00$@ngtech.co.il>
References: <2187f117-97a4-4aed-8a43-426a217745cf@treenet.co.nz>
 <7d3312a3-579d-3423-fb08-9c0bf0282413@treenet.co.nz>
 <123901d39c0d$c57e1a00$507a4e00$@ngtech.co.il>
Message-ID: <273fd715-983c-1485-5815-275c824e77fd@suse.de>

On 02/02/2018 11:08 AM, Eliezer Croitoru wrote:
> Great to hear about this.
> 
> The RPM's for 4.0.x latest already built and I'm starting to work on the near step towards which I hope is 4.1.0.
> I hope that by 4.1 I will have packages for Debian 9.
> Are we expecting 4.1 to be released sooner then Ubuntu 18.04 LTS(April 2018)?
> 
> * https://wiki.ubuntu.com/Releases


squid-4 will be in openSUSE Leap 15 and SLE-15 for various reasons,
mainly because of OpenSSL 1.1 requirements. April-ish timeline is also
important for openSUSE, not just Ubuntu. It would be nice to have
official non-beta versions. ;)

- Adam

From Gowtham.A at excelacom.in  Mon Feb 12 12:28:41 2018
From: Gowtham.A at excelacom.in (Gowtham Anandaraj)
Date: Mon, 12 Feb 2018 12:28:41 +0000
Subject: [squid-dev] Introduction
Message-ID: <50adc94e2010405f94272dba1f3e0bbb@EXMAIL.allfon.in>

Hello Squid Dev,

It's a great opportunity to learn Squid.
My Name is Gowtham , working as Programmer Analyst with over 3 years of experience.

Currently I'm using squid for my project for caching, but I'm not able to cache https sites.
Any help would be appreciated.

Thanks,
[cid:image001.png at 01D1F16D.82E610E0]

Gowtham Anandaraj
Program Analyst

Excelacom Technologies Pvt Ltd

5/D5-IT Park, SIPCOT, Navallur Post, Siruseri, Chennai 603103
T +91 44 4743 3000 | F +91 44 3068 3111 | E gowtham.a at excelacom.in<mailto:gowtham.a at excelacom.in>  | S gowthammiley |M 9524031314
[NOTICE: This e-mail is confidential and may also be privileged. If you are not the intended recipient, please notify us immediately by replying to this message and then delete it from your system. You should not copy or use it for any purpose, nor disclose its contents to any other person. Thank you.]



________________________________

DISCLAIMER INFORMATION

The information contained in this email is confidential and may contain proprietary information. It is meant solely for the intended recipient. Access to this email by anyone else is unauthorized. If you are not the intended recipient, any disclosure, copying, distribution or any action taken or omitted in reliance on this, is prohibited and may be unlawful. No liability or responsibility is accepted if information or data is, for whatever reason corrupted or does not reach its intended recipient. Excelacom Technologies Private Ltd reserves the right to take any action in accordance with its email policy. If you have received this communication in error, please delete this mail & notify us immediately at webadmin at excelacom.in

WARNING:
Computer viruses can be transmitted via email. The recipient should check this email and any attachments for the presence of viruses. The company will not accept any liability or any damage caused by any virus transmitted by this email
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20180212/a36d7676/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 2199 bytes
Desc: image001.png
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20180212/a36d7676/attachment.png>

From eliezer at ngtech.co.il  Thu Feb 22 18:44:28 2018
From: eliezer at ngtech.co.il (Eliezer Croitoru)
Date: Thu, 22 Feb 2018 20:44:28 +0200
Subject: [squid-dev] Introduction
In-Reply-To: <50adc94e2010405f94272dba1f3e0bbb@EXMAIL.allfon.in>
References: <50adc94e2010405f94272dba1f3e0bbb@EXMAIL.allfon.in>
Message-ID: <034f01d3ac0d$2b699b50$823cd1f0$@ngtech.co.il>

Hey,

 

Can you be more specific?

 

Eliezer

 

----

 <http://ngtech.co.il/lmgtfy/> Eliezer Croitoru
Linux System Administrator
Mobile: +972-5-28704261
Email: eliezer at ngtech.co.il



 

From: squid-dev [mailto:squid-dev-bounces at lists.squid-cache.org] On Behalf
Of Gowtham Anandaraj
Sent: Monday, February 12, 2018 14:29
To: squid-dev at lists.squid-cache.org
Subject: [squid-dev] Introduction

 

Hello Squid Dev,

 

It's a great opportunity to learn Squid.

My Name is Gowtham , working as Programmer Analyst with over 3 years of
experience.

 

Currently I'm using squid for my project for caching, but I'm not able to
cache https sites.

Any help would be appreciated. 

 

Thanks,




Gowtham Anandaraj

Program Analyst


Excelacom Technologies Pvt Ltd

5/D5-IT Park, SIPCOT, Navallur Post, Siruseri, Chennai 603103   

T +91 44 4743 3000 | F +91 44 3068 3111 | E  <mailto:gowtham.a at excelacom.in>
gowtham.a at excelacom.in  | S gowthammiley |M 9524031314

[NOTICE: This e-mail is confidential and may also be privileged. If you are
not the intended recipient, please notify us immediately by replying to this
message and then delete it from your system. You should not copy or use it
for any purpose, nor disclose its contents to any other person. Thank you.]

 

 

 

  _____  


DISCLAIMER INFORMATION

The information contained in this email is confidential and may contain
proprietary information. It is meant solely for the intended recipient.
Access to this email by anyone else is unauthorized. If you are not the
intended recipient, any disclosure, copying, distribution or any action
taken or omitted in reliance on this, is prohibited and may be unlawful. No
liability or responsibility is accepted if information or data is, for
whatever reason corrupted or does not reach its intended recipient.
Excelacom Technologies Private Ltd reserves the right to take any action in
accordance with its email policy. If you have received this communication in
error, please delete this mail & notify us immediately at
webadmin at excelacom.in <mailto:webadmin at excelacom.in> 

WARNING:
Computer viruses can be transmitted via email. The recipient should check
this email and any attachments for the presence of viruses. The company will
not accept any liability or any damage caused by any virus transmitted by
this email

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20180222/7fb8785b/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 2199 bytes
Desc: not available
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20180222/7fb8785b/attachment-0002.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 11297 bytes
Desc: not available
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20180222/7fb8785b/attachment-0003.png>

From eliezer at ngtech.co.il  Thu Feb 22 18:56:44 2018
From: eliezer at ngtech.co.il (Eliezer Croitoru)
Date: Thu, 22 Feb 2018 20:56:44 +0200
Subject: [squid-dev] SSL-BUMP distinguish between mobile devices such as IOS
	or ANDROID vs PC request
Message-ID: <037501d3ac0e$e2287c20$a6797460$@ngtech.co.il>

I was wondering about the options to distinguish mobile devices TLS\SSL
requests compared to PC one's.
When I am running the next test:
https://www.ssllabs.com/ssltest/analyze.html?d=www.squid%2dcache.org&s=77.93
.254.178&latest

I am receiving a list of details about the compatibility of  specific
handshaking as listed:
Handshake Simulation
Android 2.3.7   No SNI 2		RSA 2048 (SHA256)   	TLS 1.0
TLS_DHE_RSA_WITH_AES_128_CBC_SHA   DH 1024  FS
Android 4.0.4 	RSA 2048 (SHA256)   	TLS 1.0
TLS_DHE_RSA_WITH_AES_256_CBC_SHA   DH 1024  FS
Android 4.1.1 	RSA 2048 (SHA256)   	TLS 1.0
TLS_DHE_RSA_WITH_AES_256_CBC_SHA   DH 1024  FS
Android 4.2.2 	RSA 2048 (SHA256)   	TLS 1.0
TLS_DHE_RSA_WITH_AES_256_CBC_SHA   DH 1024  FS
Android 4.3 	RSA 2048 (SHA256)   	TLS 1.0
TLS_DHE_RSA_WITH_AES_256_CBC_SHA   DH 1024  FS
Android 4.4.2 	RSA 2048 (SHA256)   	TLS 1.2
TLS_DHE_RSA_WITH_AES_256_GCM_SHA384   DH 1024  FS
Android 5.0.0 	RSA 2048 (SHA256)   	TLS 1.2
TLS_DHE_RSA_WITH_AES_128_GCM_SHA256   DH 1024  FS
Android 6.0 	RSA 2048 (SHA256)   	TLS 1.2
TLS_DHE_RSA_WITH_AES_128_GCM_SHA256   DH 1024  FS
Android 7.0 	RSA 2048 (SHA256)   	TLS 1.2
TLS_RSA_WITH_AES_256_GCM_SHA384  No FS
Baidu Jan 2015 	RSA 2048 (SHA256)   	TLS 1.0
TLS_DHE_RSA_WITH_AES_256_CBC_SHA   DH 1024  FS
BingPreview Jan 2015 	RSA 2048 (SHA256)   	TLS 1.2
TLS_DHE_RSA_WITH_AES_256_GCM_SHA384   DH 1024  FS
Chrome 49 / XP SP3 	RSA 2048 (SHA256)   	TLS 1.2
TLS_RSA_WITH_AES_128_GCM_SHA256  No FS
Chrome 57 / Win 7  R		RSA 2048 (SHA256)   	TLS 1.2
TLS_RSA_WITH_AES_256_GCM_SHA384  No FS
Firefox 31.3.0 ESR / Win 7 	RSA 2048 (SHA256)   	TLS 1.2
TLS_DHE_RSA_WITH_AES_256_CBC_SHA   DH 1024  FS
Firefox 47 / Win 7  R		RSA 2048 (SHA256)   	TLS 1.2
TLS_DHE_RSA_WITH_AES_256_CBC_SHA   DH 1024  FS
Firefox 49 / XP SP3 	RSA 2048 (SHA256)   	TLS 1.2
TLS_DHE_RSA_WITH_AES_256_CBC_SHA   DH 1024  FS
Firefox 53 / Win 7  R		RSA 2048 (SHA256)   	TLS 1.2
TLS_DHE_RSA_WITH_AES_256_CBC_SHA   DH 1024  FS
Googlebot Feb 2015 	RSA 2048 (SHA256)   	TLS 1.2
TLS_DHE_RSA_WITH_AES_256_CBC_SHA   DH 1024  FS
IE 7 / Vista 	RSA 2048 (SHA256)   	TLS 1.0
TLS_RSA_WITH_AES_256_CBC_SHA  No FS
IE 8 / XP   No FS 1	  No SNI 2		RSA 2048 (SHA256)   	TLS
1.0 	TLS_RSA_WITH_3DES_EDE_CBC_SHA
IE 8-10 / Win 7  R		RSA 2048 (SHA256)   	TLS 1.0
TLS_RSA_WITH_AES_256_CBC_SHA  No FS
IE 11 / Win 7  R		RSA 2048 (SHA256)   	TLS 1.2
TLS_DHE_RSA_WITH_AES_256_GCM_SHA384   DH 1024  FS
IE 11 / Win 8.1  R		RSA 2048 (SHA256)   	TLS 1.2
TLS_DHE_RSA_WITH_AES_256_GCM_SHA384   DH 1024  FS
IE 10 / Win Phone 8.0 	RSA 2048 (SHA256)   	TLS 1.0
TLS_RSA_WITH_AES_256_CBC_SHA  No FS
IE 11 / Win Phone 8.1  R		RSA 2048 (SHA256)   	TLS 1.2
TLS_RSA_WITH_AES_256_CBC_SHA256  No FS
IE 11 / Win Phone 8.1 Update  R		RSA 2048 (SHA256)   	TLS 1.2
TLS_DHE_RSA_WITH_AES_256_GCM_SHA384   DH 1024  FS
IE 11 / Win 10  R		RSA 2048 (SHA256)   	TLS 1.2
TLS_DHE_RSA_WITH_AES_256_GCM_SHA384   DH 1024  FS
Edge 13 / Win 10  R		RSA 2048 (SHA256)   	TLS 1.2
TLS_DHE_RSA_WITH_AES_256_GCM_SHA384   DH 1024  FS
Edge 13 / Win Phone 10  R		RSA 2048 (SHA256)   	TLS 1.2
TLS_DHE_RSA_WITH_AES_256_GCM_SHA384   DH 1024  FS
Java 6u45   No SNI 2		RSA 2048 (SHA256)   	TLS 1.0
TLS_DHE_RSA_WITH_AES_128_CBC_SHA   DH 1024  FS
Java 7u25 	RSA 2048 (SHA256)   	TLS 1.0
TLS_DHE_RSA_WITH_AES_128_CBC_SHA   DH 1024  FS
Java 8u31 	RSA 2048 (SHA256)   	TLS 1.2
TLS_DHE_RSA_WITH_AES_128_GCM_SHA256   DH 1024  FS
OpenSSL 0.9.8y 	RSA 2048 (SHA256)   	TLS 1.0
TLS_DHE_RSA_WITH_AES_256_CBC_SHA   DH 1024  FS
OpenSSL 1.0.1l  R		RSA 2048 (SHA256)   	TLS 1.2
TLS_DHE_RSA_WITH_AES_256_GCM_SHA384   DH 1024  FS
OpenSSL 1.0.2e  R		RSA 2048 (SHA256)   	TLS 1.2
TLS_DHE_RSA_WITH_AES_256_GCM_SHA384   DH 1024  FS
Safari 5.1.9 / OS X 10.6.8 	RSA 2048 (SHA256)   	TLS 1.0
TLS_DHE_RSA_WITH_AES_256_CBC_SHA   DH 1024  FS
Safari 6 / iOS 6.0.1 	RSA 2048 (SHA256)   	TLS 1.2
TLS_DHE_RSA_WITH_AES_256_CBC_SHA256   DH 1024  FS
Safari 6.0.4 / OS X 10.8.4  R		RSA 2048 (SHA256)   	TLS 1.0
TLS_DHE_RSA_WITH_AES_256_CBC_SHA   DH 1024  FS
Safari 7 / iOS 7.1  R		RSA 2048 (SHA256)   	TLS 1.2
TLS_DHE_RSA_WITH_AES_256_CBC_SHA256   DH 1024  FS
Safari 7 / OS X 10.9  R		RSA 2048 (SHA256)   	TLS 1.2
TLS_DHE_RSA_WITH_AES_256_CBC_SHA256   DH 1024  FS
Safari 8 / iOS 8.4  R		RSA 2048 (SHA256)   	TLS 1.2
TLS_DHE_RSA_WITH_AES_256_CBC_SHA256   DH 1024  FS
Safari 8 / OS X 10.10  R		RSA 2048 (SHA256)   	TLS 1.2
TLS_DHE_RSA_WITH_AES_256_CBC_SHA256   DH 1024  FS
Safari 9 / iOS 9  R		RSA 2048 (SHA256)   	TLS 1.2
TLS_RSA_WITH_AES_256_GCM_SHA384  No FS
Safari 9 / OS X 10.11  R		RSA 2048 (SHA256)   	TLS 1.2
TLS_RSA_WITH_AES_256_GCM_SHA384  No FS
Safari 10 / iOS 10  R		RSA 2048 (SHA256)   	TLS 1.2
TLS_RSA_WITH_AES_256_GCM_SHA384  No FS
Safari 10 / OS X 10.12  R		RSA 2048 (SHA256)   	TLS 1.2
TLS_RSA_WITH_AES_256_GCM_SHA384  No FS
Apple ATS 9 / iOS 9  R		RSA 2048 (SHA256)   	TLS 1.2
TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384   ECDH secp256r1  FS
Yahoo Slurp Jan 2015 	RSA 2048 (SHA256)   	TLS 1.2
TLS_DHE_RSA_WITH_AES_256_GCM_SHA384   DH 1024  FS
YandexBot Jan 2015 	RSA 2048 (SHA256)   	TLS 1.2
TLS_DHE_RSA_WITH_AES_256_GCM_SHA384   DH 1024  FS


And I was wondering if there is an option to distinguish between these
requests and to maybe enhance SSL-BUMP with some kind of "option" based on
this.

Other options I have seen that helps to distinguish a mobile client compared
to a non-mobile one is by the domain name in the SNI and also by the default
response to a client request simulation.
Any ideas?

Eliezer

----
Eliezer Croitoru
Linux System Administrator
Mobile: +972-5-28704261
Email: eliezer at ngtech.co.il





From rousskov at measurement-factory.com  Thu Feb 22 21:18:44 2018
From: rousskov at measurement-factory.com (Alex Rousskov)
Date: Thu, 22 Feb 2018 14:18:44 -0700
Subject: [squid-dev] SSL-BUMP distinguish between mobile devices such as
 IOS or ANDROID vs PC request
In-Reply-To: <037501d3ac0e$e2287c20$a6797460$@ngtech.co.il>
References: <037501d3ac0e$e2287c20$a6797460$@ngtech.co.il>
Message-ID: <2d3e19b8-e362-0db3-f209-dea99cade391@measurement-factory.com>

On 02/22/2018 11:56 AM, Eliezer Croitoru wrote:

> I was wondering about the options to distinguish mobile devices TLS\SSL
> requests compared to PC one's.

You need ACLs that can match various TLS Client Hello fields (mostly
message version, protocol version, and ciphers) and a knowledgebase of
typical Hellos for the devices/clients you are interested in. A
Hello-based solution cannot be 100% reliable, but I bet you can identify
many popular OS versions (and, as a consequence, even some physical
devices) with a good-enough probability (for most applications).

IIRC, Squid does not have ACLs that interrogate TLS Client Hello with
the exception of SNI (i.e., ssl::server_name --client_requested).
However, it should not be very difficult to add such ACLs and they would
be generally useful IMO.


Forward proxies can also examine CONNECT headers. That is already
supported AFAIK.


Examining TCP/IP packet headers would also be useful in many cases, but
that is harder to do directly in Squid.


HTH,

Alex.

From eliezer at ngtech.co.il  Fri Feb 23 01:20:00 2018
From: eliezer at ngtech.co.il (Eliezer Croitoru)
Date: Fri, 23 Feb 2018 03:20:00 +0200
Subject: [squid-dev] SSL-BUMP distinguish between mobile devices such as
	IOS or ANDROID vs PC request
In-Reply-To: <2d3e19b8-e362-0db3-f209-dea99cade391@measurement-factory.com>
References: <037501d3ac0e$e2287c20$a6797460$@ngtech.co.il>
 <2d3e19b8-e362-0db3-f209-dea99cade391@measurement-factory.com>
Message-ID: <047f01d3ac44$6ca93b20$45fbb160$@ngtech.co.il>

OK then.
If it's doable then it's only waiting for the client who will want to fund this feature.

Thanks,
Eliezer

----
Eliezer Croitoru
Linux System Administrator
Mobile: +972-5-28704261
Email: eliezer at ngtech.co.il



-----Original Message-----
From: Alex Rousskov [mailto:rousskov at measurement-factory.com] 
Sent: Thursday, February 22, 2018 23:19
To: Eliezer Croitoru <eliezer at ngtech.co.il>; squid-dev at lists.squid-cache.org
Subject: Re: [squid-dev] SSL-BUMP distinguish between mobile devices such as IOS or ANDROID vs PC request

On 02/22/2018 11:56 AM, Eliezer Croitoru wrote:

> I was wondering about the options to distinguish mobile devices TLS\SSL
> requests compared to PC one's.

You need ACLs that can match various TLS Client Hello fields (mostly
message version, protocol version, and ciphers) and a knowledgebase of
typical Hellos for the devices/clients you are interested in. A
Hello-based solution cannot be 100% reliable, but I bet you can identify
many popular OS versions (and, as a consequence, even some physical
devices) with a good-enough probability (for most applications).

IIRC, Squid does not have ACLs that interrogate TLS Client Hello with
the exception of SNI (i.e., ssl::server_name --client_requested).
However, it should not be very difficult to add such ACLs and they would
be generally useful IMO.


Forward proxies can also examine CONNECT headers. That is already
supported AFAIK.


Examining TCP/IP packet headers would also be useful in many cases, but
that is harder to do directly in Squid.


HTH,

Alex.


From KhushalJain.S at excelacom.in  Fri Feb 23 03:55:17 2018
From: KhushalJain.S at excelacom.in (Khushal Jain Shripal)
Date: Fri, 23 Feb 2018 03:55:17 +0000
Subject: [squid-dev] Introduction
In-Reply-To: <034f01d3ac0d$2b699b50$823cd1f0$@ngtech.co.il>
References: <50adc94e2010405f94272dba1f3e0bbb@EXMAIL.allfon.in>
 <034f01d3ac0d$2b699b50$823cd1f0$@ngtech.co.il>
Message-ID: <a0299fa257c1417d89885977f1de5815@EXMAIL.allfon.in>

Hi Eliezer,

We have installed Squid Cache.

1.       We configured http port number.

2.       We gave hostname as localhost and port number in Proxy Settings of Windows.

3.       Cache folder was created and cache data exists when we tried to access http sites.

a.       For instance, we tried to access http://excelacom.in we were able to cache and store the data in cache folder.

But when we tried to access https sites, we were not able to cache https sites.

Attached is our Squid.conf for your reference.

Can you please provide us Squid.Conf file to access and cache https sites.
It would be more helpful to us.


Regards,

[cid:image001.png at 01D1F16D.82E610E0]

Khushal Jain Shripal
Business Analyst

Excelacom Technologies Pvt Ltd
p: +91.9003028627
Skype ID: khushalshripal


From: squid-dev [mailto:squid-dev-bounces at lists.squid-cache.org] On Behalf Of Eliezer Croitoru
Sent: Friday, February 23, 2018 12:14 AM
To: Gowtham Anandaraj <Gowtham.A at excelacom.in>; squid-dev at lists.squid-cache.org
Subject: Re: [squid-dev] Introduction

Hey,

Can you be more specific?

Eliezer

----
Eliezer Croitoru<http://ngtech.co.il/lmgtfy/>
Linux System Administrator
Mobile: +972-5-28704261
Email: eliezer at ngtech.co.il<mailto:eliezer at ngtech.co.il>
[cid:image001.png at 01D3AC87.4851F710]

From: squid-dev [mailto:squid-dev-bounces at lists.squid-cache.org] On Behalf Of Gowtham Anandaraj
Sent: Monday, February 12, 2018 14:29
To: squid-dev at lists.squid-cache.org<mailto:squid-dev at lists.squid-cache.org>
Subject: [squid-dev] Introduction

Hello Squid Dev,

It's a great opportunity to learn Squid.
My Name is Gowtham , working as Programmer Analyst with over 3 years of experience.

Currently I'm using squid for my project for caching, but I'm not able to cache https sites.
Any help would be appreciated.

Thanks,
[cid:image001.png at 01D1F16D.82E610E0]

Gowtham Anandaraj
Program Analyst

Excelacom Technologies Pvt Ltd

5/D5-IT Park, SIPCOT, Navallur Post, Siruseri, Chennai 603103
T +91 44 4743 3000 | F +91 44 3068 3111 | E gowtham.a at excelacom.in<mailto:gowtham.a at excelacom.in>  | S gowthammiley |M 9524031314
[NOTICE: This e-mail is confidential and may also be privileged. If you are not the intended recipient, please notify us immediately by replying to this message and then delete it from your system. You should not copy or use it for any purpose, nor disclose its contents to any other person. Thank you.]



________________________________

DISCLAIMER INFORMATION

The information contained in this email is confidential and may contain proprietary information. It is meant solely for the intended recipient. Access to this email by anyone else is unauthorized. If you are not the intended recipient, any disclosure, copying, distribution or any action taken or omitted in reliance on this, is prohibited and may be unlawful. No liability or responsibility is accepted if information or data is, for whatever reason corrupted or does not reach its intended recipient. Excelacom Technologies Private Ltd reserves the right to take any action in accordance with its email policy. If you have received this communication in error, please delete this mail & notify us immediately at webadmin at excelacom.in<mailto:webadmin at excelacom.in>

WARNING:
Computer viruses can be transmitted via email. The recipient should check this email and any attachments for the presence of viruses. The company will not accept any liability or any damage caused by any virus transmitted by this email

________________________________

DISCLAIMER INFORMATION

The information contained in this email is confidential and may contain proprietary information. It is meant solely for the intended recipient. Access to this email by anyone else is unauthorized. If you are not the intended recipient, any disclosure, copying, distribution or any action taken or omitted in reliance on this, is prohibited and may be unlawful. No liability or responsibility is accepted if information or data is, for whatever reason corrupted or does not reach its intended recipient. Excelacom Technologies Private Ltd reserves the right to take any action in accordance with its email policy. If you have received this communication in error, please delete this mail & notify us immediately at webadmin at excelacom.in

WARNING:
Computer viruses can be transmitted via email. The recipient should check this email and any attachments for the presence of viruses. The company will not accept any liability or any damage caused by any virus transmitted by this email
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20180223/c7c29ddd/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 11297 bytes
Desc: image001.png
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20180223/c7c29ddd/attachment-0002.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 2199 bytes
Desc: image002.png
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20180223/c7c29ddd/attachment-0003.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: squid.conf
Type: application/octet-stream
Size: 2374 bytes
Desc: squid.conf
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20180223/c7c29ddd/attachment-0001.obj>

From vineetawasthi.technocrat at gmail.com  Fri Feb 23 05:09:34 2018
From: vineetawasthi.technocrat at gmail.com (Vineet Awasthi)
Date: Fri, 23 Feb 2018 10:39:34 +0530
Subject: [squid-dev] SSL-BUMP distinguish between mobile devices such as
 IOS or ANDROID vs PC request
In-Reply-To: <047f01d3ac44$6ca93b20$45fbb160$@ngtech.co.il>
References: <037501d3ac0e$e2287c20$a6797460$@ngtech.co.il>
 <2d3e19b8-e362-0db3-f209-dea99cade391@measurement-factory.com>
 <047f01d3ac44$6ca93b20$45fbb160$@ngtech.co.il>
Message-ID: <CAAbd6HJFFmUCqLvjp=Xmv0Miww3FMb=-4vbBscKHF37firNtuQ@mail.gmail.com>

Hey guys,

Can anyone please help me to get the knowledge about squid request parsing
and handling. I mean in which files (.c) ACL settings are parsed and
handled when request http recieved in squid.

Thanks ,
Vineet

On 23 Feb 2018 6:50 a.m., "Eliezer Croitoru" <eliezer at ngtech.co.il> wrote:

> OK then.
> If it's doable then it's only waiting for the client who will want to fund
> this feature.
>
> Thanks,
> Eliezer
>
> ----
> Eliezer Croitoru
> Linux System Administrator
> Mobile: +972-5-28704261
> Email: eliezer at ngtech.co.il
>
>
>
> -----Original Message-----
> From: Alex Rousskov [mailto:rousskov at measurement-factory.com]
> Sent: Thursday, February 22, 2018 23:19
> To: Eliezer Croitoru <eliezer at ngtech.co.il>; squid-dev at lists.squid-cache.
> org
> Subject: Re: [squid-dev] SSL-BUMP distinguish between mobile devices such
> as IOS or ANDROID vs PC request
>
> On 02/22/2018 11:56 AM, Eliezer Croitoru wrote:
>
> > I was wondering about the options to distinguish mobile devices TLS\SSL
> > requests compared to PC one's.
>
> You need ACLs that can match various TLS Client Hello fields (mostly
> message version, protocol version, and ciphers) and a knowledgebase of
> typical Hellos for the devices/clients you are interested in. A
> Hello-based solution cannot be 100% reliable, but I bet you can identify
> many popular OS versions (and, as a consequence, even some physical
> devices) with a good-enough probability (for most applications).
>
> IIRC, Squid does not have ACLs that interrogate TLS Client Hello with
> the exception of SNI (i.e., ssl::server_name --client_requested).
> However, it should not be very difficult to add such ACLs and they would
> be generally useful IMO.
>
>
> Forward proxies can also examine CONNECT headers. That is already
> supported AFAIK.
>
>
> Examining TCP/IP packet headers would also be useful in many cases, but
> that is harder to do directly in Squid.
>
>
> HTH,
>
> Alex.
>
> _______________________________________________
> squid-dev mailing list
> squid-dev at lists.squid-cache.org
> http://lists.squid-cache.org/listinfo/squid-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20180223/1e9a9800/attachment.html>

From rousskov at measurement-factory.com  Fri Feb 23 16:03:28 2018
From: rousskov at measurement-factory.com (Alex Rousskov)
Date: Fri, 23 Feb 2018 09:03:28 -0700
Subject: [squid-dev] How ACLs are handled
Message-ID: <be4add19-00a4-7906-f9b4-fcba9c6911c5@measurement-factory.com>

On 02/22/2018 10:09 PM, Vineet Awasthi wrote:

> Can anyone please help me to get the knowledge about squid request
> parsing and handling. I mean in which files (.c) ACL settings are parsed
> and handled when request http recieved in squid.

It may be impossible to briefly answer such a general question, but if
you want to learn about Squid ACL processing in general, consider
starting with a specific ACL-driven directive use, followed by the base
ACL class, a simple specific ACL implementation, and ACL registration code:

* $ git grep -3 Config.accessList.spoof_client_ip
* src/acl/Acl.{h,cc}
* src/acl/LocalPort.{h,cc}
* src/AclRegs.cc


If you have a specific problem that you need to solve, please consider
detailing your question in that direction. I also recommend researching
your own question first and posting the results of that research along
with the description of the biggest problem you could not solve.

Finally, please start a new email thread for each new question.


HTH,

Alex.
P.S. Modern Squids do not use .c files for ACLs because most of the
modern code is written in C++.





From rousskov at measurement-factory.com  Fri Feb 23 18:41:43 2018
From: rousskov at measurement-factory.com (Alex Rousskov)
Date: Fri, 23 Feb 2018 11:41:43 -0700
Subject: [squid-dev] Merge bot in final testing stages
Message-ID: <460e73d3-1728-4a6a-4d96-32c1efb8f1d9@measurement-factory.com>

Hello,

    To reduce development overheads while testing every master commit,
we are moving towards automated merging of eligible GitHub pull
requests. Anubis, a new bot implementing this automation, is going
through the final testing stages. You may have already seen a few purple
M-... labels popping up in your GitHub pull requests.

The bot installation used by the Squid Project is configured to
generally follow the existing voting procedure[Vote] with a few
additional checkpoints that compensate for the lack of a well-qualified
human committing the "deemed accepted" code. To learn more about the bot
and to review its functionality (including merge preconditions and
labels meaning), please visit [Bot]. The sample configuration on that
page matches the one used for Squid pull requests.

If you find a problem with Anubis, please file an issue[Bug].

Thanks to Eduard Bagdasaryan efforts, bot testing is progressing well.
We may allow the bot to make its first master commit soon. Eduard or I
will post the final warning here in advance, of course.

  [Bot] https://github.com/measurement-factory/anubis#readme
  [Bug] https://github.com/measurement-factory/anubis/issues
  [Vote] https://wiki.squid-cache.org/MergeProcedure#Votes


Cheers,

Alex.

From danilovt at gmail.com  Mon Feb  5 20:19:51 2018
From: danilovt at gmail.com (Danilo V)
Date: Mon, 05 Feb 2018 20:19:51 -0000
Subject: [squid-dev] Introduction
Message-ID: <CAHaQnLOAutavxtzZh4ipRrJULokM12S2STsEePEgNzUO5zbA_Q@mail.gmail.com>

Hello, I'm a networking and security analyst who works for the government
in Brazil.
I work especially with free software. I am currently allocated to a content
filter customization project using docker, puppet, squid, squidguard and
sarg.

I would like to join the mailing list for help with the issues I have
encountered.

Thanks,
Danilo Teixeira
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20180205/64c61963/attachment.html>

From deanpm1994 at gmail.com  Wed Feb 28 18:45:33 2018
From: deanpm1994 at gmail.com (dean)
Date: Wed, 28 Feb 2018 18:45:33 -0000
Subject: [squid-dev] Squid User-Ip
Message-ID: <1519843524337-0.post@n4.nabble.com>

I would like to know to which authenticated user a certain IP corresponds at
any time at the code level



--
Sent from: http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-Development-f1042840.html

From KhushalJain.S at excelacom.in  Mon Feb 12 12:03:19 2018
From: KhushalJain.S at excelacom.in (Khushal Jain Shripal)
Date: Mon, 12 Feb 2018 12:03:19 -0000
Subject: [squid-dev] Not able to cache https site
Message-ID: <2971531fd31946b4b51e58f5ce76b283@EXMAIL.allfon.in>

Hi Squid Dev,

I'm Khushal from Excelacom Technologies, Chennai working as Business Analyst.
I have installed Squid for caching and proxy server. I was able to cache http site, but not https site

I used ssl-bump with intercept feature and created my own self signed certificate, but there is no luck.

Kindly provide us your support in order to solve this problem.

Attached here is squid.conf file and logs

Regards,

[cid:image001.png at 01D1F16D.82E610E0]

Khushal Jain Shripal
Business Analyst

Excelacom Technologies Pvt Ltd
p: +91.9003028627
Skype ID: khushalshripal




________________________________

DISCLAIMER INFORMATION

The information contained in this email is confidential and may contain proprietary information. It is meant solely for the intended recipient. Access to this email by anyone else is unauthorized. If you are not the intended recipient, any disclosure, copying, distribution or any action taken or omitted in reliance on this, is prohibited and may be unlawful. No liability or responsibility is accepted if information or data is, for whatever reason corrupted or does not reach its intended recipient. Excelacom Technologies Private Ltd reserves the right to take any action in accordance with its email policy. If you have received this communication in error, please delete this mail & notify us immediately at webadmin at excelacom.in

WARNING:
Computer viruses can be transmitted via email. The recipient should check this email and any attachments for the presence of viruses. The company will not accept any liability or any damage caused by any virus transmitted by this email
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20180212/589c8a34/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 2199 bytes
Desc: image001.png
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20180212/589c8a34/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: access.log
Type: application/octet-stream
Size: 274259 bytes
Desc: access.log
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20180212/589c8a34/attachment-0003.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: cache.log
Type: application/octet-stream
Size: 21727 bytes
Desc: cache.log
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20180212/589c8a34/attachment-0004.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: squid.conf
Type: application/octet-stream
Size: 2872 bytes
Desc: squid.conf
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20180212/589c8a34/attachment-0005.obj>

From bilalshakir41396 at hotmail.com  Tue Feb 27 02:04:01 2018
From: bilalshakir41396 at hotmail.com (Bilal Shakir)
Date: Tue, 27 Feb 2018 02:04:01 -0000
Subject: [squid-dev] Log_db_daemon
Message-ID: <DM5PR04MB023741337DD0A6485D6C469796C00@DM5PR04MB0237.namprd04.prod.outlook.com>

Dear Support Team,

I am facing issue when trying to be connected with remote DB.

Connecting... dsn='DBI:mysql:database=squid_log:forwardingserver.cegod4vmypam.us-east-1.rds.amazonaws.com', username='squid', password='...' at /usr/lib/squid/log_db_daemon line 119.
Use of uninitialized value $DBI::errstr in concatenation (.) or string at /usr/lib/squid/log_db_daemon line 123.
Cannot connect to database:  at /usr/lib/squid/log_db_daemon line 123.

My issue is similar to below help url.

https://stackoverflow.com/questions/34131741/perl-error-use-of-uninitialized-value-dbierr-in-concatenation

I am using Ubuntu 16 OS.

Regards,
Bilal Shakir
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20180227/158f6bc3/attachment.html>

