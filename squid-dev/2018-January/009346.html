<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] Squid on Windows
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Squid%20on%20Windows&In-Reply-To=%3Cfd075368-d44c-ded1-9bca-9cc92f1d89fd%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   
   <LINK REL="Next"  HREF="009350.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] Squid on Windows</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Squid%20on%20Windows&In-Reply-To=%3Cfd075368-d44c-ded1-9bca-9cc92f1d89fd%40treenet.co.nz%3E"
       TITLE="[squid-dev] Squid on Windows">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Jan  9 05:11:15 UTC 2018</I>
    <P><UL>
        
        <LI>Next message: <A HREF="009350.html">[squid-dev] RFC: Squid ESI processor changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9346">[ date ]</a>
              <a href="thread.html#9346">[ thread ]</a>
              <a href="subject.html#9346">[ subject ]</a>
              <a href="author.html#9346">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 09/01/18 15:56, Lei Wen wrote:
&gt;<i> Hi everyone,
</I>&gt;<i> 
</I>&gt;<i> This is Lei Wen, I am from Microsoft Azure team.
</I>&gt;<i> 
</I>&gt;<i> We are seeking a solution about on host transparent proxy for containers 
</I>&gt;<i> with Squid on Windows.
</I>&gt;<i> 
</I>&gt;<i> We already tried Linux and by using iptables traffic can be redirected 
</I>&gt;<i> to squid port(e.x. 3128).
</I>&gt;<i> 
</I>&gt;<i> We want to know what do we need do to enable transparent proxy on Squid 
</I>&gt;<i> side on Windows Like on the Linux, --enable-linux-netfilter enables 
</I>&gt;<i> transparent proxy.
</I>
Hi Lei,

For NAT interception, Squid needs an interface from the OS to lookup NAT 
table mappings given either the accept() provided IP:port pair(s) and/or 
the socket handle. The API needs to provide the original dst-IP:port 
details the client used prior to the NAT alterations.

As far as I/we have been able to tell so far Windows does not provide 
any such interface for use by applications running in user-space like 
Squid. Once an interface is found or created adding a lookup function to 
Squid using the API should be fairly simple.

There have been several attempts that I'm aware of to create custom 
network drivers for Windows. But those turned out to be very much too 
slow and required asynchronous operations inside the preferrably 
synchronous NAT lookup.


An alternative API to look for is TPROXY. But, I've not seen or heard of 
anything like that either for Windows.


Amos Jeffries
The Squid Software Foundation
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="009350.html">[squid-dev] RFC: Squid ESI processor changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9346">[ date ]</a>
              <a href="thread.html#9346">[ thread ]</a>
              <a href="subject.html#9346">[ subject ]</a>
              <a href="author.html#9346">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
