<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] StoeiD and ICAP services callouts, when it happens?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20StoeiD%20and%20ICAP%20services%20callouts%2C%20when%20it%20happens%3F&In-Reply-To=%3C00f601d419c0%24fbc69de0%24f353d9a0%24%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="009433.html">
   <LINK REL="Next"  HREF="009434.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] StoeiD and ICAP services callouts, when it happens?</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20StoeiD%20and%20ICAP%20services%20callouts%2C%20when%20it%20happens%3F&In-Reply-To=%3C00f601d419c0%24fbc69de0%24f353d9a0%24%40ngtech.co.il%3E"
       TITLE="[squid-dev] StoeiD and ICAP services callouts, when it happens?">eliezer at ngtech.co.il
       </A><BR>
    <I>Thu Jul 12 09:16:14 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="009433.html">[squid-dev] Terminating ICAP requests for aborted HTTP requests
</A></li>
        <LI>Next message: <A HREF="009434.html">[squid-dev] StoeiD and ICAP services callouts, when it happens?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9432">[ date ]</a>
              <a href="thread.html#9432">[ thread ]</a>
              <a href="subject.html#9432">[ subject ]</a>
              <a href="author.html#9432">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have been working from time to time on StoreID while I believe it useful
for targeted scenarios.

I can test and write different code but wanted to first ask since my memory
is a bit vauge.

 

Squid during it's client side callouts:

Runs a series of tests at:

<A HREF="https://github.com/squid-cache/squid/blob/d2a6dcba707c15484c255e7a569b90f7f1">https://github.com/squid-cache/squid/blob/d2a6dcba707c15484c255e7a569b90f7f1</A>
186383/src/client_side_request.cc#L1723

 

<A HREF="https://github.com/squid-cache/squid/blob/d2a6dcba707c15484c255e7a569b90f7f1">https://github.com/squid-cache/squid/blob/d2a6dcba707c15484c255e7a569b90f7f1</A>
186383/src/client_side_request.cc#L1750

 

&gt;<i>From what I understood this section and others are running in
</I>a-synchronically.

So from my point of view now I understand that if I will use a request mod
ICAP service to inject a request header into the request
It would be available as a StoreID extra ie I can use:

 

store_id_extras &quot;%&gt;a/%&gt;A %un %&gt;rm myip=%la myport=%lp %{X-Store-Id}&gt;h&quot;

 

and I will be able to &quot;send&quot; the StoreID helper an extra header which can be
considered while returning squid the right StoreID.

If it's indeed true, is it possible to pass an ICAP response header into the
store_id_extras?

 

Thanks,

Eliezer

 

----

Eliezer Croitoru &lt;<A HREF="http://ngtech.co.il/lmgtfy/">http://ngtech.co.il/lmgtfy/</A>&gt; 
Linux System Administrator
Mobile: +972-5-28704261
Email: <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">eliezer at ngtech.co.il</A>



 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-dev/attachments/20180712/277950fb/attachment-0001.html">http://lists.squid-cache.org/pipermail/squid-dev/attachments/20180712/277950fb/attachment-0001.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 11308 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-dev/attachments/20180712/277950fb/attachment-0001.png">http://lists.squid-cache.org/pipermail/squid-dev/attachments/20180712/277950fb/attachment-0001.png</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009433.html">[squid-dev] Terminating ICAP requests for aborted HTTP requests
</A></li>
	<LI>Next message: <A HREF="009434.html">[squid-dev] StoeiD and ICAP services callouts, when it happens?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9432">[ date ]</a>
              <a href="thread.html#9432">[ thread ]</a>
              <a href="subject.html#9432">[ subject ]</a>
              <a href="author.html#9432">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
