<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] Support lower case http/ spn format for realmd/adcli join support.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Support%20lower%20case%20http/%20spn%20format%20for%0A%20realmd/adcli%20join%20support.&In-Reply-To=%3C066f7e42-2a7b-da6e-cab7-ca5ae4abb881%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="009419.html">
   <LINK REL="Next"  HREF="009421.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] Support lower case http/ spn format for realmd/adcli join support.</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Support%20lower%20case%20http/%20spn%20format%20for%0A%20realmd/adcli%20join%20support.&In-Reply-To=%3C066f7e42-2a7b-da6e-cab7-ca5ae4abb881%40treenet.co.nz%3E"
       TITLE="[squid-dev] Support lower case http/ spn format for realmd/adcli join support.">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Jun 27 18:11:42 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="009419.html">[squid-dev] Support lower case http/ spn format for realmd/adcli	join support.
</A></li>
        <LI>Next message: <A HREF="009421.html">[squid-dev] Support lower case http/ spn format for	realmd/adcli join support.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9420">[ date ]</a>
              <a href="thread.html#9420">[ thread ]</a>
              <a href="subject.html#9420">[ subject ]</a>
              <a href="author.html#9420">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 27/06/18 06:53, Mike Surcouf wrote:
&gt;<i> Correction
</I>&gt;<i> 
</I>&gt;&gt;<i> supports lowercases all SPNs
</I>&gt;<i> 
</I>&gt;<i> should read 
</I>&gt;<i> 
</I>&gt;<i> lowercases all SPNs (you donâ€™t have an option)
</I>&gt;<i> 
</I>&gt;<i> so it always produces http/<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">hostname at REALM.COM</A>
</I>&gt;<i> 
</I>&gt;<i> This is a conscious decision by the adcli team
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://bugs.freedesktop.org/show_bug.cgi?id=84749">https://bugs.freedesktop.org/show_bug.cgi?id=84749</A>
</I>&gt;<i> 
</I>
I don't see any explicit decision by them to use only lower-case. Just
statements that AD accepts case-insensitive inputs so they don't care to
do anything special.


Case insensitivity is a Microsoft custom extension. It cannot be relied
on in non-MS software :
&quot;
Service Principal Names (SPNs) are not case sensitive when used by
Microsoft Windows-based computers. However, an SPN can be used by any
type of computer system. Many of these computer systems, especially
UNIX-based systems, are case-sensitive and require the proper case to
function properly. Care should be taken to use the proper case
particularly when an SPN can be used by a non-Windows-based computer.

Refer this: <A HREF="http://technet.microsoft.com/en-us/library/cc731241(WS.10">http://technet.microsoft.com/en-us/library/cc731241(WS.10</A>).aspx
&quot;


Squid also does not parse these details itself. The library being used
by the helper is responsible for all processing of the local machines
keytab. Squid only parses a token of opaque bytes from HTTP message
headers and passes it as opaque string it to the auth helpers. Our
Kerberos helpers use several libraries, and the one which you are using
apparently has case sensitivity for the SPN.



On the technical side:

Kerberos documents just defer to the protocols where the elements of SPN
are sourced. So some segments in the SPN are case sensitive and others
are not, depending on what type of use the SPN is put.
 eg DNS defines hostname as insensitive, so that part is. Some auth
systems define realm as insensitive, others as case-sensitive - so that
part *might be* (or not. ouch!).


FWIW, following that deferrance style - the HTTP protocol defines its
protocol name as case-sensitive and has a significant difference between
&quot;HTTP&quot; (transport / messaging syntax) and &quot;http&quot; (URL scheme/syntax,
possibly used over non-HTTP transports).

So technically / in theory:
 * if the SPN is for access to HTTP transport (as Squid SPN are)
   - then the &quot;HTTP/&quot; portion should be upper case only.

 * if the SPN is for use of <A HREF="http://">http://</A> resource URLs (eg, as opposed to
<A HREF="ftp://">ftp://</A> URLs fetched with HTTP)
 - it can be any case.


Squid does not go to that second URL-specific level of detail with
authentication and SPNs. Also, since one is required upper case, and the
other doesn't matter going upper case would be the best choice for us if
we did normalize rather than handle as opaque strings anyway.


HTH
Amos
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009419.html">[squid-dev] Support lower case http/ spn format for realmd/adcli	join support.
</A></li>
	<LI>Next message: <A HREF="009421.html">[squid-dev] Support lower case http/ spn format for	realmd/adcli join support.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9420">[ date ]</a>
              <a href="thread.html#9420">[ thread ]</a>
              <a href="subject.html#9420">[ subject ]</a>
              <a href="author.html#9420">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
