<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] Incremental parsing of chunked quoted extensions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Incremental%20parsing%20of%20chunked%20quoted%20extensions&In-Reply-To=%3C166a68fa-4fef-3a41-970f-0439ce3c0e2d%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="009473.html">
   <LINK REL="Next"  HREF="009476.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] Incremental parsing of chunked quoted extensions</H1>
    <B>Eduard Bagdasaryan</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Incremental%20parsing%20of%20chunked%20quoted%20extensions&In-Reply-To=%3C166a68fa-4fef-3a41-970f-0439ce3c0e2d%40measurement-factory.com%3E"
       TITLE="[squid-dev] Incremental parsing of chunked quoted extensions">eduard.bagdasaryan at measurement-factory.com
       </A><BR>
    <I>Thu Oct  4 18:30:27 UTC 2018</I>
    <P><UL>
        <LI>Previous message: <A HREF="009473.html">[squid-dev] modify source code and change the name from &quot;squid&quot; to other name
</A></li>
        <LI>Next message: <A HREF="009476.html">[squid-dev] Incremental parsing of chunked quoted extensions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9475">[ date ]</a>
              <a href="thread.html#9475">[ thread ]</a>
              <a href="subject.html#9475">[ subject ]</a>
              <a href="author.html#9475">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello all,

There is a bug in Squid during incremental parsing of quoted chunked
extensions, resulting in unexpected throwing in
One::Parser::skipLineTerminator(). The underlying problem comes from
the fact that Http::One::Tokenizer::qdText() cannot parse
incrementally because it cannot distinguish &quot;an invalid input&quot; from
&quot;need more data&quot; case.

I see two approaches for fixing this problem:

* Low-level.
   Supply Parser::Tokenizer and its children with incremental parsing
   functionality. It looks like this would require much non-trivial work.

* High-level.
   Avoid incremental parsing of chunked extensions and parse them all
   at once. In other words, we need to adjust the Tokenizer caller
   to buffer the whole chunk extension line before passing it to the
   Tokenizer in order to avoid &quot;need more data&quot; case, causing that bug.

Is the incremental parsing of chunked extensions all-important here?
If no, can I proceed with (2) approach fixing this bug?


Thanks,
Eduard.
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009473.html">[squid-dev] modify source code and change the name from &quot;squid&quot; to other name
</A></li>
	<LI>Next message: <A HREF="009476.html">[squid-dev] Incremental parsing of chunked quoted extensions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9475">[ date ]</a>
              <a href="thread.html#9475">[ thread ]</a>
              <a href="subject.html#9475">[ subject ]</a>
              <a href="author.html#9475">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
