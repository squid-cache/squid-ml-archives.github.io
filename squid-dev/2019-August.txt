From marcelosantos.mail at uol.com.br  Sat Aug 17 05:46:38 2019
From: marcelosantos.mail at uol.com.br (micolocobr2)
Date: Sat, 17 Aug 2019 00:46:38 -0500 (CDT)
Subject: [squid-dev] Squid leaks host IP on first conection
Message-ID: <1566020798251-0.post@n4.nabble.com>

Hi folks,

I have a Vbox runing squid 3.5.24 with 125 address in interfaces.

Im routing specific IPs to some users and protecting it with htpasswd.
Eg there are users using 2 dedicated IPs and the routing is like this:

http_port 141.191.72.201:4223 name=201
acl ip201 myportname 201
tcp_outgoing_address 141.191.72.201 ip201

http_port 161.191.72.202:4223 name=202
acl ip202 myportname 202
tcp_outgoing_address 161.191.72.202 ip202

The strange bug is that just in the fist conection through any of these IPs,
myip.com shows the outgoing IP of my server instead of one of those IPs
above.
For any other conection through the same IPs after the first, myip.com shows
the correct outgoing IP.

Any clue of why?
I thought maybe it could be something related with authentication...

I have more than 10 Vboxes with exact same problem runing ubuntu 16.



--
Sent from: http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-Development-f1042840.html

