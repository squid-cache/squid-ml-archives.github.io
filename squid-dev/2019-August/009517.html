<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] Squid leaks host IP on first conection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Squid%20leaks%20host%20IP%20on%20first%20conection&In-Reply-To=%3C1566020798251-0.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] Squid leaks host IP on first conection</H1>
    <B>micolocobr2</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Squid%20leaks%20host%20IP%20on%20first%20conection&In-Reply-To=%3C1566020798251-0.post%40n4.nabble.com%3E"
       TITLE="[squid-dev] Squid leaks host IP on first conection">marcelosantos.mail at uol.com.br
       </A><BR>
    <I>Sat Aug 17 05:46:38 UTC 2019</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9517">[ date ]</a>
              <a href="thread.html#9517">[ thread ]</a>
              <a href="subject.html#9517">[ subject ]</a>
              <a href="author.html#9517">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi folks,

I have a Vbox runing squid 3.5.24 with 125 address in interfaces.

Im routing specific IPs to some users and protecting it with htpasswd.
Eg there are users using 2 dedicated IPs and the routing is like this:

http_port 141.191.72.201:4223 name=201
acl ip201 myportname 201
tcp_outgoing_address 141.191.72.201 ip201

http_port 161.191.72.202:4223 name=202
acl ip202 myportname 202
tcp_outgoing_address 161.191.72.202 ip202

The strange bug is that just in the fist conection through any of these IPs,
myip.com shows the outgoing IP of my server instead of one of those IPs
above.
For any other conection through the same IPs after the first, myip.com shows
the correct outgoing IP.

Any clue of why?
I thought maybe it could be something related with authentication...

I have more than 10 Vboxes with exact same problem runing ubuntu 16.



--
Sent from: <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-Development-f1042840.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-Development-f1042840.html</A>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9517">[ date ]</a>
              <a href="thread.html#9517">[ thread ]</a>
              <a href="subject.html#9517">[ subject ]</a>
              <a href="author.html#9517">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
