<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] Timeouts for abandoned negative reviews
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Timeouts%20for%20abandoned%20negative%20reviews&In-Reply-To=%3C7c6ca887-a42f-4826-ace5-1bd85ce8a1a8%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="009531.html">
   <LINK REL="Next"  HREF="009535.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] Timeouts for abandoned negative reviews</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Timeouts%20for%20abandoned%20negative%20reviews&In-Reply-To=%3C7c6ca887-a42f-4826-ace5-1bd85ce8a1a8%40measurement-factory.com%3E"
       TITLE="[squid-dev] Timeouts for abandoned negative reviews">rousskov at measurement-factory.com
       </A><BR>
    <I>Sat Jan 11 00:20:50 UTC 2020</I>
    <P><UL>
        <LI>Previous message: <A HREF="009531.html">[squid-dev] Timeouts for abandoned negative reviews
</A></li>
        <LI>Next message: <A HREF="009535.html">[squid-dev] Want to integrate squid github to Jenkins CI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9533">[ date ]</a>
              <a href="thread.html#9533">[ thread ]</a>
              <a href="subject.html#9533">[ subject ]</a>
              <a href="author.html#9533">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 1/10/20 1:59 AM, Amos Jeffries wrote:
&gt;<i> On 9/01/20 11:20 am, Alex Rousskov wrote:
</I>&gt;&gt;<i>     Squid GitHub pull requests have the following problem: A core
</I>&gt;&gt;<i> developer can stall PR progress by submitting a negative review and then
</I>&gt;&gt;<i> ignoring the PR (despite others reminding them that the reviewer action
</I>&gt;&gt;<i> is required). Such stalled PRs cannot be merged because our policies
</I>&gt;&gt;<i> strictly prohibit merging of vetoed PRs.
</I>
&gt;<i> The &quot;problem&quot; you are describing is what I see as a core principle of
</I>&gt;<i> the review process.
</I>
You may have missed the critical &quot;and then...&quot; part of my description. I
did not describe the ability to block a PR. I described the ability to
block and then ignore the PR. I called that &quot;stalling&quot;. The ability to
block a PR (a fundamental feature) is very different from stalling (a
dereliction of duty).

[I am omitting the part of your response that discusses basic PR
blocking because this is not what I am talking about.]


&gt;&gt;<i> Collection of meaningful stats is
</I>&gt;&gt;<i> prohibitively expensive, but there are ~50 PRs that were open for 100+
</I>&gt;&gt;<i> days and many of them are not abandoned/irrelevant. Here are some of the
</I>&gt;&gt;<i> worst examples (the stalled day counts below are approximate):
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> * PR 369: stalled for 310 days (and counting)
</I>&gt;&gt;<i>   <A HREF="https://github.com/squid-cache/squid/pull/369">https://github.com/squid-cache/squid/pull/369</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> * PR 59: 120-480 days, depending on when you think the PR was stalled
</I>&gt;&gt;<i>   <A HREF="https://github.com/squid-cache/squid/pull/59">https://github.com/squid-cache/squid/pull/59</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> * PR 443: stalled for 100+ days (and counting)
</I>&gt;&gt;<i>   <A HREF="https://github.com/squid-cache/squid/pull/443">https://github.com/squid-cache/squid/pull/443</A>
</I>

&gt;<i> Also, at a fundamental level I object to the categorization of any open
</I>&gt;<i> PRs as &quot;abandoned&quot;.
</I>
This term does not change the proposal AFAICT, but what term would you
prefer?


&gt;<i> Particular to this proposal I regularly review *all* PRs in a quick scan
</I>&gt;<i> to see where progress can happen
</I>
It is good that you know when a PR needs your attention, but please note
that your scans have not solved the problem I am writing about. We need
to solve that problem.

The timeout might solve (or reduce) the problem not because of new
notifications, but because it sheds reviewer load. A reviewer who for
months sees authors pleading to explain what needs to be done but does
not respond is probably overloaded.


&gt;&gt;<i> Stalled PRs may significantly increase development overheads and badly
</I>&gt;&gt;<i> reflect on the Squid Project as a whole. I have heard many complains
</I>&gt;&gt;<i> from contributors frustrated with the lack of Project responsiveness and
</I>&gt;&gt;<i> accountability. Stalled PRs have also been used in attempts to block
</I>&gt;&gt;<i> features from being added to the next numbered release.
</I>

&gt;<i> Interesting statement there. Particularly since you and I are
</I>&gt;<i> essentially the only reviewers.
</I>&gt;<i> 
</I>&gt;<i> Are you admitting reason for PR 358 not being approved yet?
</I>
You seem to imply something nefarious on my part. Sorry, I do not know
what you are implying exactly, so I will just stick to the facts:

* PR 358 was approved a year ago and was open for about a day. I do not
think it is relevant here.

* If you meant PR 538, then I reviewed it within ~6 days of opening
(before seeing your squid-dev message), and Eduard helped you make
progress with this PR a few days earlier. And the PR is not even
blocked! Clearly, this is not a stalled PR by any stretch of the
imagination.


&gt;<i> I certainly have not done such underhanded politics. When I want to
</I>&gt;<i> block a feature for next release I state so clearly in the PR. Though
</I>&gt;<i> there is scant reason to block anything from merging to master when the
</I>&gt;<i> code is good - no numbered releases come from there.
</I>
I am not sure why you are saying the above. You seem to be trying to
prove that you have not done something bad that I have done, but I do
not know what that something is, so I cannot respond in a meaningful way.


&gt;&gt;<i> While 100-day stalling is unheard of in other open source projects I
</I>&gt;&gt;<i> know about, the problem with unresponsive reviewers is not unique to
</I>&gt;&gt;<i> Squid. The best (applicable to the Squid Project) solution that I know
</I>&gt;&gt;<i> of is a timeout:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If the reviewer remains unresponsive for N days, their negative review
</I>&gt;&gt;<i> can be dismissed. The counting starts from a well-defined event S, and
</I>&gt;&gt;<i> there are at least two reminder comments addressed at the reviewer (R1
</I>&gt;&gt;<i> days after S and R2 days before the dismissal).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Do you think timeouts can solve the problem with stalled PRs if Project
</I>&gt;&gt;<i> contributors do not attempt to game the system? Can you think of a
</I>&gt;&gt;<i> better solution?
</I>

&gt;<i> I do not think this will solve stalled PRs.
</I>
Why do you think timeouts will not solve stalled PRs? What do you think
will happen if we agree to enable timeouts (other than better
communication you have mentioned)?

Can you think of a solution that would work?


&gt;<i> It may lead to better communication when reviewers are forced to post
</I>&gt;<i> regularly about why no progress. But do we really prefer PRs littered
</I>&gt;<i> with a long history of that? or a clean history with the 'stalled' state
</I>&gt;<i> easily found?
</I>
Sounds like a false dichotomy. I &quot;prefer&quot; that each blocked PR has a
clear, legitimate reason for remaining blocked and a clear way towards a
block removal (where such a removal is possible). IMO, a blocking
reviewer has a duty to engage with the PR author to get the PR into that
state. I hope we agree on this.

We could discuss whether hypothetical blocking reasons such as &quot;I need
three months to review your changes&quot; or &quot;I need four months to find a
vulnerability in your changes&quot; are legitimate (if clearly stated). I
think the correct outcome of such a discussion would be that they are
legitimate when there are no other core developers willing to carefully
approve the PR with a full understanding of the blocking reviewer
concerns (if any).


&gt;<i>  As the reviewer most likely to be hit by these notices, I much prefer
</I>&gt;<i> the PR to end with the thing needing action  than to have to read its
</I>&gt;<i> old history to figure out whether I can work on it immediately
</I>
Yes, I agree that increased notification noise is a possible negative
side effect of the timeout solution, but if we cannot find a better
solution, then I think that price is acceptable. Authors essentially
have to generate similar notifications already!


&gt;<i> We could use a tag set by the party suspecting a stall and unset by the
</I>&gt;<i> reviewer when they next pay attention to the PR.
</I>
Sure, that procedure can work.

And just to avoid misunderstanding, please note that &quot;paying attention&quot;
is not what resets the timeout. A stalled PR remains stalled until the
reviewer provides sufficient information for the PR author to make progress.


&gt;<i> Also, IMO it will just change to a different type of stall, add the risk
</I>&gt;<i> of Joe Blogs above, and revert Squid to the bygone situation where core
</I>&gt;<i> developers were regularly commiting code that broke trunk/master because
</I>&gt;<i> they personally thought it less broken than it was. We have this
</I>&gt;<i> negative as a veto to protect against those nasties - and for the most
</I>&gt;<i> part it is working.
</I>
The usefulness of a veto itself is undisputed. The &quot;old way&quot; did not
work well because committing without a second review was the norm. With
the timeout proposal, it is an _exceptional_ (and recognized as
unfortunate) situation with several safeguards preventing abuse.


&gt;<i> As I see the situation, the root cause is:
</I>&gt;<i> 
</I>&gt;<i> With multiple Factory personnel working paid (full time?) hours on Squid
</I>&gt;<i> code there are a lot of large and complicated Factory PRs to review and
</I>&gt;<i> only one non-Factory reviewer. When a non-Factory reviewer has an issue
</I>&gt;<i> with any one PR it is quickly responded to (usually not fixed,
</I>&gt;<i> apparently due to their commercial situation and sunken-costs?) and
</I>&gt;<i> bumped back into waiting-for-reviewer status.
</I>
There is a lot of FUD here!

I will try to clarify what the &quot;usually not fixed&quot; part means:

* If the author knows what the reviewer wants and agrees that there is a
legitimate/in-scope/etc. problem, then the author fixes that problem, of
course.

* Otherwise, the author should ask for clarification or retraction. This
is a natural open source development process rather than a nefarious
scheme driven by &quot;commercial situation and sunken-costs&quot; (whatever that
means!).

Does that match your understanding of that &quot;usually not fixed&quot; statement?


&gt;<i> As I see the situation, the root cause is:
</I>&gt;<i> 
</I>&gt;<i> With multiple Factory personnel working paid (full time?) hours on Squid
</I>&gt;<i> code there are a lot of large and complicated Factory PRs to review and
</I>&gt;<i> only one non-Factory reviewer. When a non-Factory reviewer has an issue
</I>&gt;<i> with any one PR it is quickly responded to (usually not fixed,
</I>&gt;<i> apparently due to their commercial situation and sunken-costs?) and
</I>&gt;<i> bumped back into waiting-for-reviewer status.
</I>&gt;<i> 
</I>&gt;<i> Non-Factory patches come along relatively rarely and quickly handled by
</I>&gt;<i> the paid (almost-full time?) Factory reviewer with requests that require
</I>&gt;<i> a lot of author work.
</I>&gt;<i> 
</I>&gt;<i> So IMO these two reviewer vs author stalls are not distinct, but
</I>&gt;<i> directly linked to the originator of the PR.
</I>

I am doing my best to ignore the FUD parts to focus on understanding
what you see as the &quot;root cause&quot;. I am having a hard time distilling the
above text into a root cause description. Is it that I request so many
modifications in your PRs that you do not have sufficient time left to
finish PR reviews?


&gt;<i> [ In the spirit of being open, Alex is that Factory reviewer and I that
</I>&gt;<i> Non-Factory one. We both have quite a lot of overhead work like this
</I>&gt;<i> discussion to spread our Squid time over, so maybe hours:minutes instead
</I>&gt;<i> of days:hours depicted - I think the relative bias in time is the
</I>&gt;<i> important factor there rather than absolute units. ]
</I>
I do not know what you mean by &quot;days:hours depicted&quot;. If you mean that
absolute/calendar delays are not important, then I disagree: For my team
and for the folks waiting for the features to be merged, the absolute
wait time is very important (as well as overheads), especially when that
absolute time is measured not in days or weeks, but months and,
arguably, years.

Alex.
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009531.html">[squid-dev] Timeouts for abandoned negative reviews
</A></li>
	<LI>Next message: <A HREF="009535.html">[squid-dev] Want to integrate squid github to Jenkins CI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9533">[ date ]</a>
              <a href="thread.html#9533">[ thread ]</a>
              <a href="subject.html#9533">[ subject ]</a>
              <a href="author.html#9533">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
