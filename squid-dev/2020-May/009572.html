<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] squid master build with alternate openssl fails
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20squid%20master%20build%20with%20alternate%20openssl%20fails&In-Reply-To=%3C86f25476-ae6b-c14a-ce89-c6e92f473ffc%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="009577.html">
   <LINK REL="Next"  HREF="009573.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] squid master build with alternate openssl fails</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20squid%20master%20build%20with%20alternate%20openssl%20fails&In-Reply-To=%3C86f25476-ae6b-c14a-ce89-c6e92f473ffc%40measurement-factory.com%3E"
       TITLE="[squid-dev] squid master build with alternate openssl fails">rousskov at measurement-factory.com
       </A><BR>
    <I>Fri May  8 14:58:24 UTC 2020</I>
    <P><UL>
        <LI>Previous message: <A HREF="009577.html">[squid-dev] squid master build with alternate openssl fails
</A></li>
        <LI>Next message: <A HREF="009573.html">[squid-dev] squid master build with alternate openssl fails
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9572">[ date ]</a>
              <a href="thread.html#9572">[ thread ]</a>
              <a href="subject.html#9572">[ subject ]</a>
              <a href="author.html#9572">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 5/8/20 10:12 AM, Christos Tsantilas wrote:

&gt;<i> Squid master 699ade2d fails to build with an alternate OpenSsl, when the
</I>&gt;<i> &quot;--with-openssl=/path/to/openssl&quot; is used.
</I>
Francesco, builds with custom OpenSSL paths are not that uncommon,
especially among SslBump admins. Would you be able to test that kind of
configuration in one of the Jenkins tests? It can be even combined with
other custom-path tests. Or is this too custom/special to warrant an
automated test in your opinion?


&gt;<i> I think that the issue added with the commit 245314010.
</I>
I speculate that the bug is related to the disappearance of the
LIBOPENSSL_PATH assignment in that commit. We still use that variable,
but we no longer set it.


Amos, would you be able to fix this?

Thank you,

Alex.



&gt;<i> Example build output:
</I>&gt;<i> g++ -DHAVE_CONFIG_H
</I>&gt;<i> -DDEFAULT_CONFIG_FILE=\&quot;/usr/local/squid3-cvs/etc/squid.conf\&quot;
</I>&gt;<i> -DDEFAULT_SQUID_DATA_DIR=\&quot;/usr/local/squid3-cvs/share\&quot;
</I>&gt;<i> -DDEFAULT_SQUID_CONFIG_DIR=\&quot;/usr/local/squid3-cvs/etc\&quot;   -I..
</I>&gt;<i> -I../include -I../lib -I../src -I../include    -I../src
</I>&gt;<i> -I/usr/include/libxml2 -Wall -Wpointer-arith -Wwrite-strings -Wcomments
</I>&gt;<i> -Wshadow -Woverloaded-virtual -Werror -pipe -D_REENTRANT
</I>&gt;<i> -I/usr/include/libxml2 -m64    -I/usr/include/p11-kit-1  -g -O2
</I>&gt;<i> -march=native -MT CacheDigest.o -MD -MP -MF $depbase.Tpo -c -o
</I>&gt;<i> CacheDigest.o CacheDigest.cc &amp;&amp;\
</I>&gt;<i> mv -f $depbase.Tpo $depbase.Po
</I>&gt;<i> In file included from cache_cf.cc:3427:0:
</I>&gt;<i> cf_parser.cci: In function ‘int parse_line(char*)’:
</I>&gt;<i> cf_parser.cci:1466:20: error: ‘Ssl’ has not been declared
</I>&gt;<i>          parse_eol(&amp;Ssl::TheConfig.ssl_crtd);
</I>&gt;<i> ...
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> My understanding is that squid enables ssl-crtd build (--with-ssl-crtd
</I>&gt;<i> is given) but fails to detect OpenSsl correctly.
</I></PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009577.html">[squid-dev] squid master build with alternate openssl fails
</A></li>
	<LI>Next message: <A HREF="009573.html">[squid-dev] squid master build with alternate openssl fails
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9572">[ date ]</a>
              <a href="thread.html#9572">[ thread ]</a>
              <a href="subject.html#9572">[ subject ]</a>
              <a href="author.html#9572">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
