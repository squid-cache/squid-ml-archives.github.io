<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] Coding Style updates
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Coding%20Style%20updates&In-Reply-To=%3C476a77be-4b6d-ed6b-ebb6-6b71d70d60a7%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="009693.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] Coding Style updates</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Coding%20Style%20updates&In-Reply-To=%3C476a77be-4b6d-ed6b-ebb6-6b71d70d60a7%40treenet.co.nz%3E"
       TITLE="[squid-dev] Coding Style updates">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Aug 12 04:42:25 UTC 2021</I>
    <P><UL>
        
        <LI>Next message (by thread): <A HREF="009693.html">[squid-dev] Coding Style updates
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9692">[ date ]</a>
              <a href="thread.html#9692">[ thread ]</a>
              <a href="subject.html#9692">[ subject ]</a>
              <a href="author.html#9692">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

  Now that we have astyle 3.1 for style enforcement we can take 
advantage of it to perform a few code style change that older versions 
could not.

Before I do any work testing they work I'd like to review the relevant 
details of our style guidelines and see if we actually want to keep that 
requirement.


1) return type on separate line from function definition.

Current style requirement:

   template&lt;...&gt;
   void
   foo(...)
   {
     ...
   }

AFAIK, this based on GNU project style preferences from the far past 
when Squid had a tight relationship with GNU. Today we have a conflict 
between Factory code coming in with the alternative same-line style 
and/or various developers being confused by the mix of code they are 
touching.

IMO; it is easier to work with the one-line style when command-line 
editing, and irrelevant when using more advanced tools.

As such I propose converting Squid to the same-line style:

   template&lt;...&gt;
   void foo(...)
   {
     ...
   }


Opinions?

Any reasons I missed for keeping this?



2) braces on one-liner conditional blocks

Current code style is a bit confused. We have it as a style to use, with 
exceptions for some old macros etc where the lack of braces causes 
compile issues or bugs.

Personally I prefer the non-braced style. But it seems far safer to 
automate the always-brace style and not have those special exceptions.

Opinions?





Amos
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message (by thread): <A HREF="009693.html">[squid-dev] Coding Style updates
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9692">[ date ]</a>
              <a href="thread.html#9692">[ thread ]</a>
              <a href="subject.html#9692">[ subject ]</a>
              <a href="author.html#9692">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
