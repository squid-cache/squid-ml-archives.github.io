<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] RFC: Categorize level-0/1 messages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20RFC%3A%20Categorize%20level-0/1%20messages&In-Reply-To=%3C2df2236d-959f-4672-68a4-3807d4e2cfd1%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009746.html">
   <LINK REL="Next"  HREF="009733.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] RFC: Categorize level-0/1 messages</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20RFC%3A%20Categorize%20level-0/1%20messages&In-Reply-To=%3C2df2236d-959f-4672-68a4-3807d4e2cfd1%40treenet.co.nz%3E"
       TITLE="[squid-dev] RFC: Categorize level-0/1 messages">squid3 at treenet.co.nz
       </A><BR>
    <I>Sun Dec  5 13:06:46 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009746.html">[squid-dev] What os/cpu platforms do we want to target as a project?
</A></li>
        <LI>Next message (by thread): <A HREF="009733.html">[squid-dev] RFC: Categorize level-0/1 messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9732">[ date ]</a>
              <a href="thread.html#9732">[ thread ]</a>
              <a href="subject.html#9732">[ subject ]</a>
              <a href="author.html#9732">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 21/10/21 16:16, Alex Rousskov wrote:
&gt;<i> On 10/20/21 3:14 PM, Amos Jeffries wrote:
</I>&gt;&gt;<i> On 21/10/21 4:22 am, Alex Rousskov wrote:
</I>&gt;&gt;&gt;<i> To facilitate automatic monitoring of Squid cache.logs, I suggest to
</I>&gt;&gt;&gt;<i> adjust Squid code to divide all level-0/1 messages into two major
</I>&gt;&gt;&gt;<i> categories -- &quot;problem messages&quot; and &quot;status messages&quot;[0]:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> We already have a published categorization design which (when/if used)
</I>&gt;&gt;<i> solves the problem(s) you are describing. Unfortunately that design has
</I>&gt;&gt;<i> not been followed by all authors and conversion of old code to it has
</I>&gt;&gt;<i> not been done.
</I>&gt;<i> 
</I>&gt;&gt;<i> Please focus your project on making Squid actually use the system of
</I>&gt;&gt;<i> debugs line labels. The labels are documented at:
</I>&gt;&gt;<i>  &#160; <A HREF="https://wiki.squid-cache.org/SquidFaq/SquidLogs#Squid_Error_Messages">https://wiki.squid-cache.org/SquidFaq/SquidLogs#Squid_Error_Messages</A>
</I>&gt;<i> 
</I>&gt;<i> AFAICT, the partial classification in that wiki table is an opinion on
</I>&gt;<i> how things could be designed, and that opinion does not reflect Project
</I>&gt;<i> consensus.
</I>
The wiki was written from observation of how the message labels are/were 
being used in the code. As such it reflects the defacto consensus of 
everyone ever authoring code that used one of the labels.


NP: The &quot;core team&quot; or &quot;dev team&quot; are not &quot;The Project&quot;. There are a 
large number of developers contributing to each version of Squid whose 
only voice in any of the style/design decisions is the existing Squid code.


&gt;<i> FWIW, I cannot use that wiki table for labeling messages, but
</I>&gt;<i> I do not want to hijack this RFC thread for that table review.
</I>&gt;<i> 
</I>
You our text below contradicts the &quot;cannot&quot; statement by describing how 
the two definitions fit together and offer to use the wiki table labels 
for problem category.

I assume the below text is your definition of &quot;cannot&quot;? if not them 
please explain why not.


&gt;<i> Fortunately, there are many similarities between the wiki table and this
</I>&gt;<i> RFC that we can and should capitalize on instead:
</I>&gt;<i> 
</I>&gt;<i> * While the wiki table is silent about the majority of existing
</I>&gt;<i> cache.log messages, most of the messages it is silent about probably
</I>&gt;<i> belong to the &quot;status messages&quot; category proposed by this RFC.
</I>
Exactly so.

&gt;<i> This
</I>&gt;<i> assumption gives a usable match between the wiki table and the RFC for
</I>&gt;<i> about half of the existing level-0/1 cache.log messages. Great!
</I>&gt;<i> 
</I>&gt;<i> * The wiki table talks about FATAL, ERROR, and WARNING messages. These
</I>&gt;<i> labels match the RFC &quot;problem messages&quot; category. This match covers all
</I>&gt;<i> of the remaining cache.log messages except for 10 debugs() detailed
</I>&gt;<i> below. Thus, so far, there is a usable match on nearly all current
</I>&gt;<i> level-0/1 messages. Excellent!
</I>
Thus my request that you use the wiki definitions to categorize the 
unlabeled and fix any detected labeling mistakes.


&gt;<i> * The wiki table also uses three &quot;SECURITY ...&quot; labels. The RFC does not
</I>&gt;<i> recognize those labels as special. I find their definitions in the wiki
</I>&gt;<i> table unusable/impractical, and you naturally think otherwise, but the
</I>&gt;<i> situation is not as bad as it may seem at the first glance:
</I>&gt;<i> 
</I>&gt;<i> - &quot;SECURITY ERROR&quot; is used once to report a coding _bug_. That single
</I>&gt;<i> use case does not match the wiki table SECURITY ERROR description. We
</I>&gt;<i> should be able to rephrase that single message so that does it not
</I>&gt;<i> contradict the wiki table and the RFC.
</I>&gt;<i> 
</I>&gt;<i> - &quot;SECURITY ALERT&quot; is used 6 times. Most or all of those cases are a
</I>&gt;<i> poor match for the SECURITY ALERT description in the wiki table IMHO. I
</I>&gt;<i> hope we can find a way to rephrase those 6 cases to avoid conflicts.
</I>&gt;<i> 
</I>&gt;<i> - &quot;SECURITY NOTICE&quot; is used 3 times. Two of those use cases can be
</I>&gt;<i> simply removed by removing the long-deprecated and increasingly poorly
</I>&gt;<i> supported SslBump features. I do not see why we should keep the third
</I>&gt;<i> message/feature, but if it must be kept, we may be able to rephrase it.
</I>&gt;<i> 
</I>&gt;<i> If we cannot reach an agreement regarding these 10 special messages, we
</I>&gt;<i> can leave them as is for now, and come back to them when we find a way
</I>&gt;<i> to agree on how/whether to assign additional labels to some messages.
</I>&gt;<i> 
</I>
AFAICT, they were added as equivalent to ERROR/WARNING in CVE fixes, or 
to highlight a known security vulnerability being opened by admin settings.

I am okay with them remaining untouched by a PR submission cleaning 
level 0/1 messages. Though they are there to use if any author finds a 
message that suitably meets their definition.


&gt;<i> 
</I>&gt;<i> Thus, there are no significant conflicts between the RFC and the table!
</I>&gt;<i> We strongly disagree how labels should be defined,
</I>
Recall that the wiki is describing the observed pattern of label usage 
by all Squid contributors. That means any significant conflict is 
between your choice of definition and &quot;The Project&quot; as a whole. Minor 
conflicts may be just differences in my wording and yours on the 
observed pattern.


&gt;<i> but I do not think we
</I>&gt;<i> have to agree on those details to make progress here.
</I>
The options for any author are to comply with the existing 
consensus/pattern or to get agreement on changing the definitions.

Options like changing the labeling scheme are off the table because we 
already have significant amounts of community using those labels with 
third-party tools etc. i.e. the &quot;automatic monitoring&quot; cited as target 
use-case for this proposal are already using the wiki labels as their 
category types.


&gt;<i> We only need to
</I>&gt;<i> agree that (those 10 SECURITY messages aside) the RFC-driven message
</I>&gt;<i> categorization projects should adjust (the easily adjustable) messages
</I>&gt;<i> about Squid problems to use three standard labels: FATAL, ERROR, and
</I>&gt;<i> WARNING. Can we do just that and set aside the other disagreements for
</I>&gt;<i> another time?
</I>&gt;<i> 
</I>
Agreed.


&gt;<i> If there are serious disagreements whether a specific debugs() is an
</I>&gt;<i> ERROR or WARNING, we can leave those specific messages intact until we
</I>&gt;<i> find a way to reach consensus. I hope there will be very few such
</I>&gt;<i> messages if we use the three labels from the RFC and do our best to
</I>&gt;<i> avoid controversial changes.
</I>&gt;<i> 
</I>

You may have misunderstood the intention behind my request.

IMO you should not need a formal definition of &quot;status message&quot; and 
&quot;problem message&quot;.

  All it needs to do is go straight to determine whether the message 
meets one of the wiki labels and apply it or the debugs to level2+. 
&quot;status&quot; vs &quot;problem messages&quot; are an emergent property of the correctly 
used labels.


&gt;<i> 
</I>&gt;&gt;<i> What we do not have in that design is clarity on which labels are shown
</I>&gt;&gt;<i> at what level.
</I>&gt;<i> 
</I>&gt;<i> In hope to make progress, I strongly suggest to _ignore_ the difference
</I>&gt;<i> between level 0 and level 1 for now. We are just too far apart on that
</I>&gt;<i> topic to reach consensus AFAICT. The vast majority of messages that
</I>&gt;<i> RFC-driven projects should touch (and, if really needed, _all_ such
</I>&gt;<i> messages!) can be left at their current level, avoiding this problem.
</I>&gt;<i> 
</I>
Okay. IIRC there are a large number that will need to change verbosity, 
but fine to do that later.


Amos
</PRE>











<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009746.html">[squid-dev] What os/cpu platforms do we want to target as a project?
</A></li>
	<LI>Next message (by thread): <A HREF="009733.html">[squid-dev] RFC: Categorize level-0/1 messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9732">[ date ]</a>
              <a href="thread.html#9732">[ thread ]</a>
              <a href="subject.html#9732">[ subject ]</a>
              <a href="author.html#9732">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
