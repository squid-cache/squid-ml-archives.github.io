<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] effective acl for tcp_outgoing_address
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20effective%20acl%20for%20tcp_outgoing_address&In-Reply-To=%3C000101d6ea73%245ac11430%2410433c90%24%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="009636.html">
   <LINK REL="Next"  HREF="009644.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] effective acl for tcp_outgoing_address</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20effective%20acl%20for%20tcp_outgoing_address&In-Reply-To=%3C000101d6ea73%245ac11430%2410433c90%24%40gmail.com%3E"
       TITLE="[squid-dev] effective acl for tcp_outgoing_address">ngtech1ltd at gmail.com
       </A><BR>
    <I>Thu Jan 14 12:47:00 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009636.html">[squid-dev] effective acl for tcp_outgoing_address
</A></li>
        <LI>Next message (by thread): <A HREF="009644.html">[squid-dev] effective acl for tcp_outgoing_address
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9637">[ date ]</a>
              <a href="thread.html#9637">[ thread ]</a>
              <a href="subject.html#9637">[ subject ]</a>
              <a href="author.html#9637">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sorry there was a typo.
There are couple of places in the code that check ACLS.
IN -&gt; PROXY PARSERS -&gt; OUT

Fast acls are these for places which we cannot or won't delay the request.
The place which can take slow acls are before the OUT(simplified example abvoe).
You can apply slow ACLS at http_access layer and the notes are staying withing the request/session.
But on the OUT stage squid will not &quot;stop&quot; or &quot;hold&quot; the request until the helper will respond.

The IP address choice is in the &quot;kernel&quot; level so we must have the resolution for this &quot;fast&quot; and not &quot;s-l-o-w&quot;.

I hope this answers you. If not .. ask again.

Eliezer

----
Eliezer Croitoru
Tech Support
Mobile: +972-5-28704261
Email: <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">ngtech1ltd at gmail.com</A>
Zoom: Coming soon


-----Original Message-----
From: Hideyuki Kawai &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">h.kawai at ntt.com</A>&gt; 
Sent: Thursday, January 14, 2021 2:22 PM
To: Eliezer Croitoru &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">ngtech1ltd at gmail.com</A>&gt;
Cc: <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">squid-dev at lists.squid-cache.org</A>
Subject: RE: [squid-dev] effective acl for tcp_outgoing_address

Dear Eliezer

Thank you for your reply.
Could you let me ask you about your comment.

&quot;slow acl&quot; can use in tcp_outgoing_address?

Best regards,
Kawai

-------------------------------------
<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">h.kawai at ntt.com</A>
-------------------------------------
-----Original Message-----
From: Eliezer Croitoru &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">ngtech1ltd at gmail.com</A>&gt; 
Sent: Thursday, January 14, 2021 8:36 PM
To: Hideyuki Kawai（川井秀行） &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">h.kawai at ntt.com</A>&gt;
Cc: <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">squid-dev at lists.squid-cache.org</A>
Subject: RE: [squid-dev] effective acl for tcp_outgoing_address

It's more of an users question.

Just to clear it out, the tcp_outgoing_address is a fast acl just when the decision is &quot;required&quot;
You can &quot;pre-cook&quot; the value of a specific note when the connection is only at the first http_access level.
An example for a setup which does probably what you want based on htaccess passwords you can here:
<A HREF="https://github.com/elico/vagrant-squid-outgoing-addresses">https://github.com/elico/vagrant-squid-outgoing-addresses</A>

It's a vagrant lab which demonstrate this.

Let me know if it helps you or you need clarification.

Eliezer
----
Eliezer Croitoru
Tech Support
Mobile: +972-5-28704261
Email: <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">ngtech1ltd at gmail.com</A>
Zoom: Coming soon


-----Original Message-----
From: squid-dev &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">squid-dev-bounces at lists.squid-cache.org</A>&gt; On Behalf Of Hideyuki Kawai
Sent: Thursday, January 14, 2021 2:48 AM
To: <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">squid-dev at lists.squid-cache.org</A>
Subject: [squid-dev] effective acl for tcp_outgoing_address

Hi, this is Kawai.

Please let me send inquiry as followings.

### Requirement ###
1. Kerberos auth with Active Directory	: auth_param ..... 	&lt;- Success
2. &quot;Security group&quot; check which is gotten from AD : external_acl_type ...(using ext_kerberos_ldap_group_acl)   &lt;- success
3. Different outgoing IP based on &quot;Security group&quot; : tcp_outgoing_address + external_acl  &lt;- fail

### Inquiry ###
1. &quot;external_acl&quot; can not use on tcp_outgoing_address. Because the external_acl type is slow.
   My understanding is correct?
2. If yes, how to solve my requirement?

Please let me inform your comment and knowledge.
Thanks in advance.

-------------------------------------
<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">h.kawai at ntt.com</A>
-------------------------------------
_______________________________________________
squid-dev mailing list
<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">squid-dev at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">http://lists.squid-cache.org/listinfo/squid-dev</A>


</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009636.html">[squid-dev] effective acl for tcp_outgoing_address
</A></li>
	<LI>Next message (by thread): <A HREF="009644.html">[squid-dev] effective acl for tcp_outgoing_address
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9637">[ date ]</a>
              <a href="thread.html#9637">[ thread ]</a>
              <a href="subject.html#9637">[ subject ]</a>
              <a href="author.html#9637">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
