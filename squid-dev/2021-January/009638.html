<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] effective acl for tcp_outgoing_address
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20effective%20acl%20for%20tcp_outgoing_address&In-Reply-To=%3Cc8db3a75-f15f-ae3c-0006-63cb6b2076a9%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="009644.html">
   <LINK REL="Next"  HREF="009639.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] effective acl for tcp_outgoing_address</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20effective%20acl%20for%20tcp_outgoing_address&In-Reply-To=%3Cc8db3a75-f15f-ae3c-0006-63cb6b2076a9%40measurement-factory.com%3E"
       TITLE="[squid-dev] effective acl for tcp_outgoing_address">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Jan 14 14:25:10 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009644.html">[squid-dev] effective acl for tcp_outgoing_address
</A></li>
        <LI>Next message (by thread): <A HREF="009639.html">[squid-dev] effective acl for tcp_outgoing_address
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9638">[ date ]</a>
              <a href="thread.html#9638">[ thread ]</a>
              <a href="subject.html#9638">[ subject ]</a>
              <a href="author.html#9638">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 1/13/21 7:47 PM, Hideyuki Kawai wrote:

&gt;<i> 1. &quot;external_acl&quot; can not use on tcp_outgoing_address. Because the
</I>&gt;<i> external_acl type is slow. My understanding is correct?
</I>

Yes, your understanding is correct. There are cases where a slow ACL
&quot;usually works&quot; with a tcp_outgoing_address directive due to ACL caching
side effects, and there are many examples on the web abusing those side
effects, but you should not rely on such accidents when using modern
Squid versions.


&gt;<i> 2. If yes, how to solve my requirement?
</I>
Use an annotation approach instead. The &quot;note&quot; ACL is fast, and the
external ACL helper can annotate transactions (and connections) in
modern Squids. The only difficulty with this approach is to find a
directive that satisfies all of the conditions below:

1. supports slow ACLs
2. evaluated after the info needed by the external ACL helper is known
3. evaluated before tcp_outgoing_address

In many cases, http_access is such a directive, but YMMV.


HTH,

Alex.
P.S. FWIW, I can agree with one Eliezer statement on this thread: This
thread belongs to squid-users, not squid-dev.
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009644.html">[squid-dev] effective acl for tcp_outgoing_address
</A></li>
	<LI>Next message (by thread): <A HREF="009639.html">[squid-dev] effective acl for tcp_outgoing_address
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9638">[ date ]</a>
              <a href="thread.html#9638">[ thread ]</a>
              <a href="subject.html#9638">[ subject ]</a>
              <a href="author.html#9638">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
