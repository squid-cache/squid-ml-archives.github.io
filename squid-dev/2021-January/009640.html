<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] effective acl for tcp_outgoing_address
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20effective%20acl%20for%20tcp_outgoing_address&In-Reply-To=%3COSBPR01MB2776A074F7FBA166AE84C6C6E8A70%40OSBPR01MB2776.jpnprd01.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="009639.html">
   <LINK REL="Next"  HREF="009641.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] effective acl for tcp_outgoing_address</H1>
    <B>Hideyuki Kawai</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20effective%20acl%20for%20tcp_outgoing_address&In-Reply-To=%3COSBPR01MB2776A074F7FBA166AE84C6C6E8A70%40OSBPR01MB2776.jpnprd01.prod.outlook.com%3E"
       TITLE="[squid-dev] effective acl for tcp_outgoing_address">h.kawai at ntt.com
       </A><BR>
    <I>Fri Jan 15 00:54:18 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009639.html">[squid-dev] effective acl for tcp_outgoing_address
</A></li>
        <LI>Next message (by thread): <A HREF="009641.html">[squid-dev] effective acl for tcp_outgoing_address
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9640">[ date ]</a>
              <a href="thread.html#9640">[ thread ]</a>
              <a href="subject.html#9640">[ subject ]</a>
              <a href="author.html#9640">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear Amos, Alex, Eliezer,

Thank you for your support.
Sorry for my low experience and knowledge…

Your comment is helpful for me, and could you let me know more about &quot;note&quot; ACL.
I can not understand it, even checking the website.

Q1. Could you let me know about “note” ACL?
Q2. If possible, sample config which is using(combined) “ext_kerberos_ldap_group_acl” and “tcp_outgoing_address” and “note ACL”.

Again, thanks for your support.

Best regards,
Kawai

From: squid-dev &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">squid-dev-bounces at lists.squid-cache.org</A>&gt; On Behalf Of ?Amos Jeffries?
Sent: Friday, January 15, 2021 8:16 AM
To: Alex Rousskov &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">rousskov at measurement-factory.com</A>&gt;; <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">squid-dev at lists.squid-cache.org</A>
Subject: Re: [squid-dev] effective acl for tcp_outgoing_address

FYI, this use case is why recent versions of kerberos auth helper being used in the OP config produces group= annotations for authenticated users. The note ACL mentioned can check for group SSID any of the fast access checks.

Amos


-------- Original message --------
From: Alex Rousskov &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">rousskov at measurement-factory.com</A>&lt;mailto:<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">rousskov at measurement-factory.com</A>&gt;&gt;
Date: Fri, 15 Jan 2021, 03:25
To: <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">squid-dev at lists.squid-cache.org</A>&lt;mailto:<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">squid-dev at lists.squid-cache.org</A>&gt;
Subject: Re: [squid-dev] effective acl for tcp_outgoing_address
On 1/13/21 7:47 PM, Hideyuki Kawai wrote:

&gt;<i> 1. &quot;external_acl&quot; can not use on tcp_outgoing_address. Because the
</I>&gt;<i> external_acl type is slow. My understanding is correct?
</I>

Yes, your understanding is correct. There are cases where a slow ACL
&quot;usually works&quot; with a tcp_outgoing_address directive due to ACL caching
side effects, and there are many examples on the web abusing those side
effects, but you should not rely on such accidents when using modern
Squid versions.


&gt;<i> 2. If yes, how to solve my requirement?
</I>
Use an annotation approach instead. The &quot;note&quot; ACL is fast, and the
external ACL helper can annotate transactions (and connections) in
modern Squids. The only difficulty with this approach is to find a
directive that satisfies all of the conditions below:

1. supports slow ACLs
2. evaluated after the info needed by the external ACL helper is known
3. evaluated before tcp_outgoing_address

In many cases, http_access is such a directive, but YMMV.


HTH,

Alex.
P.S. FWIW, I can agree with one Eliezer statement on this thread: This
thread belongs to squid-users, not squid-dev.
_______________________________________________
squid-dev mailing list
<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">squid-dev at lists.squid-cache.org</A>&lt;mailto:<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">squid-dev at lists.squid-cache.org</A>&gt;
<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">http://lists.squid-cache.org/listinfo/squid-dev</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-dev/attachments/20210115/661ddc10/attachment-0001.htm">http://lists.squid-cache.org/pipermail/squid-dev/attachments/20210115/661ddc10/attachment-0001.htm</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009639.html">[squid-dev] effective acl for tcp_outgoing_address
</A></li>
	<LI>Next message (by thread): <A HREF="009641.html">[squid-dev] effective acl for tcp_outgoing_address
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9640">[ date ]</a>
              <a href="thread.html#9640">[ thread ]</a>
              <a href="subject.html#9640">[ subject ]</a>
              <a href="author.html#9640">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
