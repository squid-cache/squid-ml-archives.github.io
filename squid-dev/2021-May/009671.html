<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] Any code pointers to get sending certificate chain from squid reverse proxy with gnutls?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Any%20code%20pointers%20to%20get%20sending%20certificate%20chain%0A%20from%20squid%20reverse%20proxy%20with%20gnutls%3F&In-Reply-To=%3CCABWAcDsQnp3LoGi6RkVt0xQL4LreBDhpt2pofg1uRzYa2L90bw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   
   <LINK REL="Next"  HREF="009672.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] Any code pointers to get sending certificate chain from squid reverse proxy with gnutls?</H1>
    <B>dsuh</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Any%20code%20pointers%20to%20get%20sending%20certificate%20chain%0A%20from%20squid%20reverse%20proxy%20with%20gnutls%3F&In-Reply-To=%3CCABWAcDsQnp3LoGi6RkVt0xQL4LreBDhpt2pofg1uRzYa2L90bw%40mail.gmail.com%3E"
       TITLE="[squid-dev] Any code pointers to get sending certificate chain from squid reverse proxy with gnutls?">dsuhpublic at gmail.com
       </A><BR>
    <I>Sat May  1 00:04:16 UTC 2021</I>
    <P><UL>
        
        <LI>Next message (by thread): <A HREF="009672.html">[squid-dev] Strategy about build farm nodes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9671">[ date ]</a>
              <a href="thread.html#9671">[ thread ]</a>
              <a href="subject.html#9671">[ subject ]</a>
              <a href="author.html#9671">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I found the fork that fixes this from the end of 2019 and it works for me.
Not sure when this will be merged into master, but this fork is usable for
me.

<A HREF="https://github.com/squid-cache/squid/pull/458">https://github.com/squid-cache/squid/pull/458</A>
<A HREF="https://github.com/yadij/squid/tree/v5-gnutls-chainload">https://github.com/yadij/squid/tree/v5-gnutls-chainload</A>

On Wed, Apr 28, 2021 at 11:09 PM dsuh &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">dsuhpublic at gmail.com</A>&gt; wrote:

&gt;<i> I have hit a wall as I want to listen on one https_port for 3 different
</I>&gt;<i> server key/cert chains.
</I>&gt;<i> Previous message about 2 years ago says this has not been implemented yet.
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/sending-certificate-chain-from-squid-reverse-proxy-td4687986.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/sending-certificate-chain-from-squid-reverse-proxy-td4687986.html</A>
</I>&gt;<i>
</I>&gt;<i> I am looking at what it would take to get cert chains working.
</I>&gt;<i> I think the credentials are set for gnutls TLS handshake
</I>&gt;<i> with gnutls_credentials_set() call in CreateSession() in Session.cc
</I>&gt;<i> So, I think that ctx is used for session data for gnutls and also for
</I>&gt;<i> context data for openssl?
</I>&gt;<i> I think I kind of got lost on how I can make sure a cert chain (instead of
</I>&gt;<i> just the server cert) is set in ctx.
</I>&gt;<i> Any direction on where the server cert chain should be set for gnutls TLS
</I>&gt;<i> handshake would be appreciated.
</I>&gt;<i>
</I>&gt;<i> David Suh
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-dev/attachments/20210430/8b459d01/attachment.htm">http://lists.squid-cache.org/pipermail/squid-dev/attachments/20210430/8b459d01/attachment.htm</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message (by thread): <A HREF="009672.html">[squid-dev] Strategy about build farm nodes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9671">[ date ]</a>
              <a href="thread.html#9671">[ thread ]</a>
              <a href="subject.html#9671">[ subject ]</a>
              <a href="author.html#9671">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
