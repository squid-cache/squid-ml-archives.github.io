<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] RFC: Categorize level-0/1 messages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20RFC%3A%20Categorize%20level-0/1%20messages&In-Reply-To=%3C9497b99d-8a2e-3941-0c99-1606270bd2bc%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009711.html">
   <LINK REL="Next"  HREF="009713.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] RFC: Categorize level-0/1 messages</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20RFC%3A%20Categorize%20level-0/1%20messages&In-Reply-To=%3C9497b99d-8a2e-3941-0c99-1606270bd2bc%40treenet.co.nz%3E"
       TITLE="[squid-dev] RFC: Categorize level-0/1 messages">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Oct 20 19:14:46 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009711.html">[squid-dev] RFC: Categorize level-0/1 messages
</A></li>
        <LI>Next message (by thread): <A HREF="009713.html">[squid-dev] RFC: Categorize level-0/1 messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9712">[ date ]</a>
              <a href="thread.html#9712">[ thread ]</a>
              <a href="subject.html#9712">[ subject ]</a>
              <a href="author.html#9712">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 21/10/21 4:22 am, Alex Rousskov wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i>      Nobody likes to be awaken at night by an urgent call from NOC about
</I>&gt;<i> some boring Squid cache.log message the NOC folks have not seen before
</I>&gt;<i> (or miss a critical message that was ignored by the monitoring system).
</I>&gt;<i> To facilitate automatic monitoring of Squid cache.logs, I suggest to
</I>&gt;<i> adjust Squid code to divide all level-0/1 messages into two major
</I>&gt;<i> categories -- &quot;problem messages&quot; and &quot;status messages&quot;[0]:
</I>&gt;<i> 
</I>
We already have a published categorization design which (when/if used) 
solves the problem(s) you are describing. Unfortunately that design has 
not been followed by all authors and conversion of old code to it has 
not been done.

Please focus your project on making Squid actually use the system of 
debugs line labels. The labels are documented at:
   &lt;<A HREF="https://wiki.squid-cache.org/SquidFaq/SquidLogs#Squid_Error_Messages">https://wiki.squid-cache.org/SquidFaq/SquidLogs#Squid_Error_Messages</A>&gt;


What we do not have in that design is clarity on which labels are shown 
at what level. IMO they should be:

  * DBG_CRITICAL(0) - admin *need* to know this even if they do not 
think they want to.
   - FATAL
   - SECURITY ALERT
   - ERROR which were mislabeled and should be FATAL

  * DBG_IMPORTANT(1) - some admin want to know these, not mandatory though.
   - ERROR
   - SECURITY ERROR
   - SECURITY WARNING

  * level-2 - status, troubleshooting etc.
   - WARNING admin cannot do anything about
   - SECURITY NOTICE (these are for troubleshooting advice)

  * level-3+ - other



&gt;<i> There are also &quot;squid -k parse&quot; messages
</I>&gt;<i> that are easy to find automatically if somebody wants to classify them
</I>&gt;<i> properly.
</I>
Those are level 1-2 messages that become mandatory to display on 
startup/reconfigure.



I have one worry about you taking this on right now. PR 574 has not been 
resolved and merged yet, but many of the debugs() messages you are going 
to be touching in here should be converted to thrown exceptions - which 
ones and what exception type is used has some dependency on how that PR 
turns out.


Amos
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009711.html">[squid-dev] RFC: Categorize level-0/1 messages
</A></li>
	<LI>Next message (by thread): <A HREF="009713.html">[squid-dev] RFC: Categorize level-0/1 messages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9712">[ date ]</a>
              <a href="thread.html#9712">[ thread ]</a>
              <a href="subject.html#9712">[ subject ]</a>
              <a href="author.html#9712">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
