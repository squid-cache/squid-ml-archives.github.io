<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] request for change handling hostStrictVerify
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20request%20for%20change%20handling%20hostStrictVerify&In-Reply-To=%3C53-61787780-1-3efbb8c0%40263885290%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009713.html">
   <LINK REL="Next"  HREF="009717.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] request for change handling hostStrictVerify</H1>
    <B>kk at sudo-i.net</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20request%20for%20change%20handling%20hostStrictVerify&In-Reply-To=%3C53-61787780-1-3efbb8c0%40263885290%3E"
       TITLE="[squid-dev] request for change handling hostStrictVerify">kk at sudo-i.net
       </A><BR>
    <I>Tue Oct 26 21:46:55 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009713.html">[squid-dev] RFC: Categorize level-0/1 messages
</A></li>
        <LI>Next message (by thread): <A HREF="009717.html">[squid-dev] request for change handling hostStrictVerify
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9714">[ date ]</a>
              <a href="thread.html#9714">[ thread ]</a>
              <a href="subject.html#9714">[ subject ]</a>
              <a href="author.html#9714">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi Guys!
Sorry I was unsure if this was the correct point of contact in regards to hostStrictVerify.

I think I am not the only one having issues with hostStrictVerify in scenarios where you just intercept traffic (tls) and squid checks the SNI if the IP address from the Client is the same as squid resolve it. The major issue in that approach is that many services today change their DNS records at a very high frequency, thus it's almost impossible to make sure that client and squid do have the same A record cached.

My Proposal to resolve this issue would be the following:
- Squid enforces the Client to use SNI! (currently, this is not done and can be considered as a security issue, because you can bypass any hostname rules)
- Squid lookup IP for SNI (DNS resolution).
- Squid forces the client to go to the resolved IP (and thus ignoring the IP which was provided in the L3 info from the client)

Any thoughts?


many thanks &amp; have a nice day,

Kevin

--&#160;
Kevin Klopfenstein
sudo-i.net
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-dev/attachments/20211026/5623fc6b/attachment.htm">http://lists.squid-cache.org/pipermail/squid-dev/attachments/20211026/5623fc6b/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 5102 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-dev/attachments/20211026/5623fc6b/attachment.bin">http://lists.squid-cache.org/pipermail/squid-dev/attachments/20211026/5623fc6b/attachment.bin</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009713.html">[squid-dev] RFC: Categorize level-0/1 messages
</A></li>
	<LI>Next message (by thread): <A HREF="009717.html">[squid-dev] request for change handling hostStrictVerify
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9714">[ date ]</a>
              <a href="thread.html#9714">[ thread ]</a>
              <a href="subject.html#9714">[ subject ]</a>
              <a href="author.html#9714">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
