<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] Alternate origin server selection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Alternate%20origin%20server%20selection&In-Reply-To=%3Cceb46bad-5a08-7db9-fc4e-8d3fd7bf7053%40opendium.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009716.html">
   <LINK REL="Next"  HREF="009719.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] Alternate origin server selection</H1>
    <B>Steve Hill</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Alternate%20origin%20server%20selection&In-Reply-To=%3Cceb46bad-5a08-7db9-fc4e-8d3fd7bf7053%40opendium.com%3E"
       TITLE="[squid-dev] Alternate origin server selection">steve at opendium.com
       </A><BR>
    <I>Thu Oct 28 16:39:44 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009716.html">[squid-dev] Alternate origin server selection
</A></li>
        <LI>Next message (by thread): <A HREF="009719.html">[squid-dev] Alternate origin server selection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9718">[ date ]</a>
              <a href="thread.html#9718">[ thread ]</a>
              <a href="subject.html#9718">[ subject ]</a>
              <a href="author.html#9718">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 28/10/2021 16:41, Alex Rousskov wrote:

&gt;<i> IIRC, Google has recommended (to my surprise) something like that as
</I>&gt;<i> well, for environments where DNS modifications are inappropriate and
</I>&gt;<i> bumping is possible. I cannot find that recommendation now, unfortunately.
</I>
Google are very hostile to bumping.  But then there's this that 
explicitly recommends bumping...
 
<A HREF="https://support.google.com/a/answer/1668854?hl=en#zippy=%2Cstep-choose-a-web-proxy-server">https://support.google.com/a/answer/1668854?hl=en#zippy=%2Cstep-choose-a-web-proxy-server</A>

Never the less, if you don't want to bump (which obviously has 
significant privacy implications and involves installing certificates on 
every device), the virtual IP method is your only option.

Similarly, you can't enforce YouTube Restricted Mode in the YouTube 
Android app without using the virtual IP method.

&gt;<i> AFAICT, the primary obstacle here is that Squid pins the connection
</I>&gt;<i> while obtaining the origin server certificate.
</I>
Well, I can't see why Squid needs the origin certificate - it should be 
able to make a decision off the SNI before connecting to the origin server.

I didn't seem to be able to make the decision prior to the connection 
being pinned though.  I'm not sure why - I will go back and investigate 
further.

Thank you.

-- 
- Steve Hill
    Technical Director | Cyfarwyddwr Technegol
    Opendium    Online Safety &amp; Web Filtering     <A HREF="http://www.opendium.com">http://www.opendium.com</A>
                Diogelwch Ar-Lein a Hidlo Gwefan

    Enquiries | Ymholiadau:   <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">sales at opendium.com</A>     +44-1792-824568
    Support   | Cefnogi:      <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">support at opendium.com</A>   +44-1792-825748

------------------------------------------------------------------------
Opendium Limited is a company registered in England and Wales.
Mae Opendium Limited yn gwmni sydd wedi'i gofrestru yn Lloegr a Chymru.

Company No. | Rhif Cwmni:   5465437
Highfield House, 1 Brue Close, Bruton, Somerset, BA10 0HY, England.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: steve.vcf
Type: text/x-vcard
Size: 259 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-dev/attachments/20211028/b817c25d/attachment.vcf">http://lists.squid-cache.org/pipermail/squid-dev/attachments/20211028/b817c25d/attachment.vcf</A>&gt;
</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009716.html">[squid-dev] Alternate origin server selection
</A></li>
	<LI>Next message (by thread): <A HREF="009719.html">[squid-dev] Alternate origin server selection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9718">[ date ]</a>
              <a href="thread.html#9718">[ thread ]</a>
              <a href="subject.html#9718">[ subject ]</a>
              <a href="author.html#9718">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
