From ngtech1ltd at gmail.com  Wed Apr 20 22:34:14 2022
From: ngtech1ltd at gmail.com (Eliezer Croitoru)
Date: Thu, 21 Apr 2022 01:34:14 +0300
Subject: [squid-dev] Squid-Cache statistics reporting project
Message-ID: <000001d85506$c460c2b0$4d224810$@gmail.com>

Hey All,

 

In the past I wrote about a project that will include Squid statistics
reporting.

The main goal is to gather from the project users using a script a set of
cache-mgr pages in specific intervals.

The simplest way to do so is to run a script that will use either a token
and will upload the files to an api/webdav/sftp or via email and a whitelist
of emails.

I would like to RFC this specific idea.

I can offer to write a cache-mgr to yaml/json converter script that will
create a singe json/yaml file that will contain all the details of the
instance.

 

First,

What do you all think?

 

This option will significantly help the project to grasp a little bit about
the usage of squid around the world and to get a glimpse into the unknown.

The basic constrain is a user UUID and an instance UUID.

The basic way for it to work is to run a cron job every 1 or 12 hours.

 

Eliezer

 

*	Please comment.

 

----

Eliezer Croitoru

NgTech, Tech Support

Mobile: +972-5-28704261

Email:  <mailto:ngtech1ltd at gmail.com> ngtech1ltd at gmail.com

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20220421/e25d2417/attachment.htm>

From rousskov at measurement-factory.com  Thu Apr 21 02:02:43 2022
From: rousskov at measurement-factory.com (Alex Rousskov)
Date: Wed, 20 Apr 2022 22:02:43 -0400
Subject: [squid-dev] Squid-Cache statistics reporting project
In-Reply-To: <000001d85506$c460c2b0$4d224810$@gmail.com>
References: <000001d85506$c460c2b0$4d224810$@gmail.com>
Message-ID: <624cf32e-1052-a919-6cf8-763b12a94b18@measurement-factory.com>

On 4/20/22 18:34, Eliezer Croitoru wrote:

> In the past I wrote about a project that will include Squid statistics 
> reporting.
> 
> The main goal is to gather from the project users using a script a set 
> of cache-mgr pages in specific intervals.
> 
> The simplest way to do so is to run a script that will use either a 
> token and will upload the files to an api/webdav/sftp or via email and a 
> whitelist of emails.
> 
> I would like to RFC this specific idea.

Just to avoid misunderstanding: If "this idea" refers to offering your 
script to Squid users that want to participate in your project, then you 
do not need a squid-dev blessing for doing that because that idea does 
not require any Squid modifications.

If you are proposing Squid modifications, then please detail those 
modifications. I hope it does not come to Squid duplicating crontab and 
sendmail functionality :-).


> I can offer to write a cache-mgr to yaml/json converter script that will 
> create a singe json/yaml file that will contain all the details of the 
> instance.

As a personal project, that converter sounds good to me! FWIW, I have 
heard of 3rd party tools[1] that parse Squid cache manager output, but I 
do not know how suitable they are for what you want to achieve. The best 
output format would depend on how you plan to post-process data, but 
once you get something that follows strict grammar, it should be fairly 
easy to convert to other formats as needed. I would just keep the 
converter script output as simple and strict as possible to facilitate 
further conversions and input in various post-processing tools.

[1] https://github.com/boynux/squid-exporter

As an official Squid project, I think it would be much better to finish 
converting cache manager code to produce YAML output natively than to 
develop and maintain an official converter script (while still working 
on that native YAML conversion).


> This option will significantly help the project to grasp a little bit 
> about the usage of squid around the world and to get a glimpse into the 
> unknown.

Personally, I am worried that glimpses based on a few 
volunteer-submitted samples are more likely to mislead than to correctly 
guide Squid development, but that speculation cannot be proven.


Cheers,

Alex.

From ngtech1ltd at gmail.com  Thu Apr 21 06:59:10 2022
From: ngtech1ltd at gmail.com (Eliezer Croitoru)
Date: Thu, 21 Apr 2022 09:59:10 +0300
Subject: [squid-dev] Squid-Cache statistics reporting project
In-Reply-To: <624cf32e-1052-a919-6cf8-763b12a94b18@measurement-factory.com>
References: <000001d85506$c460c2b0$4d224810$@gmail.com>
 <624cf32e-1052-a919-6cf8-763b12a94b18@measurement-factory.com>
Message-ID: <018701d8554d$4e160ba0$ea4222e0$@gmail.com>

Hey Alex,

Thanks for the kinds words and recommendations.
Since I already have some of the code ready and most of the clients do not
have a version with YAML cache mgr output available I would say
that this is the best choice.
I offer this as a Squid-Cache statistics project and not a personal one.

Any directions on this, @Amos @Kinkie?

Thanks,
Eliezer 

----
Eliezer Croitoru
NgTech, Tech Support
Mobile: +972-5-28704261
Email: ngtech1ltd at gmail.com

-----Original Message-----
From: squid-dev <squid-dev-bounces at lists.squid-cache.org> On Behalf Of Alex
Rousskov
Sent: Thursday, April 21, 2022 05:03
To: squid-dev at lists.squid-cache.org
Subject: Re: [squid-dev] Squid-Cache statistics reporting project

On 4/20/22 18:34, Eliezer Croitoru wrote:

> In the past I wrote about a project that will include Squid statistics 
> reporting.
> 
> The main goal is to gather from the project users using a script a set 
> of cache-mgr pages in specific intervals.
> 
> The simplest way to do so is to run a script that will use either a 
> token and will upload the files to an api/webdav/sftp or via email and a 
> whitelist of emails.
> 
> I would like to RFC this specific idea.

Just to avoid misunderstanding: If "this idea" refers to offering your 
script to Squid users that want to participate in your project, then you 
do not need a squid-dev blessing for doing that because that idea does 
not require any Squid modifications.

If you are proposing Squid modifications, then please detail those 
modifications. I hope it does not come to Squid duplicating crontab and 
sendmail functionality :-).


> I can offer to write a cache-mgr to yaml/json converter script that will 
> create a singe json/yaml file that will contain all the details of the 
> instance.

As a personal project, that converter sounds good to me! FWIW, I have 
heard of 3rd party tools[1] that parse Squid cache manager output, but I 
do not know how suitable they are for what you want to achieve. The best 
output format would depend on how you plan to post-process data, but 
once you get something that follows strict grammar, it should be fairly 
easy to convert to other formats as needed. I would just keep the 
converter script output as simple and strict as possible to facilitate 
further conversions and input in various post-processing tools.

[1] https://github.com/boynux/squid-exporter

As an official Squid project, I think it would be much better to finish 
converting cache manager code to produce YAML output natively than to 
develop and maintain an official converter script (while still working 
on that native YAML conversion).


> This option will significantly help the project to grasp a little bit 
> about the usage of squid around the world and to get a glimpse into the 
> unknown.

Personally, I am worried that glimpses based on a few 
volunteer-submitted samples are more likely to mislead than to correctly 
guide Squid development, but that speculation cannot be proven.


Cheers,

Alex.
_______________________________________________
squid-dev mailing list
squid-dev at lists.squid-cache.org
http://lists.squid-cache.org/listinfo/squid-dev


From gkinkie at gmail.com  Sat Apr 23 14:38:30 2022
From: gkinkie at gmail.com (Francesco Chemolli)
Date: Sat, 23 Apr 2022 16:38:30 +0200
Subject: [squid-dev] Can't build on Ubuntu Jammy
Message-ID: <CA+Y8hcMq0iExx12gOCQ6Bxqhv05EsSvv9dMSUeF6itYr7=Rjsg@mail.gmail.com>

Hi all,
  I did a trial build run on Jammy (
https://build.squid-cache.org/job/anybranch-anyarch-matrix/COMPILER=gcc,OS=ubuntu-jammy,label=amd64-linux/5/console);
it fails with

../../../../src/security/forward.h: In function 'void
Security::DH_free_cpp(DH*)':
../../../../src/security/LockingPointer.h:34:21: error: 'void
DH_free(DH*)' is deprecated: Since OpenSSL 3.0
[-Werror=deprecated-declarations]
   34 |             function(a); \



-- 
    Francesco
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20220423/b4a53be0/attachment.htm>

From rousskov at measurement-factory.com  Sat Apr 23 22:20:08 2022
From: rousskov at measurement-factory.com (Alex Rousskov)
Date: Sat, 23 Apr 2022 18:20:08 -0400
Subject: [squid-dev] Can't build on Ubuntu Jammy
In-Reply-To: <CA+Y8hcMq0iExx12gOCQ6Bxqhv05EsSvv9dMSUeF6itYr7=Rjsg@mail.gmail.com>
References: <CA+Y8hcMq0iExx12gOCQ6Bxqhv05EsSvv9dMSUeF6itYr7=Rjsg@mail.gmail.com>
Message-ID: <4a0ddd14-7a95-134b-51c4-899cf698c4c0@measurement-factory.com>

On 4/23/22 10:38, Francesco Chemolli wrote:
> Hi all,
>  ? I did a trial build run on Jammy 
> (https://build.squid-cache.org/job/anybranch-anyarch-matrix/COMPILER=gcc,OS=ubuntu-jammy,label=amd64-linux/5/console 
> <https://build.squid-cache.org/job/anybranch-anyarch-matrix/COMPILER=gcc,OS=ubuntu-jammy,label=amd64-linux/5/console>); 
> it fails with
> 
> ../../../../src/security/forward.h: In function 'void Security::DH_free_cpp(DH*)':
> ../../../../src/security/LockingPointer.h:34:21: error: 'void DH_free(DH*)' is deprecated: Since OpenSSL 3.0 [-Werror=deprecated-declarations]
>     34 |             function(a); \
> 

Squid does not support OpenSSL v3 yet:
https://github.com/squid-cache/squid/pull/694

Alex.


