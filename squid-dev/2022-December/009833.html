<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] RFC: Switch to C++17
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20RFC%3A%20Switch%20to%20C%2B%2B17&In-Reply-To=%3CCA%2BY8hcOcGqk9thOA5kuj5BpVaTYZqPddTaaN2a-yyvOzeqPTSA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009832.html">
   <LINK REL="Next"  HREF="009834.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] RFC: Switch to C++17</H1>
    <B>Francesco Chemolli</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20RFC%3A%20Switch%20to%20C%2B%2B17&In-Reply-To=%3CCA%2BY8hcOcGqk9thOA5kuj5BpVaTYZqPddTaaN2a-yyvOzeqPTSA%40mail.gmail.com%3E"
       TITLE="[squid-dev] RFC: Switch to C++17">gkinkie at gmail.com
       </A><BR>
    <I>Sun Dec  4 16:21:47 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009832.html">[squid-dev] RFC: Switch to C++17
</A></li>
        <LI>Next message (by thread): <A HREF="009834.html">[squid-dev] RFC: Switch to C++17
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9833">[ date ]</a>
              <a href="thread.html#9833">[ thread ]</a>
              <a href="subject.html#9833">[ subject ]</a>
              <a href="author.html#9833">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I support the switch

On Sun, 4 Dec 2022 at 16:18, Alex Rousskov &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">rousskov at measurement-factory.com</A>&gt;
wrote:

&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i>      I propose that we switch master/v6 from C++11 to C++17: Modern
</I>&gt;<i> environments support C++17 well. We are wasting significant amounts of
</I>&gt;<i> time on emulating such basic C++17 features as std::optional. We are
</I>&gt;<i> writing worse code than we can because we lack access to such basic
</I>&gt;<i> C++14 and C++17 features as
</I>&gt;<i>
</I>&gt;<i> * function return type deduction (auto)
</I>&gt;<i> * generic lambdas (auto arguments)
</I>&gt;<i> * relaxed constexpr restrictions
</I>&gt;<i> * std::make_unique
</I>&gt;<i> * std::integer_sequence
</I>&gt;<i> * std::quoted
</I>&gt;<i> * Nested namespace definitions
</I>&gt;<i> * [[fallthrough]], [[maybe_unused]], and [[nodiscard]]
</I>&gt;<i> * fold expressions
</I>&gt;<i> * auto [a, b] = getTwoReturnValues();
</I>&gt;<i> * inline variables
</I>&gt;<i> * std::any
</I>&gt;<i> * std::variant
</I>&gt;<i> * std::byte
</I>&gt;<i>
</I>&gt;<i> If we do not switch now, then we would have to wait about a year for the
</I>&gt;<i> next such opportunity because we should not introduce such a big
</I>&gt;<i> difference between master and the upcoming unstable v6 branch.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> C++17 is supported by popular modern compilers and stable distros. Squid
</I>&gt;<i> master branch should target those IMO. Even old environments can install
</I>&gt;<i> the necessary modern compilers (e.g., RHEL5 users can get them via Red
</I>&gt;<i> Hat Developer Toolset).
</I>&gt;<i>
</I>&gt;<i> * GCC v5 supports most C++17 features.
</I>&gt;<i> * GCC v8 supports all relevant C++17 features.
</I>&gt;<i> * Clang v5 supports nearly all C++17 features.
</I>&gt;<i> * Clang v8 supports all relevant C++17 features.
</I>&gt;<i>
</I>&gt;<i> * Ubuntu 20.04 LTS ships with GCC v9 and clang v10.
</I>&gt;<i>
</I>&gt;<i> * <A HREF="https://gcc.gnu.org/projects/cxx-status.html#cxx17">https://gcc.gnu.org/projects/cxx-status.html#cxx17</A>
</I>&gt;<i> *
</I>&gt;<i> <A HREF="https://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.2017">https://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.2017</A>
</I>&gt;<i> * <A HREF="https://clang.llvm.org/cxx_status.html#cxx17">https://clang.llvm.org/cxx_status.html#cxx17</A>
</I>&gt;<i> * <A HREF="https://en.cppreference.com/w/cpp/compiler_support/17">https://en.cppreference.com/w/cpp/compiler_support/17</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Switching to just C++14 would be better than nothing, but it will not
</I>&gt;<i> give us several C++17 features that we already waste serious time on
</I>&gt;<i> emulating/avoiding (e.g., std::optional). We should not switch to C++20
</I>&gt;<i> yet because modern stable compilers still have some C++20 support holes.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I can volunteer the corresponding PR.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Any objections to switching master/v6 to C++17?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thank you,
</I>&gt;<i>
</I>&gt;<i> Alex.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-dev mailing list
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">squid-dev at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">http://lists.squid-cache.org/listinfo/squid-dev</A>
</I>&gt;<i>
</I>-- 
@mobile
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-dev/attachments/20221204/1b707376/attachment.htm">http://lists.squid-cache.org/pipermail/squid-dev/attachments/20221204/1b707376/attachment.htm</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009832.html">[squid-dev] RFC: Switch to C++17
</A></li>
	<LI>Next message (by thread): <A HREF="009834.html">[squid-dev] RFC: Switch to C++17
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9833">[ date ]</a>
              <a href="thread.html#9833">[ thread ]</a>
              <a href="subject.html#9833">[ subject ]</a>
              <a href="author.html#9833">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
