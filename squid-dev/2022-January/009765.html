<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] RFC: protocols in Squid
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20RFC%3A%20protocols%20in%20Squid&In-Reply-To=%3C01eadc9a-9468-0c76-e94f-977d3ab18b62%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009764.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] RFC: protocols in Squid</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20RFC%3A%20protocols%20in%20Squid&In-Reply-To=%3C01eadc9a-9468-0c76-e94f-977d3ab18b62%40measurement-factory.com%3E"
       TITLE="[squid-dev] RFC: protocols in Squid">rousskov at measurement-factory.com
       </A><BR>
    <I>Sun Jan 30 16:52:23 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009764.html">[squid-dev] RFC: protocols in Squid
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9765">[ date ]</a>
              <a href="thread.html#9765">[ thread ]</a>
              <a href="subject.html#9765">[ subject ]</a>
              <a href="author.html#9765">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 1/30/22 6:56 AM, Amos Jeffries wrote:
&gt;<i> Attached is first draft of a map for the transactions possible by
</I>&gt;<i> protocols supported (and &quot;should be&quot;) by Squid.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> In this diagram transactions are split into three types:
</I>&gt;<i> 
</I>&gt;<i> &#160;1) switching - Protocol A ending initiates Protocol B.
</I>&gt;<i> 
</I>&gt;<i> &#160;2) nested - Protocol B carries Protocol C in its message payload.
</I>&gt;<i> 
</I>&gt;<i> &#160;3) fetch - Protocol B initiates Protocol D to fetch some data used by
</I>&gt;<i> Protocol B.
</I>&gt;<i> 
</I>&gt;<i> Note: to simplify the number of arrows surrounding &quot;HTTP&quot; I have split
</I>&gt;<i> out the CONNECT tunnel as a separate thing.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Am posting this as RFC to see of anyone has additions of transactions I
</I>&gt;<i> missed. Or suggestions on how better to document it.
</I>
Who is the target audience for this work? What are the primary goals of
this documentation effort? It is difficult to suggest improvements
without understanding who we are talking to and what we want them to
learn or do with that information...

FWIW, I personally do not find the chosen illustration approach useful
for documenting the relationship between various transactions or
protocols in Squid:

* At a high level, if the target audience are folks who do not know much
about Squid but are familiar with many network protocols, then the
picture can be morphed into a useful introductory illustration of the
protocols supported by Squid. However, most of the effort on
switch/nest/fetch documentation would be lost or misplaced in the
process -- there are much simpler/better ways to illustrate which
protocols are supported where, of course.

* At a high level, if the target audience are folks that want to do
serious Squid development, then the picture effectively obscures or
hides such critical architectural concepts as transaction layering and
grouping/cooperating. Illustrating those concepts needs a very different
approach IMO.

* At a low level, correctly interpreting or even tracing some of the
depicted individual relationships is already quite difficult for a human
like me, and when all the [should be] supported relationships are
included, the interesting parts may become an intractable spaghetti of
colored lines. I suspect it would be easier and a lot more useful to
just say (in text form!) what transport protocols are used by which
to-Squid and from-Squid higher-level transactions.


&gt;<i> Next step is to write up which object(s) or function implements each of
</I>&gt;<i> these in Squid.
</I>
Developing a high-level documentation of primary transaction-related
class relationships may be very useful for establishing common
terminology and resolving refactoring conflicts. Such a document would
be based on about ~10 classes and rely heavily on the embedded class
documentation (instead of repeating or substituting it). I can draft
such a document if you think it may be useful.

At the level of &quot;objects or functions&quot;, it would take a lot of time to
write and review such detailed function-level documentation. Maintaining
it would be costly as well, especially given the fact that a lot of that
code should be seriously refactored! This is your call, but I think your
personal energy and talents are better spent elsewhere, and the Project
as a whole should not undertake such a costly initiative with murky
outcomes.


Cheers,

Alex.
P.S. FWIW, I do not know what the various
circles/diamonds/hexagons/ovals mean on this particular diagram. Many
different standards and common notations are recycling those basic
shapes, of course.
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009764.html">[squid-dev] RFC: protocols in Squid
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9765">[ date ]</a>
              <a href="thread.html#9765">[ thread ]</a>
              <a href="subject.html#9765">[ subject ]</a>
              <a href="author.html#9765">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
