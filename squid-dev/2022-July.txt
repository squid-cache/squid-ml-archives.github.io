From amajer at suse.de  Fri Jul 15 08:46:23 2022
From: amajer at suse.de (Adam Majer)
Date: Fri, 15 Jul 2022 10:46:23 +0200
Subject: [squid-dev] bugzilla issue
Message-ID: <fce1d2d7-51b0-b648-117e-bf0d12873d4d@suse.de>

When going to bugs.squid-cache.org, I get a message that MySQL DB is not 
accessible. And since there is no notification address on that page, 
forwarding here.

- Adam



Software error:

Can't connect to the database.
Error: Can't connect to MySQL server on 'db:3306' (111)
   Is your database installed and up and running?
   Do you have the correct username and password selected in localconfig?

For help, please send mail to the webmaster ([no address given]), giving 
this error message and the time and date of the error.

From gkinkie at gmail.com  Fri Jul 15 10:31:05 2022
From: gkinkie at gmail.com (Francesco Chemolli)
Date: Fri, 15 Jul 2022 11:31:05 +0100
Subject: [squid-dev] bugzilla issue
In-Reply-To: <fce1d2d7-51b0-b648-117e-bf0d12873d4d@suse.de>
References: <fce1d2d7-51b0-b648-117e-bf0d12873d4d@suse.de>
Message-ID: <CA+Y8hcOvidpcVLrUjW0wy_kCedgcPFCpPrZOJpidLQ07m_sjWQ@mail.gmail.com>

Hi Adam,
  thanks for letting me know.
It's now fixed.

On Fri, Jul 15, 2022 at 9:46 AM Adam Majer <amajer at suse.de> wrote:

> When going to bugs.squid-cache.org, I get a message that MySQL DB is not
> accessible. And since there is no notification address on that page,
> forwarding here.
>
> - Adam
>
>
>
> Software error:
>
> Can't connect to the database.
> Error: Can't connect to MySQL server on 'db:3306' (111)
>    Is your database installed and up and running?
>    Do you have the correct username and password selected in localconfig?
>
> For help, please send mail to the webmaster ([no address given]), giving
> this error message and the time and date of the error.
> _______________________________________________
> squid-dev mailing list
> squid-dev at lists.squid-cache.org
> http://lists.squid-cache.org/listinfo/squid-dev
>


-- 
    Francesco
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20220715/bd9466e5/attachment.htm>

From ngtech1ltd at gmail.com  Mon Jul 18 07:52:24 2022
From: ngtech1ltd at gmail.com (ngtech1ltd at gmail.com)
Date: Mon, 18 Jul 2022 10:52:24 +0300
Subject: [squid-dev] Errors while building 5.6 on Ubuntu 22.04
Message-ID: <001a01d89a7b$5221c770$f6655650$@gmail.com>

Hey Everybody,
 
I have just started my build tests on Ubuntu 22.04  and I got some errors, something with OpenSSL 3.0.
I have seen that there has been a patch for 5.5 in Debian at:
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1005650
 
 
but I have not see such a fix from the squid project.
Is there any usable patch I can try to apply to build and fix it?
 
The build errors:
### START
ibtool: compile:  g++ -DHAVE_CONFIG_H -DDEFAULT_CONFIG_FILE=\"/etc/squid/squid.conf\" -DDEFAULT_SQUID_DATA_DIR=\"/usr/share/squid\" -DDEFAULT_SQUID_CONFIG_DIR=\"/etc/squid\" -I/home/builder/squid-5.6 -I/home/builder/squid-5.6/include -I/home/builder/squid-5.6/lib -I/home/builder/squid-5.6/src -I../../include -isystem /usr/include/mit-krb5 -I/usr/include/libxml2 -Wall -Wpointer-arith -Wwrite-strings -Wcomments -Wshadow -Woverloaded-virtual -Werror -pipe -D_REENTRANT -I/usr/include/libxml2 -m64 -I/usr/include/p11-kit-1 -g -O2 -MT old_api.lo -MD -MP -MF .deps/old_api.Tpo -c /home/builder/squid-5.6/src/mem/old_api.cc  -fPIC -DPIC -o .libs/old_api.o
In file included from /home/builder/squid-5.6/src/security/Session.h:14,
                 from /home/builder/squid-5.6/src/security/forward.h:15,
                 from /home/builder/squid-5.6/src/SquidConfig.h:26,
                 from /home/builder/squid-5.6/src/mem/old_api.cc:24:
/home/builder/squid-5.6/src/security/forward.h: In function 'void Security::DH_free_cpp(DH*)':
/home/builder/squid-5.6/src/security/LockingPointer.h:34:21: error: 'void DH_free(DH*)' is deprecated: Since OpenSSL 3.0 [-Werror=deprecated-declarations]
   34 |             function(a); \
/home/builder/squid-5.6/src/security/forward.h:96:1: note: in expansion of macro 'CtoCpp1'
   96 | CtoCpp1(DH_free, DH *);
      | ^~~~~~~
In file included from /home/builder/squid-5.6/compat/openssl.h:35,
                 from /home/builder/squid-5.6/src/security/Context.h:15,
                 from /home/builder/squid-5.6/src/security/forward.h:14,
                 from /home/builder/squid-5.6/src/SquidConfig.h:26,
                 from /home/builder/squid-5.6/src/mem/old_api.cc:24:
/usr/include/openssl/dh.h:200:28: note: declared here
  200 | OSSL_DEPRECATEDIN_3_0 void DH_free(DH *dh);
      |                            ^~~~~~~
In file included from /home/builder/squid-5.6/src/SquidConfig.h:26,
                 from /home/builder/squid-5.6/src/mem/old_api.cc:24:
/home/builder/squid-5.6/src/security/forward.h: At global scope:
/home/builder/squid-5.6/src/security/forward.h:97:70: error: 'int DH_up_ref(DH*)' is deprecated: Since OpenSSL 3.0 [-Werror=deprecated-declarations]
   97 | typedef Security::LockingPointer<DH, DH_free_cpp, HardFun<int, DH *, DH_up_ref> > DhePointer;
      |                                                                      ^~~~~~~~~
In file included from /home/builder/squid-5.6/compat/openssl.h:35,
                 from /home/builder/squid-5.6/src/security/Context.h:15,
                 from /home/builder/squid-5.6/src/security/forward.h:14,
                 from /home/builder/squid-5.6/src/SquidConfig.h:26,
                 from /home/builder/squid-5.6/src/mem/old_api.cc:24:
/usr/include/openssl/dh.h:201:27: note: declared here
  201 | OSSL_DEPRECATEDIN_3_0 int DH_up_ref(DH *dh);
      |                           ^~~~~~~~~
In file included from /home/builder/squid-5.6/src/SquidConfig.h:26,
                 from /home/builder/squid-5.6/src/mem/old_api.cc:24:
/home/builder/squid-5.6/src/security/forward.h:97:79: error: 'int DH_up_ref(DH*)' is deprecated: Since OpenSSL 3.0 [-Werror=deprecated-declarations]
   97 | typedef Security::LockingPointer<DH, DH_free_cpp, HardFun<int, DH *, DH_up_ref> > DhePointer;
      |                                                                               ^
In file included from /home/builder/squid-5.6/compat/openssl.h:35,
                 from /home/builder/squid-5.6/src/security/Context.h:15,
                 from /home/builder/squid-5.6/src/security/forward.h:14,
                 from /home/builder/squid-5.6/src/SquidConfig.h:26,
                 from /home/builder/squid-5.6/src/mem/old_api.cc:24:
/usr/include/openssl/dh.h:201:27: note: declared here
  201 | OSSL_DEPRECATEDIN_3_0 int DH_up_ref(DH *dh);
      |                           ^~~~~~~~~
In file included from /home/builder/squid-5.6/src/ssl/support.h:21,
                 from /home/builder/squid-5.6/src/SquidConfig.h:29,
                 from /home/builder/squid-5.6/src/mem/old_api.cc:24:
/home/builder/squid-5.6/src/ssl/gadgets.h:61:51: error: 'void RSA_free(RSA*)' is deprecated: Since OpenSSL 3.0 [-Werror=deprecated-declarations]
   61 | typedef std::unique_ptr<RSA, HardFun<void, RSA*, &RSA_free>> RSA_Pointer;
      |                                                   ^~~~~~~~
In file included from /usr/include/openssl/x509.h:36,
                 from /usr/include/openssl/ssl.h:31,
                 from /home/builder/squid-5.6/compat/openssl.h:44,
                 from /home/builder/squid-5.6/src/security/Context.h:15,
                 from /home/builder/squid-5.6/src/security/forward.h:14,
                 from /home/builder/squid-5.6/src/SquidConfig.h:26,
                 from /home/builder/squid-5.6/src/mem/old_api.cc:24:
/usr/include/openssl/rsa.h:293:28: note: declared here
  293 | OSSL_DEPRECATEDIN_3_0 void RSA_free(RSA *r);
      |                            ^~~~~~~~
In file included from /home/builder/squid-5.6/src/ssl/support.h:21,
                 from /home/builder/squid-5.6/src/SquidConfig.h:29,
                 from /home/builder/squid-5.6/src/mem/old_api.cc:24:
/home/builder/squid-5.6/src/ssl/gadgets.h:61:51: error: 'void RSA_free(RSA*)' is deprecated: Since OpenSSL 3.0 [-Werror=deprecated-declarations]
   61 | typedef std::unique_ptr<RSA, HardFun<void, RSA*, &RSA_free>> RSA_Pointer;
      |                                                   ^~~~~~~~
In file included from /usr/include/openssl/x509.h:36,
                 from /usr/include/openssl/ssl.h:31,
                 from /home/builder/squid-5.6/compat/openssl.h:44,
                 from /home/builder/squid-5.6/src/security/Context.h:15,
                 from /home/builder/squid-5.6/src/security/forward.h:14,
                 from /home/builder/squid-5.6/src/SquidConfig.h:26,
                 from /home/builder/squid-5.6/src/mem/old_api.cc:24:
/usr/include/openssl/rsa.h:293:28: note: declared here
  293 | OSSL_DEPRECATEDIN_3_0 void RSA_free(RSA *r);
      |                            ^~~~~~~~
cc1plus: all warnings being treated as errors
make[3]: *** [Makefile:842: old_api.lo] Error 1
make[3]: Leaving directory '/home/builder/confdir/src/mem'
make[2]: *** [Makefile:6868: all-recursive] Error 1
make[2]: Leaving directory '/home/builder/confdir/src'
make[1]: *** [Makefile:5857: all] Error 2
make[1]: Leaving directory '/home/builder/confdir/src'
make: *** [Makefile:594: all-recursive] Error 1
make: *** [Makefile:171: build] Error 2
### END
 
 
Thanks,
Eliezer
 
----
Eliezer Croitoru
NgTech, Tech Support
Mobile: +972-5-28704261
Email:  <mailto:ngtech1ltd at gmail.com> ngtech1ltd at gmail.com
Web:  <https://ngtech.co.il/> https://ngtech.co.il/
My-Tube:  <https://tube.ngtech.co.il/> https://tube.ngtech.co.il/
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20220718/091ebb7f/attachment-0001.htm>

From gkinkie at gmail.com  Mon Jul 18 08:03:00 2022
From: gkinkie at gmail.com (Francesco Chemolli)
Date: Mon, 18 Jul 2022 10:03:00 +0200
Subject: [squid-dev] Errors while building 5.6 on Ubuntu 22.04
In-Reply-To: <001a01d89a7b$5221c770$f6655650$@gmail.com>
References: <001a01d89a7b$5221c770$f6655650$@gmail.com>
Message-ID: <CA+Y8hcOJ8uR9h4X6VxZ4iE=SY+R8Y6+B_DpvW9ENaKaK6mFzJw@mail.gmail.com>

OpenSSL 3.0 support has landed in trunk yesterday. Hopefully there will be
a point release with it any day now

On Mon, Jul 18, 2022 at 9:52 AM <ngtech1ltd at gmail.com> wrote:

> Hey Everybody,
>
>
>
> I have just started my build tests on Ubuntu 22.04  and I got some
> errors, something with OpenSSL 3.0.
>
> I have seen that there has been a patch for 5.5 in Debian at:
>
> https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1005650
>
>
>
>
>
> but I have not see such a fix from the squid project.
>
> Is there any usable patch I can try to apply to build and fix it?
>
>
>
> The build errors:
>
> ### START
>
> ibtool: compile:  g++ -DHAVE_CONFIG_H -DDEFAULT_CONFIG_FILE=\"/etc/squid/
> squid.conf\" -DDEFAULT_SQUID_DATA_DIR=\"/usr/share/squid\"
> -DDEFAULT_SQUID_CONFIG_DIR=\"/etc/squid\" -I/home/builder/squid-5.6
> -I/home/builder/squid-5.6/include -I/home/builder/squid-5.6/lib
> -I/home/builder/squid-5.6/src -I../../include -isystem /usr/include/mit-krb5
> -I/usr/include/libxml2 -Wall -Wpointer-arith -Wwrite-strings -Wcomments -
> Wshadow -Woverloaded-virtual -Werror -pipe -D_REENTRANT -I/usr/include/libxml2
> -m64 -I/usr/include/p11-kit-1 -g -O2 -MT old_api.lo -MD -MP -MF .deps/
> old_api.Tpo -c /home/builder/squid-5.6/src/mem/old_api.cc  -fPIC -DPIC -o
> .libs/old_api.o
>
> In file included from /home/builder/squid-5.6/src/security/Session.h:14,
>
>                  from /home/builder/squid-5.6/src/security/forward.h:15,
>
>                  from /home/builder/squid-5.6/src/SquidConfig.h:26,
>
>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
>
> /home/builder/squid-5.6/src/security/forward.h: In function 'void
> Security::DH_free_cpp(DH*)':
>
> /home/builder/squid-5.6/src/security/LockingPointer.h:34:21: error: 'void
> DH_free(DH*)' is deprecated: Since OpenSSL 3.0 [-Werror
> =deprecated-declarations]
>
>    34 |             function(a); \
>
> /home/builder/squid-5.6/src/security/forward.h:96:1: note: in expansion
> of macro 'CtoCpp1'
>
>    96 | CtoCpp1(DH_free, DH *);
>
>       | ^~~~~~~
>
> In file included from /home/builder/squid-5.6/compat/openssl.h:35,
>
>                  from /home/builder/squid-5.6/src/security/Context.h:15,
>
>                  from /home/builder/squid-5.6/src/security/forward.h:14,
>
>                  from /home/builder/squid-5.6/src/SquidConfig.h:26,
>
>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
>
> /usr/include/openssl/dh.h:200:28: note: declared here
>
>   200 | OSSL_DEPRECATEDIN_3_0 void DH_free(DH *dh);
>
>       |                            ^~~~~~~
>
> In file included from /home/builder/squid-5.6/src/SquidConfig.h:26,
>
>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
>
> /home/builder/squid-5.6/src/security/forward.h: At global scope:
>
> /home/builder/squid-5.6/src/security/forward.h:97:70: error: 'int
> DH_up_ref(DH*)' is deprecated: Since OpenSSL 3.0 [-Werror
> =deprecated-declarations]
>
>    97 | typedef Security::LockingPointer<DH, DH_free_cpp, HardFun<int, DH
> *, DH_up_ref> > DhePointer;
>
>       |
> ^~~~~~~~~
>
> In file included from /home/builder/squid-5.6/compat/openssl.h:35,
>
>                  from /home/builder/squid-5.6/src/security/Context.h:15,
>
>                  from /home/builder/squid-5.6/src/security/forward.h:14,
>
>                  from /home/builder/squid-5.6/src/SquidConfig.h:26,
>
>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
>
> /usr/include/openssl/dh.h:201:27: note: declared here
>
>   201 | OSSL_DEPRECATEDIN_3_0 int DH_up_ref(DH *dh);
>
>       |                           ^~~~~~~~~
>
> In file included from /home/builder/squid-5.6/src/SquidConfig.h:26,
>
>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
>
> /home/builder/squid-5.6/src/security/forward.h:97:79: error: 'int
> DH_up_ref(DH*)' is deprecated: Since OpenSSL 3.0 [-Werror
> =deprecated-declarations]
>
>    97 | typedef Security::LockingPointer<DH, DH_free_cpp, HardFun<int, DH
> *, DH_up_ref> > DhePointer;
>
>       |
> ^
>
> In file included from /home/builder/squid-5.6/compat/openssl.h:35,
>
>                  from /home/builder/squid-5.6/src/security/Context.h:15,
>
>                  from /home/builder/squid-5.6/src/security/forward.h:14,
>
>                  from /home/builder/squid-5.6/src/SquidConfig.h:26,
>
>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
>
> /usr/include/openssl/dh.h:201:27: note: declared here
>
>   201 | OSSL_DEPRECATEDIN_3_0 int DH_up_ref(DH *dh);
>
>       |                           ^~~~~~~~~
>
> In file included from /home/builder/squid-5.6/src/ssl/support.h:21,
>
>                  from /home/builder/squid-5.6/src/SquidConfig.h:29,
>
>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
>
> /home/builder/squid-5.6/src/ssl/gadgets.h:61:51: error: 'void RSA_free(RSA*)'
> is deprecated: Since OpenSSL 3.0 [-Werror=deprecated-declarations]
>
>    61 | typedef std::unique_ptr<RSA, HardFun<void, RSA*, &RSA_free>>
> RSA_Pointer;
>
>       |                                                   ^~~~~~~~
>
> In file included from /usr/include/openssl/x509.h:36,
>
>                  from /usr/include/openssl/ssl.h:31,
>
>                  from /home/builder/squid-5.6/compat/openssl.h:44,
>
>                  from /home/builder/squid-5.6/src/security/Context.h:15,
>
>                  from /home/builder/squid-5.6/src/security/forward.h:14,
>
>                  from /home/builder/squid-5.6/src/SquidConfig.h:26,
>
>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
>
> /usr/include/openssl/rsa.h:293:28: note: declared here
>
>   293 | OSSL_DEPRECATEDIN_3_0 void RSA_free(RSA *r);
>
>       |                            ^~~~~~~~
>
> In file included from /home/builder/squid-5.6/src/ssl/support.h:21,
>
>                  from /home/builder/squid-5.6/src/SquidConfig.h:29,
>
>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
>
> /home/builder/squid-5.6/src/ssl/gadgets.h:61:51: error: 'void RSA_free(RSA*)'
> is deprecated: Since OpenSSL 3.0 [-Werror=deprecated-declarations]
>
>    61 | typedef std::unique_ptr<RSA, HardFun<void, RSA*, &RSA_free>>
> RSA_Pointer;
>
>       |                                                   ^~~~~~~~
>
> In file included from /usr/include/openssl/x509.h:36,
>
>                  from /usr/include/openssl/ssl.h:31,
>
>                  from /home/builder/squid-5.6/compat/openssl.h:44,
>
>                  from /home/builder/squid-5.6/src/security/Context.h:15,
>
>                  from /home/builder/squid-5.6/src/security/forward.h:14,
>
>                  from /home/builder/squid-5.6/src/SquidConfig.h:26,
>
>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
>
> /usr/include/openssl/rsa.h:293:28: note: declared here
>
>   293 | OSSL_DEPRECATEDIN_3_0 void RSA_free(RSA *r);
>
>       |                            ^~~~~~~~
>
> cc1plus: all warnings being treated as errors
>
> make[3]: *** [Makefile:842: old_api.lo] Error 1
>
> make[3]: Leaving directory '/home/builder/confdir/src/mem'
>
> make[2]: *** [Makefile:6868: all-recursive] Error 1
>
> make[2]: Leaving directory '/home/builder/confdir/src'
>
> make[1]: *** [Makefile:5857: all] Error 2
>
> make[1]: Leaving directory '/home/builder/confdir/src'
>
> make: *** [Makefile:594: all-recursive] Error 1
>
> make: *** [Makefile:171: build] Error 2
>
> ### END
>
>
>
>
>
> Thanks,
>
> Eliezer
>
>
>
> ----
>
> Eliezer Croitoru
>
> NgTech, Tech Support
>
> Mobile: +972-5-28704261
>
> Email: ngtech1ltd at gmail.com
>
> Web: https://ngtech.co.il/
>
> My-Tube: https://tube.ngtech.co.il/
>
>
> _______________________________________________
> squid-dev mailing list
> squid-dev at lists.squid-cache.org
> http://lists.squid-cache.org/listinfo/squid-dev
>


-- 
    Francesco
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20220718/df654d8e/attachment-0001.htm>

From ngtech1ltd at gmail.com  Mon Jul 18 08:03:43 2022
From: ngtech1ltd at gmail.com (NgTech LTD)
Date: Mon, 18 Jul 2022 11:03:43 +0300
Subject: [squid-dev] Errors while building 5.6 on Ubuntu 22.04
In-Reply-To: <CA+Y8hcOJ8uR9h4X6VxZ4iE=SY+R8Y6+B_DpvW9ENaKaK6mFzJw@mail.gmail.com>
References: <001a01d89a7b$5221c770$f6655650$@gmail.com>
 <CA+Y8hcOJ8uR9h4X6VxZ4iE=SY+R8Y6+B_DpvW9ENaKaK6mFzJw@mail.gmail.com>
Message-ID: <CABA8h=RkJE-D3JbS4oY0mrh1igZk1=x=UGafU6-s=W8T7saKVg@mail.gmail.com>

Awesome, thanks!

?????? ??? ??, 18 ????? 2022, 11:03, ??? Francesco Chemolli ?<
gkinkie at gmail.com>:

> OpenSSL 3.0 support has landed in trunk yesterday. Hopefully there will be
> a point release with it any day now
>
> On Mon, Jul 18, 2022 at 9:52 AM <ngtech1ltd at gmail.com> wrote:
>
>> Hey Everybody,
>>
>>
>>
>> I have just started my build tests on Ubuntu 22.04  and I got some
>> errors, something with OpenSSL 3.0.
>>
>> I have seen that there has been a patch for 5.5 in Debian at:
>>
>> https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1005650
>>
>>
>>
>>
>>
>> but I have not see such a fix from the squid project.
>>
>> Is there any usable patch I can try to apply to build and fix it?
>>
>>
>>
>> The build errors:
>>
>> ### START
>>
>> ibtool: compile:  g++ -DHAVE_CONFIG_H -DDEFAULT_CONFIG_FILE=\"/etc/squid/
>> squid.conf\" -DDEFAULT_SQUID_DATA_DIR=\"/usr/share/squid\"
>> -DDEFAULT_SQUID_CONFIG_DIR=\"/etc/squid\" -I/home/builder/squid-5.6
>> -I/home/builder/squid-5.6/include -I/home/builder/squid-5.6/lib
>> -I/home/builder/squid-5.6/src -I../../include -isystem /usr/include/mit-krb5
>> -I/usr/include/libxml2 -Wall -Wpointer-arith -Wwrite-strings -Wcomments -
>> Wshadow -Woverloaded-virtual -Werror -pipe -D_REENTRANT -I/usr/include/libxml2
>> -m64 -I/usr/include/p11-kit-1 -g -O2 -MT old_api.lo -MD -MP -MF .deps/
>> old_api.Tpo -c /home/builder/squid-5.6/src/mem/old_api.cc  -fPIC -DPIC
>> -o .libs/old_api.o
>>
>> In file included from /home/builder/squid-5.6/src/security/Session.h:14,
>>
>>                  from /home/builder/squid-5.6/src/security/forward.h:15,
>>
>>                  from /home/builder/squid-5.6/src/SquidConfig.h:26,
>>
>>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
>>
>> /home/builder/squid-5.6/src/security/forward.h: In function 'void
>> Security::DH_free_cpp(DH*)':
>>
>> /home/builder/squid-5.6/src/security/LockingPointer.h:34:21: error:
>> 'void DH_free(DH*)' is deprecated: Since OpenSSL 3.0 [-Werror
>> =deprecated-declarations]
>>
>>    34 |             function(a); \
>>
>> /home/builder/squid-5.6/src/security/forward.h:96:1: note: in expansion
>> of macro 'CtoCpp1'
>>
>>    96 | CtoCpp1(DH_free, DH *);
>>
>>       | ^~~~~~~
>>
>> In file included from /home/builder/squid-5.6/compat/openssl.h:35,
>>
>>                  from /home/builder/squid-5.6/src/security/Context.h:15,
>>
>>                  from /home/builder/squid-5.6/src/security/forward.h:14,
>>
>>                  from /home/builder/squid-5.6/src/SquidConfig.h:26,
>>
>>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
>>
>> /usr/include/openssl/dh.h:200:28: note: declared here
>>
>>   200 | OSSL_DEPRECATEDIN_3_0 void DH_free(DH *dh);
>>
>>       |                            ^~~~~~~
>>
>> In file included from /home/builder/squid-5.6/src/SquidConfig.h:26,
>>
>>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
>>
>> /home/builder/squid-5.6/src/security/forward.h: At global scope:
>>
>> /home/builder/squid-5.6/src/security/forward.h:97:70: error: 'int
>> DH_up_ref(DH*)' is deprecated: Since OpenSSL 3.0 [-Werror
>> =deprecated-declarations]
>>
>>    97 | typedef Security::LockingPointer<DH, DH_free_cpp, HardFun<int,
>> DH *, DH_up_ref> > DhePointer;
>>
>>       |
>> ^~~~~~~~~
>>
>> In file included from /home/builder/squid-5.6/compat/openssl.h:35,
>>
>>                  from /home/builder/squid-5.6/src/security/Context.h:15,
>>
>>                  from /home/builder/squid-5.6/src/security/forward.h:14,
>>
>>                  from /home/builder/squid-5.6/src/SquidConfig.h:26,
>>
>>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
>>
>> /usr/include/openssl/dh.h:201:27: note: declared here
>>
>>   201 | OSSL_DEPRECATEDIN_3_0 int DH_up_ref(DH *dh);
>>
>>       |                           ^~~~~~~~~
>>
>> In file included from /home/builder/squid-5.6/src/SquidConfig.h:26,
>>
>>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
>>
>> /home/builder/squid-5.6/src/security/forward.h:97:79: error: 'int
>> DH_up_ref(DH*)' is deprecated: Since OpenSSL 3.0 [-Werror
>> =deprecated-declarations]
>>
>>    97 | typedef Security::LockingPointer<DH, DH_free_cpp, HardFun<int,
>> DH *, DH_up_ref> > DhePointer;
>>
>>       |
>> ^
>>
>> In file included from /home/builder/squid-5.6/compat/openssl.h:35,
>>
>>                  from /home/builder/squid-5.6/src/security/Context.h:15,
>>
>>                  from /home/builder/squid-5.6/src/security/forward.h:14,
>>
>>                  from /home/builder/squid-5.6/src/SquidConfig.h:26,
>>
>>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
>>
>> /usr/include/openssl/dh.h:201:27: note: declared here
>>
>>   201 | OSSL_DEPRECATEDIN_3_0 int DH_up_ref(DH *dh);
>>
>>       |                           ^~~~~~~~~
>>
>> In file included from /home/builder/squid-5.6/src/ssl/support.h:21,
>>
>>                  from /home/builder/squid-5.6/src/SquidConfig.h:29,
>>
>>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
>>
>> /home/builder/squid-5.6/src/ssl/gadgets.h:61:51: error: 'void RSA_free(RSA*)'
>> is deprecated: Since OpenSSL 3.0 [-Werror=deprecated-declarations]
>>
>>    61 | typedef std::unique_ptr<RSA, HardFun<void, RSA*, &RSA_free>>
>> RSA_Pointer;
>>
>>       |                                                   ^~~~~~~~
>>
>> In file included from /usr/include/openssl/x509.h:36,
>>
>>                  from /usr/include/openssl/ssl.h:31,
>>
>>                  from /home/builder/squid-5.6/compat/openssl.h:44,
>>
>>                  from /home/builder/squid-5.6/src/security/Context.h:15,
>>
>>                  from /home/builder/squid-5.6/src/security/forward.h:14,
>>
>>                  from /home/builder/squid-5.6/src/SquidConfig.h:26,
>>
>>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
>>
>> /usr/include/openssl/rsa.h:293:28: note: declared here
>>
>>   293 | OSSL_DEPRECATEDIN_3_0 void RSA_free(RSA *r);
>>
>>       |                            ^~~~~~~~
>>
>> In file included from /home/builder/squid-5.6/src/ssl/support.h:21,
>>
>>                  from /home/builder/squid-5.6/src/SquidConfig.h:29,
>>
>>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
>>
>> /home/builder/squid-5.6/src/ssl/gadgets.h:61:51: error: 'void RSA_free(RSA*)'
>> is deprecated: Since OpenSSL 3.0 [-Werror=deprecated-declarations]
>>
>>    61 | typedef std::unique_ptr<RSA, HardFun<void, RSA*, &RSA_free>>
>> RSA_Pointer;
>>
>>       |                                                   ^~~~~~~~
>>
>> In file included from /usr/include/openssl/x509.h:36,
>>
>>                  from /usr/include/openssl/ssl.h:31,
>>
>>                  from /home/builder/squid-5.6/compat/openssl.h:44,
>>
>>                  from /home/builder/squid-5.6/src/security/Context.h:15,
>>
>>                  from /home/builder/squid-5.6/src/security/forward.h:14,
>>
>>                  from /home/builder/squid-5.6/src/SquidConfig.h:26,
>>
>>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
>>
>> /usr/include/openssl/rsa.h:293:28: note: declared here
>>
>>   293 | OSSL_DEPRECATEDIN_3_0 void RSA_free(RSA *r);
>>
>>       |                            ^~~~~~~~
>>
>> cc1plus: all warnings being treated as errors
>>
>> make[3]: *** [Makefile:842: old_api.lo] Error 1
>>
>> make[3]: Leaving directory '/home/builder/confdir/src/mem'
>>
>> make[2]: *** [Makefile:6868: all-recursive] Error 1
>>
>> make[2]: Leaving directory '/home/builder/confdir/src'
>>
>> make[1]: *** [Makefile:5857: all] Error 2
>>
>> make[1]: Leaving directory '/home/builder/confdir/src'
>>
>> make: *** [Makefile:594: all-recursive] Error 1
>>
>> make: *** [Makefile:171: build] Error 2
>>
>> ### END
>>
>>
>>
>>
>>
>> Thanks,
>>
>> Eliezer
>>
>>
>>
>> ----
>>
>> Eliezer Croitoru
>>
>> NgTech, Tech Support
>>
>> Mobile: +972-5-28704261
>>
>> Email: ngtech1ltd at gmail.com
>>
>> Web: https://ngtech.co.il/
>>
>> My-Tube: https://tube.ngtech.co.il/
>>
>>
>> _______________________________________________
>> squid-dev mailing list
>> squid-dev at lists.squid-cache.org
>> http://lists.squid-cache.org/listinfo/squid-dev
>>
>
>
> --
>     Francesco
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20220718/9da2e67f/attachment-0001.htm>

From squid3 at treenet.co.nz  Mon Jul 18 08:27:26 2022
From: squid3 at treenet.co.nz (Amos Jeffries)
Date: Mon, 18 Jul 2022 20:27:26 +1200
Subject: [squid-dev] Errors while building 5.6 on Ubuntu 22.04
In-Reply-To: <CABA8h=RkJE-D3JbS4oY0mrh1igZk1=x=UGafU6-s=W8T7saKVg@mail.gmail.com>
References: <001a01d89a7b$5221c770$f6655650$@gmail.com>
 <CA+Y8hcOJ8uR9h4X6VxZ4iE=SY+R8Y6+B_DpvW9ENaKaK6mFzJw@mail.gmail.com>
 <CABA8h=RkJE-D3JbS4oY0mrh1igZk1=x=UGafU6-s=W8T7saKVg@mail.gmail.com>
Message-ID: <af1916e3-8d08-406e-192e-a1304152e5de@treenet.co.nz>

FWIW, The backport of OpenSSL 3.0 support to v5 did not apply completely 
clean. So it did not make v5 yet. I hope to have some time to work on it 
later this week, if not it might miss this point release.

The patch in Debian is an earlier version of what eventually merged. 
Functionally identical - just lacking the style polish. It can be used 
if you need for v5 before the backport completes.


Cheers
Amos

From muhanad at plciq.com  Mon Jul 25 08:12:57 2022
From: muhanad at plciq.com (Muhanad Abdullah)
Date: Mon, 25 Jul 2022 11:12:57 +0300
Subject: [squid-dev] Project Request
Message-ID: <EF277700-3EB2-5D40-8A04-94B8507FF321@hxcore.ol>

An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20220725/a04fb21e/attachment.htm>

From squid3 at treenet.co.nz  Sun Jul 31 04:29:05 2022
From: squid3 at treenet.co.nz (Amos Jeffries)
Date: Sun, 31 Jul 2022 16:29:05 +1200
Subject: [squid-dev] RFC submodule repositories
Message-ID: <8acf76b2-0ca4-bc26-07f0-24db50a1d1c4@treenet.co.nz>

When PR #937 merges we will have the ability to shuffle old helpers into 
a separate repository that users can import as a submodule to build with 
their Squid as-needed.


What (if any) updates do we need to make to Anubis and other 
infrastructure so support git submodules ?


Amos


From rousskov at measurement-factory.com  Sun Jul 31 15:09:42 2022
From: rousskov at measurement-factory.com (Alex Rousskov)
Date: Sun, 31 Jul 2022 11:09:42 -0400
Subject: [squid-dev] RFC submodule repositories
In-Reply-To: <8acf76b2-0ca4-bc26-07f0-24db50a1d1c4@treenet.co.nz>
References: <8acf76b2-0ca4-bc26-07f0-24db50a1d1c4@treenet.co.nz>
Message-ID: <c7e8581e-8aac-afec-f61d-380266ed3caf@measurement-factory.com>

On 7/31/22 00:29, Amos Jeffries wrote:
> When PR #937 merges we will have the ability to shuffle old helpers into 
> a separate repository that users can import as a submodule to build with 
> their Squid as-needed.

In my experience, git submodules are a powerful feature that is rather 
difficult to use correctly. Some of submodule aspects do not feel 
"natural" to many humans. I am pretty sure that proper introduction of 
submodules will require a lot of our time and nerve cells. What will we 
optimize by introducing such a significant complication as git submodules?


> What (if any) updates do we need to make to Anubis and other 
> infrastructure so support git submodules ?

That answer probably depends, in part, on what support guarantees we are 
going to issue for those submodules and on what our submodule update 
policy will be. Integrating two or more git repositories together is a 
complicated issue...

Alex.

From gkinkie at gmail.com  Sun Jul 31 18:17:59 2022
From: gkinkie at gmail.com (Francesco Chemolli)
Date: Sun, 31 Jul 2022 19:17:59 +0100
Subject: [squid-dev] RFC submodule repositories
In-Reply-To: <c7e8581e-8aac-afec-f61d-380266ed3caf@measurement-factory.com>
References: <8acf76b2-0ca4-bc26-07f0-24db50a1d1c4@treenet.co.nz>
 <c7e8581e-8aac-afec-f61d-380266ed3caf@measurement-factory.com>
Message-ID: <CA+Y8hcP46ZCGQj9i1hkzOOo6i1H5F3KMjfg-5r2omVObr-xy2A@mail.gmail.com>

Hi,
  I second Alex' view point, I don't have a clear understanding about what
is the benefit that you're trying to obtain.

On Sun, Jul 31, 2022 at 4:09 PM Alex Rousskov <
rousskov at measurement-factory.com> wrote:

> On 7/31/22 00:29, Amos Jeffries wrote:
> > When PR #937 merges we will have the ability to shuffle old helpers into
> > a separate repository that users can import as a submodule to build with
> > their Squid as-needed.
>
> In my experience, git submodules are a powerful feature that is rather
> difficult to use correctly. Some of submodule aspects do not feel
> "natural" to many humans. I am pretty sure that proper introduction of
> submodules will require a lot of our time and nerve cells. What will we
> optimize by introducing such a significant complication as git submodules?
>
>
> > What (if any) updates do we need to make to Anubis and other
> > infrastructure so support git submodules ?
>
> That answer probably depends, in part, on what support guarantees we are
> going to issue for those submodules and on what our submodule update
> policy will be. Integrating two or more git repositories together is a
> complicated issue...
>
> Alex.
> _______________________________________________
> squid-dev mailing list
> squid-dev at lists.squid-cache.org
> http://lists.squid-cache.org/listinfo/squid-dev
>


-- 
    Francesco
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20220731/1450eb1b/attachment.htm>

From ngtech1ltd at gmail.com  Sun Jul 31 20:35:46 2022
From: ngtech1ltd at gmail.com (ngtech1ltd at gmail.com)
Date: Sun, 31 Jul 2022 23:35:46 +0300
Subject: [squid-dev] RFC submodule repositories
In-Reply-To: <8acf76b2-0ca4-bc26-07f0-24db50a1d1c4@treenet.co.nz>
References: <8acf76b2-0ca4-bc26-07f0-24db50a1d1c4@treenet.co.nz>
Message-ID: <003f01d8a51d$1d92e370$58b8aa50$@gmail.com>

Hey Amos,

I have not seen too many updates to the helpers for a very long time.
I think that separating the helpers will result in a specific build dependencies removal.
If this is the case then we need to first consider what it will cause eventually.
>From me as a builder I need a simple way to pull the full git or package.

There are specific helpers which are based on squid sources so these might be affected by any chance.

Correct me if I'm wrong about my assumption.

To my opinion if the helpers are stable by themselves then they can be moved to another git repo.
(Maybe for them to use the language default libraries is good enough)


Not related directly but if you ask me some helpers should be deprecated since we are on 5.x+
and it means that their lifecycle ended.

One example is the CentOS 6 usage to the favor of Debian 11 from Katerina.

I need to learn more about git submodules but I prefer not to for now.

Thanks,
Eliezer

----
Eliezer Croitoru
NgTech, Tech Support
Mobile: +972-5-28704261
Email: ngtech1ltd at gmail.com
Web: https://ngtech.co.il/
My-Tube: https://tube.ngtech.co.il/

-----Original Message-----
From: squid-dev <squid-dev-bounces at lists.squid-cache.org> On Behalf Of Amos Jeffries
Sent: Sunday, 31 July 2022 7:29
To: Squid Developers <squid-dev at lists.squid-cache.org>
Subject: [squid-dev] RFC submodule repositories

When PR #937 merges we will have the ability to shuffle old helpers into 
a separate repository that users can import as a submodule to build with 
their Squid as-needed.


What (if any) updates do we need to make to Anubis and other 
infrastructure so support git submodules ?


Amos

_______________________________________________
squid-dev mailing list
squid-dev at lists.squid-cache.org
http://lists.squid-cache.org/listinfo/squid-dev


