<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] Errors while building 5.6 on Ubuntu 22.04
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Errors%20while%20building%205.6%20on%20Ubuntu%2022.04&In-Reply-To=%3C001a01d89a7b%245221c770%24f6655650%24%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009798.html">
   <LINK REL="Next"  HREF="009800.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] Errors while building 5.6 on Ubuntu 22.04</H1>
    <B>ngtech1ltd at gmail.com</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Errors%20while%20building%205.6%20on%20Ubuntu%2022.04&In-Reply-To=%3C001a01d89a7b%245221c770%24f6655650%24%40gmail.com%3E"
       TITLE="[squid-dev] Errors while building 5.6 on Ubuntu 22.04">ngtech1ltd at gmail.com
       </A><BR>
    <I>Mon Jul 18 07:52:24 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009798.html">[squid-dev] bugzilla issue
</A></li>
        <LI>Next message (by thread): <A HREF="009800.html">[squid-dev] Errors while building 5.6 on Ubuntu 22.04
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9799">[ date ]</a>
              <a href="thread.html#9799">[ thread ]</a>
              <a href="subject.html#9799">[ subject ]</a>
              <a href="author.html#9799">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Everybody,
 
I have just started my build tests on Ubuntu 22.04  and I got some errors, something with OpenSSL 3.0.
I have seen that there has been a patch for 5.5 in Debian at:
<A HREF="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1005650">https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1005650</A>
 
 
but I have not see such a fix from the squid project.
Is there any usable patch I can try to apply to build and fix it?
 
The build errors:
### START
ibtool: compile:  g++ -DHAVE_CONFIG_H -DDEFAULT_CONFIG_FILE=\&quot;/etc/squid/squid.conf\&quot; -DDEFAULT_SQUID_DATA_DIR=\&quot;/usr/share/squid\&quot; -DDEFAULT_SQUID_CONFIG_DIR=\&quot;/etc/squid\&quot; -I/home/builder/squid-5.6 -I/home/builder/squid-5.6/include -I/home/builder/squid-5.6/lib -I/home/builder/squid-5.6/src -I../../include -isystem /usr/include/mit-krb5 -I/usr/include/libxml2 -Wall -Wpointer-arith -Wwrite-strings -Wcomments -Wshadow -Woverloaded-virtual -Werror -pipe -D_REENTRANT -I/usr/include/libxml2 -m64 -I/usr/include/p11-kit-1 -g -O2 -MT old_api.lo -MD -MP -MF .deps/old_api.Tpo -c /home/builder/squid-5.6/src/mem/old_api.cc  -fPIC -DPIC -o .libs/old_api.o
In file included from /home/builder/squid-5.6/src/security/Session.h:14,
                 from /home/builder/squid-5.6/src/security/forward.h:15,
                 from /home/builder/squid-5.6/src/SquidConfig.h:26,
                 from /home/builder/squid-5.6/src/mem/old_api.cc:24:
/home/builder/squid-5.6/src/security/forward.h: In function 'void Security::DH_free_cpp(DH*)':
/home/builder/squid-5.6/src/security/LockingPointer.h:34:21: error: 'void DH_free(DH*)' is deprecated: Since OpenSSL 3.0 [-Werror=deprecated-declarations]
   34 |             function(a); \
/home/builder/squid-5.6/src/security/forward.h:96:1: note: in expansion of macro 'CtoCpp1'
   96 | CtoCpp1(DH_free, DH *);
      | ^~~~~~~
In file included from /home/builder/squid-5.6/compat/openssl.h:35,
                 from /home/builder/squid-5.6/src/security/Context.h:15,
                 from /home/builder/squid-5.6/src/security/forward.h:14,
                 from /home/builder/squid-5.6/src/SquidConfig.h:26,
                 from /home/builder/squid-5.6/src/mem/old_api.cc:24:
/usr/include/openssl/dh.h:200:28: note: declared here
  200 | OSSL_DEPRECATEDIN_3_0 void DH_free(DH *dh);
      |                            ^~~~~~~
In file included from /home/builder/squid-5.6/src/SquidConfig.h:26,
                 from /home/builder/squid-5.6/src/mem/old_api.cc:24:
/home/builder/squid-5.6/src/security/forward.h: At global scope:
/home/builder/squid-5.6/src/security/forward.h:97:70: error: 'int DH_up_ref(DH*)' is deprecated: Since OpenSSL 3.0 [-Werror=deprecated-declarations]
   97 | typedef Security::LockingPointer&lt;DH, DH_free_cpp, HardFun&lt;int, DH *, DH_up_ref&gt; &gt; DhePointer;
      |                                                                      ^~~~~~~~~
In file included from /home/builder/squid-5.6/compat/openssl.h:35,
                 from /home/builder/squid-5.6/src/security/Context.h:15,
                 from /home/builder/squid-5.6/src/security/forward.h:14,
                 from /home/builder/squid-5.6/src/SquidConfig.h:26,
                 from /home/builder/squid-5.6/src/mem/old_api.cc:24:
/usr/include/openssl/dh.h:201:27: note: declared here
  201 | OSSL_DEPRECATEDIN_3_0 int DH_up_ref(DH *dh);
      |                           ^~~~~~~~~
In file included from /home/builder/squid-5.6/src/SquidConfig.h:26,
                 from /home/builder/squid-5.6/src/mem/old_api.cc:24:
/home/builder/squid-5.6/src/security/forward.h:97:79: error: 'int DH_up_ref(DH*)' is deprecated: Since OpenSSL 3.0 [-Werror=deprecated-declarations]
   97 | typedef Security::LockingPointer&lt;DH, DH_free_cpp, HardFun&lt;int, DH *, DH_up_ref&gt; &gt; DhePointer;
      |                                                                               ^
In file included from /home/builder/squid-5.6/compat/openssl.h:35,
                 from /home/builder/squid-5.6/src/security/Context.h:15,
                 from /home/builder/squid-5.6/src/security/forward.h:14,
                 from /home/builder/squid-5.6/src/SquidConfig.h:26,
                 from /home/builder/squid-5.6/src/mem/old_api.cc:24:
/usr/include/openssl/dh.h:201:27: note: declared here
  201 | OSSL_DEPRECATEDIN_3_0 int DH_up_ref(DH *dh);
      |                           ^~~~~~~~~
In file included from /home/builder/squid-5.6/src/ssl/support.h:21,
                 from /home/builder/squid-5.6/src/SquidConfig.h:29,
                 from /home/builder/squid-5.6/src/mem/old_api.cc:24:
/home/builder/squid-5.6/src/ssl/gadgets.h:61:51: error: 'void RSA_free(RSA*)' is deprecated: Since OpenSSL 3.0 [-Werror=deprecated-declarations]
   61 | typedef std::unique_ptr&lt;RSA, HardFun&lt;void, RSA*, &amp;RSA_free&gt;&gt; RSA_Pointer;
      |                                                   ^~~~~~~~
In file included from /usr/include/openssl/x509.h:36,
                 from /usr/include/openssl/ssl.h:31,
                 from /home/builder/squid-5.6/compat/openssl.h:44,
                 from /home/builder/squid-5.6/src/security/Context.h:15,
                 from /home/builder/squid-5.6/src/security/forward.h:14,
                 from /home/builder/squid-5.6/src/SquidConfig.h:26,
                 from /home/builder/squid-5.6/src/mem/old_api.cc:24:
/usr/include/openssl/rsa.h:293:28: note: declared here
  293 | OSSL_DEPRECATEDIN_3_0 void RSA_free(RSA *r);
      |                            ^~~~~~~~
In file included from /home/builder/squid-5.6/src/ssl/support.h:21,
                 from /home/builder/squid-5.6/src/SquidConfig.h:29,
                 from /home/builder/squid-5.6/src/mem/old_api.cc:24:
/home/builder/squid-5.6/src/ssl/gadgets.h:61:51: error: 'void RSA_free(RSA*)' is deprecated: Since OpenSSL 3.0 [-Werror=deprecated-declarations]
   61 | typedef std::unique_ptr&lt;RSA, HardFun&lt;void, RSA*, &amp;RSA_free&gt;&gt; RSA_Pointer;
      |                                                   ^~~~~~~~
In file included from /usr/include/openssl/x509.h:36,
                 from /usr/include/openssl/ssl.h:31,
                 from /home/builder/squid-5.6/compat/openssl.h:44,
                 from /home/builder/squid-5.6/src/security/Context.h:15,
                 from /home/builder/squid-5.6/src/security/forward.h:14,
                 from /home/builder/squid-5.6/src/SquidConfig.h:26,
                 from /home/builder/squid-5.6/src/mem/old_api.cc:24:
/usr/include/openssl/rsa.h:293:28: note: declared here
  293 | OSSL_DEPRECATEDIN_3_0 void RSA_free(RSA *r);
      |                            ^~~~~~~~
cc1plus: all warnings being treated as errors
make[3]: *** [Makefile:842: old_api.lo] Error 1
make[3]: Leaving directory '/home/builder/confdir/src/mem'
make[2]: *** [Makefile:6868: all-recursive] Error 1
make[2]: Leaving directory '/home/builder/confdir/src'
make[1]: *** [Makefile:5857: all] Error 2
make[1]: Leaving directory '/home/builder/confdir/src'
make: *** [Makefile:594: all-recursive] Error 1
make: *** [Makefile:171: build] Error 2
### END
 
 
Thanks,
Eliezer
 
----
Eliezer Croitoru
NgTech, Tech Support
Mobile: +972-5-28704261
Email:  &lt;mailto:<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">ngtech1ltd at gmail.com</A>&gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">ngtech1ltd at gmail.com</A>
Web:  &lt;<A HREF="https://ngtech.co.il/">https://ngtech.co.il/</A>&gt; <A HREF="https://ngtech.co.il/">https://ngtech.co.il/</A>
My-Tube:  &lt;<A HREF="https://tube.ngtech.co.il/">https://tube.ngtech.co.il/</A>&gt; <A HREF="https://tube.ngtech.co.il/">https://tube.ngtech.co.il/</A>
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-dev/attachments/20220718/091ebb7f/attachment-0001.htm">http://lists.squid-cache.org/pipermail/squid-dev/attachments/20220718/091ebb7f/attachment-0001.htm</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009798.html">[squid-dev] bugzilla issue
</A></li>
	<LI>Next message (by thread): <A HREF="009800.html">[squid-dev] Errors while building 5.6 on Ubuntu 22.04
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9799">[ date ]</a>
              <a href="thread.html#9799">[ thread ]</a>
              <a href="subject.html#9799">[ subject ]</a>
              <a href="author.html#9799">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
