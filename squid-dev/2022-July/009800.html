<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] Errors while building 5.6 on Ubuntu 22.04
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Errors%20while%20building%205.6%20on%20Ubuntu%2022.04&In-Reply-To=%3CCA%2BY8hcOJ8uR9h4X6VxZ4iE%3DSY%2BR8Y6%2BB_DpvW9ENaKaK6mFzJw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009799.html">
   <LINK REL="Next"  HREF="009801.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] Errors while building 5.6 on Ubuntu 22.04</H1>
    <B>Francesco Chemolli</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Errors%20while%20building%205.6%20on%20Ubuntu%2022.04&In-Reply-To=%3CCA%2BY8hcOJ8uR9h4X6VxZ4iE%3DSY%2BR8Y6%2BB_DpvW9ENaKaK6mFzJw%40mail.gmail.com%3E"
       TITLE="[squid-dev] Errors while building 5.6 on Ubuntu 22.04">gkinkie at gmail.com
       </A><BR>
    <I>Mon Jul 18 08:03:00 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009799.html">[squid-dev] Errors while building 5.6 on Ubuntu 22.04
</A></li>
        <LI>Next message (by thread): <A HREF="009801.html">[squid-dev] Errors while building 5.6 on Ubuntu 22.04
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9800">[ date ]</a>
              <a href="thread.html#9800">[ thread ]</a>
              <a href="subject.html#9800">[ subject ]</a>
              <a href="author.html#9800">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>OpenSSL 3.0 support has landed in trunk yesterday. Hopefully there will be
a point release with it any day now

On Mon, Jul 18, 2022 at 9:52 AM &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">ngtech1ltd at gmail.com</A>&gt; wrote:

&gt;<i> Hey Everybody,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I have just started my build tests on Ubuntu 22.04  and I got some
</I>&gt;<i> errors, something with OpenSSL 3.0.
</I>&gt;<i>
</I>&gt;<i> I have seen that there has been a patch for 5.5 in Debian at:
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1005650">https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1005650</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> but I have not see such a fix from the squid project.
</I>&gt;<i>
</I>&gt;<i> Is there any usable patch I can try to apply to build and fix it?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The build errors:
</I>&gt;<i>
</I>&gt;<i> ### START
</I>&gt;<i>
</I>&gt;<i> ibtool: compile:  g++ -DHAVE_CONFIG_H -DDEFAULT_CONFIG_FILE=\&quot;/etc/squid/
</I>&gt;<i> squid.conf\&quot; -DDEFAULT_SQUID_DATA_DIR=\&quot;/usr/share/squid\&quot;
</I>&gt;<i> -DDEFAULT_SQUID_CONFIG_DIR=\&quot;/etc/squid\&quot; -I/home/builder/squid-5.6
</I>&gt;<i> -I/home/builder/squid-5.6/include -I/home/builder/squid-5.6/lib
</I>&gt;<i> -I/home/builder/squid-5.6/src -I../../include -isystem /usr/include/mit-krb5
</I>&gt;<i> -I/usr/include/libxml2 -Wall -Wpointer-arith -Wwrite-strings -Wcomments -
</I>&gt;<i> Wshadow -Woverloaded-virtual -Werror -pipe -D_REENTRANT -I/usr/include/libxml2
</I>&gt;<i> -m64 -I/usr/include/p11-kit-1 -g -O2 -MT old_api.lo -MD -MP -MF .deps/
</I>&gt;<i> old_api.Tpo -c /home/builder/squid-5.6/src/mem/old_api.cc  -fPIC -DPIC -o
</I>&gt;<i> .libs/old_api.o
</I>&gt;<i>
</I>&gt;<i> In file included from /home/builder/squid-5.6/src/security/Session.h:14,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/security/forward.h:15,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/SquidConfig.h:26,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
</I>&gt;<i>
</I>&gt;<i> /home/builder/squid-5.6/src/security/forward.h: In function 'void
</I>&gt;<i> Security::DH_free_cpp(DH*)':
</I>&gt;<i>
</I>&gt;<i> /home/builder/squid-5.6/src/security/LockingPointer.h:34:21: error: 'void
</I>&gt;<i> DH_free(DH*)' is deprecated: Since OpenSSL 3.0 [-Werror
</I>&gt;<i> =deprecated-declarations]
</I>&gt;<i>
</I>&gt;<i>    34 |             function(a); \
</I>&gt;<i>
</I>&gt;<i> /home/builder/squid-5.6/src/security/forward.h:96:1: note: in expansion
</I>&gt;<i> of macro 'CtoCpp1'
</I>&gt;<i>
</I>&gt;<i>    96 | CtoCpp1(DH_free, DH *);
</I>&gt;<i>
</I>&gt;<i>       | ^~~~~~~
</I>&gt;<i>
</I>&gt;<i> In file included from /home/builder/squid-5.6/compat/openssl.h:35,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/security/Context.h:15,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/security/forward.h:14,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/SquidConfig.h:26,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
</I>&gt;<i>
</I>&gt;<i> /usr/include/openssl/dh.h:200:28: note: declared here
</I>&gt;<i>
</I>&gt;<i>   200 | OSSL_DEPRECATEDIN_3_0 void DH_free(DH *dh);
</I>&gt;<i>
</I>&gt;<i>       |                            ^~~~~~~
</I>&gt;<i>
</I>&gt;<i> In file included from /home/builder/squid-5.6/src/SquidConfig.h:26,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
</I>&gt;<i>
</I>&gt;<i> /home/builder/squid-5.6/src/security/forward.h: At global scope:
</I>&gt;<i>
</I>&gt;<i> /home/builder/squid-5.6/src/security/forward.h:97:70: error: 'int
</I>&gt;<i> DH_up_ref(DH*)' is deprecated: Since OpenSSL 3.0 [-Werror
</I>&gt;<i> =deprecated-declarations]
</I>&gt;<i>
</I>&gt;<i>    97 | typedef Security::LockingPointer&lt;DH, DH_free_cpp, HardFun&lt;int, DH
</I>&gt;<i> *, DH_up_ref&gt; &gt; DhePointer;
</I>&gt;<i>
</I>&gt;<i>       |
</I>&gt;<i> ^~~~~~~~~
</I>&gt;<i>
</I>&gt;<i> In file included from /home/builder/squid-5.6/compat/openssl.h:35,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/security/Context.h:15,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/security/forward.h:14,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/SquidConfig.h:26,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
</I>&gt;<i>
</I>&gt;<i> /usr/include/openssl/dh.h:201:27: note: declared here
</I>&gt;<i>
</I>&gt;<i>   201 | OSSL_DEPRECATEDIN_3_0 int DH_up_ref(DH *dh);
</I>&gt;<i>
</I>&gt;<i>       |                           ^~~~~~~~~
</I>&gt;<i>
</I>&gt;<i> In file included from /home/builder/squid-5.6/src/SquidConfig.h:26,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
</I>&gt;<i>
</I>&gt;<i> /home/builder/squid-5.6/src/security/forward.h:97:79: error: 'int
</I>&gt;<i> DH_up_ref(DH*)' is deprecated: Since OpenSSL 3.0 [-Werror
</I>&gt;<i> =deprecated-declarations]
</I>&gt;<i>
</I>&gt;<i>    97 | typedef Security::LockingPointer&lt;DH, DH_free_cpp, HardFun&lt;int, DH
</I>&gt;<i> *, DH_up_ref&gt; &gt; DhePointer;
</I>&gt;<i>
</I>&gt;<i>       |
</I>&gt;<i> ^
</I>&gt;<i>
</I>&gt;<i> In file included from /home/builder/squid-5.6/compat/openssl.h:35,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/security/Context.h:15,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/security/forward.h:14,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/SquidConfig.h:26,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
</I>&gt;<i>
</I>&gt;<i> /usr/include/openssl/dh.h:201:27: note: declared here
</I>&gt;<i>
</I>&gt;<i>   201 | OSSL_DEPRECATEDIN_3_0 int DH_up_ref(DH *dh);
</I>&gt;<i>
</I>&gt;<i>       |                           ^~~~~~~~~
</I>&gt;<i>
</I>&gt;<i> In file included from /home/builder/squid-5.6/src/ssl/support.h:21,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/SquidConfig.h:29,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
</I>&gt;<i>
</I>&gt;<i> /home/builder/squid-5.6/src/ssl/gadgets.h:61:51: error: 'void RSA_free(RSA*)'
</I>&gt;<i> is deprecated: Since OpenSSL 3.0 [-Werror=deprecated-declarations]
</I>&gt;<i>
</I>&gt;<i>    61 | typedef std::unique_ptr&lt;RSA, HardFun&lt;void, RSA*, &amp;RSA_free&gt;&gt;
</I>&gt;<i> RSA_Pointer;
</I>&gt;<i>
</I>&gt;<i>       |                                                   ^~~~~~~~
</I>&gt;<i>
</I>&gt;<i> In file included from /usr/include/openssl/x509.h:36,
</I>&gt;<i>
</I>&gt;<i>                  from /usr/include/openssl/ssl.h:31,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/compat/openssl.h:44,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/security/Context.h:15,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/security/forward.h:14,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/SquidConfig.h:26,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
</I>&gt;<i>
</I>&gt;<i> /usr/include/openssl/rsa.h:293:28: note: declared here
</I>&gt;<i>
</I>&gt;<i>   293 | OSSL_DEPRECATEDIN_3_0 void RSA_free(RSA *r);
</I>&gt;<i>
</I>&gt;<i>       |                            ^~~~~~~~
</I>&gt;<i>
</I>&gt;<i> In file included from /home/builder/squid-5.6/src/ssl/support.h:21,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/SquidConfig.h:29,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
</I>&gt;<i>
</I>&gt;<i> /home/builder/squid-5.6/src/ssl/gadgets.h:61:51: error: 'void RSA_free(RSA*)'
</I>&gt;<i> is deprecated: Since OpenSSL 3.0 [-Werror=deprecated-declarations]
</I>&gt;<i>
</I>&gt;<i>    61 | typedef std::unique_ptr&lt;RSA, HardFun&lt;void, RSA*, &amp;RSA_free&gt;&gt;
</I>&gt;<i> RSA_Pointer;
</I>&gt;<i>
</I>&gt;<i>       |                                                   ^~~~~~~~
</I>&gt;<i>
</I>&gt;<i> In file included from /usr/include/openssl/x509.h:36,
</I>&gt;<i>
</I>&gt;<i>                  from /usr/include/openssl/ssl.h:31,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/compat/openssl.h:44,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/security/Context.h:15,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/security/forward.h:14,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/SquidConfig.h:26,
</I>&gt;<i>
</I>&gt;<i>                  from /home/builder/squid-5.6/src/mem/old_api.cc:24:
</I>&gt;<i>
</I>&gt;<i> /usr/include/openssl/rsa.h:293:28: note: declared here
</I>&gt;<i>
</I>&gt;<i>   293 | OSSL_DEPRECATEDIN_3_0 void RSA_free(RSA *r);
</I>&gt;<i>
</I>&gt;<i>       |                            ^~~~~~~~
</I>&gt;<i>
</I>&gt;<i> cc1plus: all warnings being treated as errors
</I>&gt;<i>
</I>&gt;<i> make[3]: *** [Makefile:842: old_api.lo] Error 1
</I>&gt;<i>
</I>&gt;<i> make[3]: Leaving directory '/home/builder/confdir/src/mem'
</I>&gt;<i>
</I>&gt;<i> make[2]: *** [Makefile:6868: all-recursive] Error 1
</I>&gt;<i>
</I>&gt;<i> make[2]: Leaving directory '/home/builder/confdir/src'
</I>&gt;<i>
</I>&gt;<i> make[1]: *** [Makefile:5857: all] Error 2
</I>&gt;<i>
</I>&gt;<i> make[1]: Leaving directory '/home/builder/confdir/src'
</I>&gt;<i>
</I>&gt;<i> make: *** [Makefile:594: all-recursive] Error 1
</I>&gt;<i>
</I>&gt;<i> make: *** [Makefile:171: build] Error 2
</I>&gt;<i>
</I>&gt;<i> ### END
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i>
</I>&gt;<i> Eliezer
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ----
</I>&gt;<i>
</I>&gt;<i> Eliezer Croitoru
</I>&gt;<i>
</I>&gt;<i> NgTech, Tech Support
</I>&gt;<i>
</I>&gt;<i> Mobile: +972-5-28704261
</I>&gt;<i>
</I>&gt;<i> Email: <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">ngtech1ltd at gmail.com</A>
</I>&gt;<i>
</I>&gt;<i> Web: <A HREF="https://ngtech.co.il/">https://ngtech.co.il/</A>
</I>&gt;<i>
</I>&gt;<i> My-Tube: <A HREF="https://tube.ngtech.co.il/">https://tube.ngtech.co.il/</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-dev mailing list
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">squid-dev at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">http://lists.squid-cache.org/listinfo/squid-dev</A>
</I>&gt;<i>
</I>

-- 
    Francesco
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-dev/attachments/20220718/df654d8e/attachment-0001.htm">http://lists.squid-cache.org/pipermail/squid-dev/attachments/20220718/df654d8e/attachment-0001.htm</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009799.html">[squid-dev] Errors while building 5.6 on Ubuntu 22.04
</A></li>
	<LI>Next message (by thread): <A HREF="009801.html">[squid-dev] Errors while building 5.6 on Ubuntu 22.04
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9800">[ date ]</a>
              <a href="thread.html#9800">[ thread ]</a>
              <a href="subject.html#9800">[ subject ]</a>
              <a href="author.html#9800">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
