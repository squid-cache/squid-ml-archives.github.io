<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] RFC: Class section/member _order_
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20RFC%3A%20Class%20section/member%20_order_&In-Reply-To=%3CCA%2BY8hcMo0F-7%2BtTBGxmyuAy_5QMGAfQQXzu0QsyO1O_ybtbLjg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009793.html">
   <LINK REL="Next"  HREF="009795.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] RFC: Class section/member _order_</H1>
    <B>Francesco Chemolli</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20RFC%3A%20Class%20section/member%20_order_&In-Reply-To=%3CCA%2BY8hcMo0F-7%2BtTBGxmyuAy_5QMGAfQQXzu0QsyO1O_ybtbLjg%40mail.gmail.com%3E"
       TITLE="[squid-dev] RFC: Class section/member _order_">gkinkie at gmail.com
       </A><BR>
    <I>Thu Jun 23 14:22:00 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009793.html">[squid-dev] RFC: Class section/member _order_
</A></li>
        <LI>Next message (by thread): <A HREF="009795.html">[squid-dev] Squid + docker multi-distro test builds script
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9794">[ date ]</a>
              <a href="thread.html#9794">[ thread ]</a>
              <a href="subject.html#9794">[ subject ]</a>
              <a href="author.html#9794">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,
  I generally agree on the proposal. Any difference in opinion I have  is
trivial and not worth discussing

Regarding the ML filter, thanks for letting me know. I&#8217;ll have to figure
out what keyword triggered the anti spam filter

Francesco

On Thu, 23 Jun 2022 at 15:37, Alex Rousskov &lt;
<A HREF="http://lists.squid-cache.org/listinfo/squid-dev">rousskov at measurement-factory.com</A>&gt; wrote:

&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i>      Amos and I disagreed[1] regarding the existing guidelines for
</I>&gt;<i> section/member order in C++ class declarations. To resolve that
</I>&gt;<i> disagreement, this email proposes the order for future use.
</I>&gt;<i>
</I>&gt;<i> -----
</I>&gt;<i>
</I>&gt;<i> 1. Class &quot;sections&quot; order (by member access specifiers): public,
</I>&gt;<i> protected, private. Each section, if present, declared once. Omit
</I>&gt;<i> sections that would be empty. Rationale: List most commonly reused, most
</I>&gt;<i> important things fist. In this context, those are public class
</I>&gt;<i> interfaces. The private section is the least important implementation
</I>&gt;<i> detail as far as the notion of a C++ class is concerned.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 2. Within each section, the recommended member order is defined below.
</I>&gt;<i> Rationale: Group similar things together to facilitate searching and
</I>&gt;<i> highlight differences. List things most likely to be reused (by other
</I>&gt;<i> class members) and most important/influential things higher.
</I>&gt;<i>
</I>&gt;<i> * friendship declarations
</I>&gt;<i> * type and aliases declarations; nested classes/structs/unions
</I>&gt;<i> * static member functions
</I>&gt;<i> * constructors and assignment operators
</I>&gt;<i> * destructors (just one until C++20)
</I>&gt;<i> * other/regular non-static member functions except overrides
</I>&gt;<i> * overrides (see item 3 below)
</I>&gt;<i> * static data members
</I>&gt;<i> * non-static data members
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 3. Overrides are a special case where we do not expect member
</I>&gt;<i> descriptions but do expect a reference to the corresponding API as
</I>&gt;<i> sketched below. Overrides are grouped by the (direct or indirect) parent
</I>&gt;<i> that _introduced_ the corresponding API method(s) (i.e. the parent class
</I>&gt;<i> that declared the virtual method but could _not_ use an override keyword
</I>&gt;<i> in that declaration). Rationale: Provide API context and facilitate
</I>&gt;<i> searching for member descriptions without chasing overrides through
</I>&gt;<i> parents.
</I>&gt;<i>
</I>&gt;<i>      /* Baz API */
</I>&gt;<i>      overrides for Baz-introduced methods (excluding destructors)
</I>&gt;<i>
</I>&gt;<i>      /* Bar API */
</I>&gt;<i>      overrides for Bar-introduced methods (excluding destructors)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 4. Caveats
</I>&gt;<i>
</I>&gt;<i> The above rules are not meant to force authors to include any access
</I>&gt;<i> specifiers or members that the code does not actually need (except the
</I>&gt;<i> &quot;private&quot; specifier should be mentioned explicitly in class declarations
</I>&gt;<i> that have only private members -- do not rely on the class default
</I>&gt;<i> access specifier being &quot;private&quot;).
</I>&gt;<i>
</I>&gt;<i> Squid has some legacy code that forces CBDATA-related declarations to be
</I>&gt;<i> hoisted to the very top of the class, into the &quot;unnamed&quot; section. This
</I>&gt;<i> is an exception to the above rules. Eventually, we will stop doing that,
</I>&gt;<i> but we should continue doing that for consistency sake until the
</I>&gt;<i> offending CBDATA macros are gone.
</I>&gt;<i>
</I>&gt;<i> Like any style rules, these rules are not comprehensive. If your use
</I>&gt;<i> case is not explicitly covered, then look around for similar Squid code
</I>&gt;<i> and try to be consistent and/or reasonable.
</I>&gt;<i>
</I>&gt;<i> -----
</I>&gt;<i>
</I>&gt;<i> Most of the above rules are arbitrary but common in the industry[2,3].
</I>&gt;<i>
</I>&gt;<i> [1] <A HREF="https://github.com/squid-cache/squid/pull/1067#discussion_r889864925">https://github.com/squid-cache/squid/pull/1067#discussion_r889864925</A>
</I>&gt;<i> [2] <A HREF="https://stackoverflow.com/q/308581">https://stackoverflow.com/q/308581</A>
</I>&gt;<i> [3] <A HREF="https://google.github.io/styleguide/cppguide.html#Declaration_Order">https://google.github.io/styleguide/cppguide.html#Declaration_Order</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> HTH,
</I>&gt;<i>
</I>&gt;<i> Alex.
</I>&gt;<i> P.S. This is my Nth attempt to get through the mailing list filter. You
</I>&gt;<i> may have received a pretty much the same message as an attachment to the
</I>&gt;<i> previous mailing list post. Sorry about the noise!
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-dev mailing list
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">squid-dev at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">http://lists.squid-cache.org/listinfo/squid-dev</A>
</I>&gt;<i>
</I>-- 
@mobile
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-dev/attachments/20220623/c6cbf312/attachment.htm">http://lists.squid-cache.org/pipermail/squid-dev/attachments/20220623/c6cbf312/attachment.htm</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009793.html">[squid-dev] RFC: Class section/member _order_
</A></li>
	<LI>Next message (by thread): <A HREF="009795.html">[squid-dev] Squid + docker multi-distro test builds script
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9794">[ date ]</a>
              <a href="thread.html#9794">[ thread ]</a>
              <a href="subject.html#9794">[ subject ]</a>
              <a href="author.html#9794">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
