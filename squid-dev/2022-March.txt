From amajer at suse.de  Tue Mar  1 16:35:42 2022
From: amajer at suse.de (Adam Majer)
Date: Tue, 1 Mar 2022 17:35:42 +0100
Subject: [squid-dev] CVE-2019-12522
Message-ID: <111b1b44-b7c1-c20d-1483-036f076e383f@suse.de>

Hi all,

There apparently was a CVE assigned some time ago but I cannot seem to 
find it being addressed.

https://gitlab.com/jeriko.one/security/-/blob/master/squid/CVEs/CVE-2019-12522.txt

The crux of the problem is that privileges are not dropped and could be 
re-acquired. There is even a warning against running squid as root but 
if root is one function call away, it seems it's the same.

Any thoughts on this?

Thanks,
Adam

From squid3 at treenet.co.nz  Thu Mar  3 07:17:17 2022
From: squid3 at treenet.co.nz (Amos Jeffries)
Date: Thu, 3 Mar 2022 20:17:17 +1300
Subject: [squid-dev] CVE-2019-12522
In-Reply-To: <111b1b44-b7c1-c20d-1483-036f076e383f@suse.de>
References: <111b1b44-b7c1-c20d-1483-036f076e383f@suse.de>
Message-ID: <26579a5e-5fa8-499e-122d-778a2a73042e@treenet.co.nz>

On 2/03/22 05:35, Adam Majer wrote:
> Hi all,
> 
> There apparently was a CVE assigned some time ago but I cannot seem to 
> find it being addressed.
> 
> https://gitlab.com/jeriko.one/security/-/blob/master/squid/CVEs/CVE-2019-12522.txt 
> 
> 
> The crux of the problem is that privileges are not dropped and could be 
> re-acquired. There is even a warning against running squid as root but 
> if root is one function call away, it seems it's the same.
> 
> Any thoughts on this?
> 


To quote myself:

"
We do not have an ETA on this issue. Risk is relatively low and several
features of Squid require the capability this allows in order to
reconfigure. So we will not be implementing the quick fix of fully
dropping root.
"

If anyone wants to work on it you can seek out any/all calls to 
enter_suid and see if they can be removed yet. Some may be able to go 
immediately, and some may need replacing with modern libcap capabilities.


HTH
Amos

From ngtech1ltd at gmail.com  Thu Mar  3 11:39:48 2022
From: ngtech1ltd at gmail.com (Eliezer Croitoru)
Date: Thu, 3 Mar 2022 13:39:48 +0200
Subject: [squid-dev] CVE-2019-12522
In-Reply-To: <26579a5e-5fa8-499e-122d-778a2a73042e@treenet.co.nz>
References: <111b1b44-b7c1-c20d-1483-036f076e383f@suse.de>
 <26579a5e-5fa8-499e-122d-778a2a73042e@treenet.co.nz>
Message-ID: <003b01d82ef3$64130b90$2c3922b0$@gmail.com>

I'm still trying to understand why it's described as "exploitable" ???
It's like saying: The Linux Kernel should not be a kernel and init(or
equivalent) should not run with uid 0 or 1.
Why nobody complains about cockpit being a root process??

Thanks,
Eliezer

----
Eliezer Croitoru
NgTech, Tech Support
Mobile: +972-5-28704261
Email: ngtech1ltd at gmail.com

-----Original Message-----
From: squid-dev <squid-dev-bounces at lists.squid-cache.org> On Behalf Of Amos
Jeffries
Sent: Thursday, March 3, 2022 09:17
To: squid-dev at lists.squid-cache.org
Subject: Re: [squid-dev] CVE-2019-12522

On 2/03/22 05:35, Adam Majer wrote:
> Hi all,
> 
> There apparently was a CVE assigned some time ago but I cannot seem to 
> find it being addressed.
> 
>
https://gitlab.com/jeriko.one/security/-/blob/master/squid/CVEs/CVE-2019-125
22.txt 
> 
> 
> The crux of the problem is that privileges are not dropped and could be 
> re-acquired. There is even a warning against running squid as root but 
> if root is one function call away, it seems it's the same.
> 
> Any thoughts on this?
> 


To quote myself:

"
We do not have an ETA on this issue. Risk is relatively low and several
features of Squid require the capability this allows in order to
reconfigure. So we will not be implementing the quick fix of fully
dropping root.
"

If anyone wants to work on it you can seek out any/all calls to 
enter_suid and see if they can be removed yet. Some may be able to go 
immediately, and some may need replacing with modern libcap capabilities.


HTH
Amos
_______________________________________________
squid-dev mailing list
squid-dev at lists.squid-cache.org
http://lists.squid-cache.org/listinfo/squid-dev


From lingyphone at gmail.com  Thu Mar  3 20:55:15 2022
From: lingyphone at gmail.com (YFone Ling)
Date: Thu, 3 Mar 2022 12:55:15 -0800
Subject: [squid-dev] ERR_CONFLICT_HOST for HTTP CONNECT request on port 80
Message-ID: <CAFkUB7i6FWDewS+WQOTPesh1=K=gLy8WJveOOAx8tbGHF2Et6Q@mail.gmail.com>

My application sends  HTTP CONNECT requests to a HTTP proxy port 80, but
gets a squid ERR_CONFLICT_HOST error page.

Is the following code really working as the comments pointed out "ignore
them" since the following if condition is "http->request->method !=
Http::METHOD_CONNECT"
and the rest has been blocked by error page
"repContext->setReplyToError(ERR_CONFLICT_HOST, Http::scConflict,"?

Does "ignore them" mean block them?
void
ClientRequestContext::hostHeaderVerifyFailed(const char *A, const char *B)
{
// IP address validation for Host: failed. Admin wants to ignore them.
// NP: we do not yet handle CONNECT tunnels well, so ignore for them
if (!Config.onoff.hostStrictVerify && http->request->method !=
Http::METHOD_CONNECT) {
debugs(85, 3, "SECURITY ALERT: Host header forgery detected on " << http->
getConn()->clientConnection <<
" (" << A << " does not match " << B << ") on URL: " << http->request->
effectiveRequestUri());


How does the squid get "hostHeaderVerifyFailed" for a normal HTTP CONNECT
request to a HTTP Proxy as simple as below?

CONNECT www.zscaler.com:80 HTTP/1.1
Host: www.zscaler.com:80
User-Agent: Windows Microsoft Windows 10 Enterprise ZTunnel/1.0
Proxy-Connection: keep-alive
Connection: keep-alive


HTTP/1.1 409 Conflict
Server: squid
Mime-Version: 1.0
Date: Tue, 22 Feb 2022 20:59:42 GMT
Content-Type: text/html;charset=utf-8
Content-Length: 2072
X-Squid-Error: ERR_CONFLICT_HOST 0
Vary: Accept-Language
Content-Language: en
X-Cache: MISS from 3
Via: 1.1 3 (squid)
Connection: keep-alive


</head><body id=ERR_CONFLICT_HOST>
<div id="titles">
<h1>ERROR</h1>
<h2>The requested URL could not be retrieved</h2>
</div>
<hr>


<div id="content">
<p>The following error was encountered while trying to retrieve the URL: <a
href="www.zscaler.com:80">www.zscaler.com:80</a></p>
......



Thank you for any help on the understanding!

Paul Ling
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20220303/38713c3a/attachment.htm>

From ngtech1ltd at gmail.com  Fri Mar  4 02:28:46 2022
From: ngtech1ltd at gmail.com (Eliezer Croitoru)
Date: Fri, 4 Mar 2022 04:28:46 +0200
Subject: [squid-dev] ERR_CONFLICT_HOST for HTTP CONNECT request on port
 80
In-Reply-To: <CAFkUB7i6FWDewS+WQOTPesh1=K=gLy8WJveOOAx8tbGHF2Et6Q@mail.gmail.com>
References: <CAFkUB7i6FWDewS+WQOTPesh1=K=gLy8WJveOOAx8tbGHF2Et6Q@mail.gmail.com>
Message-ID: <007001d82f6f$941e03e0$bc5a0ba0$@gmail.com>

I am not sure if it?s for Squid-dev but anyway to clear out the doubts I would suggest attaching the squid.conf 
and remember to remove any sensitive data.

 

Eliezer

 

----

Eliezer Croitoru

NgTech, Tech Support

Mobile: +972-5-28704261

Email: ngtech1ltd at gmail.com <mailto:ngtech1ltd at gmail.com> 

 

From: squid-dev <squid-dev-bounces at lists.squid-cache.org> On Behalf Of YFone Ling
Sent: Thursday, March 3, 2022 22:55
To: squid-dev at lists.squid-cache.org
Subject: [squid-dev] ERR_CONFLICT_HOST for HTTP CONNECT request on port 80

 

My application sends  HTTP CONNECT requests to a HTTP proxy port 80, but gets a squid ERR_CONFLICT_HOST error page.

 

Is the following code really working as the comments pointed out "ignore them" since the following if condition is "http->request->method != Http::METHOD_CONNECT"

and the rest has been blocked by error page "repContext->setReplyToError(ERR_CONFLICT_HOST, Http::scConflict,"?

 

Does "ignore them" mean block them? 

	

void

	
ClientRequestContext::hostHeaderVerifyFailed(const char *A, const char *B)

	
{

	
    // IP address validation for Host: failed. Admin wants to ignore them.

	
    // NP: we do not yet handle CONNECT tunnels well, so ignore for them

	
    if (!Config.onoff.hostStrictVerify && http->request->method != Http::METHOD_CONNECT) {

	
        debugs(85, 3, "SECURITY ALERT: Host header forgery detected on " << http->getConn()->clientConnection <<

	
               " (" << A << " does not match " << B << ") on URL: " << http->request->effectiveRequestUri());

		

 

 

How does the squid get "hostHeaderVerifyFailed" for a normal HTTP CONNECT request to a HTTP Proxy as simple as below?

 

CONNECT www.zscaler.com:80 <http://www.zscaler.com:80>  HTTP/1.1

Host: www.zscaler.com:80 <http://www.zscaler.com:80> 

User-Agent: Windows Microsoft Windows 10 Enterprise ZTunnel/1.0

Proxy-Connection: keep-alive

Connection: keep-alive

 

HTTP/1.1 409 Conflict

Server: squid

Mime-Version: 1.0

Date: Tue, 22 Feb 2022 20:59:42 GMT

Content-Type: text/html;charset=utf-8

Content-Length: 2072

X-Squid-Error: ERR_CONFLICT_HOST 0

Vary: Accept-Language

Content-Language: en

X-Cache: MISS from 3

Via: 1.1 3 (squid)

Connection: keep-alive

 

</head><body id=ERR_CONFLICT_HOST>

<div id="titles">

<h1>ERROR</h1>

<h2>The requested URL could not be retrieved</h2>

</div>

<hr>

 

<div id="content">

<p>The following error was encountered while trying to retrieve the URL: <a href="www.zscaler.com:80 <http://www.zscaler.com:80> ">www.zscaler.com:80 <http://www.zscaler.com:80> </a></p>

......

 

 

 

Thank you for any help on the understanding!

 

Paul Ling

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20220304/d9f17cb7/attachment-0001.htm>

From squid3 at treenet.co.nz  Fri Mar  4 04:43:26 2022
From: squid3 at treenet.co.nz (Amos Jeffries)
Date: Fri, 4 Mar 2022 17:43:26 +1300
Subject: [squid-dev] CVE-2019-12522
In-Reply-To: <003b01d82ef3$64130b90$2c3922b0$@gmail.com>
References: <111b1b44-b7c1-c20d-1483-036f076e383f@suse.de>
 <26579a5e-5fa8-499e-122d-778a2a73042e@treenet.co.nz>
 <003b01d82ef3$64130b90$2c3922b0$@gmail.com>
Message-ID: <1c959dcc-9845-9067-4ab3-8297c08621b3@treenet.co.nz>

On 4/03/22 00:39, Eliezer Croitoru wrote:
> I'm still trying to understand why it's described as "exploitable" ???
> It's like saying: The Linux Kernel should not be a kernel and init(or
> equivalent) should not run with uid 0 or 1.
> Why nobody complains about cockpit being a root process??
> 

This explains the _type_ of problem 
<https://secureteam.co.uk/articles/how-return-oriented-programming-exploits-work/>.


Most Squid are automatically protected against it by at least one of OS 
or compiler systems. But some can still be vulnerable, as shown by Jerkio.

Amos

From squid3 at treenet.co.nz  Fri Mar  4 06:34:59 2022
From: squid3 at treenet.co.nz (Amos Jeffries)
Date: Fri, 4 Mar 2022 19:34:59 +1300
Subject: [squid-dev] ERR_CONFLICT_HOST for HTTP CONNECT request on port
 80
In-Reply-To: <CAFkUB7i6FWDewS+WQOTPesh1=K=gLy8WJveOOAx8tbGHF2Et6Q@mail.gmail.com>
References: <CAFkUB7i6FWDewS+WQOTPesh1=K=gLy8WJveOOAx8tbGHF2Et6Q@mail.gmail.com>
Message-ID: <916f1afd-98b4-d2ca-b171-6bdf08ea0a90@treenet.co.nz>

On 4/03/22 09:55, YFone Ling wrote:
> My application sends? HTTP CONNECT requests to a HTTP proxy port 80, but 
> gets a squid?ERR_CONFLICT_HOST error page.
> 

Why?

  CONNECT is a method reserved for use when talking to a 
forward/explicit-proxy.

  Port 80 is a port reserved for origin servers or reverse-proxy (not 
forward-proxy).



> Is the following code really working as the comments pointed out "ignore 
> them" since the following if condition is "http->request->method != 
> Http::METHOD_CONNECT"
> and the rest has been blocked by error page 
> "repContext->setReplyToError(ERR_CONFLICT_HOST, Http::scConflict,"?
> 
> Does "ignore them" mean block them?


Essentially yes. Squid will not continue processing of these requests. 
All that is left is to inform the client.


> void
> 	ClientRequestContext::hostHeaderVerifyFailed(const char *A, const char *B)
> 	{
> 	// IP address validation for Host: failed. Admin wants to ignore them.
> 	// NP: we do not yet handle CONNECT tunnels well, so ignore for them
> 	if (!Config.onoff.hostStrictVerify && http->request->method != 


> 
> How does the squid get "hostHeaderVerifyFailed" for a normal HTTP 
> CONNECT request to?a HTTP Proxy as simple as below?
> 


Host header verify is not not performed for "request to a HTTP Proxy". 
It only applies by default to origin-server traffic. So something in 
your setup is not right.

What are your squid.conf http_port lines ?


Amos

From lingyphone at gmail.com  Fri Mar  4 08:25:31 2022
From: lingyphone at gmail.com (YFone Ling)
Date: Fri, 4 Mar 2022 00:25:31 -0800
Subject: [squid-dev] ERR_CONFLICT_HOST for HTTP CONNECT request on port
 80
In-Reply-To: <007001d82f6f$941e03e0$bc5a0ba0$@gmail.com>
References: <CAFkUB7i6FWDewS+WQOTPesh1=K=gLy8WJveOOAx8tbGHF2Et6Q@mail.gmail.com>
 <007001d82f6f$941e03e0$bc5a0ba0$@gmail.com>
Message-ID: <CAFkUB7j99qLh491KhqiF5BNM5LKkw9n9uP3aQ5H_gBPEs1hhQA@mail.gmail.com>

Hi, Eliezer

Thank you for replying!

As a client app developer, my customer reports  some issues with the
airline and hotel WiFi , I am not able to provide the squid.conf, neither
WiFi provider won?t tell me that.

I am here just try to understand how the squid determines host conflicts
for a simple http connect proxy request?





On Thu, Mar 3, 2022 at 6:28 PM Eliezer Croitoru <ngtech1ltd at gmail.com>
wrote:

> I am not sure if it?s for Squid-dev but anyway to clear out the doubts I
> would suggest attaching the squid.conf
> and remember to remove any sensitive data.
>
>
>
> Eliezer
>
>
>
> ----
>
> Eliezer Croitoru
>
> NgTech, Tech Support
>
> Mobile: +972-5-28704261
>
> Email: ngtech1ltd at gmail.com
>
>
>
> *From:* squid-dev <squid-dev-bounces at lists.squid-cache.org> *On Behalf Of
> *YFone Ling
> *Sent:* Thursday, March 3, 2022 22:55
> *To:* squid-dev at lists.squid-cache.org
> *Subject:* [squid-dev] ERR_CONFLICT_HOST for HTTP CONNECT request on port
> 80
>
>
>
> My application sends  HTTP CONNECT requests to a HTTP proxy port 80, but
> gets a squid ERR_CONFLICT_HOST error page.
>
>
>
> Is the following code really working as the comments pointed out "ignore
> them" since the following if condition is "http->request->method !=
> Http::METHOD_CONNECT"
>
> and the rest has been blocked by error page
> "repContext->setReplyToError(ERR_CONFLICT_HOST, Http::scConflict,"?
>
>
>
> Does "ignore them" mean block them?
>
> void
>
> ClientRequestContext::hostHeaderVerifyFailed(const char *A, const char *B)
>
> {
>
>     // IP address validation for Host: failed. Admin wants to ignore them.
>
>     // NP: we do not yet handle CONNECT tunnels well, so ignore for them
>
>     if (!Config.onoff.hostStrictVerify && http->request->method !=
> Http::METHOD_CONNECT) {
>
>         debugs(85, 3, "SECURITY ALERT: Host header forgery detected on "
> << http->getConn()->clientConnection <<
>
>                " (" << A << " does not match " << B << ") on URL: " <<
> http->request->effectiveRequestUri());
>
>
>
>
>
> How does the squid get "hostHeaderVerifyFailed" for a normal HTTP CONNECT
> request to a HTTP Proxy as simple as below?
>
>
>
> CONNECT www.zscaler.com:80 HTTP/1.1
>
> Host: www.zscaler.com:80
>
> User-Agent: Windows Microsoft Windows 10 Enterprise ZTunnel/1.0
>
> Proxy-Connection: keep-alive
>
> Connection: keep-alive
>
>
>
> HTTP/1.1 409 Conflict
>
> Server: squid
>
> Mime-Version: 1.0
>
> Date: Tue, 22 Feb 2022 20:59:42 GMT
>
> Content-Type: text/html;charset=utf-8
>
> Content-Length: 2072
>
> X-Squid-Error: ERR_CONFLICT_HOST 0
>
> Vary: Accept-Language
>
> Content-Language: en
>
> X-Cache: MISS from 3
>
> Via: 1.1 3 (squid)
>
> Connection: keep-alive
>
>
>
> </head><body id=ERR_CONFLICT_HOST>
>
> <div id="titles">
>
> <h1>ERROR</h1>
>
> <h2>The requested URL could not be retrieved</h2>
>
> </div>
>
> <hr>
>
>
>
> <div id="content">
>
> <p>The following error was encountered while trying to retrieve the URL:
> <a href="www.zscaler.com:80">www.zscaler.com:80</a></p>
>
> ......
>
>
>
>
>
>
>
> Thank you for any help on the understanding!
>
>
>
> Paul Ling
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20220304/9a1a0fb8/attachment.htm>

From ngtech1ltd at gmail.com  Fri Mar  4 13:51:44 2022
From: ngtech1ltd at gmail.com (Eliezer Croitoru)
Date: Fri, 4 Mar 2022 15:51:44 +0200
Subject: [squid-dev] CVE-2019-12522
In-Reply-To: <1c959dcc-9845-9067-4ab3-8297c08621b3@treenet.co.nz>
References: <111b1b44-b7c1-c20d-1483-036f076e383f@suse.de>
 <26579a5e-5fa8-499e-122d-778a2a73042e@treenet.co.nz>
 <003b01d82ef3$64130b90$2c3922b0$@gmail.com>
 <1c959dcc-9845-9067-4ab3-8297c08621b3@treenet.co.nz>
Message-ID: <007b01d82fce$fd5f9da0$f81ed8e0$@gmail.com>

Thanks!!

----
Eliezer Croitoru
NgTech, Tech Support
Mobile: +972-5-28704261
Email: ngtech1ltd at gmail.com

-----Original Message-----
From: squid-dev <squid-dev-bounces at lists.squid-cache.org> On Behalf Of Amos
Jeffries
Sent: Friday, March 4, 2022 06:43
To: squid-dev at lists.squid-cache.org
Subject: Re: [squid-dev] CVE-2019-12522

On 4/03/22 00:39, Eliezer Croitoru wrote:
> I'm still trying to understand why it's described as "exploitable" ???
> It's like saying: The Linux Kernel should not be a kernel and init(or
> equivalent) should not run with uid 0 or 1.
> Why nobody complains about cockpit being a root process??
> 

This explains the _type_ of problem 
<https://secureteam.co.uk/articles/how-return-oriented-programming-exploits-
work/>.


Most Squid are automatically protected against it by at least one of OS 
or compiler systems. But some can still be vulnerable, as shown by Jerkio.

Amos
_______________________________________________
squid-dev mailing list
squid-dev at lists.squid-cache.org
http://lists.squid-cache.org/listinfo/squid-dev


From rousskov at measurement-factory.com  Fri Mar  4 15:20:16 2022
From: rousskov at measurement-factory.com (Alex Rousskov)
Date: Fri, 4 Mar 2022 10:20:16 -0500
Subject: [squid-dev] ERR_CONFLICT_HOST for HTTP CONNECT request on port
 80
In-Reply-To: <CAFkUB7j99qLh491KhqiF5BNM5LKkw9n9uP3aQ5H_gBPEs1hhQA@mail.gmail.com>
References: <CAFkUB7i6FWDewS+WQOTPesh1=K=gLy8WJveOOAx8tbGHF2Et6Q@mail.gmail.com>
 <007001d82f6f$941e03e0$bc5a0ba0$@gmail.com>
 <CAFkUB7j99qLh491KhqiF5BNM5LKkw9n9uP3aQ5H_gBPEs1hhQA@mail.gmail.com>
Message-ID: <86c96b0a-c7d6-64e8-1096-a133fd9107fb@measurement-factory.com>

On 3/4/22 03:25, YFone Ling wrote:

> I am here just try to understand how the squid determines host conflicts 
> for a simple http connect proxy request?

The complete answer to your question is large/complicated and 
Squid-version dependent, but, AFAICT, there are no conflicts in the 
simple CONNECT request you have shared. Either the Squid in question is 
buggy or something else is going on (that is not visible in the output 
you have shared).

Are you absolutely sure the CONNECT request looks exactly like the one 
you have copy-pasted? How do you observe that CONNECT request?

Can you reproduce this exact problem using, say, "nc" or "telnet" as a 
proxy client (no TLS)?

Normally, proxies that accept CONNECT requests do not listen on or 
intercept port 80. Normally, CONNECT requests do not target port 80 
either. Are you sure you are supposed to send a CONNECT request to port 
80 and target an origin server port 80?


What do the WiFi providers tell you when you complain to _them_? Can 
they get you in touch with the technical people responsible for their 
Squids?

Alex.




> On Thu, Mar 3, 2022 at 6:28 PM Eliezer Croitoru <ngtech1ltd at gmail.com 
> <mailto:ngtech1ltd at gmail.com>> wrote:
> 
>     I am not sure if it?s for Squid-dev but anyway to clear out the
>     doubts I would suggest attaching the squid.conf
>     and remember to remove any sensitive data.____
> 
>     __ __
> 
>     Eliezer____
> 
>     __ __
> 
>     ----____
> 
>     Eliezer Croitoru____
> 
>     NgTech, Tech Support____
> 
>     Mobile: +972-5-28704261____
> 
>     Email: ngtech1ltd at gmail.com <mailto:ngtech1ltd at gmail.com>____
> 
>     __ __
> 
>     *From:* squid-dev <squid-dev-bounces at lists.squid-cache.org
>     <mailto:squid-dev-bounces at lists.squid-cache.org>> *On Behalf Of
>     *YFone Ling
>     *Sent:* Thursday, March 3, 2022 22:55
>     *To:* squid-dev at lists.squid-cache.org
>     <mailto:squid-dev at lists.squid-cache.org>
>     *Subject:* [squid-dev] ERR_CONFLICT_HOST for HTTP CONNECT request on
>     port 80____
> 
>     __ __
> 
>     My application sends? HTTP CONNECT requests to a HTTP proxy port 80,
>     but gets a squid?ERR_CONFLICT_HOST error page.____
> 
>     __ __
> 
>     Is the following code really working as the comments pointed out
>     "ignore them" since the following if condition is
>     "http->request->method != Http::METHOD_CONNECT"____
> 
>     and the rest has been blocked by error page
>     "repContext->setReplyToError(ERR_CONFLICT_HOST, Http::scConflict,"?____
> 
>     __ __
> 
>     Does "ignore them" mean block them? ____
> 
>     void____
> 
>     	
> 
>     ClientRequestContext::hostHeaderVerifyFailed(const char *A, const
>     char *B)____
> 
>     	
> 
>     {____
> 
>     	
> 
>     // IP address validation for Host: failed. Admin wants to ignore
>     them.____
> 
>     	
> 
>     // NP: we do not yet handle CONNECT tunnels well, so ignore for them____
> 
>     	
> 
>     if (!Config.onoff.hostStrictVerify && http->request->method !=
>     Http::METHOD_CONNECT) {____
> 
>     	
> 
>     debugs(85, 3, "SECURITY ALERT: Host header forgery detected on " <<
>     http->getConn()->clientConnection <<____
> 
>     	
> 
>     "(" << A << "does not match " << B << ") on URL: " <<
>     http->request->effectiveRequestUri());____
> 
>     	
> 
>     __ __
> 
>     __ __
> 
>     How does the squid get "hostHeaderVerifyFailed" for a normal HTTP
>     CONNECT request to?a HTTP Proxy as simple as below?____
> 
>     __ __
> 
>         CONNECT www.zscaler.com:80 <http://www.zscaler.com:80> HTTP/1.1____
> 
>         Host: www.zscaler.com:80 <http://www.zscaler.com:80>____
> 
>         User-Agent: Windows Microsoft Windows 10 Enterprise ZTunnel/1.0____
> 
>         Proxy-Connection: keep-alive____
> 
>         Connection: keep-alive____
> 
>     __ __
> 
>         HTTP/1.1 409 Conflict____
> 
>         Server: squid____
> 
>         Mime-Version: 1.0____
> 
>         Date: Tue, 22 Feb 2022 20:59:42 GMT____
> 
>         Content-Type: text/html;charset=utf-8____
> 
>         Content-Length: 2072____
> 
>         X-Squid-Error: ERR_CONFLICT_HOST 0____
> 
>         Vary: Accept-Language____
> 
>         Content-Language: en____
> 
>         X-Cache: MISS from 3____
> 
>         Via: 1.1 3 (squid)____
> 
>         Connection: keep-alive____
> 
>     __ __
> 
>         </head><body id=ERR_CONFLICT_HOST>____
> 
>         <div id="titles">____
> 
>         <h1>ERROR</h1>____
> 
>         <h2>The requested URL could not be retrieved</h2>____
> 
>         </div>____
> 
>         <hr>____
> 
>     __ __
> 
>         <div id="content">____
> 
>         <p>The following error was encountered while trying to retrieve
>         the URL: <a href="www.zscaler.com:80
>         <http://www.zscaler.com:80>">www.zscaler.com:80
>         <http://www.zscaler.com:80></a></p>____
> 
>         ......____
> 
>         __ __
> 
>         __ __
> 
>         __ __
> 
>     Thank you for any help on the understanding!____
> 
>     __ __
> 
>     Paul Ling____
> 
> 
> _______________________________________________
> squid-dev mailing list
> squid-dev at lists.squid-cache.org
> http://lists.squid-cache.org/listinfo/squid-dev


From amajer at suse.de  Tue Mar  8 12:42:56 2022
From: amajer at suse.de (Adam Majer)
Date: Tue, 8 Mar 2022 13:42:56 +0100
Subject: [squid-dev] missing squid release tags
Message-ID: <97ea518c-3278-642a-ff24-9727247afc45@suse.de>

Hi,

Looks like release tags for squid are not getting sent to github.

https://github.com/squid-cache/squid/tags

- Adam

