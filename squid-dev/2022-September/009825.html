<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] security_file_certgen protocol
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20security_file_certgen%20protocol&In-Reply-To=%3C530810dc-e9e4-bf7d-b21e-0cc37154d123%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009824.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] security_file_certgen protocol</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20security_file_certgen%20protocol&In-Reply-To=%3C530810dc-e9e4-bf7d-b21e-0cc37154d123%40measurement-factory.com%3E"
       TITLE="[squid-dev] security_file_certgen protocol">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Sep 22 15:36:02 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009824.html">[squid-dev] security_file_certgen protocol
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9825">[ date ]</a>
              <a href="thread.html#9825">[ thread ]</a>
              <a href="subject.html#9825">[ subject ]</a>
              <a href="author.html#9825">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 9/22/22 10:03, <A HREF="http://lists.squid-cache.org/listinfo/squid-dev">ngtech1ltd at gmail.com</A> wrote:

&gt;<i> I am trying to write a service like security_file_certgen as a daemon that will be communicated  via a TCP or UNIX Socket.
</I>&gt;<i> However, it&#8217;s a bit hard for me now to grasp the STDIN/STDOUT protocol of security_file_certgen.
</I>&gt;<i> I remember vaguely that it involves reading from some string (else then new lines) to another and then sends back
</I>&gt;<i> to stdout a certificate string.
</I>&gt;<i> 
</I>&gt;<i> So what are the parts of the request object and what are the parts of the response object?
</I>&gt;<i> If I will grasp it I will be able to model it in a single ruby script.
</I>&gt;<i> 
</I>&gt;<i> I know this is not the first time I am asking about this and it&#8217;s harder for me that I forget such simple things.
</I>&gt;<i> I will be thankful for any help with this.
</I>
The basic protocol syntax is documented at 
<A HREF="https://wiki.squid-cache.org/Features/AddonHelpers#SSL_certificate_generation">https://wiki.squid-cache.org/Features/AddonHelpers#SSL_certificate_generation</A>

Beyond that, there is source code and actual traffic that you can 
analyze, of course, but there is no comprehensive documentation AFAICT.

Please note that Squid workers already communicate with these helpers 
via TCP or UNIX sockets. The helpers just do not know that because a 
forked intermediary process remaps those sockets to helper stdin/stdout 
descriptors. See `git grep -1 define.IPC_STREAM` and dup2() in ipcCreate().


HTH,

Alex.
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009824.html">[squid-dev] security_file_certgen protocol
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9825">[ date ]</a>
              <a href="thread.html#9825">[ thread ]</a>
              <a href="subject.html#9825">[ subject ]</a>
              <a href="author.html#9825">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
