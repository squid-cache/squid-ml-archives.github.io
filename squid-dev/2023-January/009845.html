<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] Drop cache_object protocol support
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Drop%20cache_object%20protocol%20support&In-Reply-To=%3Cdea6512a-b10f-183b-ae9c-ae49f70468aa%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009844.html">
   <LINK REL="Next"  HREF="009846.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] Drop cache_object protocol support</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Drop%20cache_object%20protocol%20support&In-Reply-To=%3Cdea6512a-b10f-183b-ae9c-ae49f70468aa%40measurement-factory.com%3E"
       TITLE="[squid-dev] Drop cache_object protocol support">rousskov at measurement-factory.com
       </A><BR>
    <I>Tue Jan 24 19:23:21 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009844.html">[squid-dev] Drop cache_object protocol support
</A></li>
        <LI>Next message (by thread): <A HREF="009846.html">[squid-dev] Drop cache_object protocol support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9845">[ date ]</a>
              <a href="thread.html#9845">[ thread ]</a>
              <a href="subject.html#9845">[ subject ]</a>
              <a href="author.html#9845">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 1/24/23 12:22, Eduard Bagdasaryan wrote:

&gt;<i> Today we can query cache manager in two ways:
</I>&gt;<i> 
</I>&gt;<i> 1. with cache_<A HREF="object://">object://</A> URL scheme
</I>&gt;<i> 2. with an HTTP request having the 'squid-internal-mgr' path prefix.
</I>&gt;<i> 
</I>&gt;<i> I guess that when (2) was initially added at e37bd29, its implementation 
</I>&gt;<i> was somewhat incomplete compared to the old cache_object scheme (e.g., 
</I>&gt;<i> it lacked authentication) and both methods existed. Since then, however, 
</I>&gt;<i> (2) has been improved and it should be equivalent to (1) by now.&#160; If so, 
</I>&gt;<i> can we completely remove the non-standard cache_object scheme support 
</I>&gt;<i> from Squid? This would simplify request forwarding logic, including code 
</I>&gt;<i> paths where the existing code complexity may result in vulnerability 
</I>&gt;<i> issues.
</I>

FWIW, I am not aware of any good reason to keep supporting the 
&quot;cache_object&quot; URI scheme.

MgrFieldChars() already calls that scheme deprecated. That special (and 
undocumented?) scheme did cause significant problems in the past. I am 
sure it will continue to cause problems if not removed. Removing it will 
simplify code in several tricky places. There will be some upgrade pains 
for admins, but we will be better off without cache_object long-term IMO.

Needless to say, squidclient and cachemgr.cgi implementations would need 
to be adjusted to use HTTP URLs instead, but I hope those adjustments 
are straightforward.


HTH,

Alex.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009844.html">[squid-dev] Drop cache_object protocol support
</A></li>
	<LI>Next message (by thread): <A HREF="009846.html">[squid-dev] Drop cache_object protocol support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9845">[ date ]</a>
              <a href="thread.html#9845">[ thread ]</a>
              <a href="subject.html#9845">[ subject ]</a>
              <a href="author.html#9845">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
