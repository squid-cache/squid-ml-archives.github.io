<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] Drop cache_object protocol support
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Drop%20cache_object%20protocol%20support&In-Reply-To=%3C7f9b03b0-e050-0526-19ca-95e611ced66e%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009851.html">
   <LINK REL="Next"  HREF="009852.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] Drop cache_object protocol support</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Drop%20cache_object%20protocol%20support&In-Reply-To=%3C7f9b03b0-e050-0526-19ca-95e611ced66e%40measurement-factory.com%3E"
       TITLE="[squid-dev] Drop cache_object protocol support">rousskov at measurement-factory.com
       </A><BR>
    <I>Wed Jan 25 14:30:11 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009851.html">[squid-dev] Drop cache_object protocol support
</A></li>
        <LI>Next message (by thread): <A HREF="009852.html">[squid-dev] Drop cache_object protocol support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9850">[ date ]</a>
              <a href="thread.html#9850">[ thread ]</a>
              <a href="subject.html#9850">[ subject ]</a>
              <a href="author.html#9850">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 1/25/23 07:29, Amos Jeffries wrote:
&gt;<i> On 25/01/2023 5:34 pm, Alex Rousskov wrote:
</I>&gt;&gt;<i> On 1/24/23 20:57, Amos Jeffries wrote:
</I>&gt;&gt;&gt;<i> Blocker #2: The squidclient tool still sends cache_object: scheme 
</I>&gt;&gt;&gt;<i> when given &quot;mgr:&quot; on the CLI. We need to upgrade that first 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Looks like we are in agreement on that.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> and allow admin some time to upgrade before removing the scheme 
</I>&gt;&gt;&gt;<i> support in squid itself.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Agreed. Would six months be enough in your opinion? If yes, we may be 
</I>&gt;&gt;<i> able to remove cache_object support in v6. Otherwise, we can remove 
</I>&gt;&gt;<i> cache_object support starting with v7 (as far as numbered releases are 
</I>&gt;&gt;<i> concerned).
</I>
&gt;<i> v6 will &quot;feature freeze&quot; in 10 days.
</I>
With proper cooperation, 10 days is more than enough to remove 
cache_object support, but I am not going to fight for that given your 
resistance.


&gt;<i> Early in v7 cycle should be good.
</I>
Unless you stop me, I will post a message to squid-users to warn the 
admins that they should not count on Squid instances supporting 
cache_object scheme in v7 releases.


&gt;&gt;<i> IMO, we should not keep any code that is only needed for Squid v3.1 
</I>&gt;&gt;<i> and earlier. Squid v3.2 and later should http-based cache manager 
</I>&gt;&gt;<i> access, right? More code always means more maintenance overheads and 
</I>&gt;&gt;<i> higher change costs. Given our lack of resources, we should start 
</I>&gt;&gt;<i> ignoring Squid v3 needs.
</I>&gt;<i> 
</I>&gt;<i> In sentiment I agree. In practicality we have to cope with &quot;LTS&quot; from 
</I>&gt;<i> vendors, and Squid bugs in the manager.
</I>
IMO, LTS vendors and old Squid bugs do not prevent us from removing 
cache_object support from cachemgr.cgi: The number of admins that match 
_all_ of the conditions listed below at the same time is negligible. We 
should not spend our resources &quot;coping&quot; with those esoteric cases.

1. Use Squid v3.
2. Use Squid v7.
3. Use cachemgr.cgi to manage both Squid versions.
4. Cannot use cachemgr.cgi from Squid v6.
5. Cannot patch cachemgr.cgi v7 to restore cache_object support.


&gt;<i> v3.2 has http: but the https:, ftp:, whois:, gopher: schemes were broken 
</I>&gt;<i> until late in the v3.5 series backports.
</I>&gt;<i> So going by [1] LTS systems still using v3.2 are still a pain.
</I>
We can stop that pain any time we want. All it takes is for us to stop 
mentioning v3 releases when making design decisions like this one. We 
_choose_ to prolong that pain and to spend scarce resources on a 
negligible percentage of unimportant use cases instead of spending those 
resources on popular and important use cases.


&gt;<i> For completeness, that MGR_INDEX regression you fixed a short while ago 
</I>&gt;<i> also means some broken v4/v5 releases may be a pain source during the 
</I>&gt;<i> transition.
</I>
Those releases should not be considered a pain in this context because 
if that bug is actually important, it will be fixed in those releases.


&gt;<i> The longer we wait on removal from the CGI and CLI tools (only) the more 
</I>&gt;<i> seamless it goes. So I am inclined to be very conservative on the tools 
</I>&gt;<i> capability removal and proactive on ensuring they can cope with the 
</I>&gt;<i> squid capability loss.
</I>
And since there is no way to actually measure &quot;more seamless&quot; or to 
prove that we are wasting resources on rare unimportant use cases, we 
end up doing what we do best -- increasing and prolonging pain.

Alex.

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009851.html">[squid-dev] Drop cache_object protocol support
</A></li>
	<LI>Next message (by thread): <A HREF="009852.html">[squid-dev] Drop cache_object protocol support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9850">[ date ]</a>
              <a href="thread.html#9850">[ thread ]</a>
              <a href="subject.html#9850">[ subject ]</a>
              <a href="author.html#9850">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
