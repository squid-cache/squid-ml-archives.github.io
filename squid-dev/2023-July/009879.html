<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] RFC: Transitioning ipcache and fqdncache to ClpMap
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20RFC%3A%20Transitioning%20ipcache%20and%20fqdncache%20to%20ClpMap&In-Reply-To=%3CCA%2BY8hcNn9MczbhhxF0_8fKSKoW%2B-nN%3DJThHgB6qL2hDTqcSEUA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="009880.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] RFC: Transitioning ipcache and fqdncache to ClpMap</H1>
    <B>Francesco Chemolli</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20RFC%3A%20Transitioning%20ipcache%20and%20fqdncache%20to%20ClpMap&In-Reply-To=%3CCA%2BY8hcNn9MczbhhxF0_8fKSKoW%2B-nN%3DJThHgB6qL2hDTqcSEUA%40mail.gmail.com%3E"
       TITLE="[squid-dev] RFC: Transitioning ipcache and fqdncache to ClpMap">gkinkie at gmail.com
       </A><BR>
    <I>Tue Jul 11 07:35:35 UTC 2023</I>
    <P><UL>
        
        <LI>Next message (by thread): <A HREF="009880.html">[squid-dev] RFC: Transitioning ipcache and fqdncache to ClpMap
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9879">[ date ]</a>
              <a href="thread.html#9879">[ thread ]</a>
              <a href="subject.html#9879">[ subject ]</a>
              <a href="author.html#9879">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,
   I'd like to start working on transitioning ipcache and fqdncache to
ClpMap .
There is only one snag, that I would like to build consensus on before
starting coding: the current configuration directives specify a cache size
in number of entries, where ClpMap specifies a max size.

I can see two ways forward:
1. Add a second max-size parameter to ClpMap, ensuring that it starts
expunging entries when the maximum capacity in either memory use or number
of entries is reached
2. guesstimate how many bytes of memory an ipcache/fqdncache uses, and
convert

Regardless, I believe that from the user-facing perspective, a solid way
forward is to give to the ipcache_size and fqdncache_size directives an
option to specify a max size in entries or, by adding a memory-size suffix,
in used memory, and possibly deprecate the max-size-in-entries option in
Squid 7 and retire it in squid 8.

Thoughts?

-- 
    Francesco
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-dev/attachments/20230711/53e38ef7/attachment.htm">http://lists.squid-cache.org/pipermail/squid-dev/attachments/20230711/53e38ef7/attachment.htm</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message (by thread): <A HREF="009880.html">[squid-dev] RFC: Transitioning ipcache and fqdncache to ClpMap
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9879">[ date ]</a>
              <a href="thread.html#9879">[ thread ]</a>
              <a href="subject.html#9879">[ subject ]</a>
              <a href="author.html#9879">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
