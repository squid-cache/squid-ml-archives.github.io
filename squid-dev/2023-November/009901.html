<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] RFC: Squid documentation upgrade
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20RFC%3A%20Squid%20documentation%20upgrade&In-Reply-To=%3C49e8c874-c6bf-4e63-8430-c2fcda54aed4%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009900.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] RFC: Squid documentation upgrade</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20RFC%3A%20Squid%20documentation%20upgrade&In-Reply-To=%3C49e8c874-c6bf-4e63-8430-c2fcda54aed4%40measurement-factory.com%3E"
       TITLE="[squid-dev] RFC: Squid documentation upgrade">rousskov at measurement-factory.com
       </A><BR>
    <I>Wed Nov 15 17:26:06 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009900.html">[squid-dev] RFC: Squid documentation upgrade
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9901">[ date ]</a>
              <a href="thread.html#9901">[ thread ]</a>
              <a href="subject.html#9901">[ subject ]</a>
              <a href="author.html#9901">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2023-11-15 11:28, Amos Jeffries wrote:
&gt;<i> On 12/10/23 03:32, Alex Rousskov wrote:
</I>&gt;&gt;<i> On 2023-10-11 02:25, Amos Jeffries wrote:
</I>&gt;&gt;&gt;<i> Hi all,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> As those familiar with Squid sources will know the documentation of 
</I>&gt;&gt;&gt;<i> Squid is currently spread across various formats. Some custom ones, 
</I>&gt;&gt;&gt;<i> and some very outdated.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> So far we have a casual agreement amongst the core dev team to use 
</I>&gt;&gt;&gt;<i> Markdown when reasonably possible. If anyone has issues with that 
</I>&gt;&gt;&gt;<i> please chime in ASAP, otherwise I shall continue under the assumption 
</I>&gt;&gt;&gt;<i> that we are good to make it &quot;official&quot;.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> FWIW, I (still) agree that we should use Markdown as human-friendly 
</I>&gt;&gt;<i> text input format, where reasonable.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I am looking at the &lt;<A HREF="https://pandoc.org/">https://pandoc.org/</A>&gt; Markdown tools as possible 
</I>&gt;&gt;&gt;<i> replacement of linuxdoc tools to translate automatically the 
</I>&gt;&gt;&gt;<i> following documentation outputs:
</I>&gt;&gt;&gt;<i> &#160;&#160;* release notes,
</I>&gt;&gt;&gt;<i> &#160;&#160;* squid.conf.documented,
</I>&gt;&gt;&gt;<i> &#160;&#160;* the .man / .info / .pdf files,
</I>&gt;&gt;&gt;<i> &#160;&#160;* the INSTALL and QUICKSETUP files
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I do not know what &quot;translate [squid.conf.documented and .pdf] 
</I>&gt;&gt;<i> automatically&quot; (to Markdown) means to you in this context,
</I>
&gt;<i> Markdown is the proposed source format (in the repository).
</I>&gt;<i> 
</I>&gt;<i> The files I listed are **currently** auto-generated from a variety of 
</I>&gt;<i> different source formats. My proposal is to change the sources to 
</I>&gt;<i> generate **from** Markdown to the various output as-needed.
</I>
Thank you for this clarification. Let's see whether we can reach a rough 
agreement on what sources to change and how to change them before 
changing anything.


&gt;&gt;<i> * release notes: I recommend discussing changes to release notes 
</I>&gt;&gt;<i> maintenance and structure before changing their format. It would be 
</I>&gt;&gt;<i> nice to address several persistent problems that we often bump into 
</I>&gt;&gt;<i> when working on release notes PRs.
</I>&gt;<i> 
</I>&gt;<i> That is a different topic of discussion. I am specifically *not* 
</I>&gt;<i> changing the produced outputs content.
</I>
It is the input that worries me, not the output. AFAICT, you _are_ 
proposing changing how release notes are written (i.e. input). My 
recommendation stands.


&gt;&gt;<i> * squid.conf.documented: The format of that file is Squid 
</I>&gt;&gt;<i> configuration format, not Markdown.
</I>
&gt;<i> Well, yes that is the point. I am hoping the text inside COMMENT, and 
</I>&gt;<i> DOC sections can use Markdown so we can auto-generate documentation 
</I>&gt;<i> files like a squid.conf.8 or the .html more easily with links - without 
</I>&gt;<i> making the plain-text form obtuse.
</I>
I support changing text inside COMMENT and DOC sections to Markdown, but 
only if that change is accompanied by cf.data.pre restructuring. IIRC, 
migration to Markdown was a part of those restructuring plans/discussions.


&gt;&gt;<i> We have discussed how cf.data.pre and friends should be
</I>&gt;&gt;<i> restructured and reformatted. We should finish those discussions
</I>&gt;&gt;<i> and implement those changes instead.
</I>
&gt;<i> IIRC we last discussed it back around 2009-ish with Henrick's proposal 
</I>&gt;<i> to split it into a set of multiple files. Are you referring to that?
</I>
I believe that those discussions did include the idea of splitting 
cf.data.pre, including providing a dedicated file for each squid.conf 
directive. I do not think those discussions were limited to that idea.

One of the problems we need to address during this restructuring is 
referencing, at least at the level of individual directives and major 
syntax concepts. At the end, one directive description should be able to 
refer to another directive or concept, with rendered versions providing 
the corresponding links and indexes.


&gt;&gt;<i> * .man, .info, .pdf files: Your call (assuming .8 and similar source 
</I>&gt;&gt;<i> files in squid repository remain unchanged).
</I>&gt;<i> 
</I>&gt;<i> Assumption is wrong. What I mean is that the source document gets 
</I>&gt;<i> converted to Markdown and we have the tools auto-generate the man.8, 
</I>&gt;<i> info, or pdf files from that as needed by the user/distro.
</I>
Thank you for clarifying this! I need more information to make a 
decision on this item:

* Do you plan to exclude .8 files that are currently generated from 
other sources (e.g., src/log/DB/log_db_daemon.8 and 
src/security/cert_validators/fake/security_fake_certverify.8)?

* AFAICT, .8 files are written in troff or mdoc. Those formatting 
languages have lots of documentation-focused macros that standard 
Markdown does not support. Is there a variation of Markdown (that you 
plan to use for manual page conversion) that adds documentation-writing 
markup? Or are we going to &quot;dumb down&quot; this documentation due to 
Markdown inability to express certain documentation concepts?


&gt;&gt;<i> * INSTALL and QUICKSETUP: I support rewriting these and other 
</I>&gt;&gt;<i> top-level [A-Z]* files in Markdown, where possible. The other 
</I>&gt;&gt;<i> candidates are CONTRIBUTORS, COPYING, CREDITS, ChangeLog, README, and 
</I>&gt;&gt;<i> SPONSORS(.list).
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> COPYING is not on the table since that is the mandatory GPL text not 
</I>&gt;<i> under our control.
</I>
I am not sure we cannot convert COPYING to valid Markdown without 
violating GPL, but I am not going to argue about it. Glad we appear to 
agree regarding the other top-level [A-Z]* files. FWIW, except for 
ChangeLog and CONTRIBUTORS, that part of the conversion can start at any 
time. I recommend converting one file at a time, at least in the 
beginning (to reduce the number of changes we have to redo during review 
cycles).


Cheers,

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009900.html">[squid-dev] RFC: Squid documentation upgrade
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9901">[ date ]</a>
              <a href="thread.html#9901">[ thread ]</a>
              <a href="subject.html#9901">[ subject ]</a>
              <a href="author.html#9901">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
