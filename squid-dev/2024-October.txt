From shavashishth at gmail.com  Thu Oct  3 19:49:57 2024
From: shavashishth at gmail.com (Shailesh Vashishth)
Date: Fri, 4 Oct 2024 01:19:57 +0530
Subject: [squid-dev] Introducing myself to Squid Devs
Message-ID: <CABHxcGm+idiH_jxqFWnYB5zYVUismhb-4_GTP54-E8oeTHNY0A@mail.gmail.com>

Hi Squid Devs
I am a Site Reliability Engineer at Juspay (FinTech company in India).

I first introduced myself to Alex and Amos and asked to be involved in the
Squid Project, who asked me to pick one task from
https://wiki.squid-cache.org/RoadMap/Tasks, if I wanted to.

I would like to contribute to the Squid Project and I have picked one small
task out of the ToDos  for myself.


> *// XXX: This is absurd! TODO: For positives, "a/(b/c) > d" is "a*c >
> b*d".*
> *if (expectlen < 100) {*
> *   debugs(90, 3, "quick-abort? NO avoid FPE");*
> *   return false;**}*


> *if ((curlen / (expectlen / 100)) > (Config.quickAbort.pct)) {*
> *   debugs(90, 3, "quick-abort? NO past point of no return");*
> *   return false;**}*


Regards,
Shailesh Vashishth
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20241004/217c9726/attachment.htm>

From rousskov at measurement-factory.com  Fri Oct  4 13:23:22 2024
From: rousskov at measurement-factory.com (Alex Rousskov)
Date: Fri, 4 Oct 2024 09:23:22 -0400
Subject: [squid-dev] Introducing myself to Squid Devs
In-Reply-To: <CABHxcGm+idiH_jxqFWnYB5zYVUismhb-4_GTP54-E8oeTHNY0A@mail.gmail.com>
References: <CABHxcGm+idiH_jxqFWnYB5zYVUismhb-4_GTP54-E8oeTHNY0A@mail.gmail.com>
Message-ID: <7f9a3302-2798-4699-a8a5-d01d6ce5d131@measurement-factory.com>

On 2024-10-03 15:49, Shailesh Vashishth wrote:

> I would like to contribute to the Squid Project and I have picked one 
> small task out of the?ToDos? for myself.


Hello Shailesh,

     Welcome to the Project and good luck with your first task! If you 
need any help, please do not hesitate to ask on this mailing list or to 
post a draft pull request for discussion on GitHub:
https://wiki.squid-cache.org/MergeProcedure

BTW, I have also emailed you a few hints regarding the code below when 
you asked about it privately -- check your spam folder if you have not 
seen my response dated September 30, 2024...


Cheers,

Alex.


>     *// XXX: This is absurd! TODO: For positives, "a/(b/c) > d" is "a*c
>      > b*d".
>     **if (expectlen < 100) {
>     **? ?debugs(90, 3, "quick-abort? NO avoid FPE");
>     **? ?return false;
>     **}* 
> 
>     */_if ((curlen / (expectlen / 100)) > (Config.quickAbort.pct)) {
>     _/**? ?debugs(90, 3, "quick-abort? NO past point of no return");
>     **? ?return false;
>     **}*






From shavashishth at gmail.com  Sat Oct  5 07:57:53 2024
From: shavashishth at gmail.com (Shailesh Vashishth)
Date: Sat, 5 Oct 2024 13:27:53 +0530
Subject: [squid-dev] Introducing myself to Squid Devs
In-Reply-To: <7f9a3302-2798-4699-a8a5-d01d6ce5d131@measurement-factory.com>
References: <CABHxcGm+idiH_jxqFWnYB5zYVUismhb-4_GTP54-E8oeTHNY0A@mail.gmail.com>
 <7f9a3302-2798-4699-a8a5-d01d6ce5d131@measurement-factory.com>
Message-ID: <CABHxcGko8e_X7gX7+81d4UM+MgSkX3OS3h-F=i16pzxtFe2Xxw@mail.gmail.com>

Hi Alex,
I read your hint and made changes accordingly, it didn't go to spam this
time. I was going through the Squid Docs, on how to submit PR and do those
pre-merge self tests (Submission Checklist).

I will do the steps given in the Submission Checklist and submit a PR in a
day or two.

Thank you for helping me with getting started and joining the project.

Regards
Shailesh


On Fri, Oct 4, 2024 at 6:53?PM Alex Rousskov <
rousskov at measurement-factory.com> wrote:

> On 2024-10-03 15:49, Shailesh Vashishth wrote:
>
> > I would like to contribute to the Squid Project and I have picked one
> > small task out of the ToDos  for myself.
>
>
> Hello Shailesh,
>
>      Welcome to the Project and good luck with your first task! If you
> need any help, please do not hesitate to ask on this mailing list or to
> post a draft pull request for discussion on GitHub:
> https://wiki.squid-cache.org/MergeProcedure
>
> BTW, I have also emailed you a few hints regarding the code below when
> you asked about it privately -- check your spam folder if you have not
> seen my response dated September 30, 2024...
>
>
> Cheers,
>
> Alex.
>
>
> >     *// XXX: This is absurd! TODO: For positives, "a/(b/c) > d" is "a*c
> >      > b*d".
> >     **if (expectlen < 100) {
> >     **   debugs(90, 3, "quick-abort? NO avoid FPE");
> >     **   return false;
> >     **}*
> >
> >     */_if ((curlen / (expectlen / 100)) > (Config.quickAbort.pct)) {
> >     _/**   debugs(90, 3, "quick-abort? NO past point of no return");
> >     **   return false;
> >     **}*
>
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20241005/364ab74b/attachment.htm>

From shavashishth at gmail.com  Tue Oct 22 19:00:55 2024
From: shavashishth at gmail.com (Shailesh Vashishth)
Date: Wed, 23 Oct 2024 00:30:55 +0530
Subject: [squid-dev] Introducing myself to Squid Devs
In-Reply-To: <CABHxcGko8e_X7gX7+81d4UM+MgSkX3OS3h-F=i16pzxtFe2Xxw@mail.gmail.com>
References: <CABHxcGm+idiH_jxqFWnYB5zYVUismhb-4_GTP54-E8oeTHNY0A@mail.gmail.com>
 <7f9a3302-2798-4699-a8a5-d01d6ce5d131@measurement-factory.com>
 <CABHxcGko8e_X7gX7+81d4UM+MgSkX3OS3h-F=i16pzxtFe2Xxw@mail.gmail.com>
Message-ID: <CABHxcGkQ5zHVekHayCXZL_8f-yzAryNQtHNmCjgxK53jb3hhOw@mail.gmail.com>

Hi
I have made a change to a math expression in store_client.cc and raised the
following pull request.

if (curlen > expectlen*(Config.quickAbort.pct/100.0)) {
debugs(90, 3, "quick-abort? NO past point of no return");
return false;
}

I have also ran the test-build.sh (suggested in Submissions Checklist) and
it passed all test cases.

Please review the following pull request -
https://github.com/squid-cache/squid/pull/1921

Regards
Shailesh

On Sat, Oct 5, 2024 at 1:27?PM Shailesh Vashishth <shavashishth at gmail.com>
wrote:

> Hi Alex,
> I read your hint and made changes accordingly, it didn't go to spam this
> time. I was going through the Squid Docs, on how to submit PR and do those
> pre-merge self tests (Submission Checklist).
>
> I will do the steps given in the Submission Checklist and submit a PR in a
> day or two.
>
> Thank you for helping me with getting started and joining the project.
>
> Regards
> Shailesh
>
>
> On Fri, Oct 4, 2024 at 6:53?PM Alex Rousskov <
> rousskov at measurement-factory.com> wrote:
>
>> On 2024-10-03 15:49, Shailesh Vashishth wrote:
>>
>> > I would like to contribute to the Squid Project and I have picked one
>> > small task out of the ToDos  for myself.
>>
>>
>> Hello Shailesh,
>>
>>      Welcome to the Project and good luck with your first task! If you
>> need any help, please do not hesitate to ask on this mailing list or to
>> post a draft pull request for discussion on GitHub:
>> https://wiki.squid-cache.org/MergeProcedure
>>
>> BTW, I have also emailed you a few hints regarding the code below when
>> you asked about it privately -- check your spam folder if you have not
>> seen my response dated September 30, 2024...
>>
>>
>> Cheers,
>>
>> Alex.
>>
>>
>> >     *// XXX: This is absurd! TODO: For positives, "a/(b/c) > d" is "a*c
>> >      > b*d".
>> >     **if (expectlen < 100) {
>> >     **   debugs(90, 3, "quick-abort? NO avoid FPE");
>> >     **   return false;
>> >     **}*
>> >
>> >     */_if ((curlen / (expectlen / 100)) > (Config.quickAbort.pct)) {
>> >     _/**   debugs(90, 3, "quick-abort? NO past point of no return");
>> >     **   return false;
>> >     **}*
>>
>>
>>
>>
>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20241023/dc2b54f1/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test_build_output
Type: application/octet-stream
Size: 10438 bytes
Desc: not available
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20241023/dc2b54f1/attachment.obj>

From ngtech1ltd at gmail.com  Tue Oct 22 21:50:41 2024
From: ngtech1ltd at gmail.com (ngtech1ltd at gmail.com)
Date: Wed, 23 Oct 2024 00:50:41 +0300
Subject: [squid-dev] stable Squid build fails to be built on all EL9 distros
 for the past 2 years
Message-ID: <05b201db24cc$71fbd760$55f38620$@gmail.com>

Hey Everyone,

I have encountered a build issue on EL9 distros since 5.7 and while some of
the issues were fixed the 6.10 still wouldn't build on all EL9 distros.
It can be built on many other distributions and as far as I can tell it can
be built on Fedora 40.

I have updated the bug from 2022 to reflect the current issues:
https://bugs.squid-cache.org/show_bug.cgi?id=5236

I am not sure what is causing the build issue but I got couple requests in
the past year to help building for EL9.
Another thing is that due to the build issues I am using the EL8 for my tiny
local environment (which is OK in general) but I would have expected for 6.x
to be built properly on EL9 already.

What can I and maybe others do to help resolving the current build issues?

Thanks,

----
Eliezer Croitoru
NgTech, Tech Support
Mobile: +972-5-28704261
Email: ngtech1ltd at gmail.com


From squid3 at treenet.co.nz  Wed Oct 23 07:53:18 2024
From: squid3 at treenet.co.nz (Amos Jeffries)
Date: Wed, 23 Oct 2024 20:53:18 +1300
Subject: [squid-dev] stable Squid build fails to be built on all EL9
 distros for the past 2 years
In-Reply-To: <05b201db24cc$71fbd760$55f38620$@gmail.com>
References: <05b201db24cc$71fbd760$55f38620$@gmail.com>
Message-ID: <c3dca739-dbec-4c14-aa90-e42e5852bc3f@treenet.co.nz>

On 23/10/24 10:50, ngtech1ltd at gmail.com wrote:
> Hey Everyone,
> 
> I have encountered a build issue on EL9 distros since 5.7 and while some of
> the issues were fixed the 6.10 still wouldn't build on all EL9 distros.
> It can be built on many other distributions and as far as I can tell it can
> be built on Fedora 40.
> 
> I have updated the bug from 2022 to reflect the current issues:
> https://bugs.squid-cache.org/show_bug.cgi?id=5236
> 

The old bug was about out-of-bounds memory access in pinger.
That needed a code fix to Squid sources.


The new build trace you have is showing libltdl errors.
"
../libltdl/.libs/libltdlcS.c:27:12: error: type of 
'dlopen_LTX_get_vtable' does not match original declaration 
[-Werror=lto-type-mismatch]
../libltdl/loaders/dlopen.c:61:1: note: return value type mismatch
    61 | get_vtable (lt_user_data loader_data)
       | ^
../libltdl/loaders/dlopen.c:61:1: note: 'dlopen_LTX_get_vtable' was 
previously declared here
../libltdl/loaders/dlopen.c:61:1: note: code may be misoptimized unless 
'-fno-strict-aliasing' is used
lto1: all warnings being treated as errors
lto-wrapper: fatal error: g++ returned 1 exit status
compilation terminated.
"

These can usually be resolve by re-bootstrapping the sources on the 
affected OS.


Amos

From shavashishth at gmail.com  Fri Oct 25 19:24:09 2024
From: shavashishth at gmail.com (Shailesh Vashishth)
Date: Sat, 26 Oct 2024 00:54:09 +0530
Subject: [squid-dev] Introducing myself to Squid Devs
In-Reply-To: <CABHxcGkQ5zHVekHayCXZL_8f-yzAryNQtHNmCjgxK53jb3hhOw@mail.gmail.com>
References: <CABHxcGm+idiH_jxqFWnYB5zYVUismhb-4_GTP54-E8oeTHNY0A@mail.gmail.com>
 <7f9a3302-2798-4699-a8a5-d01d6ce5d131@measurement-factory.com>
 <CABHxcGko8e_X7gX7+81d4UM+MgSkX3OS3h-F=i16pzxtFe2Xxw@mail.gmail.com>
 <CABHxcGkQ5zHVekHayCXZL_8f-yzAryNQtHNmCjgxK53jb3hhOw@mail.gmail.com>
Message-ID: <CABHxcGmTx_VqQY3O+4STHdAYbsH9+8v0B8yFaCF_DWh9V0YWtA@mail.gmail.com>

Hi
I would like to take up another Todo item that is listed here --
https://github.com/measurement-factory/squid-notes/blob/start/todos.md

I would like to pick this item : I think this requires very small change,
where we just print *name_len *on the *stdout *using the custom function
for printing debug logs.


   - Address the following TODO by adding any using Raw::upto(n) which will
   limit the size value of passed to PrintHex() and write() inside
   Raw::print(). That value is currently size_.

if (name_len > 65534) {
> /* String must be LESS THAN 64K and it adds a terminating NULL */
> // TODO: update this to show proper name_len in Raw markup, but not print
> all that
> debugs(55, 2, "ignoring huge header field (" << Raw("field_start",
> field_start, 100) << "...)");
>


My current PR (*https://github.com/squid-cache/squid/pull/1921
<https://github.com/squid-cache/squid/pull/1921>*) has succeeded all
Pipeline stages, only your approval is remaining.

Regards
Shailesh

On Wed, Oct 23, 2024 at 12:30?AM Shailesh Vashishth <shavashishth at gmail.com>
wrote:

> Hi
> I have made a change to a math expression in store_client.cc and raised
> the following pull request.
>
> if (curlen > expectlen*(Config.quickAbort.pct/100.0)) {
> debugs(90, 3, "quick-abort? NO past point of no return");
> return false;
> }
>
> I have also ran the test-build.sh (suggested in Submissions Checklist) and
> it passed all test cases.
>
> Please review the following pull request -
> https://github.com/squid-cache/squid/pull/1921
>
> Regards
> Shailesh
>
> On Sat, Oct 5, 2024 at 1:27?PM Shailesh Vashishth <shavashishth at gmail.com>
> wrote:
>
>> Hi Alex,
>> I read your hint and made changes accordingly, it didn't go to spam this
>> time. I was going through the Squid Docs, on how to submit PR and do those
>> pre-merge self tests (Submission Checklist).
>>
>> I will do the steps given in the Submission Checklist and submit a PR in
>> a day or two.
>>
>> Thank you for helping me with getting started and joining the project.
>>
>> Regards
>> Shailesh
>>
>>
>> On Fri, Oct 4, 2024 at 6:53?PM Alex Rousskov <
>> rousskov at measurement-factory.com> wrote:
>>
>>> On 2024-10-03 15:49, Shailesh Vashishth wrote:
>>>
>>> > I would like to contribute to the Squid Project and I have picked one
>>> > small task out of the ToDos  for myself.
>>>
>>>
>>> Hello Shailesh,
>>>
>>>      Welcome to the Project and good luck with your first task! If you
>>> need any help, please do not hesitate to ask on this mailing list or to
>>> post a draft pull request for discussion on GitHub:
>>> https://wiki.squid-cache.org/MergeProcedure
>>>
>>> BTW, I have also emailed you a few hints regarding the code below when
>>> you asked about it privately -- check your spam folder if you have not
>>> seen my response dated September 30, 2024...
>>>
>>>
>>> Cheers,
>>>
>>> Alex.
>>>
>>>
>>> >     *// XXX: This is absurd! TODO: For positives, "a/(b/c) > d" is "a*c
>>> >      > b*d".
>>> >     **if (expectlen < 100) {
>>> >     **   debugs(90, 3, "quick-abort? NO avoid FPE");
>>> >     **   return false;
>>> >     **}*
>>> >
>>> >     */_if ((curlen / (expectlen / 100)) > (Config.quickAbort.pct)) {
>>> >     _/**   debugs(90, 3, "quick-abort? NO past point of no return");
>>> >     **   return false;
>>> >     **}*
>>>
>>>
>>>
>>>
>>>
>>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20241026/b095cf4e/attachment.htm>

From rousskov at measurement-factory.com  Sun Oct 27 23:27:54 2024
From: rousskov at measurement-factory.com (Alex Rousskov)
Date: Sun, 27 Oct 2024 19:27:54 -0400
Subject: [squid-dev] Introducing myself to Squid Devs
In-Reply-To: <CABHxcGmTx_VqQY3O+4STHdAYbsH9+8v0B8yFaCF_DWh9V0YWtA@mail.gmail.com>
References: <CABHxcGm+idiH_jxqFWnYB5zYVUismhb-4_GTP54-E8oeTHNY0A@mail.gmail.com>
 <7f9a3302-2798-4699-a8a5-d01d6ce5d131@measurement-factory.com>
 <CABHxcGko8e_X7gX7+81d4UM+MgSkX3OS3h-F=i16pzxtFe2Xxw@mail.gmail.com>
 <CABHxcGkQ5zHVekHayCXZL_8f-yzAryNQtHNmCjgxK53jb3hhOw@mail.gmail.com>
 <CABHxcGmTx_VqQY3O+4STHdAYbsH9+8v0B8yFaCF_DWh9V0YWtA@mail.gmail.com>
Message-ID: <f8d86878-61b1-4c46-9afa-23331da48e4d@measurement-factory.com>

On 2024-10-25 15:24, Shailesh Vashishth wrote:

> I would like to take up another Todo item that is listed here -- 
> https://github.com/measurement-factory/squid-notes/blob/start/todos.md 

Sounds good, but please finish your work with the previous TODO item 
(i.e. PR #1921) first:

 > My current PR 1921 has succeeded all Pipeline stages,

Correct.


 > only your approval is remaining.

Not exactly. PR 1921 is on your side as detailed at the URL below (look 
for words "Please adjust..."):
https://github.com/squid-cache/squid/pull/1921#issuecomment-2437843503

If you need help/clarifications about that specific change request, 
please followup on GitHub.

Alex.


> On Wed, Oct 23, 2024 at 12:30?AM Shailesh Vashishth wrote:
> 
>     Hi
>     I have made a change to a math expression in store_client.cc and
>     raised the following pull request.
> 
>     if (curlen > expectlen*(Config.quickAbort.pct/100.0)) {
>     debugs(90, 3, "quick-abort? NO past point of no return");
>     return false;
>     }
> 
>     I have also ran the test-build.sh (suggested in Submissions
>     Checklist) and it passed all test cases.
> 
>     Please review the following pull request -
>     https://github.com/squid-cache/squid/pull/1921
>     <https://github.com/squid-cache/squid/pull/1921>
> 
>     Regards
>     Shailesh
> 
>     On Sat, Oct 5, 2024 at 1:27?PM Shailesh Vashishth
>     <shavashishth at gmail.com <mailto:shavashishth at gmail.com>> wrote:
> 
>         Hi Alex,
>         I read your hint and made?changes?accordingly, it didn't go to
>         spam this time. I was going through the Squid Docs, on how to
>         submit PR and do those pre-merge self tests (Submission Checklist).
> 
>         I will do the steps given in the Submission Checklist and submit
>         a PR in a day or two.
> 
>         Thank you for helping me with?getting?started and joining?the
>         project.
> 
>         Regards
>         Shailesh
> 
> 
>         On Fri, Oct 4, 2024 at 6:53?PM Alex Rousskov
>         <rousskov at measurement-factory.com
>         <mailto:rousskov at measurement-factory.com>> wrote:
> 
>             On 2024-10-03 15:49, Shailesh Vashishth wrote:
> 
>              > I would like to contribute to the Squid Project and I
>             have picked one
>              > small task out of the?ToDos? for myself.
> 
> 
>             Hello Shailesh,
> 
>              ? ? ?Welcome to the Project and good luck with your first
>             task! If you
>             need any help, please do not hesitate to ask on this mailing
>             list or to
>             post a draft pull request for discussion on GitHub:
>             https://wiki.squid-cache.org/MergeProcedure
>             <https://wiki.squid-cache.org/MergeProcedure>
> 
>             BTW, I have also emailed you a few hints regarding the code
>             below when
>             you asked about it privately -- check your spam folder if
>             you have not
>             seen my response dated September 30, 2024...
> 
> 
>             Cheers,
> 
>             Alex.
> 
> 
>              >? ? ?*// XXX: This is absurd! TODO: For positives,
>             "a/(b/c) > d" is "a*c
>              >? ? ? > b*d".
>              >? ? ?**if (expectlen < 100) {
>              >? ? ?**? ?debugs(90, 3, "quick-abort? NO avoid FPE");
>              >? ? ?**? ?return false;
>              >? ? ?**}*
>              >
>              >? ? ?*/_if ((curlen / (expectlen / 100)) >
>             (Config.quickAbort.pct)) {
>              >? ? ?_/**? ?debugs(90, 3, "quick-abort? NO past point of
>             no return");
>              >? ? ?**? ?return false;
>              >? ? ?**}*
> 
> 
> 
> 
> 
> 
> _______________________________________________
> squid-dev mailing list
> squid-dev at lists.squid-cache.org
> https://lists.squid-cache.org/listinfo/squid-dev


From rousskov at measurement-factory.com  Sun Oct 27 23:31:14 2024
From: rousskov at measurement-factory.com (Alex Rousskov)
Date: Sun, 27 Oct 2024 19:31:14 -0400
Subject: [squid-dev] Introducing myself to Squid Devs
In-Reply-To: <CABHxcGmTx_VqQY3O+4STHdAYbsH9+8v0B8yFaCF_DWh9V0YWtA@mail.gmail.com>
References: <CABHxcGm+idiH_jxqFWnYB5zYVUismhb-4_GTP54-E8oeTHNY0A@mail.gmail.com>
 <7f9a3302-2798-4699-a8a5-d01d6ce5d131@measurement-factory.com>
 <CABHxcGko8e_X7gX7+81d4UM+MgSkX3OS3h-F=i16pzxtFe2Xxw@mail.gmail.com>
 <CABHxcGkQ5zHVekHayCXZL_8f-yzAryNQtHNmCjgxK53jb3hhOw@mail.gmail.com>
 <CABHxcGmTx_VqQY3O+4STHdAYbsH9+8v0B8yFaCF_DWh9V0YWtA@mail.gmail.com>
Message-ID: <c2f1bc06-000b-472c-9683-3fcc5c80b1b0@measurement-factory.com>

On 2024-10-25 15:24, Shailesh Vashishth wrote:

> I would like to take up another Todo item that is listed here -- 
> https://github.com/measurement-factory/squid-notes/blob/start/todos.md 

> I would like to pick this item : I think this requires very small 
> change, where we just print name_len on the stdout using the custom 
> function for printing debug logs.

I assume you are suggesting to add name_len reporting to existing 
debugs() by including debugs() parameters similar to these:

     debugs(... "name_len=" << name_len ...);

Doing the above will not be the right way to address that TODO IMO. A 
better way is hinted at by XXX comment itself (still quoted further 
below) and detailed a bit more in the TODO item itself. You will need to 
modify Squid class Raw, so that the resulting debugs() code could look 
something like this:

     debugs(... Raw("field", field_start, name_len).upTo(100) ...);

HTH,

Alex.


>   * Address the following TODO by adding any using Raw::upto(n) which
>     will limit the size value of passed to PrintHex() and write() inside
>     Raw::print(). That value is currently size_.
> 
>     if (name_len > 65534) {
>     /* String must be LESS THAN 64K and it adds a terminating NULL */
>     // TODO: update this to show proper name_len in Raw markup, but not
>     print all that
>     debugs(55, 2, "ignoring huge header field (" << Raw("field_start",
>     field_start, 100) << "...)");
> 
> 
> 
> My current PR (_https://github.com/squid-cache/squid/pull/1921 
> <https://github.com/squid-cache/squid/pull/1921>_) has succeeded all 
> Pipeline stages, only your approval is remaining.
> 
> Regards
> Shailesh
> 
> On Wed, Oct 23, 2024 at 12:30?AM Shailesh Vashishth 
> <shavashishth at gmail.com <mailto:shavashishth at gmail.com>> wrote:
> 
>     Hi
>     I have made a change to a math expression in store_client.cc and
>     raised the following pull request.
> 
>     if (curlen > expectlen*(Config.quickAbort.pct/100.0)) {
>     debugs(90, 3, "quick-abort? NO past point of no return");
>     return false;
>     }
> 
>     I have also ran the test-build.sh (suggested in Submissions
>     Checklist) and it passed all test cases.
> 
>     Please review the following pull request -
>     https://github.com/squid-cache/squid/pull/1921
>     <https://github.com/squid-cache/squid/pull/1921>
> 
>     Regards
>     Shailesh
> 
>     On Sat, Oct 5, 2024 at 1:27?PM Shailesh Vashishth
>     <shavashishth at gmail.com <mailto:shavashishth at gmail.com>> wrote:
> 
>         Hi Alex,
>         I read your hint and made?changes?accordingly, it didn't go to
>         spam this time. I was going through the Squid Docs, on how to
>         submit PR and do those pre-merge self tests (Submission Checklist).
> 
>         I will do the steps given in the Submission Checklist and submit
>         a PR in a day or two.
> 
>         Thank you for helping me with?getting?started and joining?the
>         project.
> 
>         Regards
>         Shailesh
> 
> 
>         On Fri, Oct 4, 2024 at 6:53?PM Alex Rousskov
>         <rousskov at measurement-factory.com
>         <mailto:rousskov at measurement-factory.com>> wrote:
> 
>             On 2024-10-03 15:49, Shailesh Vashishth wrote:
> 
>              > I would like to contribute to the Squid Project and I
>             have picked one
>              > small task out of the?ToDos? for myself.
> 
> 
>             Hello Shailesh,
> 
>              ? ? ?Welcome to the Project and good luck with your first
>             task! If you
>             need any help, please do not hesitate to ask on this mailing
>             list or to
>             post a draft pull request for discussion on GitHub:
>             https://wiki.squid-cache.org/MergeProcedure
>             <https://wiki.squid-cache.org/MergeProcedure>
> 
>             BTW, I have also emailed you a few hints regarding the code
>             below when
>             you asked about it privately -- check your spam folder if
>             you have not
>             seen my response dated September 30, 2024...
> 
> 
>             Cheers,
> 
>             Alex.
> 
> 
>              >? ? ?*// XXX: This is absurd! TODO: For positives,
>             "a/(b/c) > d" is "a*c
>              >? ? ? > b*d".
>              >? ? ?**if (expectlen < 100) {
>              >? ? ?**? ?debugs(90, 3, "quick-abort? NO avoid FPE");
>              >? ? ?**? ?return false;
>              >? ? ?**}*
>              >
>              >? ? ?*/_if ((curlen / (expectlen / 100)) >
>             (Config.quickAbort.pct)) {
>              >? ? ?_/**? ?debugs(90, 3, "quick-abort? NO past point of
>             no return");
>              >? ? ?**? ?return false;
>              >? ? ?**}*
> 
> 
> 
> 
> 
> 
> _______________________________________________
> squid-dev mailing list
> squid-dev at lists.squid-cache.org
> https://lists.squid-cache.org/listinfo/squid-dev


From shavashishth at gmail.com  Sun Oct 27 14:15:19 2024
From: shavashishth at gmail.com (Shailesh Vashishth)
Date: Sun, 27 Oct 2024 19:45:19 +0530
Subject: [squid-dev] Introducing myself to Squid Devs
In-Reply-To: <CABHxcGmTx_VqQY3O+4STHdAYbsH9+8v0B8yFaCF_DWh9V0YWtA@mail.gmail.com>
References: <CABHxcGm+idiH_jxqFWnYB5zYVUismhb-4_GTP54-E8oeTHNY0A@mail.gmail.com>
 <7f9a3302-2798-4699-a8a5-d01d6ce5d131@measurement-factory.com>
 <CABHxcGko8e_X7gX7+81d4UM+MgSkX3OS3h-F=i16pzxtFe2Xxw@mail.gmail.com>
 <CABHxcGkQ5zHVekHayCXZL_8f-yzAryNQtHNmCjgxK53jb3hhOw@mail.gmail.com>
 <CABHxcGmTx_VqQY3O+4STHdAYbsH9+8v0B8yFaCF_DWh9V0YWtA@mail.gmail.com>
Message-ID: <CABHxcG=Hv5Mep+dpEgiea3YmPi9egrPjS_T6CA6uPHd5XQ8XbA@mail.gmail.com>

Hi
There is another very small ToDo that I would like take up --

This is also a very simple and small change -- replacing *Io with
Store::IoStatus *and removing the *using *statement

Address the following TODO:
/* TODO: Remove this change-minimizing hack */
using Io = Store::IoStatus;
static constexpr Io ioUndecided = Store::ioUndecided;
static constexpr Io ioReading = Store::ioReading;
static constexpr Io ioWriting = Store::ioWriting;
static constexpr Io ioDone = Store::ioDone;


Regards
Shailesh

On Sat, Oct 26, 2024 at 12:54?AM Shailesh Vashishth <shavashishth at gmail.com>
wrote:

> Hi
> I would like to take up another Todo item that is listed here --
> https://github.com/measurement-factory/squid-notes/blob/start/todos.md
>
> I would like to pick this item : I think this requires very small change,
> where we just print *name_len *on the *stdout *using the custom function
> for printing debug logs.
>
>
>    - Address the following TODO by adding any using Raw::upto(n) which
>    will limit the size value of passed to PrintHex() and write() inside
>    Raw::print(). That value is currently size_.
>
> if (name_len > 65534) {
>> /* String must be LESS THAN 64K and it adds a terminating NULL */
>> // TODO: update this to show proper name_len in Raw markup, but not print
>> all that
>> debugs(55, 2, "ignoring huge header field (" << Raw("field_start",
>> field_start, 100) << "...)");
>>
>
>
> My current PR (*https://github.com/squid-cache/squid/pull/1921
> <https://github.com/squid-cache/squid/pull/1921>*) has succeeded all
> Pipeline stages, only your approval is remaining.
>
> Regards
> Shailesh
>
> On Wed, Oct 23, 2024 at 12:30?AM Shailesh Vashishth <
> shavashishth at gmail.com> wrote:
>
>> Hi
>> I have made a change to a math expression in store_client.cc and raised
>> the following pull request.
>>
>> if (curlen > expectlen*(Config.quickAbort.pct/100.0)) {
>> debugs(90, 3, "quick-abort? NO past point of no return");
>> return false;
>> }
>>
>> I have also ran the test-build.sh (suggested in Submissions Checklist)
>> and it passed all test cases.
>>
>> Please review the following pull request -
>> https://github.com/squid-cache/squid/pull/1921
>>
>> Regards
>> Shailesh
>>
>> On Sat, Oct 5, 2024 at 1:27?PM Shailesh Vashishth <shavashishth at gmail.com>
>> wrote:
>>
>>> Hi Alex,
>>> I read your hint and made changes accordingly, it didn't go to spam this
>>> time. I was going through the Squid Docs, on how to submit PR and do those
>>> pre-merge self tests (Submission Checklist).
>>>
>>> I will do the steps given in the Submission Checklist and submit a PR in
>>> a day or two.
>>>
>>> Thank you for helping me with getting started and joining the project.
>>>
>>> Regards
>>> Shailesh
>>>
>>>
>>> On Fri, Oct 4, 2024 at 6:53?PM Alex Rousskov <
>>> rousskov at measurement-factory.com> wrote:
>>>
>>>> On 2024-10-03 15:49, Shailesh Vashishth wrote:
>>>>
>>>> > I would like to contribute to the Squid Project and I have picked one
>>>> > small task out of the ToDos  for myself.
>>>>
>>>>
>>>> Hello Shailesh,
>>>>
>>>>      Welcome to the Project and good luck with your first task! If you
>>>> need any help, please do not hesitate to ask on this mailing list or to
>>>> post a draft pull request for discussion on GitHub:
>>>> https://wiki.squid-cache.org/MergeProcedure
>>>>
>>>> BTW, I have also emailed you a few hints regarding the code below when
>>>> you asked about it privately -- check your spam folder if you have not
>>>> seen my response dated September 30, 2024...
>>>>
>>>>
>>>> Cheers,
>>>>
>>>> Alex.
>>>>
>>>>
>>>> >     *// XXX: This is absurd! TODO: For positives, "a/(b/c) > d" is
>>>> "a*c
>>>> >      > b*d".
>>>> >     **if (expectlen < 100) {
>>>> >     **   debugs(90, 3, "quick-abort? NO avoid FPE");
>>>> >     **   return false;
>>>> >     **}*
>>>> >
>>>> >     */_if ((curlen / (expectlen / 100)) > (Config.quickAbort.pct)) {
>>>> >     _/**   debugs(90, 3, "quick-abort? NO past point of no return");
>>>> >     **   return false;
>>>> >     **}*
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-dev/attachments/20241027/ab996405/attachment-0001.htm>

From rousskov at measurement-factory.com  Mon Oct 28 14:47:53 2024
From: rousskov at measurement-factory.com (Alex Rousskov)
Date: Mon, 28 Oct 2024 10:47:53 -0400
Subject: [squid-dev] Remove MemObject::Io
In-Reply-To: <CABHxcG=Hv5Mep+dpEgiea3YmPi9egrPjS_T6CA6uPHd5XQ8XbA@mail.gmail.com>
References: <CABHxcGm+idiH_jxqFWnYB5zYVUismhb-4_GTP54-E8oeTHNY0A@mail.gmail.com>
 <7f9a3302-2798-4699-a8a5-d01d6ce5d131@measurement-factory.com>
 <CABHxcGko8e_X7gX7+81d4UM+MgSkX3OS3h-F=i16pzxtFe2Xxw@mail.gmail.com>
 <CABHxcGkQ5zHVekHayCXZL_8f-yzAryNQtHNmCjgxK53jb3hhOw@mail.gmail.com>
 <CABHxcGmTx_VqQY3O+4STHdAYbsH9+8v0B8yFaCF_DWh9V0YWtA@mail.gmail.com>
 <CABHxcG=Hv5Mep+dpEgiea3YmPi9egrPjS_T6CA6uPHd5XQ8XbA@mail.gmail.com>
Message-ID: <6bca584e-25c9-43b2-8102-6403de22b5fc@measurement-factory.com>

On 2024-10-27 10:15, Shailesh Vashishth wrote:

> There is another very small ToDo that I would like take up --

In the future, please start a new email thread for each TODO/discussion. 
It would help keeping context and finding important bits later on.


> This is also a very simple and small change -- replacing *Io with 
> Store::IoStatus *and removing the *using *statement

I believe more changes will be needed to compile adjusted code, but I 
agree that this is "simple and small". BTW, for simple changes like 
that, feel free to post a PR without squid-dev discussions.


Thank you,

Alex.


> Address the following TODO:
> /* TODO: Remove this change-minimizing hack */
> using Io = Store::IoStatus;
> static constexpr Io ioUndecided = Store::ioUndecided;
> static constexpr Io ioReading = Store::ioReading;
> static constexpr Io ioWriting = Store::ioWriting;
> static constexpr Io ioDone = Store::ioDone;
> 
> 
> Regards
> Shailesh
> 
> On Sat, Oct 26, 2024 at 12:54?AM Shailesh Vashishth 
> <shavashishth at gmail.com <mailto:shavashishth at gmail.com>> wrote:
> 
>     Hi
>     I would like to take up another Todo item that is listed here --
>     https://github.com/measurement-factory/squid-notes/blob/start/todos.md <https://github.com/measurement-factory/squid-notes/blob/start/todos.md>
> 
>     I would like to pick this item : I think this requires very small
>     change, where we just print *name_len *on the *stdout *using the
>     custom function for printing debug logs.
> 
>       * Address the following TODO by adding any using Raw::upto(n)
>         which will limit the size value of passed to PrintHex() and
>         write() inside Raw::print(). That value is currently size_.
> 
>         if (name_len > 65534) {
>         /* String must be LESS THAN 64K and it adds a terminating NULL */
>         // TODO: update this to show proper name_len in Raw markup, but
>         not print all that
>         debugs(55, 2, "ignoring huge header field (" <<
>         Raw("field_start", field_start, 100) << "...)");
> 
> 
> 
>     My current PR (_https://github.com/squid-cache/squid/pull/1921
>     <https://github.com/squid-cache/squid/pull/1921>_) has succeeded all
>     Pipeline stages, only your approval is remaining.
> 
>     Regards
>     Shailesh
> 
>     On Wed, Oct 23, 2024 at 12:30?AM Shailesh Vashishth
>     <shavashishth at gmail.com <mailto:shavashishth at gmail.com>> wrote:
> 
>         Hi
>         I have made a change to a math expression in store_client.cc and
>         raised the following pull request.
> 
>         if (curlen > expectlen*(Config.quickAbort.pct/100.0)) {
>         debugs(90, 3, "quick-abort? NO past point of no return");
>         return false;
>         }
> 
>         I have also ran the test-build.sh (suggested in Submissions
>         Checklist) and it passed all test cases.
> 
>         Please review the following pull request -
>         https://github.com/squid-cache/squid/pull/1921
>         <https://github.com/squid-cache/squid/pull/1921>
> 
>         Regards
>         Shailesh
> 
>         On Sat, Oct 5, 2024 at 1:27?PM Shailesh Vashishth
>         <shavashishth at gmail.com <mailto:shavashishth at gmail.com>> wrote:
> 
>             Hi Alex,
>             I read your hint and made?changes?accordingly, it didn't go
>             to spam this time. I was going through the Squid Docs, on
>             how to submit PR and do those pre-merge self tests
>             (Submission Checklist).
> 
>             I will do the steps given in the Submission Checklist and
>             submit a PR in a day or two.
> 
>             Thank you for helping me with?getting?started and
>             joining?the project.
> 
>             Regards
>             Shailesh
> 
> 
>             On Fri, Oct 4, 2024 at 6:53?PM Alex Rousskov
>             <rousskov at measurement-factory.com
>             <mailto:rousskov at measurement-factory.com>> wrote:
> 
>                 On 2024-10-03 15:49, Shailesh Vashishth wrote:
> 
>                  > I would like to contribute to the Squid Project and I
>                 have picked one
>                  > small task out of the?ToDos? for myself.
> 
> 
>                 Hello Shailesh,
> 
>                  ? ? ?Welcome to the Project and good luck with your
>                 first task! If you
>                 need any help, please do not hesitate to ask on this
>                 mailing list or to
>                 post a draft pull request for discussion on GitHub:
>                 https://wiki.squid-cache.org/MergeProcedure
>                 <https://wiki.squid-cache.org/MergeProcedure>
> 
>                 BTW, I have also emailed you a few hints regarding the
>                 code below when
>                 you asked about it privately -- check your spam folder
>                 if you have not
>                 seen my response dated September 30, 2024...
> 
> 
>                 Cheers,
> 
>                 Alex.
> 
> 
>                  >? ? ?*// XXX: This is absurd! TODO: For positives,
>                 "a/(b/c) > d" is "a*c
>                  >? ? ? > b*d".
>                  >? ? ?**if (expectlen < 100) {
>                  >? ? ?**? ?debugs(90, 3, "quick-abort? NO avoid FPE");
>                  >? ? ?**? ?return false;
>                  >? ? ?**}*
>                  >
>                  >? ? ?*/_if ((curlen / (expectlen / 100)) >
>                 (Config.quickAbort.pct)) {
>                  >? ? ?_/**? ?debugs(90, 3, "quick-abort? NO past point
>                 of no return");
>                  >? ? ?**? ?return false;
>                  >? ? ?**}*
> 
> 
> 
> 
> 
> 
> _______________________________________________
> squid-dev mailing list
> squid-dev at lists.squid-cache.org
> https://lists.squid-cache.org/listinfo/squid-dev


From gkinkie at gmail.com  Wed Oct 30 11:09:31 2024
From: gkinkie at gmail.com (Francesco Chemolli)
Date: Wed, 30 Oct 2024 11:09:31 +0000
Subject: [squid-dev] Cache-Groups RFC draft
Message-ID: <CA+Y8hcNtbE=Rv7R970iVwHieADRz9RGSvqaga_g0Y-qzYfSWMg@mail.gmail.com>

Hi all,
  do we have any opinion on
https://www.ietf.org/archive/id/draft-ietf-httpbis-cache-groups-02.html
?


-- 
    Francesco

From squid3 at treenet.co.nz  Wed Oct 30 12:38:12 2024
From: squid3 at treenet.co.nz (Amos Jeffries)
Date: Thu, 31 Oct 2024 01:38:12 +1300
Subject: [squid-dev] Cache-Groups RFC draft
In-Reply-To: <CA+Y8hcNtbE=Rv7R970iVwHieADRz9RGSvqaga_g0Y-qzYfSWMg@mail.gmail.com>
References: <CA+Y8hcNtbE=Rv7R970iVwHieADRz9RGSvqaga_g0Y-qzYfSWMg@mail.gmail.com>
Message-ID: <6fb4d816-51b1-42a4-94ff-ba58a7a48847@treenet.co.nz>

On 31/10/24 00:09, Francesco Chemolli wrote:
> Hi all,
>    do we have any opinion on
> https://www.ietf.org/archive/id/draft-ietf-httpbis-cache-groups-02.html
> ?

This is a further extension of Mark's variant Key header extensions to HTTP.

When I proposed adding support for the first steps of these extensions 
Alex complained that Squid's storage needed major overhaul before it was 
worth doing.



FYI; The "group" identifier in this HTTPbis Draft is akin to StoreID for 
a "Vary marker" store object.

To support this mechanism cleanly Squid should first refactor "Vary 
marker" to to have multiple headers determining further lookups objects, 
not just the one Vary pattern.

That is similar matching logic needed for the prior Key (also Vary-Key) 
header mechanism which Alex has already vetoed as "too complex" to 
implement.


HTH
Amos


From rousskov at measurement-factory.com  Wed Oct 30 13:42:01 2024
From: rousskov at measurement-factory.com (Alex Rousskov)
Date: Wed, 30 Oct 2024 09:42:01 -0400
Subject: [squid-dev] Cache-Groups RFC draft
In-Reply-To: <CA+Y8hcNtbE=Rv7R970iVwHieADRz9RGSvqaga_g0Y-qzYfSWMg@mail.gmail.com>
References: <CA+Y8hcNtbE=Rv7R970iVwHieADRz9RGSvqaga_g0Y-qzYfSWMg@mail.gmail.com>
Message-ID: <0ad7bc33-d973-4848-9a9e-3615c28bf2ac@measurement-factory.com>

On 2024-10-30 07:09, Francesco Chemolli wrote:

> do we have any opinion on
> https://www.ietf.org/archive/id/draft-ietf-httpbis-cache-groups-02.html
> ?

> "The Cache-Group-Invalidation header field MUST be ignored on
> responses to requests that have a safe method (e.g., GET [and HEAD])"


AFAICT, the proposed group invalidation mechanism does not affect 
current Squids because Squid does not cache responses to requests with 
unsafe methods; see HttpRequestMethod::respMaybeCacheable(). To support 
draft-ietf-httpbis-cache-groups in a meaningful way, one has to extend 
Squid caching support to unsafe methods first.

After that, supporting group invalidation would require building and 
maintaining additional persistent cache indexes and/or state, which is a 
serious development project, especially because high-level API in front 
of that state (at least) should be agnostic to cache_dir/cache_mem type. 
There is no proper equivalent of such a mechanism today (store_table is 
not it). Completing several Store::Controller architecture TODOs should 
be evaluated as a required prerequisite. I do not recommend starting on 
that large and difficult work without a specific long-term need and 
commitment, especially given the amount of Squid developer 
cooperation/coordination it requires.

BTW, the need for group invalidation in Squid existed since ICAP support 
was added in 2005 (at least) because ICAP services may send ISTag header 
with similar cache invalidation semantics. ISTag needs should be kept in 
mind when adding draft-ietf-httpbis-cache-groups support.


HTH.

Alex.


From rousskov at measurement-factory.com  Wed Oct 30 14:06:24 2024
From: rousskov at measurement-factory.com (Alex Rousskov)
Date: Wed, 30 Oct 2024 10:06:24 -0400
Subject: [squid-dev] Cache-Groups RFC draft
In-Reply-To: <6fb4d816-51b1-42a4-94ff-ba58a7a48847@treenet.co.nz>
References: <CA+Y8hcNtbE=Rv7R970iVwHieADRz9RGSvqaga_g0Y-qzYfSWMg@mail.gmail.com>
 <6fb4d816-51b1-42a4-94ff-ba58a7a48847@treenet.co.nz>
Message-ID: <ce6aa982-3f49-42c1-8f65-cf876f9fe870@measurement-factory.com>

On 2024-10-30 08:38, Amos Jeffries wrote:
> On 31/10/24 00:09, Francesco Chemolli wrote:
>> Hi all,
>> ?? do we have any opinion on
>> https://www.ietf.org/archive/id/draft-ietf-httpbis-cache-groups-02.html
>> ?
> 
> This is a further extension of Mark's variant Key header extensions to 
> HTTP.
> 
> When I proposed adding support for the first steps of these extensions 
> Alex complained that Squid's storage needed major overhaul before it was 
> worth doing.

I hope my assessment (referred to as "complaint" in the above paragraph) 
was correct.


> FYI; The "group" identifier in this HTTPbis Draft is akin to StoreID for 
> a "Vary marker" store object.
> 
> To support this mechanism cleanly Squid should first refactor "Vary 
> marker" to to have multiple headers determining further lookups objects, 
> not just the one Vary pattern.

FWIW, I doubt that group invalidation should be implemented using 
something similar to Vary marker objects that Squid uses today. I 
suspect there are better ways to instantly invalidate large sets of 
cached entries. I assume that we do not need to debate the design (and 
its prerequisites) now, but if somebody decides to actually proceed with 
this project, they should keep this squid-dev thread in mind.


> That is similar matching logic needed for the prior Key (also Vary-Key) 
> header mechanism which Alex has already vetoed as "too complex" to 
> implement.

Implementation complexity is an important factor, of course, but I doubt 
that I have vetoed any mechanisms just because they are "too complex to 
implement".

Alex.


