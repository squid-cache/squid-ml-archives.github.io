<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-dev] Cache-Groups RFC draft
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Cache-Groups%20RFC%20draft&In-Reply-To=%3C0ad7bc33-d973-4848-9a9e-3615c28bf2ac%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009935.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-dev] Cache-Groups RFC draft</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-dev%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-dev%5D%20Cache-Groups%20RFC%20draft&In-Reply-To=%3C0ad7bc33-d973-4848-9a9e-3615c28bf2ac%40measurement-factory.com%3E"
       TITLE="[squid-dev] Cache-Groups RFC draft">rousskov at measurement-factory.com
       </A><BR>
    <I>Wed Oct 30 13:42:01 UTC 2024</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009935.html">[squid-dev] Cache-Groups RFC draft
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9934">[ date ]</a>
              <a href="thread.html#9934">[ thread ]</a>
              <a href="subject.html#9934">[ subject ]</a>
              <a href="author.html#9934">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2024-10-30 07:09, Francesco Chemolli wrote:

&gt;<i> do we have any opinion on
</I>&gt;<i> <A HREF="https://www.ietf.org/archive/id/draft-ietf-httpbis-cache-groups-02.html">https://www.ietf.org/archive/id/draft-ietf-httpbis-cache-groups-02.html</A>
</I>&gt;<i> ?
</I>
&gt;<i> &quot;The Cache-Group-Invalidation header field MUST be ignored on
</I>&gt;<i> responses to requests that have a safe method (e.g., GET [and HEAD])&quot;
</I>

AFAICT, the proposed group invalidation mechanism does not affect 
current Squids because Squid does not cache responses to requests with 
unsafe methods; see HttpRequestMethod::respMaybeCacheable(). To support 
draft-ietf-httpbis-cache-groups in a meaningful way, one has to extend 
Squid caching support to unsafe methods first.

After that, supporting group invalidation would require building and 
maintaining additional persistent cache indexes and/or state, which is a 
serious development project, especially because high-level API in front 
of that state (at least) should be agnostic to cache_dir/cache_mem type. 
There is no proper equivalent of such a mechanism today (store_table is 
not it). Completing several Store::Controller architecture TODOs should 
be evaluated as a required prerequisite. I do not recommend starting on 
that large and difficult work without a specific long-term need and 
commitment, especially given the amount of Squid developer 
cooperation/coordination it requires.

BTW, the need for group invalidation in Squid existed since ICAP support 
was added in 2005 (at least) because ICAP services may send ISTag header 
with similar cache invalidation semantics. ISTag needs should be kept in 
mind when adding draft-ietf-httpbis-cache-groups support.


HTH.

Alex.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009935.html">[squid-dev] Cache-Groups RFC draft
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9934">[ date ]</a>
              <a href="thread.html#9934">[ thread ]</a>
              <a href="subject.html#9934">[ subject ]</a>
              <a href="author.html#9934">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-dev">More information about the squid-dev
mailing list</a><br>
</body></html>
