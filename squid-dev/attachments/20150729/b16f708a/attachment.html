<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Hi&nbsp;all,&lt;br&gt;&lt;/div&gt;  &nbsp;I&#39;m&nbsp;starting&nbsp;to&nbsp;work&nbsp;on&nbsp;refactoring&nbsp;HttpHeader&nbsp;to&nbsp;use&nbsp;LookupTable,&nbsp;and&nbsp;boy&nbsp;that&nbsp;code&nbsp;is&nbsp;a&nbsp;mess..&lt;br&gt;&lt;br&gt;&lt;/div&gt;Since&nbsp;it&#39;s&nbsp;going&nbsp;to&nbsp;take&nbsp;significant&nbsp;effort,&nbsp;I&#39;d&nbsp;like&nbsp;to&nbsp;get&nbsp;feedback&nbsp;on&nbsp;the&nbsp;changes&nbsp;I&#39;d&nbsp;like&nbsp;to&nbsp;implement,&nbsp;so&nbsp;not&nbsp;to&nbsp;end&nbsp;in&nbsp;long&nbsp;discussions&nbsp;later.&lt;br&gt;&lt;br&gt;&lt;/div&gt;Current&nbsp;data&nbsp;structures:&lt;br&gt;&lt;/div&gt;HeadersAttrs:&nbsp;static&nbsp;declaration&nbsp;of&nbsp;header&nbsp;name,&nbsp;header&nbsp;ID,&nbsp;header&nbsp;type&nbsp;(string/int/etc).&nbsp;Must&nbsp;be&nbsp;sorted&nbsp;by&nbsp;numeric&nbsp;value&nbsp;of&nbsp;ID&lt;br&gt;&lt;/div&gt;Headers:&nbsp;built&nbsp;at&nbsp;initialization&nbsp;time&nbsp;from&nbsp;HeadersAttrs,&nbsp;it&#39;s&nbsp;an&nbsp;array&nbsp;of&nbsp;(name,&nbsp;id,&nbsp;type,&nbsp;stats)&nbsp;structs&lt;br&gt;ListHeadersArr,&nbsp;GeneralHeadersArr,&nbsp;EntityHeadersArr,&nbsp;RequestHeadersArr,&nbsp;ReplyHeadersArr,&nbsp;etc:&nbsp;lists&nbsp;of&nbsp;headers&nbsp;ID&nbsp;(possibly&nbsp;overlapping)&nbsp;which&nbsp;are&nbsp;used&nbsp;to&nbsp;generate..&lt;br&gt;ListHeadersMask,&nbsp;GeneralHeadersArr,&nbsp;EntityHeadersArr&nbsp;etc:&nbsp;bitmaps&nbsp;used&nbsp;(only)&nbsp;by&nbsp;HttpHeaderStats&nbsp;to&nbsp;assemble&nbsp;different&nbsp;stats&nbsp;sets&lt;br&gt;&lt;br&gt;&lt;/div&gt;I&nbsp;would&nbsp;like&nbsp;to&nbsp;turn&nbsp;these&nbsp;into:&lt;br&gt;headerTable:&nbsp;LookupTable&lt;&gt;::Record&nbsp;mapping&nbsp;header&nbsp;name&nbsp;to&nbsp;header&nbsp;ID,&nbsp;used&nbsp;to&nbsp;generate&nbsp;...&lt;br&gt;headerLookupTable:&nbsp;a&nbsp;fast&nbsp;lookup&nbsp;table&nbsp;of&nbsp;header&nbsp;names&nbsp;to&nbsp;ids&lt;br&gt;headerStatsTable:&nbsp;a&nbsp;std::vector&lt;HttpHeaderFieldStat&gt;&nbsp;indexed&nbsp;by&nbsp;header&nbsp;ID&nbsp;to&nbsp;collect&nbsp;the&nbsp;statistics&nbsp;currently&nbsp;in&nbsp;Headers[id].stats.&lt;br&gt;&lt;/div&gt;headerDescription:&nbsp;a&nbsp;std::vector&nbsp;keyed&nbsp;by&nbsp;header&nbsp;ID&nbsp;containing&nbsp;header&nbsp;type&nbsp;(currently&nbsp;in&nbsp;Headers[id].type),&nbsp;possibly&nbsp;header&nbsp;name&nbsp;(if&nbsp;useful),&nbsp;a&nbsp;bitfield&nbsp;noting&nbsp;if&nbsp;HTTP_HDR{LIST,GENERAL,REQUEST,REPLY,...}.&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;There&nbsp;are&nbsp;some&nbsp;possible&nbsp;optimizations,&nbsp;but&nbsp;at&nbsp;a&nbsp;minimum&nbsp;this&nbsp;should&nbsp;help&nbsp;keep&nbsp;information&nbsp;more&nbsp;organized&nbsp;while&nbsp;introducing&nbsp;no&nbsp;performance&nbsp;regressions.&lt;br&gt;&lt;/div&gt;What&nbsp;do&nbsp;you&nbsp;think?&lt;br&gt;&lt;br&gt;&lt;/div&gt;Thanks&lt;br&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&gt; &nbsp; &nbsp;Kinkie&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
