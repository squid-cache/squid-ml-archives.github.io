<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;I&#39;m&nbsp;going&nbsp;over&nbsp;HttpHeader&nbsp;to&nbsp;see&nbsp;if&nbsp;there&#39;s&nbsp;any&nbsp;possible&nbsp;improvements&nbsp;to&nbsp;be&nbsp;obtained&nbsp;by&nbsp;dragging&nbsp;it&nbsp;(kicking&nbsp;and&nbsp;screaming,&nbsp;from&nbsp;the&nbsp;look&nbsp;of&nbsp;it)&nbsp;into&nbsp;the&nbsp;10&#39;s.&lt;br&gt;&lt;br&gt;&lt;/div&gt;Here&#39;s&nbsp;a&nbsp;list&nbsp;of&nbsp;weirdnesses&nbsp;I&#39;m&nbsp;coming&nbsp;to&nbsp;find,&nbsp;hopefully&nbsp;someone&nbsp;has&nbsp;any&nbsp;idea&nbsp;of&nbsp;WHY&nbsp;they&nbsp;are&nbsp;like&nbsp;this,&nbsp;or&nbsp;if&nbsp;they&nbsp;can&nbsp;be&nbsp;safely&nbsp;be&nbsp;removed:&lt;br&gt;&lt;br&gt;-&nbsp;HttpHeader::insertTime&nbsp;makes&nbsp;no&nbsp;sense.&nbsp;It&#39;s&nbsp;O(N)&nbsp;and&nbsp;it&#39;s&nbsp;always&nbsp;used&nbsp;in&nbsp;two&nbsp;patterns:&nbsp;delById(HDR);&nbsp;insertTime(HDR)&nbsp;and&nbsp;if&nbsp;(!has(HDR)&nbsp;insertTime(HDR)).&lt;br&gt;I&#39;ve&nbsp;replaced&nbsp;with&nbsp;putTime&nbsp;everywhere&lt;br&gt;&lt;/div&gt;-&nbsp;why&nbsp;doesn&#39;t&nbsp;HttpHeaderEntry&nbsp;use&nbsp;a&nbsp;copy-constructor,&nbsp;relying&nbsp;instead&nbsp;in&nbsp;a&nbsp;clone()&nbsp;method?&lt;br&gt;&lt;/div&gt;-&nbsp;why&nbsp;the&nbsp;strange&nbsp;loop&nbsp;in&nbsp;HttpHeader&#39;s&nbsp;copy-constructor?&nbsp;Replaced&nbsp;with&nbsp;a&nbsp;&quot;=&nbsp;default&quot;,&nbsp;it&nbsp;should&nbsp;be&nbsp;just&nbsp;fine..&lt;br&gt;&lt;/div&gt;-&nbsp;statistics&nbsp;accounting:&nbsp;we&nbsp;count&nbsp;A&nbsp;LOT&nbsp;(see&nbsp;HttpHeader::clean)&nbsp;Is&nbsp;it&nbsp;really&nbsp;worth&nbsp;it&nbsp;in&nbsp;a&nbsp;performance-critical&nbsp;code&nbsp;as&nbsp;this?&nbsp;Maybe&nbsp;we&nbsp;could&nbsp;shuffle&nbsp;things&nbsp;around&nbsp;to&nbsp;HttpHeader&nbsp;and&nbsp;HttpHeaderEntry&#39;s&nbsp;ctor&nbsp;and&nbsp;dtor&nbsp;..&lt;br&gt;&lt;br&gt;&lt;/div&gt;More&nbsp;to&nbsp;come&nbsp;as&nbsp;I&nbsp;cross&nbsp;them.&lt;br&gt;&lt;/div&gt;(work&nbsp;in&nbsp;progress&nbsp;at&nbsp;lp:~kinkie/squid/coverity-fixes)&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&gt; &nbsp; &nbsp;Francesco&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
