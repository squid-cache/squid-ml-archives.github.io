<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Aug&nbsp;12,&nbsp;2015&nbsp;at&nbsp;9:11&nbsp;PM,&nbsp;Alex&nbsp;Rousskov&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:rousskov@measurement-factory.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rousskov@measurement-factory.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;span&gt;On&nbsp;08/12/2015&nbsp;09:36&nbsp;AM,&nbsp;Kinkie&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;So&nbsp;I&nbsp;went&nbsp;ahead&nbsp;and&nbsp;just&nbsp;implemented&nbsp;it,&nbsp;starting&nbsp;from&nbsp;your&nbsp;observations.&lt;br&gt;<br>
&gt;&nbsp;It&#39;s&nbsp;a&nbsp;bit&nbsp;more&nbsp;complex&nbsp;that&nbsp;your&nbsp;proposal,&nbsp;as&nbsp;I&nbsp;took&nbsp;the&nbsp;chance&nbsp;to&lt;br&gt;<br>
&gt;&nbsp;implement&nbsp;bidirectional&nbsp;forward&nbsp;and&nbsp;reverse&nbsp;iterators.&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;attached&nbsp;patch&nbsp;is&nbsp;in&nbsp;changeset&nbsp;14235&nbsp;of&lt;br&gt;<br>
&gt;&nbsp;lp:~kinkie/squid/coverity-fixes,&nbsp;but&nbsp;since&nbsp;the&nbsp;code&nbsp;is&nbsp;quite&nbsp;well&lt;br&gt;<br>
&gt;&nbsp;self-contained&nbsp;I&#39;d&nbsp;like&nbsp;to&nbsp;submit&nbsp;it&nbsp;for&nbsp;audit&nbsp;as&nbsp;a&nbsp;standalone&nbsp;unit;&nbsp;If&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;Yes,&nbsp;submitting&nbsp;Enum&nbsp;iterators&nbsp;for&nbsp;review&nbsp;as&nbsp;a&nbsp;stand-alone&nbsp;patch&nbsp;is&nbsp;the&lt;br&gt;<br>
right&nbsp;thing&nbsp;to&nbsp;do.&nbsp;Hiding&nbsp;this&nbsp;and&nbsp;other&nbsp;significant&nbsp;changes&nbsp;under&lt;br&gt;<br>
&quot;coverity&nbsp;fixes&quot;&nbsp;cover&nbsp;is&nbsp;wrong&nbsp;IMO,&nbsp;even&nbsp;if&nbsp;those&nbsp;changes&nbsp;were&nbsp;prompted&lt;br&gt;<br>
by&nbsp;something&nbsp;Coverity&nbsp;has&nbsp;detected.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;would&nbsp;encourage&nbsp;you&nbsp;to&nbsp;show&nbsp;actual&nbsp;Squid&nbsp;usage&nbsp;examples&nbsp;(besides&lt;br&gt;<br>
artificial&nbsp;test&nbsp;cases),&nbsp;either&nbsp;in&nbsp;the&nbsp;patch&nbsp;itself&nbsp;or&nbsp;in&nbsp;the&nbsp;patch&nbsp;cover&lt;br&gt;<br>
email.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;./src/HttpHdrCc.cc:HttpHdrCcType&nbsp;&amp;operator++&nbsp;(HttpHdrCcType&nbsp;&amp;aHeader)&lt;br&gt;./src/HttpHdrSc.cc:http_hdr_sc_type&nbsp;&amp;operator++&nbsp;(http_hdr_sc_type&nbsp;&amp;aHeader)&lt;br&gt;./src/HttpHdrScTarget.cc:http_hdr_sc_type&nbsp;&amp;operator++&nbsp;(http_hdr_sc_type&nbsp;&amp;aHeader);&lt;br&gt;./src/HttpMsg.cc:HttpMsgParseState&nbsp;&amp;operator++&nbsp;(HttpMsgParseState&nbsp;&amp;aState)&lt;br&gt;./src/errorpage.cc:err_type&nbsp;&amp;operator++&nbsp;(err_type&nbsp;&amp;anErr)&lt;br&gt;./src/http/RequestMethod.cc:operator++&nbsp;(Http::MethodType&nbsp;&amp;aMethod)&lt;br&gt;./src/mem/old_api.cc:mem_type&nbsp;&amp;operator++&nbsp;(mem_type&nbsp;&amp;aMem)&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;These&nbsp;are&nbsp;all&nbsp;used&nbsp;to&nbsp;iterate&nbsp;over&nbsp;enums&nbsp;from&nbsp;what&nbsp;I&nbsp;can&nbsp;tell.&nbsp;There&nbsp;are&nbsp;for&nbsp;sure&nbsp;more&nbsp;cases&nbsp;using&nbsp;different&nbsp;techniques,&nbsp;that&nbsp;are&nbsp;less&nbsp;trivial&nbsp;to&nbsp;detect.&lt;/div&gt;&lt;div&gt; &lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Also,&nbsp;please&nbsp;adjust&nbsp;the&nbsp;WholeEnum&nbsp;documentation.&nbsp;It&nbsp;is&nbsp;currently&nbsp;too&lt;br&gt;<br>
similar&nbsp;to&nbsp;EnumRange,&nbsp;including&nbsp;the&nbsp;identical&nbsp;first/summary&nbsp;line.&nbsp;It&nbsp;is&lt;br&gt;<br>
often&nbsp;best&nbsp;to&nbsp;document&nbsp;children&nbsp;classes&nbsp;in&nbsp;terms&nbsp;of&nbsp;parent&nbsp;classes&lt;br&gt;<br>
rather&nbsp;then&nbsp;repeating&nbsp;everything&nbsp;the&nbsp;parent&nbsp;documentation&nbsp;[currently]&lt;br&gt;<br>
says&nbsp;IMO.&nbsp;For&nbsp;example:&lt;br&gt;<br>
&lt;br&gt;<br>
///&nbsp;EnumRange&nbsp;for&nbsp;iterating&nbsp;all&nbsp;enum&nbsp;values,&nbsp;from&nbsp;enumBegin_&nbsp;up&nbsp;to,&nbsp;but&lt;br&gt;<br>
//&nbsp;not&nbsp;including,&nbsp;enumEnd_.&nbsp;The&nbsp;two&nbsp;markers&nbsp;must&nbsp;be&nbsp;present&nbsp;in&nbsp;the&nbsp;enum.&lt;br&gt;<br>
template&nbsp;&lt;typename&nbsp;Enum&gt;&lt;br&gt;<br>
class&nbsp;WholeEnum&nbsp;...&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;you&nbsp;have&nbsp;not&nbsp;considered&nbsp;implementing&nbsp;WholeEnum&nbsp;without&nbsp;inheritance,&lt;br&gt;<br>
please&nbsp;do&nbsp;so.&nbsp;I&nbsp;speculate&nbsp;that&nbsp;lack&nbsp;of&nbsp;any&nbsp;data&nbsp;members&nbsp;may&nbsp;help&nbsp;inline&lt;br&gt;<br>
WholeEnum.&nbsp;Please&nbsp;note&nbsp;that&nbsp;I&nbsp;am&nbsp;just&nbsp;asking&nbsp;you&nbsp;to&nbsp;_consider_&nbsp;this.&nbsp;I&lt;br&gt;<br>
do&nbsp;not&nbsp;have&nbsp;enough&nbsp;information&nbsp;to&nbsp;insist&nbsp;on&nbsp;it.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;As&nbsp;all&nbsp;classes&nbsp;are&nbsp;nonvirtual&nbsp;and&nbsp;everything&nbsp;is&nbsp;in&nbsp;the&nbsp;same&nbsp;translation&nbsp;unit,&nbsp;for&nbsp;now&nbsp;I&nbsp;would&nbsp;skip&nbsp;that.&nbsp;and&nbsp;avoid&nbsp;the&nbsp;code&nbsp;duplication.&lt;br&gt;&lt;/div&gt;&lt;div&gt; &lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&gt;&nbsp;+ &nbsp; &nbsp;typedef&nbsp;typename&nbsp;std::underlying_type&lt;Enum&gt;::type&nbsp;value_t;&lt;br&gt;<br>
&gt;&nbsp;+ &nbsp; &nbsp;value_t&nbsp;current_value;&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;type&nbsp;and&nbsp;data&nbsp;member&nbsp;is&nbsp;more&nbsp;about&nbsp;iteration&nbsp;position&nbsp;than&nbsp;&quot;value&quot;&lt;br&gt;<br>
(in&nbsp;STL&nbsp;sense).&nbsp;AFAICT,&nbsp;STL&nbsp;calls&nbsp;this&nbsp;type&nbsp;&quot;iterator_type&quot;&nbsp;and&nbsp;the&nbsp;data&lt;br&gt;<br>
member&nbsp;&quot;current&quot;.&nbsp;I&nbsp;think&nbsp;that&nbsp;naming&nbsp;is&nbsp;better&nbsp;than&nbsp;yours.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Ok&lt;br&gt;&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;+ &nbsp; &nbsp;reverse_iterator&nbsp;rbegin()&nbsp;const&nbsp;{&nbsp;auto&nbsp;i&nbsp;=&nbsp;reverse_iterator(end_);&nbsp;++i;&nbsp;return&nbsp;i;&nbsp;}&lt;br&gt;<br>
&gt;&nbsp;+ &nbsp; &nbsp;reverse_iterator&nbsp;rend()&nbsp;const&nbsp;{&nbsp;auto&nbsp;i&nbsp;=&nbsp;reverse_iterator(begin_);&nbsp;++i;&nbsp;return&nbsp;i;&nbsp;}&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;these&nbsp;methods&nbsp;can&nbsp;be&nbsp;implemented&nbsp;simply&nbsp;as&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;reverse_iterator&nbsp;rbegin()&nbsp;const&nbsp;{&nbsp;return&nbsp;++reverse_iterator(end_);&nbsp;}&lt;br&gt;<br>
 &nbsp;reverse_iterator&nbsp;rend()&nbsp;const&nbsp;{&nbsp;return&nbsp;++reverse_iterator(begin_);&nbsp;}&lt;br&gt;<br>
&lt;br&gt;<br>
then&nbsp;please&nbsp;simplify.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Ok.&lt;br&gt;&lt;/div&gt;&lt;div&gt; &lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
I&nbsp;do&nbsp;not&nbsp;understand&nbsp;how&nbsp;rend()&nbsp;would&nbsp;actually&nbsp;work&nbsp;when&nbsp;iterating&nbsp;whole&lt;br&gt;<br>
enums!&nbsp;For&nbsp;a&nbsp;typical&nbsp;enum&nbsp;that&nbsp;starts&nbsp;with&nbsp;a&nbsp;zero-valued&nbsp;item,&nbsp;will&nbsp;the&lt;br&gt;<br>
rend()&nbsp;position&nbsp;(called&nbsp;current_value&nbsp;in&nbsp;your&nbsp;code)&nbsp;go&nbsp;negative??&nbsp;Is&lt;br&gt;<br>
that&nbsp;actually&nbsp;guaranteed&nbsp;to&nbsp;work&nbsp;by&nbsp;the&nbsp;standard?&nbsp;If&nbsp;not,&nbsp;we&nbsp;may&nbsp;need&nbsp;to&lt;br&gt;<br>
require&nbsp;a&nbsp;begin-1&nbsp;marker&nbsp;(which&nbsp;may&nbsp;be&nbsp;negative&nbsp;if&nbsp;needed)!&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&#39;ll&nbsp;go&nbsp;negative,&nbsp;or&nbsp;in&nbsp;case&nbsp;of&nbsp;unsigned&nbsp;underlyng_type,&nbsp;wrap.&nbsp;It&#39;ll&nbsp;still&nbsp;work&nbsp;(added&nbsp;a&nbsp;test&nbsp;for&nbsp;that),&nbsp;to&nbsp;be&nbsp;sure.&lt;br&gt;&lt;/div&gt;&lt;div&gt; &lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Are&nbsp;you&nbsp;sure&nbsp;you&nbsp;need&nbsp;reverse&nbsp;iterators&nbsp;at&nbsp;all?&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;No,&nbsp;not&nbsp;sure;&nbsp;I&nbsp;added&nbsp;them&nbsp;mostly&nbsp;for&nbsp;completeness&nbsp;sake.&lt;br&gt;&lt;/div&gt;&lt;div&gt; &lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
[&nbsp;EnumRange&nbsp;is&nbsp;not&nbsp;suitable&nbsp;for&nbsp;iterating&nbsp;up&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;an&nbsp;enum&nbsp;that&lt;br&gt;<br>
does&nbsp;not&nbsp;have&nbsp;an&nbsp;end+1&nbsp;marker.&nbsp;This&nbsp;limitation&nbsp;is&nbsp;not&nbsp;a&nbsp;bug,&nbsp;but&nbsp;may&nbsp;be&lt;br&gt;<br>
another&nbsp;reason&nbsp;to&nbsp;require&nbsp;all&nbsp;enums&nbsp;to&nbsp;have&nbsp;markers.&nbsp;]&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&#39;ve&nbsp;added&nbsp;documentation&nbsp;to&nbsp;highlight&nbsp;that&nbsp;corner&nbsp;case&nbsp;so&nbsp;it&nbsp;doesn&#39;t&nbsp;come&nbsp;unexpected.&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&#39;ve&nbsp;considered&nbsp;changing&nbsp;it&nbsp;so&nbsp;that&nbsp;it&nbsp;includes&nbsp;the&nbsp;last&nbsp;value&nbsp;in&nbsp;the&nbsp;range,&nbsp;but&nbsp;in&nbsp;the&nbsp;end&nbsp;decided&nbsp;against&nbsp;it&nbsp;as&nbsp;it&#39;s&nbsp;inconsistent&nbsp;with&nbsp;common&nbsp;behavior.&lt;br&gt;&lt;/div&gt;&lt;div&gt;In&nbsp;some&nbsp;cases&nbsp;it&nbsp;may&nbsp;not&nbsp;be&nbsp;feasible&nbsp;to&nbsp;have&nbsp;markers.&nbsp;Maybe&nbsp;the&nbsp;enum&nbsp;comes&nbsp;from&nbsp;a&nbsp;library,&nbsp;or&nbsp;maybe&nbsp;markers&nbsp;may&nbsp;hurt&nbsp;some&nbsp;code&nbsp;path&nbsp;for&nbsp;all&nbsp;we&nbsp;know.&nbsp;As&nbsp;long&nbsp;as&nbsp;the&nbsp;behavior&nbsp;is&nbsp;well&nbsp;documented&nbsp;and&nbsp;consistent,&nbsp;I&nbsp;don&#39;t&nbsp;think&nbsp;it&#39;ll&nbsp;be&nbsp;a&nbsp;problem.&lt;br&gt;&lt;/div&gt;&lt;div&gt; &lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
If&nbsp;possible,&nbsp;please&nbsp;add&nbsp;and&nbsp;use&nbsp;a&nbsp;global&nbsp;function&nbsp;to&nbsp;guess&nbsp;EnumRange&lt;br&gt;<br>
template&nbsp;parameter&nbsp;value&nbsp;from&nbsp;the&nbsp;actual&nbsp;function&nbsp;parameter&nbsp;types&nbsp;and&lt;br&gt;<br>
return&nbsp;the&nbsp;right&nbsp;EnumRange&nbsp;object,&nbsp;to&nbsp;avoid&nbsp;writing&nbsp;Enum&nbsp;type&nbsp;three&lt;br&gt;<br>
times&nbsp;when&nbsp;using&nbsp;EnumRangeT&lt;&gt;.&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;template&nbsp;&lt;typename&nbsp;Enum&gt;&lt;br&gt;<br>
 &nbsp;EnumRangeT&lt;Enum&gt;&nbsp;EnumRange(Enum&nbsp;begin,&nbsp;Enum&nbsp;end)&nbsp;{&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp;return&nbsp;EnumRangeT&lt;Enum&gt;(begin,&nbsp;end);&lt;br&gt;<br>
 &nbsp;}&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Done.&lt;/div&gt;&lt;div&gt;I&#39;m&nbsp;attaching&nbsp;the&nbsp;resulting&nbsp;files.&nbsp;If&nbsp;that&#39;s&nbsp;OK&nbsp;by&nbsp;you,&nbsp;I&#39;ll&nbsp;start&nbsp;using&nbsp;them&nbsp;and&nbsp;merge&nbsp;together&nbsp;with&nbsp;the&nbsp;next&nbsp;round&nbsp;of&nbsp;coverity-fixes.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;br&gt;<br>
HTH,&lt;br&gt;<br>
&lt;br&gt;<br>
Alex.&lt;br&gt;<br>
&lt;div&gt;&lt;div&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;On&nbsp;08/05/2015&nbsp;07:58&nbsp;PM,&nbsp;Kinkie&nbsp;wrote:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;What&nbsp;I&nbsp;understand&nbsp;from&nbsp;the&nbsp;changes&nbsp;you&nbsp;propose&nbsp;is&nbsp;that:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;1.&nbsp;instead&nbsp;of&nbsp;having&nbsp;explicit&nbsp;begin/end&nbsp;markers&nbsp;passed&nbsp;as&nbsp;template&lt;br&gt;<br>
&gt;&gt;&nbsp;arguments&nbsp;you&nbsp;propose&nbsp;to&nbsp;have&nbsp;a&nbsp;convention&nbsp;on&nbsp;begin/end&nbsp;markers.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;There&nbsp;are&nbsp;several&nbsp;different&nbsp;things/layers&nbsp;mixed&nbsp;up&nbsp;here:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;*&nbsp;If&nbsp;we&nbsp;want&nbsp;to&nbsp;use&nbsp;range&nbsp;loops&nbsp;for&nbsp;enums&nbsp;[in&nbsp;a&nbsp;sane&nbsp;way],&nbsp;then&nbsp;our&lt;br&gt;<br>
&gt;&nbsp;enums&nbsp;should&nbsp;have&nbsp;begin/end&nbsp;markers.&nbsp;Many&nbsp;already&nbsp;do,&nbsp;but&nbsp;we&nbsp;will&nbsp;have&lt;br&gt;<br>
&gt;&nbsp;to&nbsp;standardize&nbsp;their&nbsp;names&nbsp;and&nbsp;fill&nbsp;the&nbsp;gaps.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;*&nbsp;The&nbsp;begin/end&nbsp;parameters&nbsp;should&nbsp;not&nbsp;be&nbsp;template&nbsp;parameters.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;*&nbsp;If&nbsp;we&nbsp;need&nbsp;to&nbsp;iterate&nbsp;sub-ranges,&nbsp;then&nbsp;we&nbsp;should&nbsp;add&nbsp;EnumRangeT&lt;Enum&gt;&lt;br&gt;<br>
&gt;&nbsp;class&nbsp;with&nbsp;begin/end&nbsp;as&nbsp;constructor&nbsp;parameters&nbsp;(see&nbsp;below).&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;2.&nbsp;you&nbsp;skip&nbsp;the&nbsp;typedef&nbsp;fixing&nbsp;these&nbsp;parameters&nbsp;in&nbsp;favor&nbsp;of&nbsp;letting&nbsp;the&lt;br&gt;<br>
&gt;&gt;&nbsp;template&nbsp;parameters&nbsp;appear&nbsp;in&nbsp;the&nbsp;calls.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;There&nbsp;are&nbsp;two&nbsp;separate&nbsp;issues/layers&nbsp;here:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;*&nbsp;Naming&nbsp;an&nbsp;expression&nbsp;is&nbsp;a&nbsp;good&nbsp;idea,&nbsp;especially&nbsp;if&nbsp;that&nbsp;name&nbsp;is&nbsp;going&lt;br&gt;<br>
&gt;&nbsp;to&nbsp;be&nbsp;used&nbsp;multiple&nbsp;times.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;*&nbsp;Fewer&nbsp;template&nbsp;parameters&nbsp;are&nbsp;generally&nbsp;better&nbsp;if&nbsp;they&nbsp;can&nbsp;accomplish&lt;br&gt;<br>
&gt;&nbsp;the&nbsp;same&nbsp;thing&nbsp;as&nbsp;more&nbsp;template&nbsp;parameters.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;1.&nbsp;looks&nbsp;interesting,&nbsp;especially&nbsp;as&nbsp;an&nbsp;enum&nbsp;missing&nbsp;those&nbsp;markers&nbsp;will&lt;br&gt;<br>
&gt;&gt;&nbsp;fail&nbsp;to&nbsp;compile.&nbsp;Maybe&nbsp;both&nbsp;approaches&nbsp;can&nbsp;be&nbsp;combined&nbsp;by&nbsp;using&nbsp;default&lt;br&gt;<br>
&gt;&gt;&nbsp;template&nbsp;arguments,&nbsp;what&nbsp;do&nbsp;you&nbsp;think?&lt;br&gt;<br>
&gt;&gt;&nbsp;template&nbsp;&lt;typename&nbsp;C,&nbsp;C&nbsp;first&nbsp;=&nbsp;C::enumBegin_,&nbsp;C&nbsp;last_plus_one&nbsp;=&lt;br&gt;<br>
&gt;&gt;&nbsp;C::enumEnd_&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;think&nbsp;we&nbsp;should&nbsp;not&nbsp;specify&nbsp;iteration&nbsp;range&nbsp;boundaries&nbsp;as&nbsp;template&lt;br&gt;<br>
&gt;&nbsp;parameters.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;3.&nbsp;we&nbsp;could&nbsp;maybe&nbsp;combine&nbsp;the&nbsp;benefits&nbsp;of&nbsp;beautiful&nbsp;range-for&nbsp;and&nbsp;ugly&lt;br&gt;<br>
&gt;&gt;&nbsp;explicit-for&nbsp;also&nbsp;for&nbsp;shorter&nbsp;ranges&nbsp;by&nbsp;having&nbsp;(in&nbsp;the&nbsp;class-based&lt;br&gt;<br>
&gt;&gt;&nbsp;variant),&nbsp;on&nbsp;top&nbsp;of&nbsp;what&nbsp;you&nbsp;have&nbsp;already&nbsp;proposed&nbsp;(untested)&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Yes,&nbsp;if&nbsp;sub-range&nbsp;iteration&nbsp;using&nbsp;range&nbsp;loops&nbsp;is&nbsp;needed,&nbsp;then&nbsp;we&nbsp;should&lt;br&gt;<br>
&gt;&nbsp;add&nbsp;EnumRangeT&lt;Enum&gt;&nbsp;class&nbsp;that&nbsp;does&nbsp;it.&nbsp;Sorry&nbsp;if&nbsp;I&nbsp;have&nbsp;not&nbsp;mentioned&lt;br&gt;<br>
&gt;&nbsp;that&nbsp;explicitly.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Your&nbsp;sketch&nbsp;for&nbsp;that&nbsp;class&nbsp;is&nbsp;fine,&nbsp;but&nbsp;it&nbsp;will&nbsp;be&nbsp;a&nbsp;EnumRangeT&nbsp;class,&lt;br&gt;<br>
&gt;&nbsp;separate&nbsp;from&nbsp;simpler&nbsp;WholeEnum,&nbsp;and&nbsp;we&nbsp;would&nbsp;try&nbsp;to&nbsp;define&nbsp;a&nbsp;function&lt;br&gt;<br>
&gt;&nbsp;that&nbsp;will&nbsp;create&nbsp;that&nbsp;EnumRangeT&nbsp;object&nbsp;so&nbsp;that&nbsp;we&nbsp;only&nbsp;have&nbsp;to&nbsp;type&lt;br&gt;<br>
&gt;&nbsp;&quot;Numbers&quot;&nbsp;zero&nbsp;or&nbsp;two&nbsp;times&nbsp;as&nbsp;illustrated&nbsp;below:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;template&nbsp;&lt;typename&nbsp;Enum&gt;&lt;br&gt;<br>
&gt;&nbsp;inline&lt;br&gt;<br>
&gt;&nbsp;EnumRangeT&lt;Enum&gt;&nbsp;EnumRange(const&nbsp;Enum&nbsp;from,&nbsp;const&nbsp;Enum&nbsp;to)&nbsp;{&lt;br&gt;<br>
&gt; &nbsp; &nbsp; return&nbsp;EnumRangeT&lt;Enum&gt;(from,&nbsp;to);&lt;br&gt;<br>
&gt;&nbsp;}&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;So&nbsp;that&nbsp;instead&nbsp;of:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;for&nbsp;(auto&nbsp;i&nbsp;:&nbsp;WholeEnum&lt;Numbers&gt;(Numbers::one,&nbsp;Numbers::three))&nbsp;{&lt;br&gt;<br>
&gt;&gt; &nbsp;//&nbsp;do&nbsp;stuff&lt;br&gt;<br>
&gt;&gt;&nbsp;}&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;we&nbsp;could&nbsp;do:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt; &nbsp; //&nbsp;iterating&nbsp;sub-range&nbsp;of&nbsp;a&nbsp;class&nbsp;enum:&lt;br&gt;<br>
&gt; &nbsp; for&nbsp;(auto&nbsp;i:&nbsp;EnumRange(Numbers::one,&nbsp;Numbers::three))&nbsp;...&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt; &nbsp; //&nbsp;iterating&nbsp;sub-range&nbsp;of&nbsp;a&nbsp;global&nbsp;C&nbsp;enum:&lt;br&gt;<br>
&gt; &nbsp; for&nbsp;(auto&nbsp;i:&nbsp;EnumRange(one,&nbsp;three))&nbsp;...&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt; &nbsp; //&nbsp;iterating&nbsp;a&nbsp;whole&nbsp;enum:&lt;br&gt;<br>
&gt; &nbsp; for&nbsp;(auto&nbsp;i:&nbsp;WholeEnum&lt;Numbers&gt;())&nbsp;...&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Again,&nbsp;the&nbsp;above&nbsp;range&nbsp;objects&nbsp;can&nbsp;be&nbsp;named&nbsp;(and&nbsp;the&nbsp;first&nbsp;two&nbsp;should&nbsp;be&lt;br&gt;<br>
&gt;&nbsp;named&nbsp;if&nbsp;they&nbsp;are&nbsp;used&nbsp;more&nbsp;than&nbsp;once).&nbsp;For&nbsp;example:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt; &nbsp; WholeEnum&lt;Numbers&gt;&nbsp;AllNumbers()&nbsp;{&nbsp;return&nbsp;WholeEnum&lt;Numbers&gt;();&nbsp;}&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt; &nbsp; EnumRange&lt;Numbers&gt;&nbsp;FooBarNumbers()&nbsp;{&nbsp;return&nbsp;EnumRange(Numbers::foo,&lt;br&gt;<br>
&gt;&nbsp;Numbers::bar);&nbsp;}&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;It&nbsp;looks&nbsp;to&nbsp;me&nbsp;that&nbsp;I&nbsp;have&nbsp;crossed&nbsp;an&nbsp;itch&nbsp;you&nbsp;feel&nbsp;as&nbsp;well,&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;No,&nbsp;I&nbsp;am&nbsp;just&nbsp;trying&nbsp;to&nbsp;help&nbsp;you&nbsp;scratch&nbsp;your&nbsp;itch&nbsp;without&nbsp;scarring&lt;br&gt;<br>
&gt;&nbsp;Squid&nbsp;code.&nbsp;I&nbsp;do&nbsp;not&nbsp;know&nbsp;whether&nbsp;your&nbsp;itch&nbsp;is&nbsp;real&nbsp;or&nbsp;imaginary.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Cheers,&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Alex.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;&lt;div&gt; &nbsp; &nbsp;Francesco&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;<br>

</tt>
