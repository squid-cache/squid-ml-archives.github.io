<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Hi&nbsp;all,&lt;br&gt;&lt;/div&gt; &nbsp;the&nbsp;attached&nbsp;patch&nbsp;does:&lt;br&gt;&lt;/div&gt;-&nbsp;EnumIterator,&nbsp;which&nbsp;now&nbsp;uses&nbsp;autoconf&nbsp;to&nbsp;detect&nbsp;std::underlying_type&lt;br&gt;&lt;/div&gt;-&nbsp;Removes&nbsp;header&nbsp;masks&nbsp;in&nbsp;HttpHeader.cc&nbsp;and&nbsp;HttpReply&nbsp;in&nbsp;favor&nbsp;of..&lt;br&gt;&lt;/div&gt;-&nbsp;gperf-generated&nbsp;header&nbsp;table&nbsp;with&nbsp;flags&nbsp;describing&nbsp;headers&nbsp;all&nbsp;collected&nbsp;in&nbsp;one&nbsp;place&lt;br&gt;&lt;/div&gt;-&nbsp;replaces&nbsp;HttpHeader::getEntry&nbsp;with&nbsp;explicit&nbsp;vector&nbsp;iteration&lt;br&gt;&lt;/div&gt;-&nbsp;Implements&nbsp;and&nbsp;uses&nbsp;Http::HeaderTable.lookup(string-or-Http::HdrType)&nbsp;to&nbsp;look&nbsp;up&nbsp;headers&nbsp;in&nbsp;the&nbsp;gperf-generated&nbsp;hash&lt;br&gt;&lt;/div&gt;-&nbsp;small&nbsp;optimizationi&nbsp;in&nbsp;HttpHeader::getLastEntry&nbsp;thanks&nbsp;to&nbsp;reverse&nbsp;iterators&lt;br&nbsp;clear=&quot;all&quot;&gt;-&nbsp;use&nbsp;erase-remove&nbsp;pattern&nbsp;in&nbsp;HttpHeader::compact&nbsp;in&nbsp;place&nbsp;of&nbsp;resize()&lt;br&gt;&lt;/div&gt;-&nbsp;use&nbsp;std::&nbsp;algorithms&nbsp;instead&nbsp;of&nbsp;explicit&nbsp;loop&nbsp;in&nbsp;HttpHeader::delById&lt;br&gt;&lt;/div&gt;&lt;div&gt;-&nbsp;gets&nbsp;rid&nbsp;of&nbsp;httpHeaderCalcMask&nbsp;-&nbsp;masks&nbsp;are&nbsp;still&nbsp;used&nbsp;elsewhere&nbsp;but&nbsp;generating&nbsp;them&nbsp;is&nbsp;now&nbsp;easier&nbsp;thanks&nbsp;to&nbsp;WholeEnum&lt;type&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-&nbsp;some&nbsp;readability&nbsp;improvements&lt;br&gt;&lt;/div&gt;&lt;div&gt;-&nbsp;refactor&nbsp;HeaderManglers::track&nbsp;to&nbsp;avoid&nbsp;overloading&nbsp;of&nbsp;meaning&nbsp;the&nbsp;enumEnd_&nbsp;enumerator&nbsp;-&nbsp;please&nbsp;help&nbsp;me&nbsp;checking&nbsp;carefully&nbsp;I&nbsp;haven&#39;t&nbsp;altered&nbsp;functionality&nbsp;here&lt;br&gt;&lt;/div&gt;&lt;div&gt;-&nbsp;implements&nbsp;a&nbsp;case-insensitve&nbsp;hash&nbsp;function&nbsp;for&nbsp;SBuf&lt;br&gt;&lt;/div&gt;&lt;div&gt;-&nbsp;all&nbsp;known&nbsp;headers&nbsp;are&nbsp;now&nbsp;unconditionally&nbsp;parsed.&nbsp;May&nbsp;not&nbsp;be&nbsp;acted&nbsp;upon&nbsp;if&nbsp;some&nbsp;functions&nbsp;are&nbsp;not&nbsp;compiled&nbsp;in&lt;br&gt;&lt;/div&gt;&lt;div&gt;-&nbsp;LookupTable&nbsp;now&nbsp;uses&nbsp;an&nbsp;unordered_map&nbsp;instead&nbsp;of&nbsp;map&nbsp;for&nbsp;backing&nbsp;storage.&nbsp;No&nbsp;user-visible&nbsp;change&nbsp;for&nbsp;SBuf&nbsp;and&nbsp;std::string&nbsp;users&nbsp;unless&nbsp;they&nbsp;wish&nbsp;to&nbsp;have&nbsp;a&nbsp;custom&nbsp;hasher&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Most&nbsp;code&nbsp;has&nbsp;been&nbsp;run-tested&nbsp;(most&nbsp;notable&nbsp;exception:&nbsp;HeaderManglers),&nbsp;farm-build-,&nbsp;coadvisor-&nbsp;and&nbsp;polygraph-&nbsp;tested.&nbsp;The&nbsp;main&nbsp;focus&nbsp;of&nbsp;this&nbsp;refactoring&nbsp;is&nbsp;correctness&nbsp;and&nbsp;readability,&nbsp;c++11-ification&nbsp;and&nbsp;recovering&nbsp;from&nbsp;the&nbsp;performance&nbsp;regression&nbsp;that&nbsp;was&nbsp;introduced&nbsp;~10&nbsp;days&nbsp;ago.&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&gt; &nbsp; &nbsp;Francesco&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
