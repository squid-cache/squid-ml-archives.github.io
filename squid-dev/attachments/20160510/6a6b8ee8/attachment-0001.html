<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;text=&quot;#000000&quot;&nbsp;bgcolor=&quot;#FFFFFF&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Hello,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;patch&nbsp;allows&nbsp;chunking&nbsp;the&nbsp;last&nbsp;HTTP&nbsp;response&nbsp;on&nbsp;a&nbsp;connection.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Squid&nbsp;should&nbsp;avoid&nbsp;signaling&nbsp;the&nbsp;message&nbsp;end&nbsp;by&nbsp;connection&nbsp;closure&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;because&nbsp;it&nbsp;hurts&nbsp;message&nbsp;integrity&nbsp;and&nbsp;sometimes&nbsp;performance.&nbsp;Squid&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;now&nbsp;chunks&nbsp;if:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;1.&nbsp;the&nbsp;response&nbsp;has&nbsp;a&nbsp;body;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;2.&nbsp;the&nbsp;client&nbsp;claims&nbsp;HTTP/1.1&nbsp;support;&nbsp;and&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;3.&nbsp;Squid&nbsp;is&nbsp;not&nbsp;going&nbsp;to&nbsp;send&nbsp;a&nbsp;Content-Length&nbsp;header.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Squid&nbsp;used&nbsp;to&nbsp;exclude&nbsp;to-be-closed&nbsp;connections&nbsp;from&nbsp;chunking&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;because&nbsp;chunking&nbsp;support&nbsp;was&nbsp;added&nbsp;(trunk&nbsp;r10781)&nbsp;specifically&nbsp;to&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;optimize&nbsp;persistent&nbsp;connection&nbsp;reuse&nbsp;and&nbsp;closing&nbsp;connections&nbsp;were&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;incorrectly&nbsp;excluded&nbsp;as&nbsp;a&nbsp;non-interesting/out-of-scope&nbsp;case.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Regards,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Eduard.&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
