<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;text=&quot;#000000&quot;&nbsp;bgcolor=&quot;#FFFFFF&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;2016-07-20&nbsp;16:21&nbsp;GMT+03:00&nbsp;Amos&nbsp;Jeffries<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-rfc2396E&quot;&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&gt;&lt;squid3@treenet.co.nz&gt;&lt;/a&gt;:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;*&nbsp;smpAware()&nbsp;is&nbsp;documented&nbsp;as&nbsp;indicating&nbsp;whether&nbsp;CF&nbsp;is&nbsp;allowed.<br>
&nbsp;&nbsp;&nbsp;&nbsp;Yet&nbsp;the&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;the&nbsp;new&nbsp;comment&nbsp;inside&nbsp;the&nbsp;loop&nbsp;of&nbsp;Store::Disks::smpAware()<br>
&nbsp;&nbsp;&nbsp;&nbsp;seems&nbsp;to&nbsp;be&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;saying&nbsp;the&nbsp;opposite.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;As&nbsp;this&nbsp;patch&nbsp;says,&nbsp;collapsing&nbsp;for&nbsp;revalidation&nbsp;requests&nbsp;is&nbsp;not&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;supported&nbsp;for&nbsp;SMP-aware&nbsp;caches,&nbsp;i.e.&nbsp;if&nbsp;we&nbsp;have&nbsp;configured&nbsp;several&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;caches&nbsp;and&nbsp;even&nbsp;one&nbsp;of&nbsp;them&nbsp;is&nbsp;SMP-aware,&nbsp;the&nbsp;new&nbsp;feature&nbsp;should&nbsp;be&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;disabled.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;*&nbsp;collapsing&nbsp;requires&nbsp;Transients&nbsp;to&nbsp;exist&nbsp;yes?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt; &nbsp;So&nbsp;why&nbsp;disable&nbsp;Transients&nbsp;initialization&nbsp;when&nbsp;!smpAware()&nbsp;?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Transients&nbsp;is&nbsp;not&nbsp;required&nbsp;for&nbsp;collapsing&nbsp;to&nbsp;work&nbsp;for:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Non-SMP&nbsp;Squid.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;SMP&nbsp;Squid&nbsp;with&nbsp;SMP-unaware-caches(like&nbsp;if&nbsp;we&nbsp;had&nbsp;several<br>
&nbsp;&nbsp;&nbsp;&nbsp;independent&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;  &nbsp;Squid&nbsp;instances).&nbsp;In&nbsp;this&nbsp;configuration&nbsp;no&nbsp;sharing&nbsp;among&nbsp;workes&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;  &nbsp;is&nbsp;supposed.&nbsp;Since&nbsp;Transients&nbsp;is&nbsp;a&nbsp;sharing&nbsp;mechanism,&nbsp;it&nbsp;should<br>
&nbsp;&nbsp;&nbsp;&nbsp;be&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;  &nbsp;disabled&nbsp;in&nbsp;this&nbsp;case.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Eduard.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
