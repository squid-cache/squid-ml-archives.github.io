<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;I&nbsp;have&nbsp;big&nbsp;traffic&nbsp;(at&nbsp;least&nbsp;100&nbsp;computers)&nbsp;,&nbsp;and&nbsp;squid&nbsp;often&nbsp;crashed&nbsp;in&nbsp;Comm::DoSelect(int&nbsp;msec)&nbsp;function.&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;interception&nbsp;mode&nbsp;and&nbsp;NAT&nbsp;redirect.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;In&nbsp;coredump&nbsp;I&nbsp;saw&nbsp;then&nbsp;bug&nbsp;is&nbsp;in&nbsp;next&nbsp;fragment&nbsp;of&nbsp;code:&nbsp;&lt;br&gt;&lt;br&gt;446│        &nbsp;for&nbsp;(size_t&nbsp;loopIndex&nbsp;=&nbsp;0;&nbsp;loopIndex&nbsp;&lt;&nbsp;nfds;&nbsp;++loopIndex)&nbsp;{&lt;br&gt;447│            &nbsp;fde&nbsp;*F;&lt;br&gt;448│            &nbsp;int&nbsp;revents&nbsp;=&nbsp;pfds[loopIndex].revents;&lt;br&gt;449│            &nbsp;fd&nbsp;=&nbsp;pfds[loopIndex].fd;&lt;br&gt;450│&lt;br&gt;451│            &nbsp;if&nbsp;(fd&nbsp;==&nbsp;-1)&lt;br&gt;452│                &nbsp;continue;&lt;br&gt;453│&lt;br&gt;454├&gt;           &nbsp;if&nbsp;(fd_table[fd].flags.read_pending)&lt;br&gt;455│                &nbsp;revents&nbsp;|=&nbsp;POLLIN;&lt;br&gt;&lt;br&gt;&lt;/div&gt;SIGSEGV&nbsp;occured&nbsp;often&nbsp;(about&nbsp;1&nbsp;time&nbsp;in&nbsp;a&nbsp;minute)&nbsp;in&nbsp;line&nbsp;454&nbsp;:&nbsp;fd=-66012128&nbsp;,&nbsp;loopindex=283&lt;br&gt;&lt;br&gt;(gdb)&nbsp;p&nbsp;pfds[282]&lt;br&gt;$17&nbsp;=&nbsp;{fd&nbsp;=&nbsp;291,&nbsp;events&nbsp;=&nbsp;64,&nbsp;revents&nbsp;=&nbsp;0}  &nbsp;--&nbsp;looks&nbsp;ok&lt;br&gt;&lt;br&gt;(gdb)&nbsp;p&nbsp;pfds[283]&lt;br&gt;$18&nbsp;=&nbsp;{fd&nbsp;=&nbsp;-66012128,&nbsp;events&nbsp;=&nbsp;32595,&nbsp;revents&nbsp;=&nbsp;0} &nbsp;--&nbsp;looks&nbsp;strange&nbsp;and&nbsp;spoiled&lt;br&gt;&lt;br&gt;(gdb)&nbsp;p&nbsp;Biggest_FD&nbsp;&lt;br&gt;$19&nbsp;=&nbsp;292&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Please,&nbsp;could&nbsp;you&nbsp;fix&nbsp;it.&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks.&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
