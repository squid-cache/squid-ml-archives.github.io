=== modified file 'src/client_side_reply.cc'
--- src/client_side_reply.cc	2016-11-11 04:28:06 +0000
+++ src/client_side_reply.cc	2016-11-29 09:24:16 +0000
@@ -799,14 +799,7 @@
     bool matchedIfNoneMatch = false;
     if (r.header.has(Http::HdrType::IF_NONE_MATCH)) {
         if (!e->hasIfNoneMatchEtag(r)) {
-            // RFC 2616: ignore IMS if If-None-Match did not match
-            r.flags.ims = false;
-            r.ims = -1;
-            r.imslen = 0;
-            r.header.delById(Http::HdrType::IF_MODIFIED_SINCE);
-            http->logType = LOG_TCP_MISS;
-            sendMoreData(result);
-            return true;
+            return false;
         }
 
         if (!r.flags.ims) {

