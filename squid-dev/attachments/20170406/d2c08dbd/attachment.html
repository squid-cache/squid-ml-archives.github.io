<tt>
&lt;div&gt;&gt;Yes,&nbsp;if&nbsp;you&nbsp;intercept&nbsp;port&nbsp;80&nbsp;connections.&nbsp;Assuming&nbsp;you&nbsp;do&nbsp;intercept,&lt;br&gt;&gt;what&nbsp;you&nbsp;want&nbsp;should&nbsp;be&nbsp;already&nbsp;supported&nbsp;by&nbsp;on_unsupported_protocol.&lt;br&gt;&lt;br&gt;&gt;However,&nbsp;there&nbsp;is&nbsp;a&nbsp;known&nbsp;bug&nbsp;that&nbsp;probably&nbsp;breaks&nbsp;(or,&nbsp;more&nbsp;precisely,&lt;br&gt;&gt;does&nbsp;not&nbsp;provide)&nbsp;the&nbsp;advertised&nbsp;support&nbsp;in&nbsp;your&nbsp;particular&nbsp;use&nbsp;case.&nbsp;We&lt;br&gt;&gt;are&nbsp;working&nbsp;on&nbsp;a&nbsp;fix.&nbsp;Christos&nbsp;Tsantilas&nbsp;will&nbsp;post&nbsp;a&nbsp;patch&nbsp;here&nbsp;for&lt;br&gt;&gt;review&nbsp;when&nbsp;it&nbsp;is&nbsp;ready.&nbsp;I&nbsp;do&nbsp;not&nbsp;have&nbsp;a&nbsp;reliable&nbsp;ETA&nbsp;for&nbsp;this&lt;/div&gt;&lt;div&gt;&gt;low-priority&nbsp;sponsorless&nbsp;project,&nbsp;but&nbsp;it&nbsp;might&nbsp;happen&nbsp;within&nbsp;a&nbsp;week&nbsp;or&nbsp;two.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;That's&nbsp;wonderful,&nbsp;I&nbsp;can't&nbsp;wait&nbsp;to&nbsp;see&nbsp;the&nbsp;patch.&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;already&nbsp;use&nbsp;on_unsupported_protocol&nbsp;and&nbsp;it&nbsp;work&nbsp;mostly&nbsp;fine,&nbsp;but&nbsp;it&nbsp;still&lt;/div&gt;&lt;div&gt;have&nbsp;some&nbsp;issue,&nbsp;I&nbsp;fix&nbsp;it&nbsp;by&nbsp;adding&nbsp;two&nbsp;line&nbsp;of&nbsp;code,&nbsp;to&nbsp;assign&nbsp;the&nbsp;target&nbsp;address&lt;/div&gt;&lt;div&gt;so&nbsp;it&nbsp;can&nbsp;be&nbsp;sent&nbsp;to&nbsp;server&nbsp;successfully.&lt;/div&gt;&lt;div&gt;&lt;includetail&gt;&lt;div&gt;&nbsp;&lt;/div&gt;&lt;div&gt;&nbsp;&lt;/div&gt;&lt;div&nbsp;style=&quot;font:Verdana&nbsp;normal&nbsp;14px;color:#000;&quot;&gt;&lt;div&nbsp;style=&quot;FONT-SIZE:&nbsp;12px;FONT-FAMILY:&nbsp;Arial&nbsp;Narrow;padding:2px&nbsp;0&nbsp;2px&nbsp;0;&quot;&gt;------------------&nbsp;Original&nbsp;------------------&lt;/div&gt;&lt;div&nbsp;style=&quot;FONT-SIZE:&nbsp;12px;background:#efefef;padding:8px;&quot;&gt;&lt;div&nbsp;id=&quot;menu_sender&quot;&gt;&lt;b&gt;From:&nbsp;&lt;/b&gt;&nbsp;&quot;Alex&nbsp;Rousskov&quot;&lt;rousskov@measurement-factory.com&gt;;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Date:&nbsp;&lt;/b&gt;&nbsp;Wed,&nbsp;Apr&nbsp;5,&nbsp;2017&nbsp;00:20&nbsp;AM&lt;/div&gt;&lt;div&gt;&lt;b&gt;To:&nbsp;&lt;/b&gt;&nbsp;&quot;squid-dev&quot;&lt;squid-dev@lists.squid-cache.org&gt;;&nbsp;&lt;wbr&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Cc:&nbsp;&lt;/b&gt;&nbsp;&quot;钱国正&quot;&lt;richard.qian@magicwifi.com.cn&gt;;&nbsp;&lt;wbr&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Subject:&nbsp;&lt;/b&gt;&nbsp;Re:&nbsp;[squid-dev]&nbsp;on_unsupported_protocol&nbsp;rewrite&nbsp;to&nbsp;support&nbsp;tcpconnection,&nbsp;relay&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&lt;/div&gt;On&nbsp;03/27/2017&nbsp;12:35&nbsp;AM,&nbsp;钱国正&nbsp;wrote:&lt;br&gt;&lt;br&gt;&gt;&nbsp;What&nbsp;if&nbsp;the&nbsp;protocol&nbsp;is&nbsp;not&nbsp;http,&nbsp;but&nbsp;using&nbsp;80&nbsp;port,&nbsp;can&nbsp;squid&nbsp;relay&nbsp;it&lt;br&gt;&gt;&nbsp;to&nbsp;its&nbsp;target&nbsp;server?&lt;br&gt;&lt;br&gt;Yes,&nbsp;if&nbsp;you&nbsp;intercept&nbsp;port&nbsp;80&nbsp;connections.&nbsp;Assuming&nbsp;you&nbsp;do&nbsp;intercept,&lt;br&gt;what&nbsp;you&nbsp;want&nbsp;should&nbsp;be&nbsp;already&nbsp;supported&nbsp;by&nbsp;on_unsupported_protocol.&lt;br&gt;&lt;br&gt;However,&nbsp;there&nbsp;is&nbsp;a&nbsp;known&nbsp;bug&nbsp;that&nbsp;probably&nbsp;breaks&nbsp;(or,&nbsp;more&nbsp;precisely,&lt;br&gt;does&nbsp;not&nbsp;provide)&nbsp;the&nbsp;advertised&nbsp;support&nbsp;in&nbsp;your&nbsp;particular&nbsp;use&nbsp;case.&nbsp;We&lt;br&gt;are&nbsp;working&nbsp;on&nbsp;a&nbsp;fix.&nbsp;Christos&nbsp;Tsantilas&nbsp;will&nbsp;post&nbsp;a&nbsp;patch&nbsp;here&nbsp;for&lt;br&gt;review&nbsp;when&nbsp;it&nbsp;is&nbsp;ready.&nbsp;I&nbsp;do&nbsp;not&nbsp;have&nbsp;a&nbsp;reliable&nbsp;ETA&nbsp;for&nbsp;this&lt;br&gt;low-priority&nbsp;sponsorless&nbsp;project,&nbsp;but&nbsp;it&nbsp;might&nbsp;happen&nbsp;within&nbsp;a&nbsp;week&nbsp;or&nbsp;two.&lt;br&gt;&lt;br&gt;&lt;br&gt;HTH,&lt;br&gt;&lt;br&gt;Alex.&lt;br&gt;&lt;/div&gt;&lt;!--&lt;![endif]--&gt;&lt;/includetail&gt;&lt;/div&gt;
</tt>
