<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hi&nbsp;Amos,&lt;/div&gt;Sure,&nbsp;thanks. &lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Initially,&nbsp;I&nbsp;am&nbsp;planning&nbsp;to&nbsp;try&nbsp;to&nbsp;use&nbsp;f-stack.&nbsp;Something,&nbsp;similar&nbsp;to &lt;a&nbsp;href=&quot;https://github.com/F-Stack/f-stack/blob/master/doc/F-Stack_Nginx_APP_Guide.md&quot;&gt;https://github.com/F-Stack/f-stack/blob/master/doc/F-Stack_Nginx_APP_Guide.md&lt;/a&gt;&lt;div&gt;F-stack&nbsp;provides&nbsp;wrappers&nbsp;around&nbsp;POSIX&nbsp;APIs.&lt;br&gt;&lt;div&gt;So,&nbsp;apart&nbsp;from&nbsp;squid&nbsp;and&nbsp;open-ssl,&nbsp;would&nbsp;I&nbsp;need&nbsp;to&nbsp;re-build&nbsp;anything&nbsp;else?&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;&lt;div&gt;Manju&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Aug&nbsp;2,&nbsp;2018&nbsp;at&nbsp;3:16&nbsp;AM,&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&nbsp;target=&quot;_blank&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&gt;On&nbsp;02/08/18&nbsp;18:32,&nbsp;Manju&nbsp;Prabhu&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;Hi,&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;plan&nbsp;to&nbsp;use&nbsp;Squid&nbsp;for&nbsp;ssl-proxy&nbsp;in&nbsp;my&nbsp;project.&nbsp;However,&nbsp;I&nbsp;have&nbsp;my&nbsp;own&lt;br&gt;<br>
&gt;&nbsp;data-path&nbsp;and&nbsp;TCP&nbsp;stack&nbsp;I&nbsp;want&nbsp;to&nbsp;try&nbsp;it&nbsp;out&nbsp;with&nbsp;for&nbsp;performance&lt;br&gt;<br>
&gt;&nbsp;reasons.&nbsp;The&nbsp;TCP&nbsp;stack&nbsp;could&nbsp;be&nbsp;in&nbsp;user-space&nbsp;for&nbsp;example,&nbsp;if&nbsp;I&nbsp;use&nbsp;DPDK.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;*&nbsp;Is&nbsp;there&nbsp;any&nbsp;potential&nbsp;pitfalls&nbsp;if&nbsp;I&nbsp;embark&nbsp;on&nbsp;this&nbsp;task?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;The&nbsp;first&nbsp;one&nbsp;is&nbsp;that&nbsp;Squid&nbsp;is&nbsp;is&nbsp;a&nbsp;collection&nbsp;of&nbsp;binaries&nbsp;and&nbsp;processes&lt;br&gt;<br>
working&nbsp;together&nbsp;to&nbsp;process&nbsp;traffic.&nbsp;Not&nbsp;suitable&nbsp;for&nbsp;being&nbsp;a&nbsp;library.&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;*&nbsp;Is&nbsp;it&nbsp;better&nbsp;to&nbsp;convert&nbsp;squid&nbsp;to&nbsp;a&nbsp;library&nbsp;and&nbsp;link&nbsp;it&nbsp;to&nbsp;my&nbsp;process&lt;br&gt;<br>
&gt;&nbsp;along&nbsp;with&nbsp;DPDK&nbsp;(Option&nbsp;A)?&nbsp;Or&nbsp;is&nbsp;it&nbsp;better&nbsp;to&nbsp;try&nbsp;to&nbsp;link&nbsp;DPDK&nbsp;to&nbsp;squid&lt;br&gt;<br>
&gt;&nbsp;(Option&nbsp;B)?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;Neither&nbsp;if&nbsp;you&nbsp;can&nbsp;avoid&nbsp;it.&nbsp;Option&nbsp;B&nbsp;only&nbsp;if&nbsp;you&nbsp;have&nbsp;to.&lt;br&gt;<br>
&lt;br&gt;<br>
Squid&nbsp;uses&nbsp;POSIX&nbsp;API&nbsp;for&nbsp;I/O.&nbsp;So&nbsp;if&nbsp;you&nbsp;are&nbsp;providing&nbsp;POSIX&nbsp;API&nbsp;from&lt;br&gt;<br>
your&nbsp;TCP&nbsp;stack&nbsp;it&nbsp;should&nbsp;be&nbsp;as&nbsp;simple&nbsp;as&nbsp;building&nbsp;Squid&nbsp;with&nbsp;the&lt;br&gt;<br>
appropriate&nbsp;./configure&nbsp;CXXFLAGS,&nbsp;CFLAGS,&nbsp;and&nbsp;LDADD&nbsp;build&nbsp;options&nbsp;to&lt;br&gt;<br>
link&nbsp;your&nbsp;stacks&nbsp;library/objects.&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;you&nbsp;have&nbsp;done&nbsp;some&nbsp;non-standard&nbsp;API&nbsp;you&nbsp;will&nbsp;have&nbsp;to&nbsp;write&nbsp;a&nbsp;mapping&lt;br&gt;<br>
between&nbsp;it&nbsp;and&nbsp;POSIX&nbsp;functions.&nbsp;Doing&nbsp;that&nbsp;in&nbsp;your&nbsp;own&nbsp;code&nbsp;simplifies&lt;br&gt;<br>
things&nbsp;considerably&nbsp;-&nbsp;especially&nbsp;for&nbsp;your&nbsp;codes&nbsp;prospects&nbsp;being&nbsp;used&lt;br&gt;<br>
widely,&nbsp;but&nbsp;it&nbsp;can&nbsp;be&nbsp;patched&nbsp;into&nbsp;Squid&nbsp;if&nbsp;necessary.&lt;br&gt;<br>
&lt;br&gt;<br>
Also,&nbsp;many&nbsp;TLS/SSL&nbsp;I/O&nbsp;operations&nbsp;are&nbsp;done&nbsp;through&nbsp;the&nbsp;system&nbsp;TLS/SSL&lt;br&gt;<br>
library.&nbsp;Not&nbsp;by&nbsp;Squid&nbsp;at&nbsp;all.&nbsp;So&nbsp;there&nbsp;is&nbsp;additional&nbsp;complication&lt;br&gt;<br>
rebuilding&nbsp;that&nbsp;library&nbsp;against&nbsp;your&nbsp;stack&nbsp;before&nbsp;Squid&nbsp;can&nbsp;use&nbsp;it.&lt;br&gt;<br>
Having&nbsp;the&nbsp;standard&nbsp;POSIX&nbsp;API&nbsp;which&nbsp;both&nbsp;can&nbsp;access&nbsp;is&nbsp;much&nbsp;easier&nbsp;and&lt;br&gt;<br>
better&nbsp;than&nbsp;any&nbsp;custom&nbsp;API.&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;*&nbsp;With&nbsp;squid&nbsp;I&nbsp;see&nbsp;that&nbsp;separate&nbsp;threads&nbsp;are&nbsp;created&nbsp;to&nbsp;manage&lt;br&gt;<br>
&gt;&nbsp;certificate&nbsp;mimicking&nbsp;etc.&nbsp;Do&nbsp;all&nbsp;of&nbsp;that&nbsp;get&nbsp;complicated&nbsp;with&nbsp;Option&nbsp;A?&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;Not&nbsp;threads.&nbsp;Processes.&nbsp;Squid&nbsp;is&nbsp;running&nbsp;independent&lt;br&gt;<br>
binaries/interpreters,&nbsp;and&nbsp;forking&nbsp;itself&nbsp;sometimes&nbsp;as&nbsp;well.&nbsp;Thus&nbsp;your&lt;br&gt;<br>
Option&nbsp;A&nbsp;is&nbsp;not&nbsp;an&nbsp;option.&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;apologize&nbsp;in&nbsp;advance&nbsp;for&nbsp;some&nbsp;open&nbsp;ended&nbsp;questions.&nbsp;Please&nbsp;point&nbsp;me&nbsp;to&lt;br&gt;<br>
&gt;&nbsp;the&nbsp;right&nbsp;forum&nbsp;if&nbsp;these&nbsp;questions&nbsp;are&nbsp;not&nbsp;valid&nbsp;here.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;This&nbsp;is&nbsp;the&nbsp;right&nbsp;place.&lt;br&gt;<br>
&lt;br&gt;<br>
Amos&lt;br&gt;<br>
______________________________&lt;wbr&gt;_________________&lt;br&gt;<br>
squid-dev&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-dev@lists.squid-cache.org&quot;&gt;squid-dev@lists.squid-cache.&lt;wbr&gt;org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-dev&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/&lt;wbr&gt;listinfo/squid-dev&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
