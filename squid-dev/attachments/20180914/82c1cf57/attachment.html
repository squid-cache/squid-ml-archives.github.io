<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;div&nbsp;style=&quot;font-family:verdana,&nbsp;helvetica,&nbsp;sans-serif;font-size:16px;&quot;&gt;&lt;div&nbsp;style=&quot;font-family:verdana,&nbsp;helvetica,&nbsp;sans-serif;font-size:16px;&quot;&gt;&lt;div&nbsp;style=&quot;font-family:verdana,&nbsp;helvetica,&nbsp;sans-serif;font-size:16px;&quot;&gt;&lt;div&nbsp;id=&quot;ydp4f2d9a80yiv5911623007&quot;&gt;&lt;div&gt;&lt;div&nbsp;style=&quot;font-family:verdana,&nbsp;helvetica,&nbsp;sans-serif;font-size:16px;&quot;&gt;&lt;div&nbsp;style=&quot;font-family:verdana,&nbsp;helvetica,&nbsp;sans-serif;font-size:16px;&quot;&gt;&lt;div&nbsp;style=&quot;font-family:verdana,&nbsp;helvetica,&nbsp;sans-serif;font-size:16px;&quot;&gt;&lt;div&nbsp;style=&quot;font-family:verdana,&nbsp;helvetica,&nbsp;sans-serif;font-size:16px;&quot;&gt;&lt;div&nbsp;style=&quot;font-family:verdana,&nbsp;helvetica,&nbsp;sans-serif;font-size:16px;&quot;&gt;&lt;div&nbsp;style=&quot;font-family:verdana,&nbsp;helvetica,&nbsp;sans-serif;font-size:16px;&quot;&gt;&lt;div&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Hi&nbsp;Alex,&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;agree&nbsp;adding&nbsp;additional&nbsp;functionality&nbsp;to&nbsp;merge&nbsp;smaller&nbsp;range&nbsp;objects&nbsp;into&nbsp;larger&nbsp;ones&nbsp;is&nbsp;a&nbsp;better&nbsp;approach.&nbsp;However,&nbsp;it&nbsp;requires&nbsp;an&nbsp;additional&nbsp;module&nbsp;and&nbsp;file&nbsp;structure&nbsp;to&nbsp;bookkeep&nbsp;cached&nbsp;ranges&nbsp;of&nbsp;each&nbsp;URL&nbsp;and&nbsp;a&nbsp;way&nbsp;to&nbsp;rebuild&nbsp;the&nbsp;bookkeeping&nbsp;index&nbsp;after&nbsp;a&nbsp;restart.&nbsp;&nbsp;I&nbsp;am&nbsp;not&nbsp;sure&nbsp;if&nbsp;the&nbsp;additional&nbsp;effort&nbsp;will&nbsp;worth&nbsp;it&nbsp;since&nbsp;squid&nbsp;already&nbsp;supports&nbsp;partial&nbsp;content&nbsp;from&nbsp;cache&nbsp;if&nbsp;the&nbsp;full&nbsp;file&nbsp;is&nbsp;loaded&nbsp;in&nbsp;cache.&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;for&nbsp;pointing&nbsp;out&nbsp;that&nbsp;some&nbsp;use&nbsp;cases&nbsp;may&nbsp;not&nbsp;work&nbsp;with&nbsp;my&nbsp;implementation.&nbsp;Now&nbsp;I&nbsp;know&nbsp;my&nbsp;solution&nbsp;is&nbsp;good&nbsp;for&nbsp;a&nbsp;limited&nbsp;use&nbsp;case&nbsp;(repeating&nbsp;requests&nbsp;with&nbsp;similar&nbsp;ranges)&nbsp;but&nbsp;not&nbsp;at&nbsp;a&nbsp;global&nbsp;scale.&nbsp;In&nbsp;that&nbsp;case,&nbsp;I&nbsp;think&nbsp;it&nbsp;will&nbsp;be&nbsp;better&nbsp;not&nbsp;to&nbsp;merge&nbsp;it&nbsp;into&nbsp;the&nbsp;main&nbsp;branch.&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;/span&gt;&lt;h3&nbsp;class=&quot;ydp4f2d9a80yiv5911623007ydp9980a4ear&quot;&nbsp;style=&quot;font-size:18px;font-weight:normal;margin:0px;padding:0px;white-space:nowrap;color:rgb(34,&nbsp;34,&nbsp;34);font-family:arial,&nbsp;sans-serif;&quot;&gt;&lt;a&nbsp;shape=&quot;rect&quot;&nbsp;href=&quot;https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=2&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwjB0_rA4rndAhULT98KHXwwBoQQFjABegQICRAB&amp;url=https%3A%2F%2Fnews.ycombinator.com%2Fitem%3Fid%3D1659912&amp;usg=AOvVaw0Nr4fFgdmeHYahFt2TdKwH&quot;&nbsp;style=&quot;color:rgb(102,&nbsp;0,&nbsp;153);cursor:pointer;&quot;&nbsp;rel=&quot;nofollow&quot;&nbsp;target=&quot;_blank&quot;&gt;&lt;/a&gt;&lt;/h3&gt;&lt;span&gt;&lt;/span&gt;&lt;h3&nbsp;class=&quot;ydp4f2d9a80yiv5911623007ydpce95c16br&quot;&nbsp;style=&quot;font-size:18px;font-weight:normal;margin:0px;padding:0px;white-space:nowrap;color:rgb(34,&nbsp;34,&nbsp;34);font-family:arial,&nbsp;sans-serif;&quot;&gt;&lt;a&nbsp;shape=&quot;rect&quot;&nbsp;href=&quot;https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=2&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwjB0_rA4rndAhULT98KHXwwBoQQFjABegQICRAB&amp;url=https%3A%2F%2Fnews.ycombinator.com%2Fitem%3Fid%3D1659912&amp;usg=AOvVaw0Nr4fFgdmeHYahFt2TdKwH&quot;&nbsp;style=&quot;color:rgb(102,&nbsp;0,&nbsp;153);cursor:pointer;&quot;&nbsp;rel=&quot;nofollow&quot;&nbsp;target=&quot;_blank&quot;&gt;&lt;/a&gt;&lt;/h3&gt;Thank&nbsp;your&nbsp;very&nbsp;much&nbsp;for&nbsp;your&nbsp;detailed&nbsp;explanation.&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;ydped067502yiv5911623007yqt1971680399&quot;&nbsp;id=&quot;ydped067502yiv5911623007yqtfd20593&quot;&gt;&lt;div&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;/div&gt;&lt;div&gt;Benson&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;ydped067502yiv5911623007yqt1971680399&quot;&nbsp;id=&quot;ydped067502yiv5911623007yqtfd62214&quot;&gt;&lt;div&nbsp;class=&quot;ydped067502yiv5911623007ydp9a749293yahoo_quoted&quot;&nbsp;id=&quot;ydped067502yiv5911623007ydp9a749293yahoo_quoted_7607457129&quot;&gt;&lt;div&nbsp;style=&quot;font-family:'Helvetica&nbsp;Neue',&nbsp;Helvetica,&nbsp;Arial,&nbsp;sans-serif;font-size:13px;color:#26282a;&quot;&gt;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;ydped067502yiv5911623007ydp9a749293yqt3716328950&quot;&nbsp;id=&quot;ydped067502yiv5911623007ydp9a749293yqtfd16914&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
