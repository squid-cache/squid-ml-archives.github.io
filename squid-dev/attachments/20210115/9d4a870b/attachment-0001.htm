<tt>
&lt;div&nbsp;dir=&quot;auto&quot;&gt;FYI,&nbsp;this&nbsp;use&nbsp;case&nbsp;is&nbsp;why&nbsp;recent&nbsp;versions&nbsp;of&nbsp;kerberos&nbsp;auth&nbsp;helper&nbsp;being&nbsp;used&nbsp;in&nbsp;the&nbsp;OP&nbsp;config&nbsp;produces&nbsp;group=&nbsp;annotations&nbsp;for&nbsp;authenticated&nbsp;users.&nbsp;The&nbsp;note&nbsp;ACL&nbsp;mentioned&nbsp;can&nbsp;check&nbsp;for&nbsp;group&nbsp;SSID&nbsp;any&nbsp;of&nbsp;the&nbsp;fast&nbsp;access&nbsp;checks.&lt;br&gt;&lt;br&gt;Amos&lt;/div&gt;&lt;div&nbsp;style=&quot;line-height:1.5&quot;&gt;&lt;br&gt;&lt;br&gt;--------&nbsp;Original&nbsp;message&nbsp;--------&lt;br&gt;From:&nbsp;Alex&nbsp;Rousskov&nbsp;&lt;rousskov@measurement-factory.com&gt;&lt;br&gt;Date:&nbsp;Fri,&nbsp;15&nbsp;Jan&nbsp;2021,&nbsp;03:25&lt;br&gt;To:&nbsp;squid-dev@lists.squid-cache.org&lt;br&gt;Subject:&nbsp;Re:&nbsp;[squid-dev]&nbsp;effective&nbsp;acl&nbsp;for&nbsp;tcp_outgoing_address&lt;br&gt;&lt;blockquote&gt;On&nbsp;1/13/21&nbsp;7:47&nbsp;PM,&nbsp;Hideyuki&nbsp;Kawai&nbsp;wrote:&lt;br&gt;&lt;br&gt;&gt;&nbsp;1.&nbsp;&quot;external_acl&quot;&nbsp;can&nbsp;not&nbsp;use&nbsp;on&nbsp;tcp_outgoing_address.&nbsp;Because&nbsp;the&lt;br&gt;&gt;&nbsp;external_acl&nbsp;type&nbsp;is&nbsp;slow.&nbsp;My&nbsp;understanding&nbsp;is&nbsp;correct?&lt;br&gt;&lt;br&gt;&lt;br&gt;Yes,&nbsp;your&nbsp;understanding&nbsp;is&nbsp;correct.&nbsp;There&nbsp;are&nbsp;cases&nbsp;where&nbsp;a&nbsp;slow&nbsp;ACL&lt;br&gt;&quot;usually&nbsp;works&quot;&nbsp;with&nbsp;a&nbsp;tcp_outgoing_address&nbsp;directive&nbsp;due&nbsp;to&nbsp;ACL&nbsp;caching&lt;br&gt;side&nbsp;effects,&nbsp;and&nbsp;there&nbsp;are&nbsp;many&nbsp;examples&nbsp;on&nbsp;the&nbsp;web&nbsp;abusing&nbsp;those&nbsp;side&lt;br&gt;effects,&nbsp;but&nbsp;you&nbsp;should&nbsp;not&nbsp;rely&nbsp;on&nbsp;such&nbsp;accidents&nbsp;when&nbsp;using&nbsp;modern&lt;br&gt;Squid&nbsp;versions.&lt;br&gt;&lt;br&gt;&lt;br&gt;&gt;&nbsp;2.&nbsp;If&nbsp;yes,&nbsp;how&nbsp;to&nbsp;solve&nbsp;my&nbsp;requirement?&lt;br&gt;&lt;br&gt;Use&nbsp;an&nbsp;annotation&nbsp;approach&nbsp;instead.&nbsp;The&nbsp;&quot;note&quot;&nbsp;ACL&nbsp;is&nbsp;fast,&nbsp;and&nbsp;the&lt;br&gt;external&nbsp;ACL&nbsp;helper&nbsp;can&nbsp;annotate&nbsp;transactions&nbsp;(and&nbsp;connections)&nbsp;in&lt;br&gt;modern&nbsp;Squids.&nbsp;The&nbsp;only&nbsp;difficulty&nbsp;with&nbsp;this&nbsp;approach&nbsp;is&nbsp;to&nbsp;find&nbsp;a&lt;br&gt;directive&nbsp;that&nbsp;satisfies&nbsp;all&nbsp;of&nbsp;the&nbsp;conditions&nbsp;below:&lt;br&gt;&lt;br&gt;1.&nbsp;supports&nbsp;slow&nbsp;ACLs&lt;br&gt;2.&nbsp;evaluated&nbsp;after&nbsp;the&nbsp;info&nbsp;needed&nbsp;by&nbsp;the&nbsp;external&nbsp;ACL&nbsp;helper&nbsp;is&nbsp;known&lt;br&gt;3.&nbsp;evaluated&nbsp;before&nbsp;tcp_outgoing_address&lt;br&gt;&lt;br&gt;In&nbsp;many&nbsp;cases,&nbsp;http_access&nbsp;is&nbsp;such&nbsp;a&nbsp;directive,&nbsp;but&nbsp;YMMV.&lt;br&gt;&lt;br&gt;&lt;br&gt;HTH,&lt;br&gt;&lt;br&gt;Alex.&lt;br&gt;P.S.&nbsp;FWIW,&nbsp;I&nbsp;can&nbsp;agree&nbsp;with&nbsp;one&nbsp;Eliezer&nbsp;statement&nbsp;on&nbsp;this&nbsp;thread:&nbsp;This&lt;br&gt;thread&nbsp;belongs&nbsp;to&nbsp;squid-users,&nbsp;not&nbsp;squid-dev.&lt;br&gt;_______________________________________________&lt;br&gt;squid-dev&nbsp;mailing&nbsp;list&lt;br&gt;squid-dev@lists.squid-cache.org&lt;br&gt;http://lists.squid-cache.org/listinfo/squid-dev&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;
</tt>
