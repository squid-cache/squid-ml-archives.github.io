<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;br&gt;I&nbsp;agree&nbsp;that&nbsp;modules&nbsp;that&nbsp;can&nbsp;always&nbsp;be&nbsp;built,&nbsp;should&nbsp;be.&nbsp;Such&nbsp;modules&nbsp;&lt;br&gt;<br>
should&nbsp;have&nbsp;no&nbsp;guarding&nbsp;#ifdefs.&nbsp;I&nbsp;think&nbsp;this&nbsp;is&nbsp;the&nbsp;set&nbsp;of&nbsp;modules&nbsp;that&nbsp;&lt;br&gt;<br>
your&nbsp;proposal&nbsp;is&nbsp;targeting,&nbsp;but&nbsp;please&nbsp;correct&nbsp;me&nbsp;if&nbsp;I&nbsp;am&nbsp;wrong.&nbsp;FWIW,&nbsp;&lt;br&gt;<br>
this&nbsp;design&nbsp;stems&nbsp;from&nbsp;an&nbsp;even&nbsp;more&nbsp;general/fundamental&nbsp;rule&nbsp;of&nbsp;thumb:&nbsp;&lt;br&gt;<br>
Do&nbsp;not&nbsp;add&nbsp;unnecessary&nbsp;#ifdefs.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;agree.&nbsp;We&nbsp;could&nbsp;also&nbsp;work&nbsp;on&nbsp;better&nbsp;isolation,&nbsp;by&nbsp;restricting&nbsp;#ifdef-guarded&nbsp;areas&lt;/div&gt;&lt;div&gt;to&nbsp;specific&nbsp;delegate&nbsp;classes,&nbsp;and&nbsp;then&nbsp;using&nbsp;c++&nbsp;features (e.g.&nbsp;if&nbsp;constexpr,&nbsp;eventually)&nbsp;to&lt;/div&gt;&lt;div&gt;disable&nbsp;the&nbsp;callsites.&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;<br>
However,&nbsp;there&nbsp;is&nbsp;a&nbsp;precondition:&nbsp;Any&nbsp;always-built&nbsp;optional&nbsp;feature&nbsp;with&nbsp;&lt;br&gt;<br>
a&nbsp;potentially&nbsp;significant&nbsp;performance&nbsp;impact&nbsp;or&nbsp;a&nbsp;controversial&nbsp;side&nbsp;&lt;br&gt;<br>
effect&nbsp;should&nbsp;be&nbsp;disabled&nbsp;by&nbsp;default&nbsp;(via&nbsp;squid.conf).&nbsp;Satisfying&nbsp;this&nbsp;&lt;br&gt;<br>
precondition&nbsp;will&nbsp;require&nbsp;code&nbsp;changes.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Yes,&nbsp;I&nbsp;agree.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_signature&quot;&gt; &nbsp; &nbsp;Francesco&lt;/div&gt;&lt;/div&gt;<br>

</tt>
