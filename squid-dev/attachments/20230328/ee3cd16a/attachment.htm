<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;all,&lt;br&gt;&lt;div&gt; &nbsp;that&nbsp;is&nbsp;not&nbsp;just&nbsp;with&nbsp;clang: &lt;a&nbsp;href=&quot;https://build.squid-cache.org/job/trunk-amd64-matrix/COMPILER=gcc,CPU=amd64,OS=fedora-rawhide,force_on_docker_arm64=docker-build-host-lowpri/434/console&quot;&gt;https://build.squid-cache.org/job/trunk-amd64-matrix/COMPILER=gcc,CPU=amd64,OS=fedora-rawhide,force_on_docker_arm64=docker-build-host-lowpri/434/console&lt;/a&gt;&nbsp;shows&nbsp;the&nbsp;error&nbsp;on&nbsp;gcc&nbsp;13.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;recall&nbsp;a&nbsp;conversation where&nbsp;Alex&nbsp;showed&nbsp;it&nbsp;to&nbsp;be&nbsp;a&nbsp;compiler&nbsp;issue,&nbsp;but&nbsp;I&nbsp;can&#39;t&nbsp;find it&nbsp;now.&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Tue,&nbsp;Mar&nbsp;28,&nbsp;2023&nbsp;at&nbsp;2:27 PM&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;Alex,&nbsp;since&nbsp;the&nbsp;whole&nbsp;IPC&nbsp;and&nbsp;SHM&nbsp;system&nbsp;is&nbsp;your&nbsp;design&nbsp;are&nbsp;you&nbsp;able&nbsp;to&nbsp;&lt;br&gt;<br>
work&nbsp;on&nbsp;fixing&nbsp;the&nbsp;FlexibleArray&nbsp;build&nbsp;errors&nbsp;we&nbsp;are&nbsp;now&nbsp;getting&nbsp;with&nbsp;&lt;br&gt;<br>
clang&nbsp;v15.&lt;br&gt;<br>
&lt;br&gt;<br>
IIRC&nbsp;FlexibleArray&nbsp;was&nbsp;a&nbsp;placeholder&nbsp;for&nbsp;std::dynarray,&nbsp;which&nbsp;is&nbsp;now&nbsp;&lt;br&gt;<br>
officially&nbsp;dead.&nbsp;So&nbsp;if&nbsp;we&nbsp;can&nbsp;do&nbsp;an&nbsp;implementation&nbsp;which&nbsp;uses&nbsp;more&nbsp;&lt;br&gt;<br>
standard&nbsp;behaviour&nbsp;it&nbsp;would&nbsp;be&nbsp;better.&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers&lt;br&gt;<br>
Amos&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
[1]&nbsp;Log&nbsp;excerpt&nbsp;from&nbsp;Jenkins:&lt;br&gt;<br>
&lt;br&gt;<br>
01:00:06&nbsp;In&nbsp;file&nbsp;included&nbsp;from&nbsp;../../../../src/ipc/StoreMap.h:12,&lt;br&gt;<br>
01:00:06                 &nbsp;from&nbsp;../../../../src/fs/rock/RockRebuild.h:17,&lt;br&gt;<br>
01:00:06                 &nbsp;from&nbsp;../../../../src/fs/rock/RockRebuild.cc:15:&lt;br&gt;<br>
01:00:06&nbsp;In&nbsp;member&nbsp;function&nbsp;&#39;Item&amp;&nbsp;&lt;br&gt;<br>
Ipc::Mem::FlexibleArray&lt;Item&gt;::operator[](int)&nbsp;[with&nbsp;Item&nbsp;=&nbsp;long&nbsp;&lt;br&gt;<br>
unsigned&nbsp;int]&#39;,&lt;br&gt;<br>
01:00:06    &nbsp;inlined&nbsp;from&nbsp;&#39;Ipc::StoreMapItems&lt;C&gt;::Item&amp;&nbsp;&lt;br&gt;<br>
Ipc::StoreMapItems&lt;C&gt;::at(int)&nbsp;[with&nbsp;C&nbsp;=&nbsp;long&nbsp;unsigned&nbsp;int]&#39;&nbsp;at&nbsp;&lt;br&gt;<br>
../../../../src/ipc/StoreMap.h:136:21,&lt;br&gt;<br>
01:00:06    &nbsp;inlined&nbsp;from&nbsp;&#39;Rock::LoadingEntry::LoadingEntry(sfileno,&nbsp;&lt;br&gt;<br>
Rock::LoadingParts&amp;)&#39;&nbsp;at&nbsp;../../../../src/fs/rock/RockRebuild.cc:199:27:&lt;br&gt;<br>
01:00:06&nbsp;../../../../src/ipc/mem/FlexibleArray.h:34:52:&nbsp;error:&nbsp;array&nbsp;&lt;br&gt;<br>
subscript&nbsp;-1&nbsp;is&nbsp;below&nbsp;array&nbsp;bounds&nbsp;of&nbsp;&#39;long&nbsp;unsigned&nbsp;int&nbsp;[1]&#39;&nbsp;&lt;br&gt;<br>
[-Werror=array-bounds=]&lt;br&gt;<br>
01:00:06   &nbsp;34&nbsp;|    &nbsp;Item&nbsp;&amp;operator&nbsp;[](const&nbsp;int&nbsp;idx)&nbsp;{&nbsp;return&nbsp;items[idx];&nbsp;}&lt;br&gt;<br>
01:00:06      &nbsp;|&nbsp;~~~~~^&lt;br&gt;<br>
01:00:06&nbsp;../../../../src/ipc/mem/FlexibleArray.h:&nbsp;In&nbsp;constructor&nbsp;&lt;br&gt;<br>
&#39;Rock::LoadingEntry::LoadingEntry(sfileno,&nbsp;Rock::LoadingParts&amp;)&#39;:&lt;br&gt;<br>
01:00:06&nbsp;../../../../src/ipc/mem/FlexibleArray.h:43:10:&nbsp;note:&nbsp;while&nbsp;&lt;br&gt;<br>
referencing&nbsp;&#39;Ipc::Mem::FlexibleArray&lt;long&nbsp;unsigned&nbsp;int&gt;::items&#39;&lt;br&gt;<br>
01:00:06   &nbsp;43&nbsp;|    &nbsp;Item&nbsp;items[1];&nbsp;//&nbsp;ensures&nbsp;proper&nbsp;alignment&nbsp;of&nbsp;array&nbsp;&lt;br&gt;<br>
elements&lt;br&gt;<br>
01:00:06      &nbsp;|         &nbsp;^~~~~&lt;br&gt;<br>
01:00:06&nbsp;In&nbsp;member&nbsp;function&nbsp;&#39;Item&amp;&nbsp;&lt;br&gt;<br>
Ipc::Mem::FlexibleArray&lt;Item&gt;::operator[](int)&nbsp;[with&nbsp;Item&nbsp;=&nbsp;unsigned&nbsp;int]&#39;,&lt;br&gt;<br>
01:00:06    &nbsp;inlined&nbsp;from&nbsp;&#39;Ipc::StoreMapItems&lt;C&gt;::Item&amp;&nbsp;&lt;br&gt;<br>
Ipc::StoreMapItems&lt;C&gt;::at(int)&nbsp;[with&nbsp;C&nbsp;=&nbsp;unsigned&nbsp;int]&#39;&nbsp;at&nbsp;&lt;br&gt;<br>
../../../../src/ipc/StoreMap.h:136:21,&lt;br&gt;<br>
01:00:06    &nbsp;inlined&nbsp;from&nbsp;&#39;Rock::LoadingEntry::LoadingEntry(sfileno,&nbsp;&lt;br&gt;<br>
Rock::LoadingParts&amp;)&#39;&nbsp;at&nbsp;../../../../src/fs/rock/RockRebuild.cc:200:33:&lt;br&gt;<br>
01:00:06&nbsp;../../../../src/ipc/mem/FlexibleArray.h:34:52:&nbsp;error:&nbsp;array&nbsp;&lt;br&gt;<br>
subscript&nbsp;-1&nbsp;is&nbsp;below&nbsp;array&nbsp;bounds&nbsp;of&nbsp;&#39;unsigned&nbsp;int&nbsp;[1]&#39;&nbsp;&lt;br&gt;<br>
[-Werror=array-bounds=]&lt;br&gt;<br>
01:00:06   &nbsp;34&nbsp;|    &nbsp;Item&nbsp;&amp;operator&nbsp;[](const&nbsp;int&nbsp;idx)&nbsp;{&nbsp;return&nbsp;items[idx];&nbsp;}&lt;br&gt;<br>
01:00:06      &nbsp;|&nbsp;~~~~~^&lt;br&gt;<br>
01:00:06&nbsp;../../../../src/ipc/mem/FlexibleArray.h:&nbsp;In&nbsp;constructor&nbsp;&lt;br&gt;<br>
&#39;Rock::LoadingEntry::LoadingEntry(sfileno,&nbsp;Rock::LoadingParts&amp;)&#39;:&lt;br&gt;<br>
01:00:06&nbsp;../../../../src/ipc/mem/FlexibleArray.h:43:10:&nbsp;note:&nbsp;while&nbsp;&lt;br&gt;<br>
referencing&nbsp;&#39;Ipc::Mem::FlexibleArray&lt;unsigned&nbsp;int&gt;::items&#39;&lt;br&gt;<br>
01:00:06   &nbsp;43&nbsp;|    &nbsp;Item&nbsp;items[1];&nbsp;//&nbsp;ensures&nbsp;proper&nbsp;alignment&nbsp;of&nbsp;array&nbsp;&lt;br&gt;<br>
elements&lt;br&gt;<br>
01:00:06      &nbsp;|         &nbsp;^~~~~&lt;br&gt;<br>
01:00:06&nbsp;In&nbsp;member&nbsp;function&nbsp;&#39;Item&amp;&nbsp;&lt;br&gt;<br>
Ipc::Mem::FlexibleArray&lt;Item&gt;::operator[](int)&nbsp;[with&nbsp;Item&nbsp;=&nbsp;int]&#39;,&lt;br&gt;<br>
01:00:06    &nbsp;inlined&nbsp;from&nbsp;&#39;Ipc::StoreMapItems&lt;C&gt;::Item&amp;&nbsp;&lt;br&gt;<br>
Ipc::StoreMapItems&lt;C&gt;::at(int)&nbsp;[with&nbsp;C&nbsp;=&nbsp;int]&#39;&nbsp;at&nbsp;&lt;br&gt;<br>
../../../../src/ipc/StoreMap.h:136:21,&lt;br&gt;<br>
01:00:06    &nbsp;inlined&nbsp;from&nbsp;&#39;Rock::LoadingSlot::LoadingSlot(Rock::SlotId,&nbsp;&lt;br&gt;<br>
Rock::LoadingParts&amp;)&#39;&nbsp;at&nbsp;../../../../src/fs/rock/RockRebuild.cc:208:27:&lt;br&gt;<br>
01:00:06&nbsp;../../../../src/ipc/mem/FlexibleArray.h:34:52:&nbsp;error:&nbsp;array&nbsp;&lt;br&gt;<br>
subscript&nbsp;-1&nbsp;is&nbsp;below&nbsp;array&nbsp;bounds&nbsp;of&nbsp;&#39;int&nbsp;[1]&#39;&nbsp;[-Werror=array-bounds=]&lt;br&gt;<br>
01:00:06   &nbsp;34&nbsp;|    &nbsp;Item&nbsp;&amp;operator&nbsp;[](const&nbsp;int&nbsp;idx)&nbsp;{&nbsp;return&nbsp;items[idx];&nbsp;}&lt;br&gt;<br>
01:00:06      &nbsp;|&nbsp;~~~~~^&lt;br&gt;<br>
01:00:06&nbsp;../../../../src/ipc/mem/FlexibleArray.h:&nbsp;In&nbsp;constructor&nbsp;&lt;br&gt;<br>
&#39;Rock::LoadingSlot::LoadingSlot(Rock::SlotId,&nbsp;Rock::LoadingParts&amp;)&#39;:&lt;br&gt;<br>
01:00:06&nbsp;../../../../src/ipc/mem/FlexibleArray.h:43:10:&nbsp;note:&nbsp;while&nbsp;&lt;br&gt;<br>
referencing&nbsp;&#39;Ipc::Mem::FlexibleArray&lt;int&gt;::items&#39;&lt;br&gt;<br>
01:00:06   &nbsp;43&nbsp;|    &nbsp;Item&nbsp;items[1];&nbsp;//&nbsp;ensures&nbsp;proper&nbsp;alignment&nbsp;of&nbsp;array&nbsp;&lt;br&gt;<br>
elements&lt;br&gt;<br>
01:00:06      &nbsp;|         &nbsp;^~~~~&lt;br&gt;<br>
01:00:06&nbsp;cc1plus:&nbsp;all&nbsp;warnings&nbsp;being&nbsp;treated&nbsp;as&nbsp;errors&lt;br&gt;<br>
01:00:06&nbsp;make[4]:&nbsp;***&nbsp;[Makefile:986:&nbsp;rock/RockRebuild.lo]&nbsp;Error&nbsp;1&lt;br&gt;<br>
01:00:06&nbsp;make[4]:&nbsp;Leaving&nbsp;directory&nbsp;&lt;br&gt;<br>
&#39;/srv/jenkins/workspace/5-pr-test/COMPILER/gcc/OS/fedora-rawhide/label/docker-build-host/btlayer-02-maximus/squid-7.0.0-VCS/_build/sub/src/fs&#39;&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-dev&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-dev@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-dev@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-dev&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-dev&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;span&nbsp;class=&quot;gmail_signature_prefix&quot;&gt;--&nbsp;&lt;/span&gt;&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_signature&quot;&gt; &nbsp; &nbsp;Francesco&lt;/div&gt;<br>

</tt>
