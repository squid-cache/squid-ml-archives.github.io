<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;all,&lt;div&gt; &nbsp; I&#39;d&nbsp;like&nbsp;to&nbsp;start&nbsp;working&nbsp;on&nbsp;transitioning&nbsp;ipcache&nbsp;and&nbsp;fqdncache&nbsp;to&nbsp;ClpMap&nbsp;.&lt;/div&gt;&lt;div&gt;There&nbsp;is&nbsp;only&nbsp;one&nbsp;snag,&nbsp;that&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;build&nbsp;consensus&nbsp;on&nbsp;before&nbsp;starting&nbsp;coding:&nbsp;the&nbsp;current&nbsp;configuration&nbsp;directives&nbsp;specify&nbsp;a&nbsp;cache&nbsp;size&nbsp;in&nbsp;number&nbsp;of&nbsp;entries,&nbsp;where&nbsp;ClpMap&nbsp;specifies&nbsp;a&nbsp;max&nbsp;size.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;can&nbsp;see&nbsp;two&nbsp;ways&nbsp;forward:&lt;/div&gt;&lt;div&gt;1.&nbsp;Add&nbsp;a&nbsp;second&nbsp;max-size&nbsp;parameter&nbsp;to&nbsp;ClpMap,&nbsp;ensuring&nbsp;that&nbsp;it&nbsp;starts&nbsp;expunging&nbsp;entries&nbsp;when&nbsp;the&nbsp;maximum&nbsp;capacity&nbsp;in&nbsp;either&nbsp;memory&nbsp;use&nbsp;or&nbsp;number&nbsp;of&nbsp;entries&nbsp;is&nbsp;reached&lt;/div&gt;&lt;div&gt;2.&nbsp;guesstimate&nbsp;how&nbsp;many&nbsp;bytes&nbsp;of&nbsp;memory&nbsp;an&nbsp;ipcache/fqdncache uses,&nbsp;and&nbsp;convert&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regardless,&nbsp;I&nbsp;believe&nbsp;that&nbsp;from&nbsp;the&nbsp;user-facing&nbsp;perspective,&nbsp;a&nbsp;solid&nbsp;way&nbsp;forward&nbsp;is&nbsp;to&nbsp;give&nbsp;to&nbsp;the&nbsp;ipcache_size&nbsp;and&nbsp;fqdncache_size&nbsp;directives&nbsp;an&nbsp;option&nbsp;to&nbsp;specify&nbsp;a&nbsp;max&nbsp;size&nbsp;in&nbsp;entries&nbsp;or,&nbsp;by&nbsp;adding&nbsp;a&nbsp;memory-size&nbsp;suffix,&nbsp;in&nbsp;used&nbsp;memory,&nbsp;and&nbsp;possibly&nbsp;deprecate&nbsp;the&nbsp;max-size-in-entries&nbsp;option&nbsp;in&nbsp;Squid&nbsp;7&nbsp;and&nbsp;retire&nbsp;it&nbsp;in&nbsp;squid&nbsp;8.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thoughts?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;span&nbsp;class=&quot;gmail_signature_prefix&quot;&gt;--&nbsp;&lt;/span&gt;&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_signature&quot;&nbsp;data-smartmail=&quot;gmail_signature&quot;&gt; &nbsp; &nbsp;Francesco&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
