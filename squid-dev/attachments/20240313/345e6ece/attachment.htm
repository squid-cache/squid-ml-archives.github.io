<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;all,&lt;div&gt; &nbsp;I&nbsp;spent&nbsp;some&nbsp;time&nbsp;wondering&nbsp;whether&nbsp;we&nbsp;could&nbsp;reduce&lt;/div&gt;&lt;div&gt;code&nbsp;duplication&nbsp;by&nbsp;making&nbsp;SBuf&nbsp;implement&nbsp;the&nbsp;Packable&nbsp;interface,&lt;/div&gt;&lt;div&gt;and&nbsp;replacing&nbsp;SBufStream&nbsp;with&nbsp;PackableStream.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;interface&nbsp;changes&nbsp;seem&nbsp;rather&nbsp;minimal,&nbsp;SBuf&nbsp;already&nbsp;implements&lt;/div&gt;&lt;div&gt;append(const&nbsp;char*,&nbsp;int)&nbsp;and&nbsp;vappendf;&nbsp;the&nbsp;main&nbsp;difference&nbsp;there&nbsp;is&lt;/div&gt;&lt;div&gt;that&nbsp;SBuf&nbsp;returns&nbsp;*this.&lt;/div&gt;&lt;div&gt;These&nbsp;methods&nbsp;are&nbsp;of&nbsp;course&nbsp;virtual,&nbsp;which&nbsp;is&nbsp;a&nbsp;price&nbsp;to&nbsp;pay,&nbsp;but&nbsp;besides&lt;/div&gt;&lt;div&gt;the&nbsp;vtbl&nbsp;size,&nbsp;maybe&nbsp;there&nbsp;is&nbsp;a&nbsp;way&nbsp;to&nbsp;not&nbsp;pay&nbsp;their&nbsp;cost&nbsp;when&nbsp;not&nbsp;used&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;do&nbsp;you&nbsp;think?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;span&nbsp;class=&quot;gmail_signature_prefix&quot;&gt;--&nbsp;&lt;/span&gt;&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_signature&quot;&nbsp;data-smartmail=&quot;gmail_signature&quot;&gt; &nbsp; &nbsp;Francesco&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
