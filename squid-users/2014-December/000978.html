<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] WARNING: there are more than 100 regular	expressions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20WARNING%3A%20there%20are%20more%20than%20100%20regular%0A%09expressions&In-Reply-To=%3C547C2D83.80908%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001264.html">
   <LINK REL="Next"  HREF="000989.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] WARNING: there are more than 100 regular	expressions</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20WARNING%3A%20there%20are%20more%20than%20100%20regular%0A%09expressions&In-Reply-To=%3C547C2D83.80908%40treenet.co.nz%3E"
       TITLE="[squid-users] WARNING: there are more than 100 regular	expressions">squid3 at treenet.co.nz
       </A><BR>
    <I>Mon Dec  1 08:57:39 UTC 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001264.html">[squid-users] Memory Leak Squid 3.4.9 on FreeBSD 10.0 x64
</A></li>
        <LI>Next message (by thread): <A HREF="000989.html">[squid-users] WARNING: there are more than 100 regular	expressions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#978">[ date ]</a>
              <a href="thread.html#978">[ thread ]</a>
              <a href="subject.html#978">[ subject ]</a>
              <a href="author.html#978">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 28/11/2014 10:23 p.m., <A HREF="https://lists.squid-cache.org/listinfo/squid-users">navari.lorenzo at gmail.com</A> wrote:
&gt;<i> I saw that the error does not preclude the use of the lines over
</I>&gt;<i> the 100. I have no problem with the CPU ( 7 % ) . Only I do not
</I>&gt;<i> like to see &quot; Warning&quot;
</I>&gt;<i> 
</I>
The RE engine can scan for individual patterns easily enough but
copying patterns into libregex memory and scanning the entire URI 100+
times per transaction is quite an excessive amount of work for the
simple task being attempted.

Like Marcus said lists of domains are best matched using dstdomain ACL
type which does an optimized single scan of just the domain name
portion no matter how many entries there are.

If you do have no choice but to use RE, then manually combining
patterns is best. This warning is just an indication that you need to
pay some attention to reducing the count.

For example the list containing:
 facebook\.com
 fbcdn\.com

Can be reduced to:
  f(acebook|bcdn)\.com


If you are importing a public list of domains to block please
investigate whether your list source supports squid dstdomain ACL
formats. The best lists provide files with Squid dstdomain format
(which is also almost identical to the rbldnsd 'RHSBL' data format).

Amos

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.22 (MingW32)

iQEcBAEBAgAGBQJUfC2DAAoJELJo5wb/XPRjQuoH/31JMC52DYzvZqp1xycEIlwU
BTmdZCXZNsnYNklKW0MmN+Li3C3K87d5O07og7EsovG0syFxXlJc5HSvEBgqwQ9v
iAqTLkrg23EMKmqU7cM+A6MhMcuCGK7r//JAQiCqG6JD0iDXS5V8GFTOv2FYLr5e
yHhJ3p5vbmh/K8Qx6JrThTwNq8h41g9ek1PRG+BQj9iem80ujK8m616dXqhJGB4g
3BvgSHbuhkSD9MfOcz1lkftR1+baBK8XtIn/Ue/MkEmveTzbOre+mXEOryZX9ny+
a9nL6ioOzzAIBVqzaLz00xhZkp7Lm2iifycn8p3p6tPi+zIxcp70TemruOON1uE=
=JLTR
-----END PGP SIGNATURE-----

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001264.html">[squid-users] Memory Leak Squid 3.4.9 on FreeBSD 10.0 x64
</A></li>
	<LI>Next message (by thread): <A HREF="000989.html">[squid-users] WARNING: there are more than 100 regular	expressions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#978">[ date ]</a>
              <a href="thread.html#978">[ thread ]</a>
              <a href="subject.html#978">[ subject ]</a>
              <a href="author.html#978">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
