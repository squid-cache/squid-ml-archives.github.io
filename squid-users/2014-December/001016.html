<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid config question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20config%20question&In-Reply-To=%3C54810527.8020602%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001015.html">
   <LINK REL="Next"  HREF="001018.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid config question</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20config%20question&In-Reply-To=%3C54810527.8020602%40treenet.co.nz%3E"
       TITLE="[squid-users] Squid config question">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Dec  5 01:06:47 UTC 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001015.html">[squid-users] Squid config question
</A></li>
        <LI>Next message (by thread): <A HREF="001018.html">[squid-users] Squid 3.3.8 NTLM Group Authentication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1016">[ date ]</a>
              <a href="thread.html#1016">[ thread ]</a>
              <a href="subject.html#1016">[ subject ]</a>
              <a href="author.html#1016">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 5/12/2014 10:17 a.m., JeffDK wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I have domain with about 20 servers.  Server A and B need full
</I>&gt;<i> internet access and ssh access to one offsite server and the rest
</I>&gt;<i> of the servers (domainX) have internet access limited to about 10
</I>&gt;<i> sites.  I've added these lines and I beleive the rest is default.
</I>&gt;<i> 
</I>&gt;<i> acl ServerA src &#8220;Server A IP&#8221; acl ServerB src &#8220;Server B IP&#8221;
</I>
I assume the above &quot;&quot; details are actual IP addresses rather than
quoted strings. Otherwise that is your problem.

You can also list multiple IP addresses in one ACL. So you dont need
separate serverA and serverB definitions.

I suggest naming the ACL for what meaning your policy assigns to them.
ie
 acl unlimitedServers src &#8220;Server A IP&#8221; &#8220;Server B IP&#8221;
 http_access allow unlimitedServers

&gt;<i> acl AllowedSites securezone &#8220;/usr/local/etc/allowed-sites.squid
</I>&gt;<i> 
</I>&gt;<i> http_access allow ServerA http_access allow ServerB http_access
</I>&gt;<i> allow &#8220;domainX&#8221; AllowedSites http_access deny all
</I>&gt;<i> 
</I>&gt;<i> It seems that this config still restricts all servers to the
</I>&gt;<i> allowed sites and does not allow ssh.  I'm a beginner and curious
</I>&gt;<i> if anyone has any ideas?
</I>
SSH uses TLS protocol, not HTTP protocol. Squid will only let it
through if the tool used sends HTTP messages. For non-HTTP protocols
use your system firewall to permit/deny.


Without details on how you are identifying the problem &quot;restricts all
servers to the allowed sites&quot; its hard to suggest any other
possibilities for what might be wrong.
 If the problem persists after you make the above changes then we are
going to need access.log records showing the problem, and exact
details of what those elided IPs are.

Amos
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.22 (MingW32)

iQEcBAEBAgAGBQJUgQUnAAoJELJo5wb/XPRjm8YH+QF1IRQMTvLxkDjH9EJk2xKC
REXtNmdsibKPyA25ruv7pj+VhO+s8pGOYYsaFQROip7KapzvvoftFy5QvdjMrdsY
N3GKKGwvGc9tXAFsg7Un5aRJ2nt6uY8+cgIk4BhuLrfmKvNrXA8nRZ0Muco/IN2I
z0R4MeinMMpm/c+jZDGVNs1VI2sg49LGJUSwTWrue7Rf7hjFtid3B2jIp32mqfQT
A5R9g3WyOZOJgADbYbqvEQ3Jta3Dq2s8Q2lCjl99UEw4W/SpXl0evbKWziH/2k1T
SYrW5js+fVxzepmRnukN1BLsRMqzIrzVeFi2V5wEFLZutnGiu/iPOmKikfnFVMU=
=jbuW
-----END PGP SIGNATURE-----

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001015.html">[squid-users] Squid config question
</A></li>
	<LI>Next message (by thread): <A HREF="001018.html">[squid-users] Squid 3.3.8 NTLM Group Authentication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1016">[ date ]</a>
              <a href="thread.html#1016">[ thread ]</a>
              <a href="subject.html#1016">[ subject ]</a>
              <a href="author.html#1016">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
