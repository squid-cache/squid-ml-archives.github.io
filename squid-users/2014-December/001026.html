<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] https issues for google
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20https%20issues%20for%20google&In-Reply-To=%3C2329B68B3D676246BA0D1149E22F509F01A6FBA2%40bneseqs20.bradnams.com.au%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001081.html">
   <LINK REL="Next"  HREF="001027.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] https issues for google</H1>
    <B>glenn.groves at bradnams.com.au</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20https%20issues%20for%20google&In-Reply-To=%3C2329B68B3D676246BA0D1149E22F509F01A6FBA2%40bneseqs20.bradnams.com.au%3E"
       TITLE="[squid-users] https issues for google">glenn.groves at bradnams.com.au
       </A><BR>
    <I>Sun Dec  7 08:48:11 UTC 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001081.html">[squid-users] Configuring the sslbump
</A></li>
        <LI>Next message (by thread): <A HREF="001027.html">[squid-users] https issues for google
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1026">[ date ]</a>
              <a href="thread.html#1026">[ thread ]</a>
              <a href="subject.html#1026">[ subject ]</a>
              <a href="author.html#1026">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

I have finally been able to spend time upgrading a server to a later squid version, I have tried 3.4.9.

I could not get authentication to work for this test, but proceeded to test without (also dismisses auth as the problem).

I am getting the following in the logs with secure sites now the squid is 3.4.9:

192.168.9.69 TCP_MISS/200 295 CONNECT www.google.com:443 - HIER_DIRECT/216.58.220.1
192.168.9.69 TCP_MISS/200 0 CONNECT www.google.com:443 - HIER_DIRECT/216.58.220.132

Upgrading to 3.4.9 on Centos as been a pain so far, no point in proceeding with the problem persisting. Can someone advise why I am getting TCP_MISS/200 when going to secure google sites?

Or more importantly, how to fix my squid 3.1 on centos 6.5 with this problem.

Thanks,

Glenn

-----Original Message-----
From: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On Behalf Of <A HREF="https://lists.squid-cache.org/listinfo/squid-users">glenn.groves at bradnams.com.au</A>
Sent: Thursday, 9 October 2014 9:04 AM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] https issues for google

Hi Eliezer,

The DNS we are using is the ISP default for external, our internal domain DNS for internal. Nslookup works for all tests.

I would like to update to the latest stable, but I am concerned of breaking the current setup. It took a little work to get it working correctly particularity on the multiple authentication methods working with our domain and trust.

I support what has been said - to check the logs. This will likely take time as I cannot reproduce this issue on demand - and I think users are starting to not report the issue and just living with it (or it is not getting all the way to me at least). I will have to get lucky at some point on my computer and look into it then.

Could squid be getting mixed up when mulipule https requests are to the same address (e.g. <A HREF="https://google.com.au">https://google.com.au</A>)?

Thanks,

Glenn 

-----Original Message-----
From: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On Behalf Of Eliezer Croitoru
Sent: Wednesday, 8 October 2014 7:39 AM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] https issues for google

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hey Glenn,

Since you are not using intercept or tproxy the basic place to look at is the access.log.
You can see there if the proxy is trying for example to reach an IPV6 address (by mistake).

Also to make sure there is an issue you can use specific exception like the cacheadmin acl you are using to allow the cacheadmin access without authentication for the basic test.

Also you are indeed using the latest CentOS 6.5 squid but since the current stable version is 3.4.8 you should try to upgrade(to something else then 3.1) due to other issues.

The issue can be a network or dns related issue which was not detected until now.

Please first make sure that the access.log and cache.log files are clean for errors or issues.

What dns servers are you using?

Eliezer

On 10/07/2014 06:51 AM, <A HREF="https://lists.squid-cache.org/listinfo/squid-users">glenn.groves at bradnams.com.au</A> wrote:
&gt;<i> Hi All,
</I>&gt;<i> 
</I>&gt;<i> We have a weird issue where https sites apparently don't respond (get 
</I>&gt;<i> message &quot;this page can't be displayed&quot;). This mainly affects google 
</I>&gt;<i> websites and to a lesser affect youtube. It has been reported it may 
</I>&gt;<i> have affected some banking sites but this is unconfirmed. We are 
</I>&gt;<i> running centos 6.5 with up to date squid from the centos repositories.
</I>&gt;<i> 
</I>&gt;<i> Here is the version of squid: yum list installed | grep squid 
</I>&gt;<i> squid.x86_64                         7:3.1.10-20.el6_5.3
</I>&gt;<i> 
</I>&gt;<i> The https sites work fine if I put a direct hole in the firewall to 
</I>&gt;<i> allow internet traffic directly out - but this is not a solution.
</I>&gt;<i> 
</I>&gt;<i> Thanks, Glenn
</I>
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iQEcBAEBAgAGBQJUNF1uAAoJENxnfXtQ8ZQUlfYH/i0o9MQDTt8g5aINRljVSMZc
btC8mcYn/JYn4WUPIoOc4/MhvuYg0JO6hXsSoPxjI1khMrq9fTV2c8eaLItWqYCf
hjioWPJs2hPwfw6WDi0I6kF0Is+hD/MGsJci7s+jg593lHnm+ZjoDIHj0aCpcdgy
u95961yZWXINbYsjTirFftnX5UC5MWbwZjaah6zW84RKZl/pa1vJM/tdgqiLdE5V
GDNhS01mbKPfin8oc/RQk4nYAK39vncSebvSHJwkvPJIKlb54Yti64j6qUfPsav3
uUvIVKSpxZjFFJoLtw1zjn1MwyynoHNGT1lP+HptsGkDoeGJ6YWU/IwB1sFKcVk=
=GKmE
-----END PGP SIGNATURE-----
_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
 
This message (including any attachments) is confidential and may be legally privileged. If you are not the intended recipient, you should not disclose, copy or use any part of it - please delete all copies immediately and notify the Bradnam Group Helpdesk at <A HREF="https://lists.squid-cache.org/listinfo/squid-users">helpdesk at bradnams.com.au</A> 

Any information, statements or opinions contained in this message (including any attachments) are given by the author. They are not given on behalf of the Bradnam Group unless subsequently confirmed by an individual other than the author who is duly authorised to represent the Bradnam Group (or any of its subsidiary and associate companies).

All sent and received email from/to the Bradnam Group (or any of its subsidiary and associate companies) is automatically scanned for the presence of computer viruses, security issues and inappropriate content.

For further information on the services which the Bradnam Group provides visit our web
site(s) at www.bradnams.com.au or www.nationalglass.com.au _______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001081.html">[squid-users] Configuring the sslbump
</A></li>
	<LI>Next message (by thread): <A HREF="001027.html">[squid-users] https issues for google
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1026">[ date ]</a>
              <a href="thread.html#1026">[ thread ]</a>
              <a href="subject.html#1026">[ subject ]</a>
              <a href="author.html#1026">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
