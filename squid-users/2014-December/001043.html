<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Need to disable IPv6 / AAAA lookup in squid
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Need%20to%20disable%20IPv6%20/%20AAAA%20lookup%20in%20squid&In-Reply-To=%3C548568A9.7010501%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001042.html">
   <LINK REL="Next"  HREF="001050.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Need to disable IPv6 / AAAA lookup in squid</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Need%20to%20disable%20IPv6%20/%20AAAA%20lookup%20in%20squid&In-Reply-To=%3C548568A9.7010501%40treenet.co.nz%3E"
       TITLE="[squid-users] Need to disable IPv6 / AAAA lookup in squid">squid3 at treenet.co.nz
       </A><BR>
    <I>Mon Dec  8 09:00:25 UTC 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001042.html">[squid-users] Need to disable IPv6 / AAAA lookup in squid
</A></li>
        <LI>Next message (by thread): <A HREF="001050.html">[squid-users] anyone transparently proxying ipv6?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1043">[ date ]</a>
              <a href="thread.html#1043">[ thread ]</a>
              <a href="subject.html#1043">[ subject ]</a>
              <a href="author.html#1043">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 8/12/2014 9:28 p.m., kamal kannan wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I'm currently running squid 3.4.
</I>&gt;<i> 
</I>&gt;<i> Somtime facing below error/
</I>&gt;<i> 
</I>&gt;<i> &quot;&quot;Connection to 2620:0:861:ed1a::1 failed.&quot;
</I>&gt;<i> 
</I>&gt;<i> &quot;The system returned: (101) Network is unreachable&quot;&quot;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Tried tcp_outgoing_address and dns_v4_first on.
</I>&gt;<i> 
</I>&gt;<i> But nothing fixes this issue.
</I>&gt;<i> 
</I>&gt;<i> Is there an option to disable AAAA lookup from squid.
</I>&gt;<i> 
</I>
No. IPv6 support has been mandatory in all networking software since
2012. (RFC 6540, also known as BCP 177).


The option available to make Squid prefer IPv4 over IPv6 is
&quot;dns_v4_first on&quot; which you found. With that Squid is already trying
all available IPv4 connections to the destination domain before its
tries any IPv6 ones. The reported &quot;failed&quot; IP was simply the last to
be tried out of the full set.

Possibly Squid was instructed to connect to exactly that IPv6 address
and no DNS is taking place at all.

Either way the entire domain/network is unreachable with the
information in the URL given.

If you get IPv6 working you may be able to access those URLs. That can
be as simple as installing miredo software, or setting up a 6to4
tunnel to 192.88.99.1, or both on the Squid machine.

Amos

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.22 (MingW32)

iQEcBAEBAgAGBQJUhWipAAoJELJo5wb/XPRjLyoH/jQ78etEn01kzq5DTZczmqnv
C0FgQfHv5re+csKeIQDESBHrB51HhqrG2xLXEp04//hfxDOUptwCH1b+gq1WGsL3
WuYegalOljjeQMFomfups+2nGgls99VbRLWboybunKJ420kIJ6lDF6BePk0PPmHR
Pm9SFvc3atF3K2DRQlv33zqFQJYsH8i7cXJ9Qa6wOtSCr7epCzC03RjN65/JRIHF
UHcB96e1NMD1FTRlljIyYTNXWa5dudECadzGqPbROraAkAXnQ4LGhDQSFM5j0gJt
pAKYW8HsOMkxBLRtiZTULBgyff++4DESOrg5wgTEI5zr7TbjeakQ2SnCp6RUckY=
=RRxZ
-----END PGP SIGNATURE-----

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001042.html">[squid-users] Need to disable IPv6 / AAAA lookup in squid
</A></li>
	<LI>Next message (by thread): <A HREF="001050.html">[squid-users] anyone transparently proxying ipv6?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1043">[ date ]</a>
              <a href="thread.html#1043">[ thread ]</a>
              <a href="subject.html#1043">[ subject ]</a>
              <a href="author.html#1043">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
