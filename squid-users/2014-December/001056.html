<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Check if object is already cached
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Check%20if%20object%20is%20already%20cached&In-Reply-To=%3C5488695E.7060105%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001052.html">
   <LINK REL="Next"  HREF="001066.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Check if object is already cached</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Check%20if%20object%20is%20already%20cached&In-Reply-To=%3C5488695E.7060105%40treenet.co.nz%3E"
       TITLE="[squid-users] Check if object is already cached">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Dec 10 15:40:14 UTC 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001052.html">[squid-users] Check if object is already cached
</A></li>
        <LI>Next message (by thread): <A HREF="001066.html">[squid-users] Check if object is already cached
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1056">[ date ]</a>
              <a href="thread.html#1056">[ thread ]</a>
              <a href="subject.html#1056">[ subject ]</a>
              <a href="author.html#1056">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 10/12/2014 6:04 a.m., Ulises Nicolini wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> I'm working with some scripts to prefetch content but having some 
</I>&gt;<i> trouble, what I can't work out is a way to check if a given object
</I>&gt;<i> is already cached, in other words, I want to check if the object
</I>&gt;<i> I'm going to download is going to hit, in which case I can ignore
</I>&gt;<i> it. I've read squidclient man page but could not find something
</I>&gt;<i> like it
</I>&gt;<i> 
</I>
While HIT means cached object was used, an object being in cache does
not mean it will HIT.

An object in cache can be stale, or could be a variant different from
what will be needed in future.

Pre-caching in HTTP has not been of much use since HTTP/1.1 started
getting popular. The HTTP/1.0 concept of HIT/MISS got extended and
expanded to include near-HIT or near-MISS or shared-HIT.

Back to your question... The way to check if an object is in cache is
to fetch it. If it was already there it will be refreshed, and if it
was missing it may now be cached (if cacheable).
 If you want to do the test without risking upstream bandwidth use the
squidclient parameter -H 'Cache-Control:only-if-cached\n' which will
return 200 status only if the cache does contain the object matching
the request.

Amos

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.22 (MingW32)

iQEcBAEBAgAGBQJUiGldAAoJELJo5wb/XPRjfdgIANEiy8Zbo3Yfo64hco//khUI
wf9GHxViAGEH2LmDopDrjxfmHsOjeZoZoeepCGh3NgHgGOaFo0wQAw1uYUd0QBxY
15YzLEyb5WFo/L6BmQM344RolFOrqygY+tNVQabyUWRZ9h0iMahStpOm7TZY44Ih
pPYyByNJLRTiixCtPDtqfCPgc+1dL0ZHjvc+//iw48HIocx9dmv8UEfFPMOsyGO4
+0LBXPvdYG3ccBpXJjJ9fYURR5G7EuTi3lnOvwR4Cf7vJyd8v06qjCK+yT20o6O4
A4MgAvbRN6eLTY9RZ6nnlbzqDmBnS8g19bjedhOkPx8mPWi4xeZWfUF8U8MBIMQ=
=FRb2
-----END PGP SIGNATURE-----

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001052.html">[squid-users] Check if object is already cached
</A></li>
	<LI>Next message (by thread): <A HREF="001066.html">[squid-users] Check if object is already cached
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1056">[ date ]</a>
              <a href="thread.html#1056">[ thread ]</a>
              <a href="subject.html#1056">[ subject ]</a>
              <a href="author.html#1056">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
