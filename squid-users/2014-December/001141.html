<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] SQUID_ERR_SSL_HANDSHAKE
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SQUID_ERR_SSL_HANDSHAKE&In-Reply-To=%3CCAJbW%2Brn3zt-OmFVuUP%2BoFw0ka5Gk7eenS_dwKceEYBRf3CrCRw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001143.html">
   <LINK REL="Next"  HREF="001142.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] SQUID_ERR_SSL_HANDSHAKE</H1>
    <B>Roman Gelfand</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SQUID_ERR_SSL_HANDSHAKE&In-Reply-To=%3CCAJbW%2Brn3zt-OmFVuUP%2BoFw0ka5Gk7eenS_dwKceEYBRf3CrCRw%40mail.gmail.com%3E"
       TITLE="[squid-users] SQUID_ERR_SSL_HANDSHAKE">rgelfand2 at gmail.com
       </A><BR>
    <I>Thu Dec 18 04:32:14 UTC 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001143.html">[squid-users] Debian 7 LDAP auth to 2008r2
</A></li>
        <LI>Next message (by thread): <A HREF="001142.html">[squid-users] SQUID_ERR_SSL_HANDSHAKE
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1141">[ date ]</a>
              <a href="thread.html#1141">[ thread ]</a>
              <a href="subject.html#1141">[ subject ]</a>
              <a href="author.html#1141">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>*The squid version is 3.4.5.  The server certificate is sslv3 generated by
openssl.  Not quite sure as to what the problem is.*


*Failed to establish a secure connection to 192.168.3.108*

The system returned:

(71) Protocol error (TLS code: SQUID_ERR_SSL_HANDSHAKE)

Handshake with SSL server failed: error:140770FC:SSL
routines:SSL23_GET_SERVER_HELLO:unknown protocol

This proxy and the remote host failed to negotiate a mutually acceptable
security settings for handling your request. It is possible that the remote
host does not support secure connections, or the proxy is not satisfied
with the host security credentials.




The ssl configuration is...

https_port 443 cert=/etc/ssl/certs/webfarm.crt
key=/etc/ssl/private/webfarm.key accel vport
options=NO_SSLv2:NO_TLSv1:CIPHER_SERVER_PREFERENCE
cipher=RC4:!MD5:!aNULL:!EDH

cache_peer 192.168.3.108 parent 80 0 no-query originserver login=PASS
front-end-https=on name=cmm2Server

acl cmm2 dstdomain [my domain]
cache_peer_access cmm2Server allow cmm2
never_direct allow cmm2

http_access allow cmm2
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20141217/d3a13fb9/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20141217/d3a13fb9/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001143.html">[squid-users] Debian 7 LDAP auth to 2008r2
</A></li>
	<LI>Next message (by thread): <A HREF="001142.html">[squid-users] SQUID_ERR_SSL_HANDSHAKE
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1141">[ date ]</a>
              <a href="thread.html#1141">[ thread ]</a>
              <a href="subject.html#1141">[ subject ]</a>
              <a href="author.html#1141">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
