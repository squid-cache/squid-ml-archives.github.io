<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Problem with running squid 3.5 on windows 7
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Problem%20with%20running%20squid%203.5%20on%20windows%207&In-Reply-To=%3C54939693.3060102%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001150.html">
   <LINK REL="Next"  HREF="001160.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Problem with running squid 3.5 on windows 7</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Problem%20with%20running%20squid%203.5%20on%20windows%207&In-Reply-To=%3C54939693.3060102%40treenet.co.nz%3E"
       TITLE="[squid-users] Problem with running squid 3.5 on windows 7">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Dec 19 03:08:03 UTC 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001150.html">[squid-users] Problem with running squid 3.5 on windows 7
</A></li>
        <LI>Next message (by thread): <A HREF="001160.html">[squid-users] Problem with running squid 3.5 on windows 7
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1151">[ date ]</a>
              <a href="thread.html#1151">[ thread ]</a>
              <a href="subject.html#1151">[ subject ]</a>
              <a href="author.html#1151">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 19/12/2014 12:32 p.m., Eldar Akchurin wrote:
&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Hi, I have cross-compiled squid 3.5 with mingw32-w64 on Ubuntu. The
</I>&gt;<i> properties are: c:\squid\sbin&gt;squid -v Squid Cache: Version
</I>&gt;<i> 3.5.0.3-20141209-r13687 Service Name: squid Test build configure
</I>&gt;<i> options:  '--host=i686-w64-mingw32' '--prefix=c:/squid'
</I>&gt;<i> 'CXXFLAGS=-DWI NVER=0x601 -D_WIN32_WINNT=0x601 -fpermissive'
</I>&gt;<i> 'CFLAGS=-DWINVER=0x601 -D_WIN32_WI NNT=0x601 -fpermissive'
</I>&gt;<i> 'BUILDCXX=g++' 'BUILDCXXFLAGS=-DFOO' '--enable-build-inf o=Test
</I>&gt;<i> build' 'host_alias=i686-w64-mingw32' --enable-ltdl-convenience
</I>&gt;<i> 
</I>&gt;<i> When I try to run it on windows 7 64, it gives a critical error at
</I>&gt;<i> start, below is the debug trace
</I>&lt;snip&gt;


&gt;<i> 2014/12/19 00:17:40.171| Address.cc(379) lookupHostIP: Given Non-IP
</I>&gt;<i> '127.0.0.1': No such host is known. 2014/12/19 00:17:40.171|
</I>&gt;<i> aclIpParseIpData: unknown first address in '127.0.0.1/3 2' 
</I>&gt;<i> 2014/12/19 00:17:40.171| tools.cc(543) leave_suid: leave_suid: PID
</I>&gt;<i> 4792 called FATAL: Bungled Default Configuration line 6: acl
</I>&gt;<i> localhost src 127.0.0.1/32 ::1 Squid Cache (Version
</I>&gt;<i> 3.5.0.3-20141209-r13687): Terminated abnormally. CPU Usage: 0.000
</I>&gt;<i> seconds = 0.000 user + 0.000 sys Maximum Resident Size: 0 KB Page
</I>&gt;<i> faults with physical i/o: 0 Could you please advice what I'm doing
</I>&gt;<i> wrong or whether this is a bug? Thank you!-eAdd to Calendar
</I>&gt;<i> 
</I>
Thank you for testing this all out Eldar. It seems you have gotten a
little further than I have with this (I diverted to working on native
MinGW build issues).

This is a bug. Though where it is coming from is still unknown. The
operation being performed is that Squid is passing the IP text string
to the system getaddrinfo() resolver API for conversion to a number.

First thing to check is whether Squid is actually using the native OS
API or the stub replacement bundled in compat/. The config.log file
generated during build will have an entry indicating whether
getaddrinfo() was found or not in the MinGW headers. If the detection
failed there will be some debug info about what broke.

Amos
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.22 (MingW32)

iQEcBAEBAgAGBQJUk5aTAAoJELJo5wb/XPRjiLkIAL0nS83JZLdTV7DfMFsDFqRJ
yU7rFKWwqXp8P64K5Woedwga4JMpUrkxvbQ1t+wqS3mKWX3hJ72+M71juVeyt7pr
pMZYGkoSZNXwhh/i73BxH2hVX7lysI8WKUw0NgBW7cZYe7KleLIODf8GWQhmXhJi
vQh5uAfeYO6W/V+wwiRpY47H49yuU3UpypzsZ4P2i88+QvKZaef0T4ZJN8Wlresg
ldc7vwBTqQ7p810s87dUrYAuCYZJKqYj/cQnUX86dEgkfxZSPwbDHS8qQdUxAvMb
DqIZRp+H7hdO2DK1Sh1FCwyDEEbkuc0O/GurH6Nnw9IVpSAmWr4l8l82WdDXd4o=
=4unG
-----END PGP SIGNATURE-----

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001150.html">[squid-users] Problem with running squid 3.5 on windows 7
</A></li>
	<LI>Next message (by thread): <A HREF="001160.html">[squid-users] Problem with running squid 3.5 on windows 7
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1151">[ date ]</a>
              <a href="thread.html#1151">[ thread ]</a>
              <a href="subject.html#1151">[ subject ]</a>
              <a href="author.html#1151">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
