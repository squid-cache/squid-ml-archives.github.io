<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] You MUST specify at least one Domain Controller.You	can use either \ or / as separator between the domain name
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20You%20MUST%20specify%20at%20least%20one%20Domain%20Controller.You%0A%09can%20use%20either%20%5C%20or%20/%20as%20separator%20between%20the%20domain%20name&In-Reply-To=%3C001701d01bda%24b676bdc0%2423643940%24%40netstream.ps%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001196.html">
   <LINK REL="Next"  HREF="001156.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] You MUST specify at least one Domain Controller.You	can use either \ or / as separator between the domain name</H1>
    <B>Ahmed Allzaeem</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20You%20MUST%20specify%20at%20least%20one%20Domain%20Controller.You%0A%09can%20use%20either%20%5C%20or%20/%20as%20separator%20between%20the%20domain%20name&In-Reply-To=%3C001701d01bda%24b676bdc0%2423643940%24%40netstream.ps%3E"
       TITLE="[squid-users] You MUST specify at least one Domain Controller.You	can use either \ or / as separator between the domain name">ahmed.zaeem at netstream.ps
       </A><BR>
    <I>Fri Dec 19 22:25:35 UTC 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001196.html">[squid-users] ERR_CONNECT_FAIL 110
</A></li>
        <LI>Next message (by thread): <A HREF="001156.html">[squid-users] You MUST specify at least one Domain Controller.You can use either \ or / as separator between the domain name
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1154">[ date ]</a>
              <a href="thread.html#1154">[ thread ]</a>
              <a href="subject.html#1154">[ subject ]</a>
              <a href="author.html#1154">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi guys im trygint to use Kerberos authentication between squid &amp; AD.

I have configured ntp  , dns , winbind , samba and also joinf the squid to
the AD domina

 

Now the issue I have is running squid

I added the following helpers below :

 


#Kerberos config for squid

auth_param ntlm program /usr/lib/squid/ntlm_smb_lm_auth
--helper-protocol=squid-2.5-basic

auth_param ntlm children 10

auth_param basic program /usr/lib/squid/ntlm_smb_lm_auth
--helper-protocol=squid-2.5-basic

auth_param basic children 5

auth_param basic realm Domain Proxy Server

auth_param basic credentialsttl 2 hours

auth_param basic casesensitive off

authenticate_cache_garbage_interval 10 seconds

authenticate_ttl 0 seconds

acl lcl src 192.168.1.0/24

acl auth proxy_auth REQUIRED

http_access allow auth

 

 

And I have the errors below :


You MUST specify at least one Domain Controller.

You can use either \ or / as separator between the domain name 

and the controller name

(ntlm_smb_lm_auth): invalid option -- 's'

unknown option: -?. Exiting

(ntlm_smb_lm_auth) usage:

(ntlm_smb_lm_auth) [-b] [-f] [-d] [-l] domain\controller [domain\controller
...]

-b enables load-balancing among controllers

-f enables failover among controllers (DEPRECATED and always active)

-l changes behavior on domain controller failyures to last-ditch.

-d enables debugging statements if DEBUG was defined at build-time.

 

You MUST specify at least one Domain Controller.

You can use either \ or / as separator between the domain name 

and the controller name

(ntlm_smb_lm_auth): invalid option -- 'i'

unknown option: -?. Exiting

(ntlm_smb_lm_auth) usage:

(ntlm_smb_lm_auth) [-b] [-f] [-d] [-l] domain\controller [domain\controller
...]

-b enables load-balancing among controllers

-f enables failover among controllers (DEPRECATED and always active)

-l changes behavior on domain controller failyures to last-ditch.

-d enables debugging statements if DEBUG was defined at build-time.

 

You MUST specify at least one Domain Controller.

You can use either \ or / as separator between the domain name 

and the controller name

(ntlm_smb_lm_auth): invalid option -- 'c'

unknown option: -?. Exiting

(ntlm_smb_lm_auth) usage:

(ntlm_smb_lm_auth) [-b] [-f] [-d] [-l] domain\controller [domain\controller
...]

-b enables load-balancing among controllers

-f enables failover among controllers (DEPRECATED and always active)

-l changes behavior on domain controller failyures to last-ditch.

-d enables debugging statements if DEBUG was defined at build-time.

 

You MUST specify at least one Domain Controller.

You can use either \ or / as separator between the domain name 

and the controller name

2014/12/19 07:22:52| Local cache digest enabled; rebuild/rewrite every
3600/3600 sec

2014/12/19 07:22:52| Store logging disabled

2014/12/19 07:22:52| Swap maxSize 0 + 262144 KB, estimated 20164 objects

2014/12/19 07:22:52| Target number of buckets: 1008

2014/12/19 07:22:52| Using 8192 Store buckets

2014/12/19 07:22:52| Max Mem  size: 262144 KB

2014/12/19 07:22:52| Max Swap size: 0 KB

2014/12/19 07:22:52| Using Least Load store dir selection

2014/12/19 07:22:52| Set Current Directory to /var/spool/squid

2014/12/19 07:22:52| Loaded Icons.

2014/12/19 07:22:52| Accepting  HTTP connections at [::]:3128, FD 45.

2014/12/19 07:22:52| HTCP Disabled.

2014/12/19 07:22:52| Squid plugin modules loaded: 0

2014/12/19 07:22:52| Adaptation support is off.

2014/12/19 07:22:52| Ready to serve requests.

2014/12/19 07:22:52| WARNING: ntlmauthenticator #1 (FD 10) exited

2014/12/19 07:22:52| WARNING: ntlmauthenticator #2 (FD 12) exited

2014/12/19 07:22:52| WARNING: ntlmauthenticator #3 (FD 14) exited

2014/12/19 07:22:52| WARNING: ntlmauthenticator #4 (FD 16) exited

2014/12/19 07:22:52| WARNING: ntlmauthenticator #5 (FD 18) exited

2014/12/19 07:22:52| Too few ntlmauthenticator processes are running

2014/12/19 07:22:52| storeDirWriteCleanLogs: Starting...

2014/12/19 07:22:52|   Finished.  Wrote 0 entries.

2014/12/19 07:22:52|   Took 0.00 seconds (  0.00 entries/sec).

FATAL: The ntlmauthenticator helpers are crashing too rapidly, need help!

 

Squid Cache (Version 3.1.10): Terminated abnormally.

CPU Usage: 0.044 seconds = 0.023 user + 0.021 sys

Maximum Resident Size: 37216 KB

Page faults with physical i/o: 0

Memory usage for squid via mallinfo():

        total space in arena:    3188 KB

        Ordinary blocks:         3068 KB     20 blks

        Small blocks:               0 KB      0 blks

        Holding blocks:          1012 KB      4 blks

        Free Small blocks:          0 KB

        Free Ordinary blocks:     119 KB

        Total in use:            4080 KB 128%

        Total free:               119 KB 4%

 

 

Imusing  centos 6.x wth squid verison as :


[<A HREF="https://lists.squid-cache.org/listinfo/squid-users">root at drvirus</A> ~]# squid -v

Squid Cache: Version 3.1.10

configure options:  '--build=i386-redhat-linux-gnu'
'--host=i386-redhat-linux-gnu' '--target=i686-redhat-linux-gnu'
'--program-prefix=' '--prefix=/usr' '--exec-prefix=/usr' '--bindir=/usr/bin'
'--sbindir=/usr/sbin' '--sysconfdir=/etc' '--datadir=/usr/share'
'--includedir=/usr/include' '--libdir=/usr/lib' '--libexecdir=/usr/libexec'
'--sharedstatedir=/var/lib' '--mandir=/usr/share/man'
'--infodir=/usr/share/info' '--enable-internal-dns'
'--disable-strict-error-checking' '--exec_prefix=/usr'
'--libexecdir=/usr/lib/squid' '--localstatedir=/var'
'--datadir=/usr/share/squid' '--sysconfdir=/etc/squid'
'--with-logdir=$(localstatedir)/log/squid'
'--with-pidfile=$(localstatedir)/run/squid.pid'
'--disable-dependency-tracking' '--enable-arp-acl'
'--enable-follow-x-forwarded-for'
'--enable-auth=basic,digest,ntlm,negotiate'
'--enable-basic-auth-helpers=LDAP,MSNT,NCSA,PAM,SMB,YP,getpwnam,multi-domain
-NTLM,SASL,DB,POP3,squid_radius_auth'
'--enable-ntlm-auth-helpers=smb_lm,no_check,fakeauth'
'--enable-digest-auth-helpers=password,ldap,eDirectory'
'--enable-negotiate-auth-helpers=squid_kerb_auth'
'--enable-external-acl-helpers=ip_user,ldap_group,session,unix_group,wbinfo_
group' '--enable-cache-digests' '--enable-cachemgr-hostname=localhost'
'--enable-delay-pools' '--enable-epoll' '--enable-icap-client'
'--enable-ident-lookups' '--with-large-files' '--enable-linux-netfilter'
'--enable-referer-log' '--enable-removal-policies=heap,lru' '--enable-snmp'
'--enable-ssl' '--enable-storeio=aufs,diskd,ufs' '--enable-useragent-log'
'--enable-wccpv2' '--enable-esi' '--with-aio' '--with-default-user=squid'
'--with-filedescriptors=16384' '--with-dl' '--with-openssl'
'--with-pthreads' 'build_alias=i386-redhat-linux-gnu'
'host_alias=i386-redhat-linux-gnu' 'target_alias=i686-redhat-linux-gnu'
'CFLAGS=-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions
-fstack-protector --param=ssp-buffer-size=4 -m32 -march=i686 -mtune=atom
-fasynchronous-unwind-tables -fpie' 'LDFLAGS=-pie' 'CXXFLAGS=-O2 -g -pipe
-Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector
--param=ssp-buffer-size=4 -m32 -march=i686 -mtune=atom
-fasynchronous-unwind-tables -fpie'
--with-squid=/builddir/build/BUILD/squid-3.1.10

[<A HREF="https://lists.squid-cache.org/listinfo/squid-users">root at drvirus</A> ~]#

 

 

 

 

Any help wts going on ???

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20141219/1299ca83/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20141219/1299ca83/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001196.html">[squid-users] ERR_CONNECT_FAIL 110
</A></li>
	<LI>Next message (by thread): <A HREF="001156.html">[squid-users] You MUST specify at least one Domain Controller.You can use either \ or / as separator between the domain name
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1154">[ date ]</a>
              <a href="thread.html#1154">[ thread ]</a>
              <a href="subject.html#1154">[ subject ]</a>
              <a href="author.html#1154">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
