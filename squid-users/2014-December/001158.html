<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] You MUST specify at least one Domain	Controller.You can use either \ or / as separator between the	domain name
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20You%20MUST%20specify%20at%20least%20one%20Domain%0A%09Controller.You%20can%20use%20either%20%5C%20or%20/%20as%20separator%20between%20the%0A%09domain%20name&In-Reply-To=%3C002101d01be1%24677b74c0%2436725e40%24%40netstream.ps%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001156.html">
   <LINK REL="Next"  HREF="001161.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] You MUST specify at least one Domain	Controller.You can use either \ or / as separator between the	domain name</H1>
    <B>Ahmed Allzaeem</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20You%20MUST%20specify%20at%20least%20one%20Domain%0A%09Controller.You%20can%20use%20either%20%5C%20or%20/%20as%20separator%20between%20the%0A%09domain%20name&In-Reply-To=%3C002101d01be1%24677b74c0%2436725e40%24%40netstream.ps%3E"
       TITLE="[squid-users] You MUST specify at least one Domain	Controller.You can use either \ or / as separator between the	domain name">ahmed.zaeem at netstream.ps
       </A><BR>
    <I>Fri Dec 19 23:13:28 UTC 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001156.html">[squid-users] You MUST specify at least one Domain Controller.You can use either \ or / as separator between the domain name
</A></li>
        <LI>Next message (by thread): <A HREF="001161.html">[squid-users] You MUST specify at least one Domain Controller.You can use either \ or / as separator between the domain name
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1158">[ date ]</a>
              <a href="thread.html#1158">[ thread ]</a>
              <a href="subject.html#1158">[ subject ]</a>
              <a href="author.html#1158">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>HI amos , thanks for clarification , 
Actually I modified it with the correct samba path with ==&gt; /usr/bin/ntlm_auth whereas I checked and found that helper !


So , my squid config  file to  :
=======
##Kerberos config for squid
auth_param ntlm program /usr/bin/ntlm_auth --helper-protocol=squid-2.5-basic
auth_param ntlm children 10
auth_param basic program /usr/bin/ntlm_auth --helper-protocol=squid-2.5-basic
auth_param basic children 5
auth_param basic realm Domain Proxy Server
auth_param basic credentialsttl 2 hours
auth_param basic casesensitive off
authenticate_cache_garbage_interval 10 seconds
authenticate_ttl 0 seconds
acl lcl src 192.168.1.0/24
acl auth proxy_auth REQUIRED
http_access allow auth
====================



But I have an error below :
=======================
2014/12/19 08:11:00|   Took 0.00 seconds (  0.00 entries/sec).
FATAL: authenticateNTLMHandleReply: *** Unsupported helper response ***, 'ERR'

Squid Cache (Version 3.1.10): Terminated abnormally.
CPU Usage: 0.047 seconds = 0.022 user + 0.025 sys
Maximum Resident Size: 37904 KB
Page faults with physical i/o: 0
Memory usage for squid via mallinfo():
        total space in arena:    3192 KB
        Ordinary blocks:         3105 KB     15 blks
        Small blocks:               0 KB      0 blks
        Holding blocks:          1012 KB      4 blks
        Free Small blocks:          0 KB
        Free Ordinary blocks:      86 KB
        Total in use:            4117 KB 129%
        Total free:                86 KB 3%
2014/12/19 08:11:03| Starting Squid Cache version 3.1.10 for i386-redhat-linux-gnu...
2014/12/19 08:11:03| Process ID 7571
2014/12/19 08:11:03| With 1024 file descriptors available
2014/12/19 08:11:03| Initializing IP Cache...
2014/12/19 08:11:03| DNS Socket created at [::], FD 8
2014/12/19 08:11:03| DNS Socket created at 0.0.0.0, FD 9
2014/12/19 08:11:03| Adding nameserver 192.168.1.242 from /etc/resolv.conf
2014/12/19 08:11:03| Adding nameserver 199.85.126.20 from /etc/resolv.conf
2014/12/19 08:11:03| helperOpenServers: Starting 10/10 'ntlm_auth' processes
2014/12/19 08:11:03| helperOpenServers: Starting 5/5 'ntlm_auth' processes
2014/12/19 08:11:03| User-Agent logging is disabled.
2014/12/19 08:11:03| Referer logging is disabled.
2014/12/19 08:11:04| Unlinkd pipe opened on FD 44
2014/12/19 08:11:04| Local cache digest enabled; rebuild/rewrite every 3600/3600 sec
2014/12/19 08:11:04| Store logging disabled
2014/12/19 08:11:04| Swap maxSize 0 + 262144 KB, estimated 20164 objects
2014/12/19 08:11:04| Target number of buckets: 1008
2014/12/19 08:11:04| Using 8192 Store buckets
2014/12/19 08:11:04| Max Mem  size: 262144 KB
2014/12/19 08:11:04| Max Mem  size: 262144 KB
2014/12/19 08:11:04| Max Swap size: 0 KB
2014/12/19 08:11:04| Using Least Load store dir selection
2014/12/19 08:11:04| Set Current Directory to /var/spool/squid
2014/12/19 08:11:04| Loaded Icons.
2014/12/19 08:11:04| Accepting  HTTP connections at [::]:3128, FD 45.
2014/12/19 08:11:04| HTCP Disabled.
2014/12/19 08:11:04| Squid plugin modules loaded: 0
2014/12/19 08:11:04| Adaptation support is off.
2014/12/19 08:11:04| Ready to serve requests.
2014/12/19 08:11:04| Adaptation support is off.
2014/12/19 08:11:04| Ready to serve requests.
2014/12/19 08:11:04| storeDirWriteCleanLogs: Starting...
2014/12/19 08:11:04|   Finished.  Wrote 0 entries.
2014/12/19 08:11:04|   Took 0.00 seconds (  0.00 entries/sec).
2014/12/19 08:11:04|   Took 0.00 seconds (  0.00 entries/sec).
FATAL: authenticateNTLMHandleReply: *** Unsupported helper response ***, 'ERR'

Squid Cache (Version 3.1.10): Terminated abnormally.
CPU Usage: 0.040 seconds = 0.027 user + 0.013 sys
Maximum Resident Size: 38976 KB
Page faults with physical i/o: 0
Memory usage for squid via mallinfo():
        total space in arena:    5120 KB
        Ordinary blocks:         4105 KB     13 blks
        Small blocks:               0 KB      0 blks
        Holding blocks:             0 KB      0 blks
        Free Small blocks:          0 KB
        Free Ordinary blocks:    1014 KB
        Total in use:            4105 KB 80%
        Total free:              1014 KB 20%
2014/12/19 08:11:07| Starting Squid Cache version 3.1.10 for i386-redhat-linux-gnu...
2014/12/19 08:11:07| Process ID 7589
2014/12/19 08:11:07| With 1024 file descriptors available
2014/12/19 08:11:07| Initializing IP Cache...
2014/12/19 08:11:07| DNS Socket created at [::], FD 8
2014/12/19 08:11:07| DNS Socket created at 0.0.0.0, FD 9
2014/12/19 08:11:07| Adding nameserver 192.168.1.242 from /etc/resolv.conf
2014/12/19 08:11:07| Adding nameserver 199.85.126.20 from /etc/resolv.conf
2014/12/19 08:11:07| helperOpenServers: Starting 10/10 'ntlm_auth' processes
2014/12/19 08:11:07| helperOpenServers: Starting 5/5 'ntlm_auth' processes
2014/12/19 08:11:07| User-Agent logging is disabled.
2014/12/19 08:11:07| Referer logging is disabled.
2014/12/19 08:11:07| Unlinkd pipe opened on FD 44
2014/12/19 08:11:07| Local cache digest enabled; rebuild/rewrite every 3600/3600 sec
2014/12/19 08:11:07| Store logging disabled
2014/12/19 08:11:07| Swap maxSize 0 + 262144 KB, estimated 20164 objects
2014/12/19 08:11:07| Target number of buckets: 1008
2014/12/19 08:11:07| Using 8192 Store buckets
2014/12/19 08:11:07| Max Mem  size: 262144 KB
2014/12/19 08:11:07| Max Swap size: 0 KB
2014/12/19 08:11:07| Using Least Load store dir selection
2014/12/19 08:11:07| Set Current Directory to /var/spool/squid
2014/12/19 08:11:07| Loaded Icons.
2014/12/19 08:11:07| Accepting  HTTP connections at [::]:3128, FD 45.
2014/12/19 08:11:07| HTCP Disabled.
2014/12/19 08:11:07| Squid plugin modules loaded: 0
2014/12/19 08:11:07| Adaptation support is off.
2014/12/19 08:11:07| Ready to serve requests.
2014/12/19 08:11:08| storeLateRelease: released 0 objects
^C
==============================================

-----Original Message-----
From: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On Behalf Of Amos Jeffries
Sent: Friday, December 19, 2014 5:01 AM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] You MUST specify at least one Domain Controller.You can use either \ or / as separator between the domain name

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 20/12/2014 11:25 a.m., Ahmed Allzaeem wrote:
&gt;<i> Hi guys im trygint to use Kerberos authentication between squid &amp; AD.
</I>&gt;<i> 
</I>&gt;<i> I have configured ntp  , dns , winbind , samba and also joinf the 
</I>&gt;<i> squid to the AD domina
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Now the issue I have is running squid
</I>&gt;<i> 
</I>&gt;<i> I added the following helpers below :
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> #Kerberos config for squid
</I>&gt;<i> 
</I>&gt;<i> auth_param ntlm program /usr/lib/squid/ntlm_smb_lm_auth
</I>
This is *not* the Samba NTLM helper. This helper does not even perform NTLMv1. It performs LM protocol (used for authenticating against Windows 3.1 servers) using HTTP &quot;NTLM&quot; auth scheme headers.


&gt;<i> --helper-protocol=squid-2.5-basic
</I>
This is a command line parameter for the Samba ntlm_auth helper.

The samba helper still uses the name ntlm_auth. It is probably located in /usr/bin/ or /usr/local/bin/.

Amos
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.22 (MingW32)

iQEcBAEBAgAGBQJUlCGbAAoJELJo5wb/XPRj1awIAI0+646wnDRvjed2bSw7Cote
9tIBA0j7VLF0wcWx1HLpViLhatq2ep7S/isz0pkGwUgcX3w20f1sXfuM3MbdGYH6
Gh3lRCsOaXqRhIQY80pNjfQKs75oGn8Zelqlm3DmJjxCcFLOtj/5Du1CASquajJ5
26T11+HZ9EJ4rwG+LXN3nAXRjcoEGdIt09VmiCLGukHN1FvkFo7Ms0CR0i7urTYD
IQUI4uoObQJVq+vY9gJyzhyEdWJqvK9Q1fM7fUptCcaIGMhkM70Ue8RLu4YUWH82
GzXTf+Hdt7zfnyq0ALusvGOiXyQ3UFcYRfijBuhfEAjPd2Vr2F/7oCoGueieFb8=
=48pC
-----END PGP SIGNATURE-----
_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001156.html">[squid-users] You MUST specify at least one Domain Controller.You can use either \ or / as separator between the domain name
</A></li>
	<LI>Next message (by thread): <A HREF="001161.html">[squid-users] You MUST specify at least one Domain Controller.You can use either \ or / as separator between the domain name
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1158">[ date ]</a>
              <a href="thread.html#1158">[ thread ]</a>
              <a href="subject.html#1158">[ subject ]</a>
              <a href="author.html#1158">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
