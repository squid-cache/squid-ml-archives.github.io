<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Determining unique clients in Squid
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Determining%20unique%20clients%20in%20Squid&In-Reply-To=%3C54944830.1%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001172.html">
   <LINK REL="Next"  HREF="001179.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Determining unique clients in Squid</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Determining%20unique%20clients%20in%20Squid&In-Reply-To=%3C54944830.1%40treenet.co.nz%3E"
       TITLE="[squid-users] Determining unique clients in Squid">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Dec 19 15:45:52 UTC 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001172.html">[squid-users] Determining unique clients in Squid
</A></li>
        <LI>Next message (by thread): <A HREF="001179.html">[squid-users] Determining unique clients in Squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1177">[ date ]</a>
              <a href="thread.html#1177">[ thread ]</a>
              <a href="subject.html#1177">[ subject ]</a>
              <a href="author.html#1177">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 20/12/2014 3:52 a.m., Veiko Kukk wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I have been trying to understand, how does Squid determine
</I>&gt;<i> different clients, but it is not clear from the documentation. I
</I>&gt;<i> guess this does not depend entirely on IP address, right? Otherwise
</I>&gt;<i> all clients behind NAT would be considered as single client.
</I>
It depends ...

 ... for Squids' network measurement mechanisms and client_db* do
depend on IP address alone.

 ... security contexts like TLS/SSL or connection pinning depend on
the TCP socket numbers in use.


Other concepts of &quot;client&quot; such as authenticated user or end-user or
remote software agent are not relevant to Squid beyond the ACLs you
configure.


&gt;<i> 
</I>&gt;<i> Reason behind this is that I'd like to configure a forward proxy
</I>&gt;<i> for (mostly) binary files caching. All requests have Authorization
</I>&gt;<i> headers (API key) and come from single IP address (localhost,
</I>&gt;<i> python application, not generic web browser).
</I>

*Caching* is not related to the client though. Whether an object can
be cached depends solely on the request/reply message headers.

see below...

&gt;<i> 
</I>&gt;<i> client &lt;https&gt; squid ssl_bump to see inside https &lt;https&gt; remote
</I>&gt;<i> cloud storage
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://wiki.squid-cache.org/SquidFaq/InnerWorkings#What_are_private_and_public_keys.3F">http://wiki.squid-cache.org/SquidFaq/InnerWorkings#What_are_private_and_public_keys.3F</A>
</I>&gt;<i>
</I>&gt;<i>  &quot;Private objects are associated with only a single client whereas
</I>&gt;<i> a public object may be sent to multiple clients at the same time.&quot;
</I>&gt;<i> 
</I>&gt;<i> I wonder if it would be possible to use Squid for effectively
</I>&gt;<i> cache larger objects locally with this type of configuration?
</I>&gt;<i> 
</I>
Some points:

0) the document above is referring to the internal hash keys Squid
uses for indexing objects. Its describing the technical mechanism by
which Squid remembders which object is which type. Not much relevance
to your query as such.

1) Squid-3.2 and later are HTTP/1.1 compliant and able to cache
authenticated replies (and many other types of client-specific
objects) in accordance with the HTTP/1.1 rules for them.

2) client proxy-authorization credentials have no effect on
cacheability. Only credentials in www-authorization header affect
that, and only if the reply message does not make the object cacheable
by providing certain cache-control settings.

4) &quot;HTTP&quot; and &quot;HTTPS&quot; are both the same HTTP protocol. The only
difference is that one is inside a TLS channel. A lot of people seem
to think its more secure somehow, but its not really. SSL-Bumped HTTPS
requests are just as cacheable (or not) as they would be if
intercepted on port 80.

5) Size of objects is related only to the size limits you configure
into Squid. Default config is up to 4MB is cached to disks, up to
512KB to memory.

Amos

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.22 (MingW32)

iQEcBAEBAgAGBQJUlEgwAAoJELJo5wb/XPRjCawH/1joPQ6E4bBAJglfiyT39JNO
GFZZ21Oo2ew74gyz0K99fXlOXIpz1l9IupHgayHm+R7ezfMLWen3CGfWOK6QukC/
7NpjdkqCDUxwhhJ70XeWdgrw1rMRXwBlMZUGkwrQ4mGTuBA7DsFjneEg6H9PmY7r
zJLTb8NVbQAwzVRKmq9etJHpBbMN1QmZUYHLHV7uFIUirwpD58gfgvWBdPGFKTDF
I5+RwmzDP0Lmri7dPGWJwYTUPVCdyJ848Fjhvj/gVLuaBwEjZI+CxuSANrRa8Rr5
tAQKDMY7Zp5MTO/sYOTEg8I4yavP2UCtXBh3SpT+AzBium5PlQdVIlc45yVlo5k=
=Ik7x
-----END PGP SIGNATURE-----

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001172.html">[squid-users] Determining unique clients in Squid
</A></li>
	<LI>Next message (by thread): <A HREF="001179.html">[squid-users] Determining unique clients in Squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1177">[ date ]</a>
              <a href="thread.html#1177">[ thread ]</a>
              <a href="subject.html#1177">[ subject ]</a>
              <a href="author.html#1177">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
