<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] https bug slow browsing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20https%20bug%20slow%20browsing&In-Reply-To=%3C549E196D.1070104%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001237.html">
   <LINK REL="Next"  HREF="001249.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] https bug slow browsing</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20https%20bug%20slow%20browsing&In-Reply-To=%3C549E196D.1070104%40treenet.co.nz%3E"
       TITLE="[squid-users] https bug slow browsing">squid3 at treenet.co.nz
       </A><BR>
    <I>Sat Dec 27 02:29:01 UTC 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001237.html">[squid-users] https bug slow browsing
</A></li>
        <LI>Next message (by thread): <A HREF="001249.html">[squid-users] https bug slow browsing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1242">[ date ]</a>
              <a href="thread.html#1242">[ thread ]</a>
              <a href="subject.html#1242">[ subject ]</a>
              <a href="author.html#1242">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 27/12/2014 12:38 a.m., HackXBack wrote:
&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 5 hdd = 3 terra western digital red edition
</I>
These 5 HDD is what we refer to as &quot;spindles&quot; when planning and
calculating cache arrangement.

* You have 5 disk &quot;spindles&quot;.
* UFS/AUFS/diskd can only handle one cache_dir per spindle.
 - doing more will make their I/O operations collide and drastically
reduce disk speeds.

Therefor you can have 5x AUFS cache_dir on this machine.

BUT that does not exactly mean only 5 cache_dir. You can have a COSS
or Rock cache_dir alongside the UFS based on on the same spindle.
Making a total of 10 cache_dir for these disks.


&gt;<i> 1 hdd = 250 ssd ( system )
</I>
SSD can technically handle more than one of each type of cache_dir.
But Rock/COSS align much better with the drives internal design. So
IMO, you can have up to 5 AUFS cache_dir, and up to 6 Rock cache_dir
on this machine...


&gt;<i> cpu = core i7 extreme ram = 32 GB
</I>&gt;<i> 
</I>
In your squid.conf you have 30 cache_dir of size 400000 MB.

At an average memory requirement of 15MB per GB of cache that means
your machine requires approx. 171 GB of RAM for fast performance when
its caches are full.

That is also just for the HTTP object cache index, no room for any
active transactions or traffic, or other caches Squid needs to operate.


With 32GB your machine is probably able to comfortably use around 2000
GB of disk cache. In otherwords only 5 of those 400GB cache_dir
directories you have given it. (Co-incidence that matches the HDD count.)


In your place I would assign a 50GB Rock cache_dir to each of the 5
HDD (for objects up to 31KB), and a 400 GB or so UFS/AUFS cache_dir on
each as well (for objects over 31KB).

Using the SSD for system swap space, so in case things get overloaded
in memory the swap is at least fast you could probably expand the
UFS/AUFS cache_dir sizes. But that requires experimentation to find
the right balance, and using the swap for reagular traffic is not a
good idea, just emergency peak loads.

Amos

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.22 (MingW32)

iQEcBAEBAgAGBQJUnhltAAoJELJo5wb/XPRjtLAH/AkBDPwLuTJmimvbujuX70FW
8KlqKanXXRIYiawoORNGqIQ7g2vxcW4l5vmpdO2gAQ/RZeedEoyojbhtx87JKXL2
zqnV+irtLkIxOrt6uBHqT4W3UB/8G7DAsA1A/HL5c4Ce7LTXxV2uNG31/EvEMRKG
GLlmyFMkEC8vVF2PwkWT0RUpi7sIA1ywHrlWxA3JlyNLVXs1UlXP5xs2b8mJeM0Z
bymuQYi5qdlqVOqrRDF+gappGJsXoSFbZcKud7G9bNFTvi+VVsTe9lYc5jxBmaIp
8dtMCMK5n6WFYqK+cLw4Dz7ux+5Eqgiu7qRNnm5507v6lk63aUjzeHODAMY7EtY=
=Bh1L
-----END PGP SIGNATURE-----

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001237.html">[squid-users] https bug slow browsing
</A></li>
	<LI>Next message (by thread): <A HREF="001249.html">[squid-users] https bug slow browsing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1242">[ date ]</a>
              <a href="thread.html#1242">[ thread ]</a>
              <a href="subject.html#1242">[ subject ]</a>
              <a href="author.html#1242">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
