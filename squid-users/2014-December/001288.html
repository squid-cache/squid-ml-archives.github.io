<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid Deployment Questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Deployment%20Questions&In-Reply-To=%3CCAAbi1EuPc9qPTavqw_tJJUh%3DT-cJwdTHcMrNtu0oMDeoqtKC7Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001293.html">
   <LINK REL="Next"  HREF="001289.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid Deployment Questions</H1>
    <B>Evan Blackstone</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Deployment%20Questions&In-Reply-To=%3CCAAbi1EuPc9qPTavqw_tJJUh%3DT-cJwdTHcMrNtu0oMDeoqtKC7Q%40mail.gmail.com%3E"
       TITLE="[squid-users] Squid Deployment Questions">smashingzero33 at gmail.com
       </A><BR>
    <I>Wed Dec 31 05:59:57 UTC 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001293.html">[squid-users] Squid 3 SSL bump: Google drive application could not connect
</A></li>
        <LI>Next message (by thread): <A HREF="001289.html">[squid-users] Squid Deployment Questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1288">[ date ]</a>
              <a href="thread.html#1288">[ thread ]</a>
              <a href="subject.html#1288">[ subject ]</a>
              <a href="author.html#1288">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey all,
Wondering if I could get some advice on potentially setting up a Squid
forward proxy on my network. I'm not a Linux novice by any means, but I'm
not experienced in server administration, log review, etc.

We're needing to deploy a simple non-caching, non-peering forward proxy to
integrate with an ICAP server for web filtering. My plan is pretty
basic...here's my network config:

Internet --&gt; Cisco ASA --&gt; DMZ --&gt; Internal LAN

I've received conflicting advice on whether or not there's any advantage to
putting a forward proxy on the DMZ vs. internal LAN. In any case, 'm
wanting to deploy an explicit proxy with a single NIC. Workstations will
use a PAC file, etc. to point to the proxy.

If the server is on the DMZ, I'd allow 80/443 from the internal LAN to the
DMZ, then allow 80/443 from the proxy to outside. I'd also be allowing the
proxy to internal LAN for ICAP, syslog, and possibly NTP. The proxy would
have a single interface...although it would NAT to outside for internet
access, there would be no ports open on the outside interface.

Based on some testing I've done, my squid.conf would be pretty basic...

http_access allow internalnetwork
cache deny internalnetwork
always_direct allow internalnetwork
http_access deny all
etc.

My questions are:

Does it sound like I'm on the right track here? Would the above described
configuration be safe? I've read that Squid should listen only on an
internal interface? What about when the server only has one?

What level of risk would I be assuming (regular patching included)? Given
that I'm relatively new to monitoring Linux servers for security, etc., is
this a bad idea? I'm not really sure what to be looking for log-wise in
terms of compromise. I have edge devices and monitoring on the perimeter,
but I don't really know what to look for on the server itself...

Am I approaching this the wrong way? Should I be looking at putting it on
the inside LAN? Would such an approach leave my network vulnerable should
the Squid box get owned?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20141230/677e42e0/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20141230/677e42e0/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001293.html">[squid-users] Squid 3 SSL bump: Google drive application could not connect
</A></li>
	<LI>Next message (by thread): <A HREF="001289.html">[squid-users] Squid Deployment Questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1288">[ date ]</a>
              <a href="thread.html#1288">[ thread ]</a>
              <a href="subject.html#1288">[ subject ]</a>
              <a href="author.html#1288">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
