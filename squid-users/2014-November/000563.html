<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] SSL bump fails accessing .gov.uk servers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SSL%20bump%20fails%20accessing%20.gov.uk%20servers&In-Reply-To=%3C5454256C.4050909%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="000564.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] SSL bump fails accessing .gov.uk servers</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SSL%20bump%20fails%20accessing%20.gov.uk%20servers&In-Reply-To=%3C5454256C.4050909%40treenet.co.nz%3E"
       TITLE="[squid-users] SSL bump fails accessing .gov.uk servers">squid3 at treenet.co.nz
       </A><BR>
    <I>Sat Nov  1 00:12:28 UTC 2014</I>
    <P><UL>
        
        <LI>Next message (by thread): <A HREF="000564.html">[squid-users] SSL bump fails accessing .gov.uk servers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#563">[ date ]</a>
              <a href="thread.html#563">[ thread ]</a>
              <a href="subject.html#563">[ subject ]</a>
              <a href="author.html#563">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 1/11/2014 12:09 p.m., Marcus Kool wrote:
&gt;<i> With OpenSSL 1.0.1e-fips :
</I>&gt;<i> 
</I>&gt;<i> openssl s_client -connect www.taxdisc.service.gov.uk:443
</I>&gt;<i> fails (tries TLS1.2) openssl s_client -connect
</I>&gt;<i> www.taxdisc.service.gov.uk:443 -ssl3   works
</I>&gt;<i> 
</I>&gt;<i> The webmail server of my ISP works like this: it uses only TLS1.0,
</I>&gt;<i> so no TLS1.1 or TLS1.2, but when with openssl s_client -connect
</I>&gt;<i> WEBMAIL:443 -tls1_2 the connection is automagically downgraded to
</I>&gt;<i> TLS1.0.  taxdisc does not do this. Taxdisc does not negotiate, so
</I>&gt;<i> the client must guess the desired protocol (SSL3 or TLS1.0) and use
</I>&gt;<i> that.
</I>&gt;<i> 
</I>&gt;<i> I do not know all details about TLS and downgrading rules but the
</I>&gt;<i> server seems broken to me.
</I>

It is clearly not supporting TLS at all. TLS mandates that endpoints
offer the highest TLS version they support, and the mutual highest is
used. SSLv3 is not on that scale of TLS 1.0+ versions.

Client implementations usually treat rejection of all TLS versions
down to 1.0 as a signal that SSL handshake is required instead, abort
and retry with SSLv3-only...

&gt;<i> Firefox knows how to deal with it and Squid not yet.
</I>
... for now anyway. Firefox will be dropping SSLv3 support Nov 25th.

Amos

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.22 (MingW32)

iQEcBAEBAgAGBQJUVCVsAAoJELJo5wb/XPRj1rIIAIacxp8gQYhtIA49/+k9c2D9
cO+vnAhADOsIqg2qwtZKRXCYcpAba/s8IeiiouvcowTV54+6GCZ3yyP7uIztwEY3
x+Li2/VKdRYOSLf6QgFo4JU8y5garf9cMrqZw7eFS+Qo9GaYu+BZOcrtlzbAAehN
DqABCRdHkJ+ZtVIC7obVX1fXTnuPlIC3W/QHzc6uGHp75Qs/QAAaV8ugYBMfPpX9
5G6gYSG5qMwQ1XMJ5nc14vFQxTxjrpydl4BKn0WhNLrGaDCWGZiOQYKi7ERlorNs
7yHzjROpWIxapmUChccHifrFEQIR0vo3vAq5StPad3a3aMMp5SW/scpbGFgW8jw=
=mtZp
-----END PGP SIGNATURE-----

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message (by thread): <A HREF="000564.html">[squid-users] SSL bump fails accessing .gov.uk servers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#563">[ date ]</a>
              <a href="thread.html#563">[ thread ]</a>
              <a href="subject.html#563">[ subject ]</a>
              <a href="author.html#563">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
