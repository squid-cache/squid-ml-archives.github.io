<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Behind enemy lines (squid behind proxy)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Behind%20enemy%20lines%20%28squid%20behind%20proxy%29&In-Reply-To=%3Ctrinity-de15a38f-07f4-4fee-94b1-4a2ecf861000-1415313027728%403capp-mailcom-lxa05%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000634.html">
   <LINK REL="Next"  HREF="000774.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Behind enemy lines (squid behind proxy)</H1>
    <B>doc.holliday at usa.com</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Behind%20enemy%20lines%20%28squid%20behind%20proxy%29&In-Reply-To=%3Ctrinity-de15a38f-07f4-4fee-94b1-4a2ecf861000-1415313027728%403capp-mailcom-lxa05%3E"
       TITLE="[squid-users] Behind enemy lines (squid behind proxy)">doc.holliday at usa.com
       </A><BR>
    <I>Thu Nov  6 22:30:28 UTC 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="000634.html">[squid-users] Behind enemy lines (squid behind proxy)
</A></li>
        <LI>Next message (by thread): <A HREF="000774.html">[squid-users] Behind enemy lines (squid behind proxy)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#644">[ date ]</a>
              <a href="thread.html#644">[ thread ]</a>
              <a href="subject.html#644">[ subject ]</a>
              <a href="author.html#644">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> Sent:&#160;Wednesday, November 05, 2014 at 10:48 PM
</I>&gt;<i> From:&#160;&quot;Amos Jeffries&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;
</I>
&gt;<i> On 6/11/2014 2:33 p.m., <A HREF="https://lists.squid-cache.org/listinfo/squid-users">doc.holliday at usa.com</A> wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've searched through the internets and tried various things... to
</I>&gt;&gt;<i> no avail. Hopefully someone here can point me in the right
</I>&gt;&gt;<i> direction. I am sitting behind a proxy, which accepts http/https.
</I>&gt;&gt;<i> Everything else is blocked. If I instruct my browser to use this
</I>&gt;&gt;<i> proxy, everything works dandy. Both http and https. The problem is,
</I>&gt;&gt;<i> I have a few apps that don't have an option to set proxy. So, my
</I>&gt;&gt;<i> idea was to set up squid on the local machine that would
</I>&gt;&gt;<i> transparently redirect http/https to the proxy. Eg something like
</I>&gt;&gt;<i> this: [ local_box: app (http or https) ---&gt; squid ] -----&gt; [
</I>&gt;&gt;<i> the_proxy ] -----&gt; ... -----&gt; [ internets ] I have no control
</I>&gt;&gt;<i> of the proxy, nor do I know what goes on after it.
</I>&gt;<i>
</I>&gt;<i> What you have configured forces that not to happen then sends the
</I>&gt;<i> de-crypted traffic to the peer proxy as HTTP. The peer is rejecting
</I>&gt;<i> the un-encrypted protocol containing <A HREF="https://">https://</A> URLs with a 503 for
</I>&gt;<i> whatever reason.
</I>&gt;<i>
</I>&gt;<i> If the other peer is another Squid then chances are still fairly high
</I>&gt;<i> that it has been built without OpenSSL support and so literally cannot
</I>&gt;<i> open the TLS connection to deliver the <A HREF="https://">https://</A> request to the origin.
</I>&gt;<i>
</I>&gt;<i> Generating new CONNECT tunnels over peer proxies has not yet been
</I>&gt;<i> coded for Squid. Nobody seems willing sponsor its development, despite
</I>&gt;<i> all these problems bumping is now causing.
</I>&gt;<i>
</I>&gt;<i> Amos
</I>
Thanks Amos. It makes sense... mostly. :)

One thing I am wondering though is, if I set my browser to use the proxy
(in the browser settings) for both http and https, both work fine. So, it
seems the proxy server supports both http and https over CONNECT tunnels.

So, if the squid on the local_box is not talking to the_proxy (it's cache_peer)
via CONNECT, what does it use?

-D
&#160;

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="000634.html">[squid-users] Behind enemy lines (squid behind proxy)
</A></li>
	<LI>Next message (by thread): <A HREF="000774.html">[squid-users] Behind enemy lines (squid behind proxy)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#644">[ date ]</a>
              <a href="thread.html#644">[ thread ]</a>
              <a href="subject.html#644">[ subject ]</a>
              <a href="author.html#644">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
