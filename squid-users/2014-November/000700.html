<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] eCap + lua integration
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20eCap%20%2B%20lua%20integration&In-Reply-To=%3CED4469082EFD4F479C4E4B4D469697ADD15C7EC0%40ILRAADAGBE4.corp.amdocs.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000693.html">
   <LINK REL="Next"  HREF="000705.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] eCap + lua integration</H1>
    <B>Martin Sperl</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20eCap%20%2B%20lua%20integration&In-Reply-To=%3CED4469082EFD4F479C4E4B4D469697ADD15C7EC0%40ILRAADAGBE4.corp.amdocs.com%3E"
       TITLE="[squid-users] eCap + lua integration">Martin.Sperl at amdocs.com
       </A><BR>
    <I>Mon Nov 10 14:14:37 UTC 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="000693.html">[squid-users] eCap + lua integration
</A></li>
        <LI>Next message (by thread): <A HREF="000705.html">[squid-users] NTLM Auth fails while using DNS instead of IP address
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#700">[ date ]</a>
              <a href="thread.html#700">[ thread ]</a>
              <a href="subject.html#700">[ subject ]</a>
              <a href="author.html#700">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Well, the problem with the helper-modules is that you have context switches (icap, external_acl and reqwrite) and scheduler delays.
This is (as far as I understood) the great advantage of eCap: it does not run in an external context with the corresponding context switches.
That was why I was asking if a lua binding was available for eCap...

The drawback is probably that lua is quite a bit slower than native C (unless luajit is used) and thus probably makes the event loop slower reducing the throughput.
This would probably need to get tested and compared against an icap implementation which comes with the 

Thanks,
	Martin

&gt;<i> -----Original Message-----
</I>&gt;<i> From: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On
</I>&gt;<i> Behalf Of Eliezer Croitoru
</I>&gt;<i> Sent: Montag, 10. November 2014 13:19
</I>&gt;<i> To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> Subject: Re: [squid-users] eCap + lua integration
</I>&gt;<i> 
</I>&gt;<i> -----BEGIN PGP SIGNED MESSAGE-----
</I>&gt;<i> Hash: SHA1
</I>&gt;<i> 
</I>&gt;<i> Hey Martin,
</I>&gt;<i> 
</I>&gt;<i> As far as I can tell there is non of these ECAP modules available.
</I>&gt;<i> Also using ECAP for this might be very weird since the helpers modules
</I>&gt;<i> do exists.
</I>&gt;<i> If you want to use lua specifically it's doable to write a helper for
</I>&gt;<i> the current squid interfaces(ICAP,external_acl,url_rewrite).
</I>&gt;<i> I have written myself an external_acl helper that help to filter
</I>&gt;<i> specific sites and have used deny_info as the user interface for a
</I>&gt;<i> &quot;block&quot; state.
</I>&gt;<i> There is however the overhead of using the external apache server that
</I>&gt;<i> has to &quot;know&quot; things about the sites which are blocked.
</I>&gt;<i> 
</I>&gt;<i> All The Bests,
</I>&gt;<i> Eliezer
</I>&gt;<i> 
</I>&gt;<i> On 11/10/2014 01:57 PM, Martin Sperl wrote:
</I>&gt;<i> &gt; Hi!
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Is there any eCap lua integration module available that one could
</I>&gt;<i> &gt; use for filtering - similar to apache mod_lua?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; It then could get easily used as a URL-rewrite engine or to handle
</I>&gt;<i> &gt; session-affinity and similar without any context switches that is
</I>&gt;<i> &gt; needed with url_rewrite_program...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thanks, Martin
</I>&gt;<i> 
</I>&gt;<i> -----BEGIN PGP SIGNATURE-----
</I>&gt;<i> Version: GnuPG v1
</I>&gt;<i> 
</I>&gt;<i> iQEcBAEBAgAGBQJUYK0zAAoJENxnfXtQ8ZQUVoYH/0HiGcPgAz/JtU9Eyh5obND
</I>&gt;<i> r
</I>&gt;<i> b93gUx38dusvrfcNQ4QN30oFnmHkZx5vNPipcSn6Q5Rs48XMqu8SrHKwlYOLFI
</I>&gt;<i> B/
</I>&gt;<i> UM/FB/LqZ1h7MXsXJtFU/BgY+4T9BEBmRPOX6UzLhbr0gg3JQGCy1w0fkoP5gm
</I>&gt;<i> lK
</I>&gt;<i> 8weJE6YoJWD4uZRU0Egh0521rELZry8SaIJG9wVI5K4C8SCStfiUwBYyIHu/vmmv
</I>&gt;<i> oLTml17lRnWNteOCCW4DI85ogZ1qYlB2eimDGUcsfK5hybSBg3Dg2PXGutQS7u
</I>&gt;<i> Jm
</I>&gt;<i> cQoC5kk9WK8tUi590+Fssoc+6NsBHTfYX5NJRc/nYfqiMKTIWfrfBpsA7hp5lHU=
</I>&gt;<i> =nCTs
</I>&gt;<i> -----END PGP SIGNATURE-----
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
This message and the information contained herein is proprietary and confidential and subject to the Amdocs policy statement,
you may review at <A HREF="http://www.amdocs.com/email_disclaimer.asp">http://www.amdocs.com/email_disclaimer.asp</A>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="000693.html">[squid-users] eCap + lua integration
</A></li>
	<LI>Next message (by thread): <A HREF="000705.html">[squid-users] NTLM Auth fails while using DNS instead of IP address
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#700">[ date ]</a>
              <a href="thread.html#700">[ thread ]</a>
              <a href="subject.html#700">[ subject ]</a>
              <a href="author.html#700">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
