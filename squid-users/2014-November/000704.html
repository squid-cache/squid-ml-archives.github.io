<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] High CPU-Usage with squid 3.4.9 (and/or 3.4.4)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20High%20CPU-Usage%20with%20squid%203.4.9%20%28and/or%203.4.4%29&In-Reply-To=%3C1FCF9DA5B29068478ECF15896F19F0840138A54E5E%40Y011008.bk.fin.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000698.html">
   <LINK REL="Next"  HREF="000707.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] High CPU-Usage with squid 3.4.9 (and/or 3.4.4)</H1>
    <B>Rietzler, Markus (RZF, SG 324 / &lt;RIETZLER_SOFTWARE&gt;)</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20High%20CPU-Usage%20with%20squid%203.4.9%20%28and/or%203.4.4%29&In-Reply-To=%3C1FCF9DA5B29068478ECF15896F19F0840138A54E5E%40Y011008.bk.fin.local%3E"
       TITLE="[squid-users] High CPU-Usage with squid 3.4.9 (and/or 3.4.4)">markus.rietzler at fv.nrw.de
       </A><BR>
    <I>Mon Nov 10 15:12:10 UTC 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="000698.html">[squid-users] High CPU-Usage with squid 3.4.9 (and/or 3.4.4)
</A></li>
        <LI>Next message (by thread): <A HREF="000707.html">[squid-users] High CPU-Usage with squid 3.4.9 (and/or 3.4.4)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#704">[ date ]</a>
              <a href="thread.html#704">[ thread ]</a>
              <a href="subject.html#704">[ subject ]</a>
              <a href="author.html#704">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> -----Urspr&#252;ngliche Nachricht-----
</I>&gt;<i> Von: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] Im
</I>&gt;<i> Auftrag von Amos Jeffries
</I>&gt;<i> Gesendet: Montag, 10. November 2014 14:36
</I>&gt;<i> An: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> Betreff: Re: [squid-users] High CPU-Usage with squid 3.4.9 (and/or
</I>&gt;<i> 3.4.4)
</I>&gt;<i> 
</I>&gt;<i> On 7/11/2014 2:50 a.m., Tom Tom wrote:
</I>&gt;<i> &gt; Hi
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; After migration from squid 3.3.13 to 3.4.4, I recognized a
</I>&gt;<i> &gt; performance-issue. Squid is configured with 4 workers. They often
</I>&gt;<i> &gt; have a CPU-Utilization between 50%-90% (each worker). With squid
</I>&gt;<i> &gt; 3.3.13 (same configuration), the CPU-Utilization was never a
</I>&gt;<i> &gt; problem. I installed squid 3.4.9 and had the same issue. No
</I>&gt;<i> &gt; warnings/errors in the cache.log
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I saw, that someone other reported a similar issue:
</I>&gt;<i> &gt; <A HREF="http://www.squid-cache.org/mail-archive/squid-users/201407/0500.html">http://www.squid-cache.org/mail-archive/squid-users/201407/0500.html</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;  Concerning the post above: Yes, we have external_auth-helpers
</I>&gt;<i> &gt; (ext_kerberos_ldap_group_acl) and no, we do not use delay_pools.
</I>&gt;<i> &gt; The high cpu-usage comes not from the auth-helper - it comes from
</I>&gt;<i> &gt; the 4 squid-worker-processes. Any hints? Is this a known problem?
</I>&gt;<i> &gt; Probably solved in 3.5?
</I>&gt;<i> 
</I>&gt;<i> Are you able to find out any specific details about what the workers
</I>&gt;<i> are doing that uses so much extra CPU?
</I>&gt;<i> 
</I>&gt;<i> Amos
</I>&gt;<i> 
</I>during our last tests (with 3.4.x) we also tried the worker option. it does not matter if workers are enabled or not. with more workers the cpu rise seems to be somewhat slower. so it is not connected to (smp)workers. it is the external auth helper - although the squid process and not the helper does consume all the cpu...

markus
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="000698.html">[squid-users] High CPU-Usage with squid 3.4.9 (and/or 3.4.4)
</A></li>
	<LI>Next message (by thread): <A HREF="000707.html">[squid-users] High CPU-Usage with squid 3.4.9 (and/or 3.4.4)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#704">[ date ]</a>
              <a href="thread.html#704">[ thread ]</a>
              <a href="subject.html#704">[ subject ]</a>
              <a href="author.html#704">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
