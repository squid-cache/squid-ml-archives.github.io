<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Centralized Squid - design and implementation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Centralized%20Squid%20-%20design%20and%20implementation&In-Reply-To=%3C201411172217.13254.Antony.Stone%40squid.open.source.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000843.html">
   <LINK REL="Next"  HREF="000845.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Centralized Squid - design and implementation</H1>
    <B>Antony Stone</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Centralized%20Squid%20-%20design%20and%20implementation&In-Reply-To=%3C201411172217.13254.Antony.Stone%40squid.open.source.it%3E"
       TITLE="[squid-users] Centralized Squid - design and implementation">Antony.Stone at squid.open.source.it
       </A><BR>
    <I>Mon Nov 17 21:17:12 UTC 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="000843.html">[squid-users] Centralized Squid - design and implementation
</A></li>
        <LI>Next message (by thread): <A HREF="000845.html">[squid-users] Centralized Squid - design and implementation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#844">[ date ]</a>
              <a href="thread.html#844">[ thread ]</a>
              <a href="subject.html#844">[ subject ]</a>
              <a href="author.html#844">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Monday 17 November 2014 at 22:01:29 (EU time), Alexander Samad wrote:

&gt;<i> Why haproxy instead of a pacemaker. I have 2 dmz boxes I setup in a
</I>&gt;<i> cluster. so I have 2 vips for the squid proxies. and dns setup to
</I>&gt;<i> round robin to the vip's.
</I>&gt;<i> 
</I>&gt;<i> I see sort of even distribution but I don't have a single point of
</I>&gt;<i> failure. if 1 node failes the vip moves over to the other node..
</I>
Pacemaker is a fairly &quot;dumb&quot; (no offence meant, see below) network-level 
failover system, and if you do master-master failover, it can end up doing 
load balancing for you.

However, it only knows about node availability, whereas HAproxy can monitor 
many more things about your nodes, and also very easily expand to more than 
two nodes, doing true load balancing based on node availability, node load, 
node response times, number of connections to each node... it's a lot more 
&quot;intelligient&quot; (maybe &quot;aware&quot; is a better term) than pacemaker.

The downside of HAproxy is that you need an HAproxy machine in addition to the 
(Squid, in this case) nodes, and for real High Availability you should have 
two HAproxy nodes running Pacemaker between them, to avoid the HAproxy itself 
being a Single Point of Failure.  It doesn't need to be a big machine, though.

However the benefits of being able to send new connections to the machine with 
the lowest load, the fastest response, the fewest current connections, or 
several other things, means it's a lot more flexible, not to mention expandable 
if you decide to grow your Squid farm to 3, 4 or however many more servers.

&gt;<i> On 17 November 2014 22:39, Carlos Defoe &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">carlosdefoe at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; Use a load balancer. HAproxy will do the trick, if you don't want to
</I>&gt;<i> &gt; spend some money on a professional load balancer like F5 big-ip.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Don't drop the use of wpad. You can send the balancer name (eg.
</I>&gt;<i> &gt; proxy.your.domain) as a default for every client, and send the names
</I>&gt;<i> &gt; of the proxy nodes as a failover.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; On Mon, Nov 17, 2014 at 6:08 AM, alberto &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">alberto.furia at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt;&gt; On Mon, Nov 17, 2014 at 3:04 AM, Marcus Kool
</I>&gt;<i> &gt;&gt; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">marcus.kool at urlfilterdb.com</A>&gt;
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; wrote:
</I>&gt;<i> &gt;&gt;&gt; Let me start to say that I am biased since I am the author of
</I>&gt;<i> &gt;&gt;&gt; ufdbGuard. If you have worked with squidGuard than you will find that
</I>&gt;<i> &gt;&gt;&gt; ufdbGuard is an excellent replacement since ufdbGuard was forked in
</I>&gt;<i> &gt;&gt;&gt; 2005 from squidGuard and has since gained many features.
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; Hi Marcus,
</I>&gt;<i> &gt;&gt; thank you for your reply.
</I>&gt;<i> &gt;&gt; I know you (i'm an old lurker of the squid list :-)) and the urlfilterdb
</I>&gt;<i> &gt;&gt; project.
</I>&gt;<i> &gt;&gt; I am very interested in the project and I will give it a chance without
</I>&gt;<i> &gt;&gt; any doubt, starting from the trial license.
</I>&gt;<i> &gt;&gt; FYI, there are about 1000 users in total.
</I>&gt;<i> &gt;&gt; Thank you to everyone, i'll come back soon!:-)
</I>
Regards,


Antony.

-- 
You can tell that the day just isn't going right when you find yourself using 
the telephone before the toilet.

                                                   Please reply to the list;
                                                         please *don't* CC me.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="000843.html">[squid-users] Centralized Squid - design and implementation
</A></li>
	<LI>Next message (by thread): <A HREF="000845.html">[squid-users] Centralized Squid - design and implementation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#844">[ date ]</a>
              <a href="thread.html#844">[ thread ]</a>
              <a href="subject.html#844">[ subject ]</a>
              <a href="author.html#844">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
