<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] probs with squid and url forwarding
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20probs%20with%20squid%20and%20url%20forwarding&In-Reply-To=%3C546DFE1D.4050202%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000885.html">
   <LINK REL="Next"  HREF="000886.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] probs with squid and url forwarding</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20probs%20with%20squid%20and%20url%20forwarding&In-Reply-To=%3C546DFE1D.4050202%40treenet.co.nz%3E"
       TITLE="[squid-users] probs with squid and url forwarding">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Nov 20 14:43:41 UTC 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="000885.html">[squid-users] probs with squid and url forwarding
</A></li>
        <LI>Next message (by thread): <A HREF="000886.html">[squid-users] squid basic ntlm auth error after upgrade to 3.3.8
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#891">[ date ]</a>
              <a href="thread.html#891">[ thread ]</a>
              <a href="subject.html#891">[ subject ]</a>
              <a href="author.html#891">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 21/11/2014 12:43 a.m., Andreas.Reschke wrote:
&gt;&gt;<i> Von: Amos Jeffries
</I>&gt;<i> On 20/11/2014 10:57 p.m., Andreas.Reschke wrote:
</I>&gt;&gt;&gt;&gt;<i> Hi there,
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> we're using 3 squid proxy (version 3.3.-13, no caching, no 
</I>&gt;&gt;&gt;&gt;<i> logging) at our LAN (4500 User) in front of a squid proxy at
</I>&gt;&gt;&gt;&gt;<i> the DMZ. Now there are a lot of troubles with portals for the
</I>&gt;&gt;&gt;&gt;<i> costumer (like www.covisint.com). After register at this
</I>&gt;&gt;&gt;&gt;<i> portal and select the application there is a forward to
</I>&gt;&gt;&gt;&gt;<i> another domain. At this point squid can't connect the other
</I>&gt;&gt;&gt;&gt;<i> domain with the error: this side isn't reachable.
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> How to fix this?
</I>&gt;<i> 
</I>&gt;<i> What is the HTTP message being sent from the client to Squid when
</I>&gt;<i> it &quot;breaks&quot;?
</I>&gt;<i> 
</I>&gt;<i> And what error details is Squid reporting about the problem in
</I>&gt;<i> cache.log? NP: cache.log is mandatory, only access.log/store.log
</I>&gt;<i> are optional.
</I>&gt;<i> 
</I>&gt;<i> Amos
</I>&gt;<i> 
</I>&gt;<i> Hi Amos, access.log is off because of we aren't allowed to log the
</I>&gt;<i> user. Cache.log contains only LDAP-User-Auth and -groups. The only
</I>&gt;<i> method is read the stream with netcat, but there aren't nice data
</I>&gt;<i> because of https.
</I>&gt;<i> 
</I>
If you are unable to get any meaningful information about what is
going wrong then you will be unable to solve the problem.

Perhapse you can (temporarily) log only the request made and what
Squid tried to do with it? no details about the users necessary.

  logformat debug %Ss/%03&gt;Hs %&lt;st %rm %ru %Sh/%&lt;a
  access_log stdio:/var/log/squid/debug_access.log debug


I suspect the HTTPS sites are sending logged-in users to some strange
port number or hostname which your squid.conf forbids access to. That
will show up in the above log as a CONNECT with TCP_DENIED/403 and
strange port number that will need to be added to the SSL_Ports ACL.

Amos
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.22 (MingW32)

iQEcBAEBAgAGBQJUbf4dAAoJELJo5wb/XPRjMHIH/2/JQCpwGMyPHhbFfmmmYSp9
3BO8kGh9ZOexfgiouVeYcNYviuVhg1+roz7uI9Uo3S2PXJFNv5WT+alpTqHPPIQx
obaLK5GsxeXcEgjvtXK9sJhbTrepuO4XXK1THxtKMacT06QtubZyaK5gjLGiLTML
25+IaNrkttpha2jFuMfZRlnKXC/ENRQc+Yp/FzKI1BO98VFuir/mTMn9/8CSD95L
FsnVFwUe/pGUmdlvLpcbUZevgcX13ma3BfytMdjYGF4kDqg4444hygQFzT569P6Q
PA5nMJwY/vZIa0xKnleXkXCBQU05CclNdC9+hAmrxCd9dA1Y9KFKbhX3lVfnvjg=
=Uuek
-----END PGP SIGNATURE-----

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="000885.html">[squid-users] probs with squid and url forwarding
</A></li>
	<LI>Next message (by thread): <A HREF="000886.html">[squid-users] squid basic ntlm auth error after upgrade to 3.3.8
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#891">[ date ]</a>
              <a href="thread.html#891">[ thread ]</a>
              <a href="subject.html#891">[ subject ]</a>
              <a href="author.html#891">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
