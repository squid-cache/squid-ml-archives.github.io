<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Authentication\Authorization using a PAC file?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Authentication%5CAuthorization%20using%20a%20PAC%20file%3F&In-Reply-To=%3C54739485.3070601%40mathemainzel.info%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000926.html">
   <LINK REL="Next"  HREF="000907.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Authentication\Authorization using a PAC file?</H1>
    <B>Walter H.</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Authentication%5CAuthorization%20using%20a%20PAC%20file%3F&In-Reply-To=%3C54739485.3070601%40mathemainzel.info%3E"
       TITLE="[squid-users] Authentication\Authorization using a PAC file?">Walter.H at mathemainzel.info
       </A><BR>
    <I>Mon Nov 24 20:26:45 UTC 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="000926.html">[squid-users] Authentication\Authorization using a PAC file?
</A></li>
        <LI>Next message (by thread): <A HREF="000907.html">[squid-users] citrix client auth with squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#917">[ date ]</a>
              <a href="thread.html#917">[ thread ]</a>
              <a href="subject.html#917">[ subject ]</a>
              <a href="author.html#917">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

a sample of a .pac-File

function FindProxyForURL( url, host )
{
   var strURL = ( decodeURI( url ) ).toLowerCase( );

   var strHost = host.toLowerCase( );

   // Redirect to proxy with these URLs
   if ( ( strURL == &quot;<A HREF="http://flickr.com/images/spaceball.gif">http://flickr.com/images/spaceball.gif</A>&quot; ) ||
        ( strURL == &quot;...&quot; ) )
     return &quot;PROXY host:port;&quot;;

   // Don't use a proxy with these domains/hosts
   if ( dnsDomainIs( strHost, &quot;www.domain.tld&quot; ) ||
        dnsDomainIs( strHost, &quot;...&quot; ) )
     return &quot;DIRECT&quot;;

   // Bad words or combinations, use localhost as proxy
   if ( ( strURL.search(/advert/) == -1 ) &amp;&amp;
        ( strURL.search(/banner/) == -1 ) &amp;&amp;
        ( strURL.search(/realmedia/) == -1 ) &amp;&amp;
        ( strURL.search(/[^a-z0-9]ads/) == -1 ) &amp;&amp;
        ( strURL.search(/[a-z][c,k]lick/) == -1 ) );
   else
     return &quot;PROXY ntwaldivm-001.waldinet.home:8080;&quot;;

   // Use a proxy on higher domain levels,
   // except for educational or academical domains
   if ( dnsDomainLevels( strHost ) &gt; 3 )
     if ( ( strHost.search(/.ac.[a-z][a-z]/) == ( strHost.length - 6 ) ) ||
          ( strHost.search(/.edu.[a-z][a-z]/) == ( strHost.length - 7 ) ) ||
          ( strHost.search(/.mail.yahoo.com/) == ( strHost.length - 15 ) 
) ||
          ( strHost.search(/.edu/) == ( strHost.length - 4 ) ) )
       return &quot;PROXY host:port;&quot;;
     else
       return &quot;DIRECT&quot;;

   // DIRECT connections to non-FQDN hosts
   if ( isPlainHostName( strHost ) )
     return &quot;DIRECT&quot;;

   // Bad words or combinations in host, use proxy
   if ( ( strHost.search(/stat[0-9s]/) == -1 ) &amp;&amp;
        ( strHost.search(/media/) == -1 ) &amp;&amp;
        ( strHost.search(/spy/) == -1 ) &amp;&amp;
        ( strHost.search(/track/) == -1 ) &amp;&amp;
        ( strHost.search(/trade/) == -1 ) &amp;&amp;
        ( strHost.search(/klamm/) == -1 ) &amp;&amp;
        ( strHost.search(/trade/) == -1 ) &amp;&amp;
        ( strHost.search(/meter/) == -1 ) &amp;&amp;
        ( strHost.search(/poker/) == -1 ) &amp;&amp;
        ( strHost.search(/sex/) == -1 ) &amp;&amp;
        ( strHost.search(/xxx/) == -1 ) &amp;&amp;
        ( strHost.search(/cash/) == -1 ) &amp;&amp;
        ( strHost.search(/pay/) == -1 ) &amp;&amp;
        ( strHost.search(/popup/) == -1 ) &amp;&amp;
        ( strHost.search(/^ad./) == -1 ) &amp;&amp;
        ( strHost.search(/^www.ad./) == -1 ) &amp;&amp;
        ( strHost.search(/^www.free/) == -1 ) &amp;&amp;
        ( strHost.search(/^www.web/) == -1 ) );
   else
     return &quot;PROXY host:port;&quot;;

   //  If nothing above matches, then go directly there,
   //  in case of a DNS failure use proxy
   if ( isResolvable( strHost ) )
     return &quot;DIRECT&quot;;
   else
     return &quot;PROXY host:port;&quot;;
}

any authorization to a proxy in this .pac-File is the same as if the 
proxy were
configured directly in the browser;
with such a setup you can use different proxies for e.g. specific sites
  even with SSL without SSL-bump ...

Walter


On 24.11.2014 11:25, Eliezer Croitoru wrote:
&gt;<i> I do know that pac files contains some form of JS and in the past I
</I>&gt;<i> have seen couple complex PAC files but unsure about the options.
</I>&gt;<i> I want to know if a PAC file can be used for
</I>&gt;<i> Authentication\Authorization, maybe even working against another
</I>&gt;<i> external system to get a token?
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> Eliezer
</I>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 5971 bytes
Desc: S/MIME Cryptographic Signature
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20141124/38c4c3a0/attachment.bin">http://lists.squid-cache.org/pipermail/squid-users/attachments/20141124/38c4c3a0/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="000926.html">[squid-users] Authentication\Authorization using a PAC file?
</A></li>
	<LI>Next message (by thread): <A HREF="000907.html">[squid-users] citrix client auth with squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#917">[ date ]</a>
              <a href="thread.html#917">[ thread ]</a>
              <a href="subject.html#917">[ subject ]</a>
              <a href="author.html#917">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
