<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Existing root certificate not working with SSL Bump	(squid 3.3.10)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Existing%20root%20certificate%20not%20working%20with%20SSL%20Bump%0A%09%28squid%203.3.10%29&In-Reply-To=%3C1416933493483-4668515.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000925.html">
   <LINK REL="Next"  HREF="000928.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Existing root certificate not working with SSL Bump	(squid 3.3.10)</H1>
    <B>HaxNobody</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Existing%20root%20certificate%20not%20working%20with%20SSL%20Bump%0A%09%28squid%203.3.10%29&In-Reply-To=%3C1416933493483-4668515.post%40n4.nabble.com%3E"
       TITLE="[squid-users] Existing root certificate not working with SSL Bump	(squid 3.3.10)">nobody at hushmail.com
       </A><BR>
    <I>Tue Nov 25 16:38:13 UTC 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="000925.html">[squid-users] Persistent Connections - only one side
</A></li>
        <LI>Next message (by thread): <A HREF="000928.html">[squid-users] Existing root certificate not working with SSL Bump (squid 3.3.10)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#923">[ date ]</a>
              <a href="thread.html#923">[ thread ]</a>
              <a href="subject.html#923">[ subject ]</a>
              <a href="author.html#923">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

We are trying to configure Squid with SSL bump in order to filter traffic
with a content filter. We have an existing self-signed root certificate and
private key that we use successfully with other similar proxy software, and
we wish to re-use it with Squid so that we don't have to distribute a new
root certificate to our clients.

However, when we try to use our existing root with Squid, we get SSL errors
from the browser and we are quite stumped as to why they are happening. We
have provided the certificate and private key to Squid and it is
successfully decrypting and re-encrypting the traffic after sending it
through our filter. The message we get from Firefox is as follows:

&quot;www.google.com uses an invalid security certificate. The certificate is not
trusted because no issuer chain was provided. (Error code:
sec_error_unknown_issuer)&quot;

Chrome says:

&quot;NET::ERR_CERT_AUTHORITY_INVALID&quot;

Please note that this happens with any SSL site, not just Google. If we go
and view the certificate that the browser sees, it appears to be valid and
it shows the issuer as our custom root certificate, as expected. As I
mentioned previously, this root is already installed into Firefox (and into
the windows trusted root store as well). Internet Explorer and Google Chrome
give similar errors.

I have used openssl to verify that the modulus on the key and the
certificate match (they do). Oddly, we can generate a new certificate and it
will work correctly as expected, although that would require us to
distribute a new root. Does anyone have any idea why our existing root will
not work, but a new one will? Does Squid require certain extensions or other
things that our existing certificate might not have?



--
View this message in context: <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/Existing-root-certificate-not-working-with-SSL-Bump-squid-3-3-10-tp4668515.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/Existing-root-certificate-not-working-with-SSL-Bump-squid-3-3-10-tp4668515.html</A>
Sent from the Squid - Users mailing list archive at Nabble.com.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="000925.html">[squid-users] Persistent Connections - only one side
</A></li>
	<LI>Next message (by thread): <A HREF="000928.html">[squid-users] Existing root certificate not working with SSL Bump (squid 3.3.10)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#923">[ date ]</a>
              <a href="thread.html#923">[ thread ]</a>
              <a href="subject.html#923">[ subject ]</a>
              <a href="author.html#923">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
