<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] How to tell when Squid has finished setting up disk	cache directories?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20tell%20when%20Squid%20has%20finished%20setting%20up%20disk%0A%09cache%20directories%3F&In-Reply-To=%3CCABrJVoz%2Bc8eACFb5H9k6umPCKo%3DAOQsQwSFL6iJ9_mDdELLo_A%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000149.html">
   <LINK REL="Next"  HREF="000078.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] How to tell when Squid has finished setting up disk	cache directories?</H1>
    <B>Stephen Baynes</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20tell%20when%20Squid%20has%20finished%20setting%20up%20disk%0A%09cache%20directories%3F&In-Reply-To=%3CCABrJVoz%2Bc8eACFb5H9k6umPCKo%3DAOQsQwSFL6iJ9_mDdELLo_A%40mail.gmail.com%3E"
       TITLE="[squid-users] How to tell when Squid has finished setting up disk	cache directories?">stephen.baynes at smoothwall.net
       </A><BR>
    <I>Fri Oct  3 12:47:26 UTC 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="000149.html">[squid-users] Assertion failed: forward.cc:784: &quot;peer-&gt;use_ssl&quot; when using an Squid parent.
</A></li>
        <LI>Next message (by thread): <A HREF="000078.html">[squid-users] How to tell when Squid has finished setting up disk cache directories?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70">[ date ]</a>
              <a href="thread.html#70">[ thread ]</a>
              <a href="subject.html#70">[ subject ]</a>
              <a href="author.html#70">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>At times we automatically start Squid from a clean setup. We run squid
-z to create the cache directories and then start Squid for normal
operation. The question is how to know when squid -z has finished and
it is safe to start Squid for normal operation.

This is not a problem when one has one squid worker, one uses the -N
(don't background) option as well and just waits for the process to
finish.

However we want to use Squid with multiple workers and the problem is
the -N option overrides the number of workers and it sets up only one
cache directory. (Squid has one cache directory per worker.) If one
does not wait then when Squid starts for normal operation the cache
directories are not ready and it fails.

One can't even use the PID file to find out a process to wait for, as
it seems that it does not even write a PID file when the -z option is
used.

Any ideas on how to find out when it is finished creating the cache directories?

Thanks

Stephen Baynes

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="000149.html">[squid-users] Assertion failed: forward.cc:784: &quot;peer-&gt;use_ssl&quot; when using an Squid parent.
</A></li>
	<LI>Next message (by thread): <A HREF="000078.html">[squid-users] How to tell when Squid has finished setting up disk cache directories?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70">[ date ]</a>
              <a href="thread.html#70">[ thread ]</a>
              <a href="subject.html#70">[ subject ]</a>
              <a href="author.html#70">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
