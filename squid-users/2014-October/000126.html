<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] ntlmssp: bad ascii: ffffffab (Lan Manager auth	broken?)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20ntlmssp%3A%20bad%20ascii%3A%20ffffffab%20%28Lan%20Manager%20auth%0A%09broken%3F%29&In-Reply-To=%3CCA%2BY8hcNeG8tk1MLHzeuG8ERFDfZdrfYZZ5ArgkMXZRtWArnvtw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000124.html">
   <LINK REL="Next"  HREF="000130.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] ntlmssp: bad ascii: ffffffab (Lan Manager auth	broken?)</H1>
    <B>Kinkie</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20ntlmssp%3A%20bad%20ascii%3A%20ffffffab%20%28Lan%20Manager%20auth%0A%09broken%3F%29&In-Reply-To=%3CCA%2BY8hcNeG8tk1MLHzeuG8ERFDfZdrfYZZ5ArgkMXZRtWArnvtw%40mail.gmail.com%3E"
       TITLE="[squid-users] ntlmssp: bad ascii: ffffffab (Lan Manager auth	broken?)">gkinkie at gmail.com
       </A><BR>
    <I>Mon Oct  6 11:04:54 UTC 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="000124.html">[squid-users] ntlmssp: bad ascii: ffffffab (Lan Manager auth broken?)
</A></li>
        <LI>Next message (by thread): <A HREF="000130.html">[squid-users] ntlmssp: bad ascii: ffffffab (Lan Manager auth broken?)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#126">[ date ]</a>
              <a href="thread.html#126">[ thread ]</a>
              <a href="subject.html#126">[ subject ]</a>
              <a href="author.html#126">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>er.. are you not using the helper provided by Samba? That is the most
reliable way to do NTLM authentication in squid (and most other Linux
software)

On Mon, Oct 6, 2014 at 11:08 AM, Victor Sudakov
&lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">sudakov at sibptus.tomsk.ru</A>&gt; wrote:
&gt;<i> Francesco,
</I>&gt;<i>
</I>&gt;<i> What do you mean by &quot;client&quot;? Absolutely everything in this lab setup
</I>&gt;<i> is the same, including the browser.
</I>&gt;<i>
</I>&gt;<i> The only difference is the ntlm plugin binary (ntlm_auth taken from
</I>&gt;<i> the old squid and ntlm_smb_lm_auth from the new one).
</I>&gt;<i>
</I>&gt;<i> In fact, I replaced the binary and restarted squid.
</I>&gt;<i>
</I>&gt;<i> Kinkie wrote:
</I>&gt;&gt;<i> Whoops, sorry for the empty message.
</I>&gt;&gt;<i> This seems like a broken client. Can you check whether the client
</I>&gt;&gt;<i> sending that was a legitimate one?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Mon, Oct 6, 2014 at 10:24 AM, Victor Sudakov
</I>&gt;&gt;<i> &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">sudakov at sibptus.tomsk.ru</A>&gt; wrote:
</I>&gt;&gt;<i> &gt; Colleagues,
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; The NTLM (LM) plugin in squid27 worked perfectly while the NTLM plugin in
</I>&gt;&gt;<i> &gt; squid34 is obviously broken.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I am attaching two log files, one of the old plugin and the other of
</I>&gt;&gt;<i> &gt; the new one. Could someone please have a look at bad-ntlm.log to see
</I>&gt;&gt;<i> &gt; why ntlm_smb_lm_auth does not work any more after upgrading to 34?
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; What does this failure
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; ntlmssp: bad ascii: ffffffab
</I>&gt;&gt;<i> &gt; No auth at all. Returning no-auth
</I>&gt;&gt;<i> &gt; ntlm_smb_lm_auth.cc(531): pid=16346 :sending 'NA Logon Failure' to squid
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; actually mean?
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I know that LM is bad and insecure, but I cannot give it up for the
</I>&gt;&gt;<i> &gt; present in the production environment until I make Kerberos
</I>&gt;&gt;<i> &gt; (negotiate) work.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; --
</I>&gt;&gt;<i> &gt; Victor Sudakov,  VAS4-RIPE, VAS47-RIPN
</I>&gt;&gt;<i> &gt; sip:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">sudakov at sibptus.tomsk.ru</A>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; _______________________________________________
</I>&gt;&gt;<i> &gt; squid-users mailing list
</I>&gt;&gt;<i> &gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;<i> &gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i>     Francesco
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Victor Sudakov,  VAS4-RIPE, VAS47-RIPN
</I>&gt;<i> sip:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">sudakov at sibptus.tomsk.ru</A>
</I>


-- 
    Francesco

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="000124.html">[squid-users] ntlmssp: bad ascii: ffffffab (Lan Manager auth broken?)
</A></li>
	<LI>Next message (by thread): <A HREF="000130.html">[squid-users] ntlmssp: bad ascii: ffffffab (Lan Manager auth broken?)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#126">[ date ]</a>
              <a href="thread.html#126">[ thread ]</a>
              <a href="subject.html#126">[ subject ]</a>
              <a href="author.html#126">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
