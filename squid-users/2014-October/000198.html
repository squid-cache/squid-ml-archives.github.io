<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 2.7 STABLE8 (Win2008) can't get my MS Lync 2013 to work?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%202.7%20STABLE8%20%28Win2008%29%20can%27t%20get%20my%20MS%20Lync%0A%202013%20to%20work%3F&In-Reply-To=%3CBAY181-W10622B73CAF28702B792D1F0A30%40phx.gbl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000192.html">
   <LINK REL="Next"  HREF="000199.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 2.7 STABLE8 (Win2008) can't get my MS Lync 2013 to work?</H1>
    <B>Mirza Dedic</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%202.7%20STABLE8%20%28Win2008%29%20can%27t%20get%20my%20MS%20Lync%0A%202013%20to%20work%3F&In-Reply-To=%3CBAY181-W10622B73CAF28702B792D1F0A30%40phx.gbl%3E"
       TITLE="[squid-users] Squid 2.7 STABLE8 (Win2008) can't get my MS Lync 2013 to work?">mirza.dedic at outlook.com
       </A><BR>
    <I>Wed Oct  8 15:19:29 UTC 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="000192.html">[squid-users] Squid 2.7 STABLE8 (Win2008) can't get my MS Lync 2013 to work?
</A></li>
        <LI>Next message (by thread): <A HREF="000199.html">[squid-users] Squid 2.7 STABLE8 (Win2008) can't get my MS Lync 2013 to work?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#198">[ date ]</a>
              <a href="thread.html#198">[ thread ]</a>
              <a href="subject.html#198">[ subject ]</a>
              <a href="author.html#198">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Amos,
It seems I spoke too fast, the proxy prompt is back, so disabling SG didn't do the trick.
Two two hits I see in access.log are:
1412778349.755    141 172.16.12.110 TCP_MISS/200 462 POST <A HREF="http://sqm.microsoft.com/sqm/wm/sqmserver.dll">http://sqm.microsoft.com/sqm/wm/sqmserver.dll</A> - DIRECT/65.55.7.141 -1412778349.911    515 172.16.12.110 TCP_MISS/200 11695 CONNECT login.microsoftonline.com:443 - DIRECT/157.55.208.198 -
These happen when I restart the Lync program and at the time of the proxy prompt.
My config file is here: <A HREF="http://pastebin.com/MSsTWum2">http://pastebin.com/MSsTWum2</A>
I spent last night trying to mess with cygwin + squid to try and tackle this issue by upgrading to a more supported squid, I see there is a 3.3.3 published in their repository; I got this working at home (squid starts) on Windows 7 machine however getting errors trying to start the same cygwin setup on my win2003 remote server, getting..
2014/10/08 08:12:56| aclIpParseIpData: Bad host/IP: '::1' in '::1', flags=0 : (8) Name or service not knownFATAL: Bungled Default Configuration line 11: acl localhost src 127.0.0.1/32 ::1Squid Cache (Version 3.3.3): Terminated abnormally.
My cygwin squid.conf is similar to 2.7, except a few changes.. <A HREF="http://pastebin.com/BrCG8yHL">http://pastebin.com/BrCG8yHL</A>
I am confused because no where is acl loclahost src defined in my config, and I tried starting squid with -f to make sure I am reading in the correct squid.conf file.
Figured i'd try the cygwin+squid route to get a more supported version going, but I am having issues starting it in my Win2003 box (the box has multiple network cards, so don't know if that has anything to do with it?).
&gt;<i> Date: Wed, 8 Oct 2014 19:35:25 +1300
</I>&gt;<i> From: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>
</I>&gt;<i> To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> Subject: Re: [squid-users] Squid 2.7 STABLE8 (Win2008) can't get my MS Lync 2013 to work?
</I>&gt;<i> 
</I>&gt;<i> -----BEGIN PGP SIGNED MESSAGE-----
</I>&gt;<i> Hash: SHA1
</I>&gt;<i> 
</I>&gt;<i> On 8/10/2014 12:17 p.m., Mirza Dedic wrote:
</I>&gt;<i> &gt; Hi Eliezer,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; After I commented out the SquidGuard part of the config and
</I>&gt;<i> &gt; restarted squid I restart my Lync 2013 client and it connects
</I>&gt;<i> &gt; without a proxy prompt, in the log I still see the &quot; 1412723608.354
</I>&gt;<i> &gt; 485 172.16.12.110 TCP_MISS/200 11695 CONNECT
</I>&gt;<i> &gt; login.microsoftonline.com:443 - DIRECT/65.52.244.66 -&quot; but no
</I>&gt;<i> &gt; proxy on the client's side.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; So, something in SquidGuard must be causing this??
</I>&gt;<i> 
</I>&gt;<i> Yes several things. Basically SG does not contain all of the hacks and
</I>&gt;<i> disablings necessary to cope with demands NTLM places on HTTP proxies.
</I>&gt;<i> Which is reasonable since its design goal is to filter HTTP traffic.
</I>&gt;<i> 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I did not want to uncomment the NTLM because we use this to provide
</I>&gt;<i> &gt; seamless authentication for the clients, if we only allow basic it
</I>&gt;<i> &gt; will prompt for user/pass won't it?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; We use SquidGuard as it has a pre-defined list of blocked sites, so
</I>&gt;<i> &gt; it was a quick way to add a set of blocked sites.. but this whole
</I>&gt;<i> &gt; setup is old I don't even know where the win32 binaries came from
</I>&gt;<i> &gt; for squidguard..
</I>&gt;<i> 
</I>&gt;<i> In which case there should be no need for you to have SG at all.
</I>&gt;<i> 
</I>&gt;<i> The popular blocklist/blacklist sources for SG also provide Squid
</I>&gt;<i> format downloads of the same lists, or converters are easily written.
</I>&gt;<i> <A HREF="https://www.google.com/search?q=squid+blacklist">https://www.google.com/search?q=squid+blacklist</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; You mentioned a 3.x being developed for Windows, is this internal
</I>&gt;<i> &gt; only or somewhere I can follow the progress?
</I>&gt;<i> 
</I>&gt;<i> I am the one driving that effort at present. It is a side hobby on my
</I>&gt;<i> overall goal of feature parity between Squid-2 and Squid-3 - keeping
</I>&gt;<i> Squid building and running on any OS Squid-2 was useful for.
</I>&gt;<i> 
</I>&gt;<i> The official state of Squid on Windows is documented in here:
</I>&gt;<i> <A HREF="http://wiki.squid-cache.org/KnowledgeBase/Windows">http://wiki.squid-cache.org/KnowledgeBase/Windows</A>
</I>&gt;<i> the newest bits are down under &quot;Porting Efforts&quot; for now.
</I>&gt;<i> 
</I>&gt;<i> Changes as they are found are being applied directly on the mainstream
</I>&gt;<i> 3.HEAD version. So the regular 3.HEAD ChangeLog and bugzilla are used
</I>&gt;<i> to track minor changes and issues.
</I>&gt;<i> 
</I>&gt;<i> Summary:
</I>&gt;<i> So far I have MinGW-w64 executables of Squid-3.5 that produce &quot;Error
</I>&gt;<i> 127&quot;. yay!. Any assistance figuring out what I have done wrong to get
</I>&gt;<i> that is welcome. So far I think its a missing DLL or wrong .exe
</I>&gt;<i> settings going into the compiler.
</I>&gt;<i> 
</I>&gt;<i> Visual Studio 2012 builds are also ongoing, but will not be available
</I>&gt;<i> until the Foundation provides an upstream git repository (being planned).
</I>&gt;<i> 
</I>&gt;<i> Personal donations welcome (&lt;<A HREF="http://treenet.co.nz/projects/squid/">http://treenet.co.nz/projects/squid/</A>&gt;),
</I>&gt;<i> but due to the above error 127 I am disinclined to accept contracts
</I>&gt;<i> with anything like a deadline.
</I>&gt;<i> 
</I>&gt;<i> Amos
</I>&gt;<i> -----BEGIN PGP SIGNATURE-----
</I>&gt;<i> Version: GnuPG v2.0.22 (MingW32)
</I>&gt;<i> 
</I>&gt;<i> iQEcBAEBAgAGBQJUNNstAAoJELJo5wb/XPRjN6IH/AhZf3+k0YizpxjmoyYh0E4/
</I>&gt;<i> AgbJ+fCtA/tvObKPN862xKQ/TCLnV9uOT/SFClf9Occ8fqJZex0ViNnIJiSrLaS7
</I>&gt;<i> 7SP4/C58D4T8FV1331HZmh36q38ui+bHTVvRWDjz4J0CC9/pmKCI5nVvLW8KbjYC
</I>&gt;<i> T0ZhOBU2L7VZ3zUhwTsKKD0UfroMzRyzcipmRMysNXpfG/5unZb4XLfk/AQdWRqo
</I>&gt;<i> zpXV6vA7uJGQnZO9fnuMOOysG7UqmyydlFWAkwM9XL+7SJC9bCKmPk/T9+CIvRN7
</I>&gt;<i> 31gbNdi3ZfyWSkgI9lp1UmNu1tV/G9CrnsCgDWGCswmEoy14fhvgy1cmYGZ2Wu8=
</I>&gt;<i> =vAWZ
</I>&gt;<i> -----END PGP SIGNATURE-----
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I> 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20141008/b63c8d8d/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20141008/b63c8d8d/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="000192.html">[squid-users] Squid 2.7 STABLE8 (Win2008) can't get my MS Lync 2013 to work?
</A></li>
	<LI>Next message (by thread): <A HREF="000199.html">[squid-users] Squid 2.7 STABLE8 (Win2008) can't get my MS Lync 2013 to work?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#198">[ date ]</a>
              <a href="thread.html#198">[ thread ]</a>
              <a href="subject.html#198">[ subject ]</a>
              <a href="author.html#198">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
