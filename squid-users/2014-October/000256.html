<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] SSL/SSH/SFTP/FTPS to alternate ports
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SSL/SSH/SFTP/FTPS%20to%20alternate%20ports&In-Reply-To=%3C543A6F36.9020500%40greeklug.gr%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000261.html">
   <LINK REL="Next"  HREF="000258.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] SSL/SSH/SFTP/FTPS to alternate ports</H1>
    <B>Sergey Tsabolov ( aka linuxman )</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SSL/SSH/SFTP/FTPS%20to%20alternate%20ports&In-Reply-To=%3C543A6F36.9020500%40greeklug.gr%3E"
       TITLE="[squid-users] SSL/SSH/SFTP/FTPS to alternate ports">sergios at greeklug.gr
       </A><BR>
    <I>Sun Oct 12 12:08:22 UTC 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="000261.html">[squid-users] SSL/SSH/SFTP/FTPS to alternate ports
</A></li>
        <LI>Next message (by thread): <A HREF="000258.html">[squid-users] SSL/SSH/SFTP/FTPS to alternate ports
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#256">[ date ]</a>
              <a href="thread.html#256">[ thread ]</a>
              <a href="subject.html#256">[ subject ]</a>
              <a href="author.html#256">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,
About ports for SSH I think the best way add SSH server running on 2222 
or 4444 ports and not need to change the https 443 ports with ssh ports.
Is the simple way and not need the change the https way.

On 12/10/2014 02:48 &#960;&#956;, Timothy Spear wrote:
&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> Here is the issue:
</I>&gt;<i> I can proxy through Squid just fine to HTTP and HTTPS. I can also run 
</I>&gt;<i> SSH via Corkscrew to a SSH server running on port 443 and it works fine.
</I>&gt;<i> What I cannot do, is access HTTPS or SSH on any other port except 443. 
</I>&gt;<i> I have lost track of the number of things I have tried so any help 
</I>&gt;<i> will be appreciated and I feel like I am missing something simple.
</I>&gt;<i> OS: Ubuntu 14.04.1 LTS
</I>&gt;<i> Squid: 3.3.8-1ubuntu6.1
</I>&gt;<i>
</I>&gt;<i> Here is my current Squid 3 configuration:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> debug_optionsall,3
</I>&gt;<i>
</I>&gt;<i> # local network we proxy for
</I>&gt;<i> acllocalnet src10.110.98.0/24
</I>&gt;<i>
</I>&gt;<i> # what ports can be the desitnation
</I>&gt;<i> acl allowedPorts port 21
</I>&gt;<i> acl allowedPorts port 22
</I>&gt;<i> acl allowedPorts port 2222
</I>&gt;<i> acl allowedPorts port 80
</I>&gt;<i> acl allowedPorts port 443
</I>&gt;<i> acl allowedPorts port 8443
</I>&gt;<i>
</I>&gt;<i> acl CONNECT method CONNECT
</I>&gt;<i>
</I>&gt;<i> # determine the available sites
</I>&gt;<i> acl allowedSites dstdomain &quot;/etc/squid3/allowed-sites.squid&quot;
</I>&gt;<i>
</I>&gt;<i> # now block anything not on the localnet or ports
</I>&gt;<i> http_access deny !localnet
</I>&gt;<i>
</I>&gt;<i> # allow connect only for approved ports
</I>&gt;<i> http_access deny CONNECT !allowedPorts
</I>&gt;<i>
</I>&gt;<i> # now only allow to the specific sites
</I>&gt;<i> http_access allow localnet allowedSites allowedPorts
</I>&gt;<i>
</I>&gt;<i> http_port3128
</I>&gt;<i> access_log /var/log/squid3/access.log squid
</I>&gt;<i> hosts_file /etc/hosts
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Background (just FYI):
</I>&gt;<i> I am trying to setup Squid to control network access from a local 
</I>&gt;<i> subnet to a select number of domains. I do not need to bump the 
</I>&gt;<i> encrypted traffic and play man in the middle, I just need to prevent 
</I>&gt;<i> the servers on the local network from accessing unauthorized networks. 
</I>&gt;<i> Yes, I know I can do this in the Firewall, but that is IP based and I 
</I>&gt;<i> am dealing with enough other companies that maintaining the IP list 
</I>&gt;<i> has become a major pain. Instead I want to use domains, which I can do 
</I>&gt;<i> in Squid.
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i>
</I>&gt;<i> Tim
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
-- 
--------------------------------------------------------------------------------------
Don't send me documents in .doc , .docx, .xls, .ppt . , .pptx
Send it with ODF format : .odt , .odp , .ods or .pdf .
Try to use Open Document Format : <A HREF="http://el.libreoffice.org/">http://el.libreoffice.org/</A>
Save you money   &amp;  use GNU/Linux Distro <A HREF="http://distrowatch.com/">http://distrowatch.com/</A>
-----------------------------------------------------------------------------------------
First they ignore you, then they ridicule you, then they fight you, then you win!!!

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20141012/78559e3a/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20141012/78559e3a/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="000261.html">[squid-users] SSL/SSH/SFTP/FTPS to alternate ports
</A></li>
	<LI>Next message (by thread): <A HREF="000258.html">[squid-users] SSL/SSH/SFTP/FTPS to alternate ports
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#256">[ date ]</a>
              <a href="thread.html#256">[ thread ]</a>
              <a href="subject.html#256">[ subject ]</a>
              <a href="author.html#256">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
