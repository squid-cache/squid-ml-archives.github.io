<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] DEAD Parent detection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20DEAD%20Parent%20detection&In-Reply-To=%3C323db42f60d2a36d2ebf43a11940a803%40dweimer.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000369.html">
   <LINK REL="Next"  HREF="000345.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] DEAD Parent detection</H1>
    <B>dweimer</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20DEAD%20Parent%20detection&In-Reply-To=%3C323db42f60d2a36d2ebf43a11940a803%40dweimer.net%3E"
       TITLE="[squid-users] DEAD Parent detection">dweimer at dweimer.net
       </A><BR>
    <I>Fri Oct 17 14:35:47 UTC 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="000369.html">[squid-users] DEAD Parent detection
</A></li>
        <LI>Next message (by thread): <A HREF="000345.html">[squid-users] Supported configuration for adding origin server IP	in response header
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#370">[ date ]</a>
              <a href="thread.html#370">[ thread ]</a>
              <a href="subject.html#370">[ subject ]</a>
              <a href="author.html#370">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/17/2014 8:24 am, <A HREF="https://lists.squid-cache.org/listinfo/squid-users">daniel.rieken at gmx.net</A> wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;&gt;<i> Each of the parents are used for both HTTP &amp; HTTPS in this
</I>&gt;&gt;<i> configuration, the dead parent detected log message isn't going to be
</I>&gt;&gt;<i> repeated twice as its one parent, Regardless of which method the 
</I>&gt;&gt;<i> traffic
</I>&gt;&gt;<i> is passing.
</I>&gt;<i> 
</I>&gt;<i> yes, that's correct, I agree, each peer is used for both HTTP &amp; HTTPS.
</I>&gt;<i> But when I send only HTTPS traffic, squid is *not* logging &quot;DEAD
</I>&gt;<i> Parent detected&quot; or &quot;connection to 10.0.0.101:3128 failed&quot;.
</I>&gt;<i> The log message *only* appears as soon as squid is passing HTTP 
</I>&gt;<i> traffic.
</I>&gt;<i> 
</I>&gt;<i> In my scenario squid is only passing HTTPS-traffic, so I will never
</I>&gt;<i> ever see a log message when a Parent dies.
</I>&gt;<i> I would expect squid to log a &quot;DEAD Parent&quot; message *once*, regardless
</I>&gt;<i> of squid is currently passing HTTP or HTTPS.
</I>&gt;<i> Is this a bug? Or am I doing something wrong?
</I>&gt;<i> 
</I>
Ah, I see your dilemma, I spun up the test instance I have installed on 
my FreeBSD laptop of Squid 3.4.8, configured it to forward to two parent 
proxy servers. Then pointed my browser at it using a wpad.dat script 
that pointed HTTP traffic at the secondary parent proxy, and HTTPS 
traffic to the local test proxy. I created a bogus route entry to the 
primary parent proxy, forcing it to appear as dead. Just as you 
reported, traffic changed in the access log to listing ANY_OLD_PARENT 
and ran out secondary parent proxy server, with no Detected DEAD Parent 
log entry.

I then switch the browser from the script to hard coded so both HTTP &amp; 
HTTPS traffic went to the local test proxy, as soon as HTTP traffic hit 
it, it logged the Detected DEAD Parent in the cache.log. The issue is 
repeatable, and well may be a bug in the logging process, unless someone 
else can give a reason that it works this way.

-- 
Thanks,
    Dean E. Weimer
    <A HREF="http://www.dweimer.net/">http://www.dweimer.net/</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="000369.html">[squid-users] DEAD Parent detection
</A></li>
	<LI>Next message (by thread): <A HREF="000345.html">[squid-users] Supported configuration for adding origin server IP	in response header
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#370">[ date ]</a>
              <a href="thread.html#370">[ thread ]</a>
              <a href="subject.html#370">[ subject ]</a>
              <a href="author.html#370">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
