<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid, Kerberos and FireFox (Was: Re: leaking memory in squid 3.4.8 and 3.4.7.)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%2C%0A%20Kerberos%20and%20FireFox%20%28Was%3A%20Re%3A%20leaking%20memory%20in%20squid%203.4.8%20and%0A%203.4.7.%29&In-Reply-To=%3C5448D754.2040000%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000443.html">
   <LINK REL="Next"  HREF="000448.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid, Kerberos and FireFox (Was: Re: leaking memory in squid 3.4.8 and 3.4.7.)</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%2C%0A%20Kerberos%20and%20FireFox%20%28Was%3A%20Re%3A%20leaking%20memory%20in%20squid%203.4.8%20and%0A%203.4.7.%29&In-Reply-To=%3C5448D754.2040000%40treenet.co.nz%3E"
       TITLE="[squid-users] Squid, Kerberos and FireFox (Was: Re: leaking memory in squid 3.4.8 and 3.4.7.)">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Oct 23 10:24:20 UTC 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="000443.html">[squid-users] Squid, Kerberos and FireFox (Was: Re: leaking memory in squid 3.4.8 and 3.4.7.)
</A></li>
        <LI>Next message (by thread): <A HREF="000448.html">[squid-users] Squid, Kerberos and FireFox (Was: Re: leaking memory in squid 3.4.8 and 3.4.7.)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#446">[ date ]</a>
              <a href="thread.html#446">[ thread ]</a>
              <a href="subject.html#446">[ subject ]</a>
              <a href="author.html#446">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 23/10/2014 7:27 p.m., Victor Sudakov wrote:
&gt;<i> Victor Sudakov wrote:
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;&gt;<i> And about the basic issues that you were having with
</I>&gt;&gt;&gt;&gt;&gt;<i> performance, does it help to run Kerberos instead of NTLM
</I>&gt;&gt;&gt;&gt;&gt;<i> (it should...)?
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> I have even moved squid to a new virtual machine (FreeBSD 
</I>&gt;&gt;&gt;&gt;<i> 9.3-RELEASE under VMWare, 1 GB RAM) and performance still
</I>&gt;&gt;&gt;&gt;<i> sucks royally.
</I>&gt;<i> 
</I>&gt;<i> I don't know what's happening with squid but this kind of CPU
</I>&gt;<i> consumption is just not normal:
</I>
Well, it both is and it isn't.

Squid *will* use the CPU hardware right up too the 100% limit if it
has any need to that is normal.

Needing to for long periods of time is not particularly normal ...
except under conditions where the traffic load is too high for the
server hardware to cope with.

I did see a scenario with behaviour exactly like this at a client some
time back. After detailed analysis it turned out that their NTLM
helper had been so slow that clients traffic spent more time waiting
for next auth action than processing requests.
 But when they moved to the higher performance Kerberos and a simpler
proxy configuration the client traffic throughput increased to a
req/sec rate faster than the server could cope (3x previous rate).
 It thus was bottlenecked by 100% CPU speed limit rather than by NTLM
delays.

So, &quot;normal&quot; depends on what exactly is the cause of the behaviour.

What req/sec traffic rates are you seeing on what you consider a
&quot;normal&quot; / older proxy compared to this one?

Also, what are the heleprs stats looking like in the cachemgr report?

Amos
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.22 (MingW32)

iQEcBAEBAgAGBQJUSNdUAAoJELJo5wb/XPRj57sIALpsmoKBfywN6iToL1ZfODbL
pXDGxm0dcMXBlLB3gadEjMLvA5LlgY9xyFl41UHGjYhvg93RAsoLQmCNHZUgRtT8
fNqyVgGV5CnbPZQTJwWMjHFiGOR3/p8VFbH67nXt5xB7WZdT8UhWKkVxK3kNm2P9
BopiIYKeXDqgTKGw2OzPw/Xe8ieLOr/avxAq1cQkFhGw3B0mj+f6S9DlNZ6wSQR0
tIsshL2hHxt9jDnYVo1A8Gg6khYjjwZmRNFs5ixzsftMzBKR2QKAv09q/BKTTqID
T1EFFU5MuHanoxRzURJ0lh3UPeSj2sook5qKUyHQ/gyUc7yJtO+E3IdKcC/yDDM=
=/yVu
-----END PGP SIGNATURE-----

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="000443.html">[squid-users] Squid, Kerberos and FireFox (Was: Re: leaking memory in squid 3.4.8 and 3.4.7.)
</A></li>
	<LI>Next message (by thread): <A HREF="000448.html">[squid-users] Squid, Kerberos and FireFox (Was: Re: leaking memory in squid 3.4.8 and 3.4.7.)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#446">[ date ]</a>
              <a href="thread.html#446">[ thread ]</a>
              <a href="subject.html#446">[ subject ]</a>
              <a href="author.html#446">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
