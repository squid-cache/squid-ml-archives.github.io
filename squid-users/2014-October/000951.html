<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Delay Class 3 - Squid (Amos Jeffries)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Delay%20Class%203%20-%20Squid%20%28Amos%20Jeffries%29&In-Reply-To=%3CCAG%3Dj6fr32cb6i-fpRFXh%3DnUh%2BzEzHqwVrjtv688Baa7DJ_SaDw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000507.html">
   <LINK REL="Next"  HREF="000496.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Delay Class 3 - Squid (Amos Jeffries)</H1>
    <B>Jorge Visentini</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Delay%20Class%203%20-%20Squid%20%28Amos%20Jeffries%29&In-Reply-To=%3CCAG%3Dj6fr32cb6i-fpRFXh%3DnUh%2BzEzHqwVrjtv688Baa7DJ_SaDw%40mail.gmail.com%3E"
       TITLE="[squid-users] Delay Class 3 - Squid (Amos Jeffries)">jorgevisentini at gmail.com
       </A><BR>
    <I>Mon Oct 27 17:28:02 UTC 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="000507.html">[squid-users] Group check against AD
</A></li>
        <LI>Next message (by thread): <A HREF="000496.html">[squid-users] squid 3.4.8 Eating all of the Bandwidth
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#951">[ date ]</a>
              <a href="thread.html#951">[ thread ]</a>
              <a href="subject.html#951">[ subject ]</a>
              <a href="author.html#951">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Amos Jeffries!

I tried to use three parameters, but it did not work.

I did not understand why this is giving error...




2014-10-27 14:40 GMT-02:00 &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-request at lists.squid-cache.org</A>&gt;:

&gt;<i> Send squid-users mailing list submissions to
</I>&gt;<i>         <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>
</I>&gt;<i> To subscribe or unsubscribe via the World Wide Web, visit
</I>&gt;<i>         <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> or, via email, send a message with subject or body 'help' to
</I>&gt;<i>         <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-request at lists.squid-cache.org</A>
</I>&gt;<i>
</I>&gt;<i> You can reach the person managing the list at
</I>&gt;<i>         <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-owner at lists.squid-cache.org</A>
</I>&gt;<i>
</I>&gt;<i> When replying, please edit your Subject line so it is more specific
</I>&gt;<i> than &quot;Re: Contents of squid-users digest...&quot;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Today's Topics:
</I>&gt;<i>
</I>&gt;<i>    1. Re: Delay Class 3 - Squid (Amos Jeffries)
</I>&gt;<i>    2. Re: Delay Class 3 - Squid (Amos Jeffries)
</I>&gt;<i>    3. Re: Filtering keywords on google search (Cassiano Martin)
</I>&gt;<i>    4. how to obtain info about actual active downloads?
</I>&gt;<i>       (Frantisek Hanzlik)
</I>&gt;<i>    5. Re: how to obtain info about actual active downloads?
</I>&gt;<i>       (Antony Stone)
</I>&gt;<i>    6. Re: how to obtain info about actual active downloads?
</I>&gt;<i>       (Leonardo Rodrigues)
</I>&gt;<i>    7. Re: Kerberos Authentication Failing for Windows 7+ with BH
</I>&gt;<i>       gss_accept_sec_context() failed (Pedro Lobo)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ----------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> Message: 1
</I>&gt;<i> Date: Tue, 28 Oct 2014 01:01:34 +1300
</I>&gt;<i> From: Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;
</I>&gt;<i> To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> Subject: Re: [squid-users] Delay Class 3 - Squid
</I>&gt;<i> Message-ID: &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">544E341E.7080801 at treenet.co.nz</A>&gt;
</I>&gt;<i> Content-Type: text/plain; charset=utf-8
</I>&gt;<i>
</I>&gt;<i> -----BEGIN PGP SIGNED MESSAGE-----
</I>&gt;<i> Hash: SHA1
</I>&gt;<i>
</I>&gt;<i> On 28/10/2014 12:57 a.m., Jorge Visentini wrote:
</I>&gt;<i> &gt; Hello!
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Sorry my english.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I'm racking my brain to figure out why the error.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I've used a long time ago a rule delay pool but this time I am not
</I>&gt;<i> &gt; able to implement ...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; In my squid.conf looks like this:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; delay_pools 1 delay_class 1 3 delay_parameters 1 50000/50000
</I>&gt;<i> &gt; 24000/24000
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://www.squid-cache.org/Doc/config/delay_parameters/">http://www.squid-cache.org/Doc/config/delay_parameters/</A>
</I>&gt;<i>
</I>&gt;<i> class 1 pools only have one speed parameter. Not two.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Amos
</I>&gt;<i>
</I>&gt;<i> -----BEGIN PGP SIGNATURE-----
</I>&gt;<i> Version: GnuPG v2.0.22 (MingW32)
</I>&gt;<i>
</I>&gt;<i> iQEcBAEBAgAGBQJUTjQeAAoJELJo5wb/XPRjm0IH/3Fwh9VhfFOhpMfn1Z20ii2b
</I>&gt;<i> 49SC9fhyMmVfoNdm49uOY9txb/7VDQpfRtb4yvNcAJJ+t0soNRlz8wcYrvJHeu52
</I>&gt;<i> HMG1te3wySXVZgar/DzQbsI/k15Ar2uuUVmJJ/rkQextBjftqXF7HLXo6kBNRLG7
</I>&gt;<i> xcwSSrtGy9SIY8yOZflz+4ANJr5Z1Fme1w2Cp88UXXBLuKXZ3JNeQrte06aRpJkn
</I>&gt;<i> KwWQwSLwv3KGF48PbuLRD2M8flA/eFkoqg0VK0CRzjytGwxb/b0OIE9shl/GH2A0
</I>&gt;<i> oEcWVowZHqAXSsSbbpW9GIyNpKoxjndY80VBijaTvvXj+tBQK2DaIse7e7NaEGc=
</I>&gt;<i> =tJHs
</I>&gt;<i> -----END PGP SIGNATURE-----
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> Message: 2
</I>&gt;<i> Date: Tue, 28 Oct 2014 01:06:13 +1300
</I>&gt;<i> From: Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;
</I>&gt;<i> To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> Subject: Re: [squid-users] Delay Class 3 - Squid
</I>&gt;<i> Message-ID: &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">544E3535.7050805 at treenet.co.nz</A>&gt;
</I>&gt;<i> Content-Type: text/plain; charset=utf-8
</I>&gt;<i>
</I>&gt;<i> -----BEGIN PGP SIGNED MESSAGE-----
</I>&gt;<i> Hash: SHA1
</I>&gt;<i>
</I>&gt;<i> On 28/10/2014 1:01 a.m., Amos Jeffries wrote:
</I>&gt;<i> &gt; On 28/10/2014 12:57 a.m., Jorge Visentini wrote:
</I>&gt;<i> &gt;&gt; Hello!
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; Sorry my english.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; I'm racking my brain to figure out why the error.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; I've used a long time ago a rule delay pool but this time I am
</I>&gt;<i> &gt;&gt; not able to implement ...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; In my squid.conf looks like this:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; delay_pools 1 delay_class 1 3 delay_parameters 1 50000/50000
</I>&gt;<i> &gt;&gt; 24000/24000
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; <A HREF="http://www.squid-cache.org/Doc/config/delay_parameters/">http://www.squid-cache.org/Doc/config/delay_parameters/</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; class 1 pools only have one speed parameter. Not two.
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> Meh, sorry. I mean class 3 has 3 parameters.
</I>&gt;<i>
</I>&gt;<i> Amos
</I>&gt;<i> -----BEGIN PGP SIGNATURE-----
</I>&gt;<i> Version: GnuPG v2.0.22 (MingW32)
</I>&gt;<i>
</I>&gt;<i> iQEcBAEBAgAGBQJUTjU1AAoJELJo5wb/XPRjHYAIAI2oAOpjZTgsTlbdz20LZW+k
</I>&gt;<i> XAAAnm8QgJSDBI7ErmZAJ7AxJILfi2PR2M60411mN5AgrVYulofUriTebS13bguR
</I>&gt;<i> g0aoFmVMBj003T70sNZWwSgyf18Gr9ewu5X6sOSu1IdQg6M9VMJFaUUMs+FFy2bs
</I>&gt;<i> IOqfhEhkcszlz0wrmY+xhAxR7mm8qWenrRk47W6rQR90p5Ml5m6ha0cCyTMTo46H
</I>&gt;<i> euojiX3JHvbFa3NtoOiNTmNOK7ZVt6bE/KTDSGobx6ehNtsUgKQgMBfyQ9ET2269
</I>&gt;<i> x8/MBDBjpK3JSld0UF3CjTkF8eWZHLAC+/Y6ZRR1vY6ihXi5B4yK7+Ve0ZvK5eU=
</I>&gt;<i> =7r5y
</I>&gt;<i> -----END PGP SIGNATURE-----
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> Message: 3
</I>&gt;<i> Date: Mon, 27 Oct 2014 11:05:33 -0200
</I>&gt;<i> From: Cassiano Martin &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">cassiano at polaco.pro.br</A>&gt;
</I>&gt;<i> To: Job &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">Job at colliniconsulting.it</A>&gt;
</I>&gt;<i> Cc: &quot;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at squid-cache.org</A>&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at squid-cache.org</A>&gt;
</I>&gt;<i> Subject: Re: [squid-users] Filtering keywords on google search
</I>&gt;<i> Message-ID:
</I>&gt;<i>         &lt;
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">CAOoxthNmWSP7Xck4BpNxOO-wNNsGe3e4jkXgfvsLffeSbk9f2A at mail.gmail.com</A>&gt;
</I>&gt;<i> Content-Type: text/plain; charset=UTF-8
</I>&gt;<i>
</I>&gt;<i> I have some proof of concept on my github. it can be done thought  DNS
</I>&gt;<i> hijacking. I modified a version of tinyproxy to enforce safe search.
</I>&gt;<i> you can check it out on <A HREF="https://github.com/polaco1782/tinyproxy">https://github.com/polaco1782/tinyproxy</A>
</I>&gt;<i>
</I>&gt;<i> 2014-10-25 9:49 GMT-02:00 Job &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">Job at colliniconsulting.it</A>&gt;:
</I>&gt;<i> &gt; Hello, since Google switch definitely on SSL connection it seems there
</I>&gt;<i> is no way to filter semantic (with danguardian, squidguard or squid).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; SSL Bump can help in this case, both on explicit or transparent proxying?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Is there another way to filter searches (and image searches!)?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thank you!
</I>&gt;<i> &gt; Francesco
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; squid-users mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> &gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> Message: 4
</I>&gt;<i> Date: Mon, 27 Oct 2014 14:32:39 +0100
</I>&gt;<i> From: Frantisek Hanzlik &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">franta at hanzlici.cz</A>&gt;
</I>&gt;<i> To: Squid users list &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at squid-cache.org</A>&gt;
</I>&gt;<i> Subject: [squid-users] how to obtain info about actual active
</I>&gt;<i>         downloads?
</I>&gt;<i> Message-ID: &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">544E4977.3050705 at hanzlici.cz</A>&gt;
</I>&gt;<i> Content-Type: text/plain; charset=UTF-8
</I>&gt;<i>
</I>&gt;<i> Please, what is best way for determining who squid clients (their
</I>&gt;<i> PC IP addresses) have which downloads active?
</I>&gt;<i> I want it to determine which clients burden our slow internet line.
</I>&gt;<i> Examining 'access.log' does not help much in this case, because users
</I>&gt;<i> can download large files and it may take a few minutes or hours (e.g.
</I>&gt;<i> in case of consuming some audio/video streams).
</I>&gt;<i>
</I>&gt;<i> I tried inspecting informations in 'Client-side Active Requests' menu
</I>&gt;<i> in cachemgr.cgi, where are paragraphs as:
</I>&gt;<i>
</I>&gt;<i> Connection: 0x7f442037aa48
</I>&gt;<i>         FD 94, read 5892, wrote 148211583
</I>&gt;<i>         FD desc: Reading next request
</I>&gt;<i>         in: buf 0x7f440efc9150, offset 0, size 4096
</I>&gt;<i>         remote: 192.168.1.44:1631
</I>&gt;<i>         local: 192.168.1.254:3128
</I>&gt;<i>         nrequests: 7
</I>&gt;<i> uri <A HREF="http://ice.abradio.cz/prachen64.mp3">http://ice.abradio.cz/prachen64.mp3</A>
</I>&gt;<i> logType TCP_MISS
</I>&gt;<i> out.offset 148178800, out.size 148179207
</I>&gt;<i> req_sz 724
</I>&gt;<i> entry 0x7f440d5d6220/A1AD3A830E803B23F9295A9BCB9C1949
</I>&gt;<i> start 1414389495.929684 (18515.473233 seconds ago)
</I>&gt;<i> username
</I>&gt;<i> delay_pool 0
</I>&gt;<i>
</I>&gt;<i> which seems to contain the necessary items and it would not be a big
</I>&gt;<i> problem adjust them to shorter form using e.g. awk or sed script,
</I>&gt;<i> and this informations is possible obtain in batch with some as:
</I>&gt;<i>
</I>&gt;<i> wget -q -O - '
</I>&gt;<i> <A HREF="http://localhost/Squid/cgi-bin/cachemgr.cgi?host=localhost&amp;port=3128&amp;user_name=&amp;operation=active_requests">http://localhost/Squid/cgi-bin/cachemgr.cgi?host=localhost&amp;port=3128&amp;user_name=&amp;operation=active_requests</A>
</I>&gt;<i> '
</I>&gt;<i> or
</I>&gt;<i> lynx -dump '
</I>&gt;<i> <A HREF="http://localhost/Squid/cgi-bin/cachemgr.cgi?host=localhost&amp;port=3128&amp;user_name=&amp;operation=active_requests">http://localhost/Squid/cgi-bin/cachemgr.cgi?host=localhost&amp;port=3128&amp;user_name=&amp;operation=active_requests</A>
</I>&gt;<i> '
</I>&gt;<i>
</I>&gt;<i> But is this the correct way? Or Squid offers other tools for this
</I>&gt;<i> case? Or is possible cachemgr.cgi supply/enwrap with some filter
</I>&gt;<i> which output needed info in some customized format?
</I>&gt;<i> We are using squid-3.3.13/Linux i686 now, it run on our LAN internet
</I>&gt;<i> router, LAN has approx. twenty PCs.
</I>&gt;<i>
</I>&gt;<i> Thanks in advance, Franta Hanzlik
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> Message: 5
</I>&gt;<i> Date: Mon, 27 Oct 2014 14:47:00 +0100
</I>&gt;<i> From: Antony Stone &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">Antony.Stone at squid.open.source.it</A>&gt;
</I>&gt;<i> To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> Subject: Re: [squid-users] how to obtain info about actual active
</I>&gt;<i>         downloads?
</I>&gt;<i> Message-ID: &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">201410271447.00509.Antony.Stone at squid.open.source.it</A>&gt;
</I>&gt;<i> Content-Type: Text/Plain;  charset=&quot;utf-8&quot;
</I>&gt;<i>
</I>&gt;<i> On Monday 27 October 2014 at 14:32:39 (EU time), Frantisek Hanzlik wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Please, what is best way for determining who squid clients (their
</I>&gt;<i> &gt; PC IP addresses) have which downloads active?
</I>&gt;<i> &gt; I want it to determine which clients burden our slow internet line.
</I>&gt;<i> &gt; Examining 'access.log' does not help much in this case, because users
</I>&gt;<i> &gt; can download large files and it may take a few minutes or hours (e.g.
</I>&gt;<i> &gt; in case of consuming some audio/video streams).
</I>&gt;<i>
</I>&gt;<i> I would use the tool 'iptraf', either running on your squid server, or on a
</I>&gt;<i> machine which can sniff your internal network traffic (possibly with the
</I>&gt;<i> use of a
</I>&gt;<i> spanning port on the switch).
</I>&gt;<i>
</I>&gt;<i> That can give you real-time bandwidth measurements per IP address.
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Antony.
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Anything that improbable is effectively impossible.
</I>&gt;<i>
</I>&gt;<i>  - Murray Gell-Mann, Nobel Prizewinner in Physics
</I>&gt;<i>
</I>&gt;<i>                                                    Please reply to the
</I>&gt;<i> list;
</I>&gt;<i>                                                          please *don't* CC
</I>&gt;<i> me.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> Message: 6
</I>&gt;<i> Date: Mon, 27 Oct 2014 14:37:43 -0200
</I>&gt;<i> From: Leonardo Rodrigues &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">leolistas at solutti.com.br</A>&gt;
</I>&gt;<i> To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> Subject: Re: [squid-users] how to obtain info about actual active
</I>&gt;<i>         downloads?
</I>&gt;<i> Message-ID: &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">544E74D7.2030104 at solutti.com.br</A>&gt;
</I>&gt;<i> Content-Type: text/plain; charset=utf-8; format=flowed
</I>&gt;<i>
</I>&gt;<i> On 27/10/14 11:47, Antony Stone wrote:
</I>&gt;<i> &gt; On Monday 27 October 2014 at 14:32:39 (EU time), Frantisek Hanzlik wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; Please, what is best way for determining who squid clients (their
</I>&gt;<i> &gt;&gt; PC IP addresses) have which downloads active?
</I>&gt;<i> &gt;&gt; I want it to determine which clients burden our slow internet line.
</I>&gt;<i> &gt;&gt; Examining 'access.log' does not help much in this case, because users
</I>&gt;<i> &gt;&gt; can download large files and it may take a few minutes or hours (e.g.
</I>&gt;<i> &gt;&gt; in case of consuming some audio/video streams).
</I>&gt;<i> &gt; I would use the tool 'iptraf', either running on your squid server, or
</I>&gt;<i> on a
</I>&gt;<i> &gt; machine which can sniff your internal network traffic (possibly with the
</I>&gt;<i> use of a
</I>&gt;<i> &gt; spanning port on the switch).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; That can give you real-time bandwidth measurements per IP address.
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>      I use this script:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://samm.kiev.ua/sqstat/">http://samm.kiev.ua/sqstat/</A>
</I>&gt;<i>
</I>&gt;<i>      Set it to auto-update on 15/15 seconds, for example, and you'll
</I>&gt;<i> have a great and easy way to evaluate active connections and high
</I>&gt;<i> bandwidth use connections.
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>         Atenciosamente / Sincerily,
</I>&gt;<i>         Leonardo Rodrigues
</I>&gt;<i>         Solutti Tecnologia
</I>&gt;<i>         <A HREF="http://www.solutti.com.br">http://www.solutti.com.br</A>
</I>&gt;<i>
</I>&gt;<i>         Minha armadilha de SPAM, N&#195;O mandem email
</I>&gt;<i>         <A HREF="https://lists.squid-cache.org/listinfo/squid-users">gertrudes at solutti.com.br</A>
</I>&gt;<i>         My SPAMTRAP, do not email it
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> Message: 7
</I>&gt;<i> Date: Mon, 27 Oct 2014 16:39:17 +0000
</I>&gt;<i> From: &quot;Pedro Lobo&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">palobo at gmail.com</A>&gt;
</I>&gt;<i> To: &quot;Markus Moeller&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">huaraz at moeller.plus.com</A>&gt;
</I>&gt;<i> Cc: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at squid-cache.org</A>
</I>&gt;<i> Subject: Re: [squid-users] Kerberos Authentication Failing for Windows
</I>&gt;<i>         7+ with BH gss_accept_sec_context() failed
</I>&gt;<i> Message-ID: &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">94F74226-F24B-4910-95B7-B86ACE815995 at gmail.com</A>&gt;
</I>&gt;<i> Content-Type: text/plain; charset=&quot;utf-8&quot;
</I>&gt;<i>
</I>&gt;<i> Hey Everybody,
</I>&gt;<i>
</I>&gt;<i> Seems as though I celebrated too soon on Saturday. Today things are back
</I>&gt;<i> to not working for Windows 7+ machines and XP/2003 machines are working
</I>&gt;<i> just fine.
</I>&gt;<i>
</I>&gt;<i> I've also checked the permissions on the keytab file and they haven't
</I>&gt;<i> changed since Saturday, so it's not that... ARGH!!!!
</I>&gt;<i>
</I>&gt;<i> Craving ideas and solutions right now... Pilot users are less than
</I>&gt;<i> satisfied ;)
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i> Pedro
</I>&gt;<i>
</I>&gt;<i> On 25 Oct 2014, at 14:13, Markus Moeller wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Hi Pedro,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I wonder if he upper case in the name is a problem. Can you try
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; auth_param negotiate program /usr/lib/squid3/negotiate_kerberos_auth -d
</I>&gt;<i> -r -s GSS_C_NO_NAME
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; instead of
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; auth_param negotiate program /usr/lib/squid3/negotiate_kerberos_auth -d
</I>&gt;<i> -r -s HTTP/proxy01tst.fake.net
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Markus
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &quot;Pedro Lobo&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">palobo at gmail.com</A>&gt; wrote in message
</I>&gt;<i> news:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">FD6832B9-3F1F-48C6-A76F-47A224F1697B at gmail.com...</A>
</I>&gt;<i> &gt; Hi Markus,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I used msktutil to create the keytab.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; msktutil -c -s HTTP/proxy01tst.fake.net -h proxy01tst.fake.net -k
</I>&gt;<i> /etc/squid3/PROXY.keytab --computer-name proxy01-tst --upn HTTP/
</I>&gt;<i> proxy01tst.fake.net --server srv01.fake.net --verbose
</I>&gt;<i> &gt; Output of klist -ekt:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 2 10/24/2014 22:59:50 proxy01-tst$@FAKE.NET (arcfour-hmac)
</I>&gt;<i> &gt; 2 10/24/2014 22:59:50 proxy01-tst$@FAKE.NET (aes128-cts-hmac-sha1-96)
</I>&gt;<i> &gt; 2 10/24/2014 22:59:50 proxy01-tst$@FAKE.NET (aes256-cts-hmac-sha1-96)
</I>&gt;<i> &gt; 2 10/24/2014 22:59:50 HTTP/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy01tst.FAKE.net at FAKE.NET</A> (arcfour-hmac)
</I>&gt;<i> &gt; 2 10/24/2014 22:59:50 HTTP/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy01tst.FAKE.net at FAKE.NET</A>
</I>&gt;<i> (aes128-cts-hmac-sha1-96)
</I>&gt;<i> &gt; 2 10/24/2014 22:59:50 HTTP/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy01tst.FAKE.net at FAKE.NET</A>
</I>&gt;<i> (aes256-cts-hmac-sha1-96)
</I>&gt;<i> &gt; 2 10/24/2014 22:59:50 host/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy01tst.FAKE.net at FAKE.NET</A> (arcfour-hmac)
</I>&gt;<i> &gt; 2 10/24/2014 22:59:50 host/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy01tst.FAKE.net at FAKE.NET</A>
</I>&gt;<i> (aes128-cts-hmac-sha1-96)
</I>&gt;<i> &gt; 2 10/24/2014 22:59:50 host/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy01tst.FAKE.net at FAKE.NET</A>
</I>&gt;<i> (aes256-cts-hmac-sha1-96)
</I>&gt;<i> &gt; Yep, using MIT Kerberos
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thanks in advance for any help.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Cheers,
</I>&gt;<i> &gt; Pedro
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On 25 Oct 2014, at 1:26, Markus Moeller wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Hi Pedro,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; How did you create your keytab ? What does klist &#8211;ekt &lt;squid.keytab&gt;
</I>&gt;<i> show ( I assume you use MIT Kerberos) ?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Markus
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &quot;Pedro Lobo&quot; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">palobo at gmail.com</A> wrote in message
</I>&gt;<i> news:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">40E1E0E7-50C6-4117-94AA-50B06573430A at gmail.com...</A>
</I>&gt;<i> &gt; Hi Squid Gurus,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I'm at my wit's end and in dire need of some squid expertise.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; We've got a production environment with a couple of squid 2.7 servers
</I>&gt;<i> using NTLM and basic authentication. Recently though, we decided to upgrade
</I>&gt;<i> and I'm now setting up squid 3.3 with Kerberos and NTLM Fallback. I've
</I>&gt;<i> followed just about every guide I could find and in my testing environment,
</I>&gt;<i> things were working great. Now that I've hooked it up to the main domain,
</I>&gt;<i> things are awry.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; If I use a machine that's not part of the domain, NTLM kicks in and I
</I>&gt;<i> can surf the web fine. If I use a Windows XP or Windows Server 2003,
</I>&gt;<i> kerberos works just fine, however, if I use a machine Windows 7, 8 or 2008
</I>&gt;<i> server, I keep getting a popup asking me to authenticate and even then,
</I>&gt;<i> it's and endless loop until it fails. My cache.log is littered with:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; negotiate_kerberos_auth.cc(200): pid=1607 :2014/10/24 23:03:01|
</I>&gt;<i> negotiate_kerberos_auth: ERROR: gss_accept_sec_context() failed:
</I>&gt;<i> Unspecified GSS failure. Minor code may provide more information.
</I>&gt;<i> &gt; 2014/10/24 23:03:01| ERROR: Negotiate Authentication validating user.
</I>&gt;<i> Error returned 'BH gss_accept_sec_context() failed: Unspecified GSS
</I>&gt;<i> failure. Minor code may provide more information. '
</I>&gt;<i> &gt; The odd thing, is that this has worked before. Help me Obi Wan... You're
</I>&gt;<i> my only hope! :)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Current Setup
</I>&gt;<i> &gt; Squid 3.3 running on Ubuntu 14.04 server. It's connected to a 2003
</I>&gt;<i> server with function level 2000 (I know, we're trying to fase out the older
</I>&gt;<i> servers).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; krb5.conf
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; [libdefaults]
</I>&gt;<i> &gt; default_realm = FAKE.NET
</I>&gt;<i> &gt; dns_lookup_kdc = yes
</I>&gt;<i> &gt; dns_lookup_realm = yes
</I>&gt;<i> &gt; ticket_lifetime = 24h
</I>&gt;<i> &gt; default_keytab_name = /etc/squid3/PROXY.keytab
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; ; for Windows 2003
</I>&gt;<i> &gt; default_tgs_enctypes = rc4-hmac des-cbc-crc des-cbc-md5
</I>&gt;<i> &gt; default_tkt_enctypes = rc4-hmac des-cbc-crc des-cbc-md5
</I>&gt;<i> &gt; permitted_enctypes = rc4-hmac des-cbc-crc des-cbc-md5
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; [realms]
</I>&gt;<i> &gt; FAKE.NET = {
</I>&gt;<i> &gt; kdc = srv01.fake.net
</I>&gt;<i> &gt; kdc = srv02.fake.net
</I>&gt;<i> &gt; kdc = srv03.fake.net
</I>&gt;<i> &gt; admin_server = srv01.fake.net
</I>&gt;<i> &gt; default_domain = fake.net
</I>&gt;<i> &gt; }
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; [domain_realm]
</I>&gt;<i> &gt; .fake.net = FAKE.NET
</I>&gt;<i> &gt; fake.net = FAKE.NET
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; [logging]
</I>&gt;<i> &gt; kdc = FILE:/var/log/kdc.log
</I>&gt;<i> &gt; admin_server = FILE:/var/log/kadmin.log
</I>&gt;<i> &gt; default = FILE:/var/log/krb5lib.log
</I>&gt;<i> &gt; squid.conf
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; auth_param negotiate program /usr/lib/squid3/negotiate_kerberos_auth -d
</I>&gt;<i> -r -s HTTP/proxy01tst.fake.net
</I>&gt;<i> &gt; auth_param negotiate children 20 startup=0 idle=1
</I>&gt;<i> &gt; auth_param negotiate keep_alive off
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; auth_param ntlm program /usr/bin/ntlm_auth --diagnostics
</I>&gt;<i> --helper-protocol=squid-2.5-ntlmssp --domain=FAKE.NET
</I>&gt;<i> &gt; auth_param ntlm children 10
</I>&gt;<i> &gt; auth_param ntlm keep_alive off
</I>&gt;<i> &gt; Cheers,
</I>&gt;<i> &gt; Pedro
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Cumprimentos
</I>&gt;<i> &gt; Pedro Lobo
</I>&gt;<i> &gt; Solutions Architect | System Engineer
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">pedro.lobo at pt.clara.net</A>
</I>&gt;<i> &gt; Tlm.: +351 939 528 827 | Tel.: +351 214 127 314
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Claranet Portugal
</I>&gt;<i> &gt; Ed. Parque Expo
</I>&gt;<i> &gt; Av. D. Jo&#227;o II, 1.07-2.1, 4&#186; Piso
</I>&gt;<i> &gt; 1998-014 Lisboa
</I>&gt;<i> &gt; www.claranet.pt
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Empresa certificada ISO 9001, ISO 20000 e ISO 27001
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> ------------------------------------------------------------------------------
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> ------------------------------------------------------------------------------
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; squid-users mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> &gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> ------------------------------------------------------------------------------
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; squid-users mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> &gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Cumprimentos
</I>&gt;<i> &gt; Pedro Lobo
</I>&gt;<i> &gt; Solutions Architect | System Engineer
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">pedro.lobo at pt.clara.net</A>
</I>&gt;<i> &gt; Tlm.: +351 939 528 827 | Tel.: +351 214 127 314
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Claranet Portugal
</I>&gt;<i> &gt; Ed. Parque Expo
</I>&gt;<i> &gt; Av. D. Jo&#227;o II, 1.07-2.1, 4&#186; Piso
</I>&gt;<i> &gt; 1998-014 Lisboa
</I>&gt;<i> &gt; www.claranet.pt
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Empresa certificada ISO 9001, ISO 20000 e ISO 27001
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> --------------------------------------------------------------------------------
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; squid-users mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> &gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; squid-users mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> &gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> -------------- next part --------------
</I>&gt;<i> An HTML attachment was scrubbed...
</I>&gt;<i> URL: &lt;
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20141027/219e87ff/attachment.html">http://lists.squid-cache.org/pipermail/squid-users/attachments/20141027/219e87ff/attachment.html</A>
</I>&gt;<i> &gt;
</I>&gt;<i> -------------- next part --------------
</I>&gt;<i> A non-text attachment was scrubbed...
</I>&gt;<i> Name: signature.asc
</I>&gt;<i> Type: application/pgp-signature
</I>&gt;<i> Size: 536 bytes
</I>&gt;<i> Desc: OpenPGP digital signature
</I>&gt;<i> URL: &lt;
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20141027/219e87ff/attachment.sig">http://lists.squid-cache.org/pipermail/squid-users/attachments/20141027/219e87ff/attachment.sig</A>
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> Subject: Digest Footer
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> End of squid-users Digest, Vol 2, Issue 97
</I>&gt;<i> ******************************************
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20141027/cdb0b866/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20141027/cdb0b866/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="000507.html">[squid-users] Group check against AD
</A></li>
	<LI>Next message (by thread): <A HREF="000496.html">[squid-users] squid 3.4.8 Eating all of the Bandwidth
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#951">[ date ]</a>
              <a href="thread.html#951">[ thread ]</a>
              <a href="subject.html#951">[ subject ]</a>
              <a href="author.html#951">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
