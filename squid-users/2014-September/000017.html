<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] leaking memory in squid 3.4.8 and 3.4.7.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20leaking%20memory%20in%20squid%203.4.8%20and%203.4.7.&In-Reply-To=%3C542A881A.3000307%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000030.html">
   <LINK REL="Next"  HREF="000026.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] leaking memory in squid 3.4.8 and 3.4.7.</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20leaking%20memory%20in%20squid%203.4.8%20and%203.4.7.&In-Reply-To=%3C542A881A.3000307%40ngtech.co.il%3E"
       TITLE="[squid-users] leaking memory in squid 3.4.8 and 3.4.7.">eliezer at ngtech.co.il
       </A><BR>
    <I>Tue Sep 30 10:38:18 UTC 2014</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="000030.html">[squid-users] leaking memory in squid 3.4.8 and 3.4.7.
</A></li>
        <LI>Next message (by thread): <A HREF="000026.html">[squid-users] leaking memory in squid 3.4.8 and 3.4.7.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17">[ date ]</a>
              <a href="thread.html#17">[ thread ]</a>
              <a href="subject.html#17">[ subject ]</a>
              <a href="author.html#17">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 09/30/2014 05:11 AM, Victor Sudakov wrote:
&gt;&gt;<i> 
</I>&gt;&gt;<i> Can you share the basic cache manager requests statistics and the
</I>&gt;&gt;<i> up time for the service? (mgr:info)
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> This would give us a basic idea of the load\requests needed to
</I>&gt;&gt;<i> reproduce it.
</I>&gt;<i> 
</I>&gt;<i> I am not Steve but in case you care to look at my statistics as
</I>&gt;<i> well, I am attaching it.
</I>&gt;<i> 
</I>OK.

The basic info states that the server is up for about 10+ hours.
and passed in this period of time: 152054 request which is about
230-253 per minute.

The cache is holding more then 20k objects and maximizing it's ram
memory usage (less 0.6%).
Considering that you are using 128MB for ram storage the service
should be considered 128MB used as more then normal.
In the log it states that the accounted memory:
403163 KB which is about 390MB in usage.
390 -128 = 262
so the only issue is about 250-260 MB which are being used and not for
cache.
the basic usage of squid is about 3MB if i'm not wrong but there are
operational needs such as buffers and in transit stuff.
So 255 MB to think about..
500 FD which means about 300-350 connections doubles 64kb.
then it's about 13-14 MB for in transit stuff.
So there is about 241 MB which needs to be justified.

These are the basics.

Eliezer
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iQEcBAEBAgAGBQJUKogaAAoJENxnfXtQ8ZQU/pUIAIh2Q1687fXSTsiUCO0jlnyO
NOD7F250EcppFwrQ4GPzDvRiNWUhzJSVzncAzJWlgQbWmoCnsvwB0C7MUN6bSOBf
ek0qmJi1m/xz1ePVFI1u1k/PfC4t2FTC8XM2zICSQKSkHIlV06EPNd5Km954bIYP
C7kzSl9CHl34v3179S22rEt1hej4Q3FEVayvoATrrPdrmyWLE2lICJYFxqGEIPK4
ivzxdcpdVovR2AwCHeDqXrTB/wTrYaZz1TQWUZScCmPibd1oqGXd3gHefE1aOMwS
ZsuBUZLfiTmaezBBeEqq8P3oWLIBh2mU1m4JogUbDixkrLpi4GaIFk+TIp9CTNw=
=e8AJ
-----END PGP SIGNATURE-----

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="000030.html">[squid-users] leaking memory in squid 3.4.8 and 3.4.7.
</A></li>
	<LI>Next message (by thread): <A HREF="000026.html">[squid-users] leaking memory in squid 3.4.8 and 3.4.7.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17">[ date ]</a>
              <a href="thread.html#17">[ thread ]</a>
              <a href="subject.html#17">[ subject ]</a>
              <a href="author.html#17">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
