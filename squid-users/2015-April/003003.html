<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Transparent Proxy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Transparent%20Proxy&In-Reply-To=%3CCAA8_PU5R3D9-9sRk%3D2Q5U_ob4zZFMj9SMot3wowTfX%3DUBEtKjw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003060.html">
   <LINK REL="Next"  HREF="003004.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Transparent Proxy</H1>
    <B>Jaydeep Kubavat</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Transparent%20Proxy&In-Reply-To=%3CCAA8_PU5R3D9-9sRk%3D2Q5U_ob4zZFMj9SMot3wowTfX%3DUBEtKjw%40mail.gmail.com%3E"
       TITLE="[squid-users] Transparent Proxy">jaykbvt at gmail.com
       </A><BR>
    <I>Wed Apr  8 09:20:51 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="003060.html">[squid-users] Increase number of ext_ldap_group_acl processes
</A></li>
        <LI>Next message (by thread): <A HREF="003004.html">[squid-users] Transparent Proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3003">[ date ]</a>
              <a href="thread.html#3003">[ thread ]</a>
              <a href="subject.html#3003">[ subject ]</a>
              <a href="author.html#3003">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I've configured a transparent squid proxy on a centos 6.6 with single NIC.

There is Cisco ISG in between with L4 redirection on www traffic.

The requests are coming on port 80 from client and ISG forwards that to
port 80 on my squid server.

So there is no iptables configured on squid server.

Client requests are not reaching upto my squid instance.

I'm getting the following in pcap on squid box.

=========================

&quot;129&quot;,&quot;79.114808&quot;,&quot;10.210.83.246&quot;,&quot;10.58.200.33&quot;,&quot;TCP&quot;,&quot;76&quot;,&quot;39546&#8594;80 [SYN]
Seq=0 Win=14600 Len=0 MSS=1360 SACK_PERM=1 TSval=2686675 TSecr=0 WS=64&quot;

&quot;130&quot;,&quot;79.114946&quot;,&quot;10.58.200.33&quot;,&quot;10.210.83.246&quot;,&quot;TCP&quot;,&quot;76&quot;,&quot;80&#8594;39546 [SYN,
ACK] Seq=0 Ack=1 Win=14480 Len=0 MSS=1460 SACK_PERM=1 TSval=509402603
TSecr=2686675 WS=64&quot;

&quot;145&quot;,&quot;82.115674&quot;,&quot;10.210.83.246&quot;,&quot;10.58.200.33&quot;,&quot;TCP&quot;,&quot;76&quot;,&quot;[TCP Spurious
Retransmission] 39546&#8594;80 [SYN] Seq=0 Win=14600 Len=0 MSS=1360 SACK_PERM=1
TSval=2686976 TSecr=0 WS=64&quot;

&quot;146&quot;,&quot;82.115748&quot;,&quot;10.58.200.33&quot;,&quot;10.210.83.246&quot;,&quot;TCP&quot;,&quot;76&quot;,&quot;[TCP
Retransmission] 80&#8594;39546 [SYN, ACK] Seq=0 Ack=1 Win=14480 Len=0 MSS=1460
SACK_PERM=1 TSval=509405604 TSecr=2686675 WS=64&quot;

&quot;151&quot;,&quot;83.113859&quot;,&quot;10.58.200.33&quot;,&quot;10.210.83.246&quot;,&quot;TCP&quot;,&quot;76&quot;,&quot;[TCP
Retransmission] 80&#8594;39546 [SYN, ACK] Seq=0 Ack=1 Win=14480 Len=0 MSS=1460
SACK_PERM=1 TSval=509406603 TSecr=2686675 WS=64&quot;

&quot;165&quot;,&quot;88.145376&quot;,&quot;10.210.83.246&quot;,&quot;10.58.200.33&quot;,&quot;TCP&quot;,&quot;76&quot;,&quot;[TCP Spurious
Retransmission] 39546&#8594;80 [SYN] Seq=0 Win=14600 Len=0 MSS=1360 SACK_PERM=1
TSval=2687578 TSecr=0 WS=64&quot;

&quot;166&quot;,&quot;88.145450&quot;,&quot;10.58.200.33&quot;,&quot;10.210.83.246&quot;,&quot;TCP&quot;,&quot;76&quot;,&quot;[TCP
Retransmission] 80&#8594;39546 [SYN, ACK] Seq=0 Ack=1 Win=14480 Len=0 MSS=1460
SACK_PERM=1 TSval=509411634 TSecr=2686675 WS=64&quot;

&quot;176&quot;,&quot;89.113837&quot;,&quot;10.58.200.33&quot;,&quot;10.210.83.246&quot;,&quot;TCP&quot;,&quot;76&quot;,&quot;[TCP
Retransmission] 80&#8594;39546 [SYN, ACK] Seq=0 Ack=1 Win=14480 Len=0 MSS=1460
SACK_PERM=1 TSval=509412603 TSecr=2686675 WS=64&quot;

&quot;285&quot;,&quot;101.113833&quot;,&quot;10.58.200.33&quot;,&quot;10.210.83.246&quot;,&quot;TCP&quot;,&quot;76&quot;,&quot;[TCP
Retransmission] 80&#8594;39546 [SYN, ACK] Seq=0 Ack=1 Win=14480 Len=0 MSS=1460
SACK_PERM=1 TSval=509424603 TSecr=2686675 WS=64&quot;

=========================

my squid is configured default, only

http_port 3130
http_port 80 intercept

are changed.



-- 
Thanks &amp; Regards
Jaykbvt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150408/0a8cac11/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150408/0a8cac11/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="003060.html">[squid-users] Increase number of ext_ldap_group_acl processes
</A></li>
	<LI>Next message (by thread): <A HREF="003004.html">[squid-users] Transparent Proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3003">[ date ]</a>
              <a href="thread.html#3003">[ thread ]</a>
              <a href="subject.html#3003">[ subject ]</a>
              <a href="author.html#3003">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
