<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] tcp_outgoing_address
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20tcp_outgoing_address&In-Reply-To=%3C552E34CB.1080401%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003089.html">
   <LINK REL="Next"  HREF="003115.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] tcp_outgoing_address</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20tcp_outgoing_address&In-Reply-To=%3C552E34CB.1080401%40treenet.co.nz%3E"
       TITLE="[squid-users] tcp_outgoing_address">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Apr 15 09:52:11 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="003089.html">[squid-users] tcp_outgoing_address
</A></li>
        <LI>Next message (by thread): <A HREF="003115.html">[squid-users] tcp_outgoing_address
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3097">[ date ]</a>
              <a href="thread.html#3097">[ thread ]</a>
              <a href="subject.html#3097">[ subject ]</a>
              <a href="author.html#3097">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 15/04/2015 8:32 p.m., Alex Samad wrote:
&gt;<i> Hi
</I>&gt;<i> 
</I>&gt;<i> I have squid-3.5.2-2.el6.x86_64 on centos 6.6
</I>&gt;<i> 
</I>&gt;<i> I am trying to direct certain destinations from certain ip addresses
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> acl viaTest dstdomain .abc.com
</I>&gt;<i> 
</I>&gt;<i> tcp_outgoing_address 192.168.11.11 viaTEst
</I>&gt;<i> 
</I>&gt;<i> This works well for
</I>&gt;<i> 
</I>&gt;<i> www.abc.com and test.abc.com when they resolve to ipv4 addresses
</I>&gt;<i> but when they resolved to ipv6 it fails :(
</I>
Because 192.168.11.11 is not an IPv6 address. Squid cannot use it to
contact *.abc.com over IPv6.

Configure a tcp_outgoing_address line with an IPv6 address to handle the
IPv6 connections.


&gt;<i> 
</I>&gt;<i> so I tried added
</I>&gt;<i> 
</I>&gt;<i> dns_v4_first on
</I>&gt;<i> 
</I>&gt;<i> but it doesn't seem to help :(
</I>&gt;<i> 
</I>&gt;<i> So am i right in presuming that because the name resolution happens
</I>&gt;<i> first and because it goes to IPv6 it will not going out with a src of
</I>&gt;<i> 192.168.11.11
</I>&gt;<i> 
</I>&gt;<i> why doesn't the ipv4 first flag work ?
</I>
All that does is tell Squid to sort the DNS results so that it tries the
IPv4 connections before the IPv6 ones. It will greatly reduce the amount
of IPv6 outbound traffic, but still allow IPv6 to be used for
destinations that need it.

* For any site which is IPv4-only or IPv6-only it has no effect.

* For any site whose IPv4 connectivity is broken or overloaded, the IPv6
routes will be attempted at some point anyway.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="003089.html">[squid-users] tcp_outgoing_address
</A></li>
	<LI>Next message (by thread): <A HREF="003115.html">[squid-users] tcp_outgoing_address
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3097">[ date ]</a>
              <a href="thread.html#3097">[ thread ]</a>
              <a href="subject.html#3097">[ subject ]</a>
              <a href="author.html#3097">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
