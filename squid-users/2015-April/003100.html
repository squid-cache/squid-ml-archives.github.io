<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid tcp_outgoing_address feature not working
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20tcp_outgoing_address%20feature%20not%20working&In-Reply-To=%3C1429093275583-4670748.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003126.html">
   <LINK REL="Next"  HREF="003102.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid tcp_outgoing_address feature not working</H1>
    <B>naishal0748</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20tcp_outgoing_address%20feature%20not%20working&In-Reply-To=%3C1429093275583-4670748.post%40n4.nabble.com%3E"
       TITLE="[squid-users] squid tcp_outgoing_address feature not working">naishal48shah at gmail.com
       </A><BR>
    <I>Wed Apr 15 10:21:15 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="003126.html">[squid-users] tcp_outgoing_address
</A></li>
        <LI>Next message (by thread): <A HREF="003102.html">[squid-users] squid tcp_outgoing_address feature not working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3100">[ date ]</a>
              <a href="thread.html#3100">[ thread ]</a>
              <a href="subject.html#3100">[ subject ]</a>
              <a href="author.html#3100">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I received following reply from Amos.

---------------

Welcome to the world of application layer gateways.

There is no guarantee that IPv4 is being used outbound. You may in fact
be using IPv6 to contact servers.
 All that means is that you need to set a WAN1 IPv6 address in a second
tcp_outgoing_address line for the IPv6.


Also be aware the selection of NIC is entirely up to the kernel routing
logics. Older Linux were well-known for their annoying ability to accept
or send from any NIC using any IP assigned to the machine, depending on
whether you had some voodoo setup in the routing config or not. CentOS
uses ancient enough kernels that it probably does not have the bug fixes
for that.

So, double check that Squid is actually sending from 192.168.3.15 like
you expect. If not we can help you a little further to figure out why
and see if that fixes things for you.


One other effect I've seen in action is that NAT on outbound can take
Squids tcp_outgoing_address and change it so the packets go out the
wrong NIC with different IP entirely.


Otherwise its a kernel routing problem, and we probably cant help with that.

-------------------------------

I am actually checking using traceroute from client system , and it is
always showing me 192.168.5.1 default Gateway IP.

If it is getting difficult with squid configurations, please let me know if
it is possible to implement this setup using iptables, so that iptables
directly routes the traffic from specific source towards specific Gateway /
NIC.

Anyhow, basically I want the specific source traffic to go via specific
Gateway.





--
View this message in context: <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/squid-tcp-outgoing-address-feature-not-working-tp4670741p4670748.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/squid-tcp-outgoing-address-feature-not-working-tp4670741p4670748.html</A>
Sent from the Squid - Users mailing list archive at Nabble.com.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="003126.html">[squid-users] tcp_outgoing_address
</A></li>
	<LI>Next message (by thread): <A HREF="003102.html">[squid-users] squid tcp_outgoing_address feature not working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3100">[ date ]</a>
              <a href="thread.html#3100">[ thread ]</a>
              <a href="subject.html#3100">[ subject ]</a>
              <a href="author.html#3100">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
