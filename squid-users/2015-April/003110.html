<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Integrate Squid Kerberos auth and Squidguard ldapusersearch into AD
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Integrate%20Squid%20Kerberos%20auth%20and%20Squidguard%0A%20ldapusersearch%20into%20AD&In-Reply-To=%3C552E8CF1.1010304%40urlfilterdb.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003109.html">
   <LINK REL="Next"  HREF="003128.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Integrate Squid Kerberos auth and Squidguard ldapusersearch into AD</H1>
    <B>Marcus Kool</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Integrate%20Squid%20Kerberos%20auth%20and%20Squidguard%0A%20ldapusersearch%20into%20AD&In-Reply-To=%3C552E8CF1.1010304%40urlfilterdb.com%3E"
       TITLE="[squid-users] Integrate Squid Kerberos auth and Squidguard ldapusersearch into AD">marcus.kool at urlfilterdb.com
       </A><BR>
    <I>Wed Apr 15 16:08:17 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="003109.html">[squid-users] Integrate Squid Kerberos auth and Squidguard	ldapusersearch into AD
</A></li>
        <LI>Next message (by thread): <A HREF="003128.html">[squid-users] Integrate Squid Kerberos auth and Squidguard ldapusersearch into AD
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3110">[ date ]</a>
              <a href="thread.html#3110">[ thread ]</a>
              <a href="subject.html#3110">[ subject ]</a>
              <a href="author.html#3110">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On 04/15/2015 11:38 AM, tchristin wrote:
&gt;<i> Hi all,
</I>&gt;<i>
</I>&gt;<i> I'm having trouble with Squid Kerberos auth and the Squidguard
</I>&gt;<i> ldapusersearch that I use to apply ACLs by Active Directory groups
</I>&gt;<i> membership.
</I>&gt;<i>
</I>&gt;<i> The problem is :
</I>&gt;<i>
</I>&gt;<i> - Squid and Squidguard see my user as : '<A HREF="https://lists.squid-cache.org/listinfo/squid-users">user at domain.local</A>' so the '%s'
</I>&gt;<i> variable of squidguard is '<A HREF="https://lists.squid-cache.org/listinfo/squid-users">user at domain.local</A>'.
</I>&gt;<i> - In my ldap query there is no default property that can interpret this
</I>&gt;<i> string.
</I>&gt;<i>
</I>&gt;<i> So I would like to strip/hide the realm of the username to let the LDAP
</I>&gt;<i> query work with the sAMAccountName attribute.
</I>&gt;<i>
</I>&gt;<i> How can I proceed to have %s = user and not %s = <A HREF="https://lists.squid-cache.org/listinfo/squid-users">user at domain.local</A> ?
</I>
If you replace squidGuard by ufdbGuard, ufdbGuard does it for you if you set the option
    strip-domain-from-username on

Note that ufdbGuard is not 100% compatible with squidGuard and you need to read section 9.3
of the Reference Manual of ufdbGuard to configure ufdbGuard correctly.

Marcus

&gt;<i> I precise that the UPN is equal to the mail adress so it's not usable.
</I>&gt;<i>
</I>&gt;<i> I'm using version 3.1.20 of Squid Cache and version 1.5 (debian package of
</I>&gt;<i> squidGuard).
</I>&gt;<i>
</I>&gt;<i> Thanks for your help !
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="003109.html">[squid-users] Integrate Squid Kerberos auth and Squidguard	ldapusersearch into AD
</A></li>
	<LI>Next message (by thread): <A HREF="003128.html">[squid-users] Integrate Squid Kerberos auth and Squidguard ldapusersearch into AD
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3110">[ date ]</a>
              <a href="thread.html#3110">[ thread ]</a>
              <a href="subject.html#3110">[ subject ]</a>
              <a href="author.html#3110">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
