<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Failover in Squid 3.1.10
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Failover%20in%20Squid%203.1.10&In-Reply-To=%3C553DA549.2030702%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003281.html">
   <LINK REL="Next"  HREF="003284.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Failover in Squid 3.1.10</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Failover%20in%20Squid%203.1.10&In-Reply-To=%3C553DA549.2030702%40treenet.co.nz%3E"
       TITLE="[squid-users] Failover in Squid 3.1.10">squid3 at treenet.co.nz
       </A><BR>
    <I>Mon Apr 27 02:56:09 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="003281.html">[squid-users] Failover in Squid 3.1.10
</A></li>
        <LI>Next message (by thread): <A HREF="003284.html">[squid-users] Bls:  Failover in Squid 3.1.10
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3282">[ date ]</a>
              <a href="thread.html#3282">[ thread ]</a>
              <a href="subject.html#3282">[ subject ]</a>
              <a href="author.html#3282">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 27/04/2015 2:36 p.m., Hierony Manurung wrote:
&gt;<i> Dear Fellow,
</I>&gt;<i> I want to implement Failover in My system, I have 3 Squid proxy servers right now. they are :
</I>&gt;<i> 
</I>&gt;<i> - Child (172.30.20.200/16)         # receive request, and forward it either to Parent1 or Parent2
</I>&gt;<i> - Parent1 (172.31.20.201/16)
</I>&gt;<i> - Parent2 (172.31.20.204/16)
</I>&gt;<i> 
</I>&gt;<i> I use Mikrotik to connect all the servers, and they have been connected and they can work together (distributed caching). For the caching algorithm, I use round-robin algorithm. 
</I>&gt;<i> How can i implement Failover in my system?, so that when Child proxy is down/crash the request move to another Parent proxy.
</I>
You can't with this setup. The Child proxy is a bottleneck and the
failover copes with either of the Parents being down but not the Child.

If you are going to have a failover from Child to Parent, then you may
as well have all three proxies operating in a &quot;flat&quot;/horizontal design
as siblings all independently able to connect upstream.

The failover logics in that design is configured into the Mikrotik
somehow (I dont know how exectly though sorry). Or in a PAC file given
to the clients.


The design you have with a single router acting as hub for clients and
three proxies in a 2-tier design sounds like you have traffic travelling
over the same router 2-3 times on its way to the Internet (and same for
the responses). That will be cutting your available router bandwidth by
as much as 60%. You can probably double your bandwidth by using two
routers and two NICs on each proxy - without changing the uplinks
themselves.
Like so:
  clients-&gt; router1 (load balancing)-&gt;proxies-&gt;router2-&gt;Internet

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="003281.html">[squid-users] Failover in Squid 3.1.10
</A></li>
	<LI>Next message (by thread): <A HREF="003284.html">[squid-users] Bls:  Failover in Squid 3.1.10
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3282">[ date ]</a>
              <a href="thread.html#3282">[ thread ]</a>
              <a href="subject.html#3282">[ subject ]</a>
              <a href="author.html#3282">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
