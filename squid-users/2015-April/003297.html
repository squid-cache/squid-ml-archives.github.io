<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid logs not rotating
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20logs%20not%20rotating&In-Reply-To=%3C81D4BEDF5F61664A9ADB2FF8E4AA61BD24C340EC%40EXCH-MBX-PRD-T3.usq.edu.au%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003162.html">
   <LINK REL="Next"  HREF="003141.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid logs not rotating</H1>
    <B>Gary Woodman</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20logs%20not%20rotating&In-Reply-To=%3C81D4BEDF5F61664A9ADB2FF8E4AA61BD24C340EC%40EXCH-MBX-PRD-T3.usq.edu.au%3E"
       TITLE="[squid-users] squid logs not rotating">Gary.Woodman at usq.edu.au
       </A><BR>
    <I>Tue Apr 28 03:21:28 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="003162.html">[squid-users] squid logs not rotating
</A></li>
        <LI>Next message (by thread): <A HREF="003141.html">[squid-users] with nginx
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3297">[ date ]</a>
              <a href="thread.html#3297">[ thread ]</a>
              <a href="subject.html#3297">[ subject ]</a>
              <a href="author.html#3297">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> Date: Mon, 20 Apr 2015 01:07:44 +1200
</I>&gt;<i> From: Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;
</I>&gt;<i> To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> Subject: Re: [squid-users] squid logs not rotating
</I>&gt;<i> Message-ID: &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">5533A8A0.4090507 at treenet.co.nz</A>&gt;
</I>&gt;<i>Content-Type: text/plain; charset=utf-8
</I>
&gt;&gt;<i> the time there will not be 30 days worth of data in the logs like on T1.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Other logs such as cache.log and store.log suffer equally the same buildup and wipe.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Does anyone have any suggestions? How might we go about debugging this situation?
</I>&gt;<i>
</I>&gt;<i> I'd almost guarantee you the log rotation script is different on the two servers.
</I>&gt;<i>
</I>&gt;<i> Most systems use the OS provided log rotation service, which does the rotate atomically then
</I>&gt;<i> runs squid -k rotate. squid.conf has &quot;logfile_rotate 0&quot; to prevent Squid touching the OS rotation
</I>&gt;<i>  numbering.
</I>&gt;<i>
</I>&gt;<i> What you describe is classic symptoms of the OS rotating logs, but only doing the &quot;squid -k 
</I>&gt;<i> rotate&quot; action once every month.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> HTH
</I>&gt;<i> Amos
</I>
You are absolutely correct. I had moved the default squid config out of /etc/logrotate.d on both of these servers, but somehow, it had crept back on T2.

However, removing it has not affected the behaviour described previously.

I have bowed to the inevitable and followed your advice, to let the OS handle the rotation (with logfile_rotate set to zero), including the following in /etc/logrotate.d/squid:
    daily
    rotate 30


Regards
Gary


_____________________________________________________________
This email (including any attached files) is confidential and is for the intended recipient(s) only. If you received this email by mistake, please, as a courtesy, tell the sender, then delete this email.

The views and opinions are the originator's and do not necessarily reflect those of the University of Southern Queensland. Although all reasonable precautions were taken to ensure that this email contained no viruses at the time it was sent we accept no liability for any losses arising from its receipt.

The University of Southern Queensland is a registered provider of education with the Australian Government.
(CRICOS Institution Code QLD 00244B / NSW 02225M, TEQSA PRV12081 )

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="003162.html">[squid-users] squid logs not rotating
</A></li>
	<LI>Next message (by thread): <A HREF="003141.html">[squid-users] with nginx
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3297">[ date ]</a>
              <a href="thread.html#3297">[ thread ]</a>
              <a href="subject.html#3297">[ subject ]</a>
              <a href="author.html#3297">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
