<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] I want to display indirect_client_address on error page.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20I%20want%20to%20display%20indirect_client_address%20on%0A%20error%20page.&In-Reply-To=%3C55C2AC6B.4030401%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004919.html">
   <LINK REL="Next"  HREF="004927.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] I want to display indirect_client_address on error page.</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20I%20want%20to%20display%20indirect_client_address%20on%0A%20error%20page.&In-Reply-To=%3C55C2AC6B.4030401%40treenet.co.nz%3E"
       TITLE="[squid-users] I want to display indirect_client_address on error page.">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Aug  6 00:38:03 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="004919.html">[squid-users] I want to display indirect_client_address on error	page.
</A></li>
        <LI>Next message (by thread): <A HREF="004927.html">[squid-users] I want to display indirect_client_address on error page.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4925">[ date ]</a>
              <a href="thread.html#4925">[ thread ]</a>
              <a href="subject.html#4925">[ subject ]</a>
              <a href="author.html#4925">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 5/08/2015 7:16 p.m., Kazuhiro Asakura wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> I have a simple question about squid-3 &quot;follow-x-forwarded-for&quot; feature.
</I>&gt;<i> 
</I>&gt;<i> I use &quot;follow-x-forwarded-for&quot; feature, and logged end point IP address.
</I>&gt;<i> Also, I created customized error page for end user. but, env %i of
</I>&gt;<i> error page does not be translate to end point IP address.
</I>
More correctly it is the direct endpoint of the client TCP connection.
Not the chain of multiple TCP connections, which may include NAT or
other protocol translations between Squid and a user.

&gt;<i> 
</I>&gt;<i> I want to display the address of end point to error page.
</I>&gt;<i> If someone could suggest solution, I would really appreciate it.
</I>

The easiest approach I think would be to add a javascript snippet in
place of the %i code that locates the users IP address and displays it
to them.

This (2) is actually a lot more privacy-friendly for end users. Since
you/Squid dont have to go digging into information about the internal
network structure of their ISP just to display it.


The requirement that Squid error pages be static HTML only applies to
how they are generated as responses at the server (Squid) end. The page
itself can reference external resources, or contains scripts the client
(browser) end runs.


&gt;<i> 
</I>&gt;<i> Sorry my poor English.
</I>
Not a problem. Quite good compared to some.

HTH
Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="004919.html">[squid-users] I want to display indirect_client_address on error	page.
</A></li>
	<LI>Next message (by thread): <A HREF="004927.html">[squid-users] I want to display indirect_client_address on error page.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4925">[ date ]</a>
              <a href="thread.html#4925">[ thread ]</a>
              <a href="subject.html#4925">[ subject ]</a>
              <a href="author.html#4925">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
