<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] websocket connection fails
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20websocket%20connection%20fails&In-Reply-To=%3C55C9E089.2060709%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004960.html">
   <LINK REL="Next"  HREF="004962.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] websocket connection fails</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20websocket%20connection%20fails&In-Reply-To=%3C55C9E089.2060709%40treenet.co.nz%3E"
       TITLE="[squid-users] websocket connection fails">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Aug 11 11:46:17 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="004960.html">[squid-users] websocket connection fails
</A></li>
        <LI>Next message (by thread): <A HREF="004962.html">[squid-users] FATAL: Could not create a DNS socket in squid 3.5.3	stable
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4961">[ date ]</a>
              <a href="thread.html#4961">[ thread ]</a>
              <a href="subject.html#4961">[ subject ]</a>
              <a href="author.html#4961">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/08/2015 10:07 p.m., Jan Niggemann wrote:
&gt;<i> 
</I>&gt;<i> Hi list,
</I>&gt;<i> 
</I>&gt;<i> first of all: Excuse me if this has been brought up before, but the link
</I>&gt;<i> to the search function on page
</I>&gt;<i> <A HREF="http://www.squid-cache.org/Support/mailing-lists.html#squid-users">http://www.squid-cache.org/Support/mailing-lists.html#squid-users</A>
</I>&gt;<i> returns a 404.
</I>&gt;<i> 
</I>&gt;<i> Our company introduced a new proxy solution (called Artica).
</I>&gt;<i> <A HREF="http://www.lagado.com/proxy-test">http://www.lagado.com/proxy-test</A> shows that
</I>&gt;<i> &quot;squid/3.5.7-20150801-r13880&quot; is used.
</I>&gt;<i> 
</I>&gt;<i> My problem is that chromium 44 on Win7/64 can't establish a
</I>&gt;<i> wss-connection, probably due to incorrect server response headers. I
</I>&gt;<i> know for sure that stackoverflow.com handles websockets correctly, but
</I>&gt;<i> the server response headers lack 'Connection: Upgrade' and show
</I>&gt;<i> 'Connection: keep-alive&quot; instead. A screenshot and debug log is
</I>&gt;<i> available in my question on SO:
</I>&gt;<i> <A HREF="http://stackoverflow.com/questions/31935536/make-chromium-use-connect-for-websockets">http://stackoverflow.com/questions/31935536/make-chromium-use-connect-for-websockets</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Is there a squid setting that I need to tell our administrators about,
</I>&gt;<i> so websocket connections will work?
</I>
Squid simply does not support HTTP Upgrade yet. To anything.

Chromium is requesting a GET with _optional_ Upgrade to WebSockets, OR a
fallback of HTTP/1.1.

Since Squid does not Upgrade the HTTP/1.1 fallback is used. The response
headers are correctly signalling that HTTP was used instead of WebSockets.

There is nothing we can do if the client software actively offers to
accept a fallback that it does not support.


Chromium (or anything) should still be able to use HTTP CONNECT tunnels
to perform WebSockets through Squid. Maybe it just needs to be aware of
the proxies existence (non-MITM).

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="004960.html">[squid-users] websocket connection fails
</A></li>
	<LI>Next message (by thread): <A HREF="004962.html">[squid-users] FATAL: Could not create a DNS socket in squid 3.5.3	stable
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4961">[ date ]</a>
              <a href="thread.html#4961">[ thread ]</a>
              <a href="subject.html#4961">[ subject ]</a>
              <a href="author.html#4961">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
