<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] peek and splice content inspection question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20peek%20and%20splice%20content%20inspection%20question&In-Reply-To=%3CCANLNtGS2wyieNzLV_n43fbaSka%3Dq9HD-5WcbicOMXtJN1R-xhQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005016.html">
   <LINK REL="Next"  HREF="005018.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] peek and splice content inspection question</H1>
    <B>Stanford Prescott</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20peek%20and%20splice%20content%20inspection%20question&In-Reply-To=%3CCANLNtGS2wyieNzLV_n43fbaSka%3Dq9HD-5WcbicOMXtJN1R-xhQ%40mail.gmail.com%3E"
       TITLE="[squid-users] peek and splice content inspection question">stan.prescott at gmail.com
       </A><BR>
    <I>Sun Aug 16 14:27:03 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005016.html">[squid-users] peek and splice content inspection question
</A></li>
        <LI>Next message (by thread): <A HREF="005018.html">[squid-users] peek and splice content inspection question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5017">[ date ]</a>
              <a href="thread.html#5017">[ thread ]</a>
              <a href="subject.html#5017">[ subject ]</a>
              <a href="author.html#5017">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have SquidClamAV implemented with the Smoothwall Express 3.1 firewall. It
works well and fast with ssl-bump, although the majority of our users only
have relatively small networks with smaller loads.

FYI, E2Guardian has replaced the DansGuardian project and is currently well
maintained. E2Guardian can do content filtering for SSL but only in
explicit mode, It currently does not support intercept (transparent) mode
for SSLBump.

On Fri, Aug 14, 2015 at 10:51 AM, Alex Rousskov &lt;
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt; wrote:

&gt;<i> On 08/13/2015 10:31 PM, Amos Jeffries wrote:
</I>&gt;<i> &gt; AFAICS it
</I>&gt;<i> &gt; is the backend AV library only scanning disk objects that causes the
</I>&gt;<i> &gt; whole issue. Otherwise the eCAP could be much, much faster.
</I>&gt;<i>
</I>&gt;<i> The situation is more nuanced: eCAP supports asynchronous adapters. It
</I>&gt;<i> is possible to write a ClamAV adapter that writes messages to disk and
</I>&gt;<i> analyses them without blocking Squid. Doing so should eliminate most
</I>&gt;<i> overheads between Squid and ClamAV.
</I>&gt;<i>
</I>&gt;<i> Factory ClamAV adapter can run in asynchronous mode, but threads are
</I>&gt;<i> only used for _analysis_ of written files. We have not optimized the
</I>&gt;<i> file writing part (yet?). Hopefully, using a RAM-based file system can
</I>&gt;<i> mitigate a large part of that performance damage (as well as address
</I>&gt;<i> some of the security concerns related to disk storage?).
</I>&gt;<i>
</I>&gt;<i> A bigger performance problem, AFAICT, is that ClamAV does not support
</I>&gt;<i> incremental analysis. It waits for the entire file to be downloaded
</I>&gt;<i> first. This breaks the message delivery pipeline and increases
</I>&gt;<i> user-perceived response time. This problem cannot be solved outside the
</I>&gt;<i> ClamAV library.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i>
</I>&gt;<i> Alex.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150816/4d6c035c/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150816/4d6c035c/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005016.html">[squid-users] peek and splice content inspection question
</A></li>
	<LI>Next message (by thread): <A HREF="005018.html">[squid-users] peek and splice content inspection question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5017">[ date ]</a>
              <a href="thread.html#5017">[ thread ]</a>
              <a href="subject.html#5017">[ subject ]</a>
              <a href="author.html#5017">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
