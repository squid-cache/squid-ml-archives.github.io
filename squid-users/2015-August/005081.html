<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] can't get bump to work anymore on 3.5.7?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20can%27t%20get%20bump%20to%20work%20anymore%20on%203.5.7%3F&In-Reply-To=%3C55D4A286.4060603%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005073.html">
   <LINK REL="Next"  HREF="005089.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] can't get bump to work anymore on 3.5.7?</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20can%27t%20get%20bump%20to%20work%20anymore%20on%203.5.7%3F&In-Reply-To=%3C55D4A286.4060603%40measurement-factory.com%3E"
       TITLE="[squid-users] can't get bump to work anymore on 3.5.7?">rousskov at measurement-factory.com
       </A><BR>
    <I>Wed Aug 19 15:36:38 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005073.html">[squid-users] can't get bump to work anymore on 3.5.7?
</A></li>
        <LI>Next message (by thread): <A HREF="005089.html">[squid-users] can't get bump to work anymore on 3.5.7?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5081">[ date ]</a>
              <a href="thread.html#5081">[ thread ]</a>
              <a href="subject.html#5081">[ subject ]</a>
              <a href="author.html#5081">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 08/19/2015 04:09 AM, Jason Haar wrote:

&gt;<i> So is there no way to get the SNI field from the client without breaking
</I>&gt;<i> the opportunity for bump?
</I>
SNI is obtained during step #1. Peeking during step #1 does _not_
preclude future bumping.

If you want to get SNI and bump, then peek at step #1 and bump at the
next step (i.e., step #2):

  acl step1 at_step SslBump1
  ssl_bump peek step1
  ssl_bump bump !bank


Please note that doing so will give you no knowledge about the SSL
server point of view. All your decisions will be based on what the
client has told you. This is often not a problem because, in most cases,
if the client lied, the [bumped or spliced] connection to the SSL server
will not work anyway. However, if the client supplied no SNI
information, then your &quot;bank&quot; ACL (or equivalent) may not have enough
information to go on, especially for intercepted connections.

If you also peek at step #2, you will know the server certificate, but
you will no longer be able to bump the connection in most cases.


HTH,

Alex.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005073.html">[squid-users] can't get bump to work anymore on 3.5.7?
</A></li>
	<LI>Next message (by thread): <A HREF="005089.html">[squid-users] can't get bump to work anymore on 3.5.7?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5081">[ date ]</a>
              <a href="thread.html#5081">[ thread ]</a>
              <a href="subject.html#5081">[ subject ]</a>
              <a href="author.html#5081">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
