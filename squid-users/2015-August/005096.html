<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Has anyone a working config for windows	update	through squid?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Has%20anyone%20a%20working%20config%20for%20windows%0A%09update%09through%20squid%3F&In-Reply-To=%3CSG2PR04MB0839B80E20EE47E48E737C30E8660%40SG2PR04MB0839.apcprd04.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005095.html">
   <LINK REL="Next"  HREF="005097.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Has anyone a working config for windows	update	through squid?</H1>
    <B>James Harper</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Has%20anyone%20a%20working%20config%20for%20windows%0A%09update%09through%20squid%3F&In-Reply-To=%3CSG2PR04MB0839B80E20EE47E48E737C30E8660%40SG2PR04MB0839.apcprd04.prod.outlook.com%3E"
       TITLE="[squid-users] Has anyone a working config for windows	update	through squid?">james at ejbdigital.com.au
       </A><BR>
    <I>Thu Aug 20 11:58:37 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005095.html">[squid-users] Has anyone a working config for windows update through squid?
</A></li>
        <LI>Next message (by thread): <A HREF="005097.html">[squid-users] Has anyone a working config for windows update through squid?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5096">[ date ]</a>
              <a href="thread.html#5096">[ thread ]</a>
              <a href="subject.html#5096">[ subject ]</a>
              <a href="author.html#5096">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> 
</I>&gt;<i> We run squid 3.5.6 in a proxy server with FreeBSD 9.3.
</I>&gt;<i> Squid is the only way out, there is no transparency at all.
</I>&gt;<i> We have problems with windows update through squid.
</I>&gt;<i> 
</I>
Problems without doing anything with Squid, or problems trying to get Squid to actually cache windows updates?

At home I divert all my updates through apt-cacher, which seems to work well.

The things I had to do were:
. write the rewriter
. add some rules to divert the required requests into the rewriter (and then not divert apt-cacher requests)
. modify apt-cacher to cache cab, exe, and psf files in the right way

I seem to get an appropriate number of hits. apt-cacher handles the partial file requests without problems. The only problem I can see is I don't think apt-cacher knows how to clean up the windows update related files, so it will either be expiring files when it thinks they are old enough, expiring them instantly, or not expiring them all. Right now I have files dating back to 31/01/2015, so I suspect probably the latter (clean cache option is off)

The apt-cacher report says I'm getting a 85% hit rate (by GB - 63% by request).

James

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005095.html">[squid-users] Has anyone a working config for windows update through squid?
</A></li>
	<LI>Next message (by thread): <A HREF="005097.html">[squid-users] Has anyone a working config for windows update through squid?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5096">[ date ]</a>
              <a href="thread.html#5096">[ thread ]</a>
              <a href="subject.html#5096">[ subject ]</a>
              <a href="author.html#5096">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
