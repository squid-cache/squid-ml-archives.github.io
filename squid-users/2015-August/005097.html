<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Has anyone a working config for windows update through squid?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Has%20anyone%20a%20working%20config%20for%20windows%20update%0A%20through%20squid%3F&In-Reply-To=%3C20150820130515.GR18051%40pol-server.leissner.se%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005096.html">
   <LINK REL="Next"  HREF="005099.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Has anyone a working config for windows update through squid?</H1>
    <B>Peter</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Has%20anyone%20a%20working%20config%20for%20windows%20update%0A%20through%20squid%3F&In-Reply-To=%3C20150820130515.GR18051%40pol-server.leissner.se%3E"
       TITLE="[squid-users] Has anyone a working config for windows update through squid?">list-squid-users at jyborn.se
       </A><BR>
    <I>Thu Aug 20 13:05:15 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005096.html">[squid-users] Has anyone a working config for windows	update	through squid?
</A></li>
        <LI>Next message (by thread): <A HREF="005099.html">[squid-users] refresh_pattern and same objects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5097">[ date ]</a>
              <a href="thread.html#5097">[ thread ]</a>
              <a href="subject.html#5097">[ subject ]</a>
              <a href="author.html#5097">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Aug 20, 2015 at 11:58:37AM +0000, James Harper wrote:
&gt;<i> &gt; 
</I>&gt;<i> &gt; We run squid 3.5.6 in a proxy server with FreeBSD 9.3.
</I>&gt;<i> &gt; Squid is the only way out, there is no transparency at all.
</I>&gt;<i> &gt; We have problems with windows update through squid.
</I>&gt;<i> &gt; 
</I>&gt;<i> 
</I>&gt;<i> Problems without doing anything with Squid, or problems trying to get Squid to actually cache windows updates?
</I>
Our main problem is getting windows update working through
squid at all, without ending in &quot;fail&quot; on the internal PC:s.
Caching of windows update files would be an added bonus, but
it's not a critical requirement for us. It's just that the
squid server is the only way out for the internal clients,
so all their web traffic must pass through squid, caching
or not.

At the moment it seems that windows update is working for us.
We will check again in about a week and see if the failures
have disappeared.

Thanks!

Peter
 
&gt;<i> At home I divert all my updates through apt-cacher, which seems to work well.
</I>&gt;<i> 
</I>&gt;<i> The things I had to do were:
</I>&gt;<i> . write the rewriter
</I>&gt;<i> . add some rules to divert the required requests into the rewriter (and then not divert apt-cacher requests)
</I>&gt;<i> . modify apt-cacher to cache cab, exe, and psf files in the right way
</I>&gt;<i> 
</I>&gt;<i> I seem to get an appropriate number of hits. apt-cacher handles the partial file requests without problems. The only problem I can see is I don't think apt-cacher knows how to clean up the windows update related files, so it will either be expiring files when it thinks they are old enough, expiring them instantly, or not expiring them all. Right now I have files dating back to 31/01/2015, so I suspect probably the latter (clean cache option is off)
</I>&gt;<i> 
</I>&gt;<i> The apt-cacher report says I'm getting a 85% hit rate (by GB - 63% by request).
</I>&gt;<i> 
</I>&gt;<i> James
</I>&gt;<i> 
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005096.html">[squid-users] Has anyone a working config for windows	update	through squid?
</A></li>
	<LI>Next message (by thread): <A HREF="005099.html">[squid-users] refresh_pattern and same objects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5097">[ date ]</a>
              <a href="thread.html#5097">[ thread ]</a>
              <a href="subject.html#5097">[ subject ]</a>
              <a href="author.html#5097">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
