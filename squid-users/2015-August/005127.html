<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] ETA for Bug 3775
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20ETA%20for%20Bug%203775&In-Reply-To=%3C009801d0dc91%24268b81f0%2473a285d0%24%40smoothnet.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005104.html">
   <LINK REL="Next"  HREF="005106.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] ETA for Bug 3775</H1>
    <B>Nicolaas Hyatt</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20ETA%20for%20Bug%203775&In-Reply-To=%3C009801d0dc91%24268b81f0%2473a285d0%24%40smoothnet.org%3E"
       TITLE="[squid-users] ETA for Bug 3775">spider at smoothnet.org
       </A><BR>
    <I>Sat Aug 22 04:15:16 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005104.html">[squid-users] ETA for Bug 3775
</A></li>
        <LI>Next message (by thread): <A HREF="005106.html">[squid-users] ssl_bump updates coming in 3.5.8
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5127">[ date ]</a>
              <a href="thread.html#5127">[ thread ]</a>
              <a href="subject.html#5127">[ subject ]</a>
              <a href="author.html#5127">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Squid v3.5.7-20150821-r13895

Backtrace:
Program received signal SIGSEGV, Segmentation fault.
DiskdFile::writeDone (this=&lt;optimized out&gt;, M=0x7fffffffe140) at DiskIO/DiskDaemon/DiskdFile.cc:389
389         ioRequestor-&gt;writeCompleted (DISK_OK,M-&gt;status, writeRequest);
Missing separate debuginfos, use: debuginfo-install glibc-2.17-78.el7.x86_64 keyutils-libs-1.5.8-3.el7.x86_64 krb5-libs-1.12.2-14.el7.x86_64 libattr-2.4.46-12.el7.x86_64 libcap-2.22-8.el7.x86_64 libcom_err-1.42.9-7.el7.x86_64 libgcc-4.8.3-9.el7.x86_64 libselinux-2.2.2-6.el7.x86_64 libstdc++-4.8.3-9.el7.x86_64 nss-softokn-freebl-3.16.2.3-9.el7.x86_64 openssl-libs-1.0.1e-42.el7.9.x86_64 pcre-8.32-14.el7.x86_64 sssd-client-1.12.2-58.el7_1.6.x86_64 xz-libs-5.1.2-9alpha.el7.x86_64 zlib-1.2.7-13.el7.x86_64
 (gdb) backtrace
#0  DiskdFile::writeDone (this=&lt;optimized out&gt;, M=0x7fffffffe140) at DiskIO/DiskDaemon/DiskdFile.cc:389
#1  0x000000000070a0e4 in DiskdIOStrategy::handle (this=<A HREF="https://lists.squid-cache.org/listinfo/squid-users">this at entry</A>=0x1748950, M=<A HREF="https://lists.squid-cache.org/listinfo/squid-users">M at entry</A>=0x7fffffffe140) at DiskIO/DiskDaemon/DiskdIOStrategy.cc:303
#2  0x000000000070a1c5 in DiskdIOStrategy::callback (this=0x1748950) at DiskIO/DiskDaemon/DiskdIOStrategy.cc:556
#3  0x0000000000676a56 in StoreHashIndex::callback (this=&lt;optimized out&gt;) at store_dir.cc:1036
#4  0x0000000000616016 in StoreRootEngine::checkEvents (this=&lt;optimized out&gt;, timeout=&lt;optimized out&gt;) at main.cc:189
#5  0x00000000005a69bf in EventLoop::checkEngine (this=<A HREF="https://lists.squid-cache.org/listinfo/squid-users">this at entry</A>=0x7fffffffe350, engine=0x7fffffffe2d0, primary=<A HREF="https://lists.squid-cache.org/listinfo/squid-users">primary at entry</A>=false) at EventLoop.cc:33
#6  0x00000000005a6be2 in EventLoop::runOnce (this=<A HREF="https://lists.squid-cache.org/listinfo/squid-users">this at entry</A>=0x7fffffffe350) at EventLoop.cc:104
#7  0x00000000005a6e30 in EventLoop::run (this=<A HREF="https://lists.squid-cache.org/listinfo/squid-users">this at entry</A>=0x7fffffffe350) at EventLoop.cc:82
#8  0x000000000061487a in SquidMain (argc=&lt;optimized out&gt;, argv=&lt;optimized out&gt;) at main.cc:1533
#9  0x000000000050533d in SquidMainSafe (argv=&lt;optimized out&gt;, argc=&lt;optimized out&gt;) at main.cc:1258
#10 main (argc=&lt;optimized out&gt;, argv=&lt;optimized out&gt;) at main.cc:1251

If you want me to continue with more backtraces let me know. Also I can provide any configuration should you need them.


-----Original Message-----
From: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On Behalf Of Amos Jeffries
Sent: Thursday, August 20, 2015 11:05 PM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] ETA for Bug 3775

On 21/08/2015 1:14 p.m., Nicolaas Hyatt wrote:
&gt;<i> Hey guys,
</I>&gt;<i> 
</I>&gt;<i> I have been paying close attention to the list for a while and am just 
</I>&gt;<i> beginning to realize the scale of things the squid team has in front 
</I>&gt;<i> of them. So please understand that I'm _NOT_ begging here. I 
</I>&gt;<i> understand other priority issues take precedence, and my little issue 
</I>&gt;<i> is way on down the line. I was wondering if there was some sort of 
</I>&gt;<i> schedule as to when this may be examined in case I need to provide any more dumps.
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://bugs.squid-cache.org/show_bug.cgi?id=3775">http://bugs.squid-cache.org/show_bug.cgi?id=3775</A>
</I>&gt;<i> 
</I>
Unknown again I'm afraid. That latest feedback was a painfully disappointing result from a very hopeful looking approach.

If you have a dump that provides any new backtrace sequence to what we have already they may be useful.

So far it all still seems to link back to a DeferredReader pausing a transaction read, then something else playing around with its I/O socket/FD/connection, then defer resumes and boom. But there is potentially some minutes of delay between those actions.

PS. you may want to help with the testing of todays snapshot when its ready, it contains some patches to HTTPS and FTP connection handling that may have an impact on this bug (or not, grasping at straws here).

Amos

_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005104.html">[squid-users] ETA for Bug 3775
</A></li>
	<LI>Next message (by thread): <A HREF="005106.html">[squid-users] ssl_bump updates coming in 3.5.8
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5127">[ date ]</a>
              <a href="thread.html#5127">[ thread ]</a>
              <a href="subject.html#5127">[ subject ]</a>
              <a href="author.html#5127">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
