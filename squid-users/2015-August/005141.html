<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] How to limit upload bandwidth in squid proxy?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20limit%20upload%20bandwidth%20in%20squid%20proxy%3F&In-Reply-To=%3C55DAC5CC.9050706%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005139.html">
   <LINK REL="Next"  HREF="005235.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] How to limit upload bandwidth in squid proxy?</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20limit%20upload%20bandwidth%20in%20squid%20proxy%3F&In-Reply-To=%3C55DAC5CC.9050706%40treenet.co.nz%3E"
       TITLE="[squid-users] How to limit upload bandwidth in squid proxy?">squid3 at treenet.co.nz
       </A><BR>
    <I>Mon Aug 24 07:20:44 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005139.html">[squid-users] How to limit upload bandwidth in squid proxy?
</A></li>
        <LI>Next message (by thread): <A HREF="005235.html">[squid-users] How to limit upload bandwidth in squid proxy?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5141">[ date ]</a>
              <a href="thread.html#5141">[ thread ]</a>
              <a href="subject.html#5141">[ subject ]</a>
              <a href="author.html#5141">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 24/08/2015 1:03 p.m., Brandon Elliott wrote:
&gt;<i> Hi Nicolaas,
</I>&gt;<i> 
</I>&gt;<i> I read the article you pointed to, but it isn't applicable. I need to be
</I>&gt;<i> able to limit upload bandwidth PER USER just like squid does for download
</I>&gt;<i> bandwidth, per user.
</I>&gt;<i> 
</I>&gt;<i> QUOTE &gt;&gt; I don&#8217;t really know if squid supports this or not, but I can&#8217;t
</I>&gt;<i> imagine why it would need to, with traffic control built into the linux
</I>&gt;<i> kernel in a number of ways.
</I>&gt;<i> 
</I>&gt;<i> Somebody saw fit to put download bandwidth limiting into squid, so it makes
</I>&gt;<i> sense to support upload bandwidth limiting as well.
</I>
Squid is *very* old software. Some of its features were literally part
of the founding days of the Internet.

Delay Pools is one that predates all modern QoS functionality. And is
quite limited in ways like the one you are hitting. If you can use the
system QoS do so, it is far more efficient.

&gt;<i> 
</I>&gt;<i> I am already using ncsa_auth to manage squid users. I need a solution that
</I>&gt;<i> doesn't involve using a second authentication just to limit upload
</I>&gt;<i> bandwidth per user.
</I>&gt;<i> 
</I>&gt;<i> Any ideas?
</I>

client_delay_pools was added to meet this need. But be aware there is a
crash in there somewhere that has not been resolved.


Alternatively, Squid does have integration with the system QoS. The note
ACL type allows these to be set based on auth helper provided kv-pair
details; eg. user=Fred vs user=Bob.

You setup the system with all the QoS funtionality and Squid informs the
kernel what TOS/MASK classification to apply on the connection packets.
 &lt;<A HREF="http://www.squid-cache.org/Doc/config/clientside_tos/">http://www.squid-cache.org/Doc/config/clientside_tos/</A>&gt;
 &lt;<A HREF="http://www.squid-cache.org/Doc/config/clientside_mark/">http://www.squid-cache.org/Doc/config/clientside_mark/</A>&gt;

With client side there will always be inaccuracy on that auth based flow
control because the transaction is already underway by the time auth
gets invoked.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005139.html">[squid-users] How to limit upload bandwidth in squid proxy?
</A></li>
	<LI>Next message (by thread): <A HREF="005235.html">[squid-users] How to limit upload bandwidth in squid proxy?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5141">[ date ]</a>
              <a href="thread.html#5141">[ thread ]</a>
              <a href="subject.html#5141">[ subject ]</a>
              <a href="author.html#5141">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
