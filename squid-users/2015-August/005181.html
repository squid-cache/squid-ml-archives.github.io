<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] caching question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20caching%20question&In-Reply-To=%3C55DD4EE6.8000103%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005175.html">
   <LINK REL="Next"  HREF="005176.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] caching question</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20caching%20question&In-Reply-To=%3C55DD4EE6.8000103%40treenet.co.nz%3E"
       TITLE="[squid-users] caching question">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Aug 26 05:30:14 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005175.html">[squid-users] caching question
</A></li>
        <LI>Next message (by thread): <A HREF="005176.html">[squid-users] Client &lt;-&gt; Squid &lt;-&gt; WebServer packet flow
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5181">[ date ]</a>
              <a href="thread.html#5181">[ thread ]</a>
              <a href="subject.html#5181">[ subject ]</a>
              <a href="author.html#5181">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 26/08/2015 2:10 p.m., Alex Samad wrote:
&gt;<i> Hi
</I>&gt;<i> 
</I>&gt;<i> Sorry, answered my own question.
</I>&gt;<i> 
</I>&gt;<i> acl nonCacheURL urlpath_regex .*/x86_64/repodata/repomd.xml$
</I>&gt;<i> cache deny nonCacheURL
</I>
Almost exactly like that. Just without the &quot;.* at the start of the pattern.

All regex patterns are assumed to start and end with .* by default
unless you specify the ^ or $ start/end anchors explicitly.

&gt;<i> 
</I>&gt;<i> seems like &quot;&quot; makes it look for a file ?
</I>
Yes.


If those old files were delivered without Expires/Cache-Control headers
(or if you used override-expires on *.xml) then your refresh_pattern are
the cause of the old files being cached too long in the first place.

This pattern will prevent them being stored heuristically, but otherwise
let the repos cache controls work as designed by the repo operators.

 refresh_pattern /repodata/repomd.xml$ 0 0% 0


Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005175.html">[squid-users] caching question
</A></li>
	<LI>Next message (by thread): <A HREF="005176.html">[squid-users] Client &lt;-&gt; Squid &lt;-&gt; WebServer packet flow
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5181">[ date ]</a>
              <a href="thread.html#5181">[ thread ]</a>
              <a href="subject.html#5181">[ subject ]</a>
              <a href="author.html#5181">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
