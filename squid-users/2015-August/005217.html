<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Zero Sized Reply
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Zero%20Sized%20Reply&In-Reply-To=%3C55DF6B6E.5090207%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005216.html">
   <LINK REL="Next"  HREF="005201.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Zero Sized Reply</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Zero%20Sized%20Reply&In-Reply-To=%3C55DF6B6E.5090207%40ngtech.co.il%3E"
       TITLE="[squid-users] Zero Sized Reply">eliezer at ngtech.co.il
       </A><BR>
    <I>Thu Aug 27 19:56:30 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005216.html">[squid-users] Zero Sized Reply
</A></li>
        <LI>Next message (by thread): <A HREF="005201.html">[squid-users] High-Availability in Squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5217">[ date ]</a>
              <a href="thread.html#5217">[ thread ]</a>
              <a href="subject.html#5217">[ subject ]</a>
              <a href="author.html#5217">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Solve what exactly??
If the site is broken I think that the only solution is for the site 
admin to fix the issue...

Eliezer

On 27/08/2015 22:51, Jorgeley Junior wrote:
&gt;<i> You're the man Amos!!! You're the man!!! Thanks!!! Thanks so so much!!!
</I>&gt;<i> that's solved the problem, but I'm thinking if it solved just for this
</I>&gt;<i> domain, so can it happen again with another domains, ok? No way to solve
</I>&gt;<i> for future errors of this same type?
</I>&gt;<i>
</I>&gt;<i> 2015-08-27 16:03 GMT-03:00 Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;:
</I>&gt;<i>
</I>&gt;&gt;<i> On 28/08/2015 5:49 a.m., Jorgeley Junior wrote:
</I>&gt;&gt;&gt;<i> Amos, thank you so much for attention, but sorry, I didn't understand
</I>&gt;&gt;<i> what
</I>&gt;&gt;&gt;<i> you said.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Nevermind. The website code is broken.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have been looking into it from here using those request headers from
</I>&gt;&gt;<i> your log.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> What I see happening is that the server starts responding. Then the PHP
</I>&gt;&gt;<i> code it is running hangs for a very long time. If you wait long enough
</I>&gt;&gt;<i> it will pop out part of a page and a PHP error message about its
</I>&gt;&gt;<i> database connection script and some timeout.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The best I could get was over a minute (78 seconds) delay before
</I>&gt;&gt;<i> anything at all happened. Usually a bit longer.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I think something in your network is terminating the server connection
</I>&gt;&gt;<i> after it takes too long. NAT and high speed router systems tend to have
</I>&gt;&gt;<i> a 30 second maximum wait between TCP packets before they close the
</I>&gt;&gt;<i> connection.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Either way the website server itself is very broken.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> So, I tried to change the http for https and it showed the website and i
</I>&gt;&gt;&gt;<i> added the security exception for no trusted certificate, but I really
</I>&gt;&gt;<i> would
</I>&gt;&gt;&gt;<i> like that the squid didn't show the error.
</I>&gt;&gt;&gt;<i> Why http show de Zero Sized Reply and https no?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Different protocols and ports.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I still see the same delays, partial page and database errors when
</I>&gt;&gt;<i> connecting with HTTPS. But kept digging to see why you might be getting
</I>&gt;&gt;<i> a page...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It seems to be an IPv6 server sitting behind some form of gateway access
</I>&gt;&gt;<i> network and only pretending to be IPv4-only. When sending it a
</I>&gt;&gt;<i> X-Forwarded-For header claiming to be an IPv6-enabled browser it seems
</I>&gt;&gt;<i> to operate just fine.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> So, try adding this to your squid.conf:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   acl magicXff dstdomain .grupoatuall.com.br
</I>&gt;&gt;<i>   request_header_access X-Forwarded-For deny magicXff
</I>&gt;&gt;<i>   request_header_replace X-Forwarded-For ::1
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Amos
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005216.html">[squid-users] Zero Sized Reply
</A></li>
	<LI>Next message (by thread): <A HREF="005201.html">[squid-users] High-Availability in Squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5217">[ date ]</a>
              <a href="thread.html#5217">[ thread ]</a>
              <a href="subject.html#5217">[ subject ]</a>
              <a href="author.html#5217">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
