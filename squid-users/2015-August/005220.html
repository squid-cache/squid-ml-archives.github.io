<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] cpu high 100%
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20cpu%20high%20100%25&In-Reply-To=%3C1440714912575-4672918.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005212.html">
   <LINK REL="Next"  HREF="005246.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] cpu high 100%</H1>
    <B>joe</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20cpu%20high%20100%25&In-Reply-To=%3C1440714912575-4672918.post%40n4.nabble.com%3E"
       TITLE="[squid-users] cpu high 100%">chip_pop at hotmail.com
       </A><BR>
    <I>Thu Aug 27 22:35:12 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005212.html">[squid-users] Does anyone have a working Juniper SRX with tproxy	squid?
</A></li>
        <LI>Next message (by thread): <A HREF="005246.html">[squid-users] cpu high 100%
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5220">[ date ]</a>
              <a href="thread.html#5220">[ thread ]</a>
              <a href="subject.html#5220">[ subject ]</a>
              <a href="author.html#5220">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>hi i don't know if someone facing hi cpu after 6 or more hoer 
my server is xeon quad 2 cpu 2.2geg 
ubuntu 14 latest i never had problem with v 2.7
on normal use with peek time max cpu get up to 20% no more
then up to 40 50 %
Squid Object Cache: Version 3.5.6
Build Info: 
Service Name: squid
Start Time:     Thu, 27 Aug 2015 08:15:34 GMT
Current Time:   Thu, 27 Aug 2015 22:08:38 GMT
Connection information for squid:
        Number of clients accessing cache:      (client_db off)
        Number of HTTP requests received:       632823
        Number of ICP messages received:        0
        Number of ICP messages sent:    0
        Number of queued ICP replies:   0
        Number of HTCP messages received:       0
        Number of HTCP messages sent:   0
        Request failure ratio:   0.00
        Average HTTP requests per minute since start:   759.6
        Average ICP messages per minute since start:    0.0
        Select loop called: 27134859 times, 1.842 ms avg
Cache information for squid:
        Hits as % of all requests:      5min: 16.5%, 60min: 14.1%
        Hits as % of bytes sent:        5min: -6.1%, 60min: -52.5%
        Memory hits as % of hit requests:       5min: 42.8%, 60min: 34.1%
        Disk hits as % of hit requests: 5min: 29.4%, 60min: 42.5%
        Storage Swap size:      1005260424 KB
        Storage Swap capacity:  65.4% used, 34.6% free
        Storage Mem size:       8953296 KB
        Storage Mem capacity:   71.2% used, 28.8% free
        Mean Object Size:       131.49 KB
        Requests given to unlinkd:      0
Median Service Times (seconds)  5 min    60 min:
        HTTP Requests (All):   0.27332  0.42149
        Cache Misses:          0.32154  0.46965
        Cache Hits:            0.01469  0.02451
        Near Hits:             0.24524  0.37825
        Not-Modified Replies:  0.00000  0.00000
        DNS Lookups:           0.08717  0.07968
        ICP Queries:           0.00000  0.00000
Resource usage for squid:
        UP Time:        49984.156 seconds
        CPU Time:       6753.848 seconds
        CPU Usage:      13.51%
        CPU Usage, 5 minute avg:        60.63%
        CPU Usage, 60 minute avg:       51.62%
        Maximum Resident Size: 46576384 KB
        Page faults with physical i/o: 1
Memory accounted for:
        Total accounted:       -1789337 KB
        memPoolAlloc calls:       455
        memPoolFree calls:  223754685
File descriptor usage for squid:
        Maximum number of file descriptors:   32768
        Largest file desc currently in use:    428
        Number of file desc currently in use:  182
        Files queued for open:                   0
        Available number of file descriptors: 32586
        Reserved number of file descriptors:   100
        Store Disk files open:                   5
Internal Data Structures:
        7645004 StoreEntries
        199880 StoreEntries with MemObjects
        199854 Hot Object Cache Items
        7644926 on-disk objects

then it go up higher


Start Time:     Thu, 27 Aug 2015 08:15:34 GMT
Current Time:   Thu, 27 Aug 2015 22:27:53 GMT
Connection information for squid:
        Number of clients accessing cache:      (client_db off)
        Number of HTTP requests received:       644780
        Number of ICP messages received:        0
        Number of ICP messages sent:    0
        Number of queued ICP replies:   0
        Number of HTCP messages received:       0
        Number of HTCP messages sent:   0
        Request failure ratio:   0.00
        Average HTTP requests per minute since start:   756.5
        Average ICP messages per minute since start:    0.0
        Select loop called: 27407388 times, 1.866 ms avg
Cache information for squid:
        Hits as % of all requests:      5min: 22.6%, 60min: 16.3%
        Hits as % of bytes sent:        5min: -19.7%, 60min: -26.7%
        Memory hits as % of hit requests:       5min: 53.7%, 60min: 39.0%
        Disk hits as % of hit requests: 5min: 28.9%, 60min: 40.2%
        Storage Swap size:      1005560000 KB
        Storage Swap capacity:  65.5% used, 34.5% free
        Storage Mem size:       9147656 KB
        Storage Mem capacity:   72.7% used, 27.3% free
        Mean Object Size:       131.47 KB
        Requests given to unlinkd:      0
Median Service Times (seconds)  5 min    60 min:
        HTTP Requests (All):   0.33943  0.32154
        Cache Misses:          0.39928  0.37825
        Cache Hits:            0.03829  0.02899
        Near Hits:             0.27332  0.30459
        Not-Modified Replies:  0.00000  0.00000
        DNS Lookups:           0.09535  0.08334
        ICP Queries:           0.00000  0.00000
Resource usage for squid:
        UP Time:        51139.181 seconds
        CPU Time:       7501.588 seconds
        CPU Usage:      14.67%
        CPU Usage, 5 minute avg:        67.96%
        CPU Usage, 60 minute avg:       58.95%
        Maximum Resident Size: 47446256 KB
        Page faults with physical i/o: 1
Memory accounted for:
        Total accounted:       -1578094 KB
        memPoolAlloc calls:       455
        memPoolFree calls:  227574133
File descriptor usage for squid:
        Maximum number of file descriptors:   32768
        Largest file desc currently in use:    428
        Number of file desc currently in use:  314
        Files queued for open:                   0
        Available number of file descriptors: 32454
        Reserved number of file descriptors:   100
        Store Disk files open:                  12
Internal Data Structures:
        7648546 StoreEntries
        204499 StoreEntries with MemObjects
        204466 Hot Object Cache Items
        7648462 on-disk objects

wen it reach 100% it stay at 100% cpu  never goes down untill i restart it 
and then again the same propaganda
   PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND                                                        
 14655 proxy     20   0 11.433g 0.011t  10284 R  74.6 36.2 126:54.60 squid                                                          
    10 root      20   0       0      0      0 S   0.3  0.0   5:36.92 rcuos/1                                                        
  1949 root      20   0   24184   3392   2372 R   0.3  0.0  14:46.89 top                                                            
     1 root      20   0   33388   3572   2280 S   0.0  0.0   0:03.57 init                                                           
     2 root      20   0       0      0      0 S   0.0  0.0   0:00.11
kthreadd                                                       
     3 root      20   0       0      0      0 S   0.0  0.0   0:01.12
ksoftirqd/0                                                    
     5 root       0 -20       0      0      0 S   0.0  0.0   0:00.00
kworker/0:0H                                                   
     6 root      20   0       0      0      0 S   0.0  0.0   0:00.00
kworker/u480:0                                                 
     8 root      20   0       0      0      0 S   0.0  0.0   4:17.68
rcu_sched                                                      
     9 root      20   0       0      0      0 S   0.0  0.0   0:12.32 rcuos/0                                                        
    11 root      20   0       0      0      0 S   0.0  0.0   0:13.10 rcuos/2     
here at 74%
i stop it caus it crache somtime
even i stop  all the traf.. going to squid and squid stay ant hi cpu usage
lol
it look like internal loop by some code pls  help
no error in my logg
just  a lots of 
2015/08/28 01:24:28 kid1| DiskThreadsDiskFile::openDone: (2) No such file or
directory
2015/08/28 01:24:28 kid1| 	/mnt/sda/02/58/001C587D
2015/08/28 01:24:29 kid1| DiskThreadsDiskFile::openDone: (2) No such file or
directory
2015/08/28 01:24:29 kid1| 	/mnt/sda/02/58/001C5882
2015/08/28 01:25:18 kid1| DiskThreadsDiskFile::openDone: (2) No such file or
directory
2015/08/28 01:25:18 kid1| 	/mnt/sdc/03/AB/0003AB48

and  lots of
 WARNING: HTTP: Invalid Response: No object data received for http
that all
processor       : 7
vendor_id       : GenuineIntel
cpu family      : 6
model           : 45
model name      : Intel(R) Xeon(R) CPU E5-2407 0 @ 2.20GHz
stepping        : 7
microcode       : 0x710
cpu MHz         : 1224.265
cache size      : 10240 KB
physical id     : 1
siblings        : 4
core id         : 3
cpu cores       : 4




--
View this message in context: <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/cpu-high-100-tp4672918.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/cpu-high-100-tp4672918.html</A>
Sent from the Squid - Users mailing list archive at Nabble.com.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005212.html">[squid-users] Does anyone have a working Juniper SRX with tproxy	squid?
</A></li>
	<LI>Next message (by thread): <A HREF="005246.html">[squid-users] cpu high 100%
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5220">[ date ]</a>
              <a href="thread.html#5220">[ thread ]</a>
              <a href="subject.html#5220">[ subject ]</a>
              <a href="author.html#5220">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
