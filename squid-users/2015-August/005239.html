<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid: workers on multicore
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%3A%20workers%20on%20multicore&In-Reply-To=%3C55E0A06C.5090906%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005233.html">
   <LINK REL="Next"  HREF="005230.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid: workers on multicore</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%3A%20workers%20on%20multicore&In-Reply-To=%3C55E0A06C.5090906%40measurement-factory.com%3E"
       TITLE="[squid-users] squid: workers on multicore">rousskov at measurement-factory.com
       </A><BR>
    <I>Fri Aug 28 17:54:52 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005233.html">[squid-users] squid: workers on multicore
</A></li>
        <LI>Next message (by thread): <A HREF="005230.html">[squid-users] 16G Virtual Mem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5239">[ date ]</a>
              <a href="thread.html#5239">[ thread ]</a>
              <a href="subject.html#5239">[ subject ]</a>
              <a href="author.html#5239">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 08/28/2015 09:39 AM, Amos Jeffries wrote:
&gt;<i> On 29/08/2015 1:28 a.m., Paul Martin wrote:
</I>&gt;&gt;<i> 1) my squid is working with 4 workers (1 to 4). My processor is 8 cores but
</I>&gt;&gt;<i> only 4 cores (5 to 8) are used by squid. How make the 8 cores working
</I>&gt;&gt;<i> (cpu_affinity_map process_numbers ...)?
</I>

&gt;<i> In the way the documentation displays:
</I>&gt;<i>  &lt;<A HREF="http://www.squid-cache.org/Doc/config/cpu_affinity_map/">http://www.squid-cache.org/Doc/config/cpu_affinity_map/</A>&gt;
</I>

Squid only supports 1:1 mapping right now, so it is not possible to use
cpu_affinity_map to map 4 workers to 8 cores. Fortunately, this
limitation is a _good_ thing in most cases as discussed below.

If you have 8 virtual/hyper cores and only 4 *physical* ones (which is a
typical case for many (most?) modern CPUs), then you probably do _not_
want a single busy Squid worker to use multiple cores. In that case, you
may want to make sure Squid workers are not sharing physical cores. The
documentation that Amos pointed to will help you after you figure out
where your physical cores are.


If you are sure you want 4:8 mapping, you can still achieve it using
system tools such as taskset(1) on Linux.


HTH,

Alex.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005233.html">[squid-users] squid: workers on multicore
</A></li>
	<LI>Next message (by thread): <A HREF="005230.html">[squid-users] 16G Virtual Mem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5239">[ date ]</a>
              <a href="thread.html#5239">[ thread ]</a>
              <a href="subject.html#5239">[ subject ]</a>
              <a href="author.html#5239">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
