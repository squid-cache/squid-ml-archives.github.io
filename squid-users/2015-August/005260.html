<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Please help me , about none HTTP protocol (DPORT 80)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%3D%3Futf-8%3Fq%3FPlease_help_me_%3D2C_about_none_HTTP_protoc%3F%3D%0A%09%3D%3Futf-8%3Fq%3Fol_%3D28DPORT_80%3D29%3F%3D&In-Reply-To=%3CZw849169908966.31965%40ZB-MAIL-WAP03%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005272.html">
   <LINK REL="Next"  HREF="005267.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Please help me , about none HTTP protocol (DPORT 80)</H1>
    <B>&#36158;&#20961;</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%3D%3Futf-8%3Fq%3FPlease_help_me_%3D2C_about_none_HTTP_protoc%3F%3D%0A%09%3D%3Futf-8%3Fq%3Fol_%3D28DPORT_80%3D29%3F%3D&In-Reply-To=%3CZw849169908966.31965%40ZB-MAIL-WAP03%3E"
       TITLE="[squid-users] Please help me , about none HTTP protocol (DPORT 80)">stanley at wo.cn
       </A><BR>
    <I>Sun Aug 30 01:10:33 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005272.html">[squid-users] Building squid | Best Practices?
</A></li>
        <LI>Next message (by thread): <A HREF="005267.html">[squid-users] Please help me , about none HTTP protocol (DPORT 80)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5260">[ date ]</a>
              <a href="thread.html#5260">[ thread ]</a>
              <a href="subject.html#5260">[ subject ]</a>
              <a href="author.html#5260">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please help me , about none HTTP protocol (DPORT 80) . 

I installed a SQUID (3.5) on Centos 6.5  as a web &amp; video caching system .(not reverse proxy or cache )
I use the TPROXY method following here: <A HREF="http://wiki.squid-cache.org/Features/Tproxy4">http://wiki.squid-cache.org/Features/Tproxy4</A>'&gt;<A HREF="http://wiki.squid-cache.org/Features/Tproxy4">http://wiki.squid-cache.org/Features/Tproxy4</A>

the section in this tourial :
iptables -t mangle -A PREROUTING -p tcp --dport 80 -j TPROXY --tproxy-mark 0x1/0x1 --on-port 3129

it will set all the data incoming from LAN erea (condition: destination port is 80) as the MARK , and then 
squid process the data .

here , I want to ask a question :
not all the DPORT 80 data is HTTP protocol (such as : tencent's IM service port is 80 , but it is not HTTP protocol ) 

in this condition , source client will appear problem because the SQUID box could not rightly process the data.

then how Squid process the data that dport is 80 but which is not http protocol  ?

enter in a cache process ? or do nothing and let it passthru ?

please help me . thank you .

sorry for my poor English . if you could read Chinese , I will resent my native language mail again .
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005272.html">[squid-users] Building squid | Best Practices?
</A></li>
	<LI>Next message (by thread): <A HREF="005267.html">[squid-users] Please help me , about none HTTP protocol (DPORT 80)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5260">[ date ]</a>
              <a href="thread.html#5260">[ thread ]</a>
              <a href="subject.html#5260">[ subject ]</a>
              <a href="author.html#5260">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
