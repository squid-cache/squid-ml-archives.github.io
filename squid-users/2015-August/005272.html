<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Building squid | Best Practices?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Building%20squid%20%7C%20Best%20Practices%3F&In-Reply-To=%3CVI1PR04MB1359E379C6845822B90FF3B28F6C0%40VI1PR04MB1359.eurprd04.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005270.html">
   <LINK REL="Next"  HREF="005260.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Building squid | Best Practices?</H1>
    <B>Rafael Akchurin</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Building%20squid%20%7C%20Best%20Practices%3F&In-Reply-To=%3CVI1PR04MB1359E379C6845822B90FF3B28F6C0%40VI1PR04MB1359.eurprd04.prod.outlook.com%3E"
       TITLE="[squid-users] Building squid | Best Practices?">rafael.akchurin at diladele.com
       </A><BR>
    <I>Sun Aug 30 18:58:13 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005270.html">[squid-users] Building squid | Best Practices?
</A></li>
        <LI>Next message (by thread): <A HREF="005260.html">[squid-users] Please help me , about none HTTP protocol (DPORT 80)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5272">[ date ]</a>
              <a href="thread.html#5272">[ thread ]</a>
              <a href="subject.html#5272">[ subject ]</a>
              <a href="author.html#5272">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Howard,

This is how we rebuild default Squid 3.3.8 in Ubuntu 14.01 to enable HTTPS filtering - <A HREF="http://docs.diladele.com/administrator_guide_4_2/installation_and_removal/ubuntu14/squid.html">http://docs.diladele.com/administrator_guide_4_2/installation_and_removal/ubuntu14/squid.html</A>
Hope the scripts can be easily adapted to build the latest Squid instead of the stock one.

Best regards,
Rafael Akchurin
Diladele B.V.

From: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On Behalf Of Howard Waterfall
Sent: Sunday, August 30, 2015 7:42 PM
To: Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;
Cc: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Building squid | Best Practices?

+squid-users

Thanks again, this is valuable information!

As you may have guessed, I'm asking about the user that should do builds to ensure that the build outputs are created with the appropriate permissions - I get a little concerned about security. It sounds like you are suggesting that I simply create a directory for my custom builds:

I assign the --prefix option to the folder I create, so my build output goes there, and then I make sure the permissions for that folder (and it's sub-directories) are set for the user defined by cache_effective_user (and the user defined by the ./configure option --with-default-user). Could you confirm?

Finally (I hope), I've re-installed Ubuntu (various reasons, not just squid issues) and I successfully installed squid using:
sudo apt-get install squid3

Squid wasn't found the first time:
E: Unable to locate package squid3

I had to run this first:
sudo apt-get update

However, when I try apt-get build-dep squid, I get:
You must put some 'source' uris in your sources.list

I can't seem to get over this problem. I've un-commented every line in /etc/apt/sources.list that starts with deb-src.

Could you suggest a repository that I can add to /etc/apt/sources.list?

Thanks,
Deiter

On Sun, Aug 30, 2015 at 5:54 AM, Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;&gt; wrote:
On 30/08/2015 1:07 p.m., Howard Waterfall wrote:
&gt;<i> Great stuff thanks a lot! Excellent timing too just getting ready to do the
</I>&gt;<i> make. I'll follow your suggestions. A couple of follow ups:
</I>&gt;<i>
</I>&gt;<i> When doing the make (including ./configure), do I have to be running as
</I>&gt;<i> root or some particular user? I set up a squid user and user group and also
</I>&gt;<i> a squidadm user group...
</I>
You dont for the ./configure part.

Make might need it to overwrite system files during the install part if
you choose to replace the system files in-place. But that is just
another reason to use a custom /proxy folder for the installation, which
wont need root.


&gt;<i>
</I>&gt;<i> Finally I noticed that configure didn't have -x permissions with 3.5.7. I
</I>&gt;<i> guess I'll have to change that out of the gate...
</I>&gt;<i>
</I>
Hmm. Yes it should have -x permissions. Thanks for that I will have to
double-check the 3.5.8 release.

Amos

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150830/987ae9c0/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150830/987ae9c0/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005270.html">[squid-users] Building squid | Best Practices?
</A></li>
	<LI>Next message (by thread): <A HREF="005260.html">[squid-users] Please help me , about none HTTP protocol (DPORT 80)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5272">[ date ]</a>
              <a href="thread.html#5272">[ thread ]</a>
              <a href="subject.html#5272">[ subject ]</a>
              <a href="author.html#5272">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
