<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] How to use the different Store ID with same url and different proxy port ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20use%20the%20different%20Store%20ID%20with%20same%20url%0A%20and%20different%20proxy%20port%20%3F&In-Reply-To=%3C565D7A72.9010104%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008069.html">
   <LINK REL="Next"  HREF="008070.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] How to use the different Store ID with same url and different proxy port ?</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20use%20the%20different%20Store%20ID%20with%20same%20url%0A%20and%20different%20proxy%20port%20%3F&In-Reply-To=%3C565D7A72.9010104%40treenet.co.nz%3E"
       TITLE="[squid-users] How to use the different Store ID with same url and different proxy port ?">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Dec  1 10:46:10 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008069.html">[squid-users] How to use the different Store ID with same url and different proxy port ?
</A></li>
        <LI>Next message (by thread): <A HREF="008070.html">[squid-users] Time-Based Download Restrictions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8071">[ date ]</a>
              <a href="thread.html#8071">[ thread ]</a>
              <a href="subject.html#8071">[ subject ]</a>
              <a href="author.html#8071">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 1/12/2015 5:44 p.m., &#39118;&#22768; wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> We want to Squid-3 to listen serveral ports (like 3128/3129/3120/...), but
</I>&gt;<i> we want reply different cached objects for different ports with same
</I>&gt;<i> request (same url),
</I>
Don't. URL do not work that way.

RFC 3986 section 1.1.3:
&quot; The term &quot;Uniform Resource Locator&quot; (URL) refers to the subset of URIs
that, in addition to identifying a resource, provide a means of locating
the resource by describing its primary access mechanism &quot;

The URL tells Squid both what object to return, but also *how* it had to
have been fetched (if already cached) or to fetch (if not cached yet).


Neither of which has anything to do with what proxy port Squid is
receiving HTTP messages through.



&gt;<i> because we want to cache compressed objects for some
</I>&gt;<i> ports.
</I>
Whether Squid stores a compressed or non-compressed or both objects
depends on what forms are actively negotiated between client and server.
Independent of the URL.


&gt;<i> 
</I>&gt;<i> How can we do that ? we try to use store id configs in squid.conf, but
</I>&gt;<i> looks like it does not work.
</I>&gt;<i> 
</I>
Store-ID does not work that way either. All it says is what ID Squid is
to use internally for the URL. It has nothing to do with either the type
of object, nor with what listening port was involved.


&gt;<i> 
</I>&gt;<i> squid --&gt; ziproxy --------&gt; websites
</I>&gt;<i>           \----------------------&gt; websites
</I>&gt;<i> 
</I>&gt;<i> or we just only can do is setup multiple squid instances in same servers
</I>&gt;<i>  to listen different ports ?
</I>&gt;<i> 
</I>
What are you *really* trying to do? I mean the end product goal, not
just the &quot;serve compressed and non-compressed on different ports&quot;
halfway step. That is just a halfway step towards a badly designed end
product.

If you place ziproxy between Squid and web servers you will get
compressed objects.

You can achieve the same by having Squid emit headers stating that only
compressed objects are acceptible. The web servers themselves then do
the compression, no need for ziproxy AFAICS.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008069.html">[squid-users] How to use the different Store ID with same url and different proxy port ?
</A></li>
	<LI>Next message (by thread): <A HREF="008070.html">[squid-users] Time-Based Download Restrictions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8071">[ date ]</a>
              <a href="thread.html#8071">[ thread ]</a>
              <a href="subject.html#8071">[ subject ]</a>
              <a href="author.html#8071">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
