<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Looking for ideas on how to use squid in order to protect against a DOS\DDOS.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Looking%20for%20ideas%20on%20how%20to%20use%20squid%20in%20order%20to%0A%20protect%20against%20a%20DOS%5CDDOS.&In-Reply-To=%3C565DBC65.70709%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008073.html">
   <LINK REL="Next"  HREF="008084.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Looking for ideas on how to use squid in order to protect against a DOS\DDOS.</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Looking%20for%20ideas%20on%20how%20to%20use%20squid%20in%20order%20to%0A%20protect%20against%20a%20DOS%5CDDOS.&In-Reply-To=%3C565DBC65.70709%40ngtech.co.il%3E"
       TITLE="[squid-users] Looking for ideas on how to use squid in order to protect against a DOS\DDOS.">eliezer at ngtech.co.il
       </A><BR>
    <I>Tue Dec  1 15:27:33 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008073.html">[squid-users] Looking for ideas on how to use squid in order to protect against a DOS\DDOS.
</A></li>
        <LI>Next message (by thread): <A HREF="008084.html">[squid-users] Looking for ideas on how to use squid in order to protect against a DOS\DDOS.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8078">[ date ]</a>
              <a href="thread.html#8078">[ thread ]</a>
              <a href="subject.html#8078">[ subject ]</a>
              <a href="author.html#8078">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 01/12/2015 12:57, Amos Jeffries wrote:
&gt;<i> On 1/12/2015 8:19 a.m., Eliezer Croitoru wrote:
</I>&gt;&gt;<i> I was wondering if someone have a nice idea on how to use squid to
</I>&gt;&gt;<i> protect against DOS\DDOS http\https attacks.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The basic way I was thinking is rate limiting by counting the client IP
</I>&gt;&gt;<i> page HITs but I am unsure about it since it can actually catch the good
</I>&gt;&gt;<i> guys and bite my squid setup.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The other way I was thinking was some kind of a challenge like a captcha
</I>&gt;&gt;<i> page.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Also I have seen something like JavaScript browser challenge being used.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> What do you think would be the right choice?
</I>&gt;<i>
</I>&gt;<i> Fast automated detection. Absolute minimal response to identified
</I>&gt;<i> requests. Push the cost as far back up the traffic path towards the
</I>&gt;<i> attacker as possible. Those are the answers to DDoS.
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If you have another idea please send me or the list an email.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Squid already does pretty well against many of the common (old'ish) DDoS
</I>&gt;<i> types. Though there are some countermeasures that could still be
</I>&gt;<i> improved, and some DDoS types that are not protected against at all.
</I>
Squid can only &quot;catch&quot; with default settings basic objects fetch from 
the origin which in most cases can also be forced by adding couple 
arguments to the request such as a timestamp.

&gt;<i> There are many forms of DoS to begin with, and *how* the DoS is turned
</I>&gt;<i> into DDoS is one of the important considerations. There are many
</I>&gt;<i> possible forms that could take. So the big question to start with is
</I>&gt;<i> what type of DDoS are you trying to protect against?
</I>
I do not have one in mind yet since I'm not really a Dos or DDoS master.
I have seen couple attacks in the past which was coming from a single or 
more AS while spreading the attack from lots of origins.
The basic attack would be an application level one which in this case a 
captcha gives in many cases really good results.
The second case would be traffic BW exhaustion and for that a basic BW 
throttling would be good enough.(delay pools can be used for that..)

I have used fail2ban more then once to block origins and to identify 
them but I think an ICAP service might be able to identify more then 
what is in the access.logs.

What you wrote about &quot;Push the cost as far back up the traffic path..&quot; I 
can think about one way which would be a redirection towards their own 
source IP or GW.
And the above is nice for small attacks but not for very big ones. But 
in the other hand an ICAP service can give better details\debug on the 
details of the attack. It can be turned on for specific traffic and help 
understand the nature of it.
Also an ICAP service can be used as a honey pot.

I will research more and see what can be done in the ICAP level.

Thanks,
Eliezer

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008073.html">[squid-users] Looking for ideas on how to use squid in order to protect against a DOS\DDOS.
</A></li>
	<LI>Next message (by thread): <A HREF="008084.html">[squid-users] Looking for ideas on how to use squid in order to protect against a DOS\DDOS.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8078">[ date ]</a>
              <a href="thread.html#8078">[ thread ]</a>
              <a href="subject.html#8078">[ subject ]</a>
              <a href="author.html#8078">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
