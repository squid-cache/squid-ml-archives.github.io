<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] deny_info / url_rewrite_program
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20deny_info%20/%20url_rewrite_program&In-Reply-To=%3C565F1C92.1080608%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008076.html">
   <LINK REL="Next"  HREF="008069.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] deny_info / url_rewrite_program</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20deny_info%20/%20url_rewrite_program&In-Reply-To=%3C565F1C92.1080608%40treenet.co.nz%3E"
       TITLE="[squid-users] deny_info / url_rewrite_program">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Dec  2 16:30:10 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008076.html">[squid-users] deny_info / url_rewrite_program
</A></li>
        <LI>Next message (by thread): <A HREF="008069.html">[squid-users] How to use the different Store ID with same url and different proxy port ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8102">[ date ]</a>
              <a href="thread.html#8102">[ thread ]</a>
              <a href="subject.html#8102">[ subject ]</a>
              <a href="author.html#8102">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2/12/2015 3:17 a.m., Jens Kallup wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> bellow, a Perl script that works for me - it redirect the
</I>&gt;<i> URL in browser; when i type in &quot;web.de&quot; the result is
</I>&gt;<i> &quot;www.freenet.de&quot;.
</I>&gt;<i> But the browser don't connect to www.freenet.de,
</I>&gt;<i> he shows me a Error: redirect-error - this problem can
</I>&gt;<i> be, when Cookies deactivated or denied.
</I>&gt;<i> (iceweasel - firefox)
</I>&gt;<i> Is that a browser mistake or my logic?
</I>
Maybe both. If you are trying to redirect a CONNECT request or such.

HTTP is not the only protocol Browsers do these days, and the others
generally use CONNECT when going through a HTTP-only proxy like Squid.

Alternatively the browser message might be meaning to say that 301 is an
invalid status response for whatever application process it was
performing before starting to go to that URL. CONNECT is the usual one
due to HTTPS popularity these days, but the CORS and HSTS security
systems can also have sequences of HTTP messages that are expecting
specific non-3xx responses.

&gt;<i> 
</I>&gt;<i> #!/usr/bin/perl -l
</I>&gt;<i> 
</I>&gt;<i> $|=1;                   # don't buffer stdout
</I>&gt;<i> 
</I>&gt;<i> while (&lt;&gt;) {            # read line from STDIN (squid input)
</I>&gt;<i>   $url = m/^([^ ]*)/;
</I>&gt;<i>   if ($url !~ /^http:\/\/web\.de/) {
</I>&gt;<i>     print &quot;301:<A HREF="http://www.freenet.de/index.html\n">http://www.freenet.de/index.html\n</A>&quot;;
</I>&gt;<i>   } else {
</I>&gt;<i>     print &quot;$url\n&quot;;
</I>&gt;<i>   }
</I>&gt;<i> }
</I>
That helper is using Squid-2 protocol syntax.

Squid is translating it to its own current syntax. But the helper should
really output the protocol its Squid is wanting to use.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008076.html">[squid-users] deny_info / url_rewrite_program
</A></li>
	<LI>Next message (by thread): <A HREF="008069.html">[squid-users] How to use the different Store ID with same url and different proxy port ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8102">[ date ]</a>
              <a href="thread.html#8102">[ thread ]</a>
              <a href="subject.html#8102">[ subject ]</a>
              <a href="author.html#8102">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
