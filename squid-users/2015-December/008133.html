<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] delay_pools from 3.1 to 3.4
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20delay_pools%20from%203.1%20to%203.4&In-Reply-To=%3C56602E60.7040204%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008132.html">
   <LINK REL="Next"  HREF="008136.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] delay_pools from 3.1 to 3.4</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20delay_pools%20from%203.1%20to%203.4&In-Reply-To=%3C56602E60.7040204%40treenet.co.nz%3E"
       TITLE="[squid-users] delay_pools from 3.1 to 3.4">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Dec  3 11:58:24 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008132.html">[squid-users] delay_pools from 3.1 to 3.4
</A></li>
        <LI>Next message (by thread): <A HREF="008136.html">[squid-users] How to limit user traffic quota?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8133">[ date ]</a>
              <a href="thread.html#8133">[ thread ]</a>
              <a href="subject.html#8133">[ subject ]</a>
              <a href="author.html#8133">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 4/12/2015 12:40 a.m., <A HREF="https://lists.squid-cache.org/listinfo/squid-users">Massimo.Sala at asl.bergamo.it</A> wrote:
&gt;<i> Squid 3 as forwarding proxy, intranet LAN.
</I>&gt;<i> 
</I>&gt;<i> We want to limit the bandwidth only for multimedia content.
</I>&gt;<i> 
</I>&gt;<i> On 3.1.20 we have these lines into squid.conf :
</I>&gt;<i> 
</I>&gt;<i> acl localnet src 10.0.0.0/8
</I>&gt;<i> 
</I>&gt;<i> acl acl_flussi_media rep_mime_type -i ^audio/
</I>&gt;<i> acl acl_flussi_media rep_mime_type -i ^video/
</I>&gt;<i> 
</I>&gt;<i> delay_pools 1
</I>&gt;<i> delay_class 1 1
</I>&gt;<i> delay_parameters 1 320000/320000
</I>&gt;<i> delay_access 1 allow acl_flussi_media
</I>&gt;<i> delay_access 1 deny all
</I>&gt;<i> 
</I>&gt;<i> http_access allow localnet
</I>&gt;<i> http_access deny all
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Using the same lines on the new server, with squid 3.4.8, we got these 
</I>&gt;<i> warnings in cache.log :
</I>&gt;<i> 
</I>&gt;<i>         2015/12/03 12:38:45 kid1| WARNING: acl_flussi_media ACL is used in 
</I>&gt;<i> context without an HTTP response. Assuming mismatch.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> What does it mean ? How to fix it ?
</I>
It means that *reply* header do not work when using *request* to decide
what delay pool the transaction will use.

It has never worked. The older Squid just did not tell you about the
config problem.

If you want traffic to be re-assigned to pools when the reply happens
you need to upgrade to at least the Squid-4.0.3 (beta) release.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008132.html">[squid-users] delay_pools from 3.1 to 3.4
</A></li>
	<LI>Next message (by thread): <A HREF="008136.html">[squid-users] How to limit user traffic quota?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8133">[ date ]</a>
              <a href="thread.html#8133">[ thread ]</a>
              <a href="subject.html#8133">[ subject ]</a>
              <a href="author.html#8133">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
