<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] How to limit user traffic quota?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20limit%20user%20traffic%20quota%3F&In-Reply-To=%3C56603527.1020209%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008136.html">
   <LINK REL="Next"  HREF="008140.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] How to limit user traffic quota?</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20limit%20user%20traffic%20quota%3F&In-Reply-To=%3C56603527.1020209%40treenet.co.nz%3E"
       TITLE="[squid-users] How to limit user traffic quota?">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Dec  3 12:27:19 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008136.html">[squid-users] How to limit user traffic quota?
</A></li>
        <LI>Next message (by thread): <A HREF="008140.html">[squid-users] How to limit user traffic quota?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8139">[ date ]</a>
              <a href="thread.html#8139">[ thread ]</a>
              <a href="subject.html#8139">[ subject ]</a>
              <a href="author.html#8139">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 4/12/2015 1:14 a.m., GoGo net wrote:
&gt;<i> I am running squid 3.5 in my LAN as a proxy for surfing internet.
</I>&gt;<i> 
</I>&gt;<i> The proxy is shared by all users in the LAN, and every user has a username/password configured in their web browser.
</I>&gt;<i> 
</I>&gt;<i> Now, I want to limit user traffic quota, say every user 100GB/month. How can achieve this?
</I>&gt;<i> 
</I>&gt;<i> Currently, I use a script to monitor **access.log** of squid, and aggregate the traffic from log to calculate user traffic. But I am wondering what is the best practise to limit user quota? Is there a better way to limit user traffic quota?
</I>&gt;<i> 
</I>
Nope. Squid is designed to optimize traffic not to de-optimize it. So
does not do quota limitations.

However the OS QoS controls often do support quotas and do so far better
than Squid could even get close to. Squid can integrate with those using
tcp_outgoing_tos/mark and qos_flows to deliver per-request
classification tags to the OS QoS system.


If you stay wit a helper script you maybe could still optimize it a
little. Your log monitoring Script could be run as a log daemon helper
in order to get the log lines as soon as they are written. That also
lets you send a custom log format separate from the access.log to the
helper so it can work better.


Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008136.html">[squid-users] How to limit user traffic quota?
</A></li>
	<LI>Next message (by thread): <A HREF="008140.html">[squid-users] How to limit user traffic quota?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8139">[ date ]</a>
              <a href="thread.html#8139">[ thread ]</a>
              <a href="subject.html#8139">[ subject ]</a>
              <a href="author.html#8139">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
