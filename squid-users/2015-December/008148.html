<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Authentication Problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Authentication%20Problem&In-Reply-To=%3C5660F27B.6000907%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008146.html">
   <LINK REL="Next"  HREF="008156.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Authentication Problem</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Authentication%20Problem&In-Reply-To=%3C5660F27B.6000907%40treenet.co.nz%3E"
       TITLE="[squid-users] Authentication Problem">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Dec  4 01:55:07 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008146.html">[squid-users] Authentication Problem
</A></li>
        <LI>Next message (by thread): <A HREF="008156.html">[squid-users] Authentication Problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8148">[ date ]</a>
              <a href="thread.html#8148">[ thread ]</a>
              <a href="subject.html#8148">[ subject ]</a>
              <a href="author.html#8148">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 4/12/2015 9:46 a.m., Dima Ermakov wrote:
&gt;<i> Hi!
</I>&gt;<i> I have a problem with authentiation.
</I>&gt;<i> 
</I>&gt;<i> I use samba ntlm authentication in my network.
</I>&gt;<i> 
</I>&gt;<i> Some users ( not all ) have problems with http traffic.
</I>&gt;<i> 
</I>&gt;<i> They see basic authentication request.
</I>
Meaning you *dont* have NTLM authentication on your network.

Or you are making the mistake of thinking a popup means Basic
authentication.

&gt;<i> If they enter correct domain login and password, they have auth error.
</I>&gt;<i> If this users try to open https sites: all works good, they have not any
</I>&gt;<i> type of errors.
</I>
So,
 a) they are probably not going through this proxy, or
 b) the browser is suppressing the proxy-auth popups, or
 c) the authentication request is not coming from *your* proxy.

&gt;<i> 
</I>&gt;<i> So we have errors only with unencrypted connections.
</I>&gt;<i> 
</I>&gt;<i> I have this error on two servers:
</I>&gt;<i> debian8, squid3.4 (from repository)
</I>&gt;<i> CentOS7, squid3.3.8 (from repository).
</I>&gt;<i> 
</I>
Two things to try:

1) Adding a line like this before the group access controls in
frntend.conf. This will ensure that authentiation credentials are valid
before doing group lookups:
 http_access deny !AuthorizedUsers


2) checking up on the Debian winbind issue mentioned in
&lt;<A HREF="http://wiki.squid-cache.org/ConfigExamples/Authenticate/Ntlm#winbind_privileged_pipe_permissions">http://wiki.squid-cache.org/ConfigExamples/Authenticate/Ntlm#winbind_privileged_pipe_permissions</A>&gt;

Im not sure about this it is likely to be involved on Debian, but CentOS
is not known to have that issue.


Oh and:
 3) remove the &quot;acl manager&quot; line from squid.conf.

 4) change your cachemgr_passwd. Commenting it out does not hide it from
view when you post it on this public mailing list.

You should remove all the commented out directives as well, some of them
may be leading to misunderstanding of what the config is actually doing.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008146.html">[squid-users] Authentication Problem
</A></li>
	<LI>Next message (by thread): <A HREF="008156.html">[squid-users] Authentication Problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8148">[ date ]</a>
              <a href="thread.html#8148">[ thread ]</a>
              <a href="subject.html#8148">[ subject ]</a>
              <a href="author.html#8148">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
