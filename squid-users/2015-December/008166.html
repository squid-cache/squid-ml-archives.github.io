<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] How to limit user traffic quota? (GoGo net)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20limit%20user%20traffic%20quota%3F%20%28GoGo%20net%29&In-Reply-To=%3CD02FE375-0B47-4C23-ADF7-C746E4805995%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008144.html">
   <LINK REL="Next"  HREF="008168.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] How to limit user traffic quota? (GoGo net)</H1>
    <B>GoGo net</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20limit%20user%20traffic%20quota%3F%20%28GoGo%20net%29&In-Reply-To=%3CD02FE375-0B47-4C23-ADF7-C746E4805995%40gmail.com%3E"
       TITLE="[squid-users] How to limit user traffic quota? (GoGo net)">focusnetgogo at gmail.com
       </A><BR>
    <I>Fri Dec  4 15:57:36 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008144.html">[squid-users] How to limit user traffic quota? (GoGo net)
</A></li>
        <LI>Next message (by thread): <A HREF="008168.html">[squid-users] How to limit user traffic quota? (GoGo net)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8166">[ date ]</a>
              <a href="thread.html#8166">[ thread ]</a>
              <a href="subject.html#8166">[ subject ]</a>
              <a href="author.html#8166">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Limit rate is another direction to limit traffic, I will think about it.

Currently, I prefer to use the script to monitor access.log, and I find a problem today:

From [squid wiki](<A HREF="http://wiki.squid-cache.org/Features/LogFormat">http://wiki.squid-cache.org/Features/LogFormat</A>):

&gt;<i> bytes The size is the amount of data delivered to the client. Mind that this does not constitute the net object size, as headers are also counted.
</I>
It seems that **bytes** only includes response size (including http header). What I really want is counting both http-request and http-response. Is there any way to enable http-request **bytes** being logged in access.log?


&gt;<i> On Dec 4, 2015, at 12:23 AM, Robert Plamondon &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">robert at plamondon.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> I haven't used delay pools in a while, but I would think that the updated Squid 3 delay pools (with 64-bit counters and per-authenticated-user buckets) would allow such quotas. 
</I>&gt;<i> 
</I>&gt;<i> I'd take the monthly quota and turn it into a per-second rate. If my math isn't failing me, 100 GB/month = 38,500 bytes per second. That would be the refill rate on the delay pool. Users will be guaranteed this rate. Their BW would never be cut off, just throttled to the rate they're paying for.
</I>&gt;<i> 
</I>&gt;<i> Then pick a max value to taste. I like to populate delay pools to support an enormous burst size (the &quot;maximum&quot; parameter in the pool), so the bandwidth limitations will rarely if ever be encountered by the average user. 10% of the monthly allotment, or 10 GB, (3 days' worth of bandwidth) strikes me as a good starting point, but I wouldn't have much resistance to even higher numbers, like 25%.
</I>&gt;<i> 
</I>&gt;<i> Robert
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008144.html">[squid-users] How to limit user traffic quota? (GoGo net)
</A></li>
	<LI>Next message (by thread): <A HREF="008168.html">[squid-users] How to limit user traffic quota? (GoGo net)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8166">[ date ]</a>
              <a href="thread.html#8166">[ thread ]</a>
              <a href="subject.html#8166">[ subject ]</a>
              <a href="author.html#8166">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
