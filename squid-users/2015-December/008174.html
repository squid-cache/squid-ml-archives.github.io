<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Authentication Problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Authentication%20Problem&In-Reply-To=%3CCAP6yRXj5oeW5WSFwu4NrEfoe1yJWg80w4eKrmZtno2hqRzijNQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008156.html">
   <LINK REL="Next"  HREF="008149.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Authentication Problem</H1>
    <B>Samuel Anderson</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Authentication%20Problem&In-Reply-To=%3CCAP6yRXj5oeW5WSFwu4NrEfoe1yJWg80w4eKrmZtno2hqRzijNQ%40mail.gmail.com%3E"
       TITLE="[squid-users] Authentication Problem">sam at idsdoc.com
       </A><BR>
    <I>Fri Dec  4 18:04:35 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008156.html">[squid-users] Authentication Problem
</A></li>
        <LI>Next message (by thread): <A HREF="008149.html">[squid-users] using splice just to improve TLS SNI logging
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8174">[ date ]</a>
              <a href="thread.html#8174">[ thread ]</a>
              <a href="subject.html#8174">[ subject ]</a>
              <a href="author.html#8174">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Amos and Dima,

I'm having the exact same problem. After updating Chrome to version
(47.0.2526.73
m) I'm no longer able to authenticate. IE and Firefox still seem to work
fine. I haven't changed anything in my config file for months.

On Fri, Dec 4, 2015 at 5:22 AM, Dima Ermakov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">demonihin at gmail.com</A>&gt; wrote:

&gt;<i> Thank you, Amos.
</I>&gt;<i>
</I>&gt;<i> I checked all, that you wrote.
</I>&gt;<i> It didn't help me.
</I>&gt;<i>
</I>&gt;<i> I have this problem only on google chrome browser.
</I>&gt;<i> Before 2015-12-03 all was good.
</I>&gt;<i> I didn't change my configuration more than one month.
</I>&gt;<i>
</I>&gt;<i> Ten minutes ago &quot;Noel Kelly <A HREF="https://lists.squid-cache.org/listinfo/squid-users">nkelly at citrusnetworks.net</A>&quot; wrote in this
</I>&gt;<i> list, that google chrome v47 has broken NTLM authentication.
</I>&gt;<i> My clients with problems has google chrome v47 (((
</I>&gt;<i>
</I>&gt;<i> Mozilla Firefox clients work good.
</I>&gt;<i>
</I>&gt;<i> Thank you!
</I>&gt;<i>
</I>&gt;<i> This is message from Noel Kelly:
</I>&gt;<i> &quot;
</I>&gt;<i>
</I>&gt;<i> Hi
</I>&gt;<i>
</I>&gt;<i> For information, the latest version of Google Chrome (v47.0.2526.73M) has
</I>&gt;<i> broken NTLM authentication:
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://code.google.com/p/chromium/issues/detail?id=544255">https://code.google.com/p/chromium/issues/detail?id=544255</A>
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://productforums.google.com/forum/#!topic/chrome/G_9eXH9c_ns;context-place=forum/chrome">https://productforums.google.com/forum/#!topic/chrome/G_9eXH9c_ns;context-place=forum/chrome</A>
</I>&gt;<i>
</I>&gt;<i> Cheers
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i> &quot;
</I>&gt;<i>
</I>&gt;<i> On 4 December 2015 at 04:55, Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On 4/12/2015 9:46 a.m., Dima Ermakov wrote:
</I>&gt;&gt;<i> &gt; Hi!
</I>&gt;&gt;<i> &gt; I have a problem with authentiation.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I use samba ntlm authentication in my network.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Some users ( not all ) have problems with http traffic.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; They see basic authentication request.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Meaning you *dont* have NTLM authentication on your network.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Or you are making the mistake of thinking a popup means Basic
</I>&gt;&gt;<i> authentication.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; If they enter correct domain login and password, they have auth error.
</I>&gt;&gt;<i> &gt; If this users try to open https sites: all works good, they have not any
</I>&gt;&gt;<i> &gt; type of errors.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> So,
</I>&gt;&gt;<i>  a) they are probably not going through this proxy, or
</I>&gt;&gt;<i>  b) the browser is suppressing the proxy-auth popups, or
</I>&gt;&gt;<i>  c) the authentication request is not coming from *your* proxy.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; So we have errors only with unencrypted connections.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; I have this error on two servers:
</I>&gt;&gt;<i> &gt; debian8, squid3.4 (from repository)
</I>&gt;&gt;<i> &gt; CentOS7, squid3.3.8 (from repository).
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Two things to try:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 1) Adding a line like this before the group access controls in
</I>&gt;&gt;<i> frntend.conf. This will ensure that authentiation credentials are valid
</I>&gt;&gt;<i> before doing group lookups:
</I>&gt;&gt;<i>  http_access deny !AuthorizedUsers
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 2) checking up on the Debian winbind issue mentioned in
</I>&gt;&gt;<i> &lt;
</I>&gt;&gt;<i> <A HREF="http://wiki.squid-cache.org/ConfigExamples/Authenticate/Ntlm#winbind_privileged_pipe_permissions">http://wiki.squid-cache.org/ConfigExamples/Authenticate/Ntlm#winbind_privileged_pipe_permissions</A>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Im not sure about this it is likely to be involved on Debian, but CentOS
</I>&gt;&gt;<i> is not known to have that issue.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Oh and:
</I>&gt;&gt;<i>  3) remove the &quot;acl manager&quot; line from squid.conf.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  4) change your cachemgr_passwd. Commenting it out does not hide it from
</I>&gt;&gt;<i> view when you post it on this public mailing list.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> You should remove all the commented out directives as well, some of them
</I>&gt;&gt;<i> may be leading to misunderstanding of what the config is actually doing.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Amos
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> squid-users mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> &#1057; &#1091;&#1074;&#1072;&#1078;&#1077;&#1085;&#1080;&#1077;&#1084;, &#1044;&#1084;&#1080;&#1090;&#1088;&#1080;&#1081; &#1045;&#1088;&#1084;&#1072;&#1082;&#1086;&#1074;.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
Samuel Anderson  |  System Administrator  |  International Document Services

IDS  |  11629 South 700 East, Suite 200  |  Draper, UT 84020-4607

-- 
CONFIDENTIALITY NOTICE:
This e-mail and any attachments are confidential. If you are not an 
intended recipient, please contact the sender to report the error and 
delete all copies of this message from your system.  Any unauthorized 
review, use, disclosure or distribution is prohibited.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20151204/724060ed/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20151204/724060ed/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008156.html">[squid-users] Authentication Problem
</A></li>
	<LI>Next message (by thread): <A HREF="008149.html">[squid-users] using splice just to improve TLS SNI logging
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8174">[ date ]</a>
              <a href="thread.html#8174">[ thread ]</a>
              <a href="subject.html#8174">[ subject ]</a>
              <a href="author.html#8174">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
