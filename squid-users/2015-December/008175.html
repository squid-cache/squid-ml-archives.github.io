<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] doubts about the squid3
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20doubts%20about%20the%20squid3&In-Reply-To=%3C566277D7.6010308%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008122.html">
   <LINK REL="Next"  HREF="008187.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] doubts about the squid3</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20doubts%20about%20the%20squid3&In-Reply-To=%3C566277D7.6010308%40treenet.co.nz%3E"
       TITLE="[squid-users] doubts about the squid3">squid3 at treenet.co.nz
       </A><BR>
    <I>Sat Dec  5 05:36:23 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008122.html">[squid-users] doubts about the squid3
</A></li>
        <LI>Next message (by thread): <A HREF="008187.html">[squid-users] doubts about the squid3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8175">[ date ]</a>
              <a href="thread.html#8175">[ thread ]</a>
              <a href="subject.html#8175">[ subject ]</a>
              <a href="author.html#8175">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 5/12/2015 11:20 a.m., Marcio Demetrio Bacci wrote:
&gt;<i> Hi Amos,
</I>&gt;<i> 
</I>&gt;<i> Thanks for help me.
</I>&gt;<i> 
</I>&gt;<i> Follow my whole squid.conf
</I>
&lt;snip&gt;
&gt;<i> acl manager proto cache_object
</I>

I see you still have the old Squid-2 definition for &quot;manager&quot; ACL. If
your Squid is not complaining about that, it means you are using a very
old version and need to upgrade.
 The config should work, so I think you are hitting bugs in Squid. With
Squid older than 3.4 it could be bug 2305 and the related nest of
horrible auth code that used to exist in Squid.

Please ensure you are using a Squid-3.4 or later. If the problem
remains, you will have to try to isolate some situatino that always
causes it. With that a ALL,9 debug log from Squid could help.


Also, be aware that there is always the possibility of browser bugs
being involved. Firefx 25-40 did not do NTLM properly, and Chrome 47
just had a major regression where it broke all NTLM to a proxy - similar
but less high profile things have happened before with both of them, and
old IE 0-8 can be randomly problems as they do their own undocumented
things.


&lt;snip&gt;
&gt;<i> acl Safe_ports port 80 8080 21 443 563 70 210 280 488 591 777 3001
</I>&gt;<i> 1025-65535
</I>
You don't have to add port 8080 or 3001 to that list. They are included
in the 1025-65535 set.

&lt;snip&gt;
&gt;<i> acl connect_abertas maxconn 8
</I>
connect_abertas is unused. You should remove it.

&gt;<i> acl grupo_admins external ad_group gg_admins
</I>&gt;<i> acl grupo_users external ad_group gg_users
</I>&gt;<i> acl extensoes_bloqueadas url_regex -i &quot;/etc/squid3/acls/extensoes-proibidas&quot;
</I>&gt;<i> acl sites_liberados url_regex -i &quot;/etc/squid3/acls/sites-permitidos&quot;
</I>&gt;<i> acl sites_bloqueados url_regex -i &quot;/etc/squid3/acls/sites-proibidos&quot;
</I>&gt;<i> acl palavras_bloqueadas url_regex -i &quot;/etc/squid3/acls/palavras-proibidas&quot;
</I>&gt;<i> acl autenticados proxy_auth REQUIRED
</I>&gt;<i> http_access deny !autenticados
</I>&gt;<i> http_access allow grupo_admins
</I>&gt;<i> http_access deny extensoes_bloqueadas
</I>&gt;<i> http_access allow sites_liberados
</I>&gt;<i> http_access deny sites_bloqueados
</I>&gt;<i> http_access deny palavras_bloqueadas
</I>&gt;<i> http_access allow grupo_users
</I>&gt;<i> http_access allow autenticados
</I>
Only autenticados can get past the &quot;deny !autenticados&quot; at the top. So
this &quot;allow autenticados&quot; will always match. The below lines do nothing
useful.

So you could replace the above &quot;allow autenticados&quot; with &quot;allow all&quot; and
save some extra auth checking.


&gt;<i> acl network_servers src 192.168.0.0/25
</I>&gt;<i> acl Lan1 src 192.168.1.0/24
</I>&gt;<i> acl lan2 src 192.168.2.0/23
</I>&gt;<i> http_access allow  network_servers
</I>&gt;<i> http_access allow lan1
</I>&gt;<i> http_access allow lan2
</I>&gt;<i> http_access deny all
</I>&gt;<i> error_directory /usr/share/squid3/errors/pt-br
</I>
I hear Brazil is a multi-cultural country. You might want to seriously
consider removing that line which forces all users and clients to read
Portuguese (Brazi) language messages from the proxy.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008122.html">[squid-users] doubts about the squid3
</A></li>
	<LI>Next message (by thread): <A HREF="008187.html">[squid-users] doubts about the squid3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8175">[ date ]</a>
              <a href="thread.html#8175">[ thread ]</a>
              <a href="subject.html#8175">[ subject ]</a>
              <a href="author.html#8175">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
