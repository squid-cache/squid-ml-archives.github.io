<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid 3.4, dstdomain
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%203.4%2C%20dstdomain&In-Reply-To=%3C5669554C.3000100%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008242.html">
   <LINK REL="Next"  HREF="008262.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid 3.4, dstdomain</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%203.4%2C%20dstdomain&In-Reply-To=%3C5669554C.3000100%40treenet.co.nz%3E"
       TITLE="[squid-users] squid 3.4, dstdomain">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Dec 10 10:34:52 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008242.html">[squid-users] squid 3.4, dstdomain
</A></li>
        <LI>Next message (by thread): <A HREF="008262.html">[squid-users] squid 3.4, dstdomain
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8237">[ date ]</a>
              <a href="thread.html#8237">[ thread ]</a>
              <a href="subject.html#8237">[ subject ]</a>
              <a href="author.html#8237">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/12/2015 11:02 p.m., Massimo.Sala wrote:
&gt;<i> 2015/12/10 10:33:49| ERROR: '.addons.mozilla.org' is a subdomain of 
</I>&gt;<i> 'addons.mozilla.org'
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I thought
</I>&gt;<i>         addons.mozilla.org              blocks only these hostname
</I>

ACLs do not block anything. Access Controls do.

This value tells Squid that addons.mozilla.org is an exact-match. Any
sub-domain is to be a non-match.


&gt;<i> 
</I>&gt;<i>         .addons.mozilla.org             blocks all the sub-domains, like 
</I>&gt;<i> www.addons.mozilla.org etc.addons.mozilla.org
</I>

This one tells Squid that &quot;addons.mozilla.org&quot; and *all* sub-domains are
to match true.


&gt;<i> 
</I>&gt;<i> Which are the parsing rules of squid 3.4 ?
</I>
Each entry in the dstdomain ACL must be a unique and distinct match. The
two ranges of possible domain names above overlap.


Squid uses splay trees internally. So when there are two overlapping
entries, which one will be found and tested against will change randomly
based on how other things affect the splay. Which will cause random
rejections for the *.addons.mozilla.org sub-domains.

Thus having both is a problem. Which way around you place them in the
list of ACL values determins whether Squid can drop one (and just warn)
or not (the error).

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008242.html">[squid-users] squid 3.4, dstdomain
</A></li>
	<LI>Next message (by thread): <A HREF="008262.html">[squid-users] squid 3.4, dstdomain
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8237">[ date ]</a>
              <a href="thread.html#8237">[ thread ]</a>
              <a href="subject.html#8237">[ subject ]</a>
              <a href="author.html#8237">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
