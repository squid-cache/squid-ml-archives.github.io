<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 32-bit (2.7.2) much faster than Squid 64-bit	(3.5.11)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%2032-bit%20%282.7.2%29%20much%20faster%20than%20Squid%2064-bit%0A%09%283.5.11%29&In-Reply-To=%3C004e01d133b1%248a9a48d0%249fceda70%24%40verizon.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008251.html">
   <LINK REL="Next"  HREF="008274.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 32-bit (2.7.2) much faster than Squid 64-bit	(3.5.11)</H1>
    <B>Patrick Flaherty</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%2032-bit%20%282.7.2%29%20much%20faster%20than%20Squid%2064-bit%0A%09%283.5.11%29&In-Reply-To=%3C004e01d133b1%248a9a48d0%249fceda70%24%40verizon.net%3E"
       TITLE="[squid-users] Squid 32-bit (2.7.2) much faster than Squid 64-bit	(3.5.11)">vze2k3sa at verizon.net
       </A><BR>
    <I>Fri Dec 11 01:16:18 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008251.html">[squid-users] help change cache dir
</A></li>
        <LI>Next message (by thread): <A HREF="008274.html">[squid-users] Squid 32-bit (2.7.2) much faster than Squid 64-bit (3.5.11)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8257">[ date ]</a>
              <a href="thread.html#8257">[ thread ]</a>
              <a href="subject.html#8257">[ subject ]</a>
              <a href="author.html#8257">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

 

Just following up on my slow 3.5.11 Squid server.  I loaded the 32-bit 2.7.2
version on the same box and it's so much faster for me. Its 4 to 5 times
faster for me on the same machine. Please any help appreciated. Amos, I
think I cleaned up my 3.5.11 squid.conf properly. I think my 2.7.2
squid.conf needs work.

See below Startup Cache logs from both 3.5.11 and 2.7.2 and also the
squid.conf files from 3.5.11 and 2.7.2.

 

Thank You,

Patrick

 

Squid 3.5.11 Startup Cache Log:

2015/12/10 19:50:09 kid1| Current Directory is /cygdrive/c/Windows/system32

2015/12/10 19:50:09 kid1| Starting Squid Cache version 3.5.11 for
x86_64-unknown-cygwin...

2015/12/10 19:50:09 kid1| Service Name: squid

2015/12/10 19:50:09 kid1| Process ID 1968

2015/12/10 19:50:09 kid1| Process Roles: worker

2015/12/10 19:50:09 kid1| With 3200 file descriptors available

2015/12/10 19:50:09 kid1| Initializing IP Cache...

2015/12/10 19:50:09 kid1| parseEtcHosts: /etc/hosts: (2) No such file or
directory

2015/12/10 19:50:09 kid1| DNS Socket created at [::], FD 5

2015/12/10 19:50:09 kid1| DNS Socket created at 0.0.0.0, FD 6

2015/12/10 19:50:09 kid1| Adding nameserver 172.16.50.9 from squid.conf

2015/12/10 19:50:09 kid1| Adding nameserver 172.16.50.13 from squid.conf

2015/12/10 19:50:09 kid1| Logfile: opening log
daemon:/var/log/squid/access.log

2015/12/10 19:50:09 kid1| Logfile Daemon: opening log
/var/log/squid/access.log

2015/12/10 19:50:09 kid1| WARNING: no_suid: setuid(0): (22) Invalid argument

2015/12/10 19:50:09 kid1| Store logging disabled

2015/12/10 19:50:09 kid1| Swap maxSize 0 + 262144 KB, estimated 20164
objects

2015/12/10 19:50:09 kid1| Target number of buckets: 1008

2015/12/10 19:50:09 kid1| Using 8192 Store buckets

2015/12/10 19:50:09 kid1| Max Mem  size: 262144 KB

2015/12/10 19:50:09 kid1| Max Swap size: 0 KB

2015/12/10 19:50:09 kid1| Using Least Load store dir selection

2015/12/10 19:50:09 kid1| Current Directory is /cygdrive/c/Windows/system32

2015/12/10 19:50:09 kid1| Finished loading MIME types and icons.

2015/12/10 19:50:09 kid1| HTCP Disabled.

2015/12/10 19:50:09 kid1| Squid plugin modules loaded: 0

2015/12/10 19:50:09 kid1| Adaptation support is off.

2015/12/10 19:50:09 kid1| Accepting HTTP Socket connections at
local=[::]:3130 remote=[::] FD 10 flags=9

2015/12/10 19:50:11 kid1| storeLateRelease: released 0 objects 

----------------------------------------------------------------------------
-------------------------------

Squid 2.7.2 Startup Cache Log:

2015/12/10 19:50:38| Starting Squid Cache version 2.7.STABLE8 for
i686-pc-winnt...

2015/12/10 19:50:38| Running as Squid-Proxy-2.7.2 Windows System Service on
Windows Server 2008

2015/12/10 19:50:38| Service command line is: 

2015/12/10 19:50:38| Process ID 2644

2015/12/10 19:50:38| With 2048 file descriptors available

2015/12/10 19:50:38| With 2048 CRT stdio descriptors available

2015/12/10 19:50:38| Windows sockets initialized

2015/12/10 19:50:38| Using select for the IO loop

2015/12/10 19:50:38| Performing DNS Tests...

2015/12/10 19:50:38| Successful DNS name lookup tests...

2015/12/10 19:50:38| DNS Socket created at 0.0.0.0, port 50961, FD 5

2015/12/10 19:50:38| Adding DHCP nameserver 172.16.50.9 from Registry

2015/12/10 19:50:38| Adding DHCP nameserver 172.16.50.13 from Registry

2015/12/10 19:50:38| Adding DHCP nameserver 4.2.2.3 from Registry

2015/12/10 19:50:38| Adding domain  from Registry

2015/12/10 19:50:38| User-Agent logging is disabled.

2015/12/10 19:50:38| Referer logging is disabled.

2015/12/10 19:50:38| logfileOpen: opening log C:/squid/var/logs/access.log

2015/12/10 19:50:38| Unlinkd pipe opened on FD 8

2015/12/10 19:50:38| Swap maxSize 102400 + 65536 KB, estimated 12918 objects

2015/12/10 19:50:38| Target number of buckets: 645

2015/12/10 19:50:38| Using 8192 Store buckets

2015/12/10 19:50:38| Max Mem  size: 65536 KB

2015/12/10 19:50:38| Max Swap size: 102400 KB

2015/12/10 19:50:38| Local cache digest enabled; rebuild/rewrite every
3600/3600 sec

2015/12/10 19:50:38| logfileOpen: opening log c:/squid/var/logs/store.log

2015/12/10 19:50:38| Rebuilding storage in C:/Squid/var/cache/squid (DIRTY)

2015/12/10 19:50:38| Using Least Load store dir selection

2015/12/10 19:50:38| Current Directory is C:\squid\sbin

2015/12/10 19:50:38| Loaded Icons.

2015/12/10 19:50:38| Accepting proxy HTTP connections at 0.0.0.0, port 3128,
FD 14.

2015/12/10 19:50:38| HTCP Disabled.

2015/12/10 19:50:38| Ready to serve requests.

2015/12/10 19:50:38| Done reading C:/Squid/var/cache/squid swaplog (0
entries)

2015/12/10 19:50:38| Finished rebuilding storage from disk.

2015/12/10 19:50:38|         0 Entries scanned

2015/12/10 19:50:38|         0 Invalid entries.

2015/12/10 19:50:38|         0 With invalid flags.

2015/12/10 19:50:38|         0 Objects loaded.

2015/12/10 19:50:38|         0 Objects expired.

2015/12/10 19:50:38|         0 Objects cancelled.

2015/12/10 19:50:38|         0 Duplicate URLs purged.

2015/12/10 19:50:38|         0 Swapfile clashes avoided.

2015/12/10 19:50:38|   Took 0.0 seconds (   0.0 objects/sec).

2015/12/10 19:50:38| Beginning Validation Procedure

2015/12/10 19:50:38|   Completed Validation Procedure

2015/12/10 19:50:38|   Validated 0 Entries

2015/12/10 19:50:38|   store_swap_size = 0k

2015/12/10 19:50:39| storeLateRelease: released 0 objects

----------------------------------------------------------------------------
----------------------

Squid 3.5.11 Squid.conf:

# Squid Proxy Configuration

 

acl localnet src all

#acl localnet src 172.16.50.0/24  # RFC1918 possible internal network

 

 

acl SSL_ports port 443

acl Safe_ports port 80                    # http

acl Safe_ports port 443                  # https

acl CONNECT method CONNECT

 

# Deny requests to certain unsafe ports

http_access deny !Safe_ports

 

# Deny CONNECT to other than secure SSL ports

http_access deny CONNECT !SSL_ports

 

http_access allow localnet

http_access allow localhost

 

# Lastly deny all other access to this proxy

http_access deny all

 

# Listens to port 3128

http_port 3130

 

dns_nameservers 172.16.50.9 172.16.50.13

 

max_filedescriptors 3200

 

# roll log file daily and keep 30 days

logfile_rotate 30

 

# access log format

logformat squid %tl %6tr %&gt;a %Ss/%03&gt;Hs %&lt;st %rm %ru %un %Sh/%&lt;A %mt

 

# debug_options             ALL,2

----------------------------------------------------------------------------
-----------

Squid 2.7.2 Squid.conf:

 

# Squid Proxy Configuration

 

http_port    3128

 

# acl and http_access to (&quot;whitelist.txt&quot;)

acl whitelist dstdomain  &quot;c:/squid/etc/whitelist.txt&quot;

http_access        allow     whitelist

 

# subnet source of proxy traffic

acl all src 0.0.0.0/0.0.0.0

acl localnet  src  0.0.0.0/0.0.0.0

 

# acl directives for ports and protocols

acl http      proto      http

acl https     proto      https

acl port_80   port       80

acl sslports  port       443-444

acl CONNECT   method     CONNECT

 

icp_port 0

htcp_port 0

snmp_port 0

 

# rules allowing whitelist domains

http_access allow http    port_80  whitelist localnet

http_access allow https   sslports whitelist localnet

 

# cache web pages directory

cache_dir ufs C:/Squid/var/cache/squid 100 16 256

cache_mem 64 MB

 

# log file roll weekly

access_log C:/squid/var/logs/access.log common

logfile_rotate 7

 

# catch-all rule

http_access deny all

 

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20151210/fd94037c/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20151210/fd94037c/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008251.html">[squid-users] help change cache dir
</A></li>
	<LI>Next message (by thread): <A HREF="008274.html">[squid-users] Squid 32-bit (2.7.2) much faster than Squid 64-bit (3.5.11)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8257">[ date ]</a>
              <a href="thread.html#8257">[ thread ]</a>
              <a href="subject.html#8257">[ subject ]</a>
              <a href="author.html#8257">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
