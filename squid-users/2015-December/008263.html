<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Fw: Squid 32-bit (2.7.2) much faster than Squid 64-bit (3.5.11)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Fw%3A%20Squid%2032-bit%20%282.7.2%29%20much%20faster%20than%20Squid%0A%2064-bit%20%283.5.11%29&In-Reply-To=%3C81537556.619395.1449825391887.JavaMail.yahoo%40mail.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008282.html">
   <LINK REL="Next"  HREF="008269.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Fw: Squid 32-bit (2.7.2) much faster than Squid 64-bit (3.5.11)</H1>
    <B>TarotApprentice</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Fw%3A%20Squid%2032-bit%20%282.7.2%29%20much%20faster%20than%20Squid%0A%2064-bit%20%283.5.11%29&In-Reply-To=%3C81537556.619395.1449825391887.JavaMail.yahoo%40mail.yahoo.com%3E"
       TITLE="[squid-users] Fw: Squid 32-bit (2.7.2) much faster than Squid 64-bit (3.5.11)">tarotapprentice at yahoo.com
       </A><BR>
    <I>Fri Dec 11 09:16:31 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008282.html">[squid-users] reverse proxy setup
</A></li>
        <LI>Next message (by thread): <A HREF="008269.html">[squid-users] Fw: Squid 32-bit (2.7.2) much faster than Squid 64-bit (3.5.11)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8263">[ date ]</a>
              <a href="thread.html#8263">[ thread ]</a>
              <a href="subject.html#8263">[ subject ]</a>
              <a href="author.html#8263">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sorry should have replied to the list.

MarkJ
 
----- Forwarded Message -----
&gt;<i>From: Tarot Apprentice &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">tarotapprentice at yahoo.com</A>&gt;
</I>&gt;<i>To: Patrick Flaherty &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">vze2k3sa at verizon.net</A>&gt; 
</I>&gt;<i>Sent: Friday, 11 December 2015, 14:10
</I>&gt;<i>Subject: Re: [squid-users] Squid 32-bit (2.7.2) much faster than Squid 64-bit (3.5.11)
</I>&gt;<i> 
</I>&gt;<i>Looking at the startup logs the 3.4.11 says &quot;store logging disabled&quot; (it had an error) so would account for some of the difference.
</I>&gt;<i>
</I>&gt;<i>MarkJ
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>On 11 Dec 2015, at 12:16 PM, Patrick Flaherty &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">vze2k3sa at verizon.net</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Hello,
</I>&gt;<i> 
</I>&gt;<i>Just following up on my slow 3.5.11 Squid server.  I loaded the 32-bit 2.7.2 version on the same box and it&#8217;s so much faster for me. Its 4 to 5 times faster for me on the same machine. Please any help appreciated. Amos, I think I cleaned up my 3.5.11 squid.conf properly. I think my 2.7.2 squid.conf needs work.
</I>&gt;<i>See below Startup Cache logs from both 3.5.11 and 2.7.2 and also the squid.conf files from 3.5.11 and 2.7.2.
</I>&gt;<i> 
</I>&gt;<i>Thank You,
</I>&gt;<i>Patrick
</I>&gt;<i> 
</I>&gt;<i>Squid 3.5.11 Startup Cache Log:
</I>&gt;<i>2015/12/10 19:50:09 kid1| Current Directory is /cygdrive/c/Windows/system32
</I>&gt;<i>2015/12/10 19:50:09 kid1| Starting Squid Cache version 3.5.11 for x86_64-unknown-cygwin...
</I>&gt;<i>2015/12/10 19:50:09 kid1| Service Name: squid
</I>&gt;<i>2015/12/10 19:50:09 kid1| Process ID 1968
</I>&gt;<i>2015/12/10 19:50:09 kid1| Process Roles: worker
</I>&gt;<i>2015/12/10 19:50:09 kid1| With 3200 file descriptors available
</I>&gt;<i>2015/12/10 19:50:09 kid1| Initializing IP Cache...
</I>&gt;<i>2015/12/10 19:50:09 kid1| parseEtcHosts: /etc/hosts: (2) No such file or directory
</I>&gt;<i>2015/12/10 19:50:09 kid1| DNS Socket created at [::], FD 5
</I>&gt;<i>2015/12/10 19:50:09 kid1| DNS Socket created at 0.0.0.0, FD 6
</I>&gt;<i>2015/12/10 19:50:09 kid1| Adding nameserver 172.16.50.9 from squid.conf
</I>&gt;<i>2015/12/10 19:50:09 kid1| Adding nameserver 172.16.50.13 from squid.conf
</I>&gt;<i>2015/12/10 19:50:09 kid1| Logfile: opening log daemon:/var/log/squid/access.log
</I>&gt;<i>2015/12/10 19:50:09 kid1| Logfile Daemon: opening log /var/log/squid/access.log
</I>&gt;<i>2015/12/10 19:50:09 kid1| WARNING: no_suid: setuid(0): (22) Invalid argument
</I>&gt;<i>2015/12/10 19:50:09 kid1| Store logging disabled
</I>&gt;<i>2015/12/10 19:50:09 kid1| Swap maxSize 0 + 262144 KB, estimated 20164 objects
</I>&gt;<i>2015/12/10 19:50:09 kid1| Target number of buckets: 1008
</I>&gt;<i>2015/12/10 19:50:09 kid1| Using 8192 Store buckets
</I>&gt;<i>2015/12/10 19:50:09 kid1| Max Mem  size: 262144 KB
</I>&gt;<i>2015/12/10 19:50:09 kid1| Max Swap size: 0 KB
</I>&gt;<i>2015/12/10 19:50:09 kid1| Using Least Load store dir selection
</I>&gt;<i>2015/12/10 19:50:09 kid1| Current Directory is /cygdrive/c/Windows/system32
</I>&gt;<i>2015/12/10 19:50:09 kid1| Finished loading MIME types and icons.
</I>&gt;<i>2015/12/10 19:50:09 kid1| HTCP Disabled.
</I>&gt;<i>2015/12/10 19:50:09 kid1| Squid plugin modules loaded: 0
</I>&gt;<i>2015/12/10 19:50:09 kid1| Adaptation support is off.
</I>&gt;<i>2015/12/10 19:50:09 kid1| Accepting HTTP Socket connections at local=[::]:3130 remote=[::] FD 10 flags=9
</I>&gt;<i>2015/12/10 19:50:11 kid1| storeLateRelease: released 0 objects 
</I>&gt;<i>-----------------------------------------------------------------------------------------------------------
</I>&gt;<i>Squid 2.7.2 Startup Cache Log:
</I>&gt;<i>2015/12/10 19:50:38| Starting Squid Cache version 2.7.STABLE8 for i686-pc-winnt...
</I>&gt;<i>2015/12/10 19:50:38| Running as Squid-Proxy-2.7.2 Windows System Service on Windows Server 2008
</I>&gt;<i>2015/12/10 19:50:38| Service command line is: 
</I>&gt;<i>2015/12/10 19:50:38| Process ID 2644
</I>&gt;<i>2015/12/10 19:50:38| With 2048 file descriptors available
</I>&gt;<i>2015/12/10 19:50:38| With 2048 CRT stdio descriptors available
</I>&gt;<i>2015/12/10 19:50:38| Windows sockets initialized
</I>&gt;<i>2015/12/10 19:50:38| Using select for the IO loop
</I>&gt;<i>2015/12/10 19:50:38| Performing DNS Tests...
</I>&gt;<i>2015/12/10 19:50:38| Successful DNS name lookup tests...
</I>&gt;<i>2015/12/10 19:50:38| DNS Socket created at 0.0.0.0, port 50961, FD 5
</I>&gt;<i>2015/12/10 19:50:38| Adding DHCP nameserver 172.16.50.9 from Registry
</I>&gt;<i>2015/12/10 19:50:38| Adding DHCP nameserver 172.16.50.13 from Registry
</I>&gt;<i>2015/12/10 19:50:38| Adding DHCP nameserver 4.2.2.3 from Registry
</I>&gt;<i>2015/12/10 19:50:38| Adding domain  from Registry
</I>&gt;<i>2015/12/10 19:50:38| User-Agent logging is disabled.
</I>&gt;<i>2015/12/10 19:50:38| Referer logging is disabled.
</I>&gt;<i>2015/12/10 19:50:38| logfileOpen: opening log C:/squid/var/logs/access.log
</I>&gt;<i>2015/12/10 19:50:38| Unlinkd pipe opened on FD 8
</I>&gt;<i>2015/12/10 19:50:38| Swap maxSize 102400 + 65536 KB, estimated 12918 objects
</I>&gt;<i>2015/12/10 19:50:38| Target number of buckets: 645
</I>&gt;<i>2015/12/10 19:50:38| Using 8192 Store buckets
</I>&gt;<i>2015/12/10 19:50:38| Max Mem  size: 65536 KB
</I>&gt;<i>2015/12/10 19:50:38| Max Swap size: 102400 KB
</I>&gt;<i>2015/12/10 19:50:38| Local cache digest enabled; rebuild/rewrite every 3600/3600 sec
</I>&gt;<i>2015/12/10 19:50:38| logfileOpen: opening log c:/squid/var/logs/store.log
</I>&gt;<i>2015/12/10 19:50:38| Rebuilding storage in C:/Squid/var/cache/squid (DIRTY)
</I>&gt;<i>2015/12/10 19:50:38| Using Least Load store dir selection
</I>&gt;<i>2015/12/10 19:50:38| Current Directory is C:\squid\sbin
</I>&gt;<i>2015/12/10 19:50:38| Loaded Icons.
</I>&gt;<i>2015/12/10 19:50:38| Accepting proxy HTTP connections at 0.0.0.0, port 3128, FD 14.
</I>&gt;<i>2015/12/10 19:50:38| HTCP Disabled.
</I>&gt;<i>2015/12/10 19:50:38| Ready to serve requests.
</I>&gt;<i>2015/12/10 19:50:38| Done reading C:/Squid/var/cache/squid swaplog (0 entries)
</I>&gt;<i>2015/12/10 19:50:38| Finished rebuilding storage from disk.
</I>&gt;<i>2015/12/10 19:50:38|         0 Entries scanned
</I>&gt;<i>2015/12/10 19:50:38|         0 Invalid entries.
</I>&gt;<i>2015/12/10 19:50:38|         0 With invalid flags.
</I>&gt;<i>2015/12/10 19:50:38|         0 Objects loaded.
</I>&gt;<i>2015/12/10 19:50:38|         0 Objects expired.
</I>&gt;<i>2015/12/10 19:50:38|         0 Objects cancelled.
</I>&gt;<i>2015/12/10 19:50:38|         0 Duplicate URLs purged.
</I>&gt;<i>2015/12/10 19:50:38|         0 Swapfile clashes avoided.
</I>&gt;<i>2015/12/10 19:50:38|   Took 0.0 seconds (   0.0 objects/sec).
</I>&gt;<i>2015/12/10 19:50:38| Beginning Validation Procedure
</I>&gt;<i>2015/12/10 19:50:38|   Completed Validation Procedure
</I>&gt;<i>2015/12/10 19:50:38|   Validated 0 Entries
</I>&gt;<i>2015/12/10 19:50:38|   store_swap_size = 0k
</I>&gt;<i>2015/12/10 19:50:39| storeLateRelease: released 0 objects
</I>&gt;<i>--------------------------------------------------------------------------------------------------
</I>&gt;<i>Squid 3.5.11 Squid.conf:
</I>&gt;<i># Squid Proxy Configuration
</I>&gt;<i> 
</I>&gt;<i>acl localnet src all
</I>&gt;<i>#acl localnet src 172.16.50.0/24  # RFC1918 possible internal network
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>acl SSL_ports port 443
</I>&gt;<i>acl Safe_ports port 80                    # http
</I>&gt;<i>acl Safe_ports port 443                  # https
</I>&gt;<i>acl CONNECT method CONNECT
</I>&gt;<i> 
</I>&gt;<i># Deny requests to certain unsafe ports
</I>&gt;<i>http_access deny !Safe_ports
</I>&gt;<i> 
</I>&gt;<i># Deny CONNECT to other than secure SSL ports
</I>&gt;<i>http_access deny CONNECT !SSL_ports
</I>&gt;<i> 
</I>&gt;<i>http_access allow localnet
</I>&gt;<i>http_access allow localhost
</I>&gt;<i> 
</I>&gt;<i># Lastly deny all other access to this proxy
</I>&gt;<i>http_access deny all
</I>&gt;<i> 
</I>&gt;<i># Listens to port 3128
</I>&gt;<i>http_port 3130
</I>&gt;<i> 
</I>&gt;<i>dns_nameservers 172.16.50.9 172.16.50.13
</I>&gt;<i> 
</I>&gt;<i>max_filedescriptors 3200
</I>&gt;<i> 
</I>&gt;<i># roll log file daily and keep 30 days
</I>&gt;<i>logfile_rotate 30
</I>&gt;<i> 
</I>&gt;<i># access log format
</I>&gt;<i>logformat squid %tl %6tr %&gt;a %Ss/%03&gt;Hs %&lt;st %rm %ru %un %Sh/%&lt;A %mt
</I>&gt;<i> 
</I>&gt;<i># debug_options             ALL,2
</I>&gt;<i>---------------------------------------------------------------------------------------
</I>&gt;<i>Squid 2.7.2 Squid.conf:
</I>&gt;<i> 
</I>&gt;<i># Squid Proxy Configuration
</I>&gt;<i> 
</I>&gt;<i>http_port    3128
</I>&gt;<i> 
</I>&gt;<i># acl and http_access to (&quot;whitelist.txt&quot;)
</I>&gt;<i>acl whitelist dstdomain  &quot;c:/squid/etc/whitelist.txt&quot;
</I>&gt;<i>http_access        allow     whitelist
</I>&gt;<i> 
</I>&gt;<i># subnet source of proxy traffic
</I>&gt;<i>acl all src 0.0.0.0/0.0.0.0
</I>&gt;<i>acl localnet  src  0.0.0.0/0.0.0.0
</I>&gt;<i> 
</I>&gt;<i># acl directives for ports and protocols
</I>&gt;<i>acl http      proto      http
</I>&gt;<i>acl https     proto      https
</I>&gt;<i>acl port_80   port       80
</I>&gt;<i>acl sslports  port       443-444
</I>&gt;<i>acl CONNECT   method     CONNECT
</I>&gt;<i> 
</I>&gt;<i>icp_port 0
</I>&gt;<i>htcp_port 0
</I>&gt;<i>snmp_port 0
</I>&gt;<i> 
</I>&gt;<i># rules allowing whitelist domains
</I>&gt;<i>http_access allow http    port_80  whitelist localnet
</I>&gt;<i>http_access allow https   sslports whitelist localnet
</I>&gt;<i> 
</I>&gt;<i># cache web pages directory
</I>&gt;<i>cache_dir ufs C:/Squid/var/cache/squid 100 16 256
</I>&gt;<i>cache_mem 64 MB
</I>&gt;<i> 
</I>&gt;<i># log file roll weekly
</I>&gt;<i>access_log C:/squid/var/logs/access.log common
</I>&gt;<i>logfile_rotate 7
</I>&gt;<i> 
</I>&gt;<i># catch-all rule
</I>&gt;<i>http_access deny all
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>_______________________________________________
</I>&gt;&gt;<i>squid-users mailing list
</I>&gt;&gt;<i><A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;<i><A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008282.html">[squid-users] reverse proxy setup
</A></li>
	<LI>Next message (by thread): <A HREF="008269.html">[squid-users] Fw: Squid 32-bit (2.7.2) much faster than Squid 64-bit (3.5.11)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8263">[ date ]</a>
              <a href="thread.html#8263">[ thread ]</a>
              <a href="subject.html#8263">[ subject ]</a>
              <a href="author.html#8263">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
