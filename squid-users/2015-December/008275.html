<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Fw: Squid 32-bit (2.7.2) much faster than
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Fw%3A%20Squid%2032-bit%20%282.7.2%29%20much%20faster%20than&In-Reply-To=%3C000601d13443%24ad8d5930%2408a80b90%24%40verizon.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008270.html">
   <LINK REL="Next"  HREF="008281.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Fw: Squid 32-bit (2.7.2) much faster than</H1>
    <B>Patrick Flaherty</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Fw%3A%20Squid%2032-bit%20%282.7.2%29%20much%20faster%20than&In-Reply-To=%3C000601d13443%24ad8d5930%2408a80b90%24%40verizon.net%3E"
       TITLE="[squid-users] Fw: Squid 32-bit (2.7.2) much faster than">vze2k3sa at verizon.net
       </A><BR>
    <I>Fri Dec 11 18:42:24 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008270.html">[squid-users] https and URL rewriting
</A></li>
        <LI>Next message (by thread): <A HREF="008281.html">[squid-users] Fw: Squid 32-bit (2.7.2) much faster than
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8275">[ date ]</a>
              <a href="thread.html#8275">[ thread ]</a>
              <a href="subject.html#8275">[ subject ]</a>
              <a href="author.html#8275">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I added the following line to my squid.conf and now Squid 3.5.11 is as fast as 2.7.2 and feels like direct internet access.

dns_v4_first on 

Thank You,
Patrick


Message: 3
Date: Sat, 12 Dec 2015 02:47:05 +1300
From: Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Fw: Squid 32-bit (2.7.2) much faster than
	Squid 64-bit (3.5.11)
Message-ID: &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">566AD3D9.4020609 at treenet.co.nz</A>&gt;
Content-Type: text/plain; charset=utf-8

On 11/12/2015 10:16 p.m., TarotApprentice wrote:
&gt;<i> Sorry should have replied to the list.
</I>&gt;<i> 
</I>&gt;<i> MarkJ
</I>&gt;<i>  
</I>&gt;<i> ----- Forwarded Message -----
</I>&gt;&gt;<i> From: Tarot Apprentice
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Looking at the startup logs the 3.4.11 says &quot;store logging disabled&quot; (it had an error) so would account for some of the difference.
</I>&gt;&gt;<i>
</I>

So the builds are different:

* OS integration:
Squid-2 builds from Acme being made with Visual Studio. So they have
native Windows API integration.
Squid-3 builds by Diladele are using Cgwin. So a whole OS abstraction
layer between Squid and Windows.

* HTTP 1.x:
Squid-2 is HTTP/1.0-only.
Squid-3 does HTTP/1.1 and does a whole lot more protocol processing to
detect whether 1.1 features are being used.

* X-bit:
As you already said 32-bit vs 64-bit. I read some research recently that
showed 64-bit is only faster in benchmarks when there is hardware layer
retardation being applied to emulating the 32-bit operations on the same
hardware. So YMMV.

* Features:
Squid-2 has less features than Squid-3.5. It also has less of them
enabled by default. YMMV.
 - This includes IPv6 support. Squid-3 waits for both IPv4 and IPv6
responses from DNS. Squid-2 will not be doing that.


The configs are different:

* DNS:
Squid-2 is configured to use the Windows Registry DNS servers (default).
Squid-3 is explicitly configured with dns_nameservers to override that
to use only a sub-set of the Registry listed NS.
 - if that one DNS server is running much faster than the others it can
account for a lot of speed variance.

* Cache:
Squid-2 is using a 100MB disk cache + 64MB RAM cache.
Squid-3 is using only a 256MB RAM cache.
 - Usually this should count against Squid-2 in most traffic. But if
your Squid are processing objects over 4MB size, then Squid-2 has the
advantage of storing them to HDD and fast-ish HITs later. Where Squid-3
has to MISS.


&gt;&gt;<i>
</I>&gt;&gt;<i> On 11 Dec 2015, at 12:16 PM, Patrick Flaherty wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hello,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Just following up on my slow 3.5.11 Squid server.  I loaded the 32-bit 2.7.2 version on the same box and it&#8217;s so much faster for me. Its 4 to 5 times faster for me on the same machine. Please any help appreciated. Amos, I think I cleaned up my 3.5.11 squid.conf properly. I think my 2.7.2 squid.conf needs work.
</I>&gt;&gt;<i> See below Startup Cache logs from both 3.5.11 and 2.7.2 and also the squid.conf files from 3.5.11 and 2.7.2.
</I>&gt;&gt;<i>
</I>
Both configs look roughly equivalent to me. Except the Squid-3 config
defines localnet as being &quot;all&quot; then does an &quot;allow localnet&quot;. Making it
an open proxy. The Squid-2 is at least restricted to the whitelist domains.

Though I dont think that is affecting your results. Uunless someone
figured out how to open a tunnel through it already and is using up the
bandwidth with an not-yet-logged huge transaction.

Amos



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008270.html">[squid-users] https and URL rewriting
</A></li>
	<LI>Next message (by thread): <A HREF="008281.html">[squid-users] Fw: Squid 32-bit (2.7.2) much faster than
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8275">[ date ]</a>
              <a href="thread.html#8275">[ thread ]</a>
              <a href="subject.html#8275">[ subject ]</a>
              <a href="author.html#8275">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
