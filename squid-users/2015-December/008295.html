<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Fw: Squid 32-bit (2.7.2) much faster than 64-bit (3.5.11)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Fw%3A%20Squid%2032-bit%20%282.7.2%29%20much%20faster%20than%2064-bit%0A%20%283.5.11%29&In-Reply-To=%3C005701d135b3%24bac1b490%2430451db0%24%40verizon.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008292.html">
   <LINK REL="Next"  HREF="008305.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Fw: Squid 32-bit (2.7.2) much faster than 64-bit (3.5.11)</H1>
    <B>Patrick Flaherty</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Fw%3A%20Squid%2032-bit%20%282.7.2%29%20much%20faster%20than%2064-bit%0A%20%283.5.11%29&In-Reply-To=%3C005701d135b3%24bac1b490%2430451db0%24%40verizon.net%3E"
       TITLE="[squid-users] Fw: Squid 32-bit (2.7.2) much faster than 64-bit (3.5.11)">vze2k3sa at verizon.net
       </A><BR>
    <I>Sun Dec 13 14:37:01 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008292.html">[squid-users] Fw: Squid 32-bit (2.7.2) much faster than 64-bit (3.5.11)
</A></li>
        <LI>Next message (by thread): <A HREF="008305.html">[squid-users] Fw: Squid 32-bit (2.7.2) much faster than 64-bit (3.5.11)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8295">[ date ]</a>
              <a href="thread.html#8295">[ thread ]</a>
              <a href="subject.html#8295">[ subject ]</a>
              <a href="author.html#8295">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Without 'dns_v4_first', what is sitting on top of the IPv6 connection
timeout? Is it a DNS lookup? Regardless of it being IPv6 timing out or IPv6
timing out falling back on IPv4 and having success of a long process to
maybe should be logged as a warning?

Second question, without 'dns_v4_first', was I experiencing a IPv6 timeout
and it falling back on IPv4? Because it does ultimately work... just slow.

Third question if the answer to question 2 is yes, should the DNS IPv4
lookup (successful) be cached so that next time it is fast?

Thanks Amos,
Patrick

Message: 3
Date: Sun, 13 Dec 2015 19:20:35 +1300
From: Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Fw: Squid 32-bit (2.7.2) much faster than
	64-bit (3.5.11)
Message-ID: &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">566D0E33.2060002 at treenet.co.nz</A>&gt;
Content-Type: text/plain; charset=utf-8

On 13/12/2015 11:44 a.m., Patrick Flaherty wrote:
&gt;<i> I agree, though it would be nice if there were some *warning* in the
</I>CACHE.LOG about slow DNS transactions.

It's not the DNS itslf. That appears to be working fine.

dns_v4_first having a good effect means that the DNS for A and AAAA are both
happening fast. The TCP connection opening to IPv6 servers is timing out
(dns_v4_first sorts the A to be tried first at the TCP stage). That kind of
thing happens a lot.

If you have your timeouts set to be short Squid will log transactions as
TIMEOUT. Otherwise they are just like any other broken server IP address.
Retried, but slow in getting around to the IPv4 which works.

Amos



------------------------------

Subject: Digest Footer

_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


------------------------------

End of squid-users Digest, Vol 16, Issue 50
*******************************************


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008292.html">[squid-users] Fw: Squid 32-bit (2.7.2) much faster than 64-bit (3.5.11)
</A></li>
	<LI>Next message (by thread): <A HREF="008305.html">[squid-users] Fw: Squid 32-bit (2.7.2) much faster than 64-bit (3.5.11)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8295">[ date ]</a>
              <a href="thread.html#8295">[ thread ]</a>
              <a href="subject.html#8295">[ subject ]</a>
              <a href="author.html#8295">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
