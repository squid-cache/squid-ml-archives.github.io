<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] CVE-2009-0801
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20CVE-2009-0801&In-Reply-To=%3C56749C26.4010808%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008394.html">
   <LINK REL="Next"  HREF="008411.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] CVE-2009-0801</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20CVE-2009-0801&In-Reply-To=%3C56749C26.4010808%40treenet.co.nz%3E"
       TITLE="[squid-users] CVE-2009-0801">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Dec 18 23:52:06 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008394.html">[squid-users] CVE-2009-0801
</A></li>
        <LI>Next message (by thread): <A HREF="008411.html">[squid-users] CVE-2009-0801
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8395">[ date ]</a>
              <a href="thread.html#8395">[ thread ]</a>
              <a href="subject.html#8395">[ subject ]</a>
              <a href="author.html#8395">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 19/12/2015 12:30 p.m., dc wrote:
&gt;<i> Thank you very much for this detailed explanation!
</I>&gt;<i> 
</I>&gt;<i> I have a setup where squid doesn't know about the original destination
</I>&gt;<i> IP address,
</I>
Why not?
* NAT/TPROXY is mandatory to happen on the Squid machine directly since
kernel and Squid are performing integrated operations.
* PROXY protocol passes the ORIGINAL_DST explicitly over the wire.
* SSL-Bump all happens &quot;inside Squid&quot;.

Those are the only forms of interception Squid supports.


&gt;<i> so I tried to enforce using DNS responses as destination
</I>&gt;<i> addresses for any request, without success. Looking at the relevant code
</I>&gt;<i> I found the limitation (and CVE) to be quite obscure, but now I know why
</I>&gt;<i> it's there.
</I>&gt;<i> Since the vulnerability can't be exploited in my case anyway, I have
</I>&gt;<i> altered the code to allow the replacement of the destination address
</I>&gt;<i> regardless of a mismatch of the original dst.
</I>
If you are intercepting it can always be exploited. The browser sandbox
is just the easiest/common way to do so, with a known malware strain.
Any client capable of sending requests via an interception proxy can
achieve the same result with normal TCP connections.

If you are not intercepting then it is not relevant. Misconfigured
reverse proxy need to be fixed in the squid.conf and network design levels.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008394.html">[squid-users] CVE-2009-0801
</A></li>
	<LI>Next message (by thread): <A HREF="008411.html">[squid-users] CVE-2009-0801
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8395">[ date ]</a>
              <a href="thread.html#8395">[ thread ]</a>
              <a href="subject.html#8395">[ subject ]</a>
              <a href="author.html#8395">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
