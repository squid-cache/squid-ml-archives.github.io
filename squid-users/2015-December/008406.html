<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Fwd: Squid configuration advise
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Fwd%3A%20Squid%20configuration%20advise&In-Reply-To=%3CCAA-A7Mo-g8Cyp8EtA2gbg-bKNwaq4ObcpF%3DKnktcmmTGjrdMFg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008403.html">
   <LINK REL="Next"  HREF="008408.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Fwd: Squid configuration advise</H1>
    <B>Jean Christophe Ventura</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Fwd%3A%20Squid%20configuration%20advise&In-Reply-To=%3CCAA-A7Mo-g8Cyp8EtA2gbg-bKNwaq4ObcpF%3DKnktcmmTGjrdMFg%40mail.gmail.com%3E"
       TITLE="[squid-users] Fwd: Squid configuration advise">ventura.jeanchristophe at gmail.com
       </A><BR>
    <I>Sat Dec 19 20:05:55 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008403.html">[squid-users] Fwd: Squid configuration advise
</A></li>
        <LI>Next message (by thread): <A HREF="008408.html">[squid-users] squid cache peer issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8406">[ date ]</a>
              <a href="thread.html#8406">[ thread ]</a>
              <a href="subject.html#8406">[ subject ]</a>
              <a href="author.html#8406">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>powerpc is a good cpu
AIX.. well i know it a litte bit but even IBM doesn't like it anymore (lot
of stuff under powerpc but not under AIX, spectrum scale and other ibm
slideware)

some time you get more powerhorse under a RHEL/PowerPC than AIX/PowerPC
even with the IBM AIX support... it's life and like other sysadmin we go to
the best OS when we have choice ;)


2015-12-19 20:56 GMT+01:00 Yuri Voinov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">yvoinov at gmail.com</A>&gt;:

&gt;<i>
</I>&gt;<i> -----BEGIN PGP SIGNED MESSAGE-----
</I>&gt;<i> Hash: SHA256
</I>&gt;<i>
</I>&gt;<i> AIX great system in good hands. ;)
</I>&gt;<i>
</I>&gt;<i> All the matter in the gasket between the seats and the console. :D
</I>&gt;<i>
</I>&gt;<i> 20.12.15 1:53, Jean Christophe Ventura &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;<i> &gt; Well
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; If it was my project : archlinux using yaourt and each needed package
</I>&gt;<i> &gt; compiled in a VM
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I work at a company as sysadmin and proxy aren't in my side (network
</I>&gt;<i> &gt; things...)
</I>&gt;<i> &gt; So if i can configure a repository or sync a repository with the
</I>&gt;<i> response :
</I>&gt;<i> &gt; go head it will be here for years.., if not i have to deal with distrib
</I>&gt;<i> &gt; package :P
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Even in a VM i prefered a debian server than a RHEL
</I>&gt;<i> &gt; By the way the good thing it's not a AIX proxy ;)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I do not understand the love of archaeological fossils. It repositories
</I>&gt;<i> &gt; such junk lying around? :-D
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 20.12.15 0:56, Jean Christophe Ventura &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;<i> &gt; &gt; Hi,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; I'm currently working to migrate RHEL5 2.7 Squid to RHEL7 3.3.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; I have migrated the config files to be 3.3 compliant (CIDR, remove of
</I>&gt;<i> &gt; &gt; deprecated function,change cache from UFS to AUFS) without any change
</I>&gt;<i> &gt; &gt; (cache mem, policy, smp)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; The new platform is a 4 node R610 (24 proc hyperthreading activate)
</I>&gt;<i> &gt; &gt; with 48GB of RAM, only 143GB disk in RAID for OS and cache. Each node
</I>&gt;<i> &gt; &gt; is connected to the network using 2x1Gbit bonding 2/3 level (some
</I>&gt;<i> &gt; &gt; network port are available on the server).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; bandwidth allocated for Internet users 400Mbit
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; The difference between the old plateform and the new one doesn't seem
</I>&gt;<i> &gt; &gt; to be very fantastic :P
</I>&gt;<i> &gt; &gt; I have read the mailing list history alot.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; Squid release:
</I>&gt;<i> &gt; &gt; So i know 3.3 isn't anymore maintain but this infrastructure will be
</I>&gt;<i> &gt; &gt; not maintain by myself and i don't think that people behind will do
</I>&gt;<i> &gt; &gt; the update them self
</I>&gt;<i> &gt; &gt; If a official repository exist, maybe this question will be reopen
</I>&gt;<i> &gt; &gt; (from what i have read it's more some of you build packages from
</I>&gt;<i> &gt; &gt; source and give them to people)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; Squid auth:
</I>&gt;<i> &gt; &gt; It's transparent/basic auth only filtering some ip with acl.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; Squid bandwidth:
</I>&gt;<i> &gt; &gt; Currently a squid node treat something like 30/50Mbit (information
</I>&gt;<i> &gt; &gt; recovered using iftop)
</I>&gt;<i> &gt; &gt; From previous viewed mail i think it's normal for a non-smp
</I>&gt;<i> configuration
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; Squid measure:
</I>&gt;<i> &gt; &gt; [root at xxxx ~]# squidclient mgr:5min | grep 'client_http.requests'
</I>&gt;<i> &gt; &gt; client_http.requests = 233.206612/sec
</I>&gt;<i> &gt; &gt; other info
</I>&gt;<i> &gt; &gt; Cache information for squid:
</I>&gt;<i> &gt; &gt;         Hits as % of all requests:      5min: 6.8%, 60min: 7.1%
</I>&gt;<i> &gt; &gt;         Hits as % of bytes sent:        5min: 4.7%, 60min: 4.4%
</I>&gt;<i> &gt; &gt;         Memory hits as % of hit requests:       5min: 21.4%, 60min:
</I>&gt;<i> 21.5%
</I>&gt;<i> &gt; &gt;         Disk hits as % of hit requests: 5min: 34.7%, 60min: 30.8%
</I>&gt;<i> &gt; &gt;         Storage Swap size:      9573016 KB
</I>&gt;<i> &gt; &gt;         Storage Swap capacity:  91.3% used,  8.7% free
</I>&gt;<i> &gt; &gt;         Storage Mem size:       519352 KB
</I>&gt;<i> &gt; &gt;         Storage Mem capacity:   99.1% used,  0.9% free
</I>&gt;<i> &gt; &gt;         Mean Object Size:       47.71 KB
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; Now question and advise :
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; This metrics seem too low for me. anyone of you agree ?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; 4 node x 50Mbit node= 200Mbit
</I>&gt;<i> &gt; &gt; To treat the maxbandwidth (400Mbit) + the lost of one host i need to
</I>&gt;<i> &gt; &gt; configure 4 thread by node.
</I>&gt;<i> &gt; &gt; Is there any reason or brillant idea for more (i will have some core
</I>&gt;<i> &gt; &gt; still available) ? calculation too empirical ?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; This url <A HREF="http://wiki.squid-cache.org/ConfigExamples/SmpCarpCluster">http://wiki.squid-cache.org/ConfigExamples/SmpCarpCluster</A>
</I>&gt;<i> &gt; &gt; seem to be a good start :P
</I>&gt;<i> &gt; &gt; Using this method i can interconnect each proxy to share their cache
</I>&gt;<i> &gt; &gt; (maybe using dedicated network port). Usefull or not ? may this
</I>&gt;<i> &gt; &gt; increase the hit ratio ? if this idea is'nt stupid interconnet using
</I>&gt;<i> &gt; &gt; the frontend only or directy to each ?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; For now i have :
</I>&gt;<i> &gt; &gt; - 100GB of disk available for cache
</I>&gt;<i> &gt; &gt; - 40GB   of RAM (let 8 for OS + squid disk cache related ram usage)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; 1 front with the RAM cache and 4 back with disk cache.
</I>&gt;<i> &gt; &gt; AUFS or ROCK cache? mix of them ? 50% each ? maybe another rules ?
</I>&gt;<i> &gt; &gt; (i think it's will be linked to the cache content but any advise or
</I>&gt;<i> &gt; &gt; method is welcome)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; I can get more speed and/or space for disk cache using SAN, do you
</I>&gt;<i> &gt; &gt; know if the data is sequential or random ?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; Any advise/rules to increase the hit ratio ? :)
</I>&gt;<i> &gt; &gt; Any general advise/rules ?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; Thanks for your help
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; Jean Christophe VENTURA
</I>&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; squid-users mailing list
</I>&gt;<i> &gt; &gt; squid-users at lists.squid-cache.org
</I>&gt;<i> &gt; &gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> -----BEGIN PGP SIGNATURE-----
</I>&gt;<i> Version: GnuPG v2
</I>&gt;<i>
</I>&gt;<i> iQEcBAEBCAAGBQJWdbZlAAoJENNXIZxhPexGrRoH/3c+Fdii20mZJQplh5iayrQY
</I>&gt;<i> H2oQwYJhSw4S61NonryqPTLAxgfa8Q2De7LCpfhk52vWUvNk27WSRekQFEbs8mNO
</I>&gt;<i> AHthD1uNegGg0rJqLyRmLdPEArECtyTFSg7sZADWFenUphxHjYZZKPrz3qEb357X
</I>&gt;<i> pjA2PrNOo2i8bKVtDlTQP/mElnUoHSWG+GJWf/CROiB5/hUdwcyfagkTyB8mjqFo
</I>&gt;<i> b0FYj+d0KT4mtawWLOoIa06S1cIeUUVsyHGcodqD9rwTsNjKI3QiXWQFwCi+ToAf
</I>&gt;<i> Jrk1958Q3QjvqOaiYpCGAwpaeU7K02Prsa3WclLtud0gvXuDSq9uhI65Z32XyAQ=
</I>&gt;<i> =sIHo
</I>&gt;<i> -----END PGP SIGNATURE-----
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20151219/eed50b18/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20151219/eed50b18/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008403.html">[squid-users] Fwd: Squid configuration advise
</A></li>
	<LI>Next message (by thread): <A HREF="008408.html">[squid-users] squid cache peer issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8406">[ date ]</a>
              <a href="thread.html#8406">[ thread ]</a>
              <a href="subject.html#8406">[ subject ]</a>
              <a href="author.html#8406">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
