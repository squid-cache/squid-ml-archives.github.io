<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Refresh pattern issue in squid 3.1.20
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Refresh%20pattern%20issue%20in%20squid%203.1.20&In-Reply-To=%3CCA%2B86yMjY2Pq8b0PD8TTJmCarHSd39VEGhSkM9hu%2B7MmaBT%3D%2BCw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008431.html">
   <LINK REL="Next"  HREF="008435.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Refresh pattern issue in squid 3.1.20</H1>
    <B>SaRaVanAn</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Refresh%20pattern%20issue%20in%20squid%203.1.20&In-Reply-To=%3CCA%2B86yMjY2Pq8b0PD8TTJmCarHSd39VEGhSkM9hu%2B7MmaBT%3D%2BCw%40mail.gmail.com%3E"
       TITLE="[squid-users] Refresh pattern issue in squid 3.1.20">saravanan.nagarajan87 at gmail.com
       </A><BR>
    <I>Mon Dec 28 04:30:22 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008431.html">[squid-users] Refresh pattern issue in squid 3.1.20
</A></li>
        <LI>Next message (by thread): <A HREF="008435.html">[squid-users] Refresh pattern issue in squid 3.1.20
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8434">[ date ]</a>
              <a href="thread.html#8434">[ thread ]</a>
              <a href="subject.html#8434">[ subject ]</a>
              <a href="author.html#8434">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for prompt response.

I want to match all the URL's which has a pattern of &quot;wsj&quot; (example: *.
wsj.com, *.wsj.net, *.wsj.edu ) . Does wildcard makes sense in squid
refresh pattern? Can we have something like this?

 refresh_pattern -i ^<A HREF="http://*\.wsj\.*/">http://*\.wsj\.*/</A> 10 200% 10 \
    override-expire reload-into-ims


- Saravanan N

On Sun, Dec 27, 2015 at 7:15 PM, Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt; wrote:

&gt;<i> On 28/12/2015 1:30 p.m., SaRaVanAn wrote:
</I>&gt;<i> &gt; Hi,
</I>&gt;<i> &gt; We are using squid 3.1.20 in our box. We are facing issues on configuring
</I>&gt;<i> &gt; and validating the refresh patterns. It looks like squid is not honoring
</I>&gt;<i> &gt; the refresh patterns properly.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; *configuration*
</I>&gt;<i> &gt; *refresh_pattern -i ^<A HREF="http://.wsj./.*">http://.wsj./.*</A> 10 200% 10 override-expire
</I>&gt;<i> &gt; override-lastmod reload-into-ims ignore-reload*
</I>&gt;<i> &gt; refresh_pattern -i \.(gif|png|jpg|jpeg|ico)$ 480 100% 480 override-expire
</I>&gt;<i> &gt; override-lastmod reload-into-ims
</I>&gt;<i> &gt; refresh_pattern -i \.(htm|html|js|css)$ 480 100% 480 override-expire
</I>&gt;<i> &gt; override-lastmod reload-into-ims
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; refresh_pattern ^ftp:           1440    20%     10080
</I>&gt;<i> &gt; refresh_pattern ^gopher:        1440    0%      1440
</I>&gt;<i> &gt; refresh_pattern -i (/cgi-bin/|\?) 0     0%      0
</I>&gt;<i> &gt; refresh_pattern .               0       20%     4320
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; As per above refresh pattern squid should refresh the cache every ten
</I>&gt;<i> &gt; minutes for &quot;*^<A HREF="http://.wsj./.*">http://.wsj./.*</A>&quot; .  *But I am always getting either
</I>&gt;<i> &gt; TCP_HIT/TCP_MEM_HIT even after hours. Why is it so? . Please find the
</I>&gt;<i> logs
</I>&gt;<i> &gt; below
</I>&gt;<i>
</I>&gt;<i> Because none of the log entries match the regex pattern &quot;^<A HREF="http://">http://</A>
</I>&gt;<i> .wsj./.*&quot;.
</I>&gt;<i>
</I>&gt;<i> PS. the trailing &quot;.* is useless, the other uses of '.' only match one
</I>&gt;<i> single character.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Try this for more correct behaviour:
</I>&gt;<i>   refresh_pattern -i ^<A HREF="http://[a-zA-Z">http://[a-zA-Z</A>]+\.wsj\.net/ 10 200% 10 \
</I>&gt;<i>     override-expire reload-into-ims
</I>&gt;<i>
</I>&gt;<i> Amos
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20151227/6a7db585/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20151227/6a7db585/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008431.html">[squid-users] Refresh pattern issue in squid 3.1.20
</A></li>
	<LI>Next message (by thread): <A HREF="008435.html">[squid-users] Refresh pattern issue in squid 3.1.20
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8434">[ date ]</a>
              <a href="thread.html#8434">[ thread ]</a>
              <a href="subject.html#8434">[ subject ]</a>
              <a href="author.html#8434">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
