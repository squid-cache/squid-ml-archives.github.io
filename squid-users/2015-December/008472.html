<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid reverse proxy and client certs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20reverse%20proxy%20and%20client%20certs&In-Reply-To=%3C20151230105636.GA24776%40fantomas.sk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008470.html">
   <LINK REL="Next"  HREF="008483.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid reverse proxy and client certs</H1>
    <B>Matus UHLAR - fantomas</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20reverse%20proxy%20and%20client%20certs&In-Reply-To=%3C20151230105636.GA24776%40fantomas.sk%3E"
       TITLE="[squid-users] squid reverse proxy and client certs">uhlar at fantomas.sk
       </A><BR>
    <I>Wed Dec 30 10:56:36 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008470.html">[squid-users] squid reverse proxy and client certs
</A></li>
        <LI>Next message (by thread): <A HREF="008483.html">[squid-users] squid reverse proxy and client certs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8472">[ date ]</a>
              <a href="thread.html#8472">[ thread ]</a>
              <a href="subject.html#8472">[ subject ]</a>
              <a href="author.html#8472">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 30.12.15 15:11, Alex Samad wrote:
&gt;<i>I have squid 3.5.12 working as a reverse proxy
</I>&gt;<i>
</I>&gt;<i>cache_peer 127.0.0.1 \
</I>&gt;<i> parent 443 0 proxy-only no-query no-digest originserver \
</I>&gt;<i> login=PASS \
</I>&gt;<i> ssl \
</I>&gt;<i> sslcafile=/etc/pki/tls/certs/ca-bundle.crt \
</I>&gt;<i> sslflags=DONT_VERIFY_PEER \
</I>&gt;<i> name=webServer
</I>&gt;<i>
</I>&gt;<i>This points to httpd which has a
</I>&gt;<i>        &lt;Location /test/&gt;
</I>&gt;<i>                DirectoryIndex index.shtml index.html
</I>&gt;<i>                Options -Indexes -Includes +IncludesNOEXEC
</I>&gt;<i>-SymLinksIfOwnerMatch -ExecCGI -FollowSymLinks
</I>&gt;<i>
</I>&gt;<i>                SSLOptions +StdEnvVars +ExportCertData
</I>&gt;<i>                SSLVerifyClient optional_no_ca
</I>&gt;<i>                SSLVerifyDepth 4
</I>&gt;<i>        &lt;/Location&gt;
</I>&gt;<i>
</I>&gt;<i>Unfortunately the request for a client cert never makes it to the client.
</I>&gt;<i>
</I>&gt;<i>How can I change this to allow client certs to work
</I>
client certs will only work when you pass the connection directly to web
server without unbundling SSL.
That means, it's useless to use reverse proxy for HTTPS server when it needs
client certificates.

The workaround you could be in verifying client certificates by squid,
pushing that info to server and webserver trusting that info...

-- 
Matus UHLAR - fantomas, <A HREF="https://lists.squid-cache.org/listinfo/squid-users">uhlar at fantomas.sk</A> ; <A HREF="http://www.fantomas.sk/">http://www.fantomas.sk/</A>
Warning: I wish NOT to receive e-mail advertising to this address.
Varovanie: na tuto adresu chcem NEDOSTAVAT akukolvek reklamnu postu.
Chernobyl was an Windows 95 beta test site.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008470.html">[squid-users] squid reverse proxy and client certs
</A></li>
	<LI>Next message (by thread): <A HREF="008483.html">[squid-users] squid reverse proxy and client certs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8472">[ date ]</a>
              <a href="thread.html#8472">[ thread ]</a>
              <a href="subject.html#8472">[ subject ]</a>
              <a href="author.html#8472">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
