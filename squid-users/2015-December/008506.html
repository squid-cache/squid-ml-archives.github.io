<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid proxy removing Transfer-Encoding header
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20proxy%20removing%20Transfer-Encoding%20header&In-Reply-To=%3Cloom.20151231T170139-897%40post.gmane.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008482.html">
   <LINK REL="Next"  HREF="008486.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid proxy removing Transfer-Encoding header</H1>
    <B>Aashima</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20proxy%20removing%20Transfer-Encoding%20header&In-Reply-To=%3Cloom.20151231T170139-897%40post.gmane.org%3E"
       TITLE="[squid-users] Squid proxy removing Transfer-Encoding header">aashima2madaan at gmail.com
       </A><BR>
    <I>Thu Dec 31 16:02:09 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008482.html">[squid-users] Squid proxy removing Transfer-Encoding header
</A></li>
        <LI>Next message (by thread): <A HREF="008486.html">[squid-users] ip-based ACL under transparent mode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8506">[ date ]</a>
              <a href="thread.html#8506">[ thread ]</a>
              <a href="subject.html#8506">[ subject ]</a>
              <a href="author.html#8506">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Alex Rousskov &lt;rousskov &lt;at&gt; measurement-factory.com&gt; writes:

&gt;<i> 
</I>&gt;<i> On 12/30/2015 02:24 PM, Aashima wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; So it is like client -&gt; Squid -&gt; APP and return
</I>&gt;<i> &gt;  If App return Transfer-Encoding header to Squid, Squid removes that 
</I>response 
&gt;<i> &gt; header and forwards rest to Client. 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Am not getting why it is removing that header ? Couldnt find any posts
</I>&gt;<i> &gt;  also on any discussion group or blog.
</I>&gt;<i> 
</I>&gt;<i> Transfer-Encoding is a standard HTTP hop-by-hop header. Hop-by-hop
</I>&gt;<i> headers are meant for the immediate recipient (Squid in your case),
</I>&gt;<i> rather than the final or &quot;end&quot; recipient (Client in your case). Squid
</I>&gt;<i> must not forward hop-by-hop headers (but may add them as needed, which
</I>&gt;<i> may look like forwarding to an outside observer).
</I>&gt;<i> 
</I>&gt;<i> If you describe the actual problem you are having (in addition to this
</I>&gt;<i> technical detail), somebody on this list might be able to guide you
</I>&gt;<i> towards a solution.
</I>&gt;<i> 
</I>&gt;<i> Good luck,
</I>&gt;<i> 
</I>&gt;<i> Alex.
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> squid-users &lt;at&gt; lists.squid-cache.org
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> 
</I>

Hey Alex,

Thanks for responding so quickly on that yesterday. This really helped me in 
reaching to one point for figuring out the real problem.

So in my case, figured out when squid receives request header &quot;Connection: 
close&quot; , it strips of Transfer Encoding header from response. But if it does 
not receive Connection header it wil send back TE header. 

So I am left with 2 questions now. 
- Why does squid behave like that?
- Second, so in my case HA Proxy is sending those headers to squid. Since 
Connection is also hop by hop header , why is HAProxy adding that header to 
request headers.

Thanks
Aashima





</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008482.html">[squid-users] Squid proxy removing Transfer-Encoding header
</A></li>
	<LI>Next message (by thread): <A HREF="008486.html">[squid-users] ip-based ACL under transparent mode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8506">[ date ]</a>
              <a href="thread.html#8506">[ thread ]</a>
              <a href="subject.html#8506">[ subject ]</a>
              <a href="author.html#8506">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
