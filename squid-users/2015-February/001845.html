<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Strange behaviour with Chrome (client OS = WinXP x64) ...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Strange%20behaviour%20with%20Chrome%20%28client%20OS%20%3D%20WinXP%0A%20x64%29%20...&In-Reply-To=%3C54CE6D74.6040408%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001844.html">
   <LINK REL="Next"  HREF="001846.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Strange behaviour with Chrome (client OS = WinXP x64) ...</H1>
    <B>Yuri Voinov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Strange%20behaviour%20with%20Chrome%20%28client%20OS%20%3D%20WinXP%0A%20x64%29%20...&In-Reply-To=%3C54CE6D74.6040408%40gmail.com%3E"
       TITLE="[squid-users] Strange behaviour with Chrome (client OS = WinXP x64) ...">yvoinov at gmail.com
       </A><BR>
    <I>Sun Feb  1 18:16:20 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001844.html">[squid-users] Strange behaviour with Chrome (client OS = WinXP x64)	...
</A></li>
        <LI>Next message (by thread): <A HREF="001846.html">[squid-users] Strange behaviour with Chrome (client OS = WinXP x64) ...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1845">[ date ]</a>
              <a href="thread.html#1845">[ thread ]</a>
              <a href="subject.html#1845">[ subject ]</a>
              <a href="author.html#1845">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1
 

01.02.2015 23:48, Walter H. &#1087;&#1080;&#1096;&#1077;&#1090;:
&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> can someone please try the following website with Google Chrome - I
</I>use the latest release: Version 39.0.2171.99 m -
&gt;<i>
</I>&gt;<i> <A HREF="https://banking.ing-diba.at/">https://banking.ing-diba.at/</A>   (an electronic Banking site)
</I>&gt;<i>
</I>&gt;<i> with the following policy enabled:
</I>&gt;<i>
</I>&gt;<i> RequireOnlineRevocationChecksForLocalAnchors = 1
</I>&gt;<i>
</I>&gt;<i> with this banking site I get the following error from Google Chrome
</I>&gt;<i>
</I>&gt;<i> &quot;Your connection is not private
</I>&gt;<i>
</I>&gt;<i> Attackers might be trying to steal your information from
</I>banking.ing-diba.at (for example, passwords, messages, or credit cards).&quot;
&gt;<i>
</I>&gt;<i> with the following banking sites of other banks I have no troubles:
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://ebanking.easybank.at/">https://ebanking.easybank.at/</A> or
</I>&gt;<i> <A HREF="https://banking.raiffeisen.at/">https://banking.raiffeisen.at/</A>
</I>&gt;<i>
</I>&gt;<i> without enabling the policy above or not setting at all, this banking
</I>site works, but
&gt;<i> the symbol it shows differs; it is the same as if a man-in-the-middle
</I>like SSL-Bump would be between;
&gt;<i>
</I>&gt;<i> Google chrome uses the same cert store as IE, and with IE there is no
</I>connection problem,
&gt;<i> only another thing the banking site is telling: the browser is out
</I>dated, of course IE 7
&gt;<i> the IE even shows a green bar when connecting to this banking site ...
</I>&gt;<i>
</I>&gt;<i> can someone please tell me what is there special with this banking
</I>site:   <A HREF="https://banking.ing-diba.at/">https://banking.ing-diba.at/</A> ?
&gt;<i>
</I>&gt;<i> I'm using SSL bump with the exception of banking sites, the specific
</I>part of the squid.conf
&gt;<i> looks like this:
</I>&gt;<i>
</I>&gt;<i> acl ssl_bump_domains_bankingsites dstdomain banking.raiffeisen.at
</I>banking.ing-diba.at ebanking.easybank.at services.kepler.at
www.kepler.at www.rcb.at
&gt;<i> acl ssl_bump_domains_msftupdates dstdomain .update.microsoft.com
</I>&gt;<i> ssl_bump none ssl_bump_domains_bankingsites
</I>&gt;<i> ssl_bump none ssl_bump_domains_msftupdates
</I>&gt;<i> ssl_bump server-first all
</I>You do it wrong. You don't know site names BEFORE bump.

Just change acl for banking to dst (ip-based) type and list banking
sites IP.
&gt;<i> sslproxy_cert_error allow all
</I>&gt;<i> sslproxy_cipher HIGH:MEDIUM:!AECDH:!ADH:!DSS:!SSLv2:+SSLv3:+3DES:!MD5
</I>&gt;<i> sslproxy_flags DONT_VERIFY_PEER,NO_DEFAULT_CA
</I>You can remove NO_DEFAULT_CA.
&gt;<i> sslproxy_options NO_SSLv2 NO_SSLv3
</I>&gt;<i>
</I>&gt;<i> sslcrtd_program /usr/lib64/squid/ssl_crtd -s /var/local/squid/ssl_db
</I>-M 16MB
&gt;<i> sslcrtd_children 8
</I>&gt;<i>
</I>&gt;<i> http_port 3128 ssl-bump generate-host-certificates=on
</I>dynamic_cert_mem_cache_size=16MB cert=/etc/squid/cert/squid.pem
options=NO_SSLv2,SINGLE_DH_USE dhparams=/etc/squid/cert/dhparam.pem
Add capath parameter to your ssl-bump port. How you want to bump without
CA's public keys?
&gt;<i>
</I>&gt;<i> # squid.pem contains both cert+key
</I>&gt;<i>
</I>&gt;<i> I'm using my own CA, this means this SSL-bump CA cert is signed by my
</I>root CA certificate;
&gt;<i>
</I>&gt;<i> what is missing, wrong, ... so that this one banking site will work ...?
</I>&gt;<i>
</I>&gt;<i> the SSL-bump CA certificate contain this:
</I>&gt;<i>
</I>&gt;<i> Authority Information Access:
</I>&gt;<i>                 OCSP - URI:#url-to-ocsp#
</I>&gt;<i>                 CA Issuers - URI:#url-to-root-cert#
</I>&gt;<i>
</I>&gt;<i> and
</I>&gt;<i>
</I>&gt;<i>  X509v3 CRL Distribution Points:
</I>&gt;<i>                 Full Name:
</I>&gt;<i>                   URI:#url-to-crl#
</I>&gt;<i>
</I>&gt;<i> everything is working, the OCSP, the root-cert, and the CRL ...
</I>&gt;<i>
</I>&gt;<i> what causes Google Chrome producing the mentioned error above, when
</I>activating this mentioned policy?
&gt;<i>
</I>&gt;<i> the question to squid specialists: was it a good idea signing the
</I>SSL-bump CA certificate with the root certificate of my CA?
No. But you can ask him. :) Tell us what he says. ;)

NP. In two words: You want to be RA. I.e., you can sign your signed (by
CA) root CA anything as trusted authority. Without actually being a
trusted RA
&gt;<i>
</I>&gt;<i> Thanks
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2
 
iQEcBAEBAgAGBQJUzm1zAAoJENNXIZxhPexG0tgH/0PC7+RdzNml58s6vDl9eL8N
DeJuCjTkLUp2ZUXiFCOQ7S24VqfcegHUdnlin6Eghg5ksbHGFxQGEhRJbHr+HoWj
MXs4FKAv+i8SKSlFWtSTCZWNoOc3dLPYOetLHUmbF/RE6ymSUM+M8IVGpi/5r+I3
j8U+mCP58p6oBQ0iJykH85EB7IjS/U9Sx7L+tBsTiAqAuisC2yS0UqLwchVM+zeB
uf+YJSOZu3fzg+8ZutpVdwlKfdpQpC5mFKMscQ9v1A5D1cOcrPesiHfRod5XKA/Y
tLzDT/8jdkpBVb98GwfAbBh6cyfCRTey5aPIu3WopTh6SSi4vvqvuacLPFORCe0=
=Pqdl
-----END PGP SIGNATURE-----

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150202/c58b8200/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150202/c58b8200/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001844.html">[squid-users] Strange behaviour with Chrome (client OS = WinXP x64)	...
</A></li>
	<LI>Next message (by thread): <A HREF="001846.html">[squid-users] Strange behaviour with Chrome (client OS = WinXP x64) ...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1845">[ date ]</a>
              <a href="thread.html#1845">[ thread ]</a>
              <a href="subject.html#1845">[ subject ]</a>
              <a href="author.html#1845">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
