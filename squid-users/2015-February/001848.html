<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Strange behaviour with Chrome (client OS = WinXP x64) ...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Strange%20behaviour%20with%20Chrome%20%28client%20OS%20%3D%20WinXP%0A%20x64%29%20...&In-Reply-To=%3C54CE7DE8.5020709%40mathemainzel.info%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001847.html">
   <LINK REL="Next"  HREF="001849.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Strange behaviour with Chrome (client OS = WinXP x64) ...</H1>
    <B>Walter H.</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Strange%20behaviour%20with%20Chrome%20%28client%20OS%20%3D%20WinXP%0A%20x64%29%20...&In-Reply-To=%3C54CE7DE8.5020709%40mathemainzel.info%3E"
       TITLE="[squid-users] Strange behaviour with Chrome (client OS = WinXP x64) ...">Walter.H at mathemainzel.info
       </A><BR>
    <I>Sun Feb  1 19:26:32 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001847.html">[squid-users] Strange behaviour with Chrome (client OS = WinXP x64) ...
</A></li>
        <LI>Next message (by thread): <A HREF="001849.html">[squid-users] Strange behaviour with Chrome (client OS = WinXP x64) ...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1848">[ date ]</a>
              <a href="thread.html#1848">[ thread ]</a>
              <a href="subject.html#1848">[ subject ]</a>
              <a href="author.html#1848">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 01.02.2015 19:50, Yuri Voinov wrote:
&gt;<i> 02.02.2015 0:46, Amos Jeffries &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;&gt;<i> On 2/02/2015 7:16 a.m., Yuri Voinov wrote:
</I>&gt;&gt;&gt;<i> 01.02.2015 23:48, Walter H. &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;&gt;&gt;&gt;<i> Hello,
</I>&gt;&gt;<i> &lt;snip&gt;
</I>&gt;&gt;&gt;&gt;<i> acl ssl_bump_domains_bankingsites dstdomain banking.raiffeisen.at
</I>&gt;&gt;&gt;<i> banking.ing-diba.at ebanking.easybank.at services.kepler.at
</I>&gt;&gt;&gt;<i> www.kepler.at www.rcb.at
</I>&gt;&gt;&gt;&gt;<i> acl ssl_bump_domains_msftupdates dstdomain .update.microsoft.com
</I>&gt;&gt;&gt;&gt;<i> ssl_bump none ssl_bump_domains_bankingsites
</I>&gt;&gt;&gt;&gt;<i> ssl_bump none ssl_bump_domains_msftupdates
</I>&gt;&gt;&gt;&gt;<i> ssl_bump server-first all
</I>&gt;&gt;&gt;<i> You do it wrong. You don't know site names BEFORE bump.
</I>&gt;&gt;<i> No. His http_port settings are those which match a proxy being
</I>&gt;&gt;<i> configured explicitly in the brower, which means CONNECT messages with
</I>&gt;&gt;<i> domain name expected to be present.
</I>&gt;<i> Oh, of course. I compare it with my interception configuration. :)
</I>&gt;<i> But ip-based dst acl for bankings will works in any case. Just
</I>&gt;<i> pass-through banking IP without bump - and, viola! - they works.
</I>&gt;<i> Yes?
</I>&gt;<i>
</I>I have a few more lines before ssl-bump server-first all in my squid.conf

acl ssl_bump_domains_none_list dstdomain 
&quot;/etc/squid/sslbumpnonedomains-list-acl.squid&quot;
acl ssl_bump_domains_none_regex dstdom_regex -i 
&quot;/etc/squid/sslbumpnonedomains-regex-acl.squid&quot;
acl ssl_bump_domains_clntfrst_list dstdomain 
&quot;/etc/squid/sslbumpclntfrstdomains-list-acl.squid&quot;
acl ssl_bump_domains_clntfrst_regex dstdom_regex -i 
&quot;/etc/squid/sslbumpclntfrstdomains-regex-acl.squid&quot;
ssl_bump none ssl_bump_domains_none_list
ssl_bump none ssl_bump_domains_none_regex
ssl_bump client-first ssl_bump_domains_clntfrst_list
ssl_bump client-first ssl_bump_domains_clntfrst_regex

and any host in one of these files is either not bumped or bumped with 
client-first - google's domains are the FF problem, this is the workaround

&gt;&gt;<i>
</I>&gt;&gt;<i> It might not be, which could be the problem. But that can only known by
</I>&gt;&gt;<i> looking at the CONNECT request message itself.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Amos
</I>attached is the certificate chain the is shown in Google Chrome of this 
banking site, that makes problems ...
by the way, without squid it is the same ..., why?
what goes wrong?

the reason why not bumping banking sites is the following:
I have a VM that is used only for electronic banking, and there I didn't 
install my CAs root and the SSL-bump CA certificate;
so any SSL site that has nothing to do with banking will not work, and 
that should it be;

Greetings,
Walter
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: certs.txt
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150201/6c505957/attachment.txt">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150201/6c505957/attachment.txt</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 5971 bytes
Desc: S/MIME Cryptographic Signature
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150201/6c505957/attachment.bin">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150201/6c505957/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001847.html">[squid-users] Strange behaviour with Chrome (client OS = WinXP x64) ...
</A></li>
	<LI>Next message (by thread): <A HREF="001849.html">[squid-users] Strange behaviour with Chrome (client OS = WinXP x64) ...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1848">[ date ]</a>
              <a href="thread.html#1848">[ thread ]</a>
              <a href="subject.html#1848">[ subject ]</a>
              <a href="author.html#1848">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
