<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Alert unknown CA
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Alert%20unknown%20CA&In-Reply-To=%3C54D13201.2030302%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001911.html">
   <LINK REL="Next"  HREF="001899.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Alert unknown CA</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Alert%20unknown%20CA&In-Reply-To=%3C54D13201.2030302%40ngtech.co.il%3E"
       TITLE="[squid-users] Alert unknown CA">eliezer at ngtech.co.il
       </A><BR>
    <I>Tue Feb  3 20:39:29 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001911.html">[squid-users] Alert unknown CA
</A></li>
        <LI>Next message (by thread): <A HREF="001899.html">[squid-users] Alert unknown CA
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1894">[ date ]</a>
              <a href="thread.html#1894">[ thread ]</a>
              <a href="subject.html#1894">[ subject ]</a>
              <a href="author.html#1894">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Yuri,

 From what I remember before squid passes data into ssl_crtd can debug 
the certificates of the requested sites.
If you will record\log them you can run a script throw them and find the 
culprit pretty fast(relatively).

What debug sections have you tried using to debug it?
Since squid uses openssl libs it's probably do not know about the CA and 
there for not much details about it.

I would say that the URL is not important in the case of an intercept proxy.
In the case it's a regular forward proxy with ssl_bump you can run throw 
the list of CONNECT requests which logged before the decryption of the 
tunnel.

What squid.conf rules are you using?

I noticed you assume that squid passes URL to ssl_crtd and it's not how 
it works.

All The Bests,
Eliezer

On 03/02/2015 16:26, Yuri Voinov wrote:
&gt;<i> Hi gents,
</I>&gt;<i>
</I>&gt;<i> I think, will be good to add advanced debug options to ssl_crtd to avoid
</I>&gt;<i> this:
</I>&gt;<i>
</I>&gt;<i> 2015/02/03 20:21:37 kid1| clientNegotiateSSL: Error negotiating SSL
</I>&gt;<i> connection on FD 28: error:14094418:SSL routines:SSL3_READ_BYTES:tlsv1
</I>&gt;<i> alert unknown ca (1/0)
</I>&gt;<i>
</I>&gt;<i> Now we have no one tools to diagnose the situations above. Excluding own
</I>&gt;<i> eyes and brains. And - telepathy.
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001911.html">[squid-users] Alert unknown CA
</A></li>
	<LI>Next message (by thread): <A HREF="001899.html">[squid-users] Alert unknown CA
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1894">[ date ]</a>
              <a href="thread.html#1894">[ thread ]</a>
              <a href="subject.html#1894">[ subject ]</a>
              <a href="author.html#1894">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
