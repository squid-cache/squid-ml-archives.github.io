<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] The SSL certificate database is corrupted. Please	rebuild
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20The%20SSL%20certificate%20database%20is%20corrupted.%20Please%0A%09rebuild&In-Reply-To=%3C20A2F27D26BDBF41B491D00A11D4A7A6012777E747%40ANSESXGMBX04.anses.gov.ar%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001927.html">
   <LINK REL="Next"  HREF="001979.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] The SSL certificate database is corrupted. Please	rebuild</H1>
    <B>Ortega Gustavo Martin</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20The%20SSL%20certificate%20database%20is%20corrupted.%20Please%0A%09rebuild&In-Reply-To=%3C20A2F27D26BDBF41B491D00A11D4A7A6012777E747%40ANSESXGMBX04.anses.gov.ar%3E"
       TITLE="[squid-users] The SSL certificate database is corrupted. Please	rebuild">gortega at anses.gov.ar
       </A><BR>
    <I>Wed Feb  4 18:04:51 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001927.html">[squid-users] The SSL certificate database is corrupted. Please rebuild
</A></li>
        <LI>Next message (by thread): <A HREF="001979.html">[squid-users] The SSL certificate database is corrupted.	Please	rebuild
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1930">[ date ]</a>
              <a href="thread.html#1930">[ thread ]</a>
              <a href="subject.html#1930">[ subject ]</a>
              <a href="author.html#1930">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Amos, thanks for your quick reply!

I &#180;ve got news:

i recompiled squid with your suggestions, remove the corrupted database but the same thing happens.

my squid -v now is:

Squid Cache: Version 3.4.11-20150124-r13214
configure options:  '--prefix=/export/squid-3.4.11-20150124-r13214' '--with-maxfd=400000' '--enable-delay-pools' '--with-large-files' '--enable-follow-x-forwarded-for' '--enable-default-err-language=es' '--enable-err-languages=es' '--enable-external-acl-helpers=wbinfo_group' '--enable-async-io' '--enable-ssl' '--enable-ssl-crtd' '--enable-icap-client' '--enable-ltdl-convenience' '--with-openssl=/export/SOURCES/openssl-1.0.2'

The complete line of cache.log is:

2015/02/04 15:00:57 kid1| helperOpenServers: Starting 1/200 'ssl_crtd' processes wrong number of fields on line 8 (looking for field 6, got 1, '' left)
(ssl_crtd): The SSL certificate database (....) is corrupted. Please rebuild

Thanks, Gustavo.

-----Mensaje original-----
De: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] En nombre de Amos Jeffries
Enviado el: mi&#233;rcoles, 04 de febrero de 2015 02:15 p.m.
Para: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Asunto: Re: [squid-users] The SSL certificate database is corrupted. Please rebuild

On 5/02/2015 4:33 a.m., Ortega Gustavo Martin wrote:
&gt;<i> Hello, i found multiple times this error in cache.log and then squid 
</I>&gt;<i> crashed and enter in a loop.
</I>&gt;<i> 
</I>&gt;<i> I found one corrupted line in &quot;index.txt&quot; in the database directory. 
</I>&gt;<i> Last two lines are:
</I>&gt;<i> 
</I>&gt;<i> V       150828132043Z
</I>&gt;<i> 1BDA35020BA8933E63507E7D5A59386C8329A3D3        unknown
</I>&gt;<i> /CN=zqnvza.bay.livefilestore.com+Sign=signTrusted ed
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I thought that &quot;ed&quot; is the corrupted line.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> This is my output of &quot;squid -v&quot; Squid Cache: Version
</I>&gt;<i> 3.4.11-20150124-r13214 configure options:
</I>&gt;<i> '--prefix=/export/squid-3.4.11-20150124-r13214' '--with-maxfd=400000'
</I>&gt;<i> '--enable-delay-pools' '--enable-referer-log'
</I>&gt;<i> '--enable-useragent-log'
</I>
Referer and Useragent logs are now built-in logformat definitions.
Remove these ./configure options.

&gt;<i> '--enable-auth'
</I>
Auth is enabled by default, the ./configure option is defined for use to DISABLE authentication in Squid.

&gt;<i> '--with-large-files'
</I>&gt;<i> '--enable-follow-x-forwarded-for'
</I>&gt;<i> '--enable-default-err-language=Spanish'
</I>&gt;<i> '--enable-err-languages=Spanish'
</I>
&quot;Spanish&quot; is not an ISO 3166 language code.

Use:  --enable-default-err-language=es


&gt;<i> '--enable-external-acl-helpers=wbinfo_group' '--enable-async-io'
</I>&gt;<i> '--enable-ssl' '--enable-ssl-crtd' '--enable-icap-client'
</I>&gt;<i> '--enable-ltdl-convenience'
</I>&gt;<i> '--with-openssl=/export/SOURCES/openssl-1.0.1c' '--disable-ipv6'
</I>&gt;<i> 
</I>
Please begin your migration to IPv6. BCP 177 (RFC 6540) make it clear that IPv6 support is currenty mandatory for all machinery and software using IP protocol. Current versions of Squid have no problems with IPv6 (remaining problem are all in the network and workarounds are configurable).

Cheers
Amos
_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001927.html">[squid-users] The SSL certificate database is corrupted. Please rebuild
</A></li>
	<LI>Next message (by thread): <A HREF="001979.html">[squid-users] The SSL certificate database is corrupted.	Please	rebuild
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1930">[ date ]</a>
              <a href="thread.html#1930">[ thread ]</a>
              <a href="subject.html#1930">[ subject ]</a>
              <a href="author.html#1930">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
