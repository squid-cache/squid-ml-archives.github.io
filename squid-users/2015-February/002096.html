<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid Memory Leak with certain FTP requests?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Memory%20Leak%20with%20certain%20FTP%20requests%3F&In-Reply-To=%3C54DB424D.8080501%40coronamundi.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002087.html">
   <LINK REL="Next"  HREF="002102.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid Memory Leak with certain FTP requests?</H1>
    <B>Silamael</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Memory%20Leak%20with%20certain%20FTP%20requests%3F&In-Reply-To=%3C54DB424D.8080501%40coronamundi.de%3E"
       TITLE="[squid-users] Squid Memory Leak with certain FTP requests?">Silamael at coronamundi.de
       </A><BR>
    <I>Wed Feb 11 11:51:41 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002087.html">[squid-users] Squid Memory Leak with certain FTP requests?
</A></li>
        <LI>Next message (by thread): <A HREF="002102.html">[squid-users] Squid Memory Leak with certain FTP requests?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2096">[ date ]</a>
              <a href="thread.html#2096">[ thread ]</a>
              <a href="subject.html#2096">[ subject ]</a>
              <a href="author.html#2096">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 02/11/2015 11:10 AM, Yuri Voinov wrote:
&gt;<i> Squid first saves object in memory. Then swapout object to cache. As usual:
</I>&gt;<i> This is no memory leaking, but normal cache behaviour. As documented.
</I>&gt;<i> 
</I>&gt;<i> You can play around with range_offset_limit and quick_abort_min parameters.
</I>&gt;<i> 
</I>&gt;<i> Or try to no cache this FTP with ACL.
</I>&gt;<i> 
</I>&gt;<i> Usually, when suggests memory leaking, this often OS issue. Not Squid.
</I>
Hello Yuri,

Thanks for your quick reply.
The ACL you suggested will probably solve the problem.

Nevertheless I'm not sure that this is working as intended as the memory
used by Squid is constantly increasing and not settling after a while.
How does range_offset_limit is relevant for FTP requests?
quick_abort_min does not make any sense for me as there are no aborted
requests in my test case.

It seems more that Squid generates the index.html when I do a wget
<A HREF="ftp://foo.bar/pub/">ftp://foo.bar/pub/</A> and does not free the cached object later on.

Just for the records, the memory footprint of the process serving the
FTP request is 10 times higher than the one of Squids processing normal
web traffic at a high request rate.

-- Matthias

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002087.html">[squid-users] Squid Memory Leak with certain FTP requests?
</A></li>
	<LI>Next message (by thread): <A HREF="002102.html">[squid-users] Squid Memory Leak with certain FTP requests?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2096">[ date ]</a>
              <a href="thread.html#2096">[ thread ]</a>
              <a href="subject.html#2096">[ subject ]</a>
              <a href="author.html#2096">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
