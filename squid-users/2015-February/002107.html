<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid Memory Leak with certain FTP requests?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Memory%20Leak%20with%20certain%20FTP%20requests%3F&In-Reply-To=%3C54DB71C3.5060301%40coronamundi.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002103.html">
   <LINK REL="Next"  HREF="002114.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid Memory Leak with certain FTP requests?</H1>
    <B>Silamael</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Memory%20Leak%20with%20certain%20FTP%20requests%3F&In-Reply-To=%3C54DB71C3.5060301%40coronamundi.de%3E"
       TITLE="[squid-users] Squid Memory Leak with certain FTP requests?">Silamael at coronamundi.de
       </A><BR>
    <I>Wed Feb 11 15:14:11 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002103.html">[squid-users] Squid Memory Leak with certain FTP requests?
</A></li>
        <LI>Next message (by thread): <A HREF="002114.html">[squid-users] Squid Memory Leak with certain FTP requests?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2107">[ date ]</a>
              <a href="thread.html#2107">[ thread ]</a>
              <a href="subject.html#2107">[ subject ]</a>
              <a href="author.html#2107">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 02/11/2015 02:11 PM, Yuri Voinov wrote:
&gt;<i> 
</I>&gt;<i> 11.02.15 19:07, Silamael &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;&gt;<i> On 02/11/2015 12:51 PM, Silamael wrote:
</I>&gt;&gt;&gt;<i> On 02/11/2015 11:10 AM, Yuri Voinov wrote:
</I>&gt;&gt;&gt;&gt;<i> Squid first saves object in memory. Then swapout object to cache. As
</I>&gt;&gt;&gt;&gt;<i> usual:
</I>&gt;&gt;&gt;&gt;<i> This is no memory leaking, but normal cache behaviour. As documented.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> You can play around with range_offset_limit and quick_abort_min
</I>&gt;&gt;&gt;&gt;<i> parameters.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Or try to no cache this FTP with ACL.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Usually, when suggests memory leaking, this often OS issue. Not Squid.
</I>&gt;&gt;&gt;<i> Hello Yuri,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Thanks for your quick reply.
</I>&gt;&gt;&gt;<i> The ACL you suggested will probably solve the problem.
</I>&gt;&gt;<i> Just got the info that the customer already has disabled the caching.
</I>&gt;&gt;<i> Sounds no longer as &quot;normal behaviour&quot; to me.
</I>&gt;<i> As Amos said, may be - may be not.
</I>
Amos said something? Got no mail from him.

&gt;<i> Some FTP files pointless to cache.
</I>
Sure, maybe some FTP files are not to be cached.

&gt;<i> 
</I>&gt;<i> If it need just once..... For what cache it?
</I>
I do not want to cache any. And I think a 'cache deny all' does that.
Nevertheless, even with no caching at all the Squid process constantly
needs more memory and squidclient reports that the memory is used for
the 2K buffers.

Just try it. Squid with default configuration and cache deny all and
then do some wget <A HREF="ftp://server/path/.">ftp://server/path/.</A> Each requests will increase the 2K
buffers.

-- Matthias

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002103.html">[squid-users] Squid Memory Leak with certain FTP requests?
</A></li>
	<LI>Next message (by thread): <A HREF="002114.html">[squid-users] Squid Memory Leak with certain FTP requests?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2107">[ date ]</a>
              <a href="thread.html#2107">[ thread ]</a>
              <a href="subject.html#2107">[ subject ]</a>
              <a href="author.html#2107">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
