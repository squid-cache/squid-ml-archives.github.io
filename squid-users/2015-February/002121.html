<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] A little help with squid and e-cap
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20A%20little%20help%20with%20squid%20and%20e-cap&In-Reply-To=%3CCA%2BsuCFjJ%3D04g3VFK2yYDEm2ye6DYsvPDixG5%3DwF%3DgNu1Ee6%2BBg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002110.html">
   <LINK REL="Next"  HREF="002124.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] A little help with squid and e-cap</H1>
    <B>Luis Miguel Silva</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20A%20little%20help%20with%20squid%20and%20e-cap&In-Reply-To=%3CCA%2BsuCFjJ%3D04g3VFK2yYDEm2ye6DYsvPDixG5%3DwF%3DgNu1Ee6%2BBg%40mail.gmail.com%3E"
       TITLE="[squid-users] A little help with squid and e-cap">luismiguelferreirasilva at gmail.com
       </A><BR>
    <I>Thu Feb 12 05:54:02 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002110.html">[squid-users] squid authentication , &amp; ACL select from databse SQL , is that possible ?
</A></li>
        <LI>Next message (by thread): <A HREF="002124.html">[squid-users] A little help with squid and e-cap
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2121">[ date ]</a>
              <a href="thread.html#2121">[ thread ]</a>
              <a href="subject.html#2121">[ subject ]</a>
              <a href="author.html#2121">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear all,

This might not be the ideal place to ask questions about e-cap but, since
e-cap's mailing list is not working, I decided to ask my question here.

So, here goes:
- *My ecap service only seems to work on some pages*...
-- I've added the following configuration to my squid.conf:
loadable_modules /usr/local/lib/ecap_adapter_modifying.so
ecap_enable on
ecap_service ecapModifier respmod_precache 0 <A HREF="ecap://">ecap://</A>
e-cap.org/ecap/services/sample/modifying victim=professor
replacement=teacher
adaptation_access ecapModifier allow all
-- unfortunately, it *only seems to work some times* (e.g. for instance, it
works on this one &lt;<A HREF="http://www.pedagua.com/lmsilva/">http://www.pedagua.com/lmsilva/</A>&gt; [
<A HREF="http://www.pedagua.com/lmsilva/">http://www.pedagua.com/lmsilva/</A>] but not on this one
&lt;<A HREF="http://en.wikipedia.org/wiki/Professor">http://en.wikipedia.org/wiki/Professor</A>&gt; [
<A HREF="http://en.wikipedia.org/wiki/Professor">http://en.wikipedia.org/wiki/Professor</A>]).
-- *any idea on how I can debug why? access_log and cache.log aren't very
helpful.*

- *Does squid obey any specific order between ICAP and E-CAP calls?*
-- for instance, if the E-CAP module changes the content, will the ICAP
service receive the changed content OR the original content?
-- *does ecap and icap directive order in squid.conf matter?*

- *Is each ecap_service loaded on each page load?*
-- Or does it preload a couple of ecap_services and keep using those over
and over again (just like it does with c-icap and redirect_programs?)
-- I can see each ecap module implements configure, reconfigure, start,
stop and retire methods so...it SHOULD be possible to preload the script
and just call reconfigure on each call. What does Squid do?

p.s. I'm using squid 3.4.9 (compiled from source), with libecap 0.2 and I'm
using the ecap adapter sample package v0.2.1.

Thank you,
Luis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150211/3fa22263/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150211/3fa22263/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002110.html">[squid-users] squid authentication , &amp; ACL select from databse SQL , is that possible ?
</A></li>
	<LI>Next message (by thread): <A HREF="002124.html">[squid-users] A little help with squid and e-cap
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2121">[ date ]</a>
              <a href="thread.html#2121">[ thread ]</a>
              <a href="subject.html#2121">[ subject ]</a>
              <a href="author.html#2121">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
