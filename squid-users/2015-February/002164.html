<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Is Squid can shutdown unused idle redirector's children?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Is%20Squid%20can%20shutdown%20unused%20idle%20redirector%27s%0A%20children%3F&In-Reply-To=%3C54DD3AA8.7040501%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002153.html">
   <LINK REL="Next"  HREF="002155.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Is Squid can shutdown unused idle redirector's children?</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Is%20Squid%20can%20shutdown%20unused%20idle%20redirector%27s%0A%20children%3F&In-Reply-To=%3C54DD3AA8.7040501%40treenet.co.nz%3E"
       TITLE="[squid-users] Is Squid can shutdown unused idle redirector's children?">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Feb 12 23:43:36 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002153.html">[squid-users] Is Squid can shutdown unused idle redirector's children?
</A></li>
        <LI>Next message (by thread): <A HREF="002155.html">[squid-users] Is Squid can shutdown unused idle redirector's children?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2164">[ date ]</a>
              <a href="thread.html#2164">[ thread ]</a>
              <a href="subject.html#2164">[ subject ]</a>
              <a href="author.html#2164">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 13/02/2015 8:05 a.m., Yuri Voinov wrote:
&gt;<i> I want to say:
</I>&gt;<i> 
</I>&gt;<i> A system with low consumpted memory will starts processes more
</I>&gt;<i> quickly against system with low free memory and overloaded cheduler
</I>&gt;<i> and more sleep processes in most cases.
</I>&gt;<i> 
</I>&gt;<i> So, IMHO better solution is possibility to shutdown idle children 
</I>&gt;<i> after configured timeout and starts them up when required.
</I>&gt;<i> 
</I>&gt;<i> Also, OS cache also still exists..... and can hold rewriter ELF
</I>&gt;<i> near CPU.... did you remember? ;)
</I>
It is a tradeoff. The forking method Squid currently uses causes the
child process to get as much virtual memory allocated as the Squid
worker process was using at the time, including a full copy of the
cache_mem contents.

In a low memory system its better to start a bunch of the helpers via
startup=N before the parent allocates too much memory and keep them
running than it is to start later via idle=N when traffic is going
through.

Now that you know your peak usage is around 60 helpers worth of
traffic you may want to check out what the memory profile is like with
startup=50.

Amos
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.22 (MingW32)

iQEcBAEBAgAGBQJU3TqnAAoJELJo5wb/XPRjyxoIAN5zCpFoaIt/SEpor0WA1U/6
rdG4dSKO5rYBwglHqAKxNLh13nB2MHxMfasHjcje8Z1W59+E/EIYuy6mrCyGTiBm
Ckr1wg6JrUcnRQRx7OJBO+9pd6ONtg6wJx4jGarE3kVbHDoccWKhmk60m/LQiPSJ
UuXBdEiDPSJW7FV2wEWekp+nZhsIwIgm2xgF6IyVUqYBZ8MsNIeIwJx5z2oJVwaB
dloQgExgaCgD23L6j7KzwWfCZsc1JA8pefdjXHYlUTpekUxHB6KZzAUFrSPLokov
D8LauV2nXhRl+eVWXAz9uV8bbN6kPbN6GbKdD6eFCtIwwkpy4oOSwsj/UqPUUe0=
=52ZF
-----END PGP SIGNATURE-----

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002153.html">[squid-users] Is Squid can shutdown unused idle redirector's children?
</A></li>
	<LI>Next message (by thread): <A HREF="002155.html">[squid-users] Is Squid can shutdown unused idle redirector's children?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2164">[ date ]</a>
              <a href="thread.html#2164">[ thread ]</a>
              <a href="subject.html#2164">[ subject ]</a>
              <a href="author.html#2164">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
