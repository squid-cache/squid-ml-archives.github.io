<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] 2.7.9 to 3.5 CentOS No-Cache
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%202.7.9%20to%203.5%20CentOS%20No-Cache&In-Reply-To=%3CCAEaSS0Zq2ztRYC3ceKBr9hbGQhGNggMTK954DP2NGYUOdS1tJQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002170.html">
   <LINK REL="Next"  HREF="002169.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] 2.7.9 to 3.5 CentOS No-Cache</H1>
    <B>Tory M Blue</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%202.7.9%20to%203.5%20CentOS%20No-Cache&In-Reply-To=%3CCAEaSS0Zq2ztRYC3ceKBr9hbGQhGNggMTK954DP2NGYUOdS1tJQ%40mail.gmail.com%3E"
       TITLE="[squid-users] 2.7.9 to 3.5 CentOS No-Cache">tmblue at gmail.com
       </A><BR>
    <I>Fri Feb 13 00:24:40 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002170.html">[squid-users] when/who login in to proxy?
</A></li>
        <LI>Next message (by thread): <A HREF="002169.html">[squid-users] 2.7.9 to 3.5 CentOS No-Cache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2167">[ date ]</a>
              <a href="thread.html#2167">[ thread ]</a>
              <a href="subject.html#2167">[ subject ]</a>
              <a href="author.html#2167">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Greetings all, been a bit.

So I'm working on a new server config and loaded the latest 3.5 and have
tweaked my 2.7 configs a bit. Things are working but I've got one that I
can't figure out.

I have a test that insures that objects with an explicit &quot;
Cache-Control: no-cache&quot; header are NOT cached by Squid. This is done by
keeping a special hit counter on the server and counting origin requests. A
unique URL is fetched exactly 10 times, and all of them are asserted to be
cache misses (both Squid headers must be MISS). At the end, the hit counter
is tested and made sure it equals the number of requests (10).&quot;

I'm getting a fail when testing against 3.5, meaning it's providing a cache
object

Miss with no-cache                  | FAIL    &lt;------


Running test: Miss with no-cache...
Resetting hit counter...
Fetching URL:
<A HREF="http://10.13.5.222/admin/squid_test.php?action=reset_hit_count&amp;random=0.385536803712753">http://10.13.5.222/admin/squid_test.php?action=reset_hit_count&amp;random=0.385536803712753</A>
HTTP 200: 200 OK
X-Cache: MISS from dev-centOS
X-Cache-Lookup: MISS from dev-centOS:80
Fetching URL:
<A HREF="http://10.13.5.222/admin/squid_test.php?action=simple&amp;type=no_cache&amp;random=0.0843643311677589">http://10.13.5.222/admin/squid_test.php?action=simple&amp;type=no_cache&amp;random=0.0843643311677589</A>
HTTP 200: 200 OK
X-Cache: MISS from dev-centOS
X-Cache-Lookup: MISS from dev-centOS:80
Fetching URL:
<A HREF="http://10.13.5.222/admin/squid_test.php?action=simple&amp;type=no_cache&amp;random=0.0843643311677589">http://10.13.5.222/admin/squid_test.php?action=simple&amp;type=no_cache&amp;random=0.0843643311677589</A>
HTTP 200: 200 OK
X-Cache: MISS from dev-centOS
X-Cache-Lookup: HIT from dev-centOS:80 *&lt;&#8212;&#8212; Shows a hit (this should be 10
misses , a hit should never happen)*

*Test fails*

w/ 2.7.9 config
Miss with no-cache                  | Pass

Running test: Miss with no-cache...
Resetting hit counter...
Fetching URL:
<A HREF="http://devcache01.eng.admission.net/admin/squid_test.php?action=reset_hit_count&amp;random=0.671442807268036">http://devcache01.eng.admission.net/admin/squid_test.php?action=reset_hit_count&amp;random=0.671442807268036</A>
HTTP 200: 200 OK
X-Cache: MISS from dev-cache
X-Cache-Lookup: MISS from dev-cache:80

*I get 10 of the above responses (test passes).*

I'm wondering what I'm missing, 3.5 should be fully http 1.1 compliant
meaning that there should not be any squid directives guiding this (nor can
I find any). If the client sends a &quot;Cache-Control: no-cache&quot; it should be
honored natively ya?

Thanks for any pointers

Tory
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150212/d8674e56/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150212/d8674e56/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002170.html">[squid-users] when/who login in to proxy?
</A></li>
	<LI>Next message (by thread): <A HREF="002169.html">[squid-users] 2.7.9 to 3.5 CentOS No-Cache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2167">[ date ]</a>
              <a href="thread.html#2167">[ thread ]</a>
              <a href="subject.html#2167">[ subject ]</a>
              <a href="author.html#2167">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
