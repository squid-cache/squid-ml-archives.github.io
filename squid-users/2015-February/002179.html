<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] logfileHandleWrite: daemon:/var/logs/access.log:	error writing ((32) Broken pipe)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20logfileHandleWrite%3A%20daemon%3A/var/logs/access.log%3A%0A%09error%20writing%20%28%2832%29%20Broken%20pipe%29&In-Reply-To=%3C201502131134.29803.Antony.Stone%40squid.open.source.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002178.html">
   <LINK REL="Next"  HREF="002181.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] logfileHandleWrite: daemon:/var/logs/access.log:	error writing ((32) Broken pipe)</H1>
    <B>Antony Stone</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20logfileHandleWrite%3A%20daemon%3A/var/logs/access.log%3A%0A%09error%20writing%20%28%2832%29%20Broken%20pipe%29&In-Reply-To=%3C201502131134.29803.Antony.Stone%40squid.open.source.it%3E"
       TITLE="[squid-users] logfileHandleWrite: daemon:/var/logs/access.log:	error writing ((32) Broken pipe)">Antony.Stone at squid.open.source.it
       </A><BR>
    <I>Fri Feb 13 11:34:29 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002178.html">[squid-users] logfileHandleWrite: daemon:/var/logs/access.log: error writing ((32) Broken pipe)
</A></li>
        <LI>Next message (by thread): <A HREF="002181.html">[squid-users] logfileHandleWrite: daemon:/var/logs/access.log: error writing ((32) Broken pipe)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2179">[ date ]</a>
              <a href="thread.html#2179">[ thread ]</a>
              <a href="subject.html#2179">[ subject ]</a>
              <a href="author.html#2179">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Friday 13 Feb 2015 at 11:06, Priya Agarwal wrote:

&gt;<i> So sorry. In squid.conf I had done cache_effective_user to nobody and set
</I>&gt;<i> permissions of /var and /usr to nobody. So those are the permissions.
</I>
Are you saying that /var is owned by 'nobody'?

That sounds like a problem for the system to me.  /var should be owned by 
root; if you want to have subdirectories owned by 'nobody', or with 
permissions to let 'nobody' write to them, that's okay, but I think /var being 
owned by 'nobody' will cause more problems than just for squid.

&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">root at t4240qds</A>:/var/logs# ls -al /var/logs/access.log
</I>&gt;<i> ls: cannot access /var/logs/access.log: No such file or directory
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">root at t4240qds</A>:/var/logs# ls -ld /var/logs
</I>&gt;<i> drwx------ 2 nobody nogroup 4096 Feb 13 11:49 /var/logs
</I>
Maybe someone more familiar with squid than I am can comment on this, but 
isn't the log file opened before squid drops its privileges (same as the 
network sockets), so you don't actually need the logfile path to be writable 
by the squid_effective_user?

Regards,


Antony.

-- 
All generalisations are inaccurate.

                                                   Please reply to the list;
                                                         please *don't* CC me.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002178.html">[squid-users] logfileHandleWrite: daemon:/var/logs/access.log: error writing ((32) Broken pipe)
</A></li>
	<LI>Next message (by thread): <A HREF="002181.html">[squid-users] logfileHandleWrite: daemon:/var/logs/access.log: error writing ((32) Broken pipe)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2179">[ date ]</a>
              <a href="thread.html#2179">[ thread ]</a>
              <a href="subject.html#2179">[ subject ]</a>
              <a href="author.html#2179">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
