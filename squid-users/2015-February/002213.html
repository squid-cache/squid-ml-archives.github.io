<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] intercept squid 3.5.1, http://mail.ru
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20intercept%20squid%203.5.1%2C%20http%3A//mail.ru&In-Reply-To=%3C54DFC225.5010601%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002212.html">
   <LINK REL="Next"  HREF="002214.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] intercept squid 3.5.1, http://mail.ru</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20intercept%20squid%203.5.1%2C%20http%3A//mail.ru&In-Reply-To=%3C54DFC225.5010601%40treenet.co.nz%3E"
       TITLE="[squid-users] intercept squid 3.5.1, http://mail.ru">squid3 at treenet.co.nz
       </A><BR>
    <I>Sat Feb 14 21:46:13 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002212.html">[squid-users] intercept squid 3.5.1, http://mail.ru
</A></li>
        <LI>Next message (by thread): <A HREF="002214.html">[squid-users] intercept squid 3.5.1, http://mail.ru
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2213">[ date ]</a>
              <a href="thread.html#2213">[ thread ]</a>
              <a href="subject.html#2213">[ subject ]</a>
              <a href="author.html#2213">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 15/02/2015 9:26 a.m., Jason Haar wrote:
&gt;<i> But this is just a hack around a problem isn't it?
</I>
Yes.

&gt;<i> ie why can't squid successfully intercept 20M+ transfers from this
</I>&gt;<i> website?
</I>
Well, Squid *is* intercepting them. Its what happens after that is
going wrong.

&gt;<i> I guess it's working for 1byte-10M transactions, so why not 20M?
</I>
Indeed. Lets look closer...


&gt;<i> 1423851413.570    228 192.168.100.111 TAG_NONE/200 0 CONNECT
</I>&gt;<i> 217.69.141.150:443 - ORIGINAL_DST/217.69.141.150 -
</I>
Squid receives a CONNECT, bumps it...


&gt;<i> 1423851413.670     81 192.168.100.111 TCP_MISS/410 291 POST
</I>&gt;<i> <A HREF="https://jim24.mail.ru/helper?">https://jim24.mail.ru/helper?</A> - ORIGINAL_DST/217.69.141.150
</I>&gt;<i> text/html
</I>

.. inside is a POST to &quot;jim24.mail.ru:443&quot;

Squid delivers that to the server the CONNECT was going to
(217.69.141.150:443).

The server responds &quot;410 Gone&quot;.


A debug_options 11,2 trace might provide more insight.

Amos

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.22 (MingW32)

iQEcBAEBAgAGBQJU38IkAAoJELJo5wb/XPRjS4UIAOEMiMhYYhfdKR6RncP2dS8w
SjpjPDcpBnGPBgrgfZDGqRna3wkq3m2VvsHfgez//c7hiRkSJ6tWZdIlZMIVvI/P
cZ1x4DSUdsovfVNK/Yfs2Vc6oPjgkpBWrMAlNw3/TcNwHcn6PQCsj0xXxUdZ/Br6
jQ56WuL5FZA+dsIdbKQFwvuVfziwkcGwFfeBLmfEynbEjfV3H6fSe8t5lj5tbLnq
1qUvqdMtyGN4Nvji9T4hslRIgFoFBKs+lJVSSQD9Rqs8/bomukAcoj6H4XplMSZq
zg+zxuMamZJrepM+URqgVxWR8fW+qQH173yq4eHjsTibpyJ5HpGhC+hSmQrCZjY=
=MN2Y
-----END PGP SIGNATURE-----

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002212.html">[squid-users] intercept squid 3.5.1, http://mail.ru
</A></li>
	<LI>Next message (by thread): <A HREF="002214.html">[squid-users] intercept squid 3.5.1, http://mail.ru
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2213">[ date ]</a>
              <a href="thread.html#2213">[ thread ]</a>
              <a href="subject.html#2213">[ subject ]</a>
              <a href="author.html#2213">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
