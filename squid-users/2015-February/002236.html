<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid stopped logging to access.log
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20stopped%20logging%20to%20access.log&In-Reply-To=%3CCA%2BsuCFgpbMWcV%3DW%3DDK66RFR8qvpQJ6U-ReyO2rDVqiEtZz0uug%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002234.html">
   <LINK REL="Next"  HREF="002244.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid stopped logging to access.log</H1>
    <B>Luis Miguel Silva</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20stopped%20logging%20to%20access.log&In-Reply-To=%3CCA%2BsuCFgpbMWcV%3DW%3DDK66RFR8qvpQJ6U-ReyO2rDVqiEtZz0uug%40mail.gmail.com%3E"
       TITLE="[squid-users] Squid stopped logging to access.log">luismiguelferreirasilva at gmail.com
       </A><BR>
    <I>Mon Feb 16 08:30:31 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002234.html">[squid-users] Squid stopped logging to access.log
</A></li>
        <LI>Next message (by thread): <A HREF="002244.html">[squid-users] reverse-proxy with client certificates pass-thru
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2236">[ date ]</a>
              <a href="thread.html#2236">[ thread ]</a>
              <a href="subject.html#2236">[ subject ]</a>
              <a href="author.html#2236">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Figured out the problem (I had another squid on the network that was
intercepting my requests)...sorry about that!

Luis

On Sun, Feb 15, 2015 at 11:26 PM, Luis Miguel Silva &lt;
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">luismiguelferreirasilva at gmail.com</A>&gt; wrote:

&gt;<i> Dear all,
</I>&gt;<i>
</I>&gt;<i> As I was playing around with Squid and e-cap, I decided to shutdown squid,
</I>&gt;<i> clear the cache and the log files.
</I>&gt;<i>
</I>&gt;<i> Now, when I start it, it seems to create both the access.log and cache.log
</I>&gt;<i> files, but it only writes to the cache.log file:
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">root at appliance</A>:/var/log/squid3# ls -al
</I>&gt;<i> total 16
</I>&gt;<i> drwxr-xr-x  2 proxy proxy 4096 Feb 15 23:12 .
</I>&gt;<i> drwxr-xr-x 11 root  root  4096 Feb 15 06:25 ..
</I>&gt;<i> -rw-r--r--  1 proxy proxy    0 Feb 15 23:12 access.log
</I>&gt;<i> -rw-r--r--  1 proxy proxy 8046 Feb 15 23:13 cache.log
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">root at appliance</A>:/var/log/squid3#
</I>&gt;<i>
</I>&gt;<i> As far as I know, I've reverted ALL my changes to a known working state
</I>&gt;<i> (e.g. disabled e-cap altogether, the debug_options and the
</I>&gt;<i> request_header_access directives I had turned on earlier today), but I just
</I>&gt;<i> can't get squid to write to access.log.
</I>&gt;<i>
</I>&gt;<i> Here's what I'm getting (this time with debug_options ALL, 2 , so we can
</I>&gt;<i> see a little more info on what is going on):
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">root at appliance</A>:/var/log/squid3# rm *
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">root at appliance</A>:/var/log/squid3# /etc/init.d/squid3 start
</I>&gt;<i> [ ok ] Starting Squid HTTP Proxy 3.x: squid3.
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">root at appliance</A>:/var/log/squid3# ls -l
</I>&gt;<i> total 12
</I>&gt;<i> -rw-r----- 1 proxy proxy    0 Feb 15 23:25 access.log
</I>&gt;<i> -rw-r----- 1 proxy proxy 9002 Feb 15 23:25 cache.log
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">root at appliance</A>:/var/log/squid3# cat cache.log
</I>&gt;<i> 2015/02/15 23:25:39.890| main.cc(1424) SquidMain: Doing post-config
</I>&gt;<i> initialization
</I>&gt;<i>
</I>&gt;<i> 2015/02/15 23:25:39.890| main.cc(1426) SquidMain: running
</I>&gt;<i> RegisteredRunner::finalizeConfig
</I>&gt;<i> 2015/02/15 23:25:39.891| main.cc(1427) SquidMain: running
</I>&gt;<i> RegisteredRunner::claimMemoryNeeds
</I>&gt;<i> 2015/02/15 23:25:39.891| main.cc(1428) SquidMain: running
</I>&gt;<i> RegisteredRunner::useConfig
</I>&gt;<i> 2015/02/15 23:25:39.930 kid1| main.cc(1424) SquidMain: Doing post-config
</I>&gt;<i> initialization
</I>&gt;<i>
</I>&gt;<i> 2015/02/15 23:25:39.930 kid1| main.cc(1426) SquidMain: running
</I>&gt;<i> RegisteredRunner::finalizeConfig
</I>&gt;<i> 2015/02/15 23:25:39.930 kid1| main.cc(1427) SquidMain: running
</I>&gt;<i> RegisteredRunner::claimMemoryNeeds
</I>&gt;<i> 2015/02/15 23:25:39.930 kid1| main.cc(1428) SquidMain: running
</I>&gt;<i> RegisteredRunner::useConfig
</I>&gt;<i> 2015/02/15 23:25:39.930 kid1| Current Directory is /
</I>&gt;<i> 2015/02/15 23:25:39.930 kid1| Starting Squid Cache version 3.5.1 for
</I>&gt;<i> x86_64-unknown-linux-gnu...
</I>&gt;<i> 2015/02/15 23:25:39.930 kid1| Service Name: squid
</I>&gt;<i> 2015/02/15 23:25:39.930 kid1| Process ID 11312
</I>&gt;<i> 2015/02/15 23:25:39.930 kid1| Process Roles: worker
</I>&gt;<i> 2015/02/15 23:25:39.930 kid1| With 65535 file descriptors available
</I>&gt;<i> 2015/02/15 23:25:39.930 kid1| Initializing IP Cache...
</I>&gt;<i> 2015/02/15 23:25:39.941 kid1| dns_internal.cc(1529) dnsInit: idnsInit:
</I>&gt;<i> attempt open DNS socket to: [::]
</I>&gt;<i> 2015/02/15 23:25:39.941 kid1| dns_internal.cc(1538) dnsInit: idnsInit:
</I>&gt;<i> attempt open DNS socket to: 0.0.0.0
</I>&gt;<i> 2015/02/15 23:25:39.941 kid1| DNS Socket created at [::], FD 6
</I>&gt;<i> 2015/02/15 23:25:39.941 kid1| DNS Socket created at 0.0.0.0, FD 7
</I>&gt;<i> 2015/02/15 23:25:39.941 kid1| Adding nameserver 8.8.8.8 from squid.conf
</I>&gt;<i> 2015/02/15 23:25:39.941 kid1| helperOpenServers: Starting 5/5 'ssl_crtd'
</I>&gt;<i> processes
</I>&gt;<i> 2015/02/15 23:25:39.963 kid1| Format.cc(64) parse: got definition '%&gt;a/%&gt;A
</I>&gt;<i> %un %&gt;rm myip=%la myport=%lp'
</I>&gt;<i> 2015/02/15 23:25:39.963 kid1| Format.cc(64) parse: got definition '%&gt;a/%&gt;A
</I>&gt;<i> %un %&gt;rm myip=%la myport=%lp'
</I>&gt;<i> 2015/02/15 23:25:39.963 kid1| Logfile: opening log
</I>&gt;<i> daemon:/var/log/squid3/access.log
</I>&gt;<i> 2015/02/15 23:25:39.963 kid1| Logfile Daemon: opening log
</I>&gt;<i> /var/log/squid3/access.log
</I>&gt;<i> 2015/02/15 23:25:40 kid1| Unlinkd pipe opened on FD 25
</I>&gt;<i> 2015/02/15 23:25:40.227 kid1| store_digest.cc(490) storeDigestCalcCap:
</I>&gt;<i> storeDigestCalcCap: have: 0, want 161319 entries; limits: [1, 161319]
</I>&gt;<i> 2015/02/15 23:25:40.227 kid1| CacheDigest.cc(49) cacheDigestInit:
</I>&gt;<i> cacheDigestInit: capacity: 161319 entries, bpe: 5; size: 100825 bytes
</I>&gt;<i> 2015/02/15 23:25:40.227 kid1| Local cache digest enabled; rebuild/rewrite
</I>&gt;<i> every 3600/3600 sec
</I>&gt;<i> 2015/02/15 23:25:40.227 kid1| Store logging disabled
</I>&gt;<i> 2015/02/15 23:25:40.227 kid1| Swap maxSize 2097152 + 1048576 KB, estimated
</I>&gt;<i> 241979 objects
</I>&gt;<i> 2015/02/15 23:25:40.227 kid1| Target number of buckets: 12098
</I>&gt;<i> 2015/02/15 23:25:40.227 kid1| Using 16384 Store buckets
</I>&gt;<i> 2015/02/15 23:25:40.227 kid1| Max Mem  size: 1048576 KB
</I>&gt;<i> 2015/02/15 23:25:40.227 kid1| Max Swap size: 2097152 KB
</I>&gt;<i> 2015/02/15 23:25:40.228 kid1| ufs/UFSSwapLogParser.cc(96)
</I>&gt;<i> GetUFSSwapLogParser: Swap file version: 2
</I>&gt;<i> 2015/02/15 23:25:40.228 kid1| Rebuilding storage in /var/spool/squid3
</I>&gt;<i> (clean log)
</I>&gt;<i> 2015/02/15 23:25:40.228 kid1| Using Least Load store dir selection
</I>&gt;<i> 2015/02/15 23:25:40.228 kid1| Current Directory is /
</I>&gt;<i> 2015/02/15 23:25:40.228 kid1| Finished loading MIME types and icons.
</I>&gt;<i> 2015/02/15 23:25:40.259 kid1| wccp.cc(112) wccpConnectionOpen: WCCPv1
</I>&gt;<i> disabled.
</I>&gt;<i> 2015/02/15 23:25:40.259 kid1| wccp2.cc(960) wccp2ConnectionOpen: WCCPv2
</I>&gt;<i> Disabled. No IPv4 Router(s) configured.
</I>&gt;<i> 2015/02/15 23:25:40.259 kid1| AsyncCall.cc(26) AsyncCall: The AsyncCall
</I>&gt;<i> clientListenerConnectionOpened constructed, this=0x30a4470 [call20]
</I>&gt;<i> 2015/02/15 23:25:40.259 kid1| AsyncCall.cc(93) ScheduleCall:
</I>&gt;<i> StartListening.cc(59) will call
</I>&gt;<i> clientListenerConnectionOpened(local=[::]:3128 remote=[::] FD 28 flags=9,
</I>&gt;<i> err=0, HTTP Socket port=0x30a44d0) [call20]
</I>&gt;<i> 2015/02/15 23:25:40.259 kid1| AsyncCall.cc(26) AsyncCall: The AsyncCall
</I>&gt;<i> clientListenerConnectionOpened constructed, this=0x30a47f0 [call22]
</I>&gt;<i> 2015/02/15 23:25:40.260 kid1| AsyncCall.cc(93) ScheduleCall:
</I>&gt;<i> StartListening.cc(59) will call
</I>&gt;<i> clientListenerConnectionOpened(local=[::]:3129 remote=[::] FD 29 flags=41,
</I>&gt;<i> err=0, HTTP Socket port=0x30a4850) [call22]
</I>&gt;<i> 2015/02/15 23:25:40.260 kid1| AsyncCall.cc(26) AsyncCall: The AsyncCall
</I>&gt;<i> clientListenerConnectionOpened constructed, this=0x30a4980 [call24]
</I>&gt;<i> 2015/02/15 23:25:40.260 kid1| AsyncCall.cc(93) ScheduleCall:
</I>&gt;<i> StartListening.cc(59) will call
</I>&gt;<i> clientListenerConnectionOpened(local=[::]:3130 remote=[::] FD 30 flags=41,
</I>&gt;<i> err=0, HTTPS Socket port=0x30a49e0) [call24]
</I>&gt;<i> 2015/02/15 23:25:40.260 kid1| HTCP Disabled.
</I>&gt;<i> 2015/02/15 23:25:40.260 kid1| Squid plugin modules loaded: 0
</I>&gt;<i> 2015/02/15 23:25:40.260 kid1| Adaptation support is on
</I>&gt;<i> 2015/02/15 23:25:40.260 kid1| Config.cc(211) FinalizeEach: Initialized 1
</I>&gt;<i> message adaptation services
</I>&gt;<i> 2015/02/15 23:25:40.260 kid1| Config.cc(211) FinalizeEach: Initialized 0
</I>&gt;<i> message adaptation service groups
</I>&gt;<i> 2015/02/15 23:25:40.260 kid1| Config.cc(211) FinalizeEach: Initialized 1
</I>&gt;<i> message adaptation access rules
</I>&gt;<i> 2015/02/15 23:25:40.260 kid1| AsyncCallQueue.cc(55) fireNext: entering
</I>&gt;<i> clientListenerConnectionOpened(local=[::]:3128 remote=[::] FD 28 flags=9,
</I>&gt;<i> err=0, HTTP Socket port=0x30a44d0)
</I>&gt;<i> 2015/02/15 23:25:40.260 kid1| AsyncCall.cc(38) make: make call
</I>&gt;<i> clientListenerConnectionOpened [call20]
</I>&gt;<i> 2015/02/15 23:25:40.260 kid1| Accepting HTTP Socket connections at
</I>&gt;<i> local=[::]:3128 remote=[::] FD 28 flags=9
</I>&gt;<i> 2015/02/15 23:25:40.260 kid1| AsyncCallQueue.cc(57) fireNext: leaving
</I>&gt;<i> clientListenerConnectionOpened(local=[::]:3128 remote=[::] FD 28 flags=9,
</I>&gt;<i> err=0, HTTP Socket port=0x30a44d0)
</I>&gt;<i> 2015/02/15 23:25:40.260 kid1| AsyncCallQueue.cc(55) fireNext: entering
</I>&gt;<i> clientListenerConnectionOpened(local=[::]:3129 remote=[::] FD 29 flags=41,
</I>&gt;<i> err=0, HTTP Socket port=0x30a4850)
</I>&gt;<i> 2015/02/15 23:25:40.260 kid1| AsyncCall.cc(38) make: make call
</I>&gt;<i> clientListenerConnectionOpened [call22]
</I>&gt;<i> 2015/02/15 23:25:40.260 kid1| Accepting NAT intercepted HTTP Socket
</I>&gt;<i> connections at local=[::]:3129 remote=[::] FD 29 flags=41
</I>&gt;<i> 2015/02/15 23:25:40.260 kid1| AsyncCallQueue.cc(57) fireNext: leaving
</I>&gt;<i> clientListenerConnectionOpened(local=[::]:3129 remote=[::] FD 29 flags=41,
</I>&gt;<i> err=0, HTTP Socket port=0x30a4850)
</I>&gt;<i> 2015/02/15 23:25:40.261 kid1| AsyncCallQueue.cc(55) fireNext: entering
</I>&gt;<i> clientListenerConnectionOpened(local=[::]:3130 remote=[::] FD 30 flags=41,
</I>&gt;<i> err=0, HTTPS Socket port=0x30a49e0)
</I>&gt;<i> 2015/02/15 23:25:40.261 kid1| AsyncCall.cc(38) make: make call
</I>&gt;<i> clientListenerConnectionOpened [call24]
</I>&gt;<i> 2015/02/15 23:25:40.261 kid1| Accepting NAT intercepted SSL bumped HTTPS
</I>&gt;<i> Socket connections at local=[::]:3130 remote=[::] FD 30 flags=41
</I>&gt;<i> 2015/02/15 23:25:40.261 kid1| AsyncCallQueue.cc(57) fireNext: leaving
</I>&gt;<i> clientListenerConnectionOpened(local=[::]:3130 remote=[::] FD 30 flags=41,
</I>&gt;<i> err=0, HTTPS Socket port=0x30a49e0)
</I>&gt;<i> 2015/02/15 23:25:40.261 kid1| Done reading /var/spool/squid3 swaplog (0
</I>&gt;<i> entries)
</I>&gt;<i> 2015/02/15 23:25:40.261 kid1| Store rebuilding is 0.00% complete
</I>&gt;<i> 2015/02/15 23:25:40.261 kid1| Finished rebuilding storage from disk.
</I>&gt;<i> 2015/02/15 23:25:40.261 kid1|         0 Entries scanned
</I>&gt;<i> 2015/02/15 23:25:40.261 kid1|         0 Invalid entries.
</I>&gt;<i> 2015/02/15 23:25:40.261 kid1|         0 With invalid flags.
</I>&gt;<i> 2015/02/15 23:25:40.261 kid1|         0 Objects loaded.
</I>&gt;<i> 2015/02/15 23:25:40.261 kid1|         0 Objects expired.
</I>&gt;<i> 2015/02/15 23:25:40.261 kid1|         0 Objects cancelled.
</I>&gt;<i> 2015/02/15 23:25:40.261 kid1|         0 Duplicate URLs purged.
</I>&gt;<i> 2015/02/15 23:25:40.261 kid1|         0 Swapfile clashes avoided.
</I>&gt;<i> 2015/02/15 23:25:40.261 kid1|   Took 0.03 seconds (  0.00 objects/sec).
</I>&gt;<i> 2015/02/15 23:25:40.261 kid1| Beginning Validation Procedure
</I>&gt;<i> 2015/02/15 23:25:40.261 kid1| disk.cc(503) xrename: xrename: renaming
</I>&gt;<i> /var/spool/squid3/swap.state.new to /var/spool/squid3/swap.state
</I>&gt;<i> 2015/02/15 23:25:40.261 kid1| store_rebuild.cc(96) storeCleanup: Seen: 51
</I>&gt;<i> entries
</I>&gt;<i> 2015/02/15 23:25:40.261 kid1|   Completed Validation Procedure
</I>&gt;<i> 2015/02/15 23:25:40.261 kid1|   Validated 0 Entries
</I>&gt;<i> 2015/02/15 23:25:40.261 kid1|   store_swap_size = 0.00 KB
</I>&gt;<i> 2015/02/15 23:25:40.261 kid1| store_digest.cc(283)
</I>&gt;<i> storeDigestRebuildStart: storeDigestRebuildStart: rebuild #1
</I>&gt;<i> 2015/02/15 23:25:40.261 kid1| store_digest.cc(490) storeDigestCalcCap:
</I>&gt;<i> storeDigestCalcCap: have: 51, want 51 entries; limits: [1, 161319]
</I>&gt;<i> 2015/02/15 23:25:40.261 kid1| store_digest.cc(512) storeDigestResize:
</I>&gt;<i> storeDigestResize: 161319 -&gt; 51; change: 161268 (100%)
</I>&gt;<i> 2015/02/15 23:25:40.261 kid1| store_digest.cc(519) storeDigestResize:
</I>&gt;<i> storeDigestResize: big change, resizing.
</I>&gt;<i> 2015/02/15 23:25:40.262 kid1| CacheDigest.cc(49) cacheDigestInit:
</I>&gt;<i> cacheDigestInit: capacity: 51 entries, bpe: 5; size: 32 bytes
</I>&gt;<i> 2015/02/15 23:25:40.262 kid1| store_digest.cc(363)
</I>&gt;<i> storeDigestRewriteStart: storeDigestRewrite: start rewrite #1
</I>&gt;<i> 2015/02/15 23:25:40.262 kid1| store_digest.cc(377)
</I>&gt;<i> storeDigestRewriteStart: storeDigestRewriteStart: waiting for rebuild to
</I>&gt;<i> finish.
</I>&gt;<i> 2015/02/15 23:25:40.262 kid1| store_digest.cc(317)
</I>&gt;<i> storeDigestRebuildFinish: storeDigestRebuildFinish: done.
</I>&gt;<i> 2015/02/15 23:25:40.262 kid1| store_digest.cc(418)
</I>&gt;<i> storeDigestRewriteFinish: storeDigestRewriteFinish: digest expires at
</I>&gt;<i> 1424071540 (+3600)
</I>&gt;<i> 2015/02/15 23:25:41 kid1| storeLateRelease: released 0 objects
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">root at appliance</A>:/var/log/squid3# cat cache.log  | grep -i access
</I>&gt;<i> 2015/02/15 23:25:39.963 kid1| Logfile: opening log
</I>&gt;<i> daemon:/var/log/squid3/access.log
</I>&gt;<i> 2015/02/15 23:25:39.963 kid1| Logfile Daemon: opening log
</I>&gt;<i> /var/log/squid3/access.log
</I>&gt;<i> 2015/02/15 23:25:40.260 kid1| Config.cc(211) FinalizeEach: Initialized 1
</I>&gt;<i> message adaptation access rules
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">root at appliance</A>:/var/log/squid3# ls -al
</I>&gt;<i> total 20
</I>&gt;<i> drwxr-xr-x  2 proxy proxy 4096 Feb 15 23:25 .
</I>&gt;<i> drwxr-xr-x 11 root  root  4096 Feb 15 06:25 ..
</I>&gt;<i> -rw-r-----  1 proxy proxy    0 Feb 15 23:25 access.log
</I>&gt;<i> -rw-r-----  1 proxy proxy 9065 Feb 15 23:25 cache.log
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">root at appliance</A>:/var/log/squid3#
</I>&gt;<i>
</I>&gt;<i> Everything seems to be working fine, and traffic IS being routed through
</I>&gt;<i> squid. Its just that nothing gets logged to access.log...
</I>&gt;<i>
</I>&gt;<i> Any idea on what might be causing this?
</I>&gt;<i>
</I>&gt;<i> Thank you,
</I>&gt;<i> Luis
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150216/9e175a87/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150216/9e175a87/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002234.html">[squid-users] Squid stopped logging to access.log
</A></li>
	<LI>Next message (by thread): <A HREF="002244.html">[squid-users] reverse-proxy with client certificates pass-thru
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2236">[ date ]</a>
              <a href="thread.html#2236">[ thread ]</a>
              <a href="subject.html#2236">[ subject ]</a>
              <a href="author.html#2236">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
