<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Is Squid can shutdown unused idle redirector's children?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Is%20Squid%20can%20shutdown%20unused%20idle%20redirector%27s%0A%20children%3F&In-Reply-To=%3C54E239F8.6070605%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002291.html">
   <LINK REL="Next"  HREF="002264.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Is Squid can shutdown unused idle redirector's children?</H1>
    <B>Yuri Voinov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Is%20Squid%20can%20shutdown%20unused%20idle%20redirector%27s%0A%20children%3F&In-Reply-To=%3C54E239F8.6070605%40gmail.com%3E"
       TITLE="[squid-users] Is Squid can shutdown unused idle redirector's children?">yvoinov at gmail.com
       </A><BR>
    <I>Mon Feb 16 18:42:00 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002291.html">[squid-users] Is Squid can shutdown unused idle redirector's children?
</A></li>
        <LI>Next message (by thread): <A HREF="002264.html">[squid-users] Is Squid can shutdown unused idle redirector's children?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2263">[ date ]</a>
              <a href="thread.html#2263">[ thread ]</a>
              <a href="subject.html#2263">[ subject ]</a>
              <a href="author.html#2263">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

root @ cthulhu / # ps -efl|grep squidGuard|grep -v grep|awk {'print $2
&quot; &quot; $5'}
S 6475

Now you can see one squidGuard process. Squid was restarted hour ago.

Process is idle (no traffic now), but this is as desired by config. As
you can see, it state is &quot;S&quot;, not 'I'. Feel the difference.

The same picture I've observed every night. With some dozens
redirector processes.

17.02.15 0:22, Eliezer Croitoru &#1087;&#1080;&#1096;&#1077;&#1090;:
&gt;<i> Hey Yuri,
</I>&gt;<i> 
</I>&gt;<i> I looked eventually at Solaris 11 man pages at: 
</I>&gt;<i> <A HREF="http://docs.oracle.com/cd/E26502_01/html/E29030/ps-1.html#scrolltoc">http://docs.oracle.com/cd/E26502_01/html/E29030/ps-1.html#scrolltoc</A>
</I>&gt;<i>
</I>&gt;<i>  Just to be sure the next command would run: &quot;ps -e&quot;
</I>&gt;<i> 
</I>&gt;<i> There is no subject to the discussion yet since the issue is yet to
</I>&gt;<i> be defined as an issue.
</I>&gt;<i> 
</I>&gt;<i> You mentioned Android autoclose but you must first be clear from a
</I>&gt;<i> doubt! Android is indeed Linux kernel based and provides some APIs
</I>&gt;<i> for gui and other components of the system but it is much different
</I>&gt;<i> by nature. If you would take a simple PC from 10 years ago indeed
</I>&gt;<i> an Android device beats it's specs and will have much more ram and
</I>&gt;<i> CPU speed\power. Android however with all it's API would not allow
</I>&gt;<i> just any process handle &quot;iptables&quot; rules out of the box in any
</I>&gt;<i> form. Is there a reason for that? maybe yes and maybe not but I
</I>&gt;<i> mostly don't care about it since it's not being used mostly for
</I>&gt;<i> servers grade operations.
</I>&gt;<i> 
</I>&gt;<i> I would definitely not want to call you stupid but sometimes even
</I>&gt;<i> I cannot catch\understand\hold others way of thinking.
</I>&gt;<i> 
</I>&gt;<i> It's indeed not hard to execute pkill -9 &quot;XYZ&quot; but from my
</I>&gt;<i> experience any similar operation should not be considered as a
</I>&gt;<i> production action. In a case of bug that is being fixed\tested or a
</I>&gt;<i> software that is out of maintenance it might be the only solution
</I>&gt;<i> but yet is not recommended.
</I>&gt;<i> 
</I>&gt;<i> Notice that any action you would do regarding this squidGuard
</I>&gt;<i> helpers will cost something like any other server simple
</I>&gt;<i> operation.
</I>&gt;<i> 
</I>&gt;<i> Squid basically tries to take in account that to every operation
</I>&gt;<i> there is cost and the admin will prefer to run the server for more
</I>&gt;<i> then a period of 24\48 hours. I understand that there is memory
</I>&gt;<i> that is being used by squidGuard and I would not expect it to not
</I>&gt;<i> consume any memory at all.
</I>&gt;<i> 
</I>&gt;<i> The next step are not common CS use practice: - The first step
</I>&gt;<i> before rushing to terminate squidGuard would be to check what is
</I>&gt;<i> the DB files size which squidGuard uses. - Then I would try to
</I>&gt;<i> estimate what RAM usage I would expect for this logic and for the
</I>&gt;<i> DB files. - At this point some would try to sacrifice some aspects
</I>&gt;<i> of performance compared to others due to what so ever reason. -
</I>&gt;<i> Others might try other directions.(I will take this &quot;other&quot; one.) 
</I>&gt;<i> -- Consider what is more important between couple things: * System
</I>&gt;<i> ram or CPU utilization * System stability * System disk access
</I>&gt;<i> reduction * System network utilization * System ching ching (ie $$
</I>&gt;<i> or other concurrency) costs -- Based on choosing one or more from
</I>&gt;<i> the options above and\or others that the human mind can take in
</I>&gt;<i> account, list them and make sure what the current issue in hands
</I>&gt;<i> hits and maybe by that costs or might cost money or sleep or fuel
</I>&gt;<i> or happiness or other important things that are considered to be a
</I>&gt;<i> loss and or a benefit. From this point on the solution in most of
</I>&gt;<i> the time is simpler then some might imagine.
</I>&gt;<i> 
</I>&gt;<i> Now I think is the right place to stop the actual lookup for one 
</I>&gt;<i> solution or other and simply understand the technical issue you see
</I>&gt;<i> and understand it.
</I>&gt;<i> 
</I>&gt;<i> All The Bests, Eliezer
</I>&gt;<i> 
</I>&gt;<i> * Waiting for the ps output.
</I>&gt;<i> 
</I>&gt;<i> On 16/02/2015 18:55, Yuri Voinov wrote:
</I>&gt;&gt;<i> root @ cthulhu / # ps -aux ps: unknown user x
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Really, I don't understand subject of discussion.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I think, will good to have possibility to autoclose idle Squid 
</I>&gt;&gt;<i> redirectors after time specified. Regardless of the operating
</I>&gt;&gt;<i> system. Like autoclose applications on Android.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I want stupid thing?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> I'm not hard to execute through the cron pkill -9 squidGuard
</I>&gt;&gt;<i> command every hour. But it is a crutch. Did you agree?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________ squid-users mailing
</I>&gt;<i> list <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> 
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2

iQEcBAEBAgAGBQJU4jn4AAoJENNXIZxhPexG/ggH/2QQ0GyVmADIzd0JIDhYtcn6
BnYGztozSfGlyOCKdp822EtJfVFg+lJN2V3Phcn3iWFmdIhyX2hvvbyBJDfSbLCN
lxciDnRBp5tbnNiKQ0vNuYwH6nwQ4IwR0+5JwXV3RLJ4NlRTgoaeth6owYj7SnXW
2vG2+LWZBK+K5N/rvCtmMLnx9L6A1V2FRHVSio3460pYLzR+T5M/HKKewZ90jqmQ
ibO46Uu8TXI/ckpey7hX0YISlgHBXP8AYTHWL8V3oFP2HSM3aoY3ThD9gCkpdZi+
k99iYHpL6m6OiJIYcQjEc00EX09sEd9EDmcnfPSopk6R88KdUJnNOJWemCr7AI8=
=c+UO
-----END PGP SIGNATURE-----

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002291.html">[squid-users] Is Squid can shutdown unused idle redirector's children?
</A></li>
	<LI>Next message (by thread): <A HREF="002264.html">[squid-users] Is Squid can shutdown unused idle redirector's children?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2263">[ date ]</a>
              <a href="thread.html#2263">[ thread ]</a>
              <a href="subject.html#2263">[ subject ]</a>
              <a href="author.html#2263">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
