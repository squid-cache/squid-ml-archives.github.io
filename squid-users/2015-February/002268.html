<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Is Squid can shutdown unused idle redirector's children?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Is%20Squid%20can%20shutdown%20unused%20idle%20redirector%27s%0A%20children%3F&In-Reply-To=%3C54E24B71.1090406%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002267.html">
   <LINK REL="Next"  HREF="002271.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Is Squid can shutdown unused idle redirector's children?</H1>
    <B>Yuri Voinov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Is%20Squid%20can%20shutdown%20unused%20idle%20redirector%27s%0A%20children%3F&In-Reply-To=%3C54E24B71.1090406%40gmail.com%3E"
       TITLE="[squid-users] Is Squid can shutdown unused idle redirector's children?">yvoinov at gmail.com
       </A><BR>
    <I>Mon Feb 16 19:56:33 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002267.html">[squid-users] Is Squid can shutdown unused idle redirector's children?
</A></li>
        <LI>Next message (by thread): <A HREF="002271.html">[squid-users] Is Squid can shutdown unused idle redirector's children?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2268">[ date ]</a>
              <a href="thread.html#2268">[ thread ]</a>
              <a href="subject.html#2268">[ subject ]</a>
              <a href="author.html#2268">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Now:

2015/02/16 23:10:23 kid1|   store_swap_size = 29826351.50 KB
2015/02/16 23:10:24 kid1| storeLateRelease: released 0 objects
2015/02/16 23:15:01 kid1| Starting new redirector helpers...
2015/02/16 23:15:01 kid1| helperOpenServers: Starting 1/100
'squidGuard' processes
2015/02/17 01:40:15 kid1| Starting new redirector helpers...
2015/02/17 01:40:15 kid1| helperOpenServers: Starting 1/100
'squidGuard' processes
^Croot @ cthulhu / # ps -e -o user,pid,rss,comm
    USER   PID  RSS COMMAND
    root     0    0 sched
    root     5    0 zpool-rpool
    root     6    0 kmem_task
    root     1 1360 /sbin/init
    root     2    0 pageout
    root     3    0 fsflush
    root     7    0 vmtasks
   squid  6477 3412 (ssl_crtd)
    root    11 10088 /lib/svc/bin/svc.startd
    root    13 10124 /lib/svc/bin/svc.configd
    root   925 2452 /usr/lib/sendmail
    root    87    0 zpool-data
    root    89 2228 devfsadmd
    root   769 1036 /usr/lib/saf/sac
 unbound   921 113444 /usr/local/sbin/unbound
    root   358  812 /usr/sbin/ipmon
  clamav  1386 303580 /opt/csw/sbin/clamd
    root   498 2152 /usr/lib/picl/picld
  daemon   207 2636 /usr/lib/crypto/kcfd
    root   148 2400 /usr/lib/sysevent/syseventd
    root   918 1040 /usr/local/sbin/dnscrypt-proxy
    root   705 1344 /usr/sbin/cron
  daemon   756 1060 /usr/sbin/rpcbind
   squid   909 1456 /usr/local/bin/c-icap
 privoxy   796 2744 /opt/csw/sbin/privoxy
    root   799 2824 /usr/lib/inet/inetd
    root   800  728 /usr/lib/utmpd
     tor   924 37636 /opt/csw/bin/tor
    root   807 1412 /usr/lib/saf/ttymon
    root   808 10896 /usr/lib/fm/fmd/fmd
    root   836 1948 /usr/sbin/syslogd
    root   811 1552 /usr/lib/saf/ttymon
    root   939 6276 /opt/csw/bin/perl
    root   917  952 /usr/local/sbin/sshd
  clamav   927 4816 /opt/csw/bin/freshclam
   squid  6486 2252 diskd
   squid 37146 1664 /opt/csw/apache2/sbin/httpd
   squid 18321 1596 /opt/csw/apache2/sbin/httpd
    root  1141 1364 /usr/lib/inet/xntpd
   squid 47986 1616 /usr/local/bin/c-icap
    root 37151 2512 -bash
   squid  6478 3412 (ssl_crtd)
   squid  6479 3412 (ssl_crtd)
    root  6473 1156 /usr/local/squid/sbin/squid
   squid  6483 2248 diskd
   squid 33784 2024 /usr/local/bin/c-icap
   squid  6480 3412 (ssl_crtd)
    root 50700 1528 ps
   squid  6476 3912 (ssl_crtd)
    root 18319 4576 /opt/csw/apache2/sbin/httpd
   squid  6484 2260 diskd
    root 14856 4028 /usr/local/sbin/sshd
   squid  6482 2064 (unlinkd)
    root 14859 2504 -bash
   squid 37144 1664 /opt/csw/apache2/sbin/httpd
   squid  6485 2264 diskd
   squid  6562 14284 (squidGuard)
   squid 37145 1664 /opt/csw/apache2/sbin/httpd
    root 37148 3952 /usr/local/sbin/sshd
   squid 47988 11900 (squidGuard)
   squid  6475 161332 (squid-1)
   squid  6481 2176 (logfile-daemon)

As you can see, two redirectors started. Now is 1:53 AM. Activity is
zero over 15 minutes.

Configuration is:

url_rewrite_program /usr/local/bin/squidGuard -c
/usr/local/squidGuard/squidGuard.conf
url_rewrite_children 100 startup=0 idle=1 concurrency=0

I.e, second process must be down, correct? Idle=1, so, only one
redirector process must remains.

But we seen two redirectors. One of them is completely idle.

Look, activity is gone:

root @ cthulhu / # squidview
                                Mon Pri | h = help
0.0.1         cache_<A HREF="object://localhost/info">object://localhost/info</A>
0.0.1         cache_<A HREF="object://localhost/info">object://localhost/info</A>
0.0.1         cache_<A HREF="object://localhost/server_list">object://localhost/server_list</A>
0.0.1         cache_<A HREF="object://localhost/server_list">object://localhost/server_list</A>
0.0.1         cache_<A HREF="object://localhost/counters">object://localhost/counters</A>
0.0.1         cache_<A HREF="object://localhost/info">object://localhost/info</A>
0.0.1         cache_<A HREF="object://localhost/counters">object://localhost/counters</A>
0.0.1         cache_<A HREF="object://localhost/storedir">object://localhost/storedir</A>
0.0.1         cache_<A HREF="object://localhost/info">object://localhost/info</A>
0.0.1         cache_<A HREF="object://localhost/info">object://localhost/info</A>
0.0.1         cache_<A HREF="object://localhost/server_list">object://localhost/server_list</A>
0.0.1         cache_<A HREF="object://localhost/server_list">object://localhost/server_list</A>
0.0.1         cache_<A HREF="object://localhost/counters">object://localhost/counters</A>
0.0.1         cache_<A HREF="object://localhost/info">object://localhost/info</A>
0.0.1         cache_<A HREF="object://localhost/counters">object://localhost/counters</A>
0.0.1         cache_<A HREF="object://localhost/storedir">object://localhost/storedir</A>
0.0.1         cache_<A HREF="object://localhost/info">object://localhost/info</A>
0.0.1         cache_<A HREF="object://localhost/info">object://localhost/info</A>
0.0.1         cache_<A HREF="object://localhost/server_list">object://localhost/server_list</A>
0.0.1         cache_<A HREF="object://localhost/server_list">object://localhost/server_list</A>
0.0.1         cache_<A HREF="object://localhost/counters">object://localhost/counters</A>
0.0.1         cache_<A HREF="object://localhost/info">object://localhost/info</A>
0.0.1   cache_<A HREF="object://localhostcounters">object://localhostcounters</A>
100.00% Tue Feb 17 01:55 2015



17.02.15 1:14, Eliezer Croitoru &#1087;&#1080;&#1096;&#1077;&#1090;:
&gt;<i> On 16/02/2015 21:10, Yuri Voinov wrote:
</I>&gt;&gt;<i> root @ cthulhu / # ps -e
</I>&gt;<i> 
</I>&gt;<i> Yuri,
</I>&gt;<i> 
</I>&gt;<i> Can you find the right ps command that will include user and
</I>&gt;<i> memory usage by each process?
</I>&gt;<i> 
</I>&gt;<i> Thanks, Eliezer
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________ squid-users mailing
</I>&gt;<i> list <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> 
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2

iQEcBAEBAgAGBQJU4ktxAAoJENNXIZxhPexGIisH/jvrG3LLjv3GBdsLxagtnjmt
/VLCMOPC3xp/M8aiLaIPC8HCUp1maLiFT3LNi190r1mf3WHjU80qMil2kaMB26C3
baJfjPkKS2Pkh4gus4u/kNSHPuO+cMyavFtph0j+Y0IjpqHW895w/LWAjiWXtPSI
aRze/q1yZ9KYQwFE4R7MrXAw3Gli7W3wVtW2w+g6KvofwHUMD1PwLa2+X4SOcsey
UwzMarPOLiGBac0RJgkJQLtzdeFjf7GCxNCoWJFTbzy6GZ8UHMGtUIIgMLbzZci3
Xpj7rqqdRm0ZzsNb19oLpJvXtFGw7O4+y1DUb6KIMZY0/kQGKMwq+i3YxL2/sUI=
=URcr
-----END PGP SIGNATURE-----

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002267.html">[squid-users] Is Squid can shutdown unused idle redirector's children?
</A></li>
	<LI>Next message (by thread): <A HREF="002271.html">[squid-users] Is Squid can shutdown unused idle redirector's children?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2268">[ date ]</a>
              <a href="thread.html#2268">[ thread ]</a>
              <a href="subject.html#2268">[ subject ]</a>
              <a href="author.html#2268">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
