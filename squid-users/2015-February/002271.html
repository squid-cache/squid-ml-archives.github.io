<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Is Squid can shutdown unused idle redirector's children?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Is%20Squid%20can%20shutdown%20unused%20idle%20redirector%27s%0A%20children%3F&In-Reply-To=%3C54E26882.6050608%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002268.html">
   <LINK REL="Next"  HREF="002280.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Is Squid can shutdown unused idle redirector's children?</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Is%20Squid%20can%20shutdown%20unused%20idle%20redirector%27s%0A%20children%3F&In-Reply-To=%3C54E26882.6050608%40ngtech.co.il%3E"
       TITLE="[squid-users] Is Squid can shutdown unused idle redirector's children?">eliezer at ngtech.co.il
       </A><BR>
    <I>Mon Feb 16 22:00:34 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002268.html">[squid-users] Is Squid can shutdown unused idle redirector's children?
</A></li>
        <LI>Next message (by thread): <A HREF="002280.html">[squid-users] Is Squid can shutdown unused idle redirector's children?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2271">[ date ]</a>
              <a href="thread.html#2271">[ thread ]</a>
              <a href="subject.html#2271">[ subject ]</a>
              <a href="author.html#2271">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Yuri,

OK I have seen something...
Now we might need also the virtual memory which might be vsz.
And the cachemgr output is not from squidview..
The last image I have seen from cachemgr was much helpful(with 10 helpers).

 From what I have seen until now squidGuard uses about 13 MB of ram 
constantly.
If this is what it costs to run a squidGuard helper you should consider 
that it has some peak usage time and lower bound usage time and you will 
need to calculate how much helpers you need to provide smooth surfing on 
peak usage time.
You should consider this peak usage as the required memory from 
squidGuard for smooth operation.
Since not you and not will be able to change the basic memory 
footprint(required) for squidGuard you will need to somehow decide if 
you require a much efficient software or to adjust your system accordingly.

I would agree that 100 * 13 MB of ram means about 1.3 GB of ram usage 
and might not be acceptable for a &quot;simple&quot; filtering mechanism.

The main reasons for the unknown need for 100 helpers might be since it 
was not designed to be used this way.
I must say that squidGuard is a very good piece of software but it lacks 
couple things which might make it un-usable for some if not many systems 
and maybe including yours.
Indeed in your case there is a chance that if you will even install a 
full blown DB that will be stored all in ram and you will write a helper 
that will mimic squidguard functionality\logic with concurrency support 
you will get much less memory consumption with much more efficient 
request handling.

It is much smarter to write a helper which will have a overall 
efficiency mark on it then to add into squid something that might not be 
even needed in the first place.

For now before writing any helper etc I will want to see the cachemgr 
interface output for the &quot;redirector&quot; option in two cases:
- startup
- after midnight when there are lots of helpers running under squid

You can see that squid since version 3.2 squid offers access to the 
squid cache manager interface using a simple url such as:
&quot;<A HREF="http://filter:3128/squid-internal-mgr/redirector">http://filter:3128/squid-internal-mgr/redirector</A>&quot;
(using the visible_hostname and the forward proxy port of squid)

All The Bests,
Eliezer

On 16/02/2015 21:56, Yuri Voinov wrote:
&gt;<i> -----BEGIN PGP SIGNED MESSAGE-----
</I>&gt;<i> Hash: SHA1
</I>&gt;<i>
</I>&gt;<i> Now:
</I>&gt;<i>
</I>&gt;<i> 2015/02/16 23:10:23 kid1|   store_swap_size = 29826351.50 KB
</I>&gt;<i> 2015/02/16 23:10:24 kid1| storeLateRelease: released 0 objects
</I>&gt;<i> 2015/02/16 23:15:01 kid1| Starting new redirector helpers...
</I>&gt;<i> 2015/02/16 23:15:01 kid1| helperOpenServers: Starting 1/100
</I>&gt;<i> 'squidGuard' processes
</I>&gt;<i> 2015/02/17 01:40:15 kid1| Starting new redirector helpers...
</I>&gt;<i> 2015/02/17 01:40:15 kid1| helperOpenServers: Starting 1/100
</I>&gt;<i> 'squidGuard' processes
</I>&gt;<i> ^Croot @ cthulhu / # ps -e -o user,pid,rss,comm
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002268.html">[squid-users] Is Squid can shutdown unused idle redirector's children?
</A></li>
	<LI>Next message (by thread): <A HREF="002280.html">[squid-users] Is Squid can shutdown unused idle redirector's children?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2271">[ date ]</a>
              <a href="thread.html#2271">[ thread ]</a>
              <a href="subject.html#2271">[ subject ]</a>
              <a href="author.html#2271">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
