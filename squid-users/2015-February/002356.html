<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Mutual authentication managed by Squid
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Mutual%20authentication%20managed%20by%20Squid&In-Reply-To=%3C54E70146.7080603%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002355.html">
   <LINK REL="Next"  HREF="002358.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Mutual authentication managed by Squid</H1>
    <B>Yuri Voinov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Mutual%20authentication%20managed%20by%20Squid&In-Reply-To=%3C54E70146.7080603%40gmail.com%3E"
       TITLE="[squid-users] Mutual authentication managed by Squid">yvoinov at gmail.com
       </A><BR>
    <I>Fri Feb 20 09:41:26 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002355.html">[squid-users] Mutual authentication managed by Squid
</A></li>
        <LI>Next message (by thread): <A HREF="002358.html">[squid-users] Squid compatibility with Ubuntu Server 14.10
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2356">[ date ]</a>
              <a href="thread.html#2356">[ thread ]</a>
              <a href="subject.html#2356">[ subject ]</a>
              <a href="author.html#2356">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
20.02.15 15:34, Ilya Karpov &#1087;&#1080;&#1096;&#1077;&#1090;:
&gt;<i> I&#8217;m not sure that using transparent sslbump squid will understand how 
</I>&gt;<i> to use client certificate for mutual authentication.
</I>As you configure it.
&gt;<i> At least without transparent ssl bump it doesn&#8217;t.
</I>Sure.
&gt;<i> Did you try to use trspr-sslbump for client auth? How does squid pick 
</I>&gt;<i> right client certificate for certain host?
</I>Client auth on HTTPS sites is not function of transparent proxy. And 
yes, we don't use client serts on our transparent proxy. We simple 
bypass this sites directly without bumping. Let's client's do it 
yourself. This is not our responsibility.

I see two ways to do that as you wish.

1. Add sites, required client-certs auth to exclude bump list. I.e., 
exclude proxy from chain.
2. Configure proxy to use client certs with sites requires it using ACL's.

&gt;<i>
</I>&gt;<i> Best regards,
</I>&gt;<i> Ilya Karpov
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">karpoftea at gmail.com</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">karpoftea at gmail.com</A>&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> 20 &#1092;&#1077;&#1074;&#1088;. 2015 &#1075;., &#1074; 12:24, Yuri Voinov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">yvoinov at gmail.com</A> 
</I>&gt;&gt;<i> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">yvoinov at gmail.com</A>&gt;&gt; &#1085;&#1072;&#1087;&#1080;&#1089;&#1072;&#1083;(&#1072;):
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Transparent SSL Bump interception, eh?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 20.02.15 15:14, Ilya Karpov &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;&gt;&gt;<i> Hi guys,
</I>&gt;&gt;&gt;<i> can anyone suggest solution to make following scenario work using squid:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> step1.
</I>&gt;&gt;&gt;<i> Client(actually server application) calls <A HREF="HTTP://example">HTTP://example</A> 
</I>&gt;&gt;&gt;<i> &lt;<A HREF="http://example/">http://example/</A>&gt;.org squid via proxy.
</I>&gt;&gt;&gt;<i>  |
</I>&gt;&gt;&gt;<i> V
</I>&gt;&gt;&gt;<i> step2.
</I>&gt;&gt;&gt;<i> Proxy(Squid) understands that all calls to <A HREF="HTTP://example.org">HTTP://example.org</A> 
</I>&gt;&gt;&gt;<i> &lt;<A HREF="http://example.org/">http://example.org/</A>&gt; should be changed to <A HREF="HTTPS://example.org">HTTPS://example.org</A> 
</I>&gt;&gt;&gt;<i> &lt;<A HREF="https://example.org/">https://example.org/</A>&gt;, trusts CA that uses example.org 
</I>&gt;&gt;&gt;<i> &lt;<A HREF="http://example.org/">http://example.org/</A>&gt; and knows client certificate to use for https 
</I>&gt;&gt;&gt;<i> client authentication
</I>&gt;&gt;&gt;<i>  |
</I>&gt;&gt;&gt;<i> V
</I>&gt;&gt;&gt;<i> step3.
</I>&gt;&gt;&gt;<i> Origin(some server in internet) accepts https request, authenticates 
</I>&gt;&gt;&gt;<i> client, returns response
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The main aim is to make client know nothing about https complexity 
</I>&gt;&gt;&gt;<i> (storing certificates/keys, knowing specific algorithms etc), and 
</I>&gt;&gt;&gt;<i> make squid manage this things.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Best regards,
</I>&gt;&gt;&gt;<i> Ilya Karpov
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">karpoftea at gmail.com</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">karpoftea at gmail.com</A>&gt;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> squid-users mailing list
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> squid-users mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> 
</I>&gt;&gt;<i> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150220/d1ef949f/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150220/d1ef949f/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002355.html">[squid-users] Mutual authentication managed by Squid
</A></li>
	<LI>Next message (by thread): <A HREF="002358.html">[squid-users] Squid compatibility with Ubuntu Server 14.10
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2356">[ date ]</a>
              <a href="thread.html#2356">[ thread ]</a>
              <a href="subject.html#2356">[ subject ]</a>
              <a href="author.html#2356">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
