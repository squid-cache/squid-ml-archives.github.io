<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] request_body_max_size on transparent proxy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20request_body_max_size%20on%20transparent%20proxy&In-Reply-To=%3C1424728863146.58160%40sas.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002405.html">
   <LINK REL="Next"  HREF="002408.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] request_body_max_size on transparent proxy</H1>
    <B>Mike Mitchell</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20request_body_max_size%20on%20transparent%20proxy&In-Reply-To=%3C1424728863146.58160%40sas.com%3E"
       TITLE="[squid-users] request_body_max_size on transparent proxy">Mike.Mitchell at sas.com
       </A><BR>
    <I>Mon Feb 23 22:01:02 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002405.html">[squid-users] Building 3.5.1 without libcom_err?
</A></li>
        <LI>Next message (by thread): <A HREF="002408.html">[squid-users] again i lost my cache with upgrading for 3.5.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2406">[ date ]</a>
              <a href="thread.html#2406">[ thread ]</a>
              <a href="subject.html#2406">[ subject ]</a>
              <a href="author.html#2406">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I'm trying to POST large files (&gt;1MB) through a squid 3.5.2 proxy set up to intercept connections.

The client is including an 'Expect: 100-continue' header, and sends all headers in a single network packet.
POSTs of content smaller than 1MB go through, but larger POSTs do not.
The client's TCP connection is being reset without squid sending any sort of error page.
Nothing is logged in squid -- not in the access log, not in the cache log.  It's as if that request never happened.
The client just gets a closed connection.

I'm running with the default 'request_body_max_size', it is not specified in my configuration.
That should mean &quot;unlimited&quot; for the request body.

If I configure the client to explicitly use the same proxy on a different, non-transparent port, the large POSTs go through correctly.  It is as if request_body_max_size does not function on a port marked 'transparent'.

Has anyone else seen this problem?
I've found one reference to it in my searches, <A HREF="http://nerdanswer.com/answer.php?q=336233">http://nerdanswer.com/answer.php?q=336233</A>

Mike Mitchell


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002405.html">[squid-users] Building 3.5.1 without libcom_err?
</A></li>
	<LI>Next message (by thread): <A HREF="002408.html">[squid-users] again i lost my cache with upgrading for 3.5.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2406">[ date ]</a>
              <a href="thread.html#2406">[ thread ]</a>
              <a href="subject.html#2406">[ subject ]</a>
              <a href="author.html#2406">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
