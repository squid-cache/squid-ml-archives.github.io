<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] again i lost my cache with upgrading for 3.5.2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20again%20i%20lost%20my%20cache%20with%20upgrading%20for%203.5.2&In-Reply-To=%3C54EBD39A.7020907%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002408.html">
   <LINK REL="Next"  HREF="002430.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] again i lost my cache with upgrading for 3.5.2</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20again%20i%20lost%20my%20cache%20with%20upgrading%20for%203.5.2&In-Reply-To=%3C54EBD39A.7020907%40ngtech.co.il%3E"
       TITLE="[squid-users] again i lost my cache with upgrading for 3.5.2">eliezer at ngtech.co.il
       </A><BR>
    <I>Tue Feb 24 01:27:54 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002408.html">[squid-users] again i lost my cache with upgrading for 3.5.2
</A></li>
        <LI>Next message (by thread): <A HREF="002430.html">[squid-users] again i lost my cache with upgrading for 3.5.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2410">[ date ]</a>
              <a href="thread.html#2410">[ thread ]</a>
              <a href="subject.html#2410">[ subject ]</a>
              <a href="author.html#2410">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 24/02/2015 02:16, HackXBack wrote:
&gt;<i> i did that with version 3.5.1
</I>&gt;<i> now wen upgrade again for 3.5.2 my cache damaged again !!
</I>&gt;<i> i just want to know how this version is stable !!
</I>&gt;<i> its full of bugs !!
</I>

Hey HackXBack,

Some would imagine that squid is perfect and if you will look at the 
Bugzilla you will see that it's not.
Any such upgrades tests are recommended to be done on a *non production* 
system.
If it means loosing your cache and it happens each time you update it is 
most likely that the issue is the upgrade path you do things and not an 
issue with the software itself.
I do not like to redirect into docs since docs cannot answer lots of 
things which humans can.

In this specific case I must describe to you couple things for an 
upgrade\update path:
- make sure the traffic from the server is down(do it slowly so the 
users will not curse your deeds and later you will be fired), 60 seconds 
should be enough in many cases but not all.
- Then let squid shutdown slow enough to allow it flush all the in 
memory data into disk.
- Start squid in a memory only state to make sure nobody touches the 
cache at all
- Add the clients traffic back for the testing period of the new version.
- Write a &quot;testing&quot; simple squid.conf that uses some very high port such 
as 127.0.0.1:23128
- Add one cache_dir at a time into this squid configuration file and 
make sure that this cache_dir is not too big(in a case you fear from 
cache corruption)
- After making sure the new version meets your basic needs you can try 
to repeat the process from the first step while adding the cache_dir 
back into the original squid configuration files.

Notice that an upgrade path is there to help the admin in his work since 
it can affect many users and can cause all sort of weird things.

Loosing cache_dir might be worth a lot to you since you indeed say over 
and over that squid is blame for it.
Before any such upgrade try if possible to look at the release notes 
since Amos is writing them down each and every time to make sure the 
admin will understand what is the current state of the squid release.

All The Bests,
Eliezer Croitoru


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002408.html">[squid-users] again i lost my cache with upgrading for 3.5.2
</A></li>
	<LI>Next message (by thread): <A HREF="002430.html">[squid-users] again i lost my cache with upgrading for 3.5.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2410">[ date ]</a>
              <a href="thread.html#2410">[ thread ]</a>
              <a href="subject.html#2410">[ subject ]</a>
              <a href="author.html#2410">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
