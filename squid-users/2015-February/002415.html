<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Need better debug_options values to track down cache	MISSes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Need%20better%20debug_options%20values%20to%20track%20down%20cache%0A%09MISSes&In-Reply-To=%3CCALXdjAKvTcvDhcgih3-FXuohh1A5xVqMvv792KXPN7ZifLSVkw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002431.html">
   <LINK REL="Next"  HREF="002420.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Need better debug_options values to track down cache	MISSes</H1>
    <B>Greg</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Need%20better%20debug_options%20values%20to%20track%20down%20cache%0A%09MISSes&In-Reply-To=%3CCALXdjAKvTcvDhcgih3-FXuohh1A5xVqMvv792KXPN7ZifLSVkw%40mail.gmail.com%3E"
       TITLE="[squid-users] Need better debug_options values to track down cache	MISSes">longbeakedechidna1 at gmail.com
       </A><BR>
    <I>Tue Feb 24 12:54:05 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002431.html">[squid-users] Authenication denies access to ports
</A></li>
        <LI>Next message (by thread): <A HREF="002420.html">[squid-users] Need better debug_options values to track down cache MISSes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2415">[ date ]</a>
              <a href="thread.html#2415">[ thread ]</a>
              <a href="subject.html#2415">[ subject ]</a>
              <a href="author.html#2415">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I'm new to squid administration, with basic *nix admin skills. My task now
is to replace an old Squid reverse proxy server (3.1.15 on an old Fedora)
with a new one (Squid 3.3.8 on Ubuntu 14 LTS) and ran into a problem.

I've spent 2 days tweaking-googling-debugging, now looking for some help...

Problem is, with the ~same configuration, the old Squid caches HTML pages
well and the new doesn't. This is a major concern, we're using Squid
exactly to do that and get the load off our appservers.

In this first mail, I'm only asking for a hint on what debug_options to
use. In previous list emails I've seen that some details help, so here they
are:
- Reverse proxy, port 80 only, one uplink straight to the app servers.
- Pretty standard configuration, standard refresh_patterns.
- Disk and memory cache, disk cache initialised with -z.
- Clocks are in sync (except for the old proxy server) using ntpd.
- Squid gives HITs for favicon.ico and RSS feeds only - these have
different headers and mimetypes compared to HTML files (and that's by
design).
- This new server seems to save accessed HTML files on disk but still gives
X-Cache-Lookup:MISS for all of them later.
- I've found the debug_options sections page but section names are
ambiguous for someone who's not a Squid programmer. I had to download the
source code, analysed it and tried &quot;debug_options 11,1 22,6 85,3 88,5 33,1
31,5 90,5&quot; which is too much and &quot;debug_options 88,5 85,5 22,6 11,5 33,1&quot;
which might be too little.
- Headers look okay (Cache-Control, Pragma, Vary), stale/fresh calculation
looks okay (pages are deemed fresh) in the debug log.
- The best I got so far is this: &quot;client_side_reply.cc(1618)
identifyFoundObject: clientProcessRequest2: StoreEntry is NULL -  MISS&quot;,
even for pages I see in the disk cache -- I'd like to know why does it
occur, probably need some more good debug_options. I don't understand the
code too well, don't know which direction to take.

Please suggest some more good debug_options to continue with.

Best regards,
Greg

PS. Also, I'll submit another mail with the details of the problem + the
config, hoping someone spots a problem right away.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150224/7b5278ad/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150224/7b5278ad/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002431.html">[squid-users] Authenication denies access to ports
</A></li>
	<LI>Next message (by thread): <A HREF="002420.html">[squid-users] Need better debug_options values to track down cache MISSes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2415">[ date ]</a>
              <a href="thread.html#2415">[ thread ]</a>
              <a href="subject.html#2415">[ subject ]</a>
              <a href="author.html#2415">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
