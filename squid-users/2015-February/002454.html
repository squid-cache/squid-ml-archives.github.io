<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] derive HTTP/HTTPS upload traffic to a secondary interface.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20derive%20HTTP/HTTPS%20upload%20traffic%20to%20a%20secondary%0A%20interface.&In-Reply-To=%3C42DE25A255671C44A93A7B58470DC09C5EAC5115%40Michelle.aplitec.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002453.html">
   <LINK REL="Next"  HREF="001969.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] derive HTTP/HTTPS upload traffic to a secondary interface.</H1>
    <B>Josep Borrell</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20derive%20HTTP/HTTPS%20upload%20traffic%20to%20a%20secondary%0A%20interface.&In-Reply-To=%3C42DE25A255671C44A93A7B58470DC09C5EAC5115%40Michelle.aplitec.local%3E"
       TITLE="[squid-users] derive HTTP/HTTPS upload traffic to a secondary interface.">jborrell at central.aplitec.com
       </A><BR>
    <I>Thu Feb 26 08:29:38 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002453.html">[squid-users] derive HTTP/HTTPS upload traffic to a secondary interface.
</A></li>
        <LI>Next message (by thread): <A HREF="001969.html">[squid-users] Tunnelled devices losing access to squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2454">[ date ]</a>
              <a href="thread.html#2454">[ thread ]</a>
              <a href="subject.html#2454">[ subject ]</a>
              <a href="author.html#2454">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Amos,

We are a school. Our Internet connection are 4 ADSL (8/0.8Mb) and 1 SDSL (4/4Mb)
We are doing session balancing in the firewall appliance.
The problem is when the students save this work, they
are using Google Apps for Education, so is very easy to saturate the upload channel of the ADSL. The ones that are luckily in the SDSL can save fast their work. The rest must wait some minutes.
We thought that deriving the upload traffic to the SDSL must alleviate the situation.
Our ISP admits no aggregation protocol, like MLPPP, that would be a solution.

Maybe there are another solution that we missing.
Thoughts are welcome.

Thanks

Josep


-----Mensaje original-----
De: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] En nombre de Amos Jeffries
Enviado el: jueves, 26 de febrero de 2015 6:42
Para: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Asunto: Re: [squid-users] derive HTTP/HTTPS upload traffic to a secondary interface.

On 25/02/2015 4:09 a.m., Josep Borrell wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> After some digging I realized that this setup works fine for HTTP traffic but not for HTTPS. I'm using ssl_bump in intercept mode.
</I>&gt;<i> Is possible that for HTTPS traffic I can't split the upload / download ?
</I>&gt;<i> 
</I>
At the connection level Squid is performing multiplexing for the HTTP messages. They are stateless, so can be split up and delivered over any connection it finds that meet the criteria.

SSL-Bump however is a single encrypted inbound stream of bytes. Squid is being a &quot;transaprent proxy&quot; for it by ensuring that the outbound is as closely matching the inbound behaviour as possible. All the messages that come in on an encrypted stream should be going out on a matching
(singular) outgoing encryted connection. There are some unavoidable differencs for HITS, error/deny's, forged certs etc but for the most part it needs to be kept as transparent as possible to reduce HTTPS problems.

For intercepted traffic you can/should do load balancing by selecting the paths for new connections rather than messages. This is a major reason why I recommend doing load balancing at the OS level where NIC load vs capacity and the additional packet overheads can be taken into account.

Amos

_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002453.html">[squid-users] derive HTTP/HTTPS upload traffic to a secondary interface.
</A></li>
	<LI>Next message (by thread): <A HREF="001969.html">[squid-users] Tunnelled devices losing access to squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2454">[ date ]</a>
              <a href="thread.html#2454">[ thread ]</a>
              <a href="subject.html#2454">[ subject ]</a>
              <a href="author.html#2454">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
