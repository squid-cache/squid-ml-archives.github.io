<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Dual-stack IPv4/IPv6 captive portal
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Dual-stack%20IPv4/IPv6%20captive%20portal&In-Reply-To=%3C54F0AF9B.2000600%40opendium.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002483.html">
   <LINK REL="Next"  HREF="002485.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Dual-stack IPv4/IPv6 captive portal</H1>
    <B>Steve Hill</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Dual-stack%20IPv4/IPv6%20captive%20portal&In-Reply-To=%3C54F0AF9B.2000600%40opendium.com%3E"
       TITLE="[squid-users] Dual-stack IPv4/IPv6 captive portal">steve at opendium.com
       </A><BR>
    <I>Fri Feb 27 17:55:39 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002483.html">[squid-users] Dual-stack IPv4/IPv6 captive portal
</A></li>
        <LI>Next message (by thread): <A HREF="002485.html">[squid-users] How to use access.log codes in custom error page
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2484">[ date ]</a>
              <a href="thread.html#2484">[ thread ]</a>
              <a href="subject.html#2484">[ subject ]</a>
              <a href="author.html#2484">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 27.02.15 17:00, Michele Bergonzoni wrote:

&gt;<i> This is true for v6 if the client uses its MAC as an identifier,
</I>&gt;<i> which it's not supposed to do and last time I checked was not true
</I>&gt;<i> for Windows, or if clients or DHCP relays support RFC6939, which is
</I>&gt;<i> quite new. See for example:
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://lists.isc.org/pipermail/kea-dev/2014-June/000043.html">https://lists.isc.org/pipermail/kea-dev/2014-June/000043.html</A>
</I>
Oh, interesting - I hadn't realised that.

&gt;<i> Have you thought about engineering your captive portal with a dual
</I>&gt;<i> stack DNS name (having both A and AAAA), a v4 only and a v6 only, and
</I>&gt;<i> having you HTML embed requests with appropriate identifiers to
</I>&gt;<i> correlate addresses? Of course there are HTTP complications and it is
</I>&gt;<i> not perfect, but I guess that as long as it's a captive portal,
</I>&gt;<i> kludginess cannot decrease below some level.
</I>
That was one of my options.  However, it won't work in the case of WISPr 
auto-logons because the page wouldn't be rendered by the client, so you 
wouldn't expect it to fetch embedded bits either.

&gt;<i> I am really interested to hear what people are doing in the field of
</I>&gt;<i> squid-powered captive portals, even more when interoperating with
</I>&gt;<i> iptables/ip6tables.
</I>
At the moment, we've written a hybrid captive portal/http-auth system. 
Essentially, we use HTTP proxy auth where we can and a captive portal 
where we can't.  HTTP proxy auth is preferable because every request 
gets authenticated individually and we can use Kerberos.  Unfortunately 
a lot of software doesn't support it properly (I'm looking at you, apple 
and google, although everyone else is getting pretty bad at it too) and 
it also can't be used for transparent proxying (and again, a lot of 
software just doesn't bother to support proxies these days, and it's 
only getting worse).  So we use the user-agent string to try and 
identify the clients we can safely authenticate, and the rest rely on 
cached credentials or captive portal.

Yes, it's a horrible bodge, but unfortunately that's where modern 
software is driving us. :(  For iOS and Android you can pretty much 
forget using pure HTTP proxy authentication.  Luckily iOS can use WISPr 
to automatically log into a portal, sadly vanilla Android still doesn't 
include a WISPr client (I'd put money on this being down to patents!).


-- 
  - Steve Hill
    Technical Director
    Opendium Limited     <A HREF="http://www.opendium.com">http://www.opendium.com</A>

Direct contacts:
    Instant messager: xmpp:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">steve at opendium.com</A>
    Email:            <A HREF="https://lists.squid-cache.org/listinfo/squid-users">steve at opendium.com</A>
    Phone:            sip:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">steve at opendium.com</A>

Sales / enquiries contacts:
    Email:            <A HREF="https://lists.squid-cache.org/listinfo/squid-users">sales at opendium.com</A>
    Phone:            +44-1792-824568 / sip:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">sales at opendium.com</A>

Support contacts:
    Email:            <A HREF="https://lists.squid-cache.org/listinfo/squid-users">support at opendium.com</A>
    Phone:            +44-1792-825748 / sip:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">support at opendium.com</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002483.html">[squid-users] Dual-stack IPv4/IPv6 captive portal
</A></li>
	<LI>Next message (by thread): <A HREF="002485.html">[squid-users] How to use access.log codes in custom error page
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2484">[ date ]</a>
              <a href="thread.html#2484">[ thread ]</a>
              <a href="subject.html#2484">[ subject ]</a>
              <a href="author.html#2484">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
