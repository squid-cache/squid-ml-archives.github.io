<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 3 SSL bump: Google drive application could not connect
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203%20SSL%20bump%3A%20Google%20drive%20application%20could%0A%20not%20connect&In-Reply-To=%3C54A9B0BB.1050509%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001310.html">
   <LINK REL="Next"  HREF="001312.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 3 SSL bump: Google drive application could not connect</H1>
    <B>Yuri Voinov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203%20SSL%20bump%3A%20Google%20drive%20application%20could%0A%20not%20connect&In-Reply-To=%3C54A9B0BB.1050509%40gmail.com%3E"
       TITLE="[squid-users] Squid 3 SSL bump: Google drive application could not connect">yvoinov at gmail.com
       </A><BR>
    <I>Sun Jan  4 21:29:31 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001310.html">[squid-users] Squid 3 SSL bump: Google drive application could not connect
</A></li>
        <LI>Next message (by thread): <A HREF="001312.html">[squid-users] Squid 3 SSL bump: Google drive application could not connect
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1311">[ date ]</a>
              <a href="thread.html#1311">[ thread ]</a>
              <a href="subject.html#1311">[ subject ]</a>
              <a href="author.html#1311">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1
 
As I can see, we have two major problems with SSL Bump now.

1. Stupid apps and it's stupid developers - like ICQ and other stupid IM
- which is hope 443 port is never be blocked due to using for
logons/internet banking etc.
This stupid way broke standards (?) and make us crazy. Now single
solution is catch them manually and pass it without bumping. This is the
simplest problem. And I hope it will be solved in core - i.e. in Squid
directly.

2. SSL Pinned sites. We cannot do with them anything excluding sniff it
and pass by IP without bump.

First problems seems to solve easy. Either by helper, or by squid - no
matter. It's really simple. Just check SSL cert on server side - and
make decision - to bump, or not to bump.

The second problem seems difficult and now I can't see any reasonable
solution, excluding sniffer/manual add to acl.

Any ideas? Will be write helper?

WBR, Yuri

05.01.2015 2:17, Douglas Davenport &#1087;&#1080;&#1096;&#1077;&#1090;:
&gt;<i> I saw a very similar feature in ufdbGuard which is a URL filter implemented as a Squid Redirector. They
</I>have a feature which probes the destination server for a valid HTTPS
cert in parallel to the user's connection and terminates it if it turns
out not to be a valid HTTPS cert. Their code is open source, maybe this
could be helpful in creating such a helper?
&gt;<i>
</I>&gt;<i> <A HREF="http://www.urlfilterdb.com/home.html">http://www.urlfilterdb.com/home.html</A>
</I>&gt;<i>
</I>&gt;<i> On Sat, Jan 3, 2015 at 3:45 AM, Yuri Voinov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">yvoinov at gmail.com</A>
</I>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">yvoinov at gmail.com</A>&gt;&gt; wrote:
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Term &quot;HTTPS&quot; often uses as &quot;Any connect over 443 port&quot;....
</I>&gt;<i>
</I>&gt;<i> 03.01.2015 13:59, Jason Haar &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;<i> &gt; On 01/01/15 00:11, James Harper wrote:
</I>&gt;<i> &gt;&gt; The helper connects to the IP:port and tries to obtain the
</I>&gt;<i> certificate, and then caches the result (in an sqlite database). If it
</I>&gt;<i> can't do so within a fairly short time it returns failure (but keeps
</I>&gt;<i> trying a bit longer and caches it for next time). Alternatively if the
</I>&gt;<i> IP used to be SSL but is now timing out it returns the previously cached
</I>&gt;<i> value. Negative results are cached for an increasing amount of time each
</I>&gt;<i> time it fails, on the basis that it probably isn't SSL.
</I>&gt;<i> &gt; That sounds great James! I'd certainly like to take a look at it too
</I>&gt;<i>
</I>&gt;<i> &gt; However, you say &quot;SSL&quot;  - did you mean &quot;HTTPS&quot;? ie discovering a ip:port
</I>&gt;<i> &gt; is a IMAPS server doesn't really help squid talk to it - surely you want
</I>&gt;<i> &gt; to discover HTTPS servers - and everything else should be
</I>&gt;<i> &gt; pass-through/splice?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     _______________________________________________
</I>&gt;<i>     squid-users mailing list
</I>&gt;<i>     <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
&gt;<i>     <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2
 
iQEcBAEBAgAGBQJUqbC7AAoJENNXIZxhPexGwwkH/j8XR2fQ4v/r3M2zFuDuhVsP
JZMM93IvZrGYRzJjAmmwg7ZUoYdwWWEaXoY6GygO+RdZESWfPvh00cSsxwRKfmvm
2s7sLDKlPnfUsf9fyWnihCtJg9hETZTsvUqK9I+iopiM1DHq/qwX3Pjkb2e2T45u
JuqU5ySBZPEt6G1gRn/+F2EyHdhWpa9OOtfeTAt4/oaJIuLoHP7855fif/1eg59U
QlISZkLjDcL4DqEVM+9UJh9TSN+dawj/Ks+3b+MT8sA/xvVdOyqhLMqnm4MPadSv
yvK5nQWW4rkfHOJ1zwWq3hAMLjCIXjY4q1NxNQAxdK5ESZvszecvXg3JMKo/THw=
=Ygen
-----END PGP SIGNATURE-----

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150105/d437b16d/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150105/d437b16d/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001310.html">[squid-users] Squid 3 SSL bump: Google drive application could not connect
</A></li>
	<LI>Next message (by thread): <A HREF="001312.html">[squid-users] Squid 3 SSL bump: Google drive application could not connect
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1311">[ date ]</a>
              <a href="thread.html#1311">[ thread ]</a>
              <a href="subject.html#1311">[ subject ]</a>
              <a href="author.html#1311">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
