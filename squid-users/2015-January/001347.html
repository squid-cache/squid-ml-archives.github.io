<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] MD5_CTX strikes back
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20MD5_CTX%20strikes%20back&In-Reply-To=%3C54ABC69D.6020807%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001489.html">
   <LINK REL="Next"  HREF="001349.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] MD5_CTX strikes back</H1>
    <B>Yuri Voinov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20MD5_CTX%20strikes%20back&In-Reply-To=%3C54ABC69D.6020807%40gmail.com%3E"
       TITLE="[squid-users] MD5_CTX strikes back">yvoinov at gmail.com
       </A><BR>
    <I>Tue Jan  6 11:27:25 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001489.html">[squid-users] Squid 3.4.10 sometimes catch assertion without core
</A></li>
        <LI>Next message (by thread): <A HREF="001349.html">[squid-users] Growing cache.log
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1347">[ date ]</a>
              <a href="thread.html#1347">[ thread ]</a>
              <a href="subject.html#1347">[ subject ]</a>
              <a href="author.html#1347">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1
 
Hi gents,

old good bug returns.

When build with Solaris Studio, I've got this error:

libtool: compile:  /bin/CC -DHAVE_CONFIG_H -I../.. -I../../include
-I../../lib -I../../src -I../../include -I/usr/include/gssapi
-I/usr/include/kerberosv5 -I../../libltdl -I/usr/sfw/include
-I/usr/include/gssapi -I/usr/include/kerberosv5 -D_REENTRANT -lpthread
-DSOLARIS2=10 -xarch=generic64 -xO4 -xtarget=native -m64 -c
Intercept.cc  -KPIC -DPIC -o .libs/Intercept.o
CC: Warning: -xarch=generic64 is deprecated, use -m64 to create 64-bit
programs
&quot;/usr/include/sys/md5.h&quot;, line 62: Error: Multiple declaration for MD5_CTX.
1 Error(s) detected.
Makefile:814: recipe for target 'Intercept.lo' failed
make[3]: *** [Intercept.lo] Error 1
make[3]: Leaving directory '/patch/squid-3.4.10/src/ip'
Makefile:7091: recipe for target 'all-recursive' failed
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory '/patch/squid-3.4.10/src'
Makefile:6036: recipe for target 'all' failed
make[1]: *** [all] Error 2
make[1]: Leaving directory '/patch/squid-3.4.10/src'
Makefile:562: recipe for target 'all-recursive' failed
make: *** [all-recursive] Error 1

This if configure and build with openssl 0.9.8.

With openssl 1.0.0 another error:

libtool: compile:  /bin/CC -DHAVE_CONFIG_H -I../.. -I../../include
-I../../lib -I../../src -I../../include -I/usr/include/gssapi
-I/usr/include/kerberosv5 -I../../libltdl -I/opt/csw/include
-I/usr/include/gssapi -I/usr/include/kerberosv5 -D_REENTRANT -lpthread
-DSOLARIS2=10 -xarch=generic64 -xO4 -xtarget=native -m64 -c PortCfg.cc 
-KPIC -DPIC -o .libs/PortCfg.o
CC: Warning: -xarch=generic64 is deprecated, use -m64 to create 64-bit
programs
&quot;../../src/ssl/gadgets.h&quot;, line 79: Error: Different types for &quot;?:&quot;
(extern &quot;C&quot; void(*)(x509_st*) and void(*)(x509_st*)).
&quot;../../src/ssl/gadgets.h&quot;, line 79: Warning (Anachronism): Formal
argument func of type extern &quot;C&quot; void(*)(void*) in call to
sk_pop_free(stack_st*, extern &quot;C&quot; void(*)(void*)) is being passed
void(*)(void*).
&quot;../../src/ssl/gadgets.h&quot;, line 115: Error: Different types for &quot;?:&quot;
(extern &quot;C&quot; void(*)(X509_crl_st*) and void(*)(X509_crl_st*)).
&quot;../../src/ssl/gadgets.h&quot;, line 115: Warning (Anachronism): Formal
argument func of type extern &quot;C&quot; void(*)(void*) in call to
sk_pop_free(stack_st*, extern &quot;C&quot; void(*)(void*)) is being passed
void(*)(void*).
&quot;../../src/ssl/gadgets.h&quot;, line 118: Error: Different types for &quot;?:&quot;
(extern &quot;C&quot; void(*)(X509_name_st*) and void(*)(X509_name_st*)).
&quot;../../src/ssl/gadgets.h&quot;, line 118: Warning (Anachronism): Formal
argument func of type extern &quot;C&quot; void(*)(void*) in call to
sk_pop_free(stack_st*, extern &quot;C&quot; void(*)(void*)) is being passed
void(*)(void*).
3 Error(s) and 3 Warning(s) detected.
Makefile:767: recipe for target 'PortCfg.lo' failed
make[3]: *** [PortCfg.lo] Error 1
make[3]: Leaving directory '/patch/squid-3.4.10/src/anyp'
Makefile:7091: recipe for target 'all-recursive' failed
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory '/patch/squid-3.4.10/src'
Makefile:6036: recipe for target 'all' failed
make[1]: *** [all] Error 2
make[1]: Leaving directory '/patch/squid-3.4.10/src'
Makefile:562: recipe for target 'all-recursive' failed
make: *** [all-recursive] Error 1

It is treated, doctor? :)

I remember, this problem was on Squid 2, 8-10 years ago. And was solved.

And this annoying warning:

CC: Warning: -xarch=generic64 is deprecated, use -m64 to create 64-bit
programs

in that configuration specified -m64 explicity:

./configure '--prefix=/usr/local/squid' '--enable-translation'
'--enable-external-acl-helpers=none' '--enable-icap-client'
'--enable-ipf-transparent' '--enable-storeio=diskd'
'--enable-removal-policies=lru,heap' '--enable-devpoll' '--disable-wccp'
'--enable-wccpv2' '--enable-http-violations'
'--enable-follow-x-forwarded-for' '--enable-arp-acl' '--enable-htcp'
'--enable-cache-digests' '--with-dl' '--enable-auth-negotiate=none'
'--disable-auth-digest' '--disable-auth-ntlm' '--enable-auth-basic=none'
'--disable-url-rewrite-helpers' '--enable-storeid-rewrite-helpers=file'
'--enable-log-daemon-helpers=file' '--enable-ssl' '--enable-ssl-crtd'
'--with-openssl=/opt/csw' '--enable-zph-qos'
'--with-filedescriptors=131072' '--disable-snmp'
'--disable-strict-error-checking'
'--with-build-environment=POSIX_V6_LP64_OFF64' 'CFLAGS=-xO4
-xtarget=native -m64' 'CXXFLAGS=-xO4 -xtarget=native -m64'
--enable-build-info=&quot;Intercept/WCCPv2/SSL/CRTD/DISKD/64/CC Production&quot;

WBR, Yuri
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2
 
iQEcBAEBAgAGBQJUq8acAAoJENNXIZxhPexG2uMH/36KiXwo4IUkdERkLKNJNmN0
JILUdEo/orJu0eq3TPDJ46VMlC9pb7wuHWMSLkA7bT5zDcZ6vLIl2wUjD15Xq13l
bv7VXWrw8w6A7jp0FiEiY+lK0DVG06Bfe8mGHVDLAo9MuWMLiG5S7O/iRnwZh+SI
9cnkftWFExStLFZSQWmTjoMiFBBXMN8ZWC2jnW6lZjRO4Fux3ZCYV1L6C5WCRzuD
W2SoAVyYrIlJqDBY20IIk45zM92jw0YOJ/hKEnnufdEFjGC8Qmw6wSkY4SZ/yi5h
nJm930EOIwW3RpWTxWZBBIWvZMmWU42ntsshm90WeuFZHq7JH0feeYpzp5M0p1U=
=WmJF
-----END PGP SIGNATURE-----



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001489.html">[squid-users] Squid 3.4.10 sometimes catch assertion without core
</A></li>
	<LI>Next message (by thread): <A HREF="001349.html">[squid-users] Growing cache.log
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1347">[ date ]</a>
              <a href="thread.html#1347">[ thread ]</a>
              <a href="subject.html#1347">[ subject ]</a>
              <a href="author.html#1347">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
