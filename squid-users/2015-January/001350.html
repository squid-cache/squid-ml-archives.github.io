<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Debugging slow access
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Debugging%20slow%20access&In-Reply-To=%3C54ABD807.7070501%40opendium.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001344.html">
   <LINK REL="Next"  HREF="001348.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Debugging slow access</H1>
    <B>Steve Hill</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Debugging%20slow%20access&In-Reply-To=%3C54ABD807.7070501%40opendium.com%3E"
       TITLE="[squid-users] Debugging slow access">steve at opendium.com
       </A><BR>
    <I>Tue Jan  6 12:41:43 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001344.html">[squid-users] Debugging slow access
</A></li>
        <LI>Next message (by thread): <A HREF="001348.html">[squid-users] Debugging slow access
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1350">[ date ]</a>
              <a href="thread.html#1350">[ thread ]</a>
              <a href="subject.html#1350">[ subject ]</a>
              <a href="author.html#1350">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 05.01.15 20:11, Eliezer Croitoru wrote:

&gt;<i> Did you had the chance to take look at bug 3997:
</I>&gt;<i> <A HREF="http://bugs.squid-cache.org/show_bug.cgi?id=3997">http://bugs.squid-cache.org/show_bug.cgi?id=3997</A>
</I>
This could quite likely be the same issue.  See my other post this 
morning for details, but I've pretty much tracked this down to the 
Negotiate tokens being appended to user cache records in an unbounded 
way.  Eventually you end up with so many tokens (several thousand) that 
the majority of the CPU time is spent traversing the tokens.  A quick 
look at the NTLM code suggests that this would behave in the same way.

The question now is what the &quot;correct&quot; way is to fix it - we could 
specifically avoid appending &quot;token&quot; notes in the Negotiate/NTLM code, 
or we could do something more generic in the absorb() method.  (My 
preference is the latter unless anyone can think why it would be a bad 
idea).

-- 
  - Steve Hill
    Technical Director
    Opendium Limited     <A HREF="http://www.opendium.com">http://www.opendium.com</A>

Direct contacts:
    Instant messager: xmpp:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">steve at opendium.com</A>
    Email:            <A HREF="https://lists.squid-cache.org/listinfo/squid-users">steve at opendium.com</A>
    Phone:            sip:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">steve at opendium.com</A>

Sales / enquiries contacts:
    Email:            <A HREF="https://lists.squid-cache.org/listinfo/squid-users">sales at opendium.com</A>
    Phone:            +44-1792-824568 / sip:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">sales at opendium.com</A>

Support contacts:
    Email:            <A HREF="https://lists.squid-cache.org/listinfo/squid-users">support at opendium.com</A>
    Phone:            +44-1792-825748 / sip:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">support at opendium.com</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001344.html">[squid-users] Debugging slow access
</A></li>
	<LI>Next message (by thread): <A HREF="001348.html">[squid-users] Debugging slow access
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1350">[ date ]</a>
              <a href="thread.html#1350">[ thread ]</a>
              <a href="subject.html#1350">[ subject ]</a>
              <a href="author.html#1350">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
