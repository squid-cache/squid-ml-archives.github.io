<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Debugging slow access
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Debugging%20slow%20access&In-Reply-To=%3C54AC1756.8080002%40opendium.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001348.html">
   <LINK REL="Next"  HREF="001353.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Debugging slow access</H1>
    <B>Steve Hill</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Debugging%20slow%20access&In-Reply-To=%3C54AC1756.8080002%40opendium.com%3E"
       TITLE="[squid-users] Debugging slow access">steve at opendium.com
       </A><BR>
    <I>Tue Jan  6 17:11:50 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001348.html">[squid-users] Debugging slow access
</A></li>
        <LI>Next message (by thread): <A HREF="001353.html">[squid-users] Debugging slow access
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1351">[ date ]</a>
              <a href="thread.html#1351">[ thread ]</a>
              <a href="subject.html#1351">[ subject ]</a>
              <a href="author.html#1351">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 06.01.15 12:15, Steve Hill wrote:

&gt;<i> Alternatively, A-&gt;absorb(B) could be altered to remove any notes from A
</I>&gt;<i> that have the same keys as B's notes, before using appendNewOnly() to
</I>&gt;<i> merge them?
</I>
I've implemented this for now in the attached patch and am currently 
testing it.  Initial results suggest it resolves the problem.

It introduces a new method, NotePairs::appendAndReplace(), which 
iterates through the source NotePairs and removes any NotePairs in the 
destination that have the same key, then calls append().

This is not the most efficient way of erasing the notes, because Squid's 
Vector template doesn't appear to have an erase() method.

-- 
  - Steve Hill
    Technical Director
    Opendium Limited     <A HREF="http://www.opendium.com">http://www.opendium.com</A>

Direct contacts:
    Instant messager: xmpp:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">steve at opendium.com</A>
    Email:            <A HREF="https://lists.squid-cache.org/listinfo/squid-users">steve at opendium.com</A>
    Phone:            sip:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">steve at opendium.com</A>

Sales / enquiries contacts:
    Email:            <A HREF="https://lists.squid-cache.org/listinfo/squid-users">sales at opendium.com</A>
    Phone:            +44-1792-824568 / sip:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">sales at opendium.com</A>

Support contacts:
    Email:            <A HREF="https://lists.squid-cache.org/listinfo/squid-users">support at opendium.com</A>
    Phone:            +44-1792-825748 / sip:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">support at opendium.com</A>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: squid-notes.patch
Type: text/x-patch
Size: 1984 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150106/19c2e058/attachment.bin">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150106/19c2e058/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001348.html">[squid-users] Debugging slow access
</A></li>
	<LI>Next message (by thread): <A HREF="001353.html">[squid-users] Debugging slow access
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1351">[ date ]</a>
              <a href="thread.html#1351">[ thread ]</a>
              <a href="subject.html#1351">[ subject ]</a>
              <a href="author.html#1351">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
