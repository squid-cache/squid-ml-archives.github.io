<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Is it possible to configure a transparent caching proxy without iptables?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Is%20it%20possible%20to%20configure%20a%20transparent%20caching%0A%20proxy%20without%20iptables%3F&In-Reply-To=%3C4ttzti1jd6u8.ma9n39-474mo1gy5k3k5m%40api.elasticemail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001365.html">
   <LINK REL="Next"  HREF="001356.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Is it possible to configure a transparent caching proxy without iptables?</H1>
    <B>Karl-Philipp Richter</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Is%20it%20possible%20to%20configure%20a%20transparent%20caching%0A%20proxy%20without%20iptables%3F&In-Reply-To=%3C4ttzti1jd6u8.ma9n39-474mo1gy5k3k5m%40api.elasticemail.com%3E"
       TITLE="[squid-users] Is it possible to configure a transparent caching proxy without iptables?">richter at richtercloud.de
       </A><BR>
    <I>Tue Jan  6 19:39:15 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001365.html">[squid-users] Growing cache.log
</A></li>
        <LI>Next message (by thread): <A HREF="001356.html">[squid-users] how to obtain info about actual active downloads?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1352">[ date ]</a>
              <a href="thread.html#1352">[ thread ]</a>
              <a href="subject.html#1352">[ subject ]</a>
              <a href="author.html#1352">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi together,
I'm having trouble figuring a way to configure a `squid` 3.4.10 instance
running in a Debian 7 chroot as a transparent caching proxy because I
only find configuration examples involving `iptables` which on the one
hand is very useful because it allows setups which work independently of
environment variables and program settings on the other hand requires
access to kernel module loading and unloading. It might be the case that
the latter is considered an acceptable tradeoff for the advantages of
the former.

That leads me to the question whether it is at all possible to configure
a `squid` instance to store data of requests from within a local network
to the outside (of the local network) in order to avoid to fetch them
again and again from the outside (a caching proxy AFAIK, but I'm
clearifying in order to avoid confusion). Of course this would require
the setup of an environment variable, like `http_proxy` on Linux, or
even individual program settings with all the disadvantages of extended
maintenance necessity.

What would be the case it I had access to `iptables` on the client and
not on the machine where `squid` is running. After setting `http_port
3128 transparent` in `squid.conf` I'm getting access denial errors due
to forwarding loops

    2015/01/06 20:35:34 kid1| WARNING: Forwarding loop detected for:
    GET / HTTP/1.1
    Accept-Encoding: identity
    Host: google.com
    User-Agent: Python-urllib/3.4
    Via: 1.1 diskstation (squid/3.4.10)
    X-Forwarded-For: 192.168.178.22
    Cache-Control: max-age=259200
    Connection: keep-alive

but that's just an example to avoid questions like &quot;What have you tried
so far&quot;. I'm more looking for an abstract, general answer.

Best regards,
Kalle

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001365.html">[squid-users] Growing cache.log
</A></li>
	<LI>Next message (by thread): <A HREF="001356.html">[squid-users] how to obtain info about actual active downloads?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1352">[ date ]</a>
              <a href="thread.html#1352">[ thread ]</a>
              <a href="subject.html#1352">[ subject ]</a>
              <a href="author.html#1352">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
