<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Issues with SSL from specific sites,
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Issues%20with%20SSL%20from%20specific%20sites%2C&In-Reply-To=%3C54AED370.5070709%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001372.html">
   <LINK REL="Next"  HREF="001375.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Issues with SSL from specific sites,</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Issues%20with%20SSL%20from%20specific%20sites%2C&In-Reply-To=%3C54AED370.5070709%40treenet.co.nz%3E"
       TITLE="[squid-users] Issues with SSL from specific sites,">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Jan  8 18:58:56 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001372.html">[squid-users] Issues with SSL from specific sites,
</A></li>
        <LI>Next message (by thread): <A HREF="001375.html">[squid-users] Memory Leak Squid 3.4.9 on FreeBSD 10.0 x64
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1374">[ date ]</a>
              <a href="thread.html#1374">[ thread ]</a>
              <a href="subject.html#1374">[ subject ]</a>
              <a href="author.html#1374">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 9/01/2015 2:19 a.m., Mr J Potter wrote:
&gt;<i> Hi all,
</I>&gt;<i> 
</I>&gt;<i> I have a weird problem connecting to one specific domain:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.0.5/es5-shim.min.js">https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.0.5/es5-shim.min.js</A>
</I>&gt;<i>
</I>&gt;<i>  this site works fine if I connect directly, but if I go via my
</I>&gt;<i> squid instance, it fails (see below).
</I>&gt;<i> 
</I>&gt;<i> I have squid 3.3.11 with optional SSL-bump set up and working fine
</I>&gt;<i> for the most part, but it will not allow me onto this one domain.
</I>&gt;<i> Its not in any filtered list (I've connected out SSLBump and all
</I>&gt;<i> filtering/redirecting on my test server).
</I>&gt;<i> 
</I>&gt;<i> It says unavailable to establish SSL connection... one point is
</I>&gt;<i> when I connect to this site via chrome it tells me the encryption
</I>&gt;<i> method is outdated - is squid refusing to connect due to this?
</I>
More likely Chrome is complaining about Squid bumping in its way. The
bumped certs created by 3.3 use an older easily bumped format.

Our standing recommendation for bumping is to always use the latest
Squid release if you encounter problems. SSL-bump is effectively going
through an arms race with HTTPS - each Squid series has different
capabilities to get around HTTPS protections that &quot;suddenly&quot; become
popular as the previous series SSL-bump feature began to be used.


&gt;<i> 
</I>&gt;<i> thanks in advance for any help.
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">root at dirvish</A>:~# wget 
</I>&gt;<i> <A HREF="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.0.5/es5-shim.min.js">https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.0.5/es5-shim.min.js</A>
</I>&gt;<i> -dv
</I>

Squidclient gives me this:

Resolving cdnjs.cloudflare.com ...
Connecting... cdnjs.cloudflare.com (198.41.215.184:443)
Connected to: cdnjs.cloudflare.com (198.41.215.184:443)
X.509 TLS handshake ...
VERIFY DATUM: The certificate is NOT trusted. The certificate issuer
is unknown.
WARNING: Insecure Connection
TLS Session info:
(TLS1.2)-(ECDHE-RSA-SECP256R1)-(AES-128-GCM)


The certificate issues being unknown is a problem. The modern browsers
all go into a major panic over that kind of thing.

Amos
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.22 (MingW32)

iQEcBAEBAgAGBQJUrtNvAAoJELJo5wb/XPRjUi8H/1qSmezU5kWr0qV4N38I7DMA
aPlZphIi/vwE91b23nqNok+YC3e31owrNh/C/L8q7OkIynhQ0UtVuJOMrXl8wVSF
tfMtbIXDBPOmoLDlYrZwXDRgtooENawHce70hnD0MjvsWUtfpudBhaXx8zumbf1w
EYxUc80pTiqc2qO1DShiaQmRFrW/7SEwxNixaCY1hUHyMFFeK4KUd4bbBNC8f0Wu
djmeEqcd3HbMJyIlgm6EA0o1LGlMqPytcxI4ZN2aiiXYlEslew2kAW4euVhG4zAK
CZGzhkA4kBtsqvgE2Tx5vJPLXrk+peALJa479Coq6fSUuxsZPjtzdkygazLSXQU=
=jiwY
-----END PGP SIGNATURE-----

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001372.html">[squid-users] Issues with SSL from specific sites,
</A></li>
	<LI>Next message (by thread): <A HREF="001375.html">[squid-users] Memory Leak Squid 3.4.9 on FreeBSD 10.0 x64
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1374">[ date ]</a>
              <a href="thread.html#1374">[ thread ]</a>
              <a href="subject.html#1374">[ subject ]</a>
              <a href="author.html#1374">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
