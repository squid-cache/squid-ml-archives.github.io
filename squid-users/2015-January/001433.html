<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Memory Leak Squid 3.4.9 on FreeBSD 10.0 x64
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Memory%20Leak%20Squid%203.4.9%20on%20FreeBSD%2010.0%20x64&In-Reply-To=%3C54B3B8D4.20702%40zhegan.in%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001430.html">
   <LINK REL="Next"  HREF="001435.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Memory Leak Squid 3.4.9 on FreeBSD 10.0 x64</H1>
    <B>Eugene M. Zheganin</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Memory%20Leak%20Squid%203.4.9%20on%20FreeBSD%2010.0%20x64&In-Reply-To=%3C54B3B8D4.20702%40zhegan.in%3E"
       TITLE="[squid-users] Memory Leak Squid 3.4.9 on FreeBSD 10.0 x64">eugene at zhegan.in
       </A><BR>
    <I>Mon Jan 12 12:06:44 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001430.html">[squid-users] Memory Leak Squid 3.4.9 on FreeBSD 10.0 x64
</A></li>
        <LI>Next message (by thread): <A HREF="001435.html">[squid-users] Memory Leak Squid 3.4.9 on FreeBSD 10.0 x64
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1433">[ date ]</a>
              <a href="thread.html#1433">[ thread ]</a>
              <a href="subject.html#1433">[ subject ]</a>
              <a href="author.html#1433">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi.

On 12.01.2015 16:41, Eugene M. Zheganin wrote:
&gt;<i> I'm now also having a strong impression that squid is leaking memory.
</I>&gt;<i> Now, when 3.4.x is able to handle hundreds of users during several
</I>&gt;<i> hours I notice that it's memory usage is constantly increasing. My
</I>&gt;<i> patience always ends at the point of 1.5 Gigs memory usage, where
</I>&gt;<i> server memory starts to be exhausted (squid is running with lots of
</I>&gt;<i> other stuff) and I restart it. This is happening on exactly the same
</I>&gt;<i> config the 3.3.13 was running, so ... I have cache_mem set to 512
</I>&gt;<i> megs, diskd, medium sized cache_dir and lots of users. Is something
</I>&gt;<i> changed drastically in 3.4.x comparing to the 3.3.13, or is it, as it
</I>&gt;<i> seems, a memory leak ?
</I>Squid 3.4 on FreeBSD is by default compiling with the
--enable-debug-cbdata option and when 45th log selector is at it's
default 1, cache.log is filling with CBData memory leaking alarms. Here
is the list for the last 40 minutes, sorted with the occurrence count:

104136 Checklist.cc:160
81438 Checklist.cc:187
177226 Checklist.cc:320
84861 Checklist.cc:45
89151 CommCalls.cc:21
22069 DiskIO/DiskDaemon/DiskdIOStrategy.cc:353
 120 UserRequest.cc:166
  29 UserRequest.cc:172
55814 clientStream.cc:235
5966 client_side_reply.cc:93
4516 client_side_request.cc:134
5568 dns_internal.cc:1131
4859 dns_internal.cc:1140
  86 event.cc:90
7770 external_acl.cc:1426
1548 fqdncache.cc:340
7467 helper.cc:856
39905 ipcache.cc:353
11880 store.cc:1611
181959 store_client.cc:154
256951 store_client.cc:337
6835 ufs/UFSStoreState.cc:333

are those all false alarms ?

Thanks.
Eugene.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001430.html">[squid-users] Memory Leak Squid 3.4.9 on FreeBSD 10.0 x64
</A></li>
	<LI>Next message (by thread): <A HREF="001435.html">[squid-users] Memory Leak Squid 3.4.9 on FreeBSD 10.0 x64
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1433">[ date ]</a>
              <a href="thread.html#1433">[ thread ]</a>
              <a href="subject.html#1433">[ subject ]</a>
              <a href="author.html#1433">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
