<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Too much assertion failed: comm.cc:178: &quot;fd_table[conn-&gt;fd].halfClosedReader != NULL&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Too%20much%20assertion%20failed%3A%20comm.cc%3A178%3A%0A%20%22fd_table%5Bconn-%3Efd%5D.halfClosedReader%20%21%3D%20NULL%22&In-Reply-To=%3C54B7B798.1050908%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001506.html">
   <LINK REL="Next"  HREF="001474.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Too much assertion failed: comm.cc:178: &quot;fd_table[conn-&gt;fd].halfClosedReader != NULL&quot;</H1>
    <B>Yuri Voinov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Too%20much%20assertion%20failed%3A%20comm.cc%3A178%3A%0A%20%22fd_table%5Bconn-%3Efd%5D.halfClosedReader%20%21%3D%20NULL%22&In-Reply-To=%3C54B7B798.1050908%40gmail.com%3E"
       TITLE="[squid-users] Too much assertion failed: comm.cc:178: &quot;fd_table[conn-&gt;fd].halfClosedReader != NULL&quot;">yvoinov at gmail.com
       </A><BR>
    <I>Thu Jan 15 12:50:32 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001506.html">[squid-users] ntlm: No such file or directory
</A></li>
        <LI>Next message (by thread): <A HREF="001474.html">[squid-users] Too much assertion failed: comm.cc:178: &quot;fd_table[conn-&gt;fd].halfClosedReader != NULL&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1472">[ date ]</a>
              <a href="thread.html#1472">[ thread ]</a>
              <a href="subject.html#1472">[ subject ]</a>
              <a href="author.html#1472">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1
 
Hi gents,

Sometimes I have too much assertions:

2015/01/08 09:40:39 kid1| assertion failed: comm.cc:178:
&quot;fd_table[conn-&gt;fd].halfClosedReader != NULL&quot;

Core dump not produced but Squid restarts. So, I can't get stack trace.

When I set hals_closed_clients to on, I've got much more assertions:

2015/01/15 18:41:31 kid1| assertion failed: comm.cc:1823: &quot;isOpen(fd) &amp;&amp;
!commHasHalfClosedMonitor(fd)&quot;

What can be wrong? This is very annoying behaviour. Also memory cache is
often cold after restarts and hit ratio is degrades.

This looks similar adaptation bug 4057, but it is closed in 3.4.11. This
behaviour depends half-closed connections, but how?

And how to troubleshoot?

WBR, Yuri


-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2
 
iQEcBAEBAgAGBQJUt7eXAAoJENNXIZxhPexGGTsH/0QbaUVC+HY9+Czd1EkGKkBE
2iZSk6pmRZkV+1NlRJeaVKCAuBrRADEqKoCEYFqJD9IAFcXYa9fNDfYP5jeOrbb9
fKZ3cGqWjDuWx4jm0Y/gu/knamHtSSD3ZFIEOpUUCzEMcRVnQNjQ2K+5zgFr/aIA
QX6huBLl5MZR+TE7k1gLrAFw8Y0EZG1UGsolo4hX/h3tpqDQGazIr+5M6xmIotXT
k1jJmaa06cfMR6nYwjPNPjWo+CvLLjpsGcgRyJ9qs2FCODpEyR09QXs7a64sD7fI
KTtge3BSz5+Wbz4vePO/o4IoP3nJk1GBSzRfiJLNXef5VWAXFr89ykjErVPFb2w=
=HuN3
-----END PGP SIGNATURE-----



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001506.html">[squid-users] ntlm: No such file or directory
</A></li>
	<LI>Next message (by thread): <A HREF="001474.html">[squid-users] Too much assertion failed: comm.cc:178: &quot;fd_table[conn-&gt;fd].halfClosedReader != NULL&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1472">[ date ]</a>
              <a href="thread.html#1472">[ thread ]</a>
              <a href="subject.html#1472">[ subject ]</a>
              <a href="author.html#1472">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
