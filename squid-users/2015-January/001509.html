<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] whitelists and active directory help
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20whitelists%20and%20active%20directory%20help&In-Reply-To=%3C962DDC515AB6094490E32929BEF385B207AFD7%40GGM-S8EX01.ggm.corp%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001508.html">
   <LINK REL="Next"  HREF="001511.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] whitelists and active directory help</H1>
    <B>Horacio Diaz Requejo</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20whitelists%20and%20active%20directory%20help&In-Reply-To=%3C962DDC515AB6094490E32929BEF385B207AFD7%40GGM-S8EX01.ggm.corp%3E"
       TITLE="[squid-users] whitelists and active directory help">hdiaz at ggm.mx
       </A><BR>
    <I>Fri Jan 16 20:36:41 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001508.html">[squid-users] whitelists and active directory help
</A></li>
        <LI>Next message (by thread): <A HREF="001511.html">[squid-users] whitelists and active directory help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1509">[ date ]</a>
              <a href="thread.html#1509">[ thread ]</a>
              <a href="subject.html#1509">[ subject ]</a>
              <a href="author.html#1509">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Samuel &#161;!!

  The way i&#180;m doing this is creating two text files for each group. One with the authorized usernames to use this group, and another with the authorized domains.

acl pag-gm-ventas dstdomain &quot;/etc/squid/acl/pag-gm-ventas&quot;
acl usu-gm-ventas proxy_auth &quot;/etc/squid/acl/usu-gm-ventas&quot;
acl pag-gm-servicio dstdomain &quot;/etc/squid/acl/pag-gm-servicio&quot;
acl usu-gm-servicio proxy_auth &quot;/etc/squid/acl/usu-gm-servicio&quot;

http_access allow usu-gm-ventas pag-gm-ventas
http_access allow usu-gm-servicio pag-gm-servicio

http_access deny all

  Everything else is denied.

Regards

Horacio D&#237;az-Requejo

De: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] En nombre de Samuel Anderson
Enviado el: viernes, 16 de enero de 2015 12:15 p.m.
Para: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at squid-cache.org</A>
Asunto: [squid-users] whitelists and active directory help

Hello All,

I'm attempting to create way to grant users access to different categories using active directory. Currently what I have works but if a website is not listed in any of the whitelists it will allow traffic to that website. If I add a (http_access deny all) at the end, then nothing works. What I would like is for a user to only have access to whitlists that they are a member of. I'll have around 50 categories in the end. This is just a small sample.

Thanks,


acl NEWS external ldap_group NEWS
acl SHOPPING external ldap_group SHOPPING
acl SOCIALNETWORKING external ldap_group SOCIALNETWORKING
acl RELIGION external ldap_group RELIGION
acl SPORTNEWS external ldap_group SPORTNEWS

acl rule1 url_regex -i &quot;/etc/squid3/whitelists/news/domains&quot;
acl rule2 url_regex -i &quot;/etc/squid3/whitelists/shopping/domains&quot;
acl rule3 url_regex -i &quot;/etc/squid3/whitelists/socialnetworking/domains&quot;
acl rule4 url_regex -i &quot;/etc/squid3/whitelists/religion/domains&quot;
acl rule5 url_regex -i &quot;/etc/squid3/whitelists/sportnews/domains&quot;


http_access deny rule1 !NEWS all
http_access deny rule2 !SHOPPING all
http_access deny rule3 !SOCIALNETWORKING all
http_access deny rule4 !RELIGION all
http_access deny rule5 !SPORTNEWS all
http_access allow all






CONFIDENTIALITY NOTICE:
This e-mail and any attachments are confidential. If you are not an intended recipient, please contact the sender to report the error and delete all copies of this message from your system.  Any unauthorized review, use, disclosure or distribution is prohibited.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150116/44702046/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150116/44702046/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001508.html">[squid-users] whitelists and active directory help
</A></li>
	<LI>Next message (by thread): <A HREF="001511.html">[squid-users] whitelists and active directory help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1509">[ date ]</a>
              <a href="thread.html#1509">[ thread ]</a>
              <a href="subject.html#1509">[ subject ]</a>
              <a href="author.html#1509">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
