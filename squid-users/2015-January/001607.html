<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 3.4.11 crashing on FreeBSD 10 (64-bit)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203.4.11%20crashing%20on%20FreeBSD%2010%20%2864-bit%29&In-Reply-To=%3C54BEA373.6050403%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001608.html">
   <LINK REL="Next"  HREF="001609.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 3.4.11 crashing on FreeBSD 10 (64-bit)</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203.4.11%20crashing%20on%20FreeBSD%2010%20%2864-bit%29&In-Reply-To=%3C54BEA373.6050403%40treenet.co.nz%3E"
       TITLE="[squid-users] Squid 3.4.11 crashing on FreeBSD 10 (64-bit)">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Jan 20 18:50:27 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001608.html">[squid-users] Squid 3.4.11 crashing on FreeBSD 10 (64-bit)
</A></li>
        <LI>Next message (by thread): <A HREF="001609.html">[squid-users] Squid 3.4.11 crashing on FreeBSD 10 (64-bit)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1607">[ date ]</a>
              <a href="thread.html#1607">[ thread ]</a>
              <a href="subject.html#1607">[ subject ]</a>
              <a href="author.html#1607">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 21/01/2015 6:11 a.m., Odhiambo Washington wrote:
&gt;<i> On 20 January 2015 at 16:16, Odhiambo Washington wrote:
</I>&gt;<i> 
</I>&gt;<i> 1. I see these in cache.log
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 2015/01/20 20:00:18| WARNING: no_suid: setuid(0): (1) Operation
</I>&gt;<i> not permitted 2015/01/20 20:00:18| WARNING: no_suid: setuid(0): (1)
</I>&gt;<i> Operation not permitted 2015/01/20 20:00:18| WARNING: no_suid:
</I>&gt;<i> setuid(0): (1) Operation not permitted 2015/01/20 20:00:18|
</I>&gt;<i> WARNING: no_suid: setuid(0): (1) Operation not permitted 2015/01/20
</I>&gt;<i> 20:00:18| WARNING: no_suid: setuid(0): (1) Operation not permitted 
</I>&gt;<i> 2015/01/20 20:00:18| WARNING: no_suid: setuid(0): (1) Operation
</I>&gt;<i> not permitted 2015/01/20 20:00:18| WARNING: no_suid: setuid(0): (1)
</I>&gt;<i> Operation not permitted 2015/01/20 20:00:18| WARNING: no_suid:
</I>&gt;<i> setuid(0): (1) Operation not permitted 2015/01/20 20:00:18|
</I>&gt;<i> WARNING: no_suid: setuid(0): (1) Operation not permitted 2015/01/20
</I>&gt;<i> 20:00:18| WARNING: no_suid: setuid(0): (1) Operation not permitted 
</I>&gt;<i> 2015/01/20 20:00:18| WARNING: no_suid: setuid(0): (1) Operation
</I>&gt;<i> not permitted 2015/01/20 20:00:18| WARNING: no_suid: setuid(0): (1)
</I>&gt;<i> Operation not permitted 2015/01/20 20:00:18| WARNING: no_suid:
</I>&gt;<i> setuid(0): (1) Operation not permitted 2015/01/20 20:00:18|
</I>&gt;<i> WARNING: no_suid: setuid(0): (1) Operation not permitted 2015/01/20
</I>&gt;<i> 20:00:18| WARNING: no_suid: setuid(0): (1) Operation not permitted
</I>
Not to worry about. An artifact of how Squid runs helpers vs BSD
default permissions for fork()ed processes. Squid is just unable to
drop root permissions silently (for now) because the OS already did it.

&gt;<i> 2015/01/20 20:00:18| Logfile: opening log 
</I>&gt;<i> stdio:/usr/local/squid/logs/access.log
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> But then I have no joy because of &quot;2015/01/20 20:03:55| WARNING:
</I>&gt;<i> Forwarding loop detected for:..&quot;
</I>&gt;<i> 
</I>&gt;<i> I am almost thinking FreeBSD 9.3 would be better... I haven't seen
</I>&gt;<i> so much grief.
</I>
I am beginning to wonder if the PF version may has changed in FreeBSD.

In OpenBSD (4.6 IIRC) PF went from a version where rdr-to rules worked
to one where only divert-to would work reliably and rdr-to only
sometimes. It may be that the changover has finally hit FreeBSD.

&gt;<i> ADDENDUM: When compiled with --enable-ipf-transparent, it fails to
</I>&gt;<i> compile as follows:
</I>&gt;<i> 
</I>
As Yuri said, PF --enable-pf-transparent (no 'I') or IPFW
- --enable-ipfw-transparent (note the 'W') for FreeBSD.

Amos
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.22 (MingW32)

iQEcBAEBAgAGBQJUvqNzAAoJELJo5wb/XPRjywsH/RY9myLQSx/FaQf6gmWykbd7
/bNXzg0JxoiUar56gYseUk6yEp9YhtSpAFEFnVaen7ee/4xNW7o8Tv7R0gTrcqWy
lTUFtuPRyP3EQ7tsYNjLgF2dYYX4Eb1E1zDVCmdUHtvG/d7YTnC9LgLYrNqgF9v6
Bgck0S2aC2Q4vdsn34LsjbgKmtnpqr+47I4Eco5TfyHZvsCHp2EUb0RwgA/hus8E
Q0x6Jnmv1idIywsuLXhCbPtsriWXJf38cDtOs6UNFmAo0fr762oBH94i2xXIDb1Y
8qZzOGS09G93qWn027UZmqWHlcH8p3c0fo17LqXekcrBGW2gxd82+ABvbH6JZBk=
=tAVB
-----END PGP SIGNATURE-----

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001608.html">[squid-users] Squid 3.4.11 crashing on FreeBSD 10 (64-bit)
</A></li>
	<LI>Next message (by thread): <A HREF="001609.html">[squid-users] Squid 3.4.11 crashing on FreeBSD 10 (64-bit)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1607">[ date ]</a>
              <a href="thread.html#1607">[ thread ]</a>
              <a href="subject.html#1607">[ subject ]</a>
              <a href="author.html#1607">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
