<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid as reverse proxy and image theft protection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20as%20reverse%20proxy%20and%20image%20theft%20protection&In-Reply-To=%3C40a2d01dac7c40dd5fc254d5ba228056.squirrel%40wm.sdf.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001631.html">
   <LINK REL="Next"  HREF="001637.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid as reverse proxy and image theft protection</H1>
    <B>thane at SDF.ORG</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20as%20reverse%20proxy%20and%20image%20theft%20protection&In-Reply-To=%3C40a2d01dac7c40dd5fc254d5ba228056.squirrel%40wm.sdf.org%3E"
       TITLE="[squid-users] Squid as reverse proxy and image theft protection">thane at SDF.ORG
       </A><BR>
    <I>Thu Jan 22 09:25:53 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001631.html">[squid-users] Squid as reverse proxy and image theft protection
</A></li>
        <LI>Next message (by thread): <A HREF="001637.html">[squid-users] Squid as reverse proxy and image theft protection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1636">[ date ]</a>
              <a href="thread.html#1636">[ thread ]</a>
              <a href="subject.html#1636">[ subject ]</a>
              <a href="author.html#1636">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear Jeffries,

I thank you for your answer. Is possible in your opinion manage also
Cookie with an expiration time? Because if I understood correctly your
suggestion works great until the users share with some attacker the
cookie. The attacker could reuse this cookie to download freely the images
from the site. Right?

Thanks and best regards,
Guido.

&gt;<i> -----BEGIN PGP SIGNED MESSAGE-----
</I>&gt;<i> Hash: SHA1
</I>&gt;<i>
</I>&gt;<i> On 22/01/2015 6:11 a.m., <A HREF="https://lists.squid-cache.org/listinfo/squid-users">thane at SDF.ORG</A> wrote:
</I>&gt;&gt;<i> Dear all,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> we configured Squid 3.4.9 as Reverse Proxy/Accellerator versus
</I>&gt;&gt;<i> some virtual machines located geographically in different country
</I>&gt;&gt;<i> integrating it with a Geo DNS solution to routing the various user
</I>&gt;&gt;<i> requests to the Squid Reverse Proxy nearest to them. These virtual
</I>&gt;&gt;<i> machines hosts a J2EE Web Portal.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This Reverse Proxy provides to the users a huge amount of images
</I>&gt;&gt;<i> and reduce a lot the download time for that countries away from the
</I>&gt;&gt;<i> primary data center (see China, India, etc.). These images are at
</I>&gt;&gt;<i> the moment freely accessible without authentication.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The portal behind squid uses a custom authentication form where the
</I>&gt;&gt;<i> user insert his &quot;Username&quot; and &quot;Password&quot; in an HTTP Form and these
</I>&gt;&gt;<i> credentials are routed to a J2EE Servlet (through an HTTP Post)
</I>&gt;&gt;<i> that perform various authentication checks and release a cookie to
</I>&gt;&gt;<i> grant the session to the other dynamic contents.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> We would like to understand if there are possible solutions to
</I>&gt;&gt;<i> protect the images on the Squid Reverse Proxy and makes them only
</I>&gt;&gt;<i> available after the user is authenticated.
</I>&gt;<i>
</I>&gt;<i> An external_acl_type helper that checks the Cookie header contents
</I>&gt;<i> against the backend auth system and informs Squid about OK/ERR will do
</I>&gt;<i> that for you.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Another possible workaround is perform some random scramble of the
</I>&gt;&gt;<i> image URL but continuing to permitting the caching of the sames.
</I>&gt;<i>
</I>&gt;<i> That is not possible while caching.
</I>&gt;<i>
</I>&gt;<i> Amos
</I>&gt;<i> -----BEGIN PGP SIGNATURE-----
</I>&gt;<i> Version: GnuPG v2.0.22 (MingW32)
</I>&gt;<i>
</I>&gt;<i> iQEcBAEBAgAGBQJUwHFHAAoJELJo5wb/XPRjV48IALCdLQ2Yb1tQabzLpyEi+rmE
</I>&gt;<i> WlBGqaKMsKGZBEtPhvys6yvS1Nr7Isc5qaF/g/KuJhWT5NKy5OOYAP3nvrLDu8NB
</I>&gt;<i> BT9YcRcHAHLRtfFoSAxYxlYYOwdY7TQsyx70XtQhcnqFtZqQWpLraTUXvpKdoVul
</I>&gt;<i> J0q0C+ZpqsurTlZTJG9s1sz/75bESTbpY5lmq0uqIA77FiMe9pwrUcYgdWx/9yMr
</I>&gt;<i> VdH6O+iO18PCPAPw9cVRrQHZNQ3i9fw/KfJ0Wj9CUOPu367Jd4JLdYEeKPYsGuHc
</I>&gt;<i> Syz/1PV9S+QPSiYkvpdHvMg00HzO7sWSRq0WBdJlBWTXw61vSgJMsvhOgnjJlp8=
</I>&gt;<i> =KQEL
</I>&gt;<i> -----END PGP SIGNATURE-----
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001631.html">[squid-users] Squid as reverse proxy and image theft protection
</A></li>
	<LI>Next message (by thread): <A HREF="001637.html">[squid-users] Squid as reverse proxy and image theft protection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1636">[ date ]</a>
              <a href="thread.html#1636">[ thread ]</a>
              <a href="subject.html#1636">[ subject ]</a>
              <a href="author.html#1636">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
