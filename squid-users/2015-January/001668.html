<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid versions and FreeBSD-10.1 headache
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20versions%20and%20FreeBSD-10.1%20headache&In-Reply-To=%3C54C26BFD.6070004%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001667.html">
   <LINK REL="Next"  HREF="001669.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid versions and FreeBSD-10.1 headache</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20versions%20and%20FreeBSD-10.1%20headache&In-Reply-To=%3C54C26BFD.6070004%40treenet.co.nz%3E"
       TITLE="[squid-users] Squid versions and FreeBSD-10.1 headache">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Jan 23 15:42:53 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001667.html">[squid-users] Squid versions and FreeBSD-10.1 headache
</A></li>
        <LI>Next message (by thread): <A HREF="001669.html">[squid-users] Squid versions and FreeBSD-10.1 headache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1668">[ date ]</a>
              <a href="thread.html#1668">[ thread ]</a>
              <a href="subject.html#1668">[ subject ]</a>
              <a href="author.html#1668">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 24/01/2015 4:29 a.m., Odhiambo Washington wrote:
&gt;<i> On 23 January 2015 at 17:33, Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;
</I>&gt;<i> wrote:
</I>
&lt;snip&gt;


&gt;<i> And the good news is that squid-3.5.1 is now allowing client PCs to
</I>&gt;<i> browse. Thank you for that.
</I>&gt;<i> 
</I>
Horray!

&gt;<i> I still have issues to raise (though my small brain is now so
</I>&gt;<i> saturated):
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Here is what I use:
</I>&gt;<i> 
</I>&gt;<i> ./configure --prefix=/opt/squid35 \ --enable-removal-policies=&quot;lru
</I>&gt;<i> heap&quot; \ --disable-epoll \ --enable-auth \ --enable-auth-basic=&quot;DB
</I>&gt;<i> NCSA PAM PAM POP3 SSPI&quot; \ --enable-external-acl-helpers=&quot;session
</I>&gt;<i> unix_group file_userip&quot; \ --enable-auth-negotiate=&quot;kerberos&quot; \ 
</I>&gt;<i> --with-pthreads \ --enable-storeio=&quot;ufs diskd rock aufs&quot; \ 
</I>&gt;<i> --enable-delay-pools \ --enable-snmp  \ --with-openssl=/usr \ 
</I>&gt;<i> --enable-forw-via-db \ --enable-cache-digests \ --enable-wccpv2 \ 
</I>&gt;<i> --enable-follow-x-forwarded-for \ --with-large-files \ 
</I>&gt;<i> --enable-large-cache-files \ --enable-esi \ --enable-kqueue \ 
</I>&gt;<i> --enable-icap-client \ --enable-kill-parent-hack \ --enable-ssl \ 
</I>&gt;<i> --enable-leakfinder \ --enable-ssl-crtd \ 
</I>&gt;<i> --enable-url-rewrite-helpers \ --enable-xmalloc-statistics \ 
</I>&gt;<i> --enable-stacktraces \ --enable-zph-qos \ --enable-eui \ 
</I>&gt;<i> --with-nat-devpf \ --enable-pf-transparent \ 
</I>&gt;<i> --enable-ipf-transparent
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> It seems I have to remove --enable-ipf-transparent otherwise the
</I>&gt;<i> build fails. I was thinking I could have both of
</I>&gt;<i> --enable-ipf-transparent and --enable-ipf-transparent so that I can
</I>&gt;<i> be able to use either PF or IPFilter - whichever I want.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Are those two mutually exclusive?
</I>
Thats a maybe. The original design was to enable that, but doing so
may repeat the issue you just resolved. From what I can tell those two
firewalls should be okay together on FreeBSD at this point.

&gt;<i> When I have the two, the build fails with:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">root at mail</A>:/usr/home/wash/squid-3.5.1-20150120-r13736 # gmake Making
</I>&gt;<i> all in compat gmake[1]: Entering directory 
</I>&gt;<i> '/usr/home/wash/squid-3.5.1-20150120-r13736/compat' depbase=`echo
</I>&gt;<i> assert.lo | sed 's|[^/]*$|.deps/&amp;|;s|\.lo$||'`;\ /bin/sh ../libtool
</I>&gt;<i> --tag=CXX   --mode=compile clang++ -DHAVE_CONFIG_H -I..
</I>&gt;<i> -I../include -I../lib -I../src -I../include  -I/usr/include 
</I>&gt;<i> -I/usr/include  -I../libltdl -I/usr/include
</I>&gt;<i> -I/usr/local/include/libxml2 -I/usr/local/include/libxml2  -Werror
</I>&gt;<i> -Qunused-arguments  -D_REENTRANT -g -O2  -march=native
</I>&gt;<i> -I/usr/local/include -MT assert.lo -MD -MP -MF $depbase.Tpo -c -o
</I>&gt;<i> assert.lo assert.cc &amp;&amp;\ mv -f $depbase.Tpo $depbase.Plo libtool:
</I>&gt;<i> compile:  clang++ -DHAVE_CONFIG_H -I.. -I../include -I../lib 
</I>&gt;<i> -I../src -I../include -I/usr/include -I/usr/include -I../libltdl 
</I>&gt;<i> -I/usr/include -I/usr/local/include/libxml2
</I>&gt;<i> -I/usr/local/include/libxml2 -Werror -Qunused-arguments
</I>&gt;<i> -D_REENTRANT -g -O2 -march=native -I/usr/local/include -MT
</I>&gt;<i> assert.lo -MD -MP -MF .deps/assert.Tpo -c assert.cc  -fPIC -DPIC -o
</I>&gt;<i> .libs/assert.o In file included from assert.cc:9: In file included
</I>&gt;<i> from ../include/squid.h:43: ../compat/compat.h:49:57: error:
</I>&gt;<i> expected value in expression #if IPF_TRANSPARENT &amp;&amp;
</I>&gt;<i> USE_SOLARIS_IPFILTER_MINOR_T_HACK ^
</I>
Seems to be a bug in the autoconf detections. You can workaround it
for now by adding this to your option list:

 CXXFLAGS=&quot;-DUSE_SOLARIS_IPFILTER_MINOR_T_HACK=0&quot;

(or if you unluckily hit build errors mentioning minor_t re-definition
try setting it to =1).

Amos
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.22 (MingW32)

iQEcBAEBAgAGBQJUwmv8AAoJELJo5wb/XPRjX3UH/1/8Mq1tFumUOpb7xXSKp6qA
LFcVZt0GX7rn2Z+fBuhVcsSkAHiqZZdn1+FRyuqYhYHeu5Y5tuc6urnLV0y9sSES
+onx2xgteNH9P/QV/JFYSIYJzp2rzAs+oPHlJJCHslNUG8nF3Dmp01Wiajc+ANOG
42PJc3FhnzJeCOQtr3wS8QPeLRjOCEXLzjd8rhl/e+MHqIi3ZrTHN8c+W0YUXMdH
bc6HtMHRsfOOj3s1Bu2v/VSCsU1TJJgLJK50GoPZFiaHQyCV8SjgF85AfjYFjnh/
4WxOYEX2R6FFONtbGHz81do4I1+JmXgHgTotIcha0fAWgpJxb506ERnUDC52iOY=
=1gna
-----END PGP SIGNATURE-----

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001667.html">[squid-users] Squid versions and FreeBSD-10.1 headache
</A></li>
	<LI>Next message (by thread): <A HREF="001669.html">[squid-users] Squid versions and FreeBSD-10.1 headache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1668">[ date ]</a>
              <a href="thread.html#1668">[ thread ]</a>
              <a href="subject.html#1668">[ subject ]</a>
              <a href="author.html#1668">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
