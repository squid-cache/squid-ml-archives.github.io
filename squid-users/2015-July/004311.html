<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] sslbump and caching of generated cert
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20sslbump%20and%20caching%20of%20generated%20cert&In-Reply-To=%3C559356EE.2060209%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004310.html">
   <LINK REL="Next"  HREF="004446.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] sslbump and caching of generated cert</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20sslbump%20and%20caching%20of%20generated%20cert&In-Reply-To=%3C559356EE.2060209%40treenet.co.nz%3E"
       TITLE="[squid-users] sslbump and caching of generated cert">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Jul  1 02:56:46 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="004310.html">[squid-users] Transparent Proxy Configuration
</A></li>
        <LI>Next message (by thread): <A HREF="004446.html">[squid-users] sslbump and caching of generated cert
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4311">[ date ]</a>
              <a href="thread.html#4311">[ thread ]</a>
              <a href="subject.html#4311">[ subject ]</a>
              <a href="author.html#4311">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 1/07/2015 5:08 a.m., Alex Wu wrote:
&gt;<i> /*
</I>&gt;<i> You could assign two workers, each with a different http_port and
</I>&gt;<i> ssl_crtd helper using different cert databases.
</I>&gt;<i> 
</I>&gt;<i> */
</I>&gt;<i> 
</I>&gt;<i> How to do this? It sounds it might meet our need. 
</I>&gt;<i> 
</I>
at the top of squid.conf place:

 workers 2

 if ${process_number} = 1
   http_port 10045 ...
   sslcrtd_program ...

 else
   http_port 10046 ...
   sslcrtd_program ...

 endif

The list of other directives which also need separate per-worker
configuration can be found at
&lt;<A HREF="http://wiki.squid-cache.org/MultipleInstances#Relevant_squid.conf_directives">http://wiki.squid-cache.org/MultipleInstances#Relevant_squid.conf_directives</A>&gt;.


&gt;<i> The reason is that we assign a port for internal, 
</I>&gt;<i> so we can use cheap CA (self-generated CA), for the collaboration, we use a diffrent port, 
</I>&gt;<i> may need to set up a different CA.
</I>
That dont make sense to me. There should be no need for internal traffic
to use a different CA from what external has. Costs are already paid to
get the public CA, there is no incremental increase for internal traffic
to use it as well.

You can do simpler things like using a private LAN-specific IP on the
listening http_port for internal traffic and myportname ACL for internal
vs external access controls (that work regardless of whether the request
has been bumped or not).

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="004310.html">[squid-users] Transparent Proxy Configuration
</A></li>
	<LI>Next message (by thread): <A HREF="004446.html">[squid-users] sslbump and caching of generated cert
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4311">[ date ]</a>
              <a href="thread.html#4311">[ thread ]</a>
              <a href="subject.html#4311">[ subject ]</a>
              <a href="author.html#4311">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
