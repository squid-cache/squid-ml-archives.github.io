<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] cannot use squid-3.5.x for production
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20cannot%20use%20squid-3.5.x%20for%20production&In-Reply-To=%3CCACLJR%2BPr2FOZY0%2Bn21M9Ympw-H2oFR0EkZUYDX5tHLRAtPQs2A%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004313.html">
   <LINK REL="Next"  HREF="004317.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] cannot use squid-3.5.x for production</H1>
    <B>Tom Tom</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20cannot%20use%20squid-3.5.x%20for%20production&In-Reply-To=%3CCACLJR%2BPr2FOZY0%2Bn21M9Ympw-H2oFR0EkZUYDX5tHLRAtPQs2A%40mail.gmail.com%3E"
       TITLE="[squid-users] cannot use squid-3.5.x for production">tomtux007 at gmail.com
       </A><BR>
    <I>Wed Jul  1 08:17:21 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="004313.html">[squid-users] cannot use squid-3.5.x for production
</A></li>
        <LI>Next message (by thread): <A HREF="004317.html">[squid-users] cannot use squid-3.5.x for production
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4315">[ date ]</a>
              <a href="thread.html#4315">[ thread ]</a>
              <a href="subject.html#4315">[ subject ]</a>
              <a href="author.html#4315">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Othmar

The same behaviour here with squid 3.5.5:

# Catching an existing file results in a correct 200:
$ curl -x proxy:3128 -I <A HREF="ftp://mirror.switch.ch/README">ftp://mirror.switch.ch/README</A>
HTTP/1.1 200 OK
Server: squid
Mime-Version: 1.0
Date: Wed, 01 Jul 2015 07:58:28 GMT
Content-Type: text/plain
Last-Modified: Wed, 05 Dec 2007 14:13:16 GMT
X-Cache: MISS from proxy
Connection: keep-alive


# Catching an non-existing file hangs for a unknown time
$ curl -x proxy:3128 -I <A HREF="ftp://mirror.switch.ch/README123">ftp://mirror.switch.ch/README123</A>


I can confirm, that with older squids (&lt; 3.5) catching a
non-existing-file with ftp gives back a correct 404.

Kind regards,
Tom

On Wed, Jul 1, 2015 at 8:43 AM, <A HREF="https://lists.squid-cache.org/listinfo/squid-users">truniger at bluewin.ch</A> &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">truniger at bluewin.ch</A>&gt; wrote:
&gt;<i> Not much reaction on my statements so far.
</I>&gt;<i> So let me ask: is anyone actually receiving a valid 404-http-response from squid 3.5.x when trying to download a file which does not exist on the FTP-server?
</I>&gt;<i> I don't and I think it's a bug with 3.5.x and I wonder why I seem to be the only one facing it.
</I>&gt;<i>
</I>&gt;<i> Regards, Othmar
</I>&gt;<i>
</I>&gt;&gt;<i>The problem: when trying to FTP-download a non-existing file the
</I>&gt;&gt;<i>client-http-connection just hangs forever. The external FTP
</I>&gt;&gt;<i>communication works fine but squid misses to send back a http-response with code 404.
</I>&gt;&gt;<i>Instead the connection just stays open.
</I>&gt;&gt;<i>I have several jobs in production polling for files on external FTP
</I>&gt;&gt;<i>servers which work fine with 3.4.x but cannot be used anymore on 3.5.x
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Would be nice if someone could confirm this problem and even better if
</I>&gt;&gt;<i>someone has a valid 3.5.x workaround for this.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="004313.html">[squid-users] cannot use squid-3.5.x for production
</A></li>
	<LI>Next message (by thread): <A HREF="004317.html">[squid-users] cannot use squid-3.5.x for production
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4315">[ date ]</a>
              <a href="thread.html#4315">[ thread ]</a>
              <a href="subject.html#4315">[ subject ]</a>
              <a href="author.html#4315">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
