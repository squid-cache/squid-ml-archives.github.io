<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] TProxy and client_dst_passthru
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20TProxy%20and%20client_dst_passthru&In-Reply-To=%3C559537E3.4090809%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004341.html">
   <LINK REL="Next"  HREF="004343.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] TProxy and client_dst_passthru</H1>
    <B>Yuri Voinov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20TProxy%20and%20client_dst_passthru&In-Reply-To=%3C559537E3.4090809%40gmail.com%3E"
       TITLE="[squid-users] TProxy and client_dst_passthru">yvoinov at gmail.com
       </A><BR>
    <I>Thu Jul  2 13:08:51 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="004341.html">[squid-users] TProxy and client_dst_passthru
</A></li>
        <LI>Next message (by thread): <A HREF="004343.html">[squid-users] TProxy and client_dst_passthru
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4342">[ date ]</a>
              <a href="thread.html#4342">[ thread ]</a>
              <a href="subject.html#4342">[ subject ]</a>
              <a href="author.html#4342">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256
 
In my installation I use caching DNS (unbound) in conjunction with Squid.

This cachind DNS directly on squid box and solves many problem with DNS.

Unbound cache itself uses custom TTL setting (maximal) for DNS records,
which is overrides provider/original DNS settings.

02.07.15 18:43, Stakres &#1087;&#1080;&#1096;&#1077;&#1090;:
&gt;<i> Hi Amos,
</I>&gt;<i>
</I>&gt;<i> &quot;/You can get around it somewhat by having the ISP resolvers use each
</I>other
&gt;<i> same as proxy chains do./&quot;
</I>&gt;<i> This is impossible to do in a multi-level ISPs archi, because each ISP
</I>could
&gt;<i> use any DNS servers (google, level3, etc...). From the original end
</I>user to
&gt;<i> the latest ISP step the dns header could be using an ip address that the
</I>&gt;<i> Squid could not know.
</I>&gt;<i>
</I>&gt;<i> &quot;/Consider some malicious server at 192.168.0.2 responding with an
</I>infected
&gt;<i> JPG to all requests. An infected server contains a script that fetches the
</I>&gt;<i> Google icon from 192.168.0.2 using Host:www.google.com. /&quot;
</I>&gt;<i> Totaly agree with you but what we/you could do is to replace the original
</I>&gt;<i> dns records from the headers by the records squid will find and allow the
</I>&gt;<i> cache hit.
</I>&gt;<i> Here, squid only applies the correct dns but deny the object to be cached.
</I>&gt;<i> if squid corrects the dns it means the object should be safe (normaly)
</I>so it
&gt;<i> should accept to see the object saved into the cache (partial object or
</I>&gt;<i> not), right ?
</I>&gt;<i>
</I>&gt;<i> So, fixing a wrong dns record is a good thing I agree, but why do you deny
</I>&gt;<i> the cache action if the request was corrected ?
</I>&gt;<i>
</I>&gt;<i> What about if the end user has fixed to a special dns server (home made,
</I>&gt;<i> exotic server, etc...), here the ISP cannot increase the % saving and this
</I>&gt;<i> point (% saving) is the top priority for the ISP that's why he needs
</I>&gt;<i> solutions like Squid products.
</I>&gt;<i>
</I>&gt;<i> Do you think we could have a workaround for fixing the wrong dns
</I>record from
&gt;<i> headers (Squid action) and having the object cached ? or it does not make
</I>&gt;<i> sense because other security issues ?
</I>&gt;<i>
</I>&gt;<i> I read many forums where admins are requesting this behaviour, I 'm sure
</I>&gt;<i> we/you can find a nice solution for all of us .
</I>&gt;<i>
</I>&gt;<i> Fred
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context:
</I><A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/TProxy-and-client-dst-passthru-tp4670189p4672022.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/TProxy-and-client-dst-passthru-tp4670189p4672022.html</A>
&gt;<i> Sent from the Squid - Users mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2
 
iQEcBAEBCAAGBQJVlTfiAAoJENNXIZxhPexGzE0H/igDMTH/YQQa5LxjuxS7kz5B
tCiGhynWB4LDl8rs9bWKUrvL+vSTU3P5CiiZgSSdSJL3HmpOr/C2tLlepAh3zkql
pKTjlb/Lw6X5q8HpGRc6hRHoR2qaFpXM28H01358UQpZPIEIxG4ivgPz9hSkZZ72
6RnZR1uVlgGBRqh1mPDdPFUq8WCGi49InqjkZwd+cxOVeoujJDdKwI1mKYU/QDoy
UkPQRLfPDnqJBo4Y4Fowj/aQTTreQSLGtjhIIuGlOllomIdU9d8JruUHKUPfEnZe
mIWk9oMAL4e0hhZf1l+1Du6w4g1XCQ750a6DOjaYZaTmyBuSdyeaER3y/cc566M=
=9HYZ
-----END PGP SIGNATURE-----


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="004341.html">[squid-users] TProxy and client_dst_passthru
</A></li>
	<LI>Next message (by thread): <A HREF="004343.html">[squid-users] TProxy and client_dst_passthru
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4342">[ date ]</a>
              <a href="thread.html#4342">[ thread ]</a>
              <a href="subject.html#4342">[ subject ]</a>
              <a href="author.html#4342">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
