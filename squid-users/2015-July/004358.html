<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Dynamic content
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Dynamic%20content&In-Reply-To=%3CVI1PR06MB1456567C50C6A92D15D2DBC18D960%40VI1PR06MB1456.eurprd06.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004365.html">
   <LINK REL="Next"  HREF="004359.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Dynamic content</H1>
    <B>Jiri Wetter</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Dynamic%20content&In-Reply-To=%3CVI1PR06MB1456567C50C6A92D15D2DBC18D960%40VI1PR06MB1456.eurprd06.prod.outlook.com%3E"
       TITLE="[squid-users] Dynamic content">Jiri.Wetter at DixonsCarphone.com
       </A><BR>
    <I>Fri Jul  3 08:36:18 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="004365.html">[squid-users] Setting logfile_daemon
</A></li>
        <LI>Next message (by thread): <A HREF="004359.html">[squid-users] Dynamic content
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4358">[ date ]</a>
              <a href="thread.html#4358">[ thread ]</a>
              <a href="subject.html#4358">[ subject ]</a>
              <a href="author.html#4358">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I have problem with caching of dynamic content.

I verified conditions which have to be met in order to cache dynamic content here: <A HREF="http://wiki.squid-cache.org/SquidFaq/InnerWorkings#How_come_some_objects_do_not_get_cached.3F">http://wiki.squid-cache.org/SquidFaq/InnerWorkings#How_come_some_objects_do_not_get_cached.3F</A>
and also check by online tool  <A HREF="https://redbot.org/">https://redbot.org/</A>
Result is that my page can be cached but it doesn't work with my current settings. Therefore I would like to ask you for help with my configuration.

OS: Ubuntu 12.04.5 LTS
Squid Cache: Version 3.1.19
configure options:  '--build=x86_64-linux-gnu' '--prefix=/usr' '--includedir=${prefix}/include' '--mandir=${prefix}/share/man' '--infodir=${prefix}/share/info' '--sysconfdir=/etc' '--localstatedir=/var' '--libexecdir=${prefix}/lib/squid3' '--srcdir=.' '--disable-maintainer-mode' '--disable-dependency-tracking' '--disable-silent-rules' '--datadir=/usr/share/squid3' '--sysconfdir=/etc/squid3' '--mandir=/usr/share/man' '--with-cppunit-basedir=/usr' '--enable-inline' '--enable-async-io=8' '--enable-storeio=ufs,aufs,diskd' '--enable-removal-policies=lru,heap' '--enable-delay-pools' '--enable-cache-digests' '--enable-underscores' '--enable-icap-client' '--enable-follow-x-forwarded-for' '--enable-auth=basic,digest,ntlm,negotiate' '--enable-basic-auth-helpers=LDAP,MSNT,NCSA,PAM,SASL,SMB,YP,DB,POP3,getpwnam,squid_radius_auth,multi-domain-NTLM' '--enable-ntlm-auth-helpers=smb_lm,' '--enable-digest-auth-helpers=ldap,password' '--enable-negotiate-auth-helpers=squid_kerb_auth' '--enable-external-acl-helpers=ip_user,ldap_group,session,unix_group,wbinfo_group' '--enable-arp-acl' '--enable-esi' '--enable-zph-qos' '--enable-wccpv2' '--disable-translation' '--with-logdir=/var/log/squid3' '--with-pidfile=/var/run/squid3.pid' '--with-filedescriptors=65536' '--with-large-files' '--with-default-user=proxy' '--enable-linux-netfilter' 'build_alias=x86_64-linux-gnu' 'CFLAGS=-g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Wformat-security -Werror=format-security' 'LDFLAGS=-Wl,-Bsymbolic-functions -fPIE -pie -Wl,-z,relro -Wl,-z,now' 'CPPFLAGS=-D_FORTIFY_SOURCE=2' 'CXXFLAGS=-g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Wformat-security -Werror=format-security' --with-squid=/build/buildd/squid3-3.1.19

Works: <A HREF="http://wiki.squid-cache.org/ConfigExamples/DynamicContent?action=fullsearch&amp;context=180&amp;value=test&amp;titlesearch=Titles">http://wiki.squid-cache.org/ConfigExamples/DynamicContent?action=fullsearch&amp;context=180&amp;value=test&amp;titlesearch=Titles</A>
Works: <A HREF="http://pechal.net/?q=apple&amp;sp_staged=1&amp;sp_cs=UTF-8">http://pechal.net/?q=apple&amp;sp_staged=1&amp;sp_cs=UTF-8</A>
Doesn't work: <A HREF="http://sony_playstation_dev.guided.lon5.atomz.com/?q=sony&amp;sp_staged=1&amp;sp_cs=UTF-8">http://sony_playstation_dev.guided.lon5.atomz.com/?q=sony&amp;sp_staged=1&amp;sp_cs=UTF-8</A> - Why?


http_port 3128
coredump_dir /var/spool/squid3
httpd_suppress_version_string on
visible_hostname squid
max_open_disk_fds 960
log_mime_hdrs on
log_fqdn on
buffered_logs on
logformat combined %&gt;a %[ui %[un [%tl] &quot;%rm %ru HTTP/%rv&quot; %&gt;Hs %&lt;st &quot;%{Referer}&gt;h&quot; &quot;%{User-Agent}&gt;h&quot; %Ss:%Sh
access_log /var/log/squid3/access.log combined
cache allow all
cache_store_log /var/log/squid3/store.log
refresh_pattern -i (/cgi-bin/|\?) 0 0% 0
refresh_pattern .            0 20% 4320

acl manager proto cache_object
acl localhost src 127.0.0.1/32 ::1
acl to_localhost dst 127.0.0.0/8 0.0.0.0/32 ::1
acl SSL_ports port 443
acl Safe_ports port 80 21 443 70 210 1025-65535 280 488 591 777
acl CONNECT method CONNECT

http_access allow manager localhost
http_access deny manager
http_access deny !Safe_ports
http_access deny CONNECT !SSL_ports
http_access allow localhost


acl WEB_FRONT src 10.10.40.0/24
acl TEST .pechal.net

http_access allow WEB_FRONT TEST

http_access deny all



Thank you for help!

[cid:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">image001.png at 01CFAB51.9D803700</A>]
Ji&#345;&#237; Wetter
IT Infrastructure System Administrator/Technical Leader
Dixons Retail SSC s.r.o. part of Dixons Carphone plc.

Trinity Office Center
Trnita 491/5, 602 00, Brno, Czech Republic
T:   +420 731 518 233
W: dixonscarphonegroup.com

::<i>DISCLAIMER::
</I>________________________________________________________________________________________________________________
Confidentiality Notice from Dixons Carphone plc (registered in England &amp; Wales No.07105905) of 1 Portal Way, London, W3 6RS (&quot;Dixons Carphone&quot;). The information contained in this e-mail and any attachments may be legally privileged, proprietary and/or confidential. If you received this e-mail in error, please notify the sender by return, permanently delete the e-mail and destroy all hard copies immediately. No warranty is made as to the completeness or accuracy of the information contained in this e-mail. Opinions, conclusions and statements of intent in this e-mail are those of the sender and will not bind any Dixons Carphone group company (Dixons Carphone Group) unless confirmed by an authorised representative independently of this e-mail. We do not accept responsibility for viruses; you must scan for these. E-mails sent to and from Dixons Carphone Group are routinely monitored for record keeping, quality control, training purposes, to ensure regulatory compliance and to prevent viruses and unauthorised use of our computer systems. The Carphone Warehouse Limited (registered in England &amp; Wales No.02142673) is a member of the Dixons Carphone Group and is authorised and regulated by the Financial Conduct Authority.
________________________________________________________________________________________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150703/de01dafc/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150703/de01dafc/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 11513 bytes
Desc: image001.png
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150703/de01dafc/attachment.png">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150703/de01dafc/attachment.png</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="004365.html">[squid-users] Setting logfile_daemon
</A></li>
	<LI>Next message (by thread): <A HREF="004359.html">[squid-users] Dynamic content
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4358">[ date ]</a>
              <a href="thread.html#4358">[ thread ]</a>
              <a href="subject.html#4358">[ subject ]</a>
              <a href="author.html#4358">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
