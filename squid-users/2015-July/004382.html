<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] SSL-bump and Public Key Piinning (HPKP)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SSL-bump%20and%20Public%20Key%20Piinning%20%28HPKP%29&In-Reply-To=%3C5599BF06.7020308%40trimble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004380.html">
   <LINK REL="Next"  HREF="004383.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] SSL-bump and Public Key Piinning (HPKP)</H1>
    <B>Jason Haar</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SSL-bump%20and%20Public%20Key%20Piinning%20%28HPKP%29&In-Reply-To=%3C5599BF06.7020308%40trimble.com%3E"
       TITLE="[squid-users] SSL-bump and Public Key Piinning (HPKP)">Jason_Haar at trimble.com
       </A><BR>
    <I>Sun Jul  5 23:34:30 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="004380.html">[squid-users] SSL-bump and Public Key Piinning (HPKP)
</A></li>
        <LI>Next message (by thread): <A HREF="004383.html">[squid-users] ssl_bump with cache_peer problem: Handshake fail	after Client Hello.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4382">[ date ]</a>
              <a href="thread.html#4382">[ thread ]</a>
              <a href="subject.html#4382">[ subject ]</a>
              <a href="author.html#4382">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 6/07/15 2:01 am, Walter H. wrote:
&gt;<i> reply_header_access Public-Key-Pins deny all
</I>&gt;<i>
</I>&gt;<i> but this doesn't really work; is there another way?
</I>If you think you can override all pinning options, then I'm afraid 
you're mistaken. Well written security apps should do their darndest to 
stop TLS intercept from working: eg hardwiring the CA cert into the 
application itself and barfing if it ever starts a HTTPS connection that 
isn't signed by their &quot;one&quot; CA

You have to accept that and configure for it: simply create a 
&quot;noSSLintercept&quot; acl and in there place the ones that can't be fiddled 
with. I'm still only testing TLS intercept myself, but so far I've only 
whitelisted the following

.preyproject.com
accounts.google.com
.push.hello.firefox.com

BTW, even though Chrome/Firefox support key pinning, as a general rule 
they actually support TLS intercept as well - in that if they detect the 
CA involved in a cert-chain is trusted by the *user* and is not a 
&quot;commercial&quot; CA, then they assume TLS Intercept must be involved and 
allow it to work (at least that's how it seems to work to me). Not a bad 
idea as it allows companies to do TLS intercept, but still guards 
against governments forcing commercial CAs to create &quot;fake&quot; server certs 
(let's be honest - all of this is about stopping government snooping - 
not about normal criminal behavior)

Jason

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="004380.html">[squid-users] SSL-bump and Public Key Piinning (HPKP)
</A></li>
	<LI>Next message (by thread): <A HREF="004383.html">[squid-users] ssl_bump with cache_peer problem: Handshake fail	after Client Hello.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4382">[ date ]</a>
              <a href="thread.html#4382">[ thread ]</a>
              <a href="subject.html#4382">[ subject ]</a>
              <a href="author.html#4382">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
