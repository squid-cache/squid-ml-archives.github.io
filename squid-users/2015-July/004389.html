<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] ssl_bump with cache_peer problem: Handshake fail after Client Hello.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20ssl_bump%20with%20cache_peer%20problem%3A%20Handshake%20fail%0A%20after%20Client%20Hello.&In-Reply-To=%3C559A8745.7010606%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004388.html">
   <LINK REL="Next"  HREF="004390.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] ssl_bump with cache_peer problem: Handshake fail after Client Hello.</H1>
    <B>Yuri Voinov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20ssl_bump%20with%20cache_peer%20problem%3A%20Handshake%20fail%0A%20after%20Client%20Hello.&In-Reply-To=%3C559A8745.7010606%40gmail.com%3E"
       TITLE="[squid-users] ssl_bump with cache_peer problem: Handshake fail after Client Hello.">yvoinov at gmail.com
       </A><BR>
    <I>Mon Jul  6 13:48:53 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="004388.html">[squid-users] ssl_bump with cache_peer problem: Handshake fail after Client Hello.
</A></li>
        <LI>Next message (by thread): <A HREF="004390.html">[squid-users] ssl_bump with cache_peer problem: Handshake fail after Client Hello.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4389">[ date ]</a>
              <a href="thread.html#4389">[ thread ]</a>
              <a href="subject.html#4389">[ subject ]</a>
              <a href="author.html#4389">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256
 
And also:

As long as you stay in the white robes, the whole world supports the
illusion of security HTTPS. The world has changed in the eyes of the
past three years. And by the way, your branch 3.4 has long been used in
commercial solutions. Doing the bump. The illusion of security is much
worse insecurity. Is not it time to admit it?

06.07.15 19:34, adam900710 &#1087;&#1080;&#1096;&#1077;&#1090;:
&gt;<i> 2015-07-06 20:06 GMT+08:00 Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;:
</I>&gt;&gt;<i> On 6/07/2015 9:30 p.m., adam900710 wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Here is some of my experiments:
</I>&gt;&gt;&gt;<i> 1) Remove &quot;never_direct&quot;
</I>&gt;&gt;&gt;<i> Then ssl_bump works as expected, but all traffic doesn't goes through
</I>&gt;&gt;&gt;<i> the SOCKS5 proxy. So a lot of sites I can't access.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 2) Use local 8118 proxy
</I>&gt;&gt;&gt;<i> That works fine without any problem, but SSL_dump is needed...
</I>&gt;&gt;&gt;<i> So just prove privoxy are working.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Any clue?
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Also, If I disable &quot;ssl_bump&quot; at http_port line, squid works without
</I>&gt;&gt;&gt;<i> any problem just as a forwarder.
</I>&gt;&gt;&gt;<i> But that makes no sense anyway.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Makes perfect sense. Would you like anybody to be able to decrypt your
</I>&gt;&gt;<i> HTTPS traffic and send it as plain-text wherever they want?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Squid does not permit that. All inbound encrypted traffic must one way
</I>&gt;&gt;<i> or another leave upstream only by encrypted channels.
</I>&gt;<i> Agree with Yuri, I hate the government (Yeah, especially the f**king
</I>&gt;<i> China gov!) and
</I>&gt;<i> the evil Chinese one has alreayd tried this trick on gmail some month ago.
</I>&gt;<i>
</I>&gt;<i> That's who forces me to pass the traffic to privoxy, as the Great
</I>&gt;<i> Firewall is already
</I>&gt;<i> blocking me to reach most sites in the open world.
</I>&gt;<i>
</I>&gt;<i> Also you get a little confused with ssl dump and
</I>encryption/authentication.
&gt;<i>
</I>&gt;<i> SSL bump in fact doesn't do the black magic to magically decrypt
</I>&gt;<i> everything without cost.
</I>&gt;<i> PKI things still makes you know that some one is bump your SSL
</I>communication.
&gt;<i>
</I>&gt;<i> So normally with SSL bump, you will see a big browser warning about
</I>&gt;<i> the unknown issuer of
</I>&gt;<i> the faked certificates.
</I>&gt;<i> And normal routine like curl will just abort the connection when it
</I>&gt;<i> found the certificate is not valid.
</I>&gt;<i>
</I>&gt;<i> Although the communication lost the encryption, you can still know you
</I>&gt;<i> are under monitoring.
</I>&gt;<i> And this implement needs you to trust the fake CA.
</I>&gt;<i> If one doesn't trust it, just blacklist the fake CA and use tor or
</I>&gt;<i> whatever to really hide the trace.
</I>&gt;<i>
</I>&gt;<i> So although the ssl bump destory encryption, but it doesn't destory
</I>&gt;<i> authentication.
</I>&gt;<i> And the combination of ssl bump and cache peer should be allowed if no
</I>&gt;<i> bugs or my configuration error.
</I>&gt;<i>
</I>&gt;<i> Thanks.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Amos
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> squid-users mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2
 
iQEcBAEBCAAGBQJVmodEAAoJENNXIZxhPexGK10IAImDjOVFy+W+v1IFKg8KVZzW
dbdQu00RnpOxKyEf9mQHb27DX674mr7LxxOHmXEpttPd2EdRERVveViJNOw0Hs1B
LeSeqp9D9ZvP4lqyVLdvJTqCzvF1TbFKF7Xc8S5olUrI4yOsvDIdpLqZ3emFqIQd
rXgdM8FJtxTMf/qgPfkJMfVS8zyo1CMeAxlMayTzwdvk6E7IGUk2CyEG7XKDjzrd
Lp89qUk6vpuzHoirVefFKq4M/TPLtSeL1647MiIP5L5Do6nREYXNlYn5IywZTEQC
6rn81G+g+vIbRdASBPtVQ1tWI6HD3oD9j2965DNdgIkmjwfG47Kotam6tHftBwA=
=qyX/
-----END PGP SIGNATURE-----


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="004388.html">[squid-users] ssl_bump with cache_peer problem: Handshake fail after Client Hello.
</A></li>
	<LI>Next message (by thread): <A HREF="004390.html">[squid-users] ssl_bump with cache_peer problem: Handshake fail after Client Hello.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4389">[ date ]</a>
              <a href="thread.html#4389">[ thread ]</a>
              <a href="subject.html#4389">[ subject ]</a>
              <a href="author.html#4389">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
