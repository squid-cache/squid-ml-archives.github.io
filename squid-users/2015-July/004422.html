<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Use of conditionals in config file
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Use%20of%20conditionals%20in%20config%20file&In-Reply-To=%3C559BF2D7.9050109%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004416.html">
   <LINK REL="Next"  HREF="004426.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Use of conditionals in config file</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Use%20of%20conditionals%20in%20config%20file&In-Reply-To=%3C559BF2D7.9050109%40treenet.co.nz%3E"
       TITLE="[squid-users] Use of conditionals in config file">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Jul  7 15:40:07 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="004416.html">[squid-users] Use of conditionals in config file
</A></li>
        <LI>Next message (by thread): <A HREF="004426.html">[squid-users] Squid 2.7, 3.4 and 3.5 Videos/Music/Images/Libraries/CDNs Booster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4422">[ date ]</a>
              <a href="thread.html#4422">[ thread ]</a>
              <a href="subject.html#4422">[ subject ]</a>
              <a href="author.html#4422">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 8/07/2015 3:03 a.m., Ulises Nicolini wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> Is there any way to do something like this?
</I>&gt;<i> 
</I>&gt;<i> if ${process_number} = 2 &amp;&amp; url_regex facebook.com.*
</I>&gt;<i> 
</I>&gt;<i>     cache_dir aufs /cache_face   590000  32 256 min-size=500
</I>&gt;<i> max-size=576000
</I>&gt;<i> endif
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Of course this is not valid syntax config , but the idea is to store in
</I>&gt;<i> a certain cache_dir only the content from a given domain (i.e
</I>&gt;<i> facebook.com.*)
</I>
What you are thinking is this:

 if ${process_number} = 2
  acl FB dstdomain facebook.com
  cache deny !FB
  cache_dir ...
 endif


However it makes no sense to do.

Firstly, an HTTP proxy cache is just a temporary buffer in the network
path between client and origin server. Segregating temporary storage
location based on arbitrary origins gains no benefit over non-segregated
data, and costs extra processing time to figure out the special vs
non-special locations for every request.

Secondly, caches do not store content by domain name. Content is stored
by an efficient hash of the URL plus various other details specific to
the object type. One of which is how closely related in time any two
given requests occured, such that sites built as a mashup of references
to other domains content will render as quickly. Segregation by domain
defeats that algorithm. NP: Facebook is one of those types of site.

Thirdly, disk is only one layer of a multi-layered caching system.
Objects have been through both the in-transit storage and memory cache
and remained cacheable before they get considered for saving to disk
locations.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="004416.html">[squid-users] Use of conditionals in config file
</A></li>
	<LI>Next message (by thread): <A HREF="004426.html">[squid-users] Squid 2.7, 3.4 and 3.5 Videos/Music/Images/Libraries/CDNs Booster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4422">[ date ]</a>
              <a href="thread.html#4422">[ thread ]</a>
              <a href="subject.html#4422">[ subject ]</a>
              <a href="author.html#4422">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
