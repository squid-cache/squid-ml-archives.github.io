<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] AUFS vs. DISKS
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20AUFS%20vs.%20DISKS&In-Reply-To=%3C1809949937.33655301.1437058854230.JavaMail.root%40zimbra4-e1.priv.proxad.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004587.html">
   <LINK REL="Next"  HREF="004598.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] AUFS vs. DISKS</H1>
    <B>FredB</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20AUFS%20vs.%20DISKS&In-Reply-To=%3C1809949937.33655301.1437058854230.JavaMail.root%40zimbra4-e1.priv.proxad.net%3E"
       TITLE="[squid-users] AUFS vs. DISKS">fredbmail at free.fr
       </A><BR>
    <I>Thu Jul 16 15:00:54 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="004587.html">[squid-users] AUFS vs. DISKS
</A></li>
        <LI>Next message (by thread): <A HREF="004598.html">[squid-users] AUFS vs. DISKS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4596">[ date ]</a>
              <a href="thread.html#4596">[ thread ]</a>
              <a href="subject.html#4596">[ subject ]</a>
              <a href="author.html#4596">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> &gt; 
</I>&gt;<i> &gt; Not sure we'll have free time for testing the previous 3.4, we now
</I>&gt;<i> &gt; have
</I>&gt;<i> &gt; dozens of boxes to manually upgrade to the 3.5.6...
</I>&gt;<i> &gt; yes, we do use the original squid 3.5.6 package, no build mix here.
</I>&gt;<i> &gt; 
</I>&gt;<i> 
</I>&gt;<i> Ok I will, It would be interesting to understand what happen and if
</I>&gt;<i> there is something wrong in latest versions
</I>&gt;<i> _______________________________________________
</I>

Hi all,

Quickly tested with squid 3.5.6, yes there is a big difference  
Without any other load, just my test - wget with proxy 127.0.0.1 (no lan) - Debian wheezy 32 bits


aufs: 

[16/Jul/2015:16:15:25 +0200] &quot;GET <A HREF="http://ec.ccm2.net/www.commentcamarche.net/download/files/youtube_downloader_hd_setup-2.9.9.23.exe">http://ec.ccm2.net/www.commentcamarche.net/download/files/youtube_downloader_hd_setup-2.9.9.23.exe</A> HTTP/1.0&quot; 200 10096328 TCP_HIT:HIER_NONE

100%[===========================================================================================================================================================================&gt;] 10,095,849  26.1M/s   in 0.4s    

2015-07-16 16:15:25 (26.1 MB/s) - `youtube_downloader_hd_setup-2.9.9.23.exe.4' saved [10095849/10095849]


real	0m0.385s
user	0m0.028s
sys	0m0.164s


diskd:

[16/Jul/2015:16:17:29 +0200] &quot;GET <A HREF="http://ec.ccm2.net/www.commentcamarche.net/download/files/youtube_downloader_hd_setup-2.9.9.23.exe">http://ec.ccm2.net/www.commentcamarche.net/download/files/youtube_downloader_hd_setup-2.9.9.23.exe</A> HTTP/1.0&quot; 200 10096328 TCP_HIT:HIER_NONE &quot;Wget/1.13.4 (linux-gnu)&quot;


Saving to: `youtube_downloader_hd_setup-2.9.9.23.exe.6'

100%[============================================================================================&gt;] 10,095,849   901K/s   in 14s     

2015-07-16 16:17:29 (684 KB/s) - `youtube_downloader_hd_setup-2.9.9.23.exe.6' saved [10095849/10095849]


real	0m14.426s
user	0m0.016s
sys	0m0.156s

In this case it's better without cache. 

I understand that aufs should be better but diskd is unusable ...

I also found something else, with squid 3.4.13 diskd start the download slowly but after a short time it is fast, with 3.5.6 the download is always slow  
In my bench aufs is always faster (very) than diskd, no matter 3.4.3 or 3.5.6, but with high load I'm worried about warning messages in cache.log, diskd seems more stable in this case.  


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="004587.html">[squid-users] AUFS vs. DISKS
</A></li>
	<LI>Next message (by thread): <A HREF="004598.html">[squid-users] AUFS vs. DISKS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4596">[ date ]</a>
              <a href="thread.html#4596">[ thread ]</a>
              <a href="subject.html#4596">[ subject ]</a>
              <a href="author.html#4596">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
