<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 3.5.5 ssl_bump and ufdbGuard
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203.5.5%20ssl_bump%20and%20ufdbGuard&In-Reply-To=%3CCANLNtGQQz9HSxoHAeK4Tr%2BbRVcZ7CF8zbCHHE6%3D-Cqv_MYgsag%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004683.html">
   <LINK REL="Next"  HREF="004658.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 3.5.5 ssl_bump and ufdbGuard</H1>
    <B>Stanford Prescott</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203.5.5%20ssl_bump%20and%20ufdbGuard&In-Reply-To=%3CCANLNtGQQz9HSxoHAeK4Tr%2BbRVcZ7CF8zbCHHE6%3D-Cqv_MYgsag%40mail.gmail.com%3E"
       TITLE="[squid-users] Squid 3.5.5 ssl_bump and ufdbGuard">stan.prescott at gmail.com
       </A><BR>
    <I>Mon Jul 20 21:36:27 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="004683.html">[squid-users] SSL connction failed due to SNI after content redirection
</A></li>
        <LI>Next message (by thread): <A HREF="004658.html">[squid-users] Squid 3.5.5 ssl_bump and ufdbGuard
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4657">[ date ]</a>
              <a href="thread.html#4657">[ thread ]</a>
              <a href="subject.html#4657">[ subject ]</a>
              <a href="author.html#4657">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This probably more rightly belongs in the ufdbGuard mailing list, but SF
has been down for several days and I cannot post there. There is a bit of
overlap with ssl_bump and ufdGuard with one of the issues I am having.
Maybe someone here who uses ufdbGuard or squidGuard could help me?

I am trying to replace our implementation of the old squidGuard with
ufdbGuard on Smoothwall Express v3.1 firewall distro. I have gotten
ufdbGuard running and filtering with Squid 3.5.5 using ssl_bump.My
questions:

1. With ssl_bump and squidGuard I was able to use the urlfilter to block
https sites like facebook.com. Allowed https sites would load in my browser
without errors with ssl_bump and squidGuard active. With ssl_bump and
ufdbGuard it is a lot more complicated, it seems.

-Squid+ssl_bump and ufdbGuard running I can access all HTTP sites without
errors. I cannot access any HTTPS sites at all. I get &quot;Untrusted
connection&quot; errors when trying to load any HTTPS site.

-If I restart squid without ssl_bump and ufdbGuard still running, I can
then access all HTTP and HTTPS sites and categories that I have blocked do
get blocked, but only HTTP.sites. All HTTPS sites will load, but none get
blocked that are supposed to be.

-If I then restart squid+ssl_bump (and ufdbGuard still running) I can now
access all HTTP and HTTPS sites. Also, all HTTP and HTTPS sites that are
supposed to be blocked by category, like porn for instance, do get blocked
like they are supposed to be. Except for domains in the alwaysdeny category
(but that will be a question for another time).

-When ufdbGuard and squid+ssl_bump are started (in that order) I see
processes running for squid, ssl_crtd, and ufdbguardd. I do not see any
processes for squid_redirect and ufdbgclient. If I enter and load a website
and then check the processes running I then see squid_redirect and
ufdbgclient. Is that supposed to happen like that?

2. I am using the Shalla blacklists for testing. I haven't been able to
sign up for a URLfilterDB free trial because I only use yahoo.com and
gmail.com for my email. Plus, I don't want to pay for a subscription until
I know I have this working. When I convert the Shalla blacklists to ufdb
format using ufdbConvertDB, only the domains are converted to the ufdb
format (domains.ufdb). The urls files are not converted, even when using
the &quot;-u urls&quot; switch.

My current ufdbGuard.conf file is attached..
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150720/5e5aceec/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150720/5e5aceec/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ufdbGuard.conf
Type: application/octet-stream
Size: 21525 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150720/5e5aceec/attachment.obj">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150720/5e5aceec/attachment.obj</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="004683.html">[squid-users] SSL connction failed due to SNI after content redirection
</A></li>
	<LI>Next message (by thread): <A HREF="004658.html">[squid-users] Squid 3.5.5 ssl_bump and ufdbGuard
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4657">[ date ]</a>
              <a href="thread.html#4657">[ thread ]</a>
              <a href="subject.html#4657">[ subject ]</a>
              <a href="author.html#4657">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
