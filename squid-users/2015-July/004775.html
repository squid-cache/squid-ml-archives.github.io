<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid youtube caching
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20youtube%20caching&In-Reply-To=%3C55B2A3B0.3080306%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004764.html">
   <LINK REL="Next"  HREF="004766.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid youtube caching</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20youtube%20caching&In-Reply-To=%3C55B2A3B0.3080306%40treenet.co.nz%3E"
       TITLE="[squid-users] squid youtube caching">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Jul 24 20:44:32 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="004764.html">[squid-users] squid youtube caching
</A></li>
        <LI>Next message (by thread): <A HREF="004766.html">[squid-users] squid youtube caching
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4775">[ date ]</a>
              <a href="thread.html#4775">[ thread ]</a>
              <a href="subject.html#4775">[ subject ]</a>
              <a href="author.html#4775">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 25/07/2015 3:34 a.m., Yuri Voinov wrote:
&gt;<i> 
</I>&gt;<i> 24.07.15 21:15, Amos Jeffries &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;&gt;<i> On 25/07/2015 12:38 a.m., Yuri Voinov wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> <A HREF="https://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security">https://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 24.07.15 18:33, joe &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;&gt;&gt;&gt;<i> i dont see Strict-Transport-Security  in my log header
</I>&gt;&gt;&gt;&gt;<i> only alternate-protocol
</I>&gt;&gt;&gt;&gt;<i> can you post an example link pls
</I>&gt;&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;&gt;<i> Note that the header may be sent over HTTP or HTTPS connection just once
</I>&gt;&gt;<i> with a value of up to 68 years. And the domain will be HTTPS from then
</I>&gt;&gt;<i> on as far as that client is concerned.
</I>&gt;<i> 
</I>&gt;&gt;<i> Dropping Strict-Transport-Security therefore does nothing useful.
</I>&gt;<i> In my setup it works for Chrome when user type &quot;youtube.com&quot; in command
</I>&gt;<i> line. Browser goes into http. Always.
</I>
Great to hear. I assume they are not placing a long duration on their
HSTS header then. Or that you successfully turned it off in some HTTPS
you intercepted sometime.

Like I said they *could* send 68 Years as the duration of non-HTTP.

&gt;<i> 
</I>&gt;&gt;<i> But Squid replacing it with a new value of &quot;max-age=0;
</I>&gt;&gt;<i> includeSubDomains&quot; will turn off the HSTS in the client for that domain.
</I>&gt;<i> Which Squid?
</I>
I think 3.4+ . The ones supporting reply_header_access and
reply_header_replace with custom header names. It was such a small
rarely mentioned update I've forgotten when it happened.


&gt;<i> 
</I>&gt;&gt;<i> Be careful with that though. HSTS is actually a good thing most of the
</I>&gt;&gt;<i> time. No matter how annoying it is to us proxying.
</I>&gt;<i> This is security illusion. Which is more bad than insecure.
</I>&gt;<i> 
</I>
No HSTS is not illusion. At least not beyond the illusions offered by
TLS itself (which ssl-bump shines a light on).

HSTS is just telling the client to use <A HREF="https://">https://</A> on its URLs even if the
user types <A HREF="http://">http://</A> or any page it gets contains a <A HREF="http://">http://</A> URL. The TLS
connection goes to where the user actually wanted to go, and is as
secure a TLS is. Nothing transferred over plain-text HTTP that could be
used to divert where the TLS was going to.
 All else being equal (ie assuming TLS was secure) attackers would have
to control port 443 on the servers belonging to the host who happened to
only be offering port 80 service. Pretty rare thing that.

In contrast there *is* illusion when an <A HREF="http://">http://</A> redirects to <A HREF="https://">https://</A>
because the <A HREF="http://">http://</A> part can be intercepted and attacker replace the
redirect URL with its own <A HREF="https://">https://</A> URL. HSTS avoids using the redirect
part at all.


&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> Regarding Alternate-Protocol;
</I>&gt;&gt;<i>  The latest Squid will auto-remove *always*. It usually indicates an
</I>&gt;&gt;<i> protocol experiment taking place by the website being visited (ie Google
</I>&gt;&gt;<i> and QUIC/SPDY) and does a lot of real damage to network security and
</I>&gt;&gt;<i> usability in any proxied network.
</I>&gt;<i> No network security during DPI. So, all of this things is meaningless. IMHO.
</I>&gt;<i> 
</I>
DPI ?

You recall why I put it in right? all the complains from people about
users bypassing their security rules and not being able to identify how
it was happening. It was a bit noisy in here a while back about all that.
Thats what I mean by damage. If the person in charge of security don't
even know where the traffic is, they got problems.


&gt;<i> All usability we are need - HTTP does.
</I>&gt;<i> 
</I>

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="004764.html">[squid-users] squid youtube caching
</A></li>
	<LI>Next message (by thread): <A HREF="004766.html">[squid-users] squid youtube caching
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4775">[ date ]</a>
              <a href="thread.html#4775">[ thread ]</a>
              <a href="subject.html#4775">[ subject ]</a>
              <a href="author.html#4775">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
