<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] LDAP Auth re-prompting for credentials on browser close, need suggestions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20LDAP%20Auth%20re-prompting%20for%20credentials%20on%20browser%0A%20close%2C%20need%20suggestions&In-Reply-To=%3C55B94391.2020203%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004841.html">
   <LINK REL="Next"  HREF="004859.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] LDAP Auth re-prompting for credentials on browser close, need suggestions</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20LDAP%20Auth%20re-prompting%20for%20credentials%20on%20browser%0A%20close%2C%20need%20suggestions&In-Reply-To=%3C55B94391.2020203%40treenet.co.nz%3E"
       TITLE="[squid-users] LDAP Auth re-prompting for credentials on browser close, need suggestions">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Jul 29 21:20:17 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="004841.html">[squid-users] LDAP Auth re-prompting for credentials on browser close, need suggestions
</A></li>
        <LI>Next message (by thread): <A HREF="004859.html">[squid-users] LDAP Auth re-prompting for credentials on browser close, need suggestions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4845">[ date ]</a>
              <a href="thread.html#4845">[ thread ]</a>
              <a href="subject.html#4845">[ subject ]</a>
              <a href="author.html#4845">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 30/07/2015 2:21 a.m., Michael Monette wrote:
&gt;<i> Hey,
</I>&gt;<i> 
</I>&gt;<i> I configured the basic_ldap_helper from Squid to my LDAP. Everytime I
</I>&gt;<i> open the browser I am forced to re-auth. All of them except for
</I>&gt;<i> Internet Explorer..But who uses IE anyways? It seems like this is not
</I>&gt;<i> a Squid issue, but a browser thing.
</I>&gt;<i> 
</I>
How very .. expected. see end of this email.


&gt;<i> Found this post asking the same question:
</I>&gt;<i> <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-Ldap-Authen-AD-how-to-make-authentication-persistent-td3604487.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-Ldap-Authen-AD-how-to-make-authentication-persistent-td3604487.html</A>
</I>&gt;<i> and it
</I>&gt;<i> 
</I>&gt;<i> There were two suggestions that stood out:
</I>&gt;<i> 
</I>&gt;<i> There used to be a &quot;authenticate_ip_shortcircuit_ttl&quot; option in squid
</I>&gt;<i> 2.7 that when authenticated successfully, it would remember the users
</I>&gt;<i> IP for X amount of time and would let you avoid logging in every time
</I>&gt;<i> you reopen your browser. They removed that in later versions
</I>&gt;<i> unfortunately, I guess because someone could take over your IP and
</I>&gt;<i> would be able to authenticate as you(which is not a concern to me, at
</I>&gt;<i> all).
</I>
It should.

Theres this thing called NAT you see, which places multiple users behind
a single IP. The first one to login with IP-based auth. Since IPv4 ran
out back in 2003 a number of networks have started using one layer.
Since 2010 when IPv4 stopped being readily available its become more and
more popular to use 2 and even 3 layers of NAT between any two machines.
Just so they can talk.

Then there is this thing called DHCP. I guess this is what you mean by
one user taking over anothers IP. Since the DHCP service allocates any
available IP to user devices on request. If a device goes away its IP
can get re-used immediately by another device. Its uite difficult to get
Squid to be aware of any of those changes and update its auth information.

Then there is the thing called &quot;privacy addressing&quot;. In IPv6 its
built-in, with IPv4 its done using DHCP short dynamic assignments. It
means the IP address assigned to user devices is guaranteed to change
frequently and randomly.

Now, if your network can operate without NAT or DHCP, or IPv6. You are
one of the very rare lucky people for whom IP-shortcut based auth
*might* work. But only until you have a malicious user contact the
network and start spoofing users IPs.


IP address based authentication is, well. Dead.


&gt;<i> 
</I>&gt;<i> The other suggestion would be to use an external ACL helper but they
</I>&gt;<i> did not include one or any example in the post.
</I>&gt;<i> 
</I>&gt;<i> Would anyone happen to have an example of a helper that does this or
</I>&gt;<i> some other way I can go about pulling this off?
</I>

 &quot;Windows Integrated Authentication&quot; is what IE is using not to have to
ask user for credentials. Some credentials were given when they logged
into the machine, and are used by the browser to send to Squid as needed
(and only as needed). Sometimes called Single-Sign-On or Federated
authentication.

I hear the other browsers need some config to use it. But can't recall
right now what that is.

For Squid it should work with Basic auth. Dont believe the myths that
say Windows auth == NTLM.


Whether *a* popup is seen also depends on whether the browser password
manager is in use. One always need to unlock that manually when opening
a browser. The actual Squid credentials are fetched from there after its
opened. And no that popup is *not* part of HTTP auth.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="004841.html">[squid-users] LDAP Auth re-prompting for credentials on browser close, need suggestions
</A></li>
	<LI>Next message (by thread): <A HREF="004859.html">[squid-users] LDAP Auth re-prompting for credentials on browser close, need suggestions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4845">[ date ]</a>
              <a href="thread.html#4845">[ thread ]</a>
              <a href="subject.html#4845">[ subject ]</a>
              <a href="author.html#4845">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
