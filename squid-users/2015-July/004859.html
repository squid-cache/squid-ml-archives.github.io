<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] LDAP Auth re-prompting for credentials on browser close, need suggestions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20LDAP%20Auth%20re-prompting%20for%20credentials%20on%20browser%0A%20close%2C%20need%20suggestions&In-Reply-To=%3C55BA4467.6000202%402keys.ca%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004845.html">
   <LINK REL="Next"  HREF="004863.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] LDAP Auth re-prompting for credentials on browser close, need suggestions</H1>
    <B>Michael Monette</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20LDAP%20Auth%20re-prompting%20for%20credentials%20on%20browser%0A%20close%2C%20need%20suggestions&In-Reply-To=%3C55BA4467.6000202%402keys.ca%3E"
       TITLE="[squid-users] LDAP Auth re-prompting for credentials on browser close, need suggestions">mmonette at 2keys.ca
       </A><BR>
    <I>Thu Jul 30 15:36:07 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="004845.html">[squid-users] LDAP Auth re-prompting for credentials on browser close, need suggestions
</A></li>
        <LI>Next message (by thread): <A HREF="004863.html">[squid-users] LDAP Auth re-prompting for credentials on browser close, need suggestions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4859">[ date ]</a>
              <a href="thread.html#4859">[ thread ]</a>
              <a href="subject.html#4859">[ subject ]</a>
              <a href="author.html#4859">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

On 7/29/2015 5:20 PM, Amos Jeffries wrote:
&gt;<i>
</I>&gt;&gt;<i> Found this post asking the same question:
</I>&gt;&gt;<i> <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-Ldap-Authen-AD-how-to-make-authentication-persistent-td3604487.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-Ldap-Authen-AD-how-to-make-authentication-persistent-td3604487.html</A>
</I>&gt;&gt;<i> and it
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> There were two suggestions that stood out:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> There used to be a &quot;authenticate_ip_shortcircuit_ttl&quot; option in squid
</I>&gt;&gt;<i> 2.7 that when authenticated successfully, it would remember the users
</I>&gt;&gt;<i> IP for X amount of time and would let you avoid logging in every time
</I>&gt;&gt;<i> you reopen your browser. They removed that in later versions
</I>&gt;&gt;<i> unfortunately, I guess because someone could take over your IP and
</I>&gt;&gt;<i> would be able to authenticate as you(which is not a concern to me, at
</I>&gt;&gt;<i> all).
</I>&gt;<i> It should.
</I>&gt;<i>
</I>&gt;<i> Theres this thing called NAT you see, which places multiple users behind
</I>&gt;<i> a single IP. The first one to login with IP-based auth. Since IPv4 ran
</I>&gt;<i> out back in 2003 a number of networks have started using one layer.
</I>&gt;<i> Since 2010 when IPv4 stopped being readily available its become more and
</I>&gt;<i> more popular to use 2 and even 3 layers of NAT between any two machines.
</I>&gt;<i> Just so they can talk.
</I>&gt;<i>
</I>&gt;<i> Then there is this thing called DHCP. I guess this is what you mean by
</I>&gt;<i> one user taking over anothers IP. Since the DHCP service allocates any
</I>&gt;<i> available IP to user devices on request. If a device goes away its IP
</I>&gt;<i> can get re-used immediately by another device. Its uite difficult to get
</I>&gt;<i> Squid to be aware of any of those changes and update its auth information.
</I>&gt;<i>
</I>&gt;<i> Then there is the thing called &quot;privacy addressing&quot;. In IPv6 its
</I>&gt;<i> built-in, with IPv4 its done using DHCP short dynamic assignments. It
</I>&gt;<i> means the IP address assigned to user devices is guaranteed to change
</I>&gt;<i> frequently and randomly.
</I>&gt;<i>
</I>&gt;<i> Now, if your network can operate without NAT or DHCP, or IPv6. You are
</I>&gt;<i> one of the very rare lucky people for whom IP-shortcut based auth
</I>&gt;<i> *might* work. But only until you have a malicious user contact the
</I>&gt;<i> network and start spoofing users IPs.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> IP address based authentication is, well. Dead.
</I>&gt;<i>
</I>Okay, well I know how NAT and DHCP works, so I guess I am one of those 
rare cases you talk about.  We have no NATs, I am only trying to use 
squid on a small section of our network which has statically assigned IP 
addresses and they have no admin rights to change it. They are open 24/7 
so some stranger walking in, plugging his laptop on our network and 
trying to figure out which IP is already authenticated is very unlikely 
since everybody knows each other and it noticed/reported. That's why 
this does not concern me. I was also only planning to have it remember 
the IP for maybe 1 hour.

On the other hand, having users re-authenticate every time they close 
their browser would irritate them and possibly cause confusion as most 
of them are not very technical(It might just be something they will need 
to adjust to after all).

So in my case, either I figure out a way to go about this (I saw your 
suggestions below and am going to do some reading) or I might have to 
not implement any authentication at all, which I think is worse.

&gt;&gt;<i> The other suggestion would be to use an external ACL helper but they
</I>&gt;&gt;<i> did not include one or any example in the post.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Would anyone happen to have an example of a helper that does this or
</I>&gt;&gt;<i> some other way I can go about pulling this off?
</I>&gt;<i>
</I>&gt;<i>   &quot;Windows Integrated Authentication&quot; is what IE is using not to have to
</I>&gt;<i> ask user for credentials. Some credentials were given when they logged
</I>&gt;<i> into the machine, and are used by the browser to send to Squid as needed
</I>&gt;<i> (and only as needed). Sometimes called Single-Sign-On or Federated
</I>&gt;<i> authentication.
</I>&gt;<i>
</I>&gt;<i> I hear the other browsers need some config to use it. But can't recall
</I>&gt;<i> right now what that is.
</I>
I will look around for this config option and check out SSO/Federated 
authentication, I appreciate the hint.
If I can't figure out a way to get this going I will speak to management 
to see if this is an acceptable tradeoff. I am just exploring my options 
before I do.
&gt;<i>
</I>&gt;<i> For Squid it should work with Basic auth. Dont believe the myths that
</I>&gt;<i> say Windows auth == NTLM.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Whether *a* popup is seen also depends on whether the browser password
</I>&gt;<i> manager is in use. One always need to unlock that manually when opening
</I>&gt;<i> a browser. The actual Squid credentials are fetched from there after its
</I>&gt;<i> opened. And no that popup is *not* part of HTTP auth.
</I>Thanks for clearing that up and your responses, much appreciated.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="004845.html">[squid-users] LDAP Auth re-prompting for credentials on browser close, need suggestions
</A></li>
	<LI>Next message (by thread): <A HREF="004863.html">[squid-users] LDAP Auth re-prompting for credentials on browser close, need suggestions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4859">[ date ]</a>
              <a href="thread.html#4859">[ thread ]</a>
              <a href="subject.html#4859">[ subject ]</a>
              <a href="author.html#4859">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
