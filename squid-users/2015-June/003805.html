<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] rock storage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20rock%20storage&In-Reply-To=%3C556CBEF7.8030103%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003804.html">
   <LINK REL="Next"  HREF="003811.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] rock storage</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20rock%20storage&In-Reply-To=%3C556CBEF7.8030103%40treenet.co.nz%3E"
       TITLE="[squid-users] rock storage">squid3 at treenet.co.nz
       </A><BR>
    <I>Mon Jun  1 20:22:16 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="003804.html">[squid-users] rock storage
</A></li>
        <LI>Next message (by thread): <A HREF="003811.html">[squid-users] ssl_crtd breaks after short time
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3805">[ date ]</a>
              <a href="thread.html#3805">[ thread ]</a>
              <a href="subject.html#3805">[ subject ]</a>
              <a href="author.html#3805">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2/06/2015 5:13 a.m., Hussam Al-Tayeb wrote:
&gt;<i> Hello, I added a 5000MB rock storage entry in squid.conf
</I>&gt;<i> when it filled up, squid cache manager said:
</I>&gt;<i> 	Storage Swap size:	5120000 KB
</I>&gt;<i> 	Storage Swap capacity:	100.0% used,  0.0% free
</I>&gt;<i> 
</I>&gt;<i> but du -BM says 4703M is the size of the rock storage file.
</I>&gt;<i> ls -l says 5242880000.
</I>&gt;<i> 
</I>&gt;<i> Since it is full, shouldn't du -BM reading be closer to 5000M?
</I>
Not particularly. Squid is counting the size of data blocks (cells) in
the DB. The FS may have completely different ideas about how much space
that data takes up after physical storage features have processed it.

Particularly if one rock DB cell takes up multiple FS blocks / inodes.
The incompletely filled rock DB cells (204, 304 or very small responses)
may only be using half (or less) the space on disk of filled cells.

4703 M10 is a lot closer than you may think as well. It is 4912 MiB.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="003804.html">[squid-users] rock storage
</A></li>
	<LI>Next message (by thread): <A HREF="003811.html">[squid-users] ssl_crtd breaks after short time
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3805">[ date ]</a>
              <a href="thread.html#3805">[ thread ]</a>
              <a href="subject.html#3805">[ subject ]</a>
              <a href="author.html#3805">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
