<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 3.5.4 OpenBSD workers registration timed out
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203.5.4%20OpenBSD%20workers%20registration%20timed%20out&In-Reply-To=%3C556E93AB.9000905%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003828.html">
   <LINK REL="Next"  HREF="003833.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 3.5.4 OpenBSD workers registration timed out</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203.5.4%20OpenBSD%20workers%20registration%20timed%20out&In-Reply-To=%3C556E93AB.9000905%40treenet.co.nz%3E"
       TITLE="[squid-users] Squid 3.5.4 OpenBSD workers registration timed out">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Jun  3 05:42:03 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="003828.html">[squid-users] 3.5.5 https problem
</A></li>
        <LI>Next message (by thread): <A HREF="003833.html">[squid-users] when using a search box on een website my hole internet explorer freezes incuding earlier opend tabs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3827">[ date ]</a>
              <a href="thread.html#3827">[ thread ]</a>
              <a href="subject.html#3827">[ subject ]</a>
              <a href="author.html#3827">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 30/05/2015 8:34 p.m., Henri Wahl wrote:
&gt;<i> 
</I>&gt;&gt;<i> Thanks for any hint and best regards
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> Is there really nobody else using this combo of OpenBSD + Squid workers?
</I>
Quite possible. OpenBSD support was broken for a while during 3.3/3.4
lifecycles and most Squid installs are using Linux.

The workers registration problem should not have anything to do with
OpenBSD specificaly though. Its directly related to size of rock caches
and the disk I/O speeds.


If I assume you have say a 50GB rock cache...

 (50 GB / 32 KB blocks) * 2 IO per block
    =&gt; 3 million disk I/O cycles to load the cache.

Your Squid has 6 seconds to do that, allocate the index memory in many
small blocks as it goes, and then respond to the coordinator.

Recalculate for your actual cache size and check:
* Can your disk handle that speed for non-sequential I/O ?
 - technically sequential, but skipping 7 out of each 8 inode &quot;blocks&quot;
can do weird things in the disk controller.

If you have more than one rock cache you need to add them all together.
UFS/aufs/diskd caches are much faster but the swap.state journals can
still be quite large with lots of I/O required to load - and also add
that as non-sequential I/O on top of the pile from rock cache.


I'm working on a patch to make the timeout slightly more configurable
(at build time) and fix a bug I found in the messaging retries. Would
you be happy to test that out?

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="003828.html">[squid-users] 3.5.5 https problem
</A></li>
	<LI>Next message (by thread): <A HREF="003833.html">[squid-users] when using a search box on een website my hole internet explorer freezes incuding earlier opend tabs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3827">[ date ]</a>
              <a href="thread.html#3827">[ thread ]</a>
              <a href="subject.html#3827">[ subject ]</a>
              <a href="author.html#3827">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
