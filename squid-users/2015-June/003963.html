<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Lag Time Displaying SVG files
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Lag%20Time%20Displaying%20SVG%20files&In-Reply-To=%3C006901d0a2cf%24598d3220%240ca79660%24%40com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003950.html">
   <LINK REL="Next"  HREF="003957.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Lag Time Displaying SVG files</H1>
    <B>JR Swartz</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Lag%20Time%20Displaying%20SVG%20files&In-Reply-To=%3C006901d0a2cf%24598d3220%240ca79660%24%40com%3E"
       TITLE="[squid-users] Lag Time Displaying SVG files">jrswartz at ncswi.com
       </A><BR>
    <I>Tue Jun  9 16:14:23 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="003950.html">[squid-users] Lag Time Displaying SVG files
</A></li>
        <LI>Next message (by thread): <A HREF="003957.html">[squid-users] Upload issue with squid 3.5.5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3963">[ date ]</a>
              <a href="thread.html#3963">[ thread ]</a>
              <a href="subject.html#3963">[ subject ]</a>
              <a href="author.html#3963">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I traced the problem to the persistent_request_timeout variable.  Once I set this from 2 Min to 10 Seconds, it resolved the issue.



==============================
J.R. Swartz
Northern Computer Service, LLC
Owner

8821 Hwy 47 East
Woodruff, WI 54568
715.358.9806	
Email:  <A HREF="https://lists.squid-cache.org/listinfo/squid-users">jrswartz at ncswi.com</A>
Web Site:  www.ncswi.com




-----Original Message-----
From: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On Behalf Of Amos Jeffries
Sent: Monday, June 08, 2015 6:45 PM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Lag Time Displaying SVG files

On 9/06/2015 9:21 a.m., JR Swartz wrote:
&gt;<i> We have a customer that uses Squid (3.x).  When viewing the 
</I>&gt;<i> www.fmcdealer.com web site for their business, standard web pages load 
</I>&gt;<i> as expected.  However, when drilling down into the wiring diagrams 
</I>&gt;<i> (which are in SVG format), there is exactly a 2 minute (120 sec) delay 
</I>&gt;<i> before the diagrams are displayed.
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> We've tested this on several svg diagrams and, regardless of the size 
</I>&gt;<i> of the diagram, the delay is exactly 2 minutes.
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> Additionally, we've run tcpdump -vv and it appears there is no traffic 
</I>&gt;<i> during this 2 minute period.
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> We're hoping someone has seen this or the 120 second delay may trigger 
</I>&gt;<i> someone's memory about this issue?
</I>
If the end of the server reply message has not yet been received then this is not a Squid problem.


It may be server processing delays, but given that exact timing it is more likely to be a TCP timeout on the connection.


If the server emits a message without Content-Length or Transfer-Encoding headers then end-of-message is the TCP connection close signal.
 If the server fails to close Squid is left waiting for more bytes which will never arrive, until the TCP networking stack times out and closes it. Then Squid relays the end-of-message signal to the client and everything works again.

Amos

_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="003950.html">[squid-users] Lag Time Displaying SVG files
</A></li>
	<LI>Next message (by thread): <A HREF="003957.html">[squid-users] Upload issue with squid 3.5.5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3963">[ date ]</a>
              <a href="thread.html#3963">[ thread ]</a>
              <a href="subject.html#3963">[ subject ]</a>
              <a href="author.html#3963">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
