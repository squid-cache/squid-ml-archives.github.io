<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] spotify blocked by squid
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20spotify%20blocked%20by%20squid&In-Reply-To=%3CCAPnpmpmpS7rp%3D7xZmCb-TwL9dnTcL_1tQc7NSxB5jh08sOsPZQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003986.html">
   <LINK REL="Next"  HREF="003987.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] spotify blocked by squid</H1>
    <B>Jonathan Filogna</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20spotify%20blocked%20by%20squid&In-Reply-To=%3CCAPnpmpmpS7rp%3D7xZmCb-TwL9dnTcL_1tQc7NSxB5jh08sOsPZQ%40mail.gmail.com%3E"
       TITLE="[squid-users] spotify blocked by squid">jonathan.filogna at tasso.com.ar
       </A><BR>
    <I>Wed Jun 10 17:39:06 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="003986.html">[squid-users] Noticeable difference in DNS Service times after upgrade
</A></li>
        <LI>Next message (by thread): <A HREF="003987.html">[squid-users] spotify blocked by squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3985">[ date ]</a>
              <a href="thread.html#3985">[ thread ]</a>
              <a href="subject.html#3985">[ subject ]</a>
              <a href="author.html#3985">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all, it's me  again, just a simple question

I've configured an squid 2.7 with ntlm auth and i want to let some AD users
to listen spotify

My problem is that spotify streaming is being blocked by squid to this
group and idk why. Maybe another syntax problem?

here's my squid.conf


###########################SQUID.CONF

visible_hostname prana

auth_param ntlm program /usr/bin/ntlm_auth
--helper-protocol=squid-2.5-ntlmssp auth_param ntlm children 5
auth_param ntlm keep_alive on


external_acl_type ntlm_group ttl=3600 children=100 %LOGIN /usr/lib/squid/
wbinfo_group.pl


acl porno url_regex -i &quot;/etc/squid/listas/porno.lst&quot;
acl permitidos dstdomain -i &quot;/etc/squid/listas/permitidos.lst&quot;
acl directo url_regex -i &quot;/etc/squid/listas/direct.lst&quot;
acl vidyaud rep_mime_type -i &quot;/etc/squid/listas/blockstr.lst&quot;
acl useragent browser -i &quot;/etc/squid/blockejec/browser.lst&quot;
acl blockstr req_mime_type -i &quot;/etc/squid/blockejec/blocstreaming.lst&quot;
acl blockejec url_regex -i &quot;/etc/squid/blockejec/blockejec.lst&quot;
acl audyvid req_mime_type -i &quot;/etc/squid/listas/blockstr.lst&quot;
acl blockstr2 rep_mime_type -i &quot;/etc/squid/blockejec/blocstreaming.lst&quot;
acl destinolimitado dstdomain -i &quot;/etc/squid/listas/limitado.lst&quot;

acl all src all
acl CONNECT method CONNECT
acl manager proto cache_object
acl webserver src 192.168.8.121/255.255.255.255
http_access allow manager webserver
http_reply_access allow manager webserver
http_access deny manager

http_access deny porno all
http_reply_access deny porno all
acl uservipstr external ntlm_group &quot;/etc/squid/listas/uservipstr.lst&quot;

http_access deny blockejec uservipstr

http_access allow uservipstr
http_reply_access allow uservipstr

http_access deny blockstr !uservipstr all
http_reply_access deny blockstr !uservipstr all
http_access deny blockstr2 !uservipstr all
http_reply_access deny blockstr2 !uservipstr all
http_access deny audyvid !uservipstr all
http_access deny vidyaud !uservipstr all
http_reply_access deny audyvid !uservipstr all
http_reply_access deny vidyaud !uservipstr all

acl SSL_ports port 443 # https
acl SSL_ports port 563 # snews
acl SSL_ports port 873 # rsync
acl Safe_ports port 80 # http
acl Safe_ports port 21 # ftp
acl Safe_ports port 443 # https
acl Safe_ports port 70 # gopher
acl Safe_ports port 210 # wais
acl Safe_ports port 1025-65535 # unregistered ports
acl Safe_ports port 280 # http-mgmt
acl Safe_ports port 488 # gss-http
acl Safe_ports port 591 # filemaker
acl Safe_ports port 777 # multiling http
acl Safe_ports port 631 # cups
acl Safe_ports port 873 # rsync
acl Safe_ports port 901 # SWAT
acl Safe_ports port 78 69 #Spotify



# Deny requests to unknown ports
#http_access allow Safe_ports
http_access deny !Safe_ports
# Deny CONNECT to other than SSL ports
http_access deny CONNECT !SSL_ports

acl ntlm proxy_auth REQUIRED
http_access allow ntlm
http_reply_access allow ntlm
http_access deny all
http_reply_access deny all

###########

thank you all

-- 
Jonathan Filogna
It Senior
Tasso SRL
4702 1910
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150610/a7eaf10d/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150610/a7eaf10d/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="003986.html">[squid-users] Noticeable difference in DNS Service times after upgrade
</A></li>
	<LI>Next message (by thread): <A HREF="003987.html">[squid-users] spotify blocked by squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3985">[ date ]</a>
              <a href="thread.html#3985">[ thread ]</a>
              <a href="subject.html#3985">[ subject ]</a>
              <a href="author.html#3985">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
