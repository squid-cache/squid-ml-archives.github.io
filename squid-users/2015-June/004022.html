<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] cgi-bin
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20cgi-bin&In-Reply-To=%3C557A3C6D.70505%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003995.html">
   <LINK REL="Next"  HREF="003997.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] cgi-bin</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20cgi-bin&In-Reply-To=%3C557A3C6D.70505%40treenet.co.nz%3E"
       TITLE="[squid-users] cgi-bin">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Jun 12 01:57:01 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="003995.html">[squid-users] cgi-bin
</A></li>
        <LI>Next message (by thread): <A HREF="003997.html">[squid-users] Quick peek-splice clarification
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4022">[ date ]</a>
              <a href="thread.html#4022">[ thread ]</a>
              <a href="subject.html#4022">[ subject ]</a>
              <a href="author.html#4022">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/06/2015 8:55 a.m., Marcel Fossua wrote:
&gt;<i> Hi Mate 
</I>&gt;<i> I have this set on my squid.conf 
</I>&gt;<i> but seems that this is obsolete so how can nicely convert that for that
</I>&gt;<i> version is true that log suggest 
</I>&gt;<i> always_direct 
</I>&gt;<i> 
</I>&gt;<i> hierarchy_stoplist cgi-bin ? .js .jsp
</I>&gt;<i> acl QUERY urlpath_regex cgi-bin \? .js .jsp
</I>&gt;<i> no_cache deny QUERY
</I>
Youch.

&gt;<i> 
</I>&gt;<i> 2015/06/10 20:53:42| ERROR: Directive 'hierarchy_stoplist' is obsolete.
</I>&gt;<i> 2015/06/10 20:53:42| hierarchy_stoplist : Remove this line. Use
</I>&gt;<i> always_direct or cache_peer_access ACLs instead if you need to prevent
</I>&gt;<i> cache_peer use.
</I>&gt;<i> 
</I>&gt;<i> just to confirm this is the right way ??
</I>&gt;<i> always_direct cgi-bin ? .js .jsp
</I>&gt;<i> acl QUERY urlpath_regex cgi-bin \? .js .jsp
</I>&gt;<i> no_cache deny QUERY
</I>

No. Those regex patterns are quite badly broken.

If I make a few assumtions about what those lines are supposed to means
I guess you are wanting this:

 acl QUERY urlpath_regex /cgi-bin/ \? \.jsp?
 cache deny QUERY
 always_direct allow QUERY


Although. I question what you think it does, and why you think you need
it at all.

Modern Squid are perfectly capable of caching dynamic content. And there
does not seems to be any obvious reason for avoiding requesting it
through a trusted peer proxy if other traffic is fine going there.

In other words, unless you have good reason for keeping it, you can
erase all the above lines. Just make sure you have the refresh_pattern
rule for safe storage of cgi-bin responses just above the '.'
refresh_pattern:
  refresh_pattern -i (/cgi-bin/|\?) 0 0% 0

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="003995.html">[squid-users] cgi-bin
</A></li>
	<LI>Next message (by thread): <A HREF="003997.html">[squid-users] Quick peek-splice clarification
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4022">[ date ]</a>
              <a href="thread.html#4022">[ thread ]</a>
              <a href="subject.html#4022">[ subject ]</a>
              <a href="author.html#4022">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
