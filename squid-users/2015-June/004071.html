<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] strip_query_terms parameter
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20strip_query_terms%20parameter&In-Reply-To=%3C415448635.3707725.1434432670083.JavaMail.yahoo%40mail.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004048.html">
   <LINK REL="Next"  HREF="004074.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] strip_query_terms parameter</H1>
    <B>Mohammad Shakir</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20strip_query_terms%20parameter&In-Reply-To=%3C415448635.3707725.1434432670083.JavaMail.yahoo%40mail.yahoo.com%3E"
       TITLE="[squid-users] strip_query_terms parameter">shakirgil at yahoo.com
       </A><BR>
    <I>Tue Jun 16 05:31:10 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="004048.html">[squid-users] strip_query_terms parameter
</A></li>
        <LI>Next message (by thread): <A HREF="004074.html">[squid-users] strip_query_terms parameter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4071">[ date ]</a>
              <a href="thread.html#4071">[ thread ]</a>
              <a href="subject.html#4071">[ subject ]</a>
              <a href="author.html#4071">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We are using store_id_program to cache CDN objects due to (301 status) we can not catch the actual url.

Is there any other procedure to override this problem.

given below is our configuration for store_id_program


acl gotostoreid dstdomain .filehippo.com
acl banned_methods method PUT POST PURGE
acl norewrite url_regex -i \.(youtube|googlevideo)\.com\/videoplayback.*redirect_counter=1.*cms_redirect=yes.* \.(youtube|googlevideo)\.com\/videoplayback.*cms_redirect=yes.*redirect_counter=1.*

store_id_bypass on

store_id_program /etc/squid/storeid.pl
store_id_children 40 startup=10 idle=1 concurrency=0
store_id_access allow gotostoreid
store_id_access deny norewrite
store_id_access deny banned_methods
store_id_access deny all




On Saturday, June 13, 2015 11:39 AM, Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt; wrote:
On 13/06/2015 5:43 p.m., Mohammad Shakir wrote:
&gt;<i> We are using squid 3.4.9 on centos 64bit and getting following issue.
</I>&gt;<i> 
</I>&gt;<i> In access.log we can not see the complete log of filehippo.com see the access.log
</I>&gt;<i> 
</I>&gt;<i> TCP_MISS/301 336 GET <A HREF="http://filehippo.com/download/file/f9efedf505ee8f42fcaab2569982d439e08c4e88dd569e7c2e68efed55ace44e/">http://filehippo.com/download/file/f9efedf505ee8f42fcaab2569982d439e08c4e88dd569e7c2e68efed55ace44e/</A>
</I>&gt;<i> 
</I>&gt;<i> But when we pause the download and resume it then access.log show us.
</I>&gt;<i> 
</I>&gt;<i> TCP_MISS_ABORTED/206 344150 GET <A HREF="http://fs32.filehippo.com/4054/c6334025422b451f98163c369aaf3eeb/vlc-2.2.1-win32.exe">http://fs32.filehippo.com/4054/c6334025422b451f98163c369aaf3eeb/vlc-2.2.1-win32.exe</A>
</I>&gt;<i> 
</I>
If I am interpreting those log lines and what you are saying correctly
then the top log line is the fetch, which redirects (301 status) to the
second URL.

Either the download was fetched with Range header and the
ABORTED/disconnection is how Squid receives the &quot;pause&quot; action from the
client, (thats normal)
OR
the resume uses a Range request to fetch the incomplete part of the
object. The client then aborts with it still incomplete for some unknown
reason. (thats strange)

Its not clear what the problem is you speak of. What more can you say
about it?



&gt;<i> To get complete url log we switch off this parameter.
</I>&gt;<i> 
</I>&gt;<i> strip_query_terms off
</I>&gt;<i> 
</I>&gt;<i> But getting the same issue.
</I>
Those log lines contain no query-string. You can identify lines affected
by that parameter because they all end with a '?' in the log when its
turned on.

Amos

_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="004048.html">[squid-users] strip_query_terms parameter
</A></li>
	<LI>Next message (by thread): <A HREF="004074.html">[squid-users] strip_query_terms parameter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4071">[ date ]</a>
              <a href="thread.html#4071">[ thread ]</a>
              <a href="subject.html#4071">[ subject ]</a>
              <a href="author.html#4071">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
