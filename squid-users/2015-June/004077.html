<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 3.5.5 fails to build for Solaris
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203.5.5%20fails%20to%20build%20for%20Solaris&In-Reply-To=%3C5580A781.5040804%40oracle.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004080.html">
   <LINK REL="Next"  HREF="004079.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 3.5.5 fails to build for Solaris</H1>
    <B>Stacy Yeh</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203.5.5%20fails%20to%20build%20for%20Solaris&In-Reply-To=%3C5580A781.5040804%40oracle.com%3E"
       TITLE="[squid-users] Squid 3.5.5 fails to build for Solaris">stacy.yeh at oracle.com
       </A><BR>
    <I>Tue Jun 16 22:47:29 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="004080.html">[squid-users] kid1| WARNING: 1 swapin MD5 mismatches 3.5
</A></li>
        <LI>Next message (by thread): <A HREF="004079.html">[squid-users] Squid 3.5.5 fails to build for Solaris
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4077">[ date ]</a>
              <a href="thread.html#4077">[ thread ]</a>
              <a href="subject.html#4077">[ subject ]</a>
              <a href="author.html#4077">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

I am attempting to update from Squid 3.1.23 to the latest version 3.5.5 
for Solaris and am running into the following build error. From my 
understanding (correct me if I'm wrong), the issue is that the link is 
trying to link against the 32-bit version of libtool, although a 64-bit 
version also exists.

[snip]
libtool: link: /usr/gcc/4.8/bin/g++ -m64 -Wall -Wpointer-arith 
-Wwrite-strings -Wcomments -Wshadow -Werror -pipe -D_REENTRANT -pthreads 
-D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -g -O2 -march=native 
-std=c++11 -m64 -o basic_ncsa_auth basic_ncsa_auth.o crypt_md5.o -m64  
../../../lib/.libs/libmisccontainers.a 
../../../lib/.libs/libmiscencoding.a 
../../../compat/.libs/libcompat-squid.a -lcrypt -lmd5 -lm -lresolv -pthreads
ld: warning: file ../../../lib/.libs/libmiscencoding.a(md5.o): wrong ELF 
class: ELFCLASS32
Undefined                       first referenced
  symbol                             in file
rfc1738_unescape                    basic_ncsa_auth.o
SquidMD5Update                      crypt_md5.o
SquidMD5Init                        crypt_md5.o
SquidMD5Final                       crypt_md5.o
ld: fatal: symbol referencing errors
collect2: error: ld returned 1 exit status
make[4]: *** [basic_ncsa_auth] Error 1
make[4]: Leaving directory 
`/builds/skyeh/squid-19581055-s12/components/squid/build/amd64/helpers/basic_auth/NCSA'
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory 
`/builds/skyeh/squid-19581055-s12/components/squid/build/amd64/helpers/basic_auth'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory 
`/builds/skyeh/squid-19581055-s12/components/squid/build/amd64/helpers'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory 
`/builds/skyeh/squid-19581055-s12/components/squid/build/amd64'
gmake: *** 
[/builds/skyeh/squid-19581055-s12/components/squid/build/amd64/.built] 
Error 2


Any suggestions on how to fix this? For what it's worth, here are the 
configure options I am using:

CONFIGURE_OPTIONS += --enable-arp-acl
CONFIGURE_OPTIONS += 
--enable-auth-basic='DB,NCSA,LDAP,PAM,getpwnam,MSNT-multi-domain,POP3,SMB,SASL'
CONFIGURE_OPTIONS += --enable-cache-digests
CONFIGURE_OPTIONS += --enable-carp
CONFIGURE_OPTIONS += --enable-coss-aio-ops
CONFIGURE_OPTIONS += --enable-delay-pools
CONFIGURE_OPTIONS += --enable-auth-digest='LDAP'
CONFIGURE_OPTIONS += 
--enable-external-acl-helpers='file_userip,unix_group,LDAP_group,wbinfo_group'
CONFIGURE_OPTIONS += --enable-follow-x-forwarded-for
CONFIGURE_OPTIONS += --enable-forward-log
CONFIGURE_OPTIONS += --enable-forw-via-db
CONFIGURE_OPTIONS += --enable-htcp
CONFIGURE_OPTIONS += --enable-icmp
CONFIGURE_OPTIONS += --enable-large-cache-files
CONFIGURE_OPTIONS += --enable-multicast-miss
CONFIGURE_OPTIONS += --enable-auth-negotiate='kerberos'
CONFIGURE_OPTIONS += --enable-auth-ntlm='smb_lm,fake'
CONFIGURE_OPTIONS += --enable-ntlm-fail-open
CONFIGURE_OPTIONS += --enable-removal-policies='heap,lru'
CONFIGURE_OPTIONS += --enable-snmp
CONFIGURE_OPTIONS += --enable-ssl
CONFIGURE_OPTIONS += --enable-storeio='aufs,diskd,ufs'
CONFIGURE_OPTIONS += --enable-x-accelerator-vary
CONFIGURE_OPTIONS += --with-aio
CONFIGURE_OPTIONS += --with-aufs-threads=8
CONFIGURE_OPTIONS += --with-large-files
CONFIGURE_OPTIONS += --with-build-environment=POSIX_V6_ILP32_OFFBIG
CONFIGURE_OPTIONS += --with-pthreads


Best,
Stacy Yeh

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="004080.html">[squid-users] kid1| WARNING: 1 swapin MD5 mismatches 3.5
</A></li>
	<LI>Next message (by thread): <A HREF="004079.html">[squid-users] Squid 3.5.5 fails to build for Solaris
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4077">[ date ]</a>
              <a href="thread.html#4077">[ thread ]</a>
              <a href="subject.html#4077">[ subject ]</a>
              <a href="author.html#4077">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
