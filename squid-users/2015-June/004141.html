<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid to ask for, but not require, authentication.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20to%20ask%20for%2C%20but%20not%20require%2C%20authentication.&In-Reply-To=%3C5586AD19.4060505%40crowie.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004285.html">
   <LINK REL="Next"  HREF="004142.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid to ask for, but not require, authentication.</H1>
    <B>Graham</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20to%20ask%20for%2C%20but%20not%20require%2C%20authentication.&In-Reply-To=%3C5586AD19.4060505%40crowie.net%3E"
       TITLE="[squid-users] Squid to ask for, but not require, authentication.">gcsquid-users at crowie.net
       </A><BR>
    <I>Sun Jun 21 12:24:57 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="004285.html">[squid-users] assertion failed: comm.cc:178: &quot;fd_table[conn-&gt;fd].halfClosedReader != NULL&quot;
</A></li>
        <LI>Next message (by thread): <A HREF="004142.html">[squid-users] Squid to ask for, but not require, authentication.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4141">[ date ]</a>
              <a href="thread.html#4141">[ thread ]</a>
              <a href="subject.html#4141">[ subject ]</a>
              <a href="author.html#4141">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am looking for a way to configure Squid to ask for (and check) 
authentication using LDAP, but to proceed if there is no auth 
information provided.

I have been using DansGuardian for a while with Squid authenticating and 
then getting DansGuardian to filter based on the username that Squid has 
authenticated. The browsers talk directly to DansGuardian, which talks 
to Squid, which does the work over the 'net.

I am now trying to add an android device - which has some apps that 
don't ask the user for a login/password (although they do talk to the 
proxy) and therefore they fail to connect with a 407 error. I have 
modified DansGuardian to allow just this one IP to work without 
authentication, but Squid requires the auth and denies the requests. If 
I make Squid more permissive (remove the auth config) then DansGuardian 
works with that IP address, but will then block all other IP addresses 
as Squid hasn't authenticated anyone. Note that I can't do IP 
authentication from Squid because all requests come from the 
DansGuardian IP (which happens to be localhost) and it can't tell which 
ones to authenticate and which to allow.

Basically what I think I want is for DansGuardian to make the decisions 
on whether to allow the connection, and Squid to perform the check of 
the authentication via LDAP and to allow the connection if the auth is 
OK, or is not present... and to deny the connection if the auth is 
present but incorrect.


Is this possible?

Or am I going about this in the wrong way?


Thanks

GC

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="004285.html">[squid-users] assertion failed: comm.cc:178: &quot;fd_table[conn-&gt;fd].halfClosedReader != NULL&quot;
</A></li>
	<LI>Next message (by thread): <A HREF="004142.html">[squid-users] Squid to ask for, but not require, authentication.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4141">[ date ]</a>
              <a href="thread.html#4141">[ thread ]</a>
              <a href="subject.html#4141">[ subject ]</a>
              <a href="author.html#4141">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
