<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid to ask for, but not require, authentication.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20to%20ask%20for%2C%20but%20not%20require%2C%20authentication.&In-Reply-To=%3C5586AF7B.30505%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004141.html">
   <LINK REL="Next"  HREF="004157.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid to ask for, but not require, authentication.</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20to%20ask%20for%2C%20but%20not%20require%2C%20authentication.&In-Reply-To=%3C5586AF7B.30505%40treenet.co.nz%3E"
       TITLE="[squid-users] Squid to ask for, but not require, authentication.">squid3 at treenet.co.nz
       </A><BR>
    <I>Sun Jun 21 12:35:07 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="004141.html">[squid-users] Squid to ask for, but not require, authentication.
</A></li>
        <LI>Next message (by thread): <A HREF="004157.html">[squid-users] Squid to ask for, but not require, authentication.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4142">[ date ]</a>
              <a href="thread.html#4142">[ thread ]</a>
              <a href="subject.html#4142">[ subject ]</a>
              <a href="author.html#4142">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 22/06/2015 12:24 a.m., Graham wrote:
&gt;<i> I am looking for a way to configure Squid to ask for (and check)
</I>&gt;<i> authentication using LDAP, but to proceed if there is no auth
</I>&gt;<i> information provided.
</I>
Not possible. The process of asking for auth sends a reply to the client
request. Once that happens there is nothing further possible.

You can check for auth and continue if its missing, but when doing so
cannot ask the client to send any credentials. A secure client will not
send credentials unless asked...

&gt;<i> 
</I>&gt;<i> I have been using DansGuardian for a while with Squid authenticating and
</I>&gt;<i> then getting DansGuardian to filter based on the username that Squid has
</I>&gt;<i> authenticated. The browsers talk directly to DansGuardian, which talks
</I>&gt;<i> to Squid, which does the work over the 'net.
</I>&gt;<i> 
</I>&gt;<i> I am now trying to add an android device - which has some apps that
</I>&gt;<i> don't ask the user for a login/password (although they do talk to the
</I>&gt;<i> proxy) and therefore they fail to connect with a 407 error. I have
</I>&gt;<i> modified DansGuardian to allow just this one IP to work without
</I>&gt;<i> authentication, but Squid requires the auth and denies the requests. If
</I>&gt;<i> I make Squid more permissive (remove the auth config) then DansGuardian
</I>&gt;<i> works with that IP address, but will then block all other IP addresses
</I>&gt;<i> as Squid hasn't authenticated anyone. Note that I can't do IP
</I>&gt;<i> authentication from Squid because all requests come from the
</I>&gt;<i> DansGuardian IP (which happens to be localhost) and it can't tell which
</I>&gt;<i> ones to authenticate and which to allow.
</I>
You should be able to use something like the User-Agent header
(&quot;browser&quot; regex ACL type) to bypass the auth requirement on a
per-request basis. This has to be done for many Java applications, for
example.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="004141.html">[squid-users] Squid to ask for, but not require, authentication.
</A></li>
	<LI>Next message (by thread): <A HREF="004157.html">[squid-users] Squid to ask for, but not require, authentication.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4142">[ date ]</a>
              <a href="thread.html#4142">[ thread ]</a>
              <a href="subject.html#4142">[ subject ]</a>
              <a href="author.html#4142">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
