<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Reverse Proxy translate public domain to internal path
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Reverse%20Proxy%20translate%20public%20domain%20to%20internal%0A%20path&In-Reply-To=%3C55895F09.5040809%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004173.html">
   <LINK REL="Next"  HREF="004175.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Reverse Proxy translate public domain to internal path</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Reverse%20Proxy%20translate%20public%20domain%20to%20internal%0A%20path&In-Reply-To=%3C55895F09.5040809%40treenet.co.nz%3E"
       TITLE="[squid-users] Reverse Proxy translate public domain to internal path">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Jun 23 13:28:41 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="004173.html">[squid-users] Reverse Proxy translate public domain to internal path
</A></li>
        <LI>Next message (by thread): <A HREF="004175.html">[squid-users] Reverse Proxy translate public domain to internal	path
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4174">[ date ]</a>
              <a href="thread.html#4174">[ thread ]</a>
              <a href="subject.html#4174">[ subject ]</a>
              <a href="author.html#4174">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 24/06/2015 12:32 a.m., sqca wrote:
&gt;<i> Hi folks,
</I>&gt;<i> 
</I>&gt;<i> I have started to use Squid 3.5.5 to implement a reverse proxy for multiple
</I>&gt;<i> webservers. Some of them are publishing multiple websites on the same port
</I>&gt;<i> so I need to do the following:
</I>&gt;<i> Publish &quot;site1.example.com&quot; via Squid which points at 192.168.0.1:8080/test
</I>&gt;<i> Publish &quot;site.example.com&quot; via Squid which points at
</I>&gt;<i> 192.168.0.1:8080/production
</I>&gt;<i> and so on.
</I>&gt;<i> 
</I>&gt;<i> What do I need to do to accomplish this? Is it really necessary to use the
</I>&gt;<i> url_rewrite_program directive?
</I>
For this. Yes. The rewrite (*not* redirect) is necessary to change the
path segment. The rest is normal for virtual hosting.

However, its really a bad idea to do it this way (with /path
differences) in the first place.

Ideally you have the server doing virtual hosting for the two domain
names and using port 80 as well. Squid then just passes the requests
traffic to the right server and the server itself does not then have to
care about getting port and path etc right in every URL reference the
cotent contains, just uses relative URLs. A site like that can even be
proxied for HTTPS quite easily.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="004173.html">[squid-users] Reverse Proxy translate public domain to internal path
</A></li>
	<LI>Next message (by thread): <A HREF="004175.html">[squid-users] Reverse Proxy translate public domain to internal	path
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4174">[ date ]</a>
              <a href="thread.html#4174">[ thread ]</a>
              <a href="subject.html#4174">[ subject ]</a>
              <a href="author.html#4174">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
