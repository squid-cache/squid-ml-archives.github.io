<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] acl for redirect
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20acl%20for%20redirect&In-Reply-To=%3C5589E5C0.4070307%40afo.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004179.html">
   <LINK REL="Next"  HREF="004185.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] acl for redirect</H1>
    <B>Mike</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20acl%20for%20redirect&In-Reply-To=%3C5589E5C0.4070307%40afo.net%3E"
       TITLE="[squid-users] acl for redirect">mcsnv96 at afo.net
       </A><BR>
    <I>Tue Jun 23 23:03:28 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="004179.html">[squid-users] Doubt about private ip &quot;leaking&quot;
</A></li>
        <LI>Next message (by thread): <A HREF="004185.html">[squid-users] acl for redirect
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4181">[ date ]</a>
              <a href="thread.html#4181">[ thread ]</a>
              <a href="subject.html#4181">[ subject ]</a>
              <a href="author.html#4181">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We have a server setup using squid 3.5 and e2guardian (newer branch of 
dansguardian), the issue is now google has changed a few things around 
and google is no longer filtered which is not acceptable. We already 
have the browser settings for SSL Proxy set to our server, and squid has 
ssl-bump enabled and working. Previously there was enough unsecure 
content on Google that the filtering was still working, but now google 
has gone 100% encrypted meaning it is 100% unfiltered. What is happening 
is it is creating an ssl tunnel (for lack of a better term) between 
their server and the browser, so all squid sees is the connection to 
www.google.com, and after that it is tunneled and not recognized by 
squid or e2guardian at all.

I found a few options online that was used with older squid versions but 
nothing is working with squid 3.5... Looking for something like this:

acl google dstdomain .google.com
deny_info <A HREF="http://www.google.com/webhp?nord=1">http://www.google.com/webhp?nord=1</A> google
http_access deny google

Essentially want to have squid take all regular requests for google.com 
and send/relay it to the unsecured page at 
<A HREF="http://www.google.com/webhp?nord=1">http://www.google.com/webhp?nord=1</A> which allows e2guardian to properly 
filter. With the current settings though, it goes to the squid access 
denied page.

Mike

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="004179.html">[squid-users] Doubt about private ip &quot;leaking&quot;
</A></li>
	<LI>Next message (by thread): <A HREF="004185.html">[squid-users] acl for redirect
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4181">[ date ]</a>
              <a href="thread.html#4181">[ thread ]</a>
              <a href="subject.html#4181">[ subject ]</a>
              <a href="author.html#4181">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
