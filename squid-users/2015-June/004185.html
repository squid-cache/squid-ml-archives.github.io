<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] acl for redirect
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20acl%20for%20redirect&In-Reply-To=%3C558A964C.9070208%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004181.html">
   <LINK REL="Next"  HREF="004218.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] acl for redirect</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20acl%20for%20redirect&In-Reply-To=%3C558A964C.9070208%40treenet.co.nz%3E"
       TITLE="[squid-users] acl for redirect">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Jun 24 11:36:44 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="004181.html">[squid-users] acl for redirect
</A></li>
        <LI>Next message (by thread): <A HREF="004218.html">[squid-users] acl for redirect
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4185">[ date ]</a>
              <a href="thread.html#4185">[ thread ]</a>
              <a href="subject.html#4185">[ subject ]</a>
              <a href="author.html#4185">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 24/06/2015 11:03 a.m., Mike wrote:
&gt;<i> We have a server setup using squid 3.5 and e2guardian (newer branch of
</I>&gt;<i> dansguardian), the issue is now google has changed a few things around
</I>&gt;<i> and google is no longer filtered which is not acceptable. We already
</I>&gt;<i> have the browser settings for SSL Proxy set to our server, and squid has
</I>&gt;<i> ssl-bump enabled and working. Previously there was enough unsecure
</I>&gt;<i> content on Google that the filtering was still working, but now google
</I>&gt;<i> has gone 100% encrypted meaning it is 100% unfiltered.
</I>
Maybe, maybe not.

&gt;<i> What is happening
</I>&gt;<i> is it is creating an ssl tunnel (for lack of a better term) between
</I>
No. That is the correct and official term for what they are doing. And
&quot;CONNECT tunnel&quot; is the full phrase / name for the particular method of
tunnel creation.


&gt;<i> their server and the browser, so all squid sees is the connection to
</I>&gt;<i> www.google.com, and after that it is tunneled and not recognized by
</I>&gt;<i> squid or e2guardian at all.
</I>
BUT ... you said you were SSL-Bump'ing. Which means you are decrypting
such tunnels to filter the content inside them.

So what is the problem? is your method of bumping not decrypting the
Google traffic for Squid access controls and helpers to filter?

Note that DansGuardian and e2guardian being independent HTTP proxies are
not party to that SSL-Bump decrypted content inside Squid. ONly Squid
internals and ICAP/eCAP services have access to it.

&gt;<i> 
</I>&gt;<i> I found a few options online that was used with older squid versions but
</I>&gt;<i> nothing is working with squid 3.5... Looking for something like this:
</I>&gt;<i> 
</I>&gt;<i> acl google dstdomain .google.com
</I>&gt;<i> deny_info <A HREF="http://www.google.com/webhp?nord=1">http://www.google.com/webhp?nord=1</A> google
</I>
As you said Google have gone 100% HTTPS. URLs beginning with <A HREF="http://">http://</A> are
not HTTPS nor accepted there anymore. If used they just get a 30x
redirect to an <A HREF="https://">https://</A> URL.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="004181.html">[squid-users] acl for redirect
</A></li>
	<LI>Next message (by thread): <A HREF="004218.html">[squid-users] acl for redirect
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4185">[ date ]</a>
              <a href="thread.html#4185">[ thread ]</a>
              <a href="subject.html#4185">[ subject ]</a>
              <a href="author.html#4185">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
