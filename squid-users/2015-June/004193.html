<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Questions Regarding Transparent Proxy, HTTPS,	and ssl_bump
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Questions%20Regarding%20Transparent%20Proxy%2C%20HTTPS%2C%0A%09and%20ssl_bump&In-Reply-To=%3CCAM3U7Exq-1o%2BvaQvQYwJUQe%2BtHuBvyvaSPQ_qnSh4Ypx2PeW4g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004191.html">
   <LINK REL="Next"  HREF="004194.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Questions Regarding Transparent Proxy, HTTPS,	and ssl_bump</H1>
    <B>Tom Mowbray</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Questions%20Regarding%20Transparent%20Proxy%2C%20HTTPS%2C%0A%09and%20ssl_bump&In-Reply-To=%3CCAM3U7Exq-1o%2BvaQvQYwJUQe%2BtHuBvyvaSPQ_qnSh4Ypx2PeW4g%40mail.gmail.com%3E"
       TITLE="[squid-users] Questions Regarding Transparent Proxy, HTTPS,	and ssl_bump">tmowbray at dalabs.com
       </A><BR>
    <I>Wed Jun 24 15:41:52 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="004191.html">[squid-users] Squid 3.5.3 with SSL not working
</A></li>
        <LI>Next message (by thread): <A HREF="004194.html">[squid-users] Questions Regarding Transparent Proxy, HTTPS, and ssl_bump
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4193">[ date ]</a>
              <a href="thread.html#4193">[ thread ]</a>
              <a href="subject.html#4193">[ subject ]</a>
              <a href="author.html#4193">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Squid 3.5.5

I seem to have some confusion about how acl lists are processed in
squid.conf regarding the handling of SSL (HTTPS) traffic, attempting to use
ssl_bump directives with transparent proxy.

Based on available documentation, I believe my squid.conf is correct,
however it never seems to actually behave as expected.

I define the SSL port, as usual:

acl SSL_ports port 443

But here's where my confusion lies... Many state to place the following
line above the ssl_bump configuration lines:

http_access allow SSL_ports

However when I do this, it appears to simply stop processing any other
rules and allows ALL https traffic through the proxy (which is actually how
I'd expect a standard ACL list to operate, but then how do I actually
filter the traffic though our content-based ACL lists?).  If I put the
above line below the ssl_bump configuration options in my squid.conf, then
it appears to BUMP all, even though I've told the config to SPLICE all
https traffic, which doesn't work for our deployment.

So, does squid actually continue to process the https traffic using the
ssl_bump rules if the &quot;http_access allow SSL_ports&quot; line is placed above it
in the configuration?

I should note that we've been able to get filtering to work correctly when
using our configuration in NON-transparent mode, however our goal is get
this functionality working as a transparent proxy.  We're unable to load
our self-signed cert onto client machines that will be accessing the proxy,
so using the &quot;bump&quot; or man-in-the-middle style https filtering isn't a
viable option for us.

Any help or advice is appreciated!

Thanks,

Tom
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150624/fe000672/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150624/fe000672/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="004191.html">[squid-users] Squid 3.5.3 with SSL not working
</A></li>
	<LI>Next message (by thread): <A HREF="004194.html">[squid-users] Questions Regarding Transparent Proxy, HTTPS, and ssl_bump
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4193">[ date ]</a>
              <a href="thread.html#4193">[ thread ]</a>
              <a href="subject.html#4193">[ subject ]</a>
              <a href="author.html#4193">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
