<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Questions Regarding Transparent Proxy, HTTPS, and ssl_bump
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Questions%20Regarding%20Transparent%20Proxy%2C%20HTTPS%2C%0A%20and%20ssl_bump&In-Reply-To=%3C558AD42A.30705%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004193.html">
   <LINK REL="Next"  HREF="004198.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Questions Regarding Transparent Proxy, HTTPS, and ssl_bump</H1>
    <B>Yuri Voinov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Questions%20Regarding%20Transparent%20Proxy%2C%20HTTPS%2C%0A%20and%20ssl_bump&In-Reply-To=%3C558AD42A.30705%40gmail.com%3E"
       TITLE="[squid-users] Questions Regarding Transparent Proxy, HTTPS, and ssl_bump">yvoinov at gmail.com
       </A><BR>
    <I>Wed Jun 24 16:00:42 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="004193.html">[squid-users] Questions Regarding Transparent Proxy, HTTPS,	and ssl_bump
</A></li>
        <LI>Next message (by thread): <A HREF="004198.html">[squid-users] Questions Regarding Transparent Proxy, HTTPS, and ssl_bump
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4194">[ date ]</a>
              <a href="thread.html#4194">[ thread ]</a>
              <a href="subject.html#4194">[ subject ]</a>
              <a href="author.html#4194">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256
 
Tom,

one simple question.

Soon, all or almost all the Internet go into HTTPS. Why do you then need
caching proxy? The tunnel connection and process ACLs?

My second question to Amos. Amos, what the hell do we under these
conditions caching proxy?

WBR, Yuri

24.06.15 21:41, Tom Mowbray &#1087;&#1080;&#1096;&#1077;&#1090;:
&gt;<i> Squid 3.5.5
</I>&gt;<i>
</I>&gt;<i> I seem to have some confusion about how acl lists are processed in
</I>&gt;<i> squid.conf regarding the handling of SSL (HTTPS) traffic, attempting
</I>to use
&gt;<i> ssl_bump directives with transparent proxy.
</I>&gt;<i>
</I>&gt;<i> Based on available documentation, I believe my squid.conf is correct,
</I>&gt;<i> however it never seems to actually behave as expected.
</I>&gt;<i>
</I>&gt;<i> I define the SSL port, as usual:
</I>&gt;<i>
</I>&gt;<i> acl SSL_ports port 443
</I>&gt;<i>
</I>&gt;<i> But here's where my confusion lies... Many state to place the following
</I>&gt;<i> line above the ssl_bump configuration lines:
</I>&gt;<i>
</I>&gt;<i> http_access allow SSL_ports
</I>&gt;<i>
</I>&gt;<i> However when I do this, it appears to simply stop processing any other
</I>&gt;<i> rules and allows ALL https traffic through the proxy (which is
</I>actually how
&gt;<i> I'd expect a standard ACL list to operate, but then how do I actually
</I>&gt;<i> filter the traffic though our content-based ACL lists?).  If I put the
</I>&gt;<i> above line below the ssl_bump configuration options in my squid.conf, then
</I>&gt;<i> it appears to BUMP all, even though I've told the config to SPLICE all
</I>&gt;<i> https traffic, which doesn't work for our deployment.
</I>&gt;<i>
</I>&gt;<i> So, does squid actually continue to process the https traffic using the
</I>&gt;<i> ssl_bump rules if the &quot;http_access allow SSL_ports&quot; line is placed
</I>above it
&gt;<i> in the configuration?
</I>&gt;<i>
</I>&gt;<i> I should note that we've been able to get filtering to work correctly when
</I>&gt;<i> using our configuration in NON-transparent mode, however our goal is get
</I>&gt;<i> this functionality working as a transparent proxy.  We're unable to load
</I>&gt;<i> our self-signed cert onto client machines that will be accessing the
</I>proxy,
&gt;<i> so using the &quot;bump&quot; or man-in-the-middle style https filtering isn't a
</I>&gt;<i> viable option for us.
</I>&gt;<i>
</I>&gt;<i> Any help or advice is appreciated!
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i>
</I>&gt;<i> Tom
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2
 
iQEcBAEBCAAGBQJVitQqAAoJENNXIZxhPexGDaQIAKtb0MvhmOlS6OpGHNCjvWqd
dYXvdm+gMGE2NSl1FPAUa1sz6zj2gyI21p0nWZZu+BPWRa3Puo2XJDFlujtLtbgq
Tsqf7WeKD/dxSJzK1ooIK4OsxSpXpHchHcPnUTZ4qMPDBaAy5JKnqHK4IaX6Py5u
8AByGDCWkacHOZsjgvWpjlqoPK3bGwHsoQTTp6bs87J1JkpWdrw2eKjQCK4OfCA3
hra/kp38UFIMm/Jy8TPIv1jzx8CJsC72ImovovBSuPn7Aq2QXNyO3ZVC/TtBVHVi
x63zzJ1B599ZOZ2QqeL2fAyzeYr7ZL6MT+J6l8Vk0YvUCCO63b1rwX1Jp4qMyog=
=kTMC
-----END PGP SIGNATURE-----

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150624/c1c97d47/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150624/c1c97d47/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="004193.html">[squid-users] Questions Regarding Transparent Proxy, HTTPS,	and ssl_bump
</A></li>
	<LI>Next message (by thread): <A HREF="004198.html">[squid-users] Questions Regarding Transparent Proxy, HTTPS, and ssl_bump
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4194">[ date ]</a>
              <a href="thread.html#4194">[ thread ]</a>
              <a href="subject.html#4194">[ subject ]</a>
              <a href="author.html#4194">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
