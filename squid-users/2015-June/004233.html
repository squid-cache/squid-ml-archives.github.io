<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Logging of 'indirect' requests,	e.g. involving NAT or VPN
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Logging%20of%20%27indirect%27%20requests%2C%0A%09e.g.%20involving%20NAT%20or%20VPN&In-Reply-To=%3Cf5b8ub6d8db.fsf%40troutbeck.inf.ed.ac.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Logging of 'indirect' requests,	e.g. involving NAT or VPN</H1>
    <B>Henry S. Thompson</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Logging%20of%20%27indirect%27%20requests%2C%0A%09e.g.%20involving%20NAT%20or%20VPN&In-Reply-To=%3Cf5b8ub6d8db.fsf%40troutbeck.inf.ed.ac.uk%3E"
       TITLE="[squid-users] Logging of 'indirect' requests,	e.g. involving NAT or VPN">ht at inf.ed.ac.uk
       </A><BR>
    <I>Fri Jun 26 11:20:00 UTC 2015</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4233">[ date ]</a>
              <a href="thread.html#4233">[ thread ]</a>
              <a href="subject.html#4233">[ subject ]</a>
              <a href="author.html#4233">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Antony Stone writes:

&gt;<i> Imagine the following setup:
</I>&gt;<i>
</I>&gt;<i> Organisation has a bunch of servers (maybe at their office in a
</I>&gt;<i> server room, maybe in a data centre, doesn't matter which), some of
</I>&gt;<i> which have public IPs, but all of which have private IPs on an
</I>&gt;<i> internal subnet (for system management purposes, aside from anything
</I>&gt;<i> else).  One of these servers is the squid proxy.  Another server is
</I>&gt;<i> the VPN endpoint for remote client machines.
</I>
Got it, makes sense, thanks.

&gt;<i> Remote client connects to public IP of the VPN server, gets assigned a 
</I>&gt;<i> 192.168.x.y address.  Remote client is configured to use the Squid proxy 
</I>&gt;<i> server.  When it does so, its request (from 192.168.x.y) is routed from the 
</I>&gt;<i> VPN endpoint to the Squid server (they can talk directly to each other because 
</I>&gt;<i> they're both on the same subnet, no NAT involved) and the Squid server then 
</I>&gt;<i> sends the request out to the Internet to fetch a web page.
</I>&gt;<i>
</I>&gt;<i> The client IP logged by the Squid server in this scenario is 192.168.x.y
</I>
Thanks, that helps a lot.

&gt;<i> I repeat my recommendation - pick one of the 192.168.m.n addresses
</I>&gt;<i> you're seeing in the log files and ask whoever looks after this
</I>&gt;<i> network which machine has that address (or at least, what that
</I>&gt;<i> subnet range is used for)
</I>
Will do.

ht
-- 
       Henry S. Thompson, School of Informatics, University of Edinburgh
      10 Crichton Street, Edinburgh EH8 9AB, SCOTLAND -- (44) 131 650-4440
                Fax: (44) 131 650-4587, e-mail: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ht at inf.ed.ac.uk</A>
                       URL: <A HREF="http://www.ltg.ed.ac.uk/~ht/">http://www.ltg.ed.ac.uk/~ht/</A>
 [mail from me _always_ has a .sig like this -- mail without it is forged spam]

</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4233">[ date ]</a>
              <a href="thread.html#4233">[ thread ]</a>
              <a href="subject.html#4233">[ subject ]</a>
              <a href="author.html#4233">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
