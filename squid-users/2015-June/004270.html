<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] sslbump and caching of generated cert
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20sslbump%20and%20caching%20of%20generated%20cert&In-Reply-To=%3CBAY181-W9171C1A428C30E7D1B67E083AA0%40phx.gbl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004295.html">
   <LINK REL="Next"  HREF="004275.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] sslbump and caching of generated cert</H1>
    <B>Alex Wu</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20sslbump%20and%20caching%20of%20generated%20cert&In-Reply-To=%3CBAY181-W9171C1A428C30E7D1B67E083AA0%40phx.gbl%3E"
       TITLE="[squid-users] sslbump and caching of generated cert">alex_wu2012 at hotmail.com
       </A><BR>
    <I>Mon Jun 29 17:35:26 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="004295.html">[squid-users] TCP_MISS/504 in cache_peer
</A></li>
        <LI>Next message (by thread): <A HREF="004275.html">[squid-users] sslbump and caching of generated cert
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4270">[ date ]</a>
              <a href="thread.html#4270">[ thread ]</a>
              <a href="subject.html#4270">[ subject ]</a>
              <a href="author.html#4270">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>So far as I know, hen sslbump is enabled for a port, for each dns name, squid save a cert generated according to dns name and signing key (from http_port configuration). So the next time, the generated cert can be fetched if the same dns host and configured signing key.
Now  have a question on this:









http_port 10045 ssl-bump generate-host-certificates=on dynamic_cert_mem_cache_size=4MB key=/opt/bg/deploy/squid/etc/mydlp/ssl/key_10045.pem cert=/opt/bg/deploy/squid/etc/mydlp/ssl/cert_10045.pem
http_port 10046 ssl-bump generate-host-certificates=on dynamic_cert_mem_cache_size=4MB key=/opt/bg/deploy/squid/etc/mydlp/ssl/key_10046.pem cert=/opt/bg/deploy/squid/etc/mydlp/ssl/cert_10046.pem
I have two ports configured with SSLBUMP. Each port has its own CA signing key. The desired behavior is that, for the hostname www.foo.com, the certificate generated for the port should use key_10045, and the certificate generated for the port should use key_10046. It seems OK. 
But, if we look at the ssl_db, only the last generated certificate is cached for www.foo.com. Is it possible to cache the generated certificates by the host and signing key?
Alex 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150629/792be9a5/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150629/792be9a5/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="004295.html">[squid-users] TCP_MISS/504 in cache_peer
</A></li>
	<LI>Next message (by thread): <A HREF="004275.html">[squid-users] sslbump and caching of generated cert
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4270">[ date ]</a>
              <a href="thread.html#4270">[ thread ]</a>
              <a href="subject.html#4270">[ subject ]</a>
              <a href="author.html#4270">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
