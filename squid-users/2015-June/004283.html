<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] TCP_MISS/504 in cache_peer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20TCP_MISS/504%20in%20cache_peer&In-Reply-To=%3C559252D5.8040203%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004282.html">
   <LINK REL="Next"  HREF="004284.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] TCP_MISS/504 in cache_peer</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20TCP_MISS/504%20in%20cache_peer&In-Reply-To=%3C559252D5.8040203%40treenet.co.nz%3E"
       TITLE="[squid-users] TCP_MISS/504 in cache_peer">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Jun 30 08:27:01 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="004282.html">[squid-users] TCP_MISS/504 in cache_peer
</A></li>
        <LI>Next message (by thread): <A HREF="004284.html">[squid-users] TCP_MISS/504 in cache_peer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4283">[ date ]</a>
              <a href="thread.html#4283">[ thread ]</a>
              <a href="subject.html#4283">[ subject ]</a>
              <a href="author.html#4283">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 30/06/2015 7:45 p.m., Stakres wrote:
&gt;<i> Hi Antony,
</I>&gt;<i> 
</I>&gt;<i> Correct, the kid contacts the parent that is getting a 504 and replies the
</I>&gt;<i> same to the kid. That's why I suspect the parent tries to download by itself
</I>&gt;<i> instead replying to the kid it does not have the object so the kid should do
</I>&gt;<i> a fresh download from internet.
</I>
Lets get this clear. There is *no* kid and *no* parent involved in this
transaction. There is a client sibling, and a server sibling.

The client sibling uses CacheDigest to identify that the server sibling
probably has the object in cache so it fetches from the server sibling.
The server sibling responds with 504.

If it is possibel to re-forward the request to another destination the
client sibling *will* retry one of those after a 504.

Enable &quot;debug_options 17,5&quot; to see the re-forwarding operations in
action. Unfortunately not all reasons for non-retry are logged, but it
gives a good idea of whats going on anyway.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="004282.html">[squid-users] TCP_MISS/504 in cache_peer
</A></li>
	<LI>Next message (by thread): <A HREF="004284.html">[squid-users] TCP_MISS/504 in cache_peer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4283">[ date ]</a>
              <a href="thread.html#4283">[ thread ]</a>
              <a href="subject.html#4283">[ subject ]</a>
              <a href="author.html#4283">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
