<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] issue with tcp_outgoing_address and external acl
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20issue%20with%20tcp_outgoing_address%20and%20external%20acl&In-Reply-To=%3CCAMZauGp1w3yFQH%2BR4xYUpMAUvJX2PBKgJZ9mfX6m0kWNE7OfOQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002578.html">
   <LINK REL="Next"  HREF="002613.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] issue with tcp_outgoing_address and external acl</H1>
    <B>Alberto Perez</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20issue%20with%20tcp_outgoing_address%20and%20external%20acl&In-Reply-To=%3CCAMZauGp1w3yFQH%2BR4xYUpMAUvJX2PBKgJZ9mfX6m0kWNE7OfOQ%40mail.gmail.com%3E"
       TITLE="[squid-users] issue with tcp_outgoing_address and external acl">alberto2perez at gmail.com
       </A><BR>
    <I>Thu Mar  5 21:35:22 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002578.html">[squid-users] issue with tcp_outgoing_address and external acl
</A></li>
        <LI>Next message (by thread): <A HREF="002613.html">[squid-users] issue with tcp_outgoing_address and external acl
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2611">[ date ]</a>
              <a href="thread.html#2611">[ thread ]</a>
              <a href="subject.html#2611">[ subject ]</a>
              <a href="author.html#2611">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Amos  for the link, I understand tcp_outgoing_address only
works with fast acl and external acls are slow.

In order to mitigate this fact and achieve my purpose of share traffic
among two links depending only of username, who can recommend me a
workaround?

I was working in mantaining of IPs for those users special, once the
user login or logout from captive portal I update the list if IPs to
be used as SRC acl combined with tcp_outgoing_address and worked like
a charm except for the fact that squid only notice this change if I
reload configuration, which is a heavy reason to consider another
solutions.

It is possible to setup a ttl for this SRC acl, how can I make squid
note the change in this list without reloading configuration.

Thanks a lot for the help.



Well, my only complaint about squid would be about the fact

On 3/5/15, Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt; wrote:
&gt;<i> On 5/03/2015 4:25 p.m., Alberto Perez wrote:
</I>&gt;&gt;<i> Hi and thanks to all members in this community for the great support.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Im trying to send traffic for some users through a faster link using
</I>&gt;&gt;<i> tcp_outgoing_address, I found this directive very usefull and suitable
</I>&gt;&gt;<i> for this need.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I use a captive portal and my squid only use autorization, so users
</I>&gt;&gt;<i> are not available with standard ident method.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I wrote an acl to simulate ident process by reading to memory a list
</I>&gt;&gt;<i> of users from a file and matching external user returned by active
</I>&gt;&gt;<i> session external acl. For general purposes of autorization this work
</I>&gt;&gt;<i> fine.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I found that tcp_outgoing_address works good with src ACLs but doesn't
</I>&gt;&gt;<i> work with this external acl, by the way, has huge ttl so squid doesn't
</I>&gt;&gt;<i> evaluate it on each request.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Can anyone please tell me if this is possible, or point the right
</I>&gt;&gt;<i> direction to solve this.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I will be glad to provide more information about my case if is needed.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Are you asking how to set this up? or complaining about a problem you
</I>&gt;<i> found with it?
</I>&gt;<i>
</I>&gt;<i> The answer to both is in the FAQ:
</I>&gt;<i> &lt;<A HREF="http://wiki.squid-cache.org/SquidFaq/SquidAcl#Fast_and_Slow_ACLs">http://wiki.squid-cache.org/SquidFaq/SquidAcl#Fast_and_Slow_ACLs</A>&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Amos
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002578.html">[squid-users] issue with tcp_outgoing_address and external acl
</A></li>
	<LI>Next message (by thread): <A HREF="002613.html">[squid-users] issue with tcp_outgoing_address and external acl
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2611">[ date ]</a>
              <a href="thread.html#2611">[ thread ]</a>
              <a href="subject.html#2611">[ subject ]</a>
              <a href="author.html#2611">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
