<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Fwd: squid intercept config
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Fwd%3A%20squid%20intercept%20config&In-Reply-To=%3C201503061414.03329.Antony.Stone%40squid.open.source.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002619.html">
   <LINK REL="Next"  HREF="002621.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Fwd: squid intercept config</H1>
    <B>Antony Stone</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Fwd%3A%20squid%20intercept%20config&In-Reply-To=%3C201503061414.03329.Antony.Stone%40squid.open.source.it%3E"
       TITLE="[squid-users] Fwd: squid intercept config">Antony.Stone at squid.open.source.it
       </A><BR>
    <I>Fri Mar  6 13:14:03 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002619.html">[squid-users] Fwd: squid intercept config
</A></li>
        <LI>Next message (by thread): <A HREF="002621.html">[squid-users] Fwd: squid intercept config
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2620">[ date ]</a>
              <a href="thread.html#2620">[ thread ]</a>
              <a href="subject.html#2620">[ subject ]</a>
              <a href="author.html#2620">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Friday 06 March 2015 at 14:03:28 (EU time), Monah Baki wrote:

&gt;<i> Hi All,
</I>&gt;<i> 
</I>&gt;<i> As an addition to my yesterday's issue,
</I>&gt;<i> 
</I>&gt;<i> Tail -f cache.log, I am getting the following:
</I>&gt;<i> 
</I>&gt;<i> 015/03/06 13:54:02| WARNING: Forwarding loop detected for:
</I>
&gt;<i> Any ideas?
</I>
Is your NAT rule catching the HTTP requests from the proxy itself (as well as 
the requests from the clients) and sending *everything* to the proxy 
(including the requests the proxy is trying to make out to the Internet)?

I'm not an expert on Cisco or BSD, but it does strike me that your rule:

rdr pass inet proto tcp from 10.0.0.0/8 to any port 80 -&gt; 10.0.0.24 port 3129

looks like it will match requests from the proxy's address 10.0.0.24 as well 
as all the clients...

Try adding an exception in before the NAT rule, saying &quot;traffic from 10.0.0.24 
should not be NATted&quot;.


Regards,


Antony.

-- 
&quot;Once you have a panic, things tend to become rather undefined.&quot;

 - murble

                                                   Please reply to the list;
                                                         please *don't* CC me.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002619.html">[squid-users] Fwd: squid intercept config
</A></li>
	<LI>Next message (by thread): <A HREF="002621.html">[squid-users] Fwd: squid intercept config
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2620">[ date ]</a>
              <a href="thread.html#2620">[ thread ]</a>
              <a href="subject.html#2620">[ subject ]</a>
              <a href="author.html#2620">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
