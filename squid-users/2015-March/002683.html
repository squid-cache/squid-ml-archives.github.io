<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid Reverse Proxy to Exchange 2010 OWA
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Reverse%20Proxy%20to%20Exchange%202010%20OWA&In-Reply-To=%3C0458b52461578fe1012818892d032556%40dweimer.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002763.html">
   <LINK REL="Next"  HREF="002684.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid Reverse Proxy to Exchange 2010 OWA</H1>
    <B>dweimer</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Reverse%20Proxy%20to%20Exchange%202010%20OWA&In-Reply-To=%3C0458b52461578fe1012818892d032556%40dweimer.net%3E"
       TITLE="[squid-users] Squid Reverse Proxy to Exchange 2010 OWA">dweimer at dweimer.net
       </A><BR>
    <I>Wed Mar 11 04:42:17 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002763.html">[squid-users] peek/splice working with lynx but not with firefox or chrome [SOLVED]
</A></li>
        <LI>Next message (by thread): <A HREF="002684.html">[squid-users] Squid Reverse Proxy to Exchange 2010 OWA
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2683">[ date ]</a>
              <a href="thread.html#2683">[ thread ]</a>
              <a href="subject.html#2683">[ subject ]</a>
              <a href="author.html#2683">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We have setup Squid as a reverse proxy to Exchange 2010 OWA server we 
thought everything was working OK, but found out that any file 
attachments over 2MB cause a timeout after 5 minutes. I remembered 
having this issue a while back with HTTPS, and it just went away after 
some updates. Some searching found other users posting messages to the 
Squid mailing list that had this issue in particular with OWA. However I 
never found a fix on any of the threads.

Squid is currently running 3.4.11, on FreeBSD 10.1-RELEASE-p5, This 
occurs even when sending the file through the local network passing 
through the reverse proxy. With the slowest link being a 1G.

Below is the relevant parts of the configuration, with some information 
excluded for security
https_port 10.50.20.12:443 accel defaultsite=... \
  cert=... \
  key=... \
  options=NO_SSLv2:NO_TLSv1:CIPHER_SERVER_PREFERENCE \
  cipher=RC4:!MD5:!aNULL:!EDH

cache_peer ... parent 443 0 ssl no-query no-digest no-netdb-exchange 
originserver name=owa2010_parent sslcapath=/usr/local/share/certs 
sslflags=DONT_VERIFY_PEER login=PASSTHRU front-end-https=on

We also host sharepoint (certificate is a wildcard certificate) this way 
as well, and I have just verified that it has the same problem. It is 
served by the same https_port line, and a different cache_peer the only 
difference is the IP and it doesn't have the front-end-https option set.

Does anyone have any ideas to check?

is this possibly a cause 
&lt;<A HREF="http://www.squid-cache.org/Doc/config/broken_posts/">http://www.squid-cache.org/Doc/config/broken_posts/</A>&gt;?

-- 
Thanks,
    Dean E. Weimer
    <A HREF="http://www.dweimer.net/">http://www.dweimer.net/</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002763.html">[squid-users] peek/splice working with lynx but not with firefox or chrome [SOLVED]
</A></li>
	<LI>Next message (by thread): <A HREF="002684.html">[squid-users] Squid Reverse Proxy to Exchange 2010 OWA
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2683">[ date ]</a>
              <a href="thread.html#2683">[ thread ]</a>
              <a href="subject.html#2683">[ subject ]</a>
              <a href="author.html#2683">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
