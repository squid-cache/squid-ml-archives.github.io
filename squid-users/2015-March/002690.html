<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] i hope to build web Authentication portal at Tproxy environment recenty , can you give me some advisement .
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20i%20hope%20to%20build%20web%20Authentication%20portal%20at%0A%20Tproxy%20environment%20recenty%20%2C%20can%20you%20give%20me%20some%20advisement%20.&In-Reply-To=%3C55001EDE.700%40opendium.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002689.html">
   <LINK REL="Next"  HREF="002691.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] i hope to build web Authentication portal at Tproxy environment recenty , can you give me some advisement .</H1>
    <B>Steve Hill</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20i%20hope%20to%20build%20web%20Authentication%20portal%20at%0A%20Tproxy%20environment%20recenty%20%2C%20can%20you%20give%20me%20some%20advisement%20.&In-Reply-To=%3C55001EDE.700%40opendium.com%3E"
       TITLE="[squid-users] i hope to build web Authentication portal at Tproxy environment recenty , can you give me some advisement .">steve at opendium.com
       </A><BR>
    <I>Wed Mar 11 10:54:22 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002689.html">[squid-users] i hope to build web Authentication portal at Tproxy environment recenty , can you give me some advisement .
</A></li>
        <LI>Next message (by thread): <A HREF="002691.html">[squid-users] i hope to build web Authentication portal at Tproxy environment recenty , can you give me some advisement .
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2690">[ date ]</a>
              <a href="thread.html#2690">[ thread ]</a>
              <a href="subject.html#2690">[ subject ]</a>
              <a href="author.html#2690">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11.03.15 10:22, johnzeng wrote:

&gt;<i> whether php or jquery need send user ip address to squid ? otherwise i
</I>&gt;<i> worried whether squid can confirm user info
</I>&gt;<i>
</I>&gt;<i> and how to identify and controll http traffic ?
</I>
I'd do this with an external ACL - when processing a request, Squid 
would call the external ACL which would do:

1. If the user is not authenticated or their &quot;last seen&quot; timestamp has 
expired, return &quot;ERR&quot;
2. If the user is authenticated, update their &quot;last seen&quot; timestamp and 
return OK.

Obviously if the ACL returns ERR, Squid needs to redirect the user to 
the authentication page.  If the ACL returns OK, Squid needs to service 
the request as normal.

The authentication page would update the database which the external ACL 
refers to.

Identifying the user's traffic would need to be done by MAC address or IP:
  - MAC address requires a flat network with no routers between the 
device and Squid.
  - IP has (probably) unfixable problems in a dual-stacked network.

Beware that:
1. Access to the authentication page must be allowed for unauthenticated 
users (obviously :)
2. Authentication should really be done over HTTPS with a trusted 
certificate.
3. Clients require access to some external servers to validate HTTPS 
certs before they have authenticated.
4. If you want to support WISPr then (2) and (3) are mandatory.
5. External ACL caching

You might be able to do it with internal ACLs, but... pain :)

-- 
  - Steve Hill
    Technical Director
    Opendium Limited     <A HREF="http://www.opendium.com">http://www.opendium.com</A>

Direct contacts:
    Instant messager: xmpp:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">steve at opendium.com</A>
    Email:            <A HREF="https://lists.squid-cache.org/listinfo/squid-users">steve at opendium.com</A>
    Phone:            sip:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">steve at opendium.com</A>

Sales / enquiries contacts:
    Email:            <A HREF="https://lists.squid-cache.org/listinfo/squid-users">sales at opendium.com</A>
    Phone:            +44-1792-824568 / sip:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">sales at opendium.com</A>

Support contacts:
    Email:            <A HREF="https://lists.squid-cache.org/listinfo/squid-users">support at opendium.com</A>
    Phone:            +44-1792-825748 / sip:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">support at opendium.com</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002689.html">[squid-users] i hope to build web Authentication portal at Tproxy environment recenty , can you give me some advisement .
</A></li>
	<LI>Next message (by thread): <A HREF="002691.html">[squid-users] i hope to build web Authentication portal at Tproxy environment recenty , can you give me some advisement .
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2690">[ date ]</a>
              <a href="thread.html#2690">[ thread ]</a>
              <a href="subject.html#2690">[ subject ]</a>
              <a href="author.html#2690">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
