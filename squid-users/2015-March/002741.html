<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] ssl_bump for specific dstdomain
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20ssl_bump%20for%20specific%20dstdomain&In-Reply-To=%3CCAJUmE_Mq-vBr%2B6GQgXSThDDqp5F3%2BL-8%2Bjc3H2%2BXN-996QpS0w%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002732.html">
   <LINK REL="Next"  HREF="002742.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] ssl_bump for specific dstdomain</H1>
    <B>Mukul Gandhi</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20ssl_bump%20for%20specific%20dstdomain&In-Reply-To=%3CCAJUmE_Mq-vBr%2B6GQgXSThDDqp5F3%2BL-8%2Bjc3H2%2BXN-996QpS0w%40mail.gmail.com%3E"
       TITLE="[squid-users] ssl_bump for specific dstdomain">mukulg at gwmail.gwu.edu
       </A><BR>
    <I>Thu Mar 12 15:01:51 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002732.html">[squid-users] urlpath_regex
</A></li>
        <LI>Next message (by thread): <A HREF="002742.html">[squid-users] ssl_bump for specific dstdomain
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2741">[ date ]</a>
              <a href="thread.html#2741">[ thread ]</a>
              <a href="subject.html#2741">[ subject ]</a>
              <a href="author.html#2741">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am running squid 3.4.8 and am looking for solutions to ssl_bump for
specific domains only. Going through the archives it is clear that it is
not possible unless the reverse DNS points back to the domain that is to be
ssl bumped.

So then what is the solution to this problem. I just want to create a SSL
whitelist of domains that are to be bumped and the rest should be tunneled
through. What I have is -

ssl_bump none localhost
acl ssl_whitelist dstdomain &quot;/tmp/ssl_whitelist.txt&quot;
ssl_bump server-first ssl_whitelist

The file /tmp/ssl_whitelist.txt contains -

.facebook.com
.twitter.com
.pintrest.com

Of course, this doesn't work because the ip address for these websites
points back to &lt;something&gt;.akamaitechnologies.com.

All I want is to be able to decrypt just the traffic to these three
web-sites, the rest should go through encrypted. But I couldn't find a
solution for this anywhere in the archives. I did see some mention of using
SslBump1/2/3 but it wasn't clear if this was the silver bullet. Also I
would have to upgrade to 3.5 to use these new directives.

Any idea how I can achieve this in 3.4.8 (if possible)? Or if I a solution
exists for this in 3.5?

Thanks,
-Mukul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150312/d743a42b/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150312/d743a42b/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002732.html">[squid-users] urlpath_regex
</A></li>
	<LI>Next message (by thread): <A HREF="002742.html">[squid-users] ssl_bump for specific dstdomain
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2741">[ date ]</a>
              <a href="thread.html#2741">[ thread ]</a>
              <a href="subject.html#2741">[ subject ]</a>
              <a href="author.html#2741">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
