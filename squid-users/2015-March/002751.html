<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Captive Portal authentication in Intercept mode
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Captive%20Portal%20authentication%20in%20Intercept%20mode&In-Reply-To=%3C5502A7C5.9030702%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002748.html">
   <LINK REL="Next"  HREF="002753.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Captive Portal authentication in Intercept mode</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Captive%20Portal%20authentication%20in%20Intercept%20mode&In-Reply-To=%3C5502A7C5.9030702%40ngtech.co.il%3E"
       TITLE="[squid-users] Captive Portal authentication in Intercept mode">eliezer at ngtech.co.il
       </A><BR>
    <I>Fri Mar 13 09:03:01 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002748.html">[squid-users] Captive Portal authentication in Intercept mode
</A></li>
        <LI>Next message (by thread): <A HREF="002753.html">[squid-users] Captive Portal authentication in Intercept mode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2751">[ date ]</a>
              <a href="thread.html#2751">[ thread ]</a>
              <a href="subject.html#2751">[ subject ]</a>
              <a href="author.html#2751">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey,

I have written a basic idea with a php &quot;login portal&quot; that can be seen at:
<A HREF="http://wiki.squid-cache.org/EliezerCroitoru/SessionHelper/">http://wiki.squid-cache.org/EliezerCroitoru/SessionHelper/</A>
<A HREF="http://wiki.squid-cache.org/EliezerCroitoru/SessionHelper/Conf">http://wiki.squid-cache.org/EliezerCroitoru/SessionHelper/Conf</A>
<A HREF="http://wiki.squid-cache.org/EliezerCroitoru/SessionHelper/PhpLoginExample">http://wiki.squid-cache.org/EliezerCroitoru/SessionHelper/PhpLoginExample</A>
<A HREF="http://wiki.squid-cache.org/EliezerCroitoru/SessionHelper/Python">http://wiki.squid-cache.org/EliezerCroitoru/SessionHelper/Python</A>
<A HREF="http://wiki.squid-cache.org/EliezerCroitoru/SessionHelper/SplashPageTemplate">http://wiki.squid-cache.org/EliezerCroitoru/SessionHelper/SplashPageTemplate</A>

The idea is an IP session based login.
The user actively needs to login and it will login the user IP address.
The helper(s) logic is based on time since the last user login.
This idea can be used as a sketch for a more advanced options with a portal.

There are other better ways to implement this idea and one of them is 
using a radius server.

As you noticed there is no way to directly authenticate a proxy in 
intercept mode.
Maybe someone out-there have been thinking about a way to do such a 
thing but it is yet to be possible with squid.

You can combine the php session login like in dyndns based solutions.
They offer a capability to re-register a domain based on your internet 
faced IP address.
Their client checks if the IP was changed and if so re-register vs the 
main server(with username and password).
So for example any new registration will revoke the old registration and 
any current registration is limited by to the current session life time.

Like in linux tcp_keep_alive there is an option to limit the session for 
5-10 minutes and if it will not be &quot;keeped&quot; alive after 2 hours it will 
be automatically revoked off access to the proxy.

The logic I have written can be implemented but should be carefully 
designed.

All The Bests,
Eliezer Croitoru

On 13/03/2015 07:25, Ashish Patil wrote:
&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> I am trying to set up a Captive Portal with Squid (v.3.5.2) in Intercept
</I>&gt;<i> mode and SquidGuard (v.1.5) as URL rewriter. The Captive portal works off
</I>&gt;<i> usernames in a database, but Squid + SquidGuard work based off IP's.
</I>&gt;<i>
</I>&gt;<i> The most progress I have had just says Authentication by Squid cannot be
</I>&gt;<i> done with Squid acting as a Intercepting Proxy. Is there some helper (even
</I>&gt;<i> probably in beta stage) that could help me achieve this?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002748.html">[squid-users] Captive Portal authentication in Intercept mode
</A></li>
	<LI>Next message (by thread): <A HREF="002753.html">[squid-users] Captive Portal authentication in Intercept mode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2751">[ date ]</a>
              <a href="thread.html#2751">[ thread ]</a>
              <a href="subject.html#2751">[ subject ]</a>
              <a href="author.html#2751">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
