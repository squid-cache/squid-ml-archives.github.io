<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Read Timeout
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Read%20Timeout&In-Reply-To=%3C5503CA18.30100%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002761.html">
   <LINK REL="Next"  HREF="002762.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Read Timeout</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Read%20Timeout&In-Reply-To=%3C5503CA18.30100%40treenet.co.nz%3E"
       TITLE="[squid-users] Read Timeout">squid3 at treenet.co.nz
       </A><BR>
    <I>Sat Mar 14 05:41:44 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002761.html">[squid-users] Read Timeout
</A></li>
        <LI>Next message (by thread): <A HREF="002762.html">[squid-users] https traffic using squid and icap
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2784">[ date ]</a>
              <a href="thread.html#2784">[ thread ]</a>
              <a href="subject.html#2784">[ subject ]</a>
              <a href="author.html#2784">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 14/03/2015 2:34 a.m., sci wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I search a solution for the follow &quot;problem&quot;:
</I>&gt;<i> 
</I>&gt;<i> A website with a simple button (POST) needs more than 15min to send the
</I>&gt;<i> information what the clients needs (a simple excel sheet).
</I>&gt;<i> We don't want to change the global settings at the &quot;Read Timeout&quot;, so I
</I>&gt;<i> try to find something like a ACL for the squid.
</I>&gt;<i> 
</I>&gt;<i> Is it possible to at a ACL to the squid.conf like:
</I>&gt;<i> 
</I>&gt;<i> # rule only for the slow website
</I>&gt;<i> acl slow-server dstdomain .someserver-slow.com
</I>&gt;<i> read_timeout 30 minutes slow-server
</I>&gt;<i> # end rule
</I>&gt;<i> 
</I>
15min is not exactly a Squid limit. Its just set with a default to match
other limits in the Internet.

A read happens (and the read_timeout restarts) whenever any TCP packets
arrive. At some point between 5 and 60min (usually lower values though)
with no packets at all occuring the TCP stacks and NAT systems all along
the network path of the connections start discarding their records about
the connection.

If the server is not responding with at least one packet within a
5-60min period the connection has a growing risk of not existing
anymore. Squid default lets it hang for 15min before considering it too
risky to use anymore and releases all the resources (and there are a LOT
of resources used down the whole chain of machinery between client and
server).

Don't worry about extending the timeout globally to 30min. It will have
no effect at all on servers or traffic that responds promptly to requests.


The best thing to do though is get the server fixed (ie complain to the
people responsible for the code generating those documents). Sometimes
they can fix teh total speed, sometimes not. But either way HTTP
contains several mechanisms allowing object to be streamed to the client
as they are generated, with error recovery and data validation even.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002761.html">[squid-users] Read Timeout
</A></li>
	<LI>Next message (by thread): <A HREF="002762.html">[squid-users] https traffic using squid and icap
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2784">[ date ]</a>
              <a href="thread.html#2784">[ thread ]</a>
              <a href="subject.html#2784">[ subject ]</a>
              <a href="author.html#2784">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
