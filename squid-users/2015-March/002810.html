<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] help setting up hierarchy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20help%20setting%20up%20hierarchy&In-Reply-To=%3CCAJ%2BQ1PW%3DxB7OTLQauJ4tHkse-_%3D-Mz5creRnARy0UargiJfC-A%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002806.html">
   <LINK REL="Next"  HREF="002809.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] help setting up hierarchy</H1>
    <B>Alex Samad</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20help%20setting%20up%20hierarchy&In-Reply-To=%3CCAJ%2BQ1PW%3DxB7OTLQauJ4tHkse-_%3D-Mz5creRnARy0UargiJfC-A%40mail.gmail.com%3E"
       TITLE="[squid-users] help setting up hierarchy">alex at samad.com.au
       </A><BR>
    <I>Tue Mar 17 05:19:44 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002806.html">[squid-users] help setting up hierarchy
</A></li>
        <LI>Next message (by thread): <A HREF="002809.html">[squid-users] Access Problem to VMWARE, IBM and Truste.com through Squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2810">[ date ]</a>
              <a href="thread.html#2810">[ thread ]</a>
              <a href="subject.html#2810">[ subject ]</a>
              <a href="author.html#2810">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>[snip]

&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Config questions
</I>&gt;&gt;&gt;<i> 1) how to I get user authentication to flow through
</I>&gt;&gt;&gt;<i>   if a user requests from squid-a and it takes it from squid-b. I
</I>&gt;&gt;&gt;<i> would like the user id's logged on both
</I>&gt;&gt;&gt;<i>   if a user requests from new squid to either squid-a or squid-b. I
</I>&gt;&gt;&gt;<i> would like the auth (which would be done on new-squid) to flow through
</I>&gt;&gt;&gt;<i> to either squid-a or squid-b.
</I>&gt;<i>
</I>&gt;<i> This is not possible with NTLM authentication.
</I>&gt;<i>
</I>&gt;<i> NTLM is authenticating the TCP connection between client and proxy
</I>&gt;<i> underneath the HTTP layer and has a complex handshake setting up
</I>&gt;<i> security token per-connection with the DC server. The TCP connection
</I>&gt;<i> outbound from the proxy is a different connection, and also is not from
</I>&gt;<i> the client.
</I>&gt;<i>
</I>&gt;<i> Its possible with Negotiate/Kerberos or Basic auth. Even though
</I>&gt;<i> Negotiate is also authenticating the TCP connection the handshake is
</I>&gt;<i> simpler and the token can be relayed to the peer proxy.
</I>&gt;<i>
</I>&gt;<i> NP: Though be careful in an environment using NTLM. You may get
</I>&gt;<i> Negotiate/NTLM tokens flowing around, which wont work any more than NTLM
</I>&gt;<i> does.
</I>
Sounds like the simplest thing to do is turn on authentication on all
the boxes and allow then non auth access to each other


&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> 2) how do I setup ICP to work properly
</I>&gt;<i>
</I>&gt;<i> Use HTCP for better HIT ratio with less false positives in HTTP/1.1.
</I>
Ta, i will have to have a read, does it work. any examples on how to setup?

&gt;<i>
</I>&gt;&gt;<i> 3) is the cache_peer to squid-a squid-b from new-squid type parent ?
</I>&gt;<i>
</I>&gt;<i> No. But to get the authentication to work you will need login=PASSTHRU
</I>&gt;<i> parameter (and be using Basic or Negotiate/Kerberos).
</I>what if I just want the authenticated user id to flow through. So the
authentication happen on the office squid and then it forward to the
DC squid, the dc squid can log the user name in the user field is that
possible ?

&gt;<i>
</I>&gt;&gt;<i> 4) do I need to allow ICP clients full access, this is the squid-a to
</I>&gt;&gt;<i> squid-b link ?
</I>&gt;<i>
</I>&gt;<i> You should not have to. However, it also should not matter - when the
</I>&gt;<i> first proxy is doing auth you kow the traffic coming out of it is
</I>&gt;<i> authenticated. Not doing auth twice is faster.
</I>
Is there a way to say any one attaching on port X doesn't need to be
authenticated but on port Y does.
My issues is that in the office I have a few eclipse users who had a
lot of problems with out previous proxy solution. they are setup to
use the office proxy in a nonauth way. but now I want to setup auth on
this squid box. I was thinking there could be a non auth port and a
auth port.

A


&gt;<i>
</I>&gt;<i> Amos
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002806.html">[squid-users] help setting up hierarchy
</A></li>
	<LI>Next message (by thread): <A HREF="002809.html">[squid-users] Access Problem to VMWARE, IBM and Truste.com through Squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2810">[ date ]</a>
              <a href="thread.html#2810">[ thread ]</a>
              <a href="subject.html#2810">[ subject ]</a>
              <a href="author.html#2810">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
