<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Refresh ACL list only
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Refresh%20ACL%20list%20only&In-Reply-To=%3CCAP6yRXg6eJvR7FrCxgAAfX5xZT5F1CPX7%2BPw9eQ9Vb%3D6pqF29A%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002824.html">
   <LINK REL="Next"  HREF="002820.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Refresh ACL list only</H1>
    <B>Samuel Anderson</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Refresh%20ACL%20list%20only&In-Reply-To=%3CCAP6yRXg6eJvR7FrCxgAAfX5xZT5F1CPX7%2BPw9eQ9Vb%3D6pqF29A%40mail.gmail.com%3E"
       TITLE="[squid-users] Refresh ACL list only">sam at idsdoc.com
       </A><BR>
    <I>Tue Mar 17 18:34:16 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002824.html">[squid-users] Refresh ACL list only
</A></li>
        <LI>Next message (by thread): <A HREF="002820.html">[squid-users] Refresh ACL list only
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2825">[ date ]</a>
              <a href="thread.html#2825">[ thread ]</a>
              <a href="subject.html#2825">[ subject ]</a>
              <a href="author.html#2825">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks, I'll look into using haproxy.

On Tue, Mar 17, 2015 at 12:31 PM, Brendan Kearney &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">bpk678 at gmail.com</A>&gt; wrote:

&gt;<i> On Wed, 2015-03-18 at 00:08 +0600, Yuri Voinov wrote:
</I>&gt;<i> &gt; Brendan reads my thoughts. :)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; You can, of course, use two or more squid instances and Cisco with
</I>&gt;<i> &gt; configured WCCP protocol before it. WCCP can plays with several cache
</I>&gt;<i> &gt; instances in load balancing role. Running squid at this moment sends
</I>&gt;<i> &gt; &quot;here I am&quot; messages to WCCP-enabled router, which will redirect
</I>&gt;<i> &gt; traffic on alive cache. The same time you can reconfigure second squid
</I>&gt;<i> &gt; instance a visa versa.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 18.03.15 0:00, Brendan Kearney &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;<i> &gt; &gt; On Tue, 2015-03-17 at 11:59 -0600, Samuel Anderson wrote:
</I>&gt;<i> &gt; &gt;&gt; Unfortunately thats not really an option for me. I've already
</I>&gt;<i> &gt; &gt;&gt; built everything just using squid. It works great and does
</I>&gt;<i> &gt; &gt;&gt; everything I need it to do with the exception of refreshing the
</I>&gt;<i> &gt; &gt;&gt; ACL lists. I just need to find a way to refresh those single
</I>&gt;<i> &gt; &gt;&gt; lists without disrupting Internet traffic to the users. If anyone
</I>&gt;<i> &gt; &gt;&gt; knows how to do this I would greatly appreciate it.
</I>&gt;<i> &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt;&gt; On Tue, Mar 17, 2015 at 11:39 AM, Yuri Voinov
</I>&gt;<i> &gt; &gt;&gt; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">yvoinov at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; Did you hear about rewriters and filters? I.e., squidGuard, or
</I>&gt;<i> &gt; &gt; Dansguardian? Or, of course
</I>&gt;<i> &gt; &gt; <A HREF="https://www.urlfilterdb.com/products/ufdbguard.html">https://www.urlfilterdb.com/products/ufdbguard.html</A> ? It has
</I>&gt;<i> &gt; &gt; separate server process which can be restart VERY quickly
</I>&gt;<i> &gt; &gt; independently of squid.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; 17.03.15 23:35, Samuel Anderson &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;<i> &gt; &gt;&gt; Hello all,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;&gt; Does anyone know of a way to reload a single ACL list? I
</I>&gt;<i> &gt; &gt; have a
</I>&gt;<i> &gt; &gt;&gt; very complicated and large config file that takes around 30
</I>&gt;<i> &gt; &gt; seconds
</I>&gt;<i> &gt; &gt;&gt; to reload when I run the (squid3 -k reconfigure) command. I
</I>&gt;<i> &gt; &gt; have
</I>&gt;<i> &gt; &gt;&gt; several ACL lists that need to be updated throughout the day
</I>&gt;<i> &gt; &gt; and it
</I>&gt;<i> &gt; &gt;&gt; would be nice if I could only reload those ACL lists and not
</I>&gt;<i> &gt; &gt; the
</I>&gt;<i> &gt; &gt;&gt; entire config. Its problematic because while its reloading,
</I>&gt;<i> &gt; &gt; the
</I>&gt;<i> &gt; &gt;&gt; server is effectively down and disrupts Internet access for
</I>&gt;<i> &gt; &gt; the
</I>&gt;<i> &gt; &gt;&gt; rest of the users. Below is a small sample of the lists that
</I>&gt;<i> &gt; &gt; will
</I>&gt;<i> &gt; &gt;&gt; be updated. If I could add a TTL to the lists so squid would
</I>&gt;<i> &gt; &gt; reload
</I>&gt;<i> &gt; &gt;&gt; them periodically without a full reconfigure would be ideal.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;&gt; acl GLOBAL-WHITELIST dstdomain
</I>&gt;<i> &gt; &gt;&gt; &quot;/etc/squid3/whitelists/GLOBAL-WHITELIST&quot; acl
</I>&gt;<i> &gt; &gt;&gt; UNRESTRICTED-WHITELIST dstdomain
</I>&gt;<i> &gt; &gt;&gt; &quot;/etc/squid3/whitelists/UNRESTRICTED-WHITELIST&quot; acl
</I>&gt;<i> &gt; &gt; DEV-WHITELIST
</I>&gt;<i> &gt; &gt;&gt; dstdomain &quot;/etc/squid3/whitelists/DEV-WHITELIST&quot; acl
</I>&gt;<i> &gt; &gt;&gt; SALES-WHITELIST dstdomain
</I>&gt;<i> &gt; &gt; &quot;/etc/squid3/whitelists/SALES-WHITELIST&quot;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;&gt; Thanks
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;&gt; _______________________________________________ squid-users
</I>&gt;<i> &gt; &gt; mailing
</I>&gt;<i> &gt; &gt;&gt; list <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> &gt; &gt;&gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;&gt; _______________________________________________ squid-users
</I>&gt;<i> &gt; &gt;&gt; mailing list <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> &gt; &gt;&gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt;&gt; -- Samuel Anderson  |  Information Technology Administrator  |
</I>&gt;<i> &gt; &gt;&gt; International Document Services
</I>&gt;<i> &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt;&gt; IDS  |  11629 South 700 East, Suite 200  |  Draper, UT
</I>&gt;<i> &gt; &gt;&gt; 84020-4607
</I>&gt;<i> &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt;&gt; CONFIDENTIALITY NOTICE: This e-mail and any attachments are
</I>&gt;<i> &gt; &gt;&gt; confidential. If you are not an intended recipient, please
</I>&gt;<i> &gt; &gt;&gt; contact the sender to report the error and delete all copies of
</I>&gt;<i> &gt; &gt;&gt; this message from your system.  Any unauthorized review, use,
</I>&gt;<i> &gt; &gt;&gt; disclosure or distribution is prohibited.
</I>&gt;<i> &gt; &gt;&gt; _______________________________________________ squid-users
</I>&gt;<i> &gt; &gt;&gt; mailing list <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> &gt; &gt;&gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; do you have the luxury of multiple squid instances behind a load
</I>&gt;<i> &gt; &gt; balancer?  mark one offline at the LB, reconfigure, mark online at
</I>&gt;<i> &gt; &gt; the LB.  Lather, rinse, repeat.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; _______________________________________________ squid-users mailing
</I>&gt;<i> &gt; &gt; list <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> &gt; &gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; squid-users mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> &gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i> i use haproxy to load balance 2 squid instances.  using this:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://serverfault.com/questions/249316/how-can-i-remove-balanced-node-from-haproxy-via-command-line">http://serverfault.com/questions/249316/how-can-i-remove-balanced-node-from-haproxy-via-command-line</A>
</I>&gt;<i>
</I>&gt;<i> you should be able to setup a process to mark you boxes offline, at
</I>&gt;<i> will, thereby allowing you to reconfigure your instances.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>


-- 
Samuel Anderson  |  Information Technology Administrator  |  International
Document Services

IDS  |  11629 South 700 East, Suite 200  |  Draper, UT 84020-4607

-- 
CONFIDENTIALITY NOTICE:
This e-mail and any attachments are confidential. If you are not an 
intended recipient, please contact the sender to report the error and 
delete all copies of this message from your system.  Any unauthorized 
review, use, disclosure or distribution is prohibited.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150317/3b10e245/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150317/3b10e245/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002824.html">[squid-users] Refresh ACL list only
</A></li>
	<LI>Next message (by thread): <A HREF="002820.html">[squid-users] Refresh ACL list only
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2825">[ date ]</a>
              <a href="thread.html#2825">[ thread ]</a>
              <a href="subject.html#2825">[ subject ]</a>
              <a href="author.html#2825">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
