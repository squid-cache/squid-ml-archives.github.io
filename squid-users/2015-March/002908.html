<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid just stopping
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20just%20stopping&In-Reply-To=%3CCAAq-SCBy3uJQ85YJDwJZC4L%2BW_Ft9UuNaoNm7rqtsLAA2iyM6Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002904.html">
   <LINK REL="Next"  HREF="002910.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid just stopping</H1>
    <B>Ian Harper</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20just%20stopping&In-Reply-To=%3CCAAq-SCBy3uJQ85YJDwJZC4L%2BW_Ft9UuNaoNm7rqtsLAA2iyM6Q%40mail.gmail.com%3E"
       TITLE="[squid-users] squid just stopping">idharper at gmail.com
       </A><BR>
    <I>Fri Mar 20 15:54:14 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002904.html">[squid-users] Error when using peek/splice/terminate with Squid	3.5.1
</A></li>
        <LI>Next message (by thread): <A HREF="002910.html">[squid-users] squid just stopping
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2908">[ date ]</a>
              <a href="thread.html#2908">[ thread ]</a>
              <a href="subject.html#2908">[ subject ]</a>
              <a href="author.html#2908">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have squid running ok on one machine doing basic forwarding but when I
try to add a setting for url redirection it just stops with no errors.

I cloned the machine and owrked on the url redirection and eventually
settled on squirm and got it working, when I went back to the original
machine to try it again it did the same.

When I try to run it maunally on different port etc using a different
config file on either machine it does the same.

Below is the log output

squid -f squid.conf-2 -X -N -a 3129
2015/03/20 15:45:22.131| command-line -X overrides: ALL,7
2015/03/20 15:45:22.132| http(s)_port: found Listen on Port: 3129
2015/03/20 15:45:22.132| http(s)_port: found Listen on wildcard address:
*:3129
2015/03/20 15:45:22.132| CacheManager::registerAction: registering legacy
mem
2015/03/20 15:45:22.132| CacheManager::findAction: looking for action mem
2015/03/20 15:45:22.132| Action not found.
2015/03/20 15:45:22.132| CacheManager::registerAction: registered mem
2015/03/20 15:45:22.132| CacheManager::registerAction: registering legacy
squidaio_counts
2015/03/20 15:45:22.132| CacheManager::findAction: looking for action
squidaio_counts
2015/03/20 15:45:22.132| Action not found.
2015/03/20 15:45:22.132| CacheManager::registerAction: registered
squidaio_counts
2015/03/20 15:45:22.132| CacheManager::registerAction: registering legacy
diskd
2015/03/20 15:45:22.132| CacheManager::findAction: looking for action diskd
2015/03/20 15:45:22.132| Action not found.
2015/03/20 15:45:22.132| CacheManager::registerAction: registered diskd
2015/03/20 15:45:22.132| Detected IPv6 hybrid or v4-mapping stack...
2015/03/20 15:45:22.132| IPv6 transport Enabled
2015/03/20 15:45:22.132| aclDestroyACLs: invoked
2015/03/20 15:45:22.132| cbdataFree: 0x7ff55b585af8
2015/03/20 15:45:22.132| cbdataFree: Freeing 0x7ff55b585af8
2015/03/20 15:45:22.132| ACL::Prototype::Registered: invoked for type src
2015/03/20 15:45:22.132| ACL::Prototype::Registered:    yes
2015/03/20 15:45:22.132| ACL::FindByName 'all'
2015/03/20 15:45:22.132| ACL::FindByName found no match
2015/03/20 15:45:22.132| aclParseAclLine: Creating ACL 'all'
2015/03/20 15:45:22.132| ACL::Prototype::Factory: cloning an object for
type 'src'
2015/03/20 15:45:22.132| aclIpParseIpData: all
2015/03/20 15:45:22.132| aclIpParseIpData: magic 'all' found.
2015/03/20 15:45:22.132| aclParseAclList: looking for ACL name 'all'
2015/03/20 15:45:22.133| ACL::FindByName 'all'
2015/03/20 15:45:22.133| Processing Configuration File: squid.conf-2 (depth
0)
2015/03/20 15:45:22.134| Processing: 'visible_hostname mailsrv1'
2015/03/20 15:45:22.134| Processing: 'debug_options rotate=3 ALL,2'
2015/03/20 15:45:22.134| Processing: 'cache_effective_user squid'
2015/03/20 15:45:22.134| Processing: 'cache_effective_group squid'
2015/03/20 15:45:22.134| Processing: 'url_rewrite_program
/usr/local/squirm/bin/squirm'
2015/03/20 15:45:22.134| Processing: 'redirect_children 5'
2015/03/20 15:45:22.134| Processing: 'dns_nameservers 208.67.222.222
208.67.220.220 192.168.32.1 192.168.32.2 192.168.40.254 192.168.40.5'
2015/03/20 15:45:22.134| Processing: 'http_port 3329'
2015/03/20 15:45:22.134| http(s)_port: found Listen on Port: 3329
2015/03/20 15:45:22.134| http(s)_port: found Listen on wildcard address:
*:3329
2015/03/20 15:45:22.134| Processing: 'hierarchy_stoplist cgi-bin ?'
2015/03/20 15:45:22.134| Processing: 'coredump_dir /var/spool/squid'
2015/03/20 15:45:22.134| Processing: 'refresh_pattern ^ftp:
1440    20%     10080'
2015/03/20 15:45:22.134| Processing: 'refresh_pattern ^gopher:  1440
0%      1440'
2015/03/20 15:45:22.134| Processing: 'refresh_pattern -i (/cgi-bin/|\?)
0       0%      0'
2015/03/20 15:45:22.134| Processing: 'refresh_pattern .         0
20%     4320'
2015/03/20 15:45:22.134| Processing: 'delay_initial_bucket_level 0'
2015/03/20 15:45:22.134| aclParseAclList: looking for ACL name 'all'
2015/03/20 15:45:22.134| ACL::FindByName 'all'
2015/03/20 15:45:22.134| aclParseAclList: looking for ACL name 'all'
2015/03/20 15:45:22.134| ACL::FindByName 'all'
2015/03/20 15:45:22.134| aclParseAclList: looking for ACL name 'all'
2015/03/20 15:45:22.134| ACL::FindByName 'all'
2015/03/20 15:45:22.134| aclParseAclList: looking for ACL name 'all'
2015/03/20 15:45:22.134| ACL::FindByName 'all'
2015/03/20 15:45:22.134| aclParseAclList: looking for ACL name 'all'
2015/03/20 15:45:22.134| ACL::FindByName 'all'
2015/03/20 15:45:22.134| aclParseAclList: looking for ACL name 'all'
2015/03/20 15:45:22.134| ACL::FindByName 'all'
2015/03/20 15:45:22.134| Log definition name 'squid' file
'/var/log/squid/access.log'
2015/03/20 15:45:22.134| wccp2_add_service_list: added service id 0
2015/03/20 15:45:22.134| aclParseAclList: looking for ACL name 'all'
2015/03/20 15:45:22.134| ACL::FindByName 'all'
2015/03/20 15:45:22.134| aclParseAclList: looking for ACL name 'all'
2015/03/20 15:45:22.134| ACL::FindByName 'all'
2015/03/20 15:45:22.134| tools.cc(671) uniqueHostname:  Config: '
2015/03/20 15:45:22.134| tools.cc(671) uniqueHostname:  Config: '
2015/03/20 15:45:22.134| Initializing https proxy context
2015/03/20 15:45:22.139| Using SSLv2/SSLv3.
2015/03/20 15:45:22.141| Setting RSA key generation callback.
2015/03/20 15:45:22.141| Setting certificate verification callback.
2015/03/20 15:45:22.141| Setting CA certificate locations.
2015/03/20 15:45:22.153| leave_suid: PID 16685 called
2015/03/20 15:45:22.153| leave_suid: PID 16685 giving up root, becoming
'squid'
2015/03/20 15:45:22.153| command-line -X overrides: rotate=3 ALL,2
[<A HREF="https://lists.squid-cache.org/listinfo/squid-users">root at host2</A> squid]#


and this is the contents on the squid.conf-2 file


*more squid.conf-2*
#
visible_hostname mailsrv1
# Recommended minimum configuration:
debug_options rotate=3 ALL,2

cache_effective_user squid
cache_effective_group squid
url_rewrite_program /usr/local/squirm/bin/squirm
redirect_children 5

# add dns server for squid to use specifically
dns_nameservers 208.67.222.222 208.67.220.220 192.168.32.1 192.168.32.2
192.168.40.254 192.168.40.5

# Example rule allowing access from your local networks.
# Adapt to list your (internal) IP networks from where browsing
# should be allowed

#
# Recommended minimum Access Permission configuration:
#
# Only allow cachemgr access from localhost

# Deny requests to certain unsafe ports

# Deny CONNECT to other than secure SSL ports
#http_access deny CONNECT !SSL_ports

# We strongly recommend the following be uncommented to protect innocent
# web applications running on the proxy server who think the only
# one who can access services on &quot;localhost&quot; is a local user
#http_access deny to_localhost

#
# INSERT YOUR OWN RULE(S) HERE TO ALLOW ACCESS FROM YOUR CLIENTS
#

# Example rule allowing access from your local networks.
# Adapt localnet in the ACL section to list your (internal) IP networks
# from where browsing should be allowed

# And finally deny all other access to this proxy

# Squid normally listens to port 3128
http_port 3329

# We recommend you to use at least the following line.
hierarchy_stoplist cgi-bin ?


# Uncomment and adjust the following to add a disk cache directory.

# Leave coredumps in the first cache dir
coredump_dir /var/spool/squid

# Add any of your own refresh_pattern entries above these.
refresh_pattern ^ftp:           1440    20%     10080
refresh_pattern ^gopher:        1440    0%      1440
refresh_pattern -i (/cgi-bin/|\?) 0     0%      0
refresh_pattern .               0       20%     4320

delay_initial_bucket_level 0

Can anyone tell me what I am doing wrong ? all I am after is a non-caching
squid proxy server which will do some url redirection.

Thanks

Ian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150320/580c68ed/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150320/580c68ed/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002904.html">[squid-users] Error when using peek/splice/terminate with Squid	3.5.1
</A></li>
	<LI>Next message (by thread): <A HREF="002910.html">[squid-users] squid just stopping
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2908">[ date ]</a>
              <a href="thread.html#2908">[ thread ]</a>
              <a href="subject.html#2908">[ subject ]</a>
              <a href="author.html#2908">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
