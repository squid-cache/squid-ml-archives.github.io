<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] i want to block images with size more than 40 KB
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20i%20want%20to%20block%20images%20with%20size%20more%20than%2040%20KB&In-Reply-To=%3C5511DB2A.1050201%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002933.html">
   <LINK REL="Next"  HREF="002936.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] i want to block images with size more than 40 KB</H1>
    <B>Yuri Voinov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20i%20want%20to%20block%20images%20with%20size%20more%20than%2040%20KB&In-Reply-To=%3C5511DB2A.1050201%40gmail.com%3E"
       TITLE="[squid-users] i want to block images with size more than 40 KB">yvoinov at gmail.com
       </A><BR>
    <I>Tue Mar 24 21:46:18 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002933.html">[squid-users] i want to block images with size more than 40 KB
</A></li>
        <LI>Next message (by thread): <A HREF="002936.html">[squid-users] i want to block images with size more than 40 KB
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2934">[ date ]</a>
              <a href="thread.html#2934">[ thread ]</a>
              <a href="subject.html#2934">[ subject ]</a>
              <a href="author.html#2934">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

So far, this has not been done. You can be the first! ;)

25.03.15 12:25, snakeeyes &#1087;&#1080;&#1096;&#1077;&#1090;:
&gt;<i> Thank you. Can you help me with this feature ?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> cheers
</I>&gt;<i> 
</I>&gt;<i> -----Original Message----- From: squid-users
</I>&gt;<i> [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On Behalf Of
</I>&gt;<i> Yuri Voinov Sent: Tuesday, March 24, 2015 1:58 PM To:
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> Subject: Re: [squid-users] i want
</I>&gt;<i> to block images with size more than 40 KB
</I>&gt;<i> 
</I>&gt;<i> Don't think so.
</I>&gt;<i> 
</I>&gt;<i> Probably you'll have to write your own helper to handle dynamic
</I>&gt;<i> content. Or use the content adaptaion feature.
</I>&gt;<i> 
</I>&gt;<i> 25.03.15 11:34, snakeeyes &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;&gt;<i> BTW   can squid block dynamically loaded images, and ajax
</I>&gt;&gt;<i> request which return images. I want that on yahoo and google Is
</I>&gt;&gt;<i> that possible ? ========================= , thanks  it seems okay
</I>&gt;&gt;<i> for normal http sites
</I>&gt;<i> 
</I>&gt;&gt;<i> I want to ask , is there a trick can we do it so that it be
</I>&gt;&gt;<i> applied to google &amp; yahoo images search ??
</I>&gt;<i> 
</I>&gt;&gt;<i> Here is wt I see in yahoo logs , just small logs and all images
</I>&gt;&gt;<i> are allowed and not blocked =====
</I>&gt;<i> 
</I>&gt;&gt;<i> 1426881748.078  70740 x.70 TCP_MISS/200 11790 CONNECT 
</I>&gt;&gt;<i> js.dmtry.com:443 - DIRECT/184.170.128.58 - 1426881749.077    103 
</I>&gt;&gt;<i> xx.70 TCP_MISS/200 2228 POST <A HREF="http://sd.symcd.com/">http://sd.symcd.com/</A> - 
</I>&gt;&gt;<i> DIRECT/23.9.123.27 application/ocsp-response 1426881749.752
</I>&gt;&gt;<i> 29 xx.70 TCP_MISS/200 2228 POST <A HREF="http://sd.symcd.com/">http://sd.symcd.com/</A> - 
</I>&gt;&gt;<i> DIRECT/23.9.123.27 application/ocsp-response 1426881750.098
</I>&gt;&gt;<i> 21 xx.70 TCP_MISS/200 393 GET <A HREF="http://ping.chartbeat.net/ping?">http://ping.chartbeat.net/ping?</A> - 
</I>&gt;&gt;<i> DIRECT/23.21.149.132 image/gif 1426881750.731  62443 xx.70 
</I>&gt;&gt;<i> TCP_MISS/200 122185 CONNECT www.gstatic.com:443 - 
</I>&gt;&gt;<i> DIRECT/206.126.112.185 - 1426881751.476   xx.70 TCP_MISS/200
</I>&gt;&gt;<i> 4191 CONNECT secure.footprint.net:443 - DIRECT/8.12.219.125 - 
</I>&gt;&gt;<i> 1426881752.215    505 xxx.70 TCP_MISS/200 459 CONNECT 
</I>&gt;&gt;<i> secure.footprint.net:443 - DIRECT/8.12.219.125 - 1426881753.005 
</I>&gt;&gt;<i> 1091 xx.70 TCP_MISS/200 5303 CONNECT av.beap.bc.yahoo.com:443 - 
</I>&gt;&gt;<i> DIRECT/76.13.28.21 - 1426881762.280  12994 188.161.107.70 
</I>&gt;&gt;<i> TCP_MISS/200 5502 CONNECT d.adgear.com:443 -
</I>&gt;&gt;<i> DIRECT/205.204.71.140 - 1426881764.215  16497 xx70 TCP_MISS/200
</I>&gt;&gt;<i> 9832 CONNECT ads.yahoo.com:443 - DIRECT/98.139.225.43 -
</I>&gt;&gt;<i> 1426881764.216  16453 x.70 TCP_MISS/200 6534 CONNECT
</I>&gt;&gt;<i> ads.yahoo.com:443 - DIRECT/98.139.225.43 - 1426881765.044  18777
</I>&gt;&gt;<i> x.70 TCP_MISS/200 11132 CONNECT ads.yahoo.com:443 -
</I>&gt;&gt;<i> DIRECT/98.139.225.43 - 1426881765.681  15193 xx.107.70
</I>&gt;&gt;<i> TCP_MISS/200 6225 CONNECT comet.yahoo.com:443 -
</I>&gt;&gt;<i> DIRECT/72.30.196.161 - 1426881765.691  14149 xx.107.70
</I>&gt;&gt;<i> TCP_MISS/200 832 CONNECT comet.yahoo.com:443 - 
</I>&gt;&gt;<i> DIRECT/72.30.196.161 - 1426881766.046 116219 xx.70 TCP_MISS/200
</I>&gt;&gt;<i> 529 CONNECT d31qbv1cthcecs.cloudfront.net:443 -
</I>&gt;&gt;<i> DIRECT/54.230.16.189 - 1426881766.714    296 xx.70 TCP_MISS/200
</I>&gt;&gt;<i> 2228 POST <A HREF="http://ocsp.verisign.com/">http://ocsp.verisign.com/</A> - DIRECT/23.9.123.27 
</I>&gt;&gt;<i> application/ocsp-response 1426881770.049 117609 xx107.70 
</I>&gt;&gt;<i> TCP_MISS/200 711 CONNECT d5nxst8fruw4z.cloudfront.net:443 - 
</I>&gt;&gt;<i> DIRECT/54.240.160.97 - 1426881780.403  67786 xx.70 TCP_MISS/200
</I>&gt;&gt;<i> 852 CONNECT www.yahoo.com:443 - DIRECT/98.139.180.149 -
</I>&gt;&gt;<i> 1426881781.519 353 xx.70 TCP_MISS/200 571 GET 
</I>&gt;&gt;<i> <A HREF="http://data.cnn.com/jsonp/breaking_news/domestic.json?">http://data.cnn.com/jsonp/breaking_news/domestic.json?</A> - 
</I>&gt;&gt;<i> DIRECT/157.166.249.67 application/javascript 1426881782.057
</I>&gt;&gt;<i> 118788 xx.70 TCP_MISS/200 19972 CONNECT
</I>&gt;&gt;<i> cdn2sitescout-a.akamaihd.net:443 - DIRECT/23.15.4.18 -
</I>&gt;&gt;<i> 1426881790.558  71055 xx TCP_MISS/200 26805 CONNECT
</I>&gt;&gt;<i> s.yimg.com:443 - DIRECT/206.190.56.191 - 1426881814.445 100461 xx
</I>&gt;&gt;<i> TCP_MISS/200 124129 CONNECT ca.yahoo.com:443 - 
</I>&gt;&gt;<i> DIRECT/98.139.180.149 - 1426881818.437  70709 xx70 TCP_MISS/200 
</I>&gt;&gt;<i> 8503 CONNECT beap-bc.yahoo.com:443 - DIRECT/206.190.57.60 -
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> regards
</I>&gt;<i> 
</I>&gt;&gt;<i> -----Original Message----- From: Amos Jeffries 
</I>&gt;&gt;<i> [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>] Sent: Friday, March 20, 2015 9:56
</I>&gt;&gt;<i> AM To: snakeeyes Cc: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> Subject:
</I>&gt;&gt;<i> Re: [squid-users] i want to block images with size more than 40
</I>&gt;&gt;<i> KB
</I>&gt;<i> 
</I>&gt;&gt;<i> On 21/03/2015 12:05 p.m., snakeeyes wrote:
</I>&gt;&gt;&gt;<i> Hi amos , thanks for reply I have tried @ top of squidf.conf
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> acl images rep_header Content-Type ^image/ ^x-image/ acl small
</I>&gt;&gt;&gt;<i>  rep_header Content-Length ^[1234]?[0-9]$ http_reply_access
</I>&gt;&gt;&gt;<i> deny small images
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> are you sure that its blocking images with size &gt;40KB ????
</I>&gt;<i> 
</I>&gt;&gt;<i> Sorry I slightly mis-read your request. What I gave is blocking
</I>&gt;&gt;<i> images *smaller* than 40 bytes (see what I mean about cut-n-paste
</I>&gt;&gt;<i> without understanding?).
</I>&gt;<i> 
</I>&gt;&gt;<i> To block images *over* 40 bytes change that to: http_reply_access
</I>&gt;&gt;<i> deny !small images
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;&gt;<i> also I didn&#8217;t see extensions like jpg or bmp or similar like
</I>&gt;&gt;&gt;<i> that ??!!
</I>&gt;<i> 
</I>&gt;&gt;<i> Because HTTP does not transfer files. It transfers data.
</I>&gt;&gt;<i> Sometimes data can *also* be found inside &quot;files&quot;, sometimes
</I>&gt;&gt;<i> not.
</I>&gt;<i> 
</I>&gt;&gt;<i> HTTP Content-Type header describes what format the data is. In
</I>&gt;&gt;<i> this case you requested images in general, so thats the pattern I
</I>&gt;&gt;<i> gave.
</I>&gt;<i> 
</I>&gt;&gt;<i> Amos
</I>&gt;<i> 
</I>&gt;&gt;<i> _______________________________________________ squid-users
</I>&gt;&gt;<i> mailing list <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> 
</I>&gt;&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________ squid-users mailing
</I>&gt;<i> list <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> 
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> 
</I>-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2

iQEcBAEBCAAGBQJVEdsqAAoJENNXIZxhPexG1HUH+wd53AlTsoahDpNqarPUZaow
TIX0kX1Qc9pIUteHEIWG/Rba2af4P2d6xZC8ZFOwsTyNYw0wfd2a9cUiN4qfM1ez
Y/NJTqS0kOMh81GL+GXaDkfatSVwk0LGkejoApNsKZHxCaIQ2lkOnNcJBuhQjA0o
enMmE0YYy7qj0+Tgbez4rDD2JRw7QtLuZ1QaYk7WuzNK0IS+xMAe9ioORu9hlYS7
8uCPgg00O1ISy1fHcIPYtkdn5tAGGRxPP5Km0ueC4ZNMzOIrsHlW7NrqvSDGdQjD
oQDg40ACtvA/qjIzP0//N9orEWetyakAdPgbHs5mgIYV8UJO1ZXZVNb6C9Q6vRw=
=zU9w
-----END PGP SIGNATURE-----

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002933.html">[squid-users] i want to block images with size more than 40 KB
</A></li>
	<LI>Next message (by thread): <A HREF="002936.html">[squid-users] i want to block images with size more than 40 KB
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2934">[ date ]</a>
              <a href="thread.html#2934">[ thread ]</a>
              <a href="subject.html#2934">[ subject ]</a>
              <a href="author.html#2934">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
