<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] assertion failed: client_side.cc:1515:	&quot;connIsUsable(http-&gt;getConn())
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20assertion%20failed%3A%20client_side.cc%3A1515%3A%0A%09%22connIsUsable%28http-%3EgetConn%28%29%29&In-Reply-To=%3CCAN8nrKBfe-8M7KA%2BN9fzPfkeh2P4XT%2B6V96VA4Q-2igx8Szdmg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002937.html">
   <LINK REL="Next"  HREF="002542.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] assertion failed: client_side.cc:1515:	&quot;connIsUsable(http-&gt;getConn())</H1>
    <B>Dan Charlesworth</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20assertion%20failed%3A%20client_side.cc%3A1515%3A%0A%09%22connIsUsable%28http-%3EgetConn%28%29%29&In-Reply-To=%3CCAN8nrKBfe-8M7KA%2BN9fzPfkeh2P4XT%2B6V96VA4Q-2igx8Szdmg%40mail.gmail.com%3E"
       TITLE="[squid-users] assertion failed: client_side.cc:1515:	&quot;connIsUsable(http-&gt;getConn())">dan at getbusi.com
       </A><BR>
    <I>Wed Mar 25 23:10:54 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002937.html">[squid-users] assertion failed: client_side.cc:1515:	&quot;connIsUsable(http-&gt;getConn())
</A></li>
        <LI>Next message (by thread): <A HREF="002542.html">[squid-users] Help with Squid Proxy on AWS Nat Instance.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2952">[ date ]</a>
              <a href="thread.html#2952">[ thread ]</a>
              <a href="subject.html#2952">[ subject ]</a>
              <a href="author.html#2952">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Okie dokie! boxes are crashing all over the place today so I finally have
some back traces without stuff optimised out.

Here are the details from two of these crashes which occurred on two
separate deployments&#8212;please let me know if they actually contain actionable
information now and I will upload them to the bug.

Thanks folks.


On 25 March 2015 at 09:28, Dan Charlesworth &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">dan at getbusi.com</A>&gt; wrote:

&gt;<i> Resending this after the last attempt went into the mail server black hole:
</I>&gt;<i>
</I>&gt;<i> Hey Amos
</I>&gt;<i>
</I>&gt;<i> I decided I&#8217;m not confident enough in 3.5.HEAD, after last time, to go
</I>&gt;<i> back into production with it. Going to to do some more local testing first.
</I>&gt;<i>
</I>&gt;<i> That being said, I now have 3.4.12 in production with optimisations
</I>&gt;<i> disabled and it seems to be doing fine performance and stability-wise. I
</I>&gt;<i> only managed to capture one crash with optimisations disabled, so far, but
</I>&gt;<i> it seemed to have some memory-related corruption, unfortunately.
</I>&gt;<i>
</I>&gt;<i> Updates to come over the next few days.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 23 March 2015 at 16:59, Dan Charlesworth &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">dan at getbusi.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hey Amos
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I decided I&#8217;m not confident enough in 3.5.HEAD, after last time, to go
</I>&gt;&gt;<i> back into production with it. Going to to do some more local testing first.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> That being said, I now have 3.4.12 in production with optimisations
</I>&gt;&gt;<i> disabled and it seems to be doing fine performance and stability-wise. I
</I>&gt;&gt;<i> only managed to capture one crash with optimisations disabled, so far, but
</I>&gt;&gt;<i> it seemed to have some memory-related corruption, unfortunately.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> More to come tomorrow :-)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt; On 20 Mar 2015, at 6:37 pm, Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt; wrote:
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; On 20/03/2015 8:34 p.m., Dan Charlesworth wrote:
</I>&gt;&gt;<i> &gt;&gt; Thanks Amos.
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; I'll put together a build with the upcoming snapshot on Monday, might
</I>&gt;&gt;<i> even try disabling optimization for it too.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Please do. If you're only getting 40 RPS out of the proxy during the
</I>&gt;&gt;<i> &gt; test its hard to see how not optimizing the code could be any worse, and
</I>&gt;&gt;<i> &gt; it will help identifiying some traffic details.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Amos
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150326/e23f020c/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150326/e23f020c/attachment.htm</A>&gt;
-------------- next part --------------
#0  0x0000003edf832625 in raise (sig=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64
#1  0x0000003edf833e05 in abort () at abort.c:92
#2  0x000000000062105f in xassert (msg=0x91a311 &quot;connIsUsable(http-&gt;getConn())&quot;, file=0x9198b0 &quot;client_side.cc&quot;, line=1515) at debug.cc:566
#3  0x00000000005db79f in clientSocketRecipient (node=0x50f0d008, http=0x51075ab8, rep=0x12f95940, receivedData=...) at client_side.cc:1515
#4  0x000000000061b574 in clientStreamCallback (thisObject=0x451353c8, http=0x51075ab8, rep=0x12f95940, replyBuffer=...) at clientStream.cc:186
#5  0x00000000006061eb in clientReplyContext::processReplyAccessResult (this=0x5118d098, accessAllowed=...) at client_side_reply.cc:2058
#6  0x00000000006057fd in clientReplyContext::ProcessReplyAccessResult (rv=..., voidMe=0x5118d098) at client_side_reply.cc:1961
#7  0x00000000007cd727 in ACLChecklist::checkCallback (this=0x573cd338, answer=...) at Checklist.cc:161
#8  0x00000000007ccddb in ACLChecklist::completeNonBlocking (this=0x573cd338) at Checklist.cc:46
#9  0x00000000007cddd6 in ACLChecklist::resumeNonBlockingCheck (this=0x573cd338, state=0xc6ca20) at Checklist.cc:279
#10 0x000000000064cc01 in ExternalACLLookup::LookupDone (data=0x573cd338, result=...) at external_acl.cc:1623
#11 0x000000000064bd37 in externalAclHandleReply (data=0x573a3918, reply=...) at external_acl.cc:1427
#12 0x000000000067e01f in helperReturnBuffer (request_number=0, srv=0x17021e8, hlp=0x1701fe8, 
    msg=0x17023a0 &quot;ERR log=%7B%22policy_group_id%22%3A%226%22%2C%22categories%22%3A%22%5B28%5D%22%2C%22user%22%3A%2215ifrain%22%2C%22set_id%22%3A%222%22%2C%22user_group%22%3A%22stu2015%22%7D&quot;, msg_end=0x170244b &quot;&quot;) at helper.cc:858
#13 0x000000000067e9f3 in helperHandleRead (conn=..., 
    buf=0x17023a0 &quot;ERR log=%7B%22policy_group_id%22%3A%226%22%2C%22categories%22%3A%22%5B28%5D%22%2C%22user%22%3A%2215ifrain%22%2C%22set_id%22%3A%222%22%2C%22user_group%22%3A%22stu2015%22%7D&quot;, len=172, flag=COMM_OK, xerrno=0, data=0x17021e8) at helper.cc:951
#14 0x00000000007e6f2a in CommIoCbPtrFun::dial (this=0x4d838d80) at CommCalls.cc:188
#15 0x00000000005fb498 in CommCbFunPtrCallT&lt;CommIoCbPtrFun&gt;::fire (this=0x4d838d50) at CommCalls.h:376
#16 0x00000000007d2b40 in AsyncCall::make (this=0x4d838d50) at AsyncCall.cc:32
#17 0x00000000007d61ff in AsyncCallQueue::fireNext (this=0x15e4c60) at AsyncCallQueue.cc:52
#18 0x00000000007d5f5f in AsyncCallQueue::fire (this=0x15e4c60) at AsyncCallQueue.cc:38
#19 0x0000000000644bef in EventLoop::dispatchCalls (this=0x7fffad41f1c0) at EventLoop.cc:158
#20 0x0000000000644a7f in EventLoop::runOnce (this=0x7fffad41f1c0) at EventLoop.cc:135
#21 0x00000000006448b8 in EventLoop::run (this=0x7fffad41f1c0) at EventLoop.cc:99
#22 0x00000000006cddbe in SquidMain (argc=3, argv=0x7fffad41f3f8) at main.cc:1528
#23 0x00000000006cd32d in SquidMainSafe (argc=3, argv=0x7fffad41f3f8) at main.cc:1260
#24 0x00000000006cd308 in main (argc=3, argv=0x7fffad41f3f8) at main.cc:1252
-------------- next part --------------
#0  0x0000003edf832625 in raise (sig=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64
        resultvar = 0
        pid = &lt;value optimized out&gt;
        selftid = 22272
#1  0x0000003edf833e05 in abort () at abort.c:92
        save_stage = 2
        act = {__sigaction_handler = {sa_handler = 0x7fffad41f3f0, sa_sigaction = 0x7fffad41f3f0}, sa_mask = {__val = {0, 0, 270038181553, 70, 
              6467189871727941185, 270037707608, 139919232107720, 270158213848, 4294967295, 8310675446604656483, 5, 12929552, 0, 0, 0, 0}}, 
          sa_flags = -549396320, sa_restorer = 0x5}
        sigs = {__val = {32, 0 &lt;repeats 15 times&gt;}}
#2  0x000000000062105f in xassert (msg=0x91a311 &quot;connIsUsable(http-&gt;getConn())&quot;, file=0x9198b0 &quot;client_side.cc&quot;, line=1515) at debug.cc:566
        __FUNCTION__ = &quot;xassert&quot;
#3  0x00000000005db79f in clientSocketRecipient (node=0x50f0d008, http=0x51075ab8, rep=0x12f95940, receivedData=...) at client_side.cc:1515
        context = {p_ = 0x5118bfe8}
        mustSendLastChunk = false
#4  0x000000000061b574 in clientStreamCallback (thisObject=0x451353c8, http=0x51075ab8, rep=0x12f95940, replyBuffer=...) at clientStream.cc:186
        next = 0x50f0d008
        __FUNCTION__ = &quot;clientStreamCallback&quot;
#5  0x00000000006061eb in clientReplyContext::processReplyAccessResult (this=0x5118d098, accessAllowed=...) at client_side_reply.cc:2058
        __FUNCTION__ = &quot;processReplyAccessResult&quot;
        localTempBuffer = {flags = {error = 0}, length = 0, offset = 0, data = 0x5118c297 &quot;&quot;}
        buf = 0x5118c008 &quot;HTTP/1.1 302 Found\r\nLocation: <A HREF="http://www.google.com.au/ads/user-lists/1062572271/?label=GTyFCMn1rwQQ76HW-gM&amp;fmt=3&amp;num=1&amp;cv=7&amp;frm=0&amp;url=http%3A//www.kia.com.au/build-and-price/select-colour%3Fsgo%3DD4A">http://www.google.com.au/ads/user-lists/1062572271/?label=GTyFCMn1rwQQ76HW-gM&amp;fmt=3&amp;num=1&amp;cv=7&amp;frm=0&amp;url=http%3A//www.kia.com.au/build-and-price/select-colour%3Fsgo%3DD4A</A>&quot;...
        body_buf = 0x5118c297 &quot;&quot;
        body_size = 0
#6  0x00000000006057fd in clientReplyContext::ProcessReplyAccessResult (rv=..., voidMe=0x5118d098) at client_side_reply.cc:1961
        me = 0x5118d098
#7  0x00000000007cd727 in ACLChecklist::checkCallback (this=0x573cd338, answer=...) at Checklist.cc:161
        callback_ = 0x6057d2 &lt;clientReplyContext::ProcessReplyAccessResult(allow_t, void*)&gt;
        cbdata_ = 0x5118d098
        __FUNCTION__ = &quot;checkCallback&quot;
#8  0x00000000007ccddb in ACLChecklist::completeNonBlocking (this=0x573cd338) at Checklist.cc:46
No locals.
#9  0x00000000007cddd6 in ACLChecklist::resumeNonBlockingCheck (this=0x573cd338, state=0xc6ca20) at Checklist.cc:279
No locals.
#10 0x000000000064cc01 in ExternalACLLookup::LookupDone (data=0x573cd338, result=...) at external_acl.cc:1623
        checklist = 0x573cd338
#11 0x000000000064bd37 in externalAclHandleReply (data=0x573a3918, reply=...) at external_acl.cc:1427
        cbdata = 0x573cd338
        state = 0x573a3918
        __FUNCTION__ = &quot;externalAclHandleReply&quot;
        next = 0x17023a0
        entryData = {result = {code = ACCESS_DENIED, kind = 0}, notes = {&lt;Lock&gt; = {_vptr.Lock = 0xc39980, count_ = 0}, _vptr.NotePairs = 0xc39958, entries = {
              capacity = 16, count = 1, items = 0x5797d4b0}}, user = {static npos = 18446744073709551615, size_ = 0, len_ = 0, buf_ = 0x0}, password = {
            static npos = 18446744073709551615, size_ = 0, len_ = 0, buf_ = 0x0}, message = {static npos = 18446744073709551615, size_ = 0, len_ = 0, 
            buf_ = 0x0}, tag = {static npos = 18446744073709551615, size_ = 0, len_ = 0, buf_ = 0x0}, log = {static npos = 18446744073709551615, size_ = 128, 
            len_ = 97, 
---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---
            buf_ = 0x3aee59c0 &quot;{\&quot;policy_group_id\&quot;:\&quot;6\&quot;,\&quot;categories\&quot;:\&quot;[28]\&quot;,\&quot;user\&quot;:\&quot;15ifrain\&quot;,\&quot;set_id\&quot;:\&quot;2\&quot;,\&quot;user_group\&quot;:\&quot;stu2015\&quot;}&quot;}}
        label = 0x0
        entry = {p_ = 0x5080e440}
#12 0x000000000067e01f in helperReturnBuffer (request_number=0, srv=0x17021e8, hlp=0x1701fe8, 
    msg=0x17023a0 &quot;ERR log=%7B%22policy_group_id%22%3A%226%22%2C%22categories%22%3A%22%5B28%5D%22%2C%22user%22%3A%2215ifrain%22%2C%22set_id%22%3A%222%22%2C%22user_group%22%3A%22stu2015%22%7D&quot;, msg_end=0x170244b &quot;&quot;) at helper.cc:858
        response = {result = HelperReply::Error, notes = {&lt;Lock&gt; = {_vptr.Lock = 0xc39980, count_ = 0}, _vptr.NotePairs = 0xc39958, entries = {capacity = 16, 
              count = 1, items = 0x129dfc30}}, whichServer = {cbc = 0x0, lock = 0x0}, other_ = {buf = 0x4305caf0 &quot;&quot;, size = 0, max_capacity = 168, 
            capacity = 2048, stolen = 0, static CBDATA_MemBuf = 15}}
        callback = 0x64b80c &lt;externalAclHandleReply(void*, HelperReply const&amp;)&gt;
        cbdata = 0x573a3918
        r = 0x54d86410
        __FUNCTION__ = &quot;helperReturnBuffer&quot;
#13 0x000000000067e9f3 in helperHandleRead (conn=..., 
    buf=0x17023a0 &quot;ERR log=%7B%22policy_group_id%22%3A%226%22%2C%22categories%22%3A%22%5B28%5D%22%2C%22user%22%3A%2215ifrain%22%2C%22set_id%22%3A%222%22%2C%22user_group%22%3A%22stu2015%22%7D&quot;, len=172, flag=COMM_OK, xerrno=0, data=0x17021e8) at helper.cc:951
        msg = 0x17023a0 &quot;ERR log=%7B%22policy_group_id%22%3A%226%22%2C%22categories%22%3A%22%5B28%5D%22%2C%22user%22%3A%2215ifrain%22%2C%22set_id%22%3A%222%22%2C%22user_group%22%3A%22stu2015%22%7D&quot;
        i = 0
        skip = 1
        t = 0x170244b &quot;&quot;
        srv = 0x17021e8
        hlp = 0x1701fe8
        __FUNCTION__ = &quot;helperHandleRead&quot;
#14 0x00000000007e6f2a in CommIoCbPtrFun::dial (this=0x4d838d80) at CommCalls.cc:188
No locals.
#15 0x00000000005fb498 in CommCbFunPtrCallT&lt;CommIoCbPtrFun&gt;::fire (this=0x4d838d50) at CommCalls.h:376
No locals.
#16 0x00000000007d2b40 in AsyncCall::make (this=0x4d838d50) at AsyncCall.cc:32
        __FUNCTION__ = &quot;make&quot;
#17 0x00000000007d61ff in AsyncCallQueue::fireNext (this=0x15e4c60) at AsyncCallQueue.cc:52
        call = {p_ = 0x4d838d50}
        __FUNCTION__ = &quot;fireNext&quot;
#18 0x00000000007d5f5f in AsyncCallQueue::fire (this=0x15e4c60) at AsyncCallQueue.cc:38
        made = true
#19 0x0000000000644bef in EventLoop::dispatchCalls (this=0x7fffad41f1c0) at EventLoop.cc:158
        dispatchedSome = false
#20 0x0000000000644a7f in EventLoop::runOnce (this=0x7fffad41f1c0) at EventLoop.cc:135
        sawActivity = false
        waitingEngine = 0x7fffad41f240
        __FUNCTION__ = &quot;runOnce&quot;
#21 0x00000000006448b8 in EventLoop::run (this=0x7fffad41f1c0) at EventLoop.cc:99
No locals.
#22 0x00000000006cddbe in SquidMain (argc=3, argv=0x7fffad41f3f8) at main.cc:1528
        WIN32_init_err = 0
        __FUNCTION__ = &quot;SquidMain&quot;
        signalEngine = {&lt;AsyncEngine&gt; = {_vptr.AsyncEngine = 0xc39690}, loop = @0x7fffad41f1c0}
---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---
        store_engine = {&lt;AsyncEngine&gt; = {_vptr.AsyncEngine = 0xc396d0}, &lt;No data fields&gt;}
        comm_engine = {&lt;AsyncEngine&gt; = {_vptr.AsyncEngine = 0xc412b0}, &lt;No data fields&gt;}
        mainLoop = {errcount = 0, last_loop = false, engines = {capacity = 16, count = 4, items = 0x1b61090}, timeService = 0x7fffad41f230, 
          primaryEngine = 0x7fffad41f240, loop_delay = 0, error = false, runOnceResult = false}
        time_engine = {_vptr.TimeEngine = 0xc3ba90}
#23 0x00000000006cd32d in SquidMainSafe (argc=3, argv=0x7fffad41f3f8) at main.cc:1260
        __FUNCTION__ = &quot;SquidMainSafe&quot;
#24 0x00000000006cd308 in main (argc=3, argv=0x7fffad41f3f8) at main.cc:1252
No locals.
-------------- next part --------------
#3  0x00000000005db79f in clientSocketRecipient (node=0x50f0d008, http=0x51075ab8, rep=0x12f95940, receivedData=...) at client_side.cc:1515
1515	    assert(connIsUsable(http-&gt;getConn()));
-------------- next part --------------
#3  0x00000000005db79f in clientSocketRecipient (node=0x2c820638, http=0x2c821fa8, rep=0x2c992f50, receivedData=...) at client_side.cc:1515
1515	    assert(connIsUsable(http-&gt;getConn()));
(gdb) bt full
#0  0x000000397e232625 in raise (sig=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64
        resultvar = 0
        pid = &lt;value optimized out&gt;
        selftid = 31091
#1  0x000000397e233e05 in abort () at abort.c:92
        save_stage = 2
        act = {__sigaction_handler = {sa_handler = 0x7fff1b66ad50, sa_sigaction = 0x7fff1b66ad50}, sa_mask = {__val = {0, 0, 246929663665, 70, 
              5046418814977706629, 70, 469233704, 247066473176, 247066473152, 8310675446604656483, 8391446528407659105, 469233704, 247064022992, 9571908, 
              459710800, 247066473152}}, sa_flags = 733721288, sa_restorer = 0x2bbbb2c8}
        sigs = {__val = {32, 0 &lt;repeats 15 times&gt;}}
#2  0x000000000062105f in xassert (msg=0x91a311 &quot;connIsUsable(http-&gt;getConn())&quot;, file=0x9198b0 &quot;client_side.cc&quot;, line=1515) at debug.cc:566
        __FUNCTION__ = &quot;xassert&quot;
#3  0x00000000005db79f in clientSocketRecipient (node=0x2c820638, http=0x2c821fa8, rep=0x2c992f50, receivedData=...) at client_side.cc:1515
        context = {p_ = 0x2c5ceb08}
        mustSendLastChunk = false
#4  0x000000000061b574 in clientStreamCallback (thisObject=0x2c5cfbb8, http=0x2c821fa8, rep=0x2c992f50, replyBuffer=...) at clientStream.cc:186
        next = 0x2c820638
        __FUNCTION__ = &quot;clientStreamCallback&quot;
#5  0x00000000006061eb in clientReplyContext::processReplyAccessResult (this=0x2c1e6e08, accessAllowed=...) at client_side_reply.cc:2058
        __FUNCTION__ = &quot;processReplyAccessResult&quot;
        localTempBuffer = {flags = {error = 0}, length = 0, offset = 0, data = 0x2c5ceca2 &quot;&quot;}
        buf = 0x2c5ceb28 &quot;HTTP/1.1 302 Found\r\nDate: Wed, 25 Mar 2015 21:12:43 GMT\r\nLocation: <A HREF="http://api.bizographics.com/v1/profile.json?api_key=6332f8b7316a4d1284e9c1217a367347&amp;callback=Demdex.parseBizo&amp;3pc=true\r\nServer:">http://api.bizographics.com/v1/profile.json?api_key=6332f8b7316a4d1284e9c1217a367347&amp;callback=Demdex.parseBizo&amp;3pc=true\r\nServer:</A> ngin&quot;...
        body_buf = 0x2c5ceca2 &quot;&quot;
        body_size = 0
#6  0x00000000006057fd in clientReplyContext::ProcessReplyAccessResult (rv=..., voidMe=0x2c1e6e08) at client_side_reply.cc:1961
        me = 0x2c1e6e08
#7  0x00000000007cd727 in ACLChecklist::checkCallback (this=0x1fd57528, answer=...) at Checklist.cc:161
        callback_ = 0x6057d2 &lt;clientReplyContext::ProcessReplyAccessResult(allow_t, void*)&gt;
        cbdata_ = 0x2c1e6e08
        __FUNCTION__ = &quot;checkCallback&quot;
#8  0x00000000007ccddb in ACLChecklist::completeNonBlocking (this=0x1fd57528) at Checklist.cc:46
No locals.
#9  0x00000000007cddd6 in ACLChecklist::resumeNonBlockingCheck (this=0x1fd57528, state=0xc6ca20) at Checklist.cc:279
No locals.
#10 0x000000000064cc01 in ExternalACLLookup::LookupDone (data=0x1fd57528, result=...) at external_acl.cc:1623
        checklist = 0x1fd57528
#11 0x000000000064bd37 in externalAclHandleReply (data=0x10be5948, reply=...) at external_acl.cc:1427
        cbdata = 0x1fd57528
        state = 0x10be5948
        __FUNCTION__ = &quot;externalAclHandleReply&quot;
        next = 0x22e9ab0
        entryData = {result = {code = ACCESS_DENIED, kind = 0}, notes = {&lt;Lock&gt; = {_vptr.Lock = 0xc39980, count_ = 0}, _vptr.NotePairs = 0xc39958, entries = {
              capacity = 16, count = 1, items = 0x2c1f4800}}, user = {static npos = 18446744073709551615, size_ = 0, len_ = 0, buf_ = 0x0}, password = {
            static npos = 18446744073709551615, size_ = 0, len_ = 0, buf_ = 0x0}, message = {static npos = 18446744073709551615, size_ = 0, len_ = 0, 
            buf_ = 0x0}, tag = {static npos = 18446744073709551615, size_ = 0, len_ = 0, buf_ = 0x0}, log = {static npos = 18446744073709551615, size_ = 512, 
            len_ = 147, 
---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---=
            buf_ = 0x2cb18740 &quot;{\&quot;deny_list\&quot;:0,\&quot;deny_set\&quot;:3,\&quot;categories\&quot;:\&quot;[45]\&quot;,\&quot;policy_group_id\&quot;:\&quot;2\&quot;,\&quot;user\&quot;:\&quot;ehodges22\&quot;,\&quot;user_group\&quot;:\&quot;stage3\&quot;,\&quot;deny_type\&quot;:\&quot;filesize\&quot;,\&quot;set_id\&quot;:\&quot;3\&quot;}&quot;}}
        label = 0x0
        entry = {p_ = 0x2cb1c110}
#12 0x000000000067e01f in helperReturnBuffer (request_number=0, srv=0x22e98f8, hlp=0x22e96f8, 
    msg=0x22e9ab0 &quot;ERR log=%7B%22deny_list%22%3A0%2C%22deny_set%22%3A3%2C%22categories%22%3A%22%5B45%5D%22%2C%22policy_group_id%22%3A%222%22%2C%22user%22%3A%22ehodges22%22%2C%22user_group%22%3A%22stage3%22%2C%22deny_typ&quot;..., msg_end=0x22e9ba9 &quot;&quot;) at helper.cc:858
        response = {result = HelperReply::Error, notes = {&lt;Lock&gt; = {_vptr.Lock = 0xc39980, count_ = 0}, _vptr.NotePairs = 0xc39958, entries = {capacity = 16, 
              count = 1, items = 0x2cb8e8b0}}, whichServer = {cbc = 0x0, lock = 0x0}, other_ = {buf = 0x24a9a650 &quot;&quot;, size = 0, max_capacity = 246, 
            capacity = 2048, stolen = 0, static CBDATA_MemBuf = 15}}
        callback = 0x64b80c &lt;externalAclHandleReply(void*, HelperReply const&amp;)&gt;
        cbdata = 0x10be5948
        r = 0x1d2d7f40
        __FUNCTION__ = &quot;helperReturnBuffer&quot;
#13 0x000000000067e9f3 in helperHandleRead (conn=..., 
    buf=0x22e9ab0 &quot;ERR log=%7B%22deny_list%22%3A0%2C%22deny_set%22%3A3%2C%22categories%22%3A%22%5B45%5D%22%2C%22policy_group_id%22%3A%222%22%2C%22user%22%3A%22ehodges22%22%2C%22user_group%22%3A%22stage3%22%2C%22deny_typ&quot;..., len=250, flag=COMM_OK, xerrno=0, data=0x22e98f8) at helper.cc:951
        msg = 0x22e9ab0 &quot;ERR log=%7B%22deny_list%22%3A0%2C%22deny_set%22%3A3%2C%22categories%22%3A%22%5B45%5D%22%2C%22policy_group_id%22%3A%222%22%2C%22user%22%3A%22ehodges22%22%2C%22user_group%22%3A%22stage3%22%2C%22deny_typ&quot;...
        i = 0
        skip = 1
        t = 0x22e9ba9 &quot;&quot;
        srv = 0x22e98f8
        hlp = 0x22e96f8
        __FUNCTION__ = &quot;helperHandleRead&quot;
#14 0x00000000007e6f2a in CommIoCbPtrFun::dial (this=0x2cb910b0) at CommCalls.cc:188
No locals.
#15 0x00000000005fb498 in CommCbFunPtrCallT&lt;CommIoCbPtrFun&gt;::fire (this=0x2cb91080) at CommCalls.h:376
No locals.
#16 0x00000000007d2b40 in AsyncCall::make (this=0x2cb91080) at AsyncCall.cc:32
        __FUNCTION__ = &quot;make&quot;
#17 0x00000000007d61ff in AsyncCallQueue::fireNext (this=0x21f3040) at AsyncCallQueue.cc:52
        call = {p_ = 0x2cb91080}
        __FUNCTION__ = &quot;fireNext&quot;
#18 0x00000000007d5f5f in AsyncCallQueue::fire (this=0x21f3040) at AsyncCallQueue.cc:38
        made = true
#19 0x0000000000644bef in EventLoop::dispatchCalls (this=0x7fff1b66ab20) at EventLoop.cc:158
        dispatchedSome = false
#20 0x0000000000644a7f in EventLoop::runOnce (this=0x7fff1b66ab20) at EventLoop.cc:135
        sawActivity = false
        waitingEngine = 0x7fff1b66aba0
        __FUNCTION__ = &quot;runOnce&quot;
#21 0x00000000006448b8 in EventLoop::run (this=0x7fff1b66ab20) at EventLoop.cc:99
No locals.
#22 0x00000000006cddbe in SquidMain (argc=3, argv=0x7fff1b66ad58) at main.cc:1528
        WIN32_init_err = 0
        __FUNCTION__ = &quot;SquidMain&quot;
---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---
        signalEngine = {&lt;AsyncEngine&gt; = {_vptr.AsyncEngine = 0xc39690}, loop = @0x7fff1b66ab20}
        store_engine = {&lt;AsyncEngine&gt; = {_vptr.AsyncEngine = 0xc396d0}, &lt;No data fields&gt;}
        comm_engine = {&lt;AsyncEngine&gt; = {_vptr.AsyncEngine = 0xc412b0}, &lt;No data fields&gt;}
        mainLoop = {errcount = 0, last_loop = false, engines = {capacity = 16, count = 4, items = 0x2746bb0}, timeService = 0x7fff1b66ab90, 
          primaryEngine = 0x7fff1b66aba0, loop_delay = 0, error = false, runOnceResult = false}
        time_engine = {_vptr.TimeEngine = 0xc3ba90}
#23 0x00000000006cd32d in SquidMainSafe (argc=3, argv=0x7fff1b66ad58) at main.cc:1260
        __FUNCTION__ = &quot;SquidMainSafe&quot;
#24 0x00000000006cd308 in main (argc=3, argv=0x7fff1b66ad58) at main.cc:1252
No locals.
-------------- next part --------------
#0  0x000000397e232625 in raise (sig=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64
#1  0x000000397e233e05 in abort () at abort.c:92
#2  0x000000000062105f in xassert (msg=0x91a311 &quot;connIsUsable(http-&gt;getConn())&quot;, file=0x9198b0 &quot;client_side.cc&quot;, line=1515) at debug.cc:566
#3  0x00000000005db79f in clientSocketRecipient (node=0x2c820638, http=0x2c821fa8, rep=0x2c992f50, receivedData=...) at client_side.cc:1515
#4  0x000000000061b574 in clientStreamCallback (thisObject=0x2c5cfbb8, http=0x2c821fa8, rep=0x2c992f50, replyBuffer=...) at clientStream.cc:186
#5  0x00000000006061eb in clientReplyContext::processReplyAccessResult (this=0x2c1e6e08, accessAllowed=...) at client_side_reply.cc:2058
#6  0x00000000006057fd in clientReplyContext::ProcessReplyAccessResult (rv=..., voidMe=0x2c1e6e08) at client_side_reply.cc:1961
#7  0x00000000007cd727 in ACLChecklist::checkCallback (this=0x1fd57528, answer=...) at Checklist.cc:161
#8  0x00000000007ccddb in ACLChecklist::completeNonBlocking (this=0x1fd57528) at Checklist.cc:46
#9  0x00000000007cddd6 in ACLChecklist::resumeNonBlockingCheck (this=0x1fd57528, state=0xc6ca20) at Checklist.cc:279
#10 0x000000000064cc01 in ExternalACLLookup::LookupDone (data=0x1fd57528, result=...) at external_acl.cc:1623
#11 0x000000000064bd37 in externalAclHandleReply (data=0x10be5948, reply=...) at external_acl.cc:1427
#12 0x000000000067e01f in helperReturnBuffer (request_number=0, srv=0x22e98f8, hlp=0x22e96f8, 
    msg=0x22e9ab0 &quot;ERR log=%7B%22deny_list%22%3A0%2C%22deny_set%22%3A3%2C%22categories%22%3A%22%5B45%5D%22%2C%22policy_group_id%22%3A%222%22%2C%22user%22%3A%22ehodges22%22%2C%22user_group%22%3A%22stage3%22%2C%22deny_typ&quot;..., msg_end=0x22e9ba9 &quot;&quot;) at helper.cc:858
#13 0x000000000067e9f3 in helperHandleRead (conn=..., 
    buf=0x22e9ab0 &quot;ERR log=%7B%22deny_list%22%3A0%2C%22deny_set%22%3A3%2C%22categories%22%3A%22%5B45%5D%22%2C%22policy_group_id%22%3A%222%22%2C%22user%22%3A%22ehodges22%22%2C%22user_group%22%3A%22stage3%22%2C%22deny_typ&quot;..., len=250, flag=COMM_OK, xerrno=0, data=0x22e98f8) at helper.cc:951
#14 0x00000000007e6f2a in CommIoCbPtrFun::dial (this=0x2cb910b0) at CommCalls.cc:188
#15 0x00000000005fb498 in CommCbFunPtrCallT&lt;CommIoCbPtrFun&gt;::fire (this=0x2cb91080) at CommCalls.h:376
#16 0x00000000007d2b40 in AsyncCall::make (this=0x2cb91080) at AsyncCall.cc:32
#17 0x00000000007d61ff in AsyncCallQueue::fireNext (this=0x21f3040) at AsyncCallQueue.cc:52
#18 0x00000000007d5f5f in AsyncCallQueue::fire (this=0x21f3040) at AsyncCallQueue.cc:38
#19 0x0000000000644bef in EventLoop::dispatchCalls (this=0x7fff1b66ab20) at EventLoop.cc:158
#20 0x0000000000644a7f in EventLoop::runOnce (this=0x7fff1b66ab20) at EventLoop.cc:135
#21 0x00000000006448b8 in EventLoop::run (this=0x7fff1b66ab20) at EventLoop.cc:99
#22 0x00000000006cddbe in SquidMain (argc=3, argv=0x7fff1b66ad58) at main.cc:1528
#23 0x00000000006cd32d in SquidMainSafe (argc=3, argv=0x7fff1b66ad58) at main.cc:1260
#24 0x00000000006cd308 in main (argc=3, argv=0x7fff1b66ad58) at main.cc:1252
-------------- next part --------------
#3  0x00000000005db79f in clientSocketRecipient (node=0x2c820638, http=0x2c821fa8, rep=0x2c992f50, receivedData=...) at client_side.cc:1515
1515	    assert(connIsUsable(http-&gt;getConn()));
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002937.html">[squid-users] assertion failed: client_side.cc:1515:	&quot;connIsUsable(http-&gt;getConn())
</A></li>
	<LI>Next message (by thread): <A HREF="002542.html">[squid-users] Help with Squid Proxy on AWS Nat Instance.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2952">[ date ]</a>
              <a href="thread.html#2952">[ thread ]</a>
              <a href="subject.html#2952">[ subject ]</a>
              <a href="author.html#2952">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
