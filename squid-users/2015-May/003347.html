<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Cache strategy advice
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Cache%20strategy%20advice&In-Reply-To=%3C55430FB3.201%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003346.html">
   <LINK REL="Next"  HREF="003349.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Cache strategy advice</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Cache%20strategy%20advice&In-Reply-To=%3C55430FB3.201%40treenet.co.nz%3E"
       TITLE="[squid-users] Cache strategy advice">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri May  1 05:31:31 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="003346.html">[squid-users] How do I no-cache the following url?
</A></li>
        <LI>Next message (by thread): <A HREF="003349.html">[squid-users] assertion failed: comm.cc:178: &quot;fd_table[conn-&gt;fd].halfClosedReader != NULL&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3347">[ date ]</a>
              <a href="thread.html#3347">[ thread ]</a>
              <a href="subject.html#3347">[ subject ]</a>
              <a href="author.html#3347">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 1/05/2015 7:13 a.m., Yan Seiner wrote:
&gt;<i> I am building a small embedded squid box.
</I>&gt;<i> 
</I>&gt;<i> It has 4GB of ram, dual core CPU, and a 32GB SSD.
</I>&gt;<i> 
</I>&gt;<i> Since I'm running a tiny embedded linux distro (openwrt) most of those
</I>&gt;<i> resources are available; I'm only using about 1MB of RAM and about 300MB
</I>&gt;<i> of the SSD.
</I>&gt;<i> 
</I>&gt;<i> My incoming internet service is 30 to 60 Mb/sec.
</I>&gt;<i> 
</I>&gt;<i> My goals:
</I>&gt;<i> 
</I>&gt;<i> Maximize throughput (I don't want squid to slow down the connection)
</I>&gt;<i> Minimize wear on the SSD
</I>&gt;<i> 
</I>&gt;<i> I am planning to set up two workers but beyond that I'm not really how
</I>&gt;<i> to effectively use what I have.
</I>
I advise using only one worker (non-SMP) on dual-core systems. Squid
workers will happily consume the entirety of any CPU cores you let it
use at peak times. So leaving one for the OS and helpers etc to use is a
good idea.

Single worker of Squid with memory-only caching can cope with upwards of
50Mbps. So your traffic expectations should not be a worry there unless
the cores are very slow (MHz range).


If you want to minimize wear on the SSD avoid cache_dir storage types
entirely they are guaranteed to wear it out faster than normal. Current
Squid will run fine with only memory-only caching. Adjust the cache_mem
directive as wanted - default is a 256MB memory cache.

Also, avoid having the device swap memory at all costs - even with the
SSD. If it reaches the point of swapping Squid performance will drop
radically and the SSD wear will increase to match.


Any other features are optional or depend on exactly what you want to be
doing policy-wise with the proxy.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="003346.html">[squid-users] How do I no-cache the following url?
</A></li>
	<LI>Next message (by thread): <A HREF="003349.html">[squid-users] assertion failed: comm.cc:178: &quot;fd_table[conn-&gt;fd].halfClosedReader != NULL&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3347">[ date ]</a>
              <a href="thread.html#3347">[ thread ]</a>
              <a href="subject.html#3347">[ subject ]</a>
              <a href="author.html#3347">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
