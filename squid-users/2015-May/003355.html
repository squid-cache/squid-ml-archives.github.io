<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] assertion failed: comm.cc:178: &quot;fd_table[conn-&gt;fd].halfClosedReader != NULL&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20assertion%20failed%3A%20comm.cc%3A178%3A%0A%20%22fd_table%5Bconn-%3Efd%5D.halfClosedReader%20%21%3D%20NULL%22&In-Reply-To=%3C1430474982238-4671005.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003349.html">
   <LINK REL="Next"  HREF="003357.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] assertion failed: comm.cc:178: &quot;fd_table[conn-&gt;fd].halfClosedReader != NULL&quot;</H1>
    <B>HackXBack</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20assertion%20failed%3A%20comm.cc%3A178%3A%0A%20%22fd_table%5Bconn-%3Efd%5D.halfClosedReader%20%21%3D%20NULL%22&In-Reply-To=%3C1430474982238-4671005.post%40n4.nabble.com%3E"
       TITLE="[squid-users] assertion failed: comm.cc:178: &quot;fd_table[conn-&gt;fd].halfClosedReader != NULL&quot;">hack.back at hotmail.com
       </A><BR>
    <I>Fri May  1 10:09:42 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="003349.html">[squid-users] assertion failed: comm.cc:178: &quot;fd_table[conn-&gt;fd].halfClosedReader != NULL&quot;
</A></li>
        <LI>Next message (by thread): <A HREF="003357.html">[squid-users] assertion failed: comm.cc:178: &quot;fd_table[conn-&gt;fd].halfClosedReader != NULL&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3355">[ date ]</a>
              <a href="thread.html#3355">[ thread ]</a>
              <a href="subject.html#3355">[ subject ]</a>
              <a href="author.html#3355">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>squid.conf you can see it all , and the answer on your question is no i dont
have .


# should be allowed
acl localnet src 10.11.20.0/24
acl localnet src 10.150.15.0/24

# ACL for rewriter
acl fakespeed url_regex -i
\.*(speedtest|espeed).*\/((latency|random.*|upload)\.(jpg|txt|php)).*
acl rewriter-link url_regex -i
^http.*(google|googlesyndication)\.com\/(pagead|js)\/(bg|js)\/.*\.js

# OPTIONS WHICH AFFECT THE NEIGHBOR SELECTION ALGORITHM
#
-----------------------------------------------------------------------------
cache_peer 10.11.20.100 parent 80 0
cache_peer_access 10.11.20.100 allow fakespeed
cache_peer_access 10.11.20.100 deny all

# OPTIONS INFLUENCING REQUEST FORWARDING
#
-----------------------------------------------------------------------------
never_direct allow fakespeed
never_direct deny all
always_direct deny fakespeed





# add on squid.conf to remove ads
########################
acl ads-block url_regex -i &quot;/etc/squid/ads.block&quot;
http_access deny ads-block
http_reply_access deny ads-block

acl SSL_ports port 443
acl Safe_ports port 80        # http
acl Safe_ports port 21        # ftp
acl Safe_ports port 443        # https
acl Safe_ports port 70        # gopher
acl Safe_ports port 210        # wais
acl Safe_ports port 1025-65535    # unregistered ports
acl Safe_ports port 280        # http-mgmt
acl Safe_ports port 488        # gss-http
acl Safe_ports port 591        # filemaker
acl Safe_ports port 777        # multiling http
acl CONNECT method CONNECT

# Deny requests to certain unsafe ports
http_access deny !Safe_ports

# Deny CONNECT to other than secure SSL ports
http_access deny CONNECT !SSL_ports

# Only allow cachemgr access from localhost
http_access allow localhost manager
http_access deny manager

##Redirect some sites to storeid
################################################################################################
################################################################################################
################################################################################################
# Windows update acls
acl windowsupdate dstdomain windowsupdate.microsoft.com
acl windowsupdate dstdomain .update.microsoft.com
acl windowsupdate dstdomain download.windowsupdate.com
acl windowsupdate dstdomain redir.metaservices.microsoft.com
acl windowsupdate dstdomain images.metaservices.microsoft.com
acl windowsupdate dstdomain c.microsoft.com
acl windowsupdate dstdomain www.download.windowsupdate.com
acl windowsupdate dstdomain wustat.windows.com
acl windowsupdate dstdomain crl.microsoft.com
acl windowsupdate dstdomain sls.microsoft.com
acl windowsupdate dstdomain productactivation.one.microsoft.com
acl windowsupdate dstdomain ntservicepack.microsoft.com

# Windows update methods
acl wuCONNECT dstdomain www.update.microsoft.com
acl wuCONNECT dstdomain sls.microsoft.com

# Windows updates rules
http_access allow CONNECT wuCONNECT localnet
http_access allow CONNECT wuCONNECT localhost
http_access allow windowsupdate localnet
http_access allow windowsupdate localhost

acl store_rewrite_list url_regex -i fbcdn\/.*(jpg|gif|png|swf)
acl store_rewrite_list url_regex -i (akamaihd|fbcdn|facebook)\.(net|com)\/.*
acl store_rewrite_list url_regex -i attachment\.fbsbx\.com
acl store_rewrite_list url_regex -i fbcdn-dragon-a\.akamaihd\.net
acl store_rewrite_list url_regex -i socialpointgames\.com
acl store_rewrite_list url_regex -i miniclipcdn\.com
acl store_rewrite_list url_regex -i
syntasia\.hs\.llnwd\.net\/[a-z][0-9]+\/baseballheroes\/.*
acl store_rewrite_list url_regex -i \.google\-analytics\.com
acl store_rewrite_list url_regex -i google\-analytics\.com
acl store_rewrite_list url_regex -i video\.google\.com\/ThumbnailServer
acl store_rewrite_list url_regex -i
(youtube|google).*(videoplayback|liveplay)
acl store_rewrite_list url_regex -i
youtube.*(ptracking|stream_204|player_204|gen_204).*
acl store_rewrite_list url_regex -i
(youtube|google|googlevideo).*videoplayback.*
acl store_rewrite_list url_regex -i c\.android\.clients\.google\.com
acl store_rewrite_list url_regex -i phobos\.apple\.com
acl store_rewrite_list url_regex -i \.apple\.com
acl store_rewrite_list url_regex -i \/speedtest\/.*(jpg|txt|png|swf)
acl store_rewrite_list url_regex -i speedtest.*\/.*(jpg|txt|png|swf)
acl store_rewrite_list url_regex -i \.youjizz\.com\/.*(3gp|mpg|flv|mp4)
acl store_rewrite_list url_regex -i \.phncdn\.com\/.*(mp4|flv|3gp|mpg|wmv)
acl store_rewrite_list url_regex -i \.cdn13\.com\/.*(flv|mp3|mp4|3gp|wmv)
acl store_rewrite_list url_regex -i \.filehippo\.com\/.*
acl store_rewrite_list url_regex -i filehippo\.com\/.*
acl store_rewrite_list url_regex -i dl\.sourceforge\.net\/project\/.*
acl store_rewrite_list url_regex -i googlevideo\.com
acl store_rewrite_list url_regex -i reverbnation\.com
acl store_rewrite_list url_regex -i
c2lo\.reverbnation\.com\/audio_player\/ec_stream_song\/.*
acl store_rewrite_list url_regex -i (4shared|4shared\-china)\.com
acl store_rewrite_list url_regex -i 4shared\.com
acl store_rewrite_list url_regex -i bp\.blogspot\.com\/.*
acl store_rewrite_list url_regex -i ytimg\.com
acl store_rewrite_list url_regex -i (ggpht|googleusercontent)\.com
acl store_rewrite_list url_regex -i (s|i[0-9]*)\.ytimg\.com\/.*
acl store_rewrite_list url_regex -i video\.google\.com\/ThumbnailServer
acl store_rewrite_list url_regex -i (google\.co(m|\.uk|\.id))\/.*
acl store_rewrite_list url_regex -i (\.gstatic\.com.*|\.wikimapia\.org)
acl store_rewrite_list url_regex -i gstatic.com\/images.*
acl store_rewrite_list url_regex -i gstatic.com\/.*
acl store_rewrite_list url_regex -i bing\.(com|net)\/.*
acl store_rewrite_list url_regex -i (dmcdn\.net|dailymotion\.com).*
acl store_rewrite_list url_regex -i avast\.com
acl store_rewrite_list url_regex -i geo\.kaspersky\.com
acl store_rewrite_list url_regex -i update\.avg\.com
acl store_rewrite_list url_regex -i
(cbk|mt|khm|mlt|tbn|mw)[0-9]?.google\.co(m|\.uk|\.id)
acl store_rewrite_list url_regex -i
(\.doubleclick\.net|\.quantserve\.com|\.googlesyndication\.com|yieldmanager|cpxinteractive)
acl store_rewrite_list url_regex -i sdlc\-esd\.sun\.com
acl store_rewrite_list url_regex -i cloudfront\.net
acl store_rewrite_list url_regex -i sendspace\.com
acl store_rewrite_list url_regex -i rapidshare\.com
acl store_rewrite_list url_regex -i 185\.27\.237\.[\d]*
acl store_rewrite_list url_regex -i syntasia\.hs\.llnwd\.net
acl store_rewrite_list url_regex -i playspace\.r\.worldssl\.net
acl store_rewrite_list url_regex -i playit\.pk
acl store_rewrite_list url_regex -i attachment\.fbsbx\.com
acl store_rewrite_list url_regex -i firedrive\.com
acl store_rewrite_list url_regex -i cache\.pack\.google\.com
acl store_rewrite_list url_regex -i pack\.google\.com
acl store_rewrite_list url_regex -i dropboxusercontent\.com
acl store_rewrite_list url_regex -i aclst\.com
acl store_rewrite_list url_regex -i blackberry\.com
acl store_rewrite_list url_regex -i (bitgravity|opera)\.com
acl store_rewrite_list url_regex -i ggpht\.co(m|\.(id|uk))
acl store_rewrite_list url_regex -i instagram\.com
acl store_rewrite_list url_regex -i virtualearth\.net
acl store_rewrite_list url_regex -i cnet\.com
acl store_rewrite_list url_regex -i xvideos\.com
acl store_rewrite_list url_regex -i .*xhcdn.*
acl store_rewrite_list url_regex -i steampowered\.com
acl store_rewrite_list url_regex -i starhub\.com
acl store_rewrite_list url_regex -i (wargaming|hwcdn)\.net
acl store_rewrite_list url_regex -i indowebster\.com
acl store_rewrite_list url_regex -i filetrip\.net
acl store_rewrite_list url_regex -i get4mobile\.net
acl store_rewrite_list url_regex -i tube8\.com
acl store_rewrite_list url_regex -i (redtube|redtubefiles)\.com
acl store_rewrite_list url_regex -i .*nsimg.*
acl store_rewrite_list url_regex -i .*mystreamservice.*
acl store_rewrite_list url_regex -i youjizz\.com
acl store_rewrite_list url_regex -i .*phncdn.*
acl store_rewrite_list url_regex -i .*keezmovies.*
acl store_rewrite_list url_regex -i .*youporn.*
acl store_rewrite_list url_regex -i .*rncdn.*
acl store_rewrite_list url_regex -i .*spankwire.*
acl store_rewrite_list url_regex -i .*pornhub.*
acl store_rewrite_list url_regex -i .*playvid.*
acl store_rewrite_list url_regex -i .*maxporn.*
acl store_rewrite_list url_regex -i .*fucktube.*
acl store_rewrite_list url_regex -i .*slutload-media.*
acl store_rewrite_list url_regex -i .*hardsextube.*
acl store_rewrite_list url_regex -i public\.extremetube\.phncdn\.com
acl store_rewrite_list url_regex -i video\.pornhub\.phncdn\.com
acl store_rewrite_list url_regex -i public\.keezmovies\.phncdn\.com
acl store_rewrite_list url_regex -i public\.youporn\.phncdn\.com
acl store_rewrite_list url_regex -i public\.spankwire\.phncdn\.com
acl store_rewrite_list url_regex -i public\.keezmovies\.com
acl store_rewrite_list url_regex -i public\.spankwire\.com
acl store_rewrite_list url_regex -i pornhub\.com
acl store_rewrite_list url_regex -i slutload-media\.com
acl store_rewrite_list url_regex -i hardsextube\.com

acl store_rewrite_list_domain url_regex
^http:\/\/([a-zA-Z-]+[0-9-]+)\.[A-Za-z]*\.[A-Za-z]*
acl store_rewrite_list_domain url_regex
(([a-z]{1,2}[0-9]{1,3})|([0-9]{1,3}[a-z]{1,2}))\.[a-z]*[0-9]?\.[a-z]{3}
acl store_rewrite_list_path urlpath_regex
\.(jp(e?g|e|2)|gif|png|tiff?|bmp|ico|flv|avc|zip|mp3|3gp|rar|on2|mar|exe)$
acl store_rewrite_list_domain_CDN url_regex (khm|mt)[0-9]?.google.com
streamate.doublepimp.com.*\.js\? photos-[a-z].ak.fbcdn.net
\.rapidshare\.com.*\/[0-9]*\/.*\/[^\/]*
^http:\/\/(www\.ziddu\.com.*\.[^\/]{3,4})\/(.*) \.doubleclick\.net.*
yieldmanager cpxinteractive
^http:\/\/[.a-z0-9]*\.photobucket\.com.*\.[a-z]{3}$ quantserve\.com

store_id_access allow store_rewrite_list
store_id_access allow store_rewrite_list_domain
store_id_access allow store_rewrite_list_path
store_id_access allow store_rewrite_list_domain_CDN


####for looping 302 on youtube
acl text-html rep_mime_type text/html
acl http302 http_status 302

store_miss deny text-html
store_miss deny http302
send_hit deny text-html
send_hit deny http302

acl norewrite url_regex -i redirector\.c\.android\.clients\.google\.com
store_id_access deny norewrite

##this for send to storeid
acl youtube_to_storeid url_regex -i
^https?:\/\/.*(youtube|google).*(set_awesome|stream_204|playback|ptracking|watchtime|atr|player_204|videogoodput|get_video|get_video_info|s\?|delayplay|ads|qoe|gen_204).*(video_id|docid|\&amp;v|content_v)\=([^\&amp;\s]*).*
acl youtube_to_storeid url_regex -i
^https?:\/\/.*(youtube|google).*videoplayback.*

acl gvt1_to_storeid url_regex -i ^https?:\/\/.*\.gvt1\.com\/market\/.*
acl mgccw_to_storeid url_regex -i ^https?:\/\/.*\.mgccw\.com\/.*

store_id_access allow youtube_to_storeid
store_id_access allow gvt1_to_storeid
store_id_access allow mgccw_to_storeid

## this for 206
acl partial dstdomain .googlevideo.com
acl partial dstdomain .youtube.com
acl partial dstdomain .mgccw.com
range_offset_limit none partial
store_id_access allow  partial

acl partial_content  url_regex -i ^http:\/\/122\.102\.49.*
acl partial_content  url_regex -i ^http:\/\/202\.93\.20.*
acl partial_content  url_regex -i ^http:\/\/armdl\.adobe\.com/pub.*
acl partial_content  url_regex -i ^http:\/\/download\.cdn\.mozilla\.net.*
acl partial_content  url_regex -i ^http.*netmarble\.co\.id.*
acl partial_content  url_regex -i ^http.*gemscool\.com.*
acl partial_content  url_regex -i ^http.*crossfire\.web\.id.*
acl partial_content  url_regex -i ^http.*garenanow\.com.*
acl partial_content  url_regex -i ^http.*winnerinter\.co\.id.*
acl partial_content  url_regex -i ^http.*starhub\.com.*
acl partial_content  url_regex -i ^http.*lytogame\.com.*
acl partial_content  url_regex -i ^http.*megaxus\.com
acl partial_content  url_regex -i ^http.*images\.offensive-security\.com.*
acl partial_content  url_regex -i ^http.*download\.windowsupdate\.com
acl partial_content  url_regex -i ^http.*ws\.microsoft\.com
acl partial_content  url_regex -i ^http.*fs41\.idup\.in.*
acl partial_content  url_regex -i ^http.*tusfiles\.net.*
acl partial_content  url_regex -i ^http.*files\.jalantikus\.com.*
acl partial_content  url_regex -i ^http.*cdn.files.bagas31.com.*
acl partial_content  url_regex -i ^http\/\/dl\.google\.com.*
acl partial_content  url_regex -i ^http.*\.c\.pack\.google\.com.*
acl partial_content  url_regex -i
^http.*\.(exe|psf|msi|msp|msu|dmg|cab|apk)$
range_offset_limit 1 KB partial_content





acl queryreg url_regex -i gemscool\.com\/registration\/.*
acl queryreg url_regex -i gemscool\.com\/isiGcash\/.*
acl queryreg url_regex -i ^http.*live\.mytrans\.com.*
acl queryreg url_regex -i ^http.*socialpointgames\.com\/dragoncity.*USERID.*
acl queryreg url_regex -i ^http.*fb_source=bookmark_apps.*
acl queryreg url_regex -i ^http.*gvoucher.*
acl queryreg url_regex -i ^http.*\.(asp|aspx|php|xml)(\?.*|)$

cache deny queryreg

acl playstoreandroid url_regex -i
c.android.clients.google.com.market.GetBinary.GetBinary.*
store_id_access allow playstoreandroid

#acl DENYCACHE urlpath_regex
\.(ini|ui|lst|inf|pak|ver|patch|md5|cfg|lst|list|rsc|log|conf|dbd|db|aspx|js|m3u8|ts|css)$
acl DENYCACHE urlpath_regex
(notice.html|notice.swf|afs.dat|dat.asp|patchinfo.xml|version.list|iepngfix.htc|updates.txt|patchlist.txt|update.ver)
acl DENYCACHE urlpath_regex (pointblank.css|login_form.css|form.css)$
cache deny DENYCACHE

acl capcha url_regex -i (captcha|captcha-login)
cache deny capcha

acl bau dstdomain iconnect.bau.edu.lb
cache deny bau

acl bau1 dstdomain iconnect.bau.edu.lb
always_direct allow bau1

acl betty dstdomain shop.betbetty.com
cache deny betty

acl betty1 dstdomain shop.betbetty.com
always_direct allow betty1
always_direct allow all
########################################################################

acl InvalidCert ssl_error SQUID_X509_V_ERR_DOMAIN_MISMATCH
acl InvalidCert ssl_error X509_V_ERR_UNABLE_TO_GET_ISSUER_CERT
acl InvalidCert ssl_error X509_V_ERR_CERT_NOT_YET_VALID
acl InvalidCert ssl_error X509_V_ERR_ERROR_IN_CERT_NOT_BEFORE_FIELD
acl InvalidCert ssl_error X509_V_ERR_CERT_HAS_EXPIRED
acl InvalidCert ssl_error X509_V_ERR_ERROR_IN_CERT_NOT_AFTER_FIELD
acl InvalidCert ssl_error X509_V_ERR_UNABLE_TO_GET_ISSUER_CERT_LOCALLY

###FB - Insta - Google ..
acl spesifik-bump-dom dst 73.252.120.6
acl spesifik-bump-dom dst 216.58.192.0/19
acl spesifik-bump-dom dst 173.252.64.0/18
acl spesifik-bump-dom dst 31.13.93.0/24
acl spesifik-bump-dom dst 74.125.71.0/24
##iphone candy crush
acl spesifik-bump-dom dst 217.212.243.0/24
##iphone facebook
acl spesifik-bump-dom dst 179.60.192.0/24
##ipad facebook
acl spesifik-bump-dom dst 31.13.64.0/24
##iphone 6s
acl spesifik-bump-dom dst 31.13.83.0/24
acl spesifik-bump-dom dst 31.13.84.0/24
acl spesifik-bump-dom dst 2.16.0.0/13



acl https_login1 dstdomain \.(mail.yahoo.com|gmail.com)
acl https_login1 dstdomain gmail.com
acl appspot dstdomain appspot.com
acl https_login url_regex -i
^https.*(login|Login|signin|Signin|signup|Signup|Logout|logout).*
acl https_login url_regex -i ^https.*cdn\.yimg\.com.*


acl url_nobump1 url_regex -i ^https:\/\/android\.*

ssl_bump none spesifik-bump-dom
ssl_bump none InvalidCert
ssl_bump none https_login
ssl_bump none appspot
ssl_bump none url_nobump1
ssl_bump server-first all

# Example rule allowing access from your local networks.
# Adapt localnet in the ACL section to list your (internal) IP networks
# from where browsing should be allowed
http_access allow localnet
http_access allow localhost

# And finally deny all other access to this proxy
http_access deny all

################################################################################################
################################################################################################
################################################################################################
################################################################################################
################################################################################################
################################################################################################



## DNS
#dns_nameservers 127.0.0.1

# Squid normally listens to port 3128
https_port 3127 intercept ssl-bump generate-host-certificates=on
dynamic_cert_mem_cache_size=16MB cert=/etc/squid/ssl_cert/myCA.pem
http_port  3129
http_port  3128 intercept

sslcrtd_program /usr/lib/squid/ssl_crtd -s /etc/squid/ssl_db/certs/ -M 16MB
sslcrtd_children 50 startup=40 idle=1

sslproxy_capath /etc/ssl/certs
sslproxy_options NO_SSLv2 NO_SSLv3 SSL_OP_NO_TICKET

ssl_unclean_shutdown on
sslproxy_cert_error allow all

# -------------------------------------
# Tuning parameters
# -------------------------------------
#################################################################
#################################################################
store_dir_select_algorithm round-robin


ipcache_size 4096
ipcache_low 95
ipcache_high 98

memory_replacement_policy heap LRU
cache_replacement_policy heap LFUDA

cache_swap_low 90
cache_swap_high 95

# -------------------------------------
# Memory parameters
# -------------------------------------
cache_mem 1 Gb
memory_pools_limit 100 MB

maximum_object_size_in_memory 1024 KB
maximum_object_size 4096 MB
minimum_object_size 0 bytes

# Default is 20
store_objects_per_bucket 128

# Shutdown delay before terminate connections
shutdown_lifetime 30 second

# Cache user
cache_effective_user proxy
cache_effective_group proxy

# Cache manager
cache_mgr <A HREF="https://lists.squid-cache.org/listinfo/squid-users">email at email.com</A>

# Turn off collect per-client statistics
client_db off

# Hide internal networks details outside
via off
forwarded_for delete

# Do not show Squid version
httpd_suppress_version_string on

##for full url in access.log
strip_query_terms off

positive_dns_ttl 15 hours

#REFRESH PATTERN
refresh_pattern -i
\.*(speedtest|espeed).*\/((latency|random.*|upload)\.(jpg|txt|php)).* 0 0% 0
refresh_pattern -i \.(jp(e?g|e|2)|gif|png|tiff?|bmp|ico|webp|flv|mp4)(\?|$)		
14400	99%	518400	ignore-no-store override-expire ignore-reload
reload-into-ims ignore-private ignore-must-revalidate
refresh_pattern -i
\.((m?|x?|s?)htm(l?)|js|xml|php|json|css|jsp|asx|asp|asp\?.*|aspx|shtml|phtml)(\?|$)		
10080	90%	86400	ignore-no-store override-expire override-lastmod
reload-into-ims ignore-private ignore-must-revalidate
refresh_pattern -i \.(asp|aspx)(\?.*)?$ 0 0% 0
refresh_pattern -i ^http.*manifest.googlevideo.com\/.* 0 0% 0
refresh_pattern -i ^http.*shop.betbetty.com\/.* 0 0% 0
refresh_pattern -i ^livebet.b2bgaming.net\/.* 0 0% 0
refresh_pattern -i
(UpdaterModifier.exe|FreeStyle.exe|PBLauncher.exe|update.exe|NewLauncher.exe|NewAvalon.exe|hon.exe.zip|cabal.exe)$
0 50% 1440
refresh_pattern -i (PointBlank.exe.zip|HSUpdate.exe.zip|PBConfig.exe.zip) 0
50% 1440
refresh_pattern -i
(wks_avira-win32-en-pecl.info.gz|wks_avira10-win32-en-pecl.info.gz|servers.def.vpx)$
0 50% 1440
refresh_pattern -i
(setup.exe.gz|avscan.exe.gz|avguard.exe.gz|filelist.zip|AvaClient.exe) 0 50%
1440
refresh_pattern -i (livescore.com|goal.com|sbobet) 0 50% 60
refresh_pattern -i nonton\.com 360 50% 1440 reload-into-ims ignore-reload
override-expire
#refresh_pattern -i
\.(mnft|ver|html|htm|jsp|asx|asp|asp\?.*|aspx|shtml|phtml) 0 0% 0
#refresh_pattern -i \.index\.(html|htm)$ 0 75% 10080
refresh_pattern -i
^https?\:\/\/www\.google\.co(m|\.id).*(newtab|manifest)\?.* 0 0% 0
refresh_pattern .*(begin|start)\=[1-9][0-9].* 0 0% 0
refresh_pattern -i \.(php|lst|ini|list) 0 0% 0
refresh_pattern
(update.ini|Update.ini|version.list|Version.list|update.1st|update.exe|autoup.exe)
0 0% 0

# refresh pattern
----------------------------------------------------------------------------------#
refresh_pattern -i (xtrap|login|sources) 0 0% 0
refresh_pattern .*(begin|start)\=[1-9][0-9].* 0 0% 0
#refresh_pattern -i
\.(html|htm|ini|ver|patch|lst|inf|htc|jsp|asx|asp|aspx|cfg|md5|key|pub|list|db|log|cgi|js|txt)$
0 0% 0
refresh_pattern
(update.ini|Update.ini|version.list|Version.list|update.1st|update.exe|autoup.exe)
0 0% 0
refresh_pattern
(hackshield|HackShield|HSUpdate|HShield|hsupdate|nprotect|update3) 0 50% 420
override-expire override-lastmod reload-into-ims

#refresh_pattern for out from storeid
refresh_pattern -i ^http.*cdn\.youtube\/.* 79900 80% 799000 override-expire
override-lastmod reload-into-ims ignore-reload ignore-no-cache
ignore-no-store ignore-private ignore-auth ignore-must-revalidate
refresh_pattern -i ^http.*(storeid\.cdn|cdn\.porno).* 79900 80% 799000
override-expire override-lastmod reload-into-ims ignore-reload
ignore-no-cache ignore-no-store ignore-private ignore-auth
ignore-must-revalidate
refresh_pattern -i (storeid\.cdn|cdn|googlevideo\.com).* 79900 80% 799000
override-expire override-lastmod reload-into-ims ignore-reload
ignore-no-cache ignore-no-store ignore-private ignore-auth
ignore-must-revalidate










#REFRESH PATTERN
#refresh_pattern -i \.(js|css)$ 0 20% 4320 ignore-reload ignore-no-store
ignore-must-revalidate ignore-private ignore-auth store-stale
#refresh_pattern -i \.(nup|vdf|idx|gem|mcs|avc|vpx)$ 0 20% 4320
ignore-reload ignore-must-revalidate ignore-private store-stale
ignore-no-store
#refresh_pattern -i ^http:\/\/safebrowsing-cache\.google\.com\/.* 525600
100% 525600 override-expire override-lastmod reload-into-ims ignore-reload
ignore-no-cache ignore-no-store ignore-private ignore-auth
ignore-must-revalidate
#refresh_pattern -i ^http.*\/hackshield\/.* 0 20% 1440 ignore-no-store
ignore-must-revalidate ignore-private ignore-auth store-stale
#refresh_pattern -i \.(iop)$ 0 50% 1440 ignore-reload ignore-no-store
ignore-must-revalidate ignore-private ignore-auth store-stale
refresh_pattern -i
^http.*(netmarble\.co\.id|gemscool\.com|crossfire\.web\.id|garenanow\.com|winnerinter\.co\.id|starhub\.com|lytogame\.com|megaxus\.com).*
0 20% 4320 ignore-no-store ignore-private ignore-auth store-stale
#refresh_pattern -i \.(jpg|jpeg|raw|pnm|gif|bmp|tiff|swf|png|webp)(\?.*|)$
525600 100% 525600 override-expire override-lastmod reload-into-ims
ignore-reload ignore-no-cache ignore-no-store ignore-private ignore-auth
ignore-must-revalidate
#refresh_pattern -i
\.(web|avi|f4v|m4v|mpg|3gp|wmv|mov|rmvb|mkv|swf|dat|flv|fla|mp4|webm|00[1-9])
525600 100% 525600 override-expire override-lastmod reload-into-ims
ignore-reload ignore-no-cache ignore-no-store ignore-private ignore-auth
ignore-must-revalidate
#refresh_pattern -i \.(docx?|pptx?|xlsx?|pdf|lit|rtf|pdb|epub|prc|djvu)
525600 100% 525600 override-expire override-lastmod reload-into-ims
ignore-reload ignore-no-cache ignore-no-store ignore-private ignore-auth
ignore-must-revalidate
#refresh_pattern -i
\.(exe|rar|zip|tar|mar|iso|dcr|bz2|gz|7z|uha|bin|dmg|zipx|msi|msu|msp|cab|diff)
525600 100% 525600 override-expire override-lastmod reload-into-ims
ignore-reload ignore-no-cache ignore-no-store ignore-private ignore-auth
ignore-must-revalidate
#refresh_pattern -i \.(mid|mp3|wav|mka|aac|ogg|amr|amf|au|wma|rma) 525600
100% 525600 override-expire override-lastmod reload-into-ims ignore-reload
ignore-no-cache ignore-no-store ignore-private ignore-auth
ignore-must-revalidate
#
# Add any of your own refresh_pattern entries above these.
#
refresh_pattern -i (/cgi-bin/|mrtg|graph|\?)	0	0%	0
refresh_pattern	.	0	20%	10080	override-lastmod reload-into-ims





# local
qos_flows local-hit=0x30
# sibling
qos_flows sibling-hit=0x31
# parent
qos_flows parent-hit=0x32
# preserve
# qos_flows disable-preserve-miss





cache_dir aufs /cache01/1 400000 961 256
cache_dir aufs /cache01/2 400000 961 256
cache_dir aufs /cache01/3 400000 961 256









#LOGS
coredump_dir /var/spool/squid
error_directory /usr/share/squid/errors/templates
mime_table /etc/squid/mime.conf
pid_filename    /var/run/squid.pid

cache_log /var/log/squid/cache.log
access_log /var/log/squid/access.log
cache_store_log /var/log/squid/store.log

logfile_daemon /usr/lib/squid/log_file_daemon
logfile_rotate 12



# OPTIONS FOR REWRITE URL
#
-----------------------------------------------------------------------------
url_rewrite_program /etc/squid/rewriter.pl
url_rewrite_children 1 startup=1 idle=1 concurrency=99

url_rewrite_access allow fakespeed
url_rewrite_access allow rewriter-link
url_rewrite_access deny all

redirector_bypass on


store_id_program /etc/squid/storeid.pl
store_id_children 1 startup=1 idle=1 concurrency=100





--
View this message in context: <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/assertion-failed-comm-cc-178-fd-table-conn-fd-halfClosedReader-NULL-tp4670979p4671005.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/assertion-failed-comm-cc-178-fd-table-conn-fd-halfClosedReader-NULL-tp4670979p4671005.html</A>
Sent from the Squid - Users mailing list archive at Nabble.com.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="003349.html">[squid-users] assertion failed: comm.cc:178: &quot;fd_table[conn-&gt;fd].halfClosedReader != NULL&quot;
</A></li>
	<LI>Next message (by thread): <A HREF="003357.html">[squid-users] assertion failed: comm.cc:178: &quot;fd_table[conn-&gt;fd].halfClosedReader != NULL&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3355">[ date ]</a>
              <a href="thread.html#3355">[ thread ]</a>
              <a href="subject.html#3355">[ subject ]</a>
              <a href="author.html#3355">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
