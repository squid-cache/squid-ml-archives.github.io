<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] 3.5.4 Can't access Google or Yahoo SSL pages
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%203.5.4%20Can%27t%20access%20Google%20or%20Yahoo%20SSL%20pages&In-Reply-To=%3C55473377.80401%40cpalmer.me.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003398.html">
   <LINK REL="Next"  HREF="003457.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] 3.5.4 Can't access Google or Yahoo SSL pages</H1>
    <B>Chris Palmer</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%203.5.4%20Can%27t%20access%20Google%20or%20Yahoo%20SSL%20pages&In-Reply-To=%3C55473377.80401%40cpalmer.me.uk%3E"
       TITLE="[squid-users] 3.5.4 Can't access Google or Yahoo SSL pages">chris9 at cpalmer.me.uk
       </A><BR>
    <I>Mon May  4 08:53:11 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="003398.html">[squid-users] 3.5.4 Can't access Google or Yahoo SSL pages
</A></li>
        <LI>Next message (by thread): <A HREF="003457.html">[squid-users] 3.5.4 Can't access Google or Yahoo SSL pages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3429">[ date ]</a>
              <a href="thread.html#3429">[ thread ]</a>
              <a href="subject.html#3429">[ subject ]</a>
              <a href="author.html#3429">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>There has been a change in behaviour in 3.5.4. It now really does prefer 
to contact a site using an ipv6 address rather than a v4. The network 
stack here doesn't permit v6 so the traffic to sites such as google was 
failing. Setting the following restored the previous behaviour:

dns_v4_first on

Thanks to Dan Charlesworth for pointing me in the correct direction.

Chris

On 03/05/15 18:01, Chris Palmer wrote:
&gt;<i> Two other reports of the same problem (accessing some SSL sites) after 
</I>&gt;<i> upgrading to Squid 3.5.4...
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://bugs.archlinux.org/task/44811">https://bugs.archlinux.org/task/44811</A>
</I>&gt;<i>
</I>&gt;<i> I'm at a bit of a loss to know where to start looking.
</I>&gt;<i> Just in case, I tried disabling ICAP (was using it for clamav) but no 
</I>&gt;<i> difference.
</I>&gt;<i>
</I>&gt;<i> Chris
</I>&gt;<i>
</I>&gt;&gt;<i> Send squid-users mailing list submissions to
</I>&gt;&gt;<i> Date: Sat, 2 May 2015 12:07:13 +0100
</I>&gt;&gt;<i> From: &quot;Chris Palmer&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">chris9 at cpalmer.me.uk</A>&gt;
</I>&gt;&gt;<i> To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;<i> Subject: [squid-users] 3.5.4 Can't access Google or Yahoo SSL pages
</I>&gt;&gt;<i> Message-ID: &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">4d032c7eb0e7e4d04a3583b16bca73ff.squirrel at cpalmer.me.uk</A>&gt;
</I>&gt;&gt;<i> Content-Type: text/plain;charset=iso-8859-1
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I just built 3.5.4 and deployed (on FC21). Most pages work, but SSL to
</I>&gt;&gt;<i> e.g. Google and Yahoo fail. It is easily provoked by simply using the
</I>&gt;&gt;<i> search bar in firefox or IE.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Cache.log contains entries such as
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 2015/05/02 11:51:34 kid1| local=[::] remote=[2a00:1450:400c:c05::93]:443
</I>&gt;&gt;<i> FD 13 flags=1: read/write failure: (107) Transport endpoint is not
</I>&gt;&gt;<i> connected
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Most SSL sites are ok, and all non-SSL sites I have tried. I am not 
</I>&gt;&gt;<i> using
</I>&gt;&gt;<i> SSL-Bump.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It was built using eactly the same options as 3.5.3. Anyone else
</I>&gt;&gt;<i> experiencing this? Otherwise I will have to dig deeper...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Many thanks
</I>&gt;&gt;<i> Chris
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="003398.html">[squid-users] 3.5.4 Can't access Google or Yahoo SSL pages
</A></li>
	<LI>Next message (by thread): <A HREF="003457.html">[squid-users] 3.5.4 Can't access Google or Yahoo SSL pages
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3429">[ date ]</a>
              <a href="thread.html#3429">[ thread ]</a>
              <a href="subject.html#3429">[ subject ]</a>
              <a href="author.html#3429">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
