<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Client IP spoofing via squid proxy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Client%20IP%20spoofing%20via%20squid%20proxy&In-Reply-To=%3CHKXPR03MB200B730A796D31DE53351C8A1D10%40HKXPR03MB200.apcprd03.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003473.html">
   <LINK REL="Next"  HREF="003475.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Client IP spoofing via squid proxy</H1>
    <B>Ambadas Hibare</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Client%20IP%20spoofing%20via%20squid%20proxy&In-Reply-To=%3CHKXPR03MB200B730A796D31DE53351C8A1D10%40HKXPR03MB200.apcprd03.prod.outlook.com%3E"
       TITLE="[squid-users] Client IP spoofing via squid proxy">ambadasvh at teledna.com
       </A><BR>
    <I>Tue May  5 14:25:35 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="003473.html">[squid-users] How can I just foward all connections from my squid to another proxy that requires autentication?
</A></li>
        <LI>Next message (by thread): <A HREF="003475.html">[squid-users] Client IP spoofing via squid proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3472">[ date ]</a>
              <a href="thread.html#3472">[ thread ]</a>
              <a href="subject.html#3472">[ subject ]</a>
              <a href="author.html#3472">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I trying to spoof client IP via squid proxy by following  squid's TPROXY4 wiki page:
<A HREF="http://wiki.squid-cache.org/Features/Tproxy4">http://wiki.squid-cache.org/Features/Tproxy4</A>

But I want to know whether squid can spoof client IP when we send proxy format HTTP request from Mozilla (ie configuring proxy &amp; port in mozilla). Can squid proxy behave transparently towards only the web server &amp; not the client?

I've tried sending proxy format HTTP request from client to squid box (on 3129  tproxy port), but I am getting Header forgery error Also its trying to connect to itself instead of web server. I am trying to understand why squid is trying to match host header's DNS with the destination IP instead of connecting to host header's DNS (like normal proxy behaviour on port 3128).

Regards,
Ambadas

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150505/54b3241c/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150505/54b3241c/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="003473.html">[squid-users] How can I just foward all connections from my squid to another proxy that requires autentication?
</A></li>
	<LI>Next message (by thread): <A HREF="003475.html">[squid-users] Client IP spoofing via squid proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3472">[ date ]</a>
              <a href="thread.html#3472">[ thread ]</a>
              <a href="subject.html#3472">[ subject ]</a>
              <a href="author.html#3472">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
