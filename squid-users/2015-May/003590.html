<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 3.4.10 and sslcrtd
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203.4.10%20and%20sslcrtd&In-Reply-To=%3C5559CBA4.5080206%40xvidservices.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003582.html">
   <LINK REL="Next"  HREF="003596.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 3.4.10 and sslcrtd</H1>
    <B>Veiko Kukk</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203.4.10%20and%20sslcrtd&In-Reply-To=%3C5559CBA4.5080206%40xvidservices.com%3E"
       TITLE="[squid-users] Squid 3.4.10 and sslcrtd">vkukk at xvidservices.com
       </A><BR>
    <I>Mon May 18 11:23:16 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="003582.html">[squid-users] squid stop working without any error
</A></li>
        <LI>Next message (by thread): <A HREF="003596.html">[squid-users] Squid 3.4.10 and sslcrtd
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3590">[ date ]</a>
              <a href="thread.html#3590">[ thread ]</a>
              <a href="subject.html#3590">[ subject ]</a>
              <a href="author.html#3590">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

I'd like to know if I understand Squid documentation properly.
I have following http_port and sslbump configuration:

http_port 127.0.0.1:3128 ssl-bump generate-host-certificates=off 
cert=/var/spool/squid/ssl_cert/squid_ca.pem
ssl_bump server-first all

 From documentation:
generate-host-certificates[=&lt;on|off&gt;]
Dynamically create SSL server certificates for the destination hosts of 
bumped CONNECT requests. When enabled, the cert and key options are used 
to sign generated certificates. Otherwise generated certificate will be 
selfsigned.

I guess, that means, if generate-host-certificates=off, there is no need 
for sslcrtd_program. Do I understand this correctly?

Unfortunately, Squid exits with fatal error when trying to start without 
sslcrtd_program configuration option.

2015/05/18 11:10:40 kid1| Accepting SSL bumped HTTP Socket connections 
at local=127.0.0.1:3128 remote=[::] FD 27 flags=9
2015/05/18 11:10:40 kid1| Done reading /var/spool/squid swaplog (0 entries)
2015/05/18 11:10:40 kid1| Store rebuilding is 0.00% complete
2015/05/18 11:10:40 kid1| Finished rebuilding storage from disk.
2015/05/18 11:10:40 kid1|         0 Entries scanned
2015/05/18 11:10:40 kid1|         0 Invalid entries.
2015/05/18 11:10:40 kid1|         0 With invalid flags.
2015/05/18 11:10:40 kid1|         0 Objects loaded.
2015/05/18 11:10:40 kid1|         0 Objects expired.
2015/05/18 11:10:40 kid1|         0 Objects cancelled.
2015/05/18 11:10:40 kid1|         0 Duplicate URLs purged.
2015/05/18 11:10:40 kid1|         0 Swapfile clashes avoided.
2015/05/18 11:10:40 kid1|   Took 0.01 seconds (  0.00 objects/sec).
2015/05/18 11:10:40 kid1| Beginning Validation Procedure
2015/05/18 11:10:40 kid1|   Completed Validation Procedure
2015/05/18 11:10:40 kid1|   Validated 0 Entries
2015/05/18 11:10:40 kid1|   store_swap_size = 0.00 KB
2015/05/18 11:10:40 kid1| WARNING: ssl_crtd #Hlpr0 exited
2015/05/18 11:10:40 kid1| Too few ssl_crtd processes are running (need 1/32)
2015/05/18 11:10:40 kid1| Closing HTTP port 127.0.0.1:3128
2015/05/18 11:10:40 kid1| storeDirWriteCleanLogs: Starting...
2015/05/18 11:10:40 kid1|   Finished.  Wrote 0 entries.
2015/05/18 11:10:40 kid1|   Took 0.00 seconds (  0.00 entries/sec).
FATAL: The ssl_crtd helpers are crashing too rapidly, need help!

Why does it still need sslcrtd_program? Note that error message WARNING: 
ssl_crtd #Hlpr0 exited is misleading, because currently, all sslcrtd 
related configuration options are commented out and none of the ssl_crtd 
processes are started.

Best regards,
Veiko

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="003582.html">[squid-users] squid stop working without any error
</A></li>
	<LI>Next message (by thread): <A HREF="003596.html">[squid-users] Squid 3.4.10 and sslcrtd
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3590">[ date ]</a>
              <a href="thread.html#3590">[ thread ]</a>
              <a href="subject.html#3590">[ subject ]</a>
              <a href="author.html#3590">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
