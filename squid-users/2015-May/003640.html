<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 3.5.4 + OpenBSD 5.7 + ROCK store = kid1 registration timed out
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203.5.4%20%2B%20OpenBSD%205.7%20%2B%20ROCK%20store%20%3D%20kid1%0A%20registration%20timed%20out&In-Reply-To=%3C555C6925.4080008%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003635.html">
   <LINK REL="Next"  HREF="003637.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 3.5.4 + OpenBSD 5.7 + ROCK store = kid1 registration timed out</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203.5.4%20%2B%20OpenBSD%205.7%20%2B%20ROCK%20store%20%3D%20kid1%0A%20registration%20timed%20out&In-Reply-To=%3C555C6925.4080008%40treenet.co.nz%3E"
       TITLE="[squid-users] Squid 3.5.4 + OpenBSD 5.7 + ROCK store = kid1 registration timed out">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed May 20 10:59:49 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="003635.html">[squid-users] Squid 3.5.4 + OpenBSD 5.7 + ROCK store = kid1 registration timed out
</A></li>
        <LI>Next message (by thread): <A HREF="003637.html">[squid-users] squid with sslump compile
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3640">[ date ]</a>
              <a href="thread.html#3640">[ thread ]</a>
              <a href="subject.html#3640">[ subject ]</a>
              <a href="author.html#3640">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 20/05/2015 5:44 p.m., Henri Wahl wrote:
&gt;<i> Good morning,
</I>&gt;<i> 
</I>&gt;<i> I try to use rock store for cache in OpenBSD 5.7 with Squid 3.5.4. This
</I>&gt;<i> should require SMP for the disker processes. Apparently the kids start,
</I>&gt;<i> but what I get further is this:
</I>&gt;<i> 
</I>&gt;<i> May 20 07:40:26 squid02 squid[29404]: Starting Squid Cache version 3.5.4
</I>&gt;<i> for x86_64-unknown-openbsd5.7...
</I>&gt;<i> May 20 07:40:26 squid02 squid[29404]: Service Name: squid
</I>&gt;<i> May 20 07:40:26 squid02 squid[29404]: Process ID 29404
</I>&gt;<i> May 20 07:40:26 squid02 squid[29404]: Process Roles: coordinator
</I>&gt;<i> May 20 07:40:26 squid02 squid[29404]: With 32768 file descriptors available
</I>&gt;<i> May 20 07:40:26 squid02 squid[15546]: Starting Squid Cache version 3.5.4
</I>&gt;<i> for x86_64-unknown-openbsd5.7...
</I>&gt;<i> May 20 07:40:26 squid02 squid[5339]: Starting Squid Cache version 3.5.4
</I>&gt;<i> for x86_64-unknown-openbsd5.7...
</I>&gt;<i> May 20 07:40:26 squid02 squid[15546]: Service Name: squid
</I>&gt;<i> May 20 07:40:26 squid02 squid[5339]: Service Name: squid
</I>&gt;<i> May 20 07:40:26 squid02 squid[15546]: Process ID 15546
</I>&gt;<i> May 20 07:40:26 squid02 squid[5339]: Process ID 5339
</I>&gt;<i> May 20 07:40:26 squid02 squid[15546]: Process Roles: disker
</I>&gt;<i> May 20 07:40:26 squid02 squid[5339]: Process Roles: worker
</I>&gt;<i> May 20 07:40:26 squid02 squid[15546]: With 32768 file descriptors available
</I>&gt;<i> May 20 07:40:26 squid02 squid[5339]: With 32768 file descriptors available
</I>&gt;<i> May 20 07:40:26 squid02 squid[29404]: WARNING: Can't find current
</I>&gt;<i> directory, getcwd: (13) Permission denied
</I>
Are you running Squid as root?
The master process needs to be started as root to assign the
low-privilege workers the correct privilege for things they do.

Not doing so would lead to effects like the workers not being able to
communicate with the coordinator...


&gt;<i> May 20 07:40:26 squid02 squid[15546]: WARNING: Can't find current
</I>&gt;<i> directory, getcwd: (13) Permission denied
</I>&gt;<i> May 20 07:40:26 squid02 squid[5339]: WARNING: Can't find current
</I>&gt;<i> directory, getcwd: (13) Permission denied
</I>&gt;<i> May 20 07:40:26 squid02 squid[29404]: Squid plugin modules loaded: 0
</I>&gt;<i> May 20 07:40:26 squid02 squid[5339]: Sending SNMP messages from 0.0.0.0:3401
</I>&gt;<i> May 20 07:40:26 squid02 squid[5339]: Squid plugin modules loaded: 0
</I>&gt;<i> May 20 07:40:26 squid02 squid[15546]: Squid plugin modules loaded: 0
</I>&gt;<i> May 20 07:40:32 squid02 squid[5339]: Closing HTTP port 172.19.13.2:3128
</I>&gt;<i> May 20 07:40:32 squid02 squid[5339]: Closing HTTP port 127.0.0.1:3128
</I>&gt;<i> May 20 07:40:32 squid02 squid[5339]: Closing HTTP port 172.19.13.3:3128
</I>&gt;<i> May 20 07:40:32 squid02 squid[5339]: Closing HTTP port 172.19.13.11:3128
</I>&gt;<i> May 20 07:40:32 squid02 squid[5339]: kid1 registration timed out
</I>&gt;<i> May 20 07:40:32 squid02 squid[15546]: kid2 registration timed out
</I>&gt;<i> 
</I>&gt;<i> The kids registration times out. Any idea where to adjust what?
</I>
The worker startup is taking too long. We tend to see this when Squid
with very large caches are started and need to do a full &quot;DIRTY&quot; scan of
the cache files.

Its hard to say for sure what the exact problem is though without lots
of details about the config and cache.log outut from the workers.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="003635.html">[squid-users] Squid 3.5.4 + OpenBSD 5.7 + ROCK store = kid1 registration timed out
</A></li>
	<LI>Next message (by thread): <A HREF="003637.html">[squid-users] squid with sslump compile
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3640">[ date ]</a>
              <a href="thread.html#3640">[ thread ]</a>
              <a href="subject.html#3640">[ subject ]</a>
              <a href="author.html#3640">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
