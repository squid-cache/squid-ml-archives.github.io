<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Outgoing IPv6 address with no IPv4 address access
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Outgoing%20IPv6%20address%20with%20no%20IPv4%20address%20access&In-Reply-To=%3C56381DFA.4060203%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007490.html">
   <LINK REL="Next"  HREF="007499.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Outgoing IPv6 address with no IPv4 address access</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Outgoing%20IPv6%20address%20with%20no%20IPv4%20address%20access&In-Reply-To=%3C56381DFA.4060203%40treenet.co.nz%3E"
       TITLE="[squid-users] Outgoing IPv6 address with no IPv4 address access">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Nov  3 02:37:46 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007490.html">[squid-users] Outgoing IPv6 address with no IPv4 address access
</A></li>
        <LI>Next message (by thread): <A HREF="007499.html">[squid-users] Outgoing IPv6 address with no IPv4 address access
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7498">[ date ]</a>
              <a href="thread.html#7498">[ thread ]</a>
              <a href="subject.html#7498">[ subject ]</a>
              <a href="author.html#7498">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Lets rewind...

*Why* do a you have this requirement at all?

Why have a server connected to IPv4 which is not permitted to use IPv4 ?


On 2/11/2015 11:50 p.m., Robert Conlustro wrote:
&gt;<i> Thank you for all the great information. I understand the squid will
</I>&gt;<i> automatically use IPv6 before IPv4 if the server has both but I want
</I>&gt;<i> squid to reject a server if it only has IPv4 and only allow IPv6
</I>&gt;<i> connectivity. The only real problem I&#8217;m facing is that the main IPv4
</I>&gt;<i> address of the squid server is being used to connect through when
</I>&gt;<i> there is no IPv6 connectivity on the server.
</I>
You did not specify any IPv4 address Squid was to use for its outbound
connections. So the OS kernel will pick whatever it likes to use for
that destination.

The Internet works that way, why break it?


&gt;<i> I want to prevent the
</I>&gt;<i> use of the main IPv4 address altogether. I tried to make the main
</I>&gt;<i> IPv4 address of the server an outgoing address and then I blocked
</I>&gt;<i> that address but that didn&#8217;t work.
</I>

It would seem you did not do it properly. Please explain &quot;didn't work&quot;.

This works for me to prevent outgoing traffic using 192.0.2.1:

  iptables -I OUTPUT 1 -p udp -s 192.0.2.1 -j REJECT
  iptables -I OUTPUT 1 -p tcp -s 192.0.2.1 -j REJECT

Though a FAR better solution is to not even assign an unusable IP
address to the machine.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007490.html">[squid-users] Outgoing IPv6 address with no IPv4 address access
</A></li>
	<LI>Next message (by thread): <A HREF="007499.html">[squid-users] Outgoing IPv6 address with no IPv4 address access
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7498">[ date ]</a>
              <a href="thread.html#7498">[ thread ]</a>
              <a href="subject.html#7498">[ subject ]</a>
              <a href="author.html#7498">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
