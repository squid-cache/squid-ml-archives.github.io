<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] TCP_REFRESH_MODIFIED
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20TCP_REFRESH_MODIFIED&In-Reply-To=%3C56392B14.5080500%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007509.html">
   <LINK REL="Next"  HREF="007513.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] TCP_REFRESH_MODIFIED</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20TCP_REFRESH_MODIFIED&In-Reply-To=%3C56392B14.5080500%40treenet.co.nz%3E"
       TITLE="[squid-users] TCP_REFRESH_MODIFIED">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Nov  3 21:45:56 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007509.html">[squid-users] TCP_REFRESH_MODIFIED
</A></li>
        <LI>Next message (by thread): <A HREF="007513.html">[squid-users] TCP_REFRESH_MODIFIED
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7511">[ date ]</a>
              <a href="thread.html#7511">[ thread ]</a>
              <a href="subject.html#7511">[ subject ]</a>
              <a href="author.html#7511">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 4/11/2015 9:53 a.m., Yuri Voinov wrote:
&gt;<i> 
</I>&gt;<i> To talk was objective: show the config (squid.conf) and URL, which
</I>&gt;<i> causes problems with caching. Telepaths on holiday in Bali. Personally,
</I>&gt;<i> I have no idea either looks like configuration or a URL you're trying to
</I>&gt;<i> cache. In such a situation it is impossible to say anything definite.
</I>&gt;<i> 
</I>
It is an object apparently containing per-user information
(Cache-Control:private).

Note that Expires and max-age=N headers are meaningless on private
objects. A private object needs revalidating on every single re-use.


It is being served up from GoogleVideoServer (aka &quot;gvs&quot;) so is either
YouTube content (they go to some extreme lengths to prevent caches
working), or possibly a video on someones personal account, or maybe
with DRM embeded. The no-change on size could be an artifact of jo being
the only one fetching it. Or the object may be padded by the server so
its always a fixed size of crypted blocks to prevent DRM decryption
attempts.


jo is using &quot;ignore-private&quot; configuration option to make Squid cache
the object. But that can only make it be stored. It cannot magically
make the stored content useful. The revalidation which does make it
useful still has to happen to ensure the right per-user headers are
attached when it is delivered to the client.
 The server then barfs out a whole new copy in full when asked for
revalidation details.


Facing servers like this occasionally is part of the price we
unfortunately pay for caching Cache-Control:private things without
causing all sorts of far worse nasty side effects.


jo; you could remove that &quot;ignore-private&quot; configuration option. That
would not affect these particular objects bandwidth usage, but would
free up the cache space they are currently using for caching other
things with possibly better savings.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007509.html">[squid-users] TCP_REFRESH_MODIFIED
</A></li>
	<LI>Next message (by thread): <A HREF="007513.html">[squid-users] TCP_REFRESH_MODIFIED
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7511">[ date ]</a>
              <a href="thread.html#7511">[ thread ]</a>
              <a href="subject.html#7511">[ subject ]</a>
              <a href="author.html#7511">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
