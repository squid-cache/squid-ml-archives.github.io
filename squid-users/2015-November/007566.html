<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] ssl_bump with cache_peer problem: Handshake fail after Client Hello.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20ssl_bump%20with%20cache_peer%20problem%3A%20Handshake%20fail%0A%20after%20Client%20Hello.&In-Reply-To=%3C1446723047600-4674393.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007562.html">
   <LINK REL="Next"  HREF="007569.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] ssl_bump with cache_peer problem: Handshake fail after Client Hello.</H1>
    <B>maple</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20ssl_bump%20with%20cache_peer%20problem%3A%20Handshake%20fail%0A%20after%20Client%20Hello.&In-Reply-To=%3C1446723047600-4674393.post%40n4.nabble.com%3E"
       TITLE="[squid-users] ssl_bump with cache_peer problem: Handshake fail after Client Hello.">maple.feng.wang at hotmail.com
       </A><BR>
    <I>Thu Nov  5 11:30:47 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007562.html">[squid-users] ssl_bump with cache_peer problem: Handshake fail after Client Hello.
</A></li>
        <LI>Next message (by thread): <A HREF="007569.html">[squid-users] ssl_bump with cache_peer problem: Handshake fail after Client Hello.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7566">[ date ]</a>
              <a href="thread.html#7566">[ thread ]</a>
              <a href="subject.html#7566">[ subject ]</a>
              <a href="author.html#7566">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Amos,

So, if I understand it right, it's impossible to do ssl-bump even I use the
proxychains to chain the squid with my parent proxy without using
cache_peer(because I'm confirmed that ssl-bump+cache_peer must not work in
squid), am I right?

I just wonder how admin900710 make things work by using squid+proxychains
since he/she look like claim did it if I understand right.

about your second answer, sorry, I'm not sure I understand it. so I describe
my environment here again:

client &lt;---https---&gt; gateway with iptables + squid &lt;---proxychains---&gt; proxy
mapping port &lt;---ssh tunnel---&gt; http proxy + me &lt;--http/https--&gt; internet

as you see, client and gateway are all located in internal network, there is
no NAT device to make int-net to reach http proxy outside, so I setup ssh
reverse tunnel to map http proxy to int-net(it did like NAT to do port
mapping, but all traffic built on ssh tunnel).

I can use proxychains to to chain tools like yum/apt or other command line
tool in int-net with my http proxy, but I need to run automatic script or
install some complex system in my int-net which sometimes require proxy,
sometimes not, it's hard to do proxy setting in client side, so transparent
proxy seems suitable way, so squid is introduced, but it must handle
https(ssl-bump) and use parent http proxy, how to do it in same time? squid
apparently not support it, so i want to let squid just play transparent
proxy role with ssl-bump, and use proxychains to connect it to upstream

I tried several ways to integrate them, but looks squid just not forward it
traffic to upstream proxy which proxychains designate, so as I ask above, is
it possible to let squid forward traffic to other proxy by using 
proxychains?

Best regards.  



--
View this message in context: <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/ssl-bump-with-cache-peer-problem-Handshake-fail-after-Client-Hello-tp4672064p4674393.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/ssl-bump-with-cache-peer-problem-Handshake-fail-after-Client-Hello-tp4672064p4674393.html</A>
Sent from the Squid - Users mailing list archive at Nabble.com.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007562.html">[squid-users] ssl_bump with cache_peer problem: Handshake fail after Client Hello.
</A></li>
	<LI>Next message (by thread): <A HREF="007569.html">[squid-users] ssl_bump with cache_peer problem: Handshake fail after Client Hello.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7566">[ date ]</a>
              <a href="thread.html#7566">[ thread ]</a>
              <a href="subject.html#7566">[ subject ]</a>
              <a href="author.html#7566">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
