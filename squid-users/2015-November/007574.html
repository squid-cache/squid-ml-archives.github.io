<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 3.5.10 ldap helpers can't &quot;reconfigure&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203.5.10%20ldap%20helpers%20can%27t%20%22reconfigure%22&In-Reply-To=%3CCAGd5O8JvhxK0rOJkvJYHEvnwhmWOZ8xB2ZSxGnv_5RhJWsaUQA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007955.html">
   <LINK REL="Next"  HREF="007576.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 3.5.10 ldap helpers can't &quot;reconfigure&quot;</H1>
    <B>Fabio Almeida</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203.5.10%20ldap%20helpers%20can%27t%20%22reconfigure%22&In-Reply-To=%3CCAGd5O8JvhxK0rOJkvJYHEvnwhmWOZ8xB2ZSxGnv_5RhJWsaUQA%40mail.gmail.com%3E"
       TITLE="[squid-users] Squid 3.5.10 ldap helpers can't &quot;reconfigure&quot;">mentesan at gmail.com
       </A><BR>
    <I>Thu Nov  5 16:21:40 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007955.html">[squid-users] [SOLVED] Transparent HTTPS Squid proxy with upstream parent
</A></li>
        <LI>Next message (by thread): <A HREF="007576.html">[squid-users] Squid 3.5.10 ldap helpers can't &quot;reconfigure&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7574">[ date ]</a>
              <a href="thread.html#7574">[ thread ]</a>
              <a href="subject.html#7574">[ subject ]</a>
              <a href="author.html#7574">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi folks,

I have and Squid 3.5.10 instance that I can't reconfigure, it crashes if
there's many spawned ldap helpers.
But, if there's not many people connect it reconfigure normal as expected.

It's running on a FreeBSD 10.1-RELEASE-p19 amd64 with the following
./configure line:

./configure --with-default-user=squid --bindir=/usr/local/sbin
--sbindir=/usr/local/sbin --datadir=/usr/local/etc/squid
--libexecdir=/usr/local/libexec/squid --localstatedir=/var
--sysconfdir=/usr/local/etc/squid --with-logdir=/var/log/squid
--with-pidfile=/var/run/squid/squid.pid --with-swapdir=/var/squid/cache
--without-gnutls --enable-auth --enable-build-info
--enable-loadable-modules --enable-removal-policies=lru heap
--disable-epoll --disable-linux-netfilter --disable-linux-tproxy
--disable-translation --disable-arch-native --disable-eui
--enable-cache-digests --enable-delay-pools --enable-ecap --enable-esi
--enable-follow-x-forwarded-for --disable-htcp --disable-icap-client
--enable-icmp --enable-ident-lookups --enable-ipv6 --disable-kqueue
--without-large-files --enable-http-violations --enable-snmp --enable-ssl
--enable-ssl-crtd --disable-stacktraces --disable-ipf-transparent
--disable-ipfw-transparent --disable-pf-transparent --without-nat-devpf
--disable-forw-via-db --enable-wccp --enable-wccpv2
--with-heimdal-krb5=/usr CFLAGS=-I/usr/include -O2 -pipe
 -I/usr/local/include -I/usr/local/include -I/usr/local/include
-I/usr/local/include/libxml2 -I/usr/include -fstack-protector
-DLDAP_DEPRECATED -fno-strict-aliasing LDFLAGS=-L/usr/lib  -L/usr/local/lib
-L/usr/local/lib -L/usr/local/lib -pthread  -L/usr/lib -fstack-protector
LIBS=-lkrb5 -lgssapi -lgssapi_krb5  KRB5CONFIG=/usr/bin/krb5-config
--enable-auth-basic=DB SMB_LM MSNT-multi-domain NCSA PAM POP3 RADIUS fake
getpwnam LDAP --enable-auth-digest=file
--enable-external-acl-helpers=file_userip time_quota unix_group LDAP_group
--enable-auth-negotiate=kerberos wrapper --enable-auth-ntlm=fake smb_lm
--enable-storeio=ufs aufs diskd --enable-disk-io=AIO Blocking IpcIo Mmapped
DiskThreads DiskDaemon --enable-log-daemon-helpers=file
--enable-url-rewrite-helpers=fake --enable-storeid-rewrite-helpers=file
--with-openssl=/usr --prefix=/usr/local --mandir=/usr/local/man
--infodir=/usr/local/info/ --build=amd64-portbld-freebsd10.1

There's a total of 439 ldap group helpers enabled.
For user's authentication there's 127 helpers enabled.

It works as expected, except when um run &quot;squid -k reconfigure&quot;, it crashes.

Is there a 'magical' total number of helpers it can manage?
Found on squid bug track system that it was related to 'Kqueue', so
recompiled without 'Kqueue' but the bug persists.
I'll collect the logs to send as soon as possible.

Any directions will be appreciated.

Thanks in advance,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20151105/a656dbc9/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20151105/a656dbc9/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007955.html">[squid-users] [SOLVED] Transparent HTTPS Squid proxy with upstream parent
</A></li>
	<LI>Next message (by thread): <A HREF="007576.html">[squid-users] Squid 3.5.10 ldap helpers can't &quot;reconfigure&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7574">[ date ]</a>
              <a href="thread.html#7574">[ thread ]</a>
              <a href="subject.html#7574">[ subject ]</a>
              <a href="author.html#7574">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
