<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] 4.0.2: ALE missing URL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%204.0.2%3A%20ALE%20missing%20URL&In-Reply-To=%3C563D42B2.2070202%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007592.html">
   <LINK REL="Next"  HREF="007596.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] 4.0.2: ALE missing URL</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%204.0.2%3A%20ALE%20missing%20URL&In-Reply-To=%3C563D42B2.2070202%40measurement-factory.com%3E"
       TITLE="[squid-users] 4.0.2: ALE missing URL">rousskov at measurement-factory.com
       </A><BR>
    <I>Sat Nov  7 00:15:46 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007592.html">[squid-users] 4.0.2: ALE missing URL
</A></li>
        <LI>Next message (by thread): <A HREF="007596.html">[squid-users] 4.0.2: ALE missing URL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7593">[ date ]</a>
              <a href="thread.html#7593">[ thread ]</a>
              <a href="subject.html#7593">[ subject ]</a>
              <a href="author.html#7593">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/06/2015 04:36 PM, David Touzeau wrote:
&gt;<i> 
</I>&gt;<i> Hi
</I>&gt;<i> 
</I>&gt;<i> I'm testing the new 4.0.2 version..
</I>&gt;<i> Now i'm receive many errors like this in cache.log
</I>&gt;<i> 
</I>&gt;<i> Whats wrong ?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 2015/11/07 00:33:16 kid1| ALE missing URL
</I>&gt;<i> 2015/11/07 00:33:16 kid1| ALE missing adapted HttpRequest object
</I>

This may be a regression bug introduced by trunk r14351 (Support
logformat %macros in external_acl_type format). AFAIK, those messages
were added specifically to catch hard-to-find bugs like that.

There is some logic in the code to limit the number of these messages,
but, AFAICT, it does not work well for busy Squids: A worker doing 1000
requests per second might log ~100 messages per minute. Future releases
may have less aggressive reporting if other developers agree that the
current reporting is too aggressive and adjust the code.


If you are seeing these messages, some of your ACLs may not work
correctly. However, the messages are printed for missing fields that
Squid can compute from other sources, so without call stack analysis you
may not be able to tell which ACLs are not working, if any.


If you want to help fixing this bug, please consider doing the following:

1. Add &quot;assert(false);&quot; line to showDebugWarning() in
src/acl/FilledChecklist.cc. Any line within that method should work but
placing it last, after the debugs() line, may work the best. This
addition will _kill_ your Squid so do not use this in production or at
least keep an unpatched binary around for a quick replacement!

2. Post gdb backtrace from the assertion in #1 to Bugzilla.

Others may be able to provide you with more detailed instructions if you
need them.


Thank you,

Alex.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007592.html">[squid-users] 4.0.2: ALE missing URL
</A></li>
	<LI>Next message (by thread): <A HREF="007596.html">[squid-users] 4.0.2: ALE missing URL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7593">[ date ]</a>
              <a href="thread.html#7593">[ thread ]</a>
              <a href="subject.html#7593">[ subject ]</a>
              <a href="author.html#7593">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
