<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Subject: Re: authentication of every GET request from part of URL?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Subject%3A%20Re%3A%20authentication%20of%20every%20GET%20request%20from%0A%20part%20of%20URL%3F&In-Reply-To=%3CCALgKBS%3D4QFienTCumSGDELcQWS2fRjDOEjmjFj-UTP%2BbcedZ5Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007609.html">
   <LINK REL="Next"  HREF="007607.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Subject: Re: authentication of every GET request from part of URL?</H1>
    <B>Sreenath BH</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Subject%3A%20Re%3A%20authentication%20of%20every%20GET%20request%20from%0A%20part%20of%20URL%3F&In-Reply-To=%3CCALgKBS%3D4QFienTCumSGDELcQWS2fRjDOEjmjFj-UTP%2BbcedZ5Q%40mail.gmail.com%3E"
       TITLE="[squid-users] Subject: Re: authentication of every GET request from part of URL?">bhsreenath at gmail.com
       </A><BR>
    <I>Sun Nov  8 13:34:30 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007609.html">[squid-users] Fwd: Re: HTTP 503 error in squid proxy server
</A></li>
        <LI>Next message (by thread): <A HREF="007607.html">[squid-users] Subject: Re: authentication of every GET request from part of URL?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7605">[ date ]</a>
              <a href="thread.html#7605">[ thread ]</a>
              <a href="subject.html#7605">[ subject ]</a>
              <a href="author.html#7605">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,
The application has already been designed and implemented and I have
moved to this project recently. Hence redesigning the application now
is unlikely.
Also, the video player applications (the ones we have) do not send
headers for authentication. They assume unauthenticated data is being
sent.

Is there a way for me to invoke some custom code for every request
that Squid receives? That script would do the following:

1. Extract part of the URL(the token) and look up in a database to see
if it is valid.
    If valid, proceed to lookup cached object, other wise go to
back-end fetch, etc.
2. If the token is not found in database, return with an error, so
that Squid can send back a not found type (some HTTP error) of
response.

thanks,
Sreenath


On 7/11/2015 1:33 a.m., Sreenath BH wrote:
&gt;<i> Hi
</I>&gt;<i> I am very new to Squid, and think have a strange requirement.
</I>&gt;<i> We want to serve cached content only if the client has been
</I>&gt;<i> authenticated before.
</I>&gt;<i> Since we don't expect the client software to send any information in
</I>&gt;<i> headers, we embed a token in the URL that we present to the user.
</I>&gt;<i>
</I>
Um, you know how sending username and password in plain-text Basic auth
headers is supposed to be the worst form of security around?

It's not quite. Sending credentials in the URL is worse. Even if its
just an encoded token.

Why are you avoiding actual HTTP authentication?

Why be so actively hostile to every other cache in existence?


&gt;<i> So when the client s/w uses this URL, we want to extract the token
</I>&gt;<i> from URL and do a small database query to ensure that the token is
</I>&gt;<i> valid.
</I>&gt;<i>
</I>&gt;<i> This is in accelerator mode.
</I>&gt;<i> Is it possible to use something similar to basic_fake_auth and put my
</I>&gt;<i> code there that does some database query?
</I>
The &quot;basic_..._auth&quot; parts of that helpers name mean that it performs
HTTP Basic authentication.

The &quot;fake&quot; part means that it does not perform any kind of validation.

All of the text above has been describing how you want to perform
actions which are the direct opposite of everything basic_fake_auth does.

&gt;<i> If the query fails, we don't return the cached content?
</I>
What do you want to be delivered instead?

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007609.html">[squid-users] Fwd: Re: HTTP 503 error in squid proxy server
</A></li>
	<LI>Next message (by thread): <A HREF="007607.html">[squid-users] Subject: Re: authentication of every GET request from part of URL?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7605">[ date ]</a>
              <a href="thread.html#7605">[ thread ]</a>
              <a href="subject.html#7605">[ subject ]</a>
              <a href="author.html#7605">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
