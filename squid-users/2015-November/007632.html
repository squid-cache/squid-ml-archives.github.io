<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] What does this error mean?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20What%20does%20this%20error%20mean%3F&In-Reply-To=%3C00dc01d11bb5%2461ff8020%2425fe8060%24%40verizon.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007626.html">
   <LINK REL="Next"  HREF="007633.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] What does this error mean?</H1>
    <B>Patrick Flaherty</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20What%20does%20this%20error%20mean%3F&In-Reply-To=%3C00dc01d11bb5%2461ff8020%2425fe8060%24%40verizon.net%3E"
       TITLE="[squid-users] What does this error mean?">vze2k3sa at verizon.net
       </A><BR>
    <I>Tue Nov 10 12:43:20 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007626.html">[squid-users] What does this error mean?
</A></li>
        <LI>Next message (by thread): <A HREF="007633.html">[squid-users] What does this error mean?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7632">[ date ]</a>
              <a href="thread.html#7632">[ thread ]</a>
              <a href="subject.html#7632">[ subject ]</a>
              <a href="author.html#7632">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

-----Original Message-----
From: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On
Behalf Of <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-request at lists.squid-cache.org</A>
Sent: Tuesday, November 10, 2015 5:09 AM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: squid-users Digest, Vol 15, Issue 26

Send squid-users mailing list submissions to
	<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>

To subscribe or unsubscribe via the World Wide Web, visit
	<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
or, via email, send a message with subject or body 'help' to
	<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-request at lists.squid-cache.org</A>

You can reach the person managing the list at
	<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-owner at lists.squid-cache.org</A>

When replying, please edit your Subject line so it is more specific than
&quot;Re: Contents of squid-users digest...&quot;


Today's Topics:

   1. Re: What does this error mean? (Amos Jeffries)
   2. Re: Subject: Re: authentication of every GET request from
      part of URL? (Sreenath BH)
   3. Re: Subject: Re: authentication of every GET request from
      part of URL? (Amos Jeffries)
   4. Assert, followed by shm_open() fail. (Steve Hill)
   5. Help, long response time(2 seconds) in squid! (=?GBK?B?0OzTwL2h?=)
   6. cache peer problem with Https only !! (Ahmad Alzaeem)


----------------------------------------------------------------------

Message: 1
Date: Tue, 10 Nov 2015 05:38:42 +1300
From: Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] What does this error mean?
Message-ID: &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">5640CC12.7080907 at treenet.co.nz</A>&gt;
Content-Type: text/plain; charset=utf-8

On 10/11/2015 1:54 a.m., Yuri Voinov wrote:
&gt;<i> 
</I>&gt;<i> This mean that client sent RST packet. You can ignore this error.
</I>&gt;<i> 
</I>
Well, its not always the client sending it. Could be a NAT device somewhere
hitting some timeout or connnection limit and aborting idle connections.

If it is occuring a lot then it might be worth investigating. Having long
live TCP connections just sitting around unused for very long periods is not
very good for resource utilization. Hardware device tables overflowing in a
NAT or router device is also pretty bad.

Amos

Hello,

Thank you Yuri and Amos for your responses. The log entry points to the
Squid IP and one of my client IP addresses. They are connect through an
'Internal' network using Oracle's Virtual Box. So there is nothing in
between meaning it's the client connecting to Squid directly. So it must be
out client software creating a RST or the Windows Stack itself.

Thanks
Patrick


------------------------------

Message: 2
Date: Mon, 9 Nov 2015 22:42:08 +0530
From: Sreenath BH &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">bhsreenath at gmail.com</A>&gt;
To: Alex Rousskov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt;
Cc: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Subject: Re: authentication of every GET
	request from part of URL?
Message-ID:
	&lt;CALgKBSkUH9JUSB5-ZetZitnUYhW0Keik3QQj2rk-wsjC=<A HREF="https://lists.squid-cache.org/listinfo/squid-users">mM+Bg at mail.gmail.com</A>&gt;
Content-Type: text/plain; charset=UTF-8

Hi Alex,

thanks for your detailed asnwers.

Here are more details.
1. If the URL does not have any token, we would like to send an error
message back to the browser/client, without doing a cache lookup, or going
to backend apache server.

2. If the token is invalid (that is we can't find it in a database), that
means we can not serve data. In this case we would like to send back a HTTP
error (something like a  401 or 404, along with a more descriptive message)

3. If the token is valid(found), remove the token from the URL, and use
remaining part of URL as the key to look in Squid cache.

4. If found return that data, along with proper HTTP status code.
5. If cache lookup fails(not cached), send HTTP request to back-end apache
server (removing the token), get returned result, store in cache, and return
to client/browser.

I read about ACL helper programs, and it appears I can do arbitrary
validations in it, so should work.
Is it correct to assume that the external ACL code runs before url
rewriting?,

Does the URL rewriter run before a cache lookup?

thanks,
Sreenath

On 11/8/15, Alex Rousskov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt; wrote:
&gt;<i> On 11/08/2015 06:34 AM, Sreenath BH wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Is there a way for me to invoke some custom code for every request 
</I>&gt;&gt;<i> that Squid receives?
</I>&gt;<i>
</I>&gt;<i> Yes, there are several interfaces, including a built-in ACL, an 
</I>&gt;<i> external ACL helper, a URL rewriter, an eCAP/ICAP service. Roughly 
</I>&gt;<i> speaking, the former ones are easier to use and the latter ones are more
</I>powerful.
&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> That script would do the following:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 1. Extract part of the URL(the token) and look up in a database to 
</I>&gt;&gt;<i> see if it is valid.
</I>&gt;&gt;<i>     If valid, proceed to lookup cached object, other wise go to 
</I>&gt;&gt;<i> back-end fetch, etc.
</I>&gt;&gt;<i> 2. If the token is not found in database, return with an error, so 
</I>&gt;&gt;<i> that Squid can send back a not found type (some HTTP error) of 
</I>&gt;&gt;<i> response.
</I>&gt;<i>
</I>&gt;<i> If the above are your requirements, avoid the word &quot;authentication&quot;
</I>&gt;<i> might help. It confuses people into thinking you want something far 
</I>&gt;<i> more complex.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The validation in step #1 can be done by an external ACL. However, you 
</I>&gt;<i> probably forgot to mention that the found token should be removed from 
</I>&gt;<i> the URL. To edit the URL, you need to use a URL rewriter or an 
</I>&gt;<i> eCAP/ICAP service.
</I>&gt;<i>
</I>&gt;<i> Everything else can be done by built-in ACLs unless you need to serve 
</I>&gt;<i> very custom error messages. In the latter case, you will need an eCAP 
</I>&gt;<i> or ICAP service.
</I>&gt;<i>
</I>&gt;<i> However, if &quot;go to back-end fetch&quot; means loading response from some 
</I>&gt;<i> storage external to Squid without using HTTP, then you need an eCAP or 
</I>&gt;<i> ICAP service to do that fetching.
</I>&gt;<i>
</I>&gt;<i> I recommend that you clarify these parts of your specs:
</I>&gt;<i>
</I>&gt;<i> What do you want to do when the token is not found in the URL?
</I>&gt;<i>
</I>&gt;<i> What do you want to do when an invalid token is found in the URL?
</I>&gt;<i>
</I>&gt;<i> Will sending a response using a simple template filled with some basic 
</I>&gt;<i> request details suffice when a valid token is not found in the database?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> HTH,
</I>&gt;<i>
</I>&gt;<i> Alex.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> On 7/11/2015 1:33 a.m., Sreenath BH wrote:
</I>&gt;&gt;&gt;<i> Hi
</I>&gt;&gt;&gt;<i> I am very new to Squid, and think have a strange requirement.
</I>&gt;&gt;&gt;<i> We want to serve cached content only if the client has been 
</I>&gt;&gt;&gt;<i> authenticated before.
</I>&gt;&gt;&gt;<i> Since we don't expect the client software to send any information in 
</I>&gt;&gt;&gt;<i> headers, we embed a token in the URL that we present to the user.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Um, you know how sending username and password in plain-text Basic 
</I>&gt;&gt;<i> auth headers is supposed to be the worst form of security around?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It's not quite. Sending credentials in the URL is worse. Even if its 
</I>&gt;&gt;<i> just an encoded token.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Why are you avoiding actual HTTP authentication?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Why be so actively hostile to every other cache in existence?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> So when the client s/w uses this URL, we want to extract the token 
</I>&gt;&gt;&gt;<i> from URL and do a small database query to ensure that the token is 
</I>&gt;&gt;&gt;<i> valid.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> This is in accelerator mode.
</I>&gt;&gt;&gt;<i> Is it possible to use something similar to basic_fake_auth and put 
</I>&gt;&gt;&gt;<i> my code there that does some database query?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The &quot;basic_..._auth&quot; parts of that helpers name mean that it performs 
</I>&gt;&gt;<i> HTTP Basic authentication.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The &quot;fake&quot; part means that it does not perform any kind of validation.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> All of the text above has been describing how you want to perform 
</I>&gt;&gt;<i> actions which are the direct opposite of everything basic_fake_auth does.
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> If the query fails, we don't return the cached content?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> What do you want to be delivered instead?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Amos
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> squid-users mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>

------------------------------

Message: 3
Date: Tue, 10 Nov 2015 06:42:27 +1300
From: Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Subject: Re: authentication of every GET
	request from part of URL?
Message-ID: &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">5640DB03.8030200 at treenet.co.nz</A>&gt;
Content-Type: text/plain; charset=utf-8

On 10/11/2015 6:12 a.m., Sreenath BH wrote:
&gt;<i> Hi Alex,
</I>&gt;<i> 
</I>&gt;<i> thanks for your detailed asnwers.
</I>&gt;<i> 
</I>&gt;<i> Here are more details.
</I>&gt;<i> 1. If the URL does not have any token, we would like to send an error 
</I>&gt;<i> message back to the browser/client, without doing a cache lookup, or 
</I>&gt;<i> going to backend apache server.
</I>&gt;<i> 
</I>&gt;<i> 2. If the token is invalid (that is we can't find it in a database), 
</I>&gt;<i> that means we can not serve data. In this case we would like to send 
</I>&gt;<i> back a HTTP error (something like a  401 or 404, along with a more 
</I>&gt;<i> descriptive message)
</I>&gt;<i> 
</I>
All of the above is external_acl_type helper operations.

&gt;<i> 3. If the token is valid(found), remove the token from the URL, and 
</I>&gt;<i> use remaining part of URL as the key to look in Squid cache.
</I>&gt;<i> 
</I>&gt;<i> 4. If found return that data, along with proper HTTP status code.
</I>
The above is url_rewrite_program operations.

&gt;<i> 5. If cache lookup fails(not cached), send HTTP request to back-end 
</I>&gt;<i> apache server (removing the token), get returned result, store in 
</I>&gt;<i> cache, and return to client/browser.
</I>
And that part is normal caching. Squid will do it by default.

Except the &quot;removing the token&quot; part. Which was done at step #4 already, so
has no relevance here at step #5.

&gt;<i> 
</I>&gt;<i> I read about ACL helper programs, and it appears I can do arbitrary 
</I>&gt;<i> validations in it, so should work.
</I>&gt;<i> Is it correct to assume that the external ACL code runs before url 
</I>&gt;<i> rewriting?,
</I>
The http_access tests are run before re-writing.
If the external ACL is one of those http_access tests the answer is yes.

&gt;<i> 
</I>&gt;<i> Does the URL rewriter run before a cache lookup?
</I>
Yes.



Although, please note that despite this workaround for your cache. It really
is *only* your proxy which will work nicely. Every other cache on the planet
will see your applications URLs are being unique and needing different
caching slots.

This not only wastes cache space for them, but also forces them to pass
extra traffic in the form of full-object fetches at your proxy. Which raises
the bandwidth costs for both them and you far beyond what proper header
based authentication or authorization would.

As the other sysadmin around the world notice this unnecessarily raised cost
they will start to hack their configs to force-cache the responses from your
application. Which will bypass your protection system entirely since your
proxy may not not even see many of the requests.

The earlier you can get the application re-design underway to remove the
credentials token from URL, the earlier the external problems and costs will
start to dsappear.

Amos


------------------------------

Message: 4
Date: Mon, 9 Nov 2015 17:58:59 +0000
From: Steve Hill &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">steve at opendium.com</A>&gt;
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: [squid-users] Assert, followed by shm_open() fail.
Message-ID: &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">5640DEE3.1030003 at opendium.com</A>&gt;
Content-Type: text/plain; charset=&quot;utf-8&quot;; Format=&quot;flowed&quot;


On Squid 3.5.11 I'm seeing occasional asserts:

2015/11/09 13:45:21 kid1| assertion failed: DestinationIp.cc:41: 
&quot;checklist-&gt;conn() &amp;&amp; checklist-&gt;conn()-&gt;clientConnection != NULL&quot;

More concerning though, is that usually when a Squid process crashes, it is
automatically restarted, but following these asserts I'm often seeing:

FATAL: Ipc::Mem::Segment::open failed to
shm_open(/squidnocache-squidnocache-cf__metadata.shm): (2) No such file or
directory

After this, Squid is still running, but won't service requests and requires
a manual restart.

Has anyone seen this before?

Cheers.

--
  - Steve Hill
    Technical Director
    Opendium Limited     <A HREF="http://www.opendium.com">http://www.opendium.com</A>

Direct contacts:
    Instant messager: xmpp:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">steve at opendium.com</A>
    Email:            <A HREF="https://lists.squid-cache.org/listinfo/squid-users">steve at opendium.com</A>
    Phone:            sip:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">steve at opendium.com</A>

Sales / enquiries contacts:
    Email:            <A HREF="https://lists.squid-cache.org/listinfo/squid-users">sales at opendium.com</A>
    Phone:            +44-1792-824568 / sip:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">sales at opendium.com</A>

Support contacts:
    Email:            <A HREF="https://lists.squid-cache.org/listinfo/squid-users">support at opendium.com</A>
    Phone:            +44-1792-825748 / sip:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">support at opendium.com</A>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: steve.vcf
Type: text/x-vcard
Size: 283 bytes
Desc: not available
URL:
&lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20151109/392">http://lists.squid-cache.org/pipermail/squid-users/attachments/20151109/392</A>
307ce/attachment-0001.vcf&gt;

------------------------------

Message: 5
Date: Tue, 10 Nov 2015 16:49:27 +0800
From: &quot;=?GBK?B?0OzTwL2h?=&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">yongjianchn at sina.com</A>&gt;
To: &quot;squid-users&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
Subject: [squid-users] Help, long response time(2 seconds) in squid!
Message-ID: &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">20151110084927.3A98EDD8001 at webmail.sinamail.sina.com.cn</A>&gt;
Content-Type: text/plain; charset=GBK

Hi, All:
I tried to use squid as a web cache server today, but when I test it with
http_load, I found squid may have a latency of 2 seconds in some cases.
Someone help me? Thanks!
The test is
-------
http_load -parallel 1 -seconds 20 url.txt # the content in url.txt is
`<A HREF="http://10.210.136.51:3128/xyj/1`">http://10.210.136.51:3128/xyj/1`</A>
------
config for squid is
-----
http_port 3128 accel vhost vport
cache_peer 10.210.136.51 parent 8888 0
# use mem only
cache_mem 1000 MB
-----
The access log
-----
1447142491.264     39 10.210.136.54 TCP_MEM_HIT_ABORTED/200 4165 GET
<A HREF="http://10.210.136.51:3128/xyj/1">http://10.210.136.51:3128/xyj/1</A> - HIER_NONE/- application/octet-stream
1447142491.283     37 10.210.136.54 TCP_MEM_HIT_ABORTED/200 4165 GET
<A HREF="http://10.210.136.51:3128/xyj/1">http://10.210.136.51:3128/xyj/1</A> - HIER_NONE/- application/octet-stream
1447142493.288   2023 10.210.136.54 TCP_MEM_HIT_ABORTED/200 4165 GET
<A HREF="http://10.210.136.51:3128/xyj/1">http://10.210.136.51:3128/xyj/1</A> - HIER_NONE/- application/octet-stream #
2023 ms! why?
1447142493.307   2023 10.210.136.54 TCP_MEM_HIT_ABORTED/200 4165 GET
<A HREF="http://10.210.136.51:3128/xyj/1">http://10.210.136.51:3128/xyj/1</A> - HIER_NONE/- application/octet-stream #
2023 ms! why?
1447142493.326     38 10.210.136.54 TCP_MEM_HIT_ABORTED/200 4165 GET
<A HREF="http://10.210.136.51:3128/xyj/1">http://10.210.136.51:3128/xyj/1</A> - HIER_NONE/- application/octet-stream
1447142493.348     40 10.210.136.54 TCP_MEM_HIT_ABORTED/200 4165 GET
<A HREF="http://10.210.136.51:3128/xyj/1">http://10.210.136.51:3128/xyj/1</A> - HIER_NONE/- application/octet-stream
-----

------------------------------

Message: 6
Date: Tue, 10 Nov 2015 12:08:50 +0300
From: &quot;Ahmad Alzaeem&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ahmed.zaeem at netstream.ps</A>&gt;
To: &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
Subject: [squid-users] cache peer problem with Https only !!
Message-ID: &lt;000b01d11b97$6a894e10$3f9bea30$@netstream.ps&gt;
Content-Type: text/plain; charset=&quot;utf-8&quot;

Hi im using pfsense with cache peer

 

Squid version is 3.4.10

 

I have peer proxy on port 80 and I can use it with http and https

Now if I use pfsense in the middle and let pfsense go to remote proxy
(10.12.0.32  port 80 )

 

And I get internt from the pfsense proxy 

 

 

I only have http websites working !!!

 

But https websites don't work

 

Any help ?

 

Here is my pfsnese config :

 

 

# This file is automatically generated by pfSense

# Do not edit manually !

 

http_port 172.23.101.253:3128

icp_port 0

dns_v4_first on

pid_filename /var/run/squid/squid.pid

cache_effective_user proxy

cache_effective_group proxy

error_default_language en

icon_directory /usr/pbi/squid-amd64/local/etc/squid/icons

visible_hostname mne

cache_mgr <A HREF="https://lists.squid-cache.org/listinfo/squid-users">azaeem at mne.ps</A>

access_log /var/squid/logs/access.log

cache_log /var/squid/logs/cache.log

cache_store_log none

netdb_filename /var/squid/logs/netdb.state

pinger_enable off

pinger_program /usr/pbi/squid-amd64/local/libexec/squid/pinger

 

logfile_rotate 2

debug_options rotate=2

shutdown_lifetime 3 seconds

# Allow local network(s) on interface(s)

acl localnet src  172.23.101.0/24

forwarded_for off

via off

httpd_suppress_version_string on

uri_whitespace strip

 

acl dynamic urlpath_regex cgi-bin ?

cache deny dynamic

 

cache_mem 64 MB

maximum_object_size_in_memory 256 KB

memory_replacement_policy heap GDSF

cache_replacement_policy heap LFUDA

minimum_object_size 0 KB

maximum_object_size 4 MB

cache_dir ufs /var/squid/cache 100 16 256

offline_mode off

cache_swap_low 90

cache_swap_high 95

cache allow all

 

# Add any of your own refresh_pattern entries above these.

refresh_pattern ^ftp:    1440  20%  10080

refresh_pattern ^gopher:  1440  0%  1440

refresh_pattern -i (/cgi-bin/|?) 0  0%  0

refresh_pattern .    0  20%  4320

 

 

#Remote proxies

 

 

# Setup some default acls

# From 3.2 further configuration cleanups have been done to make things
easier and safer. The manager, localhost, and to_localhost ACL definitions
are now built-in.

# acl localhost src 127.0.0.1/32

acl allsrc src all

acl safeports port 21 70 80 210 280 443 488 563 591 631 777 901  3128 3127
1025-65535 

acl sslports port 443 563  

 

# From 3.2 further configuration cleanups have been done to make things
easier and safer. The manager, localhost, and to_localhost ACL definitions
are now built-in.

#acl manager proto cache_object

 

acl purge method PURGE

acl connect method CONNECT

 

# Define protocols used for redirects

acl HTTP proto HTTP

acl HTTPS proto HTTPS

http_access allow manager localhost

 

http_access deny manager

http_access allow purge localhost

http_access deny purge

http_access deny !safeports

http_access deny CONNECT !sslports

 

# Always allow localhost connections

# From 3.2 further configuration cleanups have been done to make things
easier and safer.

# The manager, localhost, and to_localhost ACL definitions are now built-in.

# http_access allow localhost

 

request_body_max_size 0 KB

 

 

 

 

delay_access 1 allow allsrc

 

# Reverse Proxy settings

 

 

# Custom options before auth

dns_nameservers 8.8.8.8 10.12.0.33

cache_peer 10.12.0.32  parent 80 0 no-query no-digest no-tproxy proxy-only

 

# Setup allowed acls

# Allow local network(s) on interface(s)

http_access allow localnet

# Default block all to be sure

http_access deny allsrc

 

 

 

 

cheers

-------------- next part --------------
An HTML attachment was scrubbed...
URL:
&lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20151110/9d3">http://lists.squid-cache.org/pipermail/squid-users/attachments/20151110/9d3</A>
a01a2/attachment.html&gt;

------------------------------

Subject: Digest Footer

_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


------------------------------

End of squid-users Digest, Vol 15, Issue 26
*******************************************


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007626.html">[squid-users] What does this error mean?
</A></li>
	<LI>Next message (by thread): <A HREF="007633.html">[squid-users] What does this error mean?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7632">[ date ]</a>
              <a href="thread.html#7632">[ thread ]</a>
              <a href="subject.html#7632">[ subject ]</a>
              <a href="author.html#7632">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
