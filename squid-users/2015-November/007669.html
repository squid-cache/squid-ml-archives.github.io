<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] logging to syslog
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20logging%20to%20syslog&In-Reply-To=%3CCAFWa6tK%3DR1QiKEo%3DWde_QDBtXBeTwMT-%3DZfCTqpbxGUc_YXPVA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007667.html">
   <LINK REL="Next"  HREF="007670.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] logging to syslog</H1>
    <B>Avraham Serour</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20logging%20to%20syslog&In-Reply-To=%3CCAFWa6tK%3DR1QiKEo%3DWde_QDBtXBeTwMT-%3DZfCTqpbxGUc_YXPVA%40mail.gmail.com%3E"
       TITLE="[squid-users] logging to syslog">tovmeod at gmail.com
       </A><BR>
    <I>Wed Nov 11 13:04:48 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007667.html">[squid-users] logging to syslog
</A></li>
        <LI>Next message (by thread): <A HREF="007670.html">[squid-users] logging to syslog
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7669">[ date ]</a>
              <a href="thread.html#7669">[ thread ]</a>
              <a href="subject.html#7669">[ subject ]</a>
              <a href="author.html#7669">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm very very sorry for replying to your email directly, I didn't mention
to, I just clicked reply on gmail

I wanted squid to log to syslog, using the syslog module on ubuntu the
socket path is /dev/log
from there I have my rsyslog config that forwards it to logstash

In any case my manager just told me to not log directly to syslog anymore,
he wants to write the logs to file and have them shipped to syslog

In any case I think I found the root of my problems, my squid.conf was
being built using patch, I had a file with only the diff.
So it looks like the patch wasn't being applied correctly, so squid was
running with the default conf file.

Thanks for the help, and sorry again
Avraham

On Wed, Nov 11, 2015 at 2:55 PM, Sebastian Kirschner &lt;
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">s.kirschner at afa-finanz.de</A>&gt; wrote:

&gt;<i> Hi Avraham,
</I>&gt;<i>
</I>&gt;<i> 1. Please do not contact me direct, use the Mailing List.
</I>&gt;<i>
</I>&gt;<i> I read the sentences you wrote to me again,
</I>&gt;<i> do you really want that squid logs the things that would go in access.log
</I>&gt;<i> to your /var/log/syslog (default debian path),
</I>&gt;<i> or do you just want to see what is written in the access.log.
</I>&gt;<i>
</I>&gt;<i> For Changing the location/ way that squid log the access entries read 2. ,
</I>&gt;<i> if not the default
</I>&gt;<i> path of the access log is /usr/local/squid/var/logs/access.log.
</I>&gt;<i>
</I>&gt;<i> 2. As you could see what Yuri Voinov wrote
</I>&gt;<i> &gt; #
</I>&gt;<i> &gt;#    udp    To send each log line as text data to a UDP receiver.
</I>&gt;<i> &gt;#        Place: The destination host name or IP and port.
</I>&gt;<i> &gt;#        Place Format:   //host:port
</I>&gt;<i> &gt;#
</I>&gt;<i> &gt;#    tcp    To send each log line as text data to a TCP receiver.
</I>&gt;<i> &gt;#        Lines may be accumulated before sending (see buffered_logs).
</I>&gt;<i> &gt;#        Place: The destination host name or IP and port.
</I>&gt;<i> &gt;#        Place Format:   //host:port
</I>&gt;<i> &gt;#
</I>&gt;<i> &gt;#    Default:
</I>&gt;<i> &gt;#        access_log daemon:/var/log/squid/access.log squid
</I>&gt;<i> &gt;#Default:
</I>&gt;<i> &gt;# access_log daemon:/var/log/squid/access.log squid
</I>&gt;<i>
</I>&gt;<i> These is snipped from the squid configuration documents on squid page (
</I>&gt;<i> <A HREF="http://www.squid-cache.org/Doc/config/access_log/">http://www.squid-cache.org/Doc/config/access_log/</A>).
</I>&gt;<i>
</I>&gt;<i> You could try ( I didn&#8217;t do it before) to use syslog as module and insert
</I>&gt;<i> it in your squid.conf
</I>&gt;<i>
</I>&gt;<i> Best Regards
</I>&gt;<i> Sebastian
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Von: Avraham Serour [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">tovmeod at gmail.com</A>]
</I>&gt;<i> Gesendet: Mittwoch, 11. November 2015 11:48
</I>&gt;<i> An: Sebastian Kirschner
</I>&gt;<i> Betreff: Re: [squid-users] logging to syslog
</I>&gt;<i>
</I>&gt;<i> I'm actually using rsyslog, it comes with ubuntu
</I>&gt;<i> in any case my conf for now is:
</I>&gt;<i>
</I>&gt;<i> template(name=&quot;lesquid_accessFormat&quot; type=&quot;string&quot;
</I>&gt;<i> string=&quot;programname=%programname% %msg%\n&quot;)
</I>&gt;<i> action(type=&quot;omfile&quot; dirCreateMode=&quot;0700&quot; FileCreateMode=&quot;0644&quot;
</I>&gt;<i>    File=&quot;/var/log/messages&quot; template=&quot;lesquid_accessFormat&quot;)
</I>&gt;<i>
</I>&gt;<i> then I tail the /var/log/messages file and check what happens when I make
</I>&gt;<i> a request using the proxy
</I>&gt;<i>
</I>&gt;<i> On Wed, Nov 11, 2015 at 12:09 PM, Avraham Serour &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">tovmeod at gmail.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> so where should the symlink should be? what is the default unix socket
</I>&gt;<i> path that squid tried to use?
</I>&gt;<i>
</I>&gt;<i> On Wed, Nov 11, 2015 at 10:11 AM, Sebastian Kirschner &lt;
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">s.kirschner at afa-finanz.de</A>&gt; wrote:
</I>&gt;<i> Hi Avraham,
</I>&gt;<i>
</I>&gt;<i> I think it wouldnt be a good idea to just create a symlink because squid
</I>&gt;<i> (or the user under which squid runs) then must have access to the syslog,
</I>&gt;<i> and if your squid instance get compromised the the syslog is open to read
</I>&gt;<i> for these one.
</I>&gt;<i>
</I>&gt;<i> Best Regards
</I>&gt;<i> Sebastian
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20151111/9f5131c3/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20151111/9f5131c3/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007667.html">[squid-users] logging to syslog
</A></li>
	<LI>Next message (by thread): <A HREF="007670.html">[squid-users] logging to syslog
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7669">[ date ]</a>
              <a href="thread.html#7669">[ thread ]</a>
              <a href="subject.html#7669">[ subject ]</a>
              <a href="author.html#7669">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
