<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] is it possible to pass the destination ip address to external_acl_type program ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20is%20it%20possible%20to%20pass%20the%20destination%20ip%20address%0A%20to%20external_acl_type%20program%20%3F&In-Reply-To=%3C56439BF7.9060504%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007684.html">
   <LINK REL="Next"  HREF="007689.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] is it possible to pass the destination ip address to external_acl_type program ?</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20is%20it%20possible%20to%20pass%20the%20destination%20ip%20address%0A%20to%20external_acl_type%20program%20%3F&In-Reply-To=%3C56439BF7.9060504%40treenet.co.nz%3E"
       TITLE="[squid-users] is it possible to pass the destination ip address to external_acl_type program ?">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Nov 11 19:50:15 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007684.html">[squid-users] is it possible to pass the destination ip address to external_acl_type program ?
</A></li>
        <LI>Next message (by thread): <A HREF="007689.html">[squid-users] Dansguardian Squid and HTTPS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7685">[ date ]</a>
              <a href="thread.html#7685">[ thread ]</a>
              <a href="subject.html#7685">[ subject ]</a>
              <a href="author.html#7685">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 12/11/2015 8:42 a.m., Dieter Bloms wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> I want to write a little script for an external_acl_type to block access
</I>&gt;<i> to many ip addresses.
</I>&gt;<i> As far as I can see %DST contains the fqdn of the destination and not
</I>&gt;<i> the ip address.
</I>&gt;<i> I know that I can do dns lookups in my script, but I think squid does it
</I>&gt;<i> anyway, so it may be faster to pass the ip address to the external helper.
</I>&gt;<i> So is there any undocumented parameter like %DSTIP or something like
</I>&gt;<i> that ?
</I>
You need Squid-4 which allows any of the logformat codes.

However, be aware that there is no server outgoing IP until the server
connection has aleady been opened and used to send the request.
Until that point, there is just a potential set of maybe's, represented
by the domain name.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007684.html">[squid-users] is it possible to pass the destination ip address to external_acl_type program ?
</A></li>
	<LI>Next message (by thread): <A HREF="007689.html">[squid-users] Dansguardian Squid and HTTPS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7685">[ date ]</a>
              <a href="thread.html#7685">[ thread ]</a>
              <a href="subject.html#7685">[ subject ]</a>
              <a href="author.html#7685">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
