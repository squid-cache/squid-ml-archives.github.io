<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid &quot;bumping&quot; traffic despite using &quot;splice&quot;	directive
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20%22bumping%22%20traffic%20despite%20using%20%22splice%22%0A%09directive&In-Reply-To=%3CCAM3U7EwGcA5pCdU3bvPWhk-W5kFaJe%2BjzMmU%2BMq4Jjz3AgD7Hg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007732.html">
   <LINK REL="Next"  HREF="007717.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid &quot;bumping&quot; traffic despite using &quot;splice&quot;	directive</H1>
    <B>Tom Mowbray</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20%22bumping%22%20traffic%20despite%20using%20%22splice%22%0A%09directive&In-Reply-To=%3CCAM3U7EwGcA5pCdU3bvPWhk-W5kFaJe%2BjzMmU%2BMq4Jjz3AgD7Hg%40mail.gmail.com%3E"
       TITLE="[squid-users] Squid &quot;bumping&quot; traffic despite using &quot;splice&quot;	directive">tmowbray at dalabs.com
       </A><BR>
    <I>Thu Nov 12 18:31:57 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007732.html">[squid-users] Watchguard firewall behind SQUID and the internet
</A></li>
        <LI>Next message (by thread): <A HREF="007717.html">[squid-users] Squid &quot;bumping&quot; traffic despite using &quot;splice&quot; directive
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7716">[ date ]</a>
              <a href="thread.html#7716">[ thread ]</a>
              <a href="subject.html#7716">[ subject ]</a>
              <a href="author.html#7716">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We're seeing some strange behavior where certain sites, especially those
hosted by Google, including youtube.com, where the HTTPS traffic is being
&quot;bumped&quot; and users are getting certificate errors with our self-signed
certificate and CA appearing in the certificate details.

What is strange is that we have the squid.conf set to either &quot;splice&quot; or
&quot;terminate&quot; all HTTPS traffic.  There is NO traffic that is supposed to be
bumped at all (because we are not able to load our CA cert on all client
machines).

Here is the significant portion of our squid.conf:

acl sslallow ssl::server_name &quot;/path/to/file&quot;
ssl_bump peek all
ssl_bump splice sslallow
ssl_bump terminate all

Most of the sites in acl sslallow work as expected...but some sites come
back with a certificate error as described above, suggesting that they were
&quot;bumped&quot; using our mimicked certificate.  This behavior also isn't 100%
reproducible...sometimes it works as expected, though it usually does not.

Another note:  Seems to happen mainly on mobile browsers and on Chrome
browser running on Google Chromebooks.

Is there something I'm missing?  Is there a way to ensure that NO sites are
being bumped at all?  (For our deployment, we'd rather terminate than bump
if splicing isn't possible).

Thanks,

Tom
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20151112/9a1799b5/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20151112/9a1799b5/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007732.html">[squid-users] Watchguard firewall behind SQUID and the internet
</A></li>
	<LI>Next message (by thread): <A HREF="007717.html">[squid-users] Squid &quot;bumping&quot; traffic despite using &quot;splice&quot; directive
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7716">[ date ]</a>
              <a href="thread.html#7716">[ thread ]</a>
              <a href="subject.html#7716">[ subject ]</a>
              <a href="author.html#7716">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
