<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Help, long response time(2 seconds) in squid!
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Help%2C%20long%20response%20time%282%20seconds%29%20in%20squid%21&In-Reply-To=%3C56453F28.30708%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007630.html">
   <LINK REL="Next"  HREF="007731.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Help, long response time(2 seconds) in squid!</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Help%2C%20long%20response%20time%282%20seconds%29%20in%20squid%21&In-Reply-To=%3C56453F28.30708%40treenet.co.nz%3E"
       TITLE="[squid-users] Help, long response time(2 seconds) in squid!">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Nov 13 01:38:48 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007630.html">[squid-users] Help, long response time(2 seconds) in squid!
</A></li>
        <LI>Next message (by thread): <A HREF="007731.html">[squid-users] Help, long response time(2 seconds) in squid!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7729">[ date ]</a>
              <a href="thread.html#7729">[ thread ]</a>
              <a href="subject.html#7729">[ subject ]</a>
              <a href="author.html#7729">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/11/2015 9:49 p.m., &#24464;&#27704;&#20581; wrote:
&gt;<i> Hi, All:
</I>&gt;<i> I tried to use squid as a web cache server today, but when I test it with http_load, I found squid may have a latency of 2 seconds in some cases.
</I>&gt;<i> Someone help me? Thanks!
</I>&gt;<i> The test is
</I>&gt;<i> -------
</I>&gt;<i> http_load -parallel 1 -seconds 20 url.txt
</I>&gt;<i> # the content in url.txt is `<A HREF="http://10.210.136.51:3128/xyj/1`">http://10.210.136.51:3128/xyj/1`</A>
</I>&gt;<i> ------
</I>&gt;<i> config for squid is 
</I>&gt;<i> -----
</I>&gt;<i> http_port 3128 accel vhost vport
</I>&gt;<i> cache_peer 10.210.136.51 parent 8888 0
</I>&gt;<i> # use mem only
</I>&gt;<i> cache_mem 1000 MB
</I>&gt;<i> -----
</I>&gt;<i> The access log
</I>&gt;<i> -----
</I>&gt;<i> 1447142491.264     39 10.210.136.54 TCP_MEM_HIT_ABORTED/200 4165 GET <A HREF="http://10.210.136.51:3128/xyj/1">http://10.210.136.51:3128/xyj/1</A> - HIER_NONE/- application/octet-stream
</I>&gt;<i> 1447142491.283     37 10.210.136.54 TCP_MEM_HIT_ABORTED/200 4165 GET <A HREF="http://10.210.136.51:3128/xyj/1">http://10.210.136.51:3128/xyj/1</A> - HIER_NONE/- application/octet-stream
</I>&gt;<i> 1447142493.288   2023 10.210.136.54 TCP_MEM_HIT_ABORTED/200 4165 GET <A HREF="http://10.210.136.51:3128/xyj/1">http://10.210.136.51:3128/xyj/1</A> - HIER_NONE/- application/octet-stream # 2023 ms! why?
</I>&gt;<i> 1447142493.307   2023 10.210.136.54 TCP_MEM_HIT_ABORTED/200 4165 GET <A HREF="http://10.210.136.51:3128/xyj/1">http://10.210.136.51:3128/xyj/1</A> - HIER_NONE/- application/octet-stream # 2023 ms! why?
</I>&gt;<i> 1447142493.326     38 10.210.136.54 TCP_MEM_HIT_ABORTED/200 4165 GET <A HREF="http://10.210.136.51:3128/xyj/1">http://10.210.136.51:3128/xyj/1</A> - HIER_NONE/- application/octet-stream
</I>&gt;<i> 1447142493.348     40 10.210.136.54 TCP_MEM_HIT_ABORTED/200 4165 GET <A HREF="http://10.210.136.51:3128/xyj/1">http://10.210.136.51:3128/xyj/1</A> - HIER_NONE/- application/octet-stream
</I>
None of these log lines look good. The 2sec response times is the least
of your worries. The client is ABORT'ing transactions without completing
them.


If the tester is pushing your Squid to its load limit. Then transaction
slowdown is the expected behaviour. When resources a transaction needs
to complete are unavailable, Squid pauses its processing until they
become avilable.
 Those resources may be CPU, sockets, buffer memory, or simply I/O
access to the cache object.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007630.html">[squid-users] Help, long response time(2 seconds) in squid!
</A></li>
	<LI>Next message (by thread): <A HREF="007731.html">[squid-users] Help, long response time(2 seconds) in squid!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7729">[ date ]</a>
              <a href="thread.html#7729">[ thread ]</a>
              <a href="subject.html#7729">[ subject ]</a>
              <a href="author.html#7729">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
