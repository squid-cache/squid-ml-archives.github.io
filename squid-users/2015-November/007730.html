<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Multicast WCCPv2 + Squid 3.3.8
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Multicast%20WCCPv2%20%2B%20Squid%203.3.8&In-Reply-To=%3C56455038.3000308%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007665.html">
   <LINK REL="Next"  HREF="007662.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Multicast WCCPv2 + Squid 3.3.8</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Multicast%20WCCPv2%20%2B%20Squid%203.3.8&In-Reply-To=%3C56455038.3000308%40treenet.co.nz%3E"
       TITLE="[squid-users] Multicast WCCPv2 + Squid 3.3.8">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Nov 13 02:51:36 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007665.html">[squid-users] Multicast WCCPv2 + Squid 3.3.8
</A></li>
        <LI>Next message (by thread): <A HREF="007662.html">[squid-users] File rotation problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7730">[ date ]</a>
              <a href="thread.html#7730">[ thread ]</a>
              <a href="subject.html#7730">[ subject ]</a>
              <a href="author.html#7730">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/11/2015 5:25 p.m., Fatah Mumtaz wrote:
&gt;<i> Hi everyone,
</I>&gt;<i> Currently i'm building lab for my thesis on the topic Multicast WCCPv2 with
</I>&gt;<i> Squid. I'm trying to config WCCPv2 to work with single proxy server (Squid
</I>&gt;<i> 3.3.8) and multiple Cisco 2821 routers. WCCPv2 works well with one proxy
</I>&gt;<i> server and one router configuration. It's been 2 months since I'm trying to
</I>&gt;<i> implement multicast WCCPv2 and actually I don't know how to config Squid to
</I>&gt;<i> be able to communicate with multiple routers using multicast to announce
</I>&gt;<i> itself presence. Because I've read the documentation from Cisco and I've
</I>&gt;<i> concluded into something like this &quot;the routers are somehow the &quot;clients&quot;
</I>&gt;<i> but not by sending IGMP messages, just by listening for multicast packets
</I>&gt;<i> send by the &quot;sources&quot;, the cache engines, on a specific multicast group
</I>&gt;<i> address. &quot; . So the proxy server (or Squid) acted as the multicast server
</I>&gt;<i> that sends multicast packets. Been look over the net and still have no clue.
</I>

The three IP protocol modes: unicast, anycast, broadcast, multicast.


This is a bit simplified, but basically how they operate:

unicast - 1:1 IPs, client has an IP used to contact server IP.
 Messages flow between these two IPs.

anycast - N:1 IPs. client has one IP, server has two IPs, one of the
server IPs is shared by multiple servers. client contacts shared server
IP, server responds from its unique IP, and packets flow as per unicast
using the non-shared IPs.

broadcast - N:N IPs. there are no servers and no clients. Just
broadcasters each with a unique IP, and  network-wide broadcast IP. An
endpoint sends packet to the network broadcast IP. All devices on the
network receive it. If there is any two-way communication the recipient
can switch to unicast and communicate with the broadcasters unique IP.

multicast - 1:N IPs. client has one IP, server has two IPs. clients
register for listening to output from the server multicast IP. any
router receiving a registration creates a &quot;group&quot; of clients wanting to
receive that servers output (any other clients will just be added to the
group), then registers itself to receive instead of the client it saw.
Server sends its data packets to all the IPs that register directly with
it. If they are routers they relay the packets to all the clients that
registered with them, and so on until the actual client(s) receive.

multicast is a most efficient way to distribute live streaming data, or
cyclical repeated copies of an item sent to recipients in distinct
chunks where the starting position does not matter. Like old fashioned
radio or TV channels, or torrent downloads. But not at all good for
TV-on-demand style services where clients need to fetch a fixed distinct
thing from the beginning to end in full.

Also, IPv4 requires admin to explicitly turn on multicast support and
many have not. Making it very diffucult to use in most of the world.
With IPv6 it is a native part of the protocol and enabled by default.


&gt;<i> 
</I>&gt;<i> And my question is simple :
</I>&gt;<i> 1. Is it possible to config squid to announce itself presence to the
</I>&gt;<i> routers using multicast? And if it is possible, please kindly provide any
</I>&gt;<i> detail.
</I>&gt;<i> 
</I>
Squid is not specifically coded to support it IIRC. It would be
interesting to see if a multicast address configured in the usual
wccp2_router directive worked with multiple responding routers (or to
make it work).

One thing to be aware of though is that Squid WCCP support is
incomplete, only coded to a slightly older Draft version of WCCP
predating recent IPv6 additions to WCCPv2, and contains some custom
changes to fix issues in the published Draft specification that was
followed.

If you are going to be doing any coding in Squid I suggest you sign up
with squid-dev mailing list and discuss your proposed changes there
where all the dev can provided input. Most of the dev do no read this
users list.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007665.html">[squid-users] Multicast WCCPv2 + Squid 3.3.8
</A></li>
	<LI>Next message (by thread): <A HREF="007662.html">[squid-users] File rotation problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7730">[ date ]</a>
              <a href="thread.html#7730">[ thread ]</a>
              <a href="subject.html#7730">[ subject ]</a>
              <a href="author.html#7730">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
