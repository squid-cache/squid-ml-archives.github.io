<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] affinity session load balancing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20affinity%20session%20load%20balancing&In-Reply-To=%3C5649B0BF.4000200%40performance-managers.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007799.html">
   <LINK REL="Next"  HREF="007801.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] affinity session load balancing</H1>
    <B>Patrick Chemla</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20affinity%20session%20load%20balancing&In-Reply-To=%3C5649B0BF.4000200%40performance-managers.com%3E"
       TITLE="[squid-users] affinity session load balancing">patrick.chemla at performance-managers.com
       </A><BR>
    <I>Mon Nov 16 10:32:31 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007799.html">[squid-users] affinity session load balancing
</A></li>
        <LI>Next message (by thread): <A HREF="007801.html">[squid-users] affinity session load balancing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7800">[ date ]</a>
              <a href="thread.html#7800">[ thread ]</a>
              <a href="subject.html#7800">[ subject ]</a>
              <a href="author.html#7800">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Antony,

Thanks for your answer.

Actually, I am doing load balancing as sourceash, so on IP source.

The problem is that about 80% of clients come from the same IP, so I 
have a highly loaded backend, while other are sleeping.

So whatever you call it, on haproxy they call it session affinity LB,  
my need is to use a round-robin load balancing, but, very important, 
each user should always directed to the same backend.

Can we do that with squid? avoiding user login on squid (userhash is not 
convenient)?

Patrick

On 16/11/2015 11:41, Antony Stone wrote:
&gt;<i> On Monday 16 November 2015 at 10:35:39, Patrick Chemla wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I am using squid for years, maybe with basic features, and I have a
</I>&gt;&gt;<i> problem today with an app where I need to manage multiple backends, be
</I>&gt;&gt;<i> sure that a user is always sent to the same one because the app writes
</I>&gt;&gt;<i> on local disk, and I have 80% users coming from same IP.
</I>&gt;<i> Is this Squid operating in accelerator mode (in front of the server/s) or in
</I>&gt;<i> proxying mode (being used by the clients)?
</I>&gt;<i>
</I>&gt;&gt;<i> So I need to load balance, not on the soucre IP, and I can't have a
</I>&gt;&gt;<i> login on squid to identify each user, because it will create a double
</I>&gt;&gt;<i> connexion procedure with the application login.
</I>&gt;<i> How does the app distinguish between different clients *without* Squid being
</I>&gt;<i> involved?
</I>&gt;<i>
</I>&gt;&gt;<i> Is there a way that squid will recognize a new connexion, maybe same IP,
</I>&gt;&gt;<i> and load balnace it to any backend using round-robin? some affinity
</I>&gt;&gt;<i> session load balancing?
</I>&gt;<i> The first thing needed to answer that is a definition of &quot;session&quot;.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Antony.
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007799.html">[squid-users] affinity session load balancing
</A></li>
	<LI>Next message (by thread): <A HREF="007801.html">[squid-users] affinity session load balancing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7800">[ date ]</a>
              <a href="thread.html#7800">[ thread ]</a>
              <a href="subject.html#7800">[ subject ]</a>
              <a href="author.html#7800">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
