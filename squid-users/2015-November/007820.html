<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Active Directory Authentication failing at the browser
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Active%20Directory%20Authentication%20failing%20at%20the%0A%20browser&In-Reply-To=%3C564A39EF.3070107%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007805.html">
   <LINK REL="Next"  HREF="007824.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Active Directory Authentication failing at the browser</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Active%20Directory%20Authentication%20failing%20at%20the%0A%20browser&In-Reply-To=%3C564A39EF.3070107%40treenet.co.nz%3E"
       TITLE="[squid-users] Active Directory Authentication failing at the browser">squid3 at treenet.co.nz
       </A><BR>
    <I>Mon Nov 16 20:17:51 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007805.html">[squid-users] Active Directory Authentication failing at the browser
</A></li>
        <LI>Next message (by thread): <A HREF="007824.html">[squid-users] Active Directory Authentication failing at the browser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7820">[ date ]</a>
              <a href="thread.html#7820">[ thread ]</a>
              <a href="subject.html#7820">[ subject ]</a>
              <a href="author.html#7820">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 17/11/2015 3:19 a.m., Eugene M. Zheganin wrote:
&gt;<i> Hi.
</I>&gt;<i> 
</I>&gt;<i> On 16.11.2015 18:46, dolson wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Squid Version:  Squid 3.4.8
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> OS Version:  Debian 8 (8.2)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have installed Squid on a server using Debian 8 and seem to have the basics 
</I>&gt;&gt;<i> operating, at least when I start the squid service, I have am no longer 
</I>&gt;&gt;<i> getting any error messages.  At this time, the goal is to authenticate users 
</I>&gt;&gt;<i> from Active Directory and log the user and the websites they are accessing.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The problem I am having is, when I set Firefox 35.0.1 on my Windows 7 
</I>&gt;&gt;<i> workstation to use the Squid proxy, I am getting the log in page (image below).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="imap://emz@mail.norma.perm.ru:143/fetch%3EUID%3E/INBOX/maillists/squid-users%3E58459?header=quotebody&amp;part=1.1.2&amp;filename=image001.png">imap://emz@mail.norma.perm.ru:143/fetch%3EUID%3E/INBOX/maillists/squid-users%3E58459?header=quotebody&amp;part=1.1.2&amp;filename=image001.png</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have tried entering my user name in various form EXAMPLE/USERID, USERID, 
</I>&gt;&gt;<i> EXAMPLE/ADMINISTRATOR, ADMINISTRATOR and the password and I have not had a 
</I>&gt;&gt;<i> successful at this time.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have attached the squid.conf, smb.conf, krb5.conf, and access.log files for 
</I>&gt;&gt;<i> review.  If you would like to see the cache.log file, please contact me as the 
</I>&gt;&gt;<i> file is too large to include in this post.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i> I suggest you first make Basic and NTLM working with active directory, and only 
</I>&gt;<i> then, having these 2 schemes working, you move to the GSS-SPNEGO scheme. This is 
</I>&gt;<i> because GSS-SPNEGO scheme is overcomplicated and difficult to debug, as it uses 
</I>&gt;<i> lots of components and can fall apart easily on any stage.
</I>&gt;<i> 
</I>
I suggest also using a current Firefox release. I am finding the 4x's
series work a lot better than the earlier 3x's did on Windows 7.

Kerberos also uses the <A HREF="https://lists.squid-cache.org/listinfo/squid-users">USER at DOMAIN</A> format for user labeling. Sending it
Basic USERID) or NTLM (DOMAIN/USERID) formatted labels may be the problem.

Kerberos and NTLM are both PITA protocols. But NTLM makes everything
worse. If you are able to avoid using it at all and to actively turn
NTLM off around your network the Kerberos side of things will work better.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007805.html">[squid-users] Active Directory Authentication failing at the browser
</A></li>
	<LI>Next message (by thread): <A HREF="007824.html">[squid-users] Active Directory Authentication failing at the browser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7820">[ date ]</a>
              <a href="thread.html#7820">[ thread ]</a>
              <a href="subject.html#7820">[ subject ]</a>
              <a href="author.html#7820">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
