<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Fwd: NTLM LDAP authentication problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Fwd%3A%20NTLM%20LDAP%20authentication%20problem&In-Reply-To=%3C564A4564.90003%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007817.html">
   <LINK REL="Next"  HREF="007821.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Fwd: NTLM LDAP authentication problem</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Fwd%3A%20NTLM%20LDAP%20authentication%20problem&In-Reply-To=%3C564A4564.90003%40treenet.co.nz%3E"
       TITLE="[squid-users] Fwd: NTLM LDAP authentication problem">squid3 at treenet.co.nz
       </A><BR>
    <I>Mon Nov 16 21:06:44 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007817.html">[squid-users] Fwd: NTLM LDAP authentication problem
</A></li>
        <LI>Next message (by thread): <A HREF="007821.html">[squid-users] Fwd: NTLM LDAP authentication problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7822">[ date ]</a>
              <a href="thread.html#7822">[ thread ]</a>
              <a href="subject.html#7822">[ subject ]</a>
              <a href="author.html#7822">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 17/11/2015 4:48 a.m., Eugene M. Zheganin wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> On 16.11.2015 19:51, Matej Kotras wrote:
</I>&gt;&gt;<i> Thank you for your response, as this is my first try with Squid, and
</I>&gt;&gt;<i> fairly newb in Linux.
</I>&gt;&gt;<i> I do not understand at all differences between basic/ntlm/gss-spnego
</I>&gt;&gt;<i> auths so I will do my homework and read about them. I've managed to
</I>&gt;&gt;<i> get this working after few weeks of &quot;trial and error&quot; method (I know,
</I>&gt;&gt;<i> I know, but I gotta start somewhere rite) following multiple guides.
</I>&gt;&gt;<i>
</I>&gt;<i> The usual issue with all those copy/paste tutorials is that they tend to
</I>&gt;<i> teach how to do everything at once, instead of moving from simple things
</I>&gt;<i> to more difficult ones. This order of simplicity/difficulty is the
</I>&gt;<i> following:
</I>&gt;<i> 
</I>&gt;<i> - adding Basic authentication, all authenticated users are authorized to
</I>&gt;<i> use proxy
</I>&gt;<i> - adding NTLM authentication, all authenticated users are authorized to
</I>&gt;<i> use proxy
</I>&gt;<i> - adding group-based authorization, authenticated users are authorized
</I>&gt;<i> to use proxy basing on the group membership, using simple helper like
</I>&gt;<i> squid_group_ldap
</I>&gt;<i> - adding GSS-SPNEGO authentication
</I>&gt;<i> - adding full-fledged GSS-SPNEGO group authorization helper.
</I>&gt;<i> 
</I>&gt;<i> You can try my article,
</I>&gt;<i> <A HREF="http://squidquotas.hq.norma.perm.ru/squid-auth.shtml.">http://squidquotas.hq.norma.perm.ru/squid-auth.shtml.</A> Though it's not
</I>&gt;<i> perfect and still lacks two last steps, at least it tries to follow that
</I>&gt;<i> approach.
</I>
Unfortunately it is not quite as simple as that.

The difference between the PC-NAME vs USER-LABEL logins is whether the
particular client software has access to the Windows Integrated
Authentication credentials or not. Whether that machine is registered to
the DOMAIN, or the User account is logged in specifically under their
own name, or a service account on the machine. And whether the software
is actually being used by a &quot;user&quot;.

Notice how I avoid the word &quot;username&quot; - since that is not applicable.
Only the account label as passed in the auth tokens is seen by Squids
part of the authentication. As you have noticed machines do traffic too,
users are not always involved.


One might also want to follow the simple Config examples provided in the
Squid wiki. They are carefully restricted to only documenting one thing
task at a time. Not going into unrelated features configuration that the
author was interested in.

Negotiate/Kerberos only:
&lt;<A HREF="http://wiki.squid-cache.org/ConfigExamples/Authenticate/Kerberos">http://wiki.squid-cache.org/ConfigExamples/Authenticate/Kerberos</A>&gt;

NTLM (with Basic backup for non-NTLM clients):
&lt;<A HREF="http://wiki.squid-cache.org/ConfigExamples/Authenticate/Ntlm">http://wiki.squid-cache.org/ConfigExamples/Authenticate/Ntlm</A>&gt;

Full Windows AD integration. (Negotiate/Kerberos, Negotiate/NTLM, NTLM,
and Basic):
&lt;<A HREF="http://wiki.squid-cache.org/ConfigExamples/Authenticate/WindowsActiveDirectory">http://wiki.squid-cache.org/ConfigExamples/Authenticate/WindowsActiveDirectory</A>&gt;


PS. Eugene, your section on &quot;Add remaining permissions&quot; is wrong and
suggests a very broken configuration be done. Squid needs *read*
permission and that is done with unix group membership not by editing
the pipe itself. Please have a read of our NTLM+Basic examples' section
on Winbind privileges. Doing it the right way allows Samba to manage its
pipe properly.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007817.html">[squid-users] Fwd: NTLM LDAP authentication problem
</A></li>
	<LI>Next message (by thread): <A HREF="007821.html">[squid-users] Fwd: NTLM LDAP authentication problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7822">[ date ]</a>
              <a href="thread.html#7822">[ thread ]</a>
              <a href="subject.html#7822">[ subject ]</a>
              <a href="author.html#7822">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
