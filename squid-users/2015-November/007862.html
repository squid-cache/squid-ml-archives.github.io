<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] &#22238;&#22797;&#65306;Re: Help, long response time(2 seconds) in squid!
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%0A%20%3D%3Futf-8%3Fb%3F5Zue5aSN77yaUmU6IEhlbHAsIGxvbmcgcmVzcG9u%3F%3D%0A%20%3D%3Futf-8%3Fq%3Fse_time%3D282_seconds%3D29_in_squid%21%3F%3D&In-Reply-To=%3C564C4F44.5060007%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007859.html">
   <LINK REL="Next"  HREF="007860.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] &#22238;&#22797;&#65306;Re: Help, long response time(2 seconds) in squid!</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%0A%20%3D%3Futf-8%3Fb%3F5Zue5aSN77yaUmU6IEhlbHAsIGxvbmcgcmVzcG9u%3F%3D%0A%20%3D%3Futf-8%3Fq%3Fse_time%3D282_seconds%3D29_in_squid%21%3F%3D&In-Reply-To=%3C564C4F44.5060007%40treenet.co.nz%3E"
       TITLE="[squid-users] &#22238;&#22797;&#65306;Re: Help, long response time(2 seconds) in squid!">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Nov 18 10:13:24 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007859.html">[squid-users] &#22238;&#22797;&#65306;Re:  Help, long response time(2 seconds) in squid!
</A></li>
        <LI>Next message (by thread): <A HREF="007860.html">[squid-users] Delay pools: HTTPS and rep_mime_type support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7862">[ date ]</a>
              <a href="thread.html#7862">[ thread ]</a>
              <a href="subject.html#7862">[ subject ]</a>
              <a href="author.html#7862">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 18/11/2015 8:00 p.m., &#24464;&#27704;&#20581; wrote:
&gt;<i> Hi, Eliezer:
</I>&gt;<i> Thanks!
</I>&gt;<i> I just solved this problem.Things are as follows:
</I>&gt;<i> The hostname is S-LAB-53, and I saw WANINGS in cache.log.
</I>&gt;<i> ------------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> 2015/11/18 11:16:52 kid1| WARNING: 'S-LAB-53' rDNS test failed: (2) No such file or directory
</I>&gt;<i> 
</I>&gt;<i> 2015/11/18 11:16:52 kid1| WARNING: Could not determine this machines public hostname. Please configure one or set 'visible_hostname'
</I>&gt;<i> 
</I>&gt;<i> --------------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> So I changed '127.0.0.1 localhost' to '127.0.0.1 localhost S-LAB-53' in
</I>&gt;<i> '/etc/hosts' and restart squid. Then, the 2 seconds response time
</I>&gt;<i> problem gone.
</I>&gt;<i>
</I>&gt;<i> But the root cause is still unknown. :(
</I>
Some requests just take time. In this case probably the time it takes
for DNS to figure out that &quot;S-LAB-53&quot; is not a DNS registered
Fully-Qualified Domain Name (FQDN).

It is important that a proxy visible_hostname be configured with (or
able to auto-detect) its public FQDN. Since that FQDN is used to
construct URLs that get emitted to external clients in some messages.
This happens in all proxy types, but has somewhat higher visibility in
reverse-proxy / CDN.


PS. I have been doing some updates in the client connection handling and
managed yesterday to replicate the behaviour of seeing _ABORTED on every
request. Do you happen to be patching your Squid in the client_side*.cc
code files? if so the patch is probably broken/incorrect.
 If not, what is the output of &quot;squid -v&quot; from your proxy?

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007859.html">[squid-users] &#22238;&#22797;&#65306;Re:  Help, long response time(2 seconds) in squid!
</A></li>
	<LI>Next message (by thread): <A HREF="007860.html">[squid-users] Delay pools: HTTPS and rep_mime_type support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7862">[ date ]</a>
              <a href="thread.html#7862">[ thread ]</a>
              <a href="subject.html#7862">[ subject ]</a>
              <a href="author.html#7862">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
