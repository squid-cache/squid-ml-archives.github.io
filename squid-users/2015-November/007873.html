<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] intercepting traffic
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20intercepting%20traffic&In-Reply-To=%3C564D451E.5060207%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007872.html">
   <LINK REL="Next"  HREF="007885.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] intercepting traffic</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20intercepting%20traffic&In-Reply-To=%3C564D451E.5060207%40treenet.co.nz%3E"
       TITLE="[squid-users] intercepting traffic">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Nov 19 03:42:22 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007872.html">[squid-users] intercepting traffic
</A></li>
        <LI>Next message (by thread): <A HREF="007885.html">[squid-users] intercepting traffic
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7873">[ date ]</a>
              <a href="thread.html#7873">[ thread ]</a>
              <a href="subject.html#7873">[ subject ]</a>
              <a href="author.html#7873">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 19/11/2015 3:08 p.m., Brendan Kearney wrote:
&gt;<i> I am trying to set up a transparent, intercepting squid instance, along
</I>&gt;<i> side my existing explicit instance, and would like some input around
</I>&gt;<i> what i have buggered up so far.
</I>&gt;<i> 
</I>&gt;<i> i am running HAProxy in front of two squid instances, with the XFF
</I>&gt;<i> header added by HAProxy.  My squid configs are all set to follow the XFF
</I>&gt;<i> for the real source and logging is setup around digesting XFF for the
</I>&gt;<i> source.
</I>&gt;<i> 
</I>&gt;<i> i took my config and added:
</I>&gt;<i> http_port 192.168.88.1:3129 intercept
</I>
This tells Squid you are intercepting the traffic between HAProxy and Squid.

You describe HAProxy as explicitly sending traffic to the Squid, so
there is no need for interception into Squid.

&gt;<i> 
</I>&gt;<i> this tells me that i am getting to the squid instances via the load
</I>&gt;<i> balancer, but i am running into the &quot;NAT must occur on the squid box&quot;
</I>&gt;<i> rule, i think.
</I>
Yes. That rule and the intercept option that cause it does not apply
when the software sending traffic to Squid is explicitly configured.
Such as you describe HAProxy being.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007872.html">[squid-users] intercepting traffic
</A></li>
	<LI>Next message (by thread): <A HREF="007885.html">[squid-users] intercepting traffic
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7873">[ date ]</a>
              <a href="thread.html#7873">[ thread ]</a>
              <a href="subject.html#7873">[ subject ]</a>
              <a href="author.html#7873">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
