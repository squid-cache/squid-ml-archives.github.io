<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] &#22238;&#22797;&#65306;Re:  &#22238;&#22797;&#65306;Re: Help, long response_time(2_seconds)_in_squid!
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%3D%3Fgbk%3Fb%3Fu9i4tKO6UmU6ICC72Li0o7pSZTogSGVscCwgbG9u%3F%3D%0A%09%3D%3Fgbk%3Fq%3Fg_response%3D5Ftime%3D282%3D5Fseconds%3D29%3D5Fin%3D5Fsquid%21%3F%3D&In-Reply-To=%3C20151119091807.EB72C700073%40webmail.sinamail.sina.com.cn%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007877.html">
   <LINK REL="Next"  HREF="007878.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] &#22238;&#22797;&#65306;Re:  &#22238;&#22797;&#65306;Re: Help, long response_time(2_seconds)_in_squid!</H1>
    <B>&#24464;&#27704;&#20581;</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%3D%3Fgbk%3Fb%3Fu9i4tKO6UmU6ICC72Li0o7pSZTogSGVscCwgbG9u%3F%3D%0A%09%3D%3Fgbk%3Fq%3Fg_response%3D5Ftime%3D282%3D5Fseconds%3D29%3D5Fin%3D5Fsquid%21%3F%3D&In-Reply-To=%3C20151119091807.EB72C700073%40webmail.sinamail.sina.com.cn%3E"
       TITLE="[squid-users] &#22238;&#22797;&#65306;Re:  &#22238;&#22797;&#65306;Re: Help, long response_time(2_seconds)_in_squid!">yongjianchn at sina.com
       </A><BR>
    <I>Thu Nov 19 09:18:07 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007877.html">[squid-users] Squid HaProxy Protocol Support
</A></li>
        <LI>Next message (by thread): <A HREF="007878.html">[squid-users] squid delay pool  websites execlude
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7876">[ date ]</a>
              <a href="thread.html#7876">[ thread ]</a>
              <a href="subject.html#7876">[ subject ]</a>
              <a href="author.html#7876">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, Amos:
Thank you for your help!
My squid is 3.5.11 without any patch. The downloaded it from <A HREF="http://www.squid-cache.org/Versions/v3/3.5/squid-3.5.11.tar.bz2">http://www.squid-cache.org/Versions/v3/3.5/squid-3.5.11.tar.bz2</A> about two weeks ago.

--------------------------------


----- &#21407;&#22987;&#37038;&#20214; -----
&#21457;&#20214;&#20154;&#65306;Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;
&#25910;&#20214;&#20154;&#65306;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
&#20027;&#39064;&#65306;Re: [squid-users] &#22238;&#22797;&#65306;Re: Help, long response_time(2_seconds)_in_squid!
&#26085;&#26399;&#65306;2015&#24180;11&#26376;18&#26085; 18&#28857;14&#20998;

On 18/11/2015 8:00 p.m., &#24464;&#27704;&#20581; wrote:
&gt;<i> Hi, Eliezer:
</I>&gt;<i> Thanks!
</I>&gt;<i> I just solved this problem.Things are as follows:
</I>&gt;<i> The hostname is S-LAB-53, and I saw WANINGS in cache.log.
</I>&gt;<i> ------------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> 2015/11/18 11:16:52 kid1| WARNING: 'S-LAB-53' rDNS test failed: (2) No such file or directory
</I>&gt;<i> 
</I>&gt;<i> 2015/11/18 11:16:52 kid1| WARNING: Could not determine this machines public hostname. Please configure one or set 'visible_hostname'
</I>&gt;<i> 
</I>&gt;<i> --------------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> So I changed '127.0.0.1 localhost' to '127.0.0.1 localhost S-LAB-53' in
</I>&gt;<i> '/etc/hosts' and restart squid. Then, the 2 seconds response time
</I>&gt;<i> problem gone.
</I>&gt;<i>
</I>&gt;<i> But the root cause is still unknown. :(
</I>Some requests just take time. In this case probably the time it takes
for DNS to figure out that &quot;S-LAB-53&quot; is not a DNS registered
Fully-Qualified Domain Name (FQDN).
It is important that a proxy visible_hostname be configured with (or
able to auto-detect) its public FQDN. Since that FQDN is used to
construct URLs that get emitted to external clients in some messages.
This happens in all proxy types, but has somewhat higher visibility in
reverse-proxy / CDN.
PS. I have been doing some updates in the client connection handling and
managed yesterday to replicate the behaviour of seeing _ABORTED on every
request. Do you happen to be patching your Squid in the client_side*.cc
code files? if so the patch is probably broken/incorrect.
 If not, what is the output of &quot;squid -v&quot; from your proxy?
Amos
_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20151119/c4cc6116/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20151119/c4cc6116/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007877.html">[squid-users] Squid HaProxy Protocol Support
</A></li>
	<LI>Next message (by thread): <A HREF="007878.html">[squid-users] squid delay pool  websites execlude
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7876">[ date ]</a>
              <a href="thread.html#7876">[ thread ]</a>
              <a href="subject.html#7876">[ subject ]</a>
              <a href="author.html#7876">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
