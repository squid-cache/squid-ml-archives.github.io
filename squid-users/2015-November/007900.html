<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid intercept mode fo http &amp; https
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20intercept%20mode%20fo%20http%20%26%20https&In-Reply-To=%3C5651117A.7060801%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007899.html">
   <LINK REL="Next"  HREF="007903.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid intercept mode fo http &amp; https</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20intercept%20mode%20fo%20http%20%26%20https&In-Reply-To=%3C5651117A.7060801%40treenet.co.nz%3E"
       TITLE="[squid-users] squid intercept mode fo http &amp; https">squid3 at treenet.co.nz
       </A><BR>
    <I>Sun Nov 22 00:51:06 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007899.html">[squid-users] squid intercept mode fo http &amp; https
</A></li>
        <LI>Next message (by thread): <A HREF="007903.html">[squid-users] squid intercept mode fo http &amp; https
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7900">[ date ]</a>
              <a href="thread.html#7900">[ thread ]</a>
              <a href="subject.html#7900">[ subject ]</a>
              <a href="author.html#7900">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 22/11/2015 5:56 a.m., Ahmad Alzaeem wrote:
&gt;<i> Thanks fot your reply .
</I>&gt;<i> 
</I>&gt;<i> I know that my DNS is weird .
</I>&gt;<i> 
</I>&gt;<i> But all I need is
</I>&gt;<i> I have access to DNS server , but I don&#8217;t have access to pcs to give them ip:port in their browsers .
</I>&gt;<i> 
</I>&gt;<i> So yes , im forced to work on that way .
</I>
You should not be. Have a read through
&lt;<A HREF="http://wiki.squid-cache.org/SquidFaq/ConfiguringBrowsers">http://wiki.squid-cache.org/SquidFaq/ConfiguringBrowsers</A>&gt;. Notice that
DNS weirdness is not mentioned anywhere, not even as a last-resort method.



&gt;<i> 
</I>&gt;<i> And I want to filter my websites and the only way to go internet is using the proxy .
</I>&gt;<i> 
</I>&gt;<i> So what do you suggest ?
</I>
Try the methods listed in that wiki page for WPAD/PAC auto-configuration
(aka &quot;transparent proxy configuration&quot;, notice that is a 3-word phrase).
That will catch a lot of the main-stream browsers.

When that is done set up your routers for *routing* the port 80/443
traffic through the Squid machine. With NAT (aka &quot;transparent
interception proxy&quot;, notice that is a different 3-word phrase)

No DNS required in any of that.

&gt;<i> 
</I>&gt;<i> So again , the packet go to squid , but inside this packet the name of websites and ds tip is the proxy ip.
</I>
Exactly. That is all Squid is given to work with.

&gt;<i> 
</I>&gt;<i> What settings needed on squid to operate such as get the info from name and skip dst ip ?
</I>&gt;<i> 
</I>&gt;<i>  If u look @ the log files u will understand my idea
</I>&gt;<i> 
</I>
We already understand your idea. Others have had it before. The reason
it is not popular is the extremely complicated nature of the multiple
pieces of high performance high-uptime hardware required just to keep it
from falling over and/or hitting the side effects you have seen so far,
and many others you have not even got close to reaching yet. When things
go wrong the clients also need an individual reset to clear their
internal DNS caches.

Route packets to Squid (no DNS) just like normally routed packets if
Squid were a border gateway, then NAT or TPROXY intercept into the proxy
itself on the same machine. FAR more robust.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007899.html">[squid-users] squid intercept mode fo http &amp; https
</A></li>
	<LI>Next message (by thread): <A HREF="007903.html">[squid-users] squid intercept mode fo http &amp; https
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7900">[ date ]</a>
              <a href="thread.html#7900">[ thread ]</a>
              <a href="subject.html#7900">[ subject ]</a>
              <a href="author.html#7900">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
