<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] file descriptors leak
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20file%20descriptors%20leak&In-Reply-To=%3C565261FA.1080809%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007906.html">
   <LINK REL="Next"  HREF="007917.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] file descriptors leak</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20file%20descriptors%20leak&In-Reply-To=%3C565261FA.1080809%40treenet.co.nz%3E"
       TITLE="[squid-users] file descriptors leak">squid3 at treenet.co.nz
       </A><BR>
    <I>Mon Nov 23 00:46:50 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007906.html">[squid-users] file descriptors leak
</A></li>
        <LI>Next message (by thread): <A HREF="007917.html">[squid-users] file descriptors leak
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7912">[ date ]</a>
              <a href="thread.html#7912">[ thread ]</a>
              <a href="subject.html#7912">[ subject ]</a>
              <a href="author.html#7912">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 23/11/2015 7:25 a.m., Eliezer Croitoru wrote:
&gt;<i> Hey Andre,
</I>&gt;<i> 
</I>&gt;<i> There are couple things to the picture.
</I>&gt;<i> It's not only squid that is the &quot;blame&quot;.
</I>&gt;<i> It depends on what your OS tcp stack settings are.
</I>&gt;<i> To verify couple things you can try to use the netstat tool.
</I>&gt;<i> run the command &quot;netstat -nto&quot; to see what is the timers status.
</I>&gt;<i> You can then see how long will a new connection stay in the established
</I>&gt;<i> state.
</I>&gt;<i> It might be the squid settings but if the client is not there it could
</I>&gt;<i> be because of some tcp tunable kernel settings.
</I>
Eliezer is right. The TCP layer itself should be terminating the
connection within a short time (30sec default) after the clients last
packet. Even if you use the TCP level keep-alive feature, that works by
ensuring small packets go back and forth between the Squid device and
the user device to keep the router state alive.

Something is making the TCP stack itself think the client device is
still connected *and active* on the network.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007906.html">[squid-users] file descriptors leak
</A></li>
	<LI>Next message (by thread): <A HREF="007917.html">[squid-users] file descriptors leak
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7912">[ date ]</a>
              <a href="thread.html#7912">[ thread ]</a>
              <a href="subject.html#7912">[ subject ]</a>
              <a href="author.html#7912">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
