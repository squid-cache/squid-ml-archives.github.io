<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] negotiate_wrapper: Return 'AF = * username
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20negotiate_wrapper%3A%20Return%20%27AF%20%3D%20%2A%20username&In-Reply-To=%3C5653CDF7.1090105%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007916.html">
   <LINK REL="Next"  HREF="007896.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] negotiate_wrapper: Return 'AF = * username</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20negotiate_wrapper%3A%20Return%20%27AF%20%3D%20%2A%20username&In-Reply-To=%3C5653CDF7.1090105%40treenet.co.nz%3E"
       TITLE="[squid-users] negotiate_wrapper: Return 'AF = * username">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Nov 24 02:39:51 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007916.html">[squid-users] negotiate_wrapper: Return 'AF = * username
</A></li>
        <LI>Next message (by thread): <A HREF="007896.html">[squid-users] squid intercept mode fo http &amp; https
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7922">[ date ]</a>
              <a href="thread.html#7922">[ thread ]</a>
              <a href="subject.html#7922">[ subject ]</a>
              <a href="author.html#7922">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 24/11/2015 5:57 a.m., Michael Pelletier wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> I have squid in the production environment and everything is running well.
</I>&gt;<i> I am building a new server that will be used as a new template of squid in
</I>&gt;<i> our virtual environment.
</I>&gt;<i> 
</I>&gt;<i> for some reason on the new template server I am getting negotiate_wrapper
</I>&gt;<i> inserting a &quot;*&quot; before the username. This of course is not matching any
</I>&gt;<i> users when I do a group matching in LDAP.
</I>&gt;<i> 
</I>&gt;<i>  negotiate_wrapper: Return 'AF = * [username]
</I>&gt;<i> 
</I>&gt;<i> Yet, this is not happening in the production systems. Does anyone know what
</I>&gt;<i> is going on?
</I>
The format of the Negotiate authentication lines is &quot;AF&quot; &lt;token&gt; &lt;label&gt;.

Where token is the base64 encoded Negotiate/Kerberos token to be sent to
the client to confirm authentication success. &quot;*&quot; is used when the
client is performing Negotiate/NTLM, which does not use that token.

Is that &quot;=&quot; symbol also in the result lines? if so it is what is
screwing things up.

IIRC we fixed this problem in the helper a long while back, please try
an upgrade. If it is occuring in the latest squid releases, please
provide which exact version you are using, and the cache.log trace when
diagnostics is enabled on the helper.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007916.html">[squid-users] negotiate_wrapper: Return 'AF = * username
</A></li>
	<LI>Next message (by thread): <A HREF="007896.html">[squid-users] squid intercept mode fo http &amp; https
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7922">[ date ]</a>
              <a href="thread.html#7922">[ thread ]</a>
              <a href="subject.html#7922">[ subject ]</a>
              <a href="author.html#7922">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
