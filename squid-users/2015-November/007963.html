<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Host header forgery detected after upgrade from	3.5.8 to 3.5.9
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Host%20header%20forgery%20detected%20after%20upgrade%20from%0A%093.5.8%20to%203.5.9&In-Reply-To=%3C6DA00084-FCDA-4410-ADE8-0C06FB15217E%40getbusi.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007961.html">
   <LINK REL="Next"  HREF="007964.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Host header forgery detected after upgrade from	3.5.8 to 3.5.9</H1>
    <B>Dan Charlesworth</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Host%20header%20forgery%20detected%20after%20upgrade%20from%0A%093.5.8%20to%203.5.9&In-Reply-To=%3C6DA00084-FCDA-4410-ADE8-0C06FB15217E%40getbusi.com%3E"
       TITLE="[squid-users] Host header forgery detected after upgrade from	3.5.8 to 3.5.9">dan at getbusi.com
       </A><BR>
    <I>Wed Nov 25 00:40:37 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007961.html">[squid-users] Host header forgery detected after upgrade from 3.5.8 to 3.5.9
</A></li>
        <LI>Next message (by thread): <A HREF="007964.html">[squid-users] Host header forgery detected after upgrade from	3.5.8 to 3.5.9
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7963">[ date ]</a>
              <a href="thread.html#7963">[ thread ]</a>
              <a href="subject.html#7963">[ subject ]</a>
              <a href="author.html#7963">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Alright, thanks for the hint.

My proxy and clients definitely have the same DNS server (I removed the secondary and tertiary ones to make totally sure) but the results definitely aren&#8217;t matching 99% of the time. Probably more like 90%.

Perhaps it&#8217;s 'cause my clients are caching records locally or something? It does seem to improve as the day progresses, after joining the intercepted wifi network in the morning.

Super annoying though trying to post a comment on GitHub or something and it just hangs.

&gt;<i> On 25 Nov 2015, at 11:19 AM, Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> On 25/11/2015 12:20 p.m., Dan Charlesworth wrote:
</I>&gt;&gt;<i> Thanks for the perspective on this, folks.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Going back to the technical stuff&#8212;and this isn&#8217;t really a squid thing&#8212;but is there any way I can minimise this using my DNS server? 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Can I force my local DNS to only ever return 1 address from the pool on a hostname I&#8217;m having trouble with?
</I>&gt;<i> 
</I>&gt;<i> That depends on your resolver, but I doubt it.
</I>&gt;<i> 
</I>&gt;<i> The DNS setup I mentioned in my last email to this thread is all I'm
</I>&gt;<i> aware of that gets even close to a fix.
</I>&gt;<i> 
</I>&gt;<i> Note that you may have to intercept clients port 53 traffic (both UDP
</I>&gt;<i> and TCP) to the resolver. That has implications with DNSSEC but should
</I>&gt;<i> still work as long as you do not alter the DNS responses, the resolver
</I>&gt;<i> is just there to ensure the same result goes to both querying parties.
</I>&gt;<i> 
</I>&gt;<i> Amos
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007961.html">[squid-users] Host header forgery detected after upgrade from 3.5.8 to 3.5.9
</A></li>
	<LI>Next message (by thread): <A HREF="007964.html">[squid-users] Host header forgery detected after upgrade from	3.5.8 to 3.5.9
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7963">[ date ]</a>
              <a href="thread.html#7963">[ thread ]</a>
              <a href="subject.html#7963">[ subject ]</a>
              <a href="author.html#7963">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
