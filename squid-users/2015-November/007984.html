<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 3.5.11 always can't cache Wikipedia content
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203.5.11%20always%20can%27t%20cache%20Wikipedia%20content&In-Reply-To=%3C56574932.5090207%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007983.html">
   <LINK REL="Next"  HREF="007985.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 3.5.11 always can't cache Wikipedia content</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203.5.11%20always%20can%27t%20cache%20Wikipedia%20content&In-Reply-To=%3C56574932.5090207%40ngtech.co.il%3E"
       TITLE="[squid-users] Squid 3.5.11 always can't cache Wikipedia content">eliezer at ngtech.co.il
       </A><BR>
    <I>Thu Nov 26 18:02:26 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007983.html">[squid-users] Squid 3.5.11 always can't cache Wikipedia content
</A></li>
        <LI>Next message (by thread): <A HREF="007985.html">[squid-users] Squid 3.5.11 always can't cache Wikipedia content
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7984">[ date ]</a>
              <a href="thread.html#7984">[ thread ]</a>
              <a href="subject.html#7984">[ subject ]</a>
              <a href="author.html#7984">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Yuri,

Maybe there is a bug.
I will try to see if I am having the same issue.

Eliezer

On 26/11/2015 18:01, Yuri Voinov wrote:
&gt;<i>
</I>&gt;<i> -----BEGIN PGP SIGNED MESSAGE-----
</I>&gt;<i> Hash: SHA256
</I>&gt;<i>
</I>&gt;<i> One simple Wikipedia URL.
</I>&gt;<i>
</I>&gt;<i> This is second-third-etc. query access log:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://i.imgur.com/AOpeSQx.png">http://i.imgur.com/AOpeSQx.png</A>
</I>&gt;<i>
</I>&gt;<i> This is redbot URL info:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://i.imgur.com/dmwjH26.png">http://i.imgur.com/dmwjH26.png</A>
</I>&gt;<i>
</I>&gt;<i> This is squid.conf (3.5.11 latest build):
</I>&gt;<i>
</I>&gt;<i> # -------------------------------------
</I>&gt;<i> # Access Control Lists
</I>&gt;<i> # -------------------------------------
</I>&gt;<i> acl localnet src 192.168.0.0/16    # RFC1918 possible internal network
</I>&gt;<i>
</I>&gt;<i> acl SSL_ports port 443
</I>&gt;<i> acl SSL_ports port 8443        # Telecom exclusion
</I>&gt;<i> acl SSL_ports port 2041        # ICQ/MRA
</I>&gt;<i> acl SSL_ports port 2042        # ICQ/MRA
</I>&gt;<i> acl SSL_ports port 5160        # ICQ/MRA
</I>&gt;<i> acl SSL_ports port 5228        # ICQ/MRA
</I>&gt;<i> acl Safe_ports port 80        # http
</I>&gt;<i> acl Safe_ports port 21        # ftp
</I>&gt;<i> acl Safe_ports port 443        # https
</I>&gt;<i> acl Safe_ports port 70        # gopher
</I>&gt;<i> acl Safe_ports port 210        # wais
</I>&gt;<i> acl Safe_ports port 1025-65535    # unregistered ports
</I>&gt;<i> acl Safe_ports port 280        # http-mgmt
</I>&gt;<i> acl Safe_ports port 488        # gss-http
</I>&gt;<i> acl Safe_ports port 591        # filemaker
</I>&gt;<i> acl Safe_ports port 777        # multiling http
</I>&gt;<i>
</I>&gt;<i> # Common methods
</I>&gt;<i> acl CONNECT method CONNECT
</I>&gt;<i> acl PURGE method PURGE
</I>&gt;<i> acl GET method GET
</I>&gt;<i>
</I>&gt;<i> # Windows update acls
</I>&gt;<i> acl windowsupdate dstdomain sls.update.microsoft.com.akadns.net
</I>&gt;<i> acl windowsupdate dstdomain windowsupdate.microsoft.com
</I>&gt;<i> acl windowsupdate dstdomain .update.microsoft.com
</I>&gt;<i> acl windowsupdate dstdomain download.windowsupdate.com
</I>&gt;<i> acl windowsupdate dstdomain redir.metaservices.microsoft.com
</I>&gt;<i> acl windowsupdate dstdomain images.metaservices.microsoft.com
</I>&gt;<i> acl windowsupdate dstdomain c.microsoft.com
</I>&gt;<i> acl windowsupdate dstdomain www.download.windowsupdate.com
</I>&gt;<i> acl windowsupdate dstdomain wustat.windows.com
</I>&gt;<i> acl windowsupdate dstdomain crl.microsoft.com
</I>&gt;<i> acl windowsupdate dstdomain sls.microsoft.com
</I>&gt;<i> acl windowsupdate dstdomain productactivation.one.microsoft.com
</I>&gt;<i> acl windowsupdate dstdomain ntservicepack.microsoft.com
</I>&gt;<i>
</I>&gt;<i> # Windows update methods
</I>&gt;<i> acl wuCONNECT dstdomain www.update.microsoft.com
</I>&gt;<i> acl wuCONNECT dstdomain sls.microsoft.com
</I>&gt;<i>
</I>&gt;<i> # Youtube &amp; CDN store rewrite ACLs
</I>&gt;<i> acl store_rewrite_list urlpath_regex
</I>&gt;<i> \.(jp(e?g|e|2)|gif|png|bmp|ico|svg|web(p|m)|flv|f4f|mp(3|4)|ttf|eot|woff2?|(c|x|j)ss|js(t?|px?))\?
</I>&gt;<i> \/ads\?
</I>&gt;<i> acl store_rewrite_list_web url_regex &quot;/usr/local/squid/etc/url.rewrite_web&quot;
</I>&gt;<i> acl store_rewrite_list_web_cdn url_regex
</I>&gt;<i> &quot;/usr/local/squid/etc/url.rewrite_cdn&quot;
</I>&gt;<i>
</I>&gt;<i> # Adobe/Java and other updates
</I>&gt;<i> acl adobe_java_updates url_regex &quot;/usr/local/squid/etc/url.updates&quot;
</I>&gt;<i>
</I>&gt;<i> # No-cache
</I>&gt;<i> acl dont_cache_url url_regex &quot;/usr/local/squid/etc/url.nocache&quot;
</I>&gt;<i>
</I>&gt;<i> # Tor acl
</I>&gt;<i> acl tor_url dstdom_regex -i &quot;/usr/local/squid/etc/url.tor&quot;
</I>&gt;<i>
</I>&gt;<i> # SSL bump acl
</I>&gt;<i> acl net_bump src &quot;/usr/local/squid/etc/net.bump&quot;
</I>&gt;<i>
</I>&gt;<i> # TLD acl
</I>&gt;<i> acl block_tld dstdomain &quot;/usr/local/squid/etc/dstdom.tld&quot;
</I>&gt;<i>
</I>&gt;<i> # -------------------------------------
</I>&gt;<i> # Access parameters
</I>&gt;<i> # -------------------------------------
</I>&gt;<i> # Deny requests to unsafe ports
</I>&gt;<i> http_access deny !Safe_ports
</I>&gt;<i> # Deny CONNECT to other than SSL ports
</I>&gt;<i> http_access deny CONNECT !SSL_ports
</I>&gt;<i>
</I>&gt;<i> # Only allow cachemgr access from localhost
</I>&gt;<i> http_access allow localhost manager
</I>&gt;<i> http_access deny manager
</I>&gt;<i> http_access deny to_localhost
</I>&gt;<i> # Allow purge from localhost
</I>&gt;<i> http_access allow PURGE localhost
</I>&gt;<i> http_access deny PURGE
</I>&gt;<i>
</I>&gt;<i> # Block top level domains
</I>&gt;<i> http_access deny block_tld
</I>&gt;<i> deny_info TCP_RESET block_tld
</I>&gt;<i>
</I>&gt;<i> # Rule allowing access from local networks
</I>&gt;<i> http_access allow localnet
</I>&gt;<i> http_access allow localhost
</I>&gt;<i>
</I>&gt;<i> # No cache directives
</I>&gt;<i> cache deny dont_cache_url
</I>&gt;<i>
</I>&gt;<i> # ICP/HTCP access
</I>&gt;<i> #icp_access allow localnet
</I>&gt;<i> #icp_access deny all
</I>&gt;<i> #htcp_access allow localnet
</I>&gt;<i> #htcp_access deny all
</I>&gt;<i>
</I>&gt;<i> # For YT block useragent header
</I>&gt;<i> acl user-agent-browser browser -i
</I>&gt;<i> (android|blackberry|iphone|ipad|ipod|opera mini|iemobile)
</I>&gt;<i> acl youtube_dom dstdomain .youtube.com
</I>&gt;<i> request_header_access User-Agent deny youtube_dom !user-agent-browser
</I>&gt;<i> request_header_replace User-Agent Mozilla/5.0 (compatible;
</I>&gt;<i> Googlebot/2.1; +<A HREF="http://www.google.com/bot.html">http://www.google.com/bot.html</A>)
</I>&gt;<i> # Normalize Accept-Encoding to support compression via eCAP
</I>&gt;<i> request_header_access Accept-Encoding deny all
</I>&gt;<i> request_header_replace Accept-Encoding gzip;q=1.0, identity;q=0.5, *;q=0
</I>&gt;<i> # Disable alternate protocols
</I>&gt;<i> request_header_access Alternate-Protocol deny all
</I>&gt;<i> reply_header_access Alternate-Protocol deny all
</I>&gt;<i> # Disable HSTS
</I>&gt;<i> reply_header_access Strict-Transport-Security deny all
</I>&gt;<i> reply_header_replace Strict-Transport-Security max-age=0; includeSubDomains
</I>&gt;<i> # Remove User-Agent from Vary
</I>&gt;<i> reply_header_access Vary deny all
</I>&gt;<i> reply_header_replace Vary Accept-Encoding
</I>&gt;<i>
</I>&gt;<i> # 302 loop
</I>&gt;<i> acl text_mime rep_mime_type text/html text/plain
</I>&gt;<i> acl http302 http_status 302
</I>&gt;<i> store_miss deny text_mime http302
</I>&gt;<i> send_hit deny text_mime http302
</I>&gt;<i>
</I>&gt;<i> # Windows updates rules
</I>&gt;<i> http_access allow CONNECT wuCONNECT localnet
</I>&gt;<i> http_access allow CONNECT wuCONNECT localhost
</I>&gt;<i> http_access allow windowsupdate localnet
</I>&gt;<i> http_access allow windowsupdate localhost
</I>&gt;<i>
</I>&gt;<i> # SSL bump rules
</I>&gt;<i> sslproxy_cert_error allow all
</I>&gt;<i> acl DiscoverSNIHost at_step SslBump1
</I>&gt;<i> ssl_bump peek DiscoverSNIHost
</I>&gt;<i> acl NoSSLIntercept ssl::server_name_regex -i
</I>&gt;<i> &quot;/usr/local/squid/etc/url.nobump&quot;
</I>&gt;<i> acl NoSSLIntercept ssl::server_name_regex -i &quot;/usr/local/squid/etc/url.tor&quot;
</I>&gt;<i> ssl_bump splice NoSSLIntercept
</I>&gt;<i> ssl_bump bump net_bump
</I>&gt;<i>
</I>&gt;<i> # Privoxy+Tor access rules
</I>&gt;<i> never_direct allow tor_url
</I>&gt;<i>
</I>&gt;<i> # And finally deny all other access to this proxy
</I>&gt;<i> http_access deny all
</I>&gt;<i>
</I>&gt;<i> # -------------------------------------
</I>&gt;<i> # HTTP parameters
</I>&gt;<i> # -------------------------------------
</I>&gt;<i> # Local Privoxy is cache parent
</I>&gt;<i> cache_peer 127.0.0.1 parent 8118 0 no-query no-digest default
</I>&gt;<i>
</I>&gt;<i> cache_peer_access 127.0.0.1 allow tor_url
</I>&gt;<i> cache_peer_access 127.0.0.1 deny all
</I>&gt;<i>
</I>&gt;<i> # Don't cache 404 long time
</I>&gt;<i> negative_ttl 5 minutes
</I>&gt;<i> positive_dns_ttl 15 hours
</I>&gt;<i> negative_dns_ttl 1 minutes
</I>&gt;<i>
</I>&gt;<i> # -------------------------------------
</I>&gt;<i> # Cache parameters
</I>&gt;<i> # -------------------------------------
</I>&gt;<i> http_port 3126 ssl-bump generate-host-certificates=on
</I>&gt;<i> dynamic_cert_mem_cache_size=4MB cert=/usr/local/squid/etc/rootCA.crt
</I>&gt;<i> key=/usr/local/squid/etc/rootCA.key options=NO_SSLv3
</I>&gt;<i> dhparams=/usr/local/squid/etc/dhparam.pem
</I>&gt;<i> http_port 3127
</I>&gt;<i> http_port 3128 intercept
</I>&gt;<i> https_port 3129 intercept ssl-bump generate-host-certificates=on
</I>&gt;<i> dynamic_cert_mem_cache_size=4MB cert=/usr/local/squid/etc/rootCA.crt
</I>&gt;<i> key=/usr/local/squid/etc/rootCA.key options=NO_SSLv3
</I>&gt;<i> dhparams=/usr/local/squid/etc/dhparam.pem
</I>&gt;<i> sslproxy_capath /etc/opt/csw/ssl/certs
</I>&gt;<i> #sslproxy_cafile /usr/local/squid/etc/ca-bundle.crt
</I>&gt;<i> sslproxy_options NO_SSLv3,SINGLE_DH_USE
</I>&gt;<i> sslproxy_cipher
</I>&gt;<i> EECDH+ECDSA+AESGCM:EECDH+aRSA+AESGCM:EECDH+ECDSA+SHA384:EECDH+ECDSA+SHA256:EECDH+aRSA+SHA384:EECDH+aRSA+SHA256:EECDH+aRSA+RC4:EECDH:EDH+aRSA:HIGH:!RC4:!aNULL:!eNULL:!LOW:!3DES:!MD5:!EXP:!PSK:!SRP:!DSS
</I>&gt;<i> sslcrtd_program /usr/local/squid/libexec/ssl_crtd -s /var/lib/ssl_db -M 4MB
</I>&gt;<i>
</I>&gt;<i> cachemgr_passwd disable shutdown reconfigure rotate
</I>&gt;<i>
</I>&gt;<i> # Cache user
</I>&gt;<i> cache_effective_user squid
</I>&gt;<i> cache_effective_group squid
</I>&gt;<i>
</I>&gt;<i> # Turn off collect per-client statistics
</I>&gt;<i> client_db off
</I>&gt;<i>
</I>&gt;<i> # Forces reload-into-ims
</I>&gt;<i> reload_into_ims on
</I>&gt;<i>
</I>&gt;<i> # Hide internal networks details outside
</I>&gt;<i> via off
</I>&gt;<i> forwarded_for delete
</I>&gt;<i>
</I>&gt;<i> # Do not show Squid version
</I>&gt;<i> httpd_suppress_version_string on
</I>&gt;<i>
</I>&gt;<i> # WCCPv2 parameters
</I>&gt;<i> wccp2_router 192.168.200.2
</I>&gt;<i> wccp2_forwarding_method l2
</I>&gt;<i> wccp2_return_method l2
</I>&gt;<i> wccp2_rebuild_wait off
</I>&gt;<i> wccp2_service standard 0
</I>&gt;<i> wccp2_service dynamic 70
</I>&gt;<i> wccp2_service_info 70 protocol=tcp
</I>&gt;<i> flags=dst_ip_hash,src_ip_alt_hash,src_port_alt_hash priority=240 ports=443
</I>&gt;<i>
</I>&gt;<i> # Prioritization of local hits
</I>&gt;<i> qos_flows tos local-hit=0x68
</I>&gt;<i>
</I>&gt;<i> # Default is on
</I>&gt;<i> digest_generation off
</I>&gt;<i>
</I>&gt;<i> # -------------------------------------
</I>&gt;<i> # Adaptation parameters
</I>&gt;<i> # -------------------------------------
</I>&gt;<i> icap_enable on
</I>&gt;<i> icap_service_failure_limit -1
</I>&gt;<i> icap_send_client_ip on
</I>&gt;<i> icap_send_client_username on
</I>&gt;<i> icap_client_username_header X-Authenticated-User
</I>&gt;<i> icap_preview_enable on
</I>&gt;<i> icap_preview_size 1024
</I>&gt;<i> icap_service service_avi_req reqmod_precache
</I>&gt;<i> <A HREF="icap://localhost:1344/squidclamav">icap://localhost:1344/squidclamav</A> bypass=off
</I>&gt;<i> adaptation_access service_avi_req allow all
</I>&gt;<i> icap_service service_avi_resp respmod_precache
</I>&gt;<i> <A HREF="icap://localhost:1344/squidclamav">icap://localhost:1344/squidclamav</A> bypass=on
</I>&gt;<i> adaptation_access service_avi_resp allow all
</I>&gt;<i>
</I>&gt;<i> ecap_enable on
</I>&gt;<i> acl HTTP_STATUS_OK http_status 200
</I>&gt;<i> loadable_modules /usr/local/lib/ecap_adapter_gzip.so
</I>&gt;<i> ecap_service gzip_service respmod_precache
</I>&gt;<i> <A HREF="ecap://www.vigos.com/ecap_gzip">ecap://www.vigos.com/ecap_gzip</A> bypass=off
</I>&gt;<i> adaptation_access gzip_service allow HTTP_STATUS_OK
</I>&gt;<i>
</I>&gt;<i> # -------------------------------------
</I>&gt;<i> # Store parameters
</I>&gt;<i> # -------------------------------------
</I>&gt;<i> maximum_object_size 8 Gb
</I>&gt;<i>
</I>&gt;<i> cache_dir aufs /data/cache/d1 32767 16 256
</I>&gt;<i> cache_dir aufs /data/cache/d2 32767 16 256
</I>&gt;<i> cache_dir aufs /data/cache/d3 32767 16 256
</I>&gt;<i> cache_dir aufs /data/cache/d4 32767 16 256
</I>&gt;<i>
</I>&gt;<i> # -------------------------------------
</I>&gt;<i> # Memory parameters
</I>&gt;<i> # -------------------------------------
</I>&gt;<i> cache_mem 512 Mb
</I>&gt;<i>
</I>&gt;<i> #memory_pools off
</I>&gt;<i>
</I>&gt;<i> # -------------------------------------
</I>&gt;<i> # Tuning parameters
</I>&gt;<i> # -------------------------------------
</I>&gt;<i> memory_replacement_policy heap GDSF
</I>&gt;<i> cache_replacement_policy heap LFUDA
</I>&gt;<i>
</I>&gt;<i> # Shutdown delay before terminate connections
</I>&gt;<i> shutdown_lifetime 15 second
</I>&gt;<i>
</I>&gt;<i> # -------------------------------------
</I>&gt;<i> # Process/log parameters
</I>&gt;<i> # -------------------------------------
</I>&gt;<i> access_log daemon:/data/cache/log/access.log buffer-size=256KB !tor_url
</I>&gt;<i> # Don't log ICP queries
</I>&gt;<i> #log_icp_queries off
</I>&gt;<i>
</I>&gt;<i> # Turn off internal log rotation
</I>&gt;<i> logfile_rotate 0
</I>&gt;<i>
</I>&gt;<i> cache_log /data/cache/log/cache.log
</I>&gt;<i> cache_store_log none
</I>&gt;<i>
</I>&gt;<i> # Default is off
</I>&gt;<i> buffered_logs on
</I>&gt;<i>
</I>&gt;<i> coredump_dir /var/core
</I>&gt;<i>
</I>&gt;<i> pid_filename /tmp/squid.pid
</I>&gt;<i>
</I>&gt;<i> strip_query_terms off
</I>&gt;<i>
</I>&gt;<i> # -------------------------------------
</I>&gt;<i> # Content parameters
</I>&gt;<i> # -------------------------------------
</I>&gt;<i> range_offset_limit none all
</I>&gt;<i> quick_abort_min -1 KB
</I>&gt;<i>
</I>&gt;<i> # Updates: Windows, Adobe, Java
</I>&gt;<i> refresh_pattern -i
</I>&gt;<i> microsoft.com.*\.(cab|exe|ms[i|u|f|p]|asf|wm[v|a]|dat|zip)    4320 80%
</I>&gt;<i> 43200    reload-into-ims
</I>&gt;<i> refresh_pattern -i
</I>&gt;<i> windowsupdate.com.*\.(cab|exe|ms[i|u|f|p]|asf|wm[v|a]|dat|zip)    4320
</I>&gt;<i> 80% 43200    reload-into-ims
</I>&gt;<i> refresh_pattern -i
</I>&gt;<i> my.windowsupdate.website.com.*\.(cab|exe|ms[i|u|f|p]|asf|wm[v|a]|dat|zip)
</I>&gt;<i> 4320 80% 43200    reload-into-ims
</I>&gt;<i> refresh_pattern -i adobe.com.*\.(zip|exe)    4320    80%    43200
</I>&gt;<i> reload-into-ims
</I>&gt;<i> refresh_pattern -i java.com.*\.(zip|exe)    4320    80%    43200
</I>&gt;<i> reload-into-ims
</I>&gt;<i> refresh_pattern -i sun.com.*\.(zip|exe)        4320    80%    43200
</I>&gt;<i> reload-into-ims
</I>&gt;<i> refresh_pattern -i google\.com.*\.(zip|exe)    4320    80%    43200
</I>&gt;<i> reload-into-ims
</I>&gt;<i> refresh_pattern -i macromedia\.com.*\.(zip|exe)    4320    80%
</I>&gt;<i> 43200    reload-into-ims
</I>&gt;<i> # Other setups and updates
</I>&gt;<i> refresh_pattern -i \.(zip|(g|b)z2?|exe|msi)$    4320    80%    43200
</I>&gt;<i> reload-into-ims
</I>&gt;<i> # Cacle squidinternal
</I>&gt;<i> refresh_pattern    -i    video-srv\.youtube\.squidinternal    0    0%    0
</I>&gt;<i> refresh_pattern    -i    squidinternal    14400    100%    518400
</I>&gt;<i> override-expire override-lastmod refresh-ims reload-into-ims
</I>&gt;<i> ignore-private ignore-auth ignore-must-revalidate store-stale
</I>&gt;<i> ignore-no-store
</I>&gt;<i> # Keep swf in cache
</I>&gt;<i> refresh_pattern -i \.swf$    10080    100%    43200    override-expire
</I>&gt;<i> reload-into-ims ignore-private
</I>&gt;<i> # .NET cache
</I>&gt;<i> refresh_pattern -i \.((a|m)s(h|p)x?)$        10080    100%    43200
</I>&gt;<i> reload-into-ims ignore-private
</I>&gt;<i> # Other long-lived items
</I>&gt;<i> refresh_pattern -i
</I>&gt;<i> \.(jp(e?g|e|2)|gif|png|bmp|ico|svg|web(p|m)|flv|f4f|mp(3|4)|ttf|eot|woff2?|(c|x|j)ss|js(t?|px?))(\?.*)?$
</I>&gt;<i> 14400    100%    518400    override-expire override-lastmod
</I>&gt;<i> reload-into-ims ignore-private ignore-no-store ignore-must-revalidate
</I>&gt;<i> refresh_pattern -i
</I>&gt;<i> \.((cs|d?|m?|p?|r?|s?|w?|x?|z?)h?t?m?(l?)|php(3?|5?)|rss|atom|vr(t|ml))(\?.*)?$
</I>&gt;<i> 10080    100%    86400    override-expire override-lastmod
</I>&gt;<i> reload-into-ims ignore-private ignore-no-store ignore-must-revalidate
</I>&gt;<i> # Default patterns
</I>&gt;<i> refresh_pattern -i (/cgi-bin/|\?)    0    0%    0
</I>&gt;<i> refresh_pattern    .    0    20%    4320    reload-into-ims
</I>&gt;<i>
</I>&gt;<i> # -------------------------------------
</I>&gt;<i> # Rewriter parameters
</I>&gt;<i> # -------------------------------------
</I>&gt;<i> # ufdbGuard rewriter
</I>&gt;<i> url_rewrite_program /usr/local/ufdbguard/bin/ufdbgclient -C
</I>&gt;<i> url_rewrite_children 64 startup=0 idle=1 concurrency=2
</I>&gt;<i> redirector_bypass off
</I>&gt;<i>
</I>&gt;<i> # Storeurl rewriter
</I>&gt;<i> store_id_program /usr/local/squid/libexec/storeid_file_rewrite
</I>&gt;<i> /usr/local/squid/etc/storeid.conf
</I>&gt;<i> store_id_children 32 startup=0 idle=1 concurrency=4
</I>&gt;<i> # Store ID access
</I>&gt;<i> store_id_access deny !GET
</I>&gt;<i> store_id_access allow store_rewrite_list
</I>&gt;<i> store_id_access allow store_rewrite_list_web
</I>&gt;<i> store_id_access allow store_rewrite_list_web_cdn
</I>&gt;<i> store_id_access allow adobe_java_updates
</I>&gt;<i> store_id_access deny all
</I>&gt;<i> store_id_bypass off
</I>&gt;<i> ######
</I>&gt;<i>
</I>&gt;<i> Note: 3.4.14 cache the same URL(s) perfectly, with over 86% HIT.
</I>&gt;<i> 3.5 _always_ returns MISS.
</I>&gt;<i>
</I>&gt;<i> One simple question:
</I>&gt;<i>
</I>&gt;<i> Why?
</I>&gt;<i> -----BEGIN PGP SIGNATURE-----
</I>&gt;<i> Version: GnuPG v2
</I>&gt;<i>
</I>&gt;<i> iQEcBAEBCAAGBQJWVyzKAAoJENNXIZxhPexGlGgIAMMa8eAdv+ABBf4TWWk4p61f
</I>&gt;<i> H0VGGP7D/j/0QxxsR7j4CcdBc2rVZ5G7nT+KSVDn+MUd7WQ563ZZYsVYsYPb3iBs
</I>&gt;<i> Zhmv39Hz0WtpjTtExMXrjKa31cXIP0YaRUwky1M7gnNolvQq2EsYqUU+F9Iw45LV
</I>&gt;<i> BQcbrzR0UBSU9jTyG67y626y43Cx5WUzAO+5xW7SFut2gYxR8np6p8Evt+Jfbu9w
</I>&gt;<i> pMR0/qTCbHml+nq/dC0sCEeKMQhWZ4tygErdnNn/3RGuwi8rY3CJumbNDhW9JMhV
</I>&gt;<i> zt46zhcui4x2/KIGlj/v0rXRqaWVtY5z/v+I1gLhkNm4+pjclEZHIu27Cag6czs=
</I>&gt;<i> =4jTH
</I>&gt;<i> -----END PGP SIGNATURE-----
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007983.html">[squid-users] Squid 3.5.11 always can't cache Wikipedia content
</A></li>
	<LI>Next message (by thread): <A HREF="007985.html">[squid-users] Squid 3.5.11 always can't cache Wikipedia content
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7984">[ date ]</a>
              <a href="thread.html#7984">[ thread ]</a>
              <a href="subject.html#7984">[ subject ]</a>
              <a href="author.html#7984">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
