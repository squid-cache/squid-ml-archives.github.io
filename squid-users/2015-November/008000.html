<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] centos 6 install
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20centos%206%20install&In-Reply-To=%3C5657FE9D.3060406%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007997.html">
   <LINK REL="Next"  HREF="008007.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] centos 6 install</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20centos%206%20install&In-Reply-To=%3C5657FE9D.3060406%40treenet.co.nz%3E"
       TITLE="[squid-users] centos 6 install">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Nov 27 06:56:29 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007997.html">[squid-users] centos 6 install
</A></li>
        <LI>Next message (by thread): <A HREF="008007.html">[squid-users] centos 6 install
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8000">[ date ]</a>
              <a href="thread.html#8000">[ thread ]</a>
              <a href="subject.html#8000">[ subject ]</a>
              <a href="author.html#8000">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 27/11/2015 7:19 p.m., Alex Samad wrote:
&gt;<i> On 27 November 2015 at 17:12, Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt; wrote:
</I>&gt;&gt;<i> On 27/11/2015 1:51 p.m., Alex Samad wrote:
</I>&gt;&gt;&gt;<i> Hi
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Just to add to this, I am not seeing a clean start of squid either.
</I>&gt;&gt;&gt;<i> the sysvinit comes back as failed, but the process is started and its
</I>&gt;&gt;&gt;<i> seems to be working.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Also I get lots of
</I>&gt;&gt;&gt;<i> ignoring malformed cache entry
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Which is preceeded by:
</I>&gt;<i> 
</I>&gt;<i> Hi
</I>&gt;<i> 
</I>&gt;<i> it was in the bottom of the previous mail, thats a copy of the log
</I>&gt;<i> starting from the start up
</I>
Exactly. The new install of Squid is a newer version. With a new format
of cache storage, updated data corruption protection, and detection.

The old install was so old it had a v1 cache format, which is a clear
sign that the old version also lacked some of those corruption
protections. It is not unexpected to see signs of that lack in the old
cache contents.


&gt;<i> 
</I>&gt;<i> This is is trying to start up
</I>&gt;<i> 
</I>&gt;<i> 2015/11/27 11:02:41 kid1| Set Current Directory to /var/spool/squid
</I>&gt;<i> 2015/11/27 11:02:41 kid1| Starting Squid Cache version 3.5.11 for
</I>&gt;<i> x86_64-redhat-linux-gnu...
</I>...
&gt;<i> 2015/11/27 11:02:41 kid1| Rejecting swap file v1 to avoid cache index
</I>&gt;<i> corruption. Forcing a full cache index rebuild. See Squid bug #3441.
</I>&gt;<i> 2015/11/27 11:02:41 kid1| Rebuilding storage in /var/spool/squid (no log)
</I>&gt;<i> 2015/11/27 11:02:41 kid1| Rejecting swap file v1 to avoid cache index
</I>&gt;<i> corruption. Forcing a full cache index rebuild. See Squid bug #3441.
</I>&gt;<i> 2015/11/27 11:02:41 kid1| Rebuilding storage in /var/spool/squid2 (no log)
</I>&gt;<i> 2015/11/27 11:02:41 kid1| Rejecting swap file v1 to avoid cache index
</I>&gt;<i> corruption. Forcing a full cache index rebuild. See Squid bug #3441.
</I>&gt;<i> 2015/11/27 11:02:41 kid1| Rebuilding storage in /var/spool/squid3 (no log)
</I>...
&gt;<i> 2015/11/27 11:03:33 kid1| WARNING: Ignoring malformed cache entry.
</I>&gt;<i> 2015/11/27 11:03:33 kid1| WARNING: Ignoring malformed cache entry.
</I>&gt;<i> 2015/11/27 11:04:26 kid1| Done scanning /var/spool/squid dir (153502 entries)
</I>&gt;<i> 2015/11/27 11:04:44 kid1| WARNING: Ignoring malformed cache entry.
</I>&gt;<i> 2015/11/27 11:06:15 kid1| WARNING: Ignoring malformed cache entry.
</I>&gt;<i> 
</I>...

Until all of the cache directories have been fully scanned, their
contents corrected, and the new swap.state journals produced you can
expect to see various warnings or messages about cache content errors.

I see /var/spool/squid completed scanning this time (but not the other
cache_dir). If the proxy shuts down cleanly, then you should not see the
&quot;Rejecting swap file v1&quot; message for it on next startup, nor warnings
about the objects inside it.

It is only a worry if your Squid shutdown correctly (fully) and they
occur on the next run as well. That said, not much of a worry because
Squid is detecting and handling it well enough to just warn and keep
operating.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007997.html">[squid-users] centos 6 install
</A></li>
	<LI>Next message (by thread): <A HREF="008007.html">[squid-users] centos 6 install
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8000">[ date ]</a>
              <a href="thread.html#8000">[ thread ]</a>
              <a href="subject.html#8000">[ subject ]</a>
              <a href="author.html#8000">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
