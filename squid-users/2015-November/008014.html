<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] issue with start / stop scripts
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20issue%20with%20start%20/%20stop%20scripts&In-Reply-To=%3CCAJ%2BQ1PUyXfRkA7N%2ByLd5apf4hy%3D79Evye9obfvYyNCkaf1wh_w%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008013.html">
   <LINK REL="Next"  HREF="008015.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] issue with start / stop scripts</H1>
    <B>Alex Samad</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20issue%20with%20start%20/%20stop%20scripts&In-Reply-To=%3CCAJ%2BQ1PUyXfRkA7N%2ByLd5apf4hy%3D79Evye9obfvYyNCkaf1wh_w%40mail.gmail.com%3E"
       TITLE="[squid-users] issue with start / stop scripts">alex at samad.com.au
       </A><BR>
    <I>Sat Nov 28 22:21:48 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008013.html">[squid-users] issue with start / stop scripts
</A></li>
        <LI>Next message (by thread): <A HREF="008015.html">[squid-users] issue with start / stop scripts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8014">[ date ]</a>
              <a href="thread.html#8014">[ thread ]</a>
              <a href="subject.html#8014">[ subject ]</a>
              <a href="author.html#8014">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

yeah from the rpms. I found the variables to lengthen the timeout period.

But I got in the strange situation where the pid file was still there
(shutdown took longer than the timeout). and the scripts still thought
it was running, so stop would fail as it does a check first. do we
need to do a check first on shutdown ??

A

On 29 November 2015 at 09:14, Eliezer Croitoru &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>&gt; wrote:
&gt;<i> What script are you using?
</I>&gt;<i> If it's from my RPMs I might be able to patch it and make sure it will work
</I>&gt;<i> better.
</I>&gt;<i>
</I>&gt;<i> Eliezer
</I>&gt;<i>
</I>&gt;<i> On 27/11/2015 08:09, Alex Samad wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have a rather long list of blocked address in my squid config.
</I>&gt;&gt;<i> and the default start stop timeout values are a bit short for my setup.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> when i did stop it failed because the time to parse the config took to
</I>&gt;&gt;<i> long. any reason it needs to parse to shutdown ?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> that left the pid file behind, which causes stop to fail again as
</I>&gt;&gt;<i> squid -k check -f /etc/squid/squid.conf
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> fails no running process
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Alex
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> squid-users mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008013.html">[squid-users] issue with start / stop scripts
</A></li>
	<LI>Next message (by thread): <A HREF="008015.html">[squid-users] issue with start / stop scripts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8014">[ date ]</a>
              <a href="thread.html#8014">[ thread ]</a>
              <a href="subject.html#8014">[ subject ]</a>
              <a href="author.html#8014">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
