<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] source code question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20source%20code%20question&In-Reply-To=%3C565B3548.9070100%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008020.html">
   <LINK REL="Next"  HREF="008022.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] source code question</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20source%20code%20question&In-Reply-To=%3C565B3548.9070100%40measurement-factory.com%3E"
       TITLE="[squid-users] source code question">rousskov at measurement-factory.com
       </A><BR>
    <I>Sun Nov 29 17:26:32 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008020.html">[squid-users] source code question
</A></li>
        <LI>Next message (by thread): <A HREF="008022.html">[squid-users] source code question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8021">[ date ]</a>
              <a href="thread.html#8021">[ thread ]</a>
              <a href="subject.html#8021">[ subject ]</a>
              <a href="author.html#8021">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/29/2015 09:03 AM, joe wrote:
&gt;<i> pls don't mind me if i ask. purpose learning and have capability of helping 
</I>
Please post Squid development questions to squid-dev, not squid-users.


&gt;<i> int64_t expectlen = entry-&gt;getReply()-&gt;content_length + entry-&gt;getReply()-&gt;hdr_sz;
</I>&gt;<i> int64_t curlen =  mem-&gt;endOffset();
</I>&gt;<i> 
</I>&gt;<i> expectlen  is the content_length + 
</I>&gt;<i> the  curlen is it = expectlen  ???
</I>

I do not fully understand your question, but, in many cases:

* expectlen is the total number of response bytes we expect to get

* curlen is the number of response bytes we got so far

Both variables include response headers and body.


The complete answer is actually more complex because of responses
without known Content-Length, Range responses, and other special cases.
I do not recommend assuming that CheckQuickAbortIsReasonable() code
handles all those cases 100% correctly.


HTH,

Alex.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008020.html">[squid-users] source code question
</A></li>
	<LI>Next message (by thread): <A HREF="008022.html">[squid-users] source code question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8021">[ date ]</a>
              <a href="thread.html#8021">[ thread ]</a>
              <a href="subject.html#8021">[ subject ]</a>
              <a href="author.html#8021">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
