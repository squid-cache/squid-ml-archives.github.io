<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid.conf Help
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid.conf%20Help&In-Reply-To=%3C560E4147020000D900009921%40tmail02.tourism.gov.za%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005806.html">
   <LINK REL="Next"  HREF="005808.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid.conf Help</H1>
    <B>Marius Van Heerden</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid.conf%20Help&In-Reply-To=%3C560E4147020000D900009921%40tmail02.tourism.gov.za%3E"
       TITLE="[squid-users] squid.conf Help">MariusVH at tourism.gov.za
       </A><BR>
    <I>Fri Oct  2 06:33:11 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005806.html">[squid-users] Squid.conf Help
</A></li>
        <LI>Next message (by thread): <A HREF="005808.html">[squid-users] Squid.conf Help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5807">[ date ]</a>
              <a href="thread.html#5807">[ thread ]</a>
              <a href="subject.html#5807">[ subject ]</a>
              <a href="author.html#5807">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all. Can you help?

When I use the following lines in my squid.conf it works, but it connects to
a local proxy server:

cache_peer 10.185.131.46  parent    3128  3130  proxy-only default
cache_peer 10.185.131.13  sibling   3128  3130  proxy-only

When I use the following destination proxy server it does not work.

cache_peer 10.123.217.82  sibling   3128  3130  proxy-only default

Both the first 2 servers connect to this proxy and are working fine, but as
soon as I link this server to it squid fails to connect. 

Any help will be appreciated. 

Here follows my squid.conf file.


acl all src all
acl allow localhost
acl allow localnet
acl localhost src 127.0.0.1/32
acl manager proto cache_object
acl to_localhost dst 127.0.0.0/8
acl localnet src 10.0.0.0/8
acl localnet src 172.16.0.0/12
acl localnet src 192.168.0.0/16
acl SSL_ports port 443
acl Safe_ports port 80
acl Safe_ports port 3128   #http
acl Safe_ports port 21
acl Safe_ports port 443
acl Safe_ports port 70
acl Safe_ports port 210
acl Safe_ports port 1025-65535
acl Safe_ports port 280
acl Safe_ports port 488
acl Safe_ports port 591
acl Safe_ports port 777
acl CONNECT method CONNECT
acl shoutcast rep_header X-HTTP09-First-Line ^ICY\s[0-9]
acl apache rep_header Server ^Apache
http_access allow all
http_access allow manager localhost
http_access allow localhost
http_access allow localnet
http_access allow all
cache_peer 10.185.131.46  parent    3128  3130  proxy-only default
cache_peer 10.123.217.82  sibling   3128  3130  proxy-only
cache_peer 10.185.131.13  sibling   3128  3130  proxy-only
http_reply_access allow all
icp_access allow localnet
never_direct allow all
forwarded_for on
cache_mem 8 MB
memory_replacement_policy lru
cache_replacement_policy lru
maximum_object_size 4096 KB
cache_swap_low 90
cache_log /var/log/squid/cache.log
cache_store_log /var/log/squid/store.log
ftp_passive on
refresh_pattern ^ftp: 1440 20 10080
refresh_pattern ^gopher: 1440 0 1440
refresh_pattern -i  (/cgi-bin/|\?) 0 0 0
refresh_pattern . 0 20 4320
cache_swap_high 95

Kind Regards,

Marius
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20151002/5bfa0b23/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20151002/5bfa0b23/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005806.html">[squid-users] Squid.conf Help
</A></li>
	<LI>Next message (by thread): <A HREF="005808.html">[squid-users] Squid.conf Help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5807">[ date ]</a>
              <a href="thread.html#5807">[ thread ]</a>
              <a href="subject.html#5807">[ subject ]</a>
              <a href="author.html#5807">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
