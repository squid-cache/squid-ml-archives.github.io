<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] SSL Bump and NF getsockopt failed
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SSL%20Bump%20and%20NF%20getsockopt%20failed&In-Reply-To=%3C560F6B39.6040400%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005816.html">
   <LINK REL="Next"  HREF="005837.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] SSL Bump and NF getsockopt failed</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SSL%20Bump%20and%20NF%20getsockopt%20failed&In-Reply-To=%3C560F6B39.6040400%40treenet.co.nz%3E"
       TITLE="[squid-users] SSL Bump and NF getsockopt failed">squid3 at treenet.co.nz
       </A><BR>
    <I>Sat Oct  3 05:44:25 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005816.html">[squid-users] SSL Bump and NF getsockopt failed
</A></li>
        <LI>Next message (by thread): <A HREF="005837.html">[squid-users] R:  SSL Bump and NF getsockopt failed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5822">[ date ]</a>
              <a href="thread.html#5822">[ thread ]</a>
              <a href="subject.html#5822">[ subject ]</a>
              <a href="author.html#5822">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 3/10/2015 12:31 a.m., Job wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> i have enabled SSL Bump with certificates, i redirect the 443 on the 3129 port of my Squid server but https sites are not accessible anymore and i can see these errors in logs:
</I>&gt;<i> 
</I>&gt;<i> ERROR: NF getsockopt(ORIGINAL_DST) failed on local=192.168.10.xxx
</I>
The connection arriving at Squid does not have any NAT records in the
Squid machine kernel.

It is mandatory that NAT be done on the Squid machine. Not on some
remote router (aka CPE &quot;port-forwarding&quot;).
 &lt;<A HREF="http://wiki.squid-cache.org/ConfigExamples/Intercept/LinuxDnat">http://wiki.squid-cache.org/ConfigExamples/Intercept/LinuxDnat</A>&gt;


It is mandatory that you *not* test NAT ports by configuring your
browser to use the proxy via it. Configure the testing browser the same
way teh cleints woudl be tested.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005816.html">[squid-users] SSL Bump and NF getsockopt failed
</A></li>
	<LI>Next message (by thread): <A HREF="005837.html">[squid-users] R:  SSL Bump and NF getsockopt failed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5822">[ date ]</a>
              <a href="thread.html#5822">[ thread ]</a>
              <a href="subject.html#5822">[ subject ]</a>
              <a href="author.html#5822">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
