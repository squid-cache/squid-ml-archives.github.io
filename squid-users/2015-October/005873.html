<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] authentication setup for squid-internal-mgr
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20authentication%20setup%20for%20squid-internal-mgr&In-Reply-To=%3C5614DE12.3000202%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005858.html">
   <LINK REL="Next"  HREF="005861.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] authentication setup for squid-internal-mgr</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20authentication%20setup%20for%20squid-internal-mgr&In-Reply-To=%3C5614DE12.3000202%40treenet.co.nz%3E"
       TITLE="[squid-users] authentication setup for squid-internal-mgr">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Oct  7 08:55:46 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005858.html">[squid-users] authentication setup for squid-internal-mgr
</A></li>
        <LI>Next message (by thread): <A HREF="005861.html">[squid-users] Caching Facebook content
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5873">[ date ]</a>
              <a href="thread.html#5873">[ thread ]</a>
              <a href="subject.html#5873">[ subject ]</a>
              <a href="author.html#5873">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 7/10/2015 6:41 a.m., Tory M Blue wrote:
&gt;<i> So I was playing with squid-internal-mgr (replacement for cachemgr.cgi it
</I>&gt;<i> seems), but I have no real authentication access , other than my ACL's
</I>&gt;<i> 
</I>&gt;<i> acl manager url_regex -i ^cache_<A HREF="object://">object://</A> +i
</I>&gt;<i> ^https?://[^/]+/squid-internal-mgr/
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> And limited to my networks obviously.
</I>&gt;<i> 
</I>&gt;<i> But as of now those pages are wide open, so anyone could go to /menu and
</I>&gt;<i> see /shutdown and type that in and bingo bango my squid server is shutdown.
</I>&gt;<i> 
</I>
I believe the word is &quot;Meh.&quot;. This is one of the expected use-cases for
CacheMgr. ie how the new access methods are designed to be used.

Strictly speaking its anyone who can access those reports. You just have
one less layer of protection than default installs use.

&gt;<i> 
</I>&gt;<i> So was wondering if there is a way to make some of these pages require
</I>&gt;<i> authentication? I'm not clear what &quot;public&quot; means in each instance below,
</I>
&quot;public&quot; means there is no report-specific password set by
cachemgr_passwd directive required to access it. The only control will
be the http_access rules you configure.


You create a urlpath_regex ACL to match regular (not squidclient or
cachemgr.cgi) requests for the reports like so:

 acl foo urlpath_regex \
    ^/squid-internal-mgr/(shutdown|reconfigure|rotate|offline_toggle)

Authentication can be applied in combination with that to do whatever
reports you want authenticated. Also group limitations, external ACL,
specific src IPs, etc..

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005858.html">[squid-users] authentication setup for squid-internal-mgr
</A></li>
	<LI>Next message (by thread): <A HREF="005861.html">[squid-users] Caching Facebook content
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5873">[ date ]</a>
              <a href="thread.html#5873">[ thread ]</a>
              <a href="subject.html#5873">[ subject ]</a>
              <a href="author.html#5873">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
