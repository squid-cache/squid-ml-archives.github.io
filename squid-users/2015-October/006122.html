<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Remote Desktop Gateway thru Squid.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Remote%20Desktop%20Gateway%20thru%20Squid.&In-Reply-To=%3C5628A727.4020108%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006105.html">
   <LINK REL="Next"  HREF="006093.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Remote Desktop Gateway thru Squid.</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Remote%20Desktop%20Gateway%20thru%20Squid.&In-Reply-To=%3C5628A727.4020108%40treenet.co.nz%3E"
       TITLE="[squid-users] Remote Desktop Gateway thru Squid.">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Oct 22 09:06:47 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="006105.html">[squid-users] Remote Desktop Gateway thru Squid.
</A></li>
        <LI>Next message (by thread): <A HREF="006093.html">[squid-users] How can I change the Squid logo on an access denied	page.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6122">[ date ]</a>
              <a href="thread.html#6122">[ thread ]</a>
              <a href="subject.html#6122">[ subject ]</a>
              <a href="author.html#6122">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 22/10/2015 7:43 a.m., Sebastien.Boulianne wrote:
&gt;<i> Hi all,
</I>&gt;<i> 
</I>&gt;<i> Im looking to use my Remote Desktop Gateway with my Squid.
</I>&gt;<i> I tried this config but it didnt work.
</I>&gt;<i> 
</I>&gt;<i> ### SITE
</I>&gt;<i> cache_peer site.domain.qc.ca parent 443 0 no-query originserver ssl sslflags=DONT_VERIFY_PEER name=site
</I>&gt;<i> acl sitehttps url_regex ^<A HREF="https://site\.domain\.qc\.ca">https://site\.domain\.qc\.ca</A>
</I>&gt;<i> http_access allow www443 sitehttps
</I>&gt;<i> http_access allow rdp sitehttps
</I>&gt;<i> cache_peer_access site allow www443 sitehttps
</I>&gt;<i> cache_peer_access site allow rdp sitehttps
</I>&gt;<i> acl sitehttp url_regex ^<A HREF="http://site\.domain\.qc\.ca">http://site\.domain\.qc\.ca</A>
</I>&gt;<i> http_access deny sitehttp
</I>&gt;<i> deny_info 302:<A HREF="https://%H%R">https://%H%R</A> sitehttp
</I>&gt;<i> 
</I>&gt;<i> Im curious to know if someone ever did that.
</I>&gt;<i> 
</I>&gt;<i> Thanks you very much in advance.
</I>&gt;<i> 
</I>&gt;<i> 1445443415.045      3 ............ TCP_MISS/404 1580 RDG_OUT_DATA <A HREF="https://site.domain.qc.ca/remoteDesktopGateway/">https://site.domain.qc.ca/remoteDesktopGateway/</A> - FIRSTUP_PARENT/............ text/html
</I>&gt;<i> 1445443415.116      2 ............ TCP_MISS/401 450 RPC_IN_DATA <A HREF="https://site.domain.qc.ca/rpc/rpcproxy.dll?">https://site.domain.qc.ca/rpc/rpcproxy.dll?</A> - FIRSTUP_PARENT/............ text/plain
</I>&gt;<i> 1445443415.182      3 ............ TCP_MISS/401 450 RPC_OUT_DATA <A HREF="https://site.domain.qc.ca/rpc/rpcproxy.dll?">https://site.domain.qc.ca/rpc/rpcproxy.dll?</A> - FIRSTUP_PARENT/............ text/plain
</I>&gt;<i> 
</I>&gt;<i> S&#233;bastien
</I>
Like Yuri said Squid is not designed to be compatible with every
protocol. Just HTTP and where possible HTTP based ones. So RDG and RPC
are only supported so far as they obey HTTP protocol requirements (ie
RESTful principles and behaviour).

That said, the above log lines look to me like they are working fine. At
least as far as Squid is concerned.
* The 404 is a server API being tested and found disabled or unavailable.
* The 401 is the server requiring authentication from the client before
RPC access is permitted. Which is fine and good. I would be worried if
it did not.
* all requests are being sent via the cache_peer.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="006105.html">[squid-users] Remote Desktop Gateway thru Squid.
</A></li>
	<LI>Next message (by thread): <A HREF="006093.html">[squid-users] How can I change the Squid logo on an access denied	page.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6122">[ date ]</a>
              <a href="thread.html#6122">[ thread ]</a>
              <a href="subject.html#6122">[ subject ]</a>
              <a href="author.html#6122">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
