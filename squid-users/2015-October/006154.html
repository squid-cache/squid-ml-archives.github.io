<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] HTTP performance hit with Squid
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20HTTP%20performance%20hit%20with%20Squid&In-Reply-To=%3C56294D00.30408%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006167.html">
   <LINK REL="Next"  HREF="006159.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] HTTP performance hit with Squid</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20HTTP%20performance%20hit%20with%20Squid&In-Reply-To=%3C56294D00.30408%40ngtech.co.il%3E"
       TITLE="[squid-users] HTTP performance hit with Squid">eliezer at ngtech.co.il
       </A><BR>
    <I>Thu Oct 22 20:54:24 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="006167.html">[squid-users] HTTP performance hit with Squid
</A></li>
        <LI>Next message (by thread): <A HREF="006159.html">[squid-users] HTTP performance hit with Squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6154">[ date ]</a>
              <a href="thread.html#6154">[ thread ]</a>
              <a href="subject.html#6154">[ subject ]</a>
              <a href="author.html#6154">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>What version of squid are you using now?
Squid 3.1.20 is very old and it is recommended to use newer versions.
If you are having specific troubles I think you figure out the issues 
pretty fast.
What hardware are you using for you squid? is it a VM? RAM? CPU?Disk?
How many clients? Have you used the squid cache manager interface?

My first suggestion it to try and use squid 3.4.14 just to make sure you 
are on something more current then 3.1.20.

Eliezer

On 22/10/2015 21:47, SaRaVanAn wrote:
&gt;<i> Hi ,
</I>&gt;<i> we have been using squid 3.1.20 comes with debian wheezy 7. We could see
</I>&gt;<i> there is a peformance hit in http traffic when we use Squid.
</I>&gt;<i>
</I>&gt;<i> For each HTTP GET request coming from client to proxy server, Squid takes
</I>&gt;<i> nearly 2 seconds to generate HTTP GET in order to establish a connection
</I>&gt;<i> with server.
</I>&gt;<i>
</I>&gt;<i> There is always a ~2 second delay between the request coming to our system
</I>&gt;<i> and going out of Squid. Suppose if a page has lot of embedded URL's it's
</I>&gt;<i> taking more time with squid in place.Suppose If I disable squid the page
</I>&gt;<i> loads very fast in client browser.
</I>&gt;<i>
</I>&gt;<i> What could be the reason? Do I need to tweak any configuration for this?
</I>&gt;<i> The first page request always loads slow with Squid.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> *Configuration*http_port 3128
</I>&gt;<i> http_port 3129 tproxy
</I>&gt;<i> http_port 80 accel defaultsite=example.com
</I>&gt;<i> acl manager proto cache_object
</I>&gt;<i> acl localhost src 127.0.0.1/32 ::1
</I>&gt;<i> acl to_localhost dst 127.0.0.0/8 0.0.0.0/32 ::1
</I>&gt;<i> acl QUERY urlpath_regex cgi-bin \?
</I>&gt;<i> cache deny QUERY
</I>&gt;<i> acl denied_status_404 http_status 404
</I>&gt;<i> deny_info  <A HREF="http://example.com/">http://example.com/</A> denied_status_404
</I>&gt;<i> http_reply_access deny denied_status_404
</I>&gt;<i> acl denied_status_503 http_status 503
</I>&gt;<i> deny_info <A HREF="http://example.com">http://example.com</A> denied_status_503
</I>&gt;<i> http_reply_access deny denied_status_503
</I>&gt;<i> acl SSL_ports port 443
</I>&gt;<i> acl Safe_ports port 80
</I>&gt;<i> acl Safe_ports port 21
</I>&gt;<i> acl Safe_ports port 443
</I>&gt;<i> acl Safe_ports port 70
</I>&gt;<i> acl Safe_ports port 210
</I>&gt;<i> acl Safe_ports port 1025-65535
</I>&gt;<i> acl Safe_ports port 280
</I>&gt;<i> acl Safe_ports port 488
</I>&gt;<i> acl Safe_ports port 591
</I>&gt;<i> acl Safe_ports port 777
</I>&gt;<i> acl CONNECT method CONNECT
</I>&gt;<i> acl PURGE method PURGE
</I>&gt;<i> http_access allow PURGE localhost
</I>&gt;<i> http_access deny PURGE
</I>&gt;<i> http_access allow manager localhost
</I>&gt;<i> http_access deny manager
</I>&gt;<i> http_access deny !Safe_ports
</I>&gt;<i> http_access deny CONNECT all
</I>&gt;<i> http_access allow all
</I>&gt;<i> icp_access allow all
</I>&gt;<i> tcp_outgoing_address x.y.z.5
</I>&gt;<i> acl VIDEO  url_regex ^<A HREF="http://example\.examplevideo\.com">http://example\.examplevideo\.com</A>
</I>&gt;<i> cache allow VIDEO
</I>&gt;<i> cache_mem 100 mb
</I>&gt;<i> maximum_object_size_in_memory 10 kb
</I>&gt;<i> memory_replacement_policy heap LFUDA
</I>&gt;<i> cache_replacement_policy heap LFUDA
</I>&gt;<i> cache_dir aufs //var/logs/cache 6144 16 256
</I>&gt;<i> store_dir_select_algorithm round-robin
</I>&gt;<i> maximum_object_size  51200 kb
</I>&gt;<i> cache_swap_low 70
</I>&gt;<i> cache_swap_high 80
</I>&gt;<i> access_log //var/logs/access.log squid
</I>&gt;<i> cache_store_log none
</I>&gt;<i> logfile_rotate 1
</I>&gt;<i> mime_table //var/opt/abs/config/acpu/mime.conf
</I>&gt;<i> pid_filename /var/run/squid3.pid
</I>&gt;<i>   strip_query_terms off
</I>&gt;<i> cache_log //var/logs/cache.log
</I>&gt;<i> coredump_dir //var/cache
</I>&gt;<i> acl apache rep_header server ^apache
</I>&gt;<i> refresh_pattern -i ^<A HREF="http://.wsj./.*">http://.wsj./.*</A> 10 200% 10 override-expire
</I>&gt;<i> override-lastmod reload-into-ims ignore-reload
</I>&gt;<i> refresh_pattern -i \.(gif|png|jpg|jpeg|ico)$ 480 100% 480 override-expire
</I>&gt;<i> override-lastmod reload-into-ims
</I>&gt;<i> refresh_pattern -i \.(htm|html|js|css)$ 480 100% 480 override-expire
</I>&gt;<i> override-lastmod reload-into-ims
</I>&gt;<i> refresh_pattern ^ftp:       1440    20% 10080
</I>&gt;<i> refresh_pattern ^gopher:    1440    0%  1440
</I>&gt;<i> refresh_pattern -i (/cgi-bin/|\?) 0 0%  0
</I>&gt;<i> refresh_pattern .       0   20% 4320
</I>&gt;<i> quick_abort_min 0 kb
</I>&gt;<i> quick_abort_max 0 kb
</I>&gt;<i> negative_ttl 1 minutes
</I>&gt;<i> positive_dns_ttl 1800 seconds
</I>&gt;<i> store_objects_per_bucket 100
</I>&gt;<i> forward_timeout 2 minutes
</I>&gt;<i> shutdown_lifetime 2 seconds
</I>&gt;<i> visible_hostname x.y.z.3
</I>&gt;<i> server_persistent_connections off
</I>&gt;<i> dns_nameservers x.y.z.1 x.y.z.2
</I>&gt;<i> ipcache_size 8192
</I>&gt;<i> fqdncache_size 8192
</I>&gt;<i> memory_pools off
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Saravanan N
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="006167.html">[squid-users] HTTP performance hit with Squid
</A></li>
	<LI>Next message (by thread): <A HREF="006159.html">[squid-users] HTTP performance hit with Squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6154">[ date ]</a>
              <a href="thread.html#6154">[ thread ]</a>
              <a href="subject.html#6154">[ subject ]</a>
              <a href="author.html#6154">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
