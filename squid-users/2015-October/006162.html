<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] HTTP performance hit with Squid
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20HTTP%20performance%20hit%20with%20Squid&In-Reply-To=%3C5629B6DE.6020300%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006160.html">
   <LINK REL="Next"  HREF="006155.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] HTTP performance hit with Squid</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20HTTP%20performance%20hit%20with%20Squid&In-Reply-To=%3C5629B6DE.6020300%40treenet.co.nz%3E"
       TITLE="[squid-users] HTTP performance hit with Squid">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Oct 23 04:26:06 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="006160.html">[squid-users] HTTP performance hit with Squid
</A></li>
        <LI>Next message (by thread): <A HREF="006155.html">[squid-users] Squid 100% CPU and possible attack
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6162">[ date ]</a>
              <a href="thread.html#6162">[ thread ]</a>
              <a href="subject.html#6162">[ subject ]</a>
              <a href="author.html#6162">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 23/10/2015 4:21 p.m., SaRaVanAn wrote:
&gt;<i> I tried by disabling internal dns in squid. Still i am seeing the same
</I>&gt;<i> problem.
</I>&gt;<i> What else can be looked at ?  Its really makes user experience bad if he
</I>&gt;<i> tries URL for the first time.
</I>
Internal DNS in Suqid has very little to do with this. The DNS helper
process will be even slower.

There are three problems here.

1) the serial DNS lookups done by 3.1. The fix for that is upgrading to
a current Squid where that is no longer done.


2) the 3.1 behaviour of looking up DNS for each server connection
attempt. The fix for that is upgrading to a current Squid where that is
no longer done.

NP: this is not helped by your &quot;server_persistent_connections off&quot;


3) the 1 second round-trip delays to the Google DNS servers. I know
there is a lot of avertising about how fast Google services are. But
that really is only advertising, some networks it is not true. Yours
appears to be one of those.

I suggest installing a local bind DNS server on your network and using
that. You may need to redirect client UDP port 53 traffic to it to
prevent them getting the bad behaviour from Google DNS or &quot;Host forgery&quot;
complains from Squid.



PS. dns_v4_first sorts the results found in DNS so IPv4 are connected to
first by TCP even if IPv6 is available and working better. It does not
affect the fact that both A and AAAA are being fetched.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="006160.html">[squid-users] HTTP performance hit with Squid
</A></li>
	<LI>Next message (by thread): <A HREF="006155.html">[squid-users] Squid 100% CPU and possible attack
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6162">[ date ]</a>
              <a href="thread.html#6162">[ thread ]</a>
              <a href="subject.html#6162">[ subject ]</a>
              <a href="author.html#6162">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
