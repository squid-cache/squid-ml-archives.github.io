<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Size of icap request chanks
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Size%20of%20icap%20request%20chanks&In-Reply-To=%3C562E227E.1000801%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006204.html">
   <LINK REL="Next"  HREF="006211.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Size of icap request chanks</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Size%20of%20icap%20request%20chanks&In-Reply-To=%3C562E227E.1000801%40treenet.co.nz%3E"
       TITLE="[squid-users] Size of icap request chanks">squid3 at treenet.co.nz
       </A><BR>
    <I>Mon Oct 26 12:54:22 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="006204.html">[squid-users] Size of icap request chanks
</A></li>
        <LI>Next message (by thread): <A HREF="006211.html">[squid-users] Size of icap request chanks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6210">[ date ]</a>
              <a href="thread.html#6210">[ thread ]</a>
              <a href="subject.html#6210">[ subject ]</a>
              <a href="author.html#6210">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 26/10/2015 11:32 p.m., Vadim Rogoziansky wrote:
&gt;<i> Hello All.
</I>&gt;<i> 
</I>&gt;<i> I have a question about the size of ICAP request chunks. What is it and
</I>&gt;<i> is there a way to make it configurable?
</I>
It is the size of data ready to be written on the socket when a write is
scheduled. For the full details on the chunked transfer encoding see
&lt;<A HREF="http://tools.ietf.org/html/rfc7230#section-4.1">http://tools.ietf.org/html/rfc7230#section-4.1</A>&gt;


No it is not configurable. It depends on the proxy I/O speed. If Squid
is doing little else but shuffling packets around the chunks get
smaller, if CPU is taken up with other processing enough that data
accumulates in the buffers then the chunks get bigger.


&gt;<i> 
</I>&gt;<i> I've made an investigation here and looks like Squid 3.5.9 separates the
</I>&gt;<i> ICAP payload on little chunks with the size of 27 bytes.
</I>
This is probably a side effect of the bug 4353 / 4206 issue on the main
I/O socket from the client. On a fast Squid the small input blobs being
read in would stay small though all the rest of Squid operations,
including the chunk sizes written to ICAP.
See if the workaround patch in the bug report helps:
 &lt;<A HREF="http://bugs.squid-cache.org/show_bug.cgi?id=4353">http://bugs.squid-cache.org/show_bug.cgi?id=4353</A>&gt;

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="006204.html">[squid-users] Size of icap request chanks
</A></li>
	<LI>Next message (by thread): <A HREF="006211.html">[squid-users] Size of icap request chanks
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6210">[ date ]</a>
              <a href="thread.html#6210">[ thread ]</a>
              <a href="subject.html#6210">[ subject ]</a>
              <a href="author.html#6210">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
