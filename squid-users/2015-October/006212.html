<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] R: Squid 100% CPU and possible attack
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20R%3A%20Squid%20100%25%20CPU%20and%20possible%20attack&In-Reply-To=%3C562E2746.7000400%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006209.html">
   <LINK REL="Next"  HREF="006213.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] R: Squid 100% CPU and possible attack</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20R%3A%20Squid%20100%25%20CPU%20and%20possible%20attack&In-Reply-To=%3C562E2746.7000400%40ngtech.co.il%3E"
       TITLE="[squid-users] R: Squid 100% CPU and possible attack">eliezer at ngtech.co.il
       </A><BR>
    <I>Mon Oct 26 13:14:46 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="006209.html">[squid-users] R:  Squid 100% CPU and possible attack
</A></li>
        <LI>Next message (by thread): <A HREF="006213.html">[squid-users] R:  Squid 100% CPU and possible attack
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6212">[ date ]</a>
              <a href="thread.html#6212">[ thread ]</a>
              <a href="subject.html#6212">[ subject ]</a>
              <a href="author.html#6212">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Job,

There are still missing parts.
If telnet or nc results with this it usually means bad setup(considering 
the information).
You will need to describe in more detail your setup with subnets+routers 
and iptables rules on the CentOS machine.
What do you do in the telnetting? just running &quot;telnet ip:port&quot; ?
If so then something is wrong on the squid box and it is probably not 
related to squid itself.
What is your squid version? &quot;squid -v&quot;, &quot;yum info squid&quot;(if installed 
from RPMs).

Have you tried telnetting squid port and not the danshguardian port?
What is it resulting with?

Eliezer

On 26/10/2015 14:49, Job wrote:
&gt;<i> Hello Amos!
</I>&gt;<i>
</I>&gt;&gt;<i> Something that would cause a machine to make lots of HTTP requests.
</I>&gt;&gt;<i> You have provided almost no information about the network, it
</I>&gt;&gt;<i> configuration, or uses etc. Having eliminated the usual problem(s) it is
</I>&gt;&gt;<i> a waste of time to guess.
</I>&gt;<i>
</I>&gt;<i> I have investigate better about the problem that brings up CPU and Squid process over 100%!
</I>&gt;<i> We have this situation: Dansguardian on port 8080 and Squid on port 3128.
</I>&gt;<i>
</I>&gt;<i> The The problem appear when telnetting, from LAN, to:
</I>&gt;<i> &lt;ip_firewall_proxy&gt;:8080
</I>&gt;<i>
</I>&gt;<i> Squid process raise up, in few seconds, to 100% and nobody can surf..
</I>&gt;<i>
</I>&gt;<i> I disabled NAT, to make sure it was not a loop of iptables-transparent proxying redirection.
</I>&gt;<i>
</I>&gt;<i> Have you good some suggestions for us?
</I>&gt;<i>
</I>&gt;<i> Thank you again!
</I>&gt;<i> Francesco
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="006209.html">[squid-users] R:  Squid 100% CPU and possible attack
</A></li>
	<LI>Next message (by thread): <A HREF="006213.html">[squid-users] R:  Squid 100% CPU and possible attack
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6212">[ date ]</a>
              <a href="thread.html#6212">[ thread ]</a>
              <a href="subject.html#6212">[ subject ]</a>
              <a href="author.html#6212">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
