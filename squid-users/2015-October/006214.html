<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] The url_rewriter helpers are crashing too rapidly
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20The%20url_rewriter%20helpers%20are%20crashing%20too%20rapidly&In-Reply-To=%3CAFD3E786D12B844AA3E2D7A073B25888686B7C3D%40WMS000M04.intra.lan%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006237.html">
   <LINK REL="Next"  HREF="006216.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] The url_rewriter helpers are crashing too rapidly</H1>
    <B>Funke, Martin</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20The%20url_rewriter%20helpers%20are%20crashing%20too%20rapidly&In-Reply-To=%3CAFD3E786D12B844AA3E2D7A073B25888686B7C3D%40WMS000M04.intra.lan%3E"
       TITLE="[squid-users] The url_rewriter helpers are crashing too rapidly">M.Funke at olpe.de
       </A><BR>
    <I>Mon Oct 26 14:28:21 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="006237.html">[squid-users] Squid SNI at Step 2
</A></li>
        <LI>Next message (by thread): <A HREF="006216.html">[squid-users] The url_rewriter helpers are crashing too rapidly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6214">[ date ]</a>
              <a href="thread.html#6214">[ thread ]</a>
              <a href="subject.html#6214">[ subject ]</a>
              <a href="author.html#6214">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello list,

Since morning i have a strange problem with my squid. First i saw that the Proxy authentication in Firefox and IE didn't appear.

On my Suse Enterprise Server 11 SP3 i saw with rcsquid status: dead.

After a rcsquid restart i got a running.

But i didn't change a thing because i cant still authenticate with user name and password in IE or Firefox.

When i do a squid -Ncd10 i get:

2015/10/26 14:55:02| Starting Squid Cache version 2.7.STABLE5 for i686-pc-linux-gnu...
2015/10/26 14:55:02| Process ID 19411
2015/10/26 14:55:02| With 1024 file descriptors available
2015/10/26 14:55:02| Using epoll for the IO loop
2015/10/26 14:55:02| Performing DNS Tests...
2015/10/26 14:55:02| Successful DNS name lookup tests...
2015/10/26 14:55:02| DNS Socket created at 0.0.0.0, port 46229, FD 6
2015/10/26 14:55:02| Adding domain hs-hakemicke-olpe.de from /etc/resolv.conf
2015/10/26 14:55:02| Adding nameserver 127.0.0.1 from /etc/resolv.conf
2015/10/26 14:55:02| helperOpenServers: Starting 25 'squidGuard' processes
2015/10/26 14:55:02| helperOpenServers: Starting 5 'squid_ldap_auth' processes
2015/10/26 14:55:02| helperOpenServers: Starting 5 'oss_check_ip.pl' processes
2015/10/26 14:55:02| User-Agent logging is disabled.
2015/10/26 14:55:02| Referer logging is disabled.
2015/10/26 14:55:02| logfileOpen: opening log /var/log/squid/access.log
2015/10/26 14:55:02| Unlinkd pipe opened on FD 46
2015/10/26 14:55:02| Swap maxSize 1024000 + 524288 KB, estimated 0 objects
2015/10/26 14:55:02| Target number of buckets: 5954
2015/10/26 14:55:02| Using 8192 Store buckets
2015/10/26 14:55:02| Max Mem  size: 524288 KB
2015/10/26 14:55:02| Max Swap size: 1024000 KB
2015/10/26 14:55:02| Local cache digest enabled; rebuild/rewrite every 3600/3600 sec
2015/10/26 14:55:02| logfileOpen: opening log /var/log/squid/store.log
2015/10/26 14:55:02| Rebuilding storage in /var/cache/squid (DIRTY)
2015/10/26 14:55:02| Using Least Load store dir selection
2015/10/26 14:55:02| Current Directory is /mnt/backup
2015/10/26 14:55:02| Loaded Icons.
2015/10/26 14:55:02| Accepting proxy HTTP connections at 172.16.0.5, port 8080, FD 48.
2015/10/26 14:55:02| Accepting ICP messages at 0.0.0.0, port 3130, FD 49.
2015/10/26 14:55:02| HTCP Disabled.
2015/10/26 14:55:02| Accepting SNMP messages on port 3401, FD 50.
2015/10/26 14:55:02| WCCP Disabled.
2015/10/26 14:55:02| Pinger socket opened on FD 51
2015/10/26 14:55:02| Ready to serve requests.
2015/10/26 14:55:02| WARNING: url_rewriter #1 (FD 7) exited
2015/10/26 14:55:02| WARNING: url_rewriter #2 (FD 8) exited
2015/10/26 14:55:02| WARNING: url_rewriter #3 (FD 9) exited
2015/10/26 14:55:02| WARNING: url_rewriter #4 (FD 10) exited
2015/10/26 14:55:02| WARNING: url_rewriter #5 (FD 11) exited
2015/10/26 14:55:02| WARNING: url_rewriter #6 (FD 12) exited
2015/10/26 14:55:02| WARNING: url_rewriter #7 (FD 13) exited
2015/10/26 14:55:02| WARNING: url_rewriter #8 (FD 14) exited
2015/10/26 14:55:02| WARNING: url_rewriter #9 (FD 15) exited
2015/10/26 14:55:02| WARNING: url_rewriter #10 (FD 16) exited
2015/10/26 14:55:02| WARNING: url_rewriter #11 (FD 17) exited
2015/10/26 14:55:02| WARNING: url_rewriter #12 (FD 18) exited
2015/10/26 14:55:02| WARNING: url_rewriter #13 (FD 19) exited
2015/10/26 14:55:02| Too few url_rewriter processes are running
FATAL: The url_rewriter helpers are crashing too rapidly, need help!

In /var/log/squid/access.log i have something like this:

1445692012.194     15 172.16.2.196 TCP_REFRESH_HIT/304 424 GET <A HREF="http://crl.microsoft.com/pki/crl/products/MicCodSigPCA_08-31-2010.crl">http://crl.microsoft.com/pki/crl/products/MicCodSigPCA_08-31-2010.crl</A> - DIRECT/95.101.82.82 application/pkix-crl
1445692012.221     14 172.16.2.196 TCP_REFRESH_HIT/304 424 GET <A HREF="http://crl.microsoft.com/pki/crl/products/CodeSigPCA.crl">http://crl.microsoft.com/pki/crl/products/CodeSigPCA.crl</A> - DIRECT/95.101.82.82 application/pkix-crl
1445692012.249     14 172.16.2.196 TCP_REFRESH_HIT/304 424 GET <A HREF="http://crl.microsoft.com/pki/crl/products/MicRooCerAut_2010-06-23.crl">http://crl.microsoft.com/pki/crl/products/MicRooCerAut_2010-06-23.crl</A> - DIRECT/95.101.82.82 application/pkix-crl

In /var/log/squid/cache.log i have something like this:

Squid Cache (Version 2.7.STABLE5): Terminated abnormally.
(squid)(+0xbc395)[0xb770b395]
(squid)(fatal+0x30)[0xb770b8f0]
(squid)(fatalf+0x53)[0xb770b9e3]
(squid)(+0x69605)[0xb76b8605]
(squid)(commCallCloseHandlers+0xde)[0xb76962ee]
(squid)(comm_close+0xc8)[0xb7698408]
(squid)(+0x690e3)[0xb76b80e3]
(squid)(comm_select+0x827)[0xb769a537]
(squid)(main+0x8b9)[0xb76d37b9]
/lib/libc.so.6(__libc_start_main+0xe5)[0xb7222c25]
(squid)(+0x16641)[0xb7665641]
CPU Usage: 0.020 seconds = 0.012 user + 0.008 sys
Maximum Resident Size: 23584 KB
Page faults with physical i/o: 0
Memory usage for squid via mallinfo():
        total space in arena:    2668 KB
        Ordinary blocks:         2564 KB     17 blks
        Small blocks:               0 KB      0 blks
        Holding blocks:          1108 KB      1 blks
        Free Small blocks:          0 KB
        Free Ordinary blocks:     103 KB
        Total in use:            3672 KB 97%
        Total free:               103 KB 3%
2015/10/26 14:55:02| Starting Squid Cache version 2.7.STABLE5 for i686-pc-linux-gnu...
2015/10/26 14:55:02| Process ID 19411
2015/10/26 14:55:02| With 1024 file descriptors available
2015/10/26 14:55:02| Using epoll for the IO loop
2015/10/26 14:55:02| Performing DNS Tests...
2015/10/26 14:55:02| Successful DNS name lookup tests...
2015/10/26 14:55:02| DNS Socket created at 0.0.0.0, port 46229, FD 6
2015/10/26 14:55:02| Adding domain hs-hakemicke-olpe.de from /etc/resolv.conf
2015/10/26 14:55:02| Adding nameserver 127.0.0.1 from /etc/resolv.conf

2015/10/26 14:55:02| helperOpenServers: Starting 25 'squidGuard' processes
(squidGuard): invalid option -- 's'

I hope someone can give some hints.

Best regards from Germany
Martin




-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20151026/230ed96d/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20151026/230ed96d/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="006237.html">[squid-users] Squid SNI at Step 2
</A></li>
	<LI>Next message (by thread): <A HREF="006216.html">[squid-users] The url_rewriter helpers are crashing too rapidly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6214">[ date ]</a>
              <a href="thread.html#6214">[ thread ]</a>
              <a href="subject.html#6214">[ subject ]</a>
              <a href="author.html#6214">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
