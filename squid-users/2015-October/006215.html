<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] range_offset_limit and idm
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20range_offset_limit%20and%20idm&In-Reply-To=%3C562E3A3C.5080404%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006207.html">
   <LINK REL="Next"  HREF="006220.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] range_offset_limit and idm</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20range_offset_limit%20and%20idm&In-Reply-To=%3C562E3A3C.5080404%40treenet.co.nz%3E"
       TITLE="[squid-users] range_offset_limit and idm">squid3 at treenet.co.nz
       </A><BR>
    <I>Mon Oct 26 14:35:40 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="006207.html">[squid-users] range_offset_limit and idm
</A></li>
        <LI>Next message (by thread): <A HREF="006220.html">[squid-users] range_offset_limit and idm
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6215">[ date ]</a>
              <a href="thread.html#6215">[ thread ]</a>
              <a href="subject.html#6215">[ subject ]</a>
              <a href="author.html#6215">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 27/10/2015 1:00 a.m., joe wrote:
&gt;<i> regarding range_offset_limit   no matter what i do idm or any download
</I>&gt;<i> manager not working correctly
</I>&gt;<i> 
</I>&gt;<i> try to download using idm and it start downloading one file suppose to start
</I>&gt;<i> downloading multiple of chunk range setting idm to download 16 chunk range
</I>&gt;<i> at the same time only one start downloading once it finish downloading first
</I>&gt;<i> part it start the second one after the other and that is bad  wen i pause or
</I>&gt;<i> stop then resume downloading all the chunk range start normal downloading
</I>&gt;<i> same time that is normal behavior 
</I>&gt;<i> 
</I>&gt;<i> only new file at the start it download one chunk insted of multiple until i
</I>&gt;<i> hit stop then resume so squid respond only to one range wen the new file
</I>&gt;<i> start 
</I>&gt;<i> hitting stop then resume    squid working good with all the range
</I>&gt;<i> downloading same time 
</I>&gt;<i> and that big time issue since most of my customer using  idm or any download
</I>&gt;<i> manager file not cached 
</I>&gt;<i> i duno if i explain it right but over squid supost to respond to all the
</I>&gt;<i> range as idm rquest at the begining of the download if i bypass   squid idm
</I>&gt;<i> work correctly 
</I>
Sounds right. idm is sending multiple parallel Range requests.
Essentially trying to fake faster downloads by forcing as many resources
to be consumed by the one user as possible. This is a very unfriendly
client behaviour - stealing bandwidth and resources from other users who
need to share them, at all network layers from the CPE device outwards
to the server itself.


Squid is an optimizing proxy. Parts of its design is to baulk that type
of behaviour and make the network operate better for all. In particular
it optimizes bandwidth consumption when you set range_offset_limit by
fetching the entire object from the beginning of the download so that it
can cache and server followup requests from the cache without consuming
any server-facing resources at all regardless of number of users wanting
that URL.


If you dont use range_offset_limit then all fetches made by idm are
Range request and cannot be cached to improve the experience for other
clients needing the same URL/download. Each and every time a new object
gets fetched, but in small pieces and hogging some of the potentially
limited upstream bandwidth by the user with idm.

When range_offset_limit is configured...

* idm has made 5 Range requests in parallel.

What that means is that it has sent 5x requests to Squid for the same
object. But not the same data out of it, which makes them each a unique
fetch.
 So... Squid starts fetching 5x downloads of the file (ouch, you can
enable collapsed_forwarding to reduce that).

 Squid quickly reaches the start of the Range connection #1 requested
and starts delivering it. BUT, it has not reached the download positions
connection #2, #3, #4, #5 requested.

All idm can see is connection #1 receiving data and the rest waiting.

Then at the end of #1 connection Range Squid also hits the point where
it has received the start of connection #2's Range and starts serving
that up.

Meanwhile connection #3, #4, #5 have not yet been reached, and so it
continues until all the Ranges have been fetched and delivered or idm
goes away.


When using a proxy tools like idm are useless. Their abusive
&quot;optimizations&quot; do more harm than good when they do &quot;work&quot;.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="006207.html">[squid-users] range_offset_limit and idm
</A></li>
	<LI>Next message (by thread): <A HREF="006220.html">[squid-users] range_offset_limit and idm
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6215">[ date ]</a>
              <a href="thread.html#6215">[ thread ]</a>
              <a href="subject.html#6215">[ subject ]</a>
              <a href="author.html#6215">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
