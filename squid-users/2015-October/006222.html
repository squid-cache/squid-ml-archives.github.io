<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid4 has extremely low hit ratio due to lacks of ignore-no-cache
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid4%20has%20extremely%20low%20hit%20ratio%20due%20to%20lacks%0A%20of%20ignore-no-cache&In-Reply-To=%3C562E5C7B.7010406%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006205.html">
   <LINK REL="Next"  HREF="006223.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid4 has extremely low hit ratio due to lacks of ignore-no-cache</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid4%20has%20extremely%20low%20hit%20ratio%20due%20to%20lacks%0A%20of%20ignore-no-cache&In-Reply-To=%3C562E5C7B.7010406%40measurement-factory.com%3E"
       TITLE="[squid-users] Squid4 has extremely low hit ratio due to lacks of ignore-no-cache">rousskov at measurement-factory.com
       </A><BR>
    <I>Mon Oct 26 17:01:47 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="006205.html">[squid-users] Squid4 has extremely low hit ratio due to lacks of ignore-no-cache
</A></li>
        <LI>Next message (by thread): <A HREF="006223.html">[squid-users] Squid4 has extremely low hit ratio due to lacks of ignore-no-cache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6222">[ date ]</a>
              <a href="thread.html#6222">[ thread ]</a>
              <a href="subject.html#6222">[ subject ]</a>
              <a href="author.html#6222">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/26/2015 04:41 AM, Yuri Voinov wrote:

&gt;<i> what has changed so much that the same
</I>&gt;<i> configuration I get 10 times smaller cache hit.
</I>
You are asking a good question. I do not think anybody knows the exact
answer -- too many things have changed in general to either identify the
changes that have affected your [complicated] setup or to exclude all of
the changes and blame some yet-unknown v4 bug.


However, the following procedure is almost guaranteed to lead you to the
answer:

1. Find a URL/resource that was served from the cache in v3 but became a
miss in v4. You probably have access.logs that can be used for that. If
not, enable them and run more experiments. Since your drop in hit ratio
is so drastic, it should not take long to find a URL that was usually a
hit before and is usually a miss now (or that becomes a hit/miss as soon
as you switch to v3/4).

2. Reproduce the v4 miss with an ALL,9 cache.log and share that log. Do
this using single-transaction command-line tools, with no other traffic
going through Squid. Others on this list can guide you as to what
logging options to use if you do not want to run with ALL,9.

The above requires some work on your part. It is a good idea to run
these tests in a non-production environment (which may require even more
work from you). Needless to say, you are not required to do that extra
work. However, some extra work is most likely required if you want to
get the answer to your question because there is currently not enough
information to answer it.


HTH,

Alex.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="006205.html">[squid-users] Squid4 has extremely low hit ratio due to lacks of ignore-no-cache
</A></li>
	<LI>Next message (by thread): <A HREF="006223.html">[squid-users] Squid4 has extremely low hit ratio due to lacks of ignore-no-cache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6222">[ date ]</a>
              <a href="thread.html#6222">[ thread ]</a>
              <a href="subject.html#6222">[ subject ]</a>
              <a href="author.html#6222">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
