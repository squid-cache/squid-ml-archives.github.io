<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid + ICQ contest ;)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20%2B%20ICQ%20contest%20%3B%29&In-Reply-To=%3C562E8EE1.2020207%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006235.html">
   <LINK REL="Next"  HREF="006244.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid + ICQ contest ;)</H1>
    <B>Yuri Voinov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20%2B%20ICQ%20contest%20%3B%29&In-Reply-To=%3C562E8EE1.2020207%40gmail.com%3E"
       TITLE="[squid-users] Squid + ICQ contest ;)">yvoinov at gmail.com
       </A><BR>
    <I>Mon Oct 26 20:36:49 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="006235.html">[squid-users] Squid + ICQ contest ;)
</A></li>
        <LI>Next message (by thread): <A HREF="006244.html">[squid-users] Squid + ICQ contest ;)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6241">[ date ]</a>
              <a href="thread.html#6241">[ thread ]</a>
              <a href="subject.html#6241">[ subject ]</a>
              <a href="author.html#6241">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256
 
The problem is: I can't see most part of ICQ traffic. Because of it uses
non-HTTP/HTTPS/FTP ports. Only with sniffer.

Looks like this:

1. Login starts over 5190 port with CONNECT method. And normal squid's
config blocks it - this is non-SSL port.
2. If we add this port to SSL_ports acl, connect starts via HTTP over
HTTPS port. Squid's prohibit it too. If we relax config (and make it
less secure!), login phase goes next step.
3. And finally Squid got XML-answer via HTTP/HTTPS, which is visible by
squid, and at this moment client got &quot;Login denied, check
login/password&quot;. Whenever right or wrong password.

Viola, connection denied completely.

27.10.15 0:27, Amos Jeffries &#1087;&#1080;&#1096;&#1077;&#1090;:
&gt;<i> On 27/10/2015 6:30 a.m., Yuri Voinov wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I think the right question is not &quot;What headers pass through Squid&quot; and
</I>&gt;&gt;<i> &quot;Why did they pass through a transparent proxy, if the port that is
</I>&gt;&gt;<i> used, not 80 or 443?&quot;
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ICQ speaks HTTP on port 80. Not sure about 443, it should at least speak
</I>&gt;<i> TLS hopefully with ALPN and/or HTTP inside.
</I>&gt;<i>
</I>&gt;<i> Even so, whats going through (or at least into) Squid is the detail you
</I>&gt;<i> need to provide to get a chance at a solid answer.
</I>&gt;<i>
</I>&gt;<i> Amos
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2
 
iQEcBAEBCAAGBQJWLo7hAAoJENNXIZxhPexGodsIAKHkuz36C7/V2E4VLWMSdMUy
eTjSnG0A58+h3Kl70cR/u0ICkI0aK5wqTP+51S3CPIw7c0l6eWKx1Yb6Qz0sbJjw
wy6PJKQx2nNUt9CDX7MMaETwpyWDfkxl7RjbskvmOQbGwf+EgK4HPGO8bn/FZTu3
r4HhN6ARxoIpGqHt8uQbfaV8jHw2Xgl/MonWlEKKn7Nv/JeQcXjfeko4u+3hGl45
v6PkLD8SsMhgmqOI48MnxkvQSfjUGpSbDej0vb/Jy4jYcmZz3qCcUoJflMdIG6nD
PlmQFloofXXApm7nf7gAJ0v1j2B/oXexMjW838Ge7LMAQ4xfrwszznlu76rHKJk=
=2khV
-----END PGP SIGNATURE-----



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="006235.html">[squid-users] Squid + ICQ contest ;)
</A></li>
	<LI>Next message (by thread): <A HREF="006244.html">[squid-users] Squid + ICQ contest ;)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6241">[ date ]</a>
              <a href="thread.html#6241">[ thread ]</a>
              <a href="subject.html#6241">[ subject ]</a>
              <a href="author.html#6241">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
