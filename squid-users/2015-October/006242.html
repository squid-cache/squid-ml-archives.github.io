<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid4 has extremely low hit ratio due to lacks of ignore-no-cache
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid4%20has%20extremely%20low%20hit%20ratio%20due%20to%20lacks%0A%20of%20ignore-no-cache&In-Reply-To=%3C562E91FA.7070701%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006239.html">
   <LINK REL="Next"  HREF="007345.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid4 has extremely low hit ratio due to lacks of ignore-no-cache</H1>
    <B>Yuri Voinov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid4%20has%20extremely%20low%20hit%20ratio%20due%20to%20lacks%0A%20of%20ignore-no-cache&In-Reply-To=%3C562E91FA.7070701%40gmail.com%3E"
       TITLE="[squid-users] Squid4 has extremely low hit ratio due to lacks of ignore-no-cache">yvoinov at gmail.com
       </A><BR>
    <I>Mon Oct 26 20:50:02 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="006239.html">[squid-users] Squid4 has extremely low hit ratio due to lacks of ignore-no-cache
</A></li>
        <LI>Next message (by thread): <A HREF="007345.html">[squid-users] Squid4 has extremely low hit ratio due to lacks of ignore-no-cache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6242">[ date ]</a>
              <a href="thread.html#6242">[ thread ]</a>
              <a href="subject.html#6242">[ subject ]</a>
              <a href="author.html#6242">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256
 


27.10.15 1:37, Amos Jeffries &#1087;&#1080;&#1096;&#1077;&#1090;:
&gt;<i> On 27/10/2015 6:22 a.m., Yuri Voinov wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Ah, ok:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> We see in redbot.org this info in server response:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  Cache-Control: no-cache
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> It also says &quot;this content was negotiated but does not have an
</I>&gt;<i> appropriate Vary header&quot;. Which is marked as a protocol error.
</I>&gt;<i>
</I>&gt;<i> And has a status code of 400 (unspecified error by the client).
</I>&gt;<i>
</I>&gt;<i> And has passed through three non-Squid proxies without being cached
</I>&gt;<i> there either.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> So, what? 3.5.10 permit ignore this. 4.0.x - deny.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Rather bold statement. Where is the cache.log line(s) saying that was
</I>&gt;<i> the decision Squid made?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> Squid decides?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> No, the content owner does.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> Maybe I'll decide what and how to cache in the my setup?
</I>&gt;<i>
</I>&gt;<i> You are just the caretaker of the information. It belongs to its
</I>&gt;<i> creators. What you can do with their property depends on what they allow
</I>&gt;<i> to be done with it.
</I>Sure. But in real world we have much, very much unscrupulous webmasters,
such as distributors of advertising or unscrupulous CEOs who abuse their
rights.

This is why we fight againts them with our caches.
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> HTTP is the legal rights granting methodology they chose to distribute
</I>&gt;<i> with. The creators have granted you/anyone the license to cache
</I>&gt;<i> (redistribute) that object. They did so via the badly named
</I>&gt;<i> Cache-Control:no-cache header. Which comes with the license condition
</I>&gt;<i> that the content be revalidated before redistribution.
</I>&gt;<i>
</I>&gt;<i> In other words, the content owner(s) retain the right to veto any
</I>&gt;<i> recipient receiving their content or to provide alternative content at
</I>&gt;<i> any time.
</I>I understand, Amos.
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> [[ Given that it seems to flip between an error page and an image
</I>&gt;<i> depicting the internal design of a nuclear device - depending on where
</I>&gt;<i> in the world one views it from. It would seem that the behaviour is
</I>&gt;<i> probably intentional. ]]
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Within your new right to cache and redistribute you then get to choose
</I>&gt;<i> how long for - on that particular item.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> BTW: Revalidate does not lead to MISS. It leads to a REFRESH_MODIFIED or
</I>&gt;<i> REFRESH_UNMODIFIED.
</I>Absolutely sure. But this not occurs.

This problem occurs at the same time on different squid's. 4.0.1 leads
TCP_MISS, but 3.5.10 on _the_same_ content gets TCP_HIT or TCP_MEM_HIT.
&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Amos
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2
 
iQEcBAEBCAAGBQJWLpH6AAoJENNXIZxhPexGtMwIAIy4TJi14vSO9d0EKmzsLyHz
PMN850bJ+6+kinDy5bPg9Y+SByGgrUU81wpTEqDHPj0AwxW0lUoyurQQLPmY2CMB
1n93eWZrDsJRz2MJNXPNubKxA9qmxsTze2yZbjzPLjysVp8C2VWbRJWl5UePH7NZ
1xyY1qCWsrlGRjnQrQVptn1yeK2fFjy08fUzfO7uDG1+oRuhVCuJ1nTr6ESe60U3
BAacyaP4R8YngFMnz8+bKSV06MIZswjYe9+zYORxX2E/acXmL5b0hN3gQH211RNN
8cfEYO7nxA2MnjlvbKqHmJj9flly98yj7BNdRHvYYa6VDQ6lDYzwMuzbwDLB4DE=
=w0DL
-----END PGP SIGNATURE-----


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="006239.html">[squid-users] Squid4 has extremely low hit ratio due to lacks of ignore-no-cache
</A></li>
	<LI>Next message (by thread): <A HREF="007345.html">[squid-users] Squid4 has extremely low hit ratio due to lacks of ignore-no-cache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6242">[ date ]</a>
              <a href="thread.html#6242">[ thread ]</a>
              <a href="subject.html#6242">[ subject ]</a>
              <a href="author.html#6242">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
