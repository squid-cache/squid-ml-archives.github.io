<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Cache everything for 15 minutes - nothing more or less (offline_mode + refresh_pattern?)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Cache%20everything%20for%2015%20minutes%20-%20nothing%20more%20or%0A%20less%20%28offline_mode%20%2B%20refresh_pattern%3F%29&In-Reply-To=%3C562F7091.9030904%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006248.html">
   <LINK REL="Next"  HREF="006249.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Cache everything for 15 minutes - nothing more or less (offline_mode + refresh_pattern?)</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Cache%20everything%20for%2015%20minutes%20-%20nothing%20more%20or%0A%20less%20%28offline_mode%20%2B%20refresh_pattern%3F%29&In-Reply-To=%3C562F7091.9030904%40treenet.co.nz%3E"
       TITLE="[squid-users] Cache everything for 15 minutes - nothing more or less (offline_mode + refresh_pattern?)">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Oct 27 12:39:45 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="006248.html">[squid-users] Cache everything for 15 minutes - nothing more or	less (offline_mode + refresh_pattern?)
</A></li>
        <LI>Next message (by thread): <A HREF="006249.html">[squid-users] Using Digests to reduce traffic between peers,	Parent - Sibling configuration question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7330">[ date ]</a>
              <a href="thread.html#7330">[ thread ]</a>
              <a href="subject.html#7330">[ subject ]</a>
              <a href="author.html#7330">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 27/10/2015 1:57 p.m., Kris Linquist wrote:
&gt;<i> I&#8217;ve got a bunch of services connecting to third party APIs.  Many of
</I>&gt;<i> these APIs register hits even if squid reaches out to the service to
</I>&gt;<i> check the HTTP headers (I verified that  hits with the log
</I>&gt;<i> TCP_REFRESH_UNMODIFIED/200  are being counted against me with the
</I>&gt;<i> third party service).
</I>
Refresh is more efficient than either HIT or MISS. The origin *has* been
contacted, but it said the cached content was still good to be used.

This is HTTP/1.1, not HTTP/1.0.
Squid is a cache, not an archive or buffer.

&gt;<i> 
</I>&gt;<i> offline_mode on  seems to never return fresh results, no matter what
</I>&gt;<i> my refresh_pattern is.
</I>
That is pretty much what offline_mode is designed to do. Cache
everything no matter how stale and serve it while the origin has
possibly gone offline/down for maintenance.


&gt;<i>   I want fresh results every 15 minutes,
</I>
Sqiud is designed to output fresh results. Full stop.

Serving non-fresh results is dangerous unless the origin has explicitly
stated that they may be served.

&gt;<i> otherwise return HIT from memory and don&#8217;t reach out.  Is this
</I>&gt;<i> possible?    Perhaps I just haven&#8217;t found the right combination of
</I>&gt;<i> refresh_pattern options.
</I>&gt;<i> 
</I>
That is not how HTTP works.

Caching has a fixed algorithm for freshness built into the
specifications.  The origin server is in control of the parameters for
that. It states how long the content is fresh for and what the proxy is
permitted to do with it. Only when it leaves a parameter unstated can
refresh_pattern be used to supply the default value you want.


As I mentioend to Yuri in another thread recently, Ths is very much akin
to liceneing of copyright materials, where the origin is the content
owner and asigning rights to redistributors (proxies). Taking on other
rights that have been explicitly denied is not a good situation.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="006248.html">[squid-users] Cache everything for 15 minutes - nothing more or	less (offline_mode + refresh_pattern?)
</A></li>
	<LI>Next message (by thread): <A HREF="006249.html">[squid-users] Using Digests to reduce traffic between peers,	Parent - Sibling configuration question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7330">[ date ]</a>
              <a href="thread.html#7330">[ thread ]</a>
              <a href="subject.html#7330">[ subject ]</a>
              <a href="author.html#7330">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
