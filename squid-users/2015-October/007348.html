<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Using Digests to reduce traffic between peers, Parent - Sibling configuration question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Using%20Digests%20to%20reduce%20traffic%20between%20peers%2C%0A%20Parent%20-%20Sibling%20configuration%20question&In-Reply-To=%3C562FAFB2.1040800%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007347.html">
   <LINK REL="Next"  HREF="007360.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Using Digests to reduce traffic between peers, Parent - Sibling configuration question</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Using%20Digests%20to%20reduce%20traffic%20between%20peers%2C%0A%20Parent%20-%20Sibling%20configuration%20question&In-Reply-To=%3C562FAFB2.1040800%40measurement-factory.com%3E"
       TITLE="[squid-users] Using Digests to reduce traffic between peers, Parent - Sibling configuration question">rousskov at measurement-factory.com
       </A><BR>
    <I>Tue Oct 27 17:09:06 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007347.html">[squid-users] Using Digests to reduce traffic between peers,	Parent - Sibling configuration question
</A></li>
        <LI>Next message (by thread): <A HREF="007360.html">[squid-users] Using Digests to reduce traffic between peers,	Parent - Sibling configuration question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7348">[ date ]</a>
              <a href="thread.html#7348">[ thread ]</a>
              <a href="subject.html#7348">[ subject ]</a>
              <a href="author.html#7348">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/26/2015 10:14 PM, Jester Purtteman wrote:

&gt;<i> I have been wrestling with squid for a while and my reading has brought
</I>&gt;<i> &#8220;Cache-Digests&#8221; to my attention.  I suspect the answer is &#8220;that would be
</I>...
&gt;<i> As far as I can tell from (very limited) experimenting and reading, this
</I>&gt;<i> doesn&#8217;t **appear** to be how it works,
</I>

Hello Jester,

    With a few configuration adjustments and code modifications, you can
make Cache Digests help with your use case. Cache Digests make decisions
based on request URLs. It sounds like you want to make decisions based
on response body as well. It is possible to change the code to do that,
but it will be a lot of non-trivial work and there will always be some
false positives because Cache Digests are not meant to give
always-precise answers.


As Amos mentioned, there are existing/standard HTTP mechanisms that are
meant to decrease pointless fetches across expensive links. However,
just like Cache Digests, &quot;as is&quot;, they may not work well in your use
case. Those mechanisms make decisions based on origin-server-supplied
headers such as ETags. As you said, that information may be missing or
false in many responses.

Just like with Cache Digests, with a few configuration adjustments and
code modifications, you can make those standard mechanisms work better
for you. For example, you can teach Squid to generate its own ETag-like
content+header checksums that can be used in conditional HTTP requests
that Squid understands. None of this is easy, but it is doable.


There have been many proposals on how to solve this problem. I do not
think there is a single winning approach. Everybody seem to experiment
with their own tweaks of the existing tools and standards.

If you are looking for a solution that will cost you a few days/weeks of
development and sysadmin work, I do not think there is one. If you are
willing and able to invest a lot more, then I recommend that you
estimate the expected savings _before_ you invest in an expensive
solution. Getting reliable estimates is a complicated project on its
own, but it is still a lot cheaper than investing months into a solution
that does not meet your needs.


HTH,

Alex.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007347.html">[squid-users] Using Digests to reduce traffic between peers,	Parent - Sibling configuration question
</A></li>
	<LI>Next message (by thread): <A HREF="007360.html">[squid-users] Using Digests to reduce traffic between peers,	Parent - Sibling configuration question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7348">[ date ]</a>
              <a href="thread.html#7348">[ thread ]</a>
              <a href="subject.html#7348">[ subject ]</a>
              <a href="author.html#7348">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
