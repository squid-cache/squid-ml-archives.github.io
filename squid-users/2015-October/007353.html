<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid SNI at Step 2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20SNI%20at%20Step%202&In-Reply-To=%3CCAGRJihW1HXd6LeQW24muZ%3Dfjx78k0Jg-k%2BKkUb0F9Q0mCKNOiA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006217.html">
   <LINK REL="Next"  HREF="007355.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid SNI at Step 2</H1>
    <B>Jatin Bhasin</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20SNI%20at%20Step%202&In-Reply-To=%3CCAGRJihW1HXd6LeQW24muZ%3Dfjx78k0Jg-k%2BKkUb0F9Q0mCKNOiA%40mail.gmail.com%3E"
       TITLE="[squid-users] Squid SNI at Step 2">jbhasin83 at gmail.com
       </A><BR>
    <I>Tue Oct 27 20:11:14 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="006217.html">[squid-users] Squid SNI at Step 2
</A></li>
        <LI>Next message (by thread): <A HREF="007355.html">[squid-users] Squid SNI at Step 2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7353">[ date ]</a>
              <a href="thread.html#7353">[ thread ]</a>
              <a href="subject.html#7353">[ subject ]</a>
              <a href="author.html#7353">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Amos,

My client is sending sni. I have checked this. Squid only generates SNI
fake connect at step2 if sslbump action is splice. For all other ssl bump
actions it does not generate fake connect with sni.
Is this a bug or limitation in squid? Do you plan in future to change it?

Thanks
Jatin
On 27 Oct 2015 1:52 am, &quot;Amos Jeffries&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt; wrote:

&gt;<i> On 27/10/2015 1:34 a.m., Jatin Bhasin wrote:
</I>&gt;<i> &gt; Hello,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I am running squid 3.5.10 for bumping transparent SSL connections To
</I>&gt;<i> &gt; achieve this I am using following squid configuration for SSL Bumping.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; acl nobumpSites ssl::server_name &quot;/etc/squid/allowed_SSL_sites.txt&quot;
</I>&gt;<i> &gt; ssl_bump peek step1 all
</I>&gt;<i> &gt; ssl_bump peek step2 nobumpSites
</I>&gt;<i> &gt; ssl_bump bump step3 nobumpSites
</I>&gt;<i> &gt; ssl_bump bump all
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; File &quot;/etc/squid/allowed_SSL_sites.txt&quot; contains www.facebook.com.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On reading documentation I understood that I should see a Fake CONNECT
</I>&gt;<i> &gt; request for Facebook.com IP address as below:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; TAG_NONE/200 0 CONNECT 17.151.224.13:443 - ORIGINAL_DST/17.151.224.13
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; And at Step2 there should be a Fake CONNECT request for SNI
</I>&gt;<i> &gt; information extracted.
</I>&gt;<i>
</I>&gt;<i> Only if SNI is actually sent by the client. It is not guaranteed to be
</I>&gt;<i> sent.
</I>&gt;<i>
</I>&gt;<i> Amos
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20151028/9b6b4f76/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20151028/9b6b4f76/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="006217.html">[squid-users] Squid SNI at Step 2
</A></li>
	<LI>Next message (by thread): <A HREF="007355.html">[squid-users] Squid SNI at Step 2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7353">[ date ]</a>
              <a href="thread.html#7353">[ thread ]</a>
              <a href="subject.html#7353">[ subject ]</a>
              <a href="author.html#7353">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
