<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Using Digests to reduce traffic between peers,	Parent - Sibling configuration question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Using%20Digests%20to%20reduce%20traffic%20between%20peers%2C%0A%09Parent%20-%20Sibling%20configuration%20question&In-Reply-To=%3C000901d11134%2412d7f710%243887e530%24%40optimera.us%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007348.html">
   <LINK REL="Next"  HREF="006250.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Using Digests to reduce traffic between peers,	Parent - Sibling configuration question</H1>
    <B>Jester Purtteman</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Using%20Digests%20to%20reduce%20traffic%20between%20peers%2C%0A%09Parent%20-%20Sibling%20configuration%20question&In-Reply-To=%3C000901d11134%2412d7f710%243887e530%24%40optimera.us%3E"
       TITLE="[squid-users] Using Digests to reduce traffic between peers,	Parent - Sibling configuration question">jester at optimera.us
       </A><BR>
    <I>Wed Oct 28 03:52:22 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007348.html">[squid-users] Using Digests to reduce traffic between peers, Parent - Sibling configuration question
</A></li>
        <LI>Next message (by thread): <A HREF="006250.html">[squid-users] Accessing squid from a url rather than proxy settings
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7360">[ date ]</a>
              <a href="thread.html#7360">[ thread ]</a>
              <a href="subject.html#7360">[ subject ]</a>
              <a href="author.html#7360">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>That&#8217;s kind of what I figured.  My thinking is that there is probably a higher fraction of content tags that would match, but it would take some care in calculating a checksum that wasn't in fact larger than the data itself.  But in any event, it seems plausible to me that it is possible.  Sounds like cache digest may be the right spot to start reading.  If I get anything like somewhere, I'll keep you guys in the loop... more importantly, I'll ask a bunch of questions :) 

Jester Purtteman, PE
OptimERA Inc,
(907) 581-4983 - Office
(360) 701-7875 - Cell

-----Original Message-----
From: Alex Rousskov [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>] 
Sent: Tuesday, October 27, 2015 10:09 AM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Cc: Jester Purtteman &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">jester at optimera.us</A>&gt;
Subject: Re: [squid-users] Using Digests to reduce traffic between peers, Parent - Sibling configuration question

On 10/26/2015 10:14 PM, Jester Purtteman wrote:

&gt;<i> I have been wrestling with squid for a while and my reading has 
</I>&gt;<i> brought &#8220;Cache-Digests&#8221; to my attention.  I suspect the answer is 
</I>&gt;<i> &#8220;that would be
</I>...
&gt;<i> As far as I can tell from (very limited) experimenting and reading, 
</I>&gt;<i> this doesn&#8217;t **appear** to be how it works,
</I>

Hello Jester,

    With a few configuration adjustments and code modifications, you can make Cache Digests help with your use case. Cache Digests make decisions based on request URLs. It sounds like you want to make decisions based on response body as well. It is possible to change the code to do that, but it will be a lot of non-trivial work and there will always be some false positives because Cache Digests are not meant to give always-precise answers.


As Amos mentioned, there are existing/standard HTTP mechanisms that are meant to decrease pointless fetches across expensive links. However, just like Cache Digests, &quot;as is&quot;, they may not work well in your use case. Those mechanisms make decisions based on origin-server-supplied headers such as ETags. As you said, that information may be missing or false in many responses.

Just like with Cache Digests, with a few configuration adjustments and code modifications, you can make those standard mechanisms work better for you. For example, you can teach Squid to generate its own ETag-like
content+header checksums that can be used in conditional HTTP requests
that Squid understands. None of this is easy, but it is doable.


There have been many proposals on how to solve this problem. I do not think there is a single winning approach. Everybody seem to experiment with their own tweaks of the existing tools and standards.

If you are looking for a solution that will cost you a few days/weeks of development and sysadmin work, I do not think there is one. If you are willing and able to invest a lot more, then I recommend that you estimate the expected savings _before_ you invest in an expensive solution. Getting reliable estimates is a complicated project on its own, but it is still a lot cheaper than investing months into a solution that does not meet your needs.


HTH,

Alex.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007348.html">[squid-users] Using Digests to reduce traffic between peers, Parent - Sibling configuration question
</A></li>
	<LI>Next message (by thread): <A HREF="006250.html">[squid-users] Accessing squid from a url rather than proxy settings
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7360">[ date ]</a>
              <a href="thread.html#7360">[ thread ]</a>
              <a href="subject.html#7360">[ subject ]</a>
              <a href="author.html#7360">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
