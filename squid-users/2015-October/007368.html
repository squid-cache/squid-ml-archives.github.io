<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] SSL3_READ_BYTES:sslv3 alert certificate unknown
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SSL3_READ_BYTES%3Asslv3%20alert%20certificate%20unknown&In-Reply-To=%3C5630D3B9.8050608%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007367.html">
   <LINK REL="Next"  HREF="007369.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] SSL3_READ_BYTES:sslv3 alert certificate unknown</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SSL3_READ_BYTES%3Asslv3%20alert%20certificate%20unknown&In-Reply-To=%3C5630D3B9.8050608%40treenet.co.nz%3E"
       TITLE="[squid-users] SSL3_READ_BYTES:sslv3 alert certificate unknown">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Oct 28 13:55:05 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007367.html">[squid-users] SSL3_READ_BYTES:sslv3 alert certificate unknown
</A></li>
        <LI>Next message (by thread): <A HREF="007369.html">[squid-users] SSL3_READ_BYTES:sslv3 alert certificate unknown
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7368">[ date ]</a>
              <a href="thread.html#7368">[ thread ]</a>
              <a href="subject.html#7368">[ subject ]</a>
              <a href="author.html#7368">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 28/10/2015 11:57 p.m., Yuri Voinov wrote:
&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 28.10.15 16:47, Amos Jeffries &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;&gt;<i> On 28/10/2015 11:35 p.m., Yuri Voinov wrote:
</I>&gt;&gt;&gt;<i> Hi gents.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I think, all of you who use Bump, seen much this messages in your
</I>&gt;&gt;&gt;<i> cache.log.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> SSL3_READ_BYTES:sslv3 alert certificate unknown
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> AFAIK, no way to identify which CA is absent in your setup.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I propose to consider the following questions: how do properly support
</I>&gt;&gt;&gt;<i> SSL proxy, if you can not identify the problem certificates? Telepaths
</I>&gt;&gt;&gt;<i> sunbathing in Bali. The procedure, which currently can not quickly and
</I>&gt;&gt;&gt;<i> in any way to effectively determine such a certificate.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> At the moment, the situation is as follows. SSL library - a thing in
</I>&gt;&gt;&gt;<i> itself, it runs by itself and does not write any logs. Squid - itself
</I>&gt;&gt;&gt;<i> and any useful information on the library does not receive but obscure
</I>&gt;&gt;&gt;<i> diagnostic messages. The possibility in any way specify the SSL library
</I>&gt;&gt;&gt;<i> diagnostic messages we have, and, as I understand it, will not.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> So, any ideas?
</I>&gt;&gt;<i> Make sure Squid is sending the whole CA chain to the remote end?
</I>&gt;<i> I think so, &quot;From the remote end&quot;. If we have web-server with CA, which
</I>&gt;<i> is not exists on our proxy, we must install it (which means &quot;trust
</I>&gt;<i> them&quot;, yea?) in our proxy manually.
</I>&gt;<i> 
</I>&gt;<i> I have idiotic idea - Squid fetch remote CA and offer us to trust and
</I>&gt;<i> install interactively. :) This is, of course, clinically idiotism. :)
</I>&gt;<i> 
</I>
That is what the Browsers do. It has been suggested to write a cert
validator that does it too.


&gt;<i> But - to support real Squid installation with thoursands users, I really
</I>&gt;<i> want to know, which CA's not exists from my side.
</I>&gt;<i> 
</I>&gt;<i> Intermediate CA's is no matter - if we have root CA already, fetch
</I>&gt;<i> intermediate chain is not big problem.
</I>&gt;<i> 
</I>&gt;<i> In this case, however, we faced unknown root CA exactly.
</I>&gt;<i> 
</I>&gt;<i> Yes?
</I>
I doubt. Chains do not have length limits and IIRC you can't know that
it is a root CA until you actually have it and see that it is
self-signed. At which point it is not &quot;certificate unknown&quot; anymore.

What is missing is just some CA in the chain. It needs to be located
somehow, only then can the decision happen about whether to trust or not
and see if another up the chain is needed too.


&gt;<i> 
</I>&gt;<i> And so what?
</I>
So by walking the chain and filling in as needed the cert validator
helper can probably fill the whole sequence in and reach a root CA that
is already trusted and tells you the found ones can be too. That is what
the Browsers do.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007367.html">[squid-users] SSL3_READ_BYTES:sslv3 alert certificate unknown
</A></li>
	<LI>Next message (by thread): <A HREF="007369.html">[squid-users] SSL3_READ_BYTES:sslv3 alert certificate unknown
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7368">[ date ]</a>
              <a href="thread.html#7368">[ thread ]</a>
              <a href="subject.html#7368">[ subject ]</a>
              <a href="author.html#7368">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
