<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Compiling Squid under Cygwin
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Compiling%20Squid%20under%20Cygwin&In-Reply-To=%3C5631057A.6010807%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007373.html">
   <LINK REL="Next"  HREF="007464.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Compiling Squid under Cygwin</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Compiling%20Squid%20under%20Cygwin&In-Reply-To=%3C5631057A.6010807%40treenet.co.nz%3E"
       TITLE="[squid-users] Compiling Squid under Cygwin">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Oct 28 17:27:22 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007373.html">[squid-users] Compiling Squid under Cygwin
</A></li>
        <LI>Next message (by thread): <A HREF="007464.html">[squid-users] Compiling Squid under Cygwin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7375">[ date ]</a>
              <a href="thread.html#7375">[ thread ]</a>
              <a href="subject.html#7375">[ subject ]</a>
              <a href="author.html#7375">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 29/10/2015 5:11 a.m., Yakovlev, Vadim wrote:
&gt;<i> Hello all,
</I>&gt;<i> 
</I>&gt;<i> I'm trying to compile Squid 3.5.10 for Windows with Cygwin, and ran into number of problems. Some I was able to resolve, but finally stuck at compiling negotiate_sspi_auth helper. In particular, I get &quot;error: 'SSP_blobP' was not declared in this scope&quot; in negotiate_sspi_auth.cc. The only place I've found where SSP_blobP type is defined is sspwin32.h, and it is defined only if _SQUID_WINDOWS_ macro is also defined:
</I>&gt;<i> 
</I>&gt;<i> #if _SQUID_WINDOWS_
</I>&gt;<i> ...
</I>&gt;<i> typedef char * SSP_blobP;
</I>&gt;<i> ...
</I>&gt;<i> #endif /* _SQUID_WINDOWS_ */
</I>&gt;<i> 
</I>&gt;<i> But _SQUID_WINDOWS_, which may be defined in osdetect.h, is not defined if we are on Cygwin:
</I>&gt;<i> 
</I>&gt;<i> #elif defined(__CYGWIN__)
</I>&gt;<i> #define _SQUID_CYGWIN_ 1
</I>&gt;<i> 
</I>&gt;<i> #elif defined(__MINGW32__) || defined(__MINGW__)
</I>&gt;<i> #define _SQUID_MINGW_ 1
</I>&gt;<i> #define _SQUID_WINDOWS_ 1
</I>&gt;<i> 
</I>&gt;<i> #elif defined(WIN32) || defined(WINNT) || defined(__WIN32__) || defined(__WIN32)
</I>&gt;<i> #define _SQUID_WINDOWS_ 1
</I>&gt;<i> 
</I>&gt;<i> Since on Cygwin macro __CYGWIN__ is defined, then only _SQUID_CYGWIN_ becomes defined, but _SQUID_WINDOWS_ is not. There are places in Squid code which are processed only when both _SQUID_CYGWIN_ and _SQUID_WINDOWS_ are defined, so as an experiment I've tried patching osdetect.h to make _SQUID_WINDOWS_ also defined when compiling on Cygwin, but that immediately produced hell of new errors during make: unresolved references, conflicting function declarations, etc.
</I>&gt;<i> 
</I>&gt;<i> So does anybody has an idea, how that should be corrected?
</I>

It is correct. CygWin presents a POSIX API for code and builds the same
as what a Unix/LinuxBSD build does.

The SSPI helpers are only for Native Windows API builds done with Visual
Studio and maybe MinGW. Neither of which are working yet.


PS. Windows packages are available from Diladele if you just want the
latest version.
&lt;<A HREF="http://wiki.squid-cache.org/KnowledgeBase/Windows#Squid-3.5">http://wiki.squid-cache.org/KnowledgeBase/Windows#Squid-3.5</A>&gt;

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007373.html">[squid-users] Compiling Squid under Cygwin
</A></li>
	<LI>Next message (by thread): <A HREF="007464.html">[squid-users] Compiling Squid under Cygwin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7375">[ date ]</a>
              <a href="thread.html#7375">[ thread ]</a>
              <a href="subject.html#7375">[ subject ]</a>
              <a href="author.html#7375">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
