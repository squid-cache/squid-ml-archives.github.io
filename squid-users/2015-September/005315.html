<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] wiki.squid-cache.org is broken
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20wiki.squid-cache.org%20is%20broken&In-Reply-To=%3C55E59F77.40003%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005308.html">
   <LINK REL="Next"  HREF="005316.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] wiki.squid-cache.org is broken</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20wiki.squid-cache.org%20is%20broken&In-Reply-To=%3C55E59F77.40003%40treenet.co.nz%3E"
       TITLE="[squid-users] wiki.squid-cache.org is broken">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Sep  1 12:52:07 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005308.html">[squid-users] wiki.squid-cache.org is broken
</A></li>
        <LI>Next message (by thread): <A HREF="005316.html">[squid-users] wiki.squid-cache.org is broken
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5315">[ date ]</a>
              <a href="thread.html#5315">[ thread ]</a>
              <a href="subject.html#5315">[ subject ]</a>
              <a href="author.html#5315">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 1/09/2015 10:42 p.m., Yuri Voinov wrote:
&gt;<i> 
</I>&gt;<i> Not available when IPv6 enabled on my outgoing interface.
</I>&gt;<i> 
</I>&gt;<i> Note: IPv6 globally not used in my country.
</I>&gt;<i> 
</I>
The rest of your country does not matter. For *any* protocol your router
should either have connectivity to your ISP, or not. It still needs to
work properly in both situations.


In this case Squid cannot determine the route is unavailable before the
client has given up and gone away. It takes over 20sec. That tells me
the ICMPv6 is not working properly at all for you.

A router somewhere along the path should be at a border where v6-enabled
connectivity stops. It is aware of whether there is IPv4/IPv6
connectivity to its next-hop. It should be *immediately* emitting
destination-unreachable ICMP/ICMPv6 messages to the software opening the
connection (ie Squid) when connectivity is absent (or down).

* If you have an IPv4-only network that 'router' is the routing code
built into the TCP stack of the Squid machine itself. This is what
triggers in your (working?) case when you dont have any IPv6 address
assigned to the machine interfaces.

* If you have IPv6-enabled network, but no upstream to ISP. Then your
border gateway router is responsible for the ICMP(v6) signalling. Squid
is waiting for that signal or a SYN+ACK ... 20sec ... nope.


There has been a myth floating around that simply DROP'ing packets is
okay to &quot;disable&quot; stuff. That _always_ leads to problems somewhere else.
Usually this hanging connection one.

DROP does have its uses when fending off DoS attacks *from outside*. But
for all internally generated traffic using REJECT with the right codes
is far, far better.

PS. ICMP(v6) are _not_ optional.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005308.html">[squid-users] wiki.squid-cache.org is broken
</A></li>
	<LI>Next message (by thread): <A HREF="005316.html">[squid-users] wiki.squid-cache.org is broken
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5315">[ date ]</a>
              <a href="thread.html#5315">[ thread ]</a>
              <a href="subject.html#5315">[ subject ]</a>
              <a href="author.html#5315">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
