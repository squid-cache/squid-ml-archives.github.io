<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] CACHE partition fills up
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20CACHE%20partition%20fills%20up&In-Reply-To=%3C55E5DAE9.6080704%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005319.html">
   <LINK REL="Next"  HREF="005341.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] CACHE partition fills up</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20CACHE%20partition%20fills%20up&In-Reply-To=%3C55E5DAE9.6080704%40treenet.co.nz%3E"
       TITLE="[squid-users] CACHE partition fills up">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Sep  1 17:05:45 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005319.html">[squid-users] CACHE partition fills up
</A></li>
        <LI>Next message (by thread): <A HREF="005341.html">[squid-users] CACHE partition fills up
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5324">[ date ]</a>
              <a href="thread.html#5324">[ thread ]</a>
              <a href="subject.html#5324">[ subject ]</a>
              <a href="author.html#5324">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2/09/2015 2:35 a.m., Jasper Van Der Westhuizen wrote:
&gt;<i> Good day everyone
</I>&gt;<i> 
</I>&gt;<i> I have a problem with my Squid proxy cache. On two occasions over the last week the cache partitions have filled up to 100%. I have 4 load balanced nodes with 100GB cache partitions each. All of them have filled up.
</I>&gt;<i> 
</I>&gt;<i> I tried to limit the size by using the following cache_dir directive.
</I>&gt;<i> 
</I>&gt;<i> cache_dir ufs /var/cache/squid/ 61440 128 512
</I>&gt;<i> 
</I>&gt;<i> I have had a very large increase in traffic over the last couple of months, but surely the configuration above should prevent the cache from filling up?
</I>&gt;<i> 
</I>
That depends on what the partition is filling up with.

If its cache objects not being erased, its probably bug 3553. High
traffic speed is the bug trigger. There is a fix in the latest 3.5
snapshot already if its urgent - and will be in the 3.5.8 I'm currently
preparing for release (ETA within 24 hrs).


For completeness; if swap.state or netdb journals are growing huge and
filling up the extra partition space. Then its probably just &quot;squid -k
rotate&quot; not being used often enough for the traffic volume. Regular, but
not too frequent, rotation is good for Squids overall health and clears
up file based outputs in all sorts of areas.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005319.html">[squid-users] CACHE partition fills up
</A></li>
	<LI>Next message (by thread): <A HREF="005341.html">[squid-users] CACHE partition fills up
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5324">[ date ]</a>
              <a href="thread.html#5324">[ thread ]</a>
              <a href="subject.html#5324">[ subject ]</a>
              <a href="author.html#5324">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
