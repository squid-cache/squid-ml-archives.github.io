<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] refresh_pattern and same objects
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20refresh_pattern%20and%20same%20objects&In-Reply-To=%3C55E72D70.1080808%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005349.html">
   <LINK REL="Next"  HREF="005350.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] refresh_pattern and same objects</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20refresh_pattern%20and%20same%20objects&In-Reply-To=%3C55E72D70.1080808%40treenet.co.nz%3E"
       TITLE="[squid-users] refresh_pattern and same objects">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Sep  2 17:10:08 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005349.html">[squid-users] refresh_pattern and same objects
</A></li>
        <LI>Next message (by thread): <A HREF="005350.html">[squid-users] refresh_pattern and same objects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5353">[ date ]</a>
              <a href="thread.html#5353">[ thread ]</a>
              <a href="subject.html#5353">[ subject ]</a>
              <a href="author.html#5353">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 3/09/2015 12:23 a.m., Yuri Voinov wrote:
&gt;<i> 
</I>&gt;<i> Look at this:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://i.imgur.com/gbkU20r.png">http://i.imgur.com/gbkU20r.png</A>
</I>&gt;<i> 
</I>&gt;<i> Pay your attention to reply times. With hit ratio not above 30% will
</I>&gt;<i> also occurs unacceptable delays on clients.
</I>&gt;<i> 
</I>&gt;<i> So, I see no reasons to have cache with low hit ratio in any case. IMHO
</I>&gt;<i> need to tune cache more accurate to achieve maximum possible hit ratio.
</I>

Those numbers are contradicting your earlier statement &quot;It's enough to
buy more external throuthput.&quot;

What they are showing is that your direct traffic has a horribly slow
multi-second delay. If you remove the cache and pay for external
throughput all traffic will face that delay.

If you put a cache into slow traffic like that and it gets even a tiny
1% improvement you are already gaining both latency and bandwidth savings.

Think about:
 1% of traffic going 10x faster ... vs 100% going slow.
  -&gt; 109% normal speed

 10% of traffic going 10x faster ... vs 100% going slow.
  -&gt; 190% normal speed

 30% of traffic going 10x faster ... vs 100% going slow.
  -&gt; 370% normal speed

 90% of traffic going 10x faster ... vs 100% going slow.
  -&gt; 910% normal speed

Yes bigger % caching is better speedup. Thats why we all aim for it. But
*any* amount is more than nothing.


Integrity of the output is also critical on HITs. If the cache returns
incorrect responses like the .GIF Marcus mentioned, it forces recipients
to reload content and raises all the resource costs.

Consider if that gif?something URL was a Captcha. By sending the wrong
one your cache is making the user auth checks fail. They are then forced
to repeat the whole page load, possibly several times, possibly with
force-refresh. The *entire* page and everything embedded, not just the
one small gif. Besides which your cache service looks a little bit worse
in the eyes of one more pissed off user.

When something is a protocol violation there are good reasons for it. At
least some uses cases exist where that thing is a Very Bad idea. You are
just trading off the chance that those situations are rare in your users
traffic against some savings in what for you are more common cases. This
is very much a personal situation, it varies by network and over time.


Going all-out on HIT rate is not a clear-cut as you seem to think. A lot
of it is choices to trade one gain for another.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005349.html">[squid-users] refresh_pattern and same objects
</A></li>
	<LI>Next message (by thread): <A HREF="005350.html">[squid-users] refresh_pattern and same objects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5353">[ date ]</a>
              <a href="thread.html#5353">[ thread ]</a>
              <a href="subject.html#5353">[ subject ]</a>
              <a href="author.html#5353">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
