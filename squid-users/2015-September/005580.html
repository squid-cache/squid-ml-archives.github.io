<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] user agent
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20user%20agent&In-Reply-To=%3C1442568753843-4673284.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005602.html">
   <LINK REL="Next"  HREF="005581.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] user agent</H1>
    <B>joe</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20user%20agent&In-Reply-To=%3C1442568753843-4673284.post%40n4.nabble.com%3E"
       TITLE="[squid-users] user agent">chip_pop at hotmail.com
       </A><BR>
    <I>Fri Sep 18 09:32:33 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005602.html">[squid-users] squid 3.5.7 for Windows (from Diladele) and	kerberosauth
</A></li>
        <LI>Next message (by thread): <A HREF="005581.html">[squid-users] user agent
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5580">[ date ]</a>
              <a href="thread.html#5580">[ thread ]</a>
              <a href="subject.html#5580">[ subject ]</a>
              <a href="author.html#5580">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>hi i  need to have 3 useragent replace and its not working
example         
acl brs browser -i Mozilla.*Window.*
acl phone-brs browser -i Mozilla.*(Android|iPhone|iPad).*

request_header_access User-Agent deny brs !phone-brs
request_header_replace User-Agent Mozilla/5.0 (Windows NT 5.1; rv:40.0)
Gecko/20100101 

request_header_access User-Agent deny phone-brs !brs 
request_header_replace User-Agent Mozilla/5.0 (Android; iPhone; Mobile;)
Gecko/18.0  


what happen is  if i have 2 or more useragent replace it replace all match
on both acl with second request_header_replace

so brs and phone-brs they hook on request_header_replace User-Agent
Mozilla/5.0 (Android; iPhone; Mobile;) Gecko/18.0 any idea how to fix this
or its a bug ??
for my understanding is wen first brs deny happen the $user_agent variable
load the first then it re load the second replace and send to browser this
is bad   it should work on first one then the second replace should be
discarded cause it did not match on first deny so here is my suggestion
to do pls its important so it wont miss grab the right replace

request_header_access User-Agent deny brs 
request_header_replace User-Agent Mozilla/5.0 (Windows NT 5.1; rv:40.0)
Gecko/20100101 {brs}

so add pls a match at the end to the request_header_replace *.*  brs
tks



  



--
View this message in context: <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/user-agent-tp4673284.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/user-agent-tp4673284.html</A>
Sent from the Squid - Users mailing list archive at Nabble.com.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005602.html">[squid-users] squid 3.5.7 for Windows (from Diladele) and	kerberosauth
</A></li>
	<LI>Next message (by thread): <A HREF="005581.html">[squid-users] user agent
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5580">[ date ]</a>
              <a href="thread.html#5580">[ thread ]</a>
              <a href="subject.html#5580">[ subject ]</a>
              <a href="author.html#5580">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
