<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Optimezed???
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Optimezed%3F%3F%3F&In-Reply-To=%3C201509181444.44783.Antony.Stone%40squid.open.source.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005586.html">
   <LINK REL="Next"  HREF="005679.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Optimezed???</H1>
    <B>Antony Stone</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Optimezed%3F%3F%3F&In-Reply-To=%3C201509181444.44783.Antony.Stone%40squid.open.source.it%3E"
       TITLE="[squid-users] Optimezed???">Antony.Stone at squid.open.source.it
       </A><BR>
    <I>Fri Sep 18 12:44:44 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005586.html">[squid-users] Optimezed???
</A></li>
        <LI>Next message (by thread): <A HREF="005679.html">[squid-users] Optimezed???
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5587">[ date ]</a>
              <a href="thread.html#5587">[ thread ]</a>
              <a href="subject.html#5587">[ subject ]</a>
              <a href="author.html#5587">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Friday 18 September 2015 at 14:27:42, Jorgeley Junior wrote:

&gt;<i> there is a way to improve it?
</I>
Improve what?  The percentage of your traffic which is cached, or the accuracy 
of the information reported by your monitoring system?


If you want to cache more content:

1. Make sure the sites being visited have available content (note that 12.6% 
of your requests resulted in the remote server saying some variation on 
&quot;nothing available&quot;).

2. Ignore things which are meaningless - such as the 27% of your requests 
which resulted in 407 Authentication Required - that tells you nothing about 
whether the user then successfully authenticated and got what they wanted, or 
didn't, but either way it's a standard response from the server which tells 
you nothing about the effectiveness of your cache.

3. Make sure your traffic is HTTP instead of HTTPS.

4. Make sure your users are visiting the same sites repeatedly so that content 
which gets cached gets re-used.

5. Make sure the sites they're visiting are not setting &quot;don't cache&quot; or 
&quot;already expired&quot; headers (such as is common for news sites, for example) so 
that the content is cacheable.

6. Run your cache for long enough that it's likely to have a representative 
proportion of what the users are asking for when you start measuring its 
effectiveness - if you start from an empty cache and pass requests through it, 
it's going to take some time for the content to build up so that you see some 
hits.


If you want to improve the information you're getting from the monitoring 
system, make sure it's telling you how much was cached as a proportion of 
requests which could have been cached - in other words, leave out HTTPS (36%) 
and 407 Auth Required (27%), plus anything where the remote server had nothing 
to provide (13%), and requests where the user's browser already had a cached 
copy and didn't to request an update (4%).

That throws out 80% of your current statistics, so you concentrate on the data 
about connections Squid *could* have helped with.

&gt;<i> 2015-09-18 8:25 GMT-03:00 Antony Stone:
</I>&gt;<i> &gt; On Friday 18 September 2015 at 13:13:27, Jorgeley Junior wrote:
</I>&gt;<i> &gt; &gt; hey guys, forgot-me? :(
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Surely you can see for yourself how many connections you've had of
</I>&gt;<i> &gt; different types?  Here are the most common (all those over 100 instances)
</I>&gt;<i> &gt; from your list of 5240 results
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &gt; &gt;     290 TAG_NONE/503
</I>&gt;<i> &gt; &gt; &gt;     368 TCP_DENIED/403
</I>&gt;<i> &gt; &gt; &gt;    1421 TCP_DENIED/407
</I>&gt;<i> &gt; &gt; &gt;     680 TCP_MISS/200
</I>&gt;<i> &gt; &gt; &gt;     192 TCP_REFRESH_UNMODIFIED/304
</I>&gt;<i> &gt; &gt; &gt;    1896 TCP_TUNNEL/200
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; So:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 290 (5.5%) got a 503 result (service unavailable)
</I>&gt;<i> &gt; 368 (7%) were denied by the remote server with code 403 (forbidden)
</I>&gt;<i> &gt; 1421 (27%) were deined by the remote server with code 407 (auth required)
</I>&gt;<i> &gt; 680 (13%) were successfully retreived from the remote servers but were
</I>&gt;<i> &gt; not previously in your cache
</I>&gt;<i> &gt; 192 (3.6%) were already cached by your browser and didn't need to be
</I>&gt;<i> &gt; retreived
</I>&gt;<i> &gt; 1896 (36%) were successful HTTPS tunneled connections, simply being
</I>&gt;<i> &gt; forwarded
</I>&gt;<i> &gt; by the proxy
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; This accounts for 4847 (92.5%) of your 5240 results.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; As you can see, just measuring HIT and MISS is not the whole picture.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Hope that helps,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Antony.
</I>
-- 
&quot;The problem with television is that the people must sit and keep their eyes 
glued on a screen; the average American family hasn't time for it.&quot;

 - New York Times, following a demonstration at the 1939 World's Fair.

                                                   Please reply to the list;
                                                         please *don't* CC me.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005586.html">[squid-users] Optimezed???
</A></li>
	<LI>Next message (by thread): <A HREF="005679.html">[squid-users] Optimezed???
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5587">[ date ]</a>
              <a href="thread.html#5587">[ thread ]</a>
              <a href="subject.html#5587">[ subject ]</a>
              <a href="author.html#5587">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
