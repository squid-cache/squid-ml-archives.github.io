<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Pinger exiting
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Pinger%20exiting&In-Reply-To=%3C889782564.136371.1442649538118.JavaMail.yahoo%40mail.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005592.html">
   <LINK REL="Next"  HREF="005597.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Pinger exiting</H1>
    <B>TarotApprentice</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Pinger%20exiting&In-Reply-To=%3C889782564.136371.1442649538118.JavaMail.yahoo%40mail.yahoo.com%3E"
       TITLE="[squid-users] Pinger exiting">tarotapprentice at yahoo.com
       </A><BR>
    <I>Sat Sep 19 07:58:58 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005592.html">[squid-users] user agent
</A></li>
        <LI>Next message (by thread): <A HREF="005597.html">[squid-users] Pinger exiting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5595">[ date ]</a>
              <a href="thread.html#5595">[ thread ]</a>
              <a href="subject.html#5595">[ subject ]</a>
              <a href="author.html#5595">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Running 3.5.7 under Debian. In my cache.log I get pinger exiting every day around 06:25.

2015/09/18 06:25:01| Set Current Directory to /var/spool/squid
2015/09/18 06:25:01 kid1| storeDirWriteCleanLogs: Starting...
2015/09/18 06:25:01 kid1|   Finished.  Wrote 34846 entries.
2015/09/18 06:25:01 kid1|   Took 0.00 seconds (7102731.35 entries/sec).
2015/09/18 06:25:01 kid1| logfileRotate: stdio:/var/log/squid/access.log
2015/09/18 06:25:01 kid1| Rotate log file stdio:/var/log/squid/access.log
2015/09/18 06:25:01 kid1| Pinger socket opened on FD 14
2015/09/18 06:25:01| pinger: Initialising ICMP pinger ...
2015/09/18 06:25:01| pinger: ICMP socket opened.
2015/09/18 06:25:01| pinger: ICMPv6 socket opened
2015/09/18 23:59:01| Set Current Directory to /var/spool/squid
2015/09/18 23:59:01 kid1| Closing Pinger socket on FD 14
2015/09/18 23:59:01 kid1| storeDirWriteCleanLogs: Starting...
2015/09/18 23:59:01 kid1|   Finished.  Wrote 36066 entries.
2015/09/18 23:59:01 kid1|   Took 0.01 seconds (2682683.73 entries/sec).
2015/09/18 23:59:01 kid1| logfileRotate: stdio:/var/log/squid/access.log
2015/09/18 23:59:01 kid1| Rotate log file stdio:/var/log/squid/access.log
2015/09/18 23:59:01 kid1| Pinger socket opened on FD 17
2015/09/18 23:59:01| pinger: Initialising ICMP pinger ...
2015/09/18 23:59:01| pinger: ICMP socket opened.
2015/09/18 23:59:01| pinger: ICMPv6 socket opened
2015/09/18 23:59:11| Pinger exiting.
2015/09/19 06:25:02 kid1| Closing Pinger socket on FD 17
2015/09/19 06:25:02| Pinger exiting.

I have a cron task to do a &quot;squid -k rotate&quot; at 23:59 which you can see happens, but why is pinger exiting at 06:25?

For completeness here's my uncommented squid.conf

Cheers,
MarkJ

acl localnet src 10.0.0.0/8     # RFC1918 possible internal network
acl localnet src 172.16.0.0/12  # RFC1918 possible internal network
acl localnet src 192.168.0.0/16 # RFC1918 possible internal network
acl localnet src fc00::/7       # RFC 4193 local private network range
acl localnet src fe80::/10      # RFC 4291 link-local (directly plugged) machines
acl SSL_ports port 443
acl Safe_ports port 80          # http
acl Safe_ports port 21          # ftp
acl Safe_ports port 443         # https
acl Safe_ports port 70          # gopher
acl Safe_ports port 210         # wais
acl Safe_ports port 1025-65535  # unregistered ports
acl Safe_ports port 280         # http-mgmt
acl Safe_ports port 488         # gss-http
acl Safe_ports port 591         # filemaker
acl Safe_ports port 777         # multiling http
acl CONNECT method CONNECT
acl windowsupdate dstdomain windowsupdate.microsoft.com
acl windowsupdate dstdomain .update.microsoft.com
acl windowsupdate dstdomain download.windowsupdate.com
acl windowsupdate dstdomain redir.metaservices.microsoft.com
acl windowsupdate dstdomain images.metaservices.microsoft.com
acl windowsupdate dstdomain c.microsoft.com
acl windowsupdate dstdomain www.download.windowsupdate.com
acl windowsupdate dstdomain wustat.windows.com
acl windowsupdate dstdomain crl.microsoft.com
acl windowsupdate dstdomain sls.microsoft.com
acl windowsupdate dstdomain productactivation.one.microsoft.com
acl windowsupdate dstdomain ntservicepack.microsoft.com
acl wuCONNECT dstdomain www.update.microsoft.com
acl wuCONNECT dstdomain sls.microsoft.com
http_access deny !Safe_ports
http_access deny CONNECT !SSL_ports
http_access deny manager
http_access allow CONNECT wuCONNECT localnet
http_access allow windowsupdate localnet
http_access allow localnet
http_access allow localhost
http_access deny all
http_port 3128
cache_mem 128 MB
maximum_object_size_in_memory 256 KB
maximum_object_size 512 MB
memory_replacement_policy lru
cache_replacement_policy heap LFUDA
cache_dir aufs /var/spool/squid 16384 32 256
quick_abort_min -1 KB
client_request_buffer_max_size 128 KB
coredump_dir /var/spool/squid
access_log /var/log/squid/access.log squid
cache_log /var/log/squid/cache.log
netdb_filename none
refresh_pattern -i microsoft.com/.*\.(cab|exe|ms[i|u|f]|[ap]sf|wm[v|a]|dat|zip) 4320 80% 43200 reload-into-ims
refresh_pattern -i windowsupdate.com/.*\.(cab|exe|ms[i|u|f]|[ap]sf|wm[v|a]|dat|zip) 4320 80% 43200 reload-into-ims
refresh_pattern -i windows.com/.*\.(cab|exe|ms[i|u|f]|[ap]sf|wm[v|a]|dat|zip) 4320 80% 43200 reload-into-ims
refresh_pattern (\.deb|\.udeb)$ 1440 80% 10080
refresh_pattern ^ftp:           1440    20%     10080
refresh_pattern ^gopher:        1440    0%      1440
refresh_pattern -i (/cgi-bin/|\?) 0     0%      0
refresh_pattern .               0       20%     4320
dns_nameservers 203.50.2.71 139.130.4.4
host_verify_strict on
max_filedescriptors 16384
dns_v4_first on

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005592.html">[squid-users] user agent
</A></li>
	<LI>Next message (by thread): <A HREF="005597.html">[squid-users] Pinger exiting
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5595">[ date ]</a>
              <a href="thread.html#5595">[ thread ]</a>
              <a href="subject.html#5595">[ subject ]</a>
              <a href="author.html#5595">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
