<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Is it possible to send the connection, starting with the CONNECT, to cache-peer?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Is%20it%20possible%20to%20send%20the%20connection%2C%0A%20starting%20with%20the%20CONNECT%2C%20to%20cache-peer%3F&In-Reply-To=%3C56004B9A.4020500%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005615.html">
   <LINK REL="Next"  HREF="005620.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Is it possible to send the connection, starting with the CONNECT, to cache-peer?</H1>
    <B>Yuri Voinov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Is%20it%20possible%20to%20send%20the%20connection%2C%0A%20starting%20with%20the%20CONNECT%2C%20to%20cache-peer%3F&In-Reply-To=%3C56004B9A.4020500%40gmail.com%3E"
       TITLE="[squid-users] Is it possible to send the connection, starting with the CONNECT, to cache-peer?">yvoinov at gmail.com
       </A><BR>
    <I>Mon Sep 21 18:25:30 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005615.html">[squid-users] Is it possible to send the connection, starting with the CONNECT, to cache-peer?
</A></li>
        <LI>Next message (by thread): <A HREF="005620.html">[squid-users] Is it possible to send the connection, starting with the CONNECT, to cache-peer?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5616">[ date ]</a>
              <a href="thread.html#5616">[ thread ]</a>
              <a href="subject.html#5616">[ subject ]</a>
              <a href="author.html#5616">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256
 
This is dig result:

;; ANSWER SECTION:
torproject.org.         3600    IN      A       93.95.227.222
torproject.org.         3600    IN      A       154.35.132.70
torproject.org.         3600    IN      A       86.59.30.40
torproject.org.         3600    IN      A       82.195.75.101
torproject.org.         3600    IN      A       38.229.72.16

This IP is banned. Completely. Outgoing packets are dropped by ISP.

So this is critical to forward ALL session, starting with first packet,
into Privoxy, and, then to Tor tunnel.

Otherwise session can't be established.

The problem enforces with HSTS onto torproject.org URL. Completely
HTTPS. From first GET request.

This can be solved with Tor Browser itself, but I want to find common
solution.

This is very simple. Complete HTTPS session must be forward to parent
proxy at whole. Because of only HTTP's forwarding possibility is
meaningless in HSTS-enabled world.

This is feature request, Amos. Otherwise Squid lacks some critical
functionality.

22.09.15 0:13, Amos Jeffries &#1087;&#1080;&#1096;&#1077;&#1090;:
&gt;<i> On 22/09/2015 6:00 a.m., Yuri Voinov wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Can't understand, why it is not work.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Tor Browser works ok itself.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The similar config via Squid 3.5.7+Privoxy - don't.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> CONNECT to torproject.org:443 goes directly, whenever config changes.
</I>&gt;<i>
</I>&gt;<i> I suspect some detail is being removed during the relay.
</I>&gt;<i>
</I>&gt;<i> Which makes me wonder why it is so important to send CONNECT via privoxy
</I>&gt;<i> in the first place. The HTTP headers and such on the CONNECT which
</I>&gt;<i> privoxy strips away are never sent externally anyway, they stop at the
</I>&gt;<i> proxy gateway which receives and enacts the CONNECT. That may be your
</I>&gt;<i> Squid or privoxy itself.
</I>&gt;<i>
</I>&gt;<i> Amos
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2
 
iQEcBAEBCAAGBQJWAEuaAAoJENNXIZxhPexGOD8H/0rzH7Xf7OyIdk7GTW0uuKpg
bLzsuh5OnLMSzuAZgxormhky5VYi3X2zoEQq71jEhbDWH4xlTvcPK9y5/GPz0L3x
z38rI5cDSX49bkPFn4yxRXRMvq+FZakbSmT9LuwW8E3phjhem7RLKOIPgRiyslxG
rYw83/qoTkVFg5P9fVhIVu9gy5GEyIoxiPCdiH3U/PWSZrlLePyJPZSWlYSqIyhH
sIx62qYi6bLZbtIcYrflR0/naco/4d8fYlwvDYmIuHuPeNZE6kINxgdgJhkhymkO
mw2klVncjeXKcewq/68Nz8Yak+8l1xPGPrGXp5aEUylRTxMa3FOb0mYwtT6iEbk=
=yDTE
-----END PGP SIGNATURE-----



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005615.html">[squid-users] Is it possible to send the connection, starting with the CONNECT, to cache-peer?
</A></li>
	<LI>Next message (by thread): <A HREF="005620.html">[squid-users] Is it possible to send the connection, starting with the CONNECT, to cache-peer?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5616">[ date ]</a>
              <a href="thread.html#5616">[ thread ]</a>
              <a href="subject.html#5616">[ subject ]</a>
              <a href="author.html#5616">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
