<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Is it possible to send the connection, starting with the CONNECT, to cache-peer?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Is%20it%20possible%20to%20send%20the%20connection%2C%0A%20starting%20with%20the%20CONNECT%2C%20to%20cache-peer%3F&In-Reply-To=%3C20150923110728.GA14623%40fantomas.sk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005599.html">
   <LINK REL="Next"  HREF="005655.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Is it possible to send the connection, starting with the CONNECT, to cache-peer?</H1>
    <B>Matus UHLAR - fantomas</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Is%20it%20possible%20to%20send%20the%20connection%2C%0A%20starting%20with%20the%20CONNECT%2C%20to%20cache-peer%3F&In-Reply-To=%3C20150923110728.GA14623%40fantomas.sk%3E"
       TITLE="[squid-users] Is it possible to send the connection, starting with the CONNECT, to cache-peer?">uhlar at fantomas.sk
       </A><BR>
    <I>Wed Sep 23 11:07:28 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005599.html">[squid-users] Is it possible to send the connection, starting with the CONNECT, to cache-peer?
</A></li>
        <LI>Next message (by thread): <A HREF="005655.html">[squid-users] Is it possible to send the connection, starting with the CONNECT, to cache-peer?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5654">[ date ]</a>
              <a href="thread.html#5654">[ thread ]</a>
              <a href="subject.html#5654">[ subject ]</a>
              <a href="author.html#5654">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

&gt;&gt;&gt;<i> On 17.09.15 18:47, Yuri Voinov wrote:
</I>&gt;&gt;&gt;&gt;<i> acl NoSSLIntercept ssl::server_name_regex -i localhost \.icq\.* kaspi\.kz
</I>&gt;&gt;&gt;&gt;<i> ssl_bump splice NoSSLIntercept
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> # Privoxy+Tor access rules
</I>&gt;&gt;&gt;&gt;<i> never_direct allow tor_url
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> cache_peer_access 127.0.0.1 allow tor_url
</I>
&gt;&gt;<i> 18.09.15 21:22, Matus UHLAR - fantomas &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;&gt;&gt;<i> I wonder if the never_direct and cache_peer_access should not use the same
</I>&gt;&gt;&gt;<i> acl as &quot;ssl_bump splice&quot;.
</I>
On 20.09.15 20:59, Amos Jeffries wrote:
&gt;<i>Maybe for values but ssl::server_name ACL may not work outside ssl_bump.
</I>&gt;<i>
</I>&gt;<i>It might, or it might not be usable by the other *_access rules and
</I>&gt;<i>depends on whether the matching decisions for those rule sets is the
</I>&gt;<i>same for the ssl_bump ones. That latter condition is a big 'IF'.
</I>
I wonder how does this match. The SNI should be only seen when the https
connection is received, either by intercepting https or client using HTTPS
to connect proxy. on unintercepted HTTP port that received CONNECT request,
it would only see the CONNECT string, e.g. &quot;CONNECT kaspi.kz:443&quot;, correct?

-- 
Matus UHLAR - fantomas, <A HREF="https://lists.squid-cache.org/listinfo/squid-users">uhlar at fantomas.sk</A> ; <A HREF="http://www.fantomas.sk/">http://www.fantomas.sk/</A>
Warning: I wish NOT to receive e-mail advertising to this address.
Varovanie: na tuto adresu chcem NEDOSTAVAT akukolvek reklamnu postu.
    One OS to rule them all, One OS to find them, 
One OS to bring them all and into darkness bind them 

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005599.html">[squid-users] Is it possible to send the connection, starting with the CONNECT, to cache-peer?
</A></li>
	<LI>Next message (by thread): <A HREF="005655.html">[squid-users] Is it possible to send the connection, starting with the CONNECT, to cache-peer?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5654">[ date ]</a>
              <a href="thread.html#5654">[ thread ]</a>
              <a href="subject.html#5654">[ subject ]</a>
              <a href="author.html#5654">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
