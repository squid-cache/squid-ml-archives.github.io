<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Optimezed???
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Optimezed%3F%3F%3F&In-Reply-To=%3C56044B63.6060309%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005680.html">
   <LINK REL="Next"  HREF="005685.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Optimezed???</H1>
    <B>Yuri Voinov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Optimezed%3F%3F%3F&In-Reply-To=%3C56044B63.6060309%40gmail.com%3E"
       TITLE="[squid-users] Optimezed???">yvoinov at gmail.com
       </A><BR>
    <I>Thu Sep 24 19:13:39 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005680.html">[squid-users] Optimezed???
</A></li>
        <LI>Next message (by thread): <A HREF="005685.html">[squid-users] Optimezed???
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5684">[ date ]</a>
              <a href="thread.html#5684">[ thread ]</a>
              <a href="subject.html#5684">[ subject ]</a>
              <a href="author.html#5684">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256
 
First. This is potentially dangerous. Can you guarantee your proxy never
has physical/network access by intruders? HTTPS can contain sensitive
data. You really sure you want problems with users? AS a minimum you
need protect your proxy at level B2 (by Orange Book).

Second. Yes, it dangerous, but possible with SSL Bump. With very
agressive cache parameters and with conjunction previous sentence. So,
this is dangerous for many sites - for it's functionality and security,
in general.

You still sure you want to do this?

24.09.15 20:46, Jorgeley Junior &#1087;&#1080;&#1096;&#1077;&#1090;:
&gt;<i> Can we do that to cache https?
</I>&gt;<i> http_port 3128 ssl-bump generate-host-certificates=on
</I>&gt;<i> dynamic_cert_mem_cache_size=4MB cert=/usr/local/squid/etc/monkey.pem
</I>&gt;<i>
</I>&gt;<i> 2015-09-24 11:24 GMT-03:00 Jorgeley Junior &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">jorgeley at gmail.com</A>&gt;:
</I>&gt;<i>
</I>&gt;&gt;<i> Is it not possible to cache the https due the encryption?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 2015-09-18 9:44 GMT-03:00 Antony Stone
</I>&lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">Antony.Stone at squid.open.source.it</A>&gt;
&gt;&gt;<i> :
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On Friday 18 September 2015 at 14:27:42, Jorgeley Junior wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> there is a way to improve it?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Improve what?  The percentage of your traffic which is cached, or the
</I>&gt;&gt;&gt;<i> accuracy
</I>&gt;&gt;&gt;<i> of the information reported by your monitoring system?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> If you want to cache more content:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 1. Make sure the sites being visited have available content (note that
</I>&gt;&gt;&gt;<i> 12.6%
</I>&gt;&gt;&gt;<i> of your requests resulted in the remote server saying some variation on
</I>&gt;&gt;&gt;<i> &quot;nothing available&quot;).
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 2. Ignore things which are meaningless - such as the 27% of your
</I>requests
&gt;&gt;&gt;<i> which resulted in 407 Authentication Required - that tells you nothing
</I>&gt;&gt;&gt;<i> about
</I>&gt;&gt;&gt;<i> whether the user then successfully authenticated and got what they
</I>&gt;&gt;&gt;<i> wanted, or
</I>&gt;&gt;&gt;<i> didn't, but either way it's a standard response from the server which
</I>&gt;&gt;&gt;<i> tells
</I>&gt;&gt;&gt;<i> you nothing about the effectiveness of your cache.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 3. Make sure your traffic is HTTP instead of HTTPS.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 4. Make sure your users are visiting the same sites repeatedly so that
</I>&gt;&gt;&gt;<i> content
</I>&gt;&gt;&gt;<i> which gets cached gets re-used.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 5. Make sure the sites they're visiting are not setting &quot;don't cache&quot; or
</I>&gt;&gt;&gt;<i> &quot;already expired&quot; headers (such as is common for news sites, for
</I>example)
&gt;&gt;&gt;<i> so
</I>&gt;&gt;&gt;<i> that the content is cacheable.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 6. Run your cache for long enough that it's likely to have a
</I>&gt;&gt;&gt;<i> representative
</I>&gt;&gt;&gt;<i> proportion of what the users are asking for when you start measuring its
</I>&gt;&gt;&gt;<i> effectiveness - if you start from an empty cache and pass requests
</I>&gt;&gt;&gt;<i> through it,
</I>&gt;&gt;&gt;<i> it's going to take some time for the content to build up so that you see
</I>&gt;&gt;&gt;<i> some
</I>&gt;&gt;&gt;<i> hits.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> If you want to improve the information you're getting from the
</I>monitoring
&gt;&gt;&gt;<i> system, make sure it's telling you how much was cached as a
</I>proportion of
&gt;&gt;&gt;<i> requests which could have been cached - in other words, leave out HTTPS
</I>&gt;&gt;&gt;<i> (36%)
</I>&gt;&gt;&gt;<i> and 407 Auth Required (27%), plus anything where the remote server had
</I>&gt;&gt;&gt;<i> nothing
</I>&gt;&gt;&gt;<i> to provide (13%), and requests where the user's browser already had a
</I>&gt;&gt;&gt;<i> cached
</I>&gt;&gt;&gt;<i> copy and didn't to request an update (4%).
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> That throws out 80% of your current statistics, so you concentrate
</I>on the
&gt;&gt;&gt;<i> data
</I>&gt;&gt;&gt;<i> about connections Squid *could* have helped with.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> 2015-09-18 8:25 GMT-03:00 Antony Stone:
</I>&gt;&gt;&gt;&gt;&gt;<i> On Friday 18 September 2015 at 13:13:27, Jorgeley Junior wrote:
</I>&gt;&gt;&gt;&gt;&gt;&gt;<i> hey guys, forgot-me? :(
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Surely you can see for yourself how many connections you've had of
</I>&gt;&gt;&gt;&gt;&gt;<i> different types?  Here are the most common (all those over 100
</I>&gt;&gt;&gt;<i> instances)
</I>&gt;&gt;&gt;&gt;&gt;<i> from your list of 5240 results
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>     290 TAG_NONE/503
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>     368 TCP_DENIED/403
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>    1421 TCP_DENIED/407
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>     680 TCP_MISS/200
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>     192 TCP_REFRESH_UNMODIFIED/304
</I>&gt;&gt;&gt;&gt;&gt;&gt;&gt;<i>    1896 TCP_TUNNEL/200
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> So:
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> 290 (5.5%) got a 503 result (service unavailable)
</I>&gt;&gt;&gt;&gt;&gt;<i> 368 (7%) were denied by the remote server with code 403 (forbidden)
</I>&gt;&gt;&gt;&gt;&gt;<i> 1421 (27%) were deined by the remote server with code 407 (auth
</I>&gt;&gt;&gt;<i> required)
</I>&gt;&gt;&gt;&gt;&gt;<i> 680 (13%) were successfully retreived from the remote servers but were
</I>&gt;&gt;&gt;&gt;&gt;<i> not previously in your cache
</I>&gt;&gt;&gt;&gt;&gt;<i> 192 (3.6%) were already cached by your browser and didn't need to be
</I>&gt;&gt;&gt;&gt;&gt;<i> retreived
</I>&gt;&gt;&gt;&gt;&gt;<i> 1896 (36%) were successful HTTPS tunneled connections, simply being
</I>&gt;&gt;&gt;&gt;&gt;<i> forwarded
</I>&gt;&gt;&gt;&gt;&gt;<i> by the proxy
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> This accounts for 4847 (92.5%) of your 5240 results.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> As you can see, just measuring HIT and MISS is not the whole picture.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Hope that helps,
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Antony.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> --
</I>&gt;&gt;&gt;<i> &quot;The problem with television is that the people must sit and keep their
</I>&gt;&gt;&gt;<i> eyes
</I>&gt;&gt;&gt;<i> glued on a screen; the average American family hasn't time for it.&quot;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>  - New York Times, following a demonstration at the 1939 World's Fair.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>                                                    Please reply to the
</I>&gt;&gt;&gt;<i> list;
</I>&gt;&gt;&gt;<i>                                                          please *don't*
</I>&gt;&gt;&gt;<i> CC me.
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> squid-users mailing list
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2
 
iQEcBAEBCAAGBQJWBEtiAAoJENNXIZxhPexGHWgH/Rr0iGPCyTy7R5UYI/8PSvQO
5oSWO3Oyr+MVQaGUecLq01CoyRlw1t5IRPoVnL8k/39xp0g2QlmLcWi50UjKexXr
+aOYdi2wvoFyYLISR9Dx0t64RqYYzACzmYS4hSo1yPTZ25jb3AcNGpU5D3nbQmty
Uuqomj98yo8Owz6tHnz/uEaU5AS/w4Wec+b/om3LhyiagQWa21ub42x2rqRzwNk4
pLCrtDYGFC9Vn9VMmZCZygw7/c+1CSMPW4qDkxc6GiM55EDataPtJ7uTNL2XOMwZ
9Ys1XtIuvGuMpXU2CYUiWVP4KiL3WDWPfzSqPhmrrt/laVuNNM1aOUuSNLx4oGU=
=g2rO
-----END PGP SIGNATURE-----

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150925/02e0f07a/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150925/02e0f07a/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005680.html">[squid-users] Optimezed???
</A></li>
	<LI>Next message (by thread): <A HREF="005685.html">[squid-users] Optimezed???
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5684">[ date ]</a>
              <a href="thread.html#5684">[ thread ]</a>
              <a href="subject.html#5684">[ subject ]</a>
              <a href="author.html#5684">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
