<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] How to avoid Squid disclosing the origin server IP when there is an error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20avoid%20Squid%20disclosing%20the%20origin%20server%0A%20IP%20when%20there%20is%20an%20error&In-Reply-To=%3C56071E63.8020807%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005707.html">
   <LINK REL="Next"  HREF="005712.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] How to avoid Squid disclosing the origin server IP when there is an error</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20avoid%20Squid%20disclosing%20the%20origin%20server%0A%20IP%20when%20there%20is%20an%20error&In-Reply-To=%3C56071E63.8020807%40ngtech.co.il%3E"
       TITLE="[squid-users] How to avoid Squid disclosing the origin server IP when there is an error">eliezer at ngtech.co.il
       </A><BR>
    <I>Sat Sep 26 22:38:27 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005707.html">[squid-users] How to avoid Squid disclosing the origin server IP when there is an error
</A></li>
        <LI>Next message (by thread): <A HREF="005712.html">[squid-users] How to avoid Squid disclosing the origin server IP when there is an error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5711">[ date ]</a>
              <a href="thread.html#5711">[ thread ]</a>
              <a href="subject.html#5711">[ subject ]</a>
              <a href="author.html#5711">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Manuel,

The reason the client receives the destination IP or other details is 
due to the structure of the ERROR page.
Depends on your OS you can find the ERROR page file and modify it so the 
format will meet your requirements.
You can take a look at the wiki about custom error pages:
<A HREF="http://wiki.squid-cache.org/Features/CustomErrors">http://wiki.squid-cache.org/Features/CustomErrors</A>

and specifically you will might need to change\remove the &quot;%I&quot; from the 
template.
Or if you are willing to write a custom error page which is different 
from the squid defaults to meet your site visual structure.

All The Bests,
Eliezer

On 26/09/2015 14:48, Manuel wrote:
&gt;<i> When Squid -even as a reverse proxy (which is my concern)- can not retrieve
</I>&gt;<i> the requested URL, it dicloses the IP address of the server trying to
</I>&gt;<i> contact with. Is there any way to hide that IP address to the public for
</I>&gt;<i> security reasons?
</I>&gt;<i>
</I>&gt;<i> Example of the error message I am referring to:
</I>&gt;<i> &quot;The requested URL could not be retrieved
</I>&gt;<i>
</I>&gt;<i> While trying to retrieve the URL: <A HREF="http://www.domainame.com/">http://www.domainame.com/</A>
</I>&gt;<i>
</I>&gt;<i> The following error was encountered:
</I>&gt;<i>
</I>&gt;<i> * Connection to 127.0.0.1 Failed
</I>&gt;<i>
</I>&gt;<i> The system returned:
</I>&gt;<i>
</I>&gt;<i> (110) Connection timed out
</I>&gt;<i>
</I>&gt;<i> The remote host or network may be down. Please try the request again.
</I>&gt;<i>
</I>&gt;<i> Your cache administrator is @
</I>&gt;<i> Generated Sat, 26 Sep 2015 01:18:48 GMT&quot;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Cheers
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context: <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/How-to-avoid-Squid-disclosing-the-origin-server-IP-when-there-is-an-error-tp4673418.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/How-to-avoid-Squid-disclosing-the-origin-server-IP-when-there-is-an-error-tp4673418.html</A>
</I>&gt;<i> Sent from the Squid - Users mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005707.html">[squid-users] How to avoid Squid disclosing the origin server IP when there is an error
</A></li>
	<LI>Next message (by thread): <A HREF="005712.html">[squid-users] How to avoid Squid disclosing the origin server IP when there is an error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5711">[ date ]</a>
              <a href="thread.html#5711">[ thread ]</a>
              <a href="subject.html#5711">[ subject ]</a>
              <a href="author.html#5711">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
