<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Streaming Radio blocked
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Streaming%20Radio%20blocked&In-Reply-To=%3CCADmNwxLux-GimMy13Xuj54P2dnrK8hyV6zgrMSsUMaokOfu7MA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005725.html">
   <LINK REL="Next"  HREF="005736.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Streaming Radio blocked</H1>
    <B>Henry McLaughlin</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Streaming%20Radio%20blocked&In-Reply-To=%3CCADmNwxLux-GimMy13Xuj54P2dnrK8hyV6zgrMSsUMaokOfu7MA%40mail.gmail.com%3E"
       TITLE="[squid-users] Streaming Radio blocked">henry at incred.solutions
       </A><BR>
    <I>Mon Sep 28 00:09:46 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005725.html">[squid-users] Streaming Radio blocked
</A></li>
        <LI>Next message (by thread): <A HREF="005736.html">[squid-users] analyzing cache in and out files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5726">[ date ]</a>
              <a href="thread.html#5726">[ thread ]</a>
              <a href="subject.html#5726">[ subject ]</a>
              <a href="author.html#5726">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Correct. My apologies.

It's not HTTP that is blocked. Not sure what is at this stage but thanks
for the help.

On 28 September 2015 at 09:33, Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt; wrote:

&gt;<i> On 28/09/2015 9:12 a.m., Yuri Voinov wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; It not seems blocked.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Blocked URL has TCP_DENIED tag.
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> Unless the media portion is not even using HTTP. The problem would then
</I>&gt;<i> be somewhere else outside Squid.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; 28.09.15 1:54, Henry McLaughlin &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; On 27 September 2015 at 17:07, Henry McLaughlin wrote:
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; I am having problems using a radio streaming application on my
</I>&gt;<i> &gt; phone. The
</I>&gt;<i> &gt;&gt;&gt;&gt; phone connection is routed via squid proxy server. If I by pass
</I>&gt;<i> &gt; squid then
</I>&gt;<i> &gt;&gt;&gt;&gt; the radio application works. The application is TuneIn radio
</I>&gt;<i> &gt; (tunein.com).
</I>&gt;<i> &gt;&gt;&gt;&gt; I have read a number of posts regarding blocking streaming services
</I>&gt;<i> &gt; however
</I>&gt;<i> &gt;&gt;&gt;&gt; have not found how to unblock one as I suspect the service is blocked
</I>&gt;<i> by
</I>&gt;<i> &gt;&gt;&gt;&gt; default.
</I>&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; The following appears in the access log:
</I>&gt;<i> &gt;&gt;&gt;&gt; 1443337149.538   3239 192.168.1.102 TCP_MISS/200 653 GET
</I>&gt;<i> &gt;&gt;&gt;&gt; <A HREF="http://ads.tunein.com/creatives?">http://ads.tunein.com/creatives?</A> - HIER_DIRECT/176.34.44.113
</I>&gt;<i> &gt;&gt;&gt;&gt; application/json
</I>&gt;<i> &gt;&gt;&gt;&gt; 1443337151.830   1968 192.168.1.102 TCP_MISS/200 6367 GET
</I>&gt;<i> &gt;&gt;&gt;&gt; <A HREF="http://ads.mopub.com/m/ad?">http://ads.mopub.com/m/ad?</A> - HIER_DIRECT/192.44.68.3 text/html
</I>&gt;<i> &gt;&gt;&gt;&gt; 1443337152.292   3661 192.168.1.102 TCP_MISS/200 478 GET
</I>&gt;<i> &gt;&gt;&gt;&gt; <A HREF="http://opml.radiotime.com/Report.ashx?">http://opml.radiotime.com/Report.ashx?</A> - HIER_DIRECT/204.69.221.89
</I>&gt;<i> &gt;&gt;&gt;&gt; text/xml
</I>&gt;<i> &gt;&gt;&gt;&gt; 1443337152.355   4029 192.168.1.102 TCP_MISS_ABORTED/200 3250 GET
</I>&gt;<i> &gt;&gt;&gt;&gt; <A HREF="http://67.212.174.228:10001/">http://67.212.174.228:10001/</A> - HIER_DIRECT/67.212.174.228 audio/mpeg
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The only problem in this log seems to be the request above. Which is
</I>&gt;<i> apparently successfully getting put through to the required server, but
</I>&gt;<i> the client aborts it after 4 seconds with only a tiny/3KB amount of
</I>&gt;<i> response getting back.
</I>&gt;<i>
</I>&gt;<i> When I try it myself I get an ICY stream back. Squid does support those.
</I>&gt;<i> At least 3.1 and later do, if you are using an older Squid you *really*
</I>&gt;<i> need to upgrade.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> There is a chance that your ISP or some device upstream is blocking the
</I>&gt;<i> traffic. Since its aparently getting the response, but not much I
</I>&gt;<i> suspect MTU issues somewhere. The HTTP reply headers would get through
</I>&gt;<i> as small packets, but the media itself may need large ones that get
</I>&gt;<i> dropped.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> There is a huge amount of advertising being thrown at the client. It
</I>&gt;<i> might be spending all its time processing that and not get around to the
</I>&gt;<i> actual content you want. Try adding this to squid.conf to eliminate that
</I>&gt;<i> and see if things work better:
</I>&gt;<i>
</I>&gt;<i>  acl ads dstdomain ads-bidder-api.twitter.com \
</I>&gt;<i>       .google-analytics.com ads.tunein.com ads.mopub.com
</I>&gt;<i>  http_access deny ads
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The site also has a bunch of HTTP violations:
</I>&gt;<i>
</I>&gt;<i>  * Pragma: no-cache is a request directive, not a response directive.
</I>&gt;<i>  * A ranged request returned another representation.
</I>&gt;<i>  * The X-XSS-Protection header's syntax isn't valid.
</I>&gt;<i>  * Response is negotiated, but doesn't have an appropriate Vary header.
</I>&gt;<i>  * The resource doesn't send Vary consistently.
</I>&gt;<i>
</I>&gt;<i> While these are only from the web pages and images of the site they are
</I>&gt;<i> bad signs about the developers abilities.
</I>&gt;<i>
</I>&gt;<i> Amos
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20150928/64fe9fbd/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20150928/64fe9fbd/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005725.html">[squid-users] Streaming Radio blocked
</A></li>
	<LI>Next message (by thread): <A HREF="005736.html">[squid-users] analyzing cache in and out files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5726">[ date ]</a>
              <a href="thread.html#5726">[ thread ]</a>
              <a href="subject.html#5726">[ subject ]</a>
              <a href="author.html#5726">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
