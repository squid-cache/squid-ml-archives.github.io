<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] On what methods does url filtering needs to apply?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20On%20what%20methods%20does%20url%20filtering%20needs%20to%20apply%3F&In-Reply-To=%3C56098837.2020700%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005722.html">
   <LINK REL="Next"  HREF="005735.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] On what methods does url filtering needs to apply?</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20On%20what%20methods%20does%20url%20filtering%20needs%20to%20apply%3F&In-Reply-To=%3C56098837.2020700%40ngtech.co.il%3E"
       TITLE="[squid-users] On what methods does url filtering needs to apply?">eliezer at ngtech.co.il
       </A><BR>
    <I>Mon Sep 28 18:34:31 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005722.html">[squid-users] On what methods does url filtering needs to apply?
</A></li>
        <LI>Next message (by thread): <A HREF="005735.html">[squid-users] On what methods does url filtering needs to apply?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5734">[ date ]</a>
              <a href="thread.html#5734">[ thread ]</a>
              <a href="subject.html#5734">[ subject ]</a>
              <a href="author.html#5734">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for the insight.

You are right, it is not well defined.
I will try to rephrase or clear couple things.
Mainly content filtering is for offensive content.
This by definition is not the goal of a security related product that 
would not like to reveal the client attempts to reach the site using a 
HEAD request.
The main issue is about offensive content in the presentation layer.
Actually with squid it's not such a great issue but the main purpose of 
my question is to verify what would be allowed to be bypassed content 
filtering.
I will do more to clarify the issue.
A HEAD request will never include a body and will might contain 
offensive content in the HEADERS but it's not something that the user 
(unless he is an admin) will probably never see.
So a HEAD cannot ever contain a body response and there for might not 
require filtering.
A PUT request can contain a response body but it is not used and was not 
designed to send body content and else then that browsers do not really 
implement support for it.

Basically the main HTTP methods that are being used by browsers to 
retrieve content and present it are GET and POST.
I really have not seen a webpage that is built to work with PUT or 
OPTIONS only methods.
So an OPTIONS method blocking is something that might worth checking in 
a security environment but if the content filtering is to block abusive 
content then I probably do not need to invest time on an OPTIONS request.

So after defining that the main subject as abusive content in the body 
part of the message, POST and GET are a must to check but OPTIONS might 
not be required.

I must say as a side note that for small setups it might not really be a 
big of a difference but for large setups, if there is no real need to 
inspect the content then I can just reduce the delays for such requests 
by a few 100s ms.

The main reason I am asking this is due to the fact(not saying that they 
are right or wrong) that I have seen it being use in  the real world.
I have seen something like this:
icap_enable on
icap_service service_req reqmod_precache <A HREF="icap://127.0.0.1:1344/service">icap://127.0.0.1:1344/service</A>
acl inspect_methods method GET POST CONNECT
adaptation_access service_req allow inspect_methods
adaptation_access service_req deny all

Thanks,
Eliezer

On 27/09/2015 20:58, Alex Rousskov wrote:
&gt;<i> Your question is impossible to answer correctly until you define
</I>&gt;<i> &quot;unwanted content&quot;. In other words, you need to define what you want to
</I>&gt;<i> block (in general, non-HTTP terms) before it is possible to identify a
</I>&gt;<i> subset of HTTP messages that can deliver the corresponding content. What
</I>&gt;<i> is &quot;desired&quot; by some is &quot;unwanted&quot; by others, so we cannot guess what
</I>&gt;<i> _your_  blocking objectives are.
</I>&gt;<i>
</I>&gt;<i> Alex.
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005722.html">[squid-users] On what methods does url filtering needs to apply?
</A></li>
	<LI>Next message (by thread): <A HREF="005735.html">[squid-users] On what methods does url filtering needs to apply?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5734">[ date ]</a>
              <a href="thread.html#5734">[ thread ]</a>
              <a href="subject.html#5734">[ subject ]</a>
              <a href="author.html#5734">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
