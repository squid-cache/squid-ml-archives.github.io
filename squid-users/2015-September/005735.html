<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] On what methods does url filtering needs to apply?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20On%20what%20methods%20does%20url%20filtering%20needs%20to%20apply%3F&In-Reply-To=%3C56098DEE.7010004%40urlfilterdb.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005734.html">
   <LINK REL="Next"  HREF="005737.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] On what methods does url filtering needs to apply?</H1>
    <B>Marcus Kool</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20On%20what%20methods%20does%20url%20filtering%20needs%20to%20apply%3F&In-Reply-To=%3C56098DEE.7010004%40urlfilterdb.com%3E"
       TITLE="[squid-users] On what methods does url filtering needs to apply?">marcus.kool at urlfilterdb.com
       </A><BR>
    <I>Mon Sep 28 18:58:54 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005734.html">[squid-users] On what methods does url filtering needs to apply?
</A></li>
        <LI>Next message (by thread): <A HREF="005737.html">[squid-users] On what methods does url filtering needs to apply?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5735">[ date ]</a>
              <a href="thread.html#5735">[ thread ]</a>
              <a href="subject.html#5735">[ subject ]</a>
              <a href="author.html#5735">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&quot;content filtering&quot; may filter only content while a generic filter may filter anything
including malware that uses PUT, OPTION and/or HEAD to upload credit card data.

So it depends on what you want to filter. If it is downloadable content only, you can stick with filtering GET POST CONNECT.

Marcus


On 09/28/2015 03:34 PM, Eliezer Croitoru wrote:
&gt;<i> Thanks for the insight.
</I>&gt;<i>
</I>&gt;<i> You are right, it is not well defined.
</I>&gt;<i> I will try to rephrase or clear couple things.
</I>&gt;<i> Mainly content filtering is for offensive content.
</I>&gt;<i> This by definition is not the goal of a security related product that would not like to reveal the client attempts to reach the site using a HEAD request.
</I>&gt;<i> The main issue is about offensive content in the presentation layer.
</I>&gt;<i> Actually with squid it's not such a great issue but the main purpose of my question is to verify what would be allowed to be bypassed content filtering.
</I>&gt;<i> I will do more to clarify the issue.
</I>&gt;<i> A HEAD request will never include a body and will might contain offensive content in the HEADERS but it's not something that the user (unless he is an admin) will probably never see.
</I>&gt;<i> So a HEAD cannot ever contain a body response and there for might not require filtering.
</I>&gt;<i> A PUT request can contain a response body but it is not used and was not designed to send body content and else then that browsers do not really implement support for it.
</I>&gt;<i>
</I>&gt;<i> Basically the main HTTP methods that are being used by browsers to retrieve content and present it are GET and POST.
</I>&gt;<i> I really have not seen a webpage that is built to work with PUT or OPTIONS only methods.
</I>&gt;<i> So an OPTIONS method blocking is something that might worth checking in a security environment but if the content filtering is to block abusive content then I probably do not need to invest time on an
</I>&gt;<i> OPTIONS request.
</I>&gt;<i>
</I>&gt;<i> So after defining that the main subject as abusive content in the body part of the message, POST and GET are a must to check but OPTIONS might not be required.
</I>&gt;<i>
</I>&gt;<i> I must say as a side note that for small setups it might not really be a big of a difference but for large setups, if there is no real need to inspect the content then I can just reduce the delays for
</I>&gt;<i> such requests by a few 100s ms.
</I>&gt;<i>
</I>&gt;<i> The main reason I am asking this is due to the fact(not saying that they are right or wrong) that I have seen it being use in  the real world.
</I>&gt;<i> I have seen something like this:
</I>&gt;<i> icap_enable on
</I>&gt;<i> icap_service service_req reqmod_precache <A HREF="icap://127.0.0.1:1344/service">icap://127.0.0.1:1344/service</A>
</I>&gt;<i> acl inspect_methods method GET POST CONNECT
</I>&gt;<i> adaptation_access service_req allow inspect_methods
</I>&gt;<i> adaptation_access service_req deny all
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> Eliezer
</I>&gt;<i>
</I>&gt;<i> On 27/09/2015 20:58, Alex Rousskov wrote:
</I>&gt;&gt;<i> Your question is impossible to answer correctly until you define
</I>&gt;&gt;<i> &quot;unwanted content&quot;. In other words, you need to define what you want to
</I>&gt;&gt;<i> block (in general, non-HTTP terms) before it is possible to identify a
</I>&gt;&gt;<i> subset of HTTP messages that can deliver the corresponding content. What
</I>&gt;&gt;<i> is &quot;desired&quot; by some is &quot;unwanted&quot; by others, so we cannot guess what
</I>&gt;&gt;<i> _your_  blocking objectives are.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Alex.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005734.html">[squid-users] On what methods does url filtering needs to apply?
</A></li>
	<LI>Next message (by thread): <A HREF="005737.html">[squid-users] On what methods does url filtering needs to apply?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5735">[ date ]</a>
              <a href="thread.html#5735">[ thread ]</a>
              <a href="subject.html#5735">[ subject ]</a>
              <a href="author.html#5735">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
