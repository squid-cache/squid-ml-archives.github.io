<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 3.5.9 RPM are available
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203.5.9%20RPM%20are%20available&In-Reply-To=%3C560A993E.8050604%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005748.html">
   <LINK REL="Next"  HREF="005773.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 3.5.9 RPM are available</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203.5.9%20RPM%20are%20available&In-Reply-To=%3C560A993E.8050604%40ngtech.co.il%3E"
       TITLE="[squid-users] Squid 3.5.9 RPM are available">eliezer at ngtech.co.il
       </A><BR>
    <I>Tue Sep 29 13:59:26 UTC 2015</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005748.html">[squid-users] Squid 3.5.9 RPM are available
</A></li>
        <LI>Next message (by thread): <A HREF="005773.html">[squid-users] Squid 3.5.9 RPM are available
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5750">[ date ]</a>
              <a href="thread.html#5750">[ thread ]</a>
              <a href="subject.html#5750">[ subject ]</a>
              <a href="author.html#5750">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Veiko,

I am not a SELINUX expert but something might be wrong on your system 
settings or permissions.
What OS exactly are you using? What version of CentOS?
I am using CentOS 7 with latest updates and it seems to work fine.

 From the information you have supplied it seems that SELINUX either 
doesn't like squid accessing the tmpfs ie shm fs or another part of the fs.
After we will have the OS version we can be smarter.
And also in any case you can just simply eliminate SELINUX for a sec and 
see how it works.
If it works then maybe there is a need to allow couple things in SELINUX 
using audit2allow.

So supply the exact OS and also if possible squid.conf(removing 
password, spaces,comments etc)

Eliezer

On 29/09/2015 16:34, Veiko Kukk wrote:
&gt;<i> On 24/09/15 03:00, Eliezer Croitoru wrote:
</I>&gt;&gt;<i> Since it's a security release I will not write an article this time.
</I>&gt;&gt;<i> But I am happy to release the new RPMs for squid cache 3.5.9.
</I>&gt;<i>
</I>&gt;<i> Since there are no new rpm-s in 3.4 branch after 3.4.10, I decided to
</I>&gt;<i> try/upgrade to 3.5.9. Squid does not start, fails with error message:
</I>&gt;<i>
</I>&gt;<i> FATAL: Ipc::Mem::Segment::create failed to
</I>&gt;<i> shm_open(/squid-cf__metadata.shm): (13) Permission denied
</I>&gt;<i>
</I>&gt;<i> Seems that something is wrong with SELinux rules:
</I>&gt;<i>
</I>&gt;<i> type=AVC msg=audit(1443532370.438:1986): avc:  denied  { write } for
</I>&gt;<i> pid=20771 comm=&quot;squid&quot; name=&quot;/&quot; dev=tmpfs ino=5734
</I>&gt;<i> scontext=unconfined_u:system_r:squid_t:s0
</I>&gt;<i> tcontext=system_u:object_r:tmpfs_t:s0 tclass=dir
</I>&gt;<i> type=SYSCALL msg=audit(1443532370.438:1986): arch=c000003e syscall=2
</I>&gt;<i> success=no exit=-13 a0=7ffeca42b530 a1=a0042 a2=180 a3=7ffeca42b2b0
</I>&gt;<i> items=0 ppid=20763 pid=20771 auid=502 uid=23 gid=23 euid=23 suid=0
</I>&gt;<i> fsuid=23 egid=23 sgid=23 fsgid=23 tty=pts1 ses=122 comm=&quot;squid&quot;
</I>&gt;<i> exe=&quot;/usr/sbin/squid&quot; subj=unconfined_u:system_r:squid_t:s0 key=(null)
</I>&gt;<i>
</I>&gt;<i> This was not case with 3.4.10.
</I>&gt;<i>
</I>&gt;<i> Best regards,
</I>&gt;<i> Veiko
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005748.html">[squid-users] Squid 3.5.9 RPM are available
</A></li>
	<LI>Next message (by thread): <A HREF="005773.html">[squid-users] Squid 3.5.9 RPM are available
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5750">[ date ]</a>
              <a href="thread.html#5750">[ thread ]</a>
              <a href="subject.html#5750">[ subject ]</a>
              <a href="author.html#5750">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
