<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid Queries
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Queries&In-Reply-To=%3C5704E78F.6040302%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010012.html">
   <LINK REL="Next"  HREF="010014.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid Queries</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Queries&In-Reply-To=%3C5704E78F.6040302%40treenet.co.nz%3E"
       TITLE="[squid-users] Squid Queries">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Apr  6 10:40:15 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010012.html">[squid-users] Squid Queries
</A></li>
        <LI>Next message (by thread): <A HREF="010014.html">[squid-users] how to use squid as a tcp forward proxy?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10032">[ date ]</a>
              <a href="thread.html#10032">[ thread ]</a>
              <a href="subject.html#10032">[ subject ]</a>
              <a href="author.html#10032">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 5/04/2016 4:53 p.m., Supriya Prasad wrote:
&gt;<i> Hi Team,
</I>&gt;<i> 
</I>&gt;<i> I had some queries regarding the squid configuration:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> We are using squid as a cache for our CWS proxy. As we are aware of the
</I>&gt;<i> max-forwards header, it decrements as it goes through each of the
</I>&gt;<i> proxies.Currently, our CWS proxy and squid both decrement the max forwards
</I>&gt;<i> header value when processing options requests. So if we send a max-forwards
</I>&gt;<i> header of 5 from the client side, by the time is comes out of squid it
</I>&gt;<i> shows 3. However as our proxy and squid is seen as 1 entity, we want the
</I>&gt;<i> decrement to happen only once.
</I>&gt;<i> 
</I>&gt;<i> I went through a number of squid documentation and nowhere it mentions how
</I>&gt;<i> to disable the max forward header from decrementing on squid. Could you
</I>&gt;<i> please let us know what is to be done?
</I>
RFC 7231:
&quot;
  Each intermediary that receives a TRACE or OPTIONS request containing
  a Max-Forwards header field MUST check and update its value prior to
  forwarding the request.
&quot;
... notice the 'MUST' means mandatory behaviour. There is a goood reason
for that.

Regardless of whether you conceptually describe CWS + Squid as the one
&quot;entity&quot;. They are in fact two different pieces of software. It is
entirely possible to create an infinite loop between just the two
pieces: CWS sends to Squid a request to send to CWS a request to send to
Squid a request to send to CWS ... and so on.
 The Via or Max-Forwards header are the only ways to protect against
that in regular traffic - and Via is optional.
 The Max-Forwards header is also the only way to target OPTIONS and
TRACE requests to diagnose the network behaviour in particular software
along the route. Adjusting it in undefined ways along the way will break
the protocol.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010012.html">[squid-users] Squid Queries
</A></li>
	<LI>Next message (by thread): <A HREF="010014.html">[squid-users] how to use squid as a tcp forward proxy?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10032">[ date ]</a>
              <a href="thread.html#10032">[ thread ]</a>
              <a href="subject.html#10032">[ subject ]</a>
              <a href="author.html#10032">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
