<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Debian jessie + squid 3.5.16 - Will not start.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Debian%20jessie%20%2B%20squid%203.5.16%20-%20Will%20not%20start.&In-Reply-To=%3C570884FB.9000708%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010073.html">
   <LINK REL="Next"  HREF="010083.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Debian jessie + squid 3.5.16 - Will not start.</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Debian%20jessie%20%2B%20squid%203.5.16%20-%20Will%20not%20start.&In-Reply-To=%3C570884FB.9000708%40treenet.co.nz%3E"
       TITLE="[squid-users] Debian jessie + squid 3.5.16 - Will not start.">squid3 at treenet.co.nz
       </A><BR>
    <I>Sat Apr  9 04:28:43 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010073.html">[squid-users] Debian jessie + squid 3.5.16 - Will not start.
</A></li>
        <LI>Next message (by thread): <A HREF="010083.html">[squid-users] query ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10099">[ date ]</a>
              <a href="thread.html#10099">[ thread ]</a>
              <a href="subject.html#10099">[ subject ]</a>
              <a href="author.html#10099">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 8/04/2016 3:58 a.m., Markey, Bruce wrote:
&gt;<i> I'm running debian Jessie.
</I>&gt;<i> Squid 3.5.16 compiled from source with the following:
</I>&gt;<i> 
</I>&lt;snip&gt;

&gt;<i> 
</I>&gt;<i> #allow/deny
</I>&gt;<i> http_access allow internal
</I>&gt;<i> http_access allow wireless
</I>
These...

&gt;<i> http_access deny !Safe_ports
</I>&gt;<i> http_access deny CONNECT !SSL_ports
</I>
... security rules do not do anything useful unless they are at the top
of the http_access rules.

&gt;<i> http_access deny all
</I>&gt;<i> 
</I>&gt;<i> #Bumping
</I>&gt;<i> acl step1 at_step SslBump1
</I>&gt;<i> acl step2 at_step SslBump2
</I>&gt;<i> acl step3 at_step SslBump3
</I>&gt;<i> 
</I>&gt;<i> ssl_bump peek all
</I>&gt;<i> ssl_bump splice all
</I>&gt;<i> 
</I>&gt;<i> sslproxy_capath /etc/ssl/certs
</I>&gt;<i> 
</I>&gt;<i> sslcrtd_program /usr/lib/squid3/ssl_crtd -s /etc/squid3/ssl_db -M 4MB
</I>&gt;<i> sslcrtd_children 5
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> logformat mine %&gt;a %[ui %[un [%tl] &quot;%rm %ru HTTP/%rv&quot; %ssl::&gt;sni %ssl::&gt;cert_subject %&gt;Hs %&lt;st %Ss:%Sh
</I>&gt;<i> 
</I>&gt;<i> #access_log syslog:daemon.info mine
</I>&gt;<i> access_log daemon:/var/log/squid3/access.log mine
</I>&gt;<i> 
</I>&gt;<i> #intercept
</I>&gt;<i> http_port 3128 intercept
</I>&gt;<i> https_port 3129 intercept ssl-bump cert=/etc/squid3/certs/squid.pem cafile=/etc/squid3/certs/squid.pem key=/etc/squid3/certs/squid.pem  generate-host-cer
</I>&gt;<i> tificates=on dynamic_cert_mem_cache_size=4MB sslflags=NO_SESSION_REUSE
</I>&gt;<i> 
</I>
&gt;<i> 
</I>&gt;<i> -I did initialize the ssl_db
</I>
Did you do so with the &quot;proxy&quot; user account privileges?

There is an open bug about that helper that when you run it as root it
creates the directory with root privileges and then can't use it when
run by Squid low-privilege account.


&gt;<i> -I did create certs
</I>&gt;<i> 
</I>&gt;<i> I'm simply trying to start via :  sudo squid   It throws no errors nothing.  The pid lives for a sec then dies. This is the only log message I get.
</I>&gt;<i> 
</I>&gt;<i> Apr  7 11:51:19 LNP-Proxy (squid-1): The ssl_crtd helpers are crashing too rapidly, need help!
</I>&gt;<i> 
</I>
Add the -d parameter to the helper command line for debug info about
what its doing.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010073.html">[squid-users] Debian jessie + squid 3.5.16 - Will not start.
</A></li>
	<LI>Next message (by thread): <A HREF="010083.html">[squid-users] query ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10099">[ date ]</a>
              <a href="thread.html#10099">[ thread ]</a>
              <a href="subject.html#10099">[ subject ]</a>
              <a href="author.html#10099">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
