<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] splash page + ubuntu 14.04 + squid 3.3.8
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20splash%20page%20%2B%20ubuntu%2014.04%20%2B%20squid%203.3.8&In-Reply-To=%3C570F58C5.4080104%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010153.html">
   <LINK REL="Next"  HREF="010162.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] splash page + ubuntu 14.04 + squid 3.3.8</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20splash%20page%20%2B%20ubuntu%2014.04%20%2B%20squid%203.3.8&In-Reply-To=%3C570F58C5.4080104%40treenet.co.nz%3E"
       TITLE="[squid-users] splash page + ubuntu 14.04 + squid 3.3.8">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Apr 14 08:45:58 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010153.html">[squid-users] splash page + ubuntu 14.04 + squid 3.3.8
</A></li>
        <LI>Next message (by thread): <A HREF="010162.html">[squid-users] splash page + ubuntu 14.04 + squid 3.3.8
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10156">[ date ]</a>
              <a href="thread.html#10156">[ thread ]</a>
              <a href="subject.html#10156">[ subject ]</a>
              <a href="author.html#10156">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 14/04/2016 5:03 p.m., rozi wrote:
&gt;<i> Hi
</I>&gt;<i> 
</I>&gt;<i> trying to set a splash page that popup once a day for the clients here is my
</I>&gt;<i> conf:
</I>&gt;<i> 
</I>&gt;<i> external_acl_type splash_page concurrency=100 ttl=10 %SRC
</I>&gt;<i> /usr/lib/squid3/ext_session_acl -a -T 60 -b /home/e987654654/sessions.db
</I>&gt;<i> acl existing_users external splash_page
</I>&gt;<i> http_access deny !existing_users
</I>&gt;<i> deny_info 511:splash.html Mynetwork
</I>&gt;<i> deny_info 511:splash.html existing_users
</I>&gt;<i> http_access allow Mynetwork
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> cant get it to work , in this conf example after 60 sec i get conecction
</I>&gt;<i> refuse for 10 sec and the splash page dont popup during the 10 sec 
</I>&gt;<i> 
</I>&gt;<i> Anyone can help me ?
</I>
You have two problems here:

1a) The -a parameter enables active mode sessions. Which means the
'existing_users' ACL (or another ACL matching an 'accept button' URL)
has to pass &quot;LOGIN&quot; to the helper for sessions to exist.

1b) The ACL 'MyNetwork' is not used to deny anything, so the deny_info
has nothing to do.


2) you do not seem to have any logic to identify when a particular
request will be user-visible.
 This is kind of important since modern browsers and OS perform a huge
amount of automated requests in the background. Or even things with XHR
scripts during user browsing.
None of which the user will ever see in 'page' format, but which can
screw up the system or web service behaviour of the recipient software.
That 511 is the right way to do this, but is a fairly new feature in
HTTP so a lot of software still dont handle it well.

HTH
Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010153.html">[squid-users] splash page + ubuntu 14.04 + squid 3.3.8
</A></li>
	<LI>Next message (by thread): <A HREF="010162.html">[squid-users] splash page + ubuntu 14.04 + squid 3.3.8
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10156">[ date ]</a>
              <a href="thread.html#10156">[ thread ]</a>
              <a href="subject.html#10156">[ subject ]</a>
              <a href="author.html#10156">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
