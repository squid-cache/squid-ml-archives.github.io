<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] High CPU usage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20High%20CPU%20usage&In-Reply-To=%3CCAL1kE9DAt%3DVBphGKywsE4-Yzy9pM2N5Ej_BwdJmh0C5LzzEm3Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010177.html">
   <LINK REL="Next"  HREF="010178.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] High CPU usage</H1>
    <B>Mohammad Sadegh Nasiri</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20High%20CPU%20usage&In-Reply-To=%3CCAL1kE9DAt%3DVBphGKywsE4-Yzy9pM2N5Ej_BwdJmh0C5LzzEm3Q%40mail.gmail.com%3E"
       TITLE="[squid-users] High CPU usage">ms.nasiri at gmail.com
       </A><BR>
    <I>Fri Apr 15 07:26:23 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010177.html">[squid-users] Access log to syslog
</A></li>
        <LI>Next message (by thread): <A HREF="010178.html">[squid-users] High CPU usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10174">[ date ]</a>
              <a href="thread.html#10174">[ thread ]</a>
              <a href="subject.html#10174">[ subject ]</a>
              <a href="author.html#10174">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

Does anyone knows why my squid cpu usage is 100%?

When it works fine:
Last 5 minutes:
sample_start_time = 1460357653.263150 (Mon, 11 Apr 2016 06:54:13 GMT)
sample_end_time = 1460357953.264761 (Mon, 11 Apr 2016 06:59:13 GMT)
client_http.requests = 1149.670493/sec
client_http.hits = 357.521413/sec
client_http.errors = 3.199983/sec
client_http.kbytes_in = 840.588819/sec
client_http.kbytes_out = 57427.721613/sec
client_http.all_median_svc_time = 0.150482 seconds
client_http.miss_median_svc_time = 0.288533 seconds
client_http.nm_median_svc_time = 0.000000 seconds
client_http.nh_median_svc_time = 0.108570 seconds
client_http.hit_median_svc_time = 0.000000 seconds
server.all.requests = 778.229154/sec
server.all.errors = 0.000000/sec
server.all.kbytes_in = 43018.655656/sec
server.all.kbytes_out = 705.229546/sec
server.http.requests = 773.162515/sec
server.http.errors = 0.000000/sec
server.http.kbytes_in = 42988.509152/sec
server.http.kbytes_out = 701.642899/sec
server.ftp.requests = 0.000000/sec
server.ftp.errors = 0.000000/sec
server.ftp.kbytes_in = 0.000000/sec
server.ftp.kbytes_out = 0.000000/sec
server.other.requests = 5.066639/sec
server.other.errors = 0.000000/sec
server.other.kbytes_in = 30.149838/sec
server.other.kbytes_out = 3.586647/sec
icp.pkts_sent = 0.000000/sec
icp.pkts_recv = 0.000000/sec
icp.queries_sent = 0.000000/sec
icp.replies_sent = 0.000000/sec
icp.queries_recv = 0.000000/sec
icp.replies_recv = 0.000000/sec
icp.replies_queued = 0.000000/sec
icp.query_timeouts = 0.000000/sec
icp.kbytes_sent = 0.000000/sec
icp.kbytes_recv = 0.000000/sec
icp.q_kbytes_sent = 0.000000/sec
icp.r_kbytes_sent = 0.000000/sec
icp.q_kbytes_recv = 0.000000/sec
icp.r_kbytes_recv = 0.000000/sec
icp.query_median_svc_time = 0.000000 seconds
icp.reply_median_svc_time = 0.000000 seconds
dns.median_svc_time = 0.000945 seconds
unlink.requests = 0.000000/sec
page_faults = 0.000000/sec
select_loops = 14570.791755/sec
select_fds = 27229.437111/se
average_select_fd_period = 0.000037/fd
median_select_fds = 0.000000
swap.outs = 309.515005/sec
swap.ins = 593.013482/sec
swap.files_cleaned = 0.000000/sec
aborted_requests = 50.606395/sec
syscalls.polls = 14570.791755/sec
syscalls.disk.opens = 160.005807/sec
syscalls.disk.closes = 320.351613/sec
syscalls.disk.reads = 3520.644427/sec
syscalls.disk.writes = 3868.092562/sec
syscalls.disk.seeks = 0.000000/sec
syscalls.disk.unlinks = 51.959721/sec
syscalls.sock.accepts = 1153.950470/sec
syscalls.sock.sockets = 478.724096/sec
syscalls.sock.connects = 469.890810/sec
syscalls.sock.binds = 478.724096/sec
syscalls.sock.closes = 1098.090770/sec
syscalls.sock.reads = 7904.917551/sec
syscalls.sock.writes = 18578.413567/sec
syscalls.sock.recvfroms = 106.432762/sec
syscalls.sock.sendtos = 51.699722/sec
cpu_time = 202.038000 seconds
wall_time = 300.001611 seconds
cpu_usage = 67.345638%

and when it use 100%
Last 5 minutes:
sample_start_time = 1460359453.520662 (Mon, 11 Apr 2016 07:24:13 GMT)
sample_end_time = 1460359753.537375 (Mon, 11 Apr 2016 07:29:13 GMT)
client_http.requests = 1124.314031/sec
client_http.hits = 341.530973/sec
client_http.errors = 3.309816/sec
client_http.kbytes_in = 772.766949/sec
client_http.kbytes_out = 44051.135911/sec
client_http.all_median_svc_time = 0.685775 second
client_http.miss_median_svc_time = 0.806511 seconds
client_http.nm_median_svc_time = 0.092188 seconds
client_http.nh_median_svc_time = 0.469653 seconds
client_http.hit_median_svc_time = 0.399283 seconds
server.all.requests = 747.688346/sec
server.all.errors = 0.000000/sec
server.all.kbytes_in = 33436.033945/sec
server.all.kbytes_out = 636.631200/sec
server.http.requests = 741.872004/sec
server.http.errors = 0.000000/sec
server.http.kbytes_in = 33395.426207/sec
server.http.kbytes_out = 630.834856/sec
server.ftp.requests = 0.000000/sec
server.ftp.errors = 0.000000/sec
server.ftp.kbytes_in = 0.000000/sec
server.ftp.kbytes_out = 0.000000/sec
server.other.requests = 5.816343/sec
server.other.errors = 0.000000/sec
server.other.kbytes_in = 40.611071/sec
server.other.kbytes_out = 5.796344/sec
icp.pkts_sent = 0.000000/sec
icp.pkts_recv = 0.000000/sec
icp.queries_sent = 0.000000/sec
icp.replies_sent = 0.000000/sec
icp.queries_recv = 0.000000/sec
icp.replies_recv = 0.000000/sec
icp.replies_queued = 0.000000/sec
icp.query_timeouts = 0.000000/sec
icp.kbytes_sent = 0.000000/sec
icp.kbytes_recv = 0.000000/sec
icp.q_kbytes_sent = 0.000000/sec
icp.r_kbytes_sent = 0.000000/sec
icp.q_kbytes_recv = 0.000000/sec
icp.r_kbytes_recv = 0.000000/sec
icp.query_median_svc_time = 0.000000 seconds
icp.reply_median_svc_time = 0.000000 seconds
dns.median_svc_time = 0.063638 seconds
unlink.requests = 0.000000/sec
page_faults = 0.000000/sec
select_loops = 68.769502/sec
select_fds = 17469.616768/sec
average_select_fd_period = 0.000057/f
median_select_fds = 253.007812
swap.outs = 309.809407/sec
swap.ins = 606.672869/sec
swap.files_cleaned = 0.000000/sec
aborted_requests = 64.026433/sec
syscalls.polls = 68.769502/sec
syscalls.disk.opens = 162.004308/sec
syscalls.disk.closes = 323.981951/sec
syscalls.disk.reads = 3170.013399/sec
syscalls.disk.writes = 3344.553675/sec
syscalls.disk.seeks = 0.000000/sec
syscalls.disk.unlinks = 52.953717/sec
syscalls.sock.accepts = 884.907368/sec
syscalls.sock.sockets = 488.359460/sec
syscalls.sock.connects = 479.986593/sec
syscalls.sock.binds = 488.359460/sec
syscalls.sock.closes = 1127.137207/sec
syscalls.sock.reads = 4520.671487/sec
syscalls.sock.writes = 13540.768977/sec
syscalls.sock.recvfroms = 129.662776/sec
syscalls.sock.sendtos = 50.653845/sec
cpu_time = 302.344000 seconds
wall_time = 300.016713 seconds
cpu_usage = 100.775719%

and you can see It was fine and after 30 min cpu_usage is 100.775719%
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160415/3b9e014e/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160415/3b9e014e/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010177.html">[squid-users] Access log to syslog
</A></li>
	<LI>Next message (by thread): <A HREF="010178.html">[squid-users] High CPU usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10174">[ date ]</a>
              <a href="thread.html#10174">[ thread ]</a>
              <a href="subject.html#10174">[ subject ]</a>
              <a href="author.html#10174">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
