<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Access log to syslog
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Access%20log%20to%20syslog&In-Reply-To=%3C5710B575.5020800%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010173.html">
   <LINK REL="Next"  HREF="010174.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Access log to syslog</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Access%20log%20to%20syslog&In-Reply-To=%3C5710B575.5020800%40treenet.co.nz%3E"
       TITLE="[squid-users] Access log to syslog">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Apr 15 09:33:41 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010173.html">[squid-users] Access log to syslog
</A></li>
        <LI>Next message (by thread): <A HREF="010174.html">[squid-users] High CPU usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10177">[ date ]</a>
              <a href="thread.html#10177">[ thread ]</a>
              <a href="subject.html#10177">[ subject ]</a>
              <a href="author.html#10177">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 15/04/2016 5:35 p.m., <A HREF="https://lists.squid-cache.org/listinfo/squid-users">stefand at korbitec.com</A> wrote:
&gt;<i> I'm trying to log multiple ACLs to syslog using squid 3.3.8 on CentOS 7
</I>&gt;<i> 
</I>&gt;<i> When I add the line :
</I>&gt;<i> 
</I>&gt;<i> access_log syslog:local4.info squid ACL1 ACL2 ACL3
</I>&gt;<i> 
</I>&gt;<i> Nothing gets logged to syslog
</I>&gt;<i> 
</I>&gt;<i> However when I change the line to :
</I>&gt;<i> 
</I>&gt;<i> access_log syslog:local4.info squid ACL1
</I>&gt;<i> 
</I>&gt;<i> It logs correctly, but just for ACL1 (as expected)
</I>&gt;<i> 
</I>&gt;<i> Should I then rather have the configuration file with the following lines:
</I>&gt;<i> 
</I>&gt;<i> access_log syslog:local4.info squid ACL1
</I>&gt;<i> access_log syslog:local4.info squid ACL2
</I>&gt;<i> access_log syslog:local4.info squid ACL3
</I>&gt;<i> 
</I>&gt;<i> Doesn't make sense to me as the documentation states (<A HREF="http://www.squid-cache.org/Versions/v3/3.3/cfgman/access_log.html">http://www.squid-cache.org/Versions/v3/3.3/cfgman/access_log.html</A>) :
</I>&gt;<i> 
</I>&gt;<i> access_log &lt;module&gt;:&lt;place&gt; [&lt;logformat name&gt; [acl acl ...]]
</I>&gt;<i> 
</I>
Any list of ACL conditions in a line of squid.conf like that are joined
with a boolean &quot;AND&quot; condition. All of them must be true for the action
being decided to happen.

In this case the action is to record a log line about the current
transaction.
* In your first non-working setup (ACL1 and ACL2 and ACL3) had to be
true for it to record.
* In your second setup only ACL1 had to be true for it to record.

If you have not met them already take a look at the all-of and any-of
ACL types which can be used to join simpler ACLs into a single test with
complex conditions - like having brackets in the boolean test.

You may need to upgrade your Squid to get those newer ACL types. You can
find details of newer Squid pckages for CentOS at
&lt;<A HREF="http://wiki.squid-cache.org/KnowledgeBase/CentOS">http://wiki.squid-cache.org/KnowledgeBase/CentOS</A>&gt;

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010173.html">[squid-users] Access log to syslog
</A></li>
	<LI>Next message (by thread): <A HREF="010174.html">[squid-users] High CPU usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10177">[ date ]</a>
              <a href="thread.html#10177">[ thread ]</a>
              <a href="subject.html#10177">[ subject ]</a>
              <a href="author.html#10177">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
