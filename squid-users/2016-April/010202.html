<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Not sure if reverse proxy is what I need
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Not%20sure%20if%20reverse%20proxy%20is%20what%20I%20need&In-Reply-To=%3C5713575B.1030909%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010182.html">
   <LINK REL="Next"  HREF="010183.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Not sure if reverse proxy is what I need</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Not%20sure%20if%20reverse%20proxy%20is%20what%20I%20need&In-Reply-To=%3C5713575B.1030909%40treenet.co.nz%3E"
       TITLE="[squid-users] Not sure if reverse proxy is what I need">squid3 at treenet.co.nz
       </A><BR>
    <I>Sun Apr 17 09:28:59 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010182.html">[squid-users] Not sure if reverse proxy is what I need
</A></li>
        <LI>Next message (by thread): <A HREF="010183.html">[squid-users] ntlm user in access.log
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10202">[ date ]</a>
              <a href="thread.html#10202">[ thread ]</a>
              <a href="subject.html#10202">[ subject ]</a>
              <a href="author.html#10202">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 16/04/2016 5:13 a.m., Renato wrote:
&gt;<i> Hi guys,
</I>&gt;<i> 
</I>&gt;<i> I'm not sure if squid is what I need, so I'll try to explain my
</I>&gt;<i> scenario to make it clear what I need:
</I>&gt;<i> 
</I>&gt;<i> I have lots of virtual machines, each one running a web service.
</I>&gt;<i> Those virtual machines are not exposed to the internet.
</I>&gt;<i> 
</I>&gt;<i> To access the virtual machines, I want to have a &quot;client database&quot;,
</I>&gt;<i> each client will have an username, a password and the IP address and
</I>&gt;<i> port number for the virtual machine, like this:
</I>&gt;<i> 
</I>&gt;<i> client1, pass_cli1, <A HREF="http://192.168.0.1:8081">http://192.168.0.1:8081</A>
</I>&gt;<i> client2, pass_cli2, <A HREF="http://192.168.0.1:8082">http://192.168.0.1:8082</A>
</I>&gt;<i> client3, pass_cli3, <A HREF="http://192.168.0.1:8083">http://192.168.0.1:8083</A>
</I>&gt;<i> client4, pass_cli4, <A HREF="http://192.168.0.2:8081">http://192.168.0.2:8081</A>
</I>&gt;<i> ...
</I>&gt;<i> 
</I>&gt;<i> What I'm thinking of doing is to let squid exposed to the internet,
</I>&gt;<i> with authentication.  When a client connects, a login/password is
</I>&gt;<i> asked.  If the login/pass matches one of the clients on the list,
</I>&gt;<i> squid will reverse proxy to the corresponding address on database.
</I>&gt;<i> 
</I>&gt;<i> Is it possible to achieve this only with squid or I need others tools too?
</I>
You will need some tool to export the database records into files
containing the cache_peer settings for each VM. One file per VM is
usually best so you can add/delete easily.

Make a directory where these config snippet files go. Only put
squid.conf snippets in there.

Use the &quot;include&quot; directive in squid.conf to pull in the directory
contents and have your DB tool trigger Squid to be reconfigured each
time it changes those files.

Use HTTP authentication rules in cache_peer_access to determine which VM
peer is accessible to each username to avoid needing to reconfigure each
time somebody logs in.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010182.html">[squid-users] Not sure if reverse proxy is what I need
</A></li>
	<LI>Next message (by thread): <A HREF="010183.html">[squid-users] ntlm user in access.log
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10202">[ date ]</a>
              <a href="thread.html#10202">[ thread ]</a>
              <a href="subject.html#10202">[ subject ]</a>
              <a href="author.html#10202">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
