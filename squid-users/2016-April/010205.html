<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Any problems with %ssl::&gt;sni in 3.5.16?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Any%20problems%20with%20%25ssl%3A%3A%3Esni%20in%203.5.16%3F&In-Reply-To=%3C57136A26.2060908%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010128.html">
   <LINK REL="Next"  HREF="010129.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Any problems with %ssl::&gt;sni in 3.5.16?</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Any%20problems%20with%20%25ssl%3A%3A%3Esni%20in%203.5.16%3F&In-Reply-To=%3C57136A26.2060908%40treenet.co.nz%3E"
       TITLE="[squid-users] Any problems with %ssl::&gt;sni in 3.5.16?">squid3 at treenet.co.nz
       </A><BR>
    <I>Sun Apr 17 10:49:10 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010128.html">[squid-users] Any problems with %ssl::&gt;sni in 3.5.16?
</A></li>
        <LI>Next message (by thread): <A HREF="010129.html">[squid-users] i have two question about https_port tproxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10205">[ date ]</a>
              <a href="thread.html#10205">[ thread ]</a>
              <a href="subject.html#10205">[ subject ]</a>
              <a href="author.html#10205">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 12/04/2016 5:52 p.m., Dan Charlesworth wrote:
&gt;<i> We have an External ACL Type with %ssl::&gt;sni and %URI
</I>&gt;<i> 
</I>&gt;<i> We get access log lines that record the %ssl::&gt;sni just fine, but the corresponding line sent to our external ACL is missing it.
</I>&gt;<i> 
</I>&gt;<i> For example, from the same request;
</I>&gt;<i> 
</I>&gt;<i> Log: 12/Apr/2016-15:42:47    608 10.0.1.60 TAG_NONE 200 0 CONNECT 23.111.9.31:443 code.jquery.com - peek - ORIGINAL_DST/23.111.9.31 - -
</I>&gt;<i> 
</I>&gt;<i> Line sent to Ext. ACL: 23.111.9.31:443 -
</I>&gt;<i> 
</I>&gt;<i> &#8212;
</I>&gt;<i> 
</I>&gt;<i> Not sure if many people on this list use external ACLs as much, but anyone encountered this?
</I>
&gt;<i>From the silence it would seem not. But most likely its not a very
</I>commonly used config setting yet.

It could be you are using the ACL just prior to the SNI being peeked at.
The ACL is pulling its value straight from the TCP connection state so
not even any temporary location involved that could be out of sync.

I dont recall there having been any significant changes to the external
ACL code since it went in. There may have been some changes that
affected it on the SSL-Bump side, but unlikely.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010128.html">[squid-users] Any problems with %ssl::&gt;sni in 3.5.16?
</A></li>
	<LI>Next message (by thread): <A HREF="010129.html">[squid-users] i have two question about https_port tproxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10205">[ date ]</a>
              <a href="thread.html#10205">[ thread ]</a>
              <a href="subject.html#10205">[ subject ]</a>
              <a href="author.html#10205">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
