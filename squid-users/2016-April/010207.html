<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 4: Cloudflare SSL connection problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%204%3A%20Cloudflare%20SSL%20connection%20problem&In-Reply-To=%3C1fa489b8-4193-5e3d-239a-e37f477dc098%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010204.html">
   <LINK REL="Next"  HREF="010208.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 4: Cloudflare SSL connection problem</H1>
    <B>Yuri Voinov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%204%3A%20Cloudflare%20SSL%20connection%20problem&In-Reply-To=%3C1fa489b8-4193-5e3d-239a-e37f477dc098%40gmail.com%3E"
       TITLE="[squid-users] Squid 4: Cloudflare SSL connection problem">yvoinov at gmail.com
       </A><BR>
    <I>Sun Apr 17 12:59:10 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010204.html">[squid-users] Squid 4: Cloudflare SSL connection problem
</A></li>
        <LI>Next message (by thread): <A HREF="010208.html">[squid-users] Squid 4: Cloudflare SSL connection problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10207">[ date ]</a>
              <a href="thread.html#10207">[ thread ]</a>
              <a href="subject.html#10207">[ subject ]</a>
              <a href="author.html#10207">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256
 


17.04.16 15:16, Amos Jeffries &#1087;&#1080;&#1096;&#1077;&#1090;:
&gt;<i> On 17/04/2016 4:55 a.m., Yuri Voinov wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> So.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Still has no ideas?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Only things I assume you probably already looked at:
</I>&gt;<i>
</I>&gt;<i> Maybe churn in the CA certificates. Linux and Windows distros have had
</I>&gt;<i> CA cert package updates happen in the past few weeks.
</I>Don't think so, Amos.
We are talking not about clients. We are talking about Squid. Which is
utilize own ca-bundle (in my case), which is got and updated from
Mozilla (heh, the only one place in the world with all CA's.... hehehe)
every week, and manually updated intermediate CA's file.

When I test connect with openssl with this CA - it returned 0 - i.e. no
errors, all CA's validated.
When I test connection with wget from proxy box - all ok, files
downloaded etc.etc.

And only from LAN these connections got NONE/503. IDK what does it mean.
There is not goes via cache_peer. There is not goes via any parent proxy.
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The ChaCha cipher you mentioned CloudFlare using should not be an issue
</I>&gt;<i> provided your SSL library is able to negotiate some other cipher to be
</I>Yep, this is not cipher issue. I've checked already.
&gt;<i>
</I>&gt;<i> used. So the cipher sets in your config is something else to look at.
</I>Also checked. No one cipher combinations not work on CF/Mozilla. Oh, it
works on all any sites, of course.
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Amos
</I>Still in doubt. IDK whats happening.
&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2
 
iQEcBAEBCAAGBQJXE4ieAAoJENNXIZxhPexGNAcIAMA+m5zFDEvxzR/Q0RWYuiWd
1bCK+7BtYCTUmqD+KAbpBWfWlbgp6e9t0O+G7yzelmvoUugoFqbeyqq6aJUKmW3T
/sN9hsEnBVh644K1U4WNS6UawhsypBYZXQ13UegWNmP/hw54/urrGCNxa2buRFck
8fbCy9ZY92HloWwEUpclsn/mJ2SuzMLLoBUFRji61OtFpgYXn+PHaACerPAYaF7W
JrOrcviQP5Bx1+JIdvbUHM9Q83xFeBXremf87CBAQg4f1fCCf2en24dc/Vj9v+aB
K5hbm7XLCVDmerkb1M3S2RTm8nv4Xx6S9MtyOgnEGO+Qj25FWWZxoqSOycpmqz0=
=lSAK
-----END PGP SIGNATURE-----

-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0x613DEC46.asc
Type: application/pgp-keys
Size: 2437 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160417/f710e70a/attachment.key">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160417/f710e70a/attachment.key</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010204.html">[squid-users] Squid 4: Cloudflare SSL connection problem
</A></li>
	<LI>Next message (by thread): <A HREF="010208.html">[squid-users] Squid 4: Cloudflare SSL connection problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10207">[ date ]</a>
              <a href="thread.html#10207">[ thread ]</a>
              <a href="subject.html#10207">[ subject ]</a>
              <a href="author.html#10207">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
