<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Never expire any object Squid configuration
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Never%20expire%20any%20object%20Squid%20configuration&In-Reply-To=%3C57172E90.9020204%40xvidservices.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010248.html">
   <LINK REL="Next"  HREF="010236.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Never expire any object Squid configuration</H1>
    <B>Veiko Kukk</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Never%20expire%20any%20object%20Squid%20configuration&In-Reply-To=%3C57172E90.9020204%40xvidservices.com%3E"
       TITLE="[squid-users] Never expire any object Squid configuration">vkukk at xvidservices.com
       </A><BR>
    <I>Wed Apr 20 07:24:00 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010248.html">[squid-users] Routing Internally And/Or Externally?
</A></li>
        <LI>Next message (by thread): <A HREF="010236.html">[squid-users] Never expire any object Squid configuration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10235">[ date ]</a>
              <a href="thread.html#10235">[ thread ]</a>
              <a href="subject.html#10235">[ subject ]</a>
              <a href="author.html#10235">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

We have a Squid between our server application and openstack swift 
backend in accel/reverse mode with store-id configuraton (to strip 
temporary authentication URL-s). We want that any object that has been 
stored in squid cache is never again fetched from source and never again 
checked if it is fresh. Well, never in this case could be one year.

Relevant section from current configuration:

refresh_pattern -i ^https:\/\/AUTH_.*squid.internal.* 526000 100% 526000 
override-expire ignore-reload ignore-no-store ignore-private store-stale 
max-stale=52

With this configuration, we still see lots of TCP_REFRESH_MODIFIED/200 
TCP_REFRESH_UNMODIFIED/200 and TCP_REFRESH_UNMODIFIED/304 in logs.

How must Squid be configured to completely disable any refreshes? Those 
objects never change after they have been created and we only want them 
to be pushed out from cache by cache replacement policy.

I read from old post 
<A HREF="http://www.squid-cache.org/mail-archive/squid-dev/201108/0029.html">http://www.squid-cache.org/mail-archive/squid-dev/201108/0029.html</A> that 
if client requests object without etag and server sends with etag, then 
Squid fetches object again. How to disable this?


Best regards,
Veiko

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010248.html">[squid-users] Routing Internally And/Or Externally?
</A></li>
	<LI>Next message (by thread): <A HREF="010236.html">[squid-users] Never expire any object Squid configuration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10235">[ date ]</a>
              <a href="thread.html#10235">[ thread ]</a>
              <a href="subject.html#10235">[ subject ]</a>
              <a href="author.html#10235">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
