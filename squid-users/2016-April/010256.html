<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] ssl_bump newbie troubles
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20ssl_bump%20newbie%20troubles&In-Reply-To=%3C571806AC.4010002%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010255.html">
   <LINK REL="Next"  HREF="010250.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] ssl_bump newbie troubles</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20ssl_bump%20newbie%20troubles&In-Reply-To=%3C571806AC.4010002%40measurement-factory.com%3E"
       TITLE="[squid-users] ssl_bump newbie troubles">rousskov at measurement-factory.com
       </A><BR>
    <I>Wed Apr 20 22:46:04 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010255.html">[squid-users] ssl_bump newbie troubles
</A></li>
        <LI>Next message (by thread): <A HREF="010250.html">[squid-users] ssl_bump newbie troubles
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10256">[ date ]</a>
              <a href="thread.html#10256">[ thread ]</a>
              <a href="subject.html#10256">[ subject ]</a>
              <a href="author.html#10256">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 04/20/2016 04:18 PM, Odhiambo Washington wrote:
&gt;<i> On 21 April 2016 at 00:11, Alex Rousskov wrote:
</I>&gt;<i> 
</I>&gt;<i>     On 04/20/2016 02:22 PM, Odhiambo Washington wrote:
</I>&gt;<i> 
</I>&gt;<i>     &gt; All I want is the ability to intercept SSL sites and control access to
</I>&gt;<i>     &gt; them using TIME ACLs. That's all.
</I>
You also want to serve custom errors over encrypted connections. That is
a huge addition to the above &quot;all&quot;.


&gt;<i>     If you are OK with terminating the prohibited connection (no
</I>&gt;<i>     error messages explaining company policy sent by Squid to your users!),
</I>&gt;<i>     then yes:
</I>&gt;<i> 
</I>&gt;<i>       ssl_bump terminate restricted_sites
</I>&gt;<i>       ssl_bump peek all
</I>&gt;<i>       ssl_bump splice all
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> What I would like is:
</I>&gt;<i> 
</I>&gt;<i> 1. that squid is able to 'see' that *userX* is trying to visit
</I>&gt;<i> <A HREF="https://www.facebook.com">https://www.facebook.com</A>
</I>&gt;<i> 2. but at that particular time (time ACL) *userX* is not allowed to go
</I>&gt;<i> to facebook.com &lt;<A HREF="http://facebook.com">http://facebook.com</A>&gt;, so squid denies access, throws a
</I>&gt;<i> default error on their browser
</I>
Serving a Squid-generated error over [what the browser believes is] a
secure connection to the _origin server_ requires bumping that
connection. Bumping (as opposed to splicing) implies installing company
root certificates and many other headaches.

In other words, your desire to immediately inform the user about the
denied access opens a Pandora box and adds a whole new order of
complexity (or two) to the project.

Instant gratification is very important these days, but there are
probably alternatives to serving error pages over bumped connections.
The simplest to implement might be something like sending a &quot;you have
been blocked&quot; email to the offending user (from the blocking ACL
script), but one can think of a lot fancier notification vectors than that.


&gt;<i> The time logic is already built in squid.conf. All that remains is just
</I>&gt;<i> intercept https traffic and let the time acls decide whether or not a
</I>&gt;<i> user can get there.
</I>
... and bump the supposedly secure connection to serve the error page if
the user cannot get there.


&gt;<i> So allow me to ask: in *ssl_bump terminate restricted_sites, * I am lost
</I>&gt;<i> as to what restricted_sites represent.
</I>
It is an ACL that represents your &quot;access control&quot; logic. It is too
boring/standard to discuss while we are talking about SslBump. I am sure
you can define it (yourself or with help from this mailing list).

If you allow me an analogy, discussing that ACL is like discussing the
color of the paint on the atomic bomb. I am sure you will find a nice
color scheme eventually, but I am more concerned about your users
staying alive after you drop it on them.


Alex.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010255.html">[squid-users] ssl_bump newbie troubles
</A></li>
	<LI>Next message (by thread): <A HREF="010250.html">[squid-users] ssl_bump newbie troubles
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10256">[ date ]</a>
              <a href="thread.html#10256">[ thread ]</a>
              <a href="subject.html#10256">[ subject ]</a>
              <a href="author.html#10256">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
