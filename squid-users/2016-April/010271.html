<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] High CPU Usage with ssl_bump
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20High%20CPU%20Usage%20with%20ssl_bump&In-Reply-To=%3C5718DA2B.50504%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010270.html">
   <LINK REL="Next"  HREF="010272.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] High CPU Usage with ssl_bump</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20High%20CPU%20Usage%20with%20ssl_bump&In-Reply-To=%3C5718DA2B.50504%40measurement-factory.com%3E"
       TITLE="[squid-users] High CPU Usage with ssl_bump">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Apr 21 13:48:27 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010270.html">[squid-users] High CPU Usage with ssl_bump
</A></li>
        <LI>Next message (by thread): <A HREF="010272.html">[squid-users] High CPU Usage with ssl_bump
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10271">[ date ]</a>
              <a href="thread.html#10271">[ thread ]</a>
              <a href="subject.html#10271">[ subject ]</a>
              <a href="author.html#10271">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 04/21/2016 07:18 AM, Odhiambo Washington wrote:
&gt;<i> Is is expected that  using ssl_bump results into high CPU usage all the
</I>&gt;<i> time?
</I>
Your question is impossible to answer in general: The CPU usage levels
depend on the amount of Squid traffic, the portion of SSL traffic in the
overall traffic mix, the portion of step1, step2, and step3 traffic in
the SSL traffic mix, hardware resources available to Squid, the number
of Squid workers, and many other factors.

&gt;<i> acl no_ssl_interception ssl::server_name ...
</I>&gt;<i> ssl_bump splice no_ssl_interception 
</I>&gt;<i> ssl_bump peek step1
</I>&gt;<i> ssl_bump stare step2
</I>
The above config continues to violate the specific advice given to you
previously: Do not mix &quot;peek&quot; and &quot;stare&quot; unless you have a very
specific need for doing so.


&gt;<i> I think I read somewhere that 'ssl_bump splice all&quot; is the default
</I>&gt;<i> behaviour, hence why I have commented it out. All I need is just become
</I>&gt;<i> a TCP tunnel without decrypting proxied traffic.
</I>
&quot;splice all&quot; is not the default in the latest Squids. The default there
is closer to something like &quot;bump if the last step was 'stare' and
splice otherwise&quot;. I do not remember what the default is in your Squid
version, but, as Amos has already said, relying on _any_ default in this
complex environment is the wrong approach.

Alex.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010270.html">[squid-users] High CPU Usage with ssl_bump
</A></li>
	<LI>Next message (by thread): <A HREF="010272.html">[squid-users] High CPU Usage with ssl_bump
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10271">[ date ]</a>
              <a href="thread.html#10271">[ thread ]</a>
              <a href="subject.html#10271">[ subject ]</a>
              <a href="author.html#10271">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
