<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] High CPU Usage with ssl_bump
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20High%20CPU%20Usage%20with%20ssl_bump&In-Reply-To=%3C571A69C6.8080802%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010301.html">
   <LINK REL="Next"  HREF="010277.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] High CPU Usage with ssl_bump</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20High%20CPU%20Usage%20with%20ssl_bump&In-Reply-To=%3C571A69C6.8080802%40measurement-factory.com%3E"
       TITLE="[squid-users] High CPU Usage with ssl_bump">rousskov at measurement-factory.com
       </A><BR>
    <I>Fri Apr 22 18:13:26 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010301.html">[squid-users] High CPU Usage with ssl_bump
</A></li>
        <LI>Next message (by thread): <A HREF="010277.html">[squid-users] Squid-4.0.9 and FreeBSD 9.3 / FreeBSD-10.3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10302">[ date ]</a>
              <a href="thread.html#10302">[ thread ]</a>
              <a href="subject.html#10302">[ subject ]</a>
              <a href="author.html#10302">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 04/22/2016 09:19 AM, Odhiambo Washington wrote:
&gt;<i> Can I terminate based on time? 
</I>
Yes. You can terminate based on any information except information
contained inside HTTP messages. Time is always available.
ssl::server_name will give you an approximation of what you call &quot;site&quot;.


&gt;<i> By just modifying the bits you wrote for me?
</I>
Technically yes (any configuration can be written &quot;by just modifying
some other configuration&quot;). In practice, the two directions
(splice/terminate versus bump/block) are so different that I recommend
the following approach instead:

1. Study the bits Amos gave you. Do not proceed until you understand
what each line means/does. Ask specific questions if needed. IMHO, if
you cannot complete this step, then you should not subject humans to
SslBump. Without this knowledge, there will be too much suffering, on
all sides.

2. Use the first template I gave you. Add your own rules so that Squid
terminates the connections you want it to terminate and splices
everything else. If you honestly complete step #1 above, then you should
be able to do this too (and, more importantly, you would be able to
troubleshoot deployment problems).

3. Test, deploy, and ask questions/file bug reports as needed.

Alex.



&gt;<i> On 17:45, Fri, Apr 22, 2016 Amos Jeffries wrote:
</I>&gt;<i> 
</I>&gt;<i>     On 23/04/2016 12:39 a.m., Odhiambo Washington wrote:
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt; So is it possible to achieve such a non-intrusive setup, but without
</I>&gt;<i>     &gt; 'terminate'?
</I>&gt;<i> 
</I>&gt;<i>     You declared the requirement &quot;Serve an error page.&quot;.
</I>&gt;<i> 
</I>&gt;<i>     That is intrusive.
</I>&gt;<i> 
</I>&gt;<i>     As Alex has said repeatedly:
</I>&gt;<i>       terminate or produce an error. Pick one.
</I>&gt;<i> 
</I>&gt;<i>     Amos
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010301.html">[squid-users] High CPU Usage with ssl_bump
</A></li>
	<LI>Next message (by thread): <A HREF="010277.html">[squid-users] Squid-4.0.9 and FreeBSD 9.3 / FreeBSD-10.3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10302">[ date ]</a>
              <a href="thread.html#10302">[ thread ]</a>
              <a href="subject.html#10302">[ subject ]</a>
              <a href="author.html#10302">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
