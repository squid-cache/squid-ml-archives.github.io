<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Using Squid with 1 NIC
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Using%20Squid%20with%201%20NIC&In-Reply-To=%3C4dffab89-7764-3c34-235e-cb17e8eaa988%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010319.html">
   <LINK REL="Next"  HREF="010321.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Using Squid with 1 NIC</H1>
    <B>Yuri Voinov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Using%20Squid%20with%201%20NIC&In-Reply-To=%3C4dffab89-7764-3c34-235e-cb17e8eaa988%40gmail.com%3E"
       TITLE="[squid-users] Using Squid with 1 NIC">yvoinov at gmail.com
       </A><BR>
    <I>Sat Apr 23 19:30:05 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010319.html">[squid-users] Using Squid with 1 NIC
</A></li>
        <LI>Next message (by thread): <A HREF="010321.html">[squid-users] Using Squid with 1 NIC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10320">[ date ]</a>
              <a href="thread.html#10320">[ thread ]</a>
              <a href="subject.html#10320">[ subject ]</a>
              <a href="author.html#10320">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256
 


24.04.16 1:26, Tom &#1087;&#1080;&#1096;&#1077;&#1090;:
&gt;<i> Sorry for not being more clearer on my first post. So I have a VMware environment running mostly
</I>CentOS 6 and multiple port groups:
&gt;<i>
</I>&gt;<i> Each port group it its own network segment.  Please see below:
</I>&gt;<i>
</I>&gt;<i> 192.168.1.0/24 &lt;<A HREF="http://192.168.1.0/24">http://192.168.1.0/24</A>&gt;
</I>&gt;<i> GW 192.168.1.1
</I>&gt;<i> proxy=192.168.1.2
</I>&gt;<i> CentOS servers in this network 192.168.1.0/24 &lt;<A HREF="http://192.168.1.0/24">http://192.168.1.0/24</A>&gt;
</I>&gt;<i>
</I>&gt;<i> 192.168.2.0/24 &lt;<A HREF="http://192.168.2.0/24">http://192.168.2.0/24</A>&gt;
</I>&gt;<i> GW 192.168.2.1
</I>&gt;<i> proxy=192.168.2.2
</I>&gt;<i> CentOS servers in this network 192.168.2.0/24 &lt;<A HREF="http://192.168.2.0/24">http://192.168.2.0/24</A>&gt;
</I>&gt;<i>
</I>&gt;<i> 192.168.3.0/24 &lt;<A HREF="http://192.168.3.0/24">http://192.168.3.0/24</A>&gt;
</I>&gt;<i> GW 192.168.3.1
</I>&gt;<i> proxy=192.168.3.2
</I>&gt;<i> CentOS servers in this network 192.168.3.0/24 &lt;<A HREF="http://192.168.3.0/24">http://192.168.3.0/24</A>&gt;
</I>&gt;<i>
</I>&gt;<i> Now I planned to install/configure a Squid proxy server (one NIC) in
</I>each network and all clients will be going through it.  Now these are
CentOS 6 servers, not workstations.  I need all servers in each network
segment to go through the proxy so traffic can be monitored for each
network.  Now would a transparent proxy help?? Hope this make sense.

Using a transparent proxy depends on whether it is possible to configure
clients to use a proxy or not.

In most cases, no one here recommends the use of a transparent proxy,
because there are a number of restrictions and high technical expertise
for quality implementation. Also the most fundamental restriction (but I
don't think so) is only possible to proxying HTTP/HTTPS.

&gt;<i>
</I>&gt;<i> On Sat, Apr 23, 2016 at 1:50 PM, Yuri Voinov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">yvoinov at gmail.com</A>
</I>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">yvoinov at gmail.com</A>&gt;&gt; wrote:
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I've based on op's diagram. We are know nothing about what he want.
</I>&gt;<i> Thelepaty on Bali on vacation.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 23.04.16 23:46, Antony Stone &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;<i> &gt; On Saturday 23 April 2016 at 19:12:56, Yuri Voinov wrote:
</I>&gt;<i>
</I>&gt;<i> &gt;&gt; <A HREF="http://wiki.squid-cache.org/ConfigExamples/Intercept">http://wiki.squid-cache.org/ConfigExamples/Intercept</A>
</I>&gt;<i>
</I>&gt;<i> &gt; Surely there's no reason to have to set up intercept mode (unless the
</I>&gt;<i> OP can't
</I>&gt;<i> &gt; configure the applications to use an explicit proxy)?
</I>&gt;<i>
</I>&gt;<i> &gt; I'm assuming the gateway 192.168.1.1 does outbound NAT to the Internet
</I>&gt;<i> &gt; (otherwise nothing would work), so all that's needed is to set up
</I>&gt;<i> Squid on
</I>&gt;<i> &gt; 192.168.1.2 to allow access from 192.168.1.0/24
</I>&lt;<A HREF="http://192.168.1.0/24">http://192.168.1.0/24</A>&gt;, with a default
&gt;<i> gateway of
</I>&gt;<i> &gt; 192.168.1.1, and then configure each of the 192.168.1.x client
</I>&gt;<i> machines to use
</I>&gt;<i> &gt; 192.168.1.2:3128 &lt;<A HREF="http://192.168.1.2:3128">http://192.168.1.2:3128</A>&gt; as their proxy server?
</I>&gt;<i>
</I>&gt;<i> &gt;&gt; 23.04.16 23:08, Tom Ku &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;<i> &gt;&gt;&gt; Hi All,
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; I know this question has been beaten to death but I can't seem to find
</I>&gt;<i> &gt;&gt;&gt; any answers via google.  So i'm trying to set up a Squid proxy for my
</I>&gt;<i> &gt;&gt;&gt; VMware infrastructure.  I have multiple port groups networks and I
</I>plan
&gt;<i> &gt;&gt;&gt; to put a Squid server in each port group to monitor network/internet
</I>&gt;<i> &gt;&gt;&gt; traffic.  So I would like my setup like this:
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; 192.168.1.1 - Gateway
</I>&gt;<i> &gt;&gt;&gt; ^
</I>&gt;<i> &gt;&gt;&gt; l
</I>&gt;<i> &gt;&gt;&gt; l
</I>&gt;<i> &gt;&gt;&gt; l
</I>&gt;<i> &gt;&gt;&gt; Squid Proxy - 192.168.1.2)
</I>&gt;<i> &gt;&gt;&gt; ^
</I>&gt;<i> &gt;&gt;&gt; l
</I>&gt;<i> &gt;&gt;&gt; l
</I>&gt;<i> &gt;&gt;&gt; l
</I>&gt;<i> &gt;&gt;&gt; VMs (clients - 192.168.1.x/24)
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Now i can only have 1 NIC on the Squid server.  I've read that
</I>&gt;<i> &gt;&gt;&gt; iptables will probably have to be configured.  Any help would be
</I>&gt;<i> &gt;&gt;&gt; appreciated.
</I>&gt;<i>
</I>&gt;<i> &gt; I think one important thing you have missed out is why you need to use
</I>&gt;<i> Squid
</I>&gt;<i> &gt; at all in such a setup?  What are you trying to achieve by
</I>&gt;<i> implementing it,
</I>&gt;<i> &gt; instead of just giving all clients direct access to the Internet?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; Antony.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     _______________________________________________
</I>&gt;<i>     squid-users mailing list
</I>&gt;<i>     <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
&gt;<i>     <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2
 
iQEcBAEBCAAGBQJXG809AAoJENNXIZxhPexG18cH/3AXP3mwu/lAmNdTru8rbPT1
iStds/GKw9BOTebKRMtdkOB9F5kBqYSVugksXwAKbOjrisMC0d69iA9ovocUvQiY
DpsaZHybtwZYnSc8TO+hKgI5U4DGYFsBIYudDPyRlLIj6iluCRziHjetyQ2iMHru
d9KNZiQGMMBTwjPyI+YDP4IVYuE8BGyEzlYSib4vAYb1nQAsMyX0tElrfvzmZB4h
DaeKbJlyK7HdsaSZMFR+hz3CNW0uHzsTxchrW6lXPBkFsU25tcwuRhE1Rfh2i0UQ
MqHUIzwTqNIvmIFbKkbQeLXbIPFUDNWtAeOBKy/XkKCiIZJJ0fm42g/5oFwaIas=
=bfyf
-----END PGP SIGNATURE-----

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160424/a45d09e2/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160424/a45d09e2/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0x613DEC46.asc
Type: application/pgp-keys
Size: 2437 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160424/a45d09e2/attachment.key">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160424/a45d09e2/attachment.key</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010319.html">[squid-users] Using Squid with 1 NIC
</A></li>
	<LI>Next message (by thread): <A HREF="010321.html">[squid-users] Using Squid with 1 NIC
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10320">[ date ]</a>
              <a href="thread.html#10320">[ thread ]</a>
              <a href="subject.html#10320">[ subject ]</a>
              <a href="author.html#10320">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
