<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Logging ACL that triggered denied access with http_access
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Logging%20ACL%20that%20triggered%20denied%20access%20with%0A%20http_access&In-Reply-To=%3C571E639F.2010507%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010339.html">
   <LINK REL="Next"  HREF="010348.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Logging ACL that triggered denied access with http_access</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Logging%20ACL%20that%20triggered%20denied%20access%20with%0A%20http_access&In-Reply-To=%3C571E639F.2010507%40treenet.co.nz%3E"
       TITLE="[squid-users] Logging ACL that triggered denied access with http_access">squid3 at treenet.co.nz
       </A><BR>
    <I>Mon Apr 25 18:36:15 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010339.html">[squid-users] Logging ACL that triggered denied access with http_access
</A></li>
        <LI>Next message (by thread): <A HREF="010348.html">[squid-users] Logging in squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10343">[ date ]</a>
              <a href="thread.html#10343">[ thread ]</a>
              <a href="subject.html#10343">[ subject ]</a>
              <a href="author.html#10343">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 26/04/2016 3:51 a.m., Stephen Borrill wrote:
&gt;<i> Is there a way to log which ACL caused a block with http_access? This
</I>&gt;<i> information is present for deny_info to use, but I cannot see a entry I
</I>&gt;<i> can add to logformat to present such a thing in a custom log format (if
</I>&gt;<i> using an external acl helper, you can spoof something up with the et and
</I>&gt;<i> ea formats).
</I>&gt;<i> 
</I>
There is no single ACL which does so. Even if you configure only one ACL
name per access control line in all access controls of squid.conf it is
sequences of ACLs both matching and non-matching (across multiple access
control types) which lead to a particular denial *line* happening.

The deny_info is not logging any single one ACL that did blocking. It is
logging the ACL name to which the deny_info action is attached. Same for
the external_acl_type %ACL parameter displaying the ACL it has been
called on.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010339.html">[squid-users] Logging ACL that triggered denied access with http_access
</A></li>
	<LI>Next message (by thread): <A HREF="010348.html">[squid-users] Logging in squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10343">[ date ]</a>
              <a href="thread.html#10343">[ thread ]</a>
              <a href="subject.html#10343">[ subject ]</a>
              <a href="author.html#10343">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
