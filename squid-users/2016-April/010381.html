<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Using dont_verify_peer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Using%20dont_verify_peer&In-Reply-To=%3C2B77BF184EAC2F43BB9FC908954D8B12670BCBCB%40ex4.lnpnews.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010379.html">
   <LINK REL="Next"  HREF="010374.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Using dont_verify_peer</H1>
    <B>Markey, Bruce</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Using%20dont_verify_peer&In-Reply-To=%3C2B77BF184EAC2F43BB9FC908954D8B12670BCBCB%40ex4.lnpnews.com%3E"
       TITLE="[squid-users] Using dont_verify_peer">bmarkey at steinmancommunications.com
       </A><BR>
    <I>Fri Apr 29 17:47:38 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010379.html">[squid-users] Using dont_verify_peer
</A></li>
        <LI>Next message (by thread): <A HREF="010374.html">[squid-users] Block VPN access like hola.org ,ultrasurf
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10381">[ date ]</a>
              <a href="thread.html#10381">[ thread ]</a>
              <a href="subject.html#10381">[ subject ]</a>
              <a href="author.html#10381">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ok that makes more sense now. Thanks to everyone for the tips.  I'm going to work on this over the next few days and see where I end up. 



Bruce Markey | Network Security Analyst
STEINMAN COMMUNICATIONS
717.291.8758&#160;(o) |&#160;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">bmarkey at steinmancommunications.com</A>
8 West King St | PO Box 1328, Lancaster, PA 17608-1328

-----Original Message-----
From: Alex Rousskov [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>] 
Sent: Friday, April 29, 2016 11:13 AM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Cc: Markey, Bruce &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">bmarkey at steinmancommunications.com</A>&gt;
Subject: Re: [squid-users] Using dont_verify_peer

On 04/28/2016 02:32 PM, Markey, Bruce wrote:

&gt;<i> I&#8217;ve been having to actually remove folks from the proxy so they could work.
</I>&gt;<i> I can&#8217;t deny users access to the sites they need.
</I>&gt;<i> all I really wanted was to keep stats on sites visited.
</I>
Yours and many other passive monitoring use cases call for a non-intrusive or &quot;stealth&quot; splice. No TLS version enforcement, no [fatal] certificate validation errors, no errors returned to the user, just domain name logging and splicing. Supporting this stealthy mode requires a lot of work, and there is currently no sponsor to get us all the way to that goal, but I am optimistic that we will eventually get there.

The automated certificate fetching (bug #4305) still needs to be supported, of course. It is a separate issue.

Meanwhile, besides manually adding untrusted certificates as have been recommended by others, consider limiting peeking to step1 [in some cases]. This way, Squid will not see and validate the server certificate. If most of your traffic has SNI, and users are not trying to defeat your monitoring, then the logs may still contain enough info to produce the stats you want, even without seeing certificates.


HTH,

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010379.html">[squid-users] Using dont_verify_peer
</A></li>
	<LI>Next message (by thread): <A HREF="010374.html">[squid-users] Block VPN access like hola.org ,ultrasurf
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10381">[ date ]</a>
              <a href="thread.html#10381">[ thread ]</a>
              <a href="subject.html#10381">[ subject ]</a>
              <a href="author.html#10381">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
