<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] different results every time
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20different%20results%20every%20time&In-Reply-To=%3C01c501d1ec83%24a1011a50%24e3034ef0%24%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011754.html">
   <LINK REL="Next"  HREF="011757.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] different results every time</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20different%20results%20every%20time&In-Reply-To=%3C01c501d1ec83%24a1011a50%24e3034ef0%24%40ngtech.co.il%3E"
       TITLE="[squid-users] different results every time">eliezer at ngtech.co.il
       </A><BR>
    <I>Tue Aug  2 06:03:45 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011754.html">[squid-users] different results every time
</A></li>
        <LI>Next message (by thread): <A HREF="011757.html">[squid-users] different results every time
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11755">[ date ]</a>
              <a href="thread.html#11755">[ thread ]</a>
              <a href="subject.html#11755">[ subject ]</a>
              <a href="author.html#11755">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Sam,

 

&gt;<i>From what I understand it seems that your expectation doesn't meet the reality but I am unsure yet.
</I>
It seems that the goal is to fetch and save everything to disk and from disk, right?

 

During the time that your clients and proxy are fetching the object using squid, you cannot serve this &quot;in-transit&quot; content to other clients.

Collapsed Forwarding feature of squid should satisfy your use case but depends on the size of the object it might not be the right choice for you.

What objects size are we talking about?

 

Eliezer

 

----

Eliezer Croitoru &lt;<A HREF="http://ngtech.co.il/lmgtfy/">http://ngtech.co.il/lmgtfy/</A>&gt; 
Linux System Administrator
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>



 

From: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On Behalf Of Sam M
Sent: Tuesday, August 2, 2016 8:43 AM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: [squid-users] different results every time

 

Hi, 

I'm querying lots of files through 4 cache servers connected through parent hierarchy. I clean all the caches before I start and then I query the files again in the same exact order. Weirdly, every time I check the logs, I see a different cache served a file compared with the previous test. The query process is done through a python script that uses wget through a proxy to the cache, hence the query process is really fast. 

Interestingly, if I put a delay of 1 second between each query, the result will be stable and same every time I run the script. 

Following a snippet from the config file after changing it too many times to make it re-produce the same results yet, that didn't help: 
cache_dir ufs /var/spool/squid 9 16 256
cache_mem 0 MB
memory_pools off
cache_swap_low 100
cache_swap_high 100
maximum_object_size_in_memory 0 KB
cache_replacement_policy lru
range_offset_limit 0
quick_abort_min 0 KB
quick_abort_max 0 KB

 

Can someone shed some light on the issue and how to fix it please?

Thanks, 

Sam 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160802/3a267301/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160802/3a267301/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 11308 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160802/3a267301/attachment.png">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160802/3a267301/attachment.png</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011754.html">[squid-users] different results every time
</A></li>
	<LI>Next message (by thread): <A HREF="011757.html">[squid-users] different results every time
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11755">[ date ]</a>
              <a href="thread.html#11755">[ thread ]</a>
              <a href="subject.html#11755">[ subject ]</a>
              <a href="author.html#11755">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
