<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid performance not able to drive a 1Gbps internet	link
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20performance%20not%20able%20to%20drive%20a%201Gbps%20internet%0A%09link&In-Reply-To=%3C57A158F1.6070909%40it.alliedpress.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011765.html">
   <LINK REL="Next"  HREF="011760.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid performance not able to drive a 1Gbps internet	link</H1>
    <B>Paul van Tuel</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20performance%20not%20able%20to%20drive%20a%201Gbps%20internet%0A%09link&In-Reply-To=%3C57A158F1.6070909%40it.alliedpress.co.nz%3E"
       TITLE="[squid-users] Squid performance not able to drive a 1Gbps internet	link">paul at it.alliedpress.co.nz
       </A><BR>
    <I>Wed Aug  3 02:37:37 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011765.html">[squid-users] Recommended Multi-CPU Configuration
</A></li>
        <LI>Next message (by thread): <A HREF="011760.html">[squid-users] Squid performance not able to drive a 1Gbps internet link
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11759">[ date ]</a>
              <a href="thread.html#11759">[ thread ]</a>
              <a href="subject.html#11759">[ subject ]</a>
              <a href="author.html#11759">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,
We've been running Squid for many years. Recently we upgraded our 
internet link to a 1Gbps link, but we are finding that squid is not able 
to drive this link to its full potential (previous links have been 
30Mbps or 100Mbps).
Currently running squid 3.5.1, but have tried 3.4, 3.3, 3.2 versions too.

Upload speeds from the server (without using the local proxy) to the 
internet are 200-300Mbps
Download speeds from the server (without using the local proxy) to the 
internet are 300-600Mbps (the link is not guaranteed).

If we use squid (or tinyproxy) to upload a file the upload speed is 
varies from 15-50Mbps.
If we use squid (or tinyproxy) to download a file from the internet, the 
speeds varies from 80-115Mbps.

We have used various combinations of hardware:
* Dell Power Edge T300, 2950 with SSD or SAS disks. Both using 
bare-metal or VMWare ESXi. Quad-core 2.6GHz Xeon processors with 8G or 
16G RAM
* We have used windows 7 Pro, Ubuntu, Centos 6, Centos 7 each as 
bare-metal and as VM under ESXi.
* We have used a white box (Asus motherboard with 1Gbps NIC, i7, 16G 
RAM) with each of the above OSes in bare-metal installations.

Squid configuration has basically been the out-of-the-box sample file 
with no authentication enabled. Only one user testing the performance of 
the squid proxy. The server is pretty much idle.

Each time the result is the same - if we go direct to the internet 
without using the local proxy the speed is as we would expect. If we use 
the local proxy, the speed drops significantly.
Is this expected behaviour? Or is there something we can do to speed 
up/tune squid's performance? I would be expecting squid to utilise the 
full bandwidth available (similar to what the server can download if you 
do not use a proxy).


Thank you
Paul.




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011765.html">[squid-users] Recommended Multi-CPU Configuration
</A></li>
	<LI>Next message (by thread): <A HREF="011760.html">[squid-users] Squid performance not able to drive a 1Gbps internet link
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11759">[ date ]</a>
              <a href="thread.html#11759">[ thread ]</a>
              <a href="subject.html#11759">[ subject ]</a>
              <a href="author.html#11759">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
