<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid performance not able to drive a 1Gbps internet link
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20performance%20not%20able%20to%20drive%20a%201Gbps%0A%20internet%20link&In-Reply-To=%3Ce49795c6-26a5-c7b9-1167-3eb26713dd56%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011766.html">
   <LINK REL="Next"  HREF="011777.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid performance not able to drive a 1Gbps internet link</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20performance%20not%20able%20to%20drive%20a%201Gbps%0A%20internet%20link&In-Reply-To=%3Ce49795c6-26a5-c7b9-1167-3eb26713dd56%40treenet.co.nz%3E"
       TITLE="[squid-users] Squid performance not able to drive a 1Gbps internet link">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Aug  3 13:27:12 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011766.html">[squid-users] Squid performance not able to drive a 1Gbps internet link
</A></li>
        <LI>Next message (by thread): <A HREF="011777.html">[squid-users] Squid performance not able to drive a 1Gbps internet link
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11768">[ date ]</a>
              <a href="thread.html#11768">[ thread ]</a>
              <a href="subject.html#11768">[ subject ]</a>
              <a href="author.html#11768">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 3/08/2016 9:45 p.m., Marcus Kool wrote:
&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On 08/03/2016 12:30 AM, Amos Jeffries wrote:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> If thats not fast enough, you may also wish to patch in a larger value
</I>&gt;&gt;<i> for HTTP_REQBUF_SZ in src/defines.h to 64KB with a matching incease to
</I>&gt;&gt;<i> read_ahead_gap in squid.conf. That has had some mixed results though,
</I>&gt;&gt;<i> faster traffic, but also some assertions being hit.
</I>&gt;<i> 
</I>&gt;<i> I remember the thread about increasing the request buffer to 64K and it
</I>&gt;<i> looked so promising.
</I>&gt;<i> Is there any evidence of setting HTTP_REQBUF_SZ to 16K is stable in 3.5.x?
</I>&gt;<i> 
</I>
It has not had much testing other than Nathan's use, so I'm a bit
hesitant to call it stable. But just raising the 4KB limit a bit to 64K
or less should not have much effect negative effect other than extra RAM
per transaction for buffering (bumped x8 from 256KB per client
connection to 2MB).

We got a bit ambitious and made the main buffers dynamic and effectively
unlimited for Squid-4. But that hit an issue, so has been pulled out
while Nathan figures out how to avoid it.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011766.html">[squid-users] Squid performance not able to drive a 1Gbps internet link
</A></li>
	<LI>Next message (by thread): <A HREF="011777.html">[squid-users] Squid performance not able to drive a 1Gbps internet link
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11768">[ date ]</a>
              <a href="thread.html#11768">[ thread ]</a>
              <a href="subject.html#11768">[ subject ]</a>
              <a href="author.html#11768">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
