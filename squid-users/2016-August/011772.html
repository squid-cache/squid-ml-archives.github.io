<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid performance not able to drive a 1Gbps internet link
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20performance%20not%20able%20to%20drive%20a%201Gbps%0A%20internet%20link&In-Reply-To=%3C3f248c59-67d4-2a84-359a-004de81b4d67%40cinbesa.com.br%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011777.html">
   <LINK REL="Next"  HREF="011785.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid performance not able to drive a 1Gbps internet link</H1>
    <B>Heiler Bemerguy</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20performance%20not%20able%20to%20drive%20a%201Gbps%0A%20internet%20link&In-Reply-To=%3C3f248c59-67d4-2a84-359a-004de81b4d67%40cinbesa.com.br%3E"
       TITLE="[squid-users] Squid performance not able to drive a 1Gbps internet link">heiler.bemerguy at cinbesa.com.br
       </A><BR>
    <I>Wed Aug  3 14:32:40 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011777.html">[squid-users] Squid performance not able to drive a 1Gbps internet link
</A></li>
        <LI>Next message (by thread): <A HREF="011785.html">[squid-users] Squid performance not able to drive a 1Gbps internet link
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11772">[ date ]</a>
              <a href="thread.html#11772">[ thread ]</a>
              <a href="subject.html#11772">[ subject ]</a>
              <a href="author.html#11772">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I think it doesn't really matter how much squid sets its default buffer. 
The linux kernel will upscale to the maximum set by the third option. 
(and the TCP Window Size will follow that)

net.ipv4.tcp_wmem = 1024 32768 8388608
net.ipv4.tcp_rmem = 1024 32768 8388608


-- 
Best Regards,

Heiler Bemerguy
Network Manager - CINBESA
55 91 98151-4894/3184-1751


Em 03/08/2016 06:45, Marcus Kool escreveu:
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 08/03/2016 12:30 AM, Amos Jeffries wrote:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> If thats not fast enough, you may also wish to patch in a larger value
</I>&gt;&gt;<i> for HTTP_REQBUF_SZ in src/defines.h to 64KB with a matching incease to
</I>&gt;&gt;<i> read_ahead_gap in squid.conf. That has had some mixed results though,
</I>&gt;&gt;<i> faster traffic, but also some assertions being hit.
</I>&gt;<i>
</I>&gt;<i> I remember the thread about increasing the request buffer to 64K and it
</I>&gt;<i> looked so promising.
</I>&gt;<i> Is there any evidence of setting HTTP_REQBUF_SZ to 16K is stable in 
</I>&gt;<i> 3.5.x?
</I>&gt;<i>
</I>&gt;<i> Marcus
</I>&gt;<i>
</I>&gt;&gt;<i> You may find that memory becomes your bottleneck at higher speeds.
</I>&gt;&gt;<i> 8-16GB sounds like a lot for most uses, but when you have enough
</I>&gt;&gt;<i> connections active to drive Gbps (with 4-6x 64KB I/O buffers) there are
</I>&gt;&gt;<i> is lot of parallel pressures on the RAM.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Amos
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011777.html">[squid-users] Squid performance not able to drive a 1Gbps internet link
</A></li>
	<LI>Next message (by thread): <A HREF="011785.html">[squid-users] Squid performance not able to drive a 1Gbps internet link
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11772">[ date ]</a>
              <a href="thread.html#11772">[ thread ]</a>
              <a href="subject.html#11772">[ subject ]</a>
              <a href="author.html#11772">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
