<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Seeking insight into zeros, negative values in log: 2.6.STABLE18
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Seeking%20insight%20into%20zeros%2C%0A%20negative%20values%20in%20log%3A%202.6.STABLE18&In-Reply-To=%3C978e7df7-6c34-0577-973c-129badb82d84%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011791.html">
   <LINK REL="Next"  HREF="011798.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Seeking insight into zeros, negative values in log: 2.6.STABLE18</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Seeking%20insight%20into%20zeros%2C%0A%20negative%20values%20in%20log%3A%202.6.STABLE18&In-Reply-To=%3C978e7df7-6c34-0577-973c-129badb82d84%40treenet.co.nz%3E"
       TITLE="[squid-users] Seeking insight into zeros, negative values in log: 2.6.STABLE18">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Aug  4 11:34:47 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011791.html">[squid-users] Seeking insight into zeros,	negative values in log: 2.6.STABLE18
</A></li>
        <LI>Next message (by thread): <A HREF="011798.html">[squid-users] Seeking insight into zeros,	negative values in log: 2.6.STABLE18
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11794">[ date ]</a>
              <a href="thread.html#11794">[ thread ]</a>
              <a href="subject.html#11794">[ subject ]</a>
              <a href="author.html#11794">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 4/08/2016 9:52 p.m., Henry S. Thompson wrote:
&gt;<i> Amos Jeffries writes:
</I>&gt;<i> 
</I>&gt;&gt;<i> On 4/08/2016 2:36 a.m., Henry S. Thompson wrote:
</I>&gt;&gt;&gt;<i> I'm trying to do some summary statistics based on log files from our
</I>&gt;&gt;&gt;<i> 2.6.STABLE18 setup.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Please upgrade. The current 3.5.20 release can do everything that
</I>&gt;&gt;<i> Squid-2.6 could do, and a lot more useful stuff besides.
</I>&gt;<i> 
</I>&gt;<i> I'd love to, but it's out of my hands, much higher up :-(.
</I>&gt;<i> 
</I>&gt;<i> Thanks for your help below.
</I>&gt;<i> 
</I>&gt;&gt;&gt;<i>  2) Leaving aside those cases, I see a modest handful (1 in 7000) of 0
</I>&gt;&gt;&gt;<i>     values in the size field, e.g.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     1402741879.726 114 ... TCP_MISS/200 0 GET <A HREF="http://...">http://...</A> DIRECT/... image/gif
</I>&gt;&gt;&gt;<i>     1402771557.693 176 ... TCP_HIT/200 0 GET <A HREF="http://...">http://...</A> NONE/- image/gif
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     How should these be understood?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> A response with no body payload. It happens. Usually with &quot;web bug&quot; type
</I>&gt;&gt;<i> images used for tracking.
</I>&gt;&gt;<i> Or maybe the image was something like a captcha and the script producing
</I>&gt;&gt;<i> it crashed with no data sent.
</I>&gt;<i> 
</I>&gt;<i> But documentation claims size field includes headers, and clearly
</I>&gt;<i> (image/gif) at least a Content-type header was sent...
</I>
Nope. The reply message header (maybe more, or not) was received from
the server but not sent to the client. The second case it only got as
far as loading from disk and not yet sending.

At the lowest level it was likely the attempt to write(2) those reply
details to the client that detected the connection was closed/aborted
already by the other end.

&gt;<i> 
</I>&gt;&gt;&gt;<i>  3) I'm seeing very small numbers (1 in 100000) of negative durations, e.g.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>     1402744620.389 -70 ... TCP_MISS/200 1882 GET <A HREF="http://...">http://...</A> DIRECT/... text/xml
</I>&gt;&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i>     How should these be understood?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The system clock on your machine went backwards between the request
</I>&gt;&gt;<i> arriving and the response being completely sent. Check for issues in
</I>&gt;&gt;<i> your NTP setup.
</I>&gt;<i> 
</I>&gt;<i> 1000s of times a day?  Seems . . . unlikely.  But I'll try to get the
</I>&gt;<i> sys admin people responsible to investigate.
</I>
Squid's simply doing a time fetch from the kernel and subtracting
Start-time from End-time to get a negative.
Note that its on the scale of ~100 milliseconds.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011791.html">[squid-users] Seeking insight into zeros,	negative values in log: 2.6.STABLE18
</A></li>
	<LI>Next message (by thread): <A HREF="011798.html">[squid-users] Seeking insight into zeros,	negative values in log: 2.6.STABLE18
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11794">[ date ]</a>
              <a href="thread.html#11794">[ thread ]</a>
              <a href="subject.html#11794">[ subject ]</a>
              <a href="author.html#11794">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
