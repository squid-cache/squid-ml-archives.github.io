<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] HSTS and MOZILLA_PKIX_ERROR_V1_CERT_USED_AS_CA
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20HSTS%20and%20MOZILLA_PKIX_ERROR_V1_CERT_USED_AS_CA&In-Reply-To=%3CCA%2BEQfqEHOKOcQ9HTLEhD%2BXZinZT6A7OzE5oe_iFh8s9njfgU6A%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011842.html">
   <LINK REL="Next"  HREF="011846.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] HSTS and MOZILLA_PKIX_ERROR_V1_CERT_USED_AS_CA</H1>
    <B>Erdosain9</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20HSTS%20and%20MOZILLA_PKIX_ERROR_V1_CERT_USED_AS_CA&In-Reply-To=%3CCA%2BEQfqEHOKOcQ9HTLEhD%2BXZinZT6A7OzE5oe_iFh8s9njfgU6A%40mail.gmail.com%3E"
       TITLE="[squid-users] HSTS and MOZILLA_PKIX_ERROR_V1_CERT_USED_AS_CA">erdosain9 at gmail.com
       </A><BR>
    <I>Tue Aug  9 21:07:56 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011842.html">[squid-users] how to install squid proxy with source package downloaded, not use apt?
</A></li>
        <LI>Next message (by thread): <A HREF="011846.html">[squid-users] HSTS and MOZILLA_PKIX_ERROR_V1_CERT_USED_AS_CA
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11844">[ date ]</a>
              <a href="thread.html#11844">[ thread ]</a>
              <a href="subject.html#11844">[ subject ]</a>
              <a href="author.html#11844">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi to all.
I keep trying to achieve inspect https. I think I'm close to doing. This is
my current configuration relative to ssl-bump.

   -

   # Squid listen Port
   http_port 192.168.1.215:3128
   https_port 3129 intercept ssl-bump generate-host-certificates=on
dynamic_cert_mem_cache_size=4MB cert=/etc/squid/ssl_cert/myca.pem
key=/etc/squid/ssl_cert/myca.pem

   #always_direct allow all
   ssl_bump server-first all
   #sslproxy_cert_error deny all
   #sslproxy_flags DONT_VERIFY_PEER

   sslcrtd_program /usr/lib64/squid/ssl_crtd -s /var/lib/ssl_db -M 4MB
   sslcrtd_children 8 startup=1 idle=1

   -
-
- *Im having this error in firefox.*

*when try google.com &lt;<A HREF="http://google.com">http://google.com</A>&gt;*
The owner of www.google.com has configured their website improperly. To
protect your information from being stolen, Firefox has not connected to
this website.

This site uses HTTP Strict Transport Security (HSTS) to specify that
Firefox only connect to it securely. As a result, it is not possible to add
an exception for this certificate.

*or yahoo.com &lt;<A HREF="http://yahoo.com">http://yahoo.com</A>&gt;*

<A HREF="https://search.yahoo.com/yhs/search?p=X.509+version+1+">https://search.yahoo.com/yhs/search?p=X.509+version+1+</A>
certificates+are+deprecated&amp;ei=UTF-8&amp;hspart=mozilla&amp;hsimp=yhs-005
 An X.509 version 1 certificate that is not a trust anchor was used to
issue the server's certificate. X.509 version 1 certificates are deprecated
and should not be used to sign other certificates.
HTTP Strict Transport Security: true
HTTP Public Key Pinning: false



*MOZILLA_PKIX_ERROR_V1_CERT_USED_AS_CA*

When i create self-signed certificate, i do like this:

   -

   openssl req -new -newkey rsa:2048 -sha256 -days 365 -nodes *-x509
*-keyout myCA.pem  -out myCA.pem


so what can i change to avoid the problem???
Thanks to all!!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160809/45ab4304/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160809/45ab4304/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011842.html">[squid-users] how to install squid proxy with source package downloaded, not use apt?
</A></li>
	<LI>Next message (by thread): <A HREF="011846.html">[squid-users] HSTS and MOZILLA_PKIX_ERROR_V1_CERT_USED_AS_CA
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11844">[ date ]</a>
              <a href="thread.html#11844">[ thread ]</a>
              <a href="subject.html#11844">[ subject ]</a>
              <a href="author.html#11844">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
