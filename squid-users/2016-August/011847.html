<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid refresh_pattern / cache question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20refresh_pattern%20/%20cache%20question&In-Reply-To=%3C5cb2932e-cb71-d983-bb9f-cb96c2060c8f%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011845.html">
   <LINK REL="Next"  HREF="011851.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid refresh_pattern / cache question</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20refresh_pattern%20/%20cache%20question&In-Reply-To=%3C5cb2932e-cb71-d983-bb9f-cb96c2060c8f%40treenet.co.nz%3E"
       TITLE="[squid-users] squid refresh_pattern / cache question">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Aug  9 23:11:39 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011845.html">[squid-users] squid refresh_pattern / cache question
</A></li>
        <LI>Next message (by thread): <A HREF="011851.html">[squid-users] squid refresh_pattern / cache question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11847">[ date ]</a>
              <a href="thread.html#11847">[ thread ]</a>
              <a href="subject.html#11847">[ subject ]</a>
              <a href="author.html#11847">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/08/2016 10:43 a.m., Berkes, David wrote:
&gt;<i> 
</I>&gt;<i> I have a question about the caching mechanism and &quot;refresh_pattern&quot; specifically.  I had the following configured for my company.  Lateley there have been complaints that people are seeing old pages and not the recent content...specifically when going to www.bbc.com&lt;<A HREF="http://www.bbc.com">http://www.bbc.com</A>&gt;.
</I>&gt;<i> 
</I>&gt;<i> Im not actually sure what is not allowing the bbc.com pages to not get updated, but at this point, I just want to let squid do normal caching without any refresh_pattern or &quot;fancy&quot; settings.
</I>&gt;<i> 
</I>&gt;<i> My question is will I still get caching features/benefits of squid after I remove the &quot;refresh_pattern&quot; entries?
</I>
Yes you will get caching. Just on a slightly different set of objects
than are being cached now.

The HTTP protocol defines an algorithm for heuristic caching. Which is
based on the headers sent by the server (or not) for each object. All
that refresh_pattern does is provide default values for the headers if
the server did not send one or other. The ignore/override options make
Squid calculate that algorithm as if certain header values were not sent
even if they were.


I suggest you try the following changes first though:

* remove the ignore-no-cache ignore-no-store ignore-private options.

* add the refresh_pattern for correctly handling dynamic content. This
should be placed as second to last pattern, just above the '.' one.

  refresh_pattern -i (/cgi-bin/|\?) 0 0% 0


That should make your Squid obey the HTTP protocol more accurately. If
the problem remains after those changes, then you need to take a closer
look at what exactly is going on with those problem URLs.


Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011845.html">[squid-users] squid refresh_pattern / cache question
</A></li>
	<LI>Next message (by thread): <A HREF="011851.html">[squid-users] squid refresh_pattern / cache question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11847">[ date ]</a>
              <a href="thread.html#11847">[ thread ]</a>
              <a href="subject.html#11847">[ subject ]</a>
              <a href="author.html#11847">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
