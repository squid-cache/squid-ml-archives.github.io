<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Problem with SSL client setting in case of erverse proxy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Problem%20with%20SSL%20client%20setting%20in%20case%20of%0A%20erverse%20proxy&In-Reply-To=%3C0d6f7f62-6afc-c261-4f74-e95076883113%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011849.html">
   <LINK REL="Next"  HREF="011858.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Problem with SSL client setting in case of erverse proxy</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Problem%20with%20SSL%20client%20setting%20in%20case%20of%0A%20erverse%20proxy&In-Reply-To=%3C0d6f7f62-6afc-c261-4f74-e95076883113%40treenet.co.nz%3E"
       TITLE="[squid-users] Problem with SSL client setting in case of erverse proxy">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Aug 11 11:09:14 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011849.html">[squid-users] Problem with SSL client setting in case of erverse	proxy
</A></li>
        <LI>Next message (by thread): <A HREF="011858.html">[squid-users] A problem with a refresh pattern rule
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11860">[ date ]</a>
              <a href="thread.html#11860">[ thread ]</a>
              <a href="subject.html#11860">[ subject ]</a>
              <a href="author.html#11860">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/08/2016 6:49 p.m., Frosch Martin wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> I hope I am right here.
</I>&gt;<i> 
</I>&gt;<i> I use Squid Version 3.5.20 as reverse Proxy for Outlook (2010)
</I>&gt;<i> Anywhere and OWA. The problem is that I cannot transfer Files bigger
</I>&gt;<i> than 2MB since the Microsoft Update
</I>&gt;<i> <A HREF="https://technet.microsoft.com/de-de/library/security/3042058.">https://technet.microsoft.com/de-de/library/security/3042058.</A> This
</I>&gt;<i> Update brings new Cipher Versions to IIS. Now I want to use older
</I>&gt;<i> Cipher Sites but the following line of Squid config is not working
</I>&gt;<i> 100%.
</I>
Why do you want to force bad security when better is available?

&gt;<i> 
</I>&gt;<i> cache_peer X.X.X.X parent 443 0 ssl no-query originserver
</I>&gt;<i> sslflags=DONT_VERIFY_PEER
</I>&gt;<i> ssloptions=NO_SSLv2:NO_SSLv3:ALL:SINGLE_DH_USE:SINGLE_ECDH_USE:NO_TICKET
</I>
Process those options (instructions) from left-to-right in your head.
You should see that all things *enabled* at the end of it. That includes
SSLv2 and SSLv3 being enabled.

Hint: &quot;ALL&quot; force-enables everything the library is capable of.
Restrictions can only follow after it in the options list.

&gt;<i> sslcipher=AES256-SHA login=PASS name=exchangeServer standby=5
</I>&gt;<i> 
</I>&gt;<i> Squid as Client uses always 38 Cipher Suites, no matter what I define
</I>&gt;<i> as ssloptions or sslcipher.
</I>&gt;<i> 
</I>
cipher= is very rarely needed to be explicitly set. The library already
enables good ciphers, and options can enable others manually if needed.


Use of ALL in the options is often recommended by people without
understanding what it does. It enables *everything* the library is
capable of doing. Basically using it means the admin (or whoever wrote
the tutorial) thinks they know security better than the experts who
wrote the library. Then the admin/author goes and lists removal of the
(often few) things they know are bad (at that point in time) - often
missing out lots of custom hacks they dont know the library just enabled
as instructed, or crypto things which are broken but long forgotten.

The best thing to do is to start with neither cipher nor options
configured at all and test what the library tries to offer. Use that
test to add specific disable/enable options to the options= list. Repeat
as necessary until what the library does meets your need.

HTH
Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011849.html">[squid-users] Problem with SSL client setting in case of erverse	proxy
</A></li>
	<LI>Next message (by thread): <A HREF="011858.html">[squid-users] A problem with a refresh pattern rule
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11860">[ date ]</a>
              <a href="thread.html#11860">[ thread ]</a>
              <a href="subject.html#11860">[ subject ]</a>
              <a href="author.html#11860">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
