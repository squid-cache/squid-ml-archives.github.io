<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Another squid log question (still from 2.6.STABLE18): TCP_HIT + DIRECT
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Another%20squid%20log%20question%20%28still%20from%0A%202.6.STABLE18%29%3A%20TCP_HIT%20%2B%20DIRECT&In-Reply-To=%3C10990322-a3fc-552a-f9c8-5a1fa9f68e50%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011911.html">
   <LINK REL="Next"  HREF="011921.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Another squid log question (still from 2.6.STABLE18): TCP_HIT + DIRECT</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Another%20squid%20log%20question%20%28still%20from%0A%202.6.STABLE18%29%3A%20TCP_HIT%20%2B%20DIRECT&In-Reply-To=%3C10990322-a3fc-552a-f9c8-5a1fa9f68e50%40treenet.co.nz%3E"
       TITLE="[squid-users] Another squid log question (still from 2.6.STABLE18): TCP_HIT + DIRECT">squid3 at treenet.co.nz
       </A><BR>
    <I>Sat Aug 13 01:12:41 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011911.html">[squid-users] Another squid log question (still from 2.6.STABLE18):	TCP_HIT + DIRECT
</A></li>
        <LI>Next message (by thread): <A HREF="011921.html">[squid-users] Squid cpu usage 100% from few days ago !!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11919">[ date ]</a>
              <a href="thread.html#11919">[ thread ]</a>
              <a href="subject.html#11919">[ subject ]</a>
              <a href="author.html#11919">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 13/08/2016 3:30 a.m., Henry S. Thompson wrote:
&gt;<i> In e.g. yesterday's log file, for 950K valid http requests, I find about
</I>&gt;<i> with 822K peer status DIRECT/...
</I>&gt;<i> Of these, those with squid status some variant of _HIT break down as
</I>&gt;<i> follows:
</I>&gt;<i> 
</I>&gt;<i>     115 TCP_HIT/200
</I>&gt;<i>      49 TCP_IMS_HIT/304
</I>&gt;<i>       8 TCP_MEM_HIT/200
</I>&gt;<i>   12880 TCP_REFRESH_HIT/200
</I>&gt;<i>      15 TCP_REFRESH_HIT/206
</I>&gt;<i>   14566 TCP_REFRESH_HIT/304
</I>&gt;<i> 
</I>&gt;<i> I understand the REFRESH cases, but what about the first three?  Under
</I>&gt;<i> what circumstances does a (non-REFRESH) cache hit none-the-less cause a
</I>&gt;<i> fetch to an origin server?
</I>&gt;<i> 
</I>
IIRC Squid-2 used DIRECT as a catch-all value when it didn't have a
better one to use.

My old memories could be wrong though. You will likely have to check the
code or an ALL,9 cache.log to find out why. None of the dev guys who
worked on Squid-2 hang out here anymore. It has been 8 years since that
version was deprecated.


PS. If this version is being forced on you by any particular vendors
product I suggest you send queries their way. Squid versions are
officially supported here for only a few years (1-3) with a bit of
'wiggle room' for things that haven't changed in the supported releases,
then any vendors who want to provide LTE releases of old Squid take up
the support burden for their particular release.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011911.html">[squid-users] Another squid log question (still from 2.6.STABLE18):	TCP_HIT + DIRECT
</A></li>
	<LI>Next message (by thread): <A HREF="011921.html">[squid-users] Squid cpu usage 100% from few days ago !!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11919">[ date ]</a>
              <a href="thread.html#11919">[ thread ]</a>
              <a href="subject.html#11919">[ subject ]</a>
              <a href="author.html#11919">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
