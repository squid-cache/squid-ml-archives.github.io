<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 2.7.s9 HTTPS-proxying - hint welcome
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%202.7.s9%20HTTPS-proxying%20-%20hint%20welcome&In-Reply-To=%3C1471603376992-4679041.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012029.html">
   <LINK REL="Next"  HREF="012076.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 2.7.s9 HTTPS-proxying - hint welcome</H1>
    <B>Torsten Kuehn</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%202.7.s9%20HTTPS-proxying%20-%20hint%20welcome&In-Reply-To=%3C1471603376992-4679041.post%40n4.nabble.com%3E"
       TITLE="[squid-users] Squid 2.7.s9 HTTPS-proxying - hint welcome">tekuehn at web.de
       </A><BR>
    <I>Fri Aug 19 10:42:56 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="012029.html">[squid-users] Squid 2.7.s9 HTTPS-proxying - hint welcome
</A></li>
        <LI>Next message (by thread): <A HREF="012076.html">[squid-users] Squid 2.7.s9 HTTPS-proxying - hint welcome
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12056">[ date ]</a>
              <a href="thread.html#12056">[ thread ]</a>
              <a href="subject.html#12056">[ subject ]</a>
              <a href="author.html#12056">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On 18/08/2016 6:32 a.m., Amos Jeffries wrote:

&gt;&gt;<i> I imagine layouts where the encrypted traffic itself gets stored
</I>&gt;<i> no way for Squid to know if a previous encrypted stream is reusable.
</I>&gt;<i> To squid it is just a random stream of opaque bytes.
</I>
Enlightening! The idea was that omitting decryption but instead providing
measures to do so from the client's side had less concerns wrt privacy.
As I see, with a mere &quot;stream of opaque bytes&quot;, any &quot;handle&quot; to provide
such measures is missing. Thus, if caching of SSL-encrypted data is wished,
decryption is mandatory.

&gt;&gt;<i> I.e. [HTTPS] not cacheable at all [in 2.7.s9]?
</I>&gt;<i> Correct.
</I>
Asking months earlier here would have saved me painful failures ...

&gt;&gt;<i> I prefer not to erase objects [...] My [TAGs] may look horrible
</I>&gt;&gt;<i>     authenticate_ttl 359996400 seconds
</I>&gt;<i> Lookup &quot;credentials replay attack&quot;. [...] There is no other use for
</I>&gt;<i> this directive than attacking your clients.
</I>
Uugh! Was set in april 2012, by error (without effect in 2.5.s8_OS2_VAC,
thus
it didn't harm): the idea was to turn off Squid's garbage collection, in
order
to avoid wearing out flash memory. Wrong place, and I ignored credentials
...

&gt;&gt;<i>     hierarchy_stoplist cgi-bin
</I>&gt;&gt;<i>     refresh_pattern -i /cgi-bin/ 5258880 100% 5258880
</I>&gt;<i> Please use the pattern settings:  &quot;-i (/cgi-bin/|\?) 0 0% 0&quot;
</I>&gt;<i> This pattern is designed to work around an issue with truly ancient CGI
</I>&gt;<i> scripts [...] Such scripts are guaranteed to be dynamically changing [...]
</I>
The idea comes from <A HREF="http://twiki.cern.ch/twiki/bin/view/CMS/MyOwnSquid">http://twiki.cern.ch/twiki/bin/view/CMS/MyOwnSquid</A> ,
to get dynamic web pages cached. I am glad that Squid finally does so!
Conflicting concepts, as it seems. Or, is there any RegEx which does the
old CGI script-workaround but still caches content with &quot;?&quot; in URLs?

&gt;&gt;<i>     refresh_pattern . 5258880 100% 5258880
</I>&gt;&gt;<i>         override-expire override-lastmod ignore-no-cache ignore-private
</I>&gt;&gt;<i>     positive_dns_ttl 359996400 seconds
</I>&gt;<i> Meaning whenever any domain name moves hosting service you get cutoff
</I>&gt;<i> from it completely for ~11 years or until you fully restart Squid.
</I>
Yes, I noticed this :-) (Used to reconfigure Squid from CacheMgr in these
cases). Came from Sjoerd Visser's dutch page on Squid 1.1, to work around
it's missing offline_mode TAG (just kept positive_dns_ttl afterwards):
<A HREF="http://vissesh.home.xs4all.nl/multiboot/firewall/squid.html">http://vissesh.home.xs4all.nl/multiboot/firewall/squid.html</A>

&gt;<i> When you go to Squid-3, removing both these DNS settings entirely would
</I>&gt;<i> be best. [...] if you really insist [...] ~48hrs should work just as well
</I>
Truely. When I set up 2.5.s8_OS2_VAC six years ago, I just added a few new
TAGs to my old 1.1 config. Only this summer, I spent a couple of days to
migrate previous settings into the new order of a fresh 2.7.s9's config (for
better comparison), now comprising a history of all available OS/2 builds
(introduction/ disappearance of features etc.). To be re-done with 3.5.

&gt;&gt;<i> setup is that robust that force-reload [fails unless objects deleted]
</I>&gt;<i> This is done solely by &quot;override-expire&quot;.
</I>
Perfect. I'm far from knowing config TAGs by heart and thus don't see how
things play together. Enabling &quot;overide-expire&quot; in 2012 was a bad thing.

&gt;&gt;<i> [setup that robust that] PURGE fails unless [objects deleted manually]
</I>&gt;<i> In Squid-2 this is more efficiently done by:
</I>&gt;<i>   acl PURGE method PURGE
</I>&gt;<i>   http_access deny PURGE
</I>
Recently enabled (as well as CacheMgr-access) by setting
    acl localnet src 192.168.0.160/27
    [...]
    acl purge method PURGE
    http_access allow purge localnet
    http_access allow purge localhost
    http_access deny purge

&gt;<i> Squid-3 [...] disables all the PURGE functionality *unless* you have
</I>&gt;<i> &quot;PURGE&quot; method in an ACL like above. It is a good idea for performance
</I>&gt;<i> reasons to remove all mention of &quot;PURGE&quot; when upgrading to Squid-3.
</I>
Permitting PURGE has a performance impact? I enabled it recently, but
since reload works now, it could be suppressed.

&gt;&gt;<i> [force-reload fails unless] the ugly &quot;reload_into_ims on&quot; option
</I>&gt;&gt;<i> is set which violates standards.
</I>&gt;<i> reload_into_ims is not a violation of current HTTP/1.1 standards. [...]
</I>&gt;<i> The big(est) problem with it is that Squid-2 is HTTP/1.0 software and
</I>&gt;<i> both reload and IMS revalidation are not defined in that version of the
</I>&gt;<i> protocol. Adding two risky undefined things together multiplies dangers.
</I>&gt;<i> [...] Overall the approach to caching *at any cost* is doing more harm
</I>&gt;<i> than good, both to yourself and to many others.
</I>
Disquieting. In fact, I tried to change Squid's default caching behaviour
to &quot;accumulating&quot; content (&quot;once here, why to reload redundant stuff?&quot;).
The second, important intention behind this is not to wear out the flash
memory where Squid runs on. Data is backed up regularily, but I'm afraid
of, e.g., the regular revalidation processes's write accesses. (A friend
lost a solid state disk with a Squid cache after only six months.)

Suggestions for a proper compromise welcome.

Regards  Torsten Kuehn, Weil am Rhein/ Basle



--
View this message in context: <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-2-7-s9-HTTPS-proxying-hint-welcome-tp4678986p4679041.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-2-7-s9-HTTPS-proxying-hint-welcome-tp4678986p4679041.html</A>
Sent from the Squid - Users mailing list archive at Nabble.com.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="012029.html">[squid-users] Squid 2.7.s9 HTTPS-proxying - hint welcome
</A></li>
	<LI>Next message (by thread): <A HREF="012076.html">[squid-users] Squid 2.7.s9 HTTPS-proxying - hint welcome
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12056">[ date ]</a>
              <a href="thread.html#12056">[ thread ]</a>
              <a href="subject.html#12056">[ subject ]</a>
              <a href="author.html#12056">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
