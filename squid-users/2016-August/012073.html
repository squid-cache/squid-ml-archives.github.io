<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Problems with Squid Authentication
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Problems%20with%20Squid%20Authentication&In-Reply-To=%3CCA%2B0TdyqmK9eMNqgWuJSW0ktGHL%3DznLP-JVuX6a6fn-xOTE13mQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012055.html">
   <LINK REL="Next"  HREF="012052.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Problems with Squid Authentication</H1>
    <B>Marcio Demetrio Bacci</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Problems%20with%20Squid%20Authentication&In-Reply-To=%3CCA%2B0TdyqmK9eMNqgWuJSW0ktGHL%3DznLP-JVuX6a6fn-xOTE13mQ%40mail.gmail.com%3E"
       TITLE="[squid-users] Problems with Squid Authentication">marciobacci at gmail.com
       </A><BR>
    <I>Sat Aug 20 03:50:26 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="012055.html">[squid-users] Problems with Squid Authentication
</A></li>
        <LI>Next message (by thread): <A HREF="012052.html">[squid-users] training
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12073">[ date ]</a>
              <a href="thread.html#12073">[ thread ]</a>
              <a href="subject.html#12073">[ subject ]</a>
              <a href="author.html#12073">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

1) Here is the result of the command-line:
/usr/lib/squid/negotiate_kerberos_auth -s HTTP/
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy.empresa.com.br at EMPRESA.COM.BR</A> &#8211;d &#8211;i
mary <A HREF="https://lists.squid-cache.org/listinfo/squid-users">abc at 12345</A>
negotiate_kerberos_auth.cc(258): pid=1421 :2016/08/19 23:44:33|
negotiate_kerberos_auth: DEBUG: Got 'mary <A HREF="https://lists.squid-cache.org/listinfo/squid-users">abc at 12345</A>' from squid (length:
14).
negotiate_kerberos_auth.cc(295): pid=1421 :2016/08/19 23:44:33|
negotiate_kerberos_auth: ERROR: Invalid request [mary <A HREF="https://lists.squid-cache.org/listinfo/squid-users">abc at 12345</A>]
BH invalid request

2) Bellow are my keytabs:
Keytab name: FILE:/etc/krb5.keytab
KVNO Principal
----
--------------------------------------------------------------------------
   1 host/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy.empresa.com.br at EMPRESA.COM.BR</A>
   1 host/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy.empresa.com.br at EMPRESA.COM.BR</A>
   1 host/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy.empresa.com.br at EMPRESA.COM.BR</A>
   1 host/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy.empresa.com.br at EMPRESA.COM.BR</A>
   1 host/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy.empresa.com.br at EMPRESA.COM.BR</A>
   1 host/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy at EMPRESA.COM.BR</A>
   1 host/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy at EMPRESA.COM.BR</A>
   1 host/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy at EMPRESA.COM.BR</A>
   1 host/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy at EMPRESA.COM.BR</A>
   1 host/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy at EMPRESA.COM.BR</A>
   1 proxy$@EMPRESA.COM.BR
   1 proxy$@EMPRESA.COM.BR
   1 proxy$@EMPRESA.COM.BR
   1 proxy$@EMPRESA.COM.BR
   1 proxy$@EMPRESA.COM.BR


Keytab name: FILE:/etc/squid3/HTTP.keytab
KVNO Principal
----
--------------------------------------------------------------------------
   1 host/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy.empresa.com.br at EMPRESA.COM.BR</A>
   1 host/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy.empresa.com.br at EMPRESA.COM.BR</A>
   1 host/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy.empresa.com.br at EMPRESA.COM.BR</A>
   1 host/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy.empresa.com.br at EMPRESA.COM.BR</A>
   1 host/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy.empresa.com.br at EMPRESA.COM.BR</A>
   1 host/proxy$EMPRESA.COM.BR
   1 host/proxy$EMPRESA.COM.BR
   1 host/proxy$EMPRESA.COM.BR
   1 host/proxy$EMPRESA.COM.BR
   1 host/proxy$EMPRESA.COM.BR
   1 proxy$@EMPRESA.COM.BR
   1 proxy$@EMPRESA.COM.BR
   1 proxy$@EMPRESA.COM.BR
   1 proxy$@EMPRESA.COM.BR
   1 proxy$@EMPRESA.COM.BR
   1 HTTP/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy.empresa.com.br at EMPRESA.COM.BR</A>
   1 HTTP/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy.empresa.com.br at EMPRESA.COM.BR</A>
   1 HTTP/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy.empresa.com.br at EMPRESA.COM.BR</A>
   1 HTTP/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy.empresa.com.br at EMPRESA.COM.BR</A>
   1 HTTP/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy.empresa.com.br at EMPRESA.COM.BR</A>
   1 HTTP/proxy$EMPRESA.COM.BR
   1 HTTP/proxy$EMPRESA.COM.BR
   1 HTTP/proxy$EMPRESA.COM.BR
   1 HTTP/proxy$EMPRESA.COM.BR
   1 HTTP/proxy$EMPRESA.COM.BR

OBS: I left and joined in the domain again

3) Here is the result:
/usr/lib/squid/negotiate_kerberos_auth -s GSS_C_NO_NAME
mary <A HREF="https://lists.squid-cache.org/listinfo/squid-users">abc at 12345</A>
BH invalid request



4) DNS Recors are OK.
The proxy servername exist in dns and have A (proxy IN A 192.168.200.7) and
PTR record (7 IN PTR proxy.empresa.com.br.)


5) cat /etc/hosts
127.0.0.1              localhost
192.168.200.7     proxy.empresa.com.br   proxy



6) Time is sync with the AD server (The time is identical)


7) My /etc/krb5.conf file:
[libdefaults]
       default_realm = EMPRESA.COM.BR
       dns_lookup_kdc = yes
       dns_lookup_realm = yes
       default_keytab_name = /etc/krb5.keytab

[realms]
EMPRESA.COM.BR = {
kdc = dc1.empresa.com.br:88
admin_server = dc1.empresa.com.br
default_domain = EMPRESA.COM.BR
}


[domain_realm]
.empresa.com.br = EMPRESA.COM.BR
empresa.com.br = EMPRESA.COM.BR

[logging]
  kdc = FILE:/var/log/kdc.log
  admin_server = FILE:/var/log/kadmin.log
  default = FILE:/var/log/krb5lib.log


8) Bellow is my /etc/nsswitch.conf file:
passwd:         compat winbind
group:          compat winbind
shadow:         compat
gshadow:        files
hosts:          files dns
networks:       files
protocols:      db files
services:       db files
ethers:         db files
rpc:            db files
netgroup:       nis


9) Bellow is my /etc/pam.d/common-session file:
session [default=1] pam_permit.so
session requisite pam_deny.so
session required pam_permit.so
session required pam_unix.so
session    optional pam_winbind.so


10) Following my /etc/samba/smb.conf file:
[global]
  netbios name = proxy
  workgroup = EMPRESA
  security = ads
  realm = EMPRESA.COM.BR
  encrypt passwords = yes
  dedicated keytab file = /etc/krb5.keytab
  kerberos method = secrets and keytab
  password server = dc1.empresa.com.br
  preferred master = no
  idmap config *:backend = tdb
  idmap config *:range = 1000-3000
  idmap config EMPRESA:backend = ad
  idmap config EMPRESA:schema_mode = rfc2307
  idmap config EMPRESA:range = 10000-9999999
  winbind nss info = rfc2307
  winbind trusted domains only = no
  winbind use default domain = yes
  winbind enum users = yes
  winbind enum groups = yes
  winbind offline logon = yes
  winbind refresh tickets = yes
  vfs objects = acl_xattr
  map acl inherit = Yes
  store dos attributes = Yes
  username map = /etc/samba/user.map


11) Other Informations:
&gt;&gt;<i> Samba4 and Winbind services are enable
</I>&gt;&gt;<i> In my DC there is a Squid account (call &quot;proxy&quot;)
</I>&gt;&gt;<i> wbinfo -g, wbinfo -u, wbinfo -t, getent passwd are OK
</I>&gt;&gt;<i> kinit &lt;user&gt; is OK
</I>&gt;&gt;<i> klist -l is OK
</I>
Do you have any other idea?

Regards,

M&#225;rcio

2016-08-19 7:02 GMT-03:00 L.P.H. van Belle &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">belle at bazuin.nl</A>&gt;:

&gt;<i> Hai,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Yes, all new things are hard..
</I>&gt;<i>
</I>&gt;<i> I need some extra info because there are lots of things that can be wrong.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> post what you see here :
</I>&gt;<i>
</I>&gt;<i> /usr/lib/squid/negotiate_kerberos_auth -s HTTP/proxy.empresa.com.br@
</I>&gt;<i> EMPRESA.COM.BR &#8211;d &#8211;i
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt;&gt; kinit and klist are ok
</I>&gt;<i>
</I>&gt;<i> &gt;&gt; /etc/krb5.keytab and /etc/squid3/HTTP.keytab (both are identical)
</I>&gt;<i>
</I>&gt;<i> These are normaly not identical. In the HTTPkeytab i have ONLY the HTTP
</I>&gt;<i> spn.
</I>&gt;<i>
</I>&gt;<i> And in the krb5.keytab i  have the host SPN and netbios_name($)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> How to test the kerberos auth.. hmm, thats a difficult one for me.
</I>&gt;<i>
</I>&gt;<i> I know lot but not all..  :-(  .
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> But what i do iknow, you can test with
</I>&gt;<i>
</I>&gt;<i> /usr/lib/squid/negotiate_kerberos_auth -s GSS_C_NO_NAME
</I>&gt;<i>
</I>&gt;<i> If that works its probely an SPN or dns problem.
</I>&gt;<i>
</I>&gt;<i> If that isnt working, then do check the time on the ad server and proxy
</I>&gt;<i> server.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I can only say.
</I>&gt;<i>
</I>&gt;<i> The proxy servername must exist in dns and must have A and PTR record.  (
</I>&gt;<i> add this in the samba AD )
</I>&gt;<i>
</I>&gt;<i> The reverse zone is ( maybe ) created, if not, create it yourself and add
</I>&gt;<i> the ptr records.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Cat /etc/hosts file may NOT contain any.
</I>&gt;<i>
</I>&gt;<i> 127.0.1.1        yourhostname.. ..
</I>&gt;<i>
</I>&gt;<i> if its in there, you installed with dhcp ip.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> It should contain
</I>&gt;<i>
</I>&gt;<i> 127.0.0.1              localhost
</I>&gt;<i>
</I>&gt;<i> IP_OF_SERVER   hostname.domain.tld hostname
</I>&gt;<i>
</I>&gt;<i> The is there if you install with a static ip.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Time must be in sync with the AD server ( max difference i allow is 1 min.
</I>&gt;<i> )
</I>&gt;<i>
</I>&gt;<i> If needed install ntp on the proxy and point the server  to the ad dc.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> And post what you now have in krb5.conf
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> These are the most common pitfalls, i&#8217;ll see what i can do to help out.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Greetz,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Louis
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> *Van:* squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] *Namens
</I>&gt;<i> *Marcio Demetrio Bacci
</I>&gt;<i> *Verzonden:* vrijdag 19 augustus 2016 3:50
</I>&gt;<i> *Aan:* Squid Users
</I>&gt;<i> *Onderwerp:* [squid-users] Problems with Squid Authentication
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> My Kerberos Authentication doesn't work. This is very hard!
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> My Squid3 is join in the Domain
</I>&gt;<i>
</I>&gt;<i> kinit and klist are ok
</I>&gt;<i>
</I>&gt;<i> wbinfo -g and wbinfo -u are ok too.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I have created the squid3 file in /etc/default with the following content:
</I>&gt;<i>
</I>&gt;<i> KRB5_KTNAME=/etc/squid3/HTTP.keytab
</I>&gt;<i>
</I>&gt;<i> export KRB5_KTNAME
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I have two keytab files:
</I>&gt;<i>
</I>&gt;<i> /etc/krb5.keytab and /etc/squid3/HTTP.keytab (both are identical)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I have installed libsasl2-modules-gssapi-mit libsasl2-modules packages
</I>&gt;<i> because my Squid server is Debian 8. But I didn't use msktutil tool. I have
</I>&gt;<i> only joined Squid server in the Domain (net ads join -U administrator)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> How can I debbug the problem?
</I>&gt;<i>
</I>&gt;<i> How can I test kerberos authentication in terminal (command line)?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Below is my squid.conf file:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ### Configuracoes Basicas
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> cache_mgr <A HREF="https://lists.squid-cache.org/listinfo/squid-users">administrator at empresa.com.br</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> http_port 3128
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> #debug_options ALL,111,2 29,9 84,6
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> cache_mem 512 MB
</I>&gt;<i>
</I>&gt;<i> cache_swap_low 80
</I>&gt;<i>
</I>&gt;<i> cache_swap_high 90
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> maximum_object_size 512 MB
</I>&gt;<i>
</I>&gt;<i> minimum_object_size 0 KB
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> maximum_object_size_in_memory 4096 KB
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> cache_replacement_policy heap LFUDA
</I>&gt;<i>
</I>&gt;<i> memory_replacement_policy heap LFUDA
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> #Para n&#227;o bloquear downloads
</I>&gt;<i>
</I>&gt;<i> quick_abort_min -1 KB
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> #Resolve um problema com conexoes persistentes
</I>&gt;<i>
</I>&gt;<i> detect_broken_pconn on
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> fqdncache_size 1024
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ### Parametros de atualizacao da memoria cache
</I>&gt;<i>
</I>&gt;<i> refresh_pattern ^ftp:   1440   20%   10080
</I>&gt;<i>
</I>&gt;<i> refresh_pattern ^gopher:   1440   0%   1440
</I>&gt;<i>
</I>&gt;<i> refresh_pattern -i (/cgi-bin/|\?) 0 0%    0
</I>&gt;<i>
</I>&gt;<i> refresh_pattern .      0   20%   4320
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ### Localizacao dos logs
</I>&gt;<i>
</I>&gt;<i> access_log /var/log/squid3/access.log
</I>&gt;<i>
</I>&gt;<i> cache_log /var/log/squid3/cache.log
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ### define a localizacao do cache de disco, tamanho, qtd de diretorios pai
</I>&gt;<i> e subdiretorios
</I>&gt;<i>
</I>&gt;<i> cache_dir aufs /var/spool/squid3 600 16 256
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> auth_param negotiate program /usr/lib/squid3/negotiate_kerberos_auth -s
</I>&gt;<i> HTTP/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy.empresa.com.br at EMPRESA.COM.BR</A>
</I>&gt;<i>
</I>&gt;<i> auth_param negotiate children 20
</I>&gt;<i>
</I>&gt;<i> auth_param negotiate keep_alive on
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> visible_hostname proxy.empresa.com.br
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ### acls
</I>&gt;<i>
</I>&gt;<i> #acl manager proto cache_object
</I>&gt;<i>
</I>&gt;<i> acl localhost src * MailScanner heeft een e-mail met mogelijk een poging
</I>&gt;<i> tot fraude gevonden van &quot;192.168.200.7&quot; * *MailScanner warning: numerical
</I>&gt;<i> links are often malicious:* 192.168.200.7/32 &lt;<A HREF="http://192.168.200.7/32">http://192.168.200.7/32</A>&gt;
</I>&gt;<i>
</I>&gt;<i> acl to_localhost dst * MailScanner heeft een e-mail met mogelijk een
</I>&gt;<i> poging tot fraude gevonden van &quot;192.168.200.7&quot; * *MailScanner warning:
</I>&gt;<i> numerical links are often malicious:* 192.168.200.7/32
</I>&gt;<i> &lt;<A HREF="http://192.168.200.7/32">http://192.168.200.7/32</A>&gt;
</I>&gt;<i>
</I>&gt;<i> acl SSL_ports port 22 443 563 7071 10000 # ssh, https, snews, zimbra,
</I>&gt;<i> webmin
</I>&gt;<i>
</I>&gt;<i> acl Safe_ports port 21       # ftp
</I>&gt;<i>
</I>&gt;<i> acl Safe_ports port 70       # gopher
</I>&gt;<i>
</I>&gt;<i> acl Safe_ports port 80       # http
</I>&gt;<i>
</I>&gt;<i> acl Safe_ports port 88       # kerberos
</I>&gt;<i>
</I>&gt;<i> acl Safe_ports port 210       # wais
</I>&gt;<i>
</I>&gt;<i> acl Safe_ports port 280       # http-mgmt
</I>&gt;<i>
</I>&gt;<i> acl Safe_ports port 389       # ldap
</I>&gt;<i>
</I>&gt;<i> acl Safe_ports port 443    # https
</I>&gt;<i>
</I>&gt;<i> acl Safe_ports port 488       # gss-http
</I>&gt;<i>
</I>&gt;<i> acl Safe_ports port 563       # snews
</I>&gt;<i>
</I>&gt;<i> acl Safe_ports port 591       # filemaker
</I>&gt;<i>
</I>&gt;<i> acl Safe_ports port 777       # multiling http
</I>&gt;<i>
</I>&gt;<i> acl Safe_ports port 3001         # imprenssa nacional
</I>&gt;<i>
</I>&gt;<i> acl Safe_ports port 8080    # http
</I>&gt;<i>
</I>&gt;<i> acl Safe_ports port 1025-65535    # unregistered ports
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> acl purge method PURGE
</I>&gt;<i>
</I>&gt;<i> acl CONNECT method CONNECT
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ### Regras iniciais do Squid
</I>&gt;<i>
</I>&gt;<i> http_access allow localhost
</I>&gt;<i>
</I>&gt;<i> http_access allow purge localhost
</I>&gt;<i>
</I>&gt;<i> http_access deny purge
</I>&gt;<i>
</I>&gt;<i> http_access deny !Safe_ports
</I>&gt;<i>
</I>&gt;<i> http_access deny CONNECT !SSL_ports
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ### Exige autenticacao
</I>&gt;<i>
</I>&gt;<i> acl autenticados proxy_auth REQUIRED
</I>&gt;<i>
</I>&gt;<i> http_access allow autenticados
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ### Rede do Local #####
</I>&gt;<i>
</I>&gt;<i> acl rede_local src * MailScanner heeft een e-mail met mogelijk een poging
</I>&gt;<i> tot fraude gevonden van &quot;192.168.200.0&quot; * *MailScanner warning: numerical
</I>&gt;<i> links are often malicious:* 192.168.200.0/22 &lt;<A HREF="http://192.168.200.0/22">http://192.168.200.0/22</A>&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ### Nega acesso de quem nao esta na rede local
</I>&gt;<i>
</I>&gt;<i> http_access allow rede_local
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> #negando o acesso para todos que nao estiverem nas regras anteriores
</I>&gt;<i>
</I>&gt;<i> http_access deny all
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ### Erros em portugues
</I>&gt;<i>
</I>&gt;<i> error_directory /usr/share/squid3/errors/pt-br
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> #cache_effective_user proxy
</I>&gt;<i>
</I>&gt;<i> coredump_dir /var/spool/squid3
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> M&#225;rcio
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160820/a9dc2db6/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160820/a9dc2db6/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="012055.html">[squid-users] Problems with Squid Authentication
</A></li>
	<LI>Next message (by thread): <A HREF="012052.html">[squid-users] training
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12073">[ date ]</a>
              <a href="thread.html#12073">[ thread ]</a>
              <a href="subject.html#12073">[ subject ]</a>
              <a href="author.html#12073">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
