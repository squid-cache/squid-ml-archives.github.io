<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Https_port with &quot;official&quot; certificate
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Https_port%20with%20%22official%22%20certificate&In-Reply-To=%3C201608241349.55604.Antony.Stone%40squid.open.source.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012121.html">
   <LINK REL="Next"  HREF="012123.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Https_port with &quot;official&quot; certificate</H1>
    <B>Antony Stone</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Https_port%20with%20%22official%22%20certificate&In-Reply-To=%3C201608241349.55604.Antony.Stone%40squid.open.source.it%3E"
       TITLE="[squid-users] Https_port with &quot;official&quot; certificate">Antony.Stone at squid.open.source.it
       </A><BR>
    <I>Wed Aug 24 11:49:55 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="012121.html">[squid-users] Https_port with &quot;official&quot; certificate
</A></li>
        <LI>Next message (by thread): <A HREF="012123.html">[squid-users] Https_port with &quot;official&quot; certificate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12122">[ date ]</a>
              <a href="thread.html#12122">[ thread ]</a>
              <a href="subject.html#12122">[ subject ]</a>
              <a href="author.html#12122">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wednesday 24 August 2016 at 13:42:16, Samuraiii wrote:

&gt;<i> On 24.8.2016 13:18, Antony Stone wrote:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; See &quot;Encrypted browser-Squid connection&quot; at the bottom of
</I>&gt;<i> &gt; <A HREF="http://wiki.squid-cache.org/Features/HTTPS">http://wiki.squid-cache.org/Features/HTTPS</A>
</I>&gt;<i> 
</I>&gt;<i> I have seen that, it is the cause of my subscription to this list.
</I>&gt;<i> I haven't been able to find any usable hints.
</I>&gt;<i> My config attempt fails
</I>
Please give more details for &quot;fails&quot;.

Is the following your entire squid.conf (except for comments)?

Have you tried getting SSL access to Squid working before introducing 
authentication?

What are you trying, to test this, and what are the results?


Regards,


Antony.

&gt;<i> acl SSL_ports port 443
</I>&gt;<i> acl Safe_ports port 80          # http
</I>&gt;<i> acl Safe_ports port 21          # ftp
</I>&gt;<i> acl Safe_ports port 443         # https
</I>&gt;<i> acl Safe_ports port 70          # gopher
</I>&gt;<i> acl Safe_ports port 210         # wais
</I>&gt;<i> acl Safe_ports port 1025-65535  # unregistered ports
</I>&gt;<i> acl Safe_ports port 280         # http-mgmt
</I>&gt;<i> acl Safe_ports port 488         # gss-http
</I>&gt;<i> acl Safe_ports port 591         # filemaker
</I>&gt;<i> acl Safe_ports port 777         # multiling http
</I>&gt;<i> acl Safe_ports port 901         # SWAT
</I>&gt;<i> acl CONNECT method CONNECT
</I>&gt;<i> http_access deny !Safe_ports
</I>&gt;<i> http_access deny CONNECT !SSL_ports
</I>&gt;<i> http_access allow localhost manager
</I>&gt;<i> http_access deny manager
</I>&gt;<i> http_access deny to_localhost
</I>&gt;<i> 
</I>&gt;<i> auth_param basic program /usr/libexec/squid/basic_pam_auth
</I>&gt;<i> auth_param basic children 5
</I>&gt;<i> auth_param basic realm Proxy Authentication Required
</I>&gt;<i> auth_param basic credentialsttl 2 hours
</I>&gt;<i> 
</I>&gt;<i> acl authenticated proxy_auth REQUIRED
</I>&gt;<i> http_access allow authenticated
</I>&gt;<i> http_access deny all
</I>&gt;<i> 
</I>&gt;<i> https_port 8443 \
</I>&gt;<i>     cert=/etc/letsencrypt/live/sklad.duckdns.org/cert.pem \
</I>&gt;<i>     key=/etc/letsencrypt/live/sklad.duckdns.org/key.pem \
</I>&gt;<i>     cleintca=/etc/letsencrypt/live/sklad.duckdns.org/fullchain.pem \
</I>&gt;<i>     tls-dh=/etc/ssl/certs/dhparam.pem \
</I>&gt;<i>     sslproxy_options=NO_SSLv2,NO_SSLv3,SINGLE_DH_USE \
</I>&gt;<i>     cipher=HIGH
</I>&gt;<i> cache_dir aufs /var/cache/squid 512 16 256
</I>&gt;<i> coredump_dir /var/cache/squid
</I>&gt;<i> refresh_pattern ^ftp:           1440    20%     10080
</I>&gt;<i> refresh_pattern ^gopher:        1440    0%      1440
</I>&gt;<i> refresh_pattern -i (/cgi-bin/|\?) 0     0%      0
</I>&gt;<i> refresh_pattern .               0       20%     4320
</I>
-- 
#define SIX 1+5
#define NINE 8+1

int main() {
    printf(&quot;%d\n&quot;, SIX * NINE);
}
	- thanks to ECB for bringing this to my attention

                                                   Please reply to the list;
                                                         please *don't* CC me.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="012121.html">[squid-users] Https_port with &quot;official&quot; certificate
</A></li>
	<LI>Next message (by thread): <A HREF="012123.html">[squid-users] Https_port with &quot;official&quot; certificate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12122">[ date ]</a>
              <a href="thread.html#12122">[ thread ]</a>
              <a href="subject.html#12122">[ subject ]</a>
              <a href="author.html#12122">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
