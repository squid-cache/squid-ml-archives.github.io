<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Transparent intercept Squid 3.5.20: where VPNs go to die.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Transparent%20intercept%20Squid%203.5.20%3A%20where%20VPNs%20go%0A%20to%20die.&In-Reply-To=%3Cff632291-39e5-6aca-2354-96ab270f8ecb%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012246.html">
   <LINK REL="Next"  HREF="012253.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Transparent intercept Squid 3.5.20: where VPNs go to die.</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Transparent%20intercept%20Squid%203.5.20%3A%20where%20VPNs%20go%0A%20to%20die.&In-Reply-To=%3Cff632291-39e5-6aca-2354-96ab270f8ecb%40measurement-factory.com%3E"
       TITLE="[squid-users] Transparent intercept Squid 3.5.20: where VPNs go to die.">rousskov at measurement-factory.com
       </A><BR>
    <I>Mon Aug 29 20:07:20 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="012246.html">[squid-users] Transparent intercept Squid 3.5.20: where VPNs go to	die.
</A></li>
        <LI>Next message (by thread): <A HREF="012253.html">[squid-users] Too many AD group and squid kerberos auth problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12250">[ date ]</a>
              <a href="thread.html#12250">[ thread ]</a>
              <a href="subject.html#12250">[ subject ]</a>
              <a href="author.html#12250">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 08/29/2016 10:43 AM, Stanford Prescott wrote:

&gt;<i> Is there a way to tell Squid that there may be port 443 connections that
</I>&gt;<i> don't use TLS/SSL so that a useful message could be generated other than
</I>&gt;<i> the &quot;connection failed&quot; message the VPN client gives?
</I>
Not quite, but we are slowly getting there:

Recent Squids have on_unsupported_protocol feature that is usually
triggered when Squid receives a request using the wrong protocol,
including receiving non-SSL bytes instead of SSL Hello. You can
configure Squid to respond with an error response in that case (in fact,
that is the default behavior).

In theory, you can also configure Squid to customize that error response
using deny_info, but see
<A HREF="http://lists.squid-cache.org/pipermail/squid-users/2016-August/012124.html">http://lists.squid-cache.org/pipermail/squid-users/2016-August/012124.html</A>
 (Ideally, we should support a better way of customize error responses
than denying them and using deny_info to customize denied responses!)

Even if deny_info works, there is currently no way to customize an error
response so that it becomes a non-HTTP response, but that (together with
ACLs/code to detect common non-HTTP protocols) would be a welcomed
feature IMO. Ideally, the admin should be able to tell Squid exactly
what bytes to send to the client (as opaque or opaque with placeholders
data) if needed.


HTH,

Alex.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="012246.html">[squid-users] Transparent intercept Squid 3.5.20: where VPNs go to	die.
</A></li>
	<LI>Next message (by thread): <A HREF="012253.html">[squid-users] Too many AD group and squid kerberos auth problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12250">[ date ]</a>
              <a href="thread.html#12250">[ thread ]</a>
              <a href="subject.html#12250">[ subject ]</a>
              <a href="author.html#12250">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
