<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Limit Bandwith for youtube....
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Limit%20Bandwith%20for%20youtube....&In-Reply-To=%3C32111747-1177-6735-ca32-b289378c3ec1%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012252.html">
   <LINK REL="Next"  HREF="012265.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Limit Bandwith for youtube....</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Limit%20Bandwith%20for%20youtube....&In-Reply-To=%3C32111747-1177-6735-ca32-b289378c3ec1%40treenet.co.nz%3E"
       TITLE="[squid-users] Limit Bandwith for youtube....">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Aug 30 15:02:57 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="012252.html">[squid-users] Limit Bandwith for youtube....
</A></li>
        <LI>Next message (by thread): <A HREF="012265.html">[squid-users] Limit Bandwith for youtube....
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12254">[ date ]</a>
              <a href="thread.html#12254">[ thread ]</a>
              <a href="subject.html#12254">[ subject ]</a>
              <a href="author.html#12254">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 30/08/2016 8:13 a.m., erdosain9 wrote:
&gt;<i> Ok,thanks!
</I>&gt;<i> But something is wrong with my config............
</I>&gt;<i> I dont have almost no users... (because is proxy testing) and i have too
</I>&gt;<i> many download avg.
</I>&gt;<i> 
</I>&gt;<i> Look , this is Torch to the ip of proxy, to see whats going on...
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &lt;<A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/file/n4679253/Captura_de_pantalla_de_2016-08-29_15-48-41.png">http://squid-web-proxy-cache.1019090.n4.nabble.com/file/n4679253/Captura_de_pantalla_de_2016-08-29_15-48-41.png</A>&gt; 
</I>&gt;<i> 
</I>
Image does not exist.

&gt;<i> &lt;<A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/file/n4679253/Captura_de_pantalla_de_2016-08-29_16-03-14.png">http://squid-web-proxy-cache.1019090.n4.nabble.com/file/n4679253/Captura_de_pantalla_de_2016-08-29_16-03-14.png</A>&gt; 
</I>
This appears to be showing several clients who are using only several
KB/sec *download* which approximately match some of the delay pools
download rates configured (~10-30 KBps). Also they are *uploading* very
fast to the server.

Delay pools controls download rates, not uploads. So that is as
expected. Although not much upload data is expected when streaming
_downloads_, so even if it did the 'burst' rates could account for most
of the higher upload speeds.


&gt;<i> 
</I>&gt;<i> This is my config 
</I>&gt;<i> 
</I>&gt;<i> #Pools para ancho de Banda
</I>&gt;<i> delay_pools 5 
</I>&gt;<i> 
</I>&gt;<i> ###VELOCIDAD PARA REDES SOCIALES
</I>&gt;<i> delay_class 1 1
</I>&gt;<i> delay_parameters 1 10000/100000
</I>&gt;<i> delay_access 1 allow redes_sociales limitado
</I>&gt;<i> delay_access 1 allow redes_sociales full
</I>&gt;<i> delay_access 1 allow redes_sociales adminis
</I>&gt;<i> 
</I>&gt;<i> #Limitar YOUTUBE
</I>&gt;<i> delay_class 2 1
</I>&gt;<i> delay_parameters 2 10000/100000
</I>&gt;<i> delay_access 2 allow youtube adminis
</I>&gt;<i> delay_access 2 allow youtube full
</I>&gt;<i> delay_access 2 allow youtube limitado
</I>&gt;<i> 
</I>&gt;<i> #Ancho de Banda Administracion
</I>&gt;<i> delay_class 3 2
</I>&gt;<i> delay_parameters 3 512000/512000 60000/256000
</I>&gt;<i> delay_access 3 allow adminis
</I>&gt;<i> 
</I>&gt;<i> #Ancho de Banda Sistemas
</I>&gt;<i> delay_class 4 2
</I>&gt;<i> delay_parameters 4 512000/512000 64000/256000
</I>&gt;<i> delay_access 4 allow sistemas
</I>&gt;<i> 
</I>&gt;<i> #Ancho de Banda Logistica
</I>&gt;<i> delay_class 5 2
</I>&gt;<i> delay_parameters 5 256000/256000 30000/125000
</I>&gt;<i> delay_access 5 allow limitado
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> if I have delay pools with low bandwidth . How can it be that &quot;long period
</I>&gt;<i> of time &quot; the squid has a bandwidth so high ??
</I>
1) see above about download vs upload differences.

2) there are non-HTTP things involves with connections that use up
bandwidth and being non-HTTP are not accounted by Squid - which can only
account the HTTP message bytes.

3) you have both small and large bandwidth pools. Delay pools do not
operate on connection or port basis. They operate on HTTP message bytes
basis. So any given TCP connection may be rate limited one second (for
one message) and then rate limited differently the next second (for its
next message).

Delay pools are a very old design from the days before QoS was properly
standardized. It has many flaws. If you can do rate limiting with TOS /
QoS controls it is recommended to use that instead. I hope to remove
Delay Pools functionality from Squid as soon as the alternatives are
able to meet all use-cases.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="012252.html">[squid-users] Limit Bandwith for youtube....
</A></li>
	<LI>Next message (by thread): <A HREF="012265.html">[squid-users] Limit Bandwith for youtube....
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12254">[ date ]</a>
              <a href="thread.html#12254">[ thread ]</a>
              <a href="subject.html#12254">[ subject ]</a>
              <a href="author.html#12254">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
