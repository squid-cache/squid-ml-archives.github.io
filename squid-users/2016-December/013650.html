<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Secrecy and TCP Reset and Allow Direct
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Secrecy%20and%20TCP%20Reset%20and%20Allow%20Direct&In-Reply-To=%3C1480802931.2948804.807424569.2F043E95%40webmail.messagingengine.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013646.html">
   <LINK REL="Next"  HREF="013651.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Secrecy and TCP Reset and Allow Direct</H1>
    <B>creditu at eml.cc</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Secrecy%20and%20TCP%20Reset%20and%20Allow%20Direct&In-Reply-To=%3C1480802931.2948804.807424569.2F043E95%40webmail.messagingengine.com%3E"
       TITLE="[squid-users] Secrecy and TCP Reset and Allow Direct">creditu at eml.cc
       </A><BR>
    <I>Sat Dec  3 22:08:51 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="013646.html">[squid-users] this is definitely the coolest stuff ever
</A></li>
        <LI>Next message (by thread): <A HREF="013651.html">[squid-users] Secrecy and TCP Reset and Allow Direct
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13650">[ date ]</a>
              <a href="thread.html#13650">[ thread ]</a>
              <a href="subject.html#13650">[ subject ]</a>
              <a href="author.html#13650">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am trying to finalize an accelerator configuration  in 3.1.  The
accelerator has cache disabled (we use an external service) with cache
deny all. We have several public IPs that send requests to back end
Apache servers using http.  The accelerator will provide both http and
https for a while.  A few questions:

Trying to get a A rating in Qualys site and the best I can get is A- due
to forward secrecy not supported for a few browsers.  I think this is
due to Squid not being able to support ECDHE (which some of those
browsers need).  Just wanted to confirm that we're not missing
something.  Is there any alternate configuration that we may be able to
do? 

I have an ACL that I want to send a TCP reset if the url being requested
matches a regx.  It seems to work, but in testing the first time a
browser request the url, the upper left corner of the browser has the
word &quot;reset&quot; in it.  Subsequent requests seem to work as expected and
the client/browser gets the reset.  In the cache log I see:   
 errorpage.cc(293) errorTryLoadText:
 '/usr/share/squid/errors/en-us/TCP_RESET': (2) No such file or
 directory
WARNING: Error Pages Missing Language: en-us
errorpage.cc(293) errorTryLoadText:
'/usr/share/squid/errors/en/TCP_RESET': (2) No such file or directory&quot;
&quot;WARNING: Error Pages Missing Language: en
I touched an empty file in the directories and the errors went away. 
Now after a squid restart I get &quot;max-age=86400&quot; in the upper left corner
once then it goes away and works as expected (client gets reset).  Just
curious if  this is expected?  Here is the ACL:

acl www_url url_regex -i [^:]+://www.example.com.*
deny_info TCP_RESET www_url

Trying to understand if we should use the always direct directive with
this configuration.   As stated, we just want to send public requests to
the backend servers. The current ACL for this is:

acl apache dst 10.10.10.0/24
always_direct allow apache
always_direct deny all


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="013646.html">[squid-users] this is definitely the coolest stuff ever
</A></li>
	<LI>Next message (by thread): <A HREF="013651.html">[squid-users] Secrecy and TCP Reset and Allow Direct
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13650">[ date ]</a>
              <a href="thread.html#13650">[ thread ]</a>
              <a href="subject.html#13650">[ subject ]</a>
              <a href="author.html#13650">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
