<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] HTTPS through http proxy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20HTTPS%20through%20http%20proxy&In-Reply-To=%3C1940580971.371543.1481005809367%40mail.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013674.html">
   <LINK REL="Next"  HREF="013683.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] HTTPS through http proxy</H1>
    <B>Blaxton</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20HTTPS%20through%20http%20proxy&In-Reply-To=%3C1940580971.371543.1481005809367%40mail.yahoo.com%3E"
       TITLE="[squid-users] HTTPS through http proxy">blaxxton at yahoo.com
       </A><BR>
    <I>Tue Dec  6 06:30:09 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="013674.html">[squid-users] HTTPS through http proxy
</A></li>
        <LI>Next message (by thread): <A HREF="013683.html">[squid-users] HTTPS through http proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13678">[ date ]</a>
              <a href="thread.html#13678">[ thread ]</a>
              <a href="subject.html#13678">[ subject ]</a>
              <a href="author.html#13678">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thank you Amos,
version of squid is :&#160;squid-3.3.8-26.el7_2.4.x86_64
Is this statement true:squid is not aware or traffic that is made with connect command ?since connect command make a tunnel within squid ?
passing below argument to JVM:-Dhttps.proxyHost=webcache.example.com -Dhttps.proxyPort=8080cause application connect to <A HREF="https://webcache.exammple.comhowever">https://webcache.exammple.comhowever</A> I have not created any certificate.May I assume squid is built with ssl enabled and both https and http proxybeing provided on one port ?
either above statement is true, or maybe Java has a bug.
Thanks for help, I will check on squidtool.
Thanks

      From: Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;
 To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> 
 Sent: Monday, December 5, 2016 6:04 PM
 Subject: Re: [squid-users] HTTPS through http proxy
   


On 6/12/2016 6:40 a.m., Blaxton wrote:
&gt;<i> Hi
</I>&gt;<i>
</I>&gt;<i> So I understand that using connect method https connection can pass 
</I>&gt;<i> through http proxy
</I>&gt;<i> but I am seeing strange behavior and thought some one here might help 
</I>&gt;<i> me to find
</I>&gt;<i> the problem we are facing.
</I>&gt;<i>
</I>&gt;<i> I am using simple java app to test https connectivity through http proxy:
</I>&gt;<i> <A HREF="http://alvinalexander.com/blog/post/java/simple-https-example">http://alvinalexander.com/blog/post/java/simple-https-example</A>
</I>&gt;<i>
</I>&gt;<i> If we run below command agains squid running on RedHat:
</I>&gt;<i> java -Dhttp.proxyHost=webcache.example.com -Dhttp.proxyPort=808 
</I>&gt;<i> JavaHttpsExample
</I>&gt;<i> connection fails , and Squid log file won't even log any thing in log 
</I>&gt;<i> file.
</I>
That means you either have a very old Squid, or the transaction is not 
completed yet as far as Squid is aware. Transactions only get logged on 
completion, in this case when the CONNECT tunnel connection is closed by 
one of the remove endpoints (client or server). It is not uncommon to 
have tunnels stay open all day with HTTPS traffic going back and forward 
unseen.

The recent Squid releases log failed client connections that did not 
have any HTTP message received. So you can see if the failure happened 
before HTTP happened.

&gt;<i> but if we run:
</I>&gt;<i> java -Dhttps.proxyHost=webcache.example.com -Dhttps.proxyPort=8080 
</I>&gt;<i> JavaHttpsExample
</I>&gt;<i> I get response and a line being recorded in log file.
</I>&gt;<i> And now running the same app against different squid running on Centos,
</I>&gt;<i> I get response from both but nothing being logged with -Dhttp.proxyHost.
</I>
see above about logging time.

&gt;<i> Please help.
</I>&gt;<i> If any one has any tips or any simple app to test different aspect of 
</I>&gt;<i> https connectivity through squid please let me know.
</I>

You can also use recent squidclient tool if it has been built with 
GnuTLS support. Or curl with debug tracing. Or wireshark with packet 
captures if you know how.

Amos

_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


   
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20161206/43404099/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20161206/43404099/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="013674.html">[squid-users] HTTPS through http proxy
</A></li>
	<LI>Next message (by thread): <A HREF="013683.html">[squid-users] HTTPS through http proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13678">[ date ]</a>
              <a href="thread.html#13678">[ thread ]</a>
              <a href="subject.html#13678">[ subject ]</a>
              <a href="author.html#13678">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
