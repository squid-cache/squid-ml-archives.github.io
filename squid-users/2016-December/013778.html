<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Crash: every 1-2 hour: kernel: Out of memory: Kill process (squid)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Crash%3A%20every%201-2%20hour%3A%20kernel%3A%20Out%20of%20memory%3A%0A%20Kill%20process%20%28squid%29&In-Reply-To=%3CCAOyb_EzLJKVJNRZmDKMOUN%2Bbksch4-nRdQb-m8QrEEz1g2_t0Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013777.html">
   <LINK REL="Next"  HREF="013780.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Crash: every 1-2 hour: kernel: Out of memory: Kill process (squid)</H1>
    <B>B. Cook</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Crash%3A%20every%201-2%20hour%3A%20kernel%3A%20Out%20of%20memory%3A%0A%20Kill%20process%20%28squid%29&In-Reply-To=%3CCAOyb_EzLJKVJNRZmDKMOUN%2Bbksch4-nRdQb-m8QrEEz1g2_t0Q%40mail.gmail.com%3E"
       TITLE="[squid-users] Crash: every 1-2 hour: kernel: Out of memory: Kill process (squid)">bcook at poughkeepsieschools.org
       </A><BR>
    <I>Thu Dec 15 04:56:50 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="013777.html">[squid-users] Crash: every 1-2 hour: kernel: Out of memory: Kill process (squid)
</A></li>
        <LI>Next message (by thread): <A HREF="013780.html">[squid-users] Crash: every 1-2 hour: kernel: Out of memory:	Kill process (squid)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13778">[ date ]</a>
              <a href="thread.html#13778">[ thread ]</a>
              <a href="subject.html#13778">[ subject ]</a>
              <a href="author.html#13778">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>What does squidclient show?

Get a trace going..

On Dec 14, 2016 11:52 PM, &quot;Amos Jeffries&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt; wrote:

On 15/12/2016 6:24 a.m., <A HREF="https://lists.squid-cache.org/listinfo/squid-users">noc at forceline.net</A> wrote:
&gt;<i> Eliezer, thanks for your reply. Guides:
</I>&gt;<i> <A HREF="http://wiki.squid-cache.org/Features/SslBump">http://wiki.squid-cache.org/Features/SslBump</A>
</I>&gt;<i> <A HREF="http://wiki.squid-cache.org/Features/SslPeekAndSplice">http://wiki.squid-cache.org/Features/SslPeekAndSplice</A>
</I>&gt;<i> <A HREF="https://habrahabr.ru/post/267851/">https://habrahabr.ru/post/267851/</A>  &lt;-- Russian lang
</I>&gt;<i> <A HREF="https://habrahabr.ru/post/272733/">https://habrahabr.ru/post/272733/</A>  &lt;-- Russian lang
</I>&gt;<i>
</I>&gt;&gt;<i> First goes first change this: 13130:
</I>&gt;<i> Done, nothing changed. Squid died.
</I>&gt;<i>
</I>&gt;<i> Maby it will be work fine whith lower load even with https. But I don't
</I>&gt;<i> understand, why it killed by a kernel rather than just update memory by
</I>new
&gt;<i> one.
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://wiki.squid-cache.org/Features/SslBump">http://wiki.squid-cache.org/Features/SslBump</A>
</I>&gt;&gt;<i> Memory usage
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    /!\ Warning: Unlike the rest of this page at the time of writing, this
</I>&gt;<i> section applies to Squid-3.3 and possibly later code capable of dynamic
</I>SSL
&gt;<i> certificate generation and origin server certificate mimicking. The
</I>current
&gt;<i> section text is intended primarily for developers and early adopters
</I>facing
&gt;<i> excessive memory consumption in certain SslBump environments. These notes
</I>&gt;<i> may be relocated elsewhere if a better location is found.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Current documentation is specific to bump-server-first configurations.
</I>&gt;<i>
</I>&gt;<i> In attach server statistic.
</I>&gt;<i>
</I>

I think you still have a forwarding loop. Does the cisco WCCP send port
443 connections from Squid to reach the Internet instead of sending them
back into Squid.

The Via header will protect against HTTP messages looping, but the TLS
handshake traffic has no such protection.

Amos

_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>

-- 

This message may contain confidential information and is intended only for 
the individual(s) named. If you are not an intended recipient you are not 
authorized to disseminate, distribute or copy this e-mail. Please notify 
the sender immediately if you have received this e-mail by mistake and 
delete this e-mail from your system.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20161214/1e618a64/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20161214/1e618a64/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="013777.html">[squid-users] Crash: every 1-2 hour: kernel: Out of memory: Kill process (squid)
</A></li>
	<LI>Next message (by thread): <A HREF="013780.html">[squid-users] Crash: every 1-2 hour: kernel: Out of memory:	Kill process (squid)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13778">[ date ]</a>
              <a href="thread.html#13778">[ thread ]</a>
              <a href="subject.html#13778">[ subject ]</a>
              <a href="author.html#13778">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
