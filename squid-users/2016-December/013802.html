<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Missing cache files
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Missing%20cache%20files&In-Reply-To=%3Cd9309fc75a32b6e1a623e6dddde45e77%40comnet.uz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013800.html">
   <LINK REL="Next"  HREF="013812.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Missing cache files</H1>
    <B>Garri Djavadyan</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Missing%20cache%20files&In-Reply-To=%3Cd9309fc75a32b6e1a623e6dddde45e77%40comnet.uz%3E"
       TITLE="[squid-users] Missing cache files">garryd at comnet.uz
       </A><BR>
    <I>Sat Dec 17 14:31:02 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="013800.html">[squid-users] Missing cache files
</A></li>
        <LI>Next message (by thread): <A HREF="013812.html">[squid-users] Missing cache files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13802">[ date ]</a>
              <a href="thread.html#13802">[ thread ]</a>
              <a href="subject.html#13802">[ subject ]</a>
              <a href="author.html#13802">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2016-12-17 18:39, Odhiambo Washington wrote:
&gt;&gt;&gt;<i> Also whether swap.state for that cache_dir is being correctly and
</I>&gt;&gt;&gt;<i> completely
</I>&gt;&gt;&gt;<i> written out to disk on shutdown or restart. Using an outdated
</I>&gt;&gt;&gt;<i> swap.state
</I>&gt;&gt;&gt;<i> file can also lead to these warnings.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> The last paragraph explains your issue. The signal 6 (abort) forces
</I>&gt;&gt;<i> Squid worker to terminate immediately (to avoid all required
</I>&gt;&gt;<i> shutdown procedures) and leave core dump. You can find a reason for
</I>&gt;&gt;<i> abort in cache.log.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Garri
</I>&gt;<i> 
</I>&gt;<i> Hi Garri,
</I>&gt;<i> 
</I>&gt;<i> So, checking, I don't see swap.state being written to disk and there
</I>&gt;<i> is no core dump either.
</I>
swap.state description [1]:
         This index file holds
	the metadata of objects saved on disk.  It is used to rebuild
	the cache during startup.  Normally this file resides in each
	'cache_dir' directory, but you may specify an alternate
	pathname here.

You can learn how to get core dump on wiki [2].


&gt;<i> There is no directive in my squid.conf to suppress the two.
</I>
What do you mean?

AIUI, your Squid instance faced unexpected event and initiated abort. 
Abort produces core dump which could be useful for developers to 
investigate unexpected event. As a side effect of abort, swap.state file 
was not updated correctly. The errors you see in cache.log are harmless 
and just confirm that swap.state and cache_dir objects are not 
synchronized due to abort.

You should concentrate on an event which led to abort. Usually, Squid 
inform about unexpected event in cache.log. Find the lines before 
'Starting Squid Cache version'.


[1] <A HREF="http://www.squid-cache.org/Doc/config/cache_swap_state/">http://www.squid-cache.org/Doc/config/cache_swap_state/</A>
[2] 
<A HREF="http://wiki.squid-cache.org/SquidFaq/BugReporting#crashes_and_core_dumps">http://wiki.squid-cache.org/SquidFaq/BugReporting#crashes_and_core_dumps</A>


Garri

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="013800.html">[squid-users] Missing cache files
</A></li>
	<LI>Next message (by thread): <A HREF="013812.html">[squid-users] Missing cache files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13802">[ date ]</a>
              <a href="thread.html#13802">[ thread ]</a>
              <a href="subject.html#13802">[ subject ]</a>
              <a href="author.html#13802">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
