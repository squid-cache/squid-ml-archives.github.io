<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Help: How to calculate all bytes when communicate with client for a request
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Help%3A%20How%20to%20calculate%20all%20bytes%20when%20communicate%0A%20with%20client%20for%20a%20request&In-Reply-To=%3CPS1PR01MB13062EF0025C299B8F4ECCC498900%40PS1PR01MB1306.apcprd01.prod.exchangelabs.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013850.html">
   <LINK REL="Next"  HREF="013863.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Help: How to calculate all bytes when communicate with client for a request</H1>
    <B>wei</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Help%3A%20How%20to%20calculate%20all%20bytes%20when%20communicate%0A%20with%20client%20for%20a%20request&In-Reply-To=%3CPS1PR01MB13062EF0025C299B8F4ECCC498900%40PS1PR01MB1306.apcprd01.prod.exchangelabs.com%3E"
       TITLE="[squid-users] Help: How to calculate all bytes when communicate with client for a request">edwin.zhou at hotmail.com
       </A><BR>
    <I>Tue Dec 20 10:56:30 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="013850.html">[squid-users] Antw: CentOS Linux 7 / Squid Cache: Version	3.5.20 / ecap clamav
</A></li>
        <LI>Next message (by thread): <A HREF="013863.html">[squid-users] Help: How to calculate all bytes when communicate with client for a request
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13843">[ date ]</a>
              <a href="thread.html#13843">[ thread ]</a>
              <a href="subject.html#13843">[ subject ]</a>
              <a href="author.html#13843">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Guys,


I want to calculate all bytes when a request is sent to squid, including:

  1.  the header length that client will send to squid
  2.  the post content length that send to squid
  3.  the response length squid will reply to client

logformat squid %ts.%03tu %6tr %&gt;a %Ss/%03Hs %&lt;st %rm %ru %un %Sh/%&lt;A:%&lt;a %mt %st

In the squid config file, I can only set %st which only include 1 and 3, seems squid ignore the point 2(the post content length is not included in the total size), it also happens when a post request occurs in squid https connection.

I don't need to know the request content, just want to know how many bytes the client totally send including the post and https bytes, is it possible to do this?

Is it possible to modify the squid source code if there is no parameter to control this? Is it just a counting logic that won't be complex? Any help would be much appreciated. Thanks.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20161220/04adb279/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20161220/04adb279/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="013850.html">[squid-users] Antw: CentOS Linux 7 / Squid Cache: Version	3.5.20 / ecap clamav
</A></li>
	<LI>Next message (by thread): <A HREF="013863.html">[squid-users] Help: How to calculate all bytes when communicate with client for a request
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13843">[ date ]</a>
              <a href="thread.html#13843">[ thread ]</a>
              <a href="subject.html#13843">[ subject ]</a>
              <a href="author.html#13843">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
