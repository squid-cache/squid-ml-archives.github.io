<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid freeze each hour.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20freeze%20each%20hour.&In-Reply-To=%3C003d01d25ac5%24285f5840%24791e08c0%24%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013846.html">
   <LINK REL="Next"  HREF="013853.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid freeze each hour.</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20freeze%20each%20hour.&In-Reply-To=%3C003d01d25ac5%24285f5840%24791e08c0%24%40ngtech.co.il%3E"
       TITLE="[squid-users] Squid freeze each hour.">eliezer at ngtech.co.il
       </A><BR>
    <I>Tue Dec 20 13:29:57 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="013846.html">[squid-users] Squid freeze each hour.
</A></li>
        <LI>Next message (by thread): <A HREF="013853.html">[squid-users] Squid freeze each hour.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13847">[ date ]</a>
              <a href="thread.html#13847">[ thread ]</a>
              <a href="subject.html#13847">[ subject ]</a>
              <a href="author.html#13847">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey David,

Some things are missing and we need you to fill the picture for us.
What OS are you running squid ontop?
Are you running it in intercept or tproxy mode?
Are you using ssl-bump?
Are you using it with multiple cores?
Can you attach the squid.conf( removing the confidential details) to this email?

Thanks,
Eliezer

----
Eliezer Croitoru
Linux System Administrator
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>


-----Original Message-----
From: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On Behalf Of David Touzeau
Sent: Tuesday, December 20, 2016 1:53 PM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: [squid-users] Squid freeze each hour.

Hi

I'm using the 3.5.23, each hour, the proxy port did not respond for 3 to 10 minutes.
During the freeze have made a -k debug to see whats happening.
Here a piece of log of the log during the freeze:

Is there something relevant ?:

2016/12/20 12:09:09.072 kid1| 71,6| store_digest.cc(226) storeDigestAddable:
storeDigestAddable: checking entry, key: 877FE61D1641BCA926338890AF1478D2
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(291) refreshCheck: checking freshness of '&lt;none&gt;'
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(312) refreshCheck: Matched '.
0 75%% 2592000'
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(314) refreshCheck:       age:
1024129
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(316) refreshCheck:
check_time:     Tue, 20 Dec 2016 12:09:09 GMT
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(318) refreshCheck:
entry-&gt;timestamp:       Thu, 08 Dec 2016 15:40:20 GMT
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(168) refreshStaleness: FRESH:
expires 1486393228 &gt;= check_time 1482235749
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(338) refreshCheck: Staleness = -1
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(461) refreshCheck: Object isn't stale..
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(463) refreshCheck: returning FRESH_EXPIRES
2016/12/20 12:09:09.072 kid1| 71,6| store_digest.cc(288) storeDigestAdd:
storeDigestAdd: added entry, key: 877FE61D1641BCA926338890AF1478D2
2016/12/20 12:09:09.072 kid1| 71,6| store_digest.cc(226) storeDigestAddable:
storeDigestAddable: checking entry, key: 87BF2568F0A7D71F1E567579CCC216F7
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(291) refreshCheck: checking freshness of '&lt;none&gt;'
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(312) refreshCheck: Matched '.
0 75%% 2592000'
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(314) refreshCheck:       age:
1019863
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(316) refreshCheck:
check_time:     Tue, 20 Dec 2016 12:09:09 GMT
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(318) refreshCheck:
entry-&gt;timestamp:       Thu, 08 Dec 2016 16:51:26 GMT
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(173) refreshStaleness: STALE:
expires 1481215886 &lt; check_time 1482235749
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(338) refreshCheck: Staleness = 1019863
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(362) refreshCheck: YES: Must revalidate stale object (origin set no-cache or private)
2016/12/20 12:09:09.072 kid1| 71,6| store_digest.cc(259) storeDigestAddable:
storeDigestAdd: entry expires within 3600 secs, ignoring
2016/12/20 12:09:09.072 kid1| 71,6| store_digest.cc(226) storeDigestAddable:
storeDigestAddable: checking entry, key: 873F5089579B6B7E351555B77F98259A
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(291) refreshCheck: checking freshness of '&lt;none&gt;'
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(312) refreshCheck: Matched '.
0 75%% 2592000'
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(314) refreshCheck:       age:
956460
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(316) refreshCheck:
check_time:     Tue, 20 Dec 2016 12:09:09 GMT
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(318) refreshCheck:
entry-&gt;timestamp:       Fri, 09 Dec 2016 10:28:09 GMT
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(173) refreshStaleness: STALE:
expires 1481279289 &lt; check_time 1482235749
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(338) refreshCheck: Staleness = 956460
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(362) refreshCheck: YES: Must revalidate stale object (origin set no-cache or private)
2016/12/20 12:09:09.072 kid1| 71,6| store_digest.cc(259) storeDigestAddable:
storeDigestAdd: entry expires within 3600 secs, ignoring
2016/12/20 12:09:09.072 kid1| 71,6| store_digest.cc(226) storeDigestAddable:
storeDigestAddable: checking entry, key: 87FFFEA8EBEFAE0DBC21EBC97D405839
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(291) refreshCheck: checking freshness of '&lt;none&gt;'
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(312) refreshCheck: Matched '.
0 75%% 2592000'
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(314) refreshCheck:       age:
948473
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(316) refreshCheck:
check_time:     Tue, 20 Dec 2016 12:09:09 GMT
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(318) refreshCheck:
entry-&gt;timestamp:       Fri, 09 Dec 2016 12:41:16 GMT
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(179) refreshStaleness: No explicit expiry given, using heuristics to determine freshness
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(198) refreshStaleness: Last modified 19509132 sec before we cached it, L-M factor 75.00% = 14631849 sec freshness lifetime
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(205) refreshStaleness: FRESH:
age 948473 &lt;= stale_age 14631849
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(338) refreshCheck: Staleness = -1
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(461) refreshCheck: Object isn't stale..
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(470) refreshCheck: returning FRESH_LMFACTOR_RULE
2016/12/20 12:09:09.072 kid1| 71,6| store_digest.cc(288) storeDigestAdd:
storeDigestAdd: added entry, key: 87FFFEA8EBEFAE0DBC21EBC97D405839
2016/12/20 12:09:09.072 kid1| 71,6| store_digest.cc(226) storeDigestAddable:
storeDigestAddable: checking entry, key: 873F5CB8872FFC57B8D32027D4DC8174
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(291) refreshCheck: checking freshness of '&lt;none&gt;'
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(312) refreshCheck: Matched '.
0 75%% 2592000'
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(314) refreshCheck:       age:
520259
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(316) refreshCheck:
check_time:     Tue, 20 Dec 2016 12:09:09 GMT
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(318) refreshCheck:
entry-&gt;timestamp:       Wed, 14 Dec 2016 11:38:10 GMT
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(173) refreshStaleness: STALE:
expires 631151999 &lt; check_time 1482235749
2016/12/20 12:09:09.072 kid1| 22,3| refresh.cc(338) refreshCheck: Staleness = 851083750
2016/12/20 12:09:09.073 kid1| 22,3| refresh.cc(362) refreshCheck: YES: Must revalidate stale object (origin set no-cache or private)
2016/12/20 12:09:09.073 kid1| 71,6| store_digest.cc(259) storeDigestAddable:
storeDigestAdd: entry expires within 3600 secs, ignoring
2016/12/20 12:09:09.073 kid1| 71,6| store_digest.cc(226) storeDigestAddable:
storeDigestAddable: checking entry, key: 87FF2043810CAE2CE015C43DBC3E1004
2016/12/20 12:09:09.073 kid1| 22,3| refresh.cc(291) refreshCheck: checking freshness of '&lt;none&gt;'
2016/12/20 12:09:09.073 kid1| 22,3| refresh.cc(312) refreshCheck: Matched '.
0 75%% 2592000'
2016/12/20 12:09:09.073 kid1| 22,3| refresh.cc(314) refreshCheck:       age:
594643
2016/12/20 12:09:09.073 kid1| 22,3| refresh.cc(316) refreshCheck:
check_time:     Tue, 20 Dec 2016 12:09:09 GMT
2016/12/20 12:09:09.073 kid1| 22,3| refresh.cc(318) refreshCheck:
entry-&gt;timestamp:       Tue, 13 Dec 2016 14:58:26 GMT
2016/12/20 12:09:09.073 kid1| 22,3| refresh.cc(173) refreshStaleness: STALE:
expires 1481727507 &lt; check_time 1482235749
2016/12/20 12:09:09.073 kid1| 22,3| refresh.cc(338) refreshCheck: Staleness = 508242
2016/12/20 12:09:09.073 kid1| 71,6| store_digest.cc(259) storeDigestAddable:
storeDigestAdd: entry expires within 3600 secs, ignoring

_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="013846.html">[squid-users] Squid freeze each hour.
</A></li>
	<LI>Next message (by thread): <A HREF="013853.html">[squid-users] Squid freeze each hour.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13847">[ date ]</a>
              <a href="thread.html#13847">[ thread ]</a>
              <a href="subject.html#13847">[ subject ]</a>
              <a href="author.html#13847">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
