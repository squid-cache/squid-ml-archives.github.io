<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] ACL and outgoing IP
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20ACL%20and%20outgoing%20IP&In-Reply-To=%3C1482854632538-4680990.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013905.html">
   <LINK REL="Next"  HREF="013912.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] ACL and outgoing IP</H1>
    <B>qdmetro</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20ACL%20and%20outgoing%20IP&In-Reply-To=%3C1482854632538-4680990.post%40n4.nabble.com%3E"
       TITLE="[squid-users] ACL and outgoing IP">q.dutheil at montpellier3m.fr
       </A><BR>
    <I>Tue Dec 27 16:03:52 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="013905.html">[squid-users] squid 4.0.17 gziped and with another headers?	(clean cache)
</A></li>
        <LI>Next message (by thread): <A HREF="013912.html">[squid-users] ACL and outgoing IP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13911">[ date ]</a>
              <a href="thread.html#13911">[ thread ]</a>
              <a href="subject.html#13911">[ subject ]</a>
              <a href="author.html#13911">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,
I have an issue with acl and outgoing ip address.

I have a squid connected behind a firewall. On the firewall, only the Ip of
the squid (192.168.1.1) is allowed to go on Internet.

Usually, when a user authenticate itself on the proxy, all the requests use
the outgoing IP of the squid (192.168.1.1) so the can access to the website.
I want to allow some websites to be reachable without authentication
(especially for the activation of windows licences). I've tried this :

/acl Microsoft dstdomain .microsoft.com
http_access allow Microsoft/

With this configuration, the requests don't use the outgoing Ip of the proxy
anymore, so they come to my firewall with the source IP of the client (which
is not allowed to go on the Internet).
I've tried this to force the outgoing IP for this acl :

/tcp_outgoing_address 192.168.1.1 Microsoft/

but the request still don't use the IP of the proxy.

Maybe this kind of configuration isn't possible, or I miss something...
Any idea to help me ? 

Thanks !



--
View this message in context: <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/ACL-and-outgoing-IP-tp4680990.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/ACL-and-outgoing-IP-tp4680990.html</A>
Sent from the Squid - Users mailing list archive at Nabble.com.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="013905.html">[squid-users] squid 4.0.17 gziped and with another headers?	(clean cache)
</A></li>
	<LI>Next message (by thread): <A HREF="013912.html">[squid-users] ACL and outgoing IP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13911">[ date ]</a>
              <a href="thread.html#13911">[ thread ]</a>
              <a href="subject.html#13911">[ subject ]</a>
              <a href="author.html#13911">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
