<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] convert http requests to https on proxy setup.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20convert%20http%20requests%20to%20https%20on%20proxy%20setup.&In-Reply-To=%3C56B18053.7090008%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008979.html">
   <LINK REL="Next"  HREF="008981.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] convert http requests to https on proxy setup.</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20convert%20http%20requests%20to%20https%20on%20proxy%20setup.&In-Reply-To=%3C56B18053.7090008%40treenet.co.nz%3E"
       TITLE="[squid-users] convert http requests to https on proxy setup.">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Feb  3 04:21:39 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008979.html">[squid-users] convert http requests to https on proxy setup.
</A></li>
        <LI>Next message (by thread): <A HREF="008981.html">[squid-users] Debugging http_access and http_reply_access
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8980">[ date ]</a>
              <a href="thread.html#8980">[ thread ]</a>
              <a href="subject.html#8980">[ subject ]</a>
              <a href="author.html#8980">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 3/02/2016 1:20 p.m., Antony Stone wrote:
&gt;<i> On Wednesday 03 February 2016 at 01:17:16, user wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> My understanding of the url rewrite program is that the proxy will redirect
</I>&gt;&gt;<i> the URL and the client will make a new request
</I>&gt;<i> 
</I>&gt;<i> OK rewrite-url=&quot;...&quot;
</I>&gt;<i>                 Rewrite the URL to the one supplied in 'rewrite-url='.
</I>&gt;<i>                 The new URL is fetched directly by Squid and returned to
</I>&gt;<i>                 the client as the response to its request.
</I>&gt;<i> 
</I>

Abut be aware that the action violates both HTTP and HTTPS
specifications. In particular it violates the protocol behaviour
guarantees of both, and security requirements of HTTPS. Leaving the
server and client with out-of-sync information about their communication
state.



&gt;&gt;<i> On Tuesday, February 2, 2016 4:10 PM, Antony Stone wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Wednesday 03 February 2016 at 01:04:37, user wrote:
</I>&gt;&gt;&gt;<i> When client sends a http request (say. <A HREF="http://www.abc123.com,">http://www.abc123.com,</A> I would
</I>&gt;&gt;&gt;<i> like my squid proxy to make this request into https
</I>&gt;&gt;&gt;<i> (<A HREF="https://www.abc123.com">https://www.abc123.com</A>)
</I>&gt;&gt;&gt;<i>
</I>
Please consider the consequences carefully. By doing that you are taking
onto your own shoulders full responsibility for the security and privacy
breaches which *will* happen as a result.

If you think that <A HREF="http://">http://</A> and <A HREF="https://">https://</A> URLs are the same, then you are
dangerously mistaken. Even when they produce the same objects the server
internal state is associating the <A HREF="https://">https://</A> URL with a lot of sensitive
data. Some of which may be transmitted either in the content payload
itself, or in the metadata under the guarantee that <A HREF="https://">https://</A> is
_secured_ end-to-end (which is subtly different from 'encrypted').

By providing this gateway you are opening the entire 'secured' server
context to trivial surveillance, hijacking, and corruption/modification
by any HTTP (port 80) MITM. Which completely defeats the entire purpose
of <A HREF="https://">https://</A> (port 443) service existing for that domain.


Rather than raising the domain HTTP access to being as secure as HTTPS,
it does the opposite - lowers the entire traffic to being *worse*
security than HTTP plain-text.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008979.html">[squid-users] convert http requests to https on proxy setup.
</A></li>
	<LI>Next message (by thread): <A HREF="008981.html">[squid-users] Debugging http_access and http_reply_access
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8980">[ date ]</a>
              <a href="thread.html#8980">[ thread ]</a>
              <a href="subject.html#8980">[ subject ]</a>
              <a href="author.html#8980">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
