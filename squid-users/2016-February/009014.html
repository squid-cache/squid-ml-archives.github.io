<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Inject a banner on a couple of sites
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Inject%20a%20banner%20on%20a%20couple%20of%20sites&In-Reply-To=%3C56B502F5.5070103%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009016.html">
   <LINK REL="Next"  HREF="009015.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Inject a banner on a couple of sites</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Inject%20a%20banner%20on%20a%20couple%20of%20sites&In-Reply-To=%3C56B502F5.5070103%40measurement-factory.com%3E"
       TITLE="[squid-users] Inject a banner on a couple of sites">rousskov at measurement-factory.com
       </A><BR>
    <I>Fri Feb  5 20:15:49 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009016.html">[squid-users] Inject a banner on a couple of sites
</A></li>
        <LI>Next message (by thread): <A HREF="009015.html">[squid-users] Inject a banner on a couple of sites
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9014">[ date ]</a>
              <a href="thread.html#9014">[ thread ]</a>
              <a href="subject.html#9014">[ subject ]</a>
              <a href="author.html#9014">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 02/05/2016 02:58 AM, Travel Factory S.r.l. wrote:

&gt;<i> I need to inject some javascript to show some warnings to my users when
</I>&gt;<i> they access a couple of external web sites.
</I>&gt;<i> 
</I>&gt;<i> Is it possible to use squid for this, perhaps together with an icap server?
</I>
As Eliezer has answered already, yes, this is possible with ICAP or
eCAP. Eliezer answer focused on security implications that are probably
irrelevant to you (since you are the one doing the injection). The
following eCAP FAQ answer describes some technical challenges which will
be very relevant if you decide to do this:

  <A HREF="https://answers.launchpad.net/ecap/+faq/1793">https://answers.launchpad.net/ecap/+faq/1793</A>

Factory has an eCAP adapter that has to deal with the above
complications, so I know first-hand that some of them are impossible to
overcome in some cases. On the other hand, if you need something that
works in 90+% of common cases, it is doable to achieve that level of
injection reliability [with some non-trivial eCAP and Javascript
development work].

Please note that if you plan to inject responses from SSL/TLS-protected
origin servers, then you cannot do that unless you are also willing to
use SslBump (which comes with its own huge bag of headaches and
limitations). This limitation is unrelated to eCAP/ICAP.


Finally, if you are really dealing with just &quot;a couple of sites&quot;, then
there might be overall better ways to generate warnings for your users
visiting those sites (without modifying origin server responses). If you
detail your use case, somebody on this mailing list might find a better
solution for you.


HTH,

Alex.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009016.html">[squid-users] Inject a banner on a couple of sites
</A></li>
	<LI>Next message (by thread): <A HREF="009015.html">[squid-users] Inject a banner on a couple of sites
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9014">[ date ]</a>
              <a href="thread.html#9014">[ thread ]</a>
              <a href="subject.html#9014">[ subject ]</a>
              <a href="author.html#9014">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
