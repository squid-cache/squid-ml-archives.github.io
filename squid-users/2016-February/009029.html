<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid and AD Group (ext_ldap_group_acl)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20and%20AD%20Group%20%28ext_ldap_group_acl%29&In-Reply-To=%3C56B8A643.4050508%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009028.html">
   <LINK REL="Next"  HREF="009030.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid and AD Group (ext_ldap_group_acl)</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20and%20AD%20Group%20%28ext_ldap_group_acl%29&In-Reply-To=%3C56B8A643.4050508%40treenet.co.nz%3E"
       TITLE="[squid-users] Squid and AD Group (ext_ldap_group_acl)">squid3 at treenet.co.nz
       </A><BR>
    <I>Mon Feb  8 14:29:23 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009028.html">[squid-users] Squid and AD Group (ext_ldap_group_acl)
</A></li>
        <LI>Next message (by thread): <A HREF="009030.html">[squid-users] kid registration timed out
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9029">[ date ]</a>
              <a href="thread.html#9029">[ thread ]</a>
              <a href="subject.html#9029">[ subject ]</a>
              <a href="author.html#9029">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 8/02/2016 11:06 p.m., Olivier CALVANO wrote:
&gt;<i> Hi Amos,
</I>&gt;<i> 
</I>&gt;<i> Thanks for your help,
</I>&gt;<i> 
</I>&gt;<i> buit if i don't put the line http_access deny !Group_Allowed, user not in
</I>&gt;<i> the group connect connect
</I>&gt;<i> and access to all internet
</I>&gt;<i> 
</I>&gt;<i> my config:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ######################################################################
</I>&gt;<i> # ACL pour les Droits d'acc&#232;s d'apres l'Active Directory
</I>&gt;<i> ######################################################################
</I>&gt;<i> acl Authentification proxy_auth REQUIRED
</I>&gt;<i> http_access deny !Authentification
</I>&gt;<i> acl Group_Allowed external AD_Group Internet-Access
</I>&gt;<i> http_access allow Group_Allowed
</I>&gt;<i> #http_access deny !Group_Allowed
</I>&gt;<i> ######################################################################
</I>&gt;<i> 
</I>&gt;<i> #always_direct deny Authentification
</I>&gt;<i> http_access allow Lan
</I>&gt;<i> http_access deny all
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> i see that i have a
</I>&gt;<i> 
</I>&gt;<i> http_access allow Lan
</I>&gt;<i> 
</I>&gt;<i> it's not this the problems ?
</I>&gt;<i> 
</I>
You did not do what I said to do ...


2016-02-07 11:44 GMT+01:00 Amos Jeffries:
&gt;<i> 
</I>&gt;<i> In this particular config setup use &quot;deny all&quot; instead of &quot;deny
</I>&gt;<i> !Group_Allowed&quot;.
</I>


I did not mention or ask about any other rules in your config because
those two rules that you posted, no matter where you put them, will
always be the last two rules Squid checks.


They allow X and deny !X

Once you match both X and not-X things. What is left? nothing. Nada.

Therefore; No traffic will ever possibly get past both those rules to
anything that follows.


So yes, the &quot;allow Lan&quot; is part of the reason why your change is not
working. BUT only because your change made it part of the problem when
it was not previously relevant.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009028.html">[squid-users] Squid and AD Group (ext_ldap_group_acl)
</A></li>
	<LI>Next message (by thread): <A HREF="009030.html">[squid-users] kid registration timed out
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9029">[ date ]</a>
              <a href="thread.html#9029">[ thread ]</a>
              <a href="subject.html#9029">[ subject ]</a>
              <a href="author.html#9029">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
