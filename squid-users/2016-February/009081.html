<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid Crashing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Crashing&In-Reply-To=%3CVI1PR04MB13597AB565D304EE0AF709AB8FD60%40VI1PR04MB1359.eurprd04.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009080.html">
   <LINK REL="Next"  HREF="009083.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid Crashing</H1>
    <B>Rafael Akchurin</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Crashing&In-Reply-To=%3CVI1PR04MB13597AB565D304EE0AF709AB8FD60%40VI1PR04MB1359.eurprd04.prod.outlook.com%3E"
       TITLE="[squid-users] Squid Crashing">rafael.akchurin at diladele.com
       </A><BR>
    <I>Tue Feb  9 21:54:09 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009080.html">[squid-users] Squid Crashing
</A></li>
        <LI>Next message (by thread): <A HREF="009083.html">[squid-users] Squid Crashing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9081">[ date ]</a>
              <a href="thread.html#9081">[ thread ]</a>
              <a href="subject.html#9081">[ subject ]</a>
              <a href="author.html#9081">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Panda Admin,

If you need to *only* filter by IP/ CONNECT domain name/SNI then you do not need to install Squid&#8217;s Root CA certificate onto your client machines. In this case indeed there is not much sense to use ICAP as for it to work you *must* bump (otherwise you cannot &#8220;look into the SSL stream&#8221;).

Best regards,
Rafael



From: Panda Admin [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">pandanonomous at gmail.com</A>]
Sent: Tuesday, February 9, 2016 10:43 PM
To: Rafael Akchurin &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rafael.akchurin at diladele.com</A>&gt;
Cc: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at squid-cache.org</A>
Subject: Re: [squid-users] Squid Crashing

I would love to use another tool, however can your tools do ssl_bumping aka filtering of HTTPS traffic WITHOUT putting a cert on the client side? This is the only way I've been able to come up with to do both HTTPS and HTTP Content Filtering using squid.

Thanks for all advice:)

On Tue, Feb 9, 2016 at 3:50 PM, Rafael Akchurin &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rafael.akchurin at diladele.com</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rafael.akchurin at diladele.com</A>&gt;&gt; wrote:
Hello Panda Admin,

If you do not mind looking at ICAP filtering instead of only URL filtering please take a look at our qlproxy (ICAP web filter for Squid).
The shalla list formatted folders with categories can be used as is as third party blacklist provider and I presume takes less time to process upon start.

Please note we currently do not support regexes in the list of domain names.

Best regards,
Rafael

From: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt;] On Behalf Of Panda Admin
Sent: Tuesday, February 9, 2016 5:01 PM
To: Kinkie &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">gkinkie at gmail.com</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">gkinkie at gmail.com</A>&gt;&gt;
Cc: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at squid-cache.org</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at squid-cache.org</A>&gt;
Subject: Re: [squid-users] Squid Crashing

I see that, but that's not possible. I still have system memory available.
I just did a top while running squid, never went over 30% memory usage.  It maxed out the CPU but not the memory. So, yeah...still confused.

On Tue, Feb 9, 2016 at 10:55 AM, Kinkie &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">gkinkie at gmail.com</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">gkinkie at gmail.com</A>&gt;&gt; wrote:
Hi,
  it's all in the logs you posted:

ipcCreate: fork: (12) Cannot allocate memory
WARNING: Cannot run '/lib/squid3/ssl_crtd' process.
...
FATAL: Failed to create unlinkd subprocess

You've run of system memory during startup.


On Tue, Feb 9, 2016 at 4:47 PM, Panda Admin &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">pandanonomous at gmail.com</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">pandanonomous at gmail.com</A>&gt;&gt; wrote:
&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> I am running squid 3.5.13 and it crashes with these errors:
</I>&gt;<i>
</I>&gt;<i> 2016/02/09 15:43:24 kid1| Set Current Directory to /var/spool/squid3
</I>&gt;<i> 2016/02/09 15:43:24 kid1| Starting Squid Cache version 3.5.13 for
</I>&gt;<i> x86_64-pc-linux-gnu...
</I>&gt;<i> 2016/02/09 15:43:24 kid1| Service Name: squid
</I>&gt;<i> 2016/02/09 15:43:24 kid1| Process ID 7279
</I>&gt;<i> 2016/02/09 15:43:24 kid1| Process Roles: worker
</I>&gt;<i> 2016/02/09 15:43:24 kid1| With 1024 file descriptors available
</I>&gt;<i> 2016/02/09 15:43:24 kid1| Initializing IP Cache...
</I>&gt;<i> 2016/02/09 15:43:24 kid1| DNS Socket created at [::], FD 6
</I>&gt;<i> 2016/02/09 15:43:24 kid1| DNS Socket created at 0.0.0.0, FD 7
</I>&gt;<i> 2016/02/09 15:43:24 kid1| Adding nameserver 10.31.2.78 from /etc/resolv.conf
</I>&gt;<i> 2016/02/09 15:43:24 kid1| Adding nameserver 10.31.2.79 from /etc/resolv.conf
</I>&gt;<i> 2016/02/09 15:43:24 kid1| Adding domain nuspire.com&lt;<A HREF="http://nuspire.com">http://nuspire.com</A>&gt; from /etc/resolv.conf
</I>&gt;<i> 2016/02/09 15:43:24 kid1| helperOpenServers: Starting 5/10 'ssl_crtd'
</I>&gt;<i> processes
</I>&gt;<i> 2016/02/09 15:43:24 kid1| ipcCreate: fork: (12) Cannot allocate memory
</I>&gt;<i> 2016/02/09 15:43:24 kid1| WARNING: Cannot run '/lib/squid3/ssl_crtd'
</I>&gt;<i> process.
</I>&gt;<i> 2016/02/09 15:43:24 kid1| ipcCreate: fork: (12) Cannot allocate memory
</I>&gt;<i> 2016/02/09 15:43:24 kid1| WARNING: Cannot run '/lib/squid3/ssl_crtd'
</I>&gt;<i> process.
</I>&gt;<i> 2016/02/09 15:43:24 kid1| ipcCreate: fork: (12) Cannot allocate memory
</I>&gt;<i> 2016/02/09 15:43:24 kid1| WARNING: Cannot run '/lib/squid3/ssl_crtd'
</I>&gt;<i> process.
</I>&gt;<i> 2016/02/09 15:43:24 kid1| ipcCreate: fork: (12) Cannot allocate memory
</I>&gt;<i> 2016/02/09 15:43:24 kid1| WARNING: Cannot run '/lib/squid3/ssl_crtd'
</I>&gt;<i> process.
</I>&gt;<i> 2016/02/09 15:43:24 kid1| ipcCreate: fork: (12) Cannot allocate memory
</I>&gt;<i> 2016/02/09 15:43:24 kid1| WARNING: Cannot run '/lib/squid3/ssl_crtd'
</I>&gt;<i> process.
</I>&gt;<i> 2016/02/09 15:43:24 kid1| helperOpenServers: Starting 0/15 'squidGuard'
</I>&gt;<i> processes
</I>&gt;<i> 2016/02/09 15:43:24 kid1| helperOpenServers: No 'squidGuard' processes
</I>&gt;<i> needed.
</I>&gt;<i> 2016/02/09 15:43:24 kid1| Logfile: opening log syslog:local5.info&lt;<A HREF="http://local5.info">http://local5.info</A>&gt;
</I>&gt;<i> 2016/02/09 15:43:24 kid1| ipcCreate: fork: (12) Cannot allocate memory
</I>&gt;<i> FATAL: Failed to create unlinkd subprocess
</I>&gt;<i> Squid Cache (Version 3.5.13): Terminated abnormally.
</I>&gt;<i> CPU Usage: 20.041 seconds = 19.115 user + 0.926 sys
</I>&gt;<i> Maximum Resident Size: 4019840 KB
</I>&gt;<i> Page faults with physical i/o: 0
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Anybody have an idea why?
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>


--
    Francesco


-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160209/c3047f30/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160209/c3047f30/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009080.html">[squid-users] Squid Crashing
</A></li>
	<LI>Next message (by thread): <A HREF="009083.html">[squid-users] Squid Crashing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9081">[ date ]</a>
              <a href="thread.html#9081">[ thread ]</a>
              <a href="subject.html#9081">[ subject ]</a>
              <a href="author.html#9081">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
