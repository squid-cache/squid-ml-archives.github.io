<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Facing issue in Internet explorer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Facing%20issue%20in%20Internet%20explorer&In-Reply-To=%3CCABv%3DyBc-3%3DtKgnFN5Ad%3DToW4ruofhLWG4YHetJBHooaB0vr8Qg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009098.html">
   <LINK REL="Next"  HREF="009103.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Facing issue in Internet explorer</H1>
    <B>Prasad Desai</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Facing%20issue%20in%20Internet%20explorer&In-Reply-To=%3CCABv%3DyBc-3%3DtKgnFN5Ad%3DToW4ruofhLWG4YHetJBHooaB0vr8Qg%40mail.gmail.com%3E"
       TITLE="[squid-users] Facing issue in Internet explorer">prasad.desai at shreshtait.com
       </A><BR>
    <I>Fri Feb 12 08:07:35 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009098.html">[squid-users] Filtering HTTPS URLs
</A></li>
        <LI>Next message (by thread): <A HREF="009103.html">[squid-users] Facing issue in Internet explorer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9100">[ date ]</a>
              <a href="thread.html#9100">[ thread ]</a>
              <a href="subject.html#9100">[ subject ]</a>
              <a href="author.html#9100">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I have successfully configured SSLBump Peek and Splice in my transparent
proxy and it is working as expected except in Internet explorer.

For example, in IE version 8, getting an error given below,

(71) Protocol error (TLS code: SQUID_ERR_SSL_HANDSHAKE)
Handshake with SSL server failed: error:1409F07F:SSL
routines:SSL3_WRITE_PENDING:bad write retry

Below is squid.conf,

visible_hostname mysite.com
httpd_suppress_version_string on
via off
forwarded_for delete
deny_info <A HREF="http://192.168.3.33/error.html">http://192.168.3.33/error.html</A> blockfiles
acl lan src 192.168.4.0/24 192.168.6.0/24 192.168.3.0/24
http_access allow lan
acl SSL_ports port 443
acl Safe_ports port 80        # http
acl Safe_ports port 21        # ftp
acl Safe_ports port 443        # https
acl Safe_ports port 70        # gopher
acl Safe_ports port 210        # wais
acl Safe_ports port 1025-65535    # unregistered ports
acl Safe_ports port 280        # http-mgmt
acl Safe_ports port 488        # gss-http
acl Safe_ports port 591        # filemaker
acl Safe_ports port 777        # multiling http
acl CONNECT method CONNECT
strip_query_terms off
http_access allow manager localhost
http_access deny manager
http_access deny !Safe_ports
http_access deny CONNECT !SSL_ports
http_access deny all
sslproxy_flags DONT_VERIFY_PEER DONT_VERIFY_DOMAIN
acl disable-ssl-bump ssl::server_name &quot;/etc/squid/no-ssl-bump.acl&quot;
acl BadSite ssl_error SQUID_X509_V_ERR_DOMAIN_MISMATCH
sslproxy_cert_error allow BadSite
acl step1 at_step SSLBump1
acl step2 at_step SSLBump2
acl step3 at_step SSLBump3
ssl_bump peek step1 all
ssl_bump splice step2 disable-ssl-bump
ssl_bump stare step2 all
ssl_bump splice step3 disable-ssl-bump
ssl_bump bump step3 all
http_port 3130
http_port 3128 intercept
https_port 3129 intercept ssl-bump generate-host-certificates=on
dynamic_cert_mem_cache_size=8MB cert=/etc/squid/ssl_cert/myca.pem
key=/etc/squid/ssl_cert/myca.pem
sslcrtd_program /usr/lib/squid/ssl_crtd -s /var/lib/ssl_db -M 8MB
sslcrtd_children 8 startup=1 idle=1
coredump_dir /var/spool/squid
refresh_pattern ^ftp:        1440    20%    10080
refresh_pattern ^gopher:    1440    0%    1440
refresh_pattern -i (/cgi-bin/|\?) 0    0%    0
refresh_pattern .        0    20%    4320

Any inputs to resolve this error will be much appreciated.

-- 
Best,
Prasad Desai
Systems Engineer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160212/e8852914/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160212/e8852914/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009098.html">[squid-users] Filtering HTTPS URLs
</A></li>
	<LI>Next message (by thread): <A HREF="009103.html">[squid-users] Facing issue in Internet explorer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9100">[ date ]</a>
              <a href="thread.html#9100">[ thread ]</a>
              <a href="subject.html#9100">[ subject ]</a>
              <a href="author.html#9100">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
