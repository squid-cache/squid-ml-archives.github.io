<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] SSL bump memory leak
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SSL%20bump%20memory%20leak&In-Reply-To=%3C56CE308F.5000508%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009274.html">
   <LINK REL="Next"  HREF="009299.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] SSL bump memory leak</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SSL%20bump%20memory%20leak&In-Reply-To=%3C56CE308F.5000508%40treenet.co.nz%3E"
       TITLE="[squid-users] SSL bump memory leak">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Feb 24 22:37:03 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009274.html">[squid-users] SSL bump memory leak
</A></li>
        <LI>Next message (by thread): <A HREF="009299.html">[squid-users] SSL bump memory leak
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9298">[ date ]</a>
              <a href="thread.html#9298">[ thread ]</a>
              <a href="subject.html#9298">[ subject ]</a>
              <a href="author.html#9298">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 24/02/2016 11:17 p.m., Steve Hill wrote:
&gt;<i> On 23/02/16 21:28, Amos Jeffries wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> Ah, you said &quot;a small number&quot; of wiki cert strings with those details. I
</I>&gt;&gt;<i> took that as meaning a small number of definitely squid generated ones
</I>&gt;&gt;<i> amidst the 130K indeterminate ones leaking.
</I>&gt;<i> 
</I>&gt;<i> Ah, a misunderstanding on my part - sorry.  Yes, there were 302 strings
</I>&gt;<i> containing &quot;signTrusted&quot; (77 of them unique), all of them appear to be
</I>&gt;<i> server certificates (i.e. with a CN containing a domain name), so it is
</I>&gt;<i> possibly reasonable to assume that they were for in-progress sessions
</I>&gt;<i> and would therefore be cleaned up.
</I>&gt;<i> 
</I>&gt;<i> This leaves around 131297 other subject/issuer strings (581 unique)
</I>&gt;<i> which, to my mind, can't be explained by anything other than a leak
</I>&gt;<i> (whether that be a &quot;real&quot; leak where the pointers have been discarded
</I>&gt;<i> without freeing the data, or a &quot;pseudo&quot; leak caused by references to
</I>&gt;<i> them being held forever).
</I>&gt;<i> 
</I>
I agree its amost certainly a leak.

Christos and William L. have been fixed some leaks in the Squid-4 cert
generator non-caching configs recently. I'm not sure yet if its
applicable to 3.5 or not, but from the sounds of this it very well could
be the same thing.
Unfortunately the code is quite a bit different in this area now so the
patches wont directly prot. I think you had best get in touch with
Christos about this.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009274.html">[squid-users] SSL bump memory leak
</A></li>
	<LI>Next message (by thread): <A HREF="009299.html">[squid-users] SSL bump memory leak
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9298">[ date ]</a>
              <a href="thread.html#9298">[ thread ]</a>
              <a href="subject.html#9298">[ subject ]</a>
              <a href="author.html#9298">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
