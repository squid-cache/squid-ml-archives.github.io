<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Youtube &quot;challenges&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Youtube%20%22challenges%22&In-Reply-To=%3C56CF137E.9020002%40opendium.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009305.html">
   <LINK REL="Next"  HREF="009311.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Youtube &quot;challenges&quot;</H1>
    <B>Steve Hill</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Youtube%20%22challenges%22&In-Reply-To=%3C56CF137E.9020002%40opendium.com%3E"
       TITLE="[squid-users] Youtube &quot;challenges&quot;">steve at opendium.com
       </A><BR>
    <I>Thu Feb 25 14:45:18 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009305.html">[squid-users] Youtube &quot;challenges&quot;
</A></li>
        <LI>Next message (by thread): <A HREF="009311.html">[squid-users] Youtube &quot;challenges&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9310">[ date ]</a>
              <a href="thread.html#9310">[ thread ]</a>
              <a href="subject.html#9310">[ subject ]</a>
              <a href="author.html#9310">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 25/02/16 03:52, Darren wrote:

&gt;<i> The user visits a page on my server with the YouTube links. Visiting
</I>&gt;<i> this page triggers a state based ACL (something like the captive portal
</I>&gt;<i> login).
</I>&gt;<i>
</I>&gt;<i> The user then clicks a YouTube link and squid checks this ACL to see if
</I>&gt;<i> the user is originating the request from my local page and if it is,
</I>&gt;<i> allows the splice to YouTube and the video can play.
</I>
Squid can't tell that the requests were referred by your page - the 
iframe itself may have your page as the referrer (although that 
certainly isn't guaranteed), but the objects that are referred within 
that iframe won't have a useful referrer string.

You could dynamically create an ACL that allows the whole of youtube 
when the user has your page open, but that is fairly insecure since they 
could just open the page and then they would be allowed to access 
anything through youtube.

In my experience (and this is what we do), to be at all secure you have 
to analyse the page itself in order to figure out which specific URIs to 
whitelist (or at least, have those URIs hard-coded somewhere else).

Either way, YouTube uses https, so unless you're going to blindly allow 
the whole of youtube whenever a user visits your page, you're going to 
need to ssl bump the requests in order to have an ACL based on the 
referrer and path.  And as you know, ssl bumping involves sticking a 
certificate on each device.

-- 
  - Steve Hill
    Technical Director
    Opendium Limited     <A HREF="http://www.opendium.com">http://www.opendium.com</A>

Direct contacts:
    Instant messager: xmpp:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">steve at opendium.com</A>
    Email:            <A HREF="https://lists.squid-cache.org/listinfo/squid-users">steve at opendium.com</A>
    Phone:            sip:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">steve at opendium.com</A>

Sales / enquiries contacts:
    Email:            <A HREF="https://lists.squid-cache.org/listinfo/squid-users">sales at opendium.com</A>
    Phone:            +44-1792-824568 / sip:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">sales at opendium.com</A>

Support contacts:
    Email:            <A HREF="https://lists.squid-cache.org/listinfo/squid-users">support at opendium.com</A>
    Phone:            +44-1792-825748 / sip:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">support at opendium.com</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009305.html">[squid-users] Youtube &quot;challenges&quot;
</A></li>
	<LI>Next message (by thread): <A HREF="009311.html">[squid-users] Youtube &quot;challenges&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9310">[ date ]</a>
              <a href="thread.html#9310">[ thread ]</a>
              <a href="subject.html#9310">[ subject ]</a>
              <a href="author.html#9310">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
