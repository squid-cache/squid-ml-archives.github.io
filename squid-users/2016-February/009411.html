<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Is jesred still compatible with squid 4.x?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Is%20jesred%20still%20compatible%20with%20squid%204.x%3F&In-Reply-To=%3C56D39D96.2060507%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009410.html">
   <LINK REL="Next"  HREF="009358.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Is jesred still compatible with squid 4.x?</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Is%20jesred%20still%20compatible%20with%20squid%204.x%3F&In-Reply-To=%3C56D39D96.2060507%40ngtech.co.il%3E"
       TITLE="[squid-users] Is jesred still compatible with squid 4.x?">eliezer at ngtech.co.il
       </A><BR>
    <I>Mon Feb 29 01:23:34 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009410.html">[squid-users] Is jesred still compatible with squid 4.x?
</A></li>
        <LI>Next message (by thread): <A HREF="009358.html">[squid-users] squid SMP rock store , any luck with new releases ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9411">[ date ]</a>
              <a href="thread.html#9411">[ thread ]</a>
              <a href="subject.html#9411">[ subject ]</a>
              <a href="author.html#9411">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey,

So it seems pretty simple.
Your helper is very good and simple for the task and at-least we know 
that if your helper works it's something with jesred 100%.
I do not know german but it's not really a big deal to understand when 
you actually know how things works in general.
I do not know what settings exactly you need but you can take a look at 
squid sources:
<A HREF="http://bazaar.launchpad.net/~squid/squid/trunk/view/head:/src/store/id_rewriters/file/storeid_file_rewrite.pl.in">http://bazaar.launchpad.net/~squid/squid/trunk/view/head:/src/store/id_rewriters/file/storeid_file_rewrite.pl.in</A>

Which is a very simple perl script that works with a &quot;config&quot; file.
It was designed to work with StoreID and some examples are at:
<A HREF="http://wiki.squid-cache.org/Features/StoreID/DB">http://wiki.squid-cache.org/Features/StoreID/DB</A>

But I really do not think that for a simple task such as this a special 
compiled version of jesred will be much more efficient then the python 
or perl scripts.
This is also since jesred doesn't implement any form of concurrency support.

I have been working on an improved compiled version(Golang) of a helper 
such as the above perl one but yet to have seen a really good use case 
that will benefit from that too much.

It is not 100% clear to me how the apt-cacher-ng decides which host to 
fetch the requests from but if it works then it is.

All The Bests,
Eliezer

On 29/02/2016 02:34, Karl-Philipp Richter wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> Am 29.02.2016 um 01:13 schrieb Eliezer Croitoru:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I do not remember if I have tried to work with such a setup in the past
</I>&gt;&gt;<i> but, can you give some technical details on the desired setup?
</I>&gt;<i> I want to manipulate URLs for Ubuntu and Debian .deb packages download
</I>&gt;<i> requests (usually for fixed (ftp.debian.org) or predictable URLs
</I>&gt;<i> ([country].ubuntu.archive.com) which are passed to squid used as
</I>&gt;<i> intercepting HTTP cache to be served by an `apt-cacher-ng` instance.
</I>&gt;<i> Configuration for clients and VMs running on clients should be zero.
</I>&gt;<i>
</I>&gt;&gt;<i> Are there any written documentations about such a setup already? if so can you redirect me to one of these?
</I>&gt;<i> Depends on your german skills:
</I>&gt;<i> <A HREF="https://forum.ubuntuusers.de/topic/squid-transparent-und-apt-cacher-ng/">https://forum.ubuntuusers.de/topic/squid-transparent-und-apt-cacher-ng/</A>
</I>&gt;<i>
</I>&gt;&gt;<i> Basically the jesred program as far as I remembered it was not developed for a very long time but I have found the next sources:
</I>&gt;&gt;<i> <A HREF="https://github.com/sawcache/jesred/blob/master/main.c#L166">https://github.com/sawcache/jesred/blob/master/main.c#L166</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Which indicates that someone did something with it to somehow work with Squid 3.5+ including 4.X.
</I>&gt;&gt;<i> If I would have known more about the setup I would probably be able to answer the question.
</I>&gt;<i> This still seems quite fragile, e.g. there's no automatic installation
</I>&gt;<i> routine (which I suggested as autconf setup in pull request
</I>&gt;<i> <A HREF="https://github.com/sawcache/jesred/pull/2">https://github.com/sawcache/jesred/pull/2</A>). I'd like this fixed or
</I>&gt;<i> solved somehow to get some activity in the project as well. Otherwise
</I>&gt;<i> I'm not too eager to contribute since my script at
</I>&gt;<i> <A HREF="https://github.com/krichter722/apt-cacher-ng-rewriter">https://github.com/krichter722/apt-cacher-ng-rewriter</A> works for now, but
</I>&gt;<i> isn't overly complicated and not configurable.
</I>&gt;<i>
</I>&gt;&gt;<i> Also what changes in 4.X communications are you talking about?
</I>&gt;&gt;<i> The changes I know about are from 3.4-3.5
</I>&gt;<i> I was referring to probable communication changes which &quot;might&quot; have
</I>&gt;<i> been implemented - I've already made bad experience with (and filed bugs
</I>&gt;<i> about) outdated `squid` documentation, so I prefer to ask.
</I>&gt;<i>
</I>&gt;<i> It might just be the case that `apt-cacher-ng` doesn't accept the output
</I>&gt;<i> of `jesred` (failure described above), but I'm wondering what could
</I>&gt;<i> there be wrong given the fact that my script works and this
</I>&gt;<i> communication protocol is no rocket science. That was the original
</I>&gt;<i> reason for my question/request for feedback.
</I>&gt;<i>
</I>&gt;<i> -Kalle
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009410.html">[squid-users] Is jesred still compatible with squid 4.x?
</A></li>
	<LI>Next message (by thread): <A HREF="009358.html">[squid-users] squid SMP rock store , any luck with new releases ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9411">[ date ]</a>
              <a href="thread.html#9411">[ thread ]</a>
              <a href="subject.html#9411">[ subject ]</a>
              <a href="author.html#9411">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
