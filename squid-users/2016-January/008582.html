<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] example of ecap code that filters incoming requests by filter ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20example%20of%20ecap%20code%20that%20filters%20incoming%0A%20requests%20by%20filter%20%3F&In-Reply-To=%3C568BA866.7090609%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008579.html">
   <LINK REL="Next"  HREF="008533.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] example of ecap code that filters incoming requests by filter ?</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20example%20of%20ecap%20code%20that%20filters%20incoming%0A%20requests%20by%20filter%20%3F&In-Reply-To=%3C568BA866.7090609%40treenet.co.nz%3E"
       TITLE="[squid-users] example of ecap code that filters incoming requests by filter ?">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Jan  5 11:26:30 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008579.html">[squid-users] example of ecap code that filters incoming requests by filter ?
</A></li>
        <LI>Next message (by thread): <A HREF="008533.html">[squid-users] SSL Bump - Splice - Chrome error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8582">[ date ]</a>
              <a href="thread.html#8582">[ thread ]</a>
              <a href="subject.html#8582">[ subject ]</a>
              <a href="author.html#8582">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 5/01/2016 11:15 p.m., Nir Krakowski wrote:
&gt;<i> I meant to hack rewrite to supply more header information at rewrite
</I>&gt;<i> instead of just URL and method.
</I>&gt;<i> 
</I>&gt;<i> for squid3-3.3.8 it would look like
</I>&gt;<i>     sz = snprintf(buf, MAX_REDIRECTOR_REQUEST_STRLEN*2, &quot;%s %s/%s %s %s
</I>&gt;<i> myip=%s myport=%d ua=%s cookie=%s\n&quot;,
</I>

What you are speaking of is the key-extras feature of Squid-3.5.
&lt;<A HREF="http://www.squid-cache.org/Doc/config/url_rewrite_extras/">http://www.squid-cache.org/Doc/config/url_rewrite_extras/</A>&gt;
Please upgrade, 3.3 has been deprecated for several years now.

But you asked about eCAP/ICAP filters. The answer to that is that you
need a REQMOD pre-cache adaptor, the code examples for that should be
the same as for any other adaptor it just requives request headers from
Squid and sends back the reply to deliver to the client.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008579.html">[squid-users] example of ecap code that filters incoming requests by filter ?
</A></li>
	<LI>Next message (by thread): <A HREF="008533.html">[squid-users] SSL Bump - Splice - Chrome error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8582">[ date ]</a>
              <a href="thread.html#8582">[ thread ]</a>
              <a href="subject.html#8582">[ subject ]</a>
              <a href="author.html#8582">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
