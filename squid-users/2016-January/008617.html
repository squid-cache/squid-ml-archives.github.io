<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] problem with squidGuard redirect page after upgrading squid
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20problem%20with%20squidGuard%20redirect%20page%20after%0A%20upgrading%20squid&In-Reply-To=%3C568E6098.1080705%40urlfilterdb.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008614.html">
   <LINK REL="Next"  HREF="008622.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] problem with squidGuard redirect page after upgrading squid</H1>
    <B>Marcus Kool</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20problem%20with%20squidGuard%20redirect%20page%20after%0A%20upgrading%20squid&In-Reply-To=%3C568E6098.1080705%40urlfilterdb.com%3E"
       TITLE="[squid-users] problem with squidGuard redirect page after upgrading squid">marcus.kool at urlfilterdb.com
       </A><BR>
    <I>Thu Jan  7 12:56:56 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008614.html">[squid-users] problem with squidGuard redirect page after upgrading squid
</A></li>
        <LI>Next message (by thread): <A HREF="008622.html">[squid-users] problem with squidGuard redirect page after upgrading squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8617">[ date ]</a>
              <a href="thread.html#8617">[ thread ]</a>
              <a href="subject.html#8617">[ subject ]</a>
              <a href="author.html#8617">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

On 01/07/2016 12:31 AM, Jason Haar wrote:
&gt;<i> On 06/01/16 00:04, Amos Jeffries wrote:
</I>&gt;&gt;<i> Yes. Squid always has been able to given enough RAM. Squid stores most
</I>&gt;&gt;<i> ACLs in memory as Splay trees, so entries are sorted by frequency of use
</I>&gt;&gt;<i> which is dynamically adapted over time. Regex are pre-parsed and
</I>&gt;&gt;<i> aggregated together for reduced matching instead of re-interpreted and
</I>&gt;&gt;<i> parsed per-request.
</I>&gt;<i> Great to hear. I've got some 600,000+ domain lists (ie dstdomain) and
</I>&gt;<i> 60,000+ url lists (ie url_regex) acls, and there are a couple of
</I>&gt;<i> &quot;gotchas&quot; I've picked up during testing
</I>
Squid has regex optimisation that was donated by me and is essentially a
copy of what was already working a long time in ufdbGuard.
regexes are unlimited by the POSIX standard so you can have an
&quot;unlimited&quot; (limited by hardware resources) number of regexes.

&gt;<i> 1. at startup squid reports &quot;WARNING: there are more than 100 regular
</I>&gt;<i> expressions. Consider using less REs&quot;. Is that now legacy and ignorable?
</I>&gt;<i> (should that be removed?). Obviously I have over 60,000 REs
</I>&gt;<i> 2. making any change to squid and restarting/reconfiguring it now means
</I>&gt;<i> I'm seeing a 12sec outage as squid reads those acls off SSD
</I>&gt;<i> drives/parses them/etc. With squidguard that outage is hidden because
</I>&gt;<i> squidguard uses indexed files instead of the raw files and that
</I>&gt;<i> parsing/etc can be done offline. That behavioral change is pretty
</I>&gt;<i> dramatic: making a minor, unrelated change to squid now involves a
</I>&gt;<i> 10+sec outage (instead of &lt;1sec). I'd say &quot;outsourcing&quot; this kind of
</I>&gt;<i> function to another process (such as url_rewriter or ICAP) still has
</I>&gt;<i> it's advantages ;-)
</I>
ufdbGuard is 98% compatible with squidGuard, is free open source
software with regular updates.
ufdbGuard is also very fast due to a new database format optimised
for URLs.

As with squidGuard, when a new config is loaded by ufdbGuard, the web proxy
keeps on working without any interruption for the end user.

Can you explain what the huge number of regexes is used for ?

Marcus

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008614.html">[squid-users] problem with squidGuard redirect page after upgrading squid
</A></li>
	<LI>Next message (by thread): <A HREF="008622.html">[squid-users] problem with squidGuard redirect page after upgrading squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8617">[ date ]</a>
              <a href="thread.html#8617">[ thread ]</a>
              <a href="subject.html#8617">[ subject ]</a>
              <a href="author.html#8617">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
