<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] kerberos authentication with a machine account doesn't work
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20kerberos%20authentication%20with%20a%20machine%20account%0A%20doesn%27t%20work&In-Reply-To=%3C56936283.9050601%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008665.html">
   <LINK REL="Next"  HREF="008687.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] kerberos authentication with a machine account doesn't work</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20kerberos%20authentication%20with%20a%20machine%20account%0A%20doesn%27t%20work&In-Reply-To=%3C56936283.9050601%40treenet.co.nz%3E"
       TITLE="[squid-users] kerberos authentication with a machine account doesn't work">squid3 at treenet.co.nz
       </A><BR>
    <I>Mon Jan 11 08:06:27 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008665.html">[squid-users] kerberos authentication with a machine account	doesn't work
</A></li>
        <LI>Next message (by thread): <A HREF="008687.html">[squid-users] kerberos authentication with a machine account	doesn't work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8667">[ date ]</a>
              <a href="thread.html#8667">[ thread ]</a>
              <a href="subject.html#8667">[ subject ]</a>
              <a href="author.html#8667">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/01/2016 2:48 p.m., LYMN wrote:
&gt;<i>
</I>&gt;<i> I did manage to get this working, you did mention the correct solution
</I>&gt;<i> right down the end of your message.
</I>&gt;<i> 
</I>
Correct for you yes. That can happen when making half-blind guesses at
what the problem actually is based on partial information. It might have
been any of the issues mentioned or any of the solutions mentioned.
Others in future may find differently depending on what they have mucked
up or payed around with before asking.

&gt;<i> On Thu, Jan 07, 2016 at 09:37:46AM +0100, L.P.H. van Belle wrote:
</I>&gt;&gt;<i> Hai, 
</I>&gt;&gt;<i>  
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Few things to check. 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /etc/krb5.keytab should have rights 600 (root:root) 
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> And this was the problem but it should not, in my case, be as you
</I>&gt;<i> stated. In fact, /etc/krb5.keytab needed to have rights 640 with
</I>&gt;<i> ownership root:nobody.  This is because the kerberos authenticator runs
</I>&gt;<i> as the user nobody and needs access to the keytab.  I am not so sure I
</I>&gt;<i> like this situation because this does mean the nobody user now has
</I>&gt;<i> access to the machine kerberos keys not just the ones for the http SPN.
</I>
&quot;nobody&quot; is the default low-privileged user account unless you build
Squid with the --with-default-user=X - in which cases it will default to
the &quot;X&quot; account.

You can also configure &quot;cache_effective_user X&quot; in squid.conf to
override the default if your Squid was built with one you dont want to use.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008665.html">[squid-users] kerberos authentication with a machine account	doesn't work
</A></li>
	<LI>Next message (by thread): <A HREF="008687.html">[squid-users] kerberos authentication with a machine account	doesn't work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8667">[ date ]</a>
              <a href="thread.html#8667">[ thread ]</a>
              <a href="subject.html#8667">[ subject ]</a>
              <a href="author.html#8667">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
