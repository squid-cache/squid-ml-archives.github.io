<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] kerberos authentication with a machine account	doesn't work
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20kerberos%20authentication%20with%20a%20machine%20account%0A%09doesn%27t%20work&In-Reply-To=%3C20160111232844.GB19684%40baea.com.au%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008667.html">
   <LINK REL="Next"  HREF="008708.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] kerberos authentication with a machine account	doesn't work</H1>
    <B>LYMN</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20kerberos%20authentication%20with%20a%20machine%20account%0A%09doesn%27t%20work&In-Reply-To=%3C20160111232844.GB19684%40baea.com.au%3E"
       TITLE="[squid-users] kerberos authentication with a machine account	doesn't work">brett.lymn at baesystems.com
       </A><BR>
    <I>Mon Jan 11 23:28:44 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008667.html">[squid-users] kerberos authentication with a machine account doesn't work
</A></li>
        <LI>Next message (by thread): <A HREF="008708.html">[squid-users] kerberos authentication with a machine account doesn't work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8687">[ date ]</a>
              <a href="thread.html#8687">[ thread ]</a>
              <a href="subject.html#8687">[ subject ]</a>
              <a href="author.html#8687">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Jan 11, 2016 at 09:06:27PM +1300, Amos Jeffries wrote:
&gt;<i> On 11/01/2016 2:48 p.m., LYMN wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I did manage to get this working, you did mention the correct solution
</I>&gt;<i> &gt; right down the end of your message.
</I>&gt;<i> &gt; 
</I>&gt;<i> 
</I>&gt;<i> Correct for you yes. That can happen when making half-blind guesses at
</I>&gt;<i> what the problem actually is based on partial information. It might have
</I>&gt;<i> been any of the issues mentioned or any of the solutions mentioned.
</I>&gt;<i> Others in future may find differently depending on what they have mucked
</I>&gt;<i> up or payed around with before asking.
</I>&gt;<i> 
</I>
Yes, correct for me.  It indeed could be one or more of the suggestions
that were made.  Kerberos errors are such fun to debug made more so by
multiple problems causing the same error message.  I have had a
situation where I had a few different problems and it wasn't until I had
sorted them all that the error message went away but it is so unsettling
to get the same error after you have made a change that you are sure
makes things correct.

&gt;<i> &gt; On Thu, Jan 07, 2016 at 09:37:46AM +0100, L.P.H. van Belle wrote:
</I>&gt;<i> &gt;&gt; Hai, 
</I>&gt;<i> &gt;&gt;  
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Few things to check. 
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; /etc/krb5.keytab should have rights 600 (root:root) 
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; And this was the problem but it should not, in my case, be as you
</I>&gt;<i> &gt; stated. In fact, /etc/krb5.keytab needed to have rights 640 with
</I>&gt;<i> &gt; ownership root:nobody.  This is because the kerberos authenticator runs
</I>&gt;<i> &gt; as the user nobody and needs access to the keytab.  I am not so sure I
</I>&gt;<i> &gt; like this situation because this does mean the nobody user now has
</I>&gt;<i> &gt; access to the machine kerberos keys not just the ones for the http SPN.
</I>&gt;<i> 
</I>&gt;<i> &quot;nobody&quot; is the default low-privileged user account unless you build
</I>&gt;<i> Squid with the --with-default-user=X - in which cases it will default to
</I>&gt;<i> the &quot;X&quot; account.
</I>&gt;<i> 
</I>&gt;<i> You can also configure &quot;cache_effective_user X&quot; in squid.conf to
</I>&gt;<i> override the default if your Squid was built with one you dont want to use.
</I>&gt;<i> 
</I>
Yes.  I think you have clarified the point that I was trying to make
which was the user/group used may depend on your configuration or squid
build.

-- 
Brett Lymn
This email has been sent on behalf of one of the following companies within the BAE Systems Australia group of companies:

    BAE Systems Australia Limited - Australian Company Number 008 423 005
    BAE Systems Australia Defence Pty Limited - Australian Company Number 006 870 846
    BAE Systems Australia Logistics Pty Limited - Australian Company Number 086 228 864

Our registered office is Evans Building, Taranaki Road, Edinburgh Parks,
Edinburgh, South Australia, 5111. If the identity of the sending company is
not clear from the content of this email please contact the sender.

This email and any attachments may contain confidential and legally
privileged information.  If you are not the intended recipient, do not copy or
disclose its content, but please reply to this email immediately and highlight
the error to the sender and then immediately delete the message.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008667.html">[squid-users] kerberos authentication with a machine account doesn't work
</A></li>
	<LI>Next message (by thread): <A HREF="008708.html">[squid-users] kerberos authentication with a machine account doesn't work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8687">[ date ]</a>
              <a href="thread.html#8687">[ thread ]</a>
              <a href="subject.html#8687">[ subject ]</a>
              <a href="author.html#8687">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
