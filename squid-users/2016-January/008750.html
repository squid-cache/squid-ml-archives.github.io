<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Possible SSL Bug in v3.5.13?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Possible%20SSL%20Bug%20in%20v3.5.13%3F&In-Reply-To=%3C5697BA5D.4030009%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008749.html">
   <LINK REL="Next"  HREF="008707.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Possible SSL Bug in v3.5.13?</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Possible%20SSL%20Bug%20in%20v3.5.13%3F&In-Reply-To=%3C5697BA5D.4030009%40treenet.co.nz%3E"
       TITLE="[squid-users] Possible SSL Bug in v3.5.13?">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Jan 14 15:10:21 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008749.html">[squid-users] Possible SSL Bug in v3.5.13?
</A></li>
        <LI>Next message (by thread): <A HREF="008707.html">[squid-users] &#22238;&#22797;&#65306;Re:  cache_mem differs from output in mgr:config
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8750">[ date ]</a>
              <a href="thread.html#8750">[ thread ]</a>
              <a href="subject.html#8750">[ subject ]</a>
              <a href="author.html#8750">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 15/01/2016 3:47 a.m., David Marcos wrote:
&gt;<i> Eliezer, Amos,
</I>&gt;<i> 
</I>&gt;<i> I wanted to follow-up on the below thread since I encountered an
</I>&gt;<i> additional, interesting issue.
</I>&gt;<i> 
</I>&gt;<i> Per my issue with shutterfly.com below, if I *do not* set an ECDH cipher in
</I>&gt;<i> the tls-dh parameter, then I have to remove NO_SSLv2 from sslproxy_options.
</I>&gt;<i> 
</I>&gt;<i> However, if I set an ECDH cipher (I chose secp384r1), I can add NO_SSLv2
</I>&gt;<i> back to sslproxy_options and shutterfly.com works without a hitch.  My full
</I>&gt;<i> sslproxy_options list now looks as follows having set the ECDH cipher in
</I>&gt;<i> tls-dh -
</I>&gt;<i> 
</I>&gt;<i> sslproxy_options
</I>&gt;<i> No_Compression,NO_TLSv1,NO_SSLv2,NO_SSLv3,SINGLE_ECDH_USE,SINGLE_DH_USE,CIPHER_SERVER_PREFERENCE
</I>&gt;<i> 
</I>&gt;<i> I don't know if this is a bug or expected behavior, so defer to you.  If
</I>&gt;<i> you'd like me to submit a bug request, I can do so.
</I>
That negotiation behaviour is within the expected range of things. It is
possible the server has disabled the old DH ciphers unless SSLv2 is
negotiated. Combined with your previous config that would result in
Squid not being able to negotiate any cipher at all with TLSv1.1+ protocols.

The event should not be affecting any other traffic through the proxy
though. So if it really is crashing or hanging Squid that is a bug.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008749.html">[squid-users] Possible SSL Bug in v3.5.13?
</A></li>
	<LI>Next message (by thread): <A HREF="008707.html">[squid-users] &#22238;&#22797;&#65306;Re:  cache_mem differs from output in mgr:config
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8750">[ date ]</a>
              <a href="thread.html#8750">[ thread ]</a>
              <a href="subject.html#8750">[ subject ]</a>
              <a href="author.html#8750">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
