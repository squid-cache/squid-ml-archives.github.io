<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] intercept mode gives access denied
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20intercept%20mode%20gives%20access%20denied&In-Reply-To=%3CCAH8HCTR%3Dt%3D7CHsfsqxf4e8JivdxCNsbGJ2PVrUf%3DmwPPea_ipQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008747.html">
   <LINK REL="Next"  HREF="008753.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] intercept mode gives access denied</H1>
    <B>Robert Plamondon</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20intercept%20mode%20gives%20access%20denied&In-Reply-To=%3CCAH8HCTR%3Dt%3D7CHsfsqxf4e8JivdxCNsbGJ2PVrUf%3DmwPPea_ipQ%40mail.gmail.com%3E"
       TITLE="[squid-users] intercept mode gives access denied">robert at plamondon.com
       </A><BR>
    <I>Thu Jan 14 17:25:16 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008747.html">[squid-users] intercept mode gives access denied
</A></li>
        <LI>Next message (by thread): <A HREF="008753.html">[squid-users] intercept mode gives access denied
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8752">[ date ]</a>
              <a href="thread.html#8752">[ thread ]</a>
              <a href="subject.html#8752">[ subject ]</a>
              <a href="author.html#8752">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> You *must* perform the NAT on the machine Squid is running on for intercept
</I>&gt;<i> mode to work.
</I>&gt;<i>
</I>&gt;<i> Doing it on any other router along the way will not work.
</I>&gt;<i>
</I>
Unless I'm missing something, I'd phrase this differently: the NAT must not
be performed between the client and Squid. Squid is indifferent if NAT
occurs between itself and the server. So it's a matter of placing the two
functions in the right order along the network path.

(Example: my VDSL modem performs NAT, and the intercepting Squid instance
on my Linux LAN gateway box neither knows nor cares.)

If your router is some kind of Unix-like box, putting Squid on it may be
the most convenient path. If the router is underpowered, the local squid
can (often) be set up to avoid heavy lifting, with only a small RAM cache,
and forward everything to its smarter parent. (I haven't tried this on
anything in the low horsepower + high traffic realm, though.)

For a &quot;real&quot; router like a Cisco box, you can configure it to route
appropriate traffic to the Squid box before performing NAT, using WCCP or
policy-based routing, and let the router perform the NAT itself on the
output of the Squid box.

Good luck!

Robert

-- 
Robert Plamondon
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">robert at plamondon.com</A>

Some of my web sites:
<A HREF="http://nortoncreekfarm.com.">http://nortoncreekfarm.com.</A> Our free-range chicken/egg farm.
<A HREF="http://nortoncreekpress.com.">http://nortoncreekpress.com.</A> My little publishing house, mostly farming
books.
<A HREF="http://hypnosis-corvallis.com.">http://hypnosis-corvallis.com.</A> My hypnotherapy site.
<A HREF="http://unlicensed-practitioner.com.">http://unlicensed-practitioner.com.</A> Resources for Oregon's
alternative/exempt practitioners.
<A HREF="http://plamondon.com.">http://plamondon.com.</A> My main site, with lots of poultry info.
<A HREF="http://karls-diabetes.blogspot.com">http://karls-diabetes.blogspot.com</A>
&lt;<A HREF="http://karls-diabetes.blogspot.com/2011/11/keeping-carbs-down-and-ultimate-pbj.html">http://karls-diabetes.blogspot.com/2011/11/keeping-carbs-down-and-ultimate-pbj.html</A>&gt;.
Adventures with an autistic/diabetic child.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160114/5e425f7d/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160114/5e425f7d/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008747.html">[squid-users] intercept mode gives access denied
</A></li>
	<LI>Next message (by thread): <A HREF="008753.html">[squid-users] intercept mode gives access denied
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8752">[ date ]</a>
              <a href="thread.html#8752">[ thread ]</a>
              <a href="subject.html#8752">[ subject ]</a>
              <a href="author.html#8752">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
