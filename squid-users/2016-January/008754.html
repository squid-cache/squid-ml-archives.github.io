<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] intercept mode gives access denied
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20intercept%20mode%20gives%20access%20denied&In-Reply-To=%3C201601142012.58209.Antony.Stone%40squid.open.source.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008753.html">
   <LINK REL="Next"  HREF="008751.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] intercept mode gives access denied</H1>
    <B>Antony Stone</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20intercept%20mode%20gives%20access%20denied&In-Reply-To=%3C201601142012.58209.Antony.Stone%40squid.open.source.it%3E"
       TITLE="[squid-users] intercept mode gives access denied">Antony.Stone at squid.open.source.it
       </A><BR>
    <I>Thu Jan 14 19:12:58 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008753.html">[squid-users] intercept mode gives access denied
</A></li>
        <LI>Next message (by thread): <A HREF="008751.html">[squid-users] Maxconn Parameter behaviour with NAT
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8754">[ date ]</a>
              <a href="thread.html#8754">[ thread ]</a>
              <a href="subject.html#8754">[ subject ]</a>
              <a href="author.html#8754">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thursday 14 January 2016 at 18:25:16, Robert Plamondon wrote:

&gt;<i> &gt; You *must* perform the NAT on the machine Squid is running on for
</I>&gt;<i> &gt; intercept mode to work.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Doing it on any other router along the way will not work.
</I>&gt;<i> 
</I>&gt;<i> Unless I'm missing something, I'd phrase this differently: the NAT must not
</I>&gt;<i> be performed between the client and Squid. Squid is indifferent if NAT
</I>&gt;<i> occurs between itself and the server. So it's a matter of placing the two
</I>&gt;<i> functions in the right order along the network path.
</I>
Yes.

I was referring to the specific Destination NAT operation which changes the 
destination address of the HTTP requests from their original (the web server), 
to be the IP address of the Squid machine.

I think it's safe to say that any Source NAT operation is safe at any point 
along the route.


Antony.

&gt;<i> (Example: my VDSL modem performs NAT, and the intercepting Squid instance
</I>&gt;<i> on my Linux LAN gateway box neither knows nor cares.)
</I>&gt;<i> 
</I>&gt;<i> If your router is some kind of Unix-like box, putting Squid on it may be
</I>&gt;<i> the most convenient path. If the router is underpowered, the local squid
</I>&gt;<i> can (often) be set up to avoid heavy lifting, with only a small RAM cache,
</I>&gt;<i> and forward everything to its smarter parent. (I haven't tried this on
</I>&gt;<i> anything in the low horsepower + high traffic realm, though.)
</I>&gt;<i> 
</I>&gt;<i> For a &quot;real&quot; router like a Cisco box, you can configure it to route
</I>&gt;<i> appropriate traffic to the Squid box before performing NAT, using WCCP or
</I>&gt;<i> policy-based routing, and let the router perform the NAT itself on the
</I>&gt;<i> output of the Squid box.
</I>&gt;<i> 
</I>&gt;<i> Good luck!
</I>&gt;<i> 
</I>&gt;<i> Robert
</I>
-- 
A user interface is like a joke.
If you have to explain it, it didn't work.

                                                   Please reply to the list;
                                                         please *don't* CC me.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008753.html">[squid-users] intercept mode gives access denied
</A></li>
	<LI>Next message (by thread): <A HREF="008751.html">[squid-users] Maxconn Parameter behaviour with NAT
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8754">[ date ]</a>
              <a href="thread.html#8754">[ thread ]</a>
              <a href="subject.html#8754">[ subject ]</a>
              <a href="author.html#8754">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
