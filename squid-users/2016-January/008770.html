<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] How to setup a secure(!) squid proxy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20setup%20a%20secure%28%21%29%20squid%20proxy&In-Reply-To=%3C56992C60.4060300%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008764.html">
   <LINK REL="Next"  HREF="008804.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] How to setup a secure(!) squid proxy</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20setup%20a%20secure%28%21%29%20squid%20proxy&In-Reply-To=%3C56992C60.4060300%40treenet.co.nz%3E"
       TITLE="[squid-users] How to setup a secure(!) squid proxy">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Jan 15 17:29:04 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008764.html">[squid-users] How to setup a secure(!) squid proxy
</A></li>
        <LI>Next message (by thread): <A HREF="008804.html">[squid-users] How to setup a secure(!) squid proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8770">[ date ]</a>
              <a href="thread.html#8770">[ thread ]</a>
              <a href="subject.html#8770">[ subject ]</a>
              <a href="author.html#8770">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 15/01/2016 11:13 p.m., startrekfan wrote:
&gt;<i> Hello
</I>&gt;<i> 
</I>&gt;<i> I`m sorry. I'm not a native speaker so I maybe don't find the right words.
</I>&gt;<i> 
</I>&gt;<i> I'd like to setup a proxy that can scan the incoming traffic for virus
</I>&gt;<i> (squidclamav). To do that for a https/ssl connection I need the squid
</I>&gt;<i> ssl-bump feature or is there an other solution?
</I>
Aha. Yes you will need bumping to do that.

&gt;<i> 
</I>&gt;<i> Now I want to setup the ssl-bump feature as safe as using no ssl-bump. Is
</I>&gt;<i> this possible with squid 3.4? (Of course every one who has my CA cert can
</I>&gt;<i> decrypt the traffic, but I keep it safe.)
</I>
TLS is a fast changing situation. The golden rule with bumping TLS/HTTPS
is to use the latest Squid release.

If you have any problems first try an upgrade. Things are being improved
constantly and you may even need to go beyond the stable production
release and use the beta development release for some things.
But definitely anything older than the current production release
certainly has TLS related bugs and annoying problems.

3.4 is over a year outdated in its support for TLS features and is
lacking some very major abilities that are critical for smooth port 443
interception. 3.5 is still a bit rough itself, but way better than any
older Squid.


&gt;<i> Squid is communicating with the remote server(webserver). I'd like to have
</I>&gt;<i> at least this communication as safe as using a normal browser.
</I>&gt;<i> 
</I>
Leave that until you have a working system. Your end goal is a
complicated setup. Best take it one small step at a time. Especially
since you are new at this.


&gt;<i> Does squid 3.4 do all the necessary steps like checking the certificate
</I>&gt;<i> validity?
</I>
Yes, all Squid-2.4+ do unless you configure it not to happen.


&gt;<i> What about advanced features like cert pinning?
</I>&gt;<i> 
</I>
Not normally. Cert pinning is a nasty hack browsers do. If you want that
you will have to write a cert validator helper of your own that checks
the pinning.

You will however find that any traffic actually using cert pinning is
not able to be SSL-Bumped. So traffic where bumping succeeds will never
be worth checking for pinning.


&gt;<i> How do I configure ssl virus scanning? Are this steps enough:
</I>&gt;<i> <A HREF="http://wiki.squid-cache.org/ConfigExamples/Intercept/SslBumpExplicit">http://wiki.squid-cache.org/ConfigExamples/Intercept/SslBumpExplicit</A>
</I>
The two are separate things. SSL-Bump decrypts the HTTPS traffic
arriving into Squid. ICAP services doing AV can scan traffic going
through Squid.

This is good. It means you can/should configure one and test it is
working well before trying to start setting up the other.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008764.html">[squid-users] How to setup a secure(!) squid proxy
</A></li>
	<LI>Next message (by thread): <A HREF="008804.html">[squid-users] How to setup a secure(!) squid proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8770">[ date ]</a>
              <a href="thread.html#8770">[ thread ]</a>
              <a href="subject.html#8770">[ subject ]</a>
              <a href="author.html#8770">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
