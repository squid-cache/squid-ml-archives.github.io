<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] How to setup a secure(!) squid proxy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20setup%20a%20secure%28%21%29%20squid%20proxy&In-Reply-To=%3Cvmime.569cba64.457d.2103c0bc7d6276a4%40ms249-lin-003.rotterdam.bazuin.nl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008806.html">
   <LINK REL="Next"  HREF="008864.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] How to setup a secure(!) squid proxy</H1>
    <B>L.P.H. van Belle</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20setup%20a%20secure%28%21%29%20squid%20proxy&In-Reply-To=%3Cvmime.569cba64.457d.2103c0bc7d6276a4%40ms249-lin-003.rotterdam.bazuin.nl%3E"
       TITLE="[squid-users] How to setup a secure(!) squid proxy">belle at bazuin.nl
       </A><BR>
    <I>Mon Jan 18 10:11:48 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008806.html">[squid-users] How to setup a secure(!) squid proxy
</A></li>
        <LI>Next message (by thread): <A HREF="008864.html">[squid-users] How to setup a secure(!) squid proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8810">[ date ]</a>
              <a href="thread.html#8810">[ thread ]</a>
              <a href="subject.html#8810">[ subject ]</a>
              <a href="author.html#8810">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hai, 

&#160;

&gt;<i> I just checked it. It'll work at the moment. But only because the dependencies (and the dependency version) doesn't changed from 3.4.8 to 3.5. So there's is no guarantee that it will work &gt; with further releases.
</I>
Yes and if depencies change, you can do the same for these packages, and/or you can change the dependies in the control file for example.

That is what i do, if needed, i change the control file, so least packages are from sid. 

And yes, there is always a risk on errors with future releases, but that risk is always there. 

&#160;

&gt;<i> On the other hand: Installing unstable software is not the way the state system works/should work. I talked to the debian guys. That's exactly the reason why they don't release squid 3.5 &gt; for jessie but writing patches to solve critical issues on their own.
</I>
I do rebuild from sid, i dont install from sid, that will give a big mess and we dont want that. 

Since the build also uses configure for the packages, i dont see the problem here, maybe im missing something, 

but i do this for years now with squid, and never had any problems. 

&#160;

&#160;

I use squid 3.5.12 rebuild from sid in debian Jessie without any problem, and works better for me then 3.4.8. ( I need the ssl part from 3.5.12+ ) 

&#160;

The following is needed to get squid 3.5.12 in Jessie with least changes of the stable packages. 

squid 

libecap 

c-icap 

&#160;

and i really dont know why there isnt any jessie-backported package of this (jet).. since 3.5.12 is in testing since 15 dec 2015. 

&#160;

I could not wait for that, so I changed in debain/rules the following.

&#160;

Added 

&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; --enable-ssl \

&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; --with-open-ssl=/etc/ssl/openssl.cnf \

&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; --enable-linux-netfilter

&#160;

And changed the changelog.

I changed it to the following to keep track of the debian packages also. 

&#160;

squid3 (3.5.12-1lvb1-ssl) unstable; urgency=medium

I only added lvb1-ssl so it can use the debian packages and/or my own packages.

&#160;

&#160;

&gt;<i> Then I have to move every software to unstable state (because of the security) I can install an unstable debian directly.
</I>
Really, NEVER use sid for production, if you want to get into troubles, this is the way.. 

Sid can change rapidly, and put your server in an un-usable stated, i learned the hard way.&#160; Years ago. 

&#160;

And for the security, subscribe to the debian and squid list ( .. done ) and keep track of messages. 

&#160;

&#160;

Greetz, 

&#160;

Louis

&#160;

&#160;

&#160;

&#160;


Van: startrekfan [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">startrekfan75 at freenet.de</A>] 
Verzonden: maandag 18 januari 2016 10:25
Aan: L.P.H. van Belle; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Onderwerp: Re: [squid-users] How to setup a secure(!) squid proxy


&#160;

I just checked it. It'll work at the moment. But only because the dependencies (and the dependency version) doesn't changed from 3.4.8 to 3.5. So there's is no guarantee that it will work with further releases.


&#160;


On the other hand: Installing unstable software is not the way the state system works/should work. I talked to the debian guys. That's exactly the reason why they don't release squid 3.5 for jessie but writing patches to solve critical issues on their own.


&#160;


Then I have to move every software to unstable state (because of the security) I can install an unstable debian directly.


&#160;

L.P.H. van Belle &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">belle at bazuin.nl</A>&gt; schrieb am Mo., 18. Jan. 2016 um 09:07&#160;Uhr:


Really this is an easy thing to do. 

&#160;

Add in you sources.list.d/sid.list&#160;&#160;&#160; ad the sid&#160; repo. &#160;( only src-deb ) 

Run apt-get update. 

&#160;

apt-get source squid 

apt-get build-dep squid 

&#160;make changes if needed, in debian/rules and debian/changelog IF you changed something.

&#160;

Build it

apt-get source squid &#8211;b 

it errors, thats ok, get the 2 or 3 extra packages, the same way, after installing them you can build squid again. 

&#160;

put the debs in a repo you can access and your done. 

Did it here, works fine. 

&#160;

&#160;

Greetz, 

&#160;

Louis

&#160;

&#160;


Van: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] Namens startrekfan
Verzonden: maandag 18 januari 2016 8:07
Aan: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>
Onderwerp: Re: [squid-users] How to setup a secure(!) squid proxy


&#160;




Just talked to the debian guys. They won't upgrade squid to 3.5 in debian jessi. It's also hard for me, to implement unstable components in a productive system. 

But the debian guys told me, that they will build own patches for 3.4.8 to fix critical problems if you report them properly to

<A HREF="https://packages.qa.debian.org/s/squid3.html">https://packages.qa.debian.org/s/squid3.html</A> or 

<A HREF="https://lists.squid-cache.org/listinfo/squid-users">security at debian.org</A> 









I hope/think you already do. So I think 3.4.8 should work for me as well.

&#160;

&gt;<i> Hello
</I>
&gt;<i>&#160;
</I>
&gt;<i> I`m sorry. I'm not a native speaker so I maybe don't find the right words.
</I>
&gt;<i>&#160;
</I>
&gt;<i> I'd like to setup a proxy that can scan the incoming traffic for virus 
</I>
&gt;<i> (squidclamav). To do that for a https/ssl connection I need the squid 
</I>
&gt;<i> ssl-bump feature or is there an other solution?
</I>
&gt;<i>&#160;
</I>
&gt;<i> Now I want to setup the ssl-bump feature as safe as using no ssl-bump. 
</I>
&gt;<i> Is this possible with squid 3.4? (Of course every one who has my CA 
</I>
&gt;<i> cert can decrypt the traffic, but I keep it safe.)
</I>
&gt;<i> Squid is communicating with the remote server(webserver). I'd like to 
</I>
&gt;<i> have at least this communication as safe as using a normal browser.
</I>
&gt;<i>&#160;
</I>
&gt;<i> Does squid 3.4 do all the necessary steps like checking the 
</I>
&gt;<i> certificate validity? What about advanced features like cert pinning?
</I>
I don't think 3.4 is enough. May be 3.5 or higher.

&gt;<i>&#160;
</I>
&gt;<i> How do I configure ssl virus scanning? Are this steps enough: 
</I>
&gt;<i> <A HREF="http://wiki.squid-cache.org/ConfigExamples/Intercept/SslBumpExplicit">http://wiki.squid-cache.org/ConfigExamples/Intercept/SslBumpExplicit</A>
</I>
<A HREF="http://wiki.squid-cache.org/ConfigExamples/ContentAdaptation/C-ICAP">http://wiki.squid-cache.org/ConfigExamples/ContentAdaptation/C-ICAP</A>

&gt;<i>&#160;
</I>
&gt;<i> Thank you again :)
</I>
&gt;<i>&#160;
</I>
&gt;<i>&#160;
</I>
&gt;<i> _______________________________________________
</I>
&gt;<i> squid-users mailing list
</I>




&gt;<i> &#160;MailScanner heeft een e-mail met mogelijk een poging tot fraude gevonden van &quot;lists.squid-cache.org&quot; &#160;squid-users at lists.squid-cache.org
</I>
&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
&#160;










-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160118/4b95639f/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160118/4b95639f/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008806.html">[squid-users] How to setup a secure(!) squid proxy
</A></li>
	<LI>Next message (by thread): <A HREF="008864.html">[squid-users] How to setup a secure(!) squid proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8810">[ date ]</a>
              <a href="thread.html#8810">[ thread ]</a>
              <a href="subject.html#8810">[ subject ]</a>
              <a href="author.html#8810">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
