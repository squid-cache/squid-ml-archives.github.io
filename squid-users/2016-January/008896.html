<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] How to setup a secure(!) squid proxy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20setup%20a%20secure%28%21%29%20squid%20proxy&In-Reply-To=%3Cvmime.56a748d9.7db9.5d3427efb29bbe9%40ms249-lin-003.rotterdam.bazuin.nl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008894.html">
   <LINK REL="Next"  HREF="008902.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] How to setup a secure(!) squid proxy</H1>
    <B>L.P.H. van Belle</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20setup%20a%20secure%28%21%29%20squid%20proxy&In-Reply-To=%3Cvmime.56a748d9.7db9.5d3427efb29bbe9%40ms249-lin-003.rotterdam.bazuin.nl%3E"
       TITLE="[squid-users] How to setup a secure(!) squid proxy">belle at bazuin.nl
       </A><BR>
    <I>Tue Jan 26 10:22:17 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008894.html">[squid-users] How to setup a secure(!) squid proxy
</A></li>
        <LI>Next message (by thread): <A HREF="008902.html">[squid-users] How to setup a secure(!) squid proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8896">[ date ]</a>
              <a href="thread.html#8896">[ thread ]</a>
              <a href="subject.html#8896">[ subject ]</a>
              <a href="author.html#8896">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hai, 

&#160;

Ok, good is its working now, i was pulling my hair out for you ;-) 

&#160;

This : sed -i 's/g++ (&gt;= 4:5.2)/g++/g' libecap-1.0.1/debian/control

Is not any problem, because squid is reconfigured and recompiled with G++ 4.9. 

&#160;

If you want a more secure set, you can change this to : 

sed -i 's/g++ (&gt;= 4:5.2)/g++ (&gt;= 4:4.9)/g' libecap-1.0.1/debian/control

This way its &#8220;locked&#8221;&#160; to minimal g++ 4.9. 

&#160;

And i cant think of any other restriction. &#160;

Maybe Amos knows, but i dont know that. 

&#160;

&#160;

Greetz. 

&#160;

&#160;

&#160;

&#160;


Van: startrekfan [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">startrekfan75 at freenet.de</A>] 
Verzonden: dinsdag 26 januari 2016 10:14
Aan: L.P.H. van Belle; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Onderwerp: Re: [squid-users] How to setup a secure(!) squid proxy


&#160;

Hi,

&#160;


the script is working and I have a running squid 3.5. Thank you.


&#160;


But I still think things like this:


&#160;


echo &quot;change GCC 5.2 to Jessie G++ 4.9 in libecap-1.0.1/debian/control&quot;


sed -i 's/g++ (&gt;= 4:5.2)/g++/g' libecap-1.0.1/debian/control


&#160;


isn't a good practice. I'm pretty sure that the &gt;=5.2 restriction has a purpose and is not only there to annoy admins. 

In this case every thing seems to work. But modifications&#160;like this can always lead to unforeseen situations.


&#160;


But thank you again. It's working atm :)


&#160;

L.P.H. van Belle &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">belle at bazuin.nl</A>&gt; schrieb am Mo., 25. Jan. 2016 um 17:14&#160;Uhr:



Hai,

Ok, i missed few of my modifications i did, they arent big changes.
Sorry about that.

This script is tested on a clean debian jessie, with only ssh installed.
Have a look at the script.

The files with modifactions get the extention custom1 to so they wont mixup
Or messup original debian files.
Like :
libecap3_1.0.1-2-custom1_amd64.deb
libecap3-dev_1.0.1-2-custom1_amd64.deb

Files without modifactions keep the original debian name, when updateing to newer debian dist, its automatily upgraded.

And again this should work fine, i doing this already as of debian squeeze..
And Debian wheezy was running 3.4.8 for me, my jessie now is running 3.5.12.


Greetz,

Louis




________________________________________
Van: startrekfan [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">startrekfan75 at freenet.de</A>]
Verzonden: vrijdag 22 januari 2016 16:15
Aan: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>; L.P.H. van Belle
Onderwerp: Re: [squid-users] How to setup a secure(!) squid proxy

Found the problem:

The dependencies has changed:&#160;<A HREF="https://packages.debian.org/sid/squid&#160;(not">https://packages.debian.org/sid/squid&#160;(not</A> sure why there is also a <A HREF="https://packages.debian.org/sid/squid3&#160;entry">https://packages.debian.org/sid/squid3&#160;entry</A>)

Thats excactly the problem with unstable sources. squid3 3.5 requires libecap3 instead of libecap2 (squid3 version 3.4). I can't install libecap3 because it has further dependencies.
I also can't even compile libecap3 without installing n more dependencies.

So I have to use squid 3.4 with the unsafe sha1&#160;furthermore.&#160;

startrekfan &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">startrekfan75 at freenet.de</A>&gt; schrieb am Fr., 22. Jan. 2016 um 15:45&#160;Uhr:
I tried to compile squid from sid repo. It fails, but I'm not sure why.&#160;

When I only add the src-deb apt-get build-dep squid3 says&#160;libecap3-dev was not found and fails.(Im not sure why it`s needed. libecap3-dev is not listed in the dependencies. <A HREF="https://packages.debian.org/sid/squid3">https://packages.debian.org/sid/squid3</A>)

When I add deb and deb-src&#160;apt-get build-dep squid3&#160;&#160;wants to update/install &#160;adwaita-icon that is not compatible with gnome.

So I can't build squid 3.5 on an stable Jessie. Do you have any ideas why?
L.P.H. van Belle &lt;belle at bazuin.nl&gt; schrieb am Mo., 18. Jan. 2016 um
09:07 Uhr:

&gt;<i> Really this is an easy thing to do.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Add in you sources.list.d/sid.list&#160; &#160; ad the sid&#160; repo.&#160; ( only src-deb )
</I>&gt;<i>
</I>&gt;<i> Run apt-get update.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> apt-get source squid
</I>&gt;<i>
</I>&gt;<i> apt-get build-dep squid
</I>&gt;<i>
</I>&gt;<i>&#160; make changes if needed, in debian/rules and debian/changelog IF you
</I>&gt;<i> changed something.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Build it
</I>&gt;<i>
</I>&gt;<i> apt-get source squid ?b
</I>&gt;<i>
</I>&gt;<i> it errors, thats ok, get the 2 or 3 extra packages, the same way, after
</I>&gt;<i> installing them you can build squid again.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> put the debs in a repo you can access and your done.
</I>&gt;<i>
</I>&gt;<i> Did it here, works fine.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Greetz,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Louis
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>




-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160126/001bd4d0/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160126/001bd4d0/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008894.html">[squid-users] How to setup a secure(!) squid proxy
</A></li>
	<LI>Next message (by thread): <A HREF="008902.html">[squid-users] How to setup a secure(!) squid proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8896">[ date ]</a>
              <a href="thread.html#8896">[ thread ]</a>
              <a href="subject.html#8896">[ subject ]</a>
              <a href="author.html#8896">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
