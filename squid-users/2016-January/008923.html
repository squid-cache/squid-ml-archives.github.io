<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 3.5.13 transparent compiling fails with ubuntu	14.04 server
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203.5.13%20transparent%20compiling%20fails%20with%20ubuntu%0A%0914.04%20server&In-Reply-To=%3CCA%2BsSnVb2gaysRX_ktJhjy3dQSgejJx_d4Z9i%2BJBNUmEZA2NVvQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008922.html">
   <LINK REL="Next"  HREF="008924.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 3.5.13 transparent compiling fails with ubuntu	14.04 server</H1>
    <B>Hardik Dangar</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203.5.13%20transparent%20compiling%20fails%20with%20ubuntu%0A%0914.04%20server&In-Reply-To=%3CCA%2BsSnVb2gaysRX_ktJhjy3dQSgejJx_d4Z9i%2BJBNUmEZA2NVvQ%40mail.gmail.com%3E"
       TITLE="[squid-users] Squid 3.5.13 transparent compiling fails with ubuntu	14.04 server">hardikdangar+squid at gmail.com
       </A><BR>
    <I>Fri Jan 29 13:05:31 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008922.html">[squid-users] Compiling Squid for Android ARM v7 and higher
</A></li>
        <LI>Next message (by thread): <A HREF="008924.html">[squid-users] Squid 3.5.13 transparent compiling fails with ubuntu 14.04 server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8923">[ date ]</a>
              <a href="thread.html#8923">[ thread ]</a>
              <a href="subject.html#8923">[ subject ]</a>
              <a href="author.html#8923">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I am trying to build squid 3.5.13 with following options on ubuntu 14.04
freshly installed server,

# apt-get update

# apt-get build-dep squid3

# apt-get install build-essential sharutils ccze libzip-dev libssl-dev

# ./configure
--prefix=/usr
--exec-prefix=/usr
--includedir=/usr/include
--datadir=${prefix}/share/squid
--libdir=/usr/lib64
--libexecdir=${prefix}/lib/squid
--localstatedir=/var
--sysconfdir=/etc/squid
--sharedstatedir=/var/lib
--with-logdir=/var/log/squid
--with-pidfile=/var/run/squid.pid
--with-default-user=squid
--with-openssl
--enable-silent-rules
--enable-dependency-tracking
--enable-linux-netfilter
--enable-icmp
--enable-delay-pools
--enable-useragent-log
--enable-esi
--enable-follow-x-forwarded-for
--enable-ipf-transparent
--enable-ssl
--enable-ssl-crtd
--enable-auth

I want to build https transparent proxy so i have enabled enable ipf
transparent and ssl options in config.

configure fails with option,
configure: error: unable to make IPFilter work with netinet/ headers

$ cat config.log | grep netinet    reveals,
conftest.cpp:326:25: fatal error: netinet/ipl.h: No such file or directory

i did check iptables are installed ( $ which iptables) so netfilter should
be installed too.

article at, <A HREF="https://www.smoothnet.org/squid-v3-5-proxy-with-ssl-bump/">https://www.smoothnet.org/squid-v3-5-proxy-with-ssl-bump/</A> says
i need to use hack,
#define USE_SOLARIS_IPFILTER_MINOR_T_HACK 0

but after changing that line also result is same. i found very old squid
2.5 threads related to IPFilter compiling issue but couldn't find the code
they ask to hack.

Anyone else has faced this issue? what's the solution for this ?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160129/8c2ca202/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160129/8c2ca202/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008922.html">[squid-users] Compiling Squid for Android ARM v7 and higher
</A></li>
	<LI>Next message (by thread): <A HREF="008924.html">[squid-users] Squid 3.5.13 transparent compiling fails with ubuntu 14.04 server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8923">[ date ]</a>
              <a href="thread.html#8923">[ thread ]</a>
              <a href="subject.html#8923">[ subject ]</a>
              <a href="author.html#8923">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
