<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] NOTICE: Authentication not applicable on	intercepted requests.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20NOTICE%3A%20Authentication%20not%20applicable%20on%0A%09intercepted%20requests.&In-Reply-To=%3C020901d1d6aa%241149f920%2433ddeb60%24%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011391.html">
   <LINK REL="Next"  HREF="011392.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] NOTICE: Authentication not applicable on	intercepted requests.</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20NOTICE%3A%20Authentication%20not%20applicable%20on%0A%09intercepted%20requests.&In-Reply-To=%3C020901d1d6aa%241149f920%2433ddeb60%24%40ngtech.co.il%3E"
       TITLE="[squid-users] NOTICE: Authentication not applicable on	intercepted requests.">eliezer at ngtech.co.il
       </A><BR>
    <I>Tue Jul  5 10:43:29 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011391.html">[squid-users] NOTICE: Authentication not applicable on intercepted requests.
</A></li>
        <LI>Next message (by thread): <A HREF="011392.html">[squid-users] Sometimes Squid goes to 99% CPU use
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11439">[ date ]</a>
              <a href="thread.html#11439">[ thread ]</a>
              <a href="subject.html#11439">[ subject ]</a>
              <a href="author.html#11439">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>If I may add that with some conditions it would be possible to use some network level authentication.
Indeed Browsers Clients and Servers do not support intercept and transparent proxy authentication but and a big one,
If the network has Clients that uses a single seat per user(IE IP per PC) and have no central terminal service then you can workaround the impossible into possible.
You could then allow a users to authenticate a web page and since then to some point of time such as couple seconds to minutes he will be authenticated.
In big WIFI networks that works and support radius authentication it is possible to authenticate users against LDAP or AD and the session will be valid for the time that the WIFI session is open.

Another approach which I have implemented in the past was to use some kind of DNS service which systems interacts with as a &quot;registration&quot; DB.
A user is logged in and the DHCP registers that a specific user has a specific IP and MAC address(there are couple much secure ways) then when the user authenticate itself using a web page\service the DNS PTR records for the IP is being updated.
The proxy has an helper that checks the PTR of the IP and if exists it tells squid what is the username for the request.
If not then it would return a missing username.
The client authenticate for a specific amount of time and after that the DNS record is expunged.
It is similar to the squid sessions helpers but works with another DB.. DNS.

Another approach I have seen in products is to install some kind of authentication Daemon per DESKTOP which will extend a 60 seconds authorization and registration every 15-30-45 seconds using the AD or LDAP user.

Eliezer

----
Eliezer Croitoru
Linux System Administrator
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>


-----Original Message-----
From: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On Behalf Of Alex Rousskov
Sent: Friday, July 1, 2016 8:45 AM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] NOTICE: Authentication not applicable on intercepted requests.

On 06/30/2016 01:19 PM, Eugene M. Zheganin wrote:
&gt;<i> On 30.06.2016 17:04, Amos Jeffries wrote:
</I>&gt;&gt;<i> Use a myportname ACL to prevent Squid attempting impossible things like
</I>&gt;&gt;<i> authentication on intercepted traffic.
</I>

&gt;<i> Sorry, but I still didn't get the idea. I have one port that squid is
</I>&gt;<i> configured to intercept traffic on, and another for plain proxy
</I>&gt;<i> requests. 
</I>
That is OK/normal, of course.


&gt;<i> How do I tell squid not to authenticate anyone on the intercept one? 
</I>
By making your authentication rules port-specific. Squid does not
authenticate by default so you are explicitly telling it to authenticate
[some] users. You need to adjust those rules to exclude intercepted
transactions.


&gt;<i> From what I know, squid will send the authentication
</I>&gt;<i> sequence as soon as it encounters the authentication-related ACL in the
</I>&gt;<i> ACL list for the request given. Do have to add myportname ACL with
</I>&gt;<i> non-intercepting port for all the occurences of the auth-enabled ACLs,
</I>&gt;<i> or may be there's a simplier way ?
</I>
I do not think there is. We could, in theory, [add an option to] ignore
authentication-related ACLs when dealing with intercepted transactions,
but I am not sure that doing so would actually solve more problems than
it will create.

Please note that, in many cases, your myportname ACLs can go at the very
beginning of the authentication-sensitive rules to exclude intercepted
transactions -- you may not have to prefix each auth-enabled ACL
individually (because none of them will be reached after early
myportname ACL guards).


HTH,

Alex.

_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011391.html">[squid-users] NOTICE: Authentication not applicable on intercepted requests.
</A></li>
	<LI>Next message (by thread): <A HREF="011392.html">[squid-users] Sometimes Squid goes to 99% CPU use
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11439">[ date ]</a>
              <a href="thread.html#11439">[ thread ]</a>
              <a href="subject.html#11439">[ subject ]</a>
              <a href="author.html#11439">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
