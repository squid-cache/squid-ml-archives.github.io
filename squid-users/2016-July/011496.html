<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 3.5.19 how to find banking server name for	no bump
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203.5.19%20how%20to%20find%20banking%20server%20name%20for%0A%09no%20bump&In-Reply-To=%3CCANLNtGTOgSPYp7RztM8Q%3DZyAS1gmFh6dCwMGfHoh0rvNi39KZw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011500.html">
   <LINK REL="Next"  HREF="011497.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 3.5.19 how to find banking server name for	no bump</H1>
    <B>Stanford Prescott</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203.5.19%20how%20to%20find%20banking%20server%20name%20for%0A%09no%20bump&In-Reply-To=%3CCANLNtGTOgSPYp7RztM8Q%3DZyAS1gmFh6dCwMGfHoh0rvNi39KZw%40mail.gmail.com%3E"
       TITLE="[squid-users] Squid 3.5.19 how to find banking server name for	no bump">stan.prescott at gmail.com
       </A><BR>
    <I>Sun Jul 10 14:44:15 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011500.html">[squid-users] HTTPS bump doesn't work with websites that require SNI
</A></li>
        <LI>Next message (by thread): <A HREF="011497.html">[squid-users] Windows Updates a Caching Stub zone,	A windows updates store.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11496">[ date ]</a>
              <a href="thread.html#11496">[ thread ]</a>
              <a href="subject.html#11496">[ subject ]</a>
              <a href="author.html#11496">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thank you for that. I do already have a method set up via my squid proxy UI
to allow clients to bypass the squid proxy via iptables rules if they need
to.

On Wed, Jun 29, 2016 at 2:57 AM, Eliezer Croitoru &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>&gt;
wrote:

&gt;<i> Hey,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I have seen that you are using squid in intercept mode either on Linux or
</I>&gt;<i> some BSD.
</I>&gt;<i>
</I>&gt;<i> If there is a site\server that you don't want to enter squid at all you
</I>&gt;<i> will need to bypass it in the FW\IPTABLES level.
</I>&gt;<i>
</I>&gt;<i> In linux you would be able to use some ipset list that will be bypassed
</I>&gt;<i> from being intercepted.
</I>&gt;<i>
</I>&gt;<i> If you are interested reply and I will try to give you an example how to
</I>&gt;<i> use it.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Eliezer
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ----
</I>&gt;<i>
</I>&gt;<i> Eliezer Croitoru &lt;<A HREF="http://ngtech.co.il/lmgtfy/">http://ngtech.co.il/lmgtfy/</A>&gt;
</I>&gt;<i> Linux System Administrator
</I>&gt;<i> Mobile: +972-5-28704261
</I>&gt;<i> Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> *From:* squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] *On
</I>&gt;<i> Behalf Of *Stanford Prescott
</I>&gt;<i> *Sent:* Wednesday, June 29, 2016 2:56 AM
</I>&gt;<i> *To:* Amos Jeffries
</I>&gt;<i> *Cc:* squid-users
</I>&gt;<i> *Subject:* Re: [squid-users] Squid 3.5.19 how to find banking server name
</I>&gt;<i> for no bump
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I forgot to mention, I am using squid 3.5.19
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Tue, Jun 28, 2016 at 6:47 PM, Stanford Prescott &lt;
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">stan.prescott at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> When I enter .wellsfargo.com in
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> *acl tls_s1_connect at_step SslBump1*
</I>&gt;<i>
</I>&gt;<i> *acl tls_s2_client_hello at_step SslBump2*
</I>&gt;<i>
</I>&gt;<i> *acl tls_s3_server_hello at_step SslBump3*
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> *acl tls_server_name_is_ip ssl::server_name_regex
</I>&gt;<i> ^[0-9]+.[0-9]+.[0-9]+.[0-9]+n*
</I>&gt;<i>
</I>&gt;<i> *acl tls_allowed_hsts ssl::server_name .akamaihd.net &lt;<A HREF="http://akamaihd.net">http://akamaihd.net</A>&gt;*
</I>&gt;<i>
</I>&gt;<i> *acl tls_server_is_bank ssl::server_name .wellsfargo.com
</I>&gt;<i> &lt;<A HREF="http://wellsfargo.com">http://wellsfargo.com</A>&gt;*
</I>&gt;<i>
</I>&gt;<i> *acl tls_to_splice any-of tls_allowed_hsts tls_server_is_bank*
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> *ssl_bump peek tls_s1_connect all*
</I>&gt;<i>
</I>&gt;<i> *ssl_bump splice tls_s2_client_hello tls_to_splice*
</I>&gt;<i>
</I>&gt;<i> *ssl_bump stare tls_s2_client_hello all*
</I>&gt;<i>
</I>&gt;<i> *ssl_bump bump tls_s3_server_hello all*
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> it appears that the banking site is still getting bumped i.e.like in this
</I>&gt;<i> access.log snippet
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> *1467156887.817    257 10.40.40.100 TAG_NONE/200 0 CONNECT
</I>&gt;<i> 54.149.224.177:443 &lt;<A HREF="http://54.149.224.177:443">http://54.149.224.177:443</A>&gt; -
</I>&gt;<i> ORIGINAL_DST/54.149.224.177 &lt;<A HREF="http://54.149.224.177">http://54.149.224.177</A>&gt; -*
</I>&gt;<i>
</I>&gt;<i> *1467156888.008     94 10.40.40.100 TCP_MISS/200 213 POST
</I>&gt;<i> <A HREF="https://tiles.services.mozilla.com/v2/links/view">https://tiles.services.mozilla.com/v2/links/view</A>
</I>&gt;<i> &lt;<A HREF="https://tiles.services.mozilla.com/v2/links/view">https://tiles.services.mozilla.com/v2/links/view</A>&gt; -
</I>&gt;<i> ORIGINAL_DST/54.149.224.177 &lt;<A HREF="http://54.149.224.177">http://54.149.224.177</A>&gt; application/json*
</I>&gt;<i>
</I>&gt;<i> *1467156893.774     75 10.40.40.100 TAG_NONE/200 0 CONNECT
</I>&gt;<i> 172.230.102.185:443 &lt;<A HREF="http://172.230.102.185:443">http://172.230.102.185:443</A>&gt; -
</I>&gt;<i> ORIGINAL_DST/172.230.102.185 &lt;<A HREF="http://172.230.102.185">http://172.230.102.185</A>&gt; -*
</I>&gt;<i>
</I>&gt;<i> *1467156893.847    117 10.40.40.100 TAG_NONE/200 0 CONNECT
</I>&gt;<i> 172.230.102.185:443 &lt;<A HREF="http://172.230.102.185:443">http://172.230.102.185:443</A>&gt; -
</I>&gt;<i> ORIGINAL_DST/172.230.102.185 &lt;<A HREF="http://172.230.102.185">http://172.230.102.185</A>&gt; -*
</I>&gt;<i>
</I>&gt;<i> *1467156893.875    120 10.40.40.100 TAG_NONE/200 0 CONNECT
</I>&gt;<i> 172.230.221.75:443 &lt;<A HREF="http://172.230.221.75:443">http://172.230.221.75:443</A>&gt; -
</I>&gt;<i> ORIGINAL_DST/172.230.221.75 &lt;<A HREF="http://172.230.221.75">http://172.230.221.75</A>&gt; -*
</I>&gt;<i>
</I>&gt;<i> *1467156893.875    111 10.40.40.100 TAG_NONE/200 0 CONNECT
</I>&gt;<i> 172.230.102.185:443 &lt;<A HREF="http://172.230.102.185:443">http://172.230.102.185:443</A>&gt; -
</I>&gt;<i> ORIGINAL_DST/172.230.102.185 &lt;<A HREF="http://172.230.102.185">http://172.230.102.185</A>&gt; -*
</I>&gt;<i>
</I>&gt;<i> *1467156893.875    117 10.40.40.100 TAG_NONE/200 0 CONNECT
</I>&gt;<i> 172.230.221.75:443 &lt;<A HREF="http://172.230.221.75:443">http://172.230.221.75:443</A>&gt; -
</I>&gt;<i> ORIGINAL_DST/172.230.221.75 &lt;<A HREF="http://172.230.221.75">http://172.230.221.75</A>&gt; -*
</I>&gt;<i>
</I>&gt;<i> *1467156893.875    117 10.40.40.100 TAG_NONE/200 0 CONNECT
</I>&gt;<i> 172.230.221.75:443 &lt;<A HREF="http://172.230.221.75:443">http://172.230.221.75:443</A>&gt; -
</I>&gt;<i> ORIGINAL_DST/172.230.221.75 &lt;<A HREF="http://172.230.221.75">http://172.230.221.75</A>&gt; -*
</I>&gt;<i>
</I>&gt;<i> *1467156893.875    112 10.40.40.100 TAG_NONE/200 0 CONNECT
</I>&gt;<i> 172.230.102.185:443 &lt;<A HREF="http://172.230.102.185:443">http://172.230.102.185:443</A>&gt; -
</I>&gt;<i> ORIGINAL_DST/172.230.102.185 &lt;<A HREF="http://172.230.102.185">http://172.230.102.185</A>&gt; -*
</I>&gt;<i>
</I>&gt;<i> *1467156893.875    111 10.40.40.100 TAG_NONE/200 0 CONNECT
</I>&gt;<i> 172.230.102.185:443 &lt;<A HREF="http://172.230.102.185:443">http://172.230.102.185:443</A>&gt; -
</I>&gt;<i> ORIGINAL_DST/172.230.102.185 &lt;<A HREF="http://172.230.102.185">http://172.230.102.185</A>&gt; -*
</I>&gt;<i>
</I>&gt;<i> *1467156894.109    307 10.40.40.100 TAG_NONE/200 0 CONNECT
</I>&gt;<i> 172.230.102.185:443 &lt;<A HREF="http://172.230.102.185:443">http://172.230.102.185:443</A>&gt; -
</I>&gt;<i> ORIGINAL_DST/172.230.102.185 &lt;<A HREF="http://172.230.102.185">http://172.230.102.185</A>&gt; -*
</I>&gt;<i>
</I>&gt;<i> *1467156894.109    306 10.40.40.100 TAG_NONE/200 0 CONNECT
</I>&gt;<i> 172.230.102.185:443 &lt;<A HREF="http://172.230.102.185:443">http://172.230.102.185:443</A>&gt; -
</I>&gt;<i> ORIGINAL_DST/172.230.102.185 &lt;<A HREF="http://172.230.102.185">http://172.230.102.185</A>&gt; -*
</I>&gt;<i>
</I>&gt;<i> *1467156894.109    307 10.40.40.100 TAG_NONE/200 0 CONNECT
</I>&gt;<i> 172.230.102.185:443 &lt;<A HREF="http://172.230.102.185:443">http://172.230.102.185:443</A>&gt; -
</I>&gt;<i> ORIGINAL_DST/172.230.102.185 &lt;<A HREF="http://172.230.102.185">http://172.230.102.185</A>&gt; -*
</I>&gt;<i>
</I>&gt;<i> *1467156894.109    308 10.40.40.100 TAG_NONE/200 0 CONNECT
</I>&gt;<i> 172.230.102.185:443 &lt;<A HREF="http://172.230.102.185:443">http://172.230.102.185:443</A>&gt; -
</I>&gt;<i> ORIGINAL_DST/172.230.102.185 &lt;<A HREF="http://172.230.102.185">http://172.230.102.185</A>&gt; -*
</I>&gt;<i>
</I>&gt;<i> *1467156895.488     72 10.40.40.100 TAG_NONE/200 0 CONNECT
</I>&gt;<i> 216.58.194.98:443 &lt;<A HREF="http://216.58.194.98:443">http://216.58.194.98:443</A>&gt; - ORIGINAL_DST/216.58.194.98
</I>&gt;<i> &lt;<A HREF="http://216.58.194.98">http://216.58.194.98</A>&gt; -*
</I>&gt;<i>
</I>&gt;<i> *1467156895.513     98 10.40.40.100 TAG_NONE/200 0 CONNECT
</I>&gt;<i> 216.58.194.70:443 &lt;<A HREF="http://216.58.194.70:443">http://216.58.194.70:443</A>&gt; - ORIGINAL_DST/216.58.194.70
</I>&gt;<i> &lt;<A HREF="http://216.58.194.70">http://216.58.194.70</A>&gt; -*
</I>&gt;<i>
</I>&gt;<i> *1467156895.648     66 10.40.40.100 TCP_MISS/302 739 GET
</I>&gt;<i> <A HREF="https://googleads.g.doubleclick.net/pagead/viewthroughconversion/974108101/?value=0&amp;guid=ON&amp;script=0&amp;data.prod=&amp;data.subprod=&amp;data.pageid=">https://googleads.g.doubleclick.net/pagead/viewthroughconversion/974108101/?value=0&amp;guid=ON&amp;script=0&amp;data.prod=&amp;data.subprod=&amp;data.pageid=</A>
</I>&gt;<i> &lt;<A HREF="https://googleads.g.doubleclick.net/pagead/viewthroughconversion/974108101/?value=0&amp;guid=ON&amp;script=0&amp;data.prod=&amp;data.subprod=&amp;data.pageid=">https://googleads.g.doubleclick.net/pagead/viewthroughconversion/974108101/?value=0&amp;guid=ON&amp;script=0&amp;data.prod=&amp;data.subprod=&amp;data.pageid=</A>&gt;
</I>&gt;<i> - ORIGINAL_DST/216.58.194.98 &lt;<A HREF="http://216.58.194.98">http://216.58.194.98</A>&gt; image/gif*
</I>&gt;<i>
</I>&gt;<i> *1467156895.664     82 10.40.40.100 TCP_MISS/200 649 GET
</I>&gt;<i> <A HREF="https://ad.doubleclick.net/activity;src=2549153;type=allv40;cat=all_a00;u1=11201507281102291611922021;ord=6472043235332.808">https://ad.doubleclick.net/activity;src=2549153;type=allv40;cat=all_a00;u1=11201507281102291611922021;ord=6472043235332.808</A>
</I>&gt;<i> &lt;<A HREF="https://ad.doubleclick.net/activity;src=2549153;type=allv40;cat=all_a00;u1=11201507281102291611922021;ord=6472043235332.808">https://ad.doubleclick.net/activity;src=2549153;type=allv40;cat=all_a00;u1=11201507281102291611922021;ord=6472043235332.808</A>&gt;?
</I>&gt;<i> - ORIGINAL_DST/216.58.194.70 &lt;<A HREF="http://216.58.194.70">http://216.58.194.70</A>&gt; image/gif*
</I>&gt;<i>
</I>&gt;<i> *1467156895.920    250 10.40.40.100 TAG_NONE/200 0 CONNECT
</I>&gt;<i> 24.155.92.60:443 &lt;<A HREF="http://24.155.92.60:443">http://24.155.92.60:443</A>&gt; - ORIGINAL_DST/24.155.92.60
</I>&gt;<i> &lt;<A HREF="http://24.155.92.60">http://24.155.92.60</A>&gt; -*
</I>&gt;<i>
</I>&gt;<i> *1467156896.061     79 10.40.40.100 TCP_MISS/200 503 GET
</I>&gt;<i> <A HREF="https://www.google.com/ads/user-lists/974108101/?script=0&amp;random=2433874630">https://www.google.com/ads/user-lists/974108101/?script=0&amp;random=2433874630</A>
</I>&gt;<i> &lt;<A HREF="https://www.google.com/ads/user-lists/974108101/?script=0&amp;random=2433874630">https://www.google.com/ads/user-lists/974108101/?script=0&amp;random=2433874630</A>&gt;
</I>&gt;<i> - ORIGINAL_DST/24.155.92.60 &lt;<A HREF="http://24.155.92.60">http://24.155.92.60</A>&gt; image/gif*
</I>&gt;<i>
</I>&gt;<i> *1467156899.837   5727 10.40.40.100 TAG_NONE/200 0 CONNECT
</I>&gt;<i> 159.45.66.156:443 &lt;<A HREF="http://159.45.66.156:443">http://159.45.66.156:443</A>&gt; - HIER_NONE/- -*
</I>&gt;<i>
</I>&gt;<i> *1467156899.837   5587 10.40.40.100 TCP_TUNNEL/200 165 CONNECT
</I>&gt;<i> connect.secure.wellsfargo.com:443
</I>&gt;<i> &lt;<A HREF="http://connect.secure.wellsfargo.com:443">http://connect.secure.wellsfargo.com:443</A>&gt; - ORIGINAL_DST/159.45.66.156
</I>&gt;<i> &lt;<A HREF="http://159.45.66.156">http://159.45.66.156</A>&gt; -*
</I>&gt;<i>
</I>&gt;<i> *1467156899.837   5679 10.40.40.100 TAG_NONE/200 0 CONNECT
</I>&gt;<i> 159.45.66.156:443 &lt;<A HREF="http://159.45.66.156:443">http://159.45.66.156:443</A>&gt; - HIER_NONE/- -*
</I>&gt;<i>
</I>&gt;<i> *1467156899.837   5587 10.40.40.100 TCP_TUNNEL/200 165 CONNECT
</I>&gt;<i> connect.secure.wellsfargo.com:443
</I>&gt;<i> &lt;<A HREF="http://connect.secure.wellsfargo.com:443">http://connect.secure.wellsfargo.com:443</A>&gt; - ORIGINAL_DST/159.45.66.156
</I>&gt;<i> &lt;<A HREF="http://159.45.66.156">http://159.45.66.156</A>&gt; -*
</I>&gt;<i>
</I>&gt;<i> *1467156899.838   5680 10.40.40.100 TAG_NONE/200 0 CONNECT
</I>&gt;<i> 159.45.66.156:443 &lt;<A HREF="http://159.45.66.156:443">http://159.45.66.156:443</A>&gt; - HIER_NONE/- -*
</I>&gt;<i>
</I>&gt;<i> *1467156899.838   5588 10.40.40.100 TCP_TUNNEL/200 165 CONNECT
</I>&gt;<i> connect.secure.wellsfargo.com:443
</I>&gt;<i> &lt;<A HREF="http://connect.secure.wellsfargo.com:443">http://connect.secure.wellsfargo.com:443</A>&gt; - ORIGINAL_DST/159.45.66.156
</I>&gt;<i> &lt;<A HREF="http://159.45.66.156">http://159.45.66.156</A>&gt; -*
</I>&gt;<i>
</I>&gt;<i> *1467156900.836   5421 10.40.40.100 TAG_NONE/200 0 CONNECT
</I>&gt;<i> 159.45.170.145:443 &lt;<A HREF="http://159.45.170.145:443">http://159.45.170.145:443</A>&gt; - HIER_NONE/- -*
</I>&gt;<i>
</I>&gt;<i> *1467156900.836   5042 10.40.40.100 TCP_TUNNEL/200 4631 CONNECT
</I>&gt;<i> www.wellsfargo.com:443 &lt;<A HREF="http://www.wellsfargo.com:443">http://www.wellsfargo.com:443</A>&gt; -
</I>&gt;<i> ORIGINAL_DST/159.45.170.145 &lt;<A HREF="http://159.45.170.145">http://159.45.170.145</A>&gt; -*
</I>&gt;<i>
</I>&gt;<i> *1467156900.837   5423 10.40.40.100 TAG_NONE/200 0 CONNECT
</I>&gt;<i> 159.45.2.142:443 &lt;<A HREF="http://159.45.2.142:443">http://159.45.2.142:443</A>&gt; - HIER_NONE/- -*
</I>&gt;<i>
</I>&gt;<i> *1467156900.837   5139 10.40.40.100 TCP_TUNNEL/200 4043 CONNECT
</I>&gt;<i> static.wellsfargo.com:443 &lt;<A HREF="http://static.wellsfargo.com:443">http://static.wellsfargo.com:443</A>&gt; -
</I>&gt;<i> ORIGINAL_DST/159.45.2.142 &lt;<A HREF="http://159.45.2.142">http://159.45.2.142</A>&gt; -*
</I>&gt;<i>
</I>&gt;<i> *1467156900.838   5423 10.40.40.100 TAG_NONE/200 0 CONNECT
</I>&gt;<i> 159.45.170.145:443 &lt;<A HREF="http://159.45.170.145:443">http://159.45.170.145:443</A>&gt; - HIER_NONE/- -*
</I>&gt;<i>
</I>&gt;<i> *1467156900.838   5088 10.40.40.100 TCP_TUNNEL/200 4631 CONNECT
</I>&gt;<i> www.wellsfargo.com:443 &lt;<A HREF="http://www.wellsfargo.com:443">http://www.wellsfargo.com:443</A>&gt; -
</I>&gt;<i> ORIGINAL_DST/159.45.170.145 &lt;<A HREF="http://159.45.170.145">http://159.45.170.145</A>&gt; -*
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> If I disable sslbumping then the bank site does not get bumped, of course.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 1467157349.321    230 10.40.40.100 TCP_MISS/301 243 GET
</I>&gt;<i> <A HREF="http://wellsfargo.com/">http://wellsfargo.com/</A> - ORIGINAL_DST/159.45.66.143 -
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Here is my squid.conf with bumping enabled.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> visible_hostname smoothwall
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> # Uncomment the following to send debug info to /var/log/squid/cache.log
</I>&gt;<i>
</I>&gt;<i> #debug_options ALL,1 33,2 28,9
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> # ACCESS CONTROLS
</I>&gt;<i>
</I>&gt;<i> # ----------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> acl localhostgreen src 10.40.40.1
</I>&gt;<i>
</I>&gt;<i> acl localnetgreen src 10.40.40.0/24
</I>&gt;<i>
</I>&gt;<i> acl SWE_subnets          src
</I>&gt;<i> &quot;/var/smoothwall/mods/proxy/acls/src_subnets.acl&quot;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> acl SSL_ports port 445 443 441 563
</I>&gt;<i>
</I>&gt;<i> acl Safe_ports port 80     # http
</I>&gt;<i>
</I>&gt;<i> acl Safe_ports port 81     # smoothwall http
</I>&gt;<i>
</I>&gt;<i> acl Safe_ports port 21     # ftp
</I>&gt;<i>
</I>&gt;<i> acl Safe_ports port 445 443 441 563 # https, snews
</I>&gt;<i>
</I>&gt;<i> acl Safe_ports port 70     # gopher
</I>&gt;<i>
</I>&gt;<i> acl Safe_ports port 210       # wais
</I>&gt;<i>
</I>&gt;<i> acl Safe_ports port 1025-65535 # unregistered ports
</I>&gt;<i>
</I>&gt;<i> acl Safe_ports port 280       # http-mgmt
</I>&gt;<i>
</I>&gt;<i> acl Safe_ports port 488       # gss-http
</I>&gt;<i>
</I>&gt;<i> acl Safe_ports port 591       # filemaker
</I>&gt;<i>
</I>&gt;<i> acl Safe_ports port 777       # multiling http
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> acl CONNECT method CONNECT
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> # TAG: http_access
</I>&gt;<i>
</I>&gt;<i> # ----------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> http_access allow SWE_subnets
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> http_access allow localhost
</I>&gt;<i>
</I>&gt;<i> http_access deny !Safe_ports
</I>&gt;<i>
</I>&gt;<i> http_access deny CONNECT !SSL_ports
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> http_access allow localnetgreen
</I>&gt;<i>
</I>&gt;<i> http_access allow CONNECT localnetgreen
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> http_access allow localhostgreen
</I>&gt;<i>
</I>&gt;<i> http_access allow CONNECT localhostgreen
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> # http_port and https_port
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> #----------------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> # For forward-proxy port. Squid uses this port to serve error pages, ftp
</I>&gt;<i> icons and communication with other proxies.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> #----------------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> http_port 3127
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> http_port 10.40.40.1:800 intercept
</I>&gt;<i>
</I>&gt;<i> https_port 10.40.40.1:808 intercept ssl-bump
</I>&gt;<i> generate-host-certificates=on dynamic_cert_mem_cache_size=4MB
</I>&gt;<i> cert=/var/smoothwall/mods/proxy/ssl_cert/squidCA.pem
</I>&gt;<i> sslflags=VERIFY_CRL_ALL options=NO_SSLv2,NO_SSLv3,No_Compression
</I>&gt;<i> dhparams=/var/smoothwall/mods/proxy/ssl_cert/dhparam.pem
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> http_port 127.0.0.1:800 intercept
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> sslproxy_session_cache_size 4 MB
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ssl_bump none localhostgreen
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> sslproxy_options NO_SSLv2,NO_SSLv3,No_Compression
</I>&gt;<i>
</I>&gt;<i> sslproxy_cipher
</I>&gt;<i> ALL:!SSLv2:!SSLv3:!ADH:!DSS:!MD5:!EXP:!DES:!PSK:!SRP:!RC4:!IDEA:!SEED:!aNULL:!eNULL
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> acl tls_s1_connect at_step SslBump1
</I>&gt;<i>
</I>&gt;<i> acl tls_s2_client_hello at_step SslBump2
</I>&gt;<i>
</I>&gt;<i> acl tls_s3_server_hello at_step SslBump3
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> acl tls_allowed_hsts ssl::server_name .akamaihd.net
</I>&gt;<i>
</I>&gt;<i> acl tls_server_is_bank ssl::server_name .wellsfargo.com
</I>&gt;<i>
</I>&gt;<i> acl tls_to_splice any-of tls_allowed_hsts tls_server_is_bank
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ssl_bump peek tls_s1_connect all
</I>&gt;<i>
</I>&gt;<i> ssl_bump splice tls_s2_client_hello tls_to_splice
</I>&gt;<i>
</I>&gt;<i> ssl_bump stare tls_s2_client_hello all
</I>&gt;<i>
</I>&gt;<i> ssl_bump bump tls_s3_server_hello all
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> sslproxy_cert_error deny all
</I>&gt;<i>
</I>&gt;<i> sslproxy_flags DONT_VERIFY_PEER
</I>&gt;<i>
</I>&gt;<i> sslcrtd_program /var/smoothwall/mods/proxy/libexec/ssl_crtd -s
</I>&gt;<i> /var/smoothwall/mods/proxy/lib/ssl_db -M 4MB
</I>&gt;<i>
</I>&gt;<i> sslcrtd_children 5
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> http_access deny all
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> cache_replacement_policy heap GDSF
</I>&gt;<i>
</I>&gt;<i> memory_replacement_policy heap GDSF
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> # CACHE OPTIONS
</I>&gt;<i>
</I>&gt;<i> #
</I>&gt;<i> ----------------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> cache_effective_user squid
</I>&gt;<i>
</I>&gt;<i> cache_effective_group squid
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> cache_swap_high 100
</I>&gt;<i>
</I>&gt;<i> cache_swap_low 80
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> cache_access_log stdio:/var/log/squid/access.log
</I>&gt;<i>
</I>&gt;<i> cache_log /var/log/squid/cache.log
</I>&gt;<i>
</I>&gt;<i> cache_mem 64 MB
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> cache_dir aufs /var/spool/squid/cache 1024 16 256
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> maximum_object_size 33 MB
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> minimum_object_size 0 KB
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> request_body_max_size 0 KB
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> # OTHER OPTIONS
</I>&gt;<i>
</I>&gt;<i> #
</I>&gt;<i> ----------------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> #via off
</I>&gt;<i>
</I>&gt;<i> forwarded_for off
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> pid_filename /var/run/squid.pid
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> shutdown_lifetime 10 seconds
</I>&gt;<i>
</I>&gt;<i> #icp_port 3130
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> half_closed_clients off
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> umask 022
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> logfile_rotate 0
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> strip_query_terms off
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Tue, Jun 28, 2016 at 9:56 AM, Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i>
</I>&gt;<i> On 29/06/2016 2:02 a.m., Stanford Prescott wrote:
</I>&gt;<i> &gt; I have the proper peek and splice and bump configuration of acls setup in
</I>&gt;<i> &gt; my squid.conf file for no-bump of some web sites. I need help how to
</I>&gt;<i> enter
</I>&gt;<i> &gt; the banking hosts and or server names in a way that the peek and splice
</I>&gt;<i> &gt; configuration will determine it is a banking site that I don't want
</I>&gt;<i> bumped.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; For example, if a user enters www.wellsfargo.com for online banking my
</I>&gt;<i> &gt; current config still bumps wellsfargo.com. What would I need to enter
</I>&gt;<i> for
</I>&gt;<i> &gt; wellsfargo.com so that banking server will not be bumped?
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> Depends on what you mean by &quot;enter&quot;.
</I>&gt;<i>
</I>&gt;<i> Are you asking for the ACL value?
</I>&gt;<i>   .wellfargo.com
</I>&gt;<i>
</I>&gt;<i> Are you asking for the ACL definition?
</I>&gt;<i>  acl banks ssl::server_name .wellsfargo.com
</I>&gt;<i>
</I>&gt;<i> Or are you asking for a whole SSL-Bump configuration example?
</I>&gt;<i>  &lt;<A HREF="http://wiki.squid-cache.org/Features/SslPeekAndSplice">http://wiki.squid-cache.org/Features/SslPeekAndSplice</A>&gt; has a few.
</I>&gt;<i>
</I>&gt;<i> Amos
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160710/65a155b4/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160710/65a155b4/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 11295 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160710/65a155b4/attachment.png">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160710/65a155b4/attachment.png</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011500.html">[squid-users] HTTPS bump doesn't work with websites that require SNI
</A></li>
	<LI>Next message (by thread): <A HREF="011497.html">[squid-users] Windows Updates a Caching Stub zone,	A windows updates store.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11496">[ date ]</a>
              <a href="thread.html#11496">[ thread ]</a>
              <a href="subject.html#11496">[ subject ]</a>
              <a href="author.html#11496">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
