<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] auth, ssl bump and analyzing logs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20auth%2C%20ssl%20bump%20and%20analyzing%20logs&In-Reply-To=%3Cd8671e77-720d-ecde-05e0-5d133b7d9b5f%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011528.html">
   <LINK REL="Next"  HREF="011530.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] auth, ssl bump and analyzing logs</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20auth%2C%20ssl%20bump%20and%20analyzing%20logs&In-Reply-To=%3Cd8671e77-720d-ecde-05e0-5d133b7d9b5f%40treenet.co.nz%3E"
       TITLE="[squid-users] auth, ssl bump and analyzing logs">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Jul 14 11:27:04 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011528.html">[squid-users] auth, ssl bump and analyzing logs
</A></li>
        <LI>Next message (by thread): <A HREF="011530.html">[squid-users] auth, ssl bump and analyzing logs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11529">[ date ]</a>
              <a href="thread.html#11529">[ thread ]</a>
              <a href="subject.html#11529">[ subject ]</a>
              <a href="author.html#11529">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 14/07/2016 8:38 p.m., Marko Cupa&#263; wrote:
&gt;<i> On Thu, 14 Jul 2016 20:23:03 +1200
</I>&gt;<i> Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> On 14/07/2016 7:45 p.m., Marko Cupa&#263; wrote:
</I>&gt;&gt;&gt;<i> Hi,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> is there a way to parse squid access.log in a way that only traffic
</I>&gt;&gt;&gt;<i> that was served to clients count?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Unless you are using a custom log. That is the only data that gets
</I>&gt;&gt;<i> logged in the size field of access.log.
</I>&gt;<i> 
</I>&gt;<i> I am using default squid format.
</I>&gt;<i> 
</I>&gt;&gt;<i> There are several more types of transaction status than HIT, MISS,
</I>&gt;&gt;<i> ERROR in modern Squid logs.
</I>&gt;<i> 
</I>&gt;<i> I can also get those expanded:
</I>&gt;<i> 
</I>&gt;<i> # Incoming TCP-requests by status
</I>&gt;<i> status                             request      %    Byte       %   sec  kB/sec 
</I>&gt;<i> --------------------------------- --------- ------ -------- ------ ---- ------- 
</I>&gt;<i> HIT                                   97006   6.28 1917953K   4.27    0  168.55 
</I>&gt;<i>  TCP_MEM_HIT                          36766   2.38  776934K   1.73    0  237.31 
</I>&gt;<i>  TCP_HIT                              36640   2.37 1086401K   2.42    0  161.41 
</I>&gt;<i>  TCP_IMS_HIT                          23389   1.51 12253316   0.03    0   80.17 
</I>&gt;<i>  TCP_HIT_ABORTED                        163   0.01 39804662   0.09    7   34.80 
</I>&gt;<i>  TCP_MEM_HIT_ABORTED                     48   0.00  3871446   0.01    2   34.85 
</I>&gt;<i> MISS                                 750043  48.54   18636M  42.46    2   15.74 
</I>&gt;<i>  TCP_MISS                            567543  36.73   15432M  35.16    1   20.55 
</I>&gt;<i>  TAG_NONE                            151551   9.81   613969   0.00    2    0.00 
</I>
TAG_NONE is not one of these three categories.


&gt;<i>  TCP_REFRESH_UNMODIFIED               16206   1.05  147799K   0.33    0   99.75 
</I>
These ^^ are HITs.

&gt;<i>  TCP_MISS_ABORTED                      5847   0.38 2835049K   6.31   15   31.59 
</I>&gt;<i>  TCP_CLIENT_REFRESH_MISS               5433   0.35  101448K   0.23    0   85.84 
</I>&gt;<i>  TCP_TUNNEL                            1899   0.12  151616K   0.34   24    3.27 
</I>
TUNNEL is not one of these three categories.

&gt;<i>  TCP_REFRESH_MODIFIED                  1327   0.09 38878113   0.08    0   79.35 
</I>
These ^^ are both a HIT and a MISS. :-P

&gt;<i>  TCP_SWAPFAIL_MISS                      185   0.01  1702107   0.00    0   65.96 
</I>&gt;<i>  TCP_CLIENT_REFRESH_MISS_ABORTED         28   0.00   542744   0.00    1   23.00 
</I>&gt;<i>  TCP_MISS_TIMEDOUT                        9   0.00  2074692   0.00 1182    0.19 
</I>&gt;<i>  TCP_REFRESH_UNMODIFIED_ABORTED           8   0.00  2186179   0.00   12   22.89 
</I>
These ^^ are HITs as well.

&gt;<i>  TCP_REFRESH_MODIFIED_ABORTED             4   0.00   158836   0.00    1   30.43 
</I>
see REFRESH_MODIFIED.

&gt;<i>  TCP_SWAPFAIL_MISS_ABORTED                3   0.00        0   0.00    0    0.00 
</I>&gt;<i> ERROR                                698141  45.18   23387M  53.28    1   48.90 
</I>&gt;<i>  TCP_DENIED                          553410  35.82   13353M  30.42    0 1247.84 
</I>&gt;<i>  TAG_NONE                             82143   5.32 7500058K  16.69    1   67.05 
</I>
see earlier TAG_NONE.

&gt;<i>  TCP_DENIED_ABORTED                   54691   3.54 2623701K   5.84    0  822.03 
</I>&gt;<i>  TCP_MISS                              6011   0.39  149387K   0.33    0  458.36 
</I>
TCP_MISS is an error ?

&gt;<i>  TAG_NONE_ABORTED                      1783   0.12        0   0.00   35    0.00 
</I>&gt;<i>  TCP_MISS_ABORTED                        54   0.00  1227715   0.00    1   36.09 
</I>&gt;<i>  TAG_NONE_TIMEDOUT                       38   0.00        0   0.00 7800    0.00 
</I>&gt;<i>  TCP_DENIED_TIMEDOUT                     11   0.00   595022   0.00  445    0.12 
</I>&gt;<i> --------------------------------- --------- ------ -------- ------ ---- ------- 
</I>&gt;<i> Sum                                 1545190 100.00   43897M 100.00    1   26.23 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> Perhapse the problem is that your Calamaris does not handle those
</I>&gt;&gt;<i> other transaction types.
</I>&gt;<i> 
</I>&gt;<i> Do you speak of those in table above, or some additional ones? I am
</I>
Yes, those above. Though the way some entries are repeated under MISS
and ERROR implies the status code is also playing a part.

&gt;<i> using calamaris-2.59_2. When you say 'your Calamaris', should I
</I>&gt;<i> conclude there is another Calamaris which can?
</I>
Maybe. I don't know much about Calamaris.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011528.html">[squid-users] auth, ssl bump and analyzing logs
</A></li>
	<LI>Next message (by thread): <A HREF="011530.html">[squid-users] auth, ssl bump and analyzing logs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11529">[ date ]</a>
              <a href="thread.html#11529">[ thread ]</a>
              <a href="subject.html#11529">[ subject ]</a>
              <a href="author.html#11529">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
