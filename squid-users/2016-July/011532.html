<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] auth, ssl bump and analyzing logs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20auth%2C%20ssl%20bump%20and%20analyzing%20logs&In-Reply-To=%3C76e2bdd9-b074-ae3a-3ea3-c50890472636%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011530.html">
   <LINK REL="Next"  HREF="011531.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] auth, ssl bump and analyzing logs</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20auth%2C%20ssl%20bump%20and%20analyzing%20logs&In-Reply-To=%3C76e2bdd9-b074-ae3a-3ea3-c50890472636%40treenet.co.nz%3E"
       TITLE="[squid-users] auth, ssl bump and analyzing logs">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Jul 14 12:28:51 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011530.html">[squid-users] auth, ssl bump and analyzing logs
</A></li>
        <LI>Next message (by thread): <A HREF="011531.html">[squid-users] Cache problem with authenticated sites.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11532">[ date ]</a>
              <a href="thread.html#11532">[ thread ]</a>
              <a href="subject.html#11532">[ subject ]</a>
              <a href="author.html#11532">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 14/07/2016 11:59 p.m., Marko Cupa&#263; wrote:
&gt;<i> On Thu, 14 Jul 2016 23:27:04 +1200
</I>&gt;<i> Amos Jeffries wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> On 14/07/2016 8:38 p.m., Marko Cupa&#263; wrote:
</I>&gt;&gt;&gt;<i> On Thu, 14 Jul 2016 20:23:03 +1200
</I>&gt;&gt;&gt;<i> Amos Jeffries wrote:
</I>&gt;&gt;&gt;<i>   
</I>&gt;&gt;&gt;&gt;<i> On 14/07/2016 7:45 p.m., Marko Cupa&#263; wrote:  
</I>&gt;&gt;&gt;&gt;&gt;<i> Hi,
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> is there a way to parse squid access.log in a way that only
</I>&gt;&gt;&gt;&gt;&gt;<i> traffic that was served to clients count?  
</I>&gt;<i> 
</I>&gt;<i> Amos,
</I>&gt;<i> 
</I>&gt;<i> I'm grateful for the explanation of transaction status types. This info
</I>&gt;<i> is valuable to me as it helps me better understand squid.
</I>&gt;<i> 
</I>&gt;<i> However, this does not solve my problem which would be getting insight
</I>&gt;<i> into accurate per-user bandwidth usage and number of successful requests
</I>&gt;<i> (I mean those which actually resulted in content served to client).
</I>&gt;<i> 
</I>
That depends on what you mean by &quot;bandwidth usage&quot; and &quot;content served
to the client&quot;.

The various bits of bandwidth between client and Squid is covered quite
well by logformat codes. So you can make a custom log with whatever
values you want to record about that side of each transaction. But the
Squid-to-server side of things is much more sparse.

If you really just need to know how many payload bytes were delivered to
each client by Squid, then adding up all their transactions (HIT, MISS,
ERROR, or otherwise) in your current default log will give you that
total without much trouble.

To get the more accurate total of client usage in both request and reply
directions. You need a custom log with the %st code. That includes the
message headers and the 'upload' payloads sent by the client.


To get Squid-to-server traffic count, there is the %&lt;bs code. But that
one omits all the message and framing overheads of HTTP. Adding other
server bandwidth codes is on my todo list, but way down.


&gt;<i> I don't insist on Calamaris, this is just something I used before and
</I>&gt;<i> am familiar with. Perhaps someone can recommend me some other squid log
</I>&gt;<i> parser which can give me info I need?
</I>
I use the SQL DB logging daemon recording %st and some custom PHP web
pages to display reports from the resulting database.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011530.html">[squid-users] auth, ssl bump and analyzing logs
</A></li>
	<LI>Next message (by thread): <A HREF="011531.html">[squid-users] Cache problem with authenticated sites.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11532">[ date ]</a>
              <a href="thread.html#11532">[ thread ]</a>
              <a href="subject.html#11532">[ subject ]</a>
              <a href="author.html#11532">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
