<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid Transparent WEB Captatif : Cisco ASA WCCP
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Transparent%20WEB%20Captatif%20%3A%20Cisco%20ASA%20WCCP&In-Reply-To=%3C7dd34d2c-8bb1-e5df-ea43-2ee898f6ead3%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011563.html">
   <LINK REL="Next"  HREF="011565.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid Transparent WEB Captatif : Cisco ASA WCCP</H1>
    <B>Yuri Voinov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Transparent%20WEB%20Captatif%20%3A%20Cisco%20ASA%20WCCP&In-Reply-To=%3C7dd34d2c-8bb1-e5df-ea43-2ee898f6ead3%40gmail.com%3E"
       TITLE="[squid-users] Squid Transparent WEB Captatif : Cisco ASA WCCP">yvoinov at gmail.com
       </A><BR>
    <I>Fri Jul 15 17:52:54 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011563.html">[squid-users] Squid Transparent WEB Captatif : Cisco ASA WCCP
</A></li>
        <LI>Next message (by thread): <A HREF="011565.html">[squid-users] Wrong req_header result in cache_peer_access when	using ssl_bump
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11564">[ date ]</a>
              <a href="thread.html#11564">[ thread ]</a>
              <a href="subject.html#11564">[ subject ]</a>
              <a href="author.html#11564">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256
 


15.07.2016 21:52, Maxime Lambert &#1087;&#1080;&#1096;&#1077;&#1090;:
&gt;<i> Hi everyone !!
</I>&gt;<i>
</I>&gt;<i> My issue is that i didn't received any data in access.log. I work on
</I>Ubuntu Server 16.04 with Squid 5.3.20 compiled with :
&gt;<i> ./configure --prefix=/usr --localstatedir=/var
</I>--libexecdir=${prefix}/lib/squid --datadir=${prefix}/share/squid
--sysconfdir=/etc/squid --with-default-user=proxy
--with-logdir=/var/log/squid --with-pidfile=/var/run/squid.pid
--with-openssl --enable-icmp *--enable-linux-netfilter --enable-wccpv2*
--enable-gnuregex --enable-xmalloc-statistics --enable-async-io
--enable-delay-pools --enable-useragent-log --enable-kill-parent-hack
--enable-htpc --enable-forw-via-db --enable-cache-digests
--enable-dl-malloc --enable-time-hack --enable-ssl --enable-ssl-crtd
&gt;<i>
</I>&gt;<i> This is my conf :
</I>&gt;<i>
</I>&gt;<i>                  Internet
</I>&gt;<i>                        |
</I>&gt;<i>                        |                           10.12.3.200
</I>&gt;<i>                Cisco-ASA  -----------------------  Squid Server
</I><A HREF="http://wiki.squid-cache.org/ConfigExamples/Intercept/CiscoAsaWccp2">http://wiki.squid-cache.org/ConfigExamples/Intercept/CiscoAsaWccp2</A>
&gt;<i>                        |   10.12.1.1
</I>&gt;<i>                        |
</I>&gt;<i>               /------------------------/
</I>&gt;<i>                                    |
</I>&gt;<i>                                    |   10.12.2.18
</I>&gt;<i>                               Client
</I>&gt;<i>
</I>&gt;<i> If my Squid server is UP my client can't go on web, else if my Squid
</I>server is DOWN he can surf on it.
&gt;<i>
</I>&gt;<i> I've allow localnet 10.12.1.0/24.
</I>&gt;<i> And i've tunnel GRE, and my Cisco saw it.
</I>Why you are using GRE as assignment method when your clients and proxy
in the same L2 segment? Reasonable to use L2 method, which is hardware
accelerated.
&gt;<i>
</I>&gt;<i> squid.conf :  
</I>&gt;<i>         ...
</I>&gt;<i>         http_port 80 intercept                                     
</I>&lt;== Should I write intercept or transparent ?
If your using Squid 3.5.20, this must be intercept, as documented in
manuals - did you read it?
&gt;<i>         http_port 3128       
</I>&gt;<i>         wccp_version 2                                              
</I>&lt;== Should I write 2 or 4 ?
<A HREF="http://wiki.squid-cache.org/ConfigExamples/Intercept/CiscoAsaWccp2">http://wiki.squid-cache.org/ConfigExamples/Intercept/CiscoAsaWccp2</A>
<A HREF="http://wiki.squid-cache.org/ConfigExamples/Intercept/CiscoIOSv15Wccp2">http://wiki.squid-cache.org/ConfigExamples/Intercept/CiscoIOSv15Wccp2</A>
&gt;<i>         wccp2_router 10.12.1.1
</I>&gt;<i>         wccp2_forwarding_method 1                          &lt;== Should
</I>I write gre or 1 ?
<A HREF="http://wiki.squid-cache.org/ConfigExamples/Intercept/CiscoAsaWccp2">http://wiki.squid-cache.org/ConfigExamples/Intercept/CiscoAsaWccp2</A>
<A HREF="http://wiki.squid-cache.org/ConfigExamples/Intercept/CiscoIOSv15Wccp2">http://wiki.squid-cache.org/ConfigExamples/Intercept/CiscoIOSv15Wccp2</A>
&gt;<i>         wccp2_return_method 1                                  &lt;== Should I write  gre or 1 ?
</I><A HREF="http://wiki.squid-cache.org/ConfigExamples/Intercept/CiscoAsaWccp2">http://wiki.squid-cache.org/ConfigExamples/Intercept/CiscoAsaWccp2</A>
<A HREF="http://wiki.squid-cache.org/ConfigExamples/Intercept/CiscoIOSv15Wccp2">http://wiki.squid-cache.org/ConfigExamples/Intercept/CiscoIOSv15Wccp2</A>
&gt;<i>         wccp2_service standard 0 password=XXXX
</I><A HREF="http://wiki.squid-cache.org/ConfigExamples/Intercept/CiscoAsaWccp2">http://wiki.squid-cache.org/ConfigExamples/Intercept/CiscoAsaWccp2</A>
<A HREF="http://wiki.squid-cache.org/ConfigExamples/Intercept/CiscoIOSv15Wccp2">http://wiki.squid-cache.org/ConfigExamples/Intercept/CiscoIOSv15Wccp2</A>
&gt;<i>
</I>&gt;<i> I've also : ip tunnel add wccp0 mode gre remote 10.12.1.1 local
</I>10.12.12.200 dev ens32
&gt;<i>
</I>&gt;<i> I received packet WCCP &quot;Are you here - I see you...&quot;
</I>&gt;<i>
</I>&gt;<i> But i can't access on web with my client if Squid server is UP and my
</I>access.log file stay empty... Could you help me ?
<A HREF="http://wiki.squid-cache.org/ConfigExamples/Intercept/CiscoAsaWccp2">http://wiki.squid-cache.org/ConfigExamples/Intercept/CiscoAsaWccp2</A>
<A HREF="http://wiki.squid-cache.org/ConfigExamples/Intercept/CiscoIOSv15Wccp2">http://wiki.squid-cache.org/ConfigExamples/Intercept/CiscoIOSv15Wccp2</A>
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Best regards,
</I>&gt;<i>
</I>&gt;<i> Maxime Lambert
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2
 
iQEcBAEBCAAGBQJXiSLyAAoJENNXIZxhPexGEFcIAMSKBWzRlc4mUQ6OZ2LHchLC
CC2b0q28Kg3U4dnOpM+wrHJaxAt363CTn2LTa7kHGUoKNmOGZqTZgH9KvcxYn2JB
8WYIg6oIdnsdHvWXkcfI99U6dvOCUOylc8u5cNtc6w0k6/p73IBHR9ZCHTTGfvhx
x6UxSrIDHUy448qsQkQwIy6BiO0S+Jt1bmAZ1j8toMB2ikPzNBW24utwWOVutEb3
XIvuebtyNAcYVu6+twCy3/DQKhjHzaaHCYZfPiXLsPtdnXbQD+SOVFNtjuQ0NWjA
9ebnv8FbZpuJL1o3H0F3xCuIJ8PePhbZAARjtP8fDfrIQMjFk01Ve9NvzhBZOcs=
=3Q2B
-----END PGP SIGNATURE-----

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160715/ee60b96d/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160715/ee60b96d/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0x613DEC46.asc
Type: application/pgp-keys
Size: 2437 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160715/ee60b96d/attachment.key">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160715/ee60b96d/attachment.key</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011563.html">[squid-users] Squid Transparent WEB Captatif : Cisco ASA WCCP
</A></li>
	<LI>Next message (by thread): <A HREF="011565.html">[squid-users] Wrong req_header result in cache_peer_access when	using ssl_bump
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11564">[ date ]</a>
              <a href="thread.html#11564">[ thread ]</a>
              <a href="subject.html#11564">[ subject ]</a>
              <a href="author.html#11564">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
