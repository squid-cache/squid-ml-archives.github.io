<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Windows Updates a Caching Stub zone,	A windows updates store.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Windows%20Updates%20a%20Caching%20Stub%20zone%2C%0A%09A%20windows%20updates%20store.&In-Reply-To=%3C003d01d1dfa3%24d602dc30%2482089490%24%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011566.html">
   <LINK REL="Next"  HREF="011572.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Windows Updates a Caching Stub zone,	A windows updates store.</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Windows%20Updates%20a%20Caching%20Stub%20zone%2C%0A%09A%20windows%20updates%20store.&In-Reply-To=%3C003d01d1dfa3%24d602dc30%2482089490%24%40ngtech.co.il%3E"
       TITLE="[squid-users] Windows Updates a Caching Stub zone,	A windows updates store.">eliezer at ngtech.co.il
       </A><BR>
    <I>Sat Jul 16 20:51:33 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011566.html">[squid-users] Windows Updates a Caching Stub zone,	A windows updates store.
</A></li>
        <LI>Next message (by thread): <A HREF="011572.html">[squid-users] Windows Updates a Caching Stub zone,	A windows updates store.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11571">[ date ]</a>
              <a href="thread.html#11571">[ thread ]</a>
              <a href="subject.html#11571">[ subject ]</a>
              <a href="author.html#11571">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Omid,

1. You should understand what you are doing and not blindly fetch downloads.
The estimation is that you will need maximum of 100GB of storage for the whole &quot;store&quot; for a period of time.
This is also due to this that Microsoft Windows Update service will not download files without a need.
The fetcher should help you to download periodical updates but I assume that the updates have a limit... You should consider asking MS on what is expected to be in the downloads or when do download happen.

2. If you need more then one location you should use some logical volume to do that instead of spreading manually over more then one disk.
This is based on the basic understanding that the service is a &quot;web-service&quot; which is serving files and you should treat it the same way like any other.
When I am running a web-service and I need more then one disk I do not run to &quot;spread&quot; it manually but use some OS level tools.
I do trust the OS and the logical volume management tools to do their work properly. When I will loss my trust in them I will stop using this OS, this is as simple as that.
3. The HITS are counted but I need to dig into the code to verify how a HIT is logged and how it can be counted manually.
QOS or TOS, by what? How?
The service how one way out and one way in..
If the requested file is in store you will not see outgoing traffic for the file.
The right way to show a HIT in this service is to change the response headers file to have another header.
This could be done manually using a tiny script but not as a part of the store software.
An example to such addition would be:
# perl -pi -e '$/=&quot;&quot;; s/\r\n\r\n/\r\nX-Store-Hit: HIT\r\n\r\n/; /var/storedata/header/v1/fff8db4723842074ab8d8cc4ad20a0f97d47f6d849149c81c4e52abc727d43b5

And it will change the response headers and these can be seen in a squid access.log using a log format.
I can think of other ways to report this but a question:
If it works as expected and expected to always work, why would you want to see the HIT in a QOS or TOS?
QOS and TOS levels of socket manipulation will require me to find a way to hack the simple web service and I will probably won&#8217;t go this way.
I do know that you will be able to manipulate QOS or TOS in squid if some header exist in the response.

I will might be able to look at the subject if there is a real technical\functional need for that in a long term usage.

Eliezer

----
Eliezer Croitoru
Linux System Administrator
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>


-----Original Message-----
From: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On Behalf Of Omid Kosari
Sent: Friday, July 15, 2016 8:48 PM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Windows Updates a Caching Stub zone, A windows updates store.

Hi,

Questions
1-What happens if disk or partition becomes full ?
2-Is there a way to use more than one location for store ?
3-Currently hits from your code , could not be counted .How i can use qos
flows/tos mark those hits ?



--
View this message in context: <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/Windows-Updates-a-Caching-Stub-zone-A-windows-updates-store-tp4678454p4678524.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/Windows-Updates-a-Caching-Stub-zone-A-windows-updates-store-tp4678454p4678524.html</A>
Sent from the Squid - Users mailing list archive at Nabble.com.
_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011566.html">[squid-users] Windows Updates a Caching Stub zone,	A windows updates store.
</A></li>
	<LI>Next message (by thread): <A HREF="011572.html">[squid-users] Windows Updates a Caching Stub zone,	A windows updates store.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11571">[ date ]</a>
              <a href="thread.html#11571">[ thread ]</a>
              <a href="subject.html#11571">[ subject ]</a>
              <a href="author.html#11571">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
