<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid Intercept - From inside LAN with DNAT on router and docker on host
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Intercept%20-%20From%20inside%20LAN%20with%20DNAT%20on%0A%20router%20and%20docker%20on%20host&In-Reply-To=%3C6a9afde4-ba77-d432-babc-c89af97ee3b9%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011650.html">
   <LINK REL="Next"  HREF="011679.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid Intercept - From inside LAN with DNAT on router and docker on host</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Intercept%20-%20From%20inside%20LAN%20with%20DNAT%20on%0A%20router%20and%20docker%20on%20host&In-Reply-To=%3C6a9afde4-ba77-d432-babc-c89af97ee3b9%40treenet.co.nz%3E"
       TITLE="[squid-users] Squid Intercept - From inside LAN with DNAT on router and docker on host">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Jul 21 06:07:25 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011650.html">[squid-users] Squid Intercept - From inside LAN with DNAT on	router and docker on host
</A></li>
        <LI>Next message (by thread): <A HREF="011679.html">[squid-users] Squid Intercept - From inside LAN with DNAT on router and docker on host
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11669">[ date ]</a>
              <a href="thread.html#11669">[ thread ]</a>
              <a href="subject.html#11669">[ subject ]</a>
              <a href="author.html#11669">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 21/07/2016 8:50 a.m., Antony Stone wrote:
&gt;<i> On Wednesday 20 July 2016 at 22:44:46, Bruno de Paula Larini wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> Em 20/07/2016 17:10, Antony Stone escreveu:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> You *must* perform the DNAT on the machine running Squid, which means that
</I>&gt;&gt;&gt;<i> the packets from your clients must pass through the Squid server, either
</I>&gt;&gt;&gt;<i> because it is in the default route, or because you use some form of policy
</I>&gt;&gt;&gt;<i> routing (not NAT) to direct port 80 requests through it.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If that's the case I think it would be better if the document instructed
</I>&gt;&gt;<i> to use REDIRECT --to-port instead DNAT as an implicit way to explain that.
</I>
Primarily because the document you are looking at Bruno is the one for
DNAT. There is a different config example for REDIRECT
 &lt;<A HREF="http://wiki.squid-cache.org/ConfigExamples/Intercept/LinuxRedirect">http://wiki.squid-cache.org/ConfigExamples/Intercept/LinuxRedirect</A>&gt;

&gt;<i> 
</I>&gt;<i> What is unclear about:
</I>&gt;<i> 
</I>&gt;<i> *NOTE:* This configuration is given for use *on the squid box*. This is 
</I>&gt;<i> required to perform intercept accurately and securely.  To intercept from a 
</I>&gt;<i> gateway machine and direct traffic at a separate squid box use policy routing. 
</I>&gt;<i> 
</I>&gt;<i> 	?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Antony.
</I>&gt;<i> 
</I>
As to why we even have a DNAT page. That is because at high traffic
loads DNAT is measurably faster for iptables to perform than REDIRECT.
On machinery where the IPs are static and performance is needed, DNAT
*on the same machine* is the best way to go.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011650.html">[squid-users] Squid Intercept - From inside LAN with DNAT on	router and docker on host
</A></li>
	<LI>Next message (by thread): <A HREF="011679.html">[squid-users] Squid Intercept - From inside LAN with DNAT on router and docker on host
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11669">[ date ]</a>
              <a href="thread.html#11669">[ thread ]</a>
              <a href="subject.html#11669">[ subject ]</a>
              <a href="author.html#11669">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
