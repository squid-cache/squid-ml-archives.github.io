<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] sslbump and skype question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20sslbump%20and%20skype%20question&In-Reply-To=%3C20160728174002.5b26d18d%40mephala.kappastar.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011743.html">
   <LINK REL="Next"  HREF="011747.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] sslbump and skype question</H1>
    <B>Marko Cupa&#263;</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20sslbump%20and%20skype%20question&In-Reply-To=%3C20160728174002.5b26d18d%40mephala.kappastar.com%3E"
       TITLE="[squid-users] sslbump and skype question">marko.cupac at mimar.rs
       </A><BR>
    <I>Thu Jul 28 15:40:02 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011743.html">[squid-users] Problem with single quotes
</A></li>
        <LI>Next message (by thread): <A HREF="011747.html">[squid-users] sslbump and skype question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11742">[ date ]</a>
              <a href="thread.html#11742">[ thread ]</a>
              <a href="subject.html#11742">[ subject ]</a>
              <a href="author.html#11742">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I'm using squid-3.5.20 to sslbump by default, and splice if needed:

---snip---
acl splice_domains dstdomain &quot;/usr/local/etc/squid/acl/splice_domains

acl step1 at_step SslBump1
ssl_bump peek step1
ssl_bump splice splice_domains
ssl_bump bump all
---snip---

As far as I am aware, this setup works for most websites. The ones
which don't work are usually those with self-signed certificates, but I
am easily overriding them by adding problematic domains to above acl.

My biggest problem is the fact that I can't make skype work with the
above config. So, if I reverse sslbump logic - splice by default and
bump if needed, skype works:

---snip---
acl bump_domains dstdomain &quot;/usr/local/etc/squid/acl/bump_domains

acl step1 at_step SslBump1
ssl_bump peek step1
ssl_bump bump_domains
ssl_bump splice all
---snip---

In this setup skype works, but that kinda defeats main purpose of my
proxy, which is to inspect https traffic for unwanted extensions and
mime types directly in squid, and viruses with squidclamav.

Is there a way to instruct squid to splice all numeric IPs? Would it make
skype work through squid or there are additional gotchas?

Thank you in advance,
-- 
Before enlightenment - chop wood, draw water.
After  enlightenment - chop wood, draw water.

Marko Cupa&#263;
<A HREF="https://www.mimar.rs/">https://www.mimar.rs/</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011743.html">[squid-users] Problem with single quotes
</A></li>
	<LI>Next message (by thread): <A HREF="011747.html">[squid-users] sslbump and skype question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11742">[ date ]</a>
              <a href="thread.html#11742">[ thread ]</a>
              <a href="subject.html#11742">[ subject ]</a>
              <a href="author.html#11742">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
