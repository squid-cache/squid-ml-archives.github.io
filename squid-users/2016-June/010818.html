<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] pinger crash - Bad opcode: 112
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20pinger%20crash%20-%20Bad%20opcode%3A%20112&In-Reply-To=%3Ca176619d-3ca6-132b-f72e-40723be158ed%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010994.html">
   <LINK REL="Next"  HREF="010840.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] pinger crash - Bad opcode: 112</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20pinger%20crash%20-%20Bad%20opcode%3A%20112&In-Reply-To=%3Ca176619d-3ca6-132b-f72e-40723be158ed%40treenet.co.nz%3E"
       TITLE="[squid-users] pinger crash - Bad opcode: 112">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Jun  1 11:53:08 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010994.html">[squid-users] DNS lookup fails initially for FQDN in squid
</A></li>
        <LI>Next message (by thread): <A HREF="010840.html">[squid-users] pinger crash - Bad opcode: 112
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10818">[ date ]</a>
              <a href="thread.html#10818">[ thread ]</a>
              <a href="subject.html#10818">[ subject ]</a>
              <a href="author.html#10818">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 31/05/2016 9:56 p.m., Tomas Mozes wrote:
&gt;<i> On Thu, May 26, 2016 at 8:04 AM, Amos Jeffries wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> On 24/05/2016 7:52 p.m., Tomas Mozes wrote:
</I>&gt;&gt;&gt;<i> Hello,
</I>&gt;&gt;&gt;<i> on two different squid servers I've observed a crash of pinger. First it
</I>&gt;&gt;&gt;<i> appeared on version 3.5.15 and later on version 3.5.17.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Cache.log contains these lines:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> (pinger): Address.cc:671: void Ip::Address::getAddrInfo(addrinfo*&amp;, int)
</I>&gt;&gt;&gt;<i> const: Assertion `false' failed.
</I>&gt;&gt;&gt;<i> 2016/05/14 21:55:25 kid1| Bad opcode: 112 from
</I>&gt;&gt;&gt;<i> [6661:6c73:6522:2061:7420:6c69:6e65:2036]
</I>&gt;&gt;&gt;<i> 2016/05/14 21:59:13 kid1| recv: (111) Connection refused
</I>&gt;&gt;&gt;<i> 2016/05/14 21:59:13 kid1| Closing Pinger socket on FD 17
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On both servers, that IPv6 address was the same -
</I>&gt;&gt;&gt;<i> 6661:6c73:6522:2061:7420:6c69:6e65:2036
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> That is the hexadecimal representation of the error:
</I>&gt;&gt;<i>  false&quot; at line 6
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Which means that your kernel is producing garbage when asked to resolve
</I>&gt;&gt;<i> an IPv6 address or respond to an ICMPv6 packet.
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> Cannot we prevent Squid from crashing in these cases?
</I>&gt;<i> 
</I>
Squid is not crashing. The pinger is. Squid continues with degraded
service latency.

What kind of continued operations would you expect a program to do when
it discovers at least some portion of its RAM has been filled with
garbage by the system kernel?


Now cross your fingers and pray that no other programs on your whole
system (network, if you did the same &quot;disable&quot; on other machines) are
behaving badly in secret when given the garbage by the kernel like
Squid's pinger was.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010994.html">[squid-users] DNS lookup fails initially for FQDN in squid
</A></li>
	<LI>Next message (by thread): <A HREF="010840.html">[squid-users] pinger crash - Bad opcode: 112
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10818">[ date ]</a>
              <a href="thread.html#10818">[ thread ]</a>
              <a href="subject.html#10818">[ subject ]</a>
              <a href="author.html#10818">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
