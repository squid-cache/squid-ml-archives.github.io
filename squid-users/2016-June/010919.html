<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Vary object loop returns
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Vary%20object%20loop%20returns&In-Reply-To=%3Cf3d5efb4-7133-3de1-dc13-08252ad314f7%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010918.html">
   <LINK REL="Next"  HREF="010920.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Vary object loop returns</H1>
    <B>Yuri Voinov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Vary%20object%20loop%20returns&In-Reply-To=%3Cf3d5efb4-7133-3de1-dc13-08252ad314f7%40gmail.com%3E"
       TITLE="[squid-users] Vary object loop returns">yvoinov at gmail.com
       </A><BR>
    <I>Mon Jun  6 18:20:55 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010918.html">[squid-users] Vary object loop returns
</A></li>
        <LI>Next message (by thread): <A HREF="010920.html">[squid-users] Vary object loop returns
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10919">[ date ]</a>
              <a href="thread.html#10919">[ thread ]</a>
              <a href="subject.html#10919">[ subject ]</a>
              <a href="author.html#10919">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256
 
By the way, we have another problem. Caching is greatly reduced by the
presence of User-Agent header Vary. Although I know that Amos says - he
says, we should break the Internet and cached separately all types of
user agents. However, this leads to duplication of content. Significant
duplication. Accordingly, we are able to throw out Vary all but the
Accept-Encoding - at our own risk, through the manipulation of headlines.

07.06.2016 0:09, Heiler Bemerguy &#1087;&#1080;&#1096;&#1077;&#1090;:
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Web servers uses the &quot;vary&quot; tag, not &quot;accept-encoding&quot; tag exactly.
</I>Like these sniffed examples:
&gt;<i>
</I>&gt;<i> Vary: *
</I>&gt;<i> Vary: Accept
</I>&gt;<i> Vary: Accept-Encoding
</I>&gt;<i> Vary: Accept-Encoding
</I>&gt;<i> Vary: Accept-Encoding, Accept-Encoding
</I>&gt;<i> Vary: Accept-Encoding,Host
</I>&gt;<i> Vary: Accept-Encoding, User-Agent
</I>&gt;<i> Vary: Accept-Encoding,User-Agent
</I>&gt;<i> Vary: Accept-Encoding,X-Device-Type, Accept-Encoding
</I>&gt;<i> Vary: Accept-Encoding,X-UA-Device
</I>&gt;<i> Vary: If-None-Match, If-Modified-Since
</I>&gt;<i> Vary: Origin
</I>&gt;<i> Vary: Origin, Access-Control-Request-Headers,
</I>Access-Control-Request-Method
&gt;<i> Vary: User-Agent
</I>&gt;<i> Vary: User-Agent,Accept
</I>&gt;<i>
</I>&gt;<i> and all of them have no %20
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Best Regards,
</I>&gt;<i>
</I>&gt;<i> Heiler Bemerguy
</I>&gt;<i> Network Manager - CINBESA
</I>&gt;<i> 55 91 98151-4894/3184-1751
</I>&gt;<i> Em 06/06/2016 15:01, Yuri Voinov escreveu:
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 06.06.2016 23:47, Heiler Bemerguy &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>       &gt; These are the variations for the &quot;accept-encoding&quot; tag I
</I>&gt;<i>       found when sniffing my client's connections. And they're of all
</I>&gt;<i>       kind. Newer and older browsers, mobile phones, windows updates,
</I>&gt;<i>       whatever..
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>       &gt; It got a total of 11.437 requests from clients to squid.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>       &gt; *accept-encoding: gzip, deflate**
</I>&gt;<i>
</I>&gt;<i>       &gt; **Accept-Encoding: gzip, deflate**
</I>&gt;<i>
</I>&gt;<i>       &gt; **Accept-Encoding: gzip,deflate**
</I>&gt;<i>
</I>&gt;<i>       &gt; **Accept-Encoding: gzip, deflate, lzma, sdch**
</I>&gt;<i>
</I>&gt;<i>       &gt; **Accept-Encoding: gzip, deflate, sdch**
</I>&gt;<i>
</I>&gt;<i>       &gt; **Accept-Encoding: gzip,deflate,sdch**
</I>&gt;<i>
</I>&gt;<i>       &gt; **Accept-Encoding: gzip, xeflate, sdch**
</I>&gt;<i>
</I>&gt;<i>       &gt; **Accept-Encoding: identity**
</I>&gt;<i>
</I>&gt;<i>       &gt; **Accept-Encoding: identity;q=1, *;q=0*
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>       &gt; Notice that some have spaces, some not, but I haven't seen
</I>&gt;<i>       any &quot;%20&quot; representing a space. Is the &quot;%20&quot; put there by squid
</I>&gt;<i>       itself?
</I>&gt;<i>
</I>&gt;<i> No. This comes from web-servers.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>       &gt; --
</I>&gt;<i>
</I>&gt;<i>       &gt; Best Regards,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>       &gt; Heiler Bemerguy
</I>&gt;<i>
</I>&gt;<i>       &gt; Network Manager - CINBESA
</I>&gt;<i>
</I>&gt;<i>       &gt; 55 91 98151-4894/3184-1751
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>       &gt; Em 06/06/2016 12:08, Yuri Voinov escreveu:
</I>&gt;<i>
</I>&gt;<i>       &gt; Ok, why not to replace %20 to original space symbol?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>       &gt; 06.06.2016 20:27, joe &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;<i>
</I>&gt;<i>       &gt; &gt;&gt;&gt; not good just to strip %20 lol as i post it
</I>&gt;<i>       remove also  string was belong to
</I>&gt;<i>
</I>&gt;<i>       &gt; &gt;&gt;&gt; the date
</I>&gt;<i>
</I>&gt;<i>       &gt; &gt;&gt;&gt; we need to remove all of those string start with
</I>&gt;<i>       ,%20    as ,%20sdch so
</I>&gt;<i>
</I>&gt;<i>       &gt; &gt;&gt;&gt; its not eassy detection
</I>&gt;<i>
</I>&gt;<i>       &gt; &gt;&gt;&gt;
</I>&gt;<i>
</I>&gt;<i>       &gt; &gt;&gt;&gt; it kill 
</I>&gt;<i>       if-modified-since=&quot;Mon,%2006%20Jun%202016%2014%3A31%3A32%20GMT&quot;,
</I>&gt;<i>
</I>&gt;<i>       &gt; &gt;&gt;&gt;
</I>&gt;<i>
</I>&gt;<i>       &gt; &gt;&gt;&gt; if you notice this string in vary  has %20 so
</I>&gt;<i>       just wide search and
</I>&gt;<i>
</I>&gt;<i>       &gt; clear it
</I>&gt;<i>
</I>&gt;<i>       &gt; &gt;&gt;&gt; remove those :(
</I>&gt;<i>
</I>&gt;<i>       &gt; &gt;&gt;&gt;
</I>&gt;<i>
</I>&gt;<i>       &gt; &gt;&gt;&gt;
</I>&gt;<i>
</I>&gt;<i>       &gt; &gt;&gt;&gt;
</I>&gt;<i>
</I>&gt;<i>       &gt; &gt;&gt;&gt; --
</I>&gt;<i>
</I>&gt;<i>       &gt; &gt;&gt;&gt; View this message in context:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I><A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/Vary-object-loop-returns-tp4677716p4677856.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/Vary-object-loop-returns-tp4677716p4677856.html</A>
&gt;<i>
</I>&gt;<i>       &gt; &gt;&gt;&gt; Sent from the Squid - Users mailing list archive
</I>&gt;<i>       at Nabble.com.
</I>&gt;<i>
</I>&gt;<i>       &gt; &gt;&gt;&gt; _______________________________________________
</I>&gt;<i>
</I>&gt;<i>       &gt; &gt;&gt;&gt; squid-users mailing list
</I>&gt;<i>
</I>&gt;<i>       &gt; &gt;&gt;&gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>
</I>&gt;<i>       &gt; &gt;&gt;&gt;
</I>&gt;<i>       <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i>       &gt;&gt;
</I>&gt;<i>
</I>&gt;<i>       &gt;&gt;
</I>&gt;<i>
</I>&gt;<i>       &gt;&gt;
</I>&gt;<i>
</I>&gt;<i>       &gt;&gt; _______________________________________________
</I>&gt;<i>
</I>&gt;<i>       &gt;&gt; squid-users mailing list
</I>&gt;<i>
</I>&gt;<i>       &gt;&gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>
</I>&gt;<i>       &gt;&gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>       &gt; _______________________________________________
</I>&gt;<i>
</I>&gt;<i>       &gt; squid-users mailing list
</I>&gt;<i>
</I>&gt;<i>       &gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>
</I>&gt;<i>       &gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> squid-users mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2
 
iQEcBAEBCAAGBQJXVb8HAAoJENNXIZxhPexGLFYH+wYzHsa465++FyY/JxlAL10x
ztUCw+ciuEg3TYHWX84tFyL8ooX/CpxzVzf/cf4KbkEDGx6elOxHPnV1PljGXaut
aApM4yxIFA3R9nVAZbGzXkgM2InZ6mGfdI4xHp9aifklqG6Kjnhl6/zk3m2rJXIe
GLIAUnzkKKcDPW/g33vFCgiLAYKbVRnlf8vlgShu/NkgiYgWjhuonDUIQ6mOtlIj
nbDLKUzPVhIG8sfblYmYd1uH0vfonfGeGCbDabo66zaJHC9E4GhcphZan7gon6NF
aTDKw1E2wTN262UtFLSTkPsYjFZCl/TcIBhED/7EQ62LsuqqP+Mtr7NQQHFZdJg=
=KWYR
-----END PGP SIGNATURE-----

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160607/9bcb4189/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160607/9bcb4189/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0x613DEC46.asc
Type: application/pgp-keys
Size: 2437 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160607/9bcb4189/attachment.key">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160607/9bcb4189/attachment.key</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010918.html">[squid-users] Vary object loop returns
</A></li>
	<LI>Next message (by thread): <A HREF="010920.html">[squid-users] Vary object loop returns
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10919">[ date ]</a>
              <a href="thread.html#10919">[ thread ]</a>
              <a href="subject.html#10919">[ subject ]</a>
              <a href="author.html#10919">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
