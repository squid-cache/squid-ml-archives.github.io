<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] URL access based on AD group membership
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20URL%20access%20based%20on%20AD%20group%20membership&In-Reply-To=%3Ceb67a218-c749-aa16-4b00-941bdac1d0a5%40riosoft.com.br%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011055.html">
   <LINK REL="Next"  HREF="011059.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] URL access based on AD group membership</H1>
    <B>Bruno de Paula Larini</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20URL%20access%20based%20on%20AD%20group%20membership&In-Reply-To=%3Ceb67a218-c749-aa16-4b00-941bdac1d0a5%40riosoft.com.br%3E"
       TITLE="[squid-users] URL access based on AD group membership">bruno.larini at riosoft.com.br
       </A><BR>
    <I>Wed Jun 15 17:27:14 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011055.html">[squid-users] URL access based on AD group membership
</A></li>
        <LI>Next message (by thread): <A HREF="011059.html">[squid-users] URL access based on AD group membership
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11057">[ date ]</a>
              <a href="thread.html#11057">[ thread ]</a>
              <a href="subject.html#11057">[ subject ]</a>
              <a href="author.html#11057">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Em 15/06/2016 10:50, <A HREF="https://lists.squid-cache.org/listinfo/squid-users">nilesh.gavali at tcs.com</A> escreveu:
&gt;<i> Hi Team;
</I>&gt;<i> I have setup as below-
</I>&gt;<i>
</I>&gt;<i>   * Squid Kerberos authentication with windows AD 2012r2. - works fine.
</I>&gt;<i>   * Now need to restrict access based on AD Group membership.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Below configuration done but no luck. when try to access with user who 
</I>&gt;<i> is not part of the group mention, still he is able to browse Internet.
</I>
The following works fine for me and in my opinion works better than 
LDAP. The authentication is integrated, so it doesn't keep asking for 
password (when the current user is a domain account). But you have to 
add the Squid server to the domain using 'smb.conf', 'krb5.conf' and 
then 'net ads join'. The service 'winbind' must be running too.
I'm using Squid 3.5.19.


     auth_param ntlm program /usr/bin/ntlm_auth 
--helper-protocol=squid-2.5-ntlmssp --domain=MYDOMAIN 
--enable-external-acl-helpers=&quot;ext_wbinfo_group_acl&quot;
     auth_param ntlm children 10 startup=0 idle=2

     external_acl_type NTGroup children-startup=10 children-idle=2 
children-max=50 %LOGIN /usr/lib64/squid/ext_wbinfo_group_acl

     acl authenticated proxy_auth REQUIRED

     acl ad_group external NTGroup MYDOMAIN\AD_Group
     acl denied_websites dstdom_regex -i &quot;/etc/squid/denied-websites.txt&quot;
     http_access deny ad_group denied_websites


So all the members of MYDOMAIN\AD_Group won't have access to whatever 
the file contains.

Bruno
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160615/810a3d96/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160615/810a3d96/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011055.html">[squid-users] URL access based on AD group membership
</A></li>
	<LI>Next message (by thread): <A HREF="011059.html">[squid-users] URL access based on AD group membership
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11057">[ date ]</a>
              <a href="thread.html#11057">[ thread ]</a>
              <a href="subject.html#11057">[ subject ]</a>
              <a href="author.html#11057">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
