<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Regex optimization
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Regex%20optimization&In-Reply-To=%3C0d7da244-9d4a-74f1-fdcd-847dd289f99a%40squidblacklist.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011073.html">
   <LINK REL="Next"  HREF="011084.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Regex optimization</H1>
    <B>Benjamin E. Nichols</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Regex%20optimization&In-Reply-To=%3C0d7da244-9d4a-74f1-fdcd-847dd289f99a%40squidblacklist.org%3E"
       TITLE="[squid-users] Regex optimization">webmaster at squidblacklist.org
       </A><BR>
    <I>Thu Jun 16 21:11:11 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011073.html">[squid-users] Regex optimization
</A></li>
        <LI>Next message (by thread): <A HREF="011084.html">[squid-users] Regex optimization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11074">[ date ]</a>
              <a href="thread.html#11074">[ thread ]</a>
              <a href="subject.html#11074">[ subject ]</a>
              <a href="author.html#11074">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

On 6/16/2016 3:28 PM, Yuri Voinov wrote:
&gt;<i> -----BEGIN PGP SIGNED MESSAGE-----
</I>&gt;<i> Hash: SHA256
</I>&gt;<i>   
</I>&gt;<i> I propose to nominate for the second place of the contest &quot;The most
</I>&gt;<i> inefficient use of computing resources - 2016.&quot; :-!:-D
</I>&gt;<i>
</I>&gt;<i> Because first place already occuped. :-D 30 millions pornsites in one
</I>&gt;<i> squid's ACL and 7 minutes for squid -k refresh. 8-)
</I>Yeah and Ill bet about 27 Million of them are dead, expired, parked or 
redirected because your list sucks.

If you really intend to use blacklists tailored for Squid proxy Native 
ACL, we are the leading and only provider of such lists.
And we actually query each domain daily with batch updates, dead domains 
are placed into a holding pool to be queried again cyclically and re added
as necessary.

Shallalist is a joke, urlblacklist is garbage, if you are serious and 
need a better blacklist, we would be happy to serve you.

&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 17.06.2016 1:20, Antony Stone &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;&gt;<i> On Thursday 16 June 2016 at 21:11:50, Alfredo Rezinovsky wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Well.. I tried.
</I>&gt;&gt;&gt;<i> I need to ban 8613 URLs. Because a law.
</I>&gt;&gt;<i> Have you considered <A HREF="https://www.urlfilterdb.com/products/ufdbguard.html">https://www.urlfilterdb.com/products/ufdbguard.html</A> ?
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> If I put one per line in a file and set the filename for an url_regex acl
</I>&gt;&gt;&gt;<i> it works. But when the traffic goes up the cpu load goes 100% (even using
</I>&gt;&gt;&gt;<i> workers) and the proxy turns unusable.
</I>&gt;&gt;<i> Er, I'm not surprised.
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I tested and saw my squid can't parse regexes with more than 8192
</I>&gt;&gt;&gt;<i> characters.
</I>&gt;&gt;&gt;<i> I managed to combine the 8000 uris in 34 regexes using a ruby gem,
</I>&gt;<i> and the
</I>&gt;&gt;&gt;<i> cpu load stays almost at the same level it is without any acl (same
</I>&gt;&gt;&gt;<i> traffic).
</I>&gt;&gt;<i> That must be *way* past anything to be described as &quot;maintainable&quot;.
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> the regex is:
</I>&gt;&gt;<i> Er, thanks, that confirms my suspicions above :)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Antony.
</I>&gt;&gt;<i>
</I>&gt;<i> -----BEGIN PGP SIGNATURE-----
</I>&gt;<i> Version: GnuPG v2
</I>&gt;<i>   
</I>&gt;<i> iQEcBAEBCAAGBQJXYwv7AAoJENNXIZxhPexGn9QH/R2ino1lTfOWrd4E8Z+UUsuH
</I>&gt;<i> wjEfi4e96ptkkye57mcOTHXiLgrau+x+vXVS35CNgpwsB3daN1/E6DvAZz/XwABJ
</I>&gt;<i> O6/aqIn/JNKmkwLj/XPB0nD0lsrWXoOdknGpL7r/E9un2N2mfAdBVKUbItAuUM+G
</I>&gt;<i> DQeKfnRjCDS0Pgt4zlNIQjo0xxSxrjrHThKoWlAi00v2LzWkSmJtbZyW1WtzNbNf
</I>&gt;<i> qH8j1LlTbiOg9FmOpp+GVQ8XKEjGnWnhjnydKdVlPr9mXCA6XN5Kn5L6tmckqSc/
</I>&gt;<i> Snn9jKZfJAtTg97gTzOJpw9BuGw7pqSRyARcV0/t4PsySNTD/4NpJz/HVKhlT+E=
</I>&gt;<i> =Mgx4
</I>&gt;<i> -----END PGP SIGNATURE-----
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
-- 
Signed,

Benjamin E. Nichols
<A HREF="http://www.squidblacklist.org">http://www.squidblacklist.org</A>

1-405-397-1360

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160616/6bc095b9/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160616/6bc095b9/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011073.html">[squid-users] Regex optimization
</A></li>
	<LI>Next message (by thread): <A HREF="011084.html">[squid-users] Regex optimization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11074">[ date ]</a>
              <a href="thread.html#11074">[ thread ]</a>
              <a href="subject.html#11074">[ subject ]</a>
              <a href="author.html#11074">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
