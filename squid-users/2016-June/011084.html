<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Regex optimization
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Regex%20optimization&In-Reply-To=%3C610f23a1-5734-187f-82f9-d31a2541abd1%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011074.html">
   <LINK REL="Next"  HREF="011085.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Regex optimization</H1>
    <B>Yuri Voinov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Regex%20optimization&In-Reply-To=%3C610f23a1-5734-187f-82f9-d31a2541abd1%40gmail.com%3E"
       TITLE="[squid-users] Regex optimization">yvoinov at gmail.com
       </A><BR>
    <I>Fri Jun 17 08:00:25 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011074.html">[squid-users] Regex optimization
</A></li>
        <LI>Next message (by thread): <A HREF="011085.html">[squid-users] Regex optimization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11084">[ date ]</a>
              <a href="thread.html#11084">[ thread ]</a>
              <a href="subject.html#11084">[ subject ]</a>
              <a href="author.html#11084">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256
 
Shallalist seems most acceptable free blacklist. With fine grained
categories.

Of course, it require human power to maintain.

If this one does not will to do, just sit back and wait for someone to
do - as is usually done in open source software, of course, it will be a
joke. There is a form to send and revoke URL. They just need to use it.
They themselves are not required to maintain a list of current.

Personally, I have been actively taking part in updating the Shalla
blacklist of the last 5 years and I am happy with it. Especially
considering its price.

So.....

17.06.2016 3:11, Benjamin E. Nichols &#1087;&#1080;&#1096;&#1077;&#1090;:
&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 6/16/2016 3:28 PM, Yuri Voinov wrote:
</I>&gt;<i> I propose to nominate for the second place of the contest &quot;The most
</I>&gt;<i> inefficient use of computing resources - 2016.&quot; :-!:-D
</I>&gt;<i>
</I>&gt;<i> Because first place already occuped. :-D 30 millions pornsites in one
</I>&gt;<i> squid's ACL and 7 minutes for squid -k refresh. 8-)
</I>&gt;<i> &gt; Yeah and Ill bet about 27 Million of them are dead, expired, parked
</I>or redirected because your list sucks.
&gt;<i>
</I>&gt;<i> &gt; If you really intend to use blacklists tailored for Squid proxy
</I>Native ACL, we are the leading and only provider of such lists.
&gt;<i> &gt; And we actually query each domain daily with batch updates, dead
</I>domains are placed into a holding pool to be queried again cyclically
and re added
&gt;<i> &gt; as necessary.
</I>&gt;<i>
</I>&gt;<i> &gt; Shallalist is a joke, urlblacklist is garbage, if you are serious
</I>and need a better blacklist, we would be happy to serve you.
&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 17.06.2016 1:20, Antony Stone &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;<i> &gt;&gt;&gt; On Thursday 16 June 2016 at 21:11:50, Alfredo Rezinovsky wrote:
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; Well.. I tried.
</I>&gt;<i> &gt;&gt;&gt;&gt; I need to ban 8613 URLs. Because a law.
</I>&gt;<i> &gt;&gt;&gt; Have you considered
</I><A HREF="https://www.urlfilterdb.com/products/ufdbguard.html">https://www.urlfilterdb.com/products/ufdbguard.html</A> ?
&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; If I put one per line in a file and set the filename for an
</I>url_regex acl
&gt;<i> &gt;&gt;&gt;&gt; it works. But when the traffic goes up the cpu load goes 100%
</I>(even using
&gt;<i> &gt;&gt;&gt;&gt; workers) and the proxy turns unusable.
</I>&gt;<i> &gt;&gt;&gt; Er, I'm not surprised.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; I tested and saw my squid can't parse regexes with more than 8192
</I>&gt;<i> &gt;&gt;&gt;&gt; characters.
</I>&gt;<i> &gt;&gt;&gt;&gt; I managed to combine the 8000 uris in 34 regexes using a ruby gem,
</I>&gt;<i> and the
</I>&gt;<i> &gt;&gt;&gt;&gt; cpu load stays almost at the same level it is without any acl (same
</I>&gt;<i> &gt;&gt;&gt;&gt; traffic).
</I>&gt;<i> &gt;&gt;&gt; That must be *way* past anything to be described as &quot;maintainable&quot;.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;&gt; the regex is:
</I>&gt;<i> &gt;&gt;&gt; Er, thanks, that confirms my suspicions above :)
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Antony.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> squid-users mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Signed,
</I>&gt;<i>
</I>&gt;<i> Benjamin E. Nichols
</I>&gt;<i> <A HREF="http://www.squidblacklist.org">http://www.squidblacklist.org</A>
</I>&gt;<i>
</I>&gt;<i> 1-405-397-1360
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2
 
iQEcBAEBCAAGBQJXY64ZAAoJENNXIZxhPexGMhkIAK/hrf9wFVKwt83jRxl4T++/
2jgcuqaXb78MazN6wdNr5HZrshRGayxDZsLbF0xb7cdrA0lVYSQgnWX0SEomZZ8E
Y+gDaemoojE8d8Wqy3zLP57BzziLMs2ymVmQRnQ0265wRoCVkCLKAR4Dzod9eXS/
L115pErOcbZc0nZ3QkXfbuE1ol3gfHL1tQN5Gfm4IMxgtp1gdnxfg9BUCzMaicR+
Y7WkZqCdzA0kcLjOgvDVzudTBsKhRx+YHIjVr72seUMEu/EYXZjBWYZRKXCRDT7h
gHIzS+ESw91LCKs8VXZ9ZBEf2RclSvFWzK9qpbR2vgYFztjsFkXAmg5UNOkASX4=
=FKFP
-----END PGP SIGNATURE-----

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160617/473c7df4/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160617/473c7df4/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0x613DEC46.asc
Type: application/pgp-keys
Size: 2437 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160617/473c7df4/attachment.key">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160617/473c7df4/attachment.key</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011074.html">[squid-users] Regex optimization
</A></li>
	<LI>Next message (by thread): <A HREF="011085.html">[squid-users] Regex optimization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11084">[ date ]</a>
              <a href="thread.html#11084">[ thread ]</a>
              <a href="subject.html#11084">[ subject ]</a>
              <a href="author.html#11084">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
