<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] URL access based on AD group membership
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20URL%20access%20based%20on%20AD%20group%20membership&In-Reply-To=%3C48aa76c1-4499-444e-1837-8e1ce7685296%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011107.html">
   <LINK REL="Next"  HREF="011095.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] URL access based on AD group membership</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20URL%20access%20based%20on%20AD%20group%20membership&In-Reply-To=%3C48aa76c1-4499-444e-1837-8e1ce7685296%40treenet.co.nz%3E"
       TITLE="[squid-users] URL access based on AD group membership">squid3 at treenet.co.nz
       </A><BR>
    <I>Mon Jun 20 11:33:16 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011107.html">[squid-users] URL access based on AD group membership
</A></li>
        <LI>Next message (by thread): <A HREF="011095.html">[squid-users] URL access based on AD group membership
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11111">[ date ]</a>
              <a href="thread.html#11111">[ thread ]</a>
              <a href="subject.html#11111">[ subject ]</a>
              <a href="author.html#11111">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 20/06/2016 9:21 p.m., Nilesh Gavali wrote:
&gt;<i> Thanks Eliezer for reply.
</I>&gt;<i> Its is working now for be perfectly with below command with -d option 
</I>&gt;<i> gives helpful debug info to troubleshoot.
</I>&gt;<i> 
</I>&gt;<i> external_acl_type AD_Group %LOGIN /usr/lib64/squid/squid_ldap_group -P -R 
</I>&gt;<i> -b &quot;DC=ABCD,DC=GOV,DC=IN&quot; -D svcproxy -w 123456789 -f 
</I>&gt;<i> &quot;(&amp;(objectclass=person)(userPrincipalName=%v)(memberof=cn=%a,ou=InternetAccess,ou=Groups,dc=ABCD,dc=GOV,dc=IN))&quot; 
</I>&gt;<i> -h abcd.gov.in -s sub -v 3 -d
</I>&gt;<i> 
</I>&gt;<i> Currently I have configure squid with AD kerberos auth. also url access 
</I>&gt;<i> restricted based on  AD group membership.
</I>&gt;<i> 
</I>&gt;<i> Now I observed, is that when I add any user to one of the AD group which 
</I>&gt;<i> allowed in squid.  it is not accepting the changes until I restart the 
</I>&gt;<i> squid service.
</I>
Your external_acl_type has a 1 hour response cache. Meaning it will take
a minimum of 1 hour for any changes to the AD group settings to be
passed on to Squid.


&gt;<i> 
</I>&gt;<i> auth_param negotiate program /usr/lib64/squid/squid_kerb_auth -s 
</I>&gt;<i> HTTP/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy02.abcd.gov.in at ABCD.GOV.IN</A> 
</I>&gt;<i> auth_param negotiate children 10 
</I>&gt;<i> auth_param negotiate keep_alive on 
</I>&gt;<i> auth_param basic credentialsttl 2 hours 
</I>
NP: settings for Basic authentication do not have any affect on
non-Basic types of authentication.

There is no TTL for Kerberos user credentials. They are valid for as
long as the TCP connection to the proxy is open. Any change in the
Kerberos security tokens sent by the client after authentication is
completed will terminate/close the TCP connection.


&gt;<i> 
</I>&gt;<i> external_acl_type AD_Group %LOGIN /usr/lib64/squid/squid_ldap_group -P -R 
</I>&gt;<i> -b &quot;DC=ABCD,DC=GOV,DC=IN&quot; -D svcproxy -w 123456789 -f 
</I>&gt;<i> &quot;(&amp;(objectclass=person)(userPrincipalName=%u)(memberof=cn=%g,ou=InternetAccess,ou=Groups,dc=ABCD,dc=GOV,dc=IN))&quot; 
</I>&gt;<i> -h abcd.gov.in -s sub -v 3 -d 
</I>&gt;<i> 
</I>
Since your helper names were outdated 6 years ago I assume you are using
Squid-3.1 or older:
&lt;<A HREF="http://www.squid-cache.org/Versions/v3/3.1/cfgman/external_acl_type.html">http://www.squid-cache.org/Versions/v3/3.1/cfgman/external_acl_type.html</A>&gt;

Note the default values for ttl= , negative_ttl=, and grace=

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011107.html">[squid-users] URL access based on AD group membership
</A></li>
	<LI>Next message (by thread): <A HREF="011095.html">[squid-users] URL access based on AD group membership
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11111">[ date ]</a>
              <a href="thread.html#11111">[ thread ]</a>
              <a href="subject.html#11111">[ subject ]</a>
              <a href="author.html#11111">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
