<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] URL access based on AD group membership
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20URL%20access%20based%20on%20AD%20group%20membership&In-Reply-To=%3COF27286CFD.D33D8806-ON80257FD8.00628011-80257FD8.0062AD0A%40tcs.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011095.html">
   <LINK REL="Next"  HREF="011123.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] URL access based on AD group membership</H1>
    <B>Nilesh Gavali</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20URL%20access%20based%20on%20AD%20group%20membership&In-Reply-To=%3COF27286CFD.D33D8806-ON80257FD8.00628011-80257FD8.0062AD0A%40tcs.com%3E"
       TITLE="[squid-users] URL access based on AD group membership">nilesh.gavali at tcs.com
       </A><BR>
    <I>Mon Jun 20 17:57:53 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011095.html">[squid-users] URL access based on AD group membership
</A></li>
        <LI>Next message (by thread): <A HREF="011123.html">[squid-users] URL access based on AD group membership
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11116">[ date ]</a>
              <a href="thread.html#11116">[ thread ]</a>
              <a href="subject.html#11116">[ subject ]</a>
              <a href="author.html#11116">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Amos;
is there a simpler way to tackle this as I am not linux guy and not sure 
howto write any helper program which need to call.


Regards;
Nilesh Gavali



&gt;<i> Thanks Eliezer for reply.
</I>&gt;<i> Its is working now for be perfectly with below command with -d option 
</I>&gt;<i> gives helpful debug info to troubleshoot.
</I>&gt;<i> 
</I>&gt;<i> external_acl_type AD_Group %LOGIN /usr/lib64/squid/squid_ldap_group -P 
</I>-R 
&gt;<i> -b &quot;DC=ABCD,DC=GOV,DC=IN&quot; -D svcproxy -w 123456789 -f 
</I>&gt;<i> 
</I>&quot;(&amp;(objectclass=person)(userPrincipalName=%v)(memberof=cn=%a,ou=InternetAccess,ou=Groups,dc=ABCD,dc=GOV,dc=IN))&quot; 

&gt;<i> -h abcd.gov.in -s sub -v 3 -d
</I>&gt;<i> 
</I>&gt;<i> Currently I have configure squid with AD kerberos auth. also url access 
</I>&gt;<i> restricted based on  AD group membership.
</I>&gt;<i> 
</I>&gt;<i> Now I observed, is that when I add any user to one of the AD group which 
</I>
&gt;<i> allowed in squid.  it is not accepting the changes until I restart the 
</I>&gt;<i> squid service.
</I>
Your external_acl_type has a 1 hour response cache. Meaning it will take
a minimum of 1 hour for any changes to the AD group settings to be
passed on to Squid.


&gt;<i> 
</I>&gt;<i> auth_param negotiate program /usr/lib64/squid/squid_kerb_auth -s 
</I>&gt;<i> HTTP/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy02.abcd.gov.in at ABCD.GOV.IN</A> 
</I>&gt;<i> auth_param negotiate children 10 
</I>&gt;<i> auth_param negotiate keep_alive on 
</I>&gt;<i> auth_param basic credentialsttl 2 hours 
</I>
NP: settings for Basic authentication do not have any affect on
non-Basic types of authentication.

There is no TTL for Kerberos user credentials. They are valid for as
long as the TCP connection to the proxy is open. Any change in the
Kerberos security tokens sent by the client after authentication is
completed will terminate/close the TCP connection.


&gt;<i> 
</I>&gt;<i> external_acl_type AD_Group %LOGIN /usr/lib64/squid/squid_ldap_group -P 
</I>-R 
&gt;<i> -b &quot;DC=ABCD,DC=GOV,DC=IN&quot; -D svcproxy -w 123456789 -f 
</I>&gt;<i> 
</I>&quot;(&amp;(objectclass=person)(userPrincipalName=%u)(memberof=cn=%g,ou=InternetAccess,ou=Groups,dc=ABCD,dc=GOV,dc=IN))&quot; 

&gt;<i> -h abcd.gov.in -s sub -v 3 -d 
</I>&gt;<i> 
</I>
Since your helper names were outdated 6 years ago I assume you are using
Squid-3.1 or older:
&lt;<A HREF="http://www.squid-cache.org/Versions/v3/3.1/cfgman/external_acl_type.html">http://www.squid-cache.org/Versions/v3/3.1/cfgman/external_acl_type.html</A>&gt;

Note the default values for ttl= , negative_ttl=, and grace=

Amos

=====-----=====-----=====
Notice: The information contained in this e-mail
message and/or attachments to it may contain 
confidential or privileged information. If you are 
not the intended recipient, any dissemination, use, 
review, distribution, printing or copying of the 
information contained in this e-mail message 
and/or attachments to it are strictly prohibited. If 
you have received this communication in error, 
please notify us by reply e-mail or telephone and 
immediately and permanently delete the message 
and any attachments. Thank you


-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160620/46a9d3b3/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160620/46a9d3b3/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011095.html">[squid-users] URL access based on AD group membership
</A></li>
	<LI>Next message (by thread): <A HREF="011123.html">[squid-users] URL access based on AD group membership
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11116">[ date ]</a>
              <a href="thread.html#11116">[ thread ]</a>
              <a href="subject.html#11116">[ subject ]</a>
              <a href="author.html#11116">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
