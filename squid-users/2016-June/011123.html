<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] URL access based on AD group membership
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20URL%20access%20based%20on%20AD%20group%20membership&In-Reply-To=%3C059701d1cb88%24b58c0be0%2420a423a0%24%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011116.html">
   <LINK REL="Next"  HREF="011132.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] URL access based on AD group membership</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20URL%20access%20based%20on%20AD%20group%20membership&In-Reply-To=%3C059701d1cb88%24b58c0be0%2420a423a0%24%40ngtech.co.il%3E"
       TITLE="[squid-users] URL access based on AD group membership">eliezer at ngtech.co.il
       </A><BR>
    <I>Tue Jun 21 06:46:59 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011116.html">[squid-users] URL access based on AD group membership
</A></li>
        <LI>Next message (by thread): <A HREF="011132.html">[squid-users] URL access based on AD group membership
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11123">[ date ]</a>
              <a href="thread.html#11123">[ thread ]</a>
              <a href="subject.html#11123">[ subject ]</a>
              <a href="author.html#11123">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey,

 

The first place to find documents is at:

<A HREF="http://www.squid-cache.org/Versions/v3/3.5/cfgman/external_acl_type.html">http://www.squid-cache.org/Versions/v3/3.5/cfgman/external_acl_type.html</A>

 

But you are not the first to encounter squid and do not understand couple
basics.

Like any complex piece of software you can just ask publically or privately.

 

Eliezer

 

----

 &lt;<A HREF="http://ngtech.co.il/lmgtfy/">http://ngtech.co.il/lmgtfy/</A>&gt; Eliezer Croitoru
Linux System Administrator
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>



 

From: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On
Behalf Of Nilesh Gavali
Sent: Monday, June 20, 2016 8:58 PM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: [squid-users] URL access based on AD group membership

 

Hello Amos; 
is there a simpler way to tackle this as I am not linux guy and not sure
howto write any helper program which need to call. 


Regards; 
Nilesh Gavali 



&gt;<i> Thanks Eliezer for reply.
</I>&gt;<i> Its is working now for be perfectly with below command with -d option 
</I>&gt;<i> gives helpful debug info to troubleshoot.
</I>&gt;<i> 
</I>&gt;<i> external_acl_type AD_Group %LOGIN /usr/lib64/squid/squid_ldap_group -P -R 
</I>&gt;<i> -b &quot;DC=ABCD,DC=GOV,DC=IN&quot; -D svcproxy -w 123456789 -f 
</I>&gt;<i>
</I>&quot;(&amp;(objectclass=person)(userPrincipalName=%v)(memberof=cn=%a,ou=InternetAcce
ss,ou=Groups,dc=ABCD,dc=GOV,dc=IN))&quot; 
&gt;<i> -h abcd.gov.in -s sub -v 3 -d
</I>&gt;<i> 
</I>&gt;<i> Currently I have configure squid with AD kerberos auth. also url access 
</I>&gt;<i> restricted based on  AD group membership.
</I>&gt;<i> 
</I>&gt;<i> Now I observed, is that when I add any user to one of the AD group which 
</I>&gt;<i> allowed in squid.  it is not accepting the changes until I restart the 
</I>&gt;<i> squid service.
</I>
Your external_acl_type has a 1 hour response cache. Meaning it will take
a minimum of 1 hour for any changes to the AD group settings to be
passed on to Squid.


&gt;<i> 
</I>&gt;<i> auth_param negotiate program /usr/lib64/squid/squid_kerb_auth -s 
</I>&gt;<i> HTTP/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy02.abcd.gov.in at ABCD.GOV.IN</A>
</I>&lt;mailto:HTTP/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy02.abcd.gov.in at ABCD.GOV.IN</A>&gt;  
&gt;<i> auth_param negotiate children 10 
</I>&gt;<i> auth_param negotiate keep_alive on 
</I>&gt;<i> auth_param basic credentialsttl 2 hours 
</I>
NP: settings for Basic authentication do not have any affect on
non-Basic types of authentication.

There is no TTL for Kerberos user credentials. They are valid for as
long as the TCP connection to the proxy is open. Any change in the
Kerberos security tokens sent by the client after authentication is
completed will terminate/close the TCP connection.


&gt;<i> 
</I>&gt;<i> external_acl_type AD_Group %LOGIN /usr/lib64/squid/squid_ldap_group -P -R 
</I>&gt;<i> -b &quot;DC=ABCD,DC=GOV,DC=IN&quot; -D svcproxy -w 123456789 -f 
</I>&gt;<i>
</I>&quot;(&amp;(objectclass=person)(userPrincipalName=%u)(memberof=cn=%g,ou=InternetAcce
ss,ou=Groups,dc=ABCD,dc=GOV,dc=IN))&quot; 
&gt;<i> -h abcd.gov.in -s sub -v 3 -d 
</I>&gt;<i> 
</I>
Since your helper names were outdated 6 years ago I assume you are using
Squid-3.1 or older:
&lt; &lt;<A HREF="http://www.squid-cache.org/Versions/v3/3.1/cfgman/external_acl_type.html">http://www.squid-cache.org/Versions/v3/3.1/cfgman/external_acl_type.html</A>&gt;
<A HREF="http://www.squid-cache.org/Versions/v3/3.1/cfgman/external_acl_type.html">http://www.squid-cache.org/Versions/v3/3.1/cfgman/external_acl_type.html</A>&gt;

Note the default values for ttl= , negative_ttl=, and grace=

Amos

=====-----=====-----=====
Notice: The information contained in this e-mail
message and/or attachments to it may contain 
confidential or privileged information. If you are 
not the intended recipient, any dissemination, use, 
review, distribution, printing or copying of the 
information contained in this e-mail message 
and/or attachments to it are strictly prohibited. If 
you have received this communication in error, 
please notify us by reply e-mail or telephone and 
immediately and permanently delete the message 
and any attachments. Thank you

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160621/639d0f99/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160621/639d0f99/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 11295 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160621/639d0f99/attachment.png">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160621/639d0f99/attachment.png</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011116.html">[squid-users] URL access based on AD group membership
</A></li>
	<LI>Next message (by thread): <A HREF="011132.html">[squid-users] URL access based on AD group membership
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11123">[ date ]</a>
              <a href="thread.html#11123">[ thread ]</a>
              <a href="subject.html#11123">[ subject ]</a>
              <a href="author.html#11123">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
