<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid3 error: CHILD: hello write test failed	logrotate
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid3%20error%3A%20CHILD%3A%20hello%20write%20test%20failed%0A%09logrotate&In-Reply-To=%3C201606221553.31204.Antony.Stone%40squid.open.source.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011152.html">
   <LINK REL="Next"  HREF="011161.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid3 error: CHILD: hello write test failed	logrotate</H1>
    <B>Antony Stone</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid3%20error%3A%20CHILD%3A%20hello%20write%20test%20failed%0A%09logrotate&In-Reply-To=%3C201606221553.31204.Antony.Stone%40squid.open.source.it%3E"
       TITLE="[squid-users] Squid3 error: CHILD: hello write test failed	logrotate">Antony.Stone at squid.open.source.it
       </A><BR>
    <I>Wed Jun 22 13:53:30 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011152.html">[squid-users] Squid3 error: CHILD: hello write test failed	logrotate
</A></li>
        <LI>Next message (by thread): <A HREF="011161.html">[squid-users] Squid3 error: CHILD: hello write test failed logrotate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11153">[ date ]</a>
              <a href="thread.html#11153">[ thread ]</a>
              <a href="subject.html#11153">[ subject ]</a>
              <a href="author.html#11153">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wednesday 22 June 2016 at 15:44:42, Roberto Carna wrote:

&gt;<i> Dear Antony, thanks for your help..below is the
</I>&gt;<i> /etc/logrotate.d/squid3 file....but before I have to say I've seen in
</I>&gt;<i> the web that this problem is solved by enabling IPv6, and was reported
</I>&gt;<i> by a ticket (<A HREF="https://forum.opnsense.org/index.php?topic=879.0">https://forum.opnsense.org/index.php?topic=879.0</A>) ..can
</I>&gt;<i> this be true???
</I>
1. Have you tried to disable IPv6 on this machine?  (see my other reply to 
your other reply)

2. You said in your first posting that &quot;I have to create the access.log by 
hand, and set up the owners. After that I rebooted the server and squid3 
daemon runs OK.&quot;  Do you really need to reboot the server, or is restarting 
Squid sufficient?

&gt;<i> /var/log/squid3/*.log {
</I>&gt;<i>         daily
</I>&gt;<i>         compress
</I>&gt;<i>         delaycompress
</I>&gt;<i>         rotate 2
</I>&gt;<i>         missingok
</I>&gt;<i>         nocreate
</I>&gt;<i>         sharedscripts
</I>&gt;<i>         postrotate
</I>&gt;<i>                 test ! -e /var/run/squid3.pid || test ! -x
</I>&gt;<i> /usr/sbin/squid3 || /usr/sbin/squid3 -k rotate
</I>&gt;<i>         endscript
</I>&gt;<i> }
</I>
Considering that you've found you have to create the file manually and set the 
correct permissions / ownerships, I would change the &quot;nocreate&quot; line in the 
above script so that it does create the file, with the correct ownership etc.


Regards,


Antony.

-- 
Never write it in Perl if you can do it in Awk.
Never do it in Awk if sed can handle it.
Never use sed when tr can do the job.
Never invoke tr when cat is sufficient.
Avoid using cat whenever possible.

                                                   Please reply to the list;
                                                         please *don't* CC me.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011152.html">[squid-users] Squid3 error: CHILD: hello write test failed	logrotate
</A></li>
	<LI>Next message (by thread): <A HREF="011161.html">[squid-users] Squid3 error: CHILD: hello write test failed logrotate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11153">[ date ]</a>
              <a href="thread.html#11153">[ thread ]</a>
              <a href="subject.html#11153">[ subject ]</a>
              <a href="author.html#11153">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
