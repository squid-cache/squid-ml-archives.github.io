<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid3 error: CHILD: hello write test failed logrotate
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid3%20error%3A%20CHILD%3A%20hello%20write%20test%20failed%0A%20logrotate&In-Reply-To=%3C170232bb-117b-c395-d0d0-e8dcf73e7b52%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011153.html">
   <LINK REL="Next"  HREF="011172.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid3 error: CHILD: hello write test failed logrotate</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid3%20error%3A%20CHILD%3A%20hello%20write%20test%20failed%0A%20logrotate&In-Reply-To=%3C170232bb-117b-c395-d0d0-e8dcf73e7b52%40treenet.co.nz%3E"
       TITLE="[squid-users] Squid3 error: CHILD: hello write test failed logrotate">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Jun 22 14:42:23 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011153.html">[squid-users] Squid3 error: CHILD: hello write test failed	logrotate
</A></li>
        <LI>Next message (by thread): <A HREF="011172.html">[squid-users] Squid3 error: CHILD: hello write test failed	logrotate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11161">[ date ]</a>
              <a href="thread.html#11161">[ thread ]</a>
              <a href="subject.html#11161">[ subject ]</a>
              <a href="author.html#11161">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 23/06/2016 1:44 a.m., Roberto Carna wrote:
&gt;<i> Dear Antony, thanks for your help..below is the
</I>&gt;<i> /etc/logrotate.d/squid3 file....but before I have to say I've seen in
</I>&gt;<i> the web that this problem is solved by enabling IPv6, and was reported
</I>&gt;<i> by a ticket (<A HREF="https://forum.opnsense.org/index.php?topic=879.0">https://forum.opnsense.org/index.php?topic=879.0</A>) ..can
</I>&gt;<i> this be true???
</I>
You misread that ticket. It is not about logging. It is about other things.

If you are logging with the TCP or UDP log modules then IPv6 might
matter. For local files its not related.

&gt;<i> 
</I>&gt;<i> /var/log/squid3/*.log {
</I>&gt;<i>         daily
</I>&gt;<i>         compress
</I>&gt;<i>         delaycompress
</I>&gt;<i>         rotate 2
</I>&gt;<i>         missingok
</I>&gt;<i>         nocreate
</I>&gt;<i>         sharedscripts
</I>&gt;<i>         postrotate
</I>&gt;<i>                 test ! -e /var/run/squid3.pid || test ! -x
</I>&gt;<i> /usr/sbin/squid3 || /usr/sbin/squid3 -k rotate
</I>&gt;<i>         endscript
</I>&gt;<i> }
</I>&gt;<i> 
</I>
Okay, thats the script that used to be bundled with Squid in Debian.

However, you need to know that use of logrotate requires Squid to have
&quot;logfile_rotate 0&quot; configured. Debian packages patch that in as a
default config setting.

If you don't have that some weird things happen.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011153.html">[squid-users] Squid3 error: CHILD: hello write test failed	logrotate
</A></li>
	<LI>Next message (by thread): <A HREF="011172.html">[squid-users] Squid3 error: CHILD: hello write test failed	logrotate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11161">[ date ]</a>
              <a href="thread.html#11161">[ thread ]</a>
              <a href="subject.html#11161">[ subject ]</a>
              <a href="author.html#11161">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
