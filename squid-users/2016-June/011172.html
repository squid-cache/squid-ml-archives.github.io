<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid3 error: CHILD: hello write test failed	logrotate
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid3%20error%3A%20CHILD%3A%20hello%20write%20test%20failed%0A%09logrotate&In-Reply-To=%3CCAG2Qp6t2j5VRreWg2Vz7D3bgLWOvFtwfsVUGkPpqVEVGaZLsJA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011161.html">
   <LINK REL="Next"  HREF="011176.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid3 error: CHILD: hello write test failed	logrotate</H1>
    <B>Roberto Carna</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid3%20error%3A%20CHILD%3A%20hello%20write%20test%20failed%0A%09logrotate&In-Reply-To=%3CCAG2Qp6t2j5VRreWg2Vz7D3bgLWOvFtwfsVUGkPpqVEVGaZLsJA%40mail.gmail.com%3E"
       TITLE="[squid-users] Squid3 error: CHILD: hello write test failed	logrotate">robertocarna36 at gmail.com
       </A><BR>
    <I>Wed Jun 22 16:32:21 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011161.html">[squid-users] Squid3 error: CHILD: hello write test failed logrotate
</A></li>
        <LI>Next message (by thread): <A HREF="011176.html">[squid-users] Squid3 error: CHILD: hello write test failed logrotate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11172">[ date ]</a>
              <a href="thread.html#11172">[ thread ]</a>
              <a href="subject.html#11172">[ subject ]</a>
              <a href="author.html#11172">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Amos and Antony, thanks a lot for your help.

At first, I'll enable IPv6 in my Debian box.

And for the log problem, I couldn't understand what yoy said
Amos...please can you detail what I have to do in order to avoid log
rotation problems???

And at last, why do you think the log problem arrives when several
clients access to my reverse proxy??? Because when I test it only from
2 or 3 PC's, everything was OK.

Thanks a lot, regards!!!

2016-06-22 11:42 GMT-03:00 Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;:
&gt;<i> On 23/06/2016 1:44 a.m., Roberto Carna wrote:
</I>&gt;&gt;<i> Dear Antony, thanks for your help..below is the
</I>&gt;&gt;<i> /etc/logrotate.d/squid3 file....but before I have to say I've seen in
</I>&gt;&gt;<i> the web that this problem is solved by enabling IPv6, and was reported
</I>&gt;&gt;<i> by a ticket (<A HREF="https://forum.opnsense.org/index.php?topic=879.0">https://forum.opnsense.org/index.php?topic=879.0</A>) ..can
</I>&gt;&gt;<i> this be true???
</I>&gt;<i>
</I>&gt;<i> You misread that ticket. It is not about logging. It is about other things.
</I>&gt;<i>
</I>&gt;<i> If you are logging with the TCP or UDP log modules then IPv6 might
</I>&gt;<i> matter. For local files its not related.
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /var/log/squid3/*.log {
</I>&gt;&gt;<i>         daily
</I>&gt;&gt;<i>         compress
</I>&gt;&gt;<i>         delaycompress
</I>&gt;&gt;<i>         rotate 2
</I>&gt;&gt;<i>         missingok
</I>&gt;&gt;<i>         nocreate
</I>&gt;&gt;<i>         sharedscripts
</I>&gt;&gt;<i>         postrotate
</I>&gt;&gt;<i>                 test ! -e /var/run/squid3.pid || test ! -x
</I>&gt;&gt;<i> /usr/sbin/squid3 || /usr/sbin/squid3 -k rotate
</I>&gt;&gt;<i>         endscript
</I>&gt;&gt;<i> }
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Okay, thats the script that used to be bundled with Squid in Debian.
</I>&gt;<i>
</I>&gt;<i> However, you need to know that use of logrotate requires Squid to have
</I>&gt;<i> &quot;logfile_rotate 0&quot; configured. Debian packages patch that in as a
</I>&gt;<i> default config setting.
</I>&gt;<i>
</I>&gt;<i> If you don't have that some weird things happen.
</I>&gt;<i>
</I>&gt;<i> Amos
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011161.html">[squid-users] Squid3 error: CHILD: hello write test failed logrotate
</A></li>
	<LI>Next message (by thread): <A HREF="011176.html">[squid-users] Squid3 error: CHILD: hello write test failed logrotate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11172">[ date ]</a>
              <a href="thread.html#11172">[ thread ]</a>
              <a href="subject.html#11172">[ subject ]</a>
              <a href="author.html#11172">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
