<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] large downloads got interrupted
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20large%20downloads%20got%20interrupted&In-Reply-To=%3C57723949.1060504%40norma.perm.ru%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011297.html">
   <LINK REL="Next"  HREF="011320.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] large downloads got interrupted</H1>
    <B>Eugene M. Zheganin</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20large%20downloads%20got%20interrupted&In-Reply-To=%3C57723949.1060504%40norma.perm.ru%3E"
       TITLE="[squid-users] large downloads got interrupted">emz at norma.perm.ru
       </A><BR>
    <I>Tue Jun 28 08:46:01 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011297.html">[squid-users] squid-users Digest, Vol 22, Issue 136
</A></li>
        <LI>Next message (by thread): <A HREF="011320.html">[squid-users] large downloads got interrupted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11298">[ date ]</a>
              <a href="thread.html#11298">[ thread ]</a>
              <a href="subject.html#11298">[ subject ]</a>
              <a href="author.html#11298">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

recently I started to get the problem when large downloads via squid are
often interrupted. I tried to investigate it, but, to be honest, got
nowhere. However, I took two tcpdump captures, and it seems to me that
for some reason squid sends FIN to it's client and correctly closes the
connection (wget reports that connection is closed), and in the same
time for some reason it sends like tonns of RSTs towards the server. No
errors in logs are reported (at least on a  ALL,1 loglevel).

Screenshots of wireshark interpreting the tcpdump capture are here:

Squid(2a00:7540:1::4) to target server(2a02:6b8::183):

<A HREF="http://static.enaza.ru/userupload/gyazo/e5b976bf6f3d0cb666f0d504de04.png">http://static.enaza.ru/userupload/gyazo/e5b976bf6f3d0cb666f0d504de04.png</A>
(here you can see that all of a sudden squid starts sending RSTs, that
come long way down the screen, then connection reestablishes (not on the
screenshot taken))

Squid(fd00::301) to client(fd00::73d):

<A HREF="http://static.enaza.ru/userupload/gyazo/ccf4982593dc6047edb5d734160e.png">http://static.enaza.ru/userupload/gyazo/ccf4982593dc6047edb5d734160e.png</A>  (here
you can see the client connection got closed)
I'm open to any idea that will help me to get rid of this issue.

Thanks.
Eugene.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011297.html">[squid-users] squid-users Digest, Vol 22, Issue 136
</A></li>
	<LI>Next message (by thread): <A HREF="011320.html">[squid-users] large downloads got interrupted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11298">[ date ]</a>
              <a href="thread.html#11298">[ thread ]</a>
              <a href="subject.html#11298">[ subject ]</a>
              <a href="author.html#11298">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
