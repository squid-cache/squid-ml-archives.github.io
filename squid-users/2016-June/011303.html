<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Websocket content adaptation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Websocket%20content%20adaptation&In-Reply-To=%3CCAAFc9FhuPYA%3Do%2BhEY689RBBonOYYxkk7qvvtmoZhqSdzpjmRuw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011281.html">
   <LINK REL="Next"  HREF="011308.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Websocket content adaptation</H1>
    <B>Ozgur Batur</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Websocket%20content%20adaptation&In-Reply-To=%3CCAAFc9FhuPYA%3Do%2BhEY689RBBonOYYxkk7qvvtmoZhqSdzpjmRuw%40mail.gmail.com%3E"
       TITLE="[squid-users] Websocket content adaptation">ozgurbtr at gmail.com
       </A><BR>
    <I>Tue Jun 28 12:43:58 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011281.html">[squid-users] Websocket content adaptation
</A></li>
        <LI>Next message (by thread): <A HREF="011308.html">[squid-users] Websocket content adaptation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11303">[ date ]</a>
              <a href="thread.html#11303">[ thread ]</a>
              <a href="subject.html#11303">[ subject ]</a>
              <a href="author.html#11303">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Jun 27, 2016 at 7:57 PM, Alex Rousskov &lt;
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt; wrote:

&gt;<i> On 06/27/2016 10:23 AM, Ozgur Batur wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; ICAP handles plain HTTP very well but it is not possible to
</I>&gt;<i> &gt; filter/change or even log content of websocket communication after
</I>&gt;<i> &gt; websocket upgrade over HTTP as far as I know. Is there any plan or
</I>&gt;<i> &gt; interest in developing some capability for Squid to control websocket
</I>&gt;<i> &gt; communication content?
</I>&gt;<i>
</I>&gt;<i> There is interest but no specific plan or sponsor.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; There is no defined request/response protocol since websocket is
</I>&gt;<i> &gt; basically a socket but regexp matching in incoming and outgoing
</I>&gt;<i> &gt; content(json, xml,raw) with URL and client metadata info may have some
</I>&gt;<i> &gt; application like data leak prevention or achieving in corporate
</I>&gt;<i> environment.
</I>&gt;<i>
</I>&gt;<i> I am not sure regex would be a good idea in general, but passing
</I>&gt;<i> tunneled traffic to eCAP/ICAP services is indeed useful in several
</I>&gt;<i> environments, including WebSocket tunnels. The adaptation service will
</I>&gt;<i> decide whether to use regex or something else to match raw data. Some
</I>&gt;<i> existing services simply log (or relay/replay via TCP) received traffic
</I>&gt;<i> without analyzing it so regex is just one of many possibilities here.
</I>&gt;<i>
</I>&gt;<i> FWIW, several things are needed to move forward, including:
</I>&gt;<i>
</I>&gt;<i> 1. Adequate development time and skills (or sponsorship to pay for
</I>&gt;<i>    them). The development of an essentially new adaptation vectoring
</I>&gt;<i>    point is not a trivial project.
</I>&gt;<i>
</I>&gt;<i>
</I>I have involved in development of several ICAP services around Squid but
have not had the chance to work on Squid code base directly. We may attempt
implement a proof of concept with a few friends to better specify the task
at hand current and learn about adaptation infrastructure of Squid.


&gt;<i> 2. A specific proposal on how to map raw/tunnel data to HTTP messages
</I>&gt;<i>    that eCAP and ICAP interfaces expect. The biggest difficulty here
</I>&gt;<i>    may be mapping server-speaks-first protocols.
</I>&gt;<i>
</I>
I am not sure if it is possible to map websocket data to current adaptation
services. Actually it may or may not be related but I am curious how Squid
handles Comet(Ajax/HTTP Server Push) during ICAP processing. Maybe server
data push can be mapped like Comet responses. About server first protocols,
current ICAP services expecting encapsulated valid HTTP responses for
requests will break of course. Maybe a mechanism like Allow 204 negotiation
can be implemented between adaptation service and proxy. If adaptation
service does not support server first pushes it can be bypassed.

&gt;<i>
</I>&gt;<i> 3. A project lead to organize/manage the project and guide the results
</I>&gt;<i>    through the Squid Project review. This person could be the
</I>&gt;<i>    primary developer and/or the specs writer, but does not have to be.
</I>&gt;<i>
</I>&gt;<i> Alex.
</I>&gt;<i>
</I>
Thanks,

Ozgur
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160628/e6f6f7ce/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160628/e6f6f7ce/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011281.html">[squid-users] Websocket content adaptation
</A></li>
	<LI>Next message (by thread): <A HREF="011308.html">[squid-users] Websocket content adaptation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11303">[ date ]</a>
              <a href="thread.html#11303">[ thread ]</a>
              <a href="subject.html#11303">[ subject ]</a>
              <a href="author.html#11303">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
