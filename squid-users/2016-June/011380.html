<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Force DNS queries over TCP?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Force%20DNS%20queries%20over%20TCP%3F&In-Reply-To=%3CCAMeoTHnA23HjyYSfJTxK02qtuNf9-sRK8Am93t9d%3Dd%2BTqkVsVw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011376.html">
   <LINK REL="Next"  HREF="011381.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Force DNS queries over TCP?</H1>
    <B>Jorgeley Junior</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Force%20DNS%20queries%20over%20TCP%3F&In-Reply-To=%3CCAMeoTHnA23HjyYSfJTxK02qtuNf9-sRK8Am93t9d%3Dd%2BTqkVsVw%40mail.gmail.com%3E"
       TITLE="[squid-users] Force DNS queries over TCP?">jorgeley at gmail.com
       </A><BR>
    <I>Thu Jun 30 19:26:05 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="011376.html">[squid-users] Force DNS queries over TCP?
</A></li>
        <LI>Next message (by thread): <A HREF="011381.html">[squid-users] Force DNS queries over TCP?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11380">[ date ]</a>
              <a href="thread.html#11380">[ thread ]</a>
              <a href="subject.html#11380">[ subject ]</a>
              <a href="author.html#11380">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm not sure, but, if your ISP is intercepting your DNS queries, maybe you
could use the mangle netfilter table to change your DNS queries and so
deceive your ISP, but I'm almost sure that the root servers will not
recognize. It was just an idea.

2016-06-30 16:16 GMT-03:00 Yuri Voinov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">yvoinov at gmail.com</A>&gt;:

&gt;<i>
</I>&gt;<i> -----BEGIN PGP SIGNED MESSAGE-----
</I>&gt;<i> Hash: SHA256
</I>&gt;<i>
</I>&gt;<i> Consider TCP/UDP/53 Cisco interception + Unbound + dnscrypt. And
</I>&gt;<i> 127.0.0.1:53 as your squid's DNS resolver finally.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 01.07.2016 1:07, Chris Horry &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On 06/30/2016 14:55, Alex Crow wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; On 30/06/16 19:40, brendan kearney wrote:
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Nscd or name server caching daemon may be of help.  I believe you can
</I>&gt;<i> &gt;&gt;&gt; run your own bind instqnce and point it at the roots, instead of using
</I>&gt;<i> &gt;&gt;&gt; your isp's broken implementation
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; On Jun 30, 2016 2:21 PM, &quot;Chris Horry&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">zerbey at gmail.com</A>
</I>&gt;<i> &gt;&gt;&gt; &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">zerbey at gmail.com</A>&gt; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">zerbey at gmail.com</A>&gt;&gt; wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; If the ISP is intercepting and redirecting all connections to UDP/53,
</I>&gt;<i> &gt;&gt; which seems to be the case, I'm not sure this would help, unless the
</I>&gt;<i> &gt;&gt; roots support TCP access.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Chris, can you confirm this seems to be your ISP's behaviour? If so,
</I>&gt;<i> &gt;&gt; avoiding sending *any* queries in cleartext via UDP/53 is the only way
</I>&gt;<i> &gt;&gt; to do it.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; That is indeed my ISP's behaviour, they force redirect UDP/53 to their
</I>&gt;<i> &gt; broken implementation so the only option I have is to use TCP.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Chris
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; squid-users mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> &gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i> -----BEGIN PGP SIGNATURE-----
</I>&gt;<i> Version: GnuPG v2
</I>&gt;<i>
</I>&gt;<i> iQEcBAEBCAAGBQJXdXAkAAoJENNXIZxhPexGYlAH/A8NZGERE0+0i6N3IWQsvR1o
</I>&gt;<i> LV9GIrmHZ6fBuMTgYWdul7YUDcUV5OT1kZ6GslbHdG/cfT7EqXDmWEUOy36kdTc6
</I>&gt;<i> 50sIDLDGgD4XU3J0AFDyKV+yma1kuO8D3ZcE3nYMbSveX/MmdSZkoatIKwVKJkIP
</I>&gt;<i> W1DFWFhHICC9Xzxia2t+qnRQ3TpXNnTEQbg2j4uMVbgeeYqOWkjg2VG/RcaxIrk6
</I>&gt;<i> AQsXfPzwHC4Dy1GmDSEEEzu2+Q5lfL/IXStLENi9x4izmy+236/5ZOybv3Co6NRG
</I>&gt;<i> 2EQdOoSeLvz2MgEbrNbHYABDkqt4Pjo7JKjONdAbnEBAAIgNKwW5pUSCBQok5+4=
</I>&gt;<i> =paVE
</I>&gt;<i> -----END PGP SIGNATURE-----
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>

--
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160630/a9d3608d/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160630/a9d3608d/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="011376.html">[squid-users] Force DNS queries over TCP?
</A></li>
	<LI>Next message (by thread): <A HREF="011381.html">[squid-users] Force DNS queries over TCP?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11380">[ date ]</a>
              <a href="thread.html#11380">[ thread ]</a>
              <a href="subject.html#11380">[ subject ]</a>
              <a href="author.html#11380">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
