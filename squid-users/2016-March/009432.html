<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid proxy return gzip responses when I don't include Accept-Encoding
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20proxy%20return%20gzip%20responses%20when%20I%20don%27t%0A%20include%20Accept-Encoding&In-Reply-To=%3C56D4EC7E.50208%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009431.html">
   <LINK REL="Next"  HREF="009440.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid proxy return gzip responses when I don't include Accept-Encoding</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20proxy%20return%20gzip%20responses%20when%20I%20don%27t%0A%20include%20Accept-Encoding&In-Reply-To=%3C56D4EC7E.50208%40treenet.co.nz%3E"
       TITLE="[squid-users] Squid proxy return gzip responses when I don't include Accept-Encoding">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Mar  1 01:12:30 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009431.html">[squid-users] rev 3.5.15 SWAPFAIL
</A></li>
        <LI>Next message (by thread): <A HREF="009440.html">[squid-users] Squid proxy return gzip responses when I don't include Accept-Encoding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9432">[ date ]</a>
              <a href="thread.html#9432">[ thread ]</a>
              <a href="subject.html#9432">[ subject ]</a>
              <a href="author.html#9432">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 1/03/2016 4:25 a.m., Bermejo Gil, Alberto (EXT - ES) wrote:
&gt;<i> There are something that can I do in the server side in order to prevent this behavior?
</I>&gt;<i> 
</I>&gt;<i> I mean, I want to cache different responses, one with gzip and another without gzip.
</I>&gt;<i> 
</I>
You can check what the server is responding with and ensure that it uses
Vary headers on all responses that have multiple payload variants like this.

The specs of what Vary coming from the server should be doing are at
&lt;<A HREF="https://tools.ietf.org/html/rfc7231#section-7.1.4">https://tools.ietf.org/html/rfc7231#section-7.1.4</A>&gt;. So long as the
server is providing that header correctly, Squid will be doing its part
with the caching like you want.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009431.html">[squid-users] rev 3.5.15 SWAPFAIL
</A></li>
	<LI>Next message (by thread): <A HREF="009440.html">[squid-users] Squid proxy return gzip responses when I don't include Accept-Encoding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9432">[ date ]</a>
              <a href="thread.html#9432">[ thread ]</a>
              <a href="subject.html#9432">[ subject ]</a>
              <a href="author.html#9432">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
