<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Ignore &quot;pragma:no-cache /cache-control:no-cache&quot; header in HTTP request&lt; config help&gt;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Ignore%20%22pragma%3Ano-cache%20/cache-control%3Ano-cache%22%0A%20header%20in%20HTTP%20request%3C%20config%20help%3E&In-Reply-To=%3C56D4EF9F.3010000%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009439.html">
   <LINK REL="Next"  HREF="009435.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Ignore &quot;pragma:no-cache /cache-control:no-cache&quot; header in HTTP request&lt; config help&gt;</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Ignore%20%22pragma%3Ano-cache%20/cache-control%3Ano-cache%22%0A%20header%20in%20HTTP%20request%3C%20config%20help%3E&In-Reply-To=%3C56D4EF9F.3010000%40treenet.co.nz%3E"
       TITLE="[squid-users] Ignore &quot;pragma:no-cache /cache-control:no-cache&quot; header in HTTP request&lt; config help&gt;">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Mar  1 01:25:51 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009439.html">[squid-users] IIS error with one website
</A></li>
        <LI>Next message (by thread): <A HREF="009435.html">[squid-users] HTTPS time out
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9434">[ date ]</a>
              <a href="thread.html#9434">[ thread ]</a>
              <a href="subject.html#9434">[ subject ]</a>
              <a href="author.html#9434">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 29/02/2016 4:57 p.m., Anonymous cross wrote:
&gt;<i> I tried using &quot;ignore-cc&quot; option but still squid is honoring cache-control
</I>&gt;<i> header. It tries to re validate the cache on every HTTP request. The
</I>&gt;<i> configurations are below.
</I>&gt;<i> Please correct me if anything is wrong.
</I>&gt;<i> 
</I>&gt;<i> *Squid.conf*
</I>&gt;<i> http_port 3128
</I>&gt;<i> http_port 3129 tproxy
</I>&gt;<i> http_port 80 accel defaultsite=abcexample.com ignore-cc
</I>&gt;<i> cache_peer abcexample.com parent 80 0 no-query originserver name=myAccel
</I>&gt;<i> 
</I>&gt;<i> acl our_sites dstdomain abcexample.com
</I>&gt;<i> http_access allow our_sites
</I>&gt;<i> cache_peer_access myAccel allow our_sites
</I>&gt;<i> cache_peer_access myAccel deny all
</I>&gt;<i> 
</I>&gt;<i> *Option used*
</I>&gt;<i> curl -H &quot;cache-control:no-cache&quot; --interface &quot;20.10.10.2&quot;
</I>&gt;<i> <A HREF="http://abcexample.com">http://abcexample.com</A> -x localhost:3128
</I>&gt;<i> 
</I>
You are not testing the reverse-proxy capabilities. You are testing the
forward-proxy access. You *want* the forward proxy access (aka admin
access) controls to be able to purge and update the cache entries like that.

Remove the -X parameter from your curl command, and run the test from a
separate machine like a real client would be.

If you dont see any change, then you may need to add a bypass (divert
chain rule setting the mark) to the TPROXY rules to prevent it capturing
the port 80 traffic destined directly to the proxies port 80. It should
only be capturing port 80 traffic destined to other servers.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009439.html">[squid-users] IIS error with one website
</A></li>
	<LI>Next message (by thread): <A HREF="009435.html">[squid-users] HTTPS time out
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9434">[ date ]</a>
              <a href="thread.html#9434">[ thread ]</a>
              <a href="subject.html#9434">[ subject ]</a>
              <a href="author.html#9434">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
