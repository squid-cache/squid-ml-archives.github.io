<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squidcllient making request
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squidcllient%20making%20request&In-Reply-To=%3C56D6B0E6.8060704%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009472.html">
   <LINK REL="Next"  HREF="009502.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squidcllient making request</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squidcllient%20making%20request&In-Reply-To=%3C56D6B0E6.8060704%40treenet.co.nz%3E"
       TITLE="[squid-users] Squidcllient making request">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Mar  2 09:22:46 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009472.html">[squid-users] Squidcllient making request
</A></li>
        <LI>Next message (by thread): <A HREF="009502.html">[squid-users] Squidcllient making request
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9474">[ date ]</a>
              <a href="thread.html#9474">[ thread ]</a>
              <a href="subject.html#9474">[ subject ]</a>
              <a href="author.html#9474">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2/03/2016 6:05 p.m., John Pearson wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I have squid installed on a machine with two NICs.
</I>&gt;<i> eth0 - wan
</I>&gt;<i> eth1 - lan - 10.0.1.1
</I>&gt;<i> 
</I>&gt;<i> Squid server is running on eth1.
</I>&gt;<i> I am trying to use the squidclient to fetch a url so that squid will cache
</I>&gt;<i> it. Like prefetching.
</I>&gt;<i> 
</I>&gt;<i> Example:
</I>&gt;<i> 
</I>&gt;<i> squidclient -v -h 10.0.1.1 -p 3128 -m GET <A HREF="http://www.apple.com">http://www.apple.com</A>
</I>&gt;<i> 
</I>
Problem #1;
 you are missing a '/' on the end of the URL. That type of URL is not
valid in HTTP/1.0. It has only recently become acceptible in HTTP/1.1,
so not all services support it.


&gt;<i> Result
</I>&gt;<i> -----------
</I>&gt;<i> Request:
</I>&gt;<i> GET <A HREF="http://www.apple.com">http://www.apple.com</A> HTTP/1.0
</I>&gt;<i> Host: www.apple.com
</I>&gt;<i> User-Agent: squidclient/3.5.9
</I>&gt;<i> Accept: */*
</I>&gt;<i> Connection: close
</I>&gt;<i> 
</I>&gt;<i> .
</I>&gt;<i> 
</I>&gt;<i> --------------------
</I>&gt;<i> 
</I>&gt;<i> The cursor just blinks below the dot (after &quot;Connection:close&quot;. Hard to
</I>&gt;<i> see) and nothing happens. I have to manually exit.
</I>&gt;<i> 
</I>&gt;<i> When I exit, squid log shows A LOT of these lines:
</I>&gt;<i> 
</I>&gt;<i> 10.0.1.1 TCP_MISS_ABORTED/000 0 GET <A HREF="http://www.apple.com">http://www.apple.com</A> - ORIGINAL_DST/
</I>&gt;<i> 10.0.1.1 -
</I>
Problem #2;
  you are sending the request to an intercept port without having gone
through the NAT system.
 If you left it to run, your machine would eventually crash as all
networking sockets and resources were consumed by the forwarding loop.


squidclient needs to use a forward-proxy port to connect to Squid.
Usually that is 3128, which is the port registered for Squid
forward-proxy ctraffic.

Recommended practice is to leave port 3128 for proxy administrative
access and tools like squidclient. Movine the intercept port to another
random number and firewall it (in iptables with mangle tables rule) to
prevent anything except NAT'd traffic reaching that random port.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009472.html">[squid-users] Squidcllient making request
</A></li>
	<LI>Next message (by thread): <A HREF="009502.html">[squid-users] Squidcllient making request
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9474">[ date ]</a>
              <a href="thread.html#9474">[ thread ]</a>
              <a href="subject.html#9474">[ subject ]</a>
              <a href="author.html#9474">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
