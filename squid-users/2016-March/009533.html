<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Bizarrely slow, timing out DNS only via Squid :D
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Bizarrely%20slow%2C%20timing%20out%20DNS%20only%20via%20Squid%20%3AD&In-Reply-To=%3C56D94DB0.5030900%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009530.html">
   <LINK REL="Next"  HREF="009563.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Bizarrely slow, timing out DNS only via Squid :D</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Bizarrely%20slow%2C%20timing%20out%20DNS%20only%20via%20Squid%20%3AD&In-Reply-To=%3C56D94DB0.5030900%40ngtech.co.il%3E"
       TITLE="[squid-users] Bizarrely slow, timing out DNS only via Squid :D">eliezer at ngtech.co.il
       </A><BR>
    <I>Fri Mar  4 08:56:16 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009530.html">[squid-users] Bizarrely slow, timing out DNS only via Squid :D
</A></li>
        <LI>Next message (by thread): <A HREF="009563.html">[squid-users] Bizarrely slow, timing out DNS only via Squid :D
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9533">[ date ]</a>
              <a href="thread.html#9533">[ thread ]</a>
              <a href="subject.html#9533">[ subject ]</a>
              <a href="author.html#9533">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Yes but!!

We know nothing about the box.
This is not a perfect script at all:
<A HREF="http://ngtech.co.il/squid/ipv6_test.sh">http://ngtech.co.il/squid/ipv6_test.sh</A>

but it verifies if there is a basic ICMP ipv6 access to a publicly 
allowed ipv6 icmp host.
And it also sets the dns_v4_first to on automatically.
As I mentioned the first thing to do in order to really test the issue 
without revealing the squid.conf would be using the squid.conf default file.
It will eliminate many of the suspects and will give a really clear 
indication if the issue is inside the scope of the squid.conf or another 
network of machine level related.

So Dan, please provide the required details:
- squid.conf
- OS
- squid -v output
- squidclient mgr:idns
- squidclient mgr:ipcache
- squidclient mgr:fqdncache

If you do not want to share them publicly you can always send them to my 
or Amos private email.

Eliezer

On 04/03/2016 08:39, Tory M Blue wrote:
&gt;&gt;<i> I've seen the dns issue when IPv6 is not being handled properly. One
</I>&gt;&gt;<i> way to test ( ya ya ) is to disable IPv6 via sysctl and see if you
</I>&gt;&gt;<i> still see the delays.
</I>&gt;<i>
</I>&gt;<i> Tory
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009530.html">[squid-users] Bizarrely slow, timing out DNS only via Squid :D
</A></li>
	<LI>Next message (by thread): <A HREF="009563.html">[squid-users] Bizarrely slow, timing out DNS only via Squid :D
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9533">[ date ]</a>
              <a href="thread.html#9533">[ thread ]</a>
              <a href="subject.html#9533">[ subject ]</a>
              <a href="author.html#9533">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
