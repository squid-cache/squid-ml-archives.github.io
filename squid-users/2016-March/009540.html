<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Facing issue in Internet explorer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Facing%20issue%20in%20Internet%20explorer&In-Reply-To=%3Cvmime.56d98b8c.36d7.571088d47e87164c%40ms249-lin-003.rotterdam.bazuin.nl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009703.html">
   <LINK REL="Next"  HREF="009542.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Facing issue in Internet explorer</H1>
    <B>L.P.H. van Belle</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Facing%20issue%20in%20Internet%20explorer&In-Reply-To=%3Cvmime.56d98b8c.36d7.571088d47e87164c%40ms249-lin-003.rotterdam.bazuin.nl%3E"
       TITLE="[squid-users] Facing issue in Internet explorer">belle at bazuin.nl
       </A><BR>
    <I>Fri Mar  4 13:20:12 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009703.html">[squid-users] Kerberos (Negotiate) problem with win2008 AD users
</A></li>
        <LI>Next message (by thread): <A HREF="009542.html">[squid-users] squid 4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9540">[ date ]</a>
              <a href="thread.html#9540">[ thread ]</a>
              <a href="subject.html#9540">[ subject ]</a>
              <a href="author.html#9540">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hai, 

&#160;

This is what i now use for the remote ip logging. 

&#160;

cat /etc/apache2/conf-custom/log-remote-ip.conf

&#160;

&lt;IfModule mod_remoteip.c&gt;

&#160;&#160; &#160;## apache 2.4: mod_remoteip is by default available

&#160;&#160;&#160; ## enable a2enmod remoteip &amp;&amp; service apache2 restart

&#160;

&#160;&#160;&#160; # for remote proxy setup

&#160;&#160;&#160; RemoteIPHeader X-Forwarded-For

&#160;&#160;&#160; # for cluster setup

&#160;&#160;&#160; #RemoteIPHeader X-Real-IP

&#160;

&#160;&#160;&#160; RemoteIPInternalProxy IP_PROXY_SERVER1

&#160;&#160;&#160; RemoteIPInternalProxy IP_PROXY_SERVER2

&#160;&#160;&#160; RemoteIPInternalProxy realhostname1.internal.domain.tld

&#160;&#160;&#160; RemoteIPInternalProxy realhostname2.internal.domain.tld

&#160;

&#160;&#160;&#160; LogFormat &quot;%a %l %u %t \&quot;%r\&quot; %&gt;s %O \&quot;%{Referer}i\&quot; \&quot;%{User-Agent}i\&quot;&quot; combined_remoteip

&#160;&#160;&#160; ##&#160; ( optional with added vhostname at the end )

&#160;&#160;&#160; #LogFormat &quot;%a %l %u %t \&quot;%r\&quot; %&gt;s %b \&quot;%{Referer}i\&quot; \&quot;%{User-Agent}i\&quot; %v&quot; combined_remoteip

&#160;

&lt;/IfModule&gt;

&#160;

&#160;

You dont need to change things in squid. 

&#160;

I did set in the vhosts. 

&#160;

&#160;&#160;&#160; CustomLog ${APACHE_LOG_DIR}/test-access.log combined_remoteip

&#160;

So in any vhost only thing i change now is : combined to combined_remoteip 

&#160;

&#160;

Greetz, 

&#160;

Louis

&#160;

&#160;


Van: Prasad Desai [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">prasad.desai at shreshtait.com</A>] 
Verzonden: vrijdag 4 maart 2016 14:00
Aan: L.P.H. van Belle
Onderwerp: Re: [squid-users] Facing issue in Internet explorer


&#160;

Hi,

&#160;


After so long i have emailed you, now i am facing one issue with access logs. Some of my websites are not recording in access logs. Do you have any suggestions. &#160;


&#160;

On Tue, Feb 16, 2016 at 1:56 PM, L.P.H. van Belle &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">belle at bazuin.nl</A>&gt; wrote:

Hai, 

&#160;

Have you tried also with only the TLS options enabled.&#160; Enableing ssl2 and ssl3 is really a security leak. 

But at least you got it working. 

If you run a webserver with ssl also, just i hint, maybe you know already, maybe not. 

&#160;

Goto www.ssllabs.com test you ssl of the webserver, and try to adjust you setting to a compatible settting. 

If you run an apache 2.4, you can mail me, i have a explained setup, with the things working and not. 

I did about 30 tests on ssl labs to get al these settings. &#160;;-) 

&#160;

When this is done go test again with the proxy and try to exclude sslv2 and sslv3 in the clients. 

Maybe this is also a squid adjustment, but that i dont know. 

&#160;

&#160;

Greetz, 

&#160;

Louis

&#160;

&#160;


Van: Prasad Desai [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">prasad.desai at shreshtait.com</A>] 
Verzonden: dinsdag 16 februari 2016 8:36
Aan: L.P.H. van Belle
Onderwerp: Re: [squid-users] Facing issue in Internet explorer


&#160;

Hi,&#160;

&#160;


Thanks. It worked after making the changes in IE ( Default setting was only SSL3 and TLS 1.0 &#160;enabled&#160;) as given in the URL.


&#160;


<A HREF="http://i66.tinypic.com/141hy07.jpg">http://i66.tinypic.com/141hy07.jpg</A>



&#160;

On Fri, Feb 12, 2016 at 8:15 PM, Prasad Desai &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">prasad.desai at shreshtait.com</A>&gt; wrote:

Hi,&#160;

&#160;


Even after in IE version 8 disabling SSL3 in advanced options and enable TLS1.0 we are getting same error.



&#160;

On Fri, Feb 12, 2016 at 3:47 PM, L.P.H. van Belle &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">belle at bazuin.nl</A>&gt; wrote:



&gt;<i> For example, in IE version 8, getting an error given below,
</I>
&#160;

You can try to disable SSL3 in advanced options and enable TLS1.0 and/or better 

&#160;

SSLV3 is absolete now. 

&#160;

&#160;


Van: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] Namens Prasad Desai
Verzonden: vrijdag 12 februari 2016 9:08
Aan: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Onderwerp: [squid-users] Facing issue in Internet explorer


&#160;

Hi,


&#160;


I have successfully configured SSLBump Peek and Splice in my transparent proxy and it is working as expected except in Internet explorer.


&#160;


For example, in IE version 8, getting an error given below,


&#160;


(71) Protocol error (TLS code: SQUID_ERR_SSL_HANDSHAKE)


Handshake with SSL server failed: error:1409F07F:SSL routines:SSL3_WRITE_PENDING:bad write retry


&#160;


Below is squid.conf,


&#160;


visible_hostname&#160;mysite.com


httpd_suppress_version_string on


via off


forwarded_for delete


deny_info&#160; MailScanner heeft een e-mail met mogelijk een poging tot fraude gevonden van &quot;192.168.3.33&quot; MailScanner warning: numerical links are often malicious: <A HREF="http://192.168.3.33/error.html&#160;blockfiles">http://192.168.3.33/error.html&#160;blockfiles</A>


acl lan src&#160; MailScanner heeft een e-mail met mogelijk een poging tot fraude gevonden van &quot;192.168.4.0&quot; MailScanner warning: numerical links are often malicious: 192.168.4.0/24&#160; MailScanner heeft een e-mail met mogelijk een poging tot fraude gevonden van &quot;192.168.6.0&quot; MailScanner warning: numerical links are often malicious: 192.168.6.0/24&#160; MailScanner heeft een e-mail met mogelijk een poging tot fraude gevonden van &quot;192.168.3.0&quot; MailScanner warning: numerical links are often malicious: 192.168.3.0/24


http_access allow lan


acl SSL_ports port 443


acl Safe_ports port 80 &#160; &#160; &#160; &#160;# http


acl Safe_ports port 21 &#160; &#160; &#160; &#160;# ftp


acl Safe_ports port 443 &#160; &#160; &#160; &#160;# https


acl Safe_ports port 70 &#160; &#160; &#160; &#160;# gopher


acl Safe_ports port 210 &#160; &#160; &#160; &#160;# wais


acl Safe_ports port 1025-65535 &#160; &#160;# unregistered ports


acl Safe_ports port 280 &#160; &#160; &#160; &#160;# http-mgmt


acl Safe_ports port 488 &#160; &#160; &#160; &#160;# gss-http


acl Safe_ports port 591 &#160; &#160; &#160; &#160;# filemaker


acl Safe_ports port 777 &#160; &#160; &#160; &#160;# multiling http


acl CONNECT method CONNECT


strip_query_terms off


http_access allow manager localhost


http_access deny manager


http_access deny !Safe_ports


http_access deny CONNECT !SSL_ports


http_access deny all


sslproxy_flags DONT_VERIFY_PEER DONT_VERIFY_DOMAIN


acl disable-ssl-bump ssl::server_name &quot;/etc/squid/no-ssl-bump.acl&quot;


acl BadSite ssl_error SQUID_X509_V_ERR_DOMAIN_MISMATCH


sslproxy_cert_error allow BadSite


acl step1 at_step SSLBump1


acl step2 at_step SSLBump2


acl step3 at_step SSLBump3


ssl_bump peek step1 all


ssl_bump splice step2 disable-ssl-bump


ssl_bump stare step2 all


ssl_bump splice step3 disable-ssl-bump


ssl_bump bump step3 all


http_port 3130


http_port 3128 intercept


https_port 3129 intercept ssl-bump generate-host-certificates=on dynamic_cert_mem_cache_size=8MB cert=/etc/squid/ssl_cert/myca.pem key=/etc/squid/ssl_cert/myca.pem


sslcrtd_program /usr/lib/squid/ssl_crtd -s /var/lib/ssl_db -M 8MB


sslcrtd_children 8 startup=1 idle=1


coredump_dir /var/spool/squid


refresh_pattern ^ftp: &#160; &#160; &#160; &#160;1440 &#160; &#160;20% &#160; &#160;10080


refresh_pattern ^gopher: &#160; &#160;1440 &#160; &#160;0% &#160; &#160;1440


refresh_pattern -i (/cgi-bin/|\?) 0 &#160; &#160;0% &#160; &#160;0


refresh_pattern . &#160; &#160; &#160; &#160;0 &#160; &#160;20% &#160; &#160;4320


&#160;


Any inputs to resolve this error will be much appreciated.


&#160;


-- 

Best,


Prasad Desai


Systems Engineer


&#160;














&#160;



_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>






&#160;


-- 

Best,


Prasad Desai


&#160;
















&#160;


-- 

Best,


Prasad Desai


&#160;





















&#160;


-- 

Best,


Prasad Desai


&#160;











-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160304/b0a30993/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160304/b0a30993/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009703.html">[squid-users] Kerberos (Negotiate) problem with win2008 AD users
</A></li>
	<LI>Next message (by thread): <A HREF="009542.html">[squid-users] squid 4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9540">[ date ]</a>
              <a href="thread.html#9540">[ thread ]</a>
              <a href="subject.html#9540">[ subject ]</a>
              <a href="author.html#9540">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
