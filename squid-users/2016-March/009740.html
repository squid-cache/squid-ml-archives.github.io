<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Need advice on some crazy access control requirements
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Need%20advice%20on%20some%20crazy%20access%20control%0A%20requirements&In-Reply-To=%3C20160314114151.GA67942%40admin.sibptus.tomsk.ru%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009704.html">
   <LINK REL="Next"  HREF="009757.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Need advice on some crazy access control requirements</H1>
    <B>Victor Sudakov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Need%20advice%20on%20some%20crazy%20access%20control%0A%20requirements&In-Reply-To=%3C20160314114151.GA67942%40admin.sibptus.tomsk.ru%3E"
       TITLE="[squid-users] Need advice on some crazy access control requirements">sudakov at sibptus.tomsk.ru
       </A><BR>
    <I>Mon Mar 14 11:41:51 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009704.html">[squid-users] Need advice on some crazy access control requirements
</A></li>
        <LI>Next message (by thread): <A HREF="009757.html">[squid-users] Need advice on some crazy access control requirements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9740">[ date ]</a>
              <a href="thread.html#9740">[ thread ]</a>
              <a href="subject.html#9740">[ subject ]</a>
              <a href="author.html#9740">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Amos Jeffries wrote:
&gt;<i> &gt; 
</I>&gt;<i> &gt; New Internet access rules are being introduced in our company, among
</I>&gt;<i> &gt; them there is a requirement to have special groups of Internet users
</I>&gt;<i> &gt; who are permitted to: 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 1. Download files from the Internet.
</I>&gt;<i> 
</I>&gt;<i> &gt; 2. Use Web forums.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 3. Use streaming audio/video.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; By default users should have no access to the above facilities.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; These requirements may sound stupid and vague to some, but is there a
</I>&gt;<i> &gt; way to accomodate them at least partially, without keeping long lists
</I>&gt;<i> &gt; of prohibited file extensions and domains, which is very
</I>&gt;<i> &gt; counterproductive?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Not stupid at all. There are some good reasons any of these might be
</I>&gt;<i> needed. The vagueness is the main problem.
</I>
Please see below about vagueness.

&gt;<i> 
</I>&gt;<i> &gt; 1. Download files from the Internet.
</I>&gt;<i> &gt;
</I>&gt;<i> 
</I>&gt;<i> That one is easy &gt;:-). *everything* in HTTP is downloaded. It is only
</I>&gt;<i> how you view it that changes (in-browser vs. out-of-browser).
</I>&gt;<i> 
</I>&gt;<i> So:
</I>&gt;<i>   &quot;http_access deny all&quot;
</I>&gt;<i> 
</I>&gt;<i> But perhapse there is a more detailed definition of &quot;files&quot; that was
</I>&gt;<i> intended. See the example for #3 below. Once you can narrow down *what
</I>&gt;<i> types* of files are relevant (audio, video, executables, archives, pdf,
</I>&gt;<i> text, flash, etc, etc ?) you can use reply content-type restriction to
</I>&gt;<i> control them arriving.
</I>
They probably meant executable files. Or large files like mp3s and
videos.

If an executable file is of the generic application/octet-stream type,
how would you apply the content-type restriction?

&gt;<i>  NP: Squid will still fetch them from the server (we cant stop that at
</I>&gt;<i> least starting to arrive), but be blocked from delivering to the user.
</I>&gt;<i> 
</I>&gt;<i> Note that streaming (#3) is just a audio/video file being downloaded. It
</I>&gt;<i> happens to be being played at the same time. But it is still a download.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt; 2. Use Web forums.
</I>&gt;<i> 
</I>&gt;<i> Likewise. Anything in www can be a forum. To do anything useful &quot;forums&quot;
</I>&gt;<i> needs to be defined in a technical way. As does &quot;use&quot;.
</I>
Deny the POST method? :-)

&gt;<i> 
</I>&gt;<i> I expect this one will end up being a long list of domains just by itself.
</I>
Can you advise such lists for use with squid (both community supported
and commercial)?

&gt;<i> 
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 3. Use streaming audio/video.
</I>&gt;<i> 
</I>&gt;<i> This is somewhat easier than #1. Since &quot;audio/video&quot; is already a clear
</I>&gt;<i> technical definition.
</I>&gt;<i> 
</I>&gt;<i> &lt;<A HREF="http://wiki.squid-cache.org/ConfigExamples/#Multimedia_and_Data_Stream_filtering">http://wiki.squid-cache.org/ConfigExamples/#Multimedia_and_Data_Stream_filtering</A>&gt;
</I>
Thanks for the link, it is useful.

&gt;<i> Example is not complete by any means. But demonstrates how to do it for
</I>&gt;<i> the AV stuff you want to block.
</I>&gt;<i> 
</I>&gt;<i> You may also want to use:
</I>&gt;<i> 
</I>&gt;<i>  acl radio proto ICY
</I>&gt;<i>  http_reply_access deny radio
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I am perfectly aware that an advanced Internet user will be able to
</I>&gt;<i> &gt; circumvent those prohibitions, but still, any recipes? I have looked
</I>&gt;<i> &gt; in <A HREF="http://wiki.squid-cache.org/SquidFaq/SquidAcl">http://wiki.squid-cache.org/SquidFaq/SquidAcl</A> but found nothing
</I>&gt;<i> &gt; very useful.
</I>&gt;<i> 
</I>&gt;<i> Without technical definitions for &quot;files&quot;, &quot;forums&quot;, and &quot;use&quot; its all
</I>&gt;<i> just too vague.
</I>
I believe the authors of the document had in mind some commercial
Web filtering system with an easy-to-use interface for
permitting/blocking certain categories of sites. From their point of
view, perhaps, those definitions are as clear as radio buttons and
menus in some commercial Web filter (e.g. SkyDNS), and the technical
definitions are left to the vendor.

-- 
Victor Sudakov,  VAS4-RIPE, VAS47-RIPN
sip:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">sudakov at sibptus.tomsk.ru</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009704.html">[squid-users] Need advice on some crazy access control requirements
</A></li>
	<LI>Next message (by thread): <A HREF="009757.html">[squid-users] Need advice on some crazy access control requirements
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9740">[ date ]</a>
              <a href="thread.html#9740">[ thread ]</a>
              <a href="subject.html#9740">[ subject ]</a>
              <a href="author.html#9740">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
