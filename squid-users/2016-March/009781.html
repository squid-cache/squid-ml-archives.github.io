<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] FreeBSD and Kerberos: RC4 keytabs work, AES256 don't
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20FreeBSD%20and%20Kerberos%3A%20RC4%20keytabs%20work%2C%0A%20AES256%20don%27t&In-Reply-To=%3C20160315140618.GA5565%40admin.sibptus.tomsk.ru%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009776.html">
   <LINK REL="Next"  HREF="009799.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] FreeBSD and Kerberos: RC4 keytabs work, AES256 don't</H1>
    <B>Victor Sudakov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20FreeBSD%20and%20Kerberos%3A%20RC4%20keytabs%20work%2C%0A%20AES256%20don%27t&In-Reply-To=%3C20160315140618.GA5565%40admin.sibptus.tomsk.ru%3E"
       TITLE="[squid-users] FreeBSD and Kerberos: RC4 keytabs work, AES256 don't">sudakov at sibptus.tomsk.ru
       </A><BR>
    <I>Tue Mar 15 14:06:18 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009776.html">[squid-users] FreeBSD and Kerberos: RC4 keytabs work, AES256 don't
</A></li>
        <LI>Next message (by thread): <A HREF="009799.html">[squid-users] FreeBSD and Kerberos: RC4 keytabs work, AES256 don't
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9781">[ date ]</a>
              <a href="thread.html#9781">[ thread ]</a>
              <a href="subject.html#9781">[ subject ]</a>
              <a href="author.html#9781">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Marko Cupa?? wrote:
&gt;<i> 
</I>&gt;<i> I am setting up new AD-integrated squid server, so I thought I might as
</I>&gt;<i> well upgrade kerberos crypto on keytabs.
</I>&gt;<i> 
</I>&gt;<i> It seems that, at least on FreeBSD 10.2-RELEASE-p13, squid-3.5.15
</I>&gt;<i> compiled with GSSAPI_BASE (kerberos from base system) can't
</I>&gt;<i> authenticate users via kerberos using AES256 keytabs.
</I>&gt;<i> 
</I>&gt;<i> Testing with kinit works, but squid auth does not. I am getting these
</I>&gt;<i> in cache.log:
</I>&gt;<i> BH gss_accept_sec_context() failed:  Miscellaneous failure (see text).
</I>&gt;<i> unknown mech-code 0 for mech unknown
</I>
What encryption type is the ticket (for the HTTP/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy at YOUR.REALM</A>) the
Windows KDC gives you? You can figure this out from klist.exe or
kerbtray.exe.

In my case, the Windows KDC never issues an AES256 ticket for some
reason, even if the squid service principal has one in the AD.

-- 
Victor Sudakov,  VAS4-RIPE, VAS47-RIPN
sip:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">sudakov at sibptus.tomsk.ru</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009776.html">[squid-users] FreeBSD and Kerberos: RC4 keytabs work, AES256 don't
</A></li>
	<LI>Next message (by thread): <A HREF="009799.html">[squid-users] FreeBSD and Kerberos: RC4 keytabs work, AES256 don't
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9781">[ date ]</a>
              <a href="thread.html#9781">[ thread ]</a>
              <a href="subject.html#9781">[ subject ]</a>
              <a href="author.html#9781">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
