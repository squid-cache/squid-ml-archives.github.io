<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Sudden but sustained high bandwidth usage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Sudden%20but%20sustained%20high%20bandwidth%20usage&In-Reply-To=%3C56E8E6E5.3000707%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009791.html">
   <LINK REL="Next"  HREF="009610.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Sudden but sustained high bandwidth usage</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Sudden%20but%20sustained%20high%20bandwidth%20usage&In-Reply-To=%3C56E8E6E5.3000707%40treenet.co.nz%3E"
       TITLE="[squid-users] Sudden but sustained high bandwidth usage">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Mar 16 04:53:57 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009791.html">[squid-users] Sudden but sustained high bandwidth usage
</A></li>
        <LI>Next message (by thread): <A HREF="009610.html">[squid-users] Sudden but sustained high bandwidth usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9795">[ date ]</a>
              <a href="thread.html#9795">[ thread ]</a>
              <a href="subject.html#9795">[ subject ]</a>
              <a href="author.html#9795">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 16/03/2016 6:51 a.m., Heiler Bemerguy wrote:
&gt;<i> 
</I>&gt;<i> Hi joe, Eliezer, Amos.. today I saw something different regarding high
</I>&gt;<i> bandwidth and caching of windows updates ranged requests..
</I>&gt;<i> 
</I>&gt;<i> A client begins a windows update, it does a:
</I>&gt;<i> HEAD to check size or something, which is ok..
</I>&gt;<i> then a ranged GET, which outputs a TCP_MISS/206,
</I>&gt;<i> then the next GET gives a TCP_SWAPFAIL_MISS/206.
</I>&gt;<i> Lots of other TCP_MISS/206, then in the end, TCP_MISS_ABORTED/000
</I>&gt;<i> 
</I>&gt;<i> A big amount of parallel connections are being made because of each
</I>&gt;<i> GET.. ok, I know squid can't do much about it.. but then, why the
</I>&gt;<i> content does not get cached in the end?
</I>&gt;<i> I mean, the way it is, it will happen every day.. are these
</I>&gt;<i> &quot;TCP_MISS_ABORTED&quot; really the client aborting the download? I doubt it...
</I>&gt;<i> 
</I>
It is. These things happen a lot more often than you might expect. All
it takes is Squid not knowing properly when the object is ended, or a
brief network outage and it will hang for a while (after finishing)
until the client disconnects.


&gt;<i> Take a look and see if you can understand:
</I>
I can. The big question is whether *you* understand what is going on?
This log extract shows a nice sequential series of Range requests being
fetched and satisfied. Until at the end the server stops providing data
and the client disconnects with a ~5min timeout.

Bandwidth consumed is presumably the correct amount for those downloads.
the log does not record server or total bandwidth consumption, only
client delivered payload size. So it naturally does not show many hints
about what your &quot;high bandwidth&quot; problem is.

Also, you have logged in &quot;human&quot; format. Which makes the time
differential math to figure out whether those are sequential or parallel
transactions VERY difficult.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009791.html">[squid-users] Sudden but sustained high bandwidth usage
</A></li>
	<LI>Next message (by thread): <A HREF="009610.html">[squid-users] Sudden but sustained high bandwidth usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9795">[ date ]</a>
              <a href="thread.html#9795">[ thread ]</a>
              <a href="subject.html#9795">[ subject ]</a>
              <a href="author.html#9795">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
