<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid quickly crashes with SIGABRT after Update from	3.5.14 to 3.5.15
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20quickly%20crashes%20with%20SIGABRT%20after%20Update%20from%0A%093.5.14%20to%203.5.15&In-Reply-To=%3C56EA78C4.90001%40hoelzle.work%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009813.html">
   <LINK REL="Next"  HREF="009818.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid quickly crashes with SIGABRT after Update from	3.5.14 to 3.5.15</H1>
    <B>Stefan H&#246;lzle</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20quickly%20crashes%20with%20SIGABRT%20after%20Update%20from%0A%093.5.14%20to%203.5.15&In-Reply-To=%3C56EA78C4.90001%40hoelzle.work%3E"
       TITLE="[squid-users] Squid quickly crashes with SIGABRT after Update from	3.5.14 to 3.5.15">stefan at hoelzle.work
       </A><BR>
    <I>Thu Mar 17 09:28:36 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009813.html">[squid-users] not caching
</A></li>
        <LI>Next message (by thread): <A HREF="009818.html">[squid-users] Squid quickly crashes with SIGABRT after Update from 3.5.14 to 3.5.15
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9817">[ date ]</a>
              <a href="thread.html#9817">[ thread ]</a>
              <a href="subject.html#9817">[ subject ]</a>
              <a href="author.html#9817">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Squid crashes with SIGABRT a few seconds after it starts.
This issue occurred after upgrading Squid 3.5.14 to Squid version 3.5.15.

cache.log just before the crash:
2016/03/02 10:41:30.389 kid1| 22,3| refresh.cc(343) refreshCheck: Staleness = -1
2016/03/02 10:41:30.389 kid3| 5,5| Write.cc(66) HandleWrite: local=[::] remote=[::] FD 37 flags=1: off 0, sz 4328.
2016/03/02 10:41:30.389 kid1| 22,3| refresh.cc(463) refreshCheck: Object isn't stale..
2016/03/02 10:41:30.389 kid2| 19,9| stmem.cc(132) writeAvailable: 0x7f5858656b00 hi: 83
2016/03/02 10:41:30.389 kid3| 5,5| Write.cc(108) HandleWrite: write() returns -1
2016/03/02 10:41:30.389 kid1| 22,3| refresh.cc(465) refreshCheck: returning FRESH_EXPIRES
2016/03/02 10:41:30.389 kid3| 50,9| Write.cc(145) HandleWrite: FD 37 write failure: (11) Resource temporarily unavailable.
2016/03/02 10:41:30.389 kid2| 20,5| store.cc(834) write: storeWrite: writing 2 bytes for 'B4551BE0E66085B1C4739B426C7AD33A'
2016/03/02 10:41:30.389 kid3| 5,5| ModEpoll.cc(116) SetSelect: FD 37, type=2, handler=1, client_data=0x7f61fb033400, timeout=0
2016/03/02 10:41:30.389 kid1| 22,3| http.cc(471) cacheableReply: YES because HTTP status 200
2016/03/02 10:41:30.389 kid2| 19,6| MemObject.cc(153) write: memWrite: offset 83 len 2
2016/03/02 10:41:30.389 kid3| 5,8| ModEpoll.cc(267) DoSelect: got FD 38 events=4 monitoring=1c F-&gt;read_handler=0 F-&gt;write_handler=1
2016/03/02 10:41:30.389 kid3| 5,8| ModEpoll.cc(289) DoSelect: Calling write handler on FD 38
2016/03/02 10:41:30.389 kid1| 55,9| HttpHeader.cc(1201) has: 0x7ff9b6f17ed8 lookup for 45
2016/03/02 10:41:30.389 kid2| 19,6| stmem.cc(344) write: mem_hdr::write: 0x7f5858656b00 [83,85) object end 83
2016/03/02 10:41:30.389 kid3| 5,5| Write.cc(66) HandleWrite: local=[::] remote=[::] FD 38 flags=1: off 0, sz 4328.
2016/03/02 10:41:30.389 kid1| ctx: exit level  0
2016/03/02 10:41:30.389 kid2| 19,9| stmem.cc(124) writeAvailable: 0x7f5858656b00 hi: 83
2016/03/02 10:41:30.389 kid3| 5,5| Write.cc(108) HandleWrite: write() returns -1
2016/03/02 10:41:30.389 kid2| 19,9| stmem.cc(131) writeAvailable: 0x7f5858656b00 hi: 85
2016/03/02 10:41:30.389 kid3| 50,9| Write.cc(145) HandleWrite: FD 38 write failure: (11) Resource temporarily unavailable.
2016/03/02 10:41:30.389 kid1| assertion failed: store.cc:1890: &quot;isEmpty()&quot;

$ squid -v
Squid Cache: Version 3.5.15
Service Name: squid
configure options:  '--host=x86_64-suse-linux-gnu' '--build=x86_64-suse-linux-gnu' '--program-prefix=' '--exec-prefix=/usr' '--bindir=/usr/bin' '--sysconfdir=/etc' '--datadir=/usr/share' '--includedir=/usr/include' '--libdir=/usr/lib64' '--libexecdir=/usr/lib' '--sharedstatedir=/usr/com' '--mandir=/usr/share/man' '--infodir=/usr/share/info' '--disable-dependency-tracking' '--disable-arch-native' '--prefix=/usr' '--sysconfdir=/etc/squid' '--bindir=/usr/sbin' '--sbindir=/usr/sbin' '--localstatedir=/var' '--libexecdir=/usr/sbin' '--datadir=/usr/share/squid' '--libdir=/usr/lib' '--with-dl' '--enable-storeio=aufs' '--enable-disk-io=AIO,Blocking,DiskDaemon,DiskThreads' '--enable-removal-policies=heap,lru' '--enable-delay-pools' '--enable-kill-parent-hack' '--with-large-files' '--enable-auth' '--disable-auth-basic' '--disable-auth-negotiate' '--disable-auth-ntlm' '--disable-htcp' '--enable-log-daemon-helpers=file' '--with-default-user=squid' 'build_alias=x86_64-suse-linux-gnu' 'host_alias=x86_64-suse-linux-gnu' 'CFLAGS=-fmessage-length=0 -O2 -Wall -D_FORTIFY_SOURCE=2 -fstack-protector -funwind-tables -fasynchronous-unwind-tables -fPIE -fPIC -DOPENSSL_LOAD_CONF' 'LDFLAGS=-Wl,-z,relro,-z,now -pie' 'CXXFLAGS=-fmessage-length=0 -O2 -Wall -D_FORTIFY_SOURCE=2 -fstack-protector -funwind-tables -fasynchronous-unwind-tables -fPIE -fPIC -DOPENSSL_LOAD_CONF' 'PKG_CONFIG_PATH=:/usr/lib64/pkgconfig:/usr/share/pkgconfig'



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009813.html">[squid-users] not caching
</A></li>
	<LI>Next message (by thread): <A HREF="009818.html">[squid-users] Squid quickly crashes with SIGABRT after Update from 3.5.14 to 3.5.15
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9817">[ date ]</a>
              <a href="thread.html#9817">[ thread ]</a>
              <a href="subject.html#9817">[ subject ]</a>
              <a href="author.html#9817">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
