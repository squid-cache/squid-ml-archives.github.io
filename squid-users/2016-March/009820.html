<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] access from same ID and different IP addresses.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20access%20from%20same%20ID%20and%20different%20IP%20addresses.&In-Reply-To=%3C20160317.215043.737004071327904975.asakura%40ioc.dnp.co.jp%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009809.html">
   <LINK REL="Next"  HREF="009802.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] access from same ID and different IP addresses.</H1>
    <B>asakura at ioc.dnp.co.jp</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20access%20from%20same%20ID%20and%20different%20IP%20addresses.&In-Reply-To=%3C20160317.215043.737004071327904975.asakura%40ioc.dnp.co.jp%3E"
       TITLE="[squid-users] access from same ID and different IP addresses.">asakura at ioc.dnp.co.jp
       </A><BR>
    <I>Thu Mar 17 12:50:43 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009809.html">[squid-users] access from same ID and different IP addresses.
</A></li>
        <LI>Next message (by thread): <A HREF="009802.html">[squid-users] Squid Authentication with Window AD
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9820">[ date ]</a>
              <a href="thread.html#9820">[ thread ]</a>
              <a href="subject.html#9820">[ subject ]</a>
              <a href="author.html#9820">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thank you Amos,

I will consider squid version up of squid.

By the way, the UserID and IP segment of problem is not currently used.
They are scheduled to be used again in May 2016.

It will report if there is any good news.


Regards,
Kazuhiro


From: Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;
Subject: Re: [squid-users] access from same ID and different IP addresses.
Date: Thu, 17 Mar 2016 01:35:07 +1300

&gt;<i> On 16/03/2016 5:06 p.m., <A HREF="https://lists.squid-cache.org/listinfo/squid-users">asakura at ioc.dnp.co.jp</A> wrote:
</I>&gt;<i> &gt; Hello,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Recently, in our environment, CPU load on the squid proxy server
</I>&gt;<i> &gt; is happening trouble to become a 100%.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; example----
</I>&gt;<i> &gt; PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
</I>&gt;<i> &gt; 29767 squid     20   0 1430m 1.3g 5332 R 99.1 17.4   6836:56 squid
</I>&gt;<i> &gt; 16856 squid     20   0 29764 3280 1620 S  2.0  0.0  68:46.34 squid_kerb_auth
</I>&gt;<i> &gt; 16860 squid     20   0 29760 3272 1616 S  1.7  0.0  43:53.67 squid_kerb_auth
</I>&gt;<i> &gt; 16855 squid     20   0 22636 1244 1000 S  0.3  0.0   2:57.66 negotiate_wrapp
</I>&gt;<i> &gt; 21437 asakura   20   0 15432 1632  932 R  0.3  0.0   0:01.02 top
</I>&gt;<i> &gt; 26167 root      20   0 19088 2248 1060 S  0.3  0.0   1016:14 syslog-ng
</I>&gt;<i> &gt; ---
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; As a result of investigation, We suspect that CPU load become a 100%
</I>&gt;<i> &gt; when user attempts to log in from more than different ip addresses. 
</I>&gt;<i> &gt; 
</I>&gt;<i> 
</I>&gt;<i> All that CPU has to be spent doing something. So what is that something?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt; This time, squid has been accessed from 20 or more units of
</I>&gt;<i> &gt; the PC with the same user ID.
</I>&gt;<i> &gt; When we disable user authentication from target segment, CPU load be low.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; We want to know whether CPU load goes up when squid is accessed from
</I>&gt;<i> &gt; a large number of different IP addresses with the same user ID.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Our environment is below,
</I>&gt;<i> &gt; - squid-3.5.1 with squid_kerb_auth(sorry old version...) x5 server
</I>&gt;<i> 
</I>&gt;<i> First step is upgrading. So you can see if it is one of the thousand or
</I>&gt;<i> so bugs already fixed since that old version.
</I>&gt;<i> 
</I>&gt;<i> There have been at least 2 bugs whose claimed symptom was &quot;100% CPU
</I>&gt;<i> usage&quot; that got fixed this past year.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Amos
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009809.html">[squid-users] access from same ID and different IP addresses.
</A></li>
	<LI>Next message (by thread): <A HREF="009802.html">[squid-users] Squid Authentication with Window AD
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9820">[ date ]</a>
              <a href="thread.html#9820">[ thread ]</a>
              <a href="subject.html#9820">[ subject ]</a>
              <a href="author.html#9820">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
