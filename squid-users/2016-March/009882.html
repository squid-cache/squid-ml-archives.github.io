<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] substituing sniproxy for squid
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20substituing%20sniproxy%20for%20squid&In-Reply-To=%3CCAFLo2Qw7XUNr6PFQ4c%2B%2B6ZLacJq1a-2zO3gXfstTOGysi6fAkA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009876.html">
   <LINK REL="Next"  HREF="009883.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] substituing sniproxy for squid</H1>
    <B>Luis Daniel Lucio Quiroz</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20substituing%20sniproxy%20for%20squid&In-Reply-To=%3CCAFLo2Qw7XUNr6PFQ4c%2B%2B6ZLacJq1a-2zO3gXfstTOGysi6fAkA%40mail.gmail.com%3E"
       TITLE="[squid-users] substituing sniproxy for squid">luis.daniel.lucio at gmail.com
       </A><BR>
    <I>Thu Mar 24 01:25:34 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009876.html">[squid-users] ext_ldap_group_acl is returned ERR when LDAP bind was	fail.
</A></li>
        <LI>Next message (by thread): <A HREF="009883.html">[squid-users] substituing sniproxy for squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9882">[ date ]</a>
              <a href="thread.html#9882">[ thread ]</a>
              <a href="subject.html#9882">[ subject ]</a>
              <a href="author.html#9882">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks

Well, I am now stuck with the Host header forgery detected
Which it means that client and squid resolve different IP (in my use case
that is what I want).

I already have  host_verify_strict
&lt;<A HREF="http://www.squid-cache.org/Doc/config/host_verify_strict">http://www.squid-cache.org/Doc/config/host_verify_strict</A>&gt;   disabled, but
that is not enough.

Any advice? (Rather than do a patch and disable that verification? )

--
Luis Daniel Lucio Quiroz
CISSP, CISM, CISA
Linux, VoIP and much more fun
www.okay.com.mx

Need LCR? Check out LCR for FusionPBX with FreeSWITCH
Need Billing? Check out Billing for FusionPBX with FreeSWITCH

2016-02-01 16:31 GMT-05:00 Luis Daniel Lucio Quiroz &lt;
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">luis.daniel.lucio at gmail.com</A>&gt;:

&gt;<i> Thank you
</I>&gt;<i>
</I>&gt;<i> I understand what you mean, but ssl/tls will warm the browser if something
</I>&gt;<i> is modified.
</I>&gt;<i> Le 1 f&#233;vr. 2016 7:08 AM, &quot;Amos Jeffries&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt; a &#233;crit :
</I>&gt;<i>
</I>&gt;&gt;<i> On 1/02/2016 11:35 a.m., Luis Daniel Lucio Quiroz wrote:
</I>&gt;&gt;<i> &gt; Hello
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Can anyone give some clue, link something to read on how to do the HTTPs
</I>&gt;&gt;<i> &gt; work with SNI, i just want to forward to the correct server based on the
</I>&gt;&gt;<i> &gt; SNI. I want to get rid of SNIproxy in favor of squid.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> That should be possible with Squid-3.5 or later by intercepting the port
</I>&gt;&gt;<i> 443 traffic (*not* reverse-proxy / accel) and using:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>  acl step1 at_step SslBumpStep1
</I>&gt;&gt;<i>  ssl_bump peek step1
</I>&gt;&gt;<i>  ssl_bump splice all
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> But be aware that SNI does not provide any guarantee of &quot;correct
</I>&gt;&gt;<i> server&quot;. HTTP (even in its 'HTTPS' form) is a multiplexed messaging
</I>&gt;&gt;<i> protocol. When you do the above Squid will not be able to protect you
</I>&gt;&gt;<i> against any Host header attacks buried inside the TLS layer - not that
</I>&gt;&gt;<i> sniproxy does either (in fact sniproxy seems by design to actively
</I>&gt;&gt;<i> _enable_ those type of vulnerabilities).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Amos
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> squid-users mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160323/1a2cfeb7/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160323/1a2cfeb7/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009876.html">[squid-users] ext_ldap_group_acl is returned ERR when LDAP bind was	fail.
</A></li>
	<LI>Next message (by thread): <A HREF="009883.html">[squid-users] substituing sniproxy for squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9882">[ date ]</a>
              <a href="thread.html#9882">[ thread ]</a>
              <a href="subject.html#9882">[ subject ]</a>
              <a href="author.html#9882">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
