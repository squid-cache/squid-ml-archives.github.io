<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] &quot;ACCESS DENIED&quot; page by ssl_bump terminate
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%22ACCESS%20DENIED%22%20page%20by%20ssl_bump%20terminate&In-Reply-To=%3C56F931B5.10500%40wipline.ru%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009920.html">
   <LINK REL="Next"  HREF="009923.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] &quot;ACCESS DENIED&quot; page by ssl_bump terminate</H1>
    <B>Alexandr Yatskin</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%22ACCESS%20DENIED%22%20page%20by%20ssl_bump%20terminate&In-Reply-To=%3C56F931B5.10500%40wipline.ru%3E"
       TITLE="[squid-users] &quot;ACCESS DENIED&quot; page by ssl_bump terminate">yatskin at wipline.ru
       </A><BR>
    <I>Mon Mar 28 13:29:25 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009920.html">[squid-users] &quot;ACCESS DENIED&quot; page by ssl_bump terminate
</A></li>
        <LI>Next message (by thread): <A HREF="009923.html">[squid-users] &quot;ACCESS DENIED&quot; page by ssl_bump terminate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9921">[ date ]</a>
              <a href="thread.html#9921">[ thread ]</a>
              <a href="subject.html#9921">[ subject ]</a>
              <a href="author.html#9921">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've already checked it. Order of this options doesn't matter.


28.03.2016 15:30, Yuri Voinov &#1087;&#1080;&#1096;&#1077;&#1090;:
&gt;<i>
</I>&gt;<i> -----BEGIN PGP SIGNED MESSAGE-----
</I>&gt;<i> Hash: SHA256
</I>&gt;<i>
</I>&gt;<i> I suggests the order is important and must be:
</I>&gt;<i>
</I>&gt;<i> ssl_bump terminate blocked_https
</I>&gt;<i> deny_info <A HREF="http://www.example.com">http://www.example.com</A> blocked_https
</I>&gt;<i>
</I>&gt;<i> 28.03.16 11:59, Alexandr Yatskin &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;<i> &gt; Directive &quot;deny_info&quot; didn't work when we blocked https site with option &quot;ssl_bump&quot;. &gt; Maybe, is 
</I>&gt;<i> there another method? &gt; &gt; 
</I>&gt;<i> -------------------------------------------------------------------- &gt; 
</I>&gt;<i> acl blocked_https ssl::server_name &quot;/etc/squid/blocked_https.txt&quot; &gt; 
</I>&gt;<i> acl step1 at_step SslBump1 &gt; ssl_bump peek step1 &gt; &gt; deny_info 
</I>&gt;<i> <A HREF="http://www.example.com">http://www.example.com</A> blocked_https &gt; ssl_bump terminate 
</I>&gt;<i> blocked_https &gt; 
</I>&gt;<i> -------------------------------------------------------------------- &gt; 
</I>&gt;<i> &gt; &gt; 25.03.2016 17:14, Yuri Voinov &#1087;&#1080;&#1096;&#1077;&#1090;: &gt;&gt; &gt; #  TAG: deny_info &gt; #    
</I>&gt;<i> Usage:   deny_info err_page_name acl &gt; #    or       deny_info 
</I>&gt;<i> <A HREF="http://...">http://...</A> acl &gt; #    or       deny_info TCP_RESET acl &gt; # &gt; #    This 
</I>&gt;<i> can be used to return a ERR_ page for requests which &gt; #    do not 
</I>&gt;<i> pass the 'http_access' rules.  Squid remembers the last &gt; #    acl it 
</I>&gt;<i> evaluated in http_access, and if a 'deny_info' line exists &gt; #    for 
</I>&gt;<i> that ACL Squid returns a corresponding error page. &gt; # &gt; #    The acl 
</I>&gt;<i> is typically the last acl on the http_access deny line which &gt; #    
</I>&gt;<i> denied access. The exceptions to this rule are: &gt; #    - When Squid 
</I>&gt;<i> needs to request authentication credentials. It's then &gt; #      the 
</I>&gt;<i> first authentication related acl encountered &gt; #    - When none of the 
</I>&gt;<i> http_access lines matches. It's then the last &gt; #      acl processed 
</I>&gt;<i> on the last http_access line. &gt; #    - When the decision to deny 
</I>&gt;<i> access was made by an adaptation service, &gt; #      the acl name is the 
</I>&gt;<i> corresponding eCAP or ICAP service_name. &gt; # &gt; #    NP: If providing 
</I>&gt;<i> your own custom error pages with error_directory &gt; #        you may 
</I>&gt;<i> also specify them by your custom file name: &gt; #        Example: 
</I>&gt;<i> deny_info ERR_CUSTOM_ACCESS_DENIED bad_guys &gt; # &gt; #    By defaut Squid 
</I>&gt;<i> will send &quot;403 Forbidden&quot;. A different 4xx or 5xx &gt; #    may be 
</I>&gt;<i> specified by prefixing the file name with the code and a colon. &gt; #    
</I>&gt;<i> e.g. 404:ERR_CUSTOM_ACCESS_DENIED &gt; # &gt; #    Alternatively you can 
</I>&gt;<i> tell Squid to reset the TCP connection &gt; #    by specifying TCP_RESET. 
</I>&gt;<i> &gt; # &gt; #    Or you can specify an error URL or URL pattern. The 
</I>&gt;<i> browsers will &gt; #    get redirected to the specified URL after 
</I>&gt;<i> formatting tags have &gt; #    been replaced. Redirect will be done with 
</I>&gt;<i> 302 or 307 according to &gt; #    HTTP/1.1 specs. A different 3xx code 
</I>&gt;<i> may be specified by prefixing &gt; #    the URL. e.g. 
</I>&gt;<i> 303:<A HREF="http://example.com/">http://example.com/</A> &gt; # &gt; #    URL FORMAT TAGS: &gt; #        %a    - 
</I>&gt;<i> username (if available. Password NOT included) &gt; #        %B    - FTP 
</I>&gt;<i> path URL &gt; #        %e    - Error number &gt; #        %E    - Error 
</I>&gt;<i> description &gt; #        %h    - Squid hostname &gt; #        %H    - 
</I>&gt;<i> Request domain name &gt; #        %i    - Client IP Address &gt; #        
</I>&gt;<i> %M    - Request Method &gt; #        %o    - Message result from external 
</I>&gt;<i> ACL helper &gt; #        %p    - Request Port number &gt; #        %P    - 
</I>&gt;<i> Request Protocol name &gt; #        %R    - Request URL path &gt; #        
</I>&gt;<i> %T    - Timestamp in RFC 1123 format &gt; #        %U    - Full canonical 
</I>&gt;<i> URL from client &gt; #              (HTTPS URLs terminate with *) &gt; 
</I>&gt;<i> #        %u    - Full canonical URL from client &gt; #        %w    - 
</I>&gt;<i> Admin email from squid.conf &gt; #        %x    - Error name &gt; #        
</I>&gt;<i> %%    - Literal percent (%) code &gt; # &gt; #Default: &gt; # none &gt; &gt; ? &gt; &gt; 
</I>&gt;<i> 25.03.16 16:15, Alexandr Yatskin &#1087;&#1080;&#1096;&#1077;&#1090;: &gt; &gt; Hello everyone! &gt; &gt;       
</I>&gt;<i> &gt; How redirect users to &quot;Access Denied&quot; page when they go to &gt;       
</I>&gt;<i> blocked https sites? &gt; &gt;       &gt; Now users only can see such error: 
</I>&gt;<i> &quot;ERR_CONNECTION_CLOSED&quot;. &gt; &gt; &gt; &gt;       &gt; There are several lines from 
</I>&gt;<i> our config: &gt; &gt;       &gt; ------------------------------------------ &gt; 
</I>&gt;<i> &gt;       &gt; acl blocked_https ssl::server_name &gt;       
</I>&gt;<i> &quot;/etc/squid/blocked_https.txt&quot; &gt; &gt;       &gt; ssl_bump terminate 
</I>&gt;<i> blocked_https &gt; &gt;       &gt; ------------------------------------------ &gt; 
</I>&gt;<i> &gt;       &gt; Thanks in advance. &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;       &gt; 
</I>&gt;<i> _______________________________________________ &gt; &gt;       &gt; 
</I>&gt;<i> squid-users mailing list &gt; &gt;       &gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> 
</I>&gt;<i> &gt; &gt;       &gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A> &gt; &gt;&gt; &gt;&gt; 
</I>&gt;<i> &gt;&gt; &gt;&gt; _______________________________________________ &gt;&gt; squid-users 
</I>&gt;<i> mailing list &gt;&gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> &gt;&gt; 
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A> &gt;
</I>&gt;<i>
</I>&gt;<i> -----BEGIN PGP SIGNATURE-----
</I>&gt;<i> Version: GnuPG v2
</I>&gt;<i>
</I>&gt;<i> iQEcBAEBCAAGBQJW+SPZAAoJENNXIZxhPexGn0wIALLPgsRZLfdfo6j2cxRiYU2W
</I>&gt;<i> wREfDnN+i02rLBmboPiP1h9kk59r6wd37Fzbk8Ltp+zpQVv150Uo9ivHEfbOyeCk
</I>&gt;<i> /enX/vaBhnyaIk3BGHkdrmI2FcRMVFV+fh/C+nLixyRfswTq1Xv/cmY9YrkSBtDM
</I>&gt;<i> yt39353FlJFNwcz3wV+xlfibCQeMvJ8vLAa0jVGALeb0KwKgXJ90WlL2AssaiTRC
</I>&gt;<i> G74KCXSnF0eqgj9Mjbh0SN/b9YrINAnjjOBiYAx8epMLD2Rl2VxXNFcWNUKRUiiV
</I>&gt;<i> 0mHOocOe4Q8Wrqh5WS2NUcN921FEoW5bwsKdbItAl0xQs0Ow9Cax8aVIKWDYQyo=
</I>&gt;<i> =FmF4
</I>&gt;<i> -----END PGP SIGNATURE-----
</I>&gt;<i>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160328/4b5c498e/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160328/4b5c498e/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009920.html">[squid-users] &quot;ACCESS DENIED&quot; page by ssl_bump terminate
</A></li>
	<LI>Next message (by thread): <A HREF="009923.html">[squid-users] &quot;ACCESS DENIED&quot; page by ssl_bump terminate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9921">[ date ]</a>
              <a href="thread.html#9921">[ thread ]</a>
              <a href="subject.html#9921">[ subject ]</a>
              <a href="author.html#9921">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
