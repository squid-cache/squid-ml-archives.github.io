<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Delay pool class 2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Delay%20pool%20class%202&In-Reply-To=%3C32d9730d-5a67-bf4e-58d9-f0dc331b6be7%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010398.html">
   <LINK REL="Next"  HREF="010403.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Delay pool class 2</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Delay%20pool%20class%202&In-Reply-To=%3C32d9730d-5a67-bf4e-58d9-f0dc331b6be7%40treenet.co.nz%3E"
       TITLE="[squid-users] Delay pool class 2">squid3 at treenet.co.nz
       </A><BR>
    <I>Mon May  2 11:57:59 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010398.html">[squid-users] Delay pool class 2
</A></li>
        <LI>Next message (by thread): <A HREF="010403.html">[squid-users] change between squid 3.1 and 3.3.8
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10400">[ date ]</a>
              <a href="thread.html#10400">[ thread ]</a>
              <a href="subject.html#10400">[ subject ]</a>
              <a href="author.html#10400">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2/05/2016 9:52 p.m., Magic Link wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> i want to use delay pool with class 2. I don't understand how
</I>&gt;<i> requests are handled on each bucket. There are 2 type of buckets in
</I>&gt;<i> class 2, one aggregate and 256 individuals buckets. When aggregate
</I>&gt;<i> bucket is used ? Is there a priority between each type ? I want to
</I>&gt;<i> limit bandwith for each IP so how do i configure the aggregate bucket
</I>&gt;<i> compared to individual buckets ?
</I>
When the aggregate bucket is enabled everything going through that delay
pool gets counted against it.

When the individual bucket is configured each client IP has a unique
bucket. Traffic sent by a server to a client gets counted against that
clients bucket.

Each byte going through the proxy gets counted in *both* buckets
relevant to the request. So at any one time a client is only able to use
up to the smaller of the two buckets available amounts.

Thats the theory at least, delay pools has some strange bugs which make
this not true for some things. If you can it is usually best to use the
OS provided QoS controls (maybe with TOS marking by Squid) instead of
Squid delay pools.

You can disable the aggregate bucket by configuring it as &quot;-1/-1&quot; or in
Squid-3.5+ the keyword &quot;none&quot; (meaning no limit for that bucket).

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010398.html">[squid-users] Delay pool class 2
</A></li>
	<LI>Next message (by thread): <A HREF="010403.html">[squid-users] change between squid 3.1 and 3.3.8
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10400">[ date ]</a>
              <a href="thread.html#10400">[ thread ]</a>
              <a href="subject.html#10400">[ subject ]</a>
              <a href="author.html#10400">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
