<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] change between squid 3.1 and 3.3.8
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20change%20between%20squid%203.1%20and%203.3.8&In-Reply-To=%3Cc908766a-b792-ed8e-a0e0-4aa3adb08a25%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010403.html">
   <LINK REL="Next"  HREF="010404.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] change between squid 3.1 and 3.3.8</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20change%20between%20squid%203.1%20and%203.3.8&In-Reply-To=%3Cc908766a-b792-ed8e-a0e0-4aa3adb08a25%40treenet.co.nz%3E"
       TITLE="[squid-users] change between squid 3.1 and 3.3.8">squid3 at treenet.co.nz
       </A><BR>
    <I>Mon May  2 15:07:50 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010403.html">[squid-users] change between squid 3.1 and 3.3.8
</A></li>
        <LI>Next message (by thread): <A HREF="010404.html">[squid-users] what it means by publishing ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10406">[ date ]</a>
              <a href="thread.html#10406">[ thread ]</a>
              <a href="subject.html#10406">[ subject ]</a>
              <a href="author.html#10406">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 3/05/2016 2:07 a.m., TRIFILETTI Frank (Adjoint au chef du DO Sud-Est
/ Chef du groupe expertise technique) - SG/SPSSI/CPII/DOSE/ET wrote:
&gt;<i> Hello Amos,
</I>&gt;<i> 
</I>&gt;<i> i have this error in my cache.log (no helper entry available)
</I>&gt;<i> 
</I>&gt;<i> 2016/05/02 14:35:37.732| external_acl.cc(793) aclMatchExternal:
</I>&gt;<i> acl=&quot;ldap_group&quot;
</I>&gt;<i> 2016/05/02 14:35:37.732| external_acl.cc(822) aclMatchExternal: No
</I>&gt;<i> helper entry available
</I>&gt;<i> 2016/05/02 14:35:37.732| external_acl.cc(826) aclMatchExternal:
</I>&gt;<i> ldap_group check user authenticated.
</I>&gt;<i> 2016/05/02 14:35:37.732| external_acl.cc(832) aclMatchExternal:
</I>&gt;<i> ldap_group user is authenticated.
</I>&gt;<i> 2
</I>&gt;<i> 
</I>
That is the external ACL detecting that it has the username required by
%LOGIN macro, but still needs to do a lookup for the helpe response
somewhere.
The next thing it would do is a helper cache lookup to see if it already
knows the response that would come back.
 Only if that cache check produces nothing, or stale entry would it
DUNNO. Otherwise it would tell you what it found and match.

&gt;<i> 
</I>&gt;<i> and i read you link
</I>&gt;<i> &lt;<A HREF="http://wiki.squid-cache.org/SquidFaq/SquidAcl#Fast_and_Slow_ACLs">http://wiki.squid-cache.org/SquidFaq/SquidAcl#Fast_and_Slow_ACLs</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> in my squid.conf i use a slow ACLs (external)
</I>&gt;<i> with one SLOW access clauses (http_access) and another one which is FAST
</I>&gt;<i> access clauses (cache_peer_access)
</I>&gt;<i> 
</I>&gt;<i> but i made another test with the same squid.conf with squid 3.1.20 on an
</I>&gt;<i> Ubuntu 12.04.5 LTS it works (no DUNNO error in cache.log)
</I>
FYI: DUNNO used to be logged as &quot;-1&quot; in 3.1.

&gt;<i> 
</I>&gt;<i> but it doesn't with squid 3.3.8 on an Ubuntu 14.04.4 LTS
</I>&gt;<i>
</I>
It is a matter of timing and caching of the helper response. The trick
with using http_access as well as cache_peer_access is to get the helper
lookup done and the response into the helper cache, so that the FAST
lookup can find it there without needing to do a slow lookup.

But that relies heavily on the entry still being cached when
cache_peer_access needs it. Sometimes it will not be.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010403.html">[squid-users] change between squid 3.1 and 3.3.8
</A></li>
	<LI>Next message (by thread): <A HREF="010404.html">[squid-users] what it means by publishing ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10406">[ date ]</a>
              <a href="thread.html#10406">[ thread ]</a>
              <a href="subject.html#10406">[ subject ]</a>
              <a href="author.html#10406">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
