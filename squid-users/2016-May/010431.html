<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Is there a way to allow connection according to user certificate?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Is%20there%20a%20way%20to%20allow%20connection%20according%20to%0A%20user%20certificate%3F&In-Reply-To=%3C8dd15635-c3a0-377d-692a-cddd8b739fae%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010430.html">
   <LINK REL="Next"  HREF="010432.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Is there a way to allow connection according to user certificate?</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Is%20there%20a%20way%20to%20allow%20connection%20according%20to%0A%20user%20certificate%3F&In-Reply-To=%3C8dd15635-c3a0-377d-692a-cddd8b739fae%40treenet.co.nz%3E"
       TITLE="[squid-users] Is there a way to allow connection according to user certificate?">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu May  5 13:19:03 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010430.html">[squid-users] Is there a way to allow connection according to user certificate?
</A></li>
        <LI>Next message (by thread): <A HREF="010432.html">[squid-users] Is there a way to allow connection according to user certificate?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10431">[ date ]</a>
              <a href="thread.html#10431">[ thread ]</a>
              <a href="subject.html#10431">[ subject ]</a>
              <a href="author.html#10431">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 6/05/2016 1:06 a.m., Ser de Bronce wrote:
&gt;<i> Dear Amos and Yuri, thanks a lot for your answers.
</I>&gt;<i> 
</I>&gt;<i> Sorry for the mess, I'm novice here.
</I>&gt;<i> As it turned out my proxy is not transparent...
</I>&gt;<i> 
</I>&gt;<i> By &quot;some reasons&quot; I meant clients' experience reasons, let me explain.
</I>&gt;<i> 
</I>&gt;<i> I use explicit proxy and my clients connect to proxy using iPhone only.
</I>&gt;<i> I installed self-signed certificate on every iPhone and made login/pass
</I>&gt;<i> authentication.
</I>&gt;<i> It works perfect for wi-fi connection, because in this case iPhone gives a
</I>&gt;<i> possibility to specify proxy domain, port, login and password.
</I>&gt;<i> However to make them connect to proxy using mobile internet I had to
</I>&gt;<i> install APN profile on each iPhone. Inside APN profile I can specify domain
</I>&gt;<i> and port, but not login and pass (APN doesn't have such settings). So when
</I>&gt;<i> client opens browser using mobile internet he is asked for login/pass every
</I>&gt;<i> time. This situation is not appropriate for me so I can't use login/pass.
</I>&gt;<i> 
</I>&gt;<i> I'm thinking that maybe it's possible to replace login/pass authentication
</I>&gt;<i> with certificate authentication.
</I>&gt;<i> I want to authenticate users using a digital certificate they already have
</I>&gt;<i> on their iPhone.
</I>&gt;<i> 
</I>&gt;<i> I found some articles about certificate authentication for reverse proxy,
</I>&gt;<i> but can't find anything about explicit one.
</I>&gt;<i> Is it possible?
</I>
Squid can listen on an https_port for connections. The TLS settings to
challenge for client cert are the same for explicit proxy as you would
find for reverse-proxy.

What you will also find however is that browsers do not do TLS to
proxies, or if they do not without jumping through some other hoops
which are browser dependent.

IIRC;
* Chrome requires that it is started with certain command line options,
AND that a PAC file is used with <A HREF="https://">https://</A> URI for the proxy detail.

* Firefox requires that PAC file are used with <A HREF="https://">https://</A> URI for the
proxy detail AND limits the protocol spoken to those proxy to HTTP/2.

* Safari and IE - seem not to support TLS proxy at all yet AFAIK.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010430.html">[squid-users] Is there a way to allow connection according to user certificate?
</A></li>
	<LI>Next message (by thread): <A HREF="010432.html">[squid-users] Is there a way to allow connection according to user certificate?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10431">[ date ]</a>
              <a href="thread.html#10431">[ thread ]</a>
              <a href="subject.html#10431">[ subject ]</a>
              <a href="author.html#10431">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
