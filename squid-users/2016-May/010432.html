<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Is there a way to allow connection according to user certificate?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Is%20there%20a%20way%20to%20allow%20connection%20according%20to%0A%20user%20certificate%3F&In-Reply-To=%3C91ffd35a-ec6c-ff31-0d8e-432352f516eb%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010431.html">
   <LINK REL="Next"  HREF="010433.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Is there a way to allow connection according to user certificate?</H1>
    <B>Yuri Voinov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Is%20there%20a%20way%20to%20allow%20connection%20according%20to%0A%20user%20certificate%3F&In-Reply-To=%3C91ffd35a-ec6c-ff31-0d8e-432352f516eb%40gmail.com%3E"
       TITLE="[squid-users] Is there a way to allow connection according to user certificate?">yvoinov at gmail.com
       </A><BR>
    <I>Thu May  5 14:01:47 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010431.html">[squid-users] Is there a way to allow connection according to user certificate?
</A></li>
        <LI>Next message (by thread): <A HREF="010433.html">[squid-users] Is there a way to allow connection according to user certificate?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10432">[ date ]</a>
              <a href="thread.html#10432">[ thread ]</a>
              <a href="subject.html#10432">[ subject ]</a>
              <a href="author.html#10432">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256
 


05.05.16 19:19, Amos Jeffries &#1087;&#1080;&#1096;&#1077;&#1090;:
&gt;<i> On 6/05/2016 1:06 a.m., Ser de Bronce wrote:
</I>&gt;&gt;<i> Dear Amos and Yuri, thanks a lot for your answers.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Sorry for the mess, I'm novice here.
</I>&gt;&gt;<i> As it turned out my proxy is not transparent...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> By &quot;some reasons&quot; I meant clients' experience reasons, let me explain.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I use explicit proxy and my clients connect to proxy using iPhone only.
</I>&gt;&gt;<i> I installed self-signed certificate on every iPhone and made login/pass
</I>&gt;&gt;<i> authentication.
</I>&gt;&gt;<i> It works perfect for wi-fi connection, because in this case iPhone
</I>gives a
&gt;&gt;<i> possibility to specify proxy domain, port, login and password.
</I>&gt;&gt;<i> However to make them connect to proxy using mobile internet I had to
</I>&gt;&gt;<i> install APN profile on each iPhone. Inside APN profile I can specify
</I>domain
&gt;&gt;<i> and port, but not login and pass (APN doesn't have such settings). So
</I>when
&gt;&gt;<i> client opens browser using mobile internet he is asked for login/pass
</I>every
&gt;&gt;<i> time. This situation is not appropriate for me so I can't use login/pass.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm thinking that maybe it's possible to replace login/pass
</I>authentication
&gt;&gt;<i> with certificate authentication.
</I>&gt;&gt;<i> I want to authenticate users using a digital certificate they already
</I>have
&gt;&gt;<i> on their iPhone.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I found some articles about certificate authentication for reverse proxy,
</I>&gt;&gt;<i> but can't find anything about explicit one.
</I>&gt;&gt;<i> Is it possible?
</I>&gt;<i>
</I>&gt;<i> Squid can listen on an https_port for connections. The TLS settings to
</I>&gt;<i> challenge for client cert are the same for explicit proxy as you would
</I>&gt;<i> find for reverse-proxy.
</I>&gt;<i>
</I>&gt;<i> What you will also find however is that browsers do not do TLS to
</I>&gt;<i> proxies, or if they do not without jumping through some other hoops
</I>&gt;<i> which are browser dependent.
</I>&gt;<i>
</I>&gt;<i> IIRC;
</I>&gt;<i> * Chrome requires that it is started with certain command line options,
</I>&gt;<i> AND that a PAC file is used with <A HREF="https://">https://</A> URI for the proxy detail.
</I>&gt;<i>
</I>&gt;<i> * Firefox requires that PAC file are used with <A HREF="https://">https://</A> URI for the
</I>&gt;<i> proxy detail AND limits the protocol spoken to those proxy to HTTP/2.
</I>In my personal opinion, that everywhere for the crazy idea to push HTTPS
- and where it is necessary and where it is not necessary. If a hammer -
everything looks like a nail.
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> * Safari and IE - seem not to support TLS proxy at all yet AFAIK.
</I>&gt;<i>
</I>&gt;<i> Amos
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2
 
iQEcBAEBCAAGBQJXK1JLAAoJENNXIZxhPexGW/MIAM0aKjIOY4/3o8iYisQIQQjX
e10w0d7ygLbX4cHabzURwcR5J1qaoPE1VnK5tugybsEBUYLdj4EMRQ/FEqUIhC/+
aWodGOWneZ8QEFh7U+56g+fZLzUolbtJidjl/9JwmB8iWKSNgffLEgrTG3GIh4Jt
o7AfkqNejKqyaSio0iY1QygqI+LKBUVTpPdQIQ4950Ulql+rN55k7mktia04ZC35
bxM3p060aE5SG6YmEqjxOi1mAceMW1SmAESMKAN/GzuRc3CK4TUzqlXcxfScLEwQ
Il6HH0r+ovh19cj5dBZIVAS3cVgK1zvdsVREoZ4HUJIS/0n3dDUgbnP3hpXvGtI=
=2GpD
-----END PGP SIGNATURE-----

-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0x613DEC46.asc
Type: application/pgp-keys
Size: 2437 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160505/5308d8c0/attachment.key">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160505/5308d8c0/attachment.key</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010431.html">[squid-users] Is there a way to allow connection according to user certificate?
</A></li>
	<LI>Next message (by thread): <A HREF="010433.html">[squid-users] Is there a way to allow connection according to user certificate?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10432">[ date ]</a>
              <a href="thread.html#10432">[ thread ]</a>
              <a href="subject.html#10432">[ subject ]</a>
              <a href="author.html#10432">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
