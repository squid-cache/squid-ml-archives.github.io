<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Is there a way to allow connection according to user certificate?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Is%20there%20a%20way%20to%20allow%20connection%20according%20to%0A%20user%20certificate%3F&In-Reply-To=%3Ca6e9da06-c59c-b9ac-c3bf-908185c9d1ff%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010434.html">
   <LINK REL="Next"  HREF="010421.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Is there a way to allow connection according to user certificate?</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Is%20there%20a%20way%20to%20allow%20connection%20according%20to%0A%20user%20certificate%3F&In-Reply-To=%3Ca6e9da06-c59c-b9ac-c3bf-908185c9d1ff%40treenet.co.nz%3E"
       TITLE="[squid-users] Is there a way to allow connection according to user certificate?">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri May  6 05:02:41 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010434.html">[squid-users] Is there a way to allow connection according to user certificate?
</A></li>
        <LI>Next message (by thread): <A HREF="010421.html">[squid-users] quick_abort_min by acl?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10436">[ date ]</a>
              <a href="thread.html#10436">[ thread ]</a>
              <a href="subject.html#10436">[ subject ]</a>
              <a href="author.html#10436">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 6/05/2016 4:07 a.m., Ser de Bronce wrote:
&gt;<i> Yuri,
</I>&gt;<i> 
</I>&gt;&gt;<i> But this is the default behaviour for proxy with auth
</I>&gt;<i> 
</I>&gt;<i> I didn't know that.
</I>&gt;<i> Initially I tested on iPhone using wi-fi connection and as I said earlier
</I>&gt;<i> there are wi-fi proxy settings on iPhone so user should type them only once
</I>&gt;<i> and then each browser and app works without asking login/pass.
</I>
Well, Yuri is only half-right there. It is and it isn't.

The browser initial request may or not have credentials (secure clients
do not send any up front, insecure clients do). If it doesn't the proxy
responds with a 407 requesting them.

The browser then is expected to find some. How is left up to the browser
- but the expectation is that it will try the APN assigned credentials
and/or its own credentials store *before* bothering the user with a popup.



&gt;<i> 
</I>&gt;&gt;<i> I still do not understand the purpose for which authentication is
</I>&gt;<i> required?
</I>&gt;<i> 
</I>&gt;<i> This proxy will be available from anywhere, but I need to prevent usage of
</I>&gt;<i> this proxy by anyone, except my clients. This is the main purpose.
</I>&gt;<i> I had a plan to give login and password to each client, but as I said
</I>&gt;<i> earlier this is not possible because of user experience reasons.
</I>

That is a device/browser bug. The above described sequence should be
happening, but apparently isn't. Since it is the browser part of the
auth which is falling down there is very little Squid can do.
 The few things Squid can do require all this happening over a LAN
environment and do not work across WAN / Internet connections.

Sounds like you are stuck between a rock and a hard place. I'm a bit
puzzled about how you expect APN settings to be pushed to devices
connected via another service provider across the Internet.


&gt;<i> Also I can't rely on MAC, IP or other indirect attributes.
</I>&gt;<i> 
</I>&gt;<i> So I try to find other ways to check if user who is connecting to proxy is
</I>&gt;<i> my client or not.
</I>&gt;<i> Right now I see only two ways here:
</I>&gt;<i> 1) authentication by proxy server using certificates
</I>&gt;<i> 2) authentication by some other server which accept certificates and then
</I>&gt;<i> redirecting connections to proxy.
</I>&gt;<i> 
</I>&gt;<i> As I said I'm novice and didn't use proxy earlier. Maybe you know better
</I>&gt;<i> solution.
</I>
No, those are your choices.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010434.html">[squid-users] Is there a way to allow connection according to user certificate?
</A></li>
	<LI>Next message (by thread): <A HREF="010421.html">[squid-users] quick_abort_min by acl?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10436">[ date ]</a>
              <a href="thread.html#10436">[ thread ]</a>
              <a href="subject.html#10436">[ subject ]</a>
              <a href="author.html#10436">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
