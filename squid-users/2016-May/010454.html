<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] youtube videos take 60 seconds to start
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20youtube%20videos%20take%2060%20seconds%20to%20start&In-Reply-To=%3CCAPSJP%2BJhDVUiNHtoH0MCOT8PstPgGj8B%3Ds%2BeMcWETw6ntgnbCg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010453.html">
   <LINK REL="Next"  HREF="010455.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] youtube videos take 60 seconds to start</H1>
    <B>mabraFoo</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20youtube%20videos%20take%2060%20seconds%20to%20start&In-Reply-To=%3CCAPSJP%2BJhDVUiNHtoH0MCOT8PstPgGj8B%3Ds%2BeMcWETw6ntgnbCg%40mail.gmail.com%3E"
       TITLE="[squid-users] youtube videos take 60 seconds to start">bryan.mabra at gmail.com
       </A><BR>
    <I>Sat May  7 15:06:22 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010453.html">[squid-users] load balancer as squid
</A></li>
        <LI>Next message (by thread): <A HREF="010455.html">[squid-users] youtube videos take 60 seconds to start
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10454">[ date ]</a>
              <a href="thread.html#10454">[ thread ]</a>
              <a href="subject.html#10454">[ subject ]</a>
              <a href="author.html#10454">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I started working with squid a few months back.  First of all, if you are a
squid developer.  THANK YOU for this awesome software.

I am using ssl_bump in transparent mode.  When I use my ipad with safari
and go to youtube there is a 60+ second delay before the video starts.  My
guess is that squid is downloading the entire video and is not sending
until the entire download is complete.  Does anyone know if there is
something I could change in my config to get the video to start without
that delay?

If you see anything off in my config, please explain.

Squid Cache: Version 3.5.17
Service Name: squid
configure options:  '--build=x86_64-redhat-linux-gnu'
'--host=x86_64-redhat-linux-gnu' '--program-prefix=' '--prefix=/usr'
'--exec-prefix=/usr' '--bindir=/usr/bin' '--sbindir=/usr/sbin'
'--sysconfdir=/etc' '--datadir=/usr/share' '--includedir=/usr/include'
'--libdir=/usr/lib64' '--libexecdir=/usr/libexec'
'--sharedstatedir=/var/lib' '--mandir=/usr/share/man'
'--infodir=/usr/share/info' '--verbose' '--exec_prefix=/usr'
'--libexecdir=/usr/lib64/squid' '--localstatedir=/var'
'--datadir=/usr/share/squid' '--sysconfdir=/etc/squid'
'--with-logdir=$(localstatedir)/log/squid'
'--with-pidfile=$(localstatedir)/run/squid.pid'
'--disable-dependency-tracking' '--enable-follow-x-forwarded-for'
'--enable-auth'
'--enable-auth-basic=DB,LDAP,NCSA,NIS,PAM,POP3,RADIUS,SASL,SMB,getpwnam,fake'
'--enable-auth-ntlm=smb_lm,fake'
'--enable-auth-digest=file,LDAP,eDirectory'
'--enable-auth-negotiate=kerberos,wrapper'
'--enable-external-acl-helpers=wbinfo_group,kerberos_ldap_group,LDAP_group,delayer,file_userip,SQL_session,unix_group,session,time_quota'
'--enable-cache-digests' '--enable-cachemgr-hostname=localhost'
'--enable-delay-pools' '--enable-epoll' '--enable-icap-client'
'--enable-ident-lookups' '--enable-linux-netfilter'
'--enable-removal-policies=heap,lru' '--enable-snmp'
'--enable-storeio=aufs,diskd,ufs,rock' '--enable-wccpv2' '--enable-esi'
'--enable-ssl-crtd' '--enable-icmp' '--with-aio'
'--with-default-user=squid' '--with-filedescriptors=16384' '--with-dl'
'--with-openssl' '--with-pthreads' '--with-included-ltdl'
'--disable-arch-native' '--enable-ecap' '--without-nettle'
'build_alias=x86_64-redhat-linux-gnu' 'host_alias=x86_64-redhat-linux-gnu'
'CFLAGS=-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions
-fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches
-m64 -mtune=generic' 'LDFLAGS=-Wl,-z,relro ' 'CXXFLAGS=-O2 -g -pipe -Wall
-Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong
--param=ssp-buffer-size=4 -grecord-gcc-switches   -m64 -mtune=generic
-fPIC' 'PKG_CONFIG_PATH=:/usr/lib64/pkgconfig:/usr/share/pkgconfig'
--enable-ltdl-convenience



acl CONNECT method CONNECT
acl localnet src 10.0.0.0/8     # RFC1918 possible internal network
acl localnet src 172.16.0.0/12  # RFC1918 possible internal network
acl localnet src 192.168.0.0/16 # RFC1918 possible internal network
acl localnet src fc00::/7       # RFC 4193 local private network range
acl localnet src fe80::/10      # RFC 4291 link-local (directly plugged)
machines
acl Safe_ports port 1025-65535  # unregistered ports
acl Safe_ports port 210         # wais
acl Safe_ports port 21          # ftp
acl Safe_ports port 280         # http-mgmt
acl Safe_ports port 443         # https
acl Safe_ports port 488         # gss-http
acl Safe_ports port 591         # filemaker
acl Safe_ports port 70          # gopher
acl Safe_ports port 777         # multiling http
acl Safe_ports port 80          # http
acl SSL_ports port 443

coredump_dir /var/spool/squid
strip_query_terms off

forward_max_tries 25
http_access allow all
http_access deny CONNECT !SSL_ports
http_access deny !Safe_ports

http_port  3126 intercept
http_port  3128 ssl-bump generate-host-certificates=on
dynamic_cert_mem_cache_size=4MB cert=/etc/squid/sslcert/myca.pem
https_port 3127 intercept ssl-bump generate-host-certificates=on
dynamic_cert_mem_cache_size=4MB cert=/etc/squid/sslcert/myca.pem
key=/etc/squid/sslcert/myca.pem

refresh_pattern .               0       20%     4320
refresh_pattern ^ftp:           1440    20%     10080
refresh_pattern ^gopher:        1440    0%      1440
refresh_pattern -i (/cgi-bin/|\?) 0     0%      0
shutdown_lifetime 3 seconds

acl step1 at_step SslBump1
acl step2 at_step SslBump2
acl nobumpSites ssl::server_name .netflix.com

ssl_bump peek step1 all
ssl_bump splice step2 nobumpSites
ssl_bump bump


sslcrtd_children 8 startup=1 idle=1
sslcrtd_program /usr/lib64/squid/ssl_crtd -s /var/spool/squid_ssldb -M 4MB
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160507/d5784f44/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160507/d5784f44/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010453.html">[squid-users] load balancer as squid
</A></li>
	<LI>Next message (by thread): <A HREF="010455.html">[squid-users] youtube videos take 60 seconds to start
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10454">[ date ]</a>
              <a href="thread.html#10454">[ thread ]</a>
              <a href="subject.html#10454">[ subject ]</a>
              <a href="author.html#10454">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
