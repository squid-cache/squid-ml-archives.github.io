<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Understand GOOGLEVIDEO Url from access.log
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Understand%20GOOGLEVIDEO%20Url%20from%20access.log&In-Reply-To=%3Cf9900d48-ae1c-d107-60b7-c1d2578c9287%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010512.html">
   <LINK REL="Next"  HREF="010501.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Understand GOOGLEVIDEO Url from access.log</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Understand%20GOOGLEVIDEO%20Url%20from%20access.log&In-Reply-To=%3Cf9900d48-ae1c-d107-60b7-c1d2578c9287%40treenet.co.nz%3E"
       TITLE="[squid-users] Understand GOOGLEVIDEO Url from access.log">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue May 10 09:52:32 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010512.html">[squid-users] Understand GOOGLEVIDEO Url from access.log
</A></li>
        <LI>Next message (by thread): <A HREF="010501.html">[squid-users] Understand GOOGLEVIDEO Url from access.log
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10500">[ date ]</a>
              <a href="thread.html#10500">[ thread ]</a>
              <a href="subject.html#10500">[ subject ]</a>
              <a href="author.html#10500">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/05/2016 8:31 p.m., alesironi wrote:
&gt;<i> Hello everyone
</I>&gt;<i> 
</I>&gt;<i> sorry if it's a stupid question but I'm a newbie of SQUID and PROXIES as
</I>&gt;<i> well.
</I>
Well, firstly. Please dont shout :-P

Seriously though; Some of the words you are upper-casing are trademarks
or technical terms and the case used is relevant to what you are
speaking about.
(not picking on you specifically, others on the list have been getting
very sloppy too recently - this message is a perfect example of the
problem).

 SQUID and Squid are different things. Both used in networking. But
thankfully SQUID is a layer-1 device not commonly spoken about around
here so not much confusion.

However; proxy and PROXY are also two different things. For extra
difficulty both relate to things about Squid. PROXY (all upper case and
no pluralisation) being one of the protocols that Squid can use nowdays.

&gt;<i> 
</I>&gt;<i> I have SQUID installed on UBUNTU, working fine, only authorized users can
</I>&gt;<i> use the proxy.
</I>
Squid, Ubuntu, YouTube and GoogleVideo are trademarks with specific
spelling when used outside of URLs.

/rant

&gt;<i> 
</I>&gt;<i> Some users are watching youtube videos (I can see from the log files); our
</I>&gt;<i> rules are pretty simple and basic, youtube videos are allowed but only if
</I>&gt;<i> they are for working related purposes.
</I>&gt;<i> IN order to understand that I need to check from access.log which kind of
</I>&gt;<i> video they watch (we do this randomly, not for every video, for obvious
</I>&gt;<i> reasons).
</I>&gt;<i> 
</I>&gt;<i> The problem is that on Squid log file (ACCESS.LOG) the URL I see is similar
</I>&gt;<i> to this:
</I>&gt;<i> 
</I>&gt;<i> r10---sn-4g57knd7.googlevideo.com:443
</I>&gt;<i> 
</I>&gt;<i> ...which is not telling me anything about the content of the youtube video
</I>&gt;<i> (it does not work at all...).
</I>&gt;<i> 
</I>
The best explanation for the URI (not URL) if you really want to know
why it looks like that (and why its not a URL) is in
&lt;<A HREF="http://tools.ietf.org/html/rfc7230#section-5.3">http://tools.ietf.org/html/rfc7230#section-5.3</A>&gt;.


The &quot;:443&quot; part means port 443 ... TLS encrypted traffic. That is all.

To misquote The Matrix &quot;there is no video&quot;. What your Squid is being
asked to proxy is a two-way opaque stream of TLS encrypted data to/from
that named server:port.

The encrypted data on port 443 is supposed to contain a whole different
layer of HTTP messages commonly referred to as HTTPS, and having
<A HREF="https://">https://</A> URLs. There may be one or more messages, there may (or not) be
a video stream as one of those messages.

So to be accurate; the stream may contain a video, but it also may not
and even when it does there is more than the video happening in there.


&gt;<i> Do you have any suggestion on how to understand the content of the video
</I>&gt;<i> starting from that URL? Or any suggestion on how to achieve my goal?
</I>
What do you mean by &quot;kind&quot;? Your description implies that you mean the
actual visual content of it. You will not be able to see that without
downloading and viewing it yourself.

The most you will ever be able to see from HTTP layer logs was that it
was a video and the URL that it was stored at. Which is usually just a
random unique character sequence for an ID. To even get that much
information you will have to intercept and decrypt the users traffic.

Please check with your companies legal department about whether you can
do that encryption legally. There are some countries where doing so on
any network is completely prohibited or requires a government license.
Other places that policy you mention might be enough so long as your
users have signed agreement to it.

Once you know the legal situation look into
&lt;<A HREF="http://wiki.squid-cache.org/Features/SslPeekAndSplice">http://wiki.squid-cache.org/Features/SslPeekAndSplice</A>&gt;. You will also
need to be using the latest Squid packages (3.5.19 or 4.0.10 today) and
regularly updating. TLS interception is an arms race situation that is
constantly changing both the security encryption and the attack methods
to break into it.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010512.html">[squid-users] Understand GOOGLEVIDEO Url from access.log
</A></li>
	<LI>Next message (by thread): <A HREF="010501.html">[squid-users] Understand GOOGLEVIDEO Url from access.log
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10500">[ date ]</a>
              <a href="thread.html#10500">[ thread ]</a>
              <a href="subject.html#10500">[ subject ]</a>
              <a href="author.html#10500">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
