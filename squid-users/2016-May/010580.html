<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid-users Digest, Vol 21, Issue 54
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid-users%20Digest%2C%20Vol%2021%2C%20Issue%2054&In-Reply-To=%3COF9B951B84.6929A4FD-ON80257FB1.005C1CE1-80257FB1.005C5699%40tcs.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010585.html">
   <LINK REL="Next"  HREF="010581.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid-users Digest, Vol 21, Issue 54</H1>
    <B>Nilesh Gavali</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid-users%20Digest%2C%20Vol%2021%2C%20Issue%2054&In-Reply-To=%3COF9B951B84.6929A4FD-ON80257FB1.005C1CE1-80257FB1.005C5699%40tcs.com%3E"
       TITLE="[squid-users] squid-users Digest, Vol 21, Issue 54">nilesh.gavali at tcs.com
       </A><BR>
    <I>Thu May 12 17:15:44 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010585.html">[squid-users] Windows Squid with AD authentication
</A></li>
        <LI>Next message (by thread): <A HREF="010581.html">[squid-users] squid-users Digest, Vol 21, Issue 54
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10580">[ date ]</a>
              <a href="thread.html#10580">[ thread ]</a>
              <a href="subject.html#10580">[ subject ]</a>
              <a href="author.html#10580">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Antony;
we have Squid 3.5 on Windows 2012 R2 OS &amp; for which I need to integrate 
squid with AD. I search online but all of the link are based on linux 
platform squid.
I am looking for squid running on Windows Platform which need to integrate 
with AD authentication.

Thanks &amp; Regards
Nilesh Suresh Gavali



From:   <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-request at lists.squid-cache.org</A>
To:     <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Date:   12/05/2016 17:33
Subject:        squid-users Digest, Vol 21, Issue 54
Sent by:        &quot;squid-users&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt;



Send squid-users mailing list submissions to
                 <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>

To subscribe or unsubscribe via the World Wide Web, visit
                 <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
or, via email, send a message with subject or body 'help' to
                 <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-request at lists.squid-cache.org</A>

You can reach the person managing the list at
                 <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-owner at lists.squid-cache.org</A>

When replying, please edit your Subject line so it is more specific
than &quot;Re: Contents of squid-users digest...&quot;


Today's Topics:

   1. Re: Problems configuring Squid with C-ICAP+Squidclamav
      (SOLVED) (Amos Jeffries)
   2. Re: Linking with *SSL (Spil Oss)
   3. Re: Getting the full file content on a range request, but not
      on EVERY get ... (Hans-Peter Jansen)
   4. Windows Squid with AD authentication (Nilesh Gavali)
   5. Re: Getting the full file content on a range request, but not
      on EVERY get ... (Heiler Bemerguy)
   6. Re: Windows Squid with AD authentication (Antony Stone)


----------------------------------------------------------------------

Message: 1
Date: Fri, 13 May 2016 00:00:05 +1200
From: Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Problems configuring Squid with
                 C-ICAP+Squidclamav (SOLVED)
Message-ID: &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">dc535419-e24f-b6ee-00ac-45970ec67304 at treenet.co.nz</A>&gt;
Content-Type: text/plain; charset=utf-8

On 12/05/2016 11:13 p.m., C. L. Martinez wrote:
&gt;<i> 
</I>&gt;<i> But when squid sents an OPTIONS request to ICAP, why works when I use 
</I>127.0.0.1 and not localhost?? Maybe it is a problem with openbsd's package 
...
&gt;<i> 
</I>
It is quite possible. 127.0.0.1 is not the only address modern computers
use for localhost. Double check what your hosts file contains.

Amos



------------------------------

Message: 2
Date: Thu, 12 May 2016 15:33:30 +0200
From: Spil Oss &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">spil.oss at gmail.com</A>&gt;
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>, <A HREF="https://lists.squid-cache.org/listinfo/squid-users">timp87 at gmail.com</A>
Subject: Re: [squid-users] Linking with *SSL
Message-ID:
 &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">CAEJyAvM8O6uVCgSipvzXAK1OsUrH3izc7BVTgaS0kPkWmAn3BQ at mail.gmail.com</A>&gt;
Content-Type: text/plain; charset=UTF-8

&gt;<i> Hi!
</I>&gt;<i> When we worked on squid port on FreeBSD one of the FreeBSD user
</I>&gt;<i> (Bernard Spil) noticed:
</I>&gt;<i>
</I>&gt;<i> When working on this, I ran into another issue. Perhaps maintainer can
</I>&gt;<i> fix that with upstream. I've now added LIBOPENSSL_LIBS=&quot;-lcrypto
</I>&gt;<i> -lssl&quot; because of configure failing in configure.ac line 1348.
</I>&gt;<i>
</I>&gt;<i> &gt; AC_CHECK_LIB(ssl,[SSL_library_init],[LIBOPENSSL_LIBS=&quot;-lssl 
</I>$LIBOPENSSL_LIBS&quot;],[AC_MSG_ERROR([library 'ssl' is required for OpenSSL])
&gt;<i>
</I>&gt;<i> You cannot link against libssl when not linking libcrypto as well
</I>&gt;<i> leading to an error with LibreSSL. This check should add -lcrypto in
</I>&gt;<i> addition to -lssl to pass.
</I>&gt;<i>
</I>&gt;<i> Is this something someone could take a look at?
</I>
Hi All,

Sorry for replying out-of-thread.

What happens is that the check for SSL_library_init fails as -lcrypto
is missing.

Output from configure

&gt;<i> checking for CRYPTO_new_ex_data in -lcrypto... yes
</I>&gt;<i> checking for SSL_library_init in -lssl... no
</I>&gt;<i> configure: error: library 'ssl' is required for OpenSSL
</I>&gt;<i> ===&gt;  Script &quot;configure&quot; failed unexpectedly.
</I>
What I usually see in autoconf scripts is that temp CFLAGS etc are set
before the test for SSL libs and reversed after the test.

Adding LIBOPENSSL_LIBS=&quot;-lcrypto -lssl&quot; to configure works as well

Would be great if you can fix this!

Thanks,

Bernard Spil.
<A HREF="https://wiki.freebsd.org/BernardSpil">https://wiki.freebsd.org/BernardSpil</A>
<A HREF="https://wiki.freebsd.org/LibreSSL">https://wiki.freebsd.org/LibreSSL</A>
<A HREF="https://wiki.freebsd.org/OpenSSL">https://wiki.freebsd.org/OpenSSL</A>


------------------------------

Message: 3
Date: Thu, 12 May 2016 16:06:40 +0200
From: Hans-Peter Jansen &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">hpj at urpla.net</A>&gt;
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Getting the full file content on a range
                 request,                but not on EVERY get ...
Message-ID: &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">2575073.4c7f0552JP at xrated</A>&gt;
Content-Type: text/plain; charset=&quot;us-ascii&quot;

On Mittwoch, 11. Mai 2016 21:37:17 Heiler Bemerguy wrote:
&gt;<i> Hey guys,
</I>&gt;<i> 
</I>&gt;<i> First take a look at the log:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">root at proxy</A>:/var/log/squid# tail -f access.log |grep
</I>&gt;<i> 
</I><A HREF="http://download.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-">http://download.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-</A>
&gt;<i> BR/firefox-45.0.1.complete.mar 1463011781.572   8776 10.1.3.236 
</I>TCP_MISS/206
&gt;<i> 300520 GET
</I>[...] 
&gt;<i> Now think: An user is just doing a segmented/ranged download, right?
</I>&gt;<i> Squid won't cache the file because it is a range-download, not a full
</I>&gt;<i> file download.
</I>&gt;<i> But I WANT squid to cache it. So I decide to use &quot;range_offset_limit
</I>&gt;<i> -1&quot;, but then on every GET squid will re-download the file from the
</I>&gt;<i> beginning, opening LOTs of simultaneous connections and using too much
</I>&gt;<i> bandwidth, doing just the OPPOSITE it's meant to!
</I>&gt;<i> 
</I>&gt;<i> Is there a smart way to allow squid to download it from the beginning to
</I>&gt;<i> the end (to actually cache it), but only on the FIRST request/get? Even
</I>&gt;<i> if it makes the user wait for the full download, or cancel it
</I>&gt;<i> temporarily, or.. whatever!! Anything!!
</I>
Well, this is exactly, what my squid_dedup helper was created for!

See my announcement: 

                 Subject: [squid-users] New StoreID helper: squid_dedup
                 Date: Mon, 09 May 2016 23:56:45 +0200

My openSUSE environment is fetching _all_ updates with byte-ranges from 
many 
servers. Therefor, I created squid_dedup.

Your specific config could look like this:

/etc/squid/dedup/mozilla.conf:
[mozilla]
match: http\:\/\/download\.cdn\.mozilla\.net/(.*)
replace: <A HREF="http://download.cdn.mozilla.net.%(intdomain">http://download.cdn.mozilla.net.%(intdomain</A>)s/\1
fetch: true

The fetch parameter is unique among the other StoreID helper (AFAIK): it 
is 
fetching the object after a certain delay with a pool of fetcher threads.

The idea is: after the first access for an object, wait a bit (global 
setting, 
default: 15 secs), and then fetch the whole thing once. It won't solve 
anything for the first client, but for all subsequent accesses. 

The fetcher avoids fetching anything more than once by checking the http 
headers.

This is a pretty new project, but be assured, that the basic functions are 

working fine, and I will do my best to solve any upcoming issues. It is 
implemented with Python3 and prepared for supporting additional features 
easily, while keeping a good part of an eye on efficiency.

Let me know, if you're going to try it.

Pete


------------------------------

Message: 4
Date: Thu, 12 May 2016 17:46:36 +0100
From: Nilesh Gavali &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">nilesh.gavali at tcs.com</A>&gt;
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: [squid-users] Windows Squid with AD authentication
Message-ID:
 &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">OFC3392A46.462F0184-ON80257FB1.00598D57-80257FB1.0059AB8F at tcs.com</A>&gt;
Content-Type: text/plain; charset=&quot;utf-8&quot;

Team;
we have squid running on Windows and need to integrate it with Windows AD 
.can anyone help me with steps to be perform to get this done.

Thanks &amp; Regards
Nilesh Suresh Gavali
=====-----=====-----=====
Notice: The information contained in this e-mail
message and/or attachments to it may contain 
confidential or privileged information. If you are 
not the intended recipient, any dissemination, use, 
review, distribution, printing or copying of the 
information contained in this e-mail message 
and/or attachments to it are strictly prohibited. If 
you have received this communication in error, 
please notify us by reply e-mail or telephone and 
immediately and permanently delete the message 
and any attachments. Thank you


-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;
<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160512/327a38cb/attachment-0001.html">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160512/327a38cb/attachment-0001.html</A>
&gt;<i>
</I>
------------------------------

Message: 5
Date: Thu, 12 May 2016 13:28:00 -0300
From: Heiler Bemerguy &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">heiler.bemerguy at cinbesa.com.br</A>&gt;
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Getting the full file content on a range
                 request, but not on EVERY get ...
Message-ID: &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">61bf3ff3-c8b2-647f-9b5e-3112b2f43d6c at cinbesa.com.br</A>&gt;
Content-Type: text/plain; charset=&quot;utf-8&quot;; Format=&quot;flowed&quot;


Hi Pete, thanks for replying... let me see if I got it right..

Will I need to specify every url/domain I want it to act on ? I want 
squid to do it for every range-request downloads that should/would be 
cached (based on other rules, pattern_refreshs etc)

It doesn't need to delay any downloads as long as it isn't a dupe of 
what's already being downloaded.....


Best Regards,


-- 
Heiler Bemerguy - (91) 98151-4894
Assessor T&#233;cnico - CINBESA (91) 3184-1751


Em 12/05/2016 11:06, Hans-Peter Jansen escreveu:
&gt;<i> On Mittwoch, 11. Mai 2016 21:37:17 Heiler Bemerguy wrote:
</I>&gt;&gt;<i> Hey guys,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> First take a look at the log:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">root at proxy</A>:/var/log/squid# tail -f access.log |grep
</I>&gt;&gt;<i> 
</I><A HREF="http://download.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-">http://download.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-</A>
&gt;<i> BR/firefox-45.0.1.complete.mar 1463011781.572   8776 10.1.3.236 
</I>TCP_MISS/206
&gt;&gt;<i> 300520 GET
</I>&gt;<i> [...]
</I>&gt;&gt;<i> Now think: An user is just doing a segmented/ranged download, right?
</I>&gt;&gt;<i> Squid won't cache the file because it is a range-download, not a full
</I>&gt;&gt;<i> file download.
</I>&gt;&gt;<i> But I WANT squid to cache it. So I decide to use &quot;range_offset_limit
</I>&gt;&gt;<i> -1&quot;, but then on every GET squid will re-download the file from the
</I>&gt;&gt;<i> beginning, opening LOTs of simultaneous connections and using too much
</I>&gt;&gt;<i> bandwidth, doing just the OPPOSITE it's meant to!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Is there a smart way to allow squid to download it from the beginning 
</I>to
&gt;&gt;<i> the end (to actually cache it), but only on the FIRST request/get? Even
</I>&gt;&gt;<i> if it makes the user wait for the full download, or cancel it
</I>&gt;&gt;<i> temporarily, or.. whatever!! Anything!!
</I>&gt;<i> Well, this is exactly, what my squid_dedup helper was created for!
</I>&gt;<i>
</I>&gt;<i> See my announcement:
</I>&gt;<i>
</I>&gt;<i>                Subject: [squid-users] New StoreID helper: squid_dedup
</I>&gt;<i>                Date: Mon, 09 May 2016 23:56:45 +0200
</I>&gt;<i>
</I>&gt;<i> My openSUSE environment is fetching _all_ updates with byte-ranges from 
</I>many
&gt;<i> servers. Therefor, I created squid_dedup.
</I>&gt;<i>
</I>&gt;<i> Your specific config could look like this:
</I>&gt;<i>
</I>&gt;<i> /etc/squid/dedup/mozilla.conf:
</I>&gt;<i> [mozilla]
</I>&gt;<i> match: http\:\/\/download\.cdn\.mozilla\.net/(.*)
</I>&gt;<i> replace: <A HREF="http://download.cdn.mozilla.net.%(intdomain">http://download.cdn.mozilla.net.%(intdomain</A>)s/\1
</I>&gt;<i> fetch: true
</I>&gt;<i>
</I>&gt;<i> The fetch parameter is unique among the other StoreID helper (AFAIK): it 
</I>is
&gt;<i> fetching the object after a certain delay with a pool of fetcher 
</I>threads.
&gt;<i>
</I>&gt;<i> The idea is: after the first access for an object, wait a bit (global 
</I>setting,
&gt;<i> default: 15 secs), and then fetch the whole thing once. It won't solve
</I>&gt;<i> anything for the first client, but for all subsequent accesses.
</I>&gt;<i>
</I>&gt;<i> The fetcher avoids fetching anything more than once by checking the http
</I>&gt;<i> headers.
</I>&gt;<i>
</I>&gt;<i> This is a pretty new project, but be assured, that the basic functions 
</I>are
&gt;<i> working fine, and I will do my best to solve any upcoming issues. It is
</I>&gt;<i> implemented with Python3 and prepared for supporting additional features
</I>&gt;<i> easily, while keeping a good part of an eye on efficiency.
</I>&gt;<i>
</I>&gt;<i> Let me know, if you're going to try it.
</I>&gt;<i>
</I>&gt;<i> Pete
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;
<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160512/44b7d9df/attachment-0001.html">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160512/44b7d9df/attachment-0001.html</A>
&gt;<i>
</I>
------------------------------

Message: 6
Date: Thu, 12 May 2016 18:34:08 +0200
From: Antony Stone &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">Antony.Stone at squid.open.source.it</A>&gt;
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Windows Squid with AD authentication
Message-ID: &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">201605121834.08490.Antony.Stone at squid.open.source.it</A>&gt;
Content-Type: Text/Plain;  charset=&quot;iso-8859-15&quot;

On Thursday 12 May 2016 at 18:46:36, Nilesh Gavali wrote:

&gt;<i> Team;
</I>&gt;<i> we have squid running on Windows and need to integrate it with Windows 
</I>AD
&gt;<i> .can anyone help me with steps to be perform to get this done.
</I>
This specific question has appeared a few times on this list only 
recently.

Have you so far:

 - searched the list archives for likely answers to your question?

<A HREF="http://lists.squid-cache.org/pipermail/squid-users/">http://lists.squid-cache.org/pipermail/squid-users/</A>

 - consulted the Squid documentation for guidance?

<A HREF="http://www.squid-cache.org/Doc/">http://www.squid-cache.org/Doc/</A>

 - looked for any independent HOWTOs etc which show how people have done 
this 
in the past?

<A HREF="http://www.google.com/search?q=squid+active+directory+authentication">http://www.google.com/search?q=squid+active+directory+authentication</A>


Here's some friendly advice:

1. The more information you give us (such as: which version of Squid are 
you 
using, which version of Windows are you running under, which form of 
authentication are you using?), the easier it is for people here to help.

2. If you have tried something already and run into problems, tell us what 
you 
have tried and what problems (log file extracts, complete client error 
message, 
etc) you encountered, so we can offer specific suggestions.

3. If you haven't yet tried to implement anything, at least let us know 
what 
documentation you have looked up and what problems you encountered when 
following it, so we can try to fill in the gaps.


Regards,


Antony.

-- 
Most people have more than the average number of legs.

                                                   Please reply to the 
list;
                                                         please *don't* CC 
me.


------------------------------

Subject: Digest Footer

_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


------------------------------

End of squid-users Digest, Vol 21, Issue 54
*******************************************

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160512/0fd99a76/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160512/0fd99a76/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010585.html">[squid-users] Windows Squid with AD authentication
</A></li>
	<LI>Next message (by thread): <A HREF="010581.html">[squid-users] squid-users Digest, Vol 21, Issue 54
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10580">[ date ]</a>
              <a href="thread.html#10580">[ thread ]</a>
              <a href="subject.html#10580">[ subject ]</a>
              <a href="author.html#10580">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
