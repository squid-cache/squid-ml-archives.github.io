<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Would it be possible to run a http to https gateway using squid?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Would%20it%20be%20possible%20to%20run%20a%20http%20to%20https%0A%20gateway%20using%20squid%3F&In-Reply-To=%3C8b74b8f5-0ccb-1fb7-c800-fab5621e8266%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010538.html">
   <LINK REL="Next"  HREF="010643.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Would it be possible to run a http to https gateway using squid?</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Would%20it%20be%20possible%20to%20run%20a%20http%20to%20https%0A%20gateway%20using%20squid%3F&In-Reply-To=%3C8b74b8f5-0ccb-1fb7-c800-fab5621e8266%40ngtech.co.il%3E"
       TITLE="[squid-users] Would it be possible to run a http to https gateway using squid?">eliezer at ngtech.co.il
       </A><BR>
    <I>Mon May 16 00:53:45 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010538.html">[squid-users] Would it be possible to run a http to https gateway using squid?
</A></li>
        <LI>Next message (by thread): <A HREF="010643.html">[squid-users] Would it be possible to run a http to https gateway using squid?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10637">[ date ]</a>
              <a href="thread.html#10637">[ thread ]</a>
              <a href="subject.html#10637">[ subject ]</a>
              <a href="author.html#10637">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Amos,

You are right that it seems like there is no point since you already 
decrypt the connection.
But in the real world the price of maintaining an encrypted session for 
many users for a long period is not the same as maintaining them for 
short burst.

Since all YouTube traffic is done on HTTPS it would be pretty simple 
with these days tools to use some kind of a &quot;https to http bridge&quot; 
software that would
fetch the pages for the clients(most of the pages are tiny) and it will 
help the clients to be able to handle less secured traffic.

I know that with these days hardware it's almost not needed but inside a 
trusted network there is no point for using end to end HTTPS.(to my 
understanding)
Some will might not believe that there are trusted networks in the wild 
but I know that these do exist and in many of these such a GW is required.

Eliezer

On 11/05/2016 08:40, Amos Jeffries wrote:
&gt;<i> On 11/05/2016 9:25 a.m., Eliezer Croitoru wrote:
</I>&gt;&gt;<i> I was wondering to myself, If I can generate certificates and bump the
</I>&gt;&gt;<i> connection, I can use a 302\308 to redirect all traffic from https to a
</I>&gt;&gt;<i> http(intercepatble) connection.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Then on the http interceptor rewrite the request into https.
</I>&gt;<i> What would be the point? You already had to decrypt to do the bump and
</I>&gt;<i> redirect.
</I>&gt;<i>
</I>&gt;&gt;<i> I have a working setup which uses a redirection &quot;attack&quot; to authenticate
</I>&gt;&gt;<i> users over http+https.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Now the issue is that if all browsers will deny a redirection from https to
</I>&gt;&gt;<i> http(a downgrading attack) then the http world would look a bit weird.
</I>&gt;&gt;<i>
</I>&gt;<i> Not that weird. It is called HTTP Strict Transport Security (HSTS).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> And as an addition I have seen that Microsoft use and &quot;FTP&quot; like transfer
</I>&gt;&gt;<i> protocol in their software.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> They have a &quot;secured&quot; control channel which has certificates pinning or
</I>&gt;&gt;<i> something else as a safe guard,
</I>&gt;&gt;<i> and in more then one case they use another channel to fetch the request over
</I>&gt;&gt;<i> plain HTTP( when a proxy is defined).
</I>&gt;&gt;<i>
</I>&gt;<i> You will note that this is a very cache friendly way to do crypto. The
</I>&gt;<i> bulky part of the content is cacheable by anyone who needs to reduce
</I>&gt;<i> bandwith, but remains securely verifiable and integrity checked using
</I>&gt;<i> the off-band details.
</I>&gt;<i>
</I>&gt;<i> However, it is not what you are talking about for your tool. The above
</I>&gt;<i> method by MS requires intentional design in the web service with
</I>&gt;<i> integrity checking actually performed by the endpoints.
</I>&gt;<i>
</I>&gt;<i>   Under downgrade attack conditions the endpoints would not know that the
</I>&gt;<i> extra work was needed so one cannot assume that it is getting done. One
</I>&gt;<i> of the reasons browsers are so into TLS is that the transport layer does
</I>&gt;<i> all the verification and leaves them able to skip perceived slow
</I>&gt;<i> security checks at higher levels.
</I>&gt;<i>
</I>&gt;&gt;<i> Would it be reasonable to write and publish such a tool? Or is it a security
</I>&gt;&gt;<i> risk to publish such a tool to the public?
</I>&gt;&gt;<i>
</I>&gt;<i> Up to you. AIUI is illegal in most of the world to make use of it. Like
</I>&gt;<i> most hacking tools if used other than for permitted penetration testing
</I>&gt;<i> and research purposes.
</I>&gt;<i>
</I>&gt;<i> Amos
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010538.html">[squid-users] Would it be possible to run a http to https gateway using squid?
</A></li>
	<LI>Next message (by thread): <A HREF="010643.html">[squid-users] Would it be possible to run a http to https gateway using squid?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10637">[ date ]</a>
              <a href="thread.html#10637">[ thread ]</a>
              <a href="subject.html#10637">[ subject ]</a>
              <a href="author.html#10637">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
