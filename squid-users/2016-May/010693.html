<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Transparent Mode w/ Peek and Splice trouble
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Transparent%20Mode%20w/%20Peek%20and%20Splice%20trouble&In-Reply-To=%3Cb9a3486352a7beafc5a439c75cbbbdc0%40kpa.gr%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010705.html">
   <LINK REL="Next"  HREF="010696.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Transparent Mode w/ Peek and Splice trouble</H1>
    <B>se at kpa.gr</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Transparent%20Mode%20w/%20Peek%20and%20Splice%20trouble&In-Reply-To=%3Cb9a3486352a7beafc5a439c75cbbbdc0%40kpa.gr%3E"
       TITLE="[squid-users] Transparent Mode w/ Peek and Splice trouble">se at kpa.gr
       </A><BR>
    <I>Wed May 18 14:14:12 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010705.html">[squid-users] Internet Browsing very slow after implementing Squid peek &amp; splice + Access log not tracing full URL
</A></li>
        <LI>Next message (by thread): <A HREF="010696.html">[squid-users] Transparent Mode w/ Peek and Splice trouble
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10693">[ date ]</a>
              <a href="thread.html#10693">[ thread ]</a>
              <a href="subject.html#10693">[ subject ]</a>
              <a href="author.html#10693">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello!

I am currently setting up a squid server, which should serve as a 
transparent proxy in our network.

We mainly need it to do the following:
Allow and Block Domains on HTTP and HTTPS protocol (withOUT bumping the 
traffic). We only want to allow domain names on the SSL port, no URLs.

It actually works fine for HTTP, but I can't configure the &quot;peek and 
splice&quot; method for the HTTPS traffic.

I have come to a point, where HTTP access is being filtered exactly as I 
wanted to, but following odd error occures when visiting HTTPS sites:

When using &quot;https_port 10.0.0.222:3130 cert=/root/cert.pem 
key=/root/key.pem ssl-bump intercept&quot;
I get an Access Denied Error for any Website I try to access, which 
occured while &quot;trying to retrieve the URL: 10.0.0.222:3130&quot;!

If I configure the https_port option with &quot;accel vhost allow-direct&quot; 
like the http_port, the allowed Pages work fine but with squid's 
certificate.


Somewhere the Squid seems to redirect his actual https traffic back to 
itself when using the &quot;intercept&quot; option and that is why I cannot use 
the splice method.

You can find my configuration files on <A HREF="http://kpa.gr/squid-conf/">http://kpa.gr/squid-conf/</A>

Thanks very much in advance,

Pantelis W

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010705.html">[squid-users] Internet Browsing very slow after implementing Squid peek &amp; splice + Access log not tracing full URL
</A></li>
	<LI>Next message (by thread): <A HREF="010696.html">[squid-users] Transparent Mode w/ Peek and Splice trouble
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10693">[ date ]</a>
              <a href="thread.html#10693">[ thread ]</a>
              <a href="subject.html#10693">[ subject ]</a>
              <a href="author.html#10693">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
