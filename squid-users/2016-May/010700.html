<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Problem talking ICAP to McAfee Web Gateway
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Problem%20talking%20ICAP%20to%20McAfee%20Web%20Gateway&In-Reply-To=%3CCAMiSdg7GhKurqWmidbcBEavtQPhv7rt3S3C0zj%2BQpDPiATMeaQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010697.html">
   <LINK REL="Next"  HREF="010701.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Problem talking ICAP to McAfee Web Gateway</H1>
    <B>Rob Worsnop</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Problem%20talking%20ICAP%20to%20McAfee%20Web%20Gateway&In-Reply-To=%3CCAMiSdg7GhKurqWmidbcBEavtQPhv7rt3S3C0zj%2BQpDPiATMeaQ%40mail.gmail.com%3E"
       TITLE="[squid-users] Problem talking ICAP to McAfee Web Gateway">rworsnop at gmail.com
       </A><BR>
    <I>Wed May 18 21:56:06 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010697.html">[squid-users] Transparent Mode w/ Peek and Splice trouble
</A></li>
        <LI>Next message (by thread): <A HREF="010701.html">[squid-users] Problem talking ICAP to McAfee Web Gateway
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10700">[ date ]</a>
              <a href="thread.html#10700">[ thread ]</a>
              <a href="subject.html#10700">[ subject ]</a>
              <a href="author.html#10700">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm having  a problem talking ICAP with McAfee Web Gateway (MWG).

In certain circumstances, MWG will start streaming the RESPMOD response
before Squid has finished sending all the chunks in the RESPMOD request.

Squid does not like this. It seems to interpret the arrival of response
traffic as a signal that the request should have finished. So it stops
reading from the origin resource, and consequently stops writing to MWG.
The result is that the HTTP client sees only a fraction of the file it's
requested.

As far as I can tell, ICAP is no different from HTTP in that it expects a
response to follow a request, not the request and response to be
transmitted at the same time in a full-duplex style.

Are my assumptions correct, and is this Squid behavior by design? If so I'm
going to have take it up with the McAfee people.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160518/402fc56a/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160518/402fc56a/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010697.html">[squid-users] Transparent Mode w/ Peek and Splice trouble
</A></li>
	<LI>Next message (by thread): <A HREF="010701.html">[squid-users] Problem talking ICAP to McAfee Web Gateway
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10700">[ date ]</a>
              <a href="thread.html#10700">[ thread ]</a>
              <a href="subject.html#10700">[ subject ]</a>
              <a href="author.html#10700">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
