<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid 3.5.19, wccp2, pf and forwarding loop
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%203.5.19%2C%20wccp2%2C%20pf%20and%20forwarding%20loop&In-Reply-To=%3C5742AABF.8030306%40ecs.vuw.ac.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010720.html">
   <LINK REL="Next"  HREF="010723.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid 3.5.19, wccp2, pf and forwarding loop</H1>
    <B>Mark Davies</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%203.5.19%2C%20wccp2%2C%20pf%20and%20forwarding%20loop&In-Reply-To=%3C5742AABF.8030306%40ecs.vuw.ac.nz%3E"
       TITLE="[squid-users] squid 3.5.19, wccp2, pf and forwarding loop">mark at ecs.vuw.ac.nz
       </A><BR>
    <I>Mon May 23 07:01:19 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010720.html">[squid-users] squid 3.5.19, wccp2, pf and forwarding loop
</A></li>
        <LI>Next message (by thread): <A HREF="010723.html">[squid-users] squid 3.5.19, wccp2, pf and forwarding loop
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10721">[ date ]</a>
              <a href="thread.html#10721">[ thread ]</a>
              <a href="subject.html#10721">[ subject ]</a>
              <a href="author.html#10721">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

On 23/05/16 18:48, Amos Jeffries wrote:
&gt;&gt;<i> ext_if=&quot;wm0&quot;
</I>&gt;&gt;<i> int_if=&quot;bnx0&quot;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> set skip on lo0
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> rdr pass on $int_if inet proto tcp from 130.195.0.0/20 to any port 80 -&gt;
</I>&gt;&gt;<i> 127.0.0.1 port 8081
</I>&gt;<i>
</I>&gt;<i> What prevents Squids outgoing traffic (to port 80) from being diverted
</I>&gt;<i> back into Squid again?
</I>
I would expect the outgoing traffic to be on the external interface 
(wm0) and the diversion is only on the internal (bnx0)

but I did try to test if something was happening on the internal by 
reducing the address range being matched in the rdr line to something 
that didn't include the internal address of the squid box and it made no 
difference.

cheers
mark


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010720.html">[squid-users] squid 3.5.19, wccp2, pf and forwarding loop
</A></li>
	<LI>Next message (by thread): <A HREF="010723.html">[squid-users] squid 3.5.19, wccp2, pf and forwarding loop
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10721">[ date ]</a>
              <a href="thread.html#10721">[ thread ]</a>
              <a href="subject.html#10721">[ subject ]</a>
              <a href="author.html#10721">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
