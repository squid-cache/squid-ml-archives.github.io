<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] pinger crash - Bad opcode: 112
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20pinger%20crash%20-%20Bad%20opcode%3A%20112&In-Reply-To=%3Cbdb614cb-27fe-ad3a-5780-e6f9245e495d%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010730.html">
   <LINK REL="Next"  HREF="010781.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] pinger crash - Bad opcode: 112</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20pinger%20crash%20-%20Bad%20opcode%3A%20112&In-Reply-To=%3Cbdb614cb-27fe-ad3a-5780-e6f9245e495d%40treenet.co.nz%3E"
       TITLE="[squid-users] pinger crash - Bad opcode: 112">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu May 26 06:04:36 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010730.html">[squid-users] pinger crash - Bad opcode: 112
</A></li>
        <LI>Next message (by thread): <A HREF="010781.html">[squid-users] pinger crash - Bad opcode: 112
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10744">[ date ]</a>
              <a href="thread.html#10744">[ thread ]</a>
              <a href="subject.html#10744">[ subject ]</a>
              <a href="author.html#10744">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 24/05/2016 7:52 p.m., Tomas Mozes wrote:
&gt;<i> Hello,
</I>&gt;<i> on two different squid servers I've observed a crash of pinger. First it
</I>&gt;<i> appeared on version 3.5.15 and later on version 3.5.17.
</I>&gt;<i> 
</I>&gt;<i> Cache.log contains these lines:
</I>&gt;<i> 
</I>&gt;<i> (pinger): Address.cc:671: void Ip::Address::getAddrInfo(addrinfo*&amp;, int)
</I>&gt;<i> const: Assertion `false' failed.
</I>&gt;<i> 2016/05/14 21:55:25 kid1| Bad opcode: 112 from
</I>&gt;<i> [6661:6c73:6522:2061:7420:6c69:6e65:2036]
</I>&gt;<i> 2016/05/14 21:59:13 kid1| recv: (111) Connection refused
</I>&gt;<i> 2016/05/14 21:59:13 kid1| Closing Pinger socket on FD 17
</I>&gt;<i> 
</I>&gt;<i> On both servers, that IPv6 address was the same -
</I>&gt;<i> 6661:6c73:6522:2061:7420:6c69:6e65:2036
</I>&gt;<i> 
</I>
That is the hexadecimal representation of the error:
 false&quot; at line 6

Which means that your kernel is producing garbage when asked to resolve
an IPv6 address or respond to an ICMPv6 packet.


&gt;<i> A quick google search for that showed problems with Squid from the past:
</I>&gt;<i> <A HREF="http://www.squid-cache.org/mail-archive/squid-users/201301/0251.html">http://www.squid-cache.org/mail-archive/squid-users/201301/0251.html</A>
</I>&gt;<i> 
</I>&gt;<i> The strange thing is that I have IPv6 disabled in the system (not even as a
</I>&gt;<i> module in the Linux kernel) and Squid was compiled without ipv6 support.
</I>&gt;<i> 
</I>
Support for IPv6 has been mandatory for all IP network connected devices
since 2012.

&quot;Disabling&quot; IPv6 in Squid simply means it will not attempt to use IPv6
for HTTP connections. It must still be able to identify IPv6 addresses.
Which requires kernel support for IPv6.

If you don't want IPv6 to take place &quot;the right way&quot; to do it is to
configure your network interfaces not to have IPv6 address assignments
and your machines firewall to block IPv6 traffic.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010730.html">[squid-users] pinger crash - Bad opcode: 112
</A></li>
	<LI>Next message (by thread): <A HREF="010781.html">[squid-users] pinger crash - Bad opcode: 112
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10744">[ date ]</a>
              <a href="thread.html#10744">[ thread ]</a>
              <a href="subject.html#10744">[ subject ]</a>
              <a href="author.html#10744">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
