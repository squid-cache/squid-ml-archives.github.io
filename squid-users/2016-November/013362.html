<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid doesn't use domain name as a request URL in access.log when splice at step 3 occurs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20doesn%27t%20use%20domain%20name%20as%20a%20request%20URL%20in%0A%20access.log%20when%20splice%20at%20step%203%20occurs&In-Reply-To=%3C5e50526c-5945-8038-d09e-3c7d56ac2512%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013369.html">
   <LINK REL="Next"  HREF="013364.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid doesn't use domain name as a request URL in access.log when splice at step 3 occurs</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20doesn%27t%20use%20domain%20name%20as%20a%20request%20URL%20in%0A%20access.log%20when%20splice%20at%20step%203%20occurs&In-Reply-To=%3C5e50526c-5945-8038-d09e-3c7d56ac2512%40treenet.co.nz%3E"
       TITLE="[squid-users] Squid doesn't use domain name as a request URL in access.log when splice at step 3 occurs">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Nov  4 14:42:45 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="013369.html">[squid-users] Squid doesn't use domain name as a request URL in access.log when splice at step 3 occurs
</A></li>
        <LI>Next message (by thread): <A HREF="013364.html">[squid-users] Squid doesn't use domain name as a request URL in access.log when splice at step 3 occurs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13362">[ date ]</a>
              <a href="thread.html#13362">[ thread ]</a>
              <a href="subject.html#13362">[ subject ]</a>
              <a href="author.html#13362">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 5/11/2016 1:43 a.m., Garri Djavadyan wrote:
&gt;<i> The configuration for splice at step 3:
</I>&gt;<i> 
</I>&gt;<i> # diff etc/squid.conf.default etc/squid.conf
</I>&gt;<i> 73a74,78
</I>&gt;&gt;<i> https_port 3129 intercept ssl-bump cert=etc/ssl_cert/myCA.pem
</I>&gt;<i> generate-host-certificates
</I>&gt;&gt;<i> acl StepSplice at_step SslBump3
</I>&gt;&gt;<i> ssl_bump splice StepSplice
</I>&gt;&gt;<i> ssl_bump peek all
</I>&gt;&gt;<i> logformat squid      %ts.%03tu %6tr %&gt;a %Ss/%03&gt;Hs %&lt;st %rm %ru %[un
</I>&gt;<i> %Sh/%&lt;a %mt %ssl::&gt;sni
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> The result:
</I>&gt;<i> 1478256303.420    574 172.16.0.21 TCP_TUNNEL/200 6897 CONNECT
</I>&gt;<i> 104.124.119.14:443 - ORIGINAL_DST/104.124.119.14 - www.openssl.org
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Is it a bug or intended behavior? Thanks.
</I>&gt;<i> 
</I>
The person (Christos) who designed that behaviour is not reading this
mailing list very often.

AFAIK, it depends on what the SubjectAltName field in the certificate
provided by 104.124.119.14 contains.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="013369.html">[squid-users] Squid doesn't use domain name as a request URL in access.log when splice at step 3 occurs
</A></li>
	<LI>Next message (by thread): <A HREF="013364.html">[squid-users] Squid doesn't use domain name as a request URL in access.log when splice at step 3 occurs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13362">[ date ]</a>
              <a href="thread.html#13362">[ thread ]</a>
              <a href="subject.html#13362">[ subject ]</a>
              <a href="author.html#13362">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
