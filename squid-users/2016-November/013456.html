<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] is ACL conditional directive possible ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20is%20ACL%20conditional%20directive%20possible%20%3F&In-Reply-To=%3C26a13e59638f63e4e89afd5c77378156%40comnet.uz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013455.html">
   <LINK REL="Next"  HREF="013446.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] is ACL conditional directive possible ?</H1>
    <B>Garri Djavadyan</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20is%20ACL%20conditional%20directive%20possible%20%3F&In-Reply-To=%3C26a13e59638f63e4e89afd5c77378156%40comnet.uz%3E"
       TITLE="[squid-users] is ACL conditional directive possible ?">garryd at comnet.uz
       </A><BR>
    <I>Tue Nov 15 19:05:48 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="013455.html">[squid-users] is ACL conditional directive possible ?
</A></li>
        <LI>Next message (by thread): <A HREF="013446.html">[squid-users] ssl , TAG_NONE/503 0 CONNECT
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13456">[ date ]</a>
              <a href="thread.html#13456">[ thread ]</a>
              <a href="subject.html#13456">[ subject ]</a>
              <a href="author.html#13456">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2016-11-15 22:31, AUBERT Thibaud wrote:
&gt;<i> Hi Guys,
</I>&gt;<i> 
</I>&gt;<i> Ok, QoS might help to control traffic on the internet access side, but
</I>&gt;<i> it won't help between the source, client on a small remote
</I>&gt;<i> office/output, and the proxy.
</I>&gt;<i> 
</I>&gt;<i> It might also be difficult to split this traffic between what is
</I>&gt;<i> intended to internet or just internal.
</I>&gt;<i> 
</I>&gt;<i> Example : 1Gb/sec internet link used at 50%, a user on a remote site
</I>&gt;<i> with a 15 mbits/sec link used at 80% launch a download. There's pretty
</I>&gt;<i> much no impact on the internet link... but on the second, it add an
</I>&gt;<i> extra 3mbits/sec that saturate the network.
</I>&gt;<i> 
</I>&gt;<i> If I add a restriction with a small value for the max size of file, I
</I>&gt;<i> can hope that user won't bother others people on site too long. But it
</I>&gt;<i> also mean that every people that use the internet link won't be able
</I>&gt;<i> to download big file, even if they normally could.
</I>&gt;<i> 
</I>&gt;<i> I also think to use Delay Pool, but, it will penalize people that do
</I>&gt;<i> not download big files. If anyone have some XP about individual delay
</I>&gt;<i> pool, don't hesitate to share, because I'm not sure that it will fit
</I>&gt;<i> my current needs.
</I>
As Amos already wrote, the only viable solution for your case are 
configured QoS policies on the routers facing limited links to branches. 
You can't control downstream traffic to branches on HTTP(S) proxy 
servers alone. I believe many other network protocols 
(FTP/Bittorrent/POP3/IMAP ...) are used on the limited links to 
branches.

If Squid generates most of the traffic passing through the slow links, 
you also has an option to apply QoS policies on operating system level. 
For example, if Squid is installed on Linux, you can use very flexible 
HTB queuing discipline [1]. Below is excerpt describing link sharing 
scenario:

   HTB ensures that the amount of service provided to each class is at
   least the minimum of the amount it requests and the amount assigned
   to it. When a class requests less than the amount assigned, the
   remaining (excess) bandwidth is distributed to other classes which
   request service.

Similar methods can be uses for other operating systems.

[1] <A HREF="http://luxik.cdi.cz/~devik/qos/htb/manual/userg.htm">http://luxik.cdi.cz/~devik/qos/htb/manual/userg.htm</A>


Garri

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="013455.html">[squid-users] is ACL conditional directive possible ?
</A></li>
	<LI>Next message (by thread): <A HREF="013446.html">[squid-users] ssl , TAG_NONE/503 0 CONNECT
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13456">[ date ]</a>
              <a href="thread.html#13456">[ thread ]</a>
              <a href="subject.html#13456">[ subject ]</a>
              <a href="author.html#13456">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
