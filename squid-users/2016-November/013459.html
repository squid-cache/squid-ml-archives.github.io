<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Trusted CA Certificate with ssl_bump
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Trusted%20CA%20Certificate%20with%20ssl_bump&In-Reply-To=%3Cd0f4f7fd-99ef-773b-5b16-ad6524da1431%40performance-managers.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013454.html">
   <LINK REL="Next"  HREF="013461.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Trusted CA Certificate with ssl_bump</H1>
    <B>Patrick Chemla</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Trusted%20CA%20Certificate%20with%20ssl_bump&In-Reply-To=%3Cd0f4f7fd-99ef-773b-5b16-ad6524da1431%40performance-managers.com%3E"
       TITLE="[squid-users] Trusted CA Certificate with ssl_bump">patrick.chemla at performance-managers.com
       </A><BR>
    <I>Wed Nov 16 08:11:28 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="013454.html">[squid-users] Trusted CA Certificate with ssl_bump
</A></li>
        <LI>Next message (by thread): <A HREF="013461.html">[squid-users] Trusted CA Certificate with ssl_bump
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13459">[ date ]</a>
              <a href="thread.html#13459">[ thread ]</a>
              <a href="subject.html#13459">[ subject ]</a>
              <a href="author.html#13459">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I have same problem, and I need to use trusted CA certificates, so what 
is the solution?

I have a squid 3.5.20 used for multiple domains, multiple backends, 
using both HTTP and HTTPS.

Actually, the HTTP configuration is OK, the backends are OK with HTTPS, 
trusted certificates, verified with wget <A HREF="https://.....">https://.....</A>

acls rules are OK, sending each request according to the domain to the 
right backend.

I need to add trusted certificates for some domains. I found that I 
could do that using http_port XXX.XXX.XXX.XXX:443 where I have different 
IPs, each by certicate.

But I must say that I am really lost in all options,  I have googled for 
days, I tried a lot of settings ssl_bump, intercept, self-signed 
certificates, Trusted certificates,...., I saw differences between old 
versions and 3.5, and I can't make any working..

So questions:

1/ Should I set up the squid certificate with ONLY self-signed, or there 
is a way to use Trusted certificates? So if only self-signed, the user 
will be always forced to accept the self-signed certificate on first 
time? not really good for commercial sites.

2/ Should the backend cache_peer set as ssl on port 443, or could it be 
simple http 80 (backends are internal VMs onto the same server, no 
external network between squid and backends)?

3/ Will the acls rules work OK to affect each request to the right 
backend according to domain, even in HTTPS?

4/ Do you know some clear and easy howto, examples, for such settings, 
from where I could get how to do?

Thanks for help
Patrick

Le 15/11/2016 &#224; 18:30, Yuri Voinov a &#233;crit :
&gt;<i>
</I>&gt;<i> 15.11.2016 22:28, Alex Crow &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;&gt;<i> On 15/11/16 16:22, Yuri Voinov wrote:
</I>&gt;&gt;&gt;&gt;<i> You can if you have control over the clients, ie install your CA into
</I>&gt;&gt;&gt;&gt;<i> the browser/OS.
</I>&gt;&gt;&gt;<i> ... and this can be illegal ;)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> YMMV (depending on where you live/work)!
</I>&gt;<i> AFAIK Spying for users without they agreement illegal anywhere.
</I>&gt;&gt;<i> -- 
</I>&gt;&gt;<i> This message is intended only for the addressee and may contain
</I>&gt;&gt;<i> confidential information. Unless you are that person, you may not
</I>&gt;&gt;<i> disclose its contents or use it in any way and are requested to delete
</I>&gt;&gt;<i> the message along with any attachments and notify us immediately.
</I>&gt;&gt;<i> This email is not intended to, nor should it be taken to, constitute
</I>&gt;&gt;<i> advice.
</I>&gt;&gt;<i> The information provided is correct to our knowledge &amp; belief and must
</I>&gt;&gt;<i> not
</I>&gt;&gt;<i> be used as a substitute for obtaining tax, regulatory, investment,
</I>&gt;&gt;<i> legal or
</I>&gt;&gt;<i> any other appropriate advice.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &quot;Transact&quot; is operated by Integrated Financial Arrangements Ltd.
</I>&gt;&gt;<i> 29 Clement's Lane, London EC4N 7AE. Tel: (020) 7608 4900 Fax: (020)
</I>&gt;&gt;<i> 7608 5300.
</I>&gt;&gt;<i> (Registered office: as above; Registered in England and Wales under
</I>&gt;&gt;<i> number: 3727592). Authorised and regulated by the Financial Conduct
</I>&gt;&gt;<i> Authority (entered on the Financial Services Register; no. 190856).
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> squid-users mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20161116/b27d83c2/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20161116/b27d83c2/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="013454.html">[squid-users] Trusted CA Certificate with ssl_bump
</A></li>
	<LI>Next message (by thread): <A HREF="013461.html">[squid-users] Trusted CA Certificate with ssl_bump
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13459">[ date ]</a>
              <a href="thread.html#13459">[ thread ]</a>
              <a href="subject.html#13459">[ subject ]</a>
              <a href="author.html#13459">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
