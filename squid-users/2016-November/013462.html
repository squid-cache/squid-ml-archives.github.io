<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Trusted CA Certificate with ssl_bump
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Trusted%20CA%20Certificate%20with%20ssl_bump&In-Reply-To=%3Cb845e785-cc35-0ed4-6686-67d1aa5defc4%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013461.html">
   <LINK REL="Next"  HREF="013466.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Trusted CA Certificate with ssl_bump</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Trusted%20CA%20Certificate%20with%20ssl_bump&In-Reply-To=%3Cb845e785-cc35-0ed4-6686-67d1aa5defc4%40treenet.co.nz%3E"
       TITLE="[squid-users] Trusted CA Certificate with ssl_bump">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Nov 16 12:27:36 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="013461.html">[squid-users] Trusted CA Certificate with ssl_bump
</A></li>
        <LI>Next message (by thread): <A HREF="013466.html">[squid-users] Trusted CA Certificate with ssl_bump
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13462">[ date ]</a>
              <a href="thread.html#13462">[ thread ]</a>
              <a href="subject.html#13462">[ subject ]</a>
              <a href="author.html#13462">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 16/11/2016 9:11 p.m., Patrick Chemla wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I have same problem, and I need to use trusted CA certificates, so what
</I>&gt;<i> is the solution?
</I>
Not to do illegal bad things that violate your contract with the CA.

Any CA which lets you intercept traffic by generating sub-certificates
with their root *will* be blacklisted and effectively &quot;thrown off the
Internet&quot;. It has happened already for several CA who thought that was
an idle threat.

&gt;<i> 
</I>&gt;<i> I have a squid 3.5.20 used for multiple domains, multiple backends,
</I>&gt;<i> using both HTTP and HTTPS.
</I>
As Alex said, what you describe here sounds a lot more like
reverse-proxy than interception.

Sergey who started this thread was intercepting HTTPS traffic sent by
clients to an explicit proxy. All answers so far have been about that
topic, which is probably *not* what you are facing.

The configurations and limitations are very different. So first thing to
do is be clear about what actually you are trying to do.


&gt;<i> So questions:
</I>&gt;<i> 
</I>&gt;<i> 1/ Should I set up the squid certificate with ONLY self-signed, or there
</I>&gt;<i> is a way to use Trusted certificates? So if only self-signed, the user
</I>&gt;<i> will be always forced to accept the self-signed certificate on first
</I>&gt;<i> time? not really good for commercial sites.
</I>&gt;<i> 
</I>
Are you the owner of the website(s) or an authorized CDN/Hosting
provider for them ?


&gt;<i> 2/ Should the backend cache_peer set as ssl on port 443, or could it be
</I>&gt;<i> simple http 80 (backends are internal VMs onto the same server, no
</I>&gt;<i> external network between squid and backends)?
</I>&gt;<i> 
</I>
That depends on your answer to the above.

&gt;<i> 3/ Will the acls rules work OK to affect each request to the right
</I>&gt;<i> backend according to domain, even in HTTPS?
</I>&gt;<i> 
</I>
Yes. But the detail may not be what you expect. It depends on the above
answers.

&gt;<i> 4/ Do you know some clear and easy howto, examples, for such settings,
</I>&gt;<i> from where I could get how to do?
</I>&gt;<i> 
</I>
&lt;<A HREF="http://wiki.squid-cache.org/ConfigExamples/">http://wiki.squid-cache.org/ConfigExamples/</A>&gt; contains all of the
configurations you might need. But which one(s) are correct for you
depends on what you are actually needing to do.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="013461.html">[squid-users] Trusted CA Certificate with ssl_bump
</A></li>
	<LI>Next message (by thread): <A HREF="013466.html">[squid-users] Trusted CA Certificate with ssl_bump
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13462">[ date ]</a>
              <a href="thread.html#13462">[ thread ]</a>
              <a href="subject.html#13462">[ subject ]</a>
              <a href="author.html#13462">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
