<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] compression in Squid
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20compression%20in%20Squid&In-Reply-To=%3C9467c152-db8f-88ef-728d-53659c163f9e%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013564.html">
   <LINK REL="Next"  HREF="013576.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] compression in Squid</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20compression%20in%20Squid&In-Reply-To=%3C9467c152-db8f-88ef-728d-53659c163f9e%40treenet.co.nz%3E"
       TITLE="[squid-users] compression in Squid">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Nov 23 14:51:57 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="013564.html">[squid-users] compression in Squid
</A></li>
        <LI>Next message (by thread): <A HREF="013576.html">[squid-users] compression in Squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13568">[ date ]</a>
              <a href="thread.html#13568">[ thread ]</a>
              <a href="subject.html#13568">[ subject ]</a>
              <a href="author.html#13568">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 24/11/2016 2:50 a.m., Ralf Hildebrandt wrote:
&gt;<i> * Amos Jeffries wrote:
</I>&gt;&gt;<i> So I have finally got around to implementing the proxy compression
</I>&gt;&gt;<i> feature in HTTP.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The code and more info is available at:
</I>&gt;&gt;<i> &lt;<A HREF="https://code.launchpad.net/~yadi/squid/te-gzip">https://code.launchpad.net/~yadi/squid/te-gzip</A>&gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This Squid built with zlib can right now receive and decompress on the
</I>&gt;&gt;<i> fly traffic from a server which uses Transfer-Encoding: deflate.
</I>&gt;<i> 
</I>&gt;<i> I don't understand this feature. Why is the compressed data not simply
</I>&gt;<i> passed on to the client?
</I>&gt;<i> 
</I>
When fully implemented that is one of the things that should be
possible. One small-ish step at a time ;-P

If it helps:

The difference between Content-Encoding and Transfer-Encoding is a fine
line. Basically coming down to a matter of whether data is encoded at
rest or in transit, and what types of agent are able to safely
encode/decode.

* Transfer-Encoding is for encoding data _only_ while in transit.

The recipient decodes/decompresses it before making use of it. If the
client advertises T-E support for the used algorithms and the data would
just be relayed anyway, it does not have to be decoded. But I have not
implemented that at this stage.

* Content-Encoding is for data at rest _and_ in transit.

C-E assumes the data is compressed out-of-band, gets stored that way on
the origin and stays that way end-to-end until it reaches the client
which sent the Accept-Encoding for that algorithm. That also implies
that metadata about the compression can be delivered out-of-band so it
is somewhat risky for proxies to play with.


&gt;&gt;<i> The primary use-case is for Squid installations where two proxies are
</I>&gt;&gt;<i> used to reduce bandwidth over a slow or expensive link (ie satellite).
</I>&gt;<i> 
</I>&gt;<i> So the proxies are compressing everything (between them? between proxy
</I>&gt;<i> and internet? between client and proxy?)
</I>&gt;<i> 
</I>
Between them for now. If possible across as many hops as support the
feature.

More options for both encoding algorithms and ways to pass the data
around are on the todo list once the basics are working.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="013564.html">[squid-users] compression in Squid
</A></li>
	<LI>Next message (by thread): <A HREF="013576.html">[squid-users] compression in Squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13568">[ date ]</a>
              <a href="thread.html#13568">[ thread ]</a>
              <a href="subject.html#13568">[ subject ]</a>
              <a href="author.html#13568">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
