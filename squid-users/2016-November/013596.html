<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Accelerator http to https
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Accelerator%20http%20to%20https&In-Reply-To=%3C1480103660.1269807.799184577.4D46D266%40webmail.messagingengine.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013582.html">
   <LINK REL="Next"  HREF="013597.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Accelerator http to https</H1>
    <B>creditu at eml.cc</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Accelerator%20http%20to%20https&In-Reply-To=%3C1480103660.1269807.799184577.4D46D266%40webmail.messagingengine.com%3E"
       TITLE="[squid-users] Accelerator http to https">creditu at eml.cc
       </A><BR>
    <I>Fri Nov 25 19:54:20 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="013582.html">[squid-users] Accelerator http to https
</A></li>
        <LI>Next message (by thread): <A HREF="013597.html">[squid-users] Accelerator http to https
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13596">[ date ]</a>
              <a href="thread.html#13596">[ thread ]</a>
              <a href="subject.html#13596">[ subject ]</a>
              <a href="author.html#13596">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Using the first example in the link that was shared
(<A HREF="http://wiki.squid-cache.org/Features/Redirectors">http://wiki.squid-cache.org/Features/Redirectors</A>), I was able to get it
to work after seeing what was being sent to the redirector script.  In
my case the URL was at $X[0] and I had to remove all references to $X[0]
in what was being sent back to squid. The below seems to work, but a few
questions since I would like this to be as robust as possible.

If the presented URL is already <A HREF="https://...,">https://...,</A> my assumption is that just
sending back a new line is all that squid needs to see?

Also, is all there any thing that I need to add besides the
url_rewrite_program and the number of children to the conf file?  What
about turning off url_rewrite_host_header?  The docs say this may be
wanted when running in accelerator mode.  I did a few quick tests in a
test setup and don't see any difference.    

Finally, is the best way to test how many children to launch (5, 10, 20
etc) just to monitor the cache.log to see if squid is running out and
increase it until the messages go away?  
.....
    if ($url =~ /^http:\/\//) {
        $url =~ s/^http/https/;
        print &quot;302:$url\n&quot;;
    } else {
        print &quot;\n&quot;;
    }
}

On Thu, Nov 24, 2016, at 06:58 AM, Amos Jeffries wrote:
&gt;<i> On 24/11/2016 9:31 p.m., Eliezer Croitoru wrote:
</I>&gt;<i> &gt; Amos,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I'm not sure I understood:
</I>&gt;<i> &gt; Redirect using url_rewrite helper which will rewrite(transparently) to some special url\page?
</I>&gt;<i> 
</I>&gt;<i> No, not rewrite. Redirect ...
</I>&gt;<i> 
</I>&gt;<i> With a 30x status code. URL helpers have always been able to redirect,
</I>&gt;<i> just by prefixing the absolute-URL with the status code to use in the
</I>&gt;<i> redirect response.
</I>&gt;<i> 
</I>&gt;<i> deny_info does the same, just a little bit faster since it dont need to
</I>&gt;<i> wait for a helper lookup.
</I>&gt;<i> 
</I>&gt;<i> Since the client is informed about the scheme change it is perfectly
</I>&gt;<i> fine to use redirection (not rewrite) to change between <A HREF="http://">http://</A> and
</I>&gt;<i> <A HREF="https://">https://</A> (or to any other scheme).
</I>&gt;<i> 
</I>&gt;<i> Amos
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="013582.html">[squid-users] Accelerator http to https
</A></li>
	<LI>Next message (by thread): <A HREF="013597.html">[squid-users] Accelerator http to https
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13596">[ date ]</a>
              <a href="thread.html#13596">[ thread ]</a>
              <a href="subject.html#13596">[ subject ]</a>
              <a href="author.html#13596">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
