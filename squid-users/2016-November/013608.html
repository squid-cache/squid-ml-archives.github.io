<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Just one error page.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Just%20one%20error%20page.&In-Reply-To=%3C003b01d2492a%24f634b870%24e29e2950%24%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013594.html">
   <LINK REL="Next"  HREF="013630.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Just one error page.</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Just%20one%20error%20page.&In-Reply-To=%3C003b01d2492a%24f634b870%24e29e2950%24%40ngtech.co.il%3E"
       TITLE="[squid-users] Just one error page.">eliezer at ngtech.co.il
       </A><BR>
    <I>Mon Nov 28 03:53:21 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="013594.html">[squid-users] Just one error page.
</A></li>
        <LI>Next message (by thread): <A HREF="013630.html">[squid-users] Just one error page.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13608">[ date ]</a>
              <a href="thread.html#13608">[ thread ]</a>
              <a href="subject.html#13608">[ subject ]</a>
              <a href="author.html#13608">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>OK so first you need to make sure you know and understand what you define as &quot;The Internet is Down''.
How do you recognize that the connection is down?
If the proxy is the gateway and it has the interface up or down it would be easy to script it.
There are other ways which uses &quot;ping&quot; checks and a marker.
The helper will check if the &quot;marker&quot; file is there or not.
A daemon will run and will test every 15 seconds if the connection is up or down.
If the connection state changes the daemon will delete the mark file for UP state and will create the file for a DOWN state.
The squid helper will &quot;stat&quot; or &quot;check&quot; if the file is there for each request it receives and then if the &quot;marker&quot;(flag) file exists which means the connection is down it will redirect the client into a local web server with an error page.
A Similar thing runs in cloudflare infrastructure.

How are you with scripting?

Eliezer

----
Eliezer Croitoru
Linux System Administrator
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>


-----Original Message-----
From: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On Behalf Of erdosain9
Sent: Friday, November 25, 2016 18:52
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Just one error page.

Hi
Thanks!
Can you guide me on this &quot;Use an helper that will check the status of the
internet connection. 
If the Internet is down then redirect to a special error page&quot; ???





--
View this message in context: <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/Just-one-error-page-tp4680631p4680661.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/Just-one-error-page-tp4680631p4680661.html</A>
Sent from the Squid - Users mailing list archive at Nabble.com.
_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="013594.html">[squid-users] Just one error page.
</A></li>
	<LI>Next message (by thread): <A HREF="013630.html">[squid-users] Just one error page.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13608">[ date ]</a>
              <a href="thread.html#13608">[ thread ]</a>
              <a href="subject.html#13608">[ subject ]</a>
              <a href="author.html#13608">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
