<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Large text ACL lists
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Large%20text%20ACL%20lists&In-Reply-To=%3Ce211cffe-eab1-41da-8c75-36396444ac16%40getmailbird.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012813.html">
   <LINK REL="Next"  HREF="012815.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Large text ACL lists</H1>
    <B>Darren</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Large%20text%20ACL%20lists&In-Reply-To=%3Ce211cffe-eab1-41da-8c75-36396444ac16%40getmailbird.com%3E"
       TITLE="[squid-users] Large text ACL lists">darren.j.breeze.ml at gmail.com
       </A><BR>
    <I>Sun Oct  2 04:24:52 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="012813.html">[squid-users] Large text ACL lists
</A></li>
        <LI>Next message (by thread): <A HREF="012815.html">[squid-users] Large text ACL lists
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12814">[ date ]</a>
              <a href="thread.html#12814">[ thread ]</a>
              <a href="subject.html#12814">[ subject ]</a>
              <a href="author.html#12814">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

I have now opened the Pandora box of writing my own helper as per Bobs suggestion.&#160;

I am playing with the idea of pre-processing my acl lists and using memcached as a KV store. This way I should be able to update ACL members whilst keeping everything as available as possible.

I would update the acl members outside of squid so it should be fast, and if I get my tree model right, fast and scale well too.

I have had great success with Memcache on various large web applications so again, pending a clever tree algorithm, this could provide me with what I need without having to reload / restart squid.

Darren B.






Sent from Mailbird [<A HREF="http://www.getmailbird.com/?utm_source=Mailbird&amp;amp;utm_medium=email&amp;amp;utm_campaign=sent-from-mailbird">http://www.getmailbird.com/?utm_source=Mailbird&amp;utm_medium=email&amp;utm_campaign=sent-from-mailbird</A>]
On 2/10/2016 12:15:52 PM, Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt; wrote:
On 2/10/2016 2:08 p.m., Benjamin E. Nichols wrote:
&gt;<i> I wouldnt advise reconfigure for when you update your blacklists, sure
</I>&gt;<i> it sounds great, but in reality, as I said, in my experience, only
</I>&gt;<i> sometimes will it actually reload the acl from disk, sometimes it wont.
</I>&gt;<i> Youll do a reconfigure and discover your squid is still running the old
</I>&gt;<i> acls which presumably are memory resident, now this may have been a bug
</I>&gt;<i> thats been since fixed, but Im not messing with it. In our testig
</I>&gt;<i> environment we dont have time to be dealing with squid deciding to load
</I>&gt;<i> an acl from disk when it feels like it should do so, we need it to load
</I>&gt;<i> from disk every time.
</I>&gt;<i>
</I>&gt;<i> Once you do your own testing youll see what im talking about, go ahead
</I>&gt;<i> and add some urls to your acl and -k reconfigure, do this a few times,
</I>
So you are sening Squid a series of reload signals so fast it does not
have time to complete one before the next is arriving?

There are many fixes in Squid-4 and latest 3.5 for those situations. But
still some open bug reports about the behaviour there. Those are not
related to ACLs specifically. Any reconfig task that takes longer than
the time between -k reconfigure signals being sent will trigger issues.

... Ironically using a helper is one of the things which breaks. Squid
looses track of whether any given new helper being started was for the
current or previous -k reconfigure signal.

And of course connections and transactions which are already underway
are not affected by newly loaded config details.

Amos

_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20161002/5064f49d/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20161002/5064f49d/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="012813.html">[squid-users] Large text ACL lists
</A></li>
	<LI>Next message (by thread): <A HREF="012815.html">[squid-users] Large text ACL lists
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12814">[ date ]</a>
              <a href="thread.html#12814">[ thread ]</a>
              <a href="subject.html#12814">[ subject ]</a>
              <a href="author.html#12814">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
