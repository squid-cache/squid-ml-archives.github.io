<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Caching http google deb files
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Caching%20http%20google%20deb%20files&In-Reply-To=%3CCADSSinNbzY90jUyYOLPFcqc7a8WQFb4qFdbS7mc0knzcfZDJLw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013165.html">
   <LINK REL="Next"  HREF="012912.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Caching http google deb files</H1>
    <B>Jok Thuau</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Caching%20http%20google%20deb%20files&In-Reply-To=%3CCADSSinNbzY90jUyYOLPFcqc7a8WQFb4qFdbS7mc0knzcfZDJLw%40mail.gmail.com%3E"
       TITLE="[squid-users] Caching http google deb files">jok at spikes.com
       </A><BR>
    <I>Wed Oct  5 16:19:22 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="013165.html">[squid-users] Caching http google deb files
</A></li>
        <LI>Next message (by thread): <A HREF="012912.html">[squid-users] Caching http google deb files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12908">[ date ]</a>
              <a href="thread.html#12908">[ thread ]</a>
              <a href="subject.html#12908">[ subject ]</a>
              <a href="author.html#12908">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is sort of off-topic, but have you considered using a deb repo
mirroring software?
(it would mean that you need to update your clients to point to that rather
than google, but that's not really difficult).
software like aptly (aptly.info) are really good about this (though a
little hard to get going in the first place). or a deb-caching proxy
(apt-cacher-ng? squid-deb-proxy?)


On Tue, Oct 4, 2016 at 7:30 AM, Hardik Dangar &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">hardikdangar+squid at gmail.com</A>&gt;
wrote:

&gt;<i> Wow, i couldn't think about that. google might need tracking data that
</I>&gt;<i> could be the reason they have blindly put vary * header. oh Irony, company
</I>&gt;<i> which talks to all of us on how to deliver content is trying to do such
</I>&gt;<i> thing.
</I>&gt;<i>
</I>&gt;<i> I have looked at your patch but how do i enable that ? do i need to write
</I>&gt;<i> custom ACL ? i know i need to compile and reinstall after applying patch
</I>&gt;<i> but what do i need to do exactly in squid.conf file as looking at your
</I>&gt;<i> patch i am guessing i need to write archive acl or i am too naive to
</I>&gt;<i> understand C code :)
</I>&gt;<i>
</I>&gt;<i> Also
</I>&gt;<i>
</I>&gt;<i> reply_header_replace is any good for this ?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Tue, Oct 4, 2016 at 7:47 PM, Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On 5/10/2016 2:34 a.m., Hardik Dangar wrote:
</I>&gt;&gt;<i> &gt; Hey Amos,
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; We have about 50 clients which downloads same google chrome update
</I>&gt;&gt;<i> every 2
</I>&gt;&gt;<i> &gt; or 3 days means 2.4 gb. although response says vary but requested file
</I>&gt;&gt;<i> is
</I>&gt;&gt;<i> &gt; same and all is downloaded via apt update.
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; Is there any option just like ignore-no-store? I know i am asking for
</I>&gt;&gt;<i> too
</I>&gt;&gt;<i> &gt; much but it seems very silly on google's part that they are sending very
</I>&gt;&gt;<i> &gt; header at a place where they shouldn't as no matter how you access those
</I>&gt;&gt;<i> &gt; url's you are only going to get those deb files.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Some things G does only make sense whan you ignore all the PR about
</I>&gt;&gt;<i> wanting to make the web more efficient and consider it's a company whose
</I>&gt;&gt;<i> income is derived by recording data about peoples habits and activities.
</I>&gt;&gt;<i> Caching can hide that info from them.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; can i hack squid source code to ignore very header ?
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Google are explicitly saying the response changes. I suspect there is
</I>&gt;&gt;<i> something involving Google account data being embeded in some of the
</I>&gt;&gt;<i> downloads. For tracking, etc.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If you are wanting to test it I have added a patch to
</I>&gt;&gt;<i> &lt;<A HREF="http://bugs.squid-cache.org/show_bug.cgi?id=4604">http://bugs.squid-cache.org/show_bug.cgi?id=4604</A>&gt; that should implement
</I>&gt;&gt;<i> archival of responses where the ACLs match. It is completely untested by
</I>&gt;&gt;<i> me beyond building, so YMMV.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Amos
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20161005/7a9f900a/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20161005/7a9f900a/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="013165.html">[squid-users] Caching http google deb files
</A></li>
	<LI>Next message (by thread): <A HREF="012912.html">[squid-users] Caching http google deb files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12908">[ date ]</a>
              <a href="thread.html#12908">[ thread ]</a>
              <a href="subject.html#12908">[ subject ]</a>
              <a href="author.html#12908">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
