<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Caching http google deb files
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Caching%20http%20google%20deb%20files&In-Reply-To=%3CCA%2BsSnVai079zNS6X%2BRni9qaRKOAt6PF%2BnrZQhBR462zL1zWZuA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012942.html">
   <LINK REL="Next"  HREF="012955.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Caching http google deb files</H1>
    <B>Hardik Dangar</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Caching%20http%20google%20deb%20files&In-Reply-To=%3CCA%2BsSnVai079zNS6X%2BRni9qaRKOAt6PF%2BnrZQhBR462zL1zWZuA%40mail.gmail.com%3E"
       TITLE="[squid-users] Caching http google deb files">hardikdangar+squid at gmail.com
       </A><BR>
    <I>Fri Oct  7 09:26:06 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="012942.html">[squid-users] Caching http google deb files
</A></li>
        <LI>Next message (by thread): <A HREF="012955.html">[squid-users] Caching http google deb files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12949">[ date ]</a>
              <a href="thread.html#12949">[ thread ]</a>
              <a href="subject.html#12949">[ subject ]</a>
              <a href="author.html#12949">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Alex,

I totally get that Vary code is different, I have been trying to understand
squid code for last few days although my C, C++ skills are very limited I
am able to understand bits and pieces here and there. I have also read HTTP
1.1 specs for cache ( <A HREF="https://tools.ietf.org/html/rfc2616#section-13">https://tools.ietf.org/html/rfc2616#section-13</A> )

After doing fair bit of research I believe we need to two things,

1) start a campaign to convince webmasters to update their server configs,
 for that to happen I am doing my research on apache and Nginx servers on
how to implement ( HTTP 1.1 spec cache guidelines ) and will provide them
copy paste configs for all requests or for the file types like
deb,apk,rpm,exe(binary files),etc...

I am documenting that here,
<A HREF="https://hardikdangar.github.io/thecacheproject/">https://hardikdangar.github.io/thecacheproject/</A>

and once I finish everything I will post everything at the squid-dev list
here so all of you can look at it and if you guys approve it, I will
personally try to contact the big providers and send them above page with
solutions. and will ask community support and will publish it to twitter
and other social sites to get support.

2) I want to build a module which will first handle Vary: * requests and
convert it into Vary: Accept-Encoding or something similar but only for the
ACL's specified by cache administrator.

Next, there are use cases like GitHub which are very difficult to handle
but I feel there is a way we can handle those use cases so I will build ACL
for those.

For this, i am trying to understand squid code, After looking at dev docs,
I understand how the request is handled at clientBeginRequest. But I am
very confused at how squid handles the response.  I know
client_side_reply.cc is the file where the response is handled but I am not
sure how StoreEntry::checkCachable() method in store.cc is called before it
as that is the method i get in squid logs when the cache is denied.

Basically, I need to know how to debug line by line source for squid. Right
now my method of testing involves building squid and adding debug lines and
its very slow process as it takes time every time. Can you help me with
this ? is there a way i could send a request directly to squid source file
i.e debug source code line by line ? If so what are the tools required and
how to set it up ?

Again, I am sorry if i am asking too much but my C experience is very
limited and i feel like i am asking very naive questions but these are very
difficult for me at this stage and i really appreciate all of the squid
dev teams who is been answering all of my questions. Thank you very much
for that.
--------

I just want a better cache support for squid and modern day use cases.

On Thu, Oct 6, 2016 at 11:25 PM, Alex Rousskov &lt;
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt; wrote:

&gt;<i> On 10/06/2016 11:14 AM, Linda A. Walsh wrote:
</I>&gt;<i> &gt; Alex Rousskov wrote:
</I>&gt;<i> &gt;&gt; We can, but ignoring Vary requires more/different work than adding
</I>&gt;<i> &gt;&gt; another refresh_pattern option. Vary is not a refresh mechanism so
</I>&gt;<i> &gt;&gt; different code areas need to be modified to ignore (but still forward!)
</I>&gt;<i> &gt;&gt; Vary.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt;    I can't say for certain, but I'd give it a 75% shot of it being
</I>&gt;<i> &gt; used as a forced-refresh pattern
</I>&gt;<i>
</I>&gt;<i> The [ab]use cases do not matter here -- the _code_ handling Vary is very
</I>&gt;<i> different from the code handling refresh logic. That difference is
</I>&gt;<i> natural and unavoidable because the two protocol mechanisms are very
</I>&gt;<i> different, even if they both can be and are used to create the same effect.
</I>&gt;<i>
</I>&gt;<i> Alex.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20161007/15415130/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20161007/15415130/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="012942.html">[squid-users] Caching http google deb files
</A></li>
	<LI>Next message (by thread): <A HREF="012955.html">[squid-users] Caching http google deb files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12949">[ date ]</a>
              <a href="thread.html#12949">[ thread ]</a>
              <a href="subject.html#12949">[ subject ]</a>
              <a href="author.html#12949">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
