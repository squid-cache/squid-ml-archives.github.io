<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] FW: squid tproxy ssl-bump and Protocol error (TLS code: SQUID_ERR_SSL_HANDSHAKE)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20FW%3A%20squid%20tproxy%20ssl-bump%20and%20Protocol%20error%20%28TLS%0A%20code%3A%20SQUID_ERR_SSL_HANDSHAKE%29&In-Reply-To=%3CCAPxJK5BNq_Y5Frbzb10Se1PPceRAfkG2R1-NUeO-2HJk2cWDCg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012982.html">
   <LINK REL="Next"  HREF="012992.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] FW: squid tproxy ssl-bump and Protocol error (TLS code: SQUID_ERR_SSL_HANDSHAKE)</H1>
    <B>Marc</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20FW%3A%20squid%20tproxy%20ssl-bump%20and%20Protocol%20error%20%28TLS%0A%20code%3A%20SQUID_ERR_SSL_HANDSHAKE%29&In-Reply-To=%3CCAPxJK5BNq_Y5Frbzb10Se1PPceRAfkG2R1-NUeO-2HJk2cWDCg%40mail.gmail.com%3E"
       TITLE="[squid-users] FW: squid tproxy ssl-bump and Protocol error (TLS code: SQUID_ERR_SSL_HANDSHAKE)">gaardiolor at gmail.com
       </A><BR>
    <I>Mon Oct 10 13:53:40 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="012982.html">[squid-users] FW: squid tproxy ssl-bump and Protocol error (TLS	code: SQUID_ERR_SSL_HANDSHAKE)
</A></li>
        <LI>Next message (by thread): <A HREF="012992.html">[squid-users] FW: squid tproxy ssl-bump and Protocol error (TLS	code: SQUID_ERR_SSL_HANDSHAKE)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12988">[ date ]</a>
              <a href="thread.html#12988">[ thread ]</a>
              <a href="subject.html#12988">[ subject ]</a>
              <a href="author.html#12988">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, Oct 10, 2016 at 11:41 AM, Eliezer Croitoru &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>&gt; wrote:
&gt;<i> Thanks for updating!
</I>&gt;<i>
</I>&gt;<i> May I ask what version of Linux are you using squid ontop?
</I>&gt;<i> I have released couple RPMs and am working on releasing a drop-in tar.xz for debian based systems.
</I>
Yeah sure, I'm using Fedora Core 24.
- Installed squid source RPM
- changed the specfile; changed version, removed patches, removed some
configure flags, added --disable-strict-error-checking otherwise it
didn't want to compile.
- built a new rpm .. works on my system, but ymmv
- patch against the Fedora source rpm spec file:

--- rpmbuild-squid-3.5.21/SPECS/squid.spec      2016-10-09
00:33:42.490934810 +0200
+++ rpmbuild-squid-4.0.14/SPECS/squid.spec      2016-10-09
17:33:26.739659533 +0200
@@ -1,7 +1,7 @@
 %define __perl_requires %{SOURCE98}

 Name:     squid
-Version:  3.5.21
+Version:  4.0.14
 Release:  1%{?dist}
 Summary:  The Squid proxy caching server
 Epoch:    7
@@ -9,8 +9,8 @@
 License:  GPLv2+ and (LGPLv2+ and MIT and BSD and Public Domain)
 Group:    System Environment/Daemons
 URL:      <A HREF="http://www.squid-cache.org">http://www.squid-cache.org</A>
-Source0:  <A HREF="http://www.squid-cache.org/Versions/v3/3.5/squid-%{version">http://www.squid-cache.org/Versions/v3/3.5/squid-%{version</A>}.tar.xz
-Source1:  <A HREF="http://www.squid-cache.org/Versions/v3/3.5/squid-%{version">http://www.squid-cache.org/Versions/v3/3.5/squid-%{version</A>}.tar.xz.asc
+Source0:  <A HREF="http://www.squid-cache.org/Versions/v4/squid-%{version">http://www.squid-cache.org/Versions/v4/squid-%{version</A>}.tar.xz
+Source1:  <A HREF="http://www.squid-cache.org/Versions/v4/squid-%{version">http://www.squid-cache.org/Versions/v4/squid-%{version</A>}.tar.xz.asc
 Source2:  squid.logrotate
 Source3:  squid.sysconfig
 Source4:  squid.pam
@@ -27,11 +27,6 @@
 # Local patches
 # Applying upstream patches first makes it less likely that local patches
 # will break upstream ones.
-Patch201: squid-3.1.0.9-config.patch
-Patch202: squid-3.1.0.9-location.patch
-Patch203: squid-3.0.STABLE1-perlpath.patch
-Patch204: squid-3.5.9-include-guards.patch
-Patch205: 0001-cppunit-config-no-longer-exists-use-pkg-config.patch

 Buildroot: %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id_u} -n)
 Requires: bash &gt;= 2.0
@@ -87,11 +82,6 @@
 # Backported patches

 # Local patches
-%patch201 -p1 -b .config
-%patch202 -p1 -b .location
-%patch203 -p1 -b .perlpath
-%patch204 -p0 -b .include-guards
-%patch205 -p1 -b .cppunit-config

 %build
 # cppunit-config patch changes configure.ac
@@ -114,8 +104,8 @@
    --enable-eui \
    --enable-follow-x-forwarded-for \
    --enable-auth \
-   --enable-auth-basic=&quot;DB,LDAP,MSNT-multi-domain,NCSA,NIS,PAM,POP3,RADIUS,SASL,SMB,getpwnam&quot;
\
-   --enable-auth-ntlm=&quot;smb_lm,fake&quot; \
+   --enable-auth-basic=&quot;DB,LDAP,NCSA,NIS,PAM,POP3,RADIUS,SASL,SMB,getpwnam&quot; \
+   --enable-auth-ntlm=&quot;fake&quot; \
    --enable-auth-digest=&quot;file,LDAP&quot; \
    --enable-auth-negotiate=&quot;kerberos&quot; \
    --enable-external-acl-helpers=&quot;LDAP_group,time_quota,session,unix_group,wbinfo_group&quot;
\
@@ -145,7 +135,8 @@
    --with-openssl \
    --with-pthreads \
    --disable-arch-native \
-   --with-pic
+   --with-pic \
+   --disable-strict-error-checking

 make \
        DEFAULT_SWAP_DIR=%{_localstatedir}/spool/squid \
@@ -191,7 +182,7 @@
 install -m 644 %{SOURCE5}
$RPM_BUILD_ROOT%{_sysconfdir}/NetworkManager/dispatcher.d/20-squid
 mkdir -p $RPM_BUILD_ROOT%{_localstatedir}/log/squid
 mkdir -p $RPM_BUILD_ROOT%{_localstatedir}/spool/squid
-chmod 644 contrib/url-normalizer.pl contrib/rredir.* contrib/user-agents.pl
+chmod 644 contrib/url-normalizer.pl contrib/user-agents.pl
 iconv -f ISO88591 -t UTF8 ChangeLog -o ChangeLog.tmp
 mv -f ChangeLog.tmp ChangeLog

@@ -213,7 +204,7 @@
 %defattr(-,root,root,-)
 %license COPYING
 %doc CONTRIBUTORS README ChangeLog QUICKSTART src/squid.conf.documented
-%doc contrib/url-normalizer.pl contrib/rredir.* contrib/user-agents.pl
+%doc contrib/url-normalizer.pl contrib/user-agents.pl

 %{_unitdir}/squid.service
 %attr(755,root,root) %dir %{_libexecdir}/squid
@@ -286,6 +277,9 @@

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="012982.html">[squid-users] FW: squid tproxy ssl-bump and Protocol error (TLS	code: SQUID_ERR_SSL_HANDSHAKE)
</A></li>
	<LI>Next message (by thread): <A HREF="012992.html">[squid-users] FW: squid tproxy ssl-bump and Protocol error (TLS	code: SQUID_ERR_SSL_HANDSHAKE)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12988">[ date ]</a>
              <a href="thread.html#12988">[ thread ]</a>
              <a href="subject.html#12988">[ subject ]</a>
              <a href="author.html#12988">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
