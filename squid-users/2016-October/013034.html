<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] TCP_MISS/304 question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20TCP_MISS/304%20question&In-Reply-To=%3C2eb27685-aac2-ee8a-d8e4-14eaf496404f%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013033.html">
   <LINK REL="Next"  HREF="013035.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] TCP_MISS/304 question</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20TCP_MISS/304%20question&In-Reply-To=%3C2eb27685-aac2-ee8a-d8e4-14eaf496404f%40measurement-factory.com%3E"
       TITLE="[squid-users] TCP_MISS/304 question">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Oct 13 20:48:52 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="013033.html">[squid-users] TCP_MISS/304 question
</A></li>
        <LI>Next message (by thread): <A HREF="013035.html">[squid-users] TCP_MISS/304 question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13034">[ date ]</a>
              <a href="thread.html#13034">[ thread ]</a>
              <a href="subject.html#13034">[ subject ]</a>
              <a href="author.html#13034">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/13/2016 01:44 PM, Yuri Voinov wrote:

&gt;<i> However, this is nothing more than word games, Alex. 
</I>
... unless the definition of a hit affects your billing or your
interpretation of Squid documentation or the developer interpretation of
the code. Definitions matter! You yourself have seen their importance
when you showed your excellent byte hit ratio results but folks were
looking at the ordinary document hit ratio numbers instead.


&gt;<i> The question is -
</I>&gt;<i> can we more or less significant differences from known what hit proxy
</I>&gt;<i> code level and / or transactions which, obviously, on the proxy level,
</I>&gt;<i> we can see in its entirety.
</I>
Sorry, I do not understand the question.


&gt;&gt;<i> Unfortunately, there are too many definitions of a &quot;hit&quot;.
</I>
&gt;<i> There is no many definitions of hit. We are talking about the caching
</I>&gt;<i> proxy, which is basically no different from all the other caches, and
</I>&gt;<i> subject to the same rules.
</I>
You are oversimplifying a complex subject matter. If Squid delivers a
single response comprising 1000 bytes from the cache and 10 bytes from
the origin server, is that a hit or a miss? If Squid delivers the entire
response from the cache but spends 10 minutes talking to the origin
server about that object first, is that a hit or a miss? Different
people will give you different answers to those questions.

We have [poorly defined] byte hits, document hits, revalidation hits,
stale hits, partial hits, etc., etc.


&gt;<i> If the first access does not find an object in the cache, it requests
</I>&gt;<i> from the network,
</I>
yes

&gt;<i> saves in the cache,
</I>
or does not

&gt;<i> and re-treatment or gets a hit,
</I>
or does not

&gt;<i> &quot;the object is not changed.&quot; Dot.
</I>
or the Squid-cached object did not change but the client-cached object
did. Or vice versa.


&gt;<i> If the time in the cache
</I>&gt;<i> object lifetime expires, or a lifetime on the server timed out - the
</I>&gt;<i> object is requested again and a miss is recorded.
</I>
* Yes, if you define a miss as &quot;contact with the origin server&quot;.
* No, if contact with the origin server is OK for a hit as long as the
server does not send the response _body_ back to Squid.


&gt;<i> if
</I>&gt;<i> the proxy responds to the client &quot;has not changed&quot;, it means, in fact,
</I>&gt;<i> that the client has a copy of the object
</I>
Yes.

&gt;<i> and a copy of the proxy object,
</I>
The copy in the proxy cache may be different from the copy in the client
cache or may not exist at all.


&gt;<i> the proxy and responds to the client, performing REFRESH that the object
</I>&gt;<i> did not change. What is this, if not hit?
</I>
Assuming the proxy asked the origin server whether the object in the
client (or the proxy, depending on the circumstances) cache is fresh,
for many, it is

* a [document] miss (because there was a potentially very slow contact
with the origin server) or
* a [byte] hit (because the response body came from the Squid cache and
not from the origin server).

Resisting the existence of different valid hit definitions is futile
IMO. State what _your_ definition is (be as precise as possible; this
may require several iterations) and then you may ask whether a
particular transaction is a hit.

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="013033.html">[squid-users] TCP_MISS/304 question
</A></li>
	<LI>Next message (by thread): <A HREF="013035.html">[squid-users] TCP_MISS/304 question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13034">[ date ]</a>
              <a href="thread.html#13034">[ thread ]</a>
              <a href="subject.html#13034">[ subject ]</a>
              <a href="author.html#13034">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
