<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] TCP_MISS/304 question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20TCP_MISS/304%20question&In-Reply-To=%3C9e6e6e8c-a63a-41e4-1006-7d9485167ba8%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013046.html">
   <LINK REL="Next"  HREF="013042.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] TCP_MISS/304 question</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20TCP_MISS/304%20question&In-Reply-To=%3C9e6e6e8c-a63a-41e4-1006-7d9485167ba8%40treenet.co.nz%3E"
       TITLE="[squid-users] TCP_MISS/304 question">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Oct 14 12:07:12 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="013046.html">[squid-users] TCP_MISS/304 question
</A></li>
        <LI>Next message (by thread): <A HREF="013042.html">[squid-users] TCP_MISS/304 question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13041">[ date ]</a>
              <a href="thread.html#13041">[ thread ]</a>
              <a href="subject.html#13041">[ subject ]</a>
              <a href="author.html#13041">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 14/10/2016 10:57 p.m., Yuri Voinov wrote:
&gt;<i> 
</I>&gt;<i> It seems I found the root of problem.
</I>&gt;<i> 
</I>&gt;<i> When cached object refreshed and goes via HTTP, it gives
</I>&gt;<i> TCP_REFRESH_UNMODIFIED in access.log, which is correct.
</I>&gt;<i> When the _same_ _cached_ _object_ refreshes and goes via HTTPS, it gives
</I>&gt;<i> TCP_MISS/304 in access.log, and this is wrong.
</I>&gt;<i> 
</I>&gt;<i> It seems like bug.
</I>&gt;<i> 
</I>
Assuming you did the test right it does seem that way.

The way you have described it makes me think you are probably not
testing it right. Since HTTPS is not exactly like HTTP (the 'S' has
meaning), your test has to treat the HTTPS object as if it had a
completely different URL to the HTTP one.

HTTP objects are not interchangeable with HTTPS objects, even when the
payload bytes are the same. And that also means you must not use
Store-ID to mix them up.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="013046.html">[squid-users] TCP_MISS/304 question
</A></li>
	<LI>Next message (by thread): <A HREF="013042.html">[squid-users] TCP_MISS/304 question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13041">[ date ]</a>
              <a href="thread.html#13041">[ thread ]</a>
              <a href="subject.html#13041">[ subject ]</a>
              <a href="author.html#13041">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
