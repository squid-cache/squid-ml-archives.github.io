<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] external_acl_type problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20external_acl_type%20problem&In-Reply-To=%3Cc49ff38c-4ad5-f71e-8389-f4810e2258c5%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013147.html">
   <LINK REL="Next"  HREF="013191.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] external_acl_type problem</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20external_acl_type%20problem&In-Reply-To=%3Cc49ff38c-4ad5-f71e-8389-f4810e2258c5%40treenet.co.nz%3E"
       TITLE="[squid-users] external_acl_type problem">squid3 at treenet.co.nz
       </A><BR>
    <I>Mon Oct 24 06:51:09 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="013147.html">[squid-users] external_acl_type problem
</A></li>
        <LI>Next message (by thread): <A HREF="013191.html">[squid-users] external_acl_type problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13175">[ date ]</a>
              <a href="thread.html#13175">[ thread ]</a>
              <a href="subject.html#13175">[ subject ]</a>
              <a href="author.html#13175">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 23/10/2016 11:39 p.m., reinerotto wrote:
&gt;<i> 1)
</I>&gt;<i> According to
</I>&gt;<i> <A HREF="http://www.squid-cache.org/Doc/config/external_acl_type/">http://www.squid-cache.org/Doc/config/external_acl_type/</A>
</I>&gt;<i> 
</I>&gt;<i> in squid.conf, this 
</I>&gt;<i> 
</I>&gt;<i> external_acl_type check_delay ttl=0 cache=0 %SRC /etc/squid/check_delay.sh
</I>&gt;<i> 
</I>&gt;<i> should start 0 helpers immediately after squid (3.5.22) start-up.
</I>&gt;<i> However, I always see 5.
</I>
Odd. The docs are slightly incorrect the max= value should be 5 not 20.

But the startup should be 0 in all Squid-3.2+ like you say. Are you
applying any patches to external_acl.cc or helper/ChildConfig.cc ?


&gt;<i> 
</I>&gt;<i> 2)
</I>&gt;<i> I often see this:
</I>&gt;<i> Sat Oct 22 23:51:18 2016 user.alert syslog: The check_delay helpers are
</I>&gt;<i> crashing too rapidly, need help!
</I>&gt;<i> Sat Oct 22 23:51:18 2016 local4.notice squid[21677]: Squid Parent: (squid-1)
</I>&gt;<i> process 27685 exited with status 1
</I>&gt;<i>  
</I>&gt;<i> Still trying to trace down the problem, I notice, that in this case some
</I>&gt;<i> helpers still kept alive, although
</I>&gt;<i> I expect them to be killed, too, in case squid-1 exits.
</I>
That is only logged when helpers exit by themselves. Properly
functioning helpers are required to always remain active and listening
for more lookups from Squid. Only when Squid terminates the stdin
channel should the helper exit.

&gt;<i> 
</I>&gt;<i> I need to add, that I am running squid on an embedded system, cross-compiled
</I>&gt;<i> for MIPS.
</I>&gt;<i> So there _might_ be some assumptions made for &quot;standard LINUX&quot; squid, which
</I>&gt;<i> are not true in my case.
</I>&gt;<i> 
</I>
I hope there is no difference. Perl scripts are supposed to work the
same on any OSthat supports Perl.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="013147.html">[squid-users] external_acl_type problem
</A></li>
	<LI>Next message (by thread): <A HREF="013191.html">[squid-users] external_acl_type problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13175">[ date ]</a>
              <a href="thread.html#13175">[ thread ]</a>
              <a href="subject.html#13175">[ subject ]</a>
              <a href="author.html#13175">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
