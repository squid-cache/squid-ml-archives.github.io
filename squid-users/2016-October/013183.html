<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Caching Google Chrome googlechromestandaloneenterprise64.msi
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Caching%20Google%20Chrome%0A%20googlechromestandaloneenterprise64.msi&In-Reply-To=%3C4284d81f-5edd-203e-5927-cfa0a0ec4b0d%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013216.html">
   <LINK REL="Next"  HREF="013186.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Caching Google Chrome googlechromestandaloneenterprise64.msi</H1>
    <B>Yuri</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Caching%20Google%20Chrome%0A%20googlechromestandaloneenterprise64.msi&In-Reply-To=%3C4284d81f-5edd-203e-5927-cfa0a0ec4b0d%40gmail.com%3E"
       TITLE="[squid-users] Caching Google Chrome googlechromestandaloneenterprise64.msi">yvoinov at gmail.com
       </A><BR>
    <I>Mon Oct 24 10:26:15 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="013216.html">[squid-users] Caching Google Chrome googlechromestandaloneenterprise64.msi
</A></li>
        <LI>Next message (by thread): <A HREF="013186.html">[squid-users] Caching Google Chrome googlechromestandaloneenterprise64.msi
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13183">[ date ]</a>
              <a href="thread.html#13183">[ thread ]</a>
              <a href="subject.html#13183">[ subject ]</a>
              <a href="author.html#13183">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>No, Amos, I'm not trolling your or another developers.

I just really do not understand why there is a caching proxy, which is 
almost nothing can cache in the modern world. And that in vanilla 
version gives a maximum of 10-30% byte hit. From me personally, it needs 
no justification and no explanation. And the results.

I can not explain to management why no result, referring to your 
explanations or descriptions of standards. I think it's understandable.

At the present time to obtain any acceptable result it is necessary to 
make a hell of a lot of effort. To maintenance such installation is not 
easy.

And as with every new version of the caching level it falls - and it is 
very easy to check - it is very difficult to explain to management, is 
not it?

It's not my imagination - this is confirmed by dozens of Squid 
administrators, including me personally familiar. Therefore, I would 
heed to claim that I lie or deliberately introduce someone else astray.


24.10.2016 12:03, Amos Jeffries &#1087;&#1080;&#1096;&#1077;&#1090;:
&gt;<i> On 24/10/2016 6:28 a.m., <A HREF="https://lists.squid-cache.org/listinfo/squid-users">garryd at comnet.uz</A> wrote:
</I>&gt;&gt;<i> On 2016-10-23 18:31, Amos Jeffries wrote:
</I>&gt;&gt;&gt;<i> On 23/10/2016 2:32 a.m., garryd wrote:
</I>&gt;&gt;&gt;&gt;<i> Since I started use Squid, it's configuration always RFC compliant by
</I>&gt;&gt;&gt;&gt;<i> default, _but_ there were always knobs for users to make it HTTP
</I>&gt;&gt;&gt;&gt;<i> violent. It was in hands of users to decide how to handle a web
</I>&gt;&gt;&gt;&gt;<i> resource. Now it is not always possible, and the topic is an evidence.
</I>&gt;&gt;&gt;&gt;<i> For example, in terms of this topic, users can't violate this RFC
</I>&gt;&gt;&gt;&gt;<i> statement [1]:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>     A Vary field value of &quot;*&quot; signals that anything about the request
</I>&gt;&gt;&gt;&gt;<i>     might play a role in selecting the response representation, possibly
</I>&gt;&gt;&gt;&gt;<i>     including elements outside the message syntax (e.g., the client's
</I>&gt;&gt;&gt;&gt;<i>     network address).  A recipient will not be able to determine whether
</I>&gt;&gt;&gt;&gt;<i>     this response is appropriate for a later request without forwarding
</I>&gt;&gt;&gt;&gt;<i>     the request to the origin server.  A proxy MUST NOT generate a Vary
</I>&gt;&gt;&gt;&gt;<i>     field with a &quot;*&quot; value.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> [1] <A HREF="https://tools.ietf.org/html/rfc7231#section-7.1.4">https://tools.ietf.org/html/rfc7231#section-7.1.4</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Please name the option in any version of Squid which allowed Squid to
</I>&gt;&gt;&gt;<i> cache those &quot;Vary: *&quot; responses.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> No such option ever existed. For the 20+ years Vary has existed Squid
</I>&gt;&gt;&gt;<i> has behaved in the same way it does today. For all that time you did not
</I>&gt;&gt;&gt;<i> notice these responses.
</I>&gt;&gt;<i> You are absolutely right, but there were not such abuse vector in the
</I>&gt;&gt;<i> past (at least in my practice). There were tools provided by devs to
</I>&gt;&gt;<i> admins to protect against trending abuse cases.
</I>&gt;<i> What trend? There is exactly one mentioned URL that I'm aware of, the
</I>&gt;<i> Chrome browser download URL. I've posted two reasons why Chrome uses the
</I>&gt;<i> Vary:* header. Just opinions of mine, but formed after actual
</I>&gt;<i> discussions with the Chrome developers some years back.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> [I very much dislike writing this. But you seem to have been sucked in
</I>&gt;<i> and deserve to know the history.]
</I>&gt;<i>
</I>&gt;<i> All the fuss that is going on AFAICS was started by Yuri. His comment
</I>&gt;<i> history here and in bugzilla, and in private responses range from
</I>&gt;<i> non-compromising &quot;cache everything no matter what - do what I say, now!&quot;
</I>&gt;<i> (repeatedy in unrelated bugzilla reports), &quot;f*ck the RFCs and anyone
</I>&gt;<i> following them, just store everything I dont care about what happens&quot;
</I>&gt;<i> (this mornings post), to personal attacks against anyone who mentions
</I>&gt;<i> the previous stance might have problems (all the &quot;Squid developers
</I>&gt;<i> believe/say/...&quot; comments - none of which match what the team we have
</I>&gt;<i> actually said to him or believe).
</I>&gt;<i>
</I>&gt;<i> There is one other email address which changes its name occasionally and
</I>&gt;<i> posts almost exactly the same words as Yuri's. So it looks to me as Yuri
</I>&gt;<i> and some sock puppets performing a campaign to spread lies and FUD about
</I>&gt;<i> Squid and hurt the people doing work on it.
</I>&gt;<i>
</I>&gt;<i> Not exactly a good way to get people to do things for free. But it seems
</I>&gt;<i> to have worked on getting you and a few others now doing the coding part
</I>&gt;<i> for him at no cost, and I have now wasted time responding to you and
</I>&gt;<i> thinking of a solution for it that might get accepted for merge.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> This particular topic is not the first to have such behaviour by Yuri.
</I>&gt;<i> There have been other things where someone made a mistake (overlooked
</I>&gt;<i> something) and all hell full of insults broke loose at them. And several
</I>&gt;<i> other cases where missing features in Squid did not get instant
</I>&gt;<i> obedience to quite blunt and insulting demands. Followed by weeks of
</I>&gt;<i> insults until the bug was fixed by other people - then suddenly polite
</I>&gt;<i> Yuri comes back overnight.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> As a developer, I personally decided not to write the requested code.
</I>&gt;<i> Not in the way demanded. This seems to have upset Yuri who has taken to
</I>&gt;<i> insulting me and the rest of the dev team as a whole. I'm not sure if he
</I>&gt;<i> is trolling to intentionally cause the above mentioned effects, or
</I>&gt;<i> really in need of medical assistance to deal with work related stress.
</I>&gt;<i>
</I>&gt;<i> [/history]
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> So, the question arised,
</I>&gt;&gt;<i> what changed in Squid development policy?
</I>&gt;<i> In policy: Nothing I'm aware of in the past 10 years.
</I>&gt;<i>
</I>&gt;<i> What changed on the Internet? a new bunch of RFCs came out, the server
</I>&gt;<i> and clients Squid talks to all got updated to follow those documents
</I>&gt;<i> more closely.
</I>&gt;<i>
</I>&gt;<i> What changed in Squid? the dev team have been slowly adding the new
</I>&gt;<i> abilities to Squid. One by one, its only ~90% (maybe less) compliant
</I>&gt;<i> withe the MUST conditions, not even close to that on the SHOULDs, MAYs,
</I>&gt;<i> and implied processing abilities.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> What do you think should happen to Squid when all the software it talks
</I>&gt;<i> to speaks and expects what the RFCs say they should expect from
</I>&gt;<i> recipients/Squid ?
</I>&gt;<i>
</I>&gt;<i> Consider the extreme this leads towards: You could easily write a piece
</I>&gt;<i> of software that took HTTP requests and sent back random data that
</I>&gt;<i> looked vaguely like HTTP responses. But how useless that is when used as
</I>&gt;<i> a proxy. So much for ignoring the HTTP specs.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> Why there is no configuration
</I>&gt;&gt;<i> option like 'ignore_vary [acl]', so highly demanded by many users in the
</I>&gt;&gt;<i> list?
</I>&gt;<i> AFAIK nobody has ever even proposed adding one until these past few weeks.
</I>&gt;<i>
</I>&gt;<i> A proposals to ignore &quot;Vary: *&quot; has come up every few years, but when
</I>&gt;<i> the proposer was made aware of the server expectations as stated in the
</I>&gt;<i> RFC 2616 they went away, no attempt to go any further. So I assume that
</I>&gt;<i> means it wasn't really a problem for them, not a serious one.
</I>&gt;<i>
</I>&gt;<i> In RFC 2616 (or older) compliant web there is no benefit to caching
</I>&gt;<i> these objects. The revalidate clause did not exist so the server can be
</I>&gt;<i> expected to always produce a new one.
</I>&gt;<i> So what is gained by caching it? a waste of space other HIT's could have
</I>&gt;<i> used better. Negative benefits really, not even zero gain.
</I>&gt;<i>
</I>&gt;<i> The middle sentence of that part of RFC 7231 has only existed for the
</I>&gt;<i> past few years. Even I had overlooked it until today. Sorry, but I have
</I>&gt;<i> been concentrating on getting Cache-Control going properly (no-cache and
</I>&gt;<i> side effects are still a hot topic 4 years after it went in). Vary is
</I>&gt;<i> much broken in other serious ways, '*' storage seems a minor issue to me.
</I>&gt;<i>
</I>&gt;<i> Also be aware that Squid is still in the process of moving from HTTP/1.0
</I>&gt;<i> behaviour to HTTP/1.1 revalidation. We (Eduard, Alex and myself) have
</I>&gt;<i> not magically made everything work perfectly in one release. This is one
</I>&gt;<i> of probably many cases where revalidation is potentially usable - just
</I>&gt;<i> that nobody has coded it yet. Or cases which were previously forbidden
</I>&gt;<i> and HTTPbis discussions (recent 7-ish years) shown that other vendors
</I>&gt;<i> are widely okay with it so its been allowed now by the 723x RFC series.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> As maintainer its my responsibility to point out the issues to anyone
</I>&gt;<i> even proposing a violation gets added. To make sure they are aware of
</I>&gt;<i> the expectations the servers and clients may have of Squid.
</I>&gt;<i>
</I>&gt;<i> All violation proposals get the same treatment (heck all patches get
</I>&gt;<i> this same treatment too, I'm just a little more lenient on compliance
</I>&gt;<i> increasing patches):
</I>&gt;<i>   - make the proposer aware of the problems they will cause,
</I>&gt;<i>   ** my posts in reply to this and other threads.
</I>&gt;<i>
</I>&gt;<i>   - mention any alternatives (where available),
</I>&gt;<i>   ** others have mentioned eCAP/ICAP as better suited to such violations.
</I>&gt;<i> That is exactly what those interfaces are designed for.
</I>&gt;<i>   ** re-reading the section you quoted above, the middle sentence adds a
</I>&gt;<i> possibility I overlooked earlier. You now have a potential direction to
</I>&gt;<i> go without even doing any violation. The audit process shows its worth
</I>&gt;<i> right there :-).
</I>&gt;<i>
</I>&gt;<i>   - and let them decide if it is worth the trouble to go forward.
</I>&gt;<i>   ** so far mostly whats happened is a lot of complaints that &quot;Squid dev
</I>&gt;<i> team&quot; are not providing things for free, on demand, to service a very
</I>&gt;<i> abusive and extremist person. Or just outright abuse. Seems like the
</I>&gt;<i> individual who started the discussions does not care about getting it to
</I>&gt;<i> happen. You care more, and as you say below ...
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> Personally, I'm no affected by the Vary abuse, but I suppose there
</I>&gt;&gt;<i> will be increasing number of abuse cases in the future.
</I>&gt;<i> Me neither (for seeing the problem in my sysadmin roles), so for both of
</I>&gt;<i> us and many others it seems (to me) not to be a major problem. Or at
</I>&gt;<i> least not worth facing the consequences the proposed change risks causing.
</I>&gt;<i>
</I>&gt;<i> We can guess at what the future holds. But until we get there we really
</I>&gt;<i> dont know.
</I>&gt;<i>
</I>&gt;<i> My view of things includes years of app developer queries sent to the
</I>&gt;<i> IETF HTTPbis WG. There is an increasing number of applications that
</I>&gt;<i> *need* proxies to follow the spec requirements. I am not seeing them
</I>&gt;<i> much in the wild yet, but those applications are definitely around and
</I>&gt;<i> breaking them could lead people to a lot of trouble.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> FWIW:  The current spec for HTTP/1.1 is extremely tollerant. There are a
</I>&gt;<i> very few places where it comes to an absolute inviolate rule. Those are
</I>&gt;<i> cases which have very clear use-case mentioned in the spec and problems
</I>&gt;<i> being avoided mentioned as well.
</I>&gt;<i>
</I>&gt;<i> For example the quoted section above about Vary. I overlooked that
</I>&gt;<i> middle sentance that has been added since 2616. That creates the leeway
</I>&gt;<i> we need to cache the object within compliance. We are thusly allowed to
</I>&gt;<i> treat &quot;Vary:*&quot; as another of the must-revalidate caching cases, just
</I>&gt;<i> like Cc:private or Authenticated responses.
</I>&gt;<i> (From the use-cases that have been mentioned in IETF WG about this
</I>&gt;<i> header, and cases people have been advised to use it I very much doubt
</I>&gt;<i> any server will respond with 304 to such revalidation. But we might get
</I>&gt;<i> lucky, or future servers might do so.)
</I>&gt;<i>
</I>&gt;<i> NP: all previous discussions and proposals of Vary:* handling came up
</I>&gt;<i> when 2616 was the spec to follow, and Squid did not do 1.1 much anyway -
</I>&gt;<i> so using revalidation was not even on the horizon so to speak.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Anyhow, back to me rant ;-P
</I>&gt;<i>
</I>&gt;<i> The current specs were written by representatives standing for *all* the
</I>&gt;<i> major browsers, *all* the major web servers, *all* the major
</I>&gt;<i> language/library frameworks, almost all the major command-line tools,
</I>&gt;<i> and many application developers as well.
</I>&gt;<i>
</I>&gt;<i> So it is not written in isolation by some few &quot;ivory tower types&quot; Yuri
</I>&gt;<i> would have you believe (yes some specs are - HTTP is not, or at least
</I>&gt;<i> those types are outnumbered for HTTP). The RFC 723x set is explicitly a
</I>&gt;<i> collection of details about how the current HTTP applications actually
</I>&gt;<i> found around the world *do* talk to each other today and how best to
</I>&gt;<i> exchange messages so the processing operations are understood at both
</I>&gt;<i> ends of the network connection.
</I>&gt;<i>
</I>&gt;<i> The HTTP RFC's are effectively a description of current best practice.
</I>&gt;<i> Violating is only useful if you are fixing some broken application your
</I>&gt;<i> particular proxy has to deal with. All other cases are just causing
</I>&gt;<i> inefficiency and varying amounts of nasty depending on the violation.
</I>&gt;<i>
</I>&gt;<i> This latter point is part of why we require a clear use-case before
</I>&gt;<i> accepting violation patches - the need for it should be well thought
</I>&gt;<i> out. People who choose to violate that type of spec without a good
</I>&gt;<i> reason are just being stupid.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The three persons (well, 2 use aliased email addresses - I suspect are
</I>&gt;<i> actually one or two persons from the same region of the world) providing
</I>&gt;<i> the most noise about Vary keep demanding it be provided for free.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> One of your
</I>&gt;&gt;<i> answers confirmed my assumption regarding the question:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>   - there is a very high risk of copy-and-paste sysadmin spreading the
</I>&gt;&gt;&gt;<i> problems without realising what they are doing. Particularly since those
</I>&gt;&gt;&gt;<i> proposing it are so vocal about how great it *seems* for them.
</I>&gt;<i> When someone else does the coding I act as both auditor and maintainer.
</I>&gt;<i> The policies checked during audit do not go into good/bad judgements -
</I>&gt;<i> just: code style, quality (no identifiable bugs) and a clear statement
</I>&gt;<i> of the need behind the addition (for the merge repo comment to guide
</I>&gt;<i> future maintenance of that code).
</I>&gt;<i>
</I>&gt;<i> As maintainer I merge patches myself only if I'm happy to take on code
</I>&gt;<i> maintenance for them, or supplier explicitly takes it on themselves (ie
</I>&gt;<i> helper authors). Sometimes I get patches up to scratch in audit then let
</I>&gt;<i> others merge, or advise they just be used as custom patches. In the
</I>&gt;<i> latter case we at least know that patch is not full of obvious bug
</I>&gt;<i> behaviours.
</I>&gt;<i>
</I>&gt;<i> But note so far *nobody* has submitted patches to audit about this. It
</I>&gt;<i> has all just been a rather heated discussion in various unrelated bug
</I>&gt;<i> reports and some threads in this users list.
</I>&gt;<i>
</I>&gt;<i> Amos
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="013216.html">[squid-users] Caching Google Chrome googlechromestandaloneenterprise64.msi
</A></li>
	<LI>Next message (by thread): <A HREF="013186.html">[squid-users] Caching Google Chrome googlechromestandaloneenterprise64.msi
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13183">[ date ]</a>
              <a href="thread.html#13183">[ thread ]</a>
              <a href="subject.html#13183">[ subject ]</a>
              <a href="author.html#13183">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
