<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] external_acl_type problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20external_acl_type%20problem&In-Reply-To=%3C1477472216790-4680302.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013240.html">
   <LINK REL="Next"  HREF="013247.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] external_acl_type problem</H1>
    <B>reinerotto</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20external_acl_type%20problem&In-Reply-To=%3C1477472216790-4680302.post%40n4.nabble.com%3E"
       TITLE="[squid-users] external_acl_type problem">augustus_meyer at gmx.net
       </A><BR>
    <I>Wed Oct 26 08:56:56 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="013240.html">[squid-users] external_acl_type problem
</A></li>
        <LI>Next message (by thread): <A HREF="013247.html">[squid-users] external_acl_type problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13246">[ date ]</a>
              <a href="thread.html#13246">[ thread ]</a>
              <a href="subject.html#13246">[ subject ]</a>
              <a href="author.html#13246">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>You referred to some assumptions that we might have on a linux system but
</I>the question from my side is:
What for example?
Disk Space?
Libraries?
Etc..&lt;

Sorry, I do not really know. I had one similar, very strange effect on my
embedded LINUX, regarding bash:
It was necessary for redirect function in bash to work, to have this one:
ln -s /proc/self/fd /dev/fd
So just my idea about this special squid function having a similar reason.
Because as I have seen, squid uses socket connections to communicate with
the helper. 
So just a long shot.

It very looks like squids accouting of helpers is disturbed: I see much more
than max helpers active after a few hours.  And lot of helpers stay alive,
when I kill parent process squid. 
This problem only shows up, in case of having 2 (or more) active requests to
2 helpers (same key: %SRC).
Like squid assumes some internal queuing of the 2 requests, but second
request is not.
So it also could be some type of resource issue: Only one socket conn
allowed for squid, second one is silently ignored. This would cause exactly
my effect.
It must be something very special, as I have a lot of other software running
on this embedded LINUX, incl. nginx, rsync. And without the helper, squid
ran fine for long time, incl. cache to SSD.

configure options:
Squid Cache: Version 3.5.22
Service Name: squid
configure options:  '--target=mipsel-openwrt-linux'
'--host=mipsel-openwrt-linux' '--build=x86_64-linux-gnu' '--program-prefix='
'--program-suffix=' '--prefix=/usr' '--exec-prefix=/usr' '--bindir=/usr/bin'
'--sbindir=/usr/sbin' '--libexecdir=/usr/lib' '--sysconfdir=/etc'
'--datadir=/usr/share' '--localstatedir=/var' '--mandir=/usr/man'
'--infodir=/usr/info' '--disable-nls' '--config-cache'
'--datadir=/usr/share/squid' '--libexecdir=/usr/lib/squid'
'--sysconfdir=/etc/squid' '--enable-shared' '--disable-static'
'--disable-icmp' '--enable-delay-pools' '--disable-icap-client'
'--enable-kill-parent-hack' '--disable-snmp' '--disable-ecap'
'--disable-wccp' '--disable-wccpv2' '--disable-eui' '--disable-htcp'
'--disable-ident-lookups' '--enable-auth'
'--disable-storeid-rewrite-helpers' '--disable-ipv6' '--enable-ssl'
'--enable-ssl-crtd' '--disable-cache-digests' '--enable-linux-netfilter'
'--disable-unlinkd' '--disable-x-accelerator-vary' '--disable-translation'
'--disable-auto-locale' '--with-dl' '--with-pthreads' '--without-expat'
'--without-libxml2' '--without-gnutls' '--without-nettle'
'--with-openssl=/etc/openwrt/mw-m96/staging_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/usr'
'--enable-epoll' '--with-maxfd=4096' '--enable-external-acl-helpers'
'--disable-auth-negotiate' '--disable-auth-ntlm' '--disable-auth-digest'
'--enable-auth-basic' '--disable-arch-native' '--with-krb5-config=no'
'--without-mit-krb5' '--without-libcap' '--without-netfilter-conntrack'
'build_alias=x86_64-linux-gnu' 'host_alias=mipsel-openwrt-linux'
'target_alias=mipsel-openwrt-linux' 'CC=mipsel-openwrt-linux-uclibc-gcc'
'CFLAGS=-Os -pipe -mno-branch-likely -mips32r2 -mtune=24kec -mdsp
-fno-caller-saves -fhonour-copts -Wno-error=unused-but-set-variable
-Wno-error=unused-result -msoft-float '
'LDFLAGS=-L/etc/openwrt/mw-m96/staging_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/usr/lib
-L/etc/openwrt/router/staging_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/lib
-L/etc/openwrt/router/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2/usr/lib
-L/etc/openwrt/router/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2/lib
'
'CPPFLAGS=-I/etc/openwrt/router/staging_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/usr/include
-I/etc/openwrt/router/staging_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/include
-I/etc/openwrt/router/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2/usr/include
-I/etc/openwrt/router/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2/include
' 'CXX=mipsel-openwrt-linux-uclibc-g++' 'CXXFLAGS=-Os -pipe
-mno-branch-likely -mips32r2 -mtune=24kec -mdsp -fno-caller-saves
-fhonour-copts -Wno-error=unused-but-set-variable -Wno-error=unused-result
-msoft-float '
'PKG_CONFIG=/etc/openwrt/router/staging_dir/host/bin/pkg-config'
'PKG_CONFIG_PATH=/etc/openwrt/router/staging_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/usr/lib/pkgconfig:/etc/openwrt/router/staging_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/usr/share/pkgconfig'
'PKG_CONFIG_LIBDIR=/etc/openwrt/router/staging_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/usr/lib/pkgconfig:/etc/openwrt/router/staging_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/usr/share/pkgconfig'






--
View this message in context: <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/external-acl-type-problem-tp4680203p4680302.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/external-acl-type-problem-tp4680203p4680302.html</A>
Sent from the Squid - Users mailing list archive at Nabble.com.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="013240.html">[squid-users] external_acl_type problem
</A></li>
	<LI>Next message (by thread): <A HREF="013247.html">[squid-users] external_acl_type problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13246">[ date ]</a>
              <a href="thread.html#13246">[ thread ]</a>
              <a href="subject.html#13246">[ subject ]</a>
              <a href="author.html#13246">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
