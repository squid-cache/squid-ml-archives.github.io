<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Problems with Linux Worstations
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Problems%20with%20Linux%20Worstations&In-Reply-To=%3C524b90be-8363-f906-1b18-d9481d8c63b3%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012321.html">
   <LINK REL="Next"  HREF="012345.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Problems with Linux Worstations</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Problems%20with%20Linux%20Worstations&In-Reply-To=%3C524b90be-8363-f906-1b18-d9481d8c63b3%40treenet.co.nz%3E"
       TITLE="[squid-users] Problems with Linux Worstations">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Sep  2 14:10:17 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="012321.html">[squid-users] Problems with Linux Worstations
</A></li>
        <LI>Next message (by thread): <A HREF="012345.html">[squid-users] Problems with Linux Worstations
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12326">[ date ]</a>
              <a href="thread.html#12326">[ thread ]</a>
              <a href="subject.html#12326">[ subject ]</a>
              <a href="author.html#12326">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2/09/2016 3:21 p.m., Marcio Demetrio Bacci wrote:
&gt;<i> In my Windows workstations the authentication works correctly, however in
</I>&gt;<i> Ubuntu 14.04 the user and password are asked twice.
</I>&gt;<i> 
</I>&gt;<i> I am using the basic_ncsa_auth with Squid 3.4.8
</I>&gt;<i> 
</I>&gt;<i> Is there any setting that I do in Squid?
</I>&gt;<i> 
</I>&gt;<i> Bellow is my squid.conf
</I>&gt;<i> 
</I>...
&gt;<i> 
</I>&gt;<i> auth_param basic program /usr/lib/squid3/basic_ncsa_auth /etc/squid3/passwd
</I>&gt;<i> auth_param basic children 5
</I>&gt;<i> auth_param basic realm AUTENTICACAO
</I>&gt;<i> auth_param basic credentialsttl 2 hours
</I>&gt;<i> auth_param basic casesensitive off
</I>&gt;<i> 
</I>...
&gt;<i> 
</I>&gt;<i> ### Regras iniciais do Squid
</I>&gt;<i> http_access allow localhost
</I>&gt;<i> http_access allow purge localhost
</I>&gt;<i> http_access deny purge
</I>&gt;<i> http_access deny !Safe_ports
</I>&gt;<i> http_access deny CONNECT !SSL_ports
</I>
Please re-order the above security rules to be:

  http_access deny !Safe_ports
  http_access deny CONNECT !SSL_ports
  http_access allow localhost
  http_access deny purge

&gt;<i> 
</I>&gt;<i> ### Exige autenticacao
</I>&gt;<i> acl autenticados proxy_auth REQUIRED
</I>&gt;<i> http_access allow autenticados
</I>&gt;<i> 
</I>&gt;<i> ### Bloqueia extensoes de arquivos
</I>&gt;<i> acl extensoes_bloqueadas url_regex -i &quot;/etc/squid3/acls/extensoes-proibidas&quot;
</I>&gt;<i> 
</I>&gt;<i> ### Liberar alguns sites
</I>&gt;<i> acl sites_liberados url_regex -i &quot;/etc/squid3/acls/sites-permitidos&quot;
</I>&gt;<i> 
</I>&gt;<i> ### Bloqueia sites por URL
</I>&gt;<i> acl sites_bloqueados url_regex -i &quot;/etc/squid3/acls/sites-proibidos&quot;
</I>&gt;<i> 
</I>&gt;<i> #bloqueios basicos
</I>&gt;<i> http_access allow sites_liberados
</I>&gt;<i> http_access deny extensoes_bloqueadas
</I>&gt;<i> http_access deny sites_bloqueados
</I>&gt;<i> 
</I>&gt;<i> ### LAN #####
</I>&gt;<i> acl rede_lan src 192.168.200.0/22
</I>&gt;<i> 
</I>&gt;<i> ### Nega acesso de quem nao esta na rede local do CMB
</I>&gt;<i> http_access allow rede_lan
</I>&gt;<i> 
</I>&gt;<i> #negando o acesso para todos que nao estiverem nas regras anteriores
</I>&gt;<i> http_access deny all
</I>&gt;<i>
</I>...


With your config Squid will only challenge the browser to send some if
they are completely missing. It will not deny access when invalid
credentials are sent.

That means the browser probably does not have access to any Basic auth
credentials it can send.

The two popups are probably from two TCP connections being made with no
credentials (maybe the result of the &quot;Happy Eyeballs&quot; algorithm doing
its thing). You can check for that with &quot;debug_options 11,2&quot; and seeing
what HTTP messages are happening with what IP:port details.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="012321.html">[squid-users] Problems with Linux Worstations
</A></li>
	<LI>Next message (by thread): <A HREF="012345.html">[squid-users] Problems with Linux Worstations
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12326">[ date ]</a>
              <a href="thread.html#12326">[ thread ]</a>
              <a href="subject.html#12326">[ subject ]</a>
              <a href="author.html#12326">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
