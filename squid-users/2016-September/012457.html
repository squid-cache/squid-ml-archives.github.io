<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Web Whatsapp, Dropbox... problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Web%20Whatsapp%2C%20Dropbox...%20problem&In-Reply-To=%3CCAEpx-0W6X0dh3uLjfWatkEBUJOEWq_S3XnGDAMej2U3LJCnEXw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012456.html">
   <LINK REL="Next"  HREF="012463.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Web Whatsapp, Dropbox... problem</H1>
    <B>Chico Venancio</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Web%20Whatsapp%2C%20Dropbox...%20problem&In-Reply-To=%3CCAEpx-0W6X0dh3uLjfWatkEBUJOEWq_S3XnGDAMej2U3LJCnEXw%40mail.gmail.com%3E"
       TITLE="[squid-users] Web Whatsapp, Dropbox... problem">chicocvenancio at gmail.com
       </A><BR>
    <I>Mon Sep 12 16:38:59 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="012456.html">[squid-users] Web Whatsapp, Dropbox... problem
</A></li>
        <LI>Next message (by thread): <A HREF="012463.html">[squid-users] Web Whatsapp, Dropbox... problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12457">[ date ]</a>
              <a href="thread.html#12457">[ thread ]</a>
              <a href="subject.html#12457">[ subject ]</a>
              <a href="author.html#12457">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>According to the logs bump was being performed before the change, so I
don't follow.

If the lack of an acl step1 SslBump1 was the problem he would have no bumps
or bumps with incorrect host names in the certificates. Right now it seems
he either is bumping some connect request whatsapp doesn't want to be MITM
or he is outright denying something, maybe something else entirely, without
logs we cannot be sure.
Chico Venancio

Em 12/09/2016 12:46, &quot;Yuri Voinov&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">yvoinov at gmail.com</A>&gt; escreveu:

&gt;<i>
</I>&gt;<i> -----BEGIN PGP SIGNED MESSAGE-----
</I>&gt;<i> Hash: SHA256
</I>&gt;<i>
</I>&gt;<i> Both of you are caught in the access control list, completely lost sight
</I>&gt;<i> of that op basically wrote the wrong general rules for bump, skipped step1
</I>&gt;<i> - SslBump1.
</I>&gt;<i>
</I>&gt;<i> Which can be splice by server name without peek performing? Yes?
</I>&gt;<i>
</I>&gt;<i> That is why he did not work. All the rest is not fundamental cosmetics and
</I>&gt;<i> can be written and debugged later.
</I>&gt;<i>
</I>&gt;<i> 12.09.2016 21:40, Marcus Kool &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On 09/12/2016 12:15 PM, Chico Venancio wrote:
</I>&gt;<i> &gt;&gt; I'd think a regex consumes a lot more resources than server name, but
</I>&gt;<i> don't know if it is significant.
</I>&gt;<i> &gt;&gt; Anyway, without more details we can't be sure the server name not
</I>&gt;<i> matching is the problem.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; We need access logs and client(browser) details.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; By the way, acl excludeSSL ssl::server_name web.whatsapp.com
</I>&gt;<i> &lt;<A HREF="http://web.whatsapp.com">http://web.whatsapp.com</A>&gt; &lt;<A HREF="http://web.whatsapp.com">http://web.whatsapp.com</A>&gt;
</I>&gt;<i> &gt;&gt; Would not work, whatsapp uses some subdomains that also should not be
</I>&gt;<i> bumped.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; squid.conf.documented seems to imply that you can add a dot to match the
</I>&gt;<i> subdomains also, just like with dstdomain :
</I>&gt;<i> &gt;    acl excludeSSL ssl::server_name .web.whatsapp.com
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Be careful with the regex, it matches also web.whatsapp.com-24.site: it
</I>&gt;<i> needs a $
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Marcus
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; Chico Venancio
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Em 12/09/2016 11:42, &quot;Yuri Voinov&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">yvoinov at gmail.com</A>
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">yvoinov at gmail.com</A>&gt; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">yvoinov at gmail.com</A>&gt;&gt; escreveu:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt; Because ssl :: server_name_regex works reliably. As shown by my personal
</I>&gt;<i> &gt; practice. But in general it is by op's choice.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 12.09.2016 20:38, Marcus Kool &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; On 09/12/2016 11:14 AM, Yuri Voinov wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt;&gt; -----BEGIN PGP SIGNED MESSAGE-----
</I>&gt;<i> &gt; &gt;&gt; Hash: SHA256
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt;&gt; Oooops,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt;&gt; acl must be:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt;&gt; acl excludeSSL ssl::server_name_regex web\.whatsapp\.com
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; why a regex?
</I>&gt;<i> &gt; &gt; why not the following ?
</I>&gt;<i> &gt; &gt;    acl excludeSSL ssl::server_name web.whatsapp.com
</I>&gt;<i> &lt;<A HREF="http://web.whatsapp.com">http://web.whatsapp.com</A>&gt; &lt;<A HREF="http://web.whatsapp.com">http://web.whatsapp.com</A>&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; Marcus
</I>&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; squid-users mailing list
</I>&gt;<i> &gt; &gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.</A>
</I>&gt;<i> squid-cache.org&gt; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i> &gt; &gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>&gt;
</I>&gt;<i> &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;     _______________________________________________
</I>&gt;<i> &gt;&gt;     squid-users mailing list
</I>&gt;<i> &gt;&gt;     <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.</A>
</I>&gt;<i> squid-cache.org&gt; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i> &gt;&gt;     <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>&gt;
</I>&gt;<i> &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt; squid-users mailing list
</I>&gt;<i> &gt;&gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> &gt;&gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; squid-users mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> &gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i> -----BEGIN PGP SIGNATURE-----
</I>&gt;<i> Version: GnuPG v2
</I>&gt;<i>
</I>&gt;<i> iQEcBAEBCAAGBQJX1s2fAAoJENNXIZxhPexGRXoH/2TnA1g+DuwwXsg5qugSngC/
</I>&gt;<i> 3mcMtqtSZ8szaESp0ofCuGvB7f3pYU3pOpm6OAumyDDIO9bVmHX7QLDK4hkNWaUo
</I>&gt;<i> f8BICxg/zqDbIxLOJyMRo9kCyT3CT1hUd7F/EtvAAcAUk68blAKupksYZ5gDSeN6
</I>&gt;<i> gY13RLeWoNgsaIZL+LgztRf8bKGepIK9vGFyIPvKXxYP0dey4/zndyjQbRf1ggtV
</I>&gt;<i> E8K/0xU6zaflcggKFPjBHWpekATRoza09/+BT8T/THndf1CBybmAo7wOGi1oG6nu
</I>&gt;<i> 1qw3H2X32DyDjIOQ+YV6NVjSDb0jPaj/taanT3W5F1/VNhFshyw/IjIPLeoYw9k=
</I>&gt;<i> =TMa5
</I>&gt;<i> -----END PGP SIGNATURE-----
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160912/bcef6b98/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160912/bcef6b98/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="012456.html">[squid-users] Web Whatsapp, Dropbox... problem
</A></li>
	<LI>Next message (by thread): <A HREF="012463.html">[squid-users] Web Whatsapp, Dropbox... problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12457">[ date ]</a>
              <a href="thread.html#12457">[ thread ]</a>
              <a href="subject.html#12457">[ subject ]</a>
              <a href="author.html#12457">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
