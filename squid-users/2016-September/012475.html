<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Lost of all squid cache
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Lost%20of%20all%20squid%20cache&In-Reply-To=%3C00a601d20dd1%24b7e94610%2427bbd230%24%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012495.html">
   <LINK REL="Next"  HREF="012478.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Lost of all squid cache</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Lost%20of%20all%20squid%20cache&In-Reply-To=%3C00a601d20dd1%24b7e94610%2427bbd230%24%40ngtech.co.il%3E"
       TITLE="[squid-users] Lost of all squid cache">eliezer at ngtech.co.il
       </A><BR>
    <I>Tue Sep 13 15:15:53 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="012495.html">[squid-users] Lost of all squid cache
</A></li>
        <LI>Next message (by thread): <A HREF="012478.html">[squid-users] Lost of all squid cache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12475">[ date ]</a>
              <a href="thread.html#12475">[ thread ]</a>
              <a href="subject.html#12475">[ subject ]</a>
              <a href="author.html#12475">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Eduardo,

The first thing I would do is to first disable the disk cache in order to try to recover\rebuild the disk cache manually using another squid instance.
It's not always possible but if this cache is important enough then a loss of couple tiny bits for recovery time plus some network load might worth it.
If you are up to manually trying to recover the cache I will try to be here(publically) to see if I can help you.
In the past I wrote a tiny tool that can inspect cache files but I am not sure if I have it here or on another disk remotely.

Eliezer

----
Eliezer Croitoru
Linux System Administrator
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>


-----Original Message-----
From: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On Behalf Of Eduardo Carneiro
Sent: Monday, September 12, 2016 7:54 PM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: [squid-users] Lost of all squid cache

Hi everyone!

I've got a strange issue on my Squid 3.5.19. 

About 30 minutes ago, my squid stopped and I noticed that the message &quot;Rebuilding storage in /squid/cache/directory (dirty log)&quot; was in my cache.log. Other message was also detected in my cache.log (Store rebuilding is 5.14% complete). When reached 100%, I lost all my 350GB cache data. 

The data are still in the Hard disk, but squid doesn't understand it.

Using squidclient, I can see now only 0.1% of my cache used. For the operating system, all the data are still available. For the squid, not.

Someone can help me that?

Best regards,
Eduardo Carneiro



--
View this message in context: <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/Lost-of-all-squid-cache-tp4679466.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/Lost-of-all-squid-cache-tp4679466.html</A>
Sent from the Squid - Users mailing list archive at Nabble.com.
_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="012495.html">[squid-users] Lost of all squid cache
</A></li>
	<LI>Next message (by thread): <A HREF="012478.html">[squid-users] Lost of all squid cache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12475">[ date ]</a>
              <a href="thread.html#12475">[ thread ]</a>
              <a href="subject.html#12475">[ subject ]</a>
              <a href="author.html#12475">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
