<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid AUTH basic-nasa always 1st time get denied !!!
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20AUTH%20basic-nasa%20always%201st%20time%20get%20denied%0A%20%21%21%21&In-Reply-To=%3C252e5440-cd5d-f858-44be-5ba8e5bb2f39%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012567.html">
   <LINK REL="Next"  HREF="012571.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid AUTH basic-nasa always 1st time get denied !!!</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20AUTH%20basic-nasa%20always%201st%20time%20get%20denied%0A%20%21%21%21&In-Reply-To=%3C252e5440-cd5d-f858-44be-5ba8e5bb2f39%40treenet.co.nz%3E"
       TITLE="[squid-users] squid AUTH basic-nasa always 1st time get denied !!!">squid3 at treenet.co.nz
       </A><BR>
    <I>Sat Sep 17 17:52:16 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="012567.html">[squid-users] squid AUTH basic-nasa always 1st time get denied !!!
</A></li>
        <LI>Next message (by thread): <A HREF="012571.html">[squid-users] What's the algorithm to achieve AclRandom
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12568">[ date ]</a>
              <a href="thread.html#12568">[ thread ]</a>
              <a href="subject.html#12568">[ subject ]</a>
              <a href="author.html#12568">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 18/09/2016 4:57 a.m., --Ahmad-- wrote:
&gt;<i> Hi Guys ,
</I>&gt;<i> i want to ask why always 1st time of basic-nasa auth get denied and the 2d time get work ??
</I>&gt;<i> 
</I>
Would you prefer your browser to broadcast your username and password
un-encrypted to anything it happens to connect to? Dangerous.

On each new TCP connection your browser sends one request with *no*
credentials. The proxy tells it that credentials are needed and what
type. Browser then repeats its request with the credentials attached.

You can reduce the number of 407 occuring by ensuring that client
persistent connections is enabled. That is on by default in current
Squid, make sure you are not disabling it in squid.conf.


&gt;<i> I&#8217;m sure i set the right pwd , but the 1st time must give me wrong then it works
</I>&gt;<i> 
</I>&gt;<i> here is logs :
</I>&gt;<i> NE/- text/html
</I>&gt;<i> 1474163690.278    229 68.68.102.158 TCP_MISS/200 37701 GET <A HREF="http://www.adidas.com/us/nmd_r1-shoes/S31507.html">http://www.adidas.com/us/nmd_r1-shoes/S31507.html</A> ilybwy HIER_DIRECT/23.213.106.42 text/html
</I>&gt;<i> 1474163695.290      0 68.68.102.158 TCP_DENIED/407 4187 GET <A HREF="http://www.adidas.com/us/nmd_r1-shoes/S31507.html">http://www.adidas.com/us/nmd_r1-shoes/S31507.html</A> - HIER_NONE/- text/html
</I>&gt;<i> 1474163695.520    230 68.68.102.158 TCP_MISS/200 34951 GET <A HREF="http://www.adidas.com/us/nmd_r1-shoes/S31507.html">http://www.adidas.com/us/nmd_r1-shoes/S31507.html</A> hzrcfj HIER_DIRECT/23.213.106.42 text/html
</I>&gt;<i> 1474163700.532      0 68.68.102.158 TCP_DENIED/407 4187 GET <A HREF="http://www.adidas.com/us/nmd_r1-shoes/S31507.html">http://www.adidas.com/us/nmd_r1-shoes/S31507.html</A> - HIER_NONE/- text/html
</I>&gt;<i> 1474163700.764    231 68.68.102.158 TCP_MISS/200 34951 GET <A HREF="http://www.adidas.com/us/nmd_r1-shoes/S31507.html">http://www.adidas.com/us/nmd_r1-shoes/S31507.html</A> dbftyv HIER_DIRECT/23.213.106.42 text/html
</I>&gt;<i> 1474163705.777      0 68.68.102.158 TCP_DENIED/407 4187 GET <A HREF="http://www.adidas.com/us/nmd_r1-shoes/S31507.html">http://www.adidas.com/us/nmd_r1-shoes/S31507.html</A> - HIER_NONE/- text/html
</I>&gt;<i> 1474163706.007    230 68.68.102.158 TCP_MISS/200 34951 GET <A HREF="http://www.adidas.com/us/nmd_r1-shoes/S31507.html">http://www.adidas.com/us/nmd_r1-shoes/S31507.html</A> ynsxui HIER_DIRECT/23.213.106.42 text/html
</I>&gt;<i> 1474163711.022      0 68.68.102.158 TCP_DENIED/407 4187 GET <A HREF="http://www.adidas.com/us/nmd_r1-shoes/S31507.html">http://www.adidas.com/us/nmd_r1-shoes/S31507.html</A> - HIER_NONE/- text/html
</I>&gt;<i> 1474163711.261    238 68.68.102.158 TCP_MISS/200 37700 GET <A HREF="http://www.adidas.com/us/nmd_r1-shoes/S31507.html">http://www.adidas.com/us/nmd_r1-shoes/S31507.html</A> mjdvka HIER_DIRECT/23.213.106.42 text/html
</I>&gt;<i> 1474163716.279      0 68.68.102.158 TCP_DENIED/407 4187 GET <A HREF="http://www.adidas.com/us/nmd_r1-shoes/S31507.html">http://www.adidas.com/us/nmd_r1-shoes/S31507.html</A> - HIER_NONE/- text/html
</I>&gt;<i> 1474163716.790    510 68.68.102.158 TCP_MISS/200 37700 GET <A HREF="http://www.adidas.com/us/nmd_r1-shoes/S31507.html">http://www.adidas.com/us/nmd_r1-shoes/S31507.html</A> xbrdkw HIER_DIRECT/23.213.106.42 text/html
</I>&gt;<i> 1474163722.004      0 68.68.102.158 TCP_DENIED/407 4187 GET <A HREF="http://www.adidas.com/us/nmd_r1-shoes/S31507.html">http://www.adidas.com/us/nmd_r1-shoes/S31507.html</A> - HIER_NONE/- text/html
</I>&gt;<i> 1474163722.233    227 68.68.102.158 TCP_MISS/200 34951 GET <A HREF="http://www.adidas.com/us/nmd_r1-shoes/S31507.html">http://www.adidas.com/us/nmd_r1-shoes/S31507.html</A> xgmbwc HIER_DIRECT/23.213.106.42 text/html
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> here is my auth settings :
</I>&gt;<i> 
</I>&gt;<i> # Lockdown Procedures
</I>&gt;<i> auth_param basic program /lib/squid/basic_ncsa_auth /etc/squid/squid_user
</I>&gt;<i> acl ncsa_users proxy_auth REQUIRED
</I>&gt;<i> http_access allow ncsa_users
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> any other optimization settings ?
</I>
With only those three config lines to go on. You can optimize by
changing the allow rule to a deny.

 http_access deny !ncsa_users
 http_access allow localnet

&gt;<i> 
</I>&gt;<i> also can i have other settings to let the operation faster ?
</I>&gt;<i> 
</I>
You will need to let us know your current squid.conf for any answers to
be meaningful.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="012567.html">[squid-users] squid AUTH basic-nasa always 1st time get denied !!!
</A></li>
	<LI>Next message (by thread): <A HREF="012571.html">[squid-users] What's the algorithm to achieve AclRandom
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12568">[ date ]</a>
              <a href="thread.html#12568">[ thread ]</a>
              <a href="subject.html#12568">[ subject ]</a>
              <a href="author.html#12568">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
