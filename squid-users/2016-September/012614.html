<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid for proxy server on Google Compute Engine?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20for%20proxy%20server%20on%20Google%20Compute%20Engine%3F&In-Reply-To=%3C3C50F975-A0CF-4A3F-80C4-90DA6CD5DF72%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012612.html">
   <LINK REL="Next"  HREF="012627.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid for proxy server on Google Compute Engine?</H1>
    <B>Chuong Hoang</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20for%20proxy%20server%20on%20Google%20Compute%20Engine%3F&In-Reply-To=%3C3C50F975-A0CF-4A3F-80C4-90DA6CD5DF72%40gmail.com%3E"
       TITLE="[squid-users] Squid for proxy server on Google Compute Engine?">hchuongyh90 at gmail.com
       </A><BR>
    <I>Wed Sep 21 04:09:11 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="012612.html">[squid-users] Protocol error (TLS code: SQUID_ERR_SSL_HANDSHAKE)
</A></li>
        <LI>Next message (by thread): <A HREF="012627.html">[squid-users] Squid for proxy server on Google Compute Engine?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12614">[ date ]</a>
              <a href="thread.html#12614">[ thread ]</a>
              <a href="subject.html#12614">[ subject ]</a>
              <a href="author.html#12614">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi guys, thanks for reading this! I&#8217;m new so sorry if this is a dumb question! But I've been finding the answer for 3 days but still no sign of light.

I&#8217;ve already posted the problem on GCE discussion group- this link: <A HREF="https://groups.google.com/forum/#!topic/gce-discussion/xwlHYhFTUtU">https://groups.google.com/forum/#!topic/gce-discussion/xwlHYhFTUtU</A>

To make it clear, I also restate the problem here:
Been working on this for 2 days and still cannot find the way out :(

Below is my setup for testing, which basically supports all http_access through port 8888

-squid.conf file:

http_port 8888
http_access allow all
-Open port 8888 for incoming HTTP data by gcloud command (which returned &quot;allowed&quot;)

gcloud compute firewall-rules create allow-tcp --description &quot;Incoming-http-allowed.&quot; --allow tcp:8888 --format json
With the setup above, I can telnet to the IP with port 8888. However, when querying to some http links with browser (Safari/Chrome), I always get this message

The following error was encountered while trying to retrieve the URL: <A HREF="http://google.com/">http://google.com/</A> &lt;<A HREF="http://google.com/">http://google.com/</A>&gt;

Access Denied.

Access control configuration prevents your request from being allowed at this time. Please contact your service provider if you feel this is incorrect.

Your cache administrator is webmaster.
I also tried other ports (3128, 8000, 80) but no help
I also tried to force the port to listen IPv4 addresses with something like http_port 0.0.0.0:8888 &lt;<A HREF="http://0.0.0.0:8888/">http://0.0.0.0:8888/</A>&gt; and still not working
Someone please help me out of this mess :( Much appreciated!

P/S: I connect to the squid proxy though my Macbook (OS Sierra) with Web Proxy (HTTP) enabled in Network Preferences.

This is some logs from cache.log, which probably indicates that my conf file is fraud. client_side.cc(777) swanSong: local=10.xxx.0.2:8888 remote=113.xxx.xxx.113:54856 flags=1 - 10.xxx.0.2 is GCE's internal IP - 113.xxx.xxx.113 is my computer's external IP 


Much appreciated if anyone can help me out!

Thank you!
Chuong
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160921/40188717/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160921/40188717/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="012612.html">[squid-users] Protocol error (TLS code: SQUID_ERR_SSL_HANDSHAKE)
</A></li>
	<LI>Next message (by thread): <A HREF="012627.html">[squid-users] Squid for proxy server on Google Compute Engine?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12614">[ date ]</a>
              <a href="thread.html#12614">[ thread ]</a>
              <a href="subject.html#12614">[ subject ]</a>
              <a href="author.html#12614">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
