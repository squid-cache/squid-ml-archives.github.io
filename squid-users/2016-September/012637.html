<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] multiple instances with different outgoing addresses and 2x external nics
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20multiple%20instances%20with%20different%20outgoing%20addresses%0A%20and%202x%20external%20nics&In-Reply-To=%3C1e6798ede0caaf479338bbd2667e37f1%40geocastsp.co.za%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012659.html">
   <LINK REL="Next"  HREF="012638.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] multiple instances with different outgoing addresses and 2x external nics</H1>
    <B>Drikus Brits</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20multiple%20instances%20with%20different%20outgoing%20addresses%0A%20and%202x%20external%20nics&In-Reply-To=%3C1e6798ede0caaf479338bbd2667e37f1%40geocastsp.co.za%3E"
       TITLE="[squid-users] multiple instances with different outgoing addresses and 2x external nics">drikus at geocastsp.co.za
       </A><BR>
    <I>Thu Sep 22 05:47:45 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="012659.html">[squid-users] Question about the url rewrite before proxy out
</A></li>
        <LI>Next message (by thread): <A HREF="012638.html">[squid-users] multiple instances with different outgoing	addresses and 2x external nics
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12637">[ date ]</a>
              <a href="thread.html#12637">[ thread ]</a>
              <a href="subject.html#12637">[ subject ]</a>
              <a href="author.html#12637">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE> 

HI Experts, 

I'm struggling to get squid to work the way i need it to. 

My setup : 

1x Server : Ubuntu 14
3x Interfaces : 1x Inside ( 192.168.100.10 ) 2x Outside connected to DSL
(1st = 10.0.0.2, 2nd 10.0.1.2)
2x default routes : 1x for each DSL link 

Management uses proxy address : 192.168.100.10 3128
All else uses address : 192.168.100.10 3129 

Both instances have their own configuration file and squid starts both
instances without issues. the mngt instance is configured to use
tcp_outgoing_address : 10.0.0.2 and all_else instance configured to use
tcp_outgoing_address : 10.0.1.2, but when i test a website that reveals
your outside IP, it always seems to only go out via the 1 DSL network
and not the other. 

If i remove the default route to DSL1, then both instances works via
DSL2. My thoughts was that if the outgoing_address is 10.0.0.2 it should
go out via DSL1 and if outgoing_address is 10.0.1.2 it should go via
DSL2. 

If it try to use an outgoing address that is not the IP of the
configured eth interface, then it complains about binding issues. 

I'm not using any firewalls of sorts to manipulate routing at this
stage. I really would prefer to use 1x VM (squid) instead of 2 seperate
VMs running squid... 

Any suggestions? 

Thanks 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20160922/964bc1cb/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20160922/964bc1cb/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="012659.html">[squid-users] Question about the url rewrite before proxy out
</A></li>
	<LI>Next message (by thread): <A HREF="012638.html">[squid-users] multiple instances with different outgoing	addresses and 2x external nics
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12637">[ date ]</a>
              <a href="thread.html#12637">[ thread ]</a>
              <a href="subject.html#12637">[ subject ]</a>
              <a href="author.html#12637">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
