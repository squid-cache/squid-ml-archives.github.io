<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] issues with amazonaws &amp; cloudfront
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20issues%20with%20amazonaws%20%26%20cloudfront&In-Reply-To=%3C57E5B25E.2020509%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012656.html">
   <LINK REL="Next"  HREF="012658.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] issues with amazonaws &amp; cloudfront</H1>
    <B>Brendan Kearney</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20issues%20with%20amazonaws%20%26%20cloudfront&In-Reply-To=%3C57E5B25E.2020509%40gmail.com%3E"
       TITLE="[squid-users] issues with amazonaws &amp; cloudfront">bpk678 at gmail.com
       </A><BR>
    <I>Fri Sep 23 22:53:18 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="012656.html">[squid-users] issues with amazonaws &amp; cloudfront
</A></li>
        <LI>Next message (by thread): <A HREF="012658.html">[squid-users] Squid stop working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12664">[ date ]</a>
              <a href="thread.html#12664">[ thread ]</a>
              <a href="subject.html#12664">[ subject ]</a>
              <a href="author.html#12664">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 09/23/2016 10:28 AM, lravelo wrote:
&gt;<i> Good morning!
</I>&gt;<i>
</I>&gt;<i> I have four squid 3.3.8 proxies load balanced behind two VIPs (in groups of
</I>&gt;<i> two) using least connections load balancing.  I've been having issues with
</I>&gt;<i> the .amazonaws.com and .cloudfront.com domains.  We use TCP load balancing
</I>&gt;<i> and not HTTP load balancing.  Basically what happens is that these web pages
</I>&gt;<i> request a keep-alive and on the browser console I'm seeing messages saying
</I>&gt;<i> that proxy authentication failed and some &quot;ERR_CACHE_ACCESS_DENIED 0&quot; errors
</I>&gt;<i> as well.  We do have kerberos authentication for SSO.  Not sure if anyone
</I>&gt;<i> else has had this issue and what's been done to resolve it.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context: <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/issues-with-amazonaws-cloudfront-tp4679665.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/issues-with-amazonaws-cloudfront-tp4679665.html</A>
</I>&gt;<i> Sent from the Squid - Users mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>what is the DNS name of the VIP you load balance behind?  does the DNS 
name match the HTTP principal you created in kerberos?  for example:

dns name: proxy.domain.tld
kerberos principal: HTTP/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxy.domain.tld at REALM</A>

the keytabs that you created, they have to be identical for each load 
balanced pool member.  you should have made one keytab, and securely 
copied it to each pool member.  if they are not exactly identical, one 
proxy will work (the one with the latest keytab created, because the 
KVNO will be ordinally greater[use &quot;klist -Kket /path/to/file.keytab]) 
and the other wont work.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="012656.html">[squid-users] issues with amazonaws &amp; cloudfront
</A></li>
	<LI>Next message (by thread): <A HREF="012658.html">[squid-users] Squid stop working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12664">[ date ]</a>
              <a href="thread.html#12664">[ thread ]</a>
              <a href="subject.html#12664">[ subject ]</a>
              <a href="author.html#12664">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
