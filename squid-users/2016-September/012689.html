<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Clarification on icap
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Clarification%20on%20icap&In-Reply-To=%3C10bbdad1-1892-ff29-1c0a-7db095cf2119%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012687.html">
   <LINK REL="Next"  HREF="012691.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Clarification on icap</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Clarification%20on%20icap&In-Reply-To=%3C10bbdad1-1892-ff29-1c0a-7db095cf2119%40measurement-factory.com%3E"
       TITLE="[squid-users] Clarification on icap">rousskov at measurement-factory.com
       </A><BR>
    <I>Mon Sep 26 14:30:09 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="012687.html">[squid-users] Clarification on icap
</A></li>
        <LI>Next message (by thread): <A HREF="012691.html">[squid-users] Clarification on icap
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12689">[ date ]</a>
              <a href="thread.html#12689">[ thread ]</a>
              <a href="subject.html#12689">[ subject ]</a>
              <a href="author.html#12689">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 09/26/2016 05:41 AM, James Lay wrote:
&gt;<i> So I'm going to try and get some visibility into tls traffic.  Not
</I>&gt;<i> concerned with the sslbumping of the traffic, but what I DON'T know what
</I>&gt;<i> to do is what to do with the traffic once it's decrypted.  This squid
</I>&gt;<i> machine runs IDS software as well, so my hope was to have the IDS
</I>&gt;<i> software listen to traffic that'd decrypted, but for the life of me I'm
</I>&gt;<i> not sure where to start.  Does squid pipe out a stream?  Or does the IDS
</I>&gt;<i> listen to a different &quot;interface&quot;?  Is this where ICAP comes in? 
</I>
Squid-IDS integration is mostly independent from SslBump issues -- you
integrate traffic analysis of plain and secure traffic similarly. Your
options depend on IDS interfaces:

1. If IDS is content with passively looking at something Squid can log
(after the transaction is completed), then give IDS the logs (see
access_log and logformat directives). This is what Amos recommended in
his response. It is the best option if your IDS can use it.

2. If IDS is content with reacting to something Squid can log while
processing a message, then write or purchase a custom external ACL
script. External ACL input can be customized just like the access log.

3. If IDS needs access to message bodies, then use an ICAP or eCAP
service to give IDS whole messages. You may have to write or purchase
that service. How that service is going to give messages to IDS depends
on IDS interfaces. Some IDSes have APIs while others listen to raw
traffic (that a service can emulate and emit).


HTH,

Alex.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="012687.html">[squid-users] Clarification on icap
</A></li>
	<LI>Next message (by thread): <A HREF="012691.html">[squid-users] Clarification on icap
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12689">[ date ]</a>
              <a href="thread.html#12689">[ thread ]</a>
              <a href="subject.html#12689">[ subject ]</a>
              <a href="author.html#12689">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
