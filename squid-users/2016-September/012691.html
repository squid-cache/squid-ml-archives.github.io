<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Clarification on icap
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Clarification%20on%20icap&In-Reply-To=%3C81153b82678a1d8430523326df800bc2%40localhost%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012689.html">
   <LINK REL="Next"  HREF="012692.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Clarification on icap</H1>
    <B>James Lay</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Clarification%20on%20icap&In-Reply-To=%3C81153b82678a1d8430523326df800bc2%40localhost%3E"
       TITLE="[squid-users] Clarification on icap">jlay at slave-tothe-box.net
       </A><BR>
    <I>Mon Sep 26 14:43:13 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="012689.html">[squid-users] Clarification on icap
</A></li>
        <LI>Next message (by thread): <A HREF="012692.html">[squid-users] Clarification on icap
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12691">[ date ]</a>
              <a href="thread.html#12691">[ thread ]</a>
              <a href="subject.html#12691">[ subject ]</a>
              <a href="author.html#12691">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2016-09-26 08:30, Alex Rousskov wrote:
&gt;<i> On 09/26/2016 05:41 AM, James Lay wrote:
</I>&gt;&gt;<i> So I'm going to try and get some visibility into tls traffic.  Not
</I>&gt;&gt;<i> concerned with the sslbumping of the traffic, but what I DON'T know 
</I>&gt;&gt;<i> what
</I>&gt;&gt;<i> to do is what to do with the traffic once it's decrypted.  This squid
</I>&gt;&gt;<i> machine runs IDS software as well, so my hope was to have the IDS
</I>&gt;&gt;<i> software listen to traffic that'd decrypted, but for the life of me 
</I>&gt;&gt;<i> I'm
</I>&gt;&gt;<i> not sure where to start.  Does squid pipe out a stream?  Or does the 
</I>&gt;&gt;<i> IDS
</I>&gt;&gt;<i> listen to a different &quot;interface&quot;?  Is this where ICAP comes in?
</I>&gt;<i> 
</I>&gt;<i> Squid-IDS integration is mostly independent from SslBump issues -- you
</I>&gt;<i> integrate traffic analysis of plain and secure traffic similarly. Your
</I>&gt;<i> options depend on IDS interfaces:
</I>&gt;<i> 
</I>&gt;<i> 1. If IDS is content with passively looking at something Squid can log
</I>&gt;<i> (after the transaction is completed), then give IDS the logs (see
</I>&gt;<i> access_log and logformat directives). This is what Amos recommended in
</I>&gt;<i> his response. It is the best option if your IDS can use it.
</I>&gt;<i> 
</I>&gt;<i> 2. If IDS is content with reacting to something Squid can log while
</I>&gt;<i> processing a message, then write or purchase a custom external ACL
</I>&gt;<i> script. External ACL input can be customized just like the access log.
</I>&gt;<i> 
</I>&gt;<i> 3. If IDS needs access to message bodies, then use an ICAP or eCAP
</I>&gt;<i> service to give IDS whole messages. You may have to write or purchase
</I>&gt;<i> that service. How that service is going to give messages to IDS depends
</I>&gt;<i> on IDS interfaces. Some IDSes have APIs while others listen to raw
</I>&gt;<i> traffic (that a service can emulate and emit).
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> HTH,
</I>&gt;<i> 
</I>&gt;<i> Alex.
</I>
Ah..there's the rub Alex thanks.  I already have rock solid access 
controls with squids acl's and great logging.  Now I find that I need to 
inspect the actual content, i.e. message bodies.  So cool..I'm on the 
right track for ICAP or eCAP.  So, from what I've read, it appears that 
squid sends the data to a listening ICAP/eCAP service, which in turn the 
IDS can access, depending on the IDS...is that about right?

James

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="012689.html">[squid-users] Clarification on icap
</A></li>
	<LI>Next message (by thread): <A HREF="012692.html">[squid-users] Clarification on icap
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12691">[ date ]</a>
              <a href="thread.html#12691">[ thread ]</a>
              <a href="subject.html#12691">[ subject ]</a>
              <a href="author.html#12691">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
