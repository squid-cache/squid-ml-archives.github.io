<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] connections from particular users sometimes get stuck
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20connections%20from%20particular%20users%20sometimes%20get%0A%20stuck&In-Reply-To=%3C31e7fe32-399b-ffb7-75a9-87a731cca154%40norma.perm.ru%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012720.html">
   <LINK REL="Next"  HREF="012722.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] connections from particular users sometimes get stuck</H1>
    <B>Eugene M. Zheganin</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20connections%20from%20particular%20users%20sometimes%20get%0A%20stuck&In-Reply-To=%3C31e7fe32-399b-ffb7-75a9-87a731cca154%40norma.perm.ru%3E"
       TITLE="[squid-users] connections from particular users sometimes get stuck">emz at norma.perm.ru
       </A><BR>
    <I>Tue Sep 27 20:02:20 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="012720.html">[squid-users] connections from particular users sometimes get stuck
</A></li>
        <LI>Next message (by thread): <A HREF="012722.html">[squid-users] connections from particular users sometimes get stuck
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12721">[ date ]</a>
              <a href="thread.html#12721">[ thread ]</a>
              <a href="subject.html#12721">[ subject ]</a>
              <a href="author.html#12721">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi.

On 28.09.2016 0:29, Alex Rousskov wrote:
&gt;<i> Since you can reproduce this, I suggest collecting ALL,9 log for the
</I>&gt;<i> stuck master transaction:
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://wiki.squid-cache.org/SquidFaq/BugReporting#Debugging_a_single_transaction">http://wiki.squid-cache.org/SquidFaq/BugReporting#Debugging_a_single_transaction</A>
</I>&gt;<i>
</I>&gt;<i> If collecting a debugging trace is impossible for some reason, then
</I>&gt;<i> collect the corresponding TCP packets on the Squid to origin server link
</I>&gt;<i> and post actual packets (not screenshots of packet summaries) from both
</I>&gt;<i> connections. The debugging trace will most likely have the answer. The
</I>&gt;<i> packet trace might have the answer.
</I>&gt;<i>
</I>&gt;<i> You may need to change user credentials for this test or after posting
</I>&gt;<i> the details requested above.
</I>&gt;<i>
</I>Well... I cannot reproduce it on purpose, I'm just saying it is 
self-reproducible for almost a year, in certain moments of time. 
Collecting a debug trace isn't hard by itself, but I'm pretty sure the 
restart will clear this state for a current machine (I guess squid 
didn't get a way to increase debug level on the fly ? at least I'm not 
aware of it; so I will need to restart it to set ALL,9), and I'll have 
to run with ALL,9 for quite some time, which is, obviously, not good for 
production, because it will create enormous amounts of logging in cache 
log. So I will post the tcpdump containing both exchanges, and if it 
will be still unclear I'll think about running in a debug mode.

Thanks.
Eugene.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="012720.html">[squid-users] connections from particular users sometimes get stuck
</A></li>
	<LI>Next message (by thread): <A HREF="012722.html">[squid-users] connections from particular users sometimes get stuck
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12721">[ date ]</a>
              <a href="thread.html#12721">[ thread ]</a>
              <a href="subject.html#12721">[ subject ]</a>
              <a href="author.html#12721">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
