<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] connections from particular users sometimes get stuck
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20connections%20from%20particular%20users%20sometimes%20get%0A%20stuck&In-Reply-To=%3Cf81aae25-958a-b8f4-2b28-5a0daecc1f71%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012723.html">
   <LINK REL="Next"  HREF="012736.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] connections from particular users sometimes get stuck</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20connections%20from%20particular%20users%20sometimes%20get%0A%20stuck&In-Reply-To=%3Cf81aae25-958a-b8f4-2b28-5a0daecc1f71%40measurement-factory.com%3E"
       TITLE="[squid-users] connections from particular users sometimes get stuck">rousskov at measurement-factory.com
       </A><BR>
    <I>Wed Sep 28 15:37:58 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="012723.html">[squid-users] connections from particular users sometimes get stuck
</A></li>
        <LI>Next message (by thread): <A HREF="012736.html">[squid-users] connections from particular users sometimes get	stuck
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12735">[ date ]</a>
              <a href="thread.html#12735">[ thread ]</a>
              <a href="subject.html#12735">[ subject ]</a>
              <a href="author.html#12735">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 09/28/2016 02:22 AM, Eugene M. Zheganin wrote:
&gt;<i> I took the debug trace and both the tcpdump client-side and server-side
</I>&gt;<i> (towards the internet) capturea.
</I>...
&gt;<i> I requested a <A HREF="http://www.ru/index.html">http://www.ru/index.html</A> from a client machine Chrome. 
</I>

AFAICT, Squid did not receive a request for www.ru:

&gt;<i> $ egrep -c 'wwww.ru|217.112.35.75' cache.log.debug 
</I>&gt;<i> 0
</I>
&gt;<i> $ tshark -V -r squid-stuck-reference-client.pcap | egrep -c 'wwww.ru|217.112.35.75'
</I>&gt;<i> 0
</I>

If you find that request in your client-to-Squid packet captures, please
point me to it. Otherwise, please fix your captures and redo the test
from scratch.

Also, please include access.log and/or some other indication of which
transactions got stuck. You may want to stop captures _after_ you cancel
the stuck request -- it is more difficult to find &quot;what has not
happened&quot; (no answer for X seconds) than &quot;what has happened&quot; (e.g., a
TCP connection was reset). Keep in mind that, in general, the request
for the URL you type in the browser may succeed, but the browser may get
stuck getting some resource on that page.

You may limit captures to TCP and DNS traffic to and from Squid.

Finally, for the future, [if you cannot isolate the problem to one HTTP
transaction(*),] it is best to capture everything that Squid receives or
sends rather than trying to guess what the browser and Squid will
receive or send -- according to cache.log, there were lots of
Squid-server packets that your tcpdump configuration did not capture.


Thank you,

Alex.
P.S. (*) Entering a regular page URL in the browser usually results in
more than one HTTP transaction between the browser and Squid.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="012723.html">[squid-users] connections from particular users sometimes get stuck
</A></li>
	<LI>Next message (by thread): <A HREF="012736.html">[squid-users] connections from particular users sometimes get	stuck
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12735">[ date ]</a>
              <a href="thread.html#12735">[ thread ]</a>
              <a href="subject.html#12735">[ subject ]</a>
              <a href="author.html#12735">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
