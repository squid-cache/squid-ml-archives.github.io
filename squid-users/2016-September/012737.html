<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] connections from particular users sometimes get stuck
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20connections%20from%20particular%20users%20sometimes%20get%0A%20stuck&In-Reply-To=%3C7280391c-a10c-8eb9-c41a-4f924600dda8%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012736.html">
   <LINK REL="Next"  HREF="012746.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] connections from particular users sometimes get stuck</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20connections%20from%20particular%20users%20sometimes%20get%0A%20stuck&In-Reply-To=%3C7280391c-a10c-8eb9-c41a-4f924600dda8%40measurement-factory.com%3E"
       TITLE="[squid-users] connections from particular users sometimes get stuck">rousskov at measurement-factory.com
       </A><BR>
    <I>Wed Sep 28 16:21:46 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="012736.html">[squid-users] connections from particular users sometimes get	stuck
</A></li>
        <LI>Next message (by thread): <A HREF="012746.html">[squid-users] connections from particular users sometimes get stuck
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12737">[ date ]</a>
              <a href="thread.html#12737">[ thread ]</a>
              <a href="subject.html#12737">[ subject ]</a>
              <a href="author.html#12737">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 09/28/2016 09:41 AM, Antony Stone wrote:
&gt;<i> On Wednesday 28 September 2016 at 17:37:58, Alex Rousskov wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> AFAICT, Squid did not receive a request for www.ru:
</I>&gt;&gt;&gt;<i> $ egrep -c 'wwww.ru|217.112.35.75' cache.log.debug
</I>&gt;&gt;&gt;<i> 0
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> $ tshark -V -r squid-stuck-reference-client.pcap | egrep -c
</I>&gt;&gt;&gt;<i> 'wwww.ru|217.112.35.75' 0
</I>&gt;<i> 
</I>&gt;<i> Is that a direct copy'n'paste from your terminal?
</I>&gt;<i> 
</I>&gt;<i> If so, you tried one too many w's :(
</I>
Indeed! Fixing that exposes one HTTP request in the capture file.
Unfortunately,

1. Squid responded to that request (with a 407 message).
   Follow (tcp.stream eq 32) in Wireshark.

2. Squid did not receive this request when debugging was on:
   $ egrep -c 'www.ru|217.112.35.75' cache.log.debug
   0

It may be important to know that the captured request was received at
minute 53 while Squid debugging starts at minute 58 (I assume the
difference in hours is due to time zone effects and such).

Another potentially important fact that it took almost two minutes for
the 407 response to show up in the capture. It is not clear (to me)
whether the delay was due to network problems (in one or both
directions) or due to Squid. Again, follow (tcp.stream eq 32) in
Wireshark to see the details.


The &quot;I do not know which transaction got stuck and whether that
transaction go cache-logged&quot; conclusion and suggestions in my original
response still apply AFAICT.


Thank you,

Alex.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="012736.html">[squid-users] connections from particular users sometimes get	stuck
</A></li>
	<LI>Next message (by thread): <A HREF="012746.html">[squid-users] connections from particular users sometimes get stuck
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12737">[ date ]</a>
              <a href="thread.html#12737">[ thread ]</a>
              <a href="subject.html#12737">[ subject ]</a>
              <a href="author.html#12737">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
