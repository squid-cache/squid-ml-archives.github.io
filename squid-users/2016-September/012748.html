<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] cache_peer name gone from logs after upgrade to	3.5
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20cache_peer%20name%20gone%20from%20logs%20after%20upgrade%20to%0A%093.5&In-Reply-To=%3C270f124c-2368-f881-a07c-af962b35d5b5%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="012743.html">
   <LINK REL="Next"  HREF="012754.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] cache_peer name gone from logs after upgrade to	3.5</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20cache_peer%20name%20gone%20from%20logs%20after%20upgrade%20to%0A%093.5&In-Reply-To=%3C270f124c-2368-f881-a07c-af962b35d5b5%40treenet.co.nz%3E"
       TITLE="[squid-users] cache_peer name gone from logs after upgrade to	3.5">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Sep 29 03:53:01 UTC 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="012743.html">[squid-users] cache_peer name gone from logs after upgrade to	3.5
</A></li>
        <LI>Next message (by thread): <A HREF="012754.html">[squid-users] cache_peer name gone from logs after upgrade to	3.5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12748">[ date ]</a>
              <a href="thread.html#12748">[ thread ]</a>
              <a href="subject.html#12748">[ subject ]</a>
              <a href="author.html#12748">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 29/09/2016 7:38 a.m., Daniel Sutcliffe wrote:
&gt;<i> On Wed, Sep 28, 2016 at 1:56 PM, Yuri Voinov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">yvoinov at gmail.com</A>&gt; wrote:
</I>&gt;&gt;&gt;<i> It's tragedy, man.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> But 3.1 is too antique against 3.5 to remain unchanged.
</I>&gt;<i> 
</I>&gt;<i> On Wed, Sep 28, 2016 at 2:02 PM, Daniel Sutcliffe &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">dans at chairfour.com</A>&gt; wrote:
</I>&gt;&gt;<i> :) Thankfully, almost all of the changes are improvements
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Also, do not expect good documentation from open source
</I>&gt;<i> 
</I>&gt;<i> Also, perhaps do not expect 100% reliable answers on open source
</I>&gt;<i> mailing lists ;)
</I>&gt;<i> 
</I>&gt;<i> In the 3.1 logformat docs -
</I>&gt;<i> <A HREF="http://www.squid-cache.org/Versions/v3/3.1/cfgman/logformat.html">http://www.squid-cache.org/Versions/v3/3.1/cfgman/logformat.html</A>
</I>&gt;<i> we have a default of:
</I>&gt;<i>   logformat squid %ts.%03tu %6tr %&gt;a %Ss/%03&gt;Hs %&lt;st %rm %ru %un %Sh/%&lt;A %mt
</I>&gt;<i> Whereas in the 3.5 we have:
</I>&gt;<i>   logformat squid %ts.%03tu %6tr %&gt;a %Ss/%03&gt;Hs %&lt;st %rm %ru %[un %Sh/%&lt;a %mt
</I>&gt;<i> 
</I>&gt;<i> This is new for 3.5
</I>&gt;<i>   &lt;a Server IP address of the last server or peer connection
</I>&gt;<i> And this changed from this:
</I>&gt;<i>   &lt;A Server IP address or peer name
</I>&gt;<i> to this:
</I>&gt;<i>   &lt;A Server FQDN or peer name
</I>&gt;<i> 
</I>&gt;<i> I just needed to read a bit more - problem solved :)
</I>
As for the why:
 With many sites going IPv6-enabled we were getting a lot of complaints
and queries about why some requests would work and others not work, but
the log only have one name displayed for any access to the site(s). It
often turned out to be broken connections to just one IP of several.
With the new format one can see the broken IPs more clearly and identify
the issue without guessing.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="012743.html">[squid-users] cache_peer name gone from logs after upgrade to	3.5
</A></li>
	<LI>Next message (by thread): <A HREF="012754.html">[squid-users] cache_peer name gone from logs after upgrade to	3.5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#12748">[ date ]</a>
              <a href="thread.html#12748">[ thread ]</a>
              <a href="subject.html#12748">[ subject ]</a>
              <a href="author.html#12748">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
