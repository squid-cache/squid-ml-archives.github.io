<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid SSL Intercept have issues apps on iOS
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20SSL%20Intercept%20have%20issues%20apps%20on%20iOS&In-Reply-To=%3C1491910696185-4682052.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014947.html">
   <LINK REL="Next"  HREF="014937.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid SSL Intercept have issues apps on iOS</H1>
    <B>prashantbhosale</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20SSL%20Intercept%20have%20issues%20apps%20on%20iOS&In-Reply-To=%3C1491910696185-4682052.post%40n4.nabble.com%3E"
       TITLE="[squid-users] Squid SSL Intercept have issues apps on iOS">bhoslepu at gmail.com
       </A><BR>
    <I>Tue Apr 11 11:38:16 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="014947.html">[squid-users] Squid 3.4.8 Reverse with multiple SSL Sites and multiple Certs/Domains
</A></li>
        <LI>Next message (by thread): <A HREF="014937.html">[squid-users] Squid SSL Intercept have issues apps on iOS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14932">[ date ]</a>
              <a href="thread.html#14932">[ thread ]</a>
              <a href="subject.html#14932">[ subject ]</a>
              <a href="author.html#14932">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I was trying to setup Squid transparent SSLBump and its working. But it
giving problem for Apple apps. 
According to threads on mailing list excluded domains (.apple.com
.icloud.com .mzstatic.com .akamaihd.net .dropbox.com) then App Store works
(browsing apps, searching apps) but app installation(from App store) fails
with below squid access log:
1491910115.715     51 10.99.1.1 TAG_NONE/200 0 CONNECT 17.154.66.226:443 -
ORIGINAL_DST/17.154.66.226 -
1491910116.537     52 10.99.1.1 TAG_NONE/200 0 CONNECT 17.154.66.74:443 -
ORIGINAL_DST/17.154.66.74 -

Same issue is happening with Dropbox also, Dropbox app not syncing with
server.


Conf:
http_port 3128 intercept ssl-bump \
  cert=/etc/squid/ssl_cert/myCA.pem \
  generate-host-certificates=on dynamic_cert_mem_cache_size=4MB

acl local-servers dstdomain &quot;/etc/squid/allowed.txt&quot;

ssl_bump peek step1
ssl_bump splice local-servers
ssl_bump bump all
sslproxy_cert_error allow all
sslproxy_flags DONT_VERIFY_PEER

Is anybody has working conf for sslbump with exclude the HTTP Public Key
Pinning (HPKP) mechanism.




--
View this message in context: <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-SSL-Intercept-have-issues-apps-on-iOS-tp4682052.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-SSL-Intercept-have-issues-apps-on-iOS-tp4682052.html</A>
Sent from the Squid - Users mailing list archive at Nabble.com.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="014947.html">[squid-users] Squid 3.4.8 Reverse with multiple SSL Sites and multiple Certs/Domains
</A></li>
	<LI>Next message (by thread): <A HREF="014937.html">[squid-users] Squid SSL Intercept have issues apps on iOS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14932">[ date ]</a>
              <a href="thread.html#14932">[ thread ]</a>
              <a href="subject.html#14932">[ subject ]</a>
              <a href="author.html#14932">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
