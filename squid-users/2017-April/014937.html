<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid SSL Intercept have issues apps on iOS
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20SSL%20Intercept%20have%20issues%20apps%20on%20iOS&In-Reply-To=%3C92175640-6d77-f170-bca3-6a731fa8f56a%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014932.html">
   <LINK REL="Next"  HREF="014933.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid SSL Intercept have issues apps on iOS</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20SSL%20Intercept%20have%20issues%20apps%20on%20iOS&In-Reply-To=%3C92175640-6d77-f170-bca3-6a731fa8f56a%40treenet.co.nz%3E"
       TITLE="[squid-users] Squid SSL Intercept have issues apps on iOS">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Apr 12 01:39:38 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="014932.html">[squid-users] Squid SSL Intercept have issues apps on iOS
</A></li>
        <LI>Next message (by thread): <A HREF="014933.html">[squid-users] purge cmd and headers ??
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14937">[ date ]</a>
              <a href="thread.html#14937">[ thread ]</a>
              <a href="subject.html#14937">[ subject ]</a>
              <a href="author.html#14937">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/04/2017 11:38 p.m., prashantbhosale wrote:
&gt;<i> I was trying to setup Squid transparent SSLBump and its working. But it
</I>&gt;<i> giving problem for Apple apps. 
</I>&gt;<i> According to threads on mailing list excluded domains (.apple.com
</I>&gt;<i> .icloud.com .mzstatic.com .akamaihd.net .dropbox.com) then App Store works
</I>&gt;<i> (browsing apps, searching apps) but app installation(from App store) fails
</I>&gt;<i> with below squid access log:
</I>&gt;<i> 1491910115.715     51 10.99.1.1 TAG_NONE/200 0 CONNECT 17.154.66.226:443 -
</I>&gt;<i> ORIGINAL_DST/17.154.66.226 -
</I>&gt;<i> 1491910116.537     52 10.99.1.1 TAG_NONE/200 0 CONNECT 17.154.66.74:443 -
</I>&gt;<i> ORIGINAL_DST/17.154.66.74 -
</I>
Please read
&lt;<A HREF="http://wiki.squid-cache.org/Features/SslPeekAndSplice#Processing_steps">http://wiki.squid-cache.org/Features/SslPeekAndSplice#Processing_steps</A>&gt;

The above log enties look like the step 1.i CONNECT requests to me.
TLS/SSL has not started at that point and ssl_bump has not even been
considered.

Later on ...

&gt;<i> sslproxy_cert_error allow all
</I>
... you have disabled all errors from being visible to anyone.
*including you*.

&gt;<i> sslproxy_flags DONT_VERIFY_PEER
</I>
... and you have disabled all TLS security protections.

&gt;<i> 
</I>&gt;<i> Is anybody has working conf for sslbump with exclude the HTTP Public Key
</I>&gt;<i> Pinning (HPKP) mechanism.
</I>
There is no way to know whether the pinning is being used, nor even what
software was being used. Some client IP connects and signals that it
needs TLS. Then exists as soon as TLS is sent ot it. End of story.

There are a large number of things that could be going on when a client
simply disappears like that. As humans we can know a lot of contextual
information about the whole situation and decide that its HPKP - but the
software on the spot when it happened does not have any of that extra
info to work with.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="014932.html">[squid-users] Squid SSL Intercept have issues apps on iOS
</A></li>
	<LI>Next message (by thread): <A HREF="014933.html">[squid-users] purge cmd and headers ??
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14937">[ date ]</a>
              <a href="thread.html#14937">[ thread ]</a>
              <a href="subject.html#14937">[ subject ]</a>
              <a href="author.html#14937">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
