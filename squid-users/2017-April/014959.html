<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] HTTPS woes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20HTTPS%20woes&In-Reply-To=%3Cbbc3984a-3830-8f45-2100-36c39aae26e0%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014956.html">
   <LINK REL="Next"  HREF="014960.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] HTTPS woes</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20HTTPS%20woes&In-Reply-To=%3Cbbc3984a-3830-8f45-2100-36c39aae26e0%40treenet.co.nz%3E"
       TITLE="[squid-users] HTTPS woes">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Apr 14 11:36:52 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="014956.html">[squid-users] HTTPS woes
</A></li>
        <LI>Next message (by thread): <A HREF="014960.html">[squid-users] HTTPS woes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14959">[ date ]</a>
              <a href="thread.html#14959">[ thread ]</a>
              <a href="subject.html#14959">[ subject ]</a>
              <a href="author.html#14959">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 14/04/2017 6:00 a.m., Yuri Voinov wrote:
&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 13.04.2017 22:57, Olly Lennox &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;&gt;<i> Hi There,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've been battling for the last few days on a little project to setup a Raspberry PI device as a small parental blocking server. I've managed to configure the device to work as a transparent proxy using squid which is assigned as the default gateway via DHCP and after a lot of messing about I've finally got to the point where it's routing traffic correctly, proxying and blocking unwanted websites over HTTP.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The problem I have is that for the life of me I cannot get things to work over HTTPS. It's working over the older, insecure web browsers where anything goes but the more modern browsers will not accept the SSL certificates and fail with insecure messages. I've tried various ways of generating a cert and also generating a CA cert and signing my other cert with it to no avail. I've had a mixture of errors back from the browser from WEAK_ALGORITHM to BAD_AUTHORITY to INVALID_CERT.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've been using openssl to generate self-signed certificates and create a der file. Below is a recent attempt but I've tried lots of different approaches:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ------------
</I>&gt;&gt;<i> openssl req -x509 -nodes -sha256 -days 3650 -newkey rsa:2048 -keyout squid.key -out squid.crt 
</I>&gt;&gt;<i> openssl req -new -x509 -key squid.key -out squid.pem 
</I>&gt;&gt;<i> openssl x509 -in squid.pem -inform pem -out squid.der -outform der
</I>&gt;&gt;<i> ------------
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Then my config in Squid is like this, the dhparams file I generated as per instructions in the squid wiki:
</I>&gt;<i> First of all: what's Squid's version?
</I>
And secondly; are you sufficiently capable with Debian to (cross-)build
your own Squid package that can run on Raspian?

The Debian squid/squid3 packages do not have TLS/SSL/HTTPS support. So
you will be building your own to get the bumping features.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="014956.html">[squid-users] HTTPS woes
</A></li>
	<LI>Next message (by thread): <A HREF="014960.html">[squid-users] HTTPS woes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14959">[ date ]</a>
              <a href="thread.html#14959">[ thread ]</a>
              <a href="subject.html#14959">[ subject ]</a>
              <a href="author.html#14959">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
