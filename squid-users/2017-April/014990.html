<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid Proxy with simple iptable rule ...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Proxy%20with%20simple%20iptable%20rule%20...&In-Reply-To=%3CCAMwDxM3W3pPkhd%2BOwaRWmKf3ZgJL6HSbGdKuHhve84r-v_D12A%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014958.html">
   <LINK REL="Next"  HREF="014991.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid Proxy with simple iptable rule ...</H1>
    <B>Arsalan Hussain</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Proxy%20with%20simple%20iptable%20rule%20...&In-Reply-To=%3CCAMwDxM3W3pPkhd%2BOwaRWmKf3ZgJL6HSbGdKuHhve84r-v_D12A%40mail.gmail.com%3E"
       TITLE="[squid-users] Squid Proxy with simple iptable rule ...">arsalan at preston.edu.pk
       </A><BR>
    <I>Mon Apr 17 12:45:55 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="014958.html">[squid-users] Squid Proxy with simple iptable rule ...
</A></li>
        <LI>Next message (by thread): <A HREF="014991.html">[squid-users] Squid Proxy with simple iptable rule ...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14990">[ date ]</a>
              <a href="thread.html#14990">[ thread ]</a>
              <a href="subject.html#14990">[ subject ]</a>
              <a href="author.html#14990">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear Sir Amos

I had reconfigured Squid 3.5 and it works fine. but i want to protect WAN
interface through IPTABLES

1- can you help me chain rule of simple iptable which drop all trafic from
WAN eth0 to secure and allow squid user request from LAN eth1 only.   (my
WAN send flood by public and it waste my all bandwidth)

For Example:
-A INPUT -j LOG
-A INPUT -j DROP

Then allow
-A INPUT-i eth1 -j ACCEPT
-A FORWARD -i eth1 -j ACCEPT

but its block traffic. Can you please help me what allow rule will works
for Squid 3.5 when i secure my WAN.

On Fri, Apr 14, 2017 at 4:28 PM, Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt; wrote:

&gt;<i> On 13/04/2017 11:46 p.m., Arsalan Hussain wrote:
</I>&gt;<i> &gt; Dear All,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I am facing problem with iptable rules for squid 3.5.23. my simple squid
</I>&gt;<i> &gt; configuration is attached and also iptable rules.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; It works fine when i restart squid, iptables, network services but after
</I>&gt;<i> a
</I>&gt;<i> &gt; while it give problem of slow speed or even rejecting packets in squid
</I>&gt;<i> &gt; access.log
</I>&gt;<i>
</I>&gt;<i> Your squid.conf first line says that Browsers are configured to use the
</I>&gt;<i> proxy. That means iptables doing NAT is not relevant.
</I>&gt;<i>
</I>&gt;<i> You also have a mix of a many very different and half-setup proxying
</I>&gt;<i> configurations in your configs.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> First get that sorted out. Telling us what do you actually want the
</I>&gt;<i> traffic to be doing might be a good start.
</I>&gt;<i>
</I>&gt;<i> What is going wrong is clear, but &quot;I am facing a problem&quot; does not tell
</I>&gt;<i> what we should advise to fix that and in this case your config is so
</I>&gt;<i> mixed its not easy to even make a good guess.
</I>&gt;<i>
</I>&gt;<i> Amos
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>


-- 
With Regards,


*Arsalan Hussain*
*Assistant Director, Networks &amp; Information System*

*PRESTON UNIVERSITY*
Add: Plot: 85, Street No: 3, Sector H-8/1, Islamabad, Pakistan
Cell: +92-322-5018611
UAN: (51) 111-707-808 (Ext: 443)
*If you are too lazy to plow now, don't expect a harvest, later*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20170417/a3f83450/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20170417/a3f83450/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="014958.html">[squid-users] Squid Proxy with simple iptable rule ...
</A></li>
	<LI>Next message (by thread): <A HREF="014991.html">[squid-users] Squid Proxy with simple iptable rule ...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14990">[ date ]</a>
              <a href="thread.html#14990">[ thread ]</a>
              <a href="subject.html#14990">[ subject ]</a>
              <a href="author.html#14990">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
