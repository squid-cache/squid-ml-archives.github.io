<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Access-Control-* headers missing when going through squid
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Access-Control-%2A%20headers%20missing%20when%20going%0A%20through%20squid&In-Reply-To=%3C0b3b3fb5-5699-f17b-429f-ea790f9babcd%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015011.html">
   <LINK REL="Next"  HREF="015030.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Access-Control-* headers missing when going through squid</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Access-Control-%2A%20headers%20missing%20when%20going%0A%20through%20squid&In-Reply-To=%3C0b3b3fb5-5699-f17b-429f-ea790f9babcd%40treenet.co.nz%3E"
       TITLE="[squid-users] Access-Control-* headers missing when going through squid">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Apr 19 04:41:08 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015011.html">[squid-users] Access-Control-* headers missing when going through	squid
</A></li>
        <LI>Next message (by thread): <A HREF="015030.html">[squid-users] Access-Control-* headers missing when going through squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15013">[ date ]</a>
              <a href="thread.html#15013">[ thread ]</a>
              <a href="subject.html#15013">[ subject ]</a>
              <a href="author.html#15013">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 19/04/17 13:12, Dan Charlesworth wrote:
&gt;<i> Hi everyone,
</I>&gt;<i>
</I>&gt;<i> This is a super weird one!
</I>&gt;<i>
</I>&gt;<i> This Pressreader site (<A HREF="http://sheppartonnews.pressreader.com/shepparton-news">http://sheppartonnews.pressreader.com/shepparton-news</A>) gets a totally different (erroneous) response from the server when accessing it through squid on a particular school's network.
</I>&gt;<i>
</I>&gt;<i> It doesn&#8217;t happen through any other squid box on any other network I&#8217;ve tried, yet at this site you bypass squid through the same gateway and its fine; you use squid and it fails.
</I>&gt;<i>
</I>&gt;<i> The only errors I can see in the browser (that happen when it fails) are CORS errors on several of the requests. Comparing the headers it looks like the erroneous requests lack these from the response:
</I>&gt;<i>
</I>&gt;<i> Access-Control-Allow-Credentials: true
</I>&gt;<i> Access-Control-Allow-Origin: <A HREF="http://sheppartonnews.pressreader.com">http://sheppartonnews.pressreader.com</A>
</I>&gt;<i> Access-Control-Expose-Headers: ndstate,X-PD-AProfile,X-PD-Profile,X-PD-Ticket,X-PD-Auth,X-PD-PAuth,X-PD-Token
</I>&gt;<i>
</I>&gt;<i> No, the squid config we&#8217;re using never touches headers. Every HTTP/S request from the client is being allowed and is a 200/304 in both situations.
</I>&gt;<i>
</I>&gt;<i> (see attached for the full request response headers)
</I>&gt;<i>
</I>&gt;<i> Make any sense to anyone?
</I>
Squid does not touch these headers itself unless you configure it to. So 
something there is altering them. It may be external MITM stuff, or 
Squid coping with broken input.

Try adding &quot;debug_options 11,2&quot; to see what is actually arriving and 
leaving that proxy.


Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015011.html">[squid-users] Access-Control-* headers missing when going through	squid
</A></li>
	<LI>Next message (by thread): <A HREF="015030.html">[squid-users] Access-Control-* headers missing when going through squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15013">[ date ]</a>
              <a href="thread.html#15013">[ thread ]</a>
              <a href="subject.html#15013">[ subject ]</a>
              <a href="author.html#15013">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
