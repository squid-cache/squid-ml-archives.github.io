<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] HTTPS woes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20HTTPS%20woes&In-Reply-To=%3C2103521410.3479563.1492593732223%40mail.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015012.html">
   <LINK REL="Next"  HREF="015017.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] HTTPS woes</H1>
    <B>Olly Lennox</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20HTTPS%20woes&In-Reply-To=%3C2103521410.3479563.1492593732223%40mail.yahoo.com%3E"
       TITLE="[squid-users] HTTPS woes">oliver at lennox-it.uk
       </A><BR>
    <I>Wed Apr 19 09:22:12 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015012.html">[squid-users] HTTPS woes
</A></li>
        <LI>Next message (by thread): <A HREF="015017.html">[squid-users] HTTPS woes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15016">[ date ]</a>
              <a href="thread.html#15016">[ thread ]</a>
              <a href="subject.html#15016">[ subject ]</a>
              <a href="author.html#15016">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Amos, I'll install this. One last question if I may! Squid is working fine now with both HTTP and HTTPS but for some reason it is refusing to launch on boot. 

It works perfectly when started with &quot;service squid start&quot; but not boot. The error is:
squid.service - LSB: Squid HTTP Proxy version 3.x
   Loaded: loaded (/etc/init.d/squid; generated; vendor preset: enabled)
   Active: failed (Result: resources) since Wed 2017-04-19 10:19:18 BST; 53s ago
     Docs: man:systemd-sysv-generator(8)
  Process: 598 ExecStart=/etc/init.d/squid start (code=exited, status=0/SUCCESS)

Apr 19 10:19:13 raspberrypi (squid-1)[1606]: Ipc::Mem::Segment::open failed to shm_open(/squid-ssl_session_cache.shm): (2) No such file or direct
Apr 19 10:19:13 raspberrypi squid[1283]: Squid Parent: (squid-1) process 1606 exited with status 1
Apr 19 10:19:16 raspberrypi squid[1283]: Squid Parent: (squid-1) process 1633 started
Apr 19 10:19:18 raspberrypi squid[1283]: Squid Parent: (squid-1) process 1633 exited with status 1
Apr 19 10:19:18 raspberrypi squid[1283]: Squid Parent: (squid-1) process 1633 will not be restarted due to repeated, frequent failures
Apr 19 10:19:18 raspberrypi squid[1283]: Exiting due to repeated, frequent failures
Apr 19 10:19:18 raspberrypi systemd[1]: squid.service: Daemon never wrote its PID file. Failing.
Apr 19 10:19:18 raspberrypi systemd[1]: Failed to start LSB: Squid HTTP Proxy version 3.x.
Apr 19 10:19:18 raspberrypi systemd[1]: squid.service: Unit entered failed state.
Apr 19 10:19:18 raspberrypi systemd[1]: squid.service: Failed with result 'resources'.

Any ideas?



________________________________
From: Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> 
Sent: Wednesday, 19 April 2017, 5:22
Subject: Re: [squid-users] HTTPS woes



Olly,  Debian provides a ca-certificates package containing the Mozilla CA list. It is updated whenever the CA set changes. Though of course you should have apt connected to the relevant security repository (jesse-security?) for regular updates.


Amos


On 19/04/17 03:10, Olly Lennox wrote:

Would you mind sharing the script you use?
&gt;<i> 
</I>&gt;<i><A HREF="https://lists.squid-cache.org/listinfo/squid-users">oliver at lennox-it.uk</A>
</I>&gt;<i>lennox-it.uk
</I>&gt;<i>tel: 07900 648 252
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>________________________________
</I>&gt;<i> From: Yuri Voinov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">yvoinov at gmail.com</A>&gt;
</I>&gt;<i>To: Olly Lennox &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">oliver at lennox-it.uk</A>&gt;; &quot;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt; 
</I>&gt;<i>Sent: Tuesday, 18 April 2017, 16:00
</I>&gt;<i>Subject: Re: [squid-users] HTTPS woes
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>I have automated cron job to refresh Mozilla CA's bundle by monthly basis.
</I>&gt;<i>Intermediate CA's, however, requires non-scheduled maintenance. I've maintain it by demand.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>18.04.2017 20:17, Olly Lennox &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;<i>
</I>&gt;<i>Thanks Yuri! The Mozilla Bundle has worked!! Most of the major sites seem to be working which is all we need. How often do these certificates refresh? Would they need updating every month or so?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i><A HREF="https://lists.squid-cache.org/listinfo/squid-users">oliver at lennox-it.uk</A>
</I>&gt;&gt;<i>lennox-it.uk
</I>&gt;&gt;<i>tel: 07900 648 252
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i>________________________________
</I>&gt;&gt;<i> From: Yuri Voinov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">yvoinov at gmail.com</A>&gt;
</I>&gt;&gt;<i>To: Olly Lennox &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">oliver at lennox-it.uk</A>&gt;; &quot;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt; 
</I>&gt;&gt;<i>Sent: Tuesday, 18 April 2017, 14:43
</I>&gt;&gt;<i>Subject: Re: [squid-users] HTTPS woes
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>You talked about two different things.
</I>&gt;&gt;<i>1. root CA usually built-in in clients. For standalone use, root CA (from Mozilla) usually distributes with openssl distributions. If you need (or your openssl distribution does not contains root CAs), you can find separately distributed Mozilla CA's by short googling: 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i><A HREF="https://www.google.com/search?q=Mozilla+CA+bundle">https://www.google.com/search?q=Mozilla+CA+bundle</A>
</I>&gt;&gt;<i>2. Intermediate CA's is subordinate for roots CA. It does not exists by gouverned repository (because of supporting it is work, manual work and should be do by somebody), moreover, it spreaded across CA authorities. There is no automated tool to support this _intermediate_list. The problem also: intermediate CA's usuallu has much short validity period instead of roots, and should supports all time at time.
</I>&gt;&gt;<i>Finally - it you want to use Squid with SSL Bump, you should understand PKI infrastructure and yes - you should support root CA &amp; intermediate CAs on proxy by yourself all time. There is no free or payment basis service which is do it for you.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>18.04.2017 19:35, Olly Lennox &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>So anyone who wants to use Squid over HTTPS in the way has to build this repository themselves by manually downloading all the CA bundles?
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i>________________________________
</I>&gt;&gt;&gt;<i> From: Yuri &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">yvoinov at gmail.com</A>&gt;
</I>&gt;&gt;&gt;<i>To: Olly Lennox &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">oliver at lennox-it.uk</A>&gt;; &quot;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt; 
</I>&gt;&gt;&gt;<i>Sent: Tuesday, 18 April 2017, 14:03
</I>&gt;&gt;&gt;<i>Subject: Re: [squid-users] HTTPS woes
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>18.04.2017 18:56, Olly Lennox &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>I'm using 
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>sslproxy_foreign_intermediate_certs
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>Is this the same thing? 
</I>&gt;&gt;&gt;&gt;<i>
</I>No. You firstly required CA roots available for squid. CA roots and intermediate is the different things.
&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>Also is there anywhere to get a bundle of all the major CA intermdiate certs or do you have to download them all manually?
</I>No. You should build it by yourself. 
&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>Cheers,
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i><A HREF="https://lists.squid-cache.org/listinfo/squid-users">oliver at lennox-it.uk</A>
</I>&gt;&gt;&gt;&gt;<i>lennox-it.uk
</I>&gt;&gt;&gt;&gt;<i>tel: 07900 648
</I>                                       252
&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i>________________________________
</I>&gt;&gt;&gt;&gt;<i> From: Yuri &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">yvoinov at gmail.com</A>&gt;
</I>&gt;&gt;&gt;&gt;<i>To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> 
</I>&gt;&gt;&gt;&gt;<i>Sent: Tuesday, 18 April 2017, 13:51
</I>&gt;&gt;&gt;&gt;<i>Subject: Re: [squid-users] HTTPS woes
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>Try to specify roots CA bundle/dir explicity by specifying one of this 
</I>&gt;&gt;&gt;&gt;<i>params:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>#  TAG:
</I>                                       sslproxy_cafile
&gt;&gt;&gt;&gt;<i>#    file
</I>                                       containing CA
                                       certificates
                                       to use when
                                       verifying
                                       server
&gt;&gt;&gt;&gt;<i>#   
</I>                                       certificates
                                       while proxying <A HREF="https://">https://</A> URLs
&gt;&gt;&gt;&gt;<i>#Default:
</I>&gt;&gt;&gt;&gt;<i># none
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>#  TAG:
</I>                                       sslproxy_capath
&gt;&gt;&gt;&gt;<i>#    directory
</I>                                       containing CA
                                       certificates
                                       to use when
                                       verifying
&gt;&gt;&gt;&gt;<i>#    server
</I>                                       certificates
                                       while proxying <A HREF="https://">https://</A> URLs
&gt;&gt;&gt;&gt;<i>#Default:
</I>&gt;&gt;&gt;&gt;<i># none
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>18.04.2017
</I>                                       18:46, Olly
                                       Lennox &#1087;&#1080;&#1096;&#1077;&#1090;:
&gt;&gt;&gt;&gt;&gt;<i> Hi All,
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Still
</I>                                       having
                                       problems here.
                                       This is my
                                       https config
                                       now:
&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>                                       ---------------------------------https_port
                                       3129 intercept
                                       ssl-bump
                                       generate-host-certificates=on
dynamic_cert_mem_cache_size=4MB cert=/etc/squid3/ssl_cert/squid.crt
                                       key=/etc/squid3/ssl_cert/squid.key
options=NO_SSLv3 dhparams=/etc/squid3/ssl_cert/dhparam.pem
&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> acl step1
</I>                                       at_step
                                       SslBump1
&gt;&gt;&gt;&gt;&gt;<i> ssl_bump
</I>                                       peek step1
&gt;&gt;&gt;&gt;&gt;<i> ssl_bump
</I>                                       bump all
&gt;&gt;&gt;&gt;&gt;<i>
</I>                                       sslproxy_options
NO_SSLv2,NO_SSLv3,SINGLE_DH_USE
&gt;&gt;&gt;&gt;&gt;<i>
</I>                                       sslproxy_cipher
EECDH+ECDSA+AESGCM:EECDH+aRSA+AESGCM:EECDH+ECDSA+SHA384:EECDH+ECDSA+SHA256:EECDH+aRSA+SHA384:EECDH+aRSA+SHA256:EECDH+aRSA+RC4:EECDH:EDH+aRSA:!RC4:!aNULL:!eNULL:!LOW:!3DES:!MD5:!EXP:!PSK:!SRP:!DSS
&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>                                       sslcrtd_program
/usr/lib/squid3/ssl_crtd -s /var/lib/ssl_db -M 4MB
&gt;&gt;&gt;&gt;&gt;<i>
</I>                                       sslcrtd_children
                                       8 startup=1
                                       idle=1
&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>                                       ---------------------------------
&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> I'm
</I>                                       running
                                       version 3.5.23
                                       with openssl
                                       1.0. I've had
                                       to disable
                                       libecap
                                       because I
                                       couldn't build
                                       3.5 with ecap
                                       enabled. I'm
                                       getting the
                                       following
                                       error when
                                       trying to
                                       connect with
                                       SSL:
&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>                                       ---------------------------------
&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> The
</I>                                       following
                                       error was
                                       encountered
                                       while trying
                                       to retrieve
                                       the URL: <A HREF="https://www.google.co.uk/*">https://www.google.co.uk/*</A>
&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Failed to
</I>                                       establish a
                                       secure
                                       connection to
                                       216.58.198.67
&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> The
</I>                                       system
                                       returned:
&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> (71)
</I>                                       Protocol error
                                       (TLS code:
X509_V_ERR_UNABLE_TO_GET_ISSUER_CERT_LOCALLY)
&gt;&gt;&gt;&gt;&gt;<i> SSL
</I>                                       Certficate
                                       error:
                                       certificate
                                       issuer (CA)
                                       not known:
                                       /C=US/O=Equifax/OU=Equifax
                                       Secure
                                       Certificate
                                       Authority
&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> This
</I>                                       proxy and the
                                       remote host
                                       failed to
                                       negotiate a
                                       mutually
                                       acceptable
                                       security
                                       settings for
                                       handling your
                                       request. It is
                                       possible that
                                       the remote
                                       host does not
                                       support secure
                                       connections,
                                       or the proxy
                                       is not
                                       satisfied with
                                       the host
                                       security
                                       credentials.
&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Your
</I>                                       cache
                                       administrator
                                       is webmaster.
&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Generated
</I>                                       Tue, 18 Apr
                                       2017 12:23:40
                                       GMT by
                                       raspberrypi
                                       (squid/3.5.23)
&gt;&gt;&gt;&gt;&gt;<i>
</I>                                       ---------------------------------
&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> The CA is
</I>                                       always listed
                                       as not known
                                       not matter
                                       what site I
                                       try I always
                                       get this
                                       error.
&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Any
</I>                                       ideas?
&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Thanks,
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Olly
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>                                       ________________________________
&gt;&gt;&gt;&gt;&gt;<i> From:
</I>                                       Olly Lennox
                                       &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">oliver at lennox-it.uk</A>&gt;
&gt;&gt;&gt;&gt;&gt;<i> To: Amos
</I>                                       Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;; &quot;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
&gt;&gt;&gt;&gt;&gt;<i> Sent:
</I>                                       Sunday, 16
                                       April 2017,
                                       9:31
&gt;&gt;&gt;&gt;&gt;<i> Subject:
</I>                                       Re:
                                       [squid-users]
                                       HTTPS woes
&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Thanks
</I>                                       Amos, it's
                                       finally built
                                       but I had to
                                       disabled ecap,
                                       for whatever
                                       reason this
                                       kept failing
                                       (with version
                                       1.0.1
                                       installed). It
                                       failed on a
                                       reference to
                                       the Area
                                       function I
                                       think but I
                                       don't have the
                                       error message
                                       copied. I'm
                                       trying now to
                                       configure the
                                       ssl stare/peek
                                       and will let
                                       you know how
                                       it goes.
&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Olly
</I>&gt;&gt;&gt;&gt;&gt;<i>  
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">oliver at lennox-it.uk</A>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>                                       lennox-it.uk
&gt;&gt;&gt;&gt;&gt;<i> tel:
</I>                                       07900 648 252
&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>                                       ________________________________
&gt;&gt;&gt;&gt;&gt;<i> From:
</I>                                       Amos Jeffries
                                       &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;
&gt;&gt;&gt;&gt;&gt;<i> To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;&gt;&gt;&gt;<i> Sent:
</I>                                       Saturday, 15
                                       April 2017,
                                       23:07
&gt;&gt;&gt;&gt;&gt;<i> Subject:
</I>                                       Re:
                                       [squid-users]
                                       HTTPS woes
&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> On
</I>                                       15/04/2017
                                       9:59 a.m.,
                                       Olly Lennox
                                       wrote:
&gt;&gt;&gt;&gt;&gt;&gt;<i> Hi
</I>                                       Guys.
&gt;&gt;&gt;&gt;&gt;&gt;<i> I'm
</I>                                       still
                                       struggling
                                       with this. I'm
                                       trying to
                                       build a
                                       version of 3.5
                                       but I just
                                       can't get it
                                       to work. I'm
                                       currently
                                       attempting to
                                       rebuild the
                                       stretch
                                       package with
                                       SSL enabled
                                       but build
                                       keeps failing
                                       with the
                                       following:
&gt;&gt;&gt;&gt;&gt;&gt;<i>
</I>                                       ../../src/ssl/gadgets.h:83:45:
                                       error:
                                       &#226;CRYPTO_LOCK_X509&#226;
                                       was not
                                       declared in
                                       this scope
                                       typedef
                                       LockingPointer&lt;X509,
                                       X509_free_cpp,
CRYPTO_LOCK_X509&gt; X509_Pointer;                                     
                                            
                                       ^~~~~~~~~~~~~~~~../../src/ssl/gadgets.h:83:61:
                                       error:
                                       template
                                       argument 3 is
                                       invalid
                                       typedef
                                       LockingPointer&lt;X509,
                                       X509_free_cpp,
CRYPTO_LOCK_X509&gt; X509_Pointer;                                     
                                                    
                                              
^../../src/ssl/gadgets.h:89:53: error: &#226;CRYPTO_LOCK_EVP_PKEY&#226; was not
                                       declared in
                                       this scope
                                       typedef
                                       LockingPointer&lt;EVP_PKEY,
EVP_PKEY_free_cpp,
CRYPTO_LOCK_EVP_PKEY&gt; EVP_PKEY_Pointer;                             
                                                    
                                              
                                       ^~~~~~~~~~~~~~~~~~~~../../src/ssl/gadgets.h:89:73:
                                       error:
                                       template
                                       argument 3 is
                                       invalid
                                       typedef
                                       LockingPointer&lt;EVP_PKEY,
EVP_PKEY_free_cpp,
CRYPTO_LOCK_EVP_PKEY&gt; EVP_PKEY_Pointer;                             
                                                    
                                                    
                                                    
^../../src/ssl/gadgets.h:116:43: error: &#226;CRYPTO_LOCK_SSL&#226; was not
                                       declared in
                                       this scope
                                       typedef
                                       LockingPointer&lt;SSL,
                                       SSL_free_cpp,
CRYPTO_LOCK_SSL&gt; SSL_Pointer;                                       
                                        
^~~~~~~~~~~~~~~../../src/ssl/gadgets.h:116:58: error: template argument
                                       3 is invalid
                                       typedef
                                       LockingPointer&lt;SSL,
                                       SSL_free_cpp,
CRYPTO_LOCK_SSL&gt; SSL_Pointer;                                       
                                                    
                                           ^
&gt;&gt;&gt;&gt;&gt;&gt;<i> Any
</I>                                       ideas?
&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> On
</I>                                       Jesse/stable:
&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> apt-get
</I>                                       build-dep
                                       squid3
&gt;&gt;&gt;&gt;&gt;<i> apt-get
</I>                                       install
                                       libss-dev
&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> On
</I>                                       stretch/testing/unstable:
&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> apt-get
</I>                                       build-dep
                                       squid
&gt;&gt;&gt;&gt;&gt;<i> apt-get
</I>                                       install
                                       libss1.0-dev
&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> That
</I>                                       should do it
                                       for you.
&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Amos
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>                                       _______________________________________________
&gt;&gt;&gt;&gt;&gt;<i>
</I>                                       squid-users
                                       mailing list
&gt;&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>                                       _______________________________________________
&gt;&gt;&gt;&gt;&gt;<i>
</I>                                       squid-users
                                       mailing list
&gt;&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A> 
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>                                       _______________________________________________
&gt;&gt;&gt;&gt;&gt;<i>
</I>                                       squid-users
                                       mailing list
&gt;&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>_______________________________________________
</I>&gt;&gt;&gt;&gt;<i>squid-users
</I>                                       mailing list
&gt;&gt;&gt;&gt;<i><A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;&gt;&gt;<i><A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>-- 
</I>&gt;&gt;<i>Bugs to the Future
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>-- 
</I>&gt;<i>Bugs to the Future
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>squid-users mailing list <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A> 

_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015012.html">[squid-users] HTTPS woes
</A></li>
	<LI>Next message (by thread): <A HREF="015017.html">[squid-users] HTTPS woes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15016">[ date ]</a>
              <a href="thread.html#15016">[ thread ]</a>
              <a href="subject.html#15016">[ subject ]</a>
              <a href="author.html#15016">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
