<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Cache peer selection with duplicate host names
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Cache%20peer%20selection%20with%20duplicate%20host%20names&In-Reply-To=%3C09985f13-f4d0-6bb9-dffb-8cf4f355d500%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015054.html">
   <LINK REL="Next"  HREF="015056.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Cache peer selection with duplicate host names</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Cache%20peer%20selection%20with%20duplicate%20host%20names&In-Reply-To=%3C09985f13-f4d0-6bb9-dffb-8cf4f355d500%40measurement-factory.com%3E"
       TITLE="[squid-users] Cache peer selection with duplicate host names">rousskov at measurement-factory.com
       </A><BR>
    <I>Tue Apr 25 14:31:35 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015054.html">[squid-users] Cache peer selection with duplicate host names
</A></li>
        <LI>Next message (by thread): <A HREF="015056.html">[squid-users] Huge memory required for squid 3.5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15058">[ date ]</a>
              <a href="thread.html#15058">[ thread ]</a>
              <a href="subject.html#15058">[ subject ]</a>
              <a href="author.html#15058">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 04/23/2017 08:57 PM, Amos Jeffries wrote:

&gt;<i> When the
</I>&gt;<i> forwarding logic looks for an open persistent connection for the Student
</I>&gt;<i> IP:port it might get handed the existing Staff connection
</I>
FWIW, this behavior is a Squid bug: Since a peer has several
traffic-affecting properties besides its address, the connection
selection logic must obey peer selection choices, even if all peers have
the same addresses. The same underlying problem might result in the
wrong peer used after a hot reconfiguration, even if all peers have
distinct addresses.

Please report this bug to Squid bugzilla. This bug does not have a
trivial fix but hopefully somebody will volunteer to provide or sponsor one.


Thank you,

Alex.
P.S. Workarounds and workload cleanup suggested by Amos is good advice.
I just wanted clearly classify this as a bug (rather than desirable
behavior), so providing or facilitating a quality fix would be welcomed.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015054.html">[squid-users] Cache peer selection with duplicate host names
</A></li>
	<LI>Next message (by thread): <A HREF="015056.html">[squid-users] Huge memory required for squid 3.5
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15058">[ date ]</a>
              <a href="thread.html#15058">[ thread ]</a>
              <a href="subject.html#15058">[ subject ]</a>
              <a href="author.html#15058">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
