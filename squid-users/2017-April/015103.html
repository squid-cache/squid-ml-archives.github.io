<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid proxy without name resolution for internet	adresses behind parent proxy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20proxy%20without%20name%20resolution%20for%20internet%0A%09adresses%20behind%20parent%20proxy&In-Reply-To=%3C00e201d2c17e%2416067e10%2442137a30%24%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015100.html">
   <LINK REL="Next"  HREF="015104.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid proxy without name resolution for internet	adresses behind parent proxy</H1>
    <B>Eliezer  Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20proxy%20without%20name%20resolution%20for%20internet%0A%09adresses%20behind%20parent%20proxy&In-Reply-To=%3C00e201d2c17e%2416067e10%2442137a30%24%40ngtech.co.il%3E"
       TITLE="[squid-users] Squid proxy without name resolution for internet	adresses behind parent proxy">eliezer at ngtech.co.il
       </A><BR>
    <I>Sun Apr 30 06:50:42 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015100.html">[squid-users] Squid proxy without name resolution for internet adresses behind parent proxy
</A></li>
        <LI>Next message (by thread): <A HREF="015104.html">[squid-users] Squid proxy without name resolution for internet adresses behind parent proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15103">[ date ]</a>
              <a href="thread.html#15103">[ thread ]</a>
              <a href="subject.html#15103">[ subject ]</a>
              <a href="author.html#15103">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Can you try to add the next to your squid.conf:
dns_v4_first on

and see if it helps?

Eliezer

* <A HREF="http://www.squid-cache.org/Doc/config/dns_v4_first/">http://www.squid-cache.org/Doc/config/dns_v4_first/</A>

----
Eliezer Croitoru
Linux System Administrator
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>



-----Original Message-----
From: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On Behalf Of mbaltruschat
Sent: Saturday, April 29, 2017 11:08 PM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Squid proxy without name resolution for internet adresses behind parent proxy

Hello Amos,

many thanks for your reply, to your first question, here are some details
about our network structure and how the clients connect to the proxy:

We have a corporate network, which has a firewall to the internet, which we
use as parent proxy for our own proxy servers.
The DNS Servers in the corporate network dont resolve public adresses, and
there is no routing to public adresses, the only way to access the internet
is by the corporate firewall.

At each bigger location weve got a squid proxy, at the moment Versions from
2.6 to 2.7 in different releases, running on Windows 2003 and 2008R2
Servers.
These squids are configured with no dns Server entries, the underlying
Windows machines of these proxys are configured with our corporate AD-DNS
Servers.

The clients (Windows 7 and 10) are getting their proxy settings for Internet
Explorer and Firefox by GPO. These settings are the aliasname for the proxy
and the port, which is 8080, and some proxy exclusions for corporate
applications servers. The clients are members in an AD Domain and get there
DNS Server entries by DHCP. The clients can successfully resolve the aliases
and hostnames of the proxys to their ip-adresses an can communicate with
them.
These proxys, lets call them &quot;old proxys&quot; are working fine.

To get rid of Server 2003 and squid 2.6/2.7, i installed a Ubuntu 16.04.2
LTS and Squid3.5, an rewrote the config from one of the old proxys,
and basically, the proxy was functional, but all request are very, very,
slow, like the proxy waits for some timeout at each request.

To your second question, i am from germany, sorry, with &quot;configure it&quot; or
&quot;configure it not&quot; i meant that i configured squid to use a dns server in
the conf or not, and in the case of the operating system, had set a dns
server to use, or not, in the network config of ubuntu.

If you need further infos please ask, i am also preparing my configs (old /
new) to post them here, but i have to anonymize them before posting, i think
i can handle this until tomorrow.

Best Regards
Marcel







--
View this message in context: <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-proxy-without-name-resolution-for-internet-adresses-behind-parent-proxy-tp4682225p4682235.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-proxy-without-name-resolution-for-internet-adresses-behind-parent-proxy-tp4682225p4682235.html</A>
Sent from the Squid - Users mailing list archive at Nabble.com.
_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015100.html">[squid-users] Squid proxy without name resolution for internet adresses behind parent proxy
</A></li>
	<LI>Next message (by thread): <A HREF="015104.html">[squid-users] Squid proxy without name resolution for internet adresses behind parent proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15103">[ date ]</a>
              <a href="thread.html#15103">[ thread ]</a>
              <a href="subject.html#15103">[ subject ]</a>
              <a href="author.html#15103">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
