<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Portal Splash Pages example on squid 3.3.13
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Portal%20Splash%20Pages%20example%20on%20squid%203.3.13&In-Reply-To=%3C1501822604834-4683253.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016110.html">
   <LINK REL="Next"  HREF="016087.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Portal Splash Pages example on squid 3.3.13</H1>
    <B>mm</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Portal%20Splash%20Pages%20example%20on%20squid%203.3.13&In-Reply-To=%3C1501822604834-4683253.post%40n4.nabble.com%3E"
       TITLE="[squid-users] Portal Splash Pages example on squid 3.3.13">mishamehra at gmail.com
       </A><BR>
    <I>Fri Aug  4 04:56:44 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016110.html">[squid-users] Different cache_dir based on object types
</A></li>
        <LI>Next message (by thread): <A HREF="016087.html">[squid-users] Portal Splash Pages example on squid 3.3.13
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16072">[ date ]</a>
              <a href="thread.html#16072">[ thread ]</a>
              <a href="subject.html#16072">[ subject ]</a>
              <a href="author.html#16072">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>hi, i m also trying to configure squid proxy server in my ubuntu machine and
using version 3.3.8. i have used the same example as mentioned in your post.
but i am getting the following error :
2017/08/04 10:14:05| WARNING: -D command-line option is obsolete.
2017/08/04 10:14:05| aclIpParseIpData: WARNING: Netmask masks away part of
the specified IP in '10.0.2.0/16'
2017/08/04 10:14:05| aclIpParseIpData: WARNING: Netmask masks away part of
the specified IP in '10.0.3.0/16'
2017/08/04 10:14:05| WARNING: (B) '10.0.0.0/16' is a subnetwork of (A)
'10.0.0.0/16'
2017/08/04 10:14:05| WARNING: because of this '10.0.0.0/16' is ignored to
keep splay tree searching predictable
2017/08/04 10:14:05| WARNING: You should probably remove '10.0.0.0/16' from
the ACL named 'localnet'
2017/08/04 10:14:05| WARNING: (B) '10.0.0.0/16' is a subnetwork of (A)
'10.0.0.0/8'
2017/08/04 10:14:05| WARNING: because of this '10.0.0.0/8' is ignored to
keep splay tree searching predictable
2017/08/04 10:14:05| WARNING: You should probably remove '10.0.0.0/16' from
the ACL named 'localnet'
2017/08/04 10:14:05| Starting Squid Cache version 3.3.8 for
x86_64-pc-linux-gnu...
2017/08/04 10:14:05| Process ID 3891
2017/08/04 10:14:05| Process Roles: master worker
2017/08/04 10:14:05| With 65536 file descriptors available
2017/08/04 10:14:05| Initializing IP Cache...
2017/08/04 10:14:05| DNS Socket created at [::], FD 5
2017/08/04 10:14:05| DNS Socket created at 0.0.0.0, FD 6
2017/08/04 10:14:05| Warning: Could not find any nameservers. Trying to use
localhost
2017/08/04 10:14:05| Please check your /etc/resolv.conf file
2017/08/04 10:14:05| or use the 'dns_nameservers' option in squid.conf.
2017/08/04 10:14:05| helperOpenServers: Starting 5/5 'ext_session_acl'
processes
2017/08/04 10:14:05| Logfile: opening log daemon:/var/log/squid3/access.log
2017/08/04 10:14:05| Logfile Daemon: opening log /var/log/squid3/access.log
2017/08/04 10:14:05| Local cache digest enabled; rebuild/rewrite every
3600/3600 sec
2017/08/04 10:14:05| Store logging disabled
2017/08/04 10:14:05| Swap maxSize 0 + 262144 KB, estimated 20164 objects
2017/08/04 10:14:05| Target number of buckets: 1008
2017/08/04 10:14:05| Using 8192 Store buckets
2017/08/04 10:14:05| Max Mem  size: 262144 KB
2017/08/04 10:14:05| Max Swap size: 0 KB
2017/08/04 10:14:05| Using Least Load store dir selection
2017/08/04 10:14:05| chdir: /var/spool/squid: (2) No such file or directory
2017/08/04 10:14:05| Current Directory is /home/misha
2017/08/04 10:14:05| Loaded Icons.
2017/08/04 10:14:05| HTCP Disabled.
2017/08/04 10:14:05| Pinger socket opened on FD 21
2017/08/04 10:14:05| Configuring Parent 10.0.0.2/3128/0
2017/08/04 10:14:05| Squid plugin modules loaded: 0
2017/08/04 10:14:05| Adaptation support is off.
2017/08/04 10:14:05| Accepting HTTP Socket connections at local=[::]:3128
remote=[::] FD 19 flags=9
2017/08/04 10:14:05| WARNING: session #2 exited
2017/08/04 10:14:05| Too few session processes are running (need 1/5)
2017/08/04 10:14:05| Closing HTTP port [::]:3128
2017/08/04 10:14:05| storeDirWriteCleanLogs: Starting...
2017/08/04 10:14:05|   Finished.  Wrote 0 entries.
2017/08/04 10:14:05|   Took 0.00 seconds (  0.00 entries/sec).
FATAL: The session helpers are crashing too rapidly, need help!


My squid.conf file is as follows:
acl localnet src 10.0.2.0/16
acl localnet src 10.0.3.0/16

acl localnet src 10.0.0.0/8 # RFC1918 possible internal network
acl SSL_ports port 443
acl Safe_ports port 80 # http
acl Safe_ports port 21 # ftp
acl Safe_ports port 443 # https
acl Safe_ports port 70 # gopher
acl Safe_ports port 210 # wais
acl Safe_ports port 1025-65535 # unregistered ports
http_access allow localhost manager
http_access deny manager
http_access allow localnet
http_access allow localhost
http_access deny all
http_port 3128
coredump_dir /var/spool/squid

## addition for splash page active##
external_acl_type session ipv4 concurrency=100 ttl=3 %SRC
/usr/lib/squid/ext_session_acl -T 60 -b /var/lib/squid/session.db
acl session_login external session LOGIN
acl session_is_active external session
acl clicked_login_url url_regex -i
^<A HREF="https://www.drdo.gov.in/drdo/English/index.jsp$">https://www.drdo.gov.in/drdo/English/index.jsp$</A>
http_access allow clicked_login_url session_login
http_access deny !session_is_active
deny_info 511:/etc/squid3/splash.html session_is_active


Pls tell me what going wrong??



--
View this message in context: <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/Portal-Splash-Pages-example-on-squid-3-3-13-tp4669634p4683253.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/Portal-Splash-Pages-example-on-squid-3-3-13-tp4669634p4683253.html</A>
Sent from the Squid - Users mailing list archive at Nabble.com.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016110.html">[squid-users] Different cache_dir based on object types
</A></li>
	<LI>Next message (by thread): <A HREF="016087.html">[squid-users] Portal Splash Pages example on squid 3.3.13
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16072">[ date ]</a>
              <a href="thread.html#16072">[ thread ]</a>
              <a href="subject.html#16072">[ subject ]</a>
              <a href="author.html#16072">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
