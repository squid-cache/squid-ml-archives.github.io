<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Crash: every 19 hours: kernel: Out of memory:	Kill	process (squid)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Crash%3A%20every%2019%20hours%3A%20kernel%3A%20Out%20of%20memory%3A%0A%09Kill%09process%20%28squid%29&In-Reply-To=%3C193e01d311db%24491be030%24db53a090%24%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016119.html">
   <LINK REL="Next"  HREF="016121.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Crash: every 19 hours: kernel: Out of memory:	Kill	process (squid)</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Crash%3A%20every%2019%20hours%3A%20kernel%3A%20Out%20of%20memory%3A%0A%09Kill%09process%20%28squid%29&In-Reply-To=%3C193e01d311db%24491be030%24db53a090%24%40ngtech.co.il%3E"
       TITLE="[squid-users] Crash: every 19 hours: kernel: Out of memory:	Kill	process (squid)">eliezer at ngtech.co.il
       </A><BR>
    <I>Thu Aug 10 13:19:24 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016119.html">[squid-users] Crash: every 19 hours: kernel: Out of memory: Kill	process (squid)
</A></li>
        <LI>Next message (by thread): <A HREF="016121.html">[squid-users] Crash: every 19 hours: kernel: Out of memory: Kill	process (squid)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16120">[ date ]</a>
              <a href="thread.html#16120">[ thread ]</a>
              <a href="subject.html#16120">[ subject ]</a>
              <a href="author.html#16120">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey,

Let start from 0.
How many CPU's and\or core's are on this machine?
Is it a VM?
How many users will be sitting behind this proxy?
Depends on the above we can decide on the right approach.

Eliezer

----
Eliezer Croitoru
Linux System Administrator
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>



-----Original Message-----
From: Cherukuri, Naresh [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ncherukuri at partycity.com</A>] 
Sent: Thursday, August 10, 2017 16:03
To: Eliezer Croitoru &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>&gt;;
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: RE: [squid-users] Crash: every 19 hours: kernel: Out of memory:
Kill process (squid)

Hello Eliezer,

We are using OS &quot;Redhat 7&quot; and squid version 3.5.20. 

As of now we are not using any cache, we already commented out. You want me
try using cache by uncommenting the following line. 

# Uncomment and adjust the following to add a disk cache directory.
#cache_dir ufs /cache/squid 10000 16 256

Thanks,
Naresh
-----Original Message-----
From: Eliezer Croitoru [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>] 
Sent: Wednesday, August 9, 2017 8:08 PM
To: Cherukuri, Naresh; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: RE: [squid-users] Crash: every 19 hours: kernel: Out of memory:
Kill process (squid)

Hey Naresh,

The RAM you need would differ by the nature, hardware and couple other
things about the nature of the machine.
What you need is start from the bottom and move up.
List for yourself the machine specs and your goals.
It really helps to start from low ie the default 256MB ram cache and without
any cache_dire and then see how it all moves on from there.
For now you are getting to the 19 hours of up time and you need to overcome
this so just start with a dry run of no disk cache at all and stick to squid
defaults for the next 24-48 hours.
Also what OS are you running?

Eliezer

----
<A HREF="http://ngtech.co.il/lmgtfy/">http://ngtech.co.il/lmgtfy/</A>
Linux System Administrator
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>


From: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On
Behalf Of Cherukuri, Naresh
Sent: Tuesday, August 8, 2017 16:28
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: [squid-users] Crash: every 19 hours: kernel: Out of memory: Kill
process (squid)

Hello,

I am new to squid. I am getting a problem every 19 hours squid takes all RAM
memory, then started taking swap in &#160;20 minutes my swap is full. Then server
side (OOM) is activating and killing all squid child's then finally killing
squid parent. Can someone help me how to address this problem? 

Why every 19 hours my memory is going to full?

How much Ram do I need for following squid version?

Squid Cache: Version 3.5.20

&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; total&#160;&#160;&#160;&#160;&#160;&#160; used&#160;&#160;&#160;&#160;&#160;&#160; free&#160;&#160;&#160;&#160; shared&#160;&#160;&#160; buffers&#160;&#160;&#160;&#160; cached
Mem:&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 11845&#160;&#160;&#160;&#160;&#160;&#160; 2713&#160;&#160;&#160;&#160;&#160;&#160; 9132&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 14&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 71&#160;&#160;&#160;&#160;&#160;&#160; 1641
-/+ buffers/cache:&#160;&#160;&#160;&#160;&#160;&#160; 1000&#160;&#160;&#160;&#160;&#160; 10845
Swap:&#160;&#160;&#160;&#160;&#160;&#160;&#160; 25551 &#160;&#160;&#160;&#160;&#160;&#160;&#160;421&#160;&#160;&#160;&#160;&#160; 25130

Thanks,
Naresh



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016119.html">[squid-users] Crash: every 19 hours: kernel: Out of memory: Kill	process (squid)
</A></li>
	<LI>Next message (by thread): <A HREF="016121.html">[squid-users] Crash: every 19 hours: kernel: Out of memory: Kill	process (squid)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16120">[ date ]</a>
              <a href="thread.html#16120">[ thread ]</a>
              <a href="subject.html#16120">[ subject ]</a>
              <a href="author.html#16120">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
