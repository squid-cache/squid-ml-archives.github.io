<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid stopped writing the log files... just for a	while.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20stopped%20writing%20the%20log%20files...%20just%20for%20a%0A%09while.&In-Reply-To=%3C201708231542.08745.Antony.Stone%40squid.open.source.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016182.html">
   <LINK REL="Next"  HREF="016184.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid stopped writing the log files... just for a	while.</H1>
    <B>Antony Stone</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20stopped%20writing%20the%20log%20files...%20just%20for%20a%0A%09while.&In-Reply-To=%3C201708231542.08745.Antony.Stone%40squid.open.source.it%3E"
       TITLE="[squid-users] Squid stopped writing the log files... just for a	while.">Antony.Stone at squid.open.source.it
       </A><BR>
    <I>Wed Aug 23 13:42:08 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016182.html">[squid-users] Squid stopped writing the log files... just for a while.
</A></li>
        <LI>Next message (by thread): <A HREF="016184.html">[squid-users] Squid stopped writing the log files... just for a while.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16183">[ date ]</a>
              <a href="thread.html#16183">[ thread ]</a>
              <a href="subject.html#16183">[ subject ]</a>
              <a href="author.html#16183">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wednesday 23 August 2017 at 15:26:53, Ver&#243;nica Ovando wrote:

&gt;<i> &gt;&gt; Hi all.
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; Squid has a strange behavior: suddenly, it stops writing the log files
</I>&gt;<i> &gt;&gt; (access.log and cache.log) for about 30 seconds clients cannot access
</I>&gt;<i> &gt;&gt; the cache.
</I>
&gt;<i> &gt; 10. What does access_log tell you about the requests immediately before,
</I>&gt;<i> &gt; and during, the 30 second holdup?
</I>&gt;<i>
</I>&gt;<i> Nothing. Squid continues responding all the requests normally.
</I>
I'm puzzled by the two statements:

&quot;it stops writing the log files for about 30 seconds [and] clients cannot 
access the cache&quot; and
&quot;Squid continues responding [to] all the requests normally&quot;.

So, are you saying that Squid is processing requests and returning content 
quite normally, without the users noticing any problem, and it's just that the 
log files are not being written for 30 seconds or so?

Are you saying that all requests get fetched directly from the origin servers, 
and the cache is not being used, for these 30 seconds?

Maybe you could clarify?

&gt;<i> This is the last request until it holdups:
</I>&gt;<i> 1503416750.346    386 192.168.0.2 TCP_REFRESH_UNMODIFIED/304 235 GET
</I>&gt;<i> <A HREF="http://www.mysite.com">http://www.mysite.com</A> user HIER_DIRECT/www.mysite.com - This is the next
</I>&gt;<i> request:
</I>&gt;<i> 1503416781.864 141376 192.168.0.2 TCP_MISS/200 5599 CONNECT
</I>&gt;<i> play.google.com:443 user HIER_DIRECT/play.google.com -
</I>
Okay, so I see there's a 36 second gap between those two requests; were 
clients sending requests during that time?

Have you tried doing a packet capture on the Squid box's interfaces to see 
whether client requests are coming in, but Squid is not sending the proxied 
requests out, or whether it's sending the requests, egtting the response, but 
not sending that back to the client?


Antony.

-- 
&quot;In fact I wanted to be John Cleese and it took me some time to realise that 
the job was already taken.&quot;

 - Douglas Adams

                                                   Please reply to the list;
                                                         please *don't* CC me.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016182.html">[squid-users] Squid stopped writing the log files... just for a while.
</A></li>
	<LI>Next message (by thread): <A HREF="016184.html">[squid-users] Squid stopped writing the log files... just for a while.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16183">[ date ]</a>
              <a href="thread.html#16183">[ thread ]</a>
              <a href="subject.html#16183">[ subject ]</a>
              <a href="author.html#16183">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
