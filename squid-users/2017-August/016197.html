<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid Reverse Proxy and WebDAV caching
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Reverse%20Proxy%20and%20WebDAV%20caching&In-Reply-To=%3C025b8682-3269-ae61-745b-0023e97fcd89%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016195.html">
   <LINK REL="Next"  HREF="016203.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid Reverse Proxy and WebDAV caching</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Reverse%20Proxy%20and%20WebDAV%20caching&In-Reply-To=%3C025b8682-3269-ae61-745b-0023e97fcd89%40treenet.co.nz%3E"
       TITLE="[squid-users] Squid Reverse Proxy and WebDAV caching">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Aug 24 22:58:47 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016195.html">[squid-users] Squid Reverse Proxy and WebDAV caching
</A></li>
        <LI>Next message (by thread): <A HREF="016203.html">[squid-users] Squid Reverse Proxy and WebDAV caching
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16197">[ date ]</a>
              <a href="thread.html#16197">[ thread ]</a>
              <a href="subject.html#16197">[ subject ]</a>
              <a href="author.html#16197">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 25/08/17 04:16, Olivier MARCHETTA wrote:
&gt;<i> Hello Squid Users,
</I>&gt;<i> 
</I>&gt;<i> I have configured a squid reverse proxy to access Microsoft SharePoint 
</I>&gt;<i> Online with the aim of caching the document libraries into the squid 
</I>&gt;<i> cache for a branch office.
</I>&gt;<i> 
</I>&gt;<i> But so far I can see the access log with the GET HTTP requests from the 
</I>&gt;<i> users but none will be stored into the cache.
</I>&gt;<i> 
</I>&gt;<i> Now there are several difficulties to cache the documents:
</I>&gt;<i> 
</I>&gt;<i>  1. Microsoft is using SSL (but I have configured SSL bumps)
</I>&gt;<i>  2. Files are tagged with the cache header no-cache or cache-private
</I>
'no-cache' actually means things *are* cacheable. Squid just has to 
perform a quick check with the server before using them. Your logs 
should contain REFRESH instead of HIT entries for these objects.

The 'private' objects are only usable for one client, so caching is not 
useful. Latest Squid can cache them by configuring refresh_pattern 
directive ignore-private. Then Squid will do the REFRESH for these as well.

Welcome to HTTP/1.1 where things can be neither HIT nor MISS. The 
REFRESH means a server was involved, but the object delivered to the 
client may be new or from cache and of vastly different size than the 
refresh objects on the server connection.

IMPORTANT: do not configure ignore-private and ignore-must-revalidate 
for the same objects. That will corrupt your proxies responses.


&gt;<i>  3. The WebDAV client is the Microsoft Windows 10 client.
</I>&gt;<i> 
</I>&gt;<i> Now I would like to know if it&#8217;s still doable or if I can just forget 
</I>&gt;<i> having this kind of configuration on squid, and move on to an alternate 
</I>&gt;<i> caching method (OneDrive sync client for example).
</I>&gt;<i> 
</I>
If you have a current up-to-date Squid it is probably caching but 
absence of the classical &quot;HIT&quot; tag being confusing.

If you are actively seeing MISS in the logs for these objects then we 
will need the HTTP transaction headers to see what is going on. That can 
be retrieved with a debug_options 11,2 trace.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016195.html">[squid-users] Squid Reverse Proxy and WebDAV caching
</A></li>
	<LI>Next message (by thread): <A HREF="016203.html">[squid-users] Squid Reverse Proxy and WebDAV caching
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16197">[ date ]</a>
              <a href="thread.html#16197">[ thread ]</a>
              <a href="subject.html#16197">[ subject ]</a>
              <a href="author.html#16197">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
