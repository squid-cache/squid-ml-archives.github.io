<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Your cache is running out of filedescriptors
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Your%20cache%20is%20running%20out%20of%20filedescriptors&In-Reply-To=%3C1476092454.241584.1504164413296%40mail.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016244.html">
   <LINK REL="Next"  HREF="016246.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Your cache is running out of filedescriptors</H1>
    <B>Vieri</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Your%20cache%20is%20running%20out%20of%20filedescriptors&In-Reply-To=%3C1476092454.241584.1504164413296%40mail.yahoo.com%3E"
       TITLE="[squid-users] Your cache is running out of filedescriptors">rentorbuy at yahoo.com
       </A><BR>
    <I>Thu Aug 31 07:26:53 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016244.html">[squid-users] Your cache is running out of filedescriptors
</A></li>
        <LI>Next message (by thread): <A HREF="016246.html">[squid-users] Your cache is running out of filedescriptors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16245">[ date ]</a>
              <a href="thread.html#16245">[ thread ]</a>
              <a href="subject.html#16245">[ subject ]</a>
              <a href="author.html#16245">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'd like to add a note to my previous message.

I set the following values, and I'll see what happens:

* hard nofile 65535
* soft nofile 16384


(&quot;hard&quot; being a top limit a non-root process cannot exceed)

So I take it that Squid will start with a default of 16384, but will be able to increase up to 65535 if it needs to.


By the way, restarting squid from the same shell (ssh) does not apply the new values.
I had to re-log into the system.

There's probably a ulimit command line option to apply the values without logging out.

Anyway, the squid log confirms the new value.


Also, I guess it would be preferable to reboot the server if I wanted the same limits to apply to all running processes (or restart each and every service/daemon one by one).


I also set the following directives.
For local caching proxy:

client_lifetime 480 minutes


For reverse proxies:

client_lifetime 60 minutes


I left the other options alone: 
read_timeout, request_timeout, persistent_request_timeout and quick_abort

Vieri

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016244.html">[squid-users] Your cache is running out of filedescriptors
</A></li>
	<LI>Next message (by thread): <A HREF="016246.html">[squid-users] Your cache is running out of filedescriptors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16245">[ date ]</a>
              <a href="thread.html#16245">[ thread ]</a>
              <a href="subject.html#16245">[ subject ]</a>
              <a href="author.html#16245">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
