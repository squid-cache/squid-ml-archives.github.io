<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid Reverse Proxy and WebDAV caching
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Reverse%20Proxy%20and%20WebDAV%20caching&In-Reply-To=%3CAM5PR0901MB0898EF3635E87BDAB56C8F4FE19D0%40AM5PR0901MB0898.eurprd09.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016241.html">
   <LINK REL="Next"  HREF="016198.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid Reverse Proxy and WebDAV caching</H1>
    <B>Olivier MARCHETTA</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Reverse%20Proxy%20and%20WebDAV%20caching&In-Reply-To=%3CAM5PR0901MB0898EF3635E87BDAB56C8F4FE19D0%40AM5PR0901MB0898.eurprd09.prod.outlook.com%3E"
       TITLE="[squid-users] Squid Reverse Proxy and WebDAV caching">olivier.marchetta at outlook.com
       </A><BR>
    <I>Thu Aug 31 09:33:18 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016241.html">[squid-users] Squid Reverse Proxy and WebDAV caching
</A></li>
        <LI>Next message (by thread): <A HREF="016198.html">[squid-users] extract http headers from CONNECT / bumped ssl?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16247">[ date ]</a>
              <a href="thread.html#16247">[ thread ]</a>
              <a href="subject.html#16247">[ subject ]</a>
              <a href="author.html#16247">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Amos,

It works now.
I made a proper test between 2 clients and using Robocopy.
Here's the cache HIT result:
-----------------------------------------------------------------
Cache information for squid:
Hits as % of all requests: 5min: 15.2%, 60min: 14.4%
Hits as % of bytes sent:	5min: 67.4%, 60min: 67.4%
Memory hits as % of hit requests: 5min: 100.0%, 60min: 100.0%
Disk hits as % of hit requests: 5min: 0.0%, 60min: 0.0%
Storage Swap size: 70752 KB
Storage Swap capacity: 69.1% used, 30.9% free
Storage Mem size: 70968 KB
Storage Mem capacity: 54.1% used, 45.9% free
Mean Object Size: 1768.80 KB
Requests given to unlinkd: 0
-----------------------------------------------------------------

Robocopy log from WORKSTATION1
Files :   40
Copied: 40
Time :   00:48   

Robocopy log from WORKSTATION2
Files :   40
Copied: 40
Time :   00:14   

If I clear the WebDAV client cache on WORKSTATION1 and execute the copy test again, I will also download from the cache.
The overall copy time will be below 15 seconds instead of 50 seconds.
I don't have any error if I try to read a file from the cache (as I had before)
and the copied files are healthy.

Great !
I will wait before saying it's a victory.
But at least we can now read files from the Squid Cache.
Which was the most important step before going any forward. &#128522;

Thank you very much for your help and accurate answers.

Regards,
Olivier MARCHETTA


-----Original Message-----
From: Amos Jeffries [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>] 
Sent: Wednesday, August 30, 2017 4:56 PM
To: Olivier MARCHETTA &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">olivier.marchetta at outlook.com</A>&gt;; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Squid Reverse Proxy and WebDAV caching

On 31/08/17 03:35, Olivier MARCHETTA wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> I've made many test, but it seems not wanting to deliver from the cache.
</I>&gt;<i> I think the objects are in the cache, I have modified the cache in memory object size.
</I>&gt;<i> And now I can see the memory being filled up as I transfer / GET the files from SharePoint Online / Office 365.
</I>&gt;<i> 
</I>&gt;<i> Do you think that any configuration change would work ?
</I>
What you have now should be caching the responses like the one in your previous mail, AND serving them to clients.

I can only guess that something is wrong with your tests. Or that the previous mails transaction is not actually a typical object.



&gt;<i> I was thinking about rewriting URLs upfront, before the Squid Cache proxy, in a chain configuration.
</I>&gt;<i> But I am trying to avoid it for now.
</I>
It would not help. The URL is just part of the hash key for caching. The 
other HTTP mechanisms are the things causing HIT vs MISS vs REFRESH 
behavior and you already have configured to override those.


Amos
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016241.html">[squid-users] Squid Reverse Proxy and WebDAV caching
</A></li>
	<LI>Next message (by thread): <A HREF="016198.html">[squid-users] extract http headers from CONNECT / bumped ssl?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16247">[ date ]</a>
              <a href="thread.html#16247">[ thread ]</a>
              <a href="subject.html#16247">[ subject ]</a>
              <a href="author.html#16247">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
