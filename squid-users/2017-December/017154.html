<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Groups and authorization SQUID
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Groups%20and%20authorization%20SQUID&In-Reply-To=%3CBN6PR15MB12037091515BEB05BA12F701E3370%40BN6PR15MB1203.namprd15.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017149.html">
   <LINK REL="Next"  HREF="017162.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Groups and authorization SQUID</H1>
    <B>Edwin Quijada</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Groups%20and%20authorization%20SQUID&In-Reply-To=%3CBN6PR15MB12037091515BEB05BA12F701E3370%40BN6PR15MB1203.namprd15.prod.outlook.com%3E"
       TITLE="[squid-users] Groups and authorization SQUID">listas_quijada at hotmail.com
       </A><BR>
    <I>Mon Dec 11 20:48:04 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="017149.html">[squid-users] Groups and authorization SQUID
</A></li>
        <LI>Next message (by thread): <A HREF="017162.html">[squid-users] Groups and authorization SQUID
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17154">[ date ]</a>
              <a href="thread.html#17154">[ thread ]</a>
              <a href="subject.html#17154">[ subject ]</a>
              <a href="author.html#17154">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>


________________________________
From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; on behalf of Antony Stone &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">Antony.Stone at squid.open.source.it</A>&gt;
Sent: Saturday, December 9, 2017 3:57 PM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Groups and authorization SQUID

On Saturday 09 December 2017 at 15:35:51, Edwin Quijada wrote:

&gt;<i> &gt; On Friday 08 December 2017 at 22:08:33, Edwin Quijada wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; I have 4 different groups in my company each group has access different
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Please explain what &quot;access different&quot; means.
</I>&gt;<i>
</I>&gt;<i> The first group has accees to 2 pages, second 3 differents pages and  3 and
</I>&gt;<i> 4 everything
</I>
Okay, understood.

&gt;<i> &gt; &gt; These groups and users are in a remote server
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; What sort of server?  How are the groups defined?
</I>&gt;<i>
</I>&gt;<i> It is a web server
</I>
Er, okay...

&gt;<i> &gt; &gt; that I use with a webservice
</I>&gt;<i>
</I>&gt;<i> &gt; What does &quot;webservice&quot; mean?
</I>&gt;<i>
</I>&gt;<i> Remote method/function that respond me when I sent  user/pass this respond
</I>&gt;<i> me with the group that user belongs I have another method/function/script
</I>&gt;<i> by http that respond me what is the group that user belongs
</I>
Okay, I guess it might be possible to get Squid to use ACLs based on the
result of an HTTP request, but I've never seen it done like this before.

This part is not a problem for me.

Maybe someone else on the list can suggest how this might be made to work.

&gt;<i> &gt; &gt; so with I have created a helper for authorization
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Tell us how this helper works.
</I>&gt;<i>
</I>&gt;<i> I thought that using a helper for autorization I can restricted the pages
</I>&gt;<i> used for each member group
</I>
Have you created a helper, or not?
Yes!!

If you have created one, please tell us how it works.

This helper that I created
&lt;?php

$f = fopen(&quot;<A HREF="php://stdin">php://stdin</A>&quot;, &quot;r&quot;);
while (!(feof($f))) {
    $line = fgets($f);
    if ($line) {
        $fields = explode(' ', trim($line));
        $username = rawurldecode($fields[0]);
        $password = rawurldecode($fields[1]);
//
        if ($username==&quot;edwin&quot; &amp;&amp;  $password==&quot;1234&quot;)
              fwrite(STDOUT, &quot;OK\n&quot;);
        else
             fwrite(STDOUT, &quot;ERR\n&quot;);
    }
}
?&gt;
This helper is just for testing , but when I tested it doent work

&gt;<i> &gt; How does it identify one group from another?
</I>&gt;<i>
</I>&gt;<i> Uhm...the structere are differents , really there are in different tables
</I>&gt;<i> in my DB that is in the server
</I>
So, you're doing an HTTP request to a web server, which then looks up the user
in a database, and returns a result as an HTTP response...

Surely it would be easier (and quicker / more efficient) to get Squid to
interrogate the database?

&gt;<i> &gt; &gt; the problem is how can i do this ACL
</I>
I wouldn't start from there, so I hope someone else here can suggest a way of
getting this to work.


What made you start with this approach in the first place?

Now, I changed the approach , I just want one group for everything and other, localnet restricted,instead of use 4 groups just 2 one for admin, other for


Antony.

--
Atheism is a non-prophet-making organisation.

                                                   Please reply to the list;
                                                         please *don't* CC me.
_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
squid-users Info Page&lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>&gt;
lists.squid-cache.org
squid-users -- General discussion relating to Squid. The membership of this list is thousands of Squid users from around the world About squid-users


-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20171211/e96677aa/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20171211/e96677aa/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="017149.html">[squid-users] Groups and authorization SQUID
</A></li>
	<LI>Next message (by thread): <A HREF="017162.html">[squid-users] Groups and authorization SQUID
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17154">[ date ]</a>
              <a href="thread.html#17154">[ thread ]</a>
              <a href="subject.html#17154">[ subject ]</a>
              <a href="author.html#17154">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
