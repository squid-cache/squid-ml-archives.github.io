<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] question in :src/cf.data.pre &quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20question%20in%20%3Asrc/cf.data.pre%20%22&In-Reply-To=%3C0337158a-a59f-ce07-9061-b6ea6b17b158%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017167.html">
   <LINK REL="Next"  HREF="017171.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] question in :src/cf.data.pre &quot;</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20question%20in%20%3Asrc/cf.data.pre%20%22&In-Reply-To=%3C0337158a-a59f-ce07-9061-b6ea6b17b158%40treenet.co.nz%3E"
       TITLE="[squid-users] question in :src/cf.data.pre &quot;">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Dec 12 15:06:34 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="017167.html">[squid-users] question in :src/cf.data.pre &quot;
</A></li>
        <LI>Next message (by thread): <A HREF="017171.html">[squid-users] question in :src/cf.data.pre &quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17170">[ date ]</a>
              <a href="thread.html#17170">[ thread ]</a>
              <a href="subject.html#17170">[ subject ]</a>
              <a href="author.html#17170">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 13/12/17 03:31, --Ahmad-- wrote:
&gt;<i> as an example i want directives to be added automatically without adding them to squid.conf
</I>&gt;<i> 
</I>&gt;<i> look below :
</I>&gt;<i> 
</I>&gt;<i> acl ip1 myip 1.2.3.4
</I>&gt;<i> http_access allow ip1
</I>&gt;<i> http_port 6532
</I>&gt;<i> 
</I>&gt;<i> so above i want them to be added to squid.conf without add them there
</I>&gt;<i> 
</I>&gt;<i> so i run squid in terminal it will contact default squid.conf which has no config
</I>&gt;<i> 
</I>&gt;<i> but it will have the config above added automatically
</I>&gt;<i> 
</I>&gt;<i> make sense ?
</I>&gt;<i> 
</I>
Sort of. See should be able to see how to add fixed default values for 
those directives are already being defined for how to add fixed values.

Your problem will be that the default config is loaded *before* Squid 
starts receiving traffic. The myip value is very dynamic and changes or 
only identifiable *after* Squid is fully running. It can even change 
between TCP connections arriving if the machines NIC assignments change.


Since your values are fixed at compile time and cannot be changed 
dynamically you may do better to have a squid.conf with those settings 
that gets loaded always and uses the include directive to load any other 
user configurable content.

Have a look at the way I'm doing separation between Squid packages 
config and admin config for Debian Squid-4 packages:
 
&lt;<A HREF="https://alioth.debian.org/plugins/scmgit/cgi-bin/gitweb.cgi?p=pkg-squid/pkg-squid.git;a=commitdiff;h=3a068f640abdc87df8a767e8625289534c81ea69">https://alioth.debian.org/plugins/scmgit/cgi-bin/gitweb.cgi?p=pkg-squid/pkg-squid.git;a=commitdiff;h=3a068f640abdc87df8a767e8625289534c81ea69</A>&gt;
 
&lt;<A HREF="https://alioth.debian.org/plugins/scmgit/cgi-bin/gitweb.cgi?p=pkg-squid/pkg-squid.git;a=commitdiff;h=586d19bb0ad644c6599407696a7a137af1575f93">https://alioth.debian.org/plugins/scmgit/cgi-bin/gitweb.cgi?p=pkg-squid/pkg-squid.git;a=commitdiff;h=586d19bb0ad644c6599407696a7a137af1575f93</A>&gt;


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="017167.html">[squid-users] question in :src/cf.data.pre &quot;
</A></li>
	<LI>Next message (by thread): <A HREF="017171.html">[squid-users] question in :src/cf.data.pre &quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17170">[ date ]</a>
              <a href="thread.html#17170">[ thread ]</a>
              <a href="subject.html#17170">[ subject ]</a>
              <a href="author.html#17170">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
