<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Warning in Cache.log
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Warning%20in%20Cache.log&In-Reply-To=%3C2cca92c2-eda1-822c-10c5-d6a53b081e26%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017198.html">
   <LINK REL="Next"  HREF="017196.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Warning in Cache.log</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Warning%20in%20Cache.log&In-Reply-To=%3C2cca92c2-eda1-822c-10c5-d6a53b081e26%40treenet.co.nz%3E"
       TITLE="[squid-users] Warning in Cache.log">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Dec 13 18:30:45 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="017198.html">[squid-users] Warning in Cache.log
</A></li>
        <LI>Next message (by thread): <A HREF="017196.html">[squid-users] Some things in the log
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17206">[ date ]</a>
              <a href="thread.html#17206">[ thread ]</a>
              <a href="subject.html#17206">[ subject ]</a>
              <a href="author.html#17206">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 14/12/17 04:28, Alex Rousskov wrote:
&gt;<i> On 12/13/2017 05:13 AM, Raju M K wrote:
</I>&gt;&gt;<i> I installed squid 3.5.25 on Ubuntu and in windows 10 with Diladele MSI.
</I>&gt;&gt;<i> In both cache.log files, I am getting below warning.
</I>&gt;&gt;<i> Few users got the same error but no solution for this.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 2017/12/13 10:38:04 kid1| WARNING: no_suid: setuid(0): (22) Invalid argument
</I>&gt;&gt;<i>
</I>...
&gt;<i> Alex.
</I>&gt;<i> P.S. IIRC, there was a similar problem with setuid(0) failures on
</I>&gt;<i> FreeBSD. It had a known excuse/explanation (which I do not recall).
</I>

IIRC,  FreeBSD setuid() implementation produces their &quot;error&quot; if the 
process attempting to drop privileges has already dropped down to 
no-privileges before the setuid() call. Squid drops privileges both 
before and after fork()'ing a helper - so FreeBSD helpers always see it 
happen on helper startup.

Linux (CentOS and Ubuntu) handles that double-up silently - so when 
messages do show up there is always a security privilege problem going 
on. I'm not sure of Windows, but never heard of it happening there either.


Raju;

&quot;Invalid Argument&quot; apparently means either the privileges selected are 
not known to the OS kernel or the user account does not exist.

The privileges are being set to 0, so that value should be known to the 
kernel.

That leaves the user account name. The default name built into Squid is 
not a valid account on Linux or Windows (it is a FreeBSD standard name), 
so you do need to compile using --with-default-user=... and ensure the 
account mentioned there is valid on the machine Squid runs on.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="017198.html">[squid-users] Warning in Cache.log
</A></li>
	<LI>Next message (by thread): <A HREF="017196.html">[squid-users] Some things in the log
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17206">[ date ]</a>
              <a href="thread.html#17206">[ thread ]</a>
              <a href="subject.html#17206">[ subject ]</a>
              <a href="author.html#17206">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
