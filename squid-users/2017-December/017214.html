<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid asking for authentication repeatedly
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20asking%20for%20authentication%20repeatedly&In-Reply-To=%3Cd51393d6-c991-b131-9881-97eafbb3f504%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017211.html">
   <LINK REL="Next"  HREF="017226.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid asking for authentication repeatedly</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20asking%20for%20authentication%20repeatedly&In-Reply-To=%3Cd51393d6-c991-b131-9881-97eafbb3f504%40treenet.co.nz%3E"
       TITLE="[squid-users] squid asking for authentication repeatedly">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Dec 14 01:35:07 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="017211.html">[squid-users] squid asking for authentication repeatedly
</A></li>
        <LI>Next message (by thread): <A HREF="017226.html">[squid-users] squid asking for authentication repeatedly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17214">[ date ]</a>
              <a href="thread.html#17214">[ thread ]</a>
              <a href="subject.html#17214">[ subject ]</a>
              <a href="author.html#17214">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 14/12/17 11:32, Paul Hackmann wrote:
&gt;<i> Amos,
</I>&gt;<i> 
</I>&gt;<i> I will do an update to the most recent version and see if that helps.  
</I>&gt;<i> It was one of those situations where if it ain't broke, don't fix it.  
</I>&gt;<i> And up until now, it has worked very well.
</I>&gt;<i> 
</I>&gt;<i> You are right, I had brain fade about port 4120.&#160; It should NOT ask for 
</I>&gt;<i> authentication ever, and only connect to whitelisted sites, which is 
</I>&gt;<i> what I want.
</I>&gt;<i> 
</I>&gt;<i> I've made the changes you recommended to the conf file.&#160; So far, 
</I>&gt;<i> everything seems to be working as I expect it to.&#160; Thank you!
</I>&gt;<i> 
</I>&gt;<i> One more question if you don't mind.&#160; I am trying to add some ip 
</I>&gt;<i> addresses as whitelisted for port 4120.&#160; I guess I can't add those to 
</I>&gt;<i> the whitelist file, because it's formatting doesn't work with IP 
</I>&gt;<i> addresses?
</I>
Sort of. dstdomain can accept IPs for matching against raw-IP text 
strings in URLs where domain should have been. But does not do ranges 
like you need there.

So yes dst is the one to use there.

However, be aware that it will match if *any* IPs for the domain being 
fetched is in your whitelist set. It has nothing to do with whether that 
matching dst-IP is actually used by Squid on the server connection.
To workaround that is where explicitly configuring &quot;never_direct allow 
all&quot; comes in handy.


&gt;<i>&#160; I read that you can add them into the conf file.&#160; I've 
</I>&gt;<i> created the following acl line:
</I>&gt;<i> 
</I>&gt;<i> acl 8x8 dst 8.5.248.0/23 8.28.0.0/22 63.209.12.0/24 
</I>&gt;<i> 162.221.236.0/23 162.221.238.0/23 192.84.16.0/22
</I>&gt;<i> 
</I>&gt;<i> and I tried to add 8x8 to the the http_access line:
</I>&gt;<i> 
</I>&gt;<i> http_access allow whitelist 8x8
</I>&gt;<i> 
</I>&gt;<i> but when I did that, the 4120 port started asking for authentication, 
</I>&gt;<i> which is wrong. Can you tell me how to open those ip address ranges for 
</I>&gt;<i> port 4120?
</I>&gt;<i> 
</I>
Your use of http_access is not quite right.

see &lt;<A HREF="https://wiki.squid-cache.org/SquidFaq/SquidAcl#Common_Mistakes">https://wiki.squid-cache.org/SquidFaq/SquidAcl#Common_Mistakes</A>&gt;


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="017211.html">[squid-users] squid asking for authentication repeatedly
</A></li>
	<LI>Next message (by thread): <A HREF="017226.html">[squid-users] squid asking for authentication repeatedly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17214">[ date ]</a>
              <a href="thread.html#17214">[ thread ]</a>
              <a href="subject.html#17214">[ subject ]</a>
              <a href="author.html#17214">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
