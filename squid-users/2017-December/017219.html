<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Some things in the log
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Some%20things%20in%20the%20log&In-Reply-To=%3C00b2f0b3-05d7-e836-deca-cf0d18b94631%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017196.html">
   <LINK REL="Next"  HREF="017197.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Some things in the log</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Some%20things%20in%20the%20log&In-Reply-To=%3C00b2f0b3-05d7-e836-deca-cf0d18b94631%40treenet.co.nz%3E"
       TITLE="[squid-users] Some things in the log">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Dec 14 05:37:08 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="017196.html">[squid-users] Some things in the log
</A></li>
        <LI>Next message (by thread): <A HREF="017197.html">[squid-users] WARNING: HTTP requires the use of Via
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17219">[ date ]</a>
              <a href="thread.html#17219">[ thread ]</a>
              <a href="subject.html#17219">[ subject ]</a>
              <a href="author.html#17219">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 14/12/17 02:46, erdosain9 wrote:
&gt;<i> Hi to all.
</I>&gt;<i> Im having some things in the log.
</I>&gt;<i> Like this:
</I>&gt;<i> 
</I>&gt;<i> -Vary object loop
</I>
When Squid looked up a URL in cache it finds that there are Vary headers 
to be accounted for in the storage key/ID. Doing the appropriate changes 
to add that Vary info Squid again finds that there are *different* Vary 
changes to do contradictory to the initial ones.

Cache key collisions happen sometimes and objects get replaced without 
affecting the Vary objects referencing them. So it can happen 
occasionally just from normal operations. But constant repeating of that 
message is a problem and IIRC there are some bugs leading to that which 
are not yet resolved.

&gt;<i> -Could not parse headers from on disk object
</I>
Something has mangled up the HTTP message headers in the disk copy of a 
cached object.

IIRC This can happen if you are using rock cache_dir type and the 
message headers exceed a single database cell/slot size.

But for UFS/AUFS/diskd caches it tends to only happen due to HDD failure 
or some other process fiddling with the disk storage.


&gt;<i> -varyEvaluateMatch: Oops
</I>&gt;<i> 
</I>
In all of the above cases Squid handles the problem by ignoring the 
cache contents and fetching fresh data from online. Which replaces the 
broken cache contents so that particular instance of the problem(s) 
disappear immediately.


&gt;<i> ipcacheParse No Address records in response to (i supposed this is not a
</I>&gt;<i> problem)
</I>
It is a minor problem. A domain name required to service some 
transaction is not correctly setup in DNS. But there is likely nothing 
you can do about it. Squid reports this type of thing so you can see 
what happened if any clients complain, and/or report the problem to 
someone who may be able to fix it properly.


FYI: A quick check of the domains your log snippet mentions shows they 
mostly have CNAME references pointing at CloudFlare server aliases that 
do not exist. Or similar for other CDN services. So Squid is quite 
correct - there are zero IP addresses for those domain names.

The DNS is incorrect because a CNAME should not exist pointing at 
non-existent server name. The domain owner need to fix that so services 
like Squid get a proper NXDOMAIN result instead of a &quot;success&quot; CNAME 
with zero IPs.

Also, why a client is trying to fetch URLs from a non-existent server is 
probably a good thing to look into if you want to investigate further.


&gt;<i> 2017/12/12 16:09:54 kid1| Error negotiating SSL on FD 701:
</I>&gt;<i> error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify
</I>&gt;<i> failed (1/-1/0)
</I>
Exactly what it says. The TLS/SSL certificate presented by a server 
could not be validated. It could be *actually* invalid (that happens 
rather a lot) or just missing some issuer cert - an intermediate CA cert 
from the handshake or root CA from your system trusted CA set.

Seeing how often these cert messages are occuring if you have a Squid 
older than Squid-4 latest beta you might want to try that release out 
and see if these disappear or at least reduce significantly. It can 
auto-download those missing intermediate certs instead of erroring out.

NP: that may also reduce the loudness of those no-IPs messages.



Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="017196.html">[squid-users] Some things in the log
</A></li>
	<LI>Next message (by thread): <A HREF="017197.html">[squid-users] WARNING: HTTP requires the use of Via
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17219">[ date ]</a>
              <a href="thread.html#17219">[ thread ]</a>
              <a href="subject.html#17219">[ subject ]</a>
              <a href="author.html#17219">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
