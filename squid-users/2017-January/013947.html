<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid tproxy connection time out
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20tproxy%20connection%20time%20out&In-Reply-To=%3CCA%2BW7yKeqqG6p%3D-8VACH2y7CsvT_pz8jrc3Bsdk7%3D%2BkoxX%2BL--Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="013951.html">
   <LINK REL="Next"  HREF="013957.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid tproxy connection time out</H1>
    <B>mr ghorbani</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20tproxy%20connection%20time%20out&In-Reply-To=%3CCA%2BW7yKeqqG6p%3D-8VACH2y7CsvT_pz8jrc3Bsdk7%3D%2BkoxX%2BL--Q%40mail.gmail.com%3E"
       TITLE="[squid-users] squid tproxy connection time out">mrghorbani2002 at gmail.com
       </A><BR>
    <I>Mon Jan  2 18:15:32 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="013951.html">[squid-users] Squid 3.5.23-1 is available for Ubuntu 16.04 LTS	(online repo ubuntu16.diladele.com)
</A></li>
        <LI>Next message (by thread): <A HREF="013957.html">[squid-users] squid tproxy connection time out
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13947">[ date ]</a>
              <a href="thread.html#13947">[ thread ]</a>
              <a href="subject.html#13947">[ subject ]</a>
              <a href="author.html#13947">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>hello masters
I have a problem on the squid in tproxy mode and it is that  squid
return Error &quot;110 connection
the timeout.&quot; for all Requests on port 3129, which is related to tproxy
Of course, by eliminating the code
ip route add local 0.0.0.0/0 dev lo table 100
Problem solved, but in this case, Squid does not record any activity log.

i had attached the network topology.

In this network, 185.12.32.1 is gw for both of the client and squid. it is set
to That route the client communication to the squid and then, squid
connect it to the internet by using this gw and also redirect port 80
to 3129 and tproxy to cache the data.
The gw is connected to the Internet and also it is the bgp for these
IP addresses.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Drawing1.jpg
Type: image/jpeg
Size: 32857 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20170102/96c337e3/attachment.jpg">http://lists.squid-cache.org/pipermail/squid-users/attachments/20170102/96c337e3/attachment.jpg</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="013951.html">[squid-users] Squid 3.5.23-1 is available for Ubuntu 16.04 LTS	(online repo ubuntu16.diladele.com)
</A></li>
	<LI>Next message (by thread): <A HREF="013957.html">[squid-users] squid tproxy connection time out
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#13947">[ date ]</a>
              <a href="thread.html#13947">[ thread ]</a>
              <a href="subject.html#13947">[ subject ]</a>
              <a href="author.html#13947">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
