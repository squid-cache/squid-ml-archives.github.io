<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] A bunch of SSL errors I am not sure why
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20A%20bunch%20of%20SSL%20errors%20I%20am%20not%20sure%20why&In-Reply-To=%3C3d6e409f-014e-d990-546c-3372c28a50f7%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014107.html">
   <LINK REL="Next"  HREF="014101.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] A bunch of SSL errors I am not sure why</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20A%20bunch%20of%20SSL%20errors%20I%20am%20not%20sure%20why&In-Reply-To=%3C3d6e409f-014e-d990-546c-3372c28a50f7%40treenet.co.nz%3E"
       TITLE="[squid-users] A bunch of SSL errors I am not sure why">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Jan 19 07:40:16 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="014107.html">[squid-users] A bunch of SSL errors I am not sure why
</A></li>
        <LI>Next message (by thread): <A HREF="014101.html">[squid-users] A bunch of SSL errors I am not sure why
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14109">[ date ]</a>
              <a href="thread.html#14109">[ thread ]</a>
              <a href="subject.html#14109">[ subject ]</a>
              <a href="author.html#14109">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 19/01/2017 12:53 p.m., Sameh Onaissi wrote:
&gt;<i> Hello, Amos&#8230; all
</I>&gt;<i> 
</I>&gt;<i> Yuri, thanks for the reply.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Amos,
</I>&gt;<i> 
</I>&gt;<i> I added: Thanks to Eliezer)
</I>&gt;<i> sslproxy_cert_error allow all
</I>&gt;<i> sslproxy_flags DONT_VERIFY_PEER
</I>
That is a spot-check config to see if TLS is fully broken or if the fix
can be done in Squid. It should never, ever, ever, be used in a
production proxy.

&gt;<i> to the config file, I am not too worried about the verification since the accessed sites showing problems are government site or local paying services/partners.
</I>&gt;<i> 
</I>
The peer verify is not about whether communication to them is safe (it
might not be even when verify succeeds).

It is about whether you are actually communicating with the right
destination or with some hijacker responding to your TCP connections.

In other words, to check that the endpoint you are sending those
financial details actually is your bank. Not mine.


The situation I am trying to get you to is checking the certs actually
belong to the right entity. But ignoring some minor(-ish) details like
missing CA in their cert chain, their bad choice of cipher etc.


&gt;<i> However, some sites are still showing the Handshake problem. <A HREF="https://ibin.co/38uz8akvWayM.png">https://ibin.co/38uz8akvWayM.png</A>
</I>&gt;<i> 
</I>&gt;<i> You had previously replied to this saying:
</I>&gt;<i> 
</I>&gt;<i> &quot;If you actually read that error message it tells you exactly what the
</I>&gt;<i> problem is.
</I>&gt;<i> 
</I>&gt;<i> &quot;Handshake with SSL server failed: [blah blah codes]: dh key too small&quot;
</I>&gt;<i> 
</I>&gt;<i> The server is trying to use a Diffi-Helman cipher with a too-short key.
</I>&gt;<i> DH cipher with short keys has recently been broken. By recently I mean
</I>&gt;<i> about a whole year ago.&#8221;
</I>&gt;<i> 
</I>&gt;<i> However, I still wonder what the solution is? is it possible to fix this? and who needs to fix it? is it a squid side error? is it an OS level error?
</I>&gt;<i> 
</I>
The only solution for that one is for the server admin to change/fix
their DH key settings to make it longer.

You are unlikely to be the only one having such problem, so with any
luck they will fix it soon. You can try to contact their admin and tell
them about the problem.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="014107.html">[squid-users] A bunch of SSL errors I am not sure why
</A></li>
	<LI>Next message (by thread): <A HREF="014101.html">[squid-users] A bunch of SSL errors I am not sure why
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14109">[ date ]</a>
              <a href="thread.html#14109">[ thread ]</a>
              <a href="subject.html#14109">[ subject ]</a>
              <a href="author.html#14109">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
