<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] HTTPS site filtering
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20HTTPS%20site%20filtering&In-Reply-To=%3C35739dd3-a2b7-d6e5-9099-9503edc891c5%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014115.html">
   <LINK REL="Next"  HREF="014135.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] HTTPS site filtering</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20HTTPS%20site%20filtering&In-Reply-To=%3C35739dd3-a2b7-d6e5-9099-9503edc891c5%40treenet.co.nz%3E"
       TITLE="[squid-users] HTTPS site filtering">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Jan 20 08:51:38 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="014115.html">[squid-users] HTTPS site filtering
</A></li>
        <LI>Next message (by thread): <A HREF="014135.html">[squid-users] HTTPS site filtering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14126">[ date ]</a>
              <a href="thread.html#14126">[ thread ]</a>
              <a href="subject.html#14126">[ subject ]</a>
              <a href="author.html#14126">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 20/01/2017 9:32 a.m., roadrage27 wrote:
&gt;<i> I was able to solve my previous issue of no connections and now have a
</I>&gt;<i> working squid along with http site filtering and regex working nicely.
</I>&gt;<i> 
</I>&gt;<i> My current issue is the need to allow only certain sites which do include
</I>&gt;<i> some HTTPS sites.  If i leave the line
</I>&gt;<i> 
</I>&gt;<i> http_access deny CONNECT !SSL_ports
</I>&gt;<i> 
</I>&gt;<i> within my conf file, no HTTPS traffic works,
</I>
That tells me either you have screwed up the CONNECT ACL definition. Or
the SSL_ports one.

I suspect that whatever you have done is making HTTPS no longer use port
443. That needs to be fixed.


&gt;<i> commenting it out and putting
</I>&gt;<i> in
</I>&gt;<i> 
</I>&gt;<i> http_access allow CONNECT SSL_ports 
</I>&gt;<i> 
</I>&gt;<i> allows SSL but it allows all sites that are available to work with SSL to be
</I>&gt;<i> accessed.  
</I>&gt;<i>
</I>
Quite. The security protection intended by that rule is to deny the
identifiably bad things and let your custom rules that follow decide
what is allowed.


&gt;<i> Is there a way to limit this access with an ACL and if so what is they
</I>&gt;<i> syntax?
</I>
The required syntax is the default:

 acl SSL_Ports port 443
 acl CONNECT method CONNECT
 http_access deny CONNECT !SSL_Ports

Since you say that is not working, the problem is elsewhere and ACL
definition will not solve the breakage.

If you still need help, we will need to see what your squid.conf
contains currently. And if you are intercepting, the rules used for
doing that.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="014115.html">[squid-users] HTTPS site filtering
</A></li>
	<LI>Next message (by thread): <A HREF="014135.html">[squid-users] HTTPS site filtering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14126">[ date ]</a>
              <a href="thread.html#14126">[ thread ]</a>
              <a href="subject.html#14126">[ subject ]</a>
              <a href="author.html#14126">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
