<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 4.x: Intermediate certificates downloader
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%204.x%3A%20Intermediate%20certificates%20downloader&In-Reply-To=%3C35afc9c9-dd43-fb17-d0d6-c90866fd5c28%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014166.html">
   <LINK REL="Next"  HREF="014170.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 4.x: Intermediate certificates downloader</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%204.x%3A%20Intermediate%20certificates%20downloader&In-Reply-To=%3C35afc9c9-dd43-fb17-d0d6-c90866fd5c28%40measurement-factory.com%3E"
       TITLE="[squid-users] Squid 4.x: Intermediate certificates downloader">rousskov at measurement-factory.com
       </A><BR>
    <I>Mon Jan 23 17:31:49 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="014166.html">[squid-users] Squid 4.x: Intermediate certificates downloader
</A></li>
        <LI>Next message (by thread): <A HREF="014170.html">[squid-users] Squid 4.x: Intermediate certificates downloader
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14169">[ date ]</a>
              <a href="thread.html#14169">[ thread ]</a>
              <a href="subject.html#14169">[ subject ]</a>
              <a href="author.html#14169">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 01/23/2017 04:28 AM, Yuri wrote:

&gt;<i> 1. How does it work? 
</I>
My response below and the following commit message might answer some of
your questions:

    <A HREF="http://bazaar.launchpad.net/~squid/squid/5/revision/14769">http://bazaar.launchpad.net/~squid/squid/5/revision/14769</A>

&gt;<i> I.e., where downloaded certs stored, how it
</I>&gt;<i> handles, does it saves anywhere to disk?
</I>
Missing certificates are fetched using HTTP[S]. Certificate responses
should be treated as any other HTTP[S] responses with regard to caching.
For example, if you have disk caching enabled and your caching rules
(including defaults) allow certificate response caching, then the
response should be cached. Similarly, the cached certificate will
eventually be evicted from the cache following regular cache maintenance
rules. When that happens, Squid will try to fetch the certificate again
(if it becomes needed again).


&gt;<i> 2. How this feature is related to sslproxy_foreign_intermediate_certs,
</I>&gt;<i> how it can interfere with it?
</I>
AFAICT by looking at the code, Squid only downloads certificates that
Squid is missing when trying to build a complete certificate chain for a
given server connection. Any sslproxy_foreign_intermediate_certs are
used as needed during the chain building process (i.e., they are _not_
&quot;missing&quot;).


&gt;<i> Release notes contains nothing about this feature. Wiki contains only
</I>&gt;<i> one mention in passing that this functionality exists in principle.
</I>
I agree that this feature lacks documentation. This is, in part, because
the feature has no configuration options that normally force developers
to document at least some of the code logic. We should add a few words
about it to sslproxy_foreign_intermediate_certs documentation.


FWIW, we are also adding an ACL to identify internal transactions that
fetch missing certificates.


HTH,

Alex.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="014166.html">[squid-users] Squid 4.x: Intermediate certificates downloader
</A></li>
	<LI>Next message (by thread): <A HREF="014170.html">[squid-users] Squid 4.x: Intermediate certificates downloader
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14169">[ date ]</a>
              <a href="thread.html#14169">[ thread ]</a>
              <a href="subject.html#14169">[ subject ]</a>
              <a href="author.html#14169">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
