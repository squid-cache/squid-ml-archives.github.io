<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] cert mem cache
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20cert%20mem%20cache&In-Reply-To=%3C42e1a724-a25e-19ba-b830-52ef483f2deb%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014164.html">
   <LINK REL="Next"  HREF="014166.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] cert mem cache</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20cert%20mem%20cache&In-Reply-To=%3C42e1a724-a25e-19ba-b830-52ef483f2deb%40treenet.co.nz%3E"
       TITLE="[squid-users] cert mem cache">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Jan 24 01:54:28 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="014164.html">[squid-users] cert mem cache
</A></li>
        <LI>Next message (by thread): <A HREF="014166.html">[squid-users] Squid 4.x: Intermediate certificates downloader
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14193">[ date ]</a>
              <a href="thread.html#14193">[ thread ]</a>
              <a href="subject.html#14193">[ subject ]</a>
              <a href="author.html#14193">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 23/01/2017 12:08 p.m., senor wrote:
&gt;<i> Hello all,
</I>&gt;<i> Is the use of dynamic_cert_mem_cache_size=SIZE on the http_port
</I>&gt;<i> directive any different with and without using sslcrtd_program?
</I>&gt;<i> 
</I>
As far as I'm aware they are different. But Squid passes some of the
prot parameters to the helper, and with SMP there are shared blocks of
memory involved, so best to keep them the same.
 - At the very least that is the normal well-tested way of using them.

The helper uses an on-disk database/cache managed by OpenSSL as well as
the in-memory copies of popular things.
The Squid internal generator only uses in-memory AFAIK. But that may be
incorrect now, things in that area have changed a few times.

[ FYI, If Alex or Christos have differing info they know it best. ]


&gt;<i> Should there be a specific relationship between the amount of memory or
</I>&gt;<i> disk configured for the two?
</I>
Disk - no. Memory - maybe.

&gt;<i> 
</I>&gt;<i> On a slight tangent, what performance improvement could be expected by
</I>&gt;<i> using ssl_crtd? What metrics would be best to view if comparing with and
</I>&gt;<i> without?
</I>&gt;<i> 
</I>
Without the helper the CPU timeslots assigned to Squid by the kernel
have to handle both traffic and cert generation tasks. This will
naturally be slower and add jitter to the traffic handling. However,
using a helper adds serialization overheads. So YMMV.


I'm not aware of anyone having done proper (or even rough) measurements.
Results will be traffic dependent though, since the certs are cached and
have HIT/MISS type behaviour just like any other cache data.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="014164.html">[squid-users] cert mem cache
</A></li>
	<LI>Next message (by thread): <A HREF="014166.html">[squid-users] Squid 4.x: Intermediate certificates downloader
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14193">[ date ]</a>
              <a href="thread.html#14193">[ thread ]</a>
              <a href="subject.html#14193">[ subject ]</a>
              <a href="author.html#14193">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
