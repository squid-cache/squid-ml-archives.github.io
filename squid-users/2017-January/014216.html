<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 4.x: Intermediate certificates downloader
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%204.x%3A%20Intermediate%20certificates%20downloader&In-Reply-To=%3Ce9b275f4-f9b1-7eda-e102-420bb9eda7ad%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014215.html">
   <LINK REL="Next"  HREF="014217.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 4.x: Intermediate certificates downloader</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%204.x%3A%20Intermediate%20certificates%20downloader&In-Reply-To=%3Ce9b275f4-f9b1-7eda-e102-420bb9eda7ad%40measurement-factory.com%3E"
       TITLE="[squid-users] Squid 4.x: Intermediate certificates downloader">rousskov at measurement-factory.com
       </A><BR>
    <I>Tue Jan 24 18:27:46 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="014215.html">[squid-users] Squid 4.x: Intermediate certificates downloader
</A></li>
        <LI>Next message (by thread): <A HREF="014217.html">[squid-users] Squid 4.x: Intermediate certificates downloader
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14216">[ date ]</a>
              <a href="thread.html#14216">[ thread ]</a>
              <a href="subject.html#14216">[ subject ]</a>
              <a href="author.html#14216">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 01/24/2017 11:19 AM, Yuri Voinov wrote:

&gt;<i> It is downloads directly via proxy from localhost:
</I>
&gt;<i> As I understand, downloader also access via localhost, right? 
</I>
This is incorrect. Downloader does not have a concept of an HTTP client
which sends the request to Squid so &quot;via localhost&quot; or &quot;via any client
source address&quot; does not apply to Downloader transactions. In other
words, there is no client [source address] for Downloader requests.

Unfortunately, I do not know exactly what effect that lack of info has
on what ACLs (in part because there are too many of them and because
lack of info is often treated inconsistently by various ACLs). Thus, I
continue to recommend finding out which directive/ACL denied Downloader
access as the first step.

Alex.


&gt;<i> 25.01.2017 0:16, Alex Rousskov &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;&gt;<i> On 01/24/2017 10:48 AM, Yuri Voinov wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> It seems 4.0.17 tries to download certs but gives deny somewhere.
</I>&gt;&gt;&gt;<i> However, same URL with wget via same proxy works
</I>&gt;&gt;&gt;<i> Why?
</I>&gt;&gt;<i> Most likely, your http_access or similar rules deny internal download
</I>&gt;&gt;<i> transactions but allow external ones. This is possible, for example, if
</I>&gt;&gt;<i> your access rules use client information. Internal transactions (ESI,
</I>&gt;&gt;<i> missing certificate fetching, Cache Digests, etc.) do not have an
</I>&gt;&gt;<i> associated client.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The standard denial troubleshooting procedure applies here: Start with
</I>&gt;&gt;<i> finding out which directive/ACL denies access. I am _not_ implying that
</I>&gt;&gt;<i> this is easy to do.
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="014215.html">[squid-users] Squid 4.x: Intermediate certificates downloader
</A></li>
	<LI>Next message (by thread): <A HREF="014217.html">[squid-users] Squid 4.x: Intermediate certificates downloader
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14216">[ date ]</a>
              <a href="thread.html#14216">[ thread ]</a>
              <a href="subject.html#14216">[ subject ]</a>
              <a href="author.html#14216">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
