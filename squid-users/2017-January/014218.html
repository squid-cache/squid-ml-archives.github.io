<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid reverse proxy (accelerator) for MS Exchange OWA
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20reverse%20proxy%20%28accelerator%29%20for%20MS%20Exchange%0A%20OWA&In-Reply-To=%3C94978436-88e5-fc84-9f3e-b8f1757402a5%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014200.html">
   <LINK REL="Next"  HREF="014227.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid reverse proxy (accelerator) for MS Exchange OWA</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20reverse%20proxy%20%28accelerator%29%20for%20MS%20Exchange%0A%20OWA&In-Reply-To=%3C94978436-88e5-fc84-9f3e-b8f1757402a5%40measurement-factory.com%3E"
       TITLE="[squid-users] squid reverse proxy (accelerator) for MS Exchange OWA">rousskov at measurement-factory.com
       </A><BR>
    <I>Tue Jan 24 18:41:54 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="014200.html">[squid-users] squid reverse proxy (accelerator) for MS Exchange OWA
</A></li>
        <LI>Next message (by thread): <A HREF="014227.html">[squid-users] squid reverse proxy (accelerator) for MS Exchange OWA
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14218">[ date ]</a>
              <a href="thread.html#14218">[ thread ]</a>
              <a href="subject.html#14218">[ subject ]</a>
              <a href="author.html#14218">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 01/24/2017 01:02 AM, Vieri wrote:
&gt;<i> 2017/01/24 07:58:57.076 kid1| 83,5| bio.cc(139) read: FD 18 read 0 &lt;= 65535
</I>
The peer at 10.215.144.21:443 accepted Squid connection and then closed
it, probably before sending anything to Squid (you did not show enough
FD 18 history to confirm that with certainty, but it is likely).


&gt;<i> 2017/01/24 07:58:57.076 kid1| 83,5| NegotiationHistory.cc(83) retrieveNegotiatedInfo: SSL connection info on FD 18 SSL version NONE/0.0 negotiated cipher
</I>
Nothing was negotiated.


&gt;<i> 2017/01/24 07:58:57.076 kid1| Error negotiating SSL on FD 18: error:00000000:lib(0):func(0):reason(0) (5/0/0)
</I>
More-or-less confirms the above -- an SSL-violating end of TCP connection.


&gt;<i> 2017/01/24 07:58:57.076 kid1| TCP connection to 10.215.144.21/443 failed
</I>&gt;<i> 2017/01/24 07:58:57.077 kid1| 15,2| neighbors.cc(1246) peerConnectFailedSilent: TCP connection to 10.215.144.21/443 dead
</I>
More echoes of the same error.


&gt;<i> Also, I'm not sure why the SSL version isn't picked up (NONE/0.0)
</I>
Probably because the server did not send its SSL version to Squid.


&gt;<i> What else can I try?
</I>
I would start by capturing TCP packets between Squid and the server in
question to confirm that the server (a) receives SSL ClientHello from
Squid and (b) closes the connection before sending SSL ServerHello to Squid.

If that is confirmed, you could interrogate the server about its
decision to close the connection. For example, it may not like the
ciphers offered by Squid. Establishing similar SSL connections from
Squid IP address to the server using OpenSSL command-line client may
help triage this further.


HTH,

Alex.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="014200.html">[squid-users] squid reverse proxy (accelerator) for MS Exchange OWA
</A></li>
	<LI>Next message (by thread): <A HREF="014227.html">[squid-users] squid reverse proxy (accelerator) for MS Exchange OWA
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14218">[ date ]</a>
              <a href="thread.html#14218">[ thread ]</a>
              <a href="subject.html#14218">[ subject ]</a>
              <a href="author.html#14218">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
