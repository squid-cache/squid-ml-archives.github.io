<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Strange behavior - reload service failed, but not start....
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Strange%20behavior%20-%20reload%20service%20failed%2C%0A%20but%20not%20start....&In-Reply-To=%3C33d99c9f-8c63-65c2-9cfb-bb217ba5c176%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014236.html">
   <LINK REL="Next"  HREF="014274.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Strange behavior - reload service failed, but not start....</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Strange%20behavior%20-%20reload%20service%20failed%2C%0A%20but%20not%20start....&In-Reply-To=%3C33d99c9f-8c63-65c2-9cfb-bb217ba5c176%40treenet.co.nz%3E"
       TITLE="[squid-users] Strange behavior - reload service failed, but not start....">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Jan 26 02:57:48 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="014236.html">[squid-users] Strange behavior - reload service failed,	but not start....
</A></li>
        <LI>Next message (by thread): <A HREF="014274.html">[squid-users] Strange behavior - reload service failed,	but not start....
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14244">[ date ]</a>
              <a href="thread.html#14244">[ thread ]</a>
              <a href="subject.html#14244">[ subject ]</a>
              <a href="author.html#14244">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 26/01/2017 5:38 a.m., erdosain9 wrote:
&gt;<i> Hi,........ no
</I>&gt;<i> 
</I>&gt;<i> [<A HREF="https://lists.squid-cache.org/listinfo/squid-users">root at squid</A> ~]# df -h
</I>&gt;<i> S.ficheros              Tama&#241;o Usados  Disp Uso% Montado en
</I>&gt;<i> /dev/mapper/centos-root    48G    16G   33G  32% /
</I>&gt;<i> devtmpfs                  896M      0  896M   0% /dev
</I>&gt;<i> tmpfs                     906M   2,1M  904M   1% /dev/shm
</I>&gt;<i> tmpfs                     906M   8,5M  898M   1% /run
</I>&gt;<i> tmpfs                     906M      0  906M   0% /sys/fs/cgroup
</I>&gt;<i> /dev/sda1                 497M   141M  356M  29% /boot
</I>&gt;<i> tmpfs                     182M      0  182M   0% /run/user/0
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> by the way, this error dosent appear anymore, but was the first error i
</I>&gt;<i> noticed after the bad reboot. (i think that maybe i fix that with &quot;squid
</I>&gt;<i> -z&quot;....
</I>
I think you changed the size of a cache_dir right?
The log messages seems to be Squid busily trying to clear the directory
size down to what is configured, while systemd keeps trying to force
start and restart of overlapping processes mid-action.


&gt;<i> 
</I>&gt;<i> some other approach??
</I>&gt;<i> 
</I>
Not using systemd to control Squid-3. The two are not compatible. As you
just found out the hard way.

Squid is not a daemon, it is a Daemon + Manager in one binary/process.
systemd is based around the naive assumption that everything is a simple
daemon and gets horribly confuzled when reality bites. It is not alone,
upstart has the same issues. Basically only start/stop work, and even
those only most of the time if done very carefully.

Your choices with systemd are (1) use the 'squid -k' commands, or (2)
upgrade to Squid-4 and install the tools/systemd/squid.service file we
provide for that version.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="014236.html">[squid-users] Strange behavior - reload service failed,	but not start....
</A></li>
	<LI>Next message (by thread): <A HREF="014274.html">[squid-users] Strange behavior - reload service failed,	but not start....
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14244">[ date ]</a>
              <a href="thread.html#14244">[ thread ]</a>
              <a href="subject.html#14244">[ subject ]</a>
              <a href="author.html#14244">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
