<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Not all html objects are being cached
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Not%20all%20html%20objects%20are%20being%20cached&In-Reply-To=%3C1485524146.5283.5.camel%40comnet.uz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014273.html">
   <LINK REL="Next"  HREF="014279.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Not all html objects are being cached</H1>
    <B>Garri Djavadyan</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Not%20all%20html%20objects%20are%20being%20cached&In-Reply-To=%3C1485524146.5283.5.camel%40comnet.uz%3E"
       TITLE="[squid-users] Not all html objects are being cached">garryd at comnet.uz
       </A><BR>
    <I>Fri Jan 27 13:35:46 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="014273.html">[squid-users] Not all html objects are being cached
</A></li>
        <LI>Next message (by thread): <A HREF="014279.html">[squid-users] Not all html objects are being cached
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14275">[ date ]</a>
              <a href="thread.html#14275">[ thread ]</a>
              <a href="subject.html#14275">[ subject ]</a>
              <a href="author.html#14275">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, 2017-01-27 at 17:58 +0600, Yuri wrote:
&gt;<i> 
</I>&gt;<i> 27.01.2017 17:54, Garri Djavadyan &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;<i> &gt; On Fri, 2017-01-27 at 15:47 +0600, Yuri wrote:
</I>&gt;<i> &gt; &gt; --2017-01-27 15:29:54--&#160;&#160;<A HREF="https://www.microsoft.com/ru-kz/">https://www.microsoft.com/ru-kz/</A>
</I>&gt;<i> &gt; &gt; Connecting to 127.0.0.1:3128... connected.
</I>&gt;<i> &gt; &gt; Proxy request sent, awaiting response...
</I>&gt;<i> &gt; &gt; &#160;&#160;&#160;&#160;HTTP/1.1 200 OK
</I>&gt;<i> &gt; &gt; &#160;&#160;&#160;&#160;Cache-Control: no-cache, no-store
</I>&gt;<i> &gt; &gt; &#160;&#160;&#160;&#160;Pragma: no-cache
</I>&gt;<i> &gt; &gt; &#160;&#160;&#160;&#160;Content-Type: text/html
</I>&gt;<i> &gt; &gt; &#160;&#160;&#160;&#160;Expires: -1
</I>&gt;<i> &gt; &gt; &#160;&#160;&#160;&#160;Server: Microsoft-IIS/8.0
</I>&gt;<i> &gt; &gt; &#160;&#160;&#160;&#160;CorrelationVector: BzssVwiBIUaXqyOh.1.1
</I>&gt;<i> &gt; &gt; &#160;&#160;&#160;&#160;X-AspNet-Version: 4.0.30319
</I>&gt;<i> &gt; &gt; &#160;&#160;&#160;&#160;X-Powered-By: ASP.NET
</I>&gt;<i> &gt; &gt; &#160;&#160;&#160;&#160;Access-Control-Allow-Headers: Origin, X-Requested-With,
</I>&gt;<i> &gt; &gt; Content-
</I>&gt;<i> &gt; &gt; Type,
</I>&gt;<i> &gt; &gt; Accept
</I>&gt;<i> &gt; &gt; &#160;&#160;&#160;&#160;Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS
</I>&gt;<i> &gt; &gt; &#160;&#160;&#160;&#160;Access-Control-Allow-Credentials: true
</I>&gt;<i> &gt; &gt; &#160;&#160;&#160;&#160;P3P: CP=&quot;ALL IND DSP COR ADM CONo CUR CUSo IVAo IVDo PSA PSD
</I>&gt;<i> &gt; &gt; TAI
</I>&gt;<i> &gt; &gt; TELo
</I>&gt;<i> &gt; &gt; OUR SAMo CNT COM INT NAV ONL PHY PRE PUR UNI&quot;
</I>&gt;<i> &gt; &gt; &#160;&#160;&#160;&#160;X-Frame-Options: SAMEORIGIN
</I>&gt;<i> &gt; &gt; &#160;&#160;&#160;&#160;Vary: Accept-Encoding
</I>&gt;<i> &gt; &gt; &#160;&#160;&#160;&#160;Content-Encoding: gzip
</I>&gt;<i> &gt; &gt; &#160;&#160;&#160;&#160;Date: Fri, 27 Jan 2017 09:29:56 GMT
</I>&gt;<i> &gt; &gt; &#160;&#160;&#160;&#160;Content-Length: 13322
</I>&gt;<i> &gt; &gt; &#160;&#160;&#160;&#160;Set-Cookie: MS-CV=BzssVwiBIUaXqyOh.1; domain=.microsoft.com;
</I>&gt;<i> &gt; &gt; expires=Sat, 28-Jan-2017 09:29:56 GMT; path=/
</I>&gt;<i> &gt; &gt; &#160;&#160;&#160;&#160;Set-Cookie: MS-CV=BzssVwiBIUaXqyOh.2; domain=.microsoft.com;
</I>&gt;<i> &gt; &gt; expires=Sat, 28-Jan-2017 09:29:56 GMT; path=/
</I>&gt;<i> &gt; &gt; &#160;&#160;&#160;&#160;Strict-Transport-Security: max-age=0; includeSubDomains
</I>&gt;<i> &gt; &gt; &#160;&#160;&#160;&#160;X-CCC: NL
</I>&gt;<i> &gt; &gt; &#160;&#160;&#160;&#160;X-CID: 2
</I>&gt;<i> &gt; &gt; &#160;&#160;&#160;&#160;X-Cache: MISS from khorne
</I>&gt;<i> &gt; &gt; &#160;&#160;&#160;&#160;X-Cache-Lookup: MISS from khorne:3128
</I>&gt;<i> &gt; &gt; &#160;&#160;&#160;&#160;Connection: keep-alive
</I>&gt;<i> &gt; &gt; Length: 13322 (13K) [text/html]
</I>&gt;<i> &gt; &gt; Saving to: 'index.html'
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; index.html&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;100%[==================&gt;]&#160;&#160;13.01K --.-
</I>&gt;<i> &gt; &gt; KB/s&#160;&#160;&#160;&#160;in
</I>&gt;<i> &gt; &gt; 0s
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 2017-01-27 15:29:57 (32.2 MB/s) - 'index.html' saved
</I>&gt;<i> &gt; &gt; [13322/13322]
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Can you explain me - for what static index.html has this:
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Cache-Control: no-cache, no-store
</I>&gt;<i> &gt; &gt; Pragma: no-cache
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; ?
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; What can be broken to ignore CC in this page?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Hi Yuri,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Why do you think the page returned for URL
</I>&gt;<i> &gt; [<A HREF="https://www.microsot.cpom/r">https://www.microsot.cpom/r</A>
</I>&gt;<i> &gt; u-kz/] is static and not dynamically generated one?
</I>&gt;<i> 
</I>&gt;<i> And for me, what's the difference? Does it change anything? In
</I>&gt;<i> addition,&#160;
</I>&gt;<i> it is easy to see on the page and even the eyes - strangely enough -
</I>&gt;<i> to&#160;
</I>&gt;<i> open its code. And? What do you see there?
</I>
I see an official home page of Microsoft company for KZ region. The
page is full of javascripts and products offer. It makes sense to
expect that the page could be changed intensively enough.


&gt;<i> &gt; The index.html file is default file name for wget.
</I>&gt;<i> 
</I>&gt;<i> And also the name of the default home page in the web. Imagine - I
</I>&gt;<i> know&#160;
</I>&gt;<i> the obvious things. But the question was about something else.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; man wget:
</I>&gt;<i> &gt; &#160;&#160;&#160;--default-page=name
</I>&gt;<i> &gt; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Use name as the default file name when it isn't known
</I>&gt;<i> &gt; (i.e., for
</I>&gt;<i> &gt; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;URLs that end in a slash), instead of index.html.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; In fact the <A HREF="https://www.microsoft.com/ru-kz/index.html">https://www.microsoft.com/ru-kz/index.html</A> is a stub
</I>&gt;<i> &gt; page
</I>&gt;<i> &gt; (The page you requested cannot be found.).
</I>&gt;<i> 
</I>&gt;<i> You living in wrong region. This is geo-dependent page, as obvious,
</I>&gt;<i> yes?
</I>
What I mean is the pages <A HREF="https://www.microsoft.com/ru-kz/">https://www.microsoft.com/ru-kz/</A> and <A HREF="https://w">https://w</A>
ww.microsoft.com/ru-kz/index.html are not same. You can easily confirm
it.


&gt;<i> Again. What is the difference? I open it from different
</I>&gt;<i> workstations,&#160;
</I>&gt;<i> from different browsers - I see the same thing. The code is
</I>&gt;<i> identical. I&#160;
</I>&gt;<i> can is to cache? Yes or no?
</I>
I'm a new member of Squid community (about 1 year). While tracking for
community activity I found that you can't grasp the advantages of
HTTP/1.1 over HTTP/1.0 for caching systems. Especially, its ability to
_safely_ cache and serve same amount (but I believe even more) of the
objects as HTTP/1.0 compliant caches do (while not breaking internet).
The main tool of HTTP/1.1 compliant proxies is _revalidation_ process.
HTTP/1.1 compliant caches like Squid tend to cache all possible objects
but later use revalidation for dubious requests. In fact the
revalidation is not costly process, especially using conditional GET
requests.

I found that most of your complains in the mail list and Bugzilla are
related to HTTPS scheme. FYI: The primary tool (revalidation) does not
work for HTTPS scheme using all current Squid branches at the moment.
See bug 4648.

Try to apply the proposed patch and update all related bug reports.

HTH


Garri

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="014273.html">[squid-users] Not all html objects are being cached
</A></li>
	<LI>Next message (by thread): <A HREF="014279.html">[squid-users] Not all html objects are being cached
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14275">[ date ]</a>
              <a href="thread.html#14275">[ thread ]</a>
              <a href="subject.html#14275">[ subject ]</a>
              <a href="author.html#14275">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
