<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Clarity on sending intercepted HTTPS traffic upstream to a cache_peer
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Clarity%20on%20sending%20intercepted%20HTTPS%20traffic%0A%20upstream%20to%20a%20cache_peer&In-Reply-To=%3Cda435a9f-904a-b438-4fa5-309a1671b3bb%40charlie.is%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014285.html">
   <LINK REL="Next"  HREF="014287.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Clarity on sending intercepted HTTPS traffic upstream to a cache_peer</H1>
    <B>Charlie Orford</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Clarity%20on%20sending%20intercepted%20HTTPS%20traffic%0A%20upstream%20to%20a%20cache_peer&In-Reply-To=%3Cda435a9f-904a-b438-4fa5-309a1671b3bb%40charlie.is%3E"
       TITLE="[squid-users] Clarity on sending intercepted HTTPS traffic upstream to a cache_peer">charlie at charlie.is
       </A><BR>
    <I>Sat Jan 28 00:32:44 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="014285.html">[squid-users] Clarity on sending intercepted HTTPS traffic upstream to a cache_peer
</A></li>
        <LI>Next message (by thread): <A HREF="014287.html">[squid-users] Clarity on sending intercepted HTTPS traffic upstream to a cache_peer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14286">[ date ]</a>
              <a href="thread.html#14286">[ thread ]</a>
              <a href="subject.html#14286">[ subject ]</a>
              <a href="author.html#14286">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 27/01/2017 23:43, Alex Rousskov wrote:
&gt;<i> On 01/27/2017 04:04 PM, Charlie Orford wrote:
</I>&gt;&gt;<i> A post from another user on this list seems to suggest they successfully
</I>&gt;&gt;<i> got squid to do what we want
</I>&gt;&gt;<i> (<A HREF="http://lists.squid-cache.org/pipermail/squid-users/2015-November/007955.html">http://lists.squid-cache.org/pipermail/squid-users/2015-November/007955.html</A>)
</I>&gt;&gt;<i> but when emulating their setup (i.e. peeking at step1, staring at step2
</I>&gt;&gt;<i> and then bumping at step3) we get the same
</I>&gt;&gt;<i> SQUID_X509_V_ERR_DOMAIN_MISMATCH error.
</I>&gt;<i> I suggest the following order:
</I>&gt;<i>
</I>&gt;<i>    1. Decide whether your Squid should bump or splice.
</I>&gt;<i>    2. Find the configuration that does what you decided in #1.
</I>&gt;<i>
</I>&gt;<i> So far, you have given no reasons to warrant bumping so I assume you do
</I>&gt;<i> not need or want to bump anything. Thus, you should ignore any
</I>&gt;<i> configurations that contain &quot;stare&quot;, &quot;bump&quot;, or deprecated &quot;*-first&quot;
</I>&gt;<i> ssl_bump actions.
</I>
Sorry if my original intent wasn't clear. Obviously it makes no sense 
intercepting ssl traffic if we're going to splice everything.

Our design goal is: intercept and bump local client https traffic on 
squid1 (so we can filter certain urls, cache content etc.) and then 
forward the request on to the origin server via an upstream squid2 
(which has internet access).

The user who posted 
<A HREF="http://lists.squid-cache.org/pipermail/squid-users/2015-November/007955.html">http://lists.squid-cache.org/pipermail/squid-users/2015-November/007955.html</A> 
seems to have successfully done this but I can't replicate it. After 
doing a lot of googling (and semi-successfully trying to interpret Amos' 
various replies whenever bumping and cache_peers come up on this list) 
I'm beginning to wonder if it is indeed possible or if that user simple 
mistook what he was seeing when he posted that message (e.g. didn't 
notice that squid was actually not bumping his client connections).

Charlie










</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="014285.html">[squid-users] Clarity on sending intercepted HTTPS traffic upstream to a cache_peer
</A></li>
	<LI>Next message (by thread): <A HREF="014287.html">[squid-users] Clarity on sending intercepted HTTPS traffic upstream to a cache_peer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14286">[ date ]</a>
              <a href="thread.html#14286">[ thread ]</a>
              <a href="subject.html#14286">[ subject ]</a>
              <a href="author.html#14286">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
