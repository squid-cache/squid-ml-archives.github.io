<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Log Setup
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Log%20Setup&In-Reply-To=%3Cab645c2f-8d16-b236-3692-c35152d06022%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014298.html">
   <LINK REL="Next"  HREF="014300.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Log Setup</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Log%20Setup&In-Reply-To=%3Cab645c2f-8d16-b236-3692-c35152d06022%40treenet.co.nz%3E"
       TITLE="[squid-users] Log Setup">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Jan 31 02:22:46 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="014298.html">[squid-users] Log Setup
</A></li>
        <LI>Next message (by thread): <A HREF="014300.html">[squid-users] irregular traffic when using proxy, not if NATed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14301">[ date ]</a>
              <a href="thread.html#14301">[ thread ]</a>
              <a href="subject.html#14301">[ subject ]</a>
              <a href="author.html#14301">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 31/01/2017 3:46 a.m., creditu wrote:
&gt;<i> I have a 3.1 accelerator and have set the logs up to emulate _httpd_log.
</I>
Apache (&quot;httpd&quot;) is a web server. Its logging format was not designed
for use by proxies nor to display the type of information routinely
handled by proxies (and CDN in your case).

The rest of your problems follow naturally from that simple fact.


&gt;<i>  On the standard squid log I can see which backend server the request
</I>&gt;<i> was sent to:
</I>&gt;<i>  
</I>&gt;<i> 1481343537.601      1 192.168.1.227 TCP_MISS/200 496 GET
</I>&gt;<i> <A HREF="https://192.168.1.102/">https://192.168.1.102/</A> - ROUNDROBIN_PARENT/192.168.1.21 text/html
</I>&gt;<i> 
</I>&gt;<i> When I turn on httpd emulation I can't seem to come up with the
</I>&gt;<i> setting/option that will give me the IP of the backend the request was
</I>&gt;<i> sent to.  Is there a way to do this in 3.1?  I can get the
</I>&gt;<i> ROUNDROBIN_PARENT part, but not the IP.
</I>
You can try &quot;log_fqdn off&quot;, but really you should stop using web-server
format to record proxy information.

PS. Also you should upgrade your proxy, Squid 3.1 is past 5 years old in
an Internet that has seen massive changes in those years.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="014298.html">[squid-users] Log Setup
</A></li>
	<LI>Next message (by thread): <A HREF="014300.html">[squid-users] irregular traffic when using proxy, not if NATed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14301">[ date ]</a>
              <a href="thread.html#14301">[ thread ]</a>
              <a href="subject.html#14301">[ subject ]</a>
              <a href="author.html#14301">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
