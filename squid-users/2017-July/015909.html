<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] HDD/RAM Capacity vs store_avg_object_size
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20HDD/RAM%20Capacity%20vs%20store_avg_object_size&In-Reply-To=%3C242089e0-4c34-3661-9343-7c54be7587f4%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015899.html">
   <LINK REL="Next"  HREF="015910.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] HDD/RAM Capacity vs store_avg_object_size</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20HDD/RAM%20Capacity%20vs%20store_avg_object_size&In-Reply-To=%3C242089e0-4c34-3661-9343-7c54be7587f4%40measurement-factory.com%3E"
       TITLE="[squid-users] HDD/RAM Capacity vs store_avg_object_size">rousskov at measurement-factory.com
       </A><BR>
    <I>Wed Jul 12 16:08:02 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015899.html">[squid-users] HDD/RAM Capacity vs store_avg_object_size
</A></li>
        <LI>Next message (by thread): <A HREF="015910.html">[squid-users] HDD/RAM Capacity vs store_avg_object_size
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15909">[ date ]</a>
              <a href="thread.html#15909">[ thread ]</a>
              <a href="subject.html#15909">[ subject ]</a>
              <a href="author.html#15909">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 07/12/2017 04:31 AM, bugreporter wrote:

&gt;<i> Can anybody help me to confirm my understanding of the memory usage vs the
</I>&gt;<i> persistent cache capacity? Below my understanding:
</I>&gt;<i> 
</I>&gt;<i> According to <A HREF="http://wiki.squid-cache.org/SquidFaq/SquidMemory:">http://wiki.squid-cache.org/SquidFaq/SquidMemory:</A>
</I>&gt;<i> 
</I>&gt;<i> 1- We need 14 MB of memory per 1 GB on disk for 64-bit Squid.The wiki is
</I>&gt;<i> there since I know squid (ie. i'm very old now). Is this information still
</I>&gt;<i> valid?
</I>&gt;<i> 
</I>&gt;<i> 2- Is this assumption based on the default value of 13 KB for
</I>&gt;<i> *store_avg_object_size*?
</I>&gt;<i> 
</I>&gt;<i> 3- If answers to questions above are both YES, can we deduce that we need 
</I>&gt;<i> *182* bytes in memory per object in the persistent cache on 64x system?
</I>&gt;<i> [*182* = (14 * 1024 * 1024) / (1024 * 1024 / store_avg_object_size)]
</I>&gt;<i> 
</I>&gt;<i> 4- Today the *store_avg_object_size* should be really greater than 13 KB.
</I>&gt;<i> The mean object size I can see on my own cache is about 100 KB. Can anybody
</I>&gt;<i> refer me to a website where I can find fresh information?
</I>&gt;<i> 
</I>&gt;<i> 5- If I'm completely on a wrong way, can anybody help me to find a formula
</I>&gt;<i> that can help me to deduce the required RAM for a given HDD capacity (and
</I>&gt;<i> vice versa).
</I>
I cannot answer your questions without doing research, but I can supply
the following additional information:

* The amount of RAM used for shared (rock) cache_dirs is usually very
different from the amount of RAM used for SMP-unaware ufs-based
cache_dirs. The wiki page was written before Rock support was added.

* For ufs, you can test any formula/hypothesis by filling a disk cache
(with dummy/test objects) and measuring Squid RAM usage. The RAM usage
growth due to cache_dir index should be linear so it is fairly easy to
measure.

* For rock, you can test any formula/hypothesis by configuring your disk
caches and starting SMP Squid. The shared memory tables are created at
start time so, if you know what you are doing, you can probably see how
big they are without filling the disk cache.


Please update the wiki if you find any documentation bugs.

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015899.html">[squid-users] HDD/RAM Capacity vs store_avg_object_size
</A></li>
	<LI>Next message (by thread): <A HREF="015910.html">[squid-users] HDD/RAM Capacity vs store_avg_object_size
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15909">[ date ]</a>
              <a href="thread.html#15909">[ thread ]</a>
              <a href="subject.html#15909">[ subject ]</a>
              <a href="author.html#15909">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
