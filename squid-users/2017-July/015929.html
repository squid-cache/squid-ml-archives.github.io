<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] HDD/RAM Capacity vs store_avg_object_size
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20HDD/RAM%20Capacity%20vs%20store_avg_object_size&In-Reply-To=%3Caf876c61-59fb-f43e-30af-f97ae975a65d%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015925.html">
   <LINK REL="Next"  HREF="015940.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] HDD/RAM Capacity vs store_avg_object_size</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20HDD/RAM%20Capacity%20vs%20store_avg_object_size&In-Reply-To=%3Caf876c61-59fb-f43e-30af-f97ae975a65d%40measurement-factory.com%3E"
       TITLE="[squid-users] HDD/RAM Capacity vs store_avg_object_size">rousskov at measurement-factory.com
       </A><BR>
    <I>Fri Jul 14 16:11:45 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015925.html">[squid-users] HDD/RAM Capacity vs store_avg_object_size
</A></li>
        <LI>Next message (by thread): <A HREF="015940.html">[squid-users] HDD/RAM Capacity vs store_avg_object_size
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15929">[ date ]</a>
              <a href="thread.html#15929">[ thread ]</a>
              <a href="subject.html#15929">[ subject ]</a>
              <a href="author.html#15929">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 07/14/2017 02:11 AM, bugreporter wrote:

&gt;<i> By doing so I'll get a new (or the same) rough estimation which is not what
</I>&gt;<i> I'm really looking for.
</I>
You will get an accurate-enough formula, which is what you should be
looking for.


&gt;<i> Actually I need to have a formula based on the mean object size
</I>
That is what I am trying to give you. Sorry if I was not explicit
enough. Idle Squid memory requirements can be computed using the
following formula:

    RAM used for HTTP caching purposes =
        RAM used by all cache indexes (cache_dirs and cache_mem) +
        cache_mem

where

    RAM used by a single cache index = C + v*n

where

    C is an unknown constant representing the size of in-RAM overhead
      of having a single (empty) cache (cache_dir or cache_mem).
      C depends on Squid build and configuration.
      C is normally a lot less than v*n so you might just ignore it.

    v is an unknown constant representing the size of in-RAM overhead
      of indexing a single cache object
      v depends on Squid build (e.g., 32 vs 64bit)
      v should be close to the sum of StoreEntry and LruNode sizes.

    n is the number of objects in the cache, which you can estimate by
      dividing the cache size by the mean cached object size.

The experiments I suggested can be used to estimate the C and v
constants required to compute the &quot;RAM used by cache indexes&quot; component.
You can measure/estimate/configure/control everything else in the formula.

The formula works well for large numbers of n, where various rounding
effects become negligible.

How you use this formula/model is up to you.

If your experiments prove the formula wrong, please discuss!


Thank you,

Alex.
P.S. Please note that a busy Squid also consumes memory for in-transit
transactions and other caches. If you know how much Squid consumes for
HTTP caching, then you can effectively measure other overheads, which
will also vary from one deployment environment to another.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015925.html">[squid-users] HDD/RAM Capacity vs store_avg_object_size
</A></li>
	<LI>Next message (by thread): <A HREF="015940.html">[squid-users] HDD/RAM Capacity vs store_avg_object_size
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15929">[ date ]</a>
              <a href="thread.html#15929">[ thread ]</a>
              <a href="subject.html#15929">[ subject ]</a>
              <a href="author.html#15929">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
