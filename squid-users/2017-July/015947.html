<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] youtube videos and squid
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20youtube%20videos%20and%20squid&In-Reply-To=%3C0f2301d2ff3e%241ba1a7c0%2452e4f740%24%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015944.html">
   <LINK REL="Next"  HREF="015842.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] youtube videos and squid</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20youtube%20videos%20and%20squid&In-Reply-To=%3C0f2301d2ff3e%241ba1a7c0%2452e4f740%24%40ngtech.co.il%3E"
       TITLE="[squid-users] youtube videos and squid">eliezer at ngtech.co.il
       </A><BR>
    <I>Mon Jul 17 20:48:56 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015944.html">[squid-users] youtube videos and squid
</A></li>
        <LI>Next message (by thread): <A HREF="015842.html">[squid-users] /var/run/squid gone on every reboot?!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15947">[ date ]</a>
              <a href="thread.html#15947">[ thread ]</a>
              <a href="subject.html#15947">[ subject ]</a>
              <a href="author.html#15947">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Sergei,

Thanks for sharing.
This is the first time I have seen EMBY server and client and it seems pretty decent\good and contains many very nice features.

I have been working on a solution that will be hosted on a Linux Server which I named &quot;YouTube-Store&quot;.
It's working and I wrote installation scripts for CentOS 7, Ubuntu 16.04, Debian 9.

The concept of the service is like this:
You have a main menu and admin menu.(more pages can be added to store categories with list of movie etc)
The main menu has a search bar which you can use to search the locally hosted videos by their YouTube ID or Their YouTube title.
The Server have a scheduled &quot;fetcher&quot; which downloads videos from a &quot;queue&quot; that is managed by the service admin.(or a script)
There is an API which you(The admin, or a script) can send to it one the next: YouTube link, youtu.be link, YouTube video ID(..watch?v=ID).
The queue is being managed from the web interface and you have the option to add videos to the queue, blacklist or remove from the queue.
( it's very simple to add\remove\disable\hide etc videos)

The goal is to have the option to host a local video &quot;store&quot; which is based on YouTube.
The missing piece in all of this is the IPAD\ANDROID app, but I believe that it's possible to web CMS system to overcome this &quot;gap&quot;.
And one last thing is the option to redirect Squid-Cache clients requests to a YouTube video into the locally hosted version(if the video already downloaded).

This is the git repository of the project:
<A HREF="http://gogs.ngtech.co.il/elicro/youtube-store">http://gogs.ngtech.co.il/elicro/youtube-store</A>

which is in the beta testing phase.

Thanks For the progress update and also for sharing EMBY,
Eliezer

----
<A HREF="http://ngtech.co.il/lmgtfy/">http://ngtech.co.il/lmgtfy/</A>
Linux System Administrator
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>


From: Sergei G [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">sergeig.public at gmail.com</A>] 
Sent: Monday, July 17, 2017 23:05
To: Eliezer Croitoru &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>&gt;
Cc: Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] youtube videos and squid

Thank you for saving me time and effort.

I ended up following advice of downloading youtube movies to home computer and serving from it.

My choice was EMBY server for windows <A HREF="https://emby.media/windows-server.html">https://emby.media/windows-server.html</A> although a couple others were good options as well.

I bought Emby app for iPad and I use a download extension for Chrome to get 720p resolution videos.  The content is static, but my drive is big and I feel that this way I can approve some of the content.  It certainly costs my time go get content to Emby server.

I could try installing Emby on Raspberry PI 3, but I decided against it.  It was more work, the download workflow had a more complicated step of moving video from PC to RPI.  I was not sure if RPI could be responsive with its decoding.

The setup works.

On Fri, Jul 7, 2017 at 7:15 AM, Eliezer Croitoru &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>&gt; wrote:
Hey Amos, Sergei,

I managed to write an ICAP service which works with a ruby\golang StorID helper and a redis DB that can help with the caching of YouTube videos.
However despite to the fact that I am able to tag urls with StoreID  squid is still not responding with a cache HIT but fetching from the original sources.

There are couple obstacles in this field and this specific solution I wrote is designed for PC and not IPAD or Andorid Based devices.
There is an issue with Android 6+(7..) and IOS 10 based devices which for some reason do not cope with SSL traffic interception.
If you do have a tiny server and you can run a tiny http service with nginx\apache I would recommend you to download the videos and serve them locally using chrome or another browser which works.
I found it more useful then intercepting and caching also, kids are usually enjoying from a more &quot;stable&quot; stash of movies\videos then others.
They can watch the same video over and over and it would be fun for them.
The teenagers are having issue's watching the same video over and over so..
I can recommend on a nice wordpress theme which can fit a &quot;VOD&quot; site and a video downloader which you can use to download specific videos or playlists.

This solution would be something like &quot;netflix on a stick&quot; and is very effective with a raspberry pi 3 with some external USB HDD.

I would be happy to get any response to any of the ideas.

Thanks In Advance,
Eliezer

 * If you are willing to devote some time to debug the issue with the current helpers let me know and bump me if you think I missed an email and didn't responded(it happens when you have kids...)
----
Eliezer Croitoru
Linux System Administrator
Mobile: tel:%2B972-5-28704261
Email: mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>


-----Original Message-----
From: squid-users [mailto:mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On Behalf Of Amos Jeffries
Sent: Friday, July 7, 2017 11:32
To: mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] youtube videos and squid

On 07/07/17 15:40, Sergei G wrote:
&gt;<i> Hi guys,
</I>&gt;<i>
</I>&gt;<i> I have a very specific scenario in mind to use squid for.
</I>&gt;<i>
</I>&gt;<i> I have 2 kids (2.5 and 4 years old) that are watching iPads and really
</I>&gt;<i> using available Comcast bandwidth.  It does not help that they sometimes
</I>&gt;<i> just leave those iPads running.
</I>&gt;<i>
</I>&gt;<i> They tend to re-watch youtube videos (click on the same icon that they
</I>&gt;<i> liked before).  And that makes me think that squid could help me with
</I>&gt;<i> caching off youtube content.  Am I correct?
</I>
Possibly. Google have actively been making it more difficult every year
for quite a while.

These days it requires intercepting the YouTube HTTPS connections. That
is only possible if the clients are not using Chrome or other Google
apps to fetch the videos - otherwise you run up against the cert pinning
wall.

After that you need some extra helper software to track the YT video
fetching process and decipher what the actual video URL is from the mess
of session traffic. That is being kept a bit of a secret these days,
since every time G find out how it is being done they change the process
to make it more obtuse and harder to do :-(

Eliezer has been trying to get a helper for that going most recently.
There are also some other products I forget the name of right now
(videobooster maybe), but should be easy to find that cache YouTube content.


&gt;<i>
</I>&gt;<i> If not then I have no reason to bother you anymore :)
</I>&gt;<i>
</I>&gt;<i> If squid could help me, then could you point me to a an example
</I>&gt;<i> configuration that would work?
</I>&gt;<i>
</I>&gt;<i> As far as hardware I have 2 options:
</I>&gt;<i>
</I>&gt;<i> 1. I can install squid on a Raspberry PI 3, if package is readily
</I>&gt;<i> available.  that's my preferred solution.
</I>&gt;<i> 2. I have an old server hardware with more power than RPI 3, but I don't
</I>&gt;<i> like to run it, because it is noisy.  It has FreeBSD 10 installed and I
</I>&gt;<i> can upgrade it to latest FreeBSD (11?) and isntall squid application
</I>&gt;<i> that way.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Does squid run on RPI3?  FreeBSD?
</I>
Yes to both, and at the small scale you need the RPi3 should be able to
cope with it.

Amos
_______________________________________________
squid-users mailing list
mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>

_______________________________________________
squid-users mailing list
mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015944.html">[squid-users] youtube videos and squid
</A></li>
	<LI>Next message (by thread): <A HREF="015842.html">[squid-users] /var/run/squid gone on every reboot?!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15947">[ date ]</a>
              <a href="thread.html#15947">[ thread ]</a>
              <a href="subject.html#15947">[ subject ]</a>
              <a href="author.html#15947">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
