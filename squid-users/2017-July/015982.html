<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid Version 3.5.20
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Version%203.5.20&In-Reply-To=%3C167d01d300b6%240caa6da0%2425ff48e0%24%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015997.html">
   <LINK REL="Next"  HREF="015978.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid Version 3.5.20</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Version%203.5.20&In-Reply-To=%3C167d01d300b6%240caa6da0%2425ff48e0%24%40ngtech.co.il%3E"
       TITLE="[squid-users] Squid Version 3.5.20">eliezer at ngtech.co.il
       </A><BR>
    <I>Wed Jul 19 17:40:01 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015997.html">[squid-users] Squid Version 3.5.20
</A></li>
        <LI>Next message (by thread): <A HREF="015978.html">[squid-users] Squid Version 3.5.20 Any Ideas
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15982">[ date ]</a>
              <a href="thread.html#15982">[ thread ]</a>
              <a href="subject.html#15982">[ subject ]</a>
              <a href="author.html#15982">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey,

I have not published the RHEL packages on the squid-cache wiki at:
<A HREF="http://wiki.squid-cache.org/KnowledgeBase/RedHat">http://wiki.squid-cache.org/KnowledgeBase/RedHat</A>

And will try to add the details there in the next days.
You can try to use the RHEL which is similar to the centos and on the same
server which is mentioned in this page:
<A HREF="http://wiki.squid-cache.org/KnowledgeBase/CentOS#Squid-3.5">http://wiki.squid-cache.org/KnowledgeBase/CentOS#Squid-3.5</A>

But replace the centos with rhel ie:
baseurl=<A HREF="http://www1.ngtech.co.il/repo/rhel/$releasever/$basearch/">http://www1.ngtech.co.il/repo/rhel/$releasever/$basearch/</A>

There is an up-to-date 3.5.26 package which you should try to use in any
case.
I don&#8217;t know why you encounter this issue but it is a good time to know that
there is an up-to-date squid rpm for RHEL 7.

All The Bests,
Eliezer

----
<A HREF="http://ngtech.co.il/lmgtfy/">http://ngtech.co.il/lmgtfy/</A>
Linux System Administrator
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>


From: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On
Behalf Of Cherukuri, Naresh
Sent: Wednesday, July 19, 2017 16:46
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Squid Version 3.5.20

Hi All,

I installed Squid version 3.5.20 on RHEL 7 and generated self-signed CA
certificates, &#160;My users are complaining about certificate errors. When I
looked at cache.log I see so many error messages like below. Below is my
squid.conf file. Any ideas how to address below errors.

Squid.conf:

max_filedesc 4096
visible_hostname pctysqd2prod
logfile_rotate 10

access_log stdio:/var/log/squid/access.log squid

acl localnet src 172.16.0.0/16
acl backoffice_users src 10.136.0.0/13
acl hcity_backoffice_users src 10.142.0.0/15
acl register_users src 10.128.0.0/13
acl hcity_register_users src 10.134.0.0/15
acl partycity url_regex partycity

acl SSL_ports port 443
acl Safe_ports port 80&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # http
#acl Safe_ports port 21&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # ftp
acl Safe_ports port 443&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # https
#acl Safe_ports port 70&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # gopher
#acl Safe_ports port 210&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # wais
#acl Safe_ports port 1025-65535 # unregistered ports
#acl Safe_ports port 280&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # http-mgmt
#acl Safe_ports port 488&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # gss-http
#acl Safe_ports port 591&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # filemaker
#acl Safe_ports port 777&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # multiling http
acl CONNECT method CONNECT
#acl allowed_sites {dst|dstdomain|dstdom_regex|url_regex) &quot;/path/to/file&quot;
acl backoffice_allowed_sites url_regex &quot;/etc/squid/backoffice_allowed_sites&quot;
acl hcity_backoffice_allowed_sites url_regex
&quot;/etc/squid/backoffice_allowed_sites&quot;
acl backoffice_blocked_sites url_regex &quot;/etc/squid/backoffice_blocklist&quot;
acl hcity_backoffice_blocked_sites url_regex
&quot;/etc/squid/backoffice_blocklist&quot;
acl register_allowed_sites url_regex &quot;/etc/squid/register_allowed_sites&quot;
acl hcity_register_allowed_sites url_regex
&quot;/etc/squid/hcity_register_allowed_sites&quot;

http_access allow localnet register_allowed_sites
http_access deny backoffice_users backoffice_blocked_sites
http_access deny hcity_backoffice_users backoffice_blocked_sites
http_access allow backoffice_users backoffice_allowed_sites
http_access allow hcity_backoffice_users backoffice_allowed_sites
http_access allow register_users register_allowed_sites
http_access allow hcity_register_users hcity_register_allowed_sites
no_cache deny partycity
http_access deny all

#http_access allow manager localhost
#http_access deny manager

# Deny requests to certain unsafe ports
http_access deny !Safe_ports

# Deny CONNECT to other than secure SSL ports
#http_access deny CONNECT !SSL_ports
http_access&#160; allow CONNECT SSL_ports
# We strongly recommend the following be uncommented to protect innocent
# web applications running on the proxy server who think the only
# one who can access services on &quot;localhost&quot; is a local user
http_access deny to_localhost


# Example rule allowing access from your local networks.
# Adapt localnet in the ACL section to list your (internal) IP networks
# from where browsing should be allowed
#http_access allow localnet
http_access allow localhost

# And finally deny all other access to this proxy
http_access deny all

# Squid normally listens to port 3128
http_port 3128 ssl-bump \
key=/etc/squid/pctysquid2sslcerts/pctysquid2prod.pkey \
cert=/etc/squid/pctysquid2sslcerts/pctysquid2prod.crt \
generate-host-certificates=on dynamic_cert_mem_cache_size=4MB

acl step1 at_step SslBump1
ssl_bump peek step1
ssl_bump bump all

sslproxy_cert_error allow all
always_direct allow all
sslproxy_flags DONT_VERIFY_PEER

sslcrtd_program /usr/lib64/squid/ssl_crtd -s /var/lib/ssl_db -M 4MB
sslcrtd_children 8 startup=1 idle=1

# Uncomment and adjust the following to add a disk cache directory.
#cache_dir ufs /cache/squid 10000 16 256

# Leave coredumps in the first cache dir
#rdescoredump_dir /var/spool/squid
coredump_dir /var/log/squid/squid

# Add any of your own refresh_pattern entries above these.
refresh_pattern ^ftp:&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 1440&#160;&#160;&#160; 20%&#160;&#160;&#160;&#160; 10080
refresh_pattern ^gopher:&#160;&#160;&#160;&#160;&#160;&#160;&#160; 1440&#160;&#160;&#160; 0%&#160;&#160;&#160;&#160;&#160; 1440
refresh_pattern -i (/cgi-bin/|\?) 0&#160;&#160;&#160;&#160; 0%&#160;&#160;&#160;&#160;&#160; 0
refresh_pattern .&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 20%&#160;&#160;&#160;&#160; 4320

#url_rewrite_access allow all
#url_rewrite_program /usr/bin/squidGuard -c /etc/squid/squidguard.conf

Cache.log

2017/07/18 16:05:34 kid1| Error negotiating SSL connection on FD 689:
error:14094416:SSL routines:SSL3_READ_BYTES:sslv3 alert certificate unknown
(1/0)
2017/07/18 16:05:34 kid1| Error negotiating SSL connection on FD 1114:
error:14094416:SSL routines:SSL3_READ_BYTES:sslv3 alert certificate unknown
(1/0)
2017/07/18 16:05:37 kid1| Error negotiating SSL connection on FD 146:
error:14094416:SSL routines:SSL3_READ_BYTES:sslv3 alert certificate unknown
(1/0)
2017/07/18 16:05:41 kid1| Error negotiating SSL connection on FD 252:
error:14094416:SSL routines:SSL3_READ_BYTES:sslv3 alert certificate unknown
(1/0)
2017/07/18 16:05:41 kid1| Error negotiating SSL connection on FD 36:
error:14094416:SSL routines:SSL3_READ_BYTES:sslv3 alert certificate unknown
(1/0)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015997.html">[squid-users] Squid Version 3.5.20
</A></li>
	<LI>Next message (by thread): <A HREF="015978.html">[squid-users] Squid Version 3.5.20 Any Ideas
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15982">[ date ]</a>
              <a href="thread.html#15982">[ thread ]</a>
              <a href="subject.html#15982">[ subject ]</a>
              <a href="author.html#15982">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
