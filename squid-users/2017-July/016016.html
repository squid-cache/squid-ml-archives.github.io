<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid Version 3.5.20 Any Ideas
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Version%203.5.20%20Any%20Ideas&In-Reply-To=%3C89638057A560FB458C01C197F81C7F5D13F579F1%40ROCKETS.amscan.corp%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015995.html">
   <LINK REL="Next"  HREF="016031.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid Version 3.5.20 Any Ideas</H1>
    <B>Cherukuri, Naresh</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Version%203.5.20%20Any%20Ideas&In-Reply-To=%3C89638057A560FB458C01C197F81C7F5D13F579F1%40ROCKETS.amscan.corp%3E"
       TITLE="[squid-users] Squid Version 3.5.20 Any Ideas">ncherukuri at partycity.com
       </A><BR>
    <I>Thu Jul 20 19:02:57 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015995.html">[squid-users] Squid Version 3.5.20 Any Ideas
</A></li>
        <LI>Next message (by thread): <A HREF="016031.html">[squid-users] How to tell HTTPS traffic is using cache from access.log in 3.5.x when using ssl_bump
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16016">[ date ]</a>
              <a href="thread.html#16016">[ thread ]</a>
              <a href="subject.html#16016">[ subject ]</a>
              <a href="author.html#16016">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thank you Yuri! Appreciate your help.

From: Yuri [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">yvoinov at gmail.com</A>]
Sent: Wednesday, July 19, 2017 5:15 PM
To: Cherukuri, Naresh; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Squid Version 3.5.20 Any Ideas




20.07.2017 3:09, Cherukuri, Naresh &#1087;&#1080;&#1096;&#1077;&#1090;:
Yuri,

I am new to squid I learned it through searching google. My question is I generated self-signed SSL certificates and install certificates on IE all clients. I didn&#8217;t install proxy public key. Can you tell me where  I have to put proxy public key on clients. Appreciate you help!
Ah. Based on my experience,

you require to take *public* proxy key (not private, your use keypair to setup ssl-bump configuration; do not mistake it) and install it at least into two places on client's PC:

1. Into system trusted CA storage (uses by IE/Chrome/some IM etc.)
2. Into Firefox own storage (if applicable).
3. Sometimes it is also required to setup proxy's CA public key into old JRE existing on clients. But AFAIK modern JRE uses system CA's storage and no more required this step.

Actually, this should be enough.


Thanks,
Naresh

From: Yuri [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">yvoinov at gmail.com</A>]
Sent: Wednesday, July 19, 2017 5:06 PM
To: Cherukuri, Naresh; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
Subject: Re: [squid-users] Squid Version 3.5.20 Any Ideas


Related OpenSSL public CA bundle - in theory it should be installed together with OpenSSL.

20.07.2017 2:49, Cherukuri, Naresh &#1087;&#1080;&#1096;&#1077;&#1090;:
Thanks Yuri for quick turnover!

We inly installed root certificate on all clients. We didn&#8217;t install proxy CA&#8217;s public key on clients. So you suggestion fix that we need to install both certificate and proxy ca&#8217;s public key on clients.

Thanks,
Naresh

From: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On Behalf Of Yuri
Sent: Wednesday, July 19, 2017 2:25 PM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
Subject: Re: [squid-users] Squid Version 3.5.20 Any Ideas


One out of two. Either the Squid does not see the OpenSSL/system root CAs bundle, or the proxy CA's public key is not installed in the clients. It's all.

19.07.2017 23:30, Walter H. &#1087;&#1080;&#1096;&#1077;&#1090;:
Hello,

this seems not to be the problem, as the error messages are in cache.log, which is not a browser problem ...

the question: are the SSL bumped sites in intranet, which use a self signed CA cert itself, which squid doesn't know?

On 19.07.2017 17:36, Yuri wrote:

<A HREF="http://wiki.squid-cache.org/ConfigExamples/Intercept/SslBumpExplicit">http://wiki.squid-cache.org/ConfigExamples/Intercept/SslBumpExplicit</A>

<A HREF="http://i.imgur.com/A153C7A.png">http://i.imgur.com/A153C7A.png</A>

19.07.2017 21:34, Cherukuri, Naresh &#1087;&#1080;&#1096;&#1077;&#1090;:

Hi All,



I installed Squid version 3.5.20 on RHEL 7 and generated self-signed CA certificates,  My users are complaining about certificate errors. When I looked at cache.log I see so many error messages like below. Below is my squid.conf file. Any ideas how to address below errors.






Cache.log



2017/07/18 16:05:34 kid1| Error negotiating SSL connection on FD 689: error:14094416:SSL routines:SSL3_READ_BYTES:sslv3 alert certificate unknown (1/0)

2017/07/18 16:05:34 kid1| Error negotiating SSL connection on FD 1114: error:14094416:SSL routines:SSL3_READ_BYTES:sslv3 alert certificate unknown (1/0)

2017/07/18 16:05:37 kid1| Error negotiating SSL connection on FD 146: error:14094416:SSL routines:SSL3_READ_BYTES:sslv3 alert certificate unknown (1/0)

2017/07/18 16:05:41 kid1| Error negotiating SSL connection on FD 252: error:14094416:SSL routines:SSL3_READ_BYTES:sslv3 alert certificate unknown (1/0)

2017/07/18 16:05:41 kid1| Error negotiating SSL connection on FD 36: error:14094416:SSL routines:SSL3_READ_BYTES:sslv3 alert certificate unknown (1/0)







_______________________________________________

squid-users mailing list

<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;

<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>



-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20170720/c61d0463/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20170720/c61d0463/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015995.html">[squid-users] Squid Version 3.5.20 Any Ideas
</A></li>
	<LI>Next message (by thread): <A HREF="016031.html">[squid-users] How to tell HTTPS traffic is using cache from access.log in 3.5.x when using ssl_bump
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16016">[ date ]</a>
              <a href="thread.html#16016">[ thread ]</a>
              <a href="subject.html#16016">[ subject ]</a>
              <a href="author.html#16016">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
