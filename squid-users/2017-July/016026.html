<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid as gateway
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20as%20gateway&In-Reply-To=%3Cbfae5f8f-6ffb-f0b9-ee15-5d136b0ea3b7%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016025.html">
   <LINK REL="Next"  HREF="016027.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid as gateway</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20as%20gateway&In-Reply-To=%3Cbfae5f8f-6ffb-f0b9-ee15-5d136b0ea3b7%40treenet.co.nz%3E"
       TITLE="[squid-users] Squid as gateway">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Jul 21 16:01:17 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016025.html">[squid-users] Squid as gateway
</A></li>
        <LI>Next message (by thread): <A HREF="016027.html">[squid-users] Squid as gateway
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16026">[ date ]</a>
              <a href="thread.html#16026">[ thread ]</a>
              <a href="subject.html#16026">[ subject ]</a>
              <a href="author.html#16026">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 22/07/17 02:18, erdosain9 wrote:
&gt;<i> Hi, and thanks
</I>&gt;<i> 
</I>&gt;<i> The ROUTERWIFI is a TpLink TL-WR940N.... i dont see in this router any Nat
</I>&gt;<i> option :-(
</I>&gt;<i> 
</I>&gt;<i> This is the router table of the SquidBox
</I>&gt;<i> 
</I>&gt;<i> Kernel IP routing table
</I>&gt;<i> Destination     Gateway         Genmask         Flags Metric Ref    Use
</I>&gt;<i> Iface
</I>&gt;<i> 0.0.0.0         10.1.158.1      0.0.0.0         UG    0      0        0
</I>&gt;<i> ens192
</I>&gt;<i> 10.1.158.0      0.0.0.0         255.255.255.0   U     0      0        0
</I>&gt;<i> ens192
</I>&gt;<i> 169.254.0.0     0.0.0.0         255.255.0.0     U     1002   0        0
</I>&gt;<i> ens160
</I>&gt;<i> 169.254.0.0     0.0.0.0         255.255.0.0     U     1003   0        0
</I>&gt;<i> ens192
</I>&gt;<i> 192.168.0.0     192.168.1.40    255.255.255.0   UG    0      0        0
</I>&gt;<i> ens160
</I>&gt;<i> 192.168.1.0     0.0.0.0         255.255.255.0   U     0      0        0
</I>&gt;<i> ens160
</I>&gt;<i> 192.168.2.0     192.168.1.1     255.255.255.0   UG    0      0        0
</I>&gt;<i> ens160
</I>&gt;<i> 192.168.6.0     192.168.1.1     255.255.255.0   UG    0      0        0
</I>&gt;<i> ens160
</I>
That seems okay. Assuming that 192.168.1.1 is reachable through 
192.168.1.40 - but they should be irrelevant for the 192.168.0.0/24 
clients even if broken.

&gt;<i> 
</I>&gt;<i> If i enable ipv4 forwarding in SquidBox, the clients of the ROUTERWIFI can
</I>&gt;<i> access internet, so i think the router table it's ok.... the clients can go
</I>&gt;<i> to internet but just because ipv4 forwarding is enable (the squid service is
</I>&gt;<i> not getting anything, i dont see nothing in the access.log...) if i disable
</I>&gt;<i> ipv4 forwarding the clients dont go anyway.
</I>
What setting exactly are you changing for this &quot;ipv4 forwarding&quot; 
enable/disable?

Clients should be fully able to access and use the Internet / WAN 
connectivity _through_ the machine called SQUID in your network when the 
NAT rules from the Squid wiki config example are omitted.

One thing we have not mentioned AFAIK, is that the FIREWALL machine 
needs to have 192.168.0.0/16 gw 192.168.1.20 as its LAN gateway setting 
to pass the Internet response traffic back through SQUID machine.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016025.html">[squid-users] Squid as gateway
</A></li>
	<LI>Next message (by thread): <A HREF="016027.html">[squid-users] Squid as gateway
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16026">[ date ]</a>
              <a href="thread.html#16026">[ thread ]</a>
              <a href="subject.html#16026">[ subject ]</a>
              <a href="author.html#16026">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
