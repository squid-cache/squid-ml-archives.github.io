<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] source spoofing without tproxy?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20source%20spoofing%20without%20tproxy%3F&In-Reply-To=%3CCAHKjJqgCTjrGb6YR6Jj7Zo-VgjXFkDeq36uFvVwTFe%3DEQRKJ-w%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015609.html">
   <LINK REL="Next"  HREF="015605.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] source spoofing without tproxy?</H1>
    <B>David Kewley</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20source%20spoofing%20without%20tproxy%3F&In-Reply-To=%3CCAHKjJqgCTjrGb6YR6Jj7Zo-VgjXFkDeq36uFvVwTFe%3DEQRKJ-w%40mail.gmail.com%3E"
       TITLE="[squid-users] source spoofing without tproxy?">dkewley at uci.edu
       </A><BR>
    <I>Tue Jun 13 01:48:01 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015609.html">[squid-users] client--&gt;iptables--&gt;squid-proxy-&gt;another-proxy
</A></li>
        <LI>Next message (by thread): <A HREF="015605.html">[squid-users] source spoofing without tproxy?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15601">[ date ]</a>
              <a href="thread.html#15601">[ thread ]</a>
              <a href="subject.html#15601">[ subject ]</a>
              <a href="author.html#15601">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I want my clients to explicitly address squid as a proxy (not use tproxy),
but have squid spoof the source addresses in the forwarded connection, so
that further hops know the original source address from the IPv4 headers.

I could find no indication that anyone else has done this, and when I tried
various things, I could not get it working.

Is this possible today? If not, is it worth considering as a future
feature? Or am I overlooking a reason that this cannot work even in theory?

I got the nearly-equivalent functionality working for reverse proxying
using nginx, but so far I've found no way to do it with forward proxying.
Nginx doesn't do https forward proxying (no handling of CONNECT).

If squid can't do what I'm looking for today, I would welcome pointers to
other possible approaches.

Thanks,
David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20170612/bedabc4e/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20170612/bedabc4e/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015609.html">[squid-users] client--&gt;iptables--&gt;squid-proxy-&gt;another-proxy
</A></li>
	<LI>Next message (by thread): <A HREF="015605.html">[squid-users] source spoofing without tproxy?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15601">[ date ]</a>
              <a href="thread.html#15601">[ thread ]</a>
              <a href="subject.html#15601">[ subject ]</a>
              <a href="author.html#15601">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
