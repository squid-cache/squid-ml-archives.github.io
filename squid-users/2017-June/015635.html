<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] source spoofing without tproxy?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20source%20spoofing%20without%20tproxy%3F&In-Reply-To=%3C002e01d2e512%240b3c29f0%2421b47dd0%24%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015633.html">
   <LINK REL="Next"  HREF="015636.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] source spoofing without tproxy?</H1>
    <B>Eliezer  Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20source%20spoofing%20without%20tproxy%3F&In-Reply-To=%3C002e01d2e512%240b3c29f0%2421b47dd0%24%40ngtech.co.il%3E"
       TITLE="[squid-users] source spoofing without tproxy?">eliezer at ngtech.co.il
       </A><BR>
    <I>Wed Jun 14 13:28:00 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015633.html">[squid-users] source spoofing without tproxy?
</A></li>
        <LI>Next message (by thread): <A HREF="015636.html">[squid-users] source spoofing without tproxy?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15635">[ date ]</a>
              <a href="thread.html#15635">[ thread ]</a>
              <a href="subject.html#15635">[ subject ]</a>
              <a href="author.html#15635">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Rephrase the &quot;cheap nationally&quot; into &quot;cheat inernationally&quot;.

----
Eliezer Croitoru
Linux System Administrator
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>


-----Original Message-----
From: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On Behalf Of Eliezer Croitoru
Sent: Wednesday, June 14, 2017 11:09 AM
To: 'David Kewley' &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">dkewley at uci.edu</A>&gt;; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] source spoofing without tproxy?

Hey,

This is a library I wrote that uses tproxy:
<A HREF="https://github.com/elico/go-linux-tproxy">https://github.com/elico/go-linux-tproxy</A>

It&#8217;s doable using some enthusiasm but technically you cannot spoof just any IP since you need to be able to receive back this traffic.
You cannot really &quot;cheap nationally&quot; the BGP protocol but only for specific small areas which are all under your &quot;domain&quot; and management.

All The Bests,
Eliezer

----
<A HREF="http://ngtech.co.il/lmgtfy/">http://ngtech.co.il/lmgtfy/</A>
Linux System Administrator
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>


From: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On Behalf Of David Kewley
Sent: Tuesday, June 13, 2017 4:48 AM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: [squid-users] source spoofing without tproxy?

I want my clients to explicitly address squid as a proxy (not use tproxy), but have squid spoof the source addresses in the forwarded connection, so that further hops know the original source address from the IPv4 headers.

I could find no indication that anyone else has done this, and when I tried various things, I could not get it working.

Is this possible today? If not, is it worth considering as a future feature? Or am I overlooking a reason that this cannot work even in theory?

I got the nearly-equivalent functionality working for reverse proxying using nginx, but so far I've found no way to do it with forward proxying. Nginx doesn't do https forward proxying (no handling of CONNECT).

If squid can't do what I'm looking for today, I would welcome pointers to other possible approaches.

Thanks,
David

_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015633.html">[squid-users] source spoofing without tproxy?
</A></li>
	<LI>Next message (by thread): <A HREF="015636.html">[squid-users] source spoofing without tproxy?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15635">[ date ]</a>
              <a href="thread.html#15635">[ thread ]</a>
              <a href="subject.html#15635">[ subject ]</a>
              <a href="author.html#15635">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
