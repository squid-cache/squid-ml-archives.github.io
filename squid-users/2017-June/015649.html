<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] RV: squid
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20RV%3A%20squid&In-Reply-To=%3C022b01d2e5cb%24e76b5ae0%24b64210a0%24%40accelya.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015648.html">
   <LINK REL="Next"  HREF="015651.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] RV: squid</H1>
    <B>javier perez</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20RV%3A%20squid&In-Reply-To=%3C022b01d2e5cb%24e76b5ae0%24b64210a0%24%40accelya.com%3E"
       TITLE="[squid-users] RV: squid">javier.perez at accelya.com
       </A><BR>
    <I>Thu Jun 15 11:38:27 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015648.html">[squid-users] RV: squid
</A></li>
        <LI>Next message (by thread): <A HREF="015651.html">[squid-users] RV: squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15649">[ date ]</a>
              <a href="thread.html#15649">[ thread ]</a>
              <a href="subject.html#15649">[ subject ]</a>
              <a href="author.html#15649">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;&gt;<i> I installed squid(3.5.20) on CentOS 7 minimal to perform as an ftp-proxy.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> My configuration file looks like this:
</I>
&gt;<i>...snip...
</I>snip?

&gt;&gt;<i> acl SSL_ports port 443 21
</I>
&gt;<i>Er, what?
</I>
&gt;<i>Why are you specifying port 21 as SSL?
</I>
I saw many guides that ask for it e.g. 
<A HREF="https://unix.stackexchange.com/questions/15484/connecting-to-ftp-sites-via-squid">https://unix.stackexchange.com/questions/15484/connecting-to-ftp-sites-via-squid</A>

I understand thet its in order to apply acls to those ports invoking 
&quot;SSL_ports&quot;.

&gt;&gt;<i> ftp_passive off
</I>
&gt;<i>...snip...
</I>snip?
&gt;&gt;<i> The thing is that the parameter &quot;ftp_passive off&quot; seems not to be 
</I>&gt;&gt;<i> working.
</I>
&gt;&gt;<i> The connection works fine with the remote hosts, the login works, but
</I>&gt;&gt;<i> I have to enter &quot;passive&quot; every single time to swap the mode to 
</I>&gt;&gt;<i> non-passive.
</I>
&gt;<i>Surely the option merely tells Squid whether to allow active or passive FTP 
</I>&gt;<i>connections - it doesn't tell the client application what to ask for.
</I>
&gt;<i>&quot;ftp_passive off&quot; should mean that you can't do passive FTP through the 
</I>&gt;<i>Squid server, but it won't stop the client application from trying.
</I>
&gt;<i>You need to tell the client system/s always to use active FTP (which will 
</I>&gt;<i>go through Squid) - Squid can't do that for you - it will simply allow or 
</I>&gt;<i>block whatever requests come its way.
</I>
The thing is that my destination hosts are only listening on port 21 
(active) and my source hosts have the passive mode disabled...

Here you have an example of some other weird stuff:

With a Windows host (passive mode disabled) I do an ftp through CMD to my 
proxy, then I enter <A HREF="https://lists.squid-cache.org/listinfo/squid-users">user at host</A>(this host accepts active and passive mode), I 
enter the password, Access granted. But when I try dir/ls the host 
disconnects me.
But if I remove &quot; ftp_passive off&quot; it works!! Non-sense to me...

Thank you Anthony for your quick answer.

Regards



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015648.html">[squid-users] RV: squid
</A></li>
	<LI>Next message (by thread): <A HREF="015651.html">[squid-users] RV: squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15649">[ date ]</a>
              <a href="thread.html#15649">[ thread ]</a>
              <a href="subject.html#15649">[ subject ]</a>
              <a href="author.html#15649">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
