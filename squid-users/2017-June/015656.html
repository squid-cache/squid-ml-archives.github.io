<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] RV: squid
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20RV%3A%20squid&In-Reply-To=%3C001b01d2e5f0%241543ead0%243fcbc070%24%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015674.html">
   <LINK REL="Next"  HREF="015661.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] RV: squid</H1>
    <B>Eliezer  Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20RV%3A%20squid&In-Reply-To=%3C001b01d2e5f0%241543ead0%243fcbc070%24%40ngtech.co.il%3E"
       TITLE="[squid-users] RV: squid">eliezer at ngtech.co.il
       </A><BR>
    <I>Thu Jun 15 15:57:25 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015674.html">[squid-users] RV: squid
</A></li>
        <LI>Next message (by thread): <A HREF="015661.html">[squid-users] RV: squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15656">[ date ]</a>
              <a href="thread.html#15656">[ thread ]</a>
              <a href="subject.html#15656">[ subject ]</a>
              <a href="author.html#15656">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey,

Can you re-define your scenario?
Squid in it's basic form is merely a http proxy which you can use to fetch
ftp requests.
I do not know exactly what you expect but when you use squid as a FTP proxy
it would convert the ftp connection into http.
If you are using a specific ftp client it might be different and then you
would need the port 21 on the Safe_Ports list.
But you cannot force a server to use an active or passive connection since
the ftp service will be defined only for active or for both active and
passive connections.
This is not in the hand of squid...
If you have a specific ftp address which we can use to test it would help a
lot.

Eliezer

----
<A HREF="http://ngtech.co.il/lmgtfy/">http://ngtech.co.il/lmgtfy/</A>
Linux System Administrator
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>


From: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On
Behalf Of javier perez
Sent: Thursday, June 15, 2017 1:53 PM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: [squid-users] RV: squid

Good morning squid users,

I&#8217;m facing a weird situation in my Company&#8230; let me explain:

I installed squid(3.5.20) on CentOS 7 minimal to perform as an ftp-proxy. 
My configuration file looks like this:

/etc/squid/squid.conf
############################################################################
##

acl SSL_ports port 443 21
ftp_port 21
ftp_passive off

############################################################################
##

acl Safe_ports port 80&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # http
acl Safe_ports port 443&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # https
acl Safe_ports port 70&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # gopher
acl Safe_ports port 21
acl Safe_ports port 210&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # wais
acl Safe_ports port 1025-65535&#160; # unregistered ports
acl Safe_ports port 280&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # http-mgmt
acl Safe_ports port 488&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # gss-http
acl Safe_ports port 591&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # filemaker
acl Safe_ports port 777&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;# multiling http
acl CONNECT method CONNECT

############################################################################
##

acl FTP proto FTP
always_direct allow FTP

############################################################################
##

http_access allow CONNECT SSL_ports
http_access allow CONNECT Safe_ports
http_access allow SSL_ports
http_access allow Safe_ports
http_access allow all
http_access allow FTP

############################################################################
##

http_port 3128

refresh_pattern ^ftp:&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 1440&#160;&#160;&#160; 20%&#160;&#160;&#160;&#160; 10080
refresh_pattern ^gopher:&#160;&#160;&#160;&#160;&#160;&#160;&#160; 1440&#160;&#160;&#160; 0%&#160;&#160;&#160;&#160;&#160; 1440
refresh_pattern -i (/cgi-bin/|\?) 0&#160;&#160;&#160;&#160; 0%&#160;&#160;&#160;&#160; &#160;0
refresh_pattern .&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160; 20%&#160;&#160;&#160;&#160; 4320

############################################################################
##

The thing is that the parameter &#8220;ftp_passive off&#8221; seems not to be working&#8230; 
Due to security measures we have to use non-passive mode to be able to
transfer anything.

The connection works fine with the remote hosts, the login works, but I have
to enter &#8220;passive&#8221; every single time to swap the mode to non-passive. 
I don&#8217;t know whether the &#8220;ftp_passive&#8221; is not working or I need to do
something else.

After doing a deep research I cannot find much information related with this
kind of problems, so I decided to get in touch with you. Please help!!

Thanks in advance.
Regards




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015674.html">[squid-users] RV: squid
</A></li>
	<LI>Next message (by thread): <A HREF="015661.html">[squid-users] RV: squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15656">[ date ]</a>
              <a href="thread.html#15656">[ thread ]</a>
              <a href="subject.html#15656">[ subject ]</a>
              <a href="author.html#15656">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
