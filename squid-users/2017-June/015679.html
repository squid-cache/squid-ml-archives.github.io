<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Introducing Charcoal - Centralised URL Filter for squid
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Introducing%20Charcoal%20-%20Centralised%20URL%20Filter%20for%0A%20squid&In-Reply-To=%3C810529fc-b922-fa1f-4ee4-37107b99be6e%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015678.html">
   <LINK REL="Next"  HREF="015686.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Introducing Charcoal - Centralised URL Filter for squid</H1>
    <B>Nishant Sharma</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Introducing%20Charcoal%20-%20Centralised%20URL%20Filter%20for%0A%20squid&In-Reply-To=%3C810529fc-b922-fa1f-4ee4-37107b99be6e%40gmail.com%3E"
       TITLE="[squid-users] Introducing Charcoal - Centralised URL Filter for squid">codemarauder at gmail.com
       </A><BR>
    <I>Sat Jun 17 09:59:21 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015678.html">[squid-users] Introducing Charcoal - Centralised URL Filter for squid
</A></li>
        <LI>Next message (by thread): <A HREF="015686.html">[squid-users] Introducing Charcoal - Centralised URL Filter for squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15679">[ date ]</a>
              <a href="thread.html#15679">[ thread ]</a>
              <a href="subject.html#15679">[ subject ]</a>
              <a href="author.html#15679">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Eliezer,

On Saturday 17 June 2017 12:37 PM, Eliezer  Croitoru wrote:
&gt;<i> I wanted to be sure I am not day-dreaming but from the code it seems that every request is given a single TCP connection.
</I>&gt;<i> Am I right?
</I>&gt;<i> If so there is much to improve.
</I>&gt;<i> You can use the same tcp connection for more then a single request and also have a reconnect option for the very far from realiy case of a closed connection.
</I>
Your observation is correct.

We have updated the helper with the latest commit 
<A HREF="https://github.com/Hopbox/charcoal-helper/commit/2cd3a0f985c2083046267eee82f6c7df16113113">https://github.com/Hopbox/charcoal-helper/commit/2cd3a0f985c2083046267eee82f6c7df16113113</A>

It tries to address the issues you mentioned, but is not yet ideal. 
Since, it is invoked by squid, number of children started depends on 
squid. Total no. of sockets in states ESTABLISHED &amp; CLOSE_WAIT are equal 
to the number of helper children started by squid.

May be, the helper architecture could be changed such that a parent 
process creates a pool of network connections that children use. Thus, 
limiting the number of sockets being used at any moment. And squid 
controls the number of those parent processes.

Regards,
Nishant

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015678.html">[squid-users] Introducing Charcoal - Centralised URL Filter for squid
</A></li>
	<LI>Next message (by thread): <A HREF="015686.html">[squid-users] Introducing Charcoal - Centralised URL Filter for squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15679">[ date ]</a>
              <a href="thread.html#15679">[ thread ]</a>
              <a href="subject.html#15679">[ subject ]</a>
              <a href="author.html#15679">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
