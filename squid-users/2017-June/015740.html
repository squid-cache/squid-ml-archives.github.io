<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid caching bad objects
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20caching%20bad%20objects&In-Reply-To=%3CCANRy4AV5n4m8PC7fKQJfaZboKxyUG7o7ASuJABRhVfFFfmzjhg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015738.html">
   <LINK REL="Next"  HREF="015741.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid caching bad objects</H1>
    <B>Razor Cross</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20caching%20bad%20objects&In-Reply-To=%3CCANRy4AV5n4m8PC7fKQJfaZboKxyUG7o7ASuJABRhVfFFfmzjhg%40mail.gmail.com%3E"
       TITLE="[squid-users] Squid caching bad objects">bloggerrazorcross at gmail.com
       </A><BR>
    <I>Mon Jun 26 16:11:49 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015738.html">[squid-users] Squid 3.5.26 for Microsoft Windows 64-bit is available
</A></li>
        <LI>Next message (by thread): <A HREF="015741.html">[squid-users] Squid caching bad objects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15740">[ date ]</a>
              <a href="thread.html#15740">[ thread ]</a>
              <a href="subject.html#15740">[ subject ]</a>
              <a href="author.html#15740">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, Amos,
We are using squid 3.5. for our server. Recently we have noticed that squid
is caching incomplete objects in case of chunked response.

We have gone through the squid code. It looks likes squid is caching
incomplete response in case of EOF from the server even though it does not
receive the last empty chunk.


 if (eof) // already reached EOF
        return COMPLETE_NONPERSISTENT_MSG;


As per RFC,

 &quot;The chunked encoding is ended by any chunk whose size is
   zero, followed by the trailer, which is terminated by an empty line.&quot;



Is this expected? Because of this problem, our server ends up serving bad
objects to the user.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20170626/ee3f106c/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20170626/ee3f106c/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015738.html">[squid-users] Squid 3.5.26 for Microsoft Windows 64-bit is available
</A></li>
	<LI>Next message (by thread): <A HREF="015741.html">[squid-users] Squid caching bad objects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15740">[ date ]</a>
              <a href="thread.html#15740">[ thread ]</a>
              <a href="subject.html#15740">[ subject ]</a>
              <a href="author.html#15740">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
