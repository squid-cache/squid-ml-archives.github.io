<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid Version 3.5.20
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Version%203.5.20&In-Reply-To=%3C89638057A560FB458C01C197F81C7F5D13EE4192%40ROCKETS.amscan.corp%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015752.html">
   <LINK REL="Next"  HREF="015762.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid Version 3.5.20</H1>
    <B>Cherukuri, Naresh</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Version%203.5.20&In-Reply-To=%3C89638057A560FB458C01C197F81C7F5D13EE4192%40ROCKETS.amscan.corp%3E"
       TITLE="[squid-users] Squid Version 3.5.20">ncherukuri at partycity.com
       </A><BR>
    <I>Tue Jun 27 15:46:05 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015752.html">[squid-users] Squid Version 3.5.20
</A></li>
        <LI>Next message (by thread): <A HREF="015762.html">[squid-users] Squid Version 3.5.20
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15754">[ date ]</a>
              <a href="thread.html#15754">[ thread ]</a>
              <a href="subject.html#15754">[ subject ]</a>
              <a href="author.html#15754">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Thank You for quick turnover, as per your request I changed squid config like below, still I going to www.google.com&lt;<A HREF="http://www.google.com">http://www.google.com</A>&gt;
acl CONNECT method CONNECT
acl sslconnect dstdomain -i <A HREF="https://www.google.com">https://www.google.com</A>
acl GoogleRecaptcha url_regex ^<A HREF="https://www.google.com/recaptcha/$">https://www.google.com/recaptcha/$</A>
http_access allow CONNECT sslconnect
http_access allow backoffice_users GoogleRecaptcha


Thanks&amp; Regards,
Naresh
From: Flashdown [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">flashdown at data-core.org</A>]
Sent: Tuesday, June 27, 2017 11:37 AM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>; Cherukuri, Naresh; Eliezer Croitoru
Subject: Re: [squid-users] Squid Version 3.5.20

Well, I know that issue very good and google is the issue since they should put their captcha on a own subdomain. Then we could effectivley allow only the access to the captcha.

Until that there is no good way to achive this. But there is a non reliable way of blocking google.com&lt;<A HREF="http://google.com">http://google.com</A>&gt;

First allow the Connect method for google.com&lt;<A HREF="http://google.com">http://google.com</A>&gt;
Acl CONNECT method CONNECT
acl sslconnect dstdomain -i www.google.com&lt;<A HREF="http://www.google.com">http://www.google.com</A>&gt;
http_access allow CONNECT sslconnect
Then use an url regex and allow google.com/recaptcha&lt;<A HREF="http://google.com/recaptcha">http://google.com/recaptcha</A>&gt;

This way sometimes www.google.com&lt;<A HREF="http://www.google.com">http://www.google.com</A>&gt; is blocked, sometimes not. But access to recaptcha will always work.

Why we can't block it reliable? Well when browser/client wants to connect to https website then the firsr thing the browser trie is open a ssl tunnel to the FQDN
As soon as the tunnel is up it will request the ressource. May it helps if you add a url regex deny between allowing the connect method and allowing the url www.google.com/recaptcha&lt;<A HREF="http://www.google.com/recaptcha">http://www.google.com/recaptcha</A>&gt;

Written on my mobile..

Br,
Flashdown


Am 27. Juni 2017 17:07:19 MESZ schrieb &quot;Cherukuri, Naresh&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ncherukuri at partycity.com</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ncherukuri at partycity.com</A>&gt;&gt;:

Hi Eliezer,

We successfully blocked gmail, google images, google drive and rest all google related. Now we allowing www.google.com&lt;<A HREF="http://www.google.com">http://www.google.com</A>&gt; and www. google/Recaptcha. We still need to block www.google.com&lt;<A HREF="http://www.google.com">http://www.google.com</A>&gt; and just allow www.google/recaptcha&lt;<A HREF="http://www.google/recaptcha">http://www.google/recaptcha</A>&gt;. Is there a way to do that?

Appreciate your quick turnover!

Thanks&amp;Regards,
Naresh


-----Original Message-----
From: Eliezer Croitoru [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>]
Sent: Tuesday, June 27, 2017 10:16 AM
To: Cherukuri, Naresh; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
Subject: RE: [squid-users] Squid Version 3.5.20

Hey,

I can try to help you but I do not have enough logs for it.
Also it's not so simple.
Basically you will need to block gmail and google drive themselves in one rule that will not include other google services.

All The Bests,
Eliezer

----
<A HREF="http://ngtech.co.il/lmgtfy/">http://ngtech.co.il/lmgtfy/</A>
Linux System Administrator
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>&gt;


From: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On Behalf Of Cherukuri, Naresh
Sent: Friday, June 23, 2017 23:34
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
Subject: [squid-users] Squid Version 3.5.20

Hello All,

I installed Squid version 3.5.20 on RHEL 7 and generated selfsigned CA certificates, can you shed some light on how to &quot;Configure regular expression of the Google ReCaptcha URL with ACL&quot;.

My requirement :

This requirement is to allow Google's ReCaptcha URL (HTTPS) so associates can successfully use ADP which now utilizes Google's ReCaptcha which is called via an HTTPS URL, without allowing users to access other Google-related services such as Gmail or Google Drive.

Any ideas much appreciated!

Thanks,
Naresh

________________________________

squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20170627/67d25b8e/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20170627/67d25b8e/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015752.html">[squid-users] Squid Version 3.5.20
</A></li>
	<LI>Next message (by thread): <A HREF="015762.html">[squid-users] Squid Version 3.5.20
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15754">[ date ]</a>
              <a href="thread.html#15754">[ thread ]</a>
              <a href="subject.html#15754">[ subject ]</a>
              <a href="author.html#15754">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
