<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] anonymous squid setup on digital ocean centos 6 but my IP still detected
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20anonymous%20squid%20setup%20on%20digital%20ocean%20centos%206%0A%20but%20my%20IP%20still%20detected&In-Reply-To=%3CCAFtPEJbipG66wKafd8EHu1JYjfhNb%3DFUcbp-kW9n8mW589xFWw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014600.html">
   <LINK REL="Next"  HREF="014615.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] anonymous squid setup on digital ocean centos 6 but my IP still detected</H1>
    <B>Alex Muir</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20anonymous%20squid%20setup%20on%20digital%20ocean%20centos%206%0A%20but%20my%20IP%20still%20detected&In-Reply-To=%3CCAFtPEJbipG66wKafd8EHu1JYjfhNb%3DFUcbp-kW9n8mW589xFWw%40mail.gmail.com%3E"
       TITLE="[squid-users] anonymous squid setup on digital ocean centos 6 but my IP still detected">alex at tech.jahtoe.com
       </A><BR>
    <I>Mon Mar  6 18:13:04 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="014600.html">[squid-users] anonymous squid setup on digital ocean centos 6	but	my IP still detected
</A></li>
        <LI>Next message (by thread): <A HREF="014615.html">[squid-users] anonymous squid setup on digital ocean centos 6 but my IP still detected
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14601">[ date ]</a>
              <a href="thread.html#14601">[ thread ]</a>
              <a href="subject.html#14601">[ subject ]</a>
              <a href="author.html#14601">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Eliezer
Thanks for your good advice..

Regards
Alex
tech.jahtoe.com
bafila.jahtoe.com

On 6 Mar 2017 17:30, &quot;Eliezer Croitoru&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>&gt; wrote:

&gt;<i> Hey Alex,
</I>&gt;<i>
</I>&gt;<i> First goes first: If you spin any version of CentOS these days I recommend
</I>&gt;<i> to use CentOS 7 and not 6.
</I>&gt;<i> This is also based on many use cases which proved(to me and many others)
</I>&gt;<i> that the kernel and many other components improved performance.
</I>&gt;<i> If you already spinoff a server to mask your IP I believe that the more
</I>&gt;<i> &quot;perfected&quot; way to do so is using a VPN.
</I>&gt;<i> Specifically OpenVPN and a CentOS 7 with pritunl on it as the management
</I>&gt;<i> web interface for OpenVPN.
</I>&gt;<i> The instructions on how to install it are at:
</I>&gt;<i> <A HREF="https://docs.pritunl.com/docs/installation">https://docs.pritunl.com/docs/installation</A>
</I>&gt;<i>
</I>&gt;<i> The client can be found at:
</I>&gt;<i> <A HREF="https://openvpn.net/index.php/open-source/downloads.html">https://openvpn.net/index.php/open-source/downloads.html</A>
</I>&gt;<i>
</I>&gt;<i> And it would mask your IP address for all of your connections from the
</I>&gt;<i> machine you are working on.
</I>&gt;<i> Notice that some that the reason your IP is not masked is since there are
</I>&gt;<i> scripts which can run on html5 and can bypass the proxy settings.
</I>&gt;<i>
</I>&gt;<i> Let me know if you need more help.
</I>&gt;<i>
</I>&gt;<i> Eliezer
</I>&gt;<i>
</I>&gt;<i> ----
</I>&gt;<i> <A HREF="http://ngtech.co.il/lmgtfy/">http://ngtech.co.il/lmgtfy/</A>
</I>&gt;<i> Linux System Administrator
</I>&gt;<i> Mobile: +972-5-28704261
</I>&gt;<i> Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> From: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On
</I>&gt;<i> Behalf Of Alex Muir
</I>&gt;<i> Sent: Monday, March 6, 2017 1:31 PM
</I>&gt;<i> To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> Subject: [squid-users] anonymous squid setup on digital ocean centos 6 but
</I>&gt;<i> my IP still detected
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Greetings,
</I>&gt;<i>
</I>&gt;<i> I have implemented the following <A HREF="https://www.digitalocean.com/">https://www.digitalocean.com/</A>
</I>&gt;<i> community/tutorials/how-to-install-squid-proxy-on-centos-6 from digital
</I>&gt;<i> ocean which sets up squid with settings to not have my IP address forwarded.
</I>&gt;<i> I'm finding however that my local IP is still detected when I google what
</I>&gt;<i> my local ip address is.  I've configured firefox browser to use the proxy
</I>&gt;<i> and have confirmed that it is using the proxy. Additionally https goes
</I>&gt;<i> through the proxy however http is blocked. I'd like to ensure that http is
</I>&gt;<i> not blocked.
</I>&gt;<i> What changes do I need to make to get this working as desired?
</I>&gt;<i> Here is the squid config setup:
</I>&gt;<i> [<A HREF="https://lists.squid-cache.org/listinfo/squid-users">root at CENTOSMASTER</A> ~]# cat /etc/squid/squid.conf
</I>&gt;<i> #
</I>&gt;<i> # Recommended minimum configuration:
</I>&gt;<i> #
</I>&gt;<i> acl manager proto cache_object
</I>&gt;<i> acl localhost src <A HREF="http://127.0.0.1/32">http://127.0.0.1/32</A> ::1
</I>&gt;<i> acl to_localhost dst <A HREF="http://127.0.0.0/8">http://127.0.0.0/8</A> <A HREF="http://0.0.0.0/32">http://0.0.0.0/32</A> ::1
</I>&gt;<i>
</I>&gt;<i> # Example rule allowing access from your local networks.
</I>&gt;<i> # Adapt to list your (internal) IP networks from where browsing
</I>&gt;<i> # should be allowed
</I>&gt;<i> acl localnet src <A HREF="http://10.0.0.0/8">http://10.0.0.0/8</A> # RFC1918 possible internal network
</I>&gt;<i> acl localnet src <A HREF="http://172.16.0.0/12">http://172.16.0.0/12</A>  # RFC1918 possible internal network
</I>&gt;<i> acl localnet src <A HREF="http://192.168.0.0/16">http://192.168.0.0/16</A> # RFC1918 possible internal network
</I>&gt;<i> acl localnet src fc00::/7       # RFC 4193 local private network range
</I>&gt;<i> acl localnet src fe80::/10      # RFC 4291 link-local (directly plugged)
</I>&gt;<i> machines
</I>&gt;<i>
</I>&gt;<i> acl SSL_ports port 443
</I>&gt;<i> acl Safe_ports port 80      # http
</I>&gt;<i> acl Safe_ports port 21      # ftp
</I>&gt;<i> acl Safe_ports port 443     # https
</I>&gt;<i> acl Safe_ports port 70      # gopher
</I>&gt;<i> acl Safe_ports port 210     # wais
</I>&gt;<i> acl Safe_ports port 1025-65535  # unregistered ports
</I>&gt;<i> acl Safe_ports port 280     # http-mgmt
</I>&gt;<i> acl Safe_ports port 488     # gss-http
</I>&gt;<i> acl Safe_ports port 591     # filemaker
</I>&gt;<i> acl Safe_ports port 777     # multiling http
</I>&gt;<i> acl CONNECT method CONNECT
</I>&gt;<i>
</I>&gt;<i> #
</I>&gt;<i> # Recommended minimum Access Permission configuration:
</I>&gt;<i> #
</I>&gt;<i> # Only allow cachemgr access from localhost
</I>&gt;<i> http_access allow manager localhost
</I>&gt;<i> http_access deny manager
</I>&gt;<i>
</I>&gt;<i> # Deny requests to certain unsafe ports
</I>&gt;<i> http_access deny !Safe_ports
</I>&gt;<i>
</I>&gt;<i> # Deny CONNECT to other than secure SSL ports
</I>&gt;<i> #http_access deny CONNECT !SSL_ports
</I>&gt;<i>
</I>&gt;<i> # We strongly recommend the following be uncommented to protect innocent
</I>&gt;<i> # web applications running on the proxy server who think the only
</I>&gt;<i> # one who can access services on &quot;localhost&quot; is a local user
</I>&gt;<i> #http_access deny to_localhost
</I>&gt;<i>
</I>&gt;<i> #
</I>&gt;<i> # INSERT YOUR OWN RULE(S) HERE TO ALLOW ACCESS FROM YOUR CLIENTS
</I>&gt;<i> #
</I>&gt;<i>
</I>&gt;<i> # Example rule allowing access from your local networks.
</I>&gt;<i> # Adapt localnet in the ACL section to list your (internal) IP networks
</I>&gt;<i> # from where browsing should be allowed
</I>&gt;<i> http_access allow localnet
</I>&gt;<i> http_access allow localhost
</I>&gt;<i>
</I>&gt;<i> # And finally deny all other access to this proxy
</I>&gt;<i> http_access deny all
</I>&gt;<i>
</I>&gt;<i> # Squid normally listens to port 3128
</I>&gt;<i> http_port 3128
</I>&gt;<i>
</I>&gt;<i> # Uncomment and adjust the following to add a disk cache directory.
</I>&gt;<i> #cache_dir ufs /var/spool/squid 100 16 256
</I>&gt;<i>
</I>&gt;<i> # Leave coredumps in the first cache dir
</I>&gt;<i> coredump_dir /var/spool/squid
</I>&gt;<i>
</I>&gt;<i> # Add any of your own refresh_pattern entries above these.
</I>&gt;<i> refresh_pattern ^ftp:       1440    20% 10080
</I>&gt;<i> refresh_pattern ^gopher:    1440    0%  1440
</I>&gt;<i> refresh_pattern -i (/cgi-bin/|\?) 0 0%  0
</I>&gt;<i> refresh_pattern .       0   20%
</I>&gt;<i>
</I>&gt;<i> via off
</I>&gt;<i> forwarded_for off
</I>&gt;<i>
</I>&gt;<i> request_header_access Allow allow all
</I>&gt;<i> request_header_access Authorization allow all
</I>&gt;<i> request_header_access WWW-Authenticate allow all
</I>&gt;<i> request_header_access Proxy-Authorization allow all
</I>&gt;<i> request_header_access Proxy-Authenticate allow all
</I>&gt;<i> request_header_access Cache-Control allow all
</I>&gt;<i> request_header_access Content-Encoding allow all
</I>&gt;<i> request_header_access Content-Length allow all
</I>&gt;<i> request_header_access Content-Type allow all
</I>&gt;<i> request_header_access Date allow all
</I>&gt;<i> request_header_access Expires allow all
</I>&gt;<i> request_header_access Host allow all
</I>&gt;<i> request_header_access If-Modified-Since allow all
</I>&gt;<i> request_header_access Last-Modified allow all
</I>&gt;<i> request_header_access Location allow all
</I>&gt;<i> request_header_access Pragma allow all
</I>&gt;<i> request_header_access Accept allow all
</I>&gt;<i> request_header_access Accept-Charset allow all
</I>&gt;<i> request_header_access Accept-Encoding allow all
</I>&gt;<i> request_header_access Accept-Language allow all
</I>&gt;<i> request_header_access Content-Language allow all
</I>&gt;<i> request_header_access Mime-Version allow all
</I>&gt;<i> request_header_access Retry-After allow all
</I>&gt;<i> request_header_access Title allow all
</I>&gt;<i> request_header_access Connection allow all
</I>&gt;<i> request_header_access Proxy-Connection allow all
</I>&gt;<i> request_header_access User-Agent allow all
</I>&gt;<i> request_header_access Cookie allow all
</I>&gt;<i> request_header_access All deny all
</I>&gt;<i>
</I>&gt;<i> I've posted the question on stackoverflow
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://serverfault.com/questions/836385/anonymous-">http://serverfault.com/questions/836385/anonymous-</A>
</I>&gt;<i> squid-setup-on-digital-ocean-centos-6-but-my-ip-still-detected
</I>&gt;<i>
</I>&gt;<i> Regards
</I>&gt;<i> Alex Muir
</I>&gt;<i> Chief Data Engineer/Architect
</I>&gt;<i> Jahtoe Technology
</I>&gt;<i> <A HREF="http://tech.jahtoe.com">http://tech.jahtoe.com</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20170306/70050700/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20170306/70050700/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="014600.html">[squid-users] anonymous squid setup on digital ocean centos 6	but	my IP still detected
</A></li>
	<LI>Next message (by thread): <A HREF="014615.html">[squid-users] anonymous squid setup on digital ocean centos 6 but my IP still detected
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14601">[ date ]</a>
              <a href="thread.html#14601">[ thread ]</a>
              <a href="subject.html#14601">[ subject ]</a>
              <a href="author.html#14601">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
