<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] anonymous squid setup on digital ocean centos 6 but my IP still detected
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20anonymous%20squid%20setup%20on%20digital%20ocean%20centos%206%0A%20but%20my%20IP%20still%20detected&In-Reply-To=%3Cd6bc7784-6799-f940-7ba0-970d8fb522f3%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014601.html">
   <LINK REL="Next"  HREF="014595.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] anonymous squid setup on digital ocean centos 6 but my IP still detected</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20anonymous%20squid%20setup%20on%20digital%20ocean%20centos%206%0A%20but%20my%20IP%20still%20detected&In-Reply-To=%3Cd6bc7784-6799-f940-7ba0-970d8fb522f3%40treenet.co.nz%3E"
       TITLE="[squid-users] anonymous squid setup on digital ocean centos 6 but my IP still detected">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Mar  9 14:20:21 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="014601.html">[squid-users] anonymous squid setup on digital ocean centos 6 but my IP still detected
</A></li>
        <LI>Next message (by thread): <A HREF="014595.html">[squid-users] squid 3.5.24 Host header forgery detected
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14615">[ date ]</a>
              <a href="thread.html#14615">[ thread ]</a>
              <a href="subject.html#14615">[ subject ]</a>
              <a href="author.html#14615">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 7/03/2017 12:31 a.m., Alex Muir wrote:
&gt;<i> Greetings,
</I>&gt;<i> 
</I>&gt;<i> I have implemented the following tutorial
</I>&gt;<i> &lt;<A HREF="https://www.digitalocean.com/community/tutorials/how-to-install-squid-proxy-on-centos-6">https://www.digitalocean.com/community/tutorials/how-to-install-squid-proxy-on-centos-6</A>&gt;
</I>&gt;<i> from
</I>&gt;<i> digital ocean which sets up squid with settings to not have my IP address
</I>&gt;<i> forwarded.
</I>&gt;<i> 
</I>&gt;<i> I'm finding however that my local IP is still detected when I google what
</I>&gt;<i> my local ip address is.  I've configured firefox browser to use the proxy
</I>&gt;<i> and have confirmed that it is using the proxy. Additionally https goes
</I>&gt;<i> through the proxy however http is blocked. I'd like to ensure that http is
</I>&gt;<i> not blocked.
</I>&gt;<i> 
</I>&gt;<i> What changes do I need to make to get this working as desired?
</I>
Firstly, you need to use an up-to-date version of Squid.

Secondly, configure with:
&quot;
  via off
  forwarded_for transparent
&quot;

Beyond those two lines there is nothing Squid can do to prevent active
scripts from reporting what your browser thinks its IP address is.
Eliezer already referred to html5 things. The browser itself is
betraying you just by running those scripts.

Note that the above config is *all* you need to do. The
request_header_access settings are not relevant. All they do is filter
custom headers the browser may be sending and Squid blindly relaying.
Which brings us to the HTTPS ...

When a browser is configured to use a proxy (like yours), HTTPS goes
through as a request to setup an opaque tunnel end-to-end. In other
words all the encrypted HTTP messages are direct between your browser
and the server.

So, the request_header_access filtering which you are having the proxy
do is useless and not doing a thing to those encrypted messages.
&quot;working&quot; there means the server has complete visibility into the client
browser but cannot see the proxy - except that the 'client IP' the
server sees is that of the proxy. Which is what the above two mentioned
config lines make happen for the HTTP traffic.


Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="014601.html">[squid-users] anonymous squid setup on digital ocean centos 6 but my IP still detected
</A></li>
	<LI>Next message (by thread): <A HREF="014595.html">[squid-users] squid 3.5.24 Host header forgery detected
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14615">[ date ]</a>
              <a href="thread.html#14615">[ thread ]</a>
              <a href="subject.html#14615">[ subject ]</a>
              <a href="author.html#14615">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
