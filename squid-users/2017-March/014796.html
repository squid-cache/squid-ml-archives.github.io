<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid Transparent/intercept Issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Transparent/intercept%20Issues&In-Reply-To=%3C201703221238.38894.Antony.Stone%40squid.open.source.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014795.html">
   <LINK REL="Next"  HREF="014762.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid Transparent/intercept Issues</H1>
    <B>Antony Stone</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Transparent/intercept%20Issues&In-Reply-To=%3C201703221238.38894.Antony.Stone%40squid.open.source.it%3E"
       TITLE="[squid-users] Squid Transparent/intercept Issues">Antony.Stone at squid.open.source.it
       </A><BR>
    <I>Wed Mar 22 11:38:38 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="014795.html">[squid-users] Squid Transparent/intercept Issues
</A></li>
        <LI>Next message (by thread): <A HREF="014762.html">[squid-users] blocking or allowing specific youtube videos
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14796">[ date ]</a>
              <a href="thread.html#14796">[ thread ]</a>
              <a href="subject.html#14796">[ subject ]</a>
              <a href="author.html#14796">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wednesday 22 March 2017 at 11:59:14, christian brendan wrote:

&gt;<i> One more thing,
</I>&gt;<i> Does this implies using two NICs (Network Interface Cards)?
</I>
No, this is not necessary.

&gt;<i> And the squid server has to be in-between clients and the internet?
</I>
That is the simpler way of doing it (in which case you would want two NICs, 
yes).

Basically your choices are:

1. Put the Squid server in the route between clients and the Internet (so, it 
has two NICs, each with an address on different networks), and an IPtables 
REDIRECT rule to send port 80 &amp; 443 traffic to Squid.

2. Put your Squid server (with one NIC) wherever you like, having just a 
single IP address (and able to route to the Internet), and use policy routing 
on your Mikrotik router to send any packets from clients heading for port 80 &amp; 
443 out on the Internet, to the Squid server instead (without doing DNAT and 
changing the destination address).  You still need the REDIRECT rule on the 
Squid server, and you must ensure that when Squid then makes its own request 
out to the Internet, that goes out, and does not get intercepted by the 
Mikrotik and sent back to Squid again :)


Antony.

-- 
Late in 1972 President Richard Nixon announced that the rate of increase of 
inflation was decreasing.   This was the first time a sitting president used a 
third derivative to advance his case for re-election.

 - Hugo Rossi, Notices of the American Mathematical Society

                                                   Please reply to the list;
                                                         please *don't* CC me.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="014795.html">[squid-users] Squid Transparent/intercept Issues
</A></li>
	<LI>Next message (by thread): <A HREF="014762.html">[squid-users] blocking or allowing specific youtube videos
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14796">[ date ]</a>
              <a href="thread.html#14796">[ thread ]</a>
              <a href="subject.html#14796">[ subject ]</a>
              <a href="author.html#14796">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
