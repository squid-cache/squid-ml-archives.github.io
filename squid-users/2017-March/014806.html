<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid stopped working after cache.log and access.log	rotation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20stopped%20working%20after%20cache.log%20and%0A%20access.log%09rotation&In-Reply-To=%3C1548158039.1456.1490196189795.JavaMail.zimbra%40tresgeek.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014805.html">
   <LINK REL="Next"  HREF="014813.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid stopped working after cache.log and access.log	rotation</H1>
    <B>Jason B. Nance</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20stopped%20working%20after%20cache.log%20and%0A%20access.log%09rotation&In-Reply-To=%3C1548158039.1456.1490196189795.JavaMail.zimbra%40tresgeek.net%3E"
       TITLE="[squid-users] Squid stopped working after cache.log and access.log	rotation">jason at tresgeek.net
       </A><BR>
    <I>Wed Mar 22 15:23:09 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="014805.html">[squid-users] Squid stopped working after cache.log and	access.log rotation
</A></li>
        <LI>Next message (by thread): <A HREF="014813.html">[squid-users] Squid stopped working after cache.log and access.log rotation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14806">[ date ]</a>
              <a href="thread.html#14806">[ thread ]</a>
              <a href="subject.html#14806">[ subject ]</a>
              <a href="author.html#14806">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>If you do &quot;lsof /var/log | grep -i delete&quot; does it show squid writing to a deleted access.log / cache.log? 

j 



From: &quot;Chee M Gui&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">cheemeng at function.com</A>&gt; 
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> 
Sent: Wednesday, March 22, 2017 10:17:32 AM 
Subject: [squid-users] Squid stopped working after cache.log and access.log rotation 


Hi All 

We recently installed Squid 3.5.12-1ubuntu7.3 on Ubuntu 16.04.2 LTS. It ran fine at first but stopped working after a while. telnet server 3128 still works, i.e., opens a blank window, but Squid is just not accepting requests. Then we realized that there is no new access.log file. The access.log file stopped rotated at 6:24AM on 3/17/2017. It looks like Squid wasn't able to create a new access.log? We could not find any error message in syslog or the cache.log. We haven't rebooted the server because we want to know what went wrong. It isn't the firewall blocking Squid because Squid was working fine all the while until recently. Also after it stopped working, we disabled the firewall to see if it would work but it still didn't work. 

<A HREF="https://lists.squid-cache.org/listinfo/squid-users">root at paproxy</A>:/var/log/squid# ls -alt 
total 15536 
drwxr-xr-x 2 proxy proxy 4096 Mar 21 06:25 . 
-rw-r----- 1 proxy proxy 63 Mar 21 06:25 cache.log 
drwxrwxr-x 9 root syslog 4096 Mar 21 06:25 .. 
-rw-r----- 1 proxy proxy 63 Mar 20 06:25 cache.log.1 
-rw-r----- 1 proxy proxy 83 Mar 19 06:25 cache.log.2.gz 
-rw-r----- 1 proxy proxy 15759111 Mar 17 06:24 access.log.1 
-rw-r----- 1 proxy proxy 117223 Mar 17 05:52 netdb.state 

Any ideas what went wrong? 

Thank you very much in anticipation. 

Gui 

_______________________________________________ 
squid-users mailing list 
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> 
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20170322/24cdd50f/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20170322/24cdd50f/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="014805.html">[squid-users] Squid stopped working after cache.log and	access.log rotation
</A></li>
	<LI>Next message (by thread): <A HREF="014813.html">[squid-users] Squid stopped working after cache.log and access.log rotation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14806">[ date ]</a>
              <a href="thread.html#14806">[ thread ]</a>
              <a href="subject.html#14806">[ subject ]</a>
              <a href="author.html#14806">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
