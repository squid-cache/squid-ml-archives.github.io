<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] URL list from a URL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20URL%20list%20from%20a%20URL&In-Reply-To=%3C0b7701d2a49d%2430350ed0%24909f2c70%24%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014801.html">
   <LINK REL="Next"  HREF="014819.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] URL list from a URL</H1>
    <B>Eliezer  Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20URL%20list%20from%20a%20URL&In-Reply-To=%3C0b7701d2a49d%2430350ed0%24909f2c70%24%40ngtech.co.il%3E"
       TITLE="[squid-users] URL list from a URL">eliezer at ngtech.co.il
       </A><BR>
    <I>Fri Mar 24 12:50:11 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="014801.html">[squid-users] URL list from a URL
</A></li>
        <LI>Next message (by thread): <A HREF="014819.html">[squid-users] URL list from a URL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14818">[ date ]</a>
              <a href="thread.html#14818">[ thread ]</a>
              <a href="subject.html#14818">[ subject ]</a>
              <a href="author.html#14818">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>My suggestion is to run every minute a curl request into a tmp file and then compare to the existing one, then sort and uniq and replace the existing DB
In the external acl helper script use some kind of version testing by the last date updated.
You can use a simple comparison to do that.
So two scripts:
1 - update by a crontab
2 - external_acl helper

Will update later.

Eliezer

----
Eliezer Croitoru
Linux System Administrator
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>



-----Original Message-----
From: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On Behalf Of Jason B. Nance
Sent: Tuesday, March 21, 2017 5:53 PM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: [squid-users] URL list from a URL

Hello,

I'm using Squid 3.5.20 and wonder if it is possible to define an ACL which retrieves the list of URLs from another URL (similar to pointing to a file).  In this specific use case it is to allow a Foreman server to sync Yum content from the CentOS mirrors.  I tell Foreman to use the following URL:

<A HREF="http://mirrorlist.centos.org/?release=7&amp;arch=x86_64&amp;repo=updates">http://mirrorlist.centos.org/?release=7&amp;arch=x86_64&amp;repo=updates</A>

Which returns a list of URLs, such as:

<A HREF="http://repo1.dal.innoscale.net/centos/7.3.1611/updates/x86_64/">http://repo1.dal.innoscale.net/centos/7.3.1611/updates/x86_64/</A>
<A HREF="http://linux.mirrors.es.net/centos/7.3.1611/updates/x86_64/">http://linux.mirrors.es.net/centos/7.3.1611/updates/x86_64/</A>
<A HREF="http://reflector.westga.edu/repos/CentOS/7.3.1611/updates/x86_64/">http://reflector.westga.edu/repos/CentOS/7.3.1611/updates/x86_64/</A>
<A HREF="http://mirror.jax.hugeserver.com/centos/7.3.1611/updates/x86_64/">http://mirror.jax.hugeserver.com/centos/7.3.1611/updates/x86_64/</A>
<A HREF="http://ftp.linux.ncsu.edu/pub/CentOS/7.3.1611/updates/x86_64/">http://ftp.linux.ncsu.edu/pub/CentOS/7.3.1611/updates/x86_64/</A>
<A HREF="http://mirror.nexcess.net/CentOS/7.3.1611/updates/x86_64/">http://mirror.nexcess.net/CentOS/7.3.1611/updates/x86_64/</A>
<A HREF="http://mirror.web-ster.com/centos/7.3.1611/updates/x86_64/">http://mirror.web-ster.com/centos/7.3.1611/updates/x86_64/</A>
<A HREF="http://centos.host-engine.com/7.3.1611/updates/x86_64/">http://centos.host-engine.com/7.3.1611/updates/x86_64/</A>
<A HREF="http://mirror.raystedman.net/centos/7.3.1611/updates/x86_64/">http://mirror.raystedman.net/centos/7.3.1611/updates/x86_64/</A>
<A HREF="http://mirror.linux.duke.edu/pub/centos/7.3.1611/updates/x86_64/">http://mirror.linux.duke.edu/pub/centos/7.3.1611/updates/x86_64/</A>

Foreman then starts a new HTTP connection (not a redirect) to attempt to connect to those in turn until it works.

So I would like to configure Squid to allow the Foreman server access to any of those URLs (the list changes somewhat often).

I started to go down the external_acl_type but am wondering if I'm missing something obvious.

Regards,

j
_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="014801.html">[squid-users] URL list from a URL
</A></li>
	<LI>Next message (by thread): <A HREF="014819.html">[squid-users] URL list from a URL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14818">[ date ]</a>
              <a href="thread.html#14818">[ thread ]</a>
              <a href="subject.html#14818">[ subject ]</a>
              <a href="author.html#14818">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
