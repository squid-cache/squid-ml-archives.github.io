<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] URL sometimes reurns empty response
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20URL%20sometimes%20reurns%20empty%20response&In-Reply-To=%3C20170502131526.2hu2dyt4fgzck6vp%40charite.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015126.html">
   <LINK REL="Next"  HREF="015128.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] URL sometimes reurns empty response</H1>
    <B>Ralf Hildebrandt</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20URL%20sometimes%20reurns%20empty%20response&In-Reply-To=%3C20170502131526.2hu2dyt4fgzck6vp%40charite.de%3E"
       TITLE="[squid-users] URL sometimes reurns empty response">Ralf.Hildebrandt at charite.de
       </A><BR>
    <I>Tue May  2 13:15:26 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015126.html">[squid-users] URL sometimes reurns empty response
</A></li>
        <LI>Next message (by thread): <A HREF="015128.html">[squid-users] URL sometimes reurns empty response
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15127">[ date ]</a>
              <a href="thread.html#15127">[ thread ]</a>
              <a href="subject.html#15127">[ subject ]</a>
              <a href="author.html#15127">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>* Ralf Hildebrandt &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">Ralf.Hildebrandt at charite.de</A>&gt;:

&gt;<i> It seems that squid is returning an incorrect Content-Lenght: header 
</I>&gt;<i> while the revalidation is still fresh/ongoing.
</I>&gt;<i> 
</I>&gt;<i> I haven't yet tried tcpdumping the response to check if the 14 bytes
</I>&gt;<i> do indeed contain the correct string.
</I>
And voila - here we go (Content-Length: 0 but squid sends 14 bytes of excess data: &quot;Microsoft NCSI&quot;)

15:10:31.741436 IP proxy-cvk-1.charite.de.http-alt &gt; vsw-it-nw-10.54228: Flags [P.], seq 1:952, ack 156, win 235, options [nop,nop,TS val 126939588 ecr 1696144349], length 951: HTTP: HTTP/1.1 200 OK
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">E...cR at .</A>?....*...*......V?.....5....U......
....e...HTTP/1.1 200 OK
Cache-Control: max-age=30,must-revalidate
Content-Length: 0
Content-Type: text/plain
Last-Modified: Fri, 04 Mar 2016 06:55:23 GMT
ETag: &quot;0x8D343F9F578A7F9&quot;
Server: Microsoft-IIS/7.5
x-ms-request-id: 6508a999-0001-0016-4fbc-c0483a000000
x-ms-version: 2009-09-19
x-ms-meta-CbModifiedTime: Tue, 01 Mar 2016 21:41:22 GMT
x-ms-lease-status: unlocked
x-ms-blob-type: BlockBlob
X-ECN-P: RD0003FF838204
Access-Control-Expose-Headers: X-MSEdge-Ref
Access-Control-Allow-Origin: *
Timing-Allow-Origin: *
X-CID: 7
X-CCC: US
X-MSEdge-Ref: Ref A: 2C6BD6F103A24795AE6784C3DC22E5F5 Ref B: BER30EDGE0115 Ref C: Tue May  2 06:10:31 2017 PST
X-MSEdge-Ref-OriginShield: Ref A: 5A9FC4FE82DC4E2DB26E51E59C50B50A Ref B: AMS04EDGE0506 Ref C: Sat Apr 29 05:30:12 2017 PST
Date: Tue, 02 May 2017 13:10:31 GMT
Age: 0
X-Cache: HIT from proxy-cvk-1
Via: 1.1 proxy-cvk-1 (squid/5.0.0-20170429-r15127)
Connection: keep-alive

Microsoft NCSI
15:10:31.741454 IP vsw-it-nw-10.54228 &gt; proxy-cvk-1.charite.de.http-alt: Flags [.], ack 952, win 243, options [nop,nop,TS val 1696144352 ecr 126939588], length 0
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">E..4._ at .</A>@..=.*...*.........5V?.G.....O.....
e.......

-- 
Ralf Hildebrandt                   Charite Universit&#228;tsmedizin Berlin
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ralf.hildebrandt at charite.de</A>        Campus Benjamin Franklin
<A HREF="https://www.charite.de">https://www.charite.de</A>             Hindenburgdamm 30, 12203 Berlin
Gesch&#228;ftsbereich IT, Abt. Netzwerk fon: +49-30-450.570.155

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015126.html">[squid-users] URL sometimes reurns empty response
</A></li>
	<LI>Next message (by thread): <A HREF="015128.html">[squid-users] URL sometimes reurns empty response
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15127">[ date ]</a>
              <a href="thread.html#15127">[ thread ]</a>
              <a href="subject.html#15127">[ subject ]</a>
              <a href="author.html#15127">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
