<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] HTTPS support
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20HTTPS%20support&In-Reply-To=%3CCAOsHgtvv7%3DGfqRCTq2aovEfkJfc%2B0q_7VCE_UEobeo_7b391fg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015158.html">
   <LINK REL="Next"  HREF="015160.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] HTTPS support</H1>
    <B>Daniel Greenwald</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20HTTPS%20support&In-Reply-To=%3CCAOsHgtvv7%3DGfqRCTq2aovEfkJfc%2B0q_7VCE_UEobeo_7b391fg%40mail.gmail.com%3E"
       TITLE="[squid-users] HTTPS support">dig at digcorp.net
       </A><BR>
    <I>Wed May  3 20:22:27 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015158.html">[squid-users] HTTPS support
</A></li>
        <LI>Next message (by thread): <A HREF="015160.html">[squid-users] HTTPS support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15159">[ date ]</a>
              <a href="thread.html#15159">[ thread ]</a>
              <a href="subject.html#15159">[ subject ]</a>
              <a href="author.html#15159">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Seems to me you are overthinking this. What you're up against is blocked
outbound ports. Simply run openvpn at your home over one of the allowed
outbound ports eg 80 443 or possibly 3128/8080 according to your
environment and call it a day. You won't need proxy authentication or
haproxy etc..

On Wed, May 3, 2017 at 3:35 PM, Craddock, Tommy &lt;
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">Tommy.Craddock at bicgraphic.com</A>&gt; wrote:

&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Yeah, that guide is for PFsense in particular, but you could run HAProxy
</I>&gt;<i> by itself (say in a VM) and get the same result.  Just fwd those ports from
</I>&gt;<i> your router to the HAProxy box.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks!
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> *From:* squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] *On
</I>&gt;<i> Behalf Of *j m
</I>&gt;<i> *Sent:* Wednesday, May 03, 2017 3:14 PM
</I>&gt;<i>
</I>&gt;<i> *To:* <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> *Subject:* Re: [squid-users] HTTPS support
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Looks interesting, but it looks complex and sounds like I'd need more of a
</I>&gt;<i> router than I have to do it.
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> *From:* &quot;Craddock, Tommy&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">Tommy.Craddock at bicgraphic.com</A>&gt;
</I>&gt;<i> *To:* &quot;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-</A>
</I>&gt;<i> cache.org&gt;
</I>&gt;<i> *Sent:* Wednesday, May 3, 2017 2:04 PM
</I>&gt;<i> *Subject:* Re: [squid-users] HTTPS support
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Is this more in line with what your trying to do:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://loredo.me/post/116633549315/geeking-out-with-">http://loredo.me/post/116633549315/geeking-out-with-</A>
</I>&gt;<i> haproxy-on-pfsense-the-ultimate
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Tommy
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> *From:* squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>
</I>&gt;<i> &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt;] *On Behalf Of *j m
</I>&gt;<i> *Sent:* Wednesday, May 03, 2017 2:44 PM
</I>&gt;<i> *To:* <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> *Subject:* Re: [squid-users] HTTPS support
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> In any case, I'm finding SSH through proxy is undesirable or not
</I>&gt;<i> possible.  I'm thinking shellinabox, which is insecure but run over a
</I>&gt;<i> secure proxy link, is my best bet.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> *From:* Alex Rousskov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt;
</I>&gt;<i> *To:* j m &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">acctforjunk at yahoo.com</A>&gt;; &quot;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&quot; &lt;
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i> *Sent:* Wednesday, May 3, 2017 1:19 PM
</I>&gt;<i> *Subject:* Re: [squid-users] HTTPS support
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 05/03/2017 11:37 AM, j m wrote:
</I>&gt;<i> &gt; the plan was to use SSH through the proxy.
</I>&gt;<i>
</I>&gt;<i> If your SSH clients support SSH through an HTTP proxy, then do not
</I>&gt;<i> authenticate them in Squid. Just do not let them go anywhere but the SSH
</I>&gt;<i> server. It would be like running an exposed-to-the-world SSH server, no
</I>&gt;<i> worse. Squid will still know nothing about SSH. Squid will just tunnel
</I>&gt;<i> opaque bytes from your SSH clients to your SSH server. You will use an
</I>&gt;<i> HTTP (not HTTPS) Squid port for this traffic because your SSH clients
</I>&gt;<i> are unlikely to support HTTPS to the proxy.
</I>&gt;<i>
</I>&gt;<i> Your browsers will still use HTTPS to the proxy (and get authenticated).
</I>&gt;<i> Thus, you will have two different http_ports, one for HTTP
</I>&gt;<i> (unauthenticated SSH clients) and one for HTTPS (authenticated browsers).
</I>&gt;<i>
</I>&gt;<i> If SSH blocking is not based on _protocol_ but on port, then follow
</I>&gt;<i> Antony Stone advice and change the SSH server port instead of
</I>&gt;<i> HTTP-proxying SSH connections.
</I>&gt;<i>
</I>&gt;<i> Alex.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; ------------------------------------------------------------------------
</I>&gt;<i> &gt; *From:* Alex Rousskov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt;
</I>&gt;<i> &gt; *To:* &quot;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&quot;
</I>&gt;<i> &gt; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i> &gt; *Cc:* j m &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">acctforjunk at yahoo.com</A>&gt;
</I>&gt;<i> &gt; *Sent:* Wednesday, May 3, 2017 12:22 PM
</I>&gt;<i> &gt; *Subject:* Re: [squid-users] HTTPS support
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On 05/03/2017 10:57 AM, j m wrote:
</I>&gt;<i> &gt;&gt; I wanted to set up a proxy on my home server for use from remote
</I>&gt;<i> &gt;&gt; locations to use as a web proxy (of course) and also to run SSH over.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The &quot;ssh&quot; part is unrelated to Squid. Secure ssh separately from Squid.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; This means that basic auth is undesirable due to the login being sent
</I>&gt;<i> &gt;&gt; in clear text.  So, someone suggested digest auth, and I was happy.
</I>&gt;<i> &gt;&gt;  But, now I'm finding that PuTTY and WinSCP do not support digest auth.
</I>&gt;<i> &gt;&gt;  And consequently, I haven't found any other SSH clients that support
</I>&gt;<i> &gt;&gt; digest. (sigh)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; These problems will go away if you stop mixing Squid and ssh. Squid is
</I>&gt;<i> &gt; HTTP while PuTTY/WinSCP is SSH. You gain very little by trying to use
</I>&gt;<i> &gt; the same authentication mechanism for both protocols in your use case.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; So, I'm back to plan b, and that is to have a secure proxy connection so
</I>&gt;<i> &gt;&gt; all browser-to-server communication is encrypted.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; That is a good idea if all of your browsers support it. Popular browsers
</I>&gt;<i> &gt; support HTTPS-to-proxy on desktop, but I am not sure about their mobile
</I>&gt;<i> &gt; versions. You may have to jump through some hoops.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; So the question is, does
</I>&gt;<i> &gt;&gt; anyone know if squid 3.5 on Ubuntu 16.04 supports secure connections?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Squid v3.5 supports secure connections to the proxy. See &quot;TLS / SSL
</I>&gt;<i> &gt; Options&quot; for the http_port directive (not the https_port directive!).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; You can install Squid v3.5 on Ubuntu. I do not know whether the official
</I>&gt;<i> &gt; Ubuntu Squid package is built with the required support.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; HTH,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Alex.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ______________________________________________________________________
</I>&gt;<i> This email has been scanned by the Symantec Email Security.cloud service.
</I>&gt;<i> For more information please visit <A HREF="http://www.symanteccloud.com">http://www.symanteccloud.com</A>
</I>&gt;<i> ______________________________________________________________________
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ______________________________________________________________________
</I>&gt;<i> This email has been scanned by the Symantec Email Security.cloud service.
</I>&gt;<i> For more information please visit <A HREF="http://www.symanteccloud.com">http://www.symanteccloud.com</A>
</I>&gt;<i> ______________________________________________________________________
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ______________________________________________________________________
</I>&gt;<i> This email has been scanned by the Symantec Email Security.cloud service.
</I>&gt;<i> For more information please visit <A HREF="http://www.symanteccloud.com">http://www.symanteccloud.com</A>
</I>&gt;<i> ______________________________________________________________________
</I>&gt;<i>
</I>&gt;<i> ______________________________________________________________________
</I>&gt;<i> This email has been scanned by the Symantec Email Security.cloud service.
</I>&gt;<i> For more information please visit <A HREF="http://www.symanteccloud.com">http://www.symanteccloud.com</A>
</I>&gt;<i> ______________________________________________________________________
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20170503/a02cbeea/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20170503/a02cbeea/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015158.html">[squid-users] HTTPS support
</A></li>
	<LI>Next message (by thread): <A HREF="015160.html">[squid-users] HTTPS support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15159">[ date ]</a>
              <a href="thread.html#15159">[ thread ]</a>
              <a href="subject.html#15159">[ subject ]</a>
              <a href="author.html#15159">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
