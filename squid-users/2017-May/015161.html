<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] HTTPS support
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20HTTPS%20support&In-Reply-To=%3C1568223823.2225203.1493849091663%40mail.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015160.html">
   <LINK REL="Next"  HREF="015153.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] HTTPS support</H1>
    <B>j m</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20HTTPS%20support&In-Reply-To=%3C1568223823.2225203.1493849091663%40mail.yahoo.com%3E"
       TITLE="[squid-users] HTTPS support">acctforjunk at yahoo.com
       </A><BR>
    <I>Wed May  3 22:04:51 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015160.html">[squid-users] HTTPS support
</A></li>
        <LI>Next message (by thread): <A HREF="015153.html">[squid-users] Squid as Proxy/Web Filer only
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15161">[ date ]</a>
              <a href="thread.html#15161">[ thread ]</a>
              <a href="subject.html#15161">[ subject ]</a>
              <a href="author.html#15161">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I forgot: I know VPN doesn't work from there, but it's on the standard port, so I could investigate that. &#160;However the issue is then everything else running will want to run over the VPN, e.g. email, IM, various IT services I don't know about.

      From: Daniel Greenwald &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">dig at digcorp.net</A>&gt;
 To: &quot;Craddock, Tommy&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">Tommy.Craddock at bicgraphic.com</A>&gt; 
Cc: &quot;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
 Sent: Wednesday, May 3, 2017 3:23 PM
 Subject: Re: [squid-users] HTTPS support
   
Seems to me you are overthinking this. What you're up against is blocked outbound ports. Simply run openvpn at your home over one of the allowed outbound ports eg 80 443 or possibly 3128/8080 according to your environment and call it a day. You won't need proxy authentication or haproxy etc..

On Wed, May 3, 2017 at 3:35 PM, Craddock, Tommy &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">Tommy.Craddock at bicgraphic.com</A>&gt; wrote:

Hello,&#160;Yeah, that guide is for PFsense in particular, but you could run HAProxy by itself (say in a VM) and get the same result.&#160; Just fwd those ports from your router to the HAProxy box. 
Thanks!&#160;&#160;From: squid-users [mailto:squid-users-bounces@ lists.squid-cache.org]On Behalf Of j m
Sent: Wednesday, May 03, 2017 3:14 PM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.</A> org
Subject: Re: [squid-users] HTTPS support&#160;Looks interesting, but it looks complex and sounds like I'd need more of a router than I have to do it.From: &quot;Craddock, Tommy&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">Tommy.Craddock at bicgraphic.com</A> &gt;
To: &quot;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-</A> cache.org&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-</A> cache.org&gt;
Sent: Wednesday, May 3, 2017 2:04 PM
Subject: Re: [squid-users] HTTPS support&#160;Hello,&#160;Is this more in line with what your trying to do:&#160;<A HREF="http://loredo.me/post/">http://loredo.me/post/</A> 116633549315/geeking-out-with- haproxy-on-pfsense-the- ultimate&#160;Tommy&#160;From: squid-users [mailto:squid-users-bounces@ lists.squid-cache.org]On Behalf Of j m
Sent: Wednesday, May 03, 2017 2:44 PM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.</A> org
Subject: Re: [squid-users] HTTPS support&#160;In any case, I'm finding SSH through proxy is undesirable or not possible.&#160; I'm thinking shellinabox, which is insecure but run over a secure proxy link, is my best bet.&#160;From: Alex Rousskov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.</A> com&gt;
To: j m &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">acctforjunk at yahoo.com</A>&gt;; &quot;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-</A> cache.org&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-</A> cache.org&gt;
Sent: Wednesday, May 3, 2017 1:19 PM
Subject: Re: [squid-users] HTTPS support&#160;On 05/03/2017 11:37 AM, j m wrote:
&gt;<i> the plan was to use SSH through the proxy.
</I>
If your SSH clients support SSH through an HTTP proxy, then do not
authenticate them in Squid. Just do not let them go anywhere but the SSH
server. It would be like running an exposed-to-the-world SSH server, no
worse. Squid will still know nothing about SSH. Squid will just tunnel
opaque bytes from your SSH clients to your SSH server. You will use an
HTTP (not HTTPS) Squid port for this traffic because your SSH clients
are unlikely to support HTTPS to the proxy.

Your browsers will still use HTTPS to the proxy (and get authenticated).
Thus, you will have two different http_ports, one for HTTP
(unauthenticated SSH clients) and one for HTTPS (authenticated browsers).

If SSH blocking is not based on _protocol_ but on port, then follow
Antony Stone advice and change the SSH server port instead of
HTTP-proxying SSH connections.

Alex.



&gt;<i> ------------------------------ ------------------------------ ------------
</I>&gt;<i> *From:* Alex Rousskov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.</A> com&gt;
</I>&gt;<i> *To:* &quot;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-</A> cache.org&quot;
</I>&gt;<i> &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-</A> cache.org&gt;
</I>&gt;<i> *Cc:* j m &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">acctforjunk at yahoo.com</A>&gt;
</I>&gt;<i> *Sent:* Wednesday, May 3, 2017 12:22 PM
</I>&gt;<i> *Subject:* Re: [squid-users] HTTPS support
</I>&gt;<i> 
</I>&gt;<i> On 05/03/2017 10:57 AM, j m wrote:
</I>&gt;&gt;<i> I wanted to set up a proxy on my home server for use from remote
</I>&gt;&gt;<i> locations to use as a web proxy (of course) and also to run SSH over.
</I>&gt;<i> 
</I>&gt;<i> The &quot;ssh&quot; part is unrelated to Squid. Secure ssh separately from Squid.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> This means that basic auth is undesirable due to the login being sent
</I>&gt;&gt;<i> in clear text.&#160; So, someone suggested digest auth, and I was happy.
</I>&gt;&gt;<i>&#160; But, now I'm finding that PuTTY and WinSCP do not support digest auth.
</I>&gt;&gt;<i>&#160; And consequently, I haven't found any other SSH clients that support
</I>&gt;&gt;<i> digest. (sigh)
</I>&gt;<i> 
</I>&gt;<i> These problems will go away if you stop mixing Squid and ssh. Squid is
</I>&gt;<i> HTTP while PuTTY/WinSCP is SSH. You gain very little by trying to use
</I>&gt;<i> the same authentication mechanism for both protocols in your use case.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> So, I'm back to plan b, and that is to have a secure proxy connection so
</I>&gt;&gt;<i> all browser-to-server communication is encrypted.
</I>&gt;<i> 
</I>&gt;<i> That is a good idea if all of your browsers support it. Popular browsers
</I>&gt;<i> support HTTPS-to-proxy on desktop, but I am not sure about their mobile
</I>&gt;<i> versions. You may have to jump through some hoops.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> So the question is, does
</I>&gt;&gt;<i> anyone know if squid 3.5 on Ubuntu 16.04 supports secure connections?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Squid v3.5 supports secure connections to the proxy. See &quot;TLS / SSL
</I>&gt;<i> Options&quot; for the http_port directive (not the https_port directive!).
</I>&gt;<i> 
</I>&gt;<i> You can install Squid v3.5 on Ubuntu. I do not know whether the official
</I>&gt;<i> Ubuntu Squid package is built with the required support.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> HTH,
</I>&gt;<i> 
</I>&gt;<i> Alex.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &#160;
</I>______________________________ ______________________________ __________
This email has been scanned by the Symantec Email Security.cloud service.
For more information please visit <A HREF="http://www.symanteccloud.com">http://www.symanteccloud.com</A>
______________________________ ______________________________ __________
______________________________ ______________________________ __________
This email has been scanned by the Symantec Email Security.cloud service.
For more information please visit <A HREF="http://www.symanteccloud.com">http://www.symanteccloud.com</A>
______________________________ ______________________________ ________________________________________ _________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.</A> org
<A HREF="http://lists.squid-cache.org/">http://lists.squid-cache.org/</A> listinfo/squid-users&#160;
______________________________ ______________________________ __________
This email has been scanned by the Symantec Email Security.cloud service.
For more information please visit <A HREF="http://www.symanteccloud.com">http://www.symanteccloud.com</A>
______________________________ ______________________________ __________
______________________________ ______________________________ __________
This email has been scanned by the Symantec Email Security.cloud service.
For more information please visit <A HREF="http://www.symanteccloud.com">http://www.symanteccloud.com</A>
______________________________ ______________________________ __________

______________________________ _________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.</A> org
<A HREF="http://lists.squid-cache.org/">http://lists.squid-cache.org/</A> listinfo/squid-users



_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


   
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20170503/d4960c59/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20170503/d4960c59/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015160.html">[squid-users] HTTPS support
</A></li>
	<LI>Next message (by thread): <A HREF="015153.html">[squid-users] Squid as Proxy/Web Filer only
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15161">[ date ]</a>
              <a href="thread.html#15161">[ thread ]</a>
              <a href="subject.html#15161">[ subject ]</a>
              <a href="author.html#15161">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
