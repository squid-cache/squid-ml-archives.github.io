<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid dead error with 3.5.23
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20dead%20error%20with%203.5.23&In-Reply-To=%3C5ac04d4b-52a3-c7b7-3a68-8f499869beb0%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015166.html">
   <LINK REL="Next"  HREF="015167.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid dead error with 3.5.23</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20dead%20error%20with%203.5.23&In-Reply-To=%3C5ac04d4b-52a3-c7b7-3a68-8f499869beb0%40measurement-factory.com%3E"
       TITLE="[squid-users] Squid dead error with 3.5.23">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu May  4 14:44:51 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015166.html">[squid-users] Squid dead error with 3.5.23
</A></li>
        <LI>Next message (by thread): <A HREF="015167.html">[squid-users] Can I use squid to reverse proxy https (without	making it a man-in-the-middle)?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15174">[ date ]</a>
              <a href="thread.html#15174">[ thread ]</a>
              <a href="subject.html#15174">[ subject ]</a>
              <a href="author.html#15174">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 05/03/2017 10:21 PM, Nil Nik wrote:

&gt;<i> Using Squid 3.5.23, After some time found squid dead with below errors.
</I>&gt;<i> Even i restart it doesn't start for some time (5-10 minutes).
</I>
If your Squid started OK at some time and then, after working OK for a
while, failed and could not be restarted after that a failure, then your
restarting procedure is broken. There are Squid bugs that affect you,
but if you fix the restarting procedure, you should be able to restart
Squid despite those Squid bugs.

Specifically, make sure that there are no Squid processes running when
you start a new Squid process. Do not rely exclusively on PID file
absence until that becomes safe (we are working on making it safe).

Also, search the mailing list archive for ssl_session_cache.shm. You may
find threads with other relevant advice.


&gt;<i> Apr 28 16:16:18 mysystem (squid-1): Ipc::Mem::Segment::open failed to
</I>&gt;<i> shm_open(/squid-ssl_session_cache.shm): (2) No such file or directory
</I>
This is a sign of OS misconfiguration (if Squid never works OK) or
broken Squid [re]starting procedure (if Squid works OK but cannot be
restarted after a failure).

There are also Squid bugs that may affect you, including:

* Race conditions related to shared memory segments maintenance.
* Using a shared SSL session cache when none is needed.

FWIW, Factory is actively working on fixing the former.


&gt;<i> I was using squid 3.3.9 never observed such kind of issue.
</I>
Older Squids did not use shared SSL session caches (or shared memory
segments at all) and tolerated broken restart scripts better. We are
working on restoring that robustness (to the extent possible).

Alex.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015166.html">[squid-users] Squid dead error with 3.5.23
</A></li>
	<LI>Next message (by thread): <A HREF="015167.html">[squid-users] Can I use squid to reverse proxy https (without	making it a man-in-the-middle)?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15174">[ date ]</a>
              <a href="thread.html#15174">[ thread ]</a>
              <a href="subject.html#15174">[ subject ]</a>
              <a href="author.html#15174">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
