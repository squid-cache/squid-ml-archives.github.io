<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] WARNING: All 20/20 negotiateauthenticator processes are busy.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20WARNING%3A%20All%2020/20%20negotiateauthenticator%0A%20processes%20are%20busy.&In-Reply-To=%3C89df3bbf-300e-dcdd-21b2-079ea847662d%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015224.html">
   <LINK REL="Next"  HREF="015241.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] WARNING: All 20/20 negotiateauthenticator processes are busy.</H1>
    <B>Dijxie</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20WARNING%3A%20All%2020/20%20negotiateauthenticator%0A%20processes%20are%20busy.&In-Reply-To=%3C89df3bbf-300e-dcdd-21b2-079ea847662d%40gmail.com%3E"
       TITLE="[squid-users] WARNING: All 20/20 negotiateauthenticator processes are busy.">dijxie at gmail.com
       </A><BR>
    <I>Thu May 11 20:00:44 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015224.html">[squid-users] WARNING: All 20/20 negotiateauthenticator processes	are busy.
</A></li>
        <LI>Next message (by thread): <A HREF="015241.html">[squid-users] WARNING: All 20/20 negotiateauthenticator	processes are busy.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15228">[ date ]</a>
              <a href="thread.html#15228">[ thread ]</a>
              <a href="subject.html#15228">[ subject ]</a>
              <a href="author.html#15228">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>W dniu 11.05.2017 o 17:27, erdosain9 pisze:
&gt;<i> Hi.
</I>&gt;<i> Im having this problem.
</I>&gt;<i>
</I>&gt;<i> may 11 11:26:23 squid.xxxx.lan squid[32138]: WARNING: All 30/30
</I>&gt;<i> negotiateauthenticator processes are busy.
</I>&gt;<i> may 11 11:26:23 squid.xxxx.lan squid[32138]: WARNING: 30 pending requests
</I>&gt;<i> queued
</I>&gt;<i> may 11 11:26:23 squid.xxxx.lan squid[32138]: WARNING: Consider increasing
</I>&gt;<i> the number of negotiateauthenticator processes in your config file.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> This is my config file
</I>&gt;<i>
</I>&gt;<i> ###Kerberos Auth with ActiveDirectory###
</I>&gt;<i> auth_param negotiate program /lib64/squid/negotiate_kerberos_auth -s
</I>&gt;<i> HTTP/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid.empddh.lan at EMPDDH.LAN</A>
</I>&gt;<i> auth_param negotiate children 30
</I>&gt;<i> auth_param negotiate keep_alive on
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Can somebody explain this for me?
</I>&gt;<i> Of course, i can &quot;increasing the number of negotiateauthenticator&quot;, but i
</I>&gt;<i> want to understand (maybe its a better way)
</I>&gt;<i>
</I>&gt;<i> I see some examples like this
</I>&gt;<i> 	auth_param digest children 20 startup=0 idle=1
</I>&gt;<i>
</I>&gt;<i> What about that? startup? idle? that was a better way? or this not having
</I>&gt;<i> nothing to do?
</I>&gt;<i>
</I>&gt;<i> Thanks to all!
</I>&gt;<i> (i dont speak english)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context: <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/WARNING-All-20-20-negotiateauthenticator-processes-are-busy-tp4682362.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/WARNING-All-20-20-negotiateauthenticator-processes-are-busy-tp4682362.html</A>
</I>&gt;<i> Sent from the Squid - Users mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> Also, you may try set keep_alive to off - this option sometimes tends to hang negotiate helper.
</I>
Hi.
Here is documentation: <A HREF="http://www.squid-cache.org/Doc/config/auth_param/">http://www.squid-cache.org/Doc/config/auth_param/</A>
Startup is the number auth helpers launched when squid is starting. Idle 
is the nuber of processes that squid will keep alive even if there is no 
cache users. You may increase children calculating available RAM, but 
leave startup and idle values low. Squid will launch helpers when 
needed, and next will gracefully close them if not used until &quot;idle&quot; 
value reached; that 'recycle' process is good for helpers.  Just make 
sure that your available RAM is enough for all negotiate helpers squid 
may launch (children number), that considers system daemons, memory 
cache etc.

Kerberos and negotiate authenticators are not capable of doing 
concurrent authentications, as well as ntlm authenticator (at least in 
squid-2.5-ntlmssp mode); one worker can serve one request at the time. 
So, that warning is saing that your cache server has more users - or 
rather users are making more concurrent connections at the same time 
than auth helpers can handle. Or, there is something wrong with one or 
more helpers; use cachemgr.cgi or squid-client to verify.
<A HREF="http://wiki.squid-cache.org/Features/CacheManager">http://wiki.squid-cache.org/Features/CacheManager</A>
<A HREF="http://wiki.squid-cache.org/SquidClientTool">http://wiki.squid-cache.org/SquidClientTool</A> - squidclient mgr:menu will 
give you available comands, grep output by &quot;auth&quot;, AFAIR it's 
mgr:negotiate_authenticator
If the number of connections awaiting authentication is greater than 
children number, the queue begins. The queue is something unwanted; 
makes users wait for page to load. Also, at the end, squid will restart 
if queue situation trurns to be chronic.
Also, you may try set keep_alive to off - this option sometimes tends to 
hang negotiate helper.

Could you satisfy my curiousity by telling me how many users are there 
in your environment?



-- 
Greetings, Dijx


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015224.html">[squid-users] WARNING: All 20/20 negotiateauthenticator processes	are busy.
</A></li>
	<LI>Next message (by thread): <A HREF="015241.html">[squid-users] WARNING: All 20/20 negotiateauthenticator	processes are busy.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15228">[ date ]</a>
              <a href="thread.html#15228">[ thread ]</a>
              <a href="subject.html#15228">[ subject ]</a>
              <a href="author.html#15228">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
