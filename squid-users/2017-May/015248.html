<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Best practices for beefing up security for squid with ssl-bump
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Best%20practices%20for%20beefing%20up%20security%20for%20squid%0A%20with%20ssl-bump&In-Reply-To=%3C8cb6b527-9348-d7c9-ecab-e2e47072a20c%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015247.html">
   <LINK REL="Next"  HREF="015279.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Best practices for beefing up security for squid with ssl-bump</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Best%20practices%20for%20beefing%20up%20security%20for%20squid%0A%20with%20ssl-bump&In-Reply-To=%3C8cb6b527-9348-d7c9-ecab-e2e47072a20c%40treenet.co.nz%3E"
       TITLE="[squid-users] Best practices for beefing up security for squid with ssl-bump">squid3 at treenet.co.nz
       </A><BR>
    <I>Sat May 13 12:36:08 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015247.html">[squid-users] Best practices for beefing up security for squid with	ssl-bump
</A></li>
        <LI>Next message (by thread): <A HREF="015279.html">[squid-users] Best practices for beefing up security for squid with ssl-bump
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15248">[ date ]</a>
              <a href="thread.html#15248">[ thread ]</a>
              <a href="subject.html#15248">[ subject ]</a>
              <a href="author.html#15248">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 13/05/17 14:33, Masha Lifshin wrote:
&gt;<i> Dear Squid Users list,
</I>&gt;<i>
</I>&gt;<i> I have a Squid 4 configured as explicit proxy with ssl-bump 
</I>&gt;<i> interception.  I am working on making it as secure as possible, given 
</I>&gt;<i> the vulnerability risks with doing ssl inspection 
</I>&gt;<i> (<A HREF="https://insights.sei.cmu.edu/cert/2015/03/the-risks-of-ssl-inspection.html">https://insights.sei.cmu.edu/cert/2015/03/the-risks-of-ssl-inspection.html</A>).
</I>&gt;<i>
</I>&gt;<i> I am implementing the hardening suggestions at 
</I>&gt;<i> <A HREF="http://wiki.squid-cache.org/ConfigExamples/Intercept/SslBumpExplicit">http://wiki.squid-cache.org/ConfigExamples/Intercept/SslBumpExplicit</A>
</I>&gt;<i>
</I>&gt;<i> One other feature I have found is the SSL Server Certificate 
</I>&gt;<i> Validator.  As far as I understand one can write a helper that 
</I>&gt;<i> performs additional certificate validation checks that squid doesn't 
</I>&gt;<i> perform out of the box?
</I>
Yes. However, do not expect to use it as an alternative to what Squid 
already validates. Disabling validation (eg the DONT_VERIFY_* flags) 
includes disabling use of the helper as well.

&gt;<i>   Does anyone know of any widely agreed upon open source helpers, or 
</I>&gt;<i> is this something where people are rolling their own?
</I>
AFAIK this is something a very few people are implementing on their own. 
Squid validates the whole cert chain using the normal OpenSSL library 
mechanisms regardless of this helper, so it is most useful for unusual 
types of checks (eg DANE).

&gt;<i>
</I>&gt;<i> Are there other configuration options that can help?  I am curious 
</I>&gt;<i> what else others in the community are doing along these lines, and if 
</I>&gt;<i> there are recommended best practices in the squid community?  I 
</I>&gt;<i> appreciate your insights.
</I>
The features are still under constant development, so best practices are 
almost as volatile as the code. The basics I'm recommending for now are:

0) don't bump. treat it as a last resort.

1) use cert mimic to pass problems on to the client.

2) avoid client-first and equivalent (step1) bumping.

3) follow TLS best practices to harden.


Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015247.html">[squid-users] Best practices for beefing up security for squid with	ssl-bump
</A></li>
	<LI>Next message (by thread): <A HREF="015279.html">[squid-users] Best practices for beefing up security for squid with ssl-bump
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15248">[ date ]</a>
              <a href="thread.html#15248">[ thread ]</a>
              <a href="subject.html#15248">[ subject ]</a>
              <a href="author.html#15248">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
