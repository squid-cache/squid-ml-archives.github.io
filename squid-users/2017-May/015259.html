<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid to listen to HTTPS
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20to%20listen%20to%20HTTPS&In-Reply-To=%3C037c2ff9-3985-a7db-36e5-11c1b285a97e%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015254.html">
   <LINK REL="Next"  HREF="015262.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid to listen to HTTPS</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20to%20listen%20to%20HTTPS&In-Reply-To=%3C037c2ff9-3985-a7db-36e5-11c1b285a97e%40measurement-factory.com%3E"
       TITLE="[squid-users] Squid to listen to HTTPS">rousskov at measurement-factory.com
       </A><BR>
    <I>Mon May 15 17:33:59 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015254.html">[squid-users] Squid to listen to HTTPS
</A></li>
        <LI>Next message (by thread): <A HREF="015262.html">[squid-users] Squid to listen to HTTPS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15259">[ date ]</a>
              <a href="thread.html#15259">[ thread ]</a>
              <a href="subject.html#15259">[ subject ]</a>
              <a href="author.html#15259">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 05/14/2017 03:49 PM, avi_h wrote:

&gt;<i> I'm trying to get squid to listen to HTTPS in order to encrypt the traffic
</I>&gt;<i> between the proxy and the user.
</I>
&gt;<i> https_port 3129 cert=/etc/squid/certificate.pem key=/etc/squid/privatekey.pem
</I>

&gt;<i> However, when I try to connect from the browser using port 3129 I get a
</I>&gt;<i> connection refused.
</I>&gt;<i> When runnig squid in debug mode I got the following in cache.log:
</I>&gt;<i> 
</I>&gt;<i> 2017/05/14 21:10:19.854 kid1| 83,2| client_side.cc(3743) Squid_SSL_accept:
</I>&gt;<i> Error negotiating SSL connection on FD 7: error:00000005:lib(0):func(0):DH
</I>&gt;<i> lib
</I>

FYI: The &quot;connection refused&quot; browser error does not seem to match
&quot;Error negotiating SSL connection&quot; Squid error, but perhaps it is just
your browser being a little misleading.


&gt;<i> Please help me understand the reason.
</I>
You have configured Squid to be an HTTPS proxy.

Did you configure your browser to use an HTTP proxy instead of an HTTPS
proxy? Some browsers support HTTPS proxies, but it is tricky to enable
that support so I have to ask. HTTP proxies expect plain HTTP requests.
HTTPS proxies expect encrypted HTTP requests.

If you are still having trouble, it may be useful to attach
browser-Squid packet capture when reproducing the problem with
<A HREF="http://www.example.com/">http://www.example.com/</A> or a similar &quot;trivial&quot; site.

Alex.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015254.html">[squid-users] Squid to listen to HTTPS
</A></li>
	<LI>Next message (by thread): <A HREF="015262.html">[squid-users] Squid to listen to HTTPS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15259">[ date ]</a>
              <a href="thread.html#15259">[ thread ]</a>
              <a href="subject.html#15259">[ subject ]</a>
              <a href="author.html#15259">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
