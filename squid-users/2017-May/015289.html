<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Experimental YouTube Caching helper\tool and SQUID 3.5.25 + 4.0.19 RPM's RELEASED
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Experimental%20YouTube%20Caching%20helper%5Ctool%20and%0A%20SQUID%203.5.25%20%2B%204.0.19%20RPM%27s%20RELEASED&In-Reply-To=%3C6a5567a8-57be-1f27-a245-4cde7173dc7f%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015287.html">
   <LINK REL="Next"  HREF="015280.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Experimental YouTube Caching helper\tool and SQUID 3.5.25 + 4.0.19 RPM's RELEASED</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Experimental%20YouTube%20Caching%20helper%5Ctool%20and%0A%20SQUID%203.5.25%20%2B%204.0.19%20RPM%27s%20RELEASED&In-Reply-To=%3C6a5567a8-57be-1f27-a245-4cde7173dc7f%40treenet.co.nz%3E"
       TITLE="[squid-users] Experimental YouTube Caching helper\tool and SQUID 3.5.25 + 4.0.19 RPM's RELEASED">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed May 17 04:29:12 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015287.html">[squid-users] Experimental YouTube Caching helper\tool and	SQUID	3.5.25 + 4.0.19 RPM's RELEASED
</A></li>
        <LI>Next message (by thread): <A HREF="015280.html">[squid-users] Squid + IPv6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15289">[ date ]</a>
              <a href="thread.html#15289">[ thread ]</a>
              <a href="subject.html#15289">[ subject ]</a>
              <a href="author.html#15289">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 17/05/17 14:50, Eliezer Croitoru wrote:
&gt;<i> Now I am encountering an issue:
</I>&gt;<i> I worked on the ICAP service and it works fine to find and extract the unique identifier for the googlevideo id prediction.
</I>&gt;<i> Now I have a working ICAP+StoreID helpers but from an unknown reason it seems that squid find's a match in the cache but still serves the content from the origin server.
</I>&gt;<i> What might be causing it?
</I>
There are three possible reasons visible in the server response:

1) private response
  Cache-Control: private

2) stale response
  Last-Modified: Wed, 08 Apr 2015 09:25:11 GMT
  Cache-Control: max-age=21292

3) stale response
   Date: Wed, 17 May 2017 02:00:24 GMT
   Expires: Wed, 17 May 2017 02:00:24 GM


and another in the Squid backend request:
   Cache-Control: max-age=4794000

That means that either;
  a) the refresh_pattern has been configured to force objects to be 
under 55.4 days to avoid revalidation
OR
  b) the object in cache is 55.4 days old and Squid is seeking an update.

Except there are no If-* headers to indicate revalidation, so probably (a).

In either case the server is responding with an object which is both a 
full-size 200 status, and already over 2 years old:
   Last-Modified: Wed, 08 Apr 2015 09:25:11 GMT
so the new object already cannot meet the freshness requirements before 
it is even delivered to Squid.

Currently Squid caches such responses and uses them in favour of older 
cached content, especially when Store-ID is obscuring the exact URL 
origin of the older content.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015287.html">[squid-users] Experimental YouTube Caching helper\tool and	SQUID	3.5.25 + 4.0.19 RPM's RELEASED
</A></li>
	<LI>Next message (by thread): <A HREF="015280.html">[squid-users] Squid + IPv6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15289">[ date ]</a>
              <a href="thread.html#15289">[ thread ]</a>
              <a href="subject.html#15289">[ subject ]</a>
              <a href="author.html#15289">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
