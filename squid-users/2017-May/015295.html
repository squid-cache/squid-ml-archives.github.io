<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid custom error page
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20custom%20error%20page&In-Reply-To=%3C591C6145.1070605%40mathemainzel.info%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015293.html">
   <LINK REL="Next"  HREF="015296.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid custom error page</H1>
    <B>Walter H.</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20custom%20error%20page&In-Reply-To=%3C591C6145.1070605%40mathemainzel.info%3E"
       TITLE="[squid-users] Squid custom error page">Walter.H at mathemainzel.info
       </A><BR>
    <I>Wed May 17 14:42:13 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015293.html">[squid-users] Squid custom error page
</A></li>
        <LI>Next message (by thread): <A HREF="015296.html">[squid-users] Squid custom error page
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15295">[ date ]</a>
              <a href="thread.html#15295">[ thread ]</a>
              <a href="subject.html#15295">[ subject ]</a>
              <a href="author.html#15295">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 17.05.2017 16:04, Amos Jeffries wrote:
&gt;<i> On 17/05/17 23:32, chcs wrote:
</I>&gt;&gt;<i> Expected Results:
</I>&gt;&gt;<i> Display proxy server error page with deny info.
</I>&gt;<i>
</I>&gt;<i> This is a well-known problem with Browsers, they all refuse to display 
</I>&gt;<i> any response to a CONNECT tunnel message.
</I>&gt;<i> &lt;<A HREF="http://wiki.squid-cache.org/Features/CustomErrors#Custom_error_pages_not_displayed_for_HTTPS">http://wiki.squid-cache.org/Features/CustomErrors#Custom_error_pages_not_displayed_for_HTTPS</A>&gt; 
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Use of TLS to secure the connection to the proxy does not affect this 
</I>&gt;<i> browser behaviour on HTTPS traffic. The best you can hope for is to 
</I>&gt;<i> make Squid use a 511 status code with deny_info and hope that it 
</I>&gt;<i> chooses to display something halfway useful.
</I>there seems to be another problem ...

at my setup any browser shows the proxy messages;

with deny_info the special page
e.g. ERR_DOMAIN_BLOCKED,
without just the ERR_ACCESS_DENIED as default ...

my squid 3.5,25 (CentOS 6.9) - thanks to
Eliezer Croitoru for doing this good job;

the custom error pages are only shown, when the proxy does
SSL interception and the browser has installed the squid CA certificate ...

why is this:

without SSL interception, the browser sends a CONNECT
and expects a SSL/TLS handshake, instead he gets an
HTTP reply with the custom error page, which the browser
doesn't know to handle at this moment ...
only the information of HTTP header is processed;

in case someone has configured https_port this is just the same,
because the SSL/TLS connection to the webserver is tunneled inside
the SSL/TLS connection between client and browser ...

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 3491 bytes
Desc: S/MIME Cryptographic Signature
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20170517/4c0dc3c3/attachment.bin">http://lists.squid-cache.org/pipermail/squid-users/attachments/20170517/4c0dc3c3/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015293.html">[squid-users] Squid custom error page
</A></li>
	<LI>Next message (by thread): <A HREF="015296.html">[squid-users] Squid custom error page
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15295">[ date ]</a>
              <a href="thread.html#15295">[ thread ]</a>
              <a href="subject.html#15295">[ subject ]</a>
              <a href="author.html#15295">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
