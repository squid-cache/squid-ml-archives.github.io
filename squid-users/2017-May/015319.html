<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Documentation for squidclient?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Documentation%20for%20squidclient%3F&In-Reply-To=%3C6ebe6c62-adfd-41f1-4183-6e81bbd1f58e%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015333.html">
   <LINK REL="Next"  HREF="015322.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Documentation for squidclient?</H1>
    <B>Dijxie</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Documentation%20for%20squidclient%3F&In-Reply-To=%3C6ebe6c62-adfd-41f1-4183-6e81bbd1f58e%40gmail.com%3E"
       TITLE="[squid-users] Documentation for squidclient?">dijxie at gmail.com
       </A><BR>
    <I>Thu May 18 13:51:16 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015333.html">[squid-users] Documentation for squidclient?
</A></li>
        <LI>Next message (by thread): <A HREF="015322.html">[squid-users] Documentation for Cache Manager?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15319">[ date ]</a>
              <a href="thread.html#15319">[ thread ]</a>
              <a href="subject.html#15319">[ subject ]</a>
              <a href="author.html#15319">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>W dniu 18.05.2017 o 14:48, erdosain9 pisze:
&gt;<i> Hi.
</I>&gt;<i> Where i can find documentation for the opcion on squidclient, many of them
</I>&gt;<i> are self-explanatory but for example this:
</I>&gt;<i>
</I>&gt;<i> [<A HREF="https://lists.squid-cache.org/listinfo/squid-users">root at squid</A> ~]# squidclient mgr:external_acl
</I>&gt;<i> HTTP/1.1 200 OK
</I>&gt;<i> Server: squid/3.5.20
</I>&gt;<i> Mime-Version: 1.0
</I>&gt;<i> Date: Thu, 18 May 2017 12:40:54 GMT
</I>&gt;<i> Content-Type: text/plain;charset=utf-8
</I>&gt;<i> Expires: Thu, 18 May 2017 12:40:54 GMT
</I>&gt;<i> Last-Modified: Thu, 18 May 2017 12:40:54 GMT
</I>&gt;<i> X-Cache: MISS from squid.xxxxxxx.lan
</I>&gt;<i> X-Cache-Lookup: MISS from squid.xxxxxxx.lan:3128
</I>&gt;<i> Connection: close
</I>&gt;<i>
</I>&gt;<i> External ACL Statistics: i-full
</I>&gt;<i> Cache size: 13
</I>&gt;<i> program: /usr/lib64/squid/ext_kerberos_ldap_group_acl
</I>&gt;<i> number active: 5 of 5 (0 shutting down)
</I>&gt;<i> requests sent: 48
</I>&gt;<i> replies received: 48
</I>&gt;<i> queue length: 0
</I>&gt;<i> avg service time: 11 msec
</I>&gt;<i>
</I>&gt;<i>     ID #	     FD	    PID	 # Requests	  # Replies	Flags	   Time	 Offset
</I>&gt;<i> Request
</I>&gt;<i>        6	     23	   2134	         48	         48	    	  0.011	      0	(none)
</I>&gt;<i>        7	     25	   2135	          0	          0	    	  0.000	      0	(none)
</I>&gt;<i>        8	     27	   2136	          0	          0	    	  0.000	      0	(none)
</I>&gt;<i>        9	     29	   2137	          0	          0	    	  0.000	      0	(none)
</I>&gt;<i>       10	     31	   2138	          0	          0	    	  0.000	      0	(none)
</I>&gt;<i>
</I>&gt;<i> Flags key:
</I>&gt;<i>
</I>&gt;<i>     B = BUSY
</I>&gt;<i>     W = WRITING
</I>&gt;<i>     C = CLOSING
</I>&gt;<i>     S = SHUTDOWN PENDING
</I>&gt;<i>
</I>&gt;<i> External ACL Statistics: i-limitado
</I>&gt;<i> Cache size: 29
</I>&gt;<i> program: /usr/lib64/squid/ext_kerberos_ldap_group_acl
</I>&gt;<i> number active: 5 of 5 (0 shutting down)
</I>&gt;<i> requests sent: 110
</I>&gt;<i> replies received: 110
</I>&gt;<i> queue length: 0
</I>&gt;<i> avg service time: 101 msec
</I>&gt;<i>
</I>&gt;<i>     ID #	     FD	    PID	 # Requests	  # Replies	Flags	   Time	 Offset
</I>&gt;<i> Request
</I>&gt;<i>       11	     33	   2139	        110	        110	    	  0.014	      0	(none)
</I>&gt;<i>       12	     35	   2140	          0	          0	    	  0.000	      0	(none)
</I>&gt;<i>       13	     37	   2141	          0	          0	    	  0.000	      0	(none)
</I>&gt;<i>       14	     39	   2142	          0	          0	    	  0.000	      0	(none)
</I>&gt;<i>       15	     41	   2143	          0	          0	    	  0.000	      0	(none)
</I>&gt;<i>
</I>&gt;<i> Flags key:
</I>&gt;<i>
</I>&gt;<i>     B = BUSY
</I>&gt;<i>     W = WRITING
</I>&gt;<i>     C = CLOSING
</I>&gt;<i>     S = SHUTDOWN PENDING
</I>&gt;<i>
</I>&gt;<i> External ACL Statistics: i-sinlimite
</I>&gt;<i> Cache size: 51
</I>&gt;<i> program: /usr/lib64/squid/ext_kerberos_ldap_group_acl
</I>&gt;<i> number active: 5 of 5 (0 shutting down)
</I>&gt;<i> requests sent: 195
</I>&gt;<i> replies received: 195
</I>&gt;<i> queue length: 0
</I>&gt;<i> avg service time: -1441 msec
</I>&gt;<i>
</I>&gt;<i>     ID #	     FD	    PID	 # Requests	  # Replies	Flags	   Time	 Offset
</I>&gt;<i> Request
</I>&gt;<i>       16	     43	   2144	        191	        191	    	  0.050	      0	(none)
</I>&gt;<i>       17	     45	   2145	          1	          1	    	  0.175	      0	(none)
</I>&gt;<i>       18	     47	   2146	          1	          1	    	  0.185	      0	(none)
</I>&gt;<i>       19	     49	   2147	          1	          1	    	  0.130	      0	(none)
</I>&gt;<i>       20	     51	   2148	          1	          1	    	  0.229	      0	(none)
</I>&gt;<i>
</I>&gt;<i> Flags key:
</I>&gt;<i>
</I>&gt;<i>     B = BUSY
</I>&gt;<i>     W = WRITING
</I>&gt;<i>     C = CLOSING
</I>&gt;<i>     S = SHUTDOWN PENDING
</I>&gt;<i>
</I>&gt;<i> I know that i dont have any user in External ACL Statistics: i-sinlimite...
</I>&gt;<i> then why those statistics (with request and replies and 5 of 5).
</I>&gt;<i>
</I>&gt;<i> Thanks to all
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> View this message in context: <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/Documentation-for-squidclient-tp4682457.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/Documentation-for-squidclient-tp4682457.html</A>
</I>&gt;<i> Sent from the Squid - Users mailing list archive at Nabble.com.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
As far as I remember, you have some ldap group-based ACLs in your 
config. If any user is trying to access site listed in that kind of ACL, 
this helper is checking is user is in AD group that allows or disallows 
this action.

You may not have any user in i-sinlimite, but you DO HAVE this ACL, so 
squid will always  check that group and find out that the result is 
negative. If you have no users in this group and not going to have in 
near future, analyze your ACL logic and remove this rule from 
configuration - this will make squid faster for sure.

Your config is:

===begin conf sample===

http_access allow localhost
http_access allow i-sinlimite
http_access allow sin_autenticacion
http_access allow i-limitado #!dominios_denegados
http_access allow i-full #!dominios_denegados

# And finally deny all other access to this proxy
http_access deny all

===end===
You have no user in this group, yet since it is the first rule, EVERY user has to be checked is he/she <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ini-sinlimite at xxxxxxx.LAN</A>  group. What for, if group is not used? And it is not used in delay_class either.
When squid knows that user is not allowed by i-sinlimite, next rule (sin_autenticacion) is launched, but this is different, list-based ACL, don't now what is on the list - my guess is that's the list of sites that does not require an authentication. If so, it makes no sense - that kind of rule should be above any ACL that requires authentication.
So, most users will access most sites by rule i-limitado, but before, any user has to be checked by i-sinlimite. Makes no sense, really.
Second thing is that most of these ACLs are doing nothing, since your allow everything (!negation is disabled by # sign). Save some RAM consumed by helpers and reorganize your config.

Stats for i-sinlimite look good, although avg service time: -1441 msec is wrong (don't know why). Since that rule affects every user, delay caused by this hepler is added to every user's connection. As long as requests sent = recieved, there is no disaster anyway - users can browse The internet. Once more, remove that ACL and disable hepler.

IMHO you should build a test squid and do some practical learning how things work.

PS. Post your squid.conf every time; I rememer it from different thread, someone else may not.

-- 
Greets, Dijx

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20170518/1a6c9084/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20170518/1a6c9084/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015333.html">[squid-users] Documentation for squidclient?
</A></li>
	<LI>Next message (by thread): <A HREF="015322.html">[squid-users] Documentation for Cache Manager?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15319">[ date ]</a>
              <a href="thread.html#15319">[ thread ]</a>
              <a href="subject.html#15319">[ subject ]</a>
              <a href="author.html#15319">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
