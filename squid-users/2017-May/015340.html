<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Rock store size not decreasing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Rock%20store%20size%20not%20decreasing&In-Reply-To=%3C310d5774-dede-169b-e039-7d3f9532f5ec%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015334.html">
   <LINK REL="Next"  HREF="015350.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Rock store size not decreasing</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Rock%20store%20size%20not%20decreasing&In-Reply-To=%3C310d5774-dede-169b-e039-7d3f9532f5ec%40treenet.co.nz%3E"
       TITLE="[squid-users] Rock store size not decreasing">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri May 19 13:29:20 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015334.html">[squid-users] Rock store size not decreasing
</A></li>
        <LI>Next message (by thread): <A HREF="015350.html">[squid-users] Rock store size not decreasing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15340">[ date ]</a>
              <a href="thread.html#15340">[ thread ]</a>
              <a href="subject.html#15340">[ subject ]</a>
              <a href="author.html#15340">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 19/05/17 15:47, Dan Charlesworth wrote:
&gt;<i> Hey all
</I>&gt;<i>
</I>&gt;<i> I'm fairly new to rock caching. With aufs, if you reduce the cache 
</I>&gt;<i> size in the config it'll start slowly reducing it down the new size.
</I>&gt;<i>
</I>&gt;<i> I've done that with a ~137GB rock store (reduced it to 10240MB) but it 
</I>&gt;<i> 'aint changing after reloading the config.
</I>
With UFS/AUFSdiskd the cache is stored in a directory tree with 
individual files per item. Reducing the size results in files being 
deleted from disk an the total size shrinks naturally without any 
special action by Squid.

Rock on the other hand has all content stored inside one file. That file 
gets initialized with the space configured and maybe grown if needed. 
But there is nothing I'm aware of to reinitialize it on smaller sizes 
being configured. Reducing the size does reduce the size of stuff using 
space *inside* the database file, but AFAIK not the file itself.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015334.html">[squid-users] Rock store size not decreasing
</A></li>
	<LI>Next message (by thread): <A HREF="015350.html">[squid-users] Rock store size not decreasing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15340">[ date ]</a>
              <a href="thread.html#15340">[ thread ]</a>
              <a href="subject.html#15340">[ subject ]</a>
              <a href="author.html#15340">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
