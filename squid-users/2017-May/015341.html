<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] custom error pages with stylesheets doesn't work for me
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20custom%20error%20pages%20with%20stylesheets%20doesn%27t%20work%0A%20for%20me&In-Reply-To=%3C6099f5cf-f117-09e1-b4fd-4e115c004cca%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015336.html">
   <LINK REL="Next"  HREF="015342.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] custom error pages with stylesheets doesn't work for me</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20custom%20error%20pages%20with%20stylesheets%20doesn%27t%20work%0A%20for%20me&In-Reply-To=%3C6099f5cf-f117-09e1-b4fd-4e115c004cca%40treenet.co.nz%3E"
       TITLE="[squid-users] custom error pages with stylesheets doesn't work for me">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri May 19 13:40:11 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015336.html">[squid-users] custom error pages with stylesheets doesn't work for me
</A></li>
        <LI>Next message (by thread): <A HREF="015342.html">[squid-users] custom error pages with stylesheets doesn't work for me
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15341">[ date ]</a>
              <a href="thread.html#15341">[ thread ]</a>
              <a href="subject.html#15341">[ subject ]</a>
              <a href="author.html#15341">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 19/05/17 20:10, Dieter Bloms wrote:
&gt;<i> Hello Alex,
</I>&gt;<i>
</I>&gt;<i> On Thu, May 18, Alex Rousskov wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On 05/18/2017 03:17 AM, Dieter Bloms wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I wrote some custom error pages and activated style sheets in the header of the error pages like:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &lt;style type=&quot;text/css&quot;&gt;
</I>&gt;&gt;&gt;<i> %l
</I>&gt;&gt;&gt;<i> &lt;/style&gt;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> In the squid.conf file I set err_page_stylesheet to my stylesheet file and I restarted squid.
</I>&gt;&gt;&gt;<i> My expectation was, that the content of this style sheet file will be included in the error page at the %l position.
</I>&gt;&gt;<i> Your expectation was correct.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> But the place between &lt;style type=&quot;text/css&quot;&gt; and &lt;/style&gt; is empty.
</I>&gt;&gt;&gt;<i> Does anybody know how can I insert the content of the style sheet file to the error pages?
</I>&gt;&gt;<i> The steps you described above appear correct to me. Did you check for
</I>&gt;&gt;<i> errors in cache.log when starting Squid? Squid should complain if it
</I>&gt;&gt;<i> cannot load err_page_stylesheet but, unfortunately, Squid thinks that
</I>&gt;&gt;<i> you do not really care much about style and keeps running despite any
</I>&gt;&gt;<i> loading failures.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Temporary renaming the stylesheet file (so that Squid cannot load it)
</I>&gt;&gt;<i> will help you test whether you are looking for errors in the right place.
</I>&gt;<i> thank you for the hint.
</I>&gt;<i> Squid had no read permission to this file. After right permissions
</I>&gt;<i> it worked.
</I>&gt;<i> But there was _no_ error message in the cache log file.
</I>&gt;<i> I found the wrong permission with the help of strace command.
</I>&gt;<i> It would be nice, when squid drop a note, that it can't read the file.
</I>
I just checked the code and do see a log entry being made at critical 
level. It does not say &quot;ERROR&quot; like most of those things should though, 
just the filename and the system error message (fixed that right now).

It may be that you missed it amongst the other informational startup 
messages, or that it is in the part of &quot;cache.log&quot; messages that are 
output before cache.log is opened - those lines currently go to stderr 
and/or your system messages log (where/what that is depends on your OS).

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015336.html">[squid-users] custom error pages with stylesheets doesn't work for me
</A></li>
	<LI>Next message (by thread): <A HREF="015342.html">[squid-users] custom error pages with stylesheets doesn't work for me
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15341">[ date ]</a>
              <a href="thread.html#15341">[ thread ]</a>
              <a href="subject.html#15341">[ subject ]</a>
              <a href="author.html#15341">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
