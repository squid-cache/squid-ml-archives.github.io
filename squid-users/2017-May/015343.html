<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] How to redirect all squid's error pages to one?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20redirect%20all%20squid%27s%20error%20pages%20to%20one%3F&In-Reply-To=%3C00381e8c-9d9c-50a8-f4d3-72c2a2e1f665%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015339.html">
   <LINK REL="Next"  HREF="015344.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] How to redirect all squid's error pages to one?</H1>
    <B>Dijxie</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20redirect%20all%20squid%27s%20error%20pages%20to%20one%3F&In-Reply-To=%3C00381e8c-9d9c-50a8-f4d3-72c2a2e1f665%40gmail.com%3E"
       TITLE="[squid-users] How to redirect all squid's error pages to one?">dijxie at gmail.com
       </A><BR>
    <I>Fri May 19 14:55:11 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015339.html">[squid-users] How to redirect all squid's error pages to one?
</A></li>
        <LI>Next message (by thread): <A HREF="015344.html">[squid-users] How to redirect all squid's error pages to one?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15343">[ date ]</a>
              <a href="thread.html#15343">[ thread ]</a>
              <a href="subject.html#15343">[ subject ]</a>
              <a href="author.html#15343">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>W dniu 19.05.2017 o 15:13, Amos Jeffries pisze:
&gt;<i> On 20/05/17 00:44, Dijxie wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi list,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 1. I'd like to redirect **all** squid error pages to one, universal, 
</I>&gt;&gt;<i> preferably internal squid error page. For sure I can symlink every 
</I>&gt;&gt;<i> error page to one, but is there a clener way?
</I>&gt;&gt;<i> I'm not sure if I get it: 
</I>&gt;&gt;<i> <A HREF="http://www.squid-cache.org/Doc/config/deny_info/">http://www.squid-cache.org/Doc/config/deny_info/</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> deny_info is to provide some non-default response payload (aka. 
</I>&gt;<i> &quot;page&quot;) instead of the 403 when an ACL performs administrative denial 
</I>&gt;<i> of access.
</I>&gt;<i>
</I>&gt;<i> As to your purpose; What is this universal message that conveys all 
</I>&gt;<i> possible environmental conditions to the reader in one simple text?
</I>&gt;<i>
</I>&gt;<i> Keep in mind that the reader may not be human; some errors are 
</I>&gt;<i> explanations of indirect problems and only visible when the 
</I>&gt;<i> accompanying machine instructions reach a failure (eg 30x, 401, 407 
</I>&gt;<i> messages); and some are not errors at all but instructions for a user 
</I>&gt;<i> on what they need to do to continue with communication (eg 511 login 
</I>&gt;<i> pages).
</I>&gt;<i>
</I>&gt;&gt;<i> 2. And then, using %e code and presumably external js nested in this 
</I>&gt;&gt;<i> page, display more detailed info for some error numbers.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Can it be done? Can squid internal web server handle easy js?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Squid is not a web server. On &quot;error&quot; it produces message payloads 
</I>&gt;<i> which happen to contain HTML by default. Modern HTML can contain 
</I>&gt;<i> embedded scripts, but they are not interpreted by Squid as anything 
</I>&gt;<i> beyond opaque characters.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> If you redirect all errors to one URL any information the client might 
</I>&gt;<i> have had about the error is destroyed.
</I>&gt;<i>
</I>&gt;<i> The symlinking you though of is the &quot;best&quot; way to do what you are 
</I>&gt;<i> asking for. However, think carefully about what the purpose of 
</I>&gt;<i> displaying an error message is, see above.
</I>&gt;<i>
</I>&gt;<i> Amos
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
The purpose is to provide unified, debug info for 1st line of support. 
End users in my corpo are not best IT trained people in the world and 
they tend to open tickets for any reason, usually pasting printscreen 
into ticket.
Simple debug info like: IP, user name, client name, cache name in short 
list would help service desk to divide &quot;moronic&quot; tickets from important 
ones, and as for default squid info pages... user do not read them 
anyway. I do not want to remove error codes, I just want to remove 
content of most error pages and replace it with unified message that 
also contains raw error code (%e, %E) and add some more information if 
%e will be nxdomain or access denied for example.
Unfortunately, I'm far from VPN right now, so I cannot show you the 
sample &quot;unified&quot; error page I've commited till now.

But indeed, you have striked the home; cache users are both human and 
machine$ AD accounts, I must reconsider that. Perhaps parsing all error 
pages with sed ie and adding few lines will be easer and more 
convenient, anyway.
I know that squid is not web serwer, but error page is html; I assume it 
can contains iframe served from external web server and this will be 
rendered by client's browser, not squid? My idea was:
- js nested in squid error page looks for error code
- then redirects nested iframe to specific URL hosted on external httpd 
depending on error code. If error code is unimportant for human (user 
can do nothing with that anyway), iframe stays blank.
- human client has has his explenation like &quot;this is your error, do not 
open ticket please, check your URL again&quot; for nxdomain.

We are talking about ~2K users and 3-4 cache servers. I must take 
comfort of first line support into concideration, they are quite 
heavy-loaded already.
I'm not feeling comfortable with this idea, but I also have a feeling 
that it might be necessity.

Thank You.

-- 
Greets, Dijx.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20170519/5958ef87/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20170519/5958ef87/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015339.html">[squid-users] How to redirect all squid's error pages to one?
</A></li>
	<LI>Next message (by thread): <A HREF="015344.html">[squid-users] How to redirect all squid's error pages to one?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15343">[ date ]</a>
              <a href="thread.html#15343">[ thread ]</a>
              <a href="subject.html#15343">[ subject ]</a>
              <a href="author.html#15343">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
