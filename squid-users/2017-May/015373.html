<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] clientside_mark
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20clientside_mark&In-Reply-To=%3CCACmb8SnHa9fA0hrCmLJ0yGMrQxywgC7ECL8hp473ABb37MYo-Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015371.html">
   <LINK REL="Next"  HREF="015375.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] clientside_mark</H1>
    <B>Ikari C</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20clientside_mark&In-Reply-To=%3CCACmb8SnHa9fA0hrCmLJ0yGMrQxywgC7ECL8hp473ABb37MYo-Q%40mail.gmail.com%3E"
       TITLE="[squid-users] clientside_mark">nldo.tut.alberto at gmail.com
       </A><BR>
    <I>Tue May 23 00:03:05 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015371.html">[squid-users] clientside_mark
</A></li>
        <LI>Next message (by thread): <A HREF="015375.html">[squid-users] clientside_mark
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15373">[ date ]</a>
              <a href="thread.html#15373">[ thread ]</a>
              <a href="subject.html#15373">[ subject ]</a>
              <a href="author.html#15373">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 22/05/17 02:51, Ikari C wrote:

&gt;<i> Hi, i'm new in maillist and in Squid configuration, I use Squid 3.5
</I>&gt;<i> version and i read about clientside_mark configuration, but i have a doubt,
</I>&gt;<i> wich type of  ACL is compatible with this option. I want to create a MARK
</I>&gt;<i> by dstdomain ACL, and use TC configuration to set QOS, it is posible? or
</I>&gt;<i> only works with SRC ALC type.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> i want to do this in squid.conf:
</I>&gt;<i>
</I>&gt;<i> acl aclname1 dstdomain url1
</I>&gt;<i> acl aclname2 dstdomain url2
</I>&gt;<i> clientside_mark 0x3 aclname1
</I>&gt;<i> clientside_mark 0x4 aclname2
</I>&gt;<i>
</I>&gt;<i> the configuration on squid.conf is the default.
</I>&gt;<i>
</I>&gt;<i>
</I>Any of the ACLs which work in http_access should work there too.

However, because HTTP contains message pipelines the arrival time of any
given request may be significantly different from the response delivery
time. i.e. there may be earlier requested responses using the connection
between now (when the MARK gets set by the newly arrived request) and the
response you were intending to mark. So it is best to only rely on TCP
level things if you can.

Amos


Thanks. i will keep it in mind

I tested this configuration and squid effectively mark this packages (I saw
with iptables --m mark --mark X -j log) but mark also other domain that i
have visited inmediately after and they aren't in the acl, for example, if
i put &quot;acl ac1 dstdomain .yahoo.com&quot;, squid mark this package, but if i go
to google.com squid also mark the google package, but if i go to google
first than yahoo.com squid doesn't mark the package to google, and then i
go to yahoo, squid mark the yahoo package, and if i go to visit again
google, &quot;squid&quot; mark the package google too. I wanted to create a QOS based
by domain whith TC configuration.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20170522/e4ed54b3/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20170522/e4ed54b3/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015371.html">[squid-users] clientside_mark
</A></li>
	<LI>Next message (by thread): <A HREF="015375.html">[squid-users] clientside_mark
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15373">[ date ]</a>
              <a href="thread.html#15373">[ thread ]</a>
              <a href="subject.html#15373">[ subject ]</a>
              <a href="author.html#15373">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
