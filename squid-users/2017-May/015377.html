<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] a bit off topic. New user question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20a%20bit%20off%20topic.%20New%20user%20question&In-Reply-To=%3C6bc164b0-ea28-ba6f-bbbd-988ac699864c%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015372.html">
   <LINK REL="Next"  HREF="015380.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] a bit off topic. New user question</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20a%20bit%20off%20topic.%20New%20user%20question&In-Reply-To=%3C6bc164b0-ea28-ba6f-bbbd-988ac699864c%40treenet.co.nz%3E"
       TITLE="[squid-users] a bit off topic. New user question">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue May 23 05:29:30 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015372.html">[squid-users] a bit off topic. New user question
</A></li>
        <LI>Next message (by thread): <A HREF="015380.html">[squid-users] a bit off topic. New user question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15377">[ date ]</a>
              <a href="thread.html#15377">[ thread ]</a>
              <a href="subject.html#15377">[ subject ]</a>
              <a href="author.html#15377">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 23/05/17 11:39, George Diaz wrote:
&gt;<i>
</I>&gt;<i> Hi
</I>&gt;<i>
</I>&gt;<i> sorry this off-topic question ...
</I>&gt;<i>
</I>&gt;<i> I want pre-cache some object from some interest host with wget.
</I>&gt;<i>
</I>&gt;<i> My question is : I want: the wget download the object to the /dev/null 
</I>&gt;<i> but
</I>&gt;<i> I'm not found this switches....
</I>&gt;<i> (GNU Wget 1.5.3)
</I>&gt;<i>
</I>&gt;<i> I'm probe this :
</I>&gt;<i> export http_proxy=<A HREF="http://mycache.com:8080/">http://mycache.com:8080/</A>
</I>&gt;<i> wget -r <A HREF="http://sobredinero.com">http://sobredinero.com</A> -P /dev/null -nH -nd -Y on -b -l5 -t1 
</I>&gt;<i> -o /dev/null
</I>&gt;<i>
</I>&gt;<i> but this is create a /dev/null directory :) and download the files 
</I>&gt;<i> into this.
</I>&gt;<i>
</I>&gt;<i> any suggestions ?
</I>&gt;<i>
</I>
Some advice before you get too far into this project;

  Pre-caching was an good idea back in the days of HTTP/1.0 and static 
websites where the URL was all that mattered. In todays HTTP/1.1 and 
HTTP/2 world dynamic content and variants are much more common things, 
and both make pre-caching pretty much useless.

Before you attempt it for any domain I recommend passing a few of its 
URLs through the tool at &lt;<A HREF="https://redbot.org">https://redbot.org</A>&gt;. If that tool indicates 
the site uses content negotiation or conditional HTTP features then 
pre-caching is just going to be causing problems.

For example; that sobredinero domain above produces these details:


      Content Negotiation

  * The response body is different when content negotiation happens.


      Caching

  * Vary: User-Agent can cause cache inefficiency.


This means that anything you pre-cache with wget will be ignored and 
probably replaced when any non-wget agent (ie a browser) is used to 
fetch through the proxy. So you just waste all the bandwidth, time, and 
storage space used pre-caching it.


Vary:User-Agent is particularly bad since any single character 
difference in the User-Agent header will cause a different object to be 
referred to in the cache storage. If you wish to pre-cache these objects 
in any useful way you have to know and mimic the *exact* User-Agent 
header values that will be used to fetch it. For example; two different 
version of Chrome -&gt; different User-Agent header. Internet Explorer with 
different Windows Updates applied -&gt; different User-Agent header. As you 
can imagine that is a very hard thing to predict.


Note: if you have come to this idea after seeing objects from that 
domain getting a lot of MISS records, the problem is very much that Vary 
header causing so many different objects to be needed that objects being 
stored are often not the right one(s) for any later client request. 
pre-caching will not solve this but make it worse as wget is just 
another different User-Agent.


Amos



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015372.html">[squid-users] a bit off topic. New user question
</A></li>
	<LI>Next message (by thread): <A HREF="015380.html">[squid-users] a bit off topic. New user question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15377">[ date ]</a>
              <a href="thread.html#15377">[ thread ]</a>
              <a href="subject.html#15377">[ subject ]</a>
              <a href="author.html#15377">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
