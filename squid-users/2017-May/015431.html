<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] CentOS6 and squid34 package ...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20CentOS6%20and%20squid34%20package%20...&In-Reply-To=%3C59272B64.20308%40mathemainzel.info%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015425.html">
   <LINK REL="Next"  HREF="015432.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] CentOS6 and squid34 package ...</H1>
    <B>Walter H.</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20CentOS6%20and%20squid34%20package%20...&In-Reply-To=%3C59272B64.20308%40mathemainzel.info%3E"
       TITLE="[squid-users] CentOS6 and squid34 package ...">Walter.H at mathemainzel.info
       </A><BR>
    <I>Thu May 25 19:07:16 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015425.html">[squid-users] CentOS6 and squid34 package ...
</A></li>
        <LI>Next message (by thread): <A HREF="015432.html">[squid-users] CentOS6 and squid34 package ...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15431">[ date ]</a>
              <a href="thread.html#15431">[ thread ]</a>
              <a href="subject.html#15431">[ subject ]</a>
              <a href="author.html#15431">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 25.05.2017 12:50, Amos Jeffries wrote:
&gt;<i> On 25/05/17 20:19, Walter H. wrote:
</I>&gt;&gt;<i> Hello
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> what is the essential difference between the default squid package 
</I>&gt;&gt;<i> and this squid34 package,
</I>&gt;<i>
</I>&gt;<i> Run &quot;squid -v&quot; to find out if there are any build options different. 
</I>&gt;<i> Usually its just two alternative versions from the vendor.
</I>&gt;<i>
</I>Squid Cache: Version 3.4.14
configure options:  '--build=x86_64-redhat-linux-gnu' 
'--host=x86_64-redhat-linux-gnu' '--target=x86_64-redhat-linux-gnu' 
'--program-prefix=' '--prefix=/usr' '--exec-prefix=/usr' 
'--bindir=/usr/bin' '--sbindir=/usr/sbin' '--sysconfdir=/etc' 
'--datadir=/usr/share' '--includedir=/usr/include' '--libdir=/usr/lib64' 
'--libexecdir=/usr/libexec' '--sharedstatedir=/var/lib' 
'--mandir=/usr/share/man' '--infodir=/usr/share/info' 
'--enable-internal-dns' '--disable-strict-error-checking' 
'--exec_prefix=/usr' '--libexecdir=/usr/lib64/squid' 
'--localstatedir=/var' '--datadir=/usr/share/squid' 
'--sysconfdir=/etc/squid' '--with-logdir=$(localstatedir)/log/squid' 
'--with-pidfile=$(localstatedir)/run/squid.pid' 
'--disable-dependency-tracking' '--enable-arp-acl' 
'--enable-follow-x-forwarded-for' 
'--enable-auth-basic=LDAP,MSNT,NCSA,PAM,SMB,POP3,RADIUS,SASL,getpwnam,NIS,MSNT-multi-domain' 
'--enable-auth-ntlm=smb_lm,fake' 
'--enable-auth-digest=file,LDAP,eDirectory' 
'--enable-auth-negotiate=kerberos' 
'--enable-external-acl-helpers=file_userip,LDAP_group,session,unix_group,wbinfo_group' 
'--enable-cache-digests' '--enable-cachemgr-hostname=localhost' 
'--enable-delay-pools' '--enable-epoll' '--enable-icap-client' 
'--enable-ident-lookups' '--enable-linux-netfilter' 
'--enable-referer-log' '--enable-removal-policies=heap,lru' 
'--enable-snmp' '--enable-ssl' '--enable-storeio=aufs,diskd,ufs' 
'--enable-useragent-log' '--enable-wccpv2' '--enable-esi' 
'--enable-http-violations' '--with-aio' '--with-default-user=squid' 
'--with-filedescriptors=16384' '--with-dl' '--with-openssl' 
'--with-pthreads' '--disable-arch-native' 
'build_alias=x86_64-redhat-linux-gnu' 
'host_alias=x86_64-redhat-linux-gnu' 
'target_alias=x86_64-redhat-linux-gnu' 'CFLAGS=-O2 -g -pipe -Wall 
-Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector 
--param=ssp-buffer-size=4 -m64 -mtune=generic -fpie' 'CXXFLAGS=-O2 -g 
-pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector 
--param=ssp-buffer-size=4 -m64 -mtune=generic -fpie' 
'PKG_CONFIG_PATH=:/usr/lib64/pkgconfig:/usr/share/pkgconfig'

and

Squid Cache: Version 3.1.23
configure options:  '--build=x86_64-redhat-linux-gnu' 
'--host=x86_64-redhat-linux-gnu' '--target=x86_64-redhat-linux-gnu' 
'--program-prefix=' '--prefix=/usr' '--exec-prefix=/usr' 
'--bindir=/usr/bin' '--sbindir=/usr/sbin' '--sysconfdir=/etc' 
'--datadir=/usr/share' '--includedir=/usr/include' '--libdir=/usr/lib64' 
'--libexecdir=/usr/libexec' '--sharedstatedir=/var/lib' 
'--mandir=/usr/share/man' '--infodir=/usr/share/info' 
'--enable-internal-dns' '--disable-strict-error-checking' 
'--exec_prefix=/usr' '--libexecdir=/usr/lib64/squid' 
'--localstatedir=/var' '--datadir=/usr/share/squid' 
'--sysconfdir=/etc/squid' '--with-logdir=$(localstatedir)/log/squid' 
'--with-pidfile=$(localstatedir)/run/squid.pid' 
'--disable-dependency-tracking' '--enable-arp-acl' 
'--enable-follow-x-forwarded-for' 
'--enable-auth=basic,digest,ntlm,negotiate' 
'--enable-basic-auth-helpers=LDAP,MSNT,NCSA,PAM,SMB,YP,getpwnam,multi-domain-NTLM,SASL,DB,POP3,squid_radius_auth' 
'--enable-ntlm-auth-helpers=smb_lm,no_check,fakeauth' 
'--enable-digest-auth-helpers=password,ldap,eDirectory' 
'--enable-negotiate-auth-helpers=squid_kerb_auth' 
'--enable-external-acl-helpers=ip_user,ldap_group,session,unix_group,wbinfo_group' 
'--enable-cache-digests' '--enable-cachemgr-hostname=localhost' 
'--enable-delay-pools' '--enable-epoll' '--enable-icap-client' 
'--enable-ident-lookups' '--enable-linux-netfilter' 
'--enable-referer-log' '--enable-removal-policies=heap,lru' 
'--enable-snmp' '--enable-ssl' '--enable-storeio=aufs,diskd,ufs' 
'--enable-useragent-log' '--enable-wccpv2' '--enable-esi' 
'--enable-http-violations' '--with-aio' '--with-default-user=squid' 
'--with-filedescriptors=16384' '--with-dl' '--with-openssl' 
'--with-pthreads' 'build_alias=x86_64-redhat-linux-gnu' 
'host_alias=x86_64-redhat-linux-gnu' 
'target_alias=x86_64-redhat-linux-gnu' 'CFLAGS=-O2 -g -pipe -Wall 
-Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector 
--param=ssp-buffer-size=4 -m64 -mtune=generic -fpie' 'LDFLAGS=-pie' 
'CXXFLAGS=-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions 
-fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -fpie' 
--with-squid=/builddir/build/BUILD/squid-3.1.23

&gt;<i>
</I>&gt;&gt;<i> as I have problems using this squid34 package for FTP connections;
</I>&gt;&gt;<i> there are no shown icons, when going to e.g. <A HREF="ftp://ftp.adobe.com/">ftp://ftp.adobe.com/</A>
</I>&gt;&gt;<i> when I tell the browser to show the image then I get this squid 
</I>&gt;&gt;<i> generated message ...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> the same config /etc/squid/squid.conf works with the default squid 
</I>&gt;&gt;<i> package ...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &lt;message&gt;
</I>&gt;&gt;<i> While trying to retrieve the URL: 
</I>&gt;&gt;<i> <A HREF="http://proxy.local:3128/squid-internal-static/icons/silk/folder.png">http://proxy.local:3128/squid-internal-static/icons/silk/folder.png</A> 
</I>&gt;&gt;<i> &lt;<A HREF="http://zbox-ci323.waldinet.local:3128/squid-internal-static/icons/silk/folder.png">http://zbox-ci323.waldinet.local:3128/squid-internal-static/icons/silk/folder.png</A>&gt; 
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Notice the port number in that URL...
</I>&gt;<i>
</I>yes I see the squid port 3128

when I do this with the default squid package, there I get the icons, 
and when I want to get the URL of such an icon,
it shows e.g. 
<A HREF="ftp://ftp.adobe.com/squid-internal-static/icons/anthony-dir.gif">ftp://ftp.adobe.com/squid-internal-static/icons/anthony-dir.gif</A>

when I add
global_internal_static off
to squid.conf at the squid34 package,
then there also no icons shown;
when I tell the browser to show the image then I get this squid 
generated message ...

&lt;message&gt;
The following URL could not be retrieved: 
<A HREF="ftp://ftp.adobe.com/squid-internal-static/icons/silk/folder.png">ftp://ftp.adobe.com/squid-internal-static/icons/silk/folder.png</A>

Squid sent the following FTP command:

    *

    CWD squid-internal-static

    * 

and then received this reply

    *

    Failed to change directory.

    * 

This might be caused by an FTP URL with an absolute path (which does not 
comply with RFC 1738).
If this is the cause, then the file can be found at 
<A HREF="ftp://ftp.adobe.com%2f2f/squid-internal-static/icons/silk/folder.png">ftp://ftp.adobe.com%2f2f/squid-internal-static/icons/silk/folder.png</A> 
&lt;<A HREF="ftp://ftp.adobe.com%2f/squid-internal-static/icons/silk/folder.png">ftp://ftp.adobe.com%2f/squid-internal-static/icons/silk/folder.png</A>&gt;.

Your cache administrator is ...

Generated Thu, 25 May 2017 18:57:52 GMT by proxy.local (squid/3.4.14)
&lt;/message&gt;

what is running wrong here?
is there a setting I can change without having to allow
port 3128 traffic go through the proxy?
(this is not really logic, as the default squid package also doesn't 
allow port 3128 traffic go through ...)

&gt;&gt;<i>
</I>&gt;&gt;<i> &lt;squid.conf&gt;
</I>&gt;&gt;<i> acl localnet src 192.168.1.0/24
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> acl SSL_ports port 443
</I>&gt;&gt;<i> acl Safe_ports port 80          # http
</I>&gt;&gt;<i> acl Safe_ports port 21          # ftp
</I>&gt;&gt;<i> acl Safe_ports port 443         # https
</I>&gt;&gt;<i> acl Safe_ports port 70          # gopher
</I>&gt;<i>
</I>&gt;<i> You have removed the port range 1025-65535 from Safe_ports. So traffic 
</I>&gt;<i> with URL port 3128 is no longer permitted.
</I>I configured on the clients this
<A HREF="http://proxy.local:3128">http://proxy.local:3128</A>
as proxy ...

Thanks,
Walter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20170525/c478bdd5/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20170525/c478bdd5/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 3491 bytes
Desc: S/MIME Cryptographic Signature
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20170525/c478bdd5/attachment.bin">http://lists.squid-cache.org/pipermail/squid-users/attachments/20170525/c478bdd5/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015425.html">[squid-users] CentOS6 and squid34 package ...
</A></li>
	<LI>Next message (by thread): <A HREF="015432.html">[squid-users] CentOS6 and squid34 package ...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15431">[ date ]</a>
              <a href="thread.html#15431">[ thread ]</a>
              <a href="subject.html#15431">[ subject ]</a>
              <a href="author.html#15431">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
