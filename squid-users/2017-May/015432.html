<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] CentOS6 and squid34 package ...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20CentOS6%20and%20squid34%20package%20...&In-Reply-To=%3C592735BF.5020500%40afo.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015431.html">
   <LINK REL="Next"  HREF="015454.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] CentOS6 and squid34 package ...</H1>
    <B>Mike</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20CentOS6%20and%20squid34%20package%20...&In-Reply-To=%3C592735BF.5020500%40afo.net%3E"
       TITLE="[squid-users] CentOS6 and squid34 package ...">mcsnv96 at afo.net
       </A><BR>
    <I>Thu May 25 19:51:27 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015431.html">[squid-users] CentOS6 and squid34 package ...
</A></li>
        <LI>Next message (by thread): <A HREF="015454.html">[squid-users] CentOS6 and squid34 package ...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15432">[ date ]</a>
              <a href="thread.html#15432">[ thread ]</a>
              <a href="subject.html#15432">[ subject ]</a>
              <a href="author.html#15432">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Walter, what I've found is when compiling to squid 3.5.x and higher, the 
compile options change. Also remember that many of the options that were 
available with 3.1.x are depreciated and likely will not work with 3.4.x 
and higher.

The other issue is that squid is only supposed to be handling HTTP and 
HTTPS traffic, not FTP. trying to use it as a FTP proxy will need a 
different configuration than the standard HTTP/Secure proxy.


Mike


On 5/25/2017 14:07 PM, Walter H. wrote:
&gt;<i> On 25.05.2017 12:50, Amos Jeffries wrote:
</I>&gt;&gt;<i> On 25/05/17 20:19, Walter H. wrote:
</I>&gt;&gt;&gt;<i> Hello
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> what is the essential difference between the default squid package 
</I>&gt;&gt;&gt;<i> and this squid34 package,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Run &quot;squid -v&quot; to find out if there are any build options different. 
</I>&gt;&gt;<i> Usually its just two alternative versions from the vendor.
</I>&gt;&gt;<i>
</I>&gt;<i> Squid Cache: Version 3.4.14
</I>&gt;<i> configure options:  '--build=x86_64-redhat-linux-gnu' 
</I>&gt;<i> '--host=x86_64-redhat-linux-gnu' '--target=x86_64-redhat-linux-gnu' 
</I>&gt;<i> '--program-prefix=' '--prefix=/usr' '--exec-prefix=/usr' 
</I>&gt;<i> '--bindir=/usr/bin' '--sbindir=/usr/sbin' '--sysconfdir=/etc' 
</I>&gt;<i> '--datadir=/usr/share' '--includedir=/usr/include' 
</I>&gt;<i> '--libdir=/usr/lib64' '--libexecdir=/usr/libexec' 
</I>&gt;<i> '--sharedstatedir=/var/lib' '--mandir=/usr/share/man' 
</I>&gt;<i> '--infodir=/usr/share/info' '--enable-internal-dns' 
</I>&gt;<i> '--disable-strict-error-checking' '--exec_prefix=/usr' 
</I>&gt;<i> '--libexecdir=/usr/lib64/squid' '--localstatedir=/var' 
</I>&gt;<i> '--datadir=/usr/share/squid' '--sysconfdir=/etc/squid' 
</I>&gt;<i> '--with-logdir=$(localstatedir)/log/squid' 
</I>&gt;<i> '--with-pidfile=$(localstatedir)/run/squid.pid' 
</I>&gt;<i> '--disable-dependency-tracking' '--enable-arp-acl' 
</I>&gt;<i> '--enable-follow-x-forwarded-for' 
</I>&gt;<i> '--enable-auth-basic=LDAP,MSNT,NCSA,PAM,SMB,POP3,RADIUS,SASL,getpwnam,NIS,MSNT-multi-domain' 
</I>&gt;<i> '--enable-auth-ntlm=smb_lm,fake' 
</I>&gt;<i> '--enable-auth-digest=file,LDAP,eDirectory' 
</I>&gt;<i> '--enable-auth-negotiate=kerberos' 
</I>&gt;<i> '--enable-external-acl-helpers=file_userip,LDAP_group,session,unix_group,wbinfo_group' 
</I>&gt;<i> '--enable-cache-digests' '--enable-cachemgr-hostname=localhost' 
</I>&gt;<i> '--enable-delay-pools' '--enable-epoll' '--enable-icap-client' 
</I>&gt;<i> '--enable-ident-lookups' '--enable-linux-netfilter' 
</I>&gt;<i> '--enable-referer-log' '--enable-removal-policies=heap,lru' 
</I>&gt;<i> '--enable-snmp' '--enable-ssl' '--enable-storeio=aufs,diskd,ufs' 
</I>&gt;<i> '--enable-useragent-log' '--enable-wccpv2' '--enable-esi' 
</I>&gt;<i> '--enable-http-violations' '--with-aio' '--with-default-user=squid' 
</I>&gt;<i> '--with-filedescriptors=16384' '--with-dl' '--with-openssl' 
</I>&gt;<i> '--with-pthreads' '--disable-arch-native' 
</I>&gt;<i> 'build_alias=x86_64-redhat-linux-gnu' 
</I>&gt;<i> 'host_alias=x86_64-redhat-linux-gnu' 
</I>&gt;<i> 'target_alias=x86_64-redhat-linux-gnu' 'CFLAGS=-O2 -g -pipe -Wall 
</I>&gt;<i> -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector 
</I>&gt;<i> --param=ssp-buffer-size=4 -m64 -mtune=generic -fpie' 'CXXFLAGS=-O2 -g 
</I>&gt;<i> -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector 
</I>&gt;<i> --param=ssp-buffer-size=4 -m64 -mtune=generic -fpie' 
</I>&gt;<i> 'PKG_CONFIG_PATH=:/usr/lib64/pkgconfig:/usr/share/pkgconfig'
</I>&gt;<i>
</I>&gt;<i> and
</I>&gt;<i>
</I>&gt;<i> Squid Cache: Version 3.1.23
</I>&gt;<i> configure options:  '--build=x86_64-redhat-linux-gnu' 
</I>&gt;<i> '--host=x86_64-redhat-linux-gnu' '--target=x86_64-redhat-linux-gnu' 
</I>&gt;<i> '--program-prefix=' '--prefix=/usr' '--exec-prefix=/usr' 
</I>&gt;<i> '--bindir=/usr/bin' '--sbindir=/usr/sbin' '--sysconfdir=/etc' 
</I>&gt;<i> '--datadir=/usr/share' '--includedir=/usr/include' 
</I>&gt;<i> '--libdir=/usr/lib64' '--libexecdir=/usr/libexec' 
</I>&gt;<i> '--sharedstatedir=/var/lib' '--mandir=/usr/share/man' 
</I>&gt;<i> '--infodir=/usr/share/info' '--enable-internal-dns' 
</I>&gt;<i> '--disable-strict-error-checking' '--exec_prefix=/usr' 
</I>&gt;<i> '--libexecdir=/usr/lib64/squid' '--localstatedir=/var' 
</I>&gt;<i> '--datadir=/usr/share/squid' '--sysconfdir=/etc/squid' 
</I>&gt;<i> '--with-logdir=$(localstatedir)/log/squid' 
</I>&gt;<i> '--with-pidfile=$(localstatedir)/run/squid.pid' 
</I>&gt;<i> '--disable-dependency-tracking' '--enable-arp-acl' 
</I>&gt;<i> '--enable-follow-x-forwarded-for' 
</I>&gt;<i> '--enable-auth=basic,digest,ntlm,negotiate' 
</I>&gt;<i> '--enable-basic-auth-helpers=LDAP,MSNT,NCSA,PAM,SMB,YP,getpwnam,multi-domain-NTLM,SASL,DB,POP3,squid_radius_auth' 
</I>&gt;<i> '--enable-ntlm-auth-helpers=smb_lm,no_check,fakeauth' 
</I>&gt;<i> '--enable-digest-auth-helpers=password,ldap,eDirectory' 
</I>&gt;<i> '--enable-negotiate-auth-helpers=squid_kerb_auth' 
</I>&gt;<i> '--enable-external-acl-helpers=ip_user,ldap_group,session,unix_group,wbinfo_group' 
</I>&gt;<i> '--enable-cache-digests' '--enable-cachemgr-hostname=localhost' 
</I>&gt;<i> '--enable-delay-pools' '--enable-epoll' '--enable-icap-client' 
</I>&gt;<i> '--enable-ident-lookups' '--enable-linux-netfilter' 
</I>&gt;<i> '--enable-referer-log' '--enable-removal-policies=heap,lru' 
</I>&gt;<i> '--enable-snmp' '--enable-ssl' '--enable-storeio=aufs,diskd,ufs' 
</I>&gt;<i> '--enable-useragent-log' '--enable-wccpv2' '--enable-esi' 
</I>&gt;<i> '--enable-http-violations' '--with-aio' '--with-default-user=squid' 
</I>&gt;<i> '--with-filedescriptors=16384' '--with-dl' '--with-openssl' 
</I>&gt;<i> '--with-pthreads' 'build_alias=x86_64-redhat-linux-gnu' 
</I>&gt;<i> 'host_alias=x86_64-redhat-linux-gnu' 
</I>&gt;<i> 'target_alias=x86_64-redhat-linux-gnu' 'CFLAGS=-O2 -g -pipe -Wall 
</I>&gt;<i> -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector 
</I>&gt;<i> --param=ssp-buffer-size=4 -m64 -mtune=generic -fpie' 'LDFLAGS=-pie' 
</I>&gt;<i> 'CXXFLAGS=-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions 
</I>&gt;<i> -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -fpie' 
</I>&gt;<i> --with-squid=/builddir/build/BUILD/squid-3.1.23
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> as I have problems using this squid34 package for FTP connections;
</I>&gt;&gt;&gt;<i> there are no shown icons, when going to e.g. <A HREF="ftp://ftp.adobe.com/">ftp://ftp.adobe.com/</A>
</I>&gt;&gt;&gt;<i> when I tell the browser to show the image then I get this squid 
</I>&gt;&gt;&gt;<i> generated message ...
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> the same config /etc/squid/squid.conf works with the default squid 
</I>&gt;&gt;&gt;<i> package ...
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &lt;message&gt;
</I>&gt;&gt;&gt;<i> While trying to retrieve the URL: 
</I>&gt;&gt;&gt;<i> <A HREF="http://proxy.local:3128/squid-internal-static/icons/silk/folder.png">http://proxy.local:3128/squid-internal-static/icons/silk/folder.png</A> 
</I>&gt;&gt;&gt;<i> &lt;<A HREF="http://zbox-ci323.waldinet.local:3128/squid-internal-static/icons/silk/folder.png">http://zbox-ci323.waldinet.local:3128/squid-internal-static/icons/silk/folder.png</A>&gt; 
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Notice the port number in that URL...
</I>&gt;&gt;<i>
</I>&gt;<i> yes I see the squid port 3128
</I>&gt;<i>
</I>&gt;<i> when I do this with the default squid package, there I get the icons, 
</I>&gt;<i> and when I want to get the URL of such an icon,
</I>&gt;<i> it shows e.g. 
</I>&gt;<i> <A HREF="ftp://ftp.adobe.com/squid-internal-static/icons/anthony-dir.gif">ftp://ftp.adobe.com/squid-internal-static/icons/anthony-dir.gif</A>
</I>&gt;<i>
</I>&gt;<i> when I add
</I>&gt;<i> global_internal_static off
</I>&gt;<i> to squid.conf at the squid34 package,
</I>&gt;<i> then there also no icons shown;
</I>&gt;<i> when I tell the browser to show the image then I get this squid 
</I>&gt;<i> generated message ...
</I>&gt;<i>
</I>&gt;<i> &lt;message&gt;
</I>&gt;<i> The following URL could not be retrieved: 
</I>&gt;<i> <A HREF="ftp://ftp.adobe.com/squid-internal-static/icons/silk/folder.png">ftp://ftp.adobe.com/squid-internal-static/icons/silk/folder.png</A>
</I>&gt;<i>
</I>&gt;<i> Squid sent the following FTP command:
</I>&gt;<i>
</I>&gt;<i>     *
</I>&gt;<i>
</I>&gt;<i>     CWD squid-internal-static
</I>&gt;<i>
</I>&gt;<i>     * 
</I>&gt;<i>
</I>&gt;<i> and then received this reply
</I>&gt;<i>
</I>&gt;<i>     *
</I>&gt;<i>
</I>&gt;<i>     Failed to change directory.
</I>&gt;<i>
</I>&gt;<i>     * 
</I>&gt;<i>
</I>&gt;<i> This might be caused by an FTP URL with an absolute path (which does 
</I>&gt;<i> not comply with RFC 1738).
</I>&gt;<i> If this is the cause, then the file can be found at 
</I>&gt;<i> <A HREF="ftp://ftp.adobe.com%2f2f/squid-internal-static/icons/silk/folder.png">ftp://ftp.adobe.com%2f2f/squid-internal-static/icons/silk/folder.png</A> 
</I>&gt;<i> &lt;<A HREF="ftp://ftp.adobe.com%2f/squid-internal-static/icons/silk/folder.png">ftp://ftp.adobe.com%2f/squid-internal-static/icons/silk/folder.png</A>&gt;.
</I>&gt;<i>
</I>&gt;<i> Your cache administrator is ...
</I>&gt;<i>
</I>&gt;<i> Generated Thu, 25 May 2017 18:57:52 GMT by proxy.local (squid/3.4.14)
</I>&gt;<i> &lt;/message&gt;
</I>&gt;<i>
</I>&gt;<i> what is running wrong here?
</I>&gt;<i> is there a setting I can change without having to allow
</I>&gt;<i> port 3128 traffic go through the proxy?
</I>&gt;<i> (this is not really logic, as the default squid package also doesn't 
</I>&gt;<i> allow port 3128 traffic go through ...)
</I>&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &lt;squid.conf&gt;
</I>&gt;&gt;&gt;<i> acl localnet src 192.168.1.0/24
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> acl SSL_ports port 443
</I>&gt;&gt;&gt;<i> acl Safe_ports port 80          # http
</I>&gt;&gt;&gt;<i> acl Safe_ports port 21          # ftp
</I>&gt;&gt;&gt;<i> acl Safe_ports port 443         # https
</I>&gt;&gt;&gt;<i> acl Safe_ports port 70          # gopher
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> You have removed the port range 1025-65535 from Safe_ports. So 
</I>&gt;&gt;<i> traffic with URL port 3128 is no longer permitted.
</I>&gt;<i> I configured on the clients this
</I>&gt;<i> <A HREF="http://proxy.local:3128">http://proxy.local:3128</A>
</I>&gt;<i> as proxy ...
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> Walter
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20170525/ca422116/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20170525/ca422116/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015431.html">[squid-users] CentOS6 and squid34 package ...
</A></li>
	<LI>Next message (by thread): <A HREF="015454.html">[squid-users] CentOS6 and squid34 package ...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15432">[ date ]</a>
              <a href="thread.html#15432">[ thread ]</a>
              <a href="subject.html#15432">[ subject ]</a>
              <a href="author.html#15432">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
