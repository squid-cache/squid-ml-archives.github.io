<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Help troubleshooting proxy&lt;--&gt;client https
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Help%20troubleshooting%20proxy%3C--%3Eclient%20https&In-Reply-To=%3CCA%2B8Eki1-a7jqQzGrM0XYwDz6d-VYi1Q6PPNK5g34HpdmF2-_Sg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015436.html">
   <LINK REL="Next"  HREF="015434.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Help troubleshooting proxy&lt;--&gt;client https</H1>
    <B>Masha Lifshin</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Help%20troubleshooting%20proxy%3C--%3Eclient%20https&In-Reply-To=%3CCA%2B8Eki1-a7jqQzGrM0XYwDz6d-VYi1Q6PPNK5g34HpdmF2-_Sg%40mail.gmail.com%3E"
       TITLE="[squid-users] Help troubleshooting proxy&lt;--&gt;client https">mlifshin at phantomdesign.com
       </A><BR>
    <I>Wed May 31 20:42:53 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="015436.html">[squid-users] Help troubleshooting proxy&lt;--&gt;client https
</A></li>
        <LI>Next message (by thread): <A HREF="015434.html">[squid-users] Youtube not TCP_HIT Squid3.5.21-25
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15488">[ date ]</a>
              <a href="thread.html#15488">[ thread ]</a>
              <a href="subject.html#15488">[ subject ]</a>
              <a href="author.html#15488">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear Alex,

Thank you very much for your helpful reply.

I have a follow up question.  What I am trying to achieve is an https
connection between the client and squid proxy, as well as listen on port 80
for http traffic, on port 443 for ssl traffic, and apply ssl-bump to the
ssl traffic.  I am having trouble expressing this in my config. Would the
http_port and https_port directives need to look like this?

http_port &lt;ip_address&gt;: &lt;<A HREF="http://172.30.0.67:443/">http://172.30.0.67:443/</A>&gt;80 ssl-bump
cert=/path/to/some.cert.pem generate-host-certificates=on
dynamic_cert_mem_cache_size=4MB tls-dh=/usr/local/squid/etc/dhparam.pem
https_port &lt;ip_address&gt;:443 &lt;<A HREF="http://172.30.0.67:443/">http://172.30.0.67:443/</A>&gt;
cert=/path/to/other.cert.pem
cipher=EECDH+ECDSA+AESGCM:EECDH+aRSA+AESGCM:EECDH+ECDSA+
SHA384:EECDH+ECDSA+SHA256:EECDH+aRSA+SHA384:EECDH+aRSA+
SHA256:EECDH+aRSA+RC4:EECDH:EDH+aRSA:!RC4:!aNULL:!eNULL:!
LOW:!3DES:!MD5:!EXP:!PSK:!SRP:!DSS

Also wondering what, if any, are the security issues with using port 80 for
the http traffic?

Thank you,
-Masha

On Fri, May 26, 2017 at 7:19 AM, Alex Rousskov &lt;
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt; wrote:

&gt;<i> On 05/26/2017 12:00 AM, Masha Lifshin wrote:
</I>&gt;<i> &gt; I have added an https_port directive
</I>&gt;<i> &gt; to squid.conf, but it must be misconfigured.
</I>&gt;<i>
</I>&gt;<i> &gt; http_port 172.30.0.67:443 ...
</I>&gt;<i> &gt; https_port 172.30.0.67:443 ...
</I>&gt;<i>
</I>&gt;<i> You are right -- your Squid is misconfigured. You cannot use the same
</I>&gt;<i> address for two ports. Unfortunately, Squid thinks that port binding
</I>&gt;<i> errors are a minor inconvenience and continues running after logging an
</I>&gt;<i> error message (that looks like many other benign error messages).
</I>&gt;<i>
</I>&gt;<i> Changing one of the ports will solve the &quot;same address&quot; problem
</I>&gt;<i> described above.
</I>&gt;<i>
</I>&gt;<i> Do not use port 443 for http_port. It makes triage extremely confusing
</I>&gt;<i> because port 443 usually implies SSL. Consider using port 3128 instead.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> HTH,
</I>&gt;<i>
</I>&gt;<i> Alex.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20170531/7a3b3f2e/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20170531/7a3b3f2e/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="015436.html">[squid-users] Help troubleshooting proxy&lt;--&gt;client https
</A></li>
	<LI>Next message (by thread): <A HREF="015434.html">[squid-users] Youtube not TCP_HIT Squid3.5.21-25
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15488">[ date ]</a>
              <a href="thread.html#15488">[ thread ]</a>
              <a href="subject.html#15488">[ subject ]</a>
              <a href="author.html#15488">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
