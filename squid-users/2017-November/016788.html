<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid doesn't reload webpage like other clients do
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20doesn%27t%20reload%20webpage%20like%20other%20clients%20do&In-Reply-To=%3C71449549-7349-1f6d-98ef-45585de812a3%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016813.html">
   <LINK REL="Next"  HREF="016796.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid doesn't reload webpage like other clients do</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20doesn%27t%20reload%20webpage%20like%20other%20clients%20do&In-Reply-To=%3C71449549-7349-1f6d-98ef-45585de812a3%40treenet.co.nz%3E"
       TITLE="[squid-users] Squid doesn't reload webpage like other clients do">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Nov  1 13:11:00 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016813.html">[squid-users] can't block streaming
</A></li>
        <LI>Next message (by thread): <A HREF="016796.html">[squid-users] how does Squid 3.5 parse https responce
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16788">[ date ]</a>
              <a href="thread.html#16788">[ thread ]</a>
              <a href="subject.html#16788">[ subject ]</a>
              <a href="author.html#16788">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 01/11/17 05:53, Alex Rousskov wrote:
&gt;<i> On 10/31/2017 02:51 AM, Amos Jeffries wrote:
</I>&gt;&gt;<i> That operational state (HTTP underway) also means RFC 7230 is the
</I>&gt;&gt;<i> relevant place to look for behaviour requirements. Section 6.3.1 says:
</I>&gt;<i> 
</I>&gt;&gt;<i>  &#160; A proxy MUST NOT automatically retry non-idempotent requests.
</I>&gt;<i> 
</I>&gt;&gt;<i> So it depends entirely on what type of HTTP request was being performed.
</I>&gt;<i> 
</I>&gt;<i> Unfortunately, it is more nuanced than that. The RFC section you are
</I>&gt;<i> quoting lives inside the &quot;6.3. Persistence&quot; section about persistent
</I>&gt;<i> connections. It also talks about retransmitting a &quot;sequence of
</I>&gt;<i> requests&quot;, further implying connection persistency scope. The old RFC
</I>&gt;<i> 2616 even gave a very pconn-specific example as the rationale.
</I>&gt;<i> 
</I>&gt;<i> Squid implementation assumes that all those requirements apply to
</I>&gt;<i> persistent connection race conditions and only to those conditions.
</I>&gt;<i> Whether that is what RFC authors wanted is not clear to me. It would be
</I>&gt;<i> nice to clarify that with the HTTP WG. Any volunteers?
</I>&gt;<i> 
</I>&gt;<i> Alex.
</I>&gt;<i> 
</I>
As the first line of that section says:
&quot;
    HTTP/1.1 defaults to the use of &quot;persistent connections&quot;
&quot;

So IMO it is reasonable to assume that the HTTP/1.1 portion of the 
traffic is always scoped as 'persistent'. Most of the section(s) are 
about issues later in the connection traffic, but those specific 
statements might be applied before the first transaction is complete.

The question seems to be more about whether we scope the period between 
SYN+ACK and first data bytes arriving to be governed by TCP or HTTP/1.1 
protocol. The HTTP side has at least those statements I referenced for 
better interoperable behaviour than currently coded.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016813.html">[squid-users] can't block streaming
</A></li>
	<LI>Next message (by thread): <A HREF="016796.html">[squid-users] how does Squid 3.5 parse https responce
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16788">[ date ]</a>
              <a href="thread.html#16788">[ thread ]</a>
              <a href="subject.html#16788">[ subject ]</a>
              <a href="author.html#16788">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
