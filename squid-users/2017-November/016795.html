<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 3.5 with nonblocking ecap adapter
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203.5%20with%20nonblocking%20ecap%20adapter&In-Reply-To=%3C91762f33-a47d-c8a0-200d-ce2c00546f6e%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016794.html">
   <LINK REL="Next"  HREF="016791.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 3.5 with nonblocking ecap adapter</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203.5%20with%20nonblocking%20ecap%20adapter&In-Reply-To=%3C91762f33-a47d-c8a0-200d-ce2c00546f6e%40measurement-factory.com%3E"
       TITLE="[squid-users] Squid 3.5 with nonblocking ecap adapter">rousskov at measurement-factory.com
       </A><BR>
    <I>Wed Nov  1 20:40:43 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016794.html">[squid-users] Squid 3.5 with nonblocking ecap adapter
</A></li>
        <LI>Next message (by thread): <A HREF="016791.html">[squid-users] Squid 3.5 with nonblocking ecap adapter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16795">[ date ]</a>
              <a href="thread.html#16795">[ thread ]</a>
              <a href="subject.html#16795">[ subject ]</a>
              <a href="author.html#16795">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/01/2017 11:45 AM, Yuri wrote:
&gt;<i> 01.11.2017 23:37, Alex Rousskov &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;&gt;&gt;&gt;<i> B) Use threads inside the adapter to make its operations asynchronous.
</I>
&gt;&gt;&gt;<i> AFAIK B) is impossible.
</I>
&gt;&gt;<i> It is not only possible but implemented in sample and production
</I>&gt;&gt;<i> adapters (as I have said later in the same email).
</I>
&gt;<i> &quot;Stop talking - just show the code.&quot; :) 
</I>
I have already pointed to the relevant code: For example, the eCAP
ClamAV adapter implements (B) since version 2.


&gt;<i> (Ideally - in C++, not in C. And
</I>&gt;<i> not adapter sample - it's illustrates nothing because it is mixture of
</I>&gt;<i> C++03 and pure C pthreads).
</I>
All eCAP adapters use C++ because eCAP API requires C++. Some may also
use C libraries (because there are no better C++ alternatives and/or for
other reasons). Your disqualification of adapters using C libraries in
general and pthreads in particular makes no sense to me in this context.
I assume it is just a misunderstanding of how things actually work and
recommend avoiding making broad statements about C inapplicability.


&gt;<i> yes, the host gives the body - but through the library. If I understand
</I>&gt;<i> the design correctly. Otherwise it is not clear, what does the library
</I>&gt;<i> have to do with and why is it needed?
</I>
In this context, the eCAP library role is mostly limited to allowing the
dynamic linker to find the right class method where the host application
calls the adapter or where the adapter calls the host application. The
library itself is a thin shim that does not &quot;do&quot; much besides declaring
method names. The eCAP library does not store body pieces, for example.
This makes phrases like &quot;body from ecap library&quot; invalid/misleading. In
my earlier email, I just wanted to clarify that misunderstanding in case
somebody stumbles upon this thread while trying to understand how things
work.

I do not intend to continue this thread because I find your messages too
hostile and not Squid-specific enough. If you have eCAP-specific
questions, please do not post them here. Use eCAP support channels
instead: <A HREF="http://www.e-cap.org/support/">http://www.e-cap.org/support/</A>


Thank you,

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016794.html">[squid-users] Squid 3.5 with nonblocking ecap adapter
</A></li>
	<LI>Next message (by thread): <A HREF="016791.html">[squid-users] Squid 3.5 with nonblocking ecap adapter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16795">[ date ]</a>
              <a href="thread.html#16795">[ thread ]</a>
              <a href="subject.html#16795">[ subject ]</a>
              <a href="author.html#16795">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
