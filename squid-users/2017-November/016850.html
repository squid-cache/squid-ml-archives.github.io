<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] SQUID memory error after vm.swappines changed from 60 to 10
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SQUID%20memory%20error%20after%20vm.swappines%20changed%0A%20from%2060%20to%2010&In-Reply-To=%3C86188b87-0cc3-343c-7b56-7f01354a3aa8%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016903.html">
   <LINK REL="Next"  HREF="016867.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] SQUID memory error after vm.swappines changed from 60 to 10</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SQUID%20memory%20error%20after%20vm.swappines%20changed%0A%20from%2060%20to%2010&In-Reply-To=%3C86188b87-0cc3-343c-7b56-7f01354a3aa8%40measurement-factory.com%3E"
       TITLE="[squid-users] SQUID memory error after vm.swappines changed from 60 to 10">rousskov at measurement-factory.com
       </A><BR>
    <I>Wed Nov  8 15:08:52 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016903.html">[squid-users] SQUID memory error after vm.swappines changed from 60 to 10
</A></li>
        <LI>Next message (by thread): <A HREF="016867.html">[squid-users] SQUID memory error after vm.swappines changed from 60 to 10
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16850">[ date ]</a>
              <a href="thread.html#16850">[ thread ]</a>
              <a href="subject.html#16850">[ subject ]</a>
              <a href="author.html#16850">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/08/2017 02:26 AM, Bike dernikov1 wrote:

&gt;<i> I hope that someone can explain what happened, why squid stopped working.
</I>
I can suggest a working theory: You did not have enough RAM before
vm.swappiness changes and the same insufficient RAM problem led to
failed system calls after you told the OS to free RAM (into swap) less
aggressively. The changes effectively decreased the amount of
immediately available RAM.

If Squid is the primary service on your server, then consider:

1. Removing RAID (for Squid disk cache).

2. Removing swap (or at least not counting on it and treating
   any non-trivial swap usage as a system misconfiguration).

3. Identify the primary RAM consumers and
   the factors that influence their memory usage.

The above actions may not solve your &quot;insufficient RAM&quot; problem (unless
RAID was the primary culprit) but they will give you a better starting
point for finding the solution. Others on the list can help you get
there, especially if you have specific questions.


Good luck,

Alex.

&gt;<i> The server has 24GB DDR3 memory,  disk swap set to 24GB, 12 CPU (24HT cores).
</I>&gt;<i> We have 2800 users, using  kerberos authentication, squidguard for
</I>&gt;<i> filtering, ldap authorization.
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016903.html">[squid-users] SQUID memory error after vm.swappines changed from 60 to 10
</A></li>
	<LI>Next message (by thread): <A HREF="016867.html">[squid-users] SQUID memory error after vm.swappines changed from 60 to 10
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16850">[ date ]</a>
              <a href="thread.html#16850">[ thread ]</a>
              <a href="subject.html#16850">[ subject ]</a>
              <a href="author.html#16850">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
