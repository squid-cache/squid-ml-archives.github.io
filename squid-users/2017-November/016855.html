<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Request/Response sizes for traffic over TCP_TUNNEL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Request/Response%20sizes%20for%20traffic%20over%20TCP_TUNNEL&In-Reply-To=%3CCAC_c4eoWk-RM4AK_kwS8g%3Ddn4G%3D3Jo4TLRT%3DNLWq%2B7N%3D_%2B802w%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016849.html">
   <LINK REL="Next"  HREF="016856.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Request/Response sizes for traffic over TCP_TUNNEL</H1>
    <B>Jeffrey Dunham</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Request/Response%20sizes%20for%20traffic%20over%20TCP_TUNNEL&In-Reply-To=%3CCAC_c4eoWk-RM4AK_kwS8g%3Ddn4G%3D3Jo4TLRT%3DNLWq%2B7N%3D_%2B802w%40mail.gmail.com%3E"
       TITLE="[squid-users] Request/Response sizes for traffic over TCP_TUNNEL">jeffrey.a.dunham at gmail.com
       </A><BR>
    <I>Wed Nov  8 23:38:34 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016849.html">[squid-users] squid and squidGuard redirect
</A></li>
        <LI>Next message (by thread): <A HREF="016856.html">[squid-users] Request/Response sizes for traffic over TCP_TUNNEL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16855">[ date ]</a>
              <a href="thread.html#16855">[ thread ]</a>
              <a href="subject.html#16855">[ subject ]</a>
              <a href="author.html#16855">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am using squid as a proxy and one of the tasks using the proxy is upload
some large files to S3 in AWS.
I'm trying to later on aggregate how much data was going through to S3 by
looking through the squid access log files.  The reality is, any way I can
tell how much traffic is going through to squid to S3 would be great, I was
going after the access file as it seemed most obvious.  However my logfiles
don't seem to show this information. I'm wondering if it's possible to show
this.  I thought that &lt;st and &gt;st would get me there.  I tried a few
different config settings for logging here's what it's at now:

logformat squid %ts.%03tu %6tr %&gt;a %&gt;A %Ss/%03&gt;Hs %&lt;st %&gt;st %rm %ru %un
%Sh/%&lt;A %mt

And my logs for a 200MB upload look like (this is broken into a multipart
upload):

1510181731.211  53953 &lt;ip&gt; &lt;vpn&gt; TCP_TUNNEL/200 3521 41 CONNECT
s3.amazonaws.com:443 - HIER_DIRECT/s3.amazonaws.com -
1510181731.991  54721 &lt;ip&gt; &lt;vpn&gt; TCP_TUNNEL/200 3865 41 CONNECT
s3.amazonaws.com:443 - HIER_DIRECT/s3.amazonaws.com -
1510181733.884  56646 &lt;ip&gt; &lt;vpn&gt; TCP_TUNNEL/200 3865 41 CONNECT
s3.amazonaws.com:443 - HIER_DIRECT/s3.amazonaws.com -
1510181737.049  59783 &lt;ip&gt; &lt;vpn&gt; TCP_TUNNEL/200 4209 41 CONNECT
s3.amazonaws.com:443 - HIER_DIRECT/s3.amazonaws.com -
1510181737.794  61246 &lt;ip&gt; &lt;vpn&gt; TCP_TUNNEL/200 5592 41 CONNECT
s3.amazonaws.com:443 - HIER_DIRECT/s3.amazonaws.com -
1510181737.796  60537 &lt;ip&gt; &lt;vpn&gt; TCP_TUNNEL/200 4178 41 CONNECT
s3.amazonaws.com:443 - HIER_DIRECT/s3.amazonaws.com -
1510181737.799  60529 &lt;ip&gt; &lt;vpn&gt; TCP_TUNNEL/200 3834 41 CONNECT
s3.amazonaws.com:443 - HIER_DIRECT/s3.amazonaws.com -
1510181737.800  60535 &lt;ip&gt; &lt;vpn&gt; TCP_TUNNEL/200 4178 41 CONNECT
s3.amazonaws.com:443 - HIER_DIRECT/s3.amazonaws.com -
1510181737.801  60531 &lt;ip&gt; &lt;vpn&gt; TCP_TUNNEL/200 4178 41 CONNECT
s3.amazonaws.com:443 - HIER_DIRECT/s3.amazonaws.com -
1510181737.807  60542 &lt;ip&gt; &lt;vpn&gt; TCP_TUNNEL/200 4209 41 CONNECT
s3.amazonaws.com:443 - HIER_DIRECT/s3.amazonaws.com -

Obviously there's nothing indicating the real size of the file that I can
tell, besides the fact that the connection is open awhile.

Any help would be appreciated!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20171108/b83928d4/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20171108/b83928d4/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016849.html">[squid-users] squid and squidGuard redirect
</A></li>
	<LI>Next message (by thread): <A HREF="016856.html">[squid-users] Request/Response sizes for traffic over TCP_TUNNEL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16855">[ date ]</a>
              <a href="thread.html#16855">[ thread ]</a>
              <a href="subject.html#16855">[ subject ]</a>
              <a href="author.html#16855">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
