<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] SQUID memory error after vm.swappines changed from 60 to 10
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SQUID%20memory%20error%20after%20vm.swappines%20changed%0A%20from%2060%20to%2010&In-Reply-To=%3Cf8132fc7-58b0-e427-d7ae-60204da73e3e%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016891.html">
   <LINK REL="Next"  HREF="016905.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] SQUID memory error after vm.swappines changed from 60 to 10</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SQUID%20memory%20error%20after%20vm.swappines%20changed%0A%20from%2060%20to%2010&In-Reply-To=%3Cf8132fc7-58b0-e427-d7ae-60204da73e3e%40measurement-factory.com%3E"
       TITLE="[squid-users] SQUID memory error after vm.swappines changed from 60 to 10">rousskov at measurement-factory.com
       </A><BR>
    <I>Mon Nov 13 15:36:02 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016891.html">[squid-users] SQUID memory error after vm.swappines changed from 60 to 10
</A></li>
        <LI>Next message (by thread): <A HREF="016905.html">[squid-users] SQUID memory error after vm.swappines changed from 60 to 10
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16898">[ date ]</a>
              <a href="thread.html#16898">[ thread ]</a>
              <a href="subject.html#16898">[ subject ]</a>
              <a href="author.html#16898">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/13/2017 02:34 AM, Bike dernikov1 wrote:
&gt;<i> On Fri, Nov 10, 2017 at 4:43 PM, Alex Rousskov wrote:
</I>&gt;&gt;<i> Squid swapping in production is an arguably worse disaster, as you have
</I>&gt;&gt;<i> learned. In many cases, it is better to deal with a lack of swap than to
</I>&gt;&gt;<i> rely on swap's magical effects that most humans poorly understand. YMMV.
</I>
&gt;<i> In this scenario, swap is backup cache (as I understand)?
</I>
In this scenario, swap is not a cache! In fact it is pretty much the
opposite:

* A cache is, by definition, an optional unreliable &quot;fast&quot; storage meant
to reduce the need to go to some &quot;slow&quot; storage.

* When in active use, swap is required reliable slow storage meant to
extend fast storage (RAM) capacity.

Do you see how almost every adjective in the first bullet is replaced
with an antonym in the second one?

Some services, including many databases, overallocate RAM to store
rarely used (computed and/or preloaded) data. When that data is swapped
out, the service often continues to operate normally because the data is
rarely accessed (and/or because swapping it in is still cheaper than
computing it from scratch).

With Squid, it is very difficult for the OS to correctly identify the
rarely used RAM areas to swap out. When the OS swaps out the wrong area,
Squid slows down (to access that area), which only increases the number
of concurrent transactions and, hence, the amount of RAM Squid needs to
operate, which triggers more wrong swap outs, creating a vicious cycle.


&gt;<i> Swap could be used  to translate back data to mem if used, but it
</I>&gt;<i> stays on disk and purge after some time if not used ?
</I>
The purging bit is wrong. Think of swap as very very very slow RAM.

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016891.html">[squid-users] SQUID memory error after vm.swappines changed from 60 to 10
</A></li>
	<LI>Next message (by thread): <A HREF="016905.html">[squid-users] SQUID memory error after vm.swappines changed from 60 to 10
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16898">[ date ]</a>
              <a href="thread.html#16898">[ thread ]</a>
              <a href="subject.html#16898">[ subject ]</a>
              <a href="author.html#16898">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
