<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Proxy does not send response for internal host
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Proxy%20does%20not%20send%20response%20for%20internal%20host&In-Reply-To=%3C7e0807cf-74e3-31b1-db2a-f0ec619220ce%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016900.html">
   <LINK REL="Next"  HREF="016904.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Proxy does not send response for internal host</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Proxy%20does%20not%20send%20response%20for%20internal%20host&In-Reply-To=%3C7e0807cf-74e3-31b1-db2a-f0ec619220ce%40treenet.co.nz%3E"
       TITLE="[squid-users] Proxy does not send response for internal host">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Nov 14 02:36:56 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016900.html">[squid-users] Proxy does not send response for internal host
</A></li>
        <LI>Next message (by thread): <A HREF="016904.html">[squid-users] Proxy does not send response for internal host
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16901">[ date ]</a>
              <a href="thread.html#16901">[ thread ]</a>
              <a href="subject.html#16901">[ subject ]</a>
              <a href="author.html#16901">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 14/11/17 11:21, tappdint wrote:
&gt;<i> I'm quite new to proxies/networking so I'll try and be as verbose as I can. I
</I>&gt;<i> have a VM that will request access to an internal host (dev.abc.com). This
</I>&gt;<i> host container and other containers which are dependencies are created
</I>&gt;<i> locally on my mac (using docker for mac). So I also run a docker squid
</I>&gt;<i> container  (datadog/squid) on my mac to allow that VM to use the same
</I>&gt;<i> network/access same hosts. From inside my VM when I use the proxy to curl
</I>&gt;<i> sites like Google/Facebook/Yahoo i get proper responses. But when I curl
</I>&gt;<i> this host I get an ERR_DNS_FAIL result.
</I>&gt;<i> 
</I>&gt;<i> &lt;div id=&quot;content&quot;&gt;
</I>&gt;<i> &lt;p&gt;The following error was encountered while trying to retrieve the URL:
</I>&gt;<i> <A HREF="http://dev.abc.com/">http://dev.abc.com/</A> &lt;<A HREF="http://dev.abc.com/">http://dev.abc.com/</A>&gt;  &lt;/p&gt;
</I>&gt;<i> 
</I>&gt;<i> &lt;blockquote id=&quot;error&quot;&gt;
</I>&gt;<i> &lt;p&gt;*Unable to determine IP address from host name &lt;q&gt;dev.abc.com&lt;/q&gt;*&lt;/p&gt;
</I>&gt;<i> &lt;/blockquote&gt;
</I>&gt;<i> 
</I>&gt;<i> &lt;p&gt;The DNS server returned:&lt;/p&gt;
</I>&gt;<i> &lt;blockquote id=&quot;data&quot;&gt;
</I>&gt;<i> &lt;pre&gt;Name Error: The domain name does not exist.&lt;/pre&gt;
</I>&gt;<i> &lt;/blockquote&gt;
</I>&gt;<i> 
</I>&gt;<i> &lt;p&gt;This means that the cache was not able to resolve the hostname presented
</I>&gt;<i> in the URL. Check if the address is correct.&lt;/p&gt;
</I>&gt;<i> 
</I>
There should be nothing mysterious here. The above error message text is 
literal and clear about the problem as can be. If you do not understand 
them please lookup the terms is uses.

&quot;the cache&quot; here is a less common term meaning your Squid. The others 
are all common networking names for the pieces and things happening.


&gt;<i> 
</I>&gt;<i> I've searched online for posts with similar errors but I'm still confused. I
</I>&gt;<i> *think* that the issue lies in my squid config but I'm not sure what exactly
</I>&gt;<i> I need to modify/add. I basically took the huge config file provided by the
</I>&gt;<i> image and removed all the unnecessary comments/options. The site said that
</I>&gt;<i> /Please note that the stock configuration available with the container is
</I>&gt;<i> set for local access
</I>&gt;<i> /. So thats currently what my config does. Here is what is looks like:
</I>&gt;<i> 
</I>... &lt;snip default Squid-3 config documentation file&gt;


&gt;<i> 
</I>&gt;<i> What modifications/config options should i be looking into so that my
</I>&gt;<i> internal host resolves? Thanks!
</I>&gt;<i> 
</I>
You need to either;

  * configure the VM running Squid to use a DNS resolver that knows what 
the internal domains are, or

  * configure the DNS resolver it is using to know those internal 
hostnames, or

  * configure your network using the standardized .local namespace 
intended for local hostnames and all the VMs to use m-DNS.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016900.html">[squid-users] Proxy does not send response for internal host
</A></li>
	<LI>Next message (by thread): <A HREF="016904.html">[squid-users] Proxy does not send response for internal host
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16901">[ date ]</a>
              <a href="thread.html#16901">[ thread ]</a>
              <a href="subject.html#16901">[ subject ]</a>
              <a href="author.html#16901">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
