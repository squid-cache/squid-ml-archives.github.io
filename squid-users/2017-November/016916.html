<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] block user agent
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20block%20user%20agent&In-Reply-To=%3C61ce5b3f-bb5e-235f-351c-f3b4ae339fd5%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016908.html">
   <LINK REL="Next"  HREF="016922.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] block user agent</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20block%20user%20agent&In-Reply-To=%3C61ce5b3f-bb5e-235f-351c-f3b4ae339fd5%40treenet.co.nz%3E"
       TITLE="[squid-users] block user agent">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Nov 16 07:55:11 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016908.html">[squid-users] block user agent
</A></li>
        <LI>Next message (by thread): <A HREF="016922.html">[squid-users] block user agent
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16916">[ date ]</a>
              <a href="thread.html#16916">[ thread ]</a>
              <a href="subject.html#16916">[ subject ]</a>
              <a href="author.html#16916">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 16/11/17 00:18, Vieri wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I'm trying to block some user agents (I know it's easy to fake, but most users won't try to fake that header value).
</I>&gt;<i> 
</I>&gt;<i> The following works:
</I>&gt;<i> 
</I>&gt;<i> acl denied_useragent browser Chrome
</I>&gt;<i> acl denied_useragent browser MSIE
</I>&gt;<i> acl denied_useragent browser Opera
</I>&gt;<i> acl denied_useragent browser Trident
</I>&gt;<i> [...]
</I>&gt;<i> http_access deny denied_useragent
</I>&gt;<i> http_reply_access deny denied_useragent
</I>&gt;<i> deny_info <A HREF="http://proxy-server1/proxy-error/?a=%a&amp;B=%B&amp;e=%e&amp;E=%E&amp;H=%H&amp;i=%i&amp;M=%M&amp;o=%o&amp;R=%R&amp;T=%T&amp;U=%U&amp;u=%u&amp;w=%w&amp;x=%x&amp;acl=denied_useragent">http://proxy-server1/proxy-error/?a=%a&amp;B=%B&amp;e=%e&amp;E=%E&amp;H=%H&amp;i=%i&amp;M=%M&amp;o=%o&amp;R=%R&amp;T=%T&amp;U=%U&amp;u=%u&amp;w=%w&amp;x=%x&amp;acl=denied_useragent</A> denied_useragent
</I>&gt;<i> 
</I>&gt;<i> The following works for HTTP sites, but not for HTTPS sites in an ssl-bumped setup:
</I>&gt;<i> 
</I>&gt;<i> acl allowed_useragent browser Firefox/
</I>&gt;<i> [...]
</I>&gt;<i> http_access deny !allowed_useragent
</I>&gt;<i> deny_info <A HREF="http://proxy-server1/proxy-error/?a=%a&amp;B=%B&amp;e=%e&amp;E=%E&amp;H=%H&amp;i=%i&amp;M=%M&amp;o=%o&amp;R=%R&amp;T=%T&amp;U=%U&amp;u=%u&amp;w=%w&amp;x=%x&amp;acl=allowed_useragent">http://proxy-server1/proxy-error/?a=%a&amp;B=%B&amp;e=%e&amp;E=%E&amp;H=%H&amp;i=%i&amp;M=%M&amp;o=%o&amp;R=%R&amp;T=%T&amp;U=%U&amp;u=%u&amp;w=%w&amp;x=%x&amp;acl=allowed_useragent</A> allowed_useragent
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> What could I try?
</I>&gt;<i> 
</I>
The User-Agent along with all HTTP layer details in HTTPS are hidden 
behind the encryption layer. TO do anything with them you must decrypt 
the traffic first. If you can decrypt it turns into regular HTTP traffic 
- the normal access controls should then work as-is.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016908.html">[squid-users] block user agent
</A></li>
	<LI>Next message (by thread): <A HREF="016922.html">[squid-users] block user agent
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16916">[ date ]</a>
              <a href="thread.html#16916">[ thread ]</a>
              <a href="subject.html#16916">[ subject ]</a>
              <a href="author.html#16916">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
