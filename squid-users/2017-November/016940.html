<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Slow speedtest results
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Slow%20speedtest%20results&In-Reply-To=%3C5d308d1a-8a40-1fe9-e56b-73d378708083%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016939.html">
   <LINK REL="Next"  HREF="016941.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Slow speedtest results</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Slow%20speedtest%20results&In-Reply-To=%3C5d308d1a-8a40-1fe9-e56b-73d378708083%40measurement-factory.com%3E"
       TITLE="[squid-users] Slow speedtest results">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Nov 16 20:55:38 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016939.html">[squid-users] Slow speedtest results
</A></li>
        <LI>Next message (by thread): <A HREF="016941.html">[squid-users] Slow speedtest results
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16940">[ date ]</a>
              <a href="thread.html#16940">[ thread ]</a>
              <a href="subject.html#16940">[ subject ]</a>
              <a href="author.html#16940">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/16/2017 12:18 PM, Evan Pierce wrote:

&gt;<i> Any idea why when using www.speedtest.net on my squid proxy ( squid
</I>&gt;<i> 3.5.27 on Centos 6.9) gives consistently false/bad speeds while doing a
</I>&gt;<i> speed test. The actual speed when downloading a file from a actual web
</I>&gt;<i> server like say the microsoft website is consistently good (30Mb/s fiber
</I>&gt;<i> - download speed 3.4MB/s) but a speed test done at the same time sits at
</I>&gt;<i> around 3 to 4Mb/s. I have tried turning caching off and various other
</I>&gt;<i> &quot;tuning&quot; settings on squid but nothing has fundamentally altered the
</I>&gt;<i> speed. Running command line speedtest gives a correct speedtest from the
</I>&gt;<i> squid host. Test machine was machine running firefox and chrome with the
</I>&gt;<i> proxy statically configured and wasn't under any load. A similarly
</I>&gt;<i> configured squid on smaller hardware and the same service provider runs
</I>&gt;<i> consistently gives an accurate speedtest (same centos and squid
</I>&gt;<i> versions). Any one have any ideas?
</I>
I trust you have checked cache.log, system log, and network interface
statistics for warnings, errors, and red flags unique to the non-working
use case.

Make sure that browser-proxy path is about the same in all tests you
compare. The problem might be related to browser-Squid communication.

Since you have a &quot;working&quot; case (on &quot;smaller hardware&quot;), I would try the
following using identical Squid versions:

1. Use the default Squid configuration with Squid memory caching
disabled on both boxes. Is one setup still a lot &quot;slower&quot; than the other?

2. Compare access.logs and mgr:info output of the two tests (one test
performed after a clean Squid start). Any unexpected differences?

3. If you have not already, test a Squid configuration identical to that
&quot;working&quot; case (you can rename directories/hostnames if really needed,
of course, but do not change anything you do not have to change). Is one
setup still a lot &quot;slower&quot; than the other?

4. Comparing cache.logs of virtually identically configured Squids with
debug_options set to ALL,3 or higher may expose the critical difference.
Debugging will slow Squid down a lot, of course, but perhaps you will
see that one of the Squids is doing something that the other one does
not do.


HTH,

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016939.html">[squid-users] Slow speedtest results
</A></li>
	<LI>Next message (by thread): <A HREF="016941.html">[squid-users] Slow speedtest results
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16940">[ date ]</a>
              <a href="thread.html#16940">[ thread ]</a>
              <a href="subject.html#16940">[ subject ]</a>
              <a href="author.html#16940">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
