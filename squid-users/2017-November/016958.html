<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] CONNECT + custom data
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20CONNECT%20%2B%20custom%20data&In-Reply-To=%3Cc5111c14-8508-06bc-dbd1-071f02b29e91%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016950.html">
   <LINK REL="Next"  HREF="016944.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] CONNECT + custom data</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20CONNECT%20%2B%20custom%20data&In-Reply-To=%3Cc5111c14-8508-06bc-dbd1-071f02b29e91%40measurement-factory.com%3E"
       TITLE="[squid-users] CONNECT + custom data">rousskov at measurement-factory.com
       </A><BR>
    <I>Fri Nov 17 15:19:49 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016950.html">[squid-users] CONNECT + custom data
</A></li>
        <LI>Next message (by thread): <A HREF="016944.html">[squid-users] squid 3.5.27 . https website
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16958">[ date ]</a>
              <a href="thread.html#16958">[ thread ]</a>
              <a href="subject.html#16958">[ subject ]</a>
              <a href="author.html#16958">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/16/2017 08:39 PM, Amos Jeffries wrote:
&gt;<i> On 17/11/17 15:09, Richard Peeters wrote:
</I>&gt;&gt;<i> I have a requirement to forward proxy an opaque stream of data. One of
</I>&gt;&gt;<i> the servers (acting as a client -A- to SQUID ) will use the CONNECT
</I>&gt;&gt;<i> method to connect to SQUID (on server B) and squid will then proxy
</I>&gt;&gt;<i> this data for A.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> My question is I want to pass metadata from A to B which B will strip
</I>&gt;&gt;<i> out before proxying the data outbound, and I cannot find a way to do
</I>&gt;&gt;<i> that.
</I>

&gt;<i> &quot;metadata&quot; in HTTP just means headers.
</I>&gt;<i> 
</I>&gt;<i> For custom hop-by-hop headers your client application needs to use
</I>&gt;<i> Connection: header to control their removal by the recieving next-hop
</I>&gt;<i> HTTP agent. See &lt;<A HREF="https://tools.ietf.org/html/rfc7230#section-6.1">https://tools.ietf.org/html/rfc7230#section-6.1</A>&gt;.
</I>&gt;<i> The custom header field-values can be accessed using the various
</I>&gt;<i> request/reply header regex ACL types, same as any header.
</I>
Also, if Squid (B) does not talk to another proxy and instead connects
to the origin server directly, then no Connection listing is required
for the CONNECT request headers. In this case, the CONNECT request
received by B is the only HTTP request; it is not forwarded anywhere.

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016950.html">[squid-users] CONNECT + custom data
</A></li>
	<LI>Next message (by thread): <A HREF="016944.html">[squid-users] squid 3.5.27 . https website
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16958">[ date ]</a>
              <a href="thread.html#16958">[ thread ]</a>
              <a href="subject.html#16958">[ subject ]</a>
              <a href="author.html#16958">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
