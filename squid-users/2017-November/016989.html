<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] different authentication for different ports
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20different%20authentication%20for%20different%20ports&In-Reply-To=%3Cc165ff4c-35a2-b6c5-3854-c30ff90a5df1%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016986.html">
   <LINK REL="Next"  HREF="016998.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] different authentication for different ports</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20different%20authentication%20for%20different%20ports&In-Reply-To=%3Cc165ff4c-35a2-b6c5-3854-c30ff90a5df1%40treenet.co.nz%3E"
       TITLE="[squid-users] different authentication for different ports">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Nov 21 03:13:30 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016986.html">[squid-users] different authentication for different ports
</A></li>
        <LI>Next message (by thread): <A HREF="016998.html">[squid-users] different authentication for different ports
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16989">[ date ]</a>
              <a href="thread.html#16989">[ thread ]</a>
              <a href="subject.html#16989">[ subject ]</a>
              <a href="author.html#16989">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 21/11/17 06:56, Paul Hackmann wrote:
&gt;<i> Amos,
</I>&gt;<i> 
</I>&gt;<i> If the website that is being asked for is not in the whitelist, won't it 
</I>&gt;<i> fall through and ask for authentication?&#160; That is how it seems to work 
</I>&gt;<i> to me.&#160; That's why I am thinking I need 2 different ports or something 
</I>&gt;<i> to do what I want.
</I>
You do need two different ports regardless of the http_access rules. One 
for the forward/explicit proxy traffic and one for the intercept/tproxy 
traffic. The TCP IP:port details for each of those &quot;modes&quot; is given in 
completely different ways and the HTTP message syntax is also different 
so the *cannot* be delivered to the same ports.


A whitelist generally is formed from two lines, one allowing and one 
denying everything else.

If 'everything else' is defined as just the stuff arriving in one 
specific port you get this:

  http_port 3128
  http_port 3129 intercept

  acl portX myportname 3129

  http_access allow portX whitelist
  http_access deny portX

  http_access deny !login
  ...

Amos


&gt;<i> 
</I>&gt;<i> PH
</I>&gt;<i> 
</I>&gt;<i> On Mon, Nov 20, 2017 at 11:38 AM, Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A> 
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i>     On 21/11/17 05:02, Paul Hackmann wrote:
</I>&gt;<i> 
</I>&gt;<i>         Hi all.&#160; I've got a fairly basic squid config set up on linux. 
</I>&gt;<i>         I have basic authentication set up on it to the default 3128
</I>&gt;<i>         port, and it works just fine.&#160; I would like to keep this
</I>&gt;<i>         configuration.&#160; However, I would like to set up another port
</I>&gt;<i>         that only allows a certain whitelist of websites that doesn't
</I>&gt;<i>         require or ask for authentication.&#160; I want to set this up for
</I>&gt;<i>         certain apps that don't have proxy settings built into them.&#160; I
</I>&gt;<i>         want windows to be able to connect to some sites, but not
</I>&gt;<i>         everything and if it can't reach the site, I don't want it to
</I>&gt;<i>         ask for credentials.&#160; With my current configuration, it asks for
</I>&gt;<i>         credentials for any app that is trying to connect to a
</I>&gt;<i>         non-whitelisted website.&#160; Is this configuration possible and do
</I>&gt;<i>         you have an example?&#160; Sorry if this has been answered before, I
</I>&gt;<i>         am very green to squid yet.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     Simply place the http_access rules for handling that traffic above
</I>&gt;<i>     the first line which requires authentication.
</I>&gt;<i> 
</I>&gt;<i>      &#160; http_access ... lines that dont require auth.
</I>&gt;<i> 
</I>&gt;<i>      &#160; acl login proxy_auth REQUIRED
</I>&gt;<i>      &#160; http_access deny !login
</I>&gt;<i> 
</I>&gt;<i>      &#160; http_access ... rules for authenticated users.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     Amos
</I>&gt;<i>     _______________________________________________
</I>&gt;<i>     squid-users mailing list
</I>&gt;<i>     <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i>     <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>     &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Paul Hackmann
</I>&gt;<i> Sims TV/Haven Electronics
</I>&gt;<i> 121 N. Vine St.
</I>&gt;<i> West Union, IA. 52175
</I>&gt;<i> 563-422-5751 &lt;tel:(563)%20422-5751&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> 
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016986.html">[squid-users] different authentication for different ports
</A></li>
	<LI>Next message (by thread): <A HREF="016998.html">[squid-users] different authentication for different ports
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16989">[ date ]</a>
              <a href="thread.html#16989">[ thread ]</a>
              <a href="subject.html#16989">[ subject ]</a>
              <a href="author.html#16989">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
