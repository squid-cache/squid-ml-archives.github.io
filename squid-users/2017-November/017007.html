<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] forward_max_tries 1 has no effect
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20forward_max_tries%201%20has%20no%20effect&In-Reply-To=%3Cfe6c5513-20c9-4b41-467a-9d199e38f20b%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017006.html">
   <LINK REL="Next"  HREF="017011.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] forward_max_tries 1 has no effect</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20forward_max_tries%201%20has%20no%20effect&In-Reply-To=%3Cfe6c5513-20c9-4b41-467a-9d199e38f20b%40treenet.co.nz%3E"
       TITLE="[squid-users] forward_max_tries 1 has no effect">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Nov 23 08:32:39 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="017006.html">[squid-users] forward_max_tries 1 has no effect
</A></li>
        <LI>Next message (by thread): <A HREF="017011.html">[squid-users] forward_max_tries 1 has no effect
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17007">[ date ]</a>
              <a href="thread.html#17007">[ thread ]</a>
              <a href="subject.html#17007">[ subject ]</a>
              <a href="author.html#17007">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 23/11/17 14:20, Ivan Larionov wrote:
&gt;<i> Hello.
</I>&gt;<i> 
</I>&gt;<i> We have an issue with squid when it tries to re-forward / retry failed 
</I>&gt;<i> request even when&#160;forward_max_tries is set to 1. The situation when it 
</I>&gt;<i> happens is when there's no response, parent just closes the connection.
</I>&gt;<i> 
</I>...
&gt;<i> 
</I>&gt;<i> It doesn't happen 100% times. Sometimes squid returns 502 after the 1st 
</I>&gt;<i> try, sometimes it retries once. Also I haven't seen more than 1 retry.
</I>&gt;<i> 
</I>
Please enable debug_options 44,2 to see what destinations your Squid is 
actually finding.

max_forward_tries is just a rough cap on the number of server names 
which can be found when generating that list. The actual destinations 
count can exceed it if one or more of the servers happens to have 
multiple IPs to try.

The overall transaction can involve retries if one of the other layers 
(TCP or HTTP) contains retry semantics to a single server.



&gt;<i> Could it be a bug? We'd really like to disable these retries.
</I>&gt;<i> 
</I>
Why are trying to break HTTP?
What is the actual problem you are trying to resolve here?


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="017006.html">[squid-users] forward_max_tries 1 has no effect
</A></li>
	<LI>Next message (by thread): <A HREF="017011.html">[squid-users] forward_max_tries 1 has no effect
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17007">[ date ]</a>
              <a href="thread.html#17007">[ thread ]</a>
              <a href="subject.html#17007">[ subject ]</a>
              <a href="author.html#17007">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
