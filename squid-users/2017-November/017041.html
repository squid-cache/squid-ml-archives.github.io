<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] forward_max_tries 1 has no effect
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20forward_max_tries%201%20has%20no%20effect&In-Reply-To=%3CCAHvB88wh%2Bsy7WNSbBcpDuX82YXtUtOTUqdS11WdK1DNpm-LSzw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017036.html">
   <LINK REL="Next"  HREF="017013.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] forward_max_tries 1 has no effect</H1>
    <B>Ivan Larionov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20forward_max_tries%201%20has%20no%20effect&In-Reply-To=%3CCAHvB88wh%2Bsy7WNSbBcpDuX82YXtUtOTUqdS11WdK1DNpm-LSzw%40mail.gmail.com%3E"
       TITLE="[squid-users] forward_max_tries 1 has no effect">xeron.oskom at gmail.com
       </A><BR>
    <I>Wed Nov 29 21:15:33 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="017036.html">[squid-users] forward_max_tries 1 has no effect
</A></li>
        <LI>Next message (by thread): <A HREF="017013.html">[squid-users] Fwd: [Squid-3.5.20]Squid transparent proxy http/https without client site config
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17041">[ date ]</a>
              <a href="thread.html#17041">[ thread ]</a>
              <a href="subject.html#17041">[ subject ]</a>
              <a href="author.html#17041">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Alex.

Unfortunately I don't have enough C/C++ skills to fix it.

I've created a bug report &#8211;
<A HREF="https://bugs.squid-cache.org/show_bug.cgi?id=4788">https://bugs.squid-cache.org/show_bug.cgi?id=4788</A>

We've also changed parent behavior so it will not silently close the
connection but will return 502 in this exact situation and seems like it
fixes unexpected squid re-forward.

On Tue, Nov 28, 2017 at 7:12 PM, Alex Rousskov &lt;
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt; wrote:

&gt;<i> On 11/28/2017 02:27 PM, Ivan Larionov wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Another interesting fact is that I can't reproduce this issue if squid
</I>&gt;<i> &gt; has no other traffic except my testing requests. But it's easy to
</I>&gt;<i> &gt; reproduce when server has other traffic.
</I>&gt;<i>
</I>&gt;<i> I did not check your logs carefully, but I believe that (when things do
</I>&gt;<i> not work the way you expect) your Squid is retrying a failed persistent
</I>&gt;<i> connection (rather than re-forwarding the request after receiving a bad
</I>&gt;<i> response). See the &quot;pconn race happened&quot; line below:
</I>&gt;<i>
</I>&gt;<i> &gt; 1_retry.log:2017/11/28 12:55:12.731| 17,3| FwdState.cc(416) fail:
</I>&gt;<i> ERR_ZERO_SIZE_OBJECT &quot;Bad Gateway&quot;
</I>&gt;<i> &gt; 1_retry.log:2017/11/28 12:55:12.731| 17,5| FwdState.cc(430) fail: pconn
</I>&gt;<i> race happened
</I>&gt;<i> &gt; 1_retry.log:2017/11/28 12:55:12.731| 93,5| AsyncJob.cc(84) mustStop:
</I>&gt;<i> HttpStateData will stop, reason: HttpStateData::continueAfterParsingHeader
</I>&gt;<i> &gt; 1_retry.log:2017/11/28 12:55:12.731| 17,3| FwdState.cc(618) retryOrBail:
</I>&gt;<i> re-forwarding (1 tries, 40 secs)
</I>&gt;<i> &gt; 1_retry.log:2017/11/28 12:55:12.731| 17,4| FwdState.cc(621) retryOrBail:
</I>&gt;<i> retrying the same destination
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Assuming you tested with forward_max_tries set to 1, the retryOrBail
</I>&gt;<i> lines above confirm the off-by-one problem I was describing in my
</I>&gt;<i> previous response.
</I>&gt;<i>
</I>&gt;<i> AFAICT, compensating by setting forward_max_tries to zero will _not_
</I>&gt;<i> work (for reasons unrelated to the problem at hand).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> FWIW, your current options include those outlined at
</I>&gt;<i> <A HREF="http://wiki.squid-cache.org/SquidFaq/AboutSquid#How_to">http://wiki.squid-cache.org/SquidFaq/AboutSquid#How_to</A>_
</I>&gt;<i> add_a_new_Squid_feature.2C_enhance.2C_of_fix_something.3F
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Alex.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; On Tue, Nov 28, 2017 at 7:32 AM, Alex Rousskov wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     On 11/27/2017 05:19 PM, Ivan Larionov wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     &gt; I see retries only when squid config has 2 parents. If I comment
</I>&gt;<i> out
</I>&gt;<i> &gt;     &gt; everything related to &quot;newproxy&quot; I can't reproduce this behavior
</I>&gt;<i> anymore.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     The posted logs are not detailed enough to confirm or deny that IMO,
</I>&gt;<i> but
</I>&gt;<i> &gt;     I suspect that you are dealing with at least one bug.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     &gt; <A HREF="https://wiki.squid-cache.org/SquidFaq/InnerWorkings#When">https://wiki.squid-cache.org/SquidFaq/InnerWorkings#When</A>_
</I>&gt;<i> does_Squid_re-forward_a_client_request.3F
</I>&gt;<i> &gt;     &lt;<A HREF="https://wiki.squid-cache.org/SquidFaq/InnerWorkings#When">https://wiki.squid-cache.org/SquidFaq/InnerWorkings#When</A>_
</I>&gt;<i> does_Squid_re-forward_a_client_request.3F&gt;
</I>&gt;<i> &gt;     &gt;
</I>&gt;<i> &gt;     &gt;&gt; Squid does not try to re-forward a request if at least one of the
</I>&gt;<i> following conditions is true:
</I>&gt;<i> &gt;     &gt;&gt;
</I>&gt;<i> &gt;     &gt;&gt; The number of forwarding attempts exceeded forward_max_tries. For
</I>&gt;<i> &gt;     &gt;&gt; example, if you set forward_max_tries to 1 (one), then no requests
</I>&gt;<i> &gt;     &gt;&gt; will be re-forwarded.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     AFAICT, there is an off-by-one bug in Squid that violates the above:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     &gt;     if (n_tries &gt; Config.forward_max_tries)
</I>&gt;<i> &gt;     &gt;         return false;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     The n_tries counter is incremented before Squid makes a request
</I>&gt;<i> &gt;     forwarding attempt. With n_tries and Config.forward_max_tries both
</I>&gt;<i> set
</I>&gt;<i> &gt;     to 1, the quoted FwdState::checkRetry() code will not prevent
</I>&gt;<i> &gt;     re-forwarding. There is a similar problem in FwdState::reforward().
</I>&gt;<i> This
</I>&gt;<i> &gt;     reasoning needs confirmation/testing.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Please note that simply changing the &quot;&gt;&quot; operator to &quot;&gt;=&quot; may break
</I>&gt;<i> &gt;     other things in a difficult-to-detect-by-simple-tests ways. The
</I>&gt;<i> correct
</I>&gt;<i> &gt;     fix may be more complex than it looks and may involve making policy
</I>&gt;<i> &gt;     decisions regarding forward_max_tries meaning. The best fix would
</I>&gt;<i> remove
</I>&gt;<i> &gt;     checkRetry() and reforward() duplication. This code is difficult to
</I>&gt;<i> work
</I>&gt;<i> &gt;     with; many related code names are misleading.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     &gt;&gt; Squid has no alternative destinations to try. Please note that
</I>&gt;<i> &gt;     &gt;&gt; alternative destinations may include multiple next hop IP
</I>&gt;<i> addresses
</I>&gt;<i> &gt;     &gt;&gt; and multiple peers.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     The fact that Squid sends two requests to the same peer with only one
</I>&gt;<i> &gt;     peer address selected suggests that Squid is retrying a failed
</I>&gt;<i> &gt;     persistent connection rather than re-forwarding after receiving a bad
</I>&gt;<i> &gt;     response. Again, the logs are not detailed enough to distinguish the
</I>&gt;<i> two
</I>&gt;<i> &gt;     cases. I can only see that a single peer/destination address was
</I>&gt;<i> &gt;     selected (not two), which is correct/expected behavior. I cannot see
</I>&gt;<i> &gt;     what happened next with sufficient detail.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Going forward, you have several options, including:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     A. Post a link to compressed ALL,7+ logs to confirm bug(s).
</I>&gt;<i> &gt;     B. Fix the broken condition(s) in FwdState. See above.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     HTH,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Alex.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:53:40.542| 5,2| TcpAcceptor.cc(220) doAccept: New
</I>&gt;<i> connection on FD 15
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:53:40.542| 5,2| TcpAcceptor.cc(295) acceptNext:
</I>&gt;<i> connection
</I>&gt;<i> &gt;     &gt; on local=0.0.0.0:3128 &lt;<A HREF="http://0.0.0.0:3128">http://0.0.0.0:3128</A>&gt; &lt;<A HREF="http://0.0.0.0:3128">http://0.0.0.0:3128</A>&gt;
</I>&gt;<i> &gt;     remote=[::] FD 15 flags=9
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:53:40.543| 11,2| client_side.cc(2372)
</I>&gt;<i> parseHttpRequest:
</I>&gt;<i> &gt;     &gt; HTTP Client local=127.0.0.1:3128 &lt;<A HREF="http://127.0.0.1:3128">http://127.0.0.1:3128</A>&gt;
</I>&gt;<i> &gt;     &lt;<A HREF="http://127.0.0.1:3128">http://127.0.0.1:3128</A>&gt;
</I>&gt;<i> &gt;     &gt; remote=127.0.0.1:53798 &lt;<A HREF="http://127.0.0.1:53798">http://127.0.0.1:53798</A>&gt;
</I>&gt;<i> &gt;     &lt;<A HREF="http://127.0.0.1:53798">http://127.0.0.1:53798</A>&gt; FD 45 flags=1
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:53:40.543| 11,2| client_side.cc(2373)
</I>&gt;<i> parseHttpRequest:
</I>&gt;<i> &gt;     &gt; HTTP Client REQUEST:
</I>&gt;<i> &gt;     &gt; ---------
</I>&gt;<i> &gt;     &gt; GET <A HREF="http://HOST:12345/">http://HOST:12345/</A> HTTP/1.1
</I>&gt;<i> &gt;     &gt; Host: HOST:12345
</I>&gt;<i> &gt;     &gt; User-Agent: curl/7.51.0
</I>&gt;<i> &gt;     &gt; Accept: */*
</I>&gt;<i> &gt;     &gt; Proxy-Connection: Keep-Alive
</I>&gt;<i> &gt;     &gt;
</I>&gt;<i> &gt;     &gt;
</I>&gt;<i> &gt;     &gt; ----------
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:53:40.543| 85,2| client_side_request.cc(745)
</I>&gt;<i> &gt;     &gt; clientAccessCheckDone: The request GET <A HREF="http://HOST:12345/">http://HOST:12345/</A> is
</I>&gt;<i> ALLOWED;
</I>&gt;<i> &gt;     &gt; last ACL checked: localhost
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:53:40.543| 85,2| client_side_request.cc(721)
</I>&gt;<i> &gt;     &gt; clientAccessCheck2: No adapted_http_access configuration. default:
</I>&gt;<i> ALLOW
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:53:40.543| 85,2| client_side_request.cc(745)
</I>&gt;<i> &gt;     &gt; clientAccessCheckDone: The request GET <A HREF="http://HOST:12345/">http://HOST:12345/</A> is
</I>&gt;<i> ALLOWED;
</I>&gt;<i> &gt;     &gt; last ACL checked: localhost
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:53:40.543| 17,2| FwdState.cc(133) FwdState:
</I>&gt;<i> Forwarding
</I>&gt;<i> &gt;     &gt; client request local=127.0.0.1:3128 &lt;<A HREF="http://127.0.0.1:3128">http://127.0.0.1:3128</A>&gt;
</I>&gt;<i> &gt;     &lt;<A HREF="http://127.0.0.1:3128">http://127.0.0.1:3128</A>&gt;
</I>&gt;<i> &gt;     &gt; remote=127.0.0.1:53798 &lt;<A HREF="http://127.0.0.1:53798">http://127.0.0.1:53798</A>&gt;
</I>&gt;<i> &gt;     &lt;<A HREF="http://127.0.0.1:53798">http://127.0.0.1:53798</A>&gt; FD 45 flags=1,
</I>&gt;<i> &gt;     &gt; url=<A HREF="http://HOST:12345/">http://HOST:12345/</A>
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:53:40.543| 44,2| peer_select.cc(258)
</I>&gt;<i> peerSelectDnsPaths:
</I>&gt;<i> &gt;     &gt; Find IP destination for: <A HREF="http://HOST:12345/">http://HOST:12345/</A>' via 127.0.0.1
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:53:40.543| 44,2| peer_select.cc(280)
</I>&gt;<i> peerSelectDnsPaths:
</I>&gt;<i> &gt;     &gt; Found sources for '<A HREF="http://HOST:12345/">http://HOST:12345/</A>'
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:53:40.543| 44,2| peer_select.cc(281)
</I>&gt;<i> peerSelectDnsPaths:
</I>&gt;<i> &gt;     &gt;  always_direct = DENIED
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:53:40.543| 44,2| peer_select.cc(282)
</I>&gt;<i> peerSelectDnsPaths:
</I>&gt;<i> &gt;     &gt;   never_direct = ALLOWED
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:53:40.543| 44,2| peer_select.cc(292)
</I>&gt;<i> peerSelectDnsPaths:
</I>&gt;<i> &gt;     &gt;     cache_peer = local=127.0.0.3 remote=127.0.0.1:18070 &lt;
</I>&gt;<i> <A HREF="http://127.0.0.1:18070">http://127.0.0.1:18070</A>&gt;
</I>&gt;<i> &gt;     &gt; &lt;<A HREF="http://127.0.0.1:18070">http://127.0.0.1:18070</A>&gt; flags=1
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:53:40.543| 44,2| peer_select.cc(295)
</I>&gt;<i> peerSelectDnsPaths:
</I>&gt;<i> &gt;     &gt;       timedout = 0
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:53:40.543| 11,2| http.cc(2229) sendRequest: HTTP
</I>&gt;<i> Server
</I>&gt;<i> &gt;     &gt; local=127.0.0.3:57091 &lt;<A HREF="http://127.0.0.3:57091">http://127.0.0.3:57091</A>&gt;
</I>&gt;<i> &gt;     &lt;<A HREF="http://127.0.0.3:57091">http://127.0.0.3:57091</A>&gt; remote=127.0.0.1:18070 &lt;
</I>&gt;<i> <A HREF="http://127.0.0.1:18070">http://127.0.0.1:18070</A>&gt;
</I>&gt;<i> &gt;     &gt; &lt;<A HREF="http://127.0.0.1:18070">http://127.0.0.1:18070</A>&gt; FD 40 flags=1
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:53:40.543| 11,2| http.cc(2230) sendRequest: HTTP
</I>&gt;<i> Server
</I>&gt;<i> &gt;     &gt; REQUEST:
</I>&gt;<i> &gt;     &gt; ---------
</I>&gt;<i> &gt;     &gt; GET <A HREF="http://HOST:12345/">http://HOST:12345/</A> HTTP/1.1
</I>&gt;<i> &gt;     &gt; User-Agent: curl/7.51.0
</I>&gt;<i> &gt;     &gt; Accept: */*
</I>&gt;<i> &gt;     &gt; Host: HOST:12345
</I>&gt;<i> &gt;     &gt; Cache-Control: max-age=259200
</I>&gt;<i> &gt;     &gt; Connection: keep-alive
</I>&gt;<i> &gt;     &gt;
</I>&gt;<i> &gt;     &gt;
</I>&gt;<i> &gt;     &gt; ----------
</I>&gt;<i> &gt;     &gt;
</I>&gt;<i> &gt;     &gt; [SKIPPED 40 seconds until parent closes TCP connection with
</I>&gt;<i> FIN,ACK]
</I>&gt;<i> &gt;     &gt;
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:54:20.627| 11,2| http.cc(1299)
</I>&gt;<i> continueAfterParsingHeader:
</I>&gt;<i> &gt;     &gt; WARNING: HTTP: Invalid Response: No object data received for
</I>&gt;<i> &gt;     &gt; <A HREF="http://HOST:12345/">http://HOST:12345/</A> AKA HOST/
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:54:20.627| 17,2| FwdState.cc(655)
</I>&gt;<i> &gt;     &gt; handleUnregisteredServerEnd: self=0x3e31838*2 err=0x409b338
</I>&gt;<i> &gt;     &gt; <A HREF="http://HOST:12345/">http://HOST:12345/</A>
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:54:20.627| 11,2| http.cc(2229) sendRequest: HTTP
</I>&gt;<i> Server
</I>&gt;<i> &gt;     &gt; local=127.0.0.3:41355 &lt;<A HREF="http://127.0.0.3:41355">http://127.0.0.3:41355</A>&gt;
</I>&gt;<i> &gt;     &lt;<A HREF="http://127.0.0.3:41355">http://127.0.0.3:41355</A>&gt; remote=127.0.0.1:18070 &lt;
</I>&gt;<i> <A HREF="http://127.0.0.1:18070">http://127.0.0.1:18070</A>&gt;
</I>&gt;<i> &gt;     &gt; &lt;<A HREF="http://127.0.0.1:18070">http://127.0.0.1:18070</A>&gt; FD 40 flags=1
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:54:20.627| 11,2| http.cc(2230) sendRequest: HTTP
</I>&gt;<i> Server
</I>&gt;<i> &gt;     &gt; REQUEST:
</I>&gt;<i> &gt;     &gt; ---------
</I>&gt;<i> &gt;     &gt; GET <A HREF="http://HOST:12345/">http://HOST:12345/</A> HTTP/1.1
</I>&gt;<i> &gt;     &gt; User-Agent: curl/7.51.0
</I>&gt;<i> &gt;     &gt; Accept: */*
</I>&gt;<i> &gt;     &gt; Host: HOST:12345
</I>&gt;<i> &gt;     &gt; Cache-Control: max-age=259200
</I>&gt;<i> &gt;     &gt; Connection: keep-alive
</I>&gt;<i> &gt;     &gt;
</I>&gt;<i> &gt;     &gt;
</I>&gt;<i> &gt;     &gt; ----------
</I>&gt;<i> &gt;     &gt;
</I>&gt;<i> &gt;     &gt; [SKIPPED 40 seconds again until parent closes TCP connection with
</I>&gt;<i> FIN,ACK]
</I>&gt;<i> &gt;     &gt;
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:55:00.728| ctx: enter level  0: '<A HREF="http://HOST:12345/">http://HOST:12345/</A>'
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:55:00.728| 11,2| http.cc(719) processReplyHeader:
</I>&gt;<i> HTTP
</I>&gt;<i> &gt;     &gt; Server local=127.0.0.3:41355 &lt;<A HREF="http://127.0.0.3:41355">http://127.0.0.3:41355</A>&gt;
</I>&gt;<i> &gt;     &lt;<A HREF="http://127.0.0.3:41355">http://127.0.0.3:41355</A>&gt;
</I>&gt;<i> &gt;     &gt; remote=127.0.0.1:18070 &lt;<A HREF="http://127.0.0.1:18070">http://127.0.0.1:18070</A>&gt;
</I>&gt;<i> &gt;     &lt;<A HREF="http://127.0.0.1:18070">http://127.0.0.1:18070</A>&gt; FD 40 flags=1
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:55:00.728| 11,2| http.cc(720) processReplyHeader:
</I>&gt;<i> HTTP
</I>&gt;<i> &gt;     &gt; Server REPLY:
</I>&gt;<i> &gt;     &gt; ---------
</I>&gt;<i> &gt;     &gt; HTTP/1.0 502 Bad Gateway
</I>&gt;<i> &gt;     &gt; Cache-Control: no-cache
</I>&gt;<i> &gt;     &gt; Connection: close
</I>&gt;<i> &gt;     &gt; Content-Type: text/html
</I>&gt;<i> &gt;     &gt;
</I>&gt;<i> &gt;     &gt; &lt;html&gt;&lt;body&gt;&lt;h1&gt;502 Bad Gateway&lt;/h1&gt;
</I>&gt;<i> &gt;     &gt; The server returned an invalid or incomplete response.
</I>&gt;<i> &gt;     &gt; &lt;/body&gt;&lt;/html&gt;
</I>&gt;<i> &gt;     &gt;
</I>&gt;<i> &gt;     &gt; ----------
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:55:00.728| ctx: exit level  0
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:55:00.728| 20,2| store.cc(996) checkCachable:
</I>&gt;<i> &gt;     &gt; StoreEntry::checkCachable: NO: not cachable
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:55:00.728| 20,2| store.cc(996) checkCachable:
</I>&gt;<i> &gt;     &gt; StoreEntry::checkCachable: NO: not cachable
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:55:00.728| 88,2| client_side_reply.cc(2073)
</I>&gt;<i> &gt;     &gt; processReplyAccessResult: The reply for GET <A HREF="http://HOST:12345/">http://HOST:12345/</A> is
</I>&gt;<i> &gt;     &gt; ALLOWED, because it matched (access_log
</I>&gt;<i> stdio:/var/log/squid/access.log
</I>&gt;<i> &gt;     &gt; line)
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:55:00.728| 11,2| client_side.cc(1409)
</I>&gt;<i> sendStartOfMessage:
</I>&gt;<i> &gt;     &gt; HTTP Client local=127.0.0.1:3128 &lt;<A HREF="http://127.0.0.1:3128">http://127.0.0.1:3128</A>&gt;
</I>&gt;<i> &gt;     &lt;<A HREF="http://127.0.0.1:3128">http://127.0.0.1:3128</A>&gt;
</I>&gt;<i> &gt;     &gt; remote=127.0.0.1:53798 &lt;<A HREF="http://127.0.0.1:53798">http://127.0.0.1:53798</A>&gt;
</I>&gt;<i> &gt;     &lt;<A HREF="http://127.0.0.1:53798">http://127.0.0.1:53798</A>&gt; FD 45 flags=1
</I>&gt;<i> &gt;     &gt; 2017/11/27 15:55:00.728| 11,2| client_side.cc(1410)
</I>&gt;<i> &gt;     sendStartOfMessage:
</I>&gt;<i> &gt;     &gt; HTTP Client REPLY:
</I>&gt;<i> &gt;     &gt; ---------
</I>&gt;<i> &gt;     &gt; HTTP/1.1 502 Bad Gateway
</I>&gt;<i> &gt;     &gt; Date: Mon, 27 Nov 2017 23:54:20 GMT
</I>&gt;<i> &gt;     &gt; Cache-Control: no-cache
</I>&gt;<i> &gt;     &gt; Content-Type: text/html
</I>&gt;<i> &gt;     &gt; X-Cache: MISS from ip-172-23-18-130
</I>&gt;<i> &gt;     &gt; X-Cache-Lookup: MISS from ip-172-23-18-130:3128
</I>&gt;<i> &gt;     &gt; Transfer-Encoding: chunked
</I>&gt;<i> &gt;     &gt; Connection: keep-alive
</I>&gt;<i> &gt;     &gt;
</I>&gt;<i> &gt;     &gt;
</I>&gt;<i> &gt;     &gt; ----------
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; With best regards, Ivan Larionov.
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 
With best regards, Ivan Larionov.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20171129/91eb60c6/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20171129/91eb60c6/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="017036.html">[squid-users] forward_max_tries 1 has no effect
</A></li>
	<LI>Next message (by thread): <A HREF="017013.html">[squid-users] Fwd: [Squid-3.5.20]Squid transparent proxy http/https without client site config
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17041">[ date ]</a>
              <a href="thread.html#17041">[ thread ]</a>
              <a href="subject.html#17041">[ subject ]</a>
              <a href="author.html#17041">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
