<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Content injection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Content%20injection&In-Reply-To=%3C233f0a6c-7465-6b74-3b9c-c75e695120e5%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016513.html">
   <LINK REL="Next"  HREF="016516.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Content injection</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Content%20injection&In-Reply-To=%3C233f0a6c-7465-6b74-3b9c-c75e695120e5%40treenet.co.nz%3E"
       TITLE="[squid-users] Content injection">squid3 at treenet.co.nz
       </A><BR>
    <I>Sun Oct  1 04:15:58 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016513.html">[squid-users] Content injection
</A></li>
        <LI>Next message (by thread): <A HREF="016516.html">[squid-users] Content injection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16515">[ date ]</a>
              <a href="thread.html#16515">[ thread ]</a>
              <a href="subject.html#16515">[ subject ]</a>
              <a href="author.html#16515">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 01/10/17 16:12, Alex Rousskov wrote:
&gt;<i> On 09/30/2017 07:44 PM, stern0m1 wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> I am looking for a proxy that can inject content easily. Static content to
</I>&gt;&gt;<i> every HTML document.
</I>&gt;&gt;<i> Can I do this easily with squid?
</I>&gt;<i> 
</I>&gt;<i> You can inject some &quot;HTML documents&quot; using Squid combined with an eCAP
</I>&gt;<i> or ICAP content adaptation service, but it is not going to be easy, and
</I>&gt;<i> you cannot inject documents delivered over secure connections to web
</I>&gt;<i> clients that pin origin server certificates. For more information, see
</I>&gt;<i> 
</I>&gt;<i>    * <A HREF="http://wiki.squid-cache.org/SquidFaq/ContentAdaptation">http://wiki.squid-cache.org/SquidFaq/ContentAdaptation</A>
</I>&gt;<i>    * <A HREF="https://answers.launchpad.net/ecap/+faq/1793">https://answers.launchpad.net/ecap/+faq/1793</A>
</I>&gt;<i> 
</I>&gt;<i> Alex.
</I>
For the record:

Please be aware that HTTP documents are protected by international 
copyright laws. Altering other peoples content is illegal in all 
countries signatory to the Berne Convention and many other countries 
individual copyright laws as well.

HTTP forms an informal contract for redistribute and copy permission, 
not for alteration or derivative work permissions. Unless you have 
written consent from the HTML document creators explicitly giving 
permission to alter the substance of their content it is legally 
considered &quot;copyright piracy&quot; or whatever the local laws wording is.

Actions like [un]compression of the content do not change its bytes, so 
are okay. But adding or removing bits from the HTML text is using their 
content to generate a derivative work - for which permission is NOT 
granted implicitly.


The legally safe way to inject notices to clients into traffic is to use 
splash page mechanisms. Where the client periodically gets delivered a 
511 status code with your message on a page you created instead of the 
item they requested. You just need to make sure to detect points in the 
trafffic which actually reach users eyeballs, and a way for them to 
continue on to get what they wanted earlier. Quite a lot of HTTP traffic 
(~80% IIRC) is software&lt;-&gt;software and never reaches any user eyeballs.

You can modify the splash page approach by having your page use an 
iframe to embed the original requestors response. Publishers can 
explicitly indicate whether they grant permission for that to be done 
(eg opt-out).

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016513.html">[squid-users] Content injection
</A></li>
	<LI>Next message (by thread): <A HREF="016516.html">[squid-users] Content injection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16515">[ date ]</a>
              <a href="thread.html#16515">[ thread ]</a>
              <a href="subject.html#16515">[ subject ]</a>
              <a href="author.html#16515">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
