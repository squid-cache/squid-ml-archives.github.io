<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] memory usage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20memory%20usage&In-Reply-To=%3C4214506a-71ca-c931-f700-6d3544630b13%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016593.html">
   <LINK REL="Next"  HREF="016599.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] memory usage</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20memory%20usage&In-Reply-To=%3C4214506a-71ca-c931-f700-6d3544630b13%40treenet.co.nz%3E"
       TITLE="[squid-users] memory usage">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Oct  6 08:06:10 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016593.html">[squid-users] memory usage
</A></li>
        <LI>Next message (by thread): <A HREF="016599.html">[squid-users] dasdafdsaf
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16594">[ date ]</a>
              <a href="thread.html#16594">[ thread ]</a>
              <a href="subject.html#16594">[ subject ]</a>
              <a href="author.html#16594">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 06/10/17 20:04, Vieri wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> On a Squid server I'm seeing how the buffer mem usage is steadily growing.
</I>&gt;<i> 
</I>
You mean mem_node? or the &quot;*K Buffers&quot; entries?

The mem_node is used by cache_mem entries, in-transit objects and some 
hot cache_dir index entries. So the value there need to be considered in 
light of the info report value for how full cache_mem is:

 &gt; Storage Mem size:       22700 KB
 &gt; Storage Mem capacity:   69.3% used, 30.7% free

Which states that 30% of you cache_mem has yet to be filled. Until that 
cache space reaches 100% mem_node will continue growing. If it continues 
to grow significantly after that point then you might have a problem, 
but definitely not before then.

You should also expect HttpRequest, HttpReply, StoreEntry, 
HttpHeaderEntry and various Buffer and Strings allocations to increase 
until that same point. These ones can be quite volatile, but no 
significant long-term growth is expected once the memory cache is full. 
ie changes in them should roughly match active traffic peaks and troughs 
with a baseline relative to the amount used by cache_mem objects.
  [thats a *very* rough description of estimates, don't count on it 
being predictable with a formula].

...
&gt;<i> 
</I>&gt;<i> I'm not familiar with how the Linux kernel manages memory, so I don't know if the &quot;buff/cache&quot; memory is easily reusable by user processes.
</I>&gt;<i> In other words, should I worry or not if the value of &quot;free&quot; (in top) drops that much?
</I>
see my post in the other thread you started about that top report.

&gt;<i> 
</I>&gt;<i> I not sure how I'm supposed to interpret the output of the ps commands above.
</I>&gt;<i> For example, the sum of %MEM is usually between 5 and 10%. Shouldn't this mean that the overall system is not requiring that much RAM?
</I>&gt;<i> 
</I>
Yes, exactly that.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016593.html">[squid-users] memory usage
</A></li>
	<LI>Next message (by thread): <A HREF="016599.html">[squid-users] dasdafdsaf
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16594">[ date ]</a>
              <a href="thread.html#16594">[ thread ]</a>
              <a href="subject.html#16594">[ subject ]</a>
              <a href="author.html#16594">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
