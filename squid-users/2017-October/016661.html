<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Is it safe to resize a rock storage file?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Is%20it%20safe%20to%20resize%20a%20rock%20storage%20file%3F&In-Reply-To=%3Cb83b0802-e308-b0d3-7904-b22f1bebe532%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016658.html">
   <LINK REL="Next"  HREF="016683.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Is it safe to resize a rock storage file?</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Is%20it%20safe%20to%20resize%20a%20rock%20storage%20file%3F&In-Reply-To=%3Cb83b0802-e308-b0d3-7904-b22f1bebe532%40measurement-factory.com%3E"
       TITLE="[squid-users] Is it safe to resize a rock storage file?">rousskov at measurement-factory.com
       </A><BR>
    <I>Mon Oct 16 14:59:23 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016658.html">[squid-users] Is it safe to resize a rock storage file?
</A></li>
        <LI>Next message (by thread): <A HREF="016683.html">[squid-users] Is it safe to resize a rock storage file?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16661">[ date ]</a>
              <a href="thread.html#16661">[ thread ]</a>
              <a href="subject.html#16661">[ subject ]</a>
              <a href="author.html#16661">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/16/2017 06:26 AM, duanyao wrote:

&gt;<i> Is it safe to resize a rock storage file as follow (while squid is not
</I>&gt;<i> running)?
</I>&gt;<i> 
</I>&gt;<i> 1) Increase a rock storage file by increasing the size specified in the
</I>&gt;<i> configuration file;
</I>
I would recommend running truncate after this as well because that is
what Squid does when it initializes the database (squid -z).


&gt;<i> 2) Decrease a rock storage file by decreasing the size specified in the
</I>&gt;<i> configuration file and run `truncate --size &lt;new size&gt; rock_file`;
</I>&gt;<i> 
</I>&gt;<i> By &quot;safe&quot; I mean no rubbish data will ever be delivered to clients after
</I>&gt;<i> resizing, while loss of some cached data is OK.
</I>
I have not tested this, but I believe the above operations are safe to
perform while Squid is not running. The second operation may generate
many warnings during Squid startup as Squid discovers and complains
about corrupted entries.

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016658.html">[squid-users] Is it safe to resize a rock storage file?
</A></li>
	<LI>Next message (by thread): <A HREF="016683.html">[squid-users] Is it safe to resize a rock storage file?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16661">[ date ]</a>
              <a href="thread.html#16661">[ thread ]</a>
              <a href="subject.html#16661">[ subject ]</a>
              <a href="author.html#16661">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
