<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] [SOLVED] Re: Question about: ext_session_acl Splash/Portal solution.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%5BSOLVED%5D%20Re%3A%20Question%20about%3A%20ext_session_acl%0A%20Splash/Portal%20solution.&In-Reply-To=%3C2198a4c6-0fac-9d41-11f4-a1d69b2befa1%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016695.html">
   <LINK REL="Next"  HREF="016698.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] [SOLVED] Re: Question about: ext_session_acl Splash/Portal solution.</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%5BSOLVED%5D%20Re%3A%20Question%20about%3A%20ext_session_acl%0A%20Splash/Portal%20solution.&In-Reply-To=%3C2198a4c6-0fac-9d41-11f4-a1d69b2befa1%40treenet.co.nz%3E"
       TITLE="[squid-users] [SOLVED] Re: Question about: ext_session_acl Splash/Portal solution.">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Oct 19 13:42:48 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016695.html">[squid-users] [SOLVED] Re: Question about: ext_session_acl Splash/Portal solution.
</A></li>
        <LI>Next message (by thread): <A HREF="016698.html">[squid-users] [SOLVED] Re: Question about: ext_session_acl Splash/Portal solution.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16697">[ date ]</a>
              <a href="thread.html#16697">[ thread ]</a>
              <a href="subject.html#16697">[ subject ]</a>
              <a href="author.html#16697">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 20/10/17 00:47, Klaus Tachtler wrote:
&gt;<i> Hi Amos,
</I>&gt;<i> hi list,
</I>&gt;<i> 
</I>&gt;<i> I found my problem and the solution for it. The problem was inside the 
</I>&gt;<i> apache host, who is holding my accept.php page. The splash.php and 
</I>&gt;<i> accept.php page had some problems too, but now it's working.
</I>&gt;<i> 
</I>&gt;<i> For my solution, see following link (sorry the description are only in 
</I>&gt;<i> German language available):
</I>&gt;<i> - 
</I>&gt;<i> <A HREF="https://www.dokuwiki.tachtler.net/doku.php?id=tachtler:squid_centos_7#portal_splash_pages">https://www.dokuwiki.tachtler.net/doku.php?id=tachtler:squid_centos_7#portal_splash_pages</A> 
</I>&gt;<i> 
</I>
I'm not quite following from the Google-translate of that page what you 
mean. Was it a PHP specific issue, or something(s) that you think we 
should warn others about in our wiki Splash config example?
  If the latter, please propose some text to add to the wiki about it.



The config files I see in that page contains some configuration lines I 
am trying to get people to stop doing:

  &quot;always_direct allow all&quot; - was an old hack that is no longer needed 
for SSL-Bump. Mentioning it adds confusion for people who dont 
understand the directive already - and those who know about its meaning 
should know whether they need it or not.


  &quot;sslproxy_cert_error allow all&quot; - PLEASE don't even mention doing 
&quot;allow all&quot; on this directive. It prevents debugging problems and even 
worse adds many major security vulnerabilities in production proxies. So 
just dont.
  If you need to mention the directive at all, please do so in terms of 
specific errors which are relatively harmless to ignore. (if there is no 
safely ignored error for the use-case, then this directive is not safe 
to use obviously).


  &quot;sslproxy_flags DONT_VERIFY_PEER&quot; - just no. This disables TLS 
security checks. Period. like the above it prevents debugging problems 
and even worse adds many major security vulnerabilities in production 
proxies. So just dont. And please pass that advice to others you find 
doing this as well - this setting really cannot die fast enough.

The system trusted CA should work for most servers. Main cause of errors 
is admin not updating their system CA certs list regularly enough. Next 
most common is really broken servers - for those you can add entries to 
the files loaded by:

  * Squid-3.4 and older add any missing CA with 
&lt;<A HREF="http://www.squid-cache.org/Doc/config/sslproxy_cafile/">http://www.squid-cache.org/Doc/config/sslproxy_cafile/</A>&gt; as necessary.

  * Squid-3.5 add intermediate CA (most common cert error situation) to 
&lt;<A HREF="http://www.squid-cache.org/Doc/config/sslproxy_foreign_intermediate_certs/">http://www.squid-cache.org/Doc/config/sslproxy_foreign_intermediate_certs/</A>&gt; 
and root CA (if any) to 
&lt;<A HREF="http://www.squid-cache.org/Doc/config/sslproxy_cafile/">http://www.squid-cache.org/Doc/config/sslproxy_cafile/</A>&gt; as necessary.

* Squid-4 should auto-fetch the missing intermediates. So you should 
only need to add trust for some occasional root CA to 
&lt;<A HREF="http://www.squid-cache.org/Doc/config/sslproxy_foreign_intermediate_certs/">http://www.squid-cache.org/Doc/config/sslproxy_foreign_intermediate_certs/</A>&gt;.

It should be obvious, but to be very clear all of the above CA loading 
options should *only* be done for CA certs which you actually trust. 
Letting the client hit CA cert errors for dangerous CA is a *good* thing 
- that is precisely the point of having CA certs in TLS.



&gt;<i> 
</I>&gt;<i> Thank you Amos, for your patience and help!
</I>&gt;<i> Klaus.
</I>&gt;<i> 
</I>
You are very welcome. :-)

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016695.html">[squid-users] [SOLVED] Re: Question about: ext_session_acl Splash/Portal solution.
</A></li>
	<LI>Next message (by thread): <A HREF="016698.html">[squid-users] [SOLVED] Re: Question about: ext_session_acl Splash/Portal solution.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16697">[ date ]</a>
              <a href="thread.html#16697">[ thread ]</a>
              <a href="subject.html#16697">[ subject ]</a>
              <a href="author.html#16697">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
