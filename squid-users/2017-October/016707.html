<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] tproxy first time implementation on squid.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20tproxy%20first%20time%20implementation%20on%20squid.&In-Reply-To=%3CCABMULtJd_FGF_4ifA2SgjOuO1%2BeKMYE5G9A5SEAPKKGKn9uK8w%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016706.html">
   <LINK REL="Next"  HREF="016710.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] tproxy first time implementation on squid.</H1>
    <B>Alex K</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20tproxy%20first%20time%20implementation%20on%20squid.&In-Reply-To=%3CCABMULtJd_FGF_4ifA2SgjOuO1%2BeKMYE5G9A5SEAPKKGKn9uK8w%40mail.gmail.com%3E"
       TITLE="[squid-users] tproxy first time implementation on squid.">rightkicktech at gmail.com
       </A><BR>
    <I>Sun Oct 22 17:51:37 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016706.html">[squid-users] tproxy first time implementation on squid.
</A></li>
        <LI>Next message (by thread): <A HREF="016710.html">[squid-users] Opera (Win7SP1-x64) not connecting to google.com	because of &quot;HSTS&quot;?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16707">[ date ]</a>
              <a href="thread.html#16707">[ thread ]</a>
              <a href="subject.html#16707">[ subject ]</a>
              <a href="author.html#16707">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You might be missing a NAT at last node before the packet is left to
Internet otherwise you need a public IP at the windows client.

On Oct 22, 2017 19:08, &quot;Hanoch Hanoch K&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">for.work2920 at gmail.com</A>&gt; wrote:

&gt;<i> Hi
</I>&gt;<i> I am trying to configure tproxy to expose the ip address i am using to
</I>&gt;<i> internet sites and not the ip address of the squid server.
</I>&gt;<i> I did read the wiki from the squid web site and acted upon.
</I>&gt;<i> the environment i am using is test and i will need to deploy it into
</I>&gt;<i> producton when test will work and all the subject will be clear to me.
</I>&gt;<i> so the server is ubuntu 14.04.
</I>&gt;<i> squid was compiled with netfilter prefix.
</I>&gt;<i> the kernel is new and seems to have built in support in the tproxy.
</I>&gt;<i> iptables rules where created as the wiki request.
</I>&gt;<i> route option had been applied and the sysctl was configured as requested
</I>&gt;<i> by the wiki.
</I>&gt;<i> the client is windows 7 vmware vm and also the server is vmware vm with 2
</I>&gt;<i> ethernet adapters.
</I>&gt;<i> one of  the interfaces connect the windows 7 and one having ip from the
</I>&gt;<i> built in dhcp server at the router and it is the internet interface.
</I>&gt;<i> the server and the client both behind router and all have private ip.
</I>&gt;<i> till now the setup.
</I>&gt;<i> the problem is when I try to surf with this configuration i get time out.
</I>&gt;<i> at the wiki it says it is routing problem.
</I>&gt;<i> but digging the logs i do not understand where is my mistake.
</I>&gt;<i> can i use this configuration? lets say can i send ip like 10.0.0.2 to be
</I>&gt;<i> discovered at internet?
</I>&gt;<i> is this configuration is legal?
</I>&gt;<i> do not i need public ip on all the interfaces?
</I>&gt;<i> if not what is wrong.
</I>&gt;<i> i will be happy to supply any log or conf file.
</I>&gt;<i> please try to help me.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20171022/66b422a1/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20171022/66b422a1/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016706.html">[squid-users] tproxy first time implementation on squid.
</A></li>
	<LI>Next message (by thread): <A HREF="016710.html">[squid-users] Opera (Win7SP1-x64) not connecting to google.com	because of &quot;HSTS&quot;?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16707">[ date ]</a>
              <a href="thread.html#16707">[ thread ]</a>
              <a href="subject.html#16707">[ subject ]</a>
              <a href="author.html#16707">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
