<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Authentication not applicable on intercepted requests
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Authentication%20not%20applicable%20on%20intercepted%20requests&In-Reply-To=%3C901873509.4402527.1509088932155%40mail.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016744.html">
   <LINK REL="Next"  HREF="016732.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Authentication not applicable on intercepted requests</H1>
    <B>Vieri</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Authentication%20not%20applicable%20on%20intercepted%20requests&In-Reply-To=%3C901873509.4402527.1509088932155%40mail.yahoo.com%3E"
       TITLE="[squid-users] Authentication not applicable on intercepted requests">rentorbuy at yahoo.com
       </A><BR>
    <I>Fri Oct 27 07:22:12 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016744.html">[squid-users] Squid regex grammar
</A></li>
        <LI>Next message (by thread): <A HREF="016732.html">[squid-users] Authentication not applicable on intercepted requests
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16731">[ date ]</a>
              <a href="thread.html#16731">[ thread ]</a>
              <a href="subject.html#16731">[ subject ]</a>
              <a href="author.html#16731">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I have:

debug_options rotate=1 ALL,1

and I'm getting lots of these messages in cache.log:

NOTICE: Authentication not applicable on intercepted requests.

I have a mixed tproxy/sslbump + auth (via /usr/libexec/squid/negotiate_kerberos_auth) config. I know authentication can't be done on intercepted requests.
I'd like to know how to fix my squid conf file in order to avoid logging this message.

The relevant parts of my squid.conf should be:

external_acl_type nt_group ttl=0 children-max=50 %LOGIN /usr/libexec/squid/ext_wbinfo_group_acl -K

auth_param negotiate program /usr/libexec/squid/negotiate_kerberos_auth -s HTTP/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">myserver.mydomain.org at MYDOMAIN.ORG</A>
auth_param negotiate children 60
auth_param negotiate keep_alive on

auth_param basic realm My REALM proxy

acl localnet src 10.0.0.0/8
acl localnet src 192.168.0.0/16

acl ORG_all proxy_auth REQUIRED

acl explicit myportname 3128
acl intercepted myportname 3129
acl interceptedssl myportname 3130

[...]
acl allowed_groups external nt_group &quot;/opt/proxy-settings/allowed.groups&quot;
[...]
acl restricted_groups external nt_group &quot;/opt/proxy-settings/restricted.groups&quot;

[...]
http_access deny SSL_ports ORG_all
http_access deny explicit !ORG_all
#http_access deny intercepted ORG_all
#http_access deny interceptedssl ORG_all
http_access deny intercepted !localnet
http_access deny interceptedssl !localnet

[...]
debug_options rotate=1 ALL,1
[...]
http_port 3128
http_port 3129 tproxy
https_port 3130 tproxy ssl-bump generate-host-certificates=on dynamic_cert_mem_cache_size=16MB cert=/etc/ssl/squid/proxyserver.pem
sslcrtd_program /usr/libexec/squid/ssl_crtd -s /var/lib/squid/ssl_db -M 16MB
sslcrtd_children 40 startup=20 idle=10

reply_header_access Alternate-Protocol deny all
ssl_bump stare all
ssl_bump bump all
[...]

Thanks,

Vieri

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016744.html">[squid-users] Squid regex grammar
</A></li>
	<LI>Next message (by thread): <A HREF="016732.html">[squid-users] Authentication not applicable on intercepted requests
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16731">[ date ]</a>
              <a href="thread.html#16731">[ thread ]</a>
              <a href="subject.html#16731">[ subject ]</a>
              <a href="author.html#16731">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
