<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid regex grammar
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20regex%20grammar&In-Reply-To=%3Cb1dbeff3-13f3-dd15-f7b5-aa61f1569a48%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016729.html">
   <LINK REL="Next"  HREF="016734.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid regex grammar</H1>
    <B>Yuri</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20regex%20grammar&In-Reply-To=%3Cb1dbeff3-13f3-dd15-f7b5-aa61f1569a48%40gmail.com%3E"
       TITLE="[squid-users] Squid regex grammar">yvoinov at gmail.com
       </A><BR>
    <I>Fri Oct 27 13:59:30 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016729.html">[squid-users] Squid regex grammar
</A></li>
        <LI>Next message (by thread): <A HREF="016734.html">[squid-users] Squid regex grammar
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16733">[ date ]</a>
              <a href="thread.html#16733">[ thread ]</a>
              <a href="subject.html#16733">[ subject ]</a>
              <a href="author.html#16733">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

27.10.2017 12:01, Amos Jeffries &#1087;&#1080;&#1096;&#1077;&#1090;:
&gt;<i> On 27/10/17 13:06, Yuri wrote:
</I>&gt;&gt;<i> Just for clarify (it is not well-documented. At least I can't find any
</I>&gt;&gt;<i> documentation about):
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Squid's regex supports only POSIX Basic grammar?
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The specific grammar depends on your regex library used to build
</I>&gt;<i> Squid, so YMMV.
</I>&gt;<i>
</I>&gt;<i> Basic POSIX is the only portable grammar that *all* regex libraries
</I>&gt;<i> can be expected to support. So Squid does not officially support other
</I>&gt;<i> grammars (yet) even if they work in your particular build.
</I>That's why I'm asking that the POSIX Extended in the Squid does not
work. And it is not well documented anywhere. And there is no easy way
to check what regex library Squid uses.

I'm trying to find it in configuration, found that:
root @ cthulhu /patch/squid-5.0.0-patched-v2.26 # ./configure
--help|grep regex
&#160; --enable-gnuregex&#160;&#160;&#160;&#160;&#160;&#160; Compile GNUregex. Unless you have reason to
use this
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Unix boxes which do not have their own regex
library

Then see ldd:

root @ cthulhu /patch/squid-5.0.0-patched-v2.26 # ldd
/usr/local/squid/sbin/squid&#160;&#160;&#160;&#160;&#160;&#160;&#160; libpthread.so.1 =&gt;&#160;&#160;&#160;&#160;&#160;&#160;
/lib/64/libpthread.so.1
&#160;&#160;&#160;&#160;&#160;&#160;&#160; libnettle.so.6 =&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; /opt/csw/lib/amd64/libnettle.so.6
&#160;&#160;&#160;&#160;&#160;&#160;&#160; libmd5.so.1 =&gt;&#160;&#160; /lib/64/libmd5.so.1
&#160;&#160;&#160;&#160;&#160;&#160;&#160; libecap.so.3 =&gt;&#160; /usr/local/lib/libecap.so.3
&#160;&#160;&#160;&#160;&#160;&#160;&#160; libatomic.so.1 =&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; /opt/csw/lib/amd64/libatomic.so.1
&#160;&#160;&#160;&#160;&#160;&#160;&#160; libssl.so.1.0.0 =&gt;&#160;&#160;&#160;&#160;&#160;&#160; /opt/csw/lib/amd64/libssl.so.1.0.0
&#160;&#160;&#160;&#160;&#160;&#160;&#160; libcrypto.so.1.0.0 =&gt;&#160;&#160;&#160; /opt/csw/lib/amd64/libcrypto.so.1.0.0
&#160;&#160;&#160;&#160;&#160;&#160;&#160; libkrb5.so.1 =&gt;&#160; /usr/lib/64/libkrb5.so.1
&#160;&#160;&#160;&#160;&#160;&#160;&#160; libstdc++.so.6 =&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; /opt/csw/lib/amd64/libstdc++.so.6
&#160;&#160;&#160;&#160;&#160;&#160;&#160; libsocket.so.1 =&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; /lib/64/libsocket.so.1
&#160;&#160;&#160;&#160;&#160;&#160;&#160; libresolv.so.2 =&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; /lib/64/libresolv.so.2
&#160;&#160;&#160;&#160;&#160;&#160;&#160; libnsl.so.1 =&gt;&#160;&#160; /lib/64/libnsl.so.1
&#160;&#160;&#160;&#160;&#160;&#160;&#160; libltdl.so.7 =&gt;&#160; /opt/csw/lib/amd64/libltdl.so.7
&#160;&#160;&#160;&#160;&#160;&#160;&#160; libm.so.2 =&gt;&#160;&#160;&#160;&#160; /lib/64/libm.so.2
&#160;&#160;&#160;&#160;&#160;&#160;&#160; librt.so.1 =&gt;&#160;&#160;&#160; /lib/64/librt.so.1
&#160;&#160;&#160;&#160;&#160;&#160;&#160; libgcc_s.so.1 =&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; /opt/csw/lib/amd64/libgcc_s.so.1
&#160;&#160;&#160;&#160;&#160;&#160;&#160; libc.so.1 =&gt;&#160;&#160;&#160;&#160; /lib/64/libc.so.1
&#160;&#160;&#160;&#160;&#160;&#160;&#160; libmp.so.2 =&gt;&#160;&#160;&#160; /lib/64/libmp.so.2
&#160;&#160;&#160;&#160;&#160;&#160;&#160; libmd.so.1 =&gt;&#160;&#160;&#160; /lib/64/libmd.so.1
&#160;&#160;&#160;&#160;&#160;&#160;&#160; libscf.so.1 =&gt;&#160;&#160; /lib/64/libscf.so.1
&#160;&#160;&#160;&#160;&#160;&#160;&#160; libaio.so.1 =&gt;&#160;&#160; /lib/64/libaio.so.1
&#160;&#160;&#160;&#160;&#160;&#160;&#160; libdoor.so.1 =&gt;&#160; /lib/64/libdoor.so.1
&#160;&#160;&#160;&#160;&#160;&#160;&#160; libuutil.so.1 =&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; /lib/64/libuutil.so.1
&#160;&#160;&#160;&#160;&#160;&#160;&#160; libgen.so.1 =&gt;&#160;&#160; /lib/64/libgen.so.1
&#160;&#160;&#160;&#160;&#160;&#160;&#160; mech_krb5.so.1 =&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; /usr/lib/64/gss/mech_krb5.so.1
&#160;&#160;&#160;&#160;&#160;&#160;&#160; libgss.so.1 =&gt;&#160;&#160; /usr/lib/64/libgss.so.1
&#160;&#160;&#160;&#160;&#160;&#160;&#160; libpkcs11.so.1 =&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; /usr/lib/64/libpkcs11.so.1
&#160;&#160;&#160;&#160;&#160;&#160;&#160; libcmd.so.1 =&gt;&#160;&#160; /lib/64/libcmd.so.1
&#160;&#160;&#160;&#160;&#160;&#160;&#160; libcryptoutil.so.1 =&gt;&#160;&#160;&#160; /usr/lib/64/libcryptoutil.so.1

From this output, you can not determine the regular expression library
that is being used. Although maybe I'm just not looking there.

Experimentally, I was able to find out that the grammar of POSIX
Extended does not work in any case.

However, I believe that such things should be well documented, otherwise
the regular expression is simply silently ignored and it is extremely
difficult to detect.
&gt;<i>
</I>&gt;<i> Amos
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
-- 
**************************
* C++: Bug to the future *
**************************

-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0x3E3743A7.asc
Type: application/pgp-keys
Size: 2887 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20171027/17b11680/attachment.key">http://lists.squid-cache.org/pipermail/squid-users/attachments/20171027/17b11680/attachment.key</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 659 bytes
Desc: OpenPGP digital signature
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20171027/17b11680/attachment.sig">http://lists.squid-cache.org/pipermail/squid-users/attachments/20171027/17b11680/attachment.sig</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016729.html">[squid-users] Squid regex grammar
</A></li>
	<LI>Next message (by thread): <A HREF="016734.html">[squid-users] Squid regex grammar
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16733">[ date ]</a>
              <a href="thread.html#16733">[ thread ]</a>
              <a href="subject.html#16733">[ subject ]</a>
              <a href="author.html#16733">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
