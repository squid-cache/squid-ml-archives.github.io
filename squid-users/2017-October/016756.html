<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Manager access for statistics
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Manager%20access%20for%20statistics&In-Reply-To=%3Cf1be1e45-4647-c9d4-53dc-668f0fc8e3cf%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016750.html">
   <LINK REL="Next"  HREF="016772.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Manager access for statistics</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Manager%20access%20for%20statistics&In-Reply-To=%3Cf1be1e45-4647-c9d4-53dc-668f0fc8e3cf%40treenet.co.nz%3E"
       TITLE="[squid-users] Manager access for statistics">squid3 at treenet.co.nz
       </A><BR>
    <I>Mon Oct 30 17:16:01 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016750.html">[squid-users] Manager access for statistics
</A></li>
        <LI>Next message (by thread): <A HREF="016772.html">[squid-users] Manager access for statistics
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16756">[ date ]</a>
              <a href="thread.html#16756">[ thread ]</a>
              <a href="subject.html#16756">[ subject ]</a>
              <a href="author.html#16756">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 30/10/17 12:01, James Moe wrote:
&gt;<i> On 10/29/2017 04:54 AM, Amos Jeffries wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> What does access.log show for the manager request?
</I>&gt;&gt;<i> The above port is IPv6-enabled but the manager_admin ACL only allows an
</I>&gt;&gt;<i> IPv4.
</I>&gt;&gt;<i>
</I>&gt;<i> 1509311060.445     15 192.168.69.115 TCP_MISS/403 4464 GET
</I>&gt;<i> <A HREF="http://proxy1.sma.com:3128/squid-internal-mgr/info">http://proxy1.sma.com:3128/squid-internal-mgr/info</A> -
</I>&gt;<i> HIER_DIRECT/192.168.69.246 text/html
</I>&gt;<i> 1509311060.822      0 192.168.69.115 TCP_IMS_HIT/304 311 GET
</I>&gt;<i> <A HREF="http://sma-server3:3128/squid-internal-static/icons/SN.png">http://sma-server3:3128/squid-internal-static/icons/SN.png</A> - HIER_NONE/-
</I>&gt;<i> image/png
</I>&gt;<i> 
</I>
Responses which are generated by your Squid will all have that 
&quot;HEIR_NONE/-&quot; tag on their access.log lines. Because Squid generated the 
response no upstream server was involved.


The manager report request got passed on upstream to some server at 
192.168.69.246 which appears to think its public domain name / hostname 
is &quot;sma-server3&quot;.

Between them these entries appear to be saying that you have very 
probably configured the Squid machines host name as &quot;sma-server3&quot; 
instead of &quot;proxy1.sma.com&quot;. That would make the mgr request is enter a 
forwarding loop when your Squid passes it on instead of generating the 
wanted report.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016750.html">[squid-users] Manager access for statistics
</A></li>
	<LI>Next message (by thread): <A HREF="016772.html">[squid-users] Manager access for statistics
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16756">[ date ]</a>
              <a href="thread.html#16756">[ thread ]</a>
              <a href="subject.html#16756">[ subject ]</a>
              <a href="author.html#16756">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
