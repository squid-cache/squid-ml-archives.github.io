<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] ipcCreate: fork: (12) Cannot allocate memory
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20ipcCreate%3A%20fork%3A%20%2812%29%20Cannot%20allocate%20memory&In-Reply-To=%3C7609a420-c260-cf57-1e57-e26058ff4b90%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016295.html">
   <LINK REL="Next"  HREF="016345.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] ipcCreate: fork: (12) Cannot allocate memory</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20ipcCreate%3A%20fork%3A%20%2812%29%20Cannot%20allocate%20memory&In-Reply-To=%3C7609a420-c260-cf57-1e57-e26058ff4b90%40treenet.co.nz%3E"
       TITLE="[squid-users] ipcCreate: fork: (12) Cannot allocate memory">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Sep  7 15:06:37 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016295.html">[squid-users] ipcCreate: fork: (12) Cannot allocate memory
</A></li>
        <LI>Next message (by thread): <A HREF="016345.html">[squid-users] ipcCreate: fork: (12) Cannot allocate memory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16297">[ date ]</a>
              <a href="thread.html#16297">[ thread ]</a>
              <a href="subject.html#16297">[ subject ]</a>
              <a href="author.html#16297">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 08/09/17 02:48, erdosain9 wrote:
&gt;<i> By the way,
</I>&gt;<i> 
</I>&gt;<i>                total        used        free      shared  buff/cache
</I>&gt;<i> available
</I>&gt;<i> Mem:           3,7G        3,0G        122M         13M        554M
</I>&gt;<i> 422M
</I>&gt;<i> Swap:          2,0G        160M        1,8G
</I>&gt;<i> 
</I>
How much of that 3GB of RAM is Squid using?
  Your swap need to be at least twice that number.

The fork() starting each helper *doubles* the amount of memory the 
kernel counts as being Squid's (once for Squid, once for helper) BUT 
this extra helper memory is virtual and thus almost all placed inside 
the 'swap' area.

So you need a lot of swap space for the kernel to (pretend to) use with 
Squid helpers. The helper itself should use a much smaller amount of 
real RAM so should be no problem there if the fork() can do its thing.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016295.html">[squid-users] ipcCreate: fork: (12) Cannot allocate memory
</A></li>
	<LI>Next message (by thread): <A HREF="016345.html">[squid-users] ipcCreate: fork: (12) Cannot allocate memory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16297">[ date ]</a>
              <a href="thread.html#16297">[ thread ]</a>
              <a href="subject.html#16297">[ subject ]</a>
              <a href="author.html#16297">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
