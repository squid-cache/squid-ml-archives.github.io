<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Http write cache
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Http%20write%20cache&In-Reply-To=%3CAM5PR0901MB0898486A6C4A6ABD3F5B8A44E16B0%40AM5PR0901MB0898.eurprd09.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016317.html">
   <LINK REL="Next"  HREF="016319.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Http write cache</H1>
    <B>Olivier MARCHETTA</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Http%20write%20cache&In-Reply-To=%3CAM5PR0901MB0898486A6C4A6ABD3F5B8A44E16B0%40AM5PR0901MB0898.eurprd09.prod.outlook.com%3E"
       TITLE="[squid-users] Http write cache">olivier.marchetta at outlook.com
       </A><BR>
    <I>Sun Sep 10 09:14:17 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016317.html">[squid-users] Http write cache
</A></li>
        <LI>Next message (by thread): <A HREF="016319.html">[squid-users] Http write cache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16318">[ date ]</a>
              <a href="thread.html#16318">[ thread ]</a>
              <a href="subject.html#16318">[ subject ]</a>
              <a href="author.html#16318">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

&gt;<i>Origin servers can sometimes respond to requests with payload (&quot;uploads&quot;) before the request has fully arrived, but any subsequent network issues are guaranteed to result in data loss - so the practice is discouraged.
</I>
If I understand, when it's a download (GET), Squid will replace the payload with the object in cache, if fresh.
But the HTTP control messages are still coming from the Origin server.
In case of an upload (PUT), it won't accelerate to use the Squid cache,
because the client has to wait for the Origin server's response of the payload transfer (or request).

The only option to make uploads faster is if the Origin server is aware that the client is using a reverse proxy cache and respond to the upload request before the full payload transfer. 

Tell me if I'm wrong, but I think that I understand now.
Meaning that if I want to &quot;bufferize&quot; the writes it has to happen with another protocol before the WebDAV connection to Sharepoint Online.

Thank you.
Olivier MARCHETTA




-----Original Message-----
From: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On Behalf Of Amos Jeffries
Sent: Sunday, September 10, 2017 4:32 AM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Http write cache

On 10/09/17 07:20, Olivier MARCHETTA wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> I recently set up a squid reverse proxy cache for Sharepoint Online 
</I>&gt;<i> with the help of Amos.
</I>&gt;<i> 
</I>&gt;<i> It is now accelerating all reads by caching objects in Squid.
</I>&gt;<i> 
</I>&gt;<i> Now I&#8217;m facing a more tricky problem : writing objects to the parent server.
</I>&gt;<i> 
</I>&gt;<i> In this case it&#8217;s a direct connection and so it is slow.
</I>&gt;<i> 
</I>&gt;<i> I am not familiar with all the options and capabilities of the http 
</I>&gt;<i> protocol, but do you know if it is possible to have an asynchronous 
</I>&gt;<i> write back to the parent server to accelerate the writes ?
</I>
No, HTTP is message oriented. The equivalent of a write is a request message with a payload (usually PUT or POST).

Origin servers can sometimes respond to requests with payload
(&quot;uploads&quot;) before the request has fully arrived, but any subsequent network issues are guaranteed to result in data loss - so the practice is discouraged. It is definitely not safe for a proxy to do so independent of the origin server.

Amos
_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016317.html">[squid-users] Http write cache
</A></li>
	<LI>Next message (by thread): <A HREF="016319.html">[squid-users] Http write cache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16318">[ date ]</a>
              <a href="thread.html#16318">[ thread ]</a>
              <a href="subject.html#16318">[ subject ]</a>
              <a href="author.html#16318">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
