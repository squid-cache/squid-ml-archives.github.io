<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] very slow squid response
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20very%20slow%20squid%20response&In-Reply-To=%3C201709191134.37834.Antony.Stone%40squid.open.source.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016386.html">
   <LINK REL="Next"  HREF="016388.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] very slow squid response</H1>
    <B>Antony Stone</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20very%20slow%20squid%20response&In-Reply-To=%3C201709191134.37834.Antony.Stone%40squid.open.source.it%3E"
       TITLE="[squid-users] very slow squid response">Antony.Stone at squid.open.source.it
       </A><BR>
    <I>Tue Sep 19 10:34:37 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016386.html">[squid-users] very slow squid response
</A></li>
        <LI>Next message (by thread): <A HREF="016388.html">[squid-users] very slow squid response
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16387">[ date ]</a>
              <a href="thread.html#16387">[ thread ]</a>
              <a href="subject.html#16387">[ subject ]</a>
              <a href="author.html#16387">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tuesday 19 September 2017 at 11:18:34, Iraj Norouzi wrote:

&gt;<i> hi everybody
</I>&gt;<i> i setup squid on ubuntu and centos
</I>
Why both?

&gt;<i> with tproxy and wccp for 6 gb/s traffic
</I>
What hardware are you using for that sort of traffic flow?

&gt;<i> but when i try to test squid with 40 mb/s traffic
</I>
How are you generating &quot;40 mb/s traffic&quot;?  I'm assuming that your Internet 
connection is 6Gbps as stated above, so how are you restricting this down to 
40Mbps for testing?

&gt;<i> it response very slow
</I>
Numbers please.

&gt;<i> while when i use direct browsing i can browse websites very fast
</I>
Is the direct traffic still being routed through the Squid server (you say 
you're using tproxy, so I assume this is an intercept machine with the traffic 
going through it between client and server)?

&gt;<i> i used tcpdump for tracing connections arrive time and there was no problem,
</I>
Arrival time where?  From the origin server to Squid?  From Squid to the 
client?  What are you actually measuring?

&gt;<i> i used watch -d for tracing packets match by iptables rules and it was ok,
</I>
Please be more specific - what did you measure and what does &quot;OK&quot; mean?

Did you compare with and without Squid in place to see what differs?

&gt;<i> i also used iptables trace command for tracing matching iptables rules,
</I>&gt;<i> there was no problem except i had latency on arriving packets on iptables
</I>&gt;<i> rule while tcpdump captured packets fast, it happened when my browsing was
</I>&gt;<i> so slow, at some times that my browsing was fast there was no latency on
</I>&gt;<i> iptables trace log.
</I>
That description is too vague to know exactly what you were measuring and what 
results you got.

&gt;<i> i also used tcp and linux enhancement configurations
</I>
Details?

&gt;<i> but nothing happened.
</I>&gt;<i> wccp send packets very well and tcpdump show capturing packets too but
</I>&gt;<i> browsing with squid is very slow.
</I>
Firstly, please define &quot;slow&quot; - do you mean it takes a long time for new web 
pages / images / etc to appear (but once they start, they arrive quickly), or 
do you mean that a continuous stream of data (a &quot;download&quot;) arrives more 
slowly when going through Squid than going direct (and if so, what are the 
different speeds)?

Secondly, what are you trying to achieve with Squid - what is its purpose in 
your network?

&gt;<i> please help me.
</I>
Please help us - give us more details about the hardware you're running this 
on, the version of Squid you're using, what WCCP routing / filtering you're 
doing, the measurements you've made and the results you got.


Regards,


Antony.

-- 
We all get the same amount of time - twenty-four hours per day.
How you use it is up to you.

                                                   Please reply to the list;
                                                         please *don't* CC me.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016386.html">[squid-users] very slow squid response
</A></li>
	<LI>Next message (by thread): <A HREF="016388.html">[squid-users] very slow squid response
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16387">[ date ]</a>
              <a href="thread.html#16387">[ thread ]</a>
              <a href="subject.html#16387">[ subject ]</a>
              <a href="author.html#16387">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
