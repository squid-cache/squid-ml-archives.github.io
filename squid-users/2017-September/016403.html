<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] disable access.log logging on a specific entrys
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20disable%20access.log%20logging%20on%20a%20specific%20entrys&In-Reply-To=%3Cab21043f-023d-39ab-94c4-074a0eda1d52%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016384.html">
   <LINK REL="Next"  HREF="016437.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] disable access.log logging on a specific entrys</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20disable%20access.log%20logging%20on%20a%20specific%20entrys&In-Reply-To=%3Cab21043f-023d-39ab-94c4-074a0eda1d52%40treenet.co.nz%3E"
       TITLE="[squid-users] disable access.log logging on a specific entrys">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Sep 20 14:55:07 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016384.html">[squid-users] disable access.log logging on a specific entrys
</A></li>
        <LI>Next message (by thread): <A HREF="016437.html">[squid-users] disable access.log logging on a specific entrys
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16403">[ date ]</a>
              <a href="thread.html#16403">[ thread ]</a>
              <a href="subject.html#16403">[ subject ]</a>
              <a href="author.html#16403">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 21/09/17 01:42, Holger Wybranietz wrote:
 &gt; Hello Amos,
 &gt;
 &gt; Yast doesn't show any newer version then 3.5.21 (you meant 3.5.27 is
 &gt; working fine?).
 &gt;

Yes. I tested with 3.5.27, 4.0.21, and latest v5 code. All hide the log 
entries when !logNoSpamresolver is used.


 &gt; By the way:
 &gt; The entrys I want to get filtered are similar to:
 &gt;
 &gt; 192.168.12.84 - - [18/Sep/2017:15:22:40 +0200] &quot;POST
 &gt; /SpamResolverNG/SpamResolverNG.dll?DoNewRequest HTTP/1.1&quot; 400 3990
 &gt; TAG_NONE:HIER_NONE
 &gt;
 &gt; I think, that this is not a &quot;normal&quot; url, &quot;/SpamResolverNG/Spa...&quot; seems
 &gt; to be a directory path?

It's called an origin-form URI and is the true form of URLs delivered to 
web servers on port 80 and 443.

I suspect there is no Host header delivered by the client to allow Squid 
to convert it into an absolute-form URL for proxy consumption. Which 
would also explain the 400 status and *_NONE server details.


 &gt; Is there another way to treat this kind of entries?
 &gt;

That depends on your definition of &quot;treat&quot;. They are all actual traffic 
consuming resources on the proxy, so it is a little odd to hide them 
from view. On the other hand you are using a web server log format in a 
proxy, which is very lossy anyway.


The config mentioned earlier was correct for what you tried to do. Its 
odd that it was not working.

Maybe something wrong with the regex. I'm thinking unicode characters 
etc not quite matching what the eyes seem to indicate - in either the 
URL itself or the config regex.


It might be a good idea to try and resolve the problem in the client 
software if you can;

- if the AV software is configured to use the proxy (including with 
auto-config methods, WPAD/PAC etc) then it is a bug to be sending that 
URL form to a proxy. The vendor may want to know and fix it since other 
customers will be having the same issue and this type of bug is 
security vulnerability for AV.

- if you are intercepting the traffic from port 80 or 443 somehow, then 
your interception would appear to be broken. Squid should always be able 
to determine the ORIGINAL_DST for intercepted traffic and transparently 
deliver it there when Host is missing or invalid.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016384.html">[squid-users] disable access.log logging on a specific entrys
</A></li>
	<LI>Next message (by thread): <A HREF="016437.html">[squid-users] disable access.log logging on a specific entrys
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16403">[ date ]</a>
              <a href="thread.html#16403">[ thread ]</a>
              <a href="subject.html#16403">[ subject ]</a>
              <a href="author.html#16403">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
