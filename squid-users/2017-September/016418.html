<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] delay pool not workin
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20delay%20pool%20not%20workin&In-Reply-To=%3C33e2fd6e-8548-5ba9-0b37-936a38a40fcf%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016416.html">
   <LINK REL="Next"  HREF="016420.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] delay pool not workin</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20delay%20pool%20not%20workin&In-Reply-To=%3C33e2fd6e-8548-5ba9-0b37-936a38a40fcf%40treenet.co.nz%3E"
       TITLE="[squid-users] delay pool not workin">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Sep 22 15:12:34 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016416.html">[squid-users] delay pool not workin
</A></li>
        <LI>Next message (by thread): <A HREF="016420.html">[squid-users] delay pool not workin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16418">[ date ]</a>
              <a href="thread.html#16418">[ thread ]</a>
              <a href="subject.html#16418">[ subject ]</a>
              <a href="author.html#16418">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 23/09/17 02:31, Alex Guti&#233;rrez Mart&#237;nez wrote:
&gt;<i> Could someone be so kind&#160; to explain to me why my rules do not work on
</I>&gt;<i> my delays pools?
</I>&gt;<i> 
</I>...
&gt;<i> 
</I>&gt;<i> Thanks again Mr. Jeffries, i change my delay to:
</I>&gt;<i> 
</I>&gt;<i> acl navegaci&#243;n src 192.168.9.0/24
</I>&gt;<i> 
</I>&gt;<i> acl lento dstdomain &quot;/etc/squid3/bloqueo/lento&quot;&#160;&#160; --&gt; .youtube.com
</I>&gt;<i> 
</I>&gt;<i> acl sociales dstdomain &quot;/etc/squid3/bloqueo/sociales&quot;&#160; --&gt; .linkedin.com
</I>&gt;<i> 
</I>&gt;<i> acl correos dstdomain &quot;/etc/squid3/bloqueo/correos&quot; --&gt;.mail.yahoo.com
</I>&gt;<i> 
</I>&gt;<i> acl extensiones urlpath_regex -i &quot;/etc/squid3/bloqueo/listaextensiones&quot; 
</I>&gt;<i> --&gt; \.mkv$
</I>&gt;<i> 
</I>&gt;<i> delay_pools 3
</I>&gt;<i> 
</I>&gt;<i> #Canal 1 extensiones.
</I>&gt;<i> delay_class 1 1
</I>&gt;<i> delay_parameters 1 32768/32768
</I>&gt;<i> delay_access 1 allow extensiones !navegacion !lento !sociales !correos
</I>&gt;<i> delay_access 1 deny all
</I>&gt;<i> 
</I>&gt;<i> #Canal 2 para usuarios.
</I>&gt;<i> delay_class 2 1
</I>&gt;<i> delay_parameters 2 65536/65536
</I>&gt;<i> delay_access 2 allow navegacion !lento !sociales !correos !extensiones
</I>&gt;<i> delay_access 2 deny all
</I>&gt;<i> 
</I>&gt;<i> #Canal 3 para cosas lentas.
</I>&gt;<i> delay_class 3 1
</I>&gt;<i> delay_parameters 3 8192/16384
</I>&gt;<i> delay_access 3 allow lento sociales correos !navegacion !extensiones
</I>&gt;<i> delay_access 3 deny all
</I>&gt;<i> 
</I>&gt;<i> But my sqstat shows the use of delay pool # 2, # 1 and # 3 are disable. 
</I>&gt;<i> On youtube shows delay_pool=0.
</I>&gt;<i> 
</I>&gt;<i> I put the following configuration but I was unable to make it work. 
</I>&gt;<i> Again only delay pool # 2 was the only who worked this time.
</I>

Pool #3 requires the domain name of a single transaction to 
simultaneously be *mail.yahoo.com AND *.linkedin.com AND *.youtube.com
  Obviously that is impossible, so nothing can match the line that allows.

Pool #1 should match a few things. But probably not what you are testing 
with.

I suggest you try to re-write your ACLs in a simpler way with less '!' 
(not) modifiers. The way you are compressing lots of things into each 
line is no faster than multiple lines, but much harder to understand 
what is going on.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016416.html">[squid-users] delay pool not workin
</A></li>
	<LI>Next message (by thread): <A HREF="016420.html">[squid-users] delay pool not workin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16418">[ date ]</a>
              <a href="thread.html#16418">[ thread ]</a>
              <a href="subject.html#16418">[ subject ]</a>
              <a href="author.html#16418">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
