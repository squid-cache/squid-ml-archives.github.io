<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Peek and Splice - Termination Log
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Peek%20and%20Splice%20-%20Termination%20Log&In-Reply-To=%3C09695229-d572-d775-bbe0-0c23263bb6d5%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016419.html">
   <LINK REL="Next"  HREF="016422.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Peek and Splice - Termination Log</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Peek%20and%20Splice%20-%20Termination%20Log&In-Reply-To=%3C09695229-d572-d775-bbe0-0c23263bb6d5%40measurement-factory.com%3E"
       TITLE="[squid-users] Peek and Splice - Termination Log">rousskov at measurement-factory.com
       </A><BR>
    <I>Mon Sep 25 14:11:57 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016419.html">[squid-users] Peek and Splice - Termination Log
</A></li>
        <LI>Next message (by thread): <A HREF="016422.html">[squid-users] Bug: Missing MemObject::storeId value
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16424">[ date ]</a>
              <a href="thread.html#16424">[ thread ]</a>
              <a href="subject.html#16424">[ subject ]</a>
              <a href="author.html#16424">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 09/22/2017 09:27 AM, Eric Lackey wrote:

&gt;<i> This is all working well except for the fact that we don&#8217;t have a
</I>&gt;<i> good way to determine what is being blocked.
</I>
All transactions, including blocked ones, must be logged to access.log.
Squid had several bugs in this area. All known bugs (within this
discussion scope) should be fixed in the latest v5. I am not sure about
the latest v3, but I do see at least some of the fixes in v4. For
example:
<A HREF="https://github.com/squid-cache/squid/commit/da6dbcd110f7603f6d4cd9b3eef749311293fe77">https://github.com/squid-cache/squid/commit/da6dbcd110f7603f6d4cd9b3eef749311293fe77</A>

Going forward:

* If something is not logged in the latest v3, then please consider
upgrading to v4. Filing a bug report in Bugzilla (see below) for v3
might motivate somebody to backport the fixes, but if the bug is fixed
in v4, then upgrading may be an overall better option, especially if you
use SslBump.

* If something is not logged in the latest v4 or v5, then please
consider filing a bug report in Bugzilla. Attaching an ALL,9 cache.log
while reproducing the issue using a single transaction on an otherwise
idle Squid will help developers triage your bug report.


Thank you,

Alex.
P.S. You do not need the &quot;step3&quot; ACL in the configuration below.

&gt;<i> acl allowed_https_sites ssl::server_name_regex &quot;/etc/squid/allowed_sites&quot;
</I>&gt;<i> 
</I>&gt;<i> ssl_bump peek all
</I>&gt;<i> ssl_bump splice allowed_https_sites
</I>&gt;<i> ssl_bump terminate step3 all
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016419.html">[squid-users] Peek and Splice - Termination Log
</A></li>
	<LI>Next message (by thread): <A HREF="016422.html">[squid-users] Bug: Missing MemObject::storeId value
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16424">[ date ]</a>
              <a href="thread.html#16424">[ thread ]</a>
              <a href="subject.html#16424">[ subject ]</a>
              <a href="author.html#16424">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
