<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] disable access.log logging on a specific entrys
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20disable%20access.log%20logging%20on%20a%20specific%20entrys&In-Reply-To=%3C0e0801d33685%24a15663a0%24e4032ae0%24%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016403.html">
   <LINK REL="Next"  HREF="016379.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] disable access.log logging on a specific entrys</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20disable%20access.log%20logging%20on%20a%20specific%20entrys&In-Reply-To=%3C0e0801d33685%24a15663a0%24e4032ae0%24%40ngtech.co.il%3E"
       TITLE="[squid-users] disable access.log logging on a specific entrys">eliezer at ngtech.co.il
       </A><BR>
    <I>Tue Sep 26 05:09:28 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016403.html">[squid-users] disable access.log logging on a specific entrys
</A></li>
        <LI>Next message (by thread): <A HREF="016379.html">[squid-users] TCP: out of memory -- consider tuning tcp_mem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16437">[ date ]</a>
              <a href="thread.html#16437">[ thread ]</a>
              <a href="subject.html#16437">[ subject ]</a>
              <a href="author.html#16437">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>If you trust the software which creates these requests you can bypass the proxy for the ip addresses of this system.
If you do not trust this software then it's better left passed to the proxy.
This URL should have Host header and if not then it's probably something that should be blocked.. or fixed by the vendor of the antispam solution.

All The Bests,
Eliezer

----
Eliezer Croitoru
Linux System Administrator
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>



-----Original Message-----
From: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] On Behalf Of Amos Jeffries
Sent: Wednesday, September 20, 2017 17:55
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] disable access.log logging on a specific entrys

On 21/09/17 01:42, Holger Wybranietz wrote:
 &gt; Hello Amos,
 &gt;
 &gt; Yast doesn't show any newer version then 3.5.21 (you meant 3.5.27 is
 &gt; working fine?).
 &gt;

Yes. I tested with 3.5.27, 4.0.21, and latest v5 code. All hide the log 
entries when !logNoSpamresolver is used.


 &gt; By the way:
 &gt; The entrys I want to get filtered are similar to:
 &gt;
 &gt; 192.168.12.84 - - [18/Sep/2017:15:22:40 +0200] &quot;POST
 &gt; /SpamResolverNG/SpamResolverNG.dll?DoNewRequest HTTP/1.1&quot; 400 3990
 &gt; TAG_NONE:HIER_NONE
 &gt;
 &gt; I think, that this is not a &quot;normal&quot; url, &quot;/SpamResolverNG/Spa...&quot; seems
 &gt; to be a directory path?

It's called an origin-form URI and is the true form of URLs delivered to 
web servers on port 80 and 443.

I suspect there is no Host header delivered by the client to allow Squid 
to convert it into an absolute-form URL for proxy consumption. Which 
would also explain the 400 status and *_NONE server details.


 &gt; Is there another way to treat this kind of entries?
 &gt;

That depends on your definition of &quot;treat&quot;. They are all actual traffic 
consuming resources on the proxy, so it is a little odd to hide them 
from view. On the other hand you are using a web server log format in a 
proxy, which is very lossy anyway.


The config mentioned earlier was correct for what you tried to do. Its 
odd that it was not working.

Maybe something wrong with the regex. I'm thinking unicode characters 
etc not quite matching what the eyes seem to indicate - in either the 
URL itself or the config regex.


It might be a good idea to try and resolve the problem in the client 
software if you can;

- if the AV software is configured to use the proxy (including with 
auto-config methods, WPAD/PAC etc) then it is a bug to be sending that 
URL form to a proxy. The vendor may want to know and fix it since other 
customers will be having the same issue and this type of bug is 
security vulnerability for AV.

- if you are intercepting the traffic from port 80 or 443 somehow, then 
your interception would appear to be broken. Squid should always be able 
to determine the ORIGINAL_DST for intercepted traffic and transparently 
deliver it there when Host is missing or invalid.

Amos
_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016403.html">[squid-users] disable access.log logging on a specific entrys
</A></li>
	<LI>Next message (by thread): <A HREF="016379.html">[squid-users] TCP: out of memory -- consider tuning tcp_mem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16437">[ date ]</a>
              <a href="thread.html#16437">[ thread ]</a>
              <a href="subject.html#16437">[ subject ]</a>
              <a href="author.html#16437">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
