<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] SSL-BUMP blackhole instance configuration
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SSL-BUMP%20blackhole%20instance%20configuration&In-Reply-To=%3C%21%26%21AAAAAAAAAAAuAAAAAAAAAGDVRrtF13VDjYYZR9MgvgYBAMO2jhD3dRHOtM0AqgC7tuYAAAAAAA4AABAAAACy4sFGxE7TRqRz%2Bg8r7MbVAQAAAAA%3D%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="016449.html">
   <LINK REL="Next"  HREF="016459.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] SSL-BUMP blackhole instance configuration</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SSL-BUMP%20blackhole%20instance%20configuration&In-Reply-To=%3C%21%26%21AAAAAAAAAAAuAAAAAAAAAGDVRrtF13VDjYYZR9MgvgYBAMO2jhD3dRHOtM0AqgC7tuYAAAAAAA4AABAAAACy4sFGxE7TRqRz%2Bg8r7MbVAQAAAAA%3D%40ngtech.co.il%3E"
       TITLE="[squid-users] SSL-BUMP blackhole instance configuration">eliezer at ngtech.co.il
       </A><BR>
    <I>Tue Sep 26 21:35:55 UTC 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="016449.html">[squid-users] Reading gzip encodec content failed
</A></li>
        <LI>Next message (by thread): <A HREF="016459.html">[squid-users] Cache digest vs ICP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16452">[ date ]</a>
              <a href="thread.html#16452">[ thread ]</a>
              <a href="subject.html#16452">[ subject ]</a>
              <a href="author.html#16452">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey All,

I have been working on couple tools which are using my drbl-peer library.
- external acl helper
- dns blacklist server
- and couple others..

I took a dns proxy server named grimd and upgraded it since the developer
didn't responded fast enough.
This dns proxy has a nice feature that allows it to &quot;blackhole&quot; A and AAAA
queries for blacklisted domains.
I can define the IPv4 and IPv6 host which will be the &quot;blackhole&quot; and it's
all playing well with plain HTTP(port 80).
But with HTTPS I want to be able to intercept all traffic and pass it into
the http cache-peer.
I am not sure what would be the best way to do it with squid but I was
thinking about something like:
- peek client SNI
- bump client first(compared to server first)

And I can use the same Root CA key+certificate that exists on the main squid
on interception instance.
I am not sure what version of Squid-Cache to use for this test (3.5.27 or
4.0.21).
The main thing I am not sure about such a setup is that the target ip:443
would be the &quot;blackhole&quot; squid instance itself and not the original server
ip address.
Would it matter at all if the destination ip is the Squid instance on port
443?
(I will try to use iptables nat REDIRECT from port 443 to 23129 which would
be an intercept port)

Thanks,
Eliezer

----
Eliezer Croitoru
Linux System Administrator
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>





</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="016449.html">[squid-users] Reading gzip encodec content failed
</A></li>
	<LI>Next message (by thread): <A HREF="016459.html">[squid-users] Cache digest vs ICP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16452">[ date ]</a>
              <a href="thread.html#16452">[ thread ]</a>
              <a href="subject.html#16452">[ subject ]</a>
              <a href="author.html#16452">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
