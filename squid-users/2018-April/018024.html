<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Fwd: Outbound IPv6/128 - Possible ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Fwd%3A%20Outbound%20IPv6/128%20-%20Possible%20%3F&In-Reply-To=%3Cd1dfe39b-84c6-70ef-cb5d-8e6062a48826%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018023.html">
   <LINK REL="Next"  HREF="018025.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Fwd: Outbound IPv6/128 - Possible ?</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Fwd%3A%20Outbound%20IPv6/128%20-%20Possible%20%3F&In-Reply-To=%3Cd1dfe39b-84c6-70ef-cb5d-8e6062a48826%40treenet.co.nz%3E"
       TITLE="[squid-users] Fwd: Outbound IPv6/128 - Possible ?">squid3 at treenet.co.nz
       </A><BR>
    <I>Sun Apr  8 10:14:21 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="018023.html">[squid-users] Fwd: Outbound IPv6/128 - Possible ?
</A></li>
        <LI>Next message (by thread): <A HREF="018025.html">[squid-users] squid-users Digest, Vol 44, Issue 8
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18024">[ date ]</a>
              <a href="thread.html#18024">[ thread ]</a>
              <a href="subject.html#18024">[ subject ]</a>
              <a href="author.html#18024">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 08/04/18 21:04, kalice caprice wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> I'm trying to bound mutiples IPv4:Port entry to a different outbound
</I>&gt;<i> IPv6 this way:
</I>
HTTP does not work that way. It is a stateless and multiplexing
protocol. Inbound and outbound connections are independent of each other.

&gt;<i> 
</I>&gt;<i> http_port 94.xxx.xxx.204:10001 name=1
</I>&gt;<i> acl ip1 myportname 1
</I>&gt;<i> tcp_outgoing_address 2a01:xxxx:xxxx:xxxx:xxxx:xxxx:eb7c:8336 ip1
</I>&gt;<i> 
</I>&gt;<i> http_port 94.xxx.xxx.204:10002 name=2
</I>&gt;<i> acl ip2 myportname 2
</I>&gt;<i> tcp_outgoing_address 2a01:xxxx:xxxx:xxxx:xxxx:xxxx:096f:b369 ip2
</I>&gt;<i> 
</I>&gt;<i> http_port 94.xxx.xxx.204:10003 name=3
</I>&gt;<i> acl ip3 myportname 3
</I>&gt;<i> tcp_outgoing_address 2a01:xxxx:xxxx:xxxx:xxxx:xxxx:5fe0:eba8 ip3
</I>&gt;<i> 
</I>&gt;<i> etc.
</I>&gt;<i> 
</I>&gt;<i> I was not able to get it working, the cache.log is giving me (99) cannot
</I>&gt;<i> assign requested address and fallback to the IPv4 address as an outbound
</I>&gt;<i> address.
</I>
1) It is only possible to set an IPv6 outgoing when the server being
connected to is an IPv6 server address.

2) It is only possible for Squid to use an IP address which has been
allocated/assigned to the NIC.


&gt;<i> 
</I>&gt;<i> I added the full IPv6 block inside the route -6 just in case, like this:
</I>&gt;<i> ip -6 route add to local 2a01:xxxx:xxxx:xxxx::/64 dev lo
</I>
FYI: the lo device is hardware restricted to one machine. It is not
globally routable.


&gt;<i> 
</I>&gt;<i> Squid Cache: Version 3.5.23
</I>&gt;<i> 
</I>&gt;<i> I coudn't find anyone having the same problem while searching around so
</I>&gt;<i> I'm stuck and looking to know if it's possible or not to do it this way,
</I>&gt;<i> if yes what am I missing ? And if not, is there a way to randomize the
</I>&gt;<i> end part of the last 3 blocks of a /64 and if yes how ?
</I>
That is a feature of your system networking stack. Has nothing to do
with Squid. Lookup &quot;Privacy Addressing&quot; in IPv6.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="018023.html">[squid-users] Fwd: Outbound IPv6/128 - Possible ?
</A></li>
	<LI>Next message (by thread): <A HREF="018025.html">[squid-users] squid-users Digest, Vol 44, Issue 8
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18024">[ date ]</a>
              <a href="thread.html#18024">[ thread ]</a>
              <a href="subject.html#18024">[ subject ]</a>
              <a href="author.html#18024">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
