<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] How to configure Icap can improve the performance of proxy?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20configure%20Icap%20can%20improve%20the%20performance%0A%20of%20proxy%3F&In-Reply-To=%3C12a2d52b-fffa-6bb6-d61f-41b3af9508e7%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018042.html">
   <LINK REL="Next"  HREF="018047.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] How to configure Icap can improve the performance of proxy?</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20configure%20Icap%20can%20improve%20the%20performance%0A%20of%20proxy%3F&In-Reply-To=%3C12a2d52b-fffa-6bb6-d61f-41b3af9508e7%40treenet.co.nz%3E"
       TITLE="[squid-users] How to configure Icap can improve the performance of proxy?">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Apr 10 09:17:32 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="018042.html">[squid-users] How to configure Icap can improve the performance of	proxy?
</A></li>
        <LI>Next message (by thread): <A HREF="018047.html">[squid-users] Ideas for better caching these popular urls
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18045">[ date ]</a>
              <a href="thread.html#18045">[ thread ]</a>
              <a href="subject.html#18045">[ subject ]</a>
              <a href="author.html#18045">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/04/18 18:11, &#36213; &#20426; wrote:
&gt;<i> My Squid&#160; with configuration of Icap like this:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &#160;#icap
</I>&gt;<i> icap_enable on
</I>&gt;<i> icap_preview_enable on
</I>&gt;<i> icap_preview_size 1024
</I>&gt;<i> icap_send_client_ip on
</I>&gt;<i> adaptation_meta X-Client-Port &quot;%&gt;p&quot;
</I>&gt;<i> icap_206_enable on
</I>&gt;<i> icap_persistent_connections off
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> icap_service service_req reqmod_precache 0 <A HREF="icap://192.168.10.200:1344/echo">icap://192.168.10.200:1344/echo</A>
</I>&gt;<i> icap_service service_res respmod_precache 1 <A HREF="icap://192.168.10.200:1344/echo">icap://192.168.10.200:1344/echo</A>
</I>&gt;<i> adaptation_access service_res allow all
</I>&gt;<i> adaptation_access service_req allow all
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> When I configured the Icap parameter of Squid , the number of new
</I>&gt;<i> connection or the number of concurrent connections&#160; was less than half
</I>&gt;<i> as only Squid running.
</I>&gt;<i> So how to configure Icap can improve the performance of proxy?
</I>
You cannot improve it much in that aspect. ICAP is a networking protocol
for sending HTTP traffic to an external service. It uses ports and
network connections to do that.

AFAIK the best efficiency it can do is just under x2 the amount a normal
Squid uses - every inbound client connection uses +1 REQMOD socket and
every outbound server connection adds +1 RESPMOD socket. Even with
pipelining/persistence and caching that is not changed.


eCAP modules do not use the extra network resources. But whether you can
go that way depends on what you are needing it to do.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="018042.html">[squid-users] How to configure Icap can improve the performance of	proxy?
</A></li>
	<LI>Next message (by thread): <A HREF="018047.html">[squid-users] Ideas for better caching these popular urls
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18045">[ date ]</a>
              <a href="thread.html#18045">[ thread ]</a>
              <a href="subject.html#18045">[ subject ]</a>
              <a href="author.html#18045">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
