<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid is very slow after moving to production	environment
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20is%20very%20slow%20after%20moving%20to%20production%0A%09environment&In-Reply-To=%3C05f301d3d0ec%246b5c59b0%2442150d10%24%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018057.html">
   <LINK REL="Next"  HREF="018042.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid is very slow after moving to production	environment</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20is%20very%20slow%20after%20moving%20to%20production%0A%09environment&In-Reply-To=%3C05f301d3d0ec%246b5c59b0%2442150d10%24%40ngtech.co.il%3E"
       TITLE="[squid-users] Squid is very slow after moving to production	environment">eliezer at ngtech.co.il
       </A><BR>
    <I>Tue Apr 10 16:53:15 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="018057.html">[squid-users] Squid is very slow after moving to production environment
</A></li>
        <LI>Next message (by thread): <A HREF="018042.html">[squid-users] How to configure Icap can improve the performance of	proxy?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18061">[ date ]</a>
              <a href="thread.html#18061">[ thread ]</a>
              <a href="subject.html#18061">[ subject ]</a>
              <a href="author.html#18061">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Well about Cloned VM's acting slower than the original...
I clearly tested it more then once and it's not true and it's a myth.
The only issue I have seen with such cloned systems(I have a very large cluster of cloned squid instances) is when the admin over-commit the physical machine.
There is another thing in the hypervisor's world that some admins just do not take into account:
- Squid can heavily load a specific CPU.
- You cannot expect the virtualization platform to &quot;create&quot; cycles that do not exist.
- You cannot expect the virtualization platform to.. make the disks or the network perform more than they have avaliable.

I have a fleet of more than 10 hypervisors which run's more than 90 VM's and from them more then 20 percent have Squid-Cache and other services on them.
The only time I had issues was when one of the VM's that was running a java based service took a hit of more then 50k requests per second and took\claimed brutally more CPU and RAM to spare the other VM's and... all the other VM's just crashed with a kernel panic while this specific VM &quot;controlled&quot; or &quot;dominated&quot; the hypervisor resources.

All The Bests,
Eliezer

----
Eliezer Croitoru
Linux System Administrator
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>



-----Original Message-----
From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; On Behalf Of Amos Jeffries
Sent: Tuesday, April 10, 2018 13:09
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Squid is very slow after moving to production environment

On 10/04/18 07:58, Roberto Carna wrote:
&gt;<i> Dear Antony, both proxies are virtual machines in the same DMZ....they
</I>&gt;<i> use the same DNS, the same firewall, the same Internet link, the same
</I>&gt;<i> IP but different MAC Address.
</I>

FYI: there were issues some years back with VMs that were cloned
operating VERY much slower for no apparent reason than the original
image they were cloned from.

If you are making production as a clone of the testing you may want to
try a non-clone to see if the problem disappears.

Amos
_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="018057.html">[squid-users] Squid is very slow after moving to production environment
</A></li>
	<LI>Next message (by thread): <A HREF="018042.html">[squid-users] How to configure Icap can improve the performance of	proxy?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18061">[ date ]</a>
              <a href="thread.html#18061">[ thread ]</a>
              <a href="subject.html#18061">[ subject ]</a>
              <a href="author.html#18061">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
