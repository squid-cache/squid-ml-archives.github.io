<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] How to configure Squid can improve the performance &#65311;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%3D%3Fgb2312%3Fb%3FSG93IHRvIGNvbmZpZ3VyZSBTcXVpZCBjYW4gaW1w%3F%3D%0A%20%3D%3Fgb2312%3Fb%3Fcm92ZSB0aGUgcGVyZm9ybWFuY2Ugo78%3D%3F%3D&In-Reply-To=%3CCY4PR22MB036089883BA637E38E45762198BD0%40CY4PR22MB0360.namprd22.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018058.html">
   <LINK REL="Next"  HREF="018071.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] How to configure Squid can improve the performance &#65311;</H1>
    <B>&#36213; &#20426;</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%3D%3Fgb2312%3Fb%3FSG93IHRvIGNvbmZpZ3VyZSBTcXVpZCBjYW4gaW1w%3F%3D%0A%20%3D%3Fgb2312%3Fb%3Fcm92ZSB0aGUgcGVyZm9ybWFuY2Ugo78%3D%3F%3D&In-Reply-To=%3CCY4PR22MB036089883BA637E38E45762198BD0%40CY4PR22MB0360.namprd22.prod.outlook.com%3E"
       TITLE="[squid-users] How to configure Squid can improve the performance &#65311;">jun357572957zhao at hotmail.com
       </A><BR>
    <I>Wed Apr 11 01:48:07 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="018058.html">[squid-users] Squid ipcache and DNS TTL smaller than 60 seconds
</A></li>
        <LI>Next message (by thread): <A HREF="018071.html">[squid-users] How to configure Squid can improve the performance &#65311;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18070">[ date ]</a>
              <a href="thread.html#18070">[ thread ]</a>
              <a href="subject.html#18070">[ subject ]</a>
              <a href="author.html#18070">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for reading my Email.

I have two questions:

My first question is how many maximum concurrent connection and the maximum new connection of squid are.

The second question is how to configure Squid can improve  the maximum concurrent connection,maximum new connection and the performance .

I used 3.5.27 version.

My squid.conf is:

acl localnet src 10.0.0.0/8 # RFC1918 possible internal network
acl localnet src 172.16.0.0/12 # RFC1918 possible internal network
acl localnet src 192.168.0.0/16 # RFC1918 possible internal network
acl localnet src fc00::/7       # RFC 4193 local private network range
acl localnet src fe80::/10      # RFC 4291 link-local (directly plugged) machines

acl SSL_ports port 443
acl Safe_ports port 80 # http
acl Safe_ports port 21 # ftp
acl Safe_ports port 443 # https
acl Safe_ports port 70 # gopher
acl Safe_ports port 210 # wais
acl Safe_ports port 1025-65535 # unregistered ports
acl Safe_ports port 280 # http-mgmt
acl Safe_ports port 488 # gss-http
acl Safe_ports port 591 # filemaker
acl Safe_ports port 777 # multiling http
acl CONNECT method CONNECT

#
# Recommended minimum Access Permission configuration:
#
# Deny requests to certain unsafe ports
http_access deny !Safe_ports

# Deny CONNECT to other than secure SSL ports
http_access deny CONNECT !SSL_ports

# Only allow cachemgr access from localhost
http_access allow localhost manager
http_access deny manager

# We strongly recommend the following be uncommented to protect innocent
# web applications running on the proxy server who think the only
# one who can access services on &quot;localhost&quot; is a local user
http_access deny to_localhost

#
# INSERT YOUR OWN RULE(S) HERE TO ALLOW ACCESS FROM YOUR CLIENTS
#

# Example rule allowing access from your local networks.
# Adapt localnet in the ACL section to list your (internal) IP networks
# from where browsing should be allowed
http_access allow localnet
http_access allow localhost

# And finally deny all other access to this proxy
acl NCACHE method GET
store_miss deny all
via off

# Squid normally listens to port 3128
http_port 3128
https_port 192.168.XX.XXX:3129 intercept ssl-bump connection-auth=off generate-host-certificates=on dynamic_cert_mem_cache_size=4MB cert=/usr/local/squid/ssl_cert/myCA.pem key=/usr/local/squid/ssl_cert/myCA.pem  options=NO_SSLv3,NO_SSLv2

acl ssl_step1 at_step SslBump1
acl ssl_step2 at_step SslBump2
acl ssl_step3 at_step SslBump3

ssl_bump peek ssl_step1
ssl_bump stare ssl_step2
ssl_bump bump ssl_step3

sslcrtd_program /usr/local/squid/libexec/ssl_crtd -s /usr/local/squid/lib/ssl_db -M 4MB
sslcrtd_children 8 startup=1 idle=1

#Uncomment and adjust the following to add a disk cache directory.
cache_dir ufs /usr/local/squid/var/cache/squid 4096 16 256
minimum_object_size 0 KB
maximum_object_size 4096 KB
maximum_object_size_in_memory 4096 KB

ipcache_size 1024 MB
ipcache_low 90
ipcache_high 95
fqdncache_size 1024 MB

cache_mem 2048 MB
cache_swap_low 90
cache_swap_high 95

# Leave coredumps in the first cache dir
coredump_dir /usr/local/squid/var/cache/squid

#icap
icap_enable on
icap_preview_enable on
icap_preview_size 1024
icap_send_client_ip on
adaptation_meta X-Client-Port &quot;%&gt;p&quot;
icap_206_enable on
icap_persistent_connections off

icap_service service_req reqmod_precache 0 <A HREF="icap://192.168.XX.XXX:1344/echo">icap://192.168.XX.XXX:1344/echo</A>
icap_service service_res respmod_precache 1 <A HREF="icap://192.168.XX.XXX:1344/echo">icap://192.168.XX.XXX:1344/echo</A>
adaptation_access service_res allow all
adaptation_access service_req allow all

#
# Add any of your own refresh_pattern entries above these.
#
refresh_pattern ^ftp: 1440 20% 10080
refresh_pattern ^gopher: 1440 0% 1440
refresh_pattern -i (/cgi-bin/|\?) 0 0% 0
refresh_pattern . 0 20% 4320





-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20180411/de3eb21e/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20180411/de3eb21e/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="018058.html">[squid-users] Squid ipcache and DNS TTL smaller than 60 seconds
</A></li>
	<LI>Next message (by thread): <A HREF="018071.html">[squid-users] How to configure Squid can improve the performance &#65311;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18070">[ date ]</a>
              <a href="thread.html#18070">[ thread ]</a>
              <a href="subject.html#18070">[ subject ]</a>
              <a href="author.html#18070">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
