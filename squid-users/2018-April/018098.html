<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] SSL intercept in explicit mode
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SSL%20intercept%20in%20explicit%20mode&In-Reply-To=%3C6325f563-3dc7-dc42-7973-b9a245b01996%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018097.html">
   <LINK REL="Next"  HREF="018100.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] SSL intercept in explicit mode</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SSL%20intercept%20in%20explicit%20mode&In-Reply-To=%3C6325f563-3dc7-dc42-7973-b9a245b01996%40treenet.co.nz%3E"
       TITLE="[squid-users] SSL intercept in explicit mode">squid3 at treenet.co.nz
       </A><BR>
    <I>Sat Apr 14 09:53:18 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="018097.html">[squid-users] SSL intercept in explicit mode
</A></li>
        <LI>Next message (by thread): <A HREF="018100.html">[squid-users] SSL intercept in explicit mode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18098">[ date ]</a>
              <a href="thread.html#18098">[ thread ]</a>
              <a href="subject.html#18098">[ subject ]</a>
              <a href="author.html#18098">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 14/04/18 20:51, MK2018 wrote:
&gt;<i> Amos Jeffries wrote
</I>&gt;&gt;<i> FYI this is &quot;server-first all&quot;. peek and splice before &quot;bump all&quot; is
</I>&gt;&gt;<i> similar but also different in ways that allow it to handle more problems
</I>&gt;&gt;<i> in better ways.
</I>&gt;<i> 
</I>&gt;<i> I never really got to understand how to implement peek and splice verbs. I
</I>&gt;<i> was glad I could get away with server-first!
</I>&gt;<i> 
</I>&gt;<i> Any chance someone, or yourself, would rewrite a more detailed example of
</I>&gt;<i> how to use them?
</I>&gt;<i> 
</I>
Peek is to look without touching the bytes on-wire. They may be relayed
as-is to make progress in the TLS sequence. So bump maybe cannot happen
later, but splice always can.

Stare is to look at the bytes on-wire and synthesize anything needing to
be sent to server. So bump can always work later, but splice maybe cannot.

Splice is to switch to opaque tunneling of the traffic immediately.

Bump is to MITM the certificate exchange injecting a fake server cert
for the clients use and stripping out any features Squid cannot support.


The old server-first receives the TCP details from the client. Then uses
that *alone* to establish a connection to the server based on TLS
features supported by your Squid. Then receives and attempts to respond
to the clientHello using what the serverHello contained.
 It requires that the client is capable of handling the same feature set
as Squid, or at least the TLS features chosen by the server from the set
Squid offered.


The authoritative document about all this is
&lt;<A HREF="https://wiki.squid-cache.org/Features/SslPeekAndSplice#Processing_steps">https://wiki.squid-cache.org/Features/SslPeekAndSplice#Processing_steps</A>&gt;.
That has had a few re-writes to clarify.

Which parts (if any in the current text) are you getting confused or
lost by?


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="018097.html">[squid-users] SSL intercept in explicit mode
</A></li>
	<LI>Next message (by thread): <A HREF="018100.html">[squid-users] SSL intercept in explicit mode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18098">[ date ]</a>
              <a href="thread.html#18098">[ thread ]</a>
              <a href="subject.html#18098">[ subject ]</a>
              <a href="author.html#18098">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
