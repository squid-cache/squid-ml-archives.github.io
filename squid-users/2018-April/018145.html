<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] [SOLVED-ish] Multiple responses in cache objects
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%5BSOLVED-ish%5D%20Multiple%20responses%20in%20cache%20objects&In-Reply-To=%3C5515f2cf620f86bd3eb5f9b3c3077018f9ef3a29.camel%40b1-systems.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018140.html">
   <LINK REL="Next"  HREF="018148.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] [SOLVED-ish] Multiple responses in cache objects</H1>
    <B>Tobias Wolter</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%5BSOLVED-ish%5D%20Multiple%20responses%20in%20cache%20objects&In-Reply-To=%3C5515f2cf620f86bd3eb5f9b3c3077018f9ef3a29.camel%40b1-systems.de%3E"
       TITLE="[squid-users] [SOLVED-ish] Multiple responses in cache objects">tobias.wolter at b1-systems.de
       </A><BR>
    <I>Tue Apr 24 13:41:12 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="018140.html">[squid-users] Multiple responses in cache objects
</A></li>
        <LI>Next message (by thread): <A HREF="018148.html">[squid-users] [SOLVED-ish] Multiple responses in cache objects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18145">[ date ]</a>
              <a href="thread.html#18145">[ thread ]</a>
              <a href="subject.html#18145">[ subject ]</a>
              <a href="author.html#18145">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Cheers,

On Mon, 2018-04-23 at 22:54 +0200, Tobias Wolter wrote:
&gt;<i> Kudos for the hints, Amos, they're great and'll help me a lot
</I>&gt;<i> (tomorrow, it's 22.54 local here).
</I>
Welp, we haven't really come that far, but what we can tell is that
Squid isn't at fault by itself, as we merely forced it to cache some
bad responses from the Apache.

For anyone interested: We've narrowed it down to issues accessing files
on the local filesystem or remotely; Apache seems to hang trying to put
the file into an existing HTTP/1.1 keep-alive connection. If you turn
off KeepAlive, it works (delay still present, &lt;10s); if KeepAlive is
on, we can see from tcpdump that Apache will happily respond to
KeepAlive requests, but then dump one of the previous response joined
with another response, without &lt;CR&gt;&lt;LF&gt; in between.

Not sure what's causing the hang yet, but apparently not Squid, so
thanks!

-towo
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: This is a digitally signed message part
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20180424/0b58640f/attachment.sig">http://lists.squid-cache.org/pipermail/squid-users/attachments/20180424/0b58640f/attachment.sig</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="018140.html">[squid-users] Multiple responses in cache objects
</A></li>
	<LI>Next message (by thread): <A HREF="018148.html">[squid-users] [SOLVED-ish] Multiple responses in cache objects
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18145">[ date ]</a>
              <a href="thread.html#18145">[ thread ]</a>
              <a href="subject.html#18145">[ subject ]</a>
              <a href="author.html#18145">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
