<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid with squidguard
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20with%20squidguard&In-Reply-To=%3CCABMULt%2BieUJKy%2BiC_3xeiNbi%2BaAG%2BKTh1AZTeN72nehXRHo9wg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018152.html">
   <LINK REL="Next"  HREF="018150.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid with squidguard</H1>
    <B>Alex K</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20with%20squidguard&In-Reply-To=%3CCABMULt%2BieUJKy%2BiC_3xeiNbi%2BaAG%2BKTh1AZTeN72nehXRHo9wg%40mail.gmail.com%3E"
       TITLE="[squid-users] Squid with squidguard">rightkicktech at gmail.com
       </A><BR>
    <I>Thu Apr 26 13:03:45 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="018152.html">[squid-users] Squid with squidguard
</A></li>
        <LI>Next message (by thread): <A HREF="018150.html">[squid-users] Squid 3.5.10 - slow upload speed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18157">[ date ]</a>
              <a href="thread.html#18157">[ thread ]</a>
              <a href="subject.html#18157">[ subject ]</a>
              <a href="author.html#18157">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thank you Amos for the feedback.

I did see an example online using ACL and that tricked me.
Removing the allow line, now squid is logging that squidguard is started
(though no squidguard processes are listed, it could be due to that I have
not tested yet with actual traffic)

I will check also ufdbguard as it seems promising.

Thanx,
Alex

On Thu, Apr 26, 2018 at 4:02 AM, Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt; wrote:

&gt;<i> On 25/04/18 23:44, Alex K wrote:
</I>&gt;<i> &gt; Hi all,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I was using a squid (3.1.20) + squidguard setup (to filter out several
</I>&gt;<i> &gt; site categories) on Debian 7 and the setup worked. The squidguard was
</I>&gt;<i> &gt; invoked from squid.conf as below:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; redirect_program /usr/bin/squidGuard -c /etc/squidguard/squidGuard.conf
</I>&gt;<i> &gt; redirect_children 7
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I am now testing the setup on Debian 9 (with squid 3.5.23) with the
</I>&gt;<i> &gt; following lines in squid.conf:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; url_rewrite_access allow
</I>&gt;<i>
</I>&gt;<i> There are no ACLs on the above line. So it cannot match anything. The
</I>&gt;<i> implicit default applies instead. Implicit default after any &quot;allow&quot;
</I>&gt;<i> line is &quot;deny all&quot;.
</I>&gt;<i>
</I>&gt;<i> Also, you did not configure any allow/deny previously. So why add it now?
</I>&gt;<i>
</I>&gt;<i> &gt; url_rewrite_program /usr/bin/squidGuard -c /etc/squidguard/squidGuard.
</I>&gt;<i> conf
</I>&gt;<i> &gt; url_rewrite_children 5
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; But I get at squid logs:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 2018/04/24 12:06:57 kid1| helperOpenServers: Starting 0/5 'squidGuard'
</I>&gt;<i> &gt; processes
</I>&gt;<i> &gt; 2018/04/24 12:06:57 kid1| helperOpenServers: No 'squidGuard' processes
</I>&gt;<i> &gt; needed.
</I>&gt;<i>
</I>&gt;<i> No traffic is allowed to go to the helper. So no SG processes necessary.
</I>&gt;<i> Squid is correct.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Seems that squid is ignoring and not starting squidguard.
</I>&gt;<i> &gt; I have read also some have mentioned that squidguard is not maintained
</I>&gt;<i> &gt; anymore.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Any idea on the above?&gt; Any better alternative to squidguard that you
</I>&gt;<i> recommend?
</I>&gt;<i>
</I>&gt;<i> ufdbguard is much better than the outdated and no longer maintained
</I>&gt;<i> SquidGuard (but is not packaged on Debian).
</I>&gt;<i>
</I>&gt;<i> Amos
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20180426/c9a5dd54/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20180426/c9a5dd54/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="018152.html">[squid-users] Squid with squidguard
</A></li>
	<LI>Next message (by thread): <A HREF="018150.html">[squid-users] Squid 3.5.10 - slow upload speed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18157">[ date ]</a>
              <a href="thread.html#18157">[ thread ]</a>
              <a href="subject.html#18157">[ subject ]</a>
              <a href="author.html#18157">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
