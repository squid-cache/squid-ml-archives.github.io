<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] socks on squid, still working?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20socks%20on%20squid%2C%20still%20working%3F&In-Reply-To=%3C910bdd1c-05a3-daf7-3661-48406c5eeedc%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018817.html">
   <LINK REL="Next"  HREF="018821.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] socks on squid, still working?</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20socks%20on%20squid%2C%20still%20working%3F&In-Reply-To=%3C910bdd1c-05a3-daf7-3661-48406c5eeedc%40treenet.co.nz%3E"
       TITLE="[squid-users] socks on squid, still working?">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Aug  1 14:44:15 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="018817.html">[squid-users] socks on squid, still working?
</A></li>
        <LI>Next message (by thread): <A HREF="018821.html">[squid-users] socks on squid, still working?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18818">[ date ]</a>
              <a href="thread.html#18818">[ thread ]</a>
              <a href="subject.html#18818">[ subject ]</a>
              <a href="author.html#18818">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 02/08/18 02:19, mzgmedia wrote:
&gt;<i> the export of variable doesn't seems to work for me
</I>&gt;<i> 
</I>&gt;<i> export CFLAGS=&quot; -Dbind=SOCKSbind &quot;
</I>&gt;<i> export CXXFLAGS=&quot; -Dbind=SOCKSbind &quot;
</I>&gt;<i> export LDADD=&quot; -lsocks &quot;
</I>&gt;<i> 
</I>
As I said earlier, you need to check the library symbol names match the
ones you are telling the compiler to use instead of bind().

The error you had earlier was that the SOCKSbind name could not be found
in any library. Squid code does not use that function name anywhere, so
that error could only happen if the export *was* working - but the
library not being found.


&gt;<i> so I'm trying to do  via
</I>&gt;<i> 
</I>&gt;<i> ./configure --build=x86_64-redhat-linux-gnu --host=x86_64-redhat-linux-gnu
</I>&gt;<i> --target=x86_64-redhat-linux-gnu \
</I>&gt;<i> ..
</I>&gt;<i> ..
</I>&gt;<i> ..
</I>&gt;<i> --enable-follow-x-forwarded-for=no \
</I>&gt;<i> 'build_alias=x86_64-redhat-linux-gnu' 'host_alias=x86_64-redhat-linux-gnu'
</I>&gt;<i> 'target_alias=x86_64-redhat-linux-gnu' \
</I>&gt;<i> 'CFLAGS=-Dbind=SOCKSbind -ltcmalloc_minimal -Os -ffunction-sections
</I>&gt;<i> -fdata-sections  -Wl,--gc-sections -Wl,--build-id=none -pipe -fexceptions
</I>&gt;<i> -march=native ' \
</I>&gt;<i> 'CXXFLAGS=-Dbind=SOCKSbind -ltcmalloc_minimal -Os -ffunction-sections
</I>&gt;<i> -fdata-sections -Wl,--gc-sections -Wl,--build-id=none  -pipe  -fexceptions
</I>&gt;<i> -march=native' \
</I>
AFAIK you should not combine cross-compilation (--build/--host/--target)
with -march=native (compile optimizations for local machines CPU
specific abilities).


&gt;<i> 'LDADD=-lsocks '
</I>&gt;<i> 
</I>&gt;<i> so I don't think that lsocks is taken?
</I>&gt;<i> 
</I>
Do you have libsocks development version installed in the OS default
location?

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="018817.html">[squid-users] socks on squid, still working?
</A></li>
	<LI>Next message (by thread): <A HREF="018821.html">[squid-users] socks on squid, still working?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18818">[ date ]</a>
              <a href="thread.html#18818">[ thread ]</a>
              <a href="subject.html#18818">[ subject ]</a>
              <a href="author.html#18818">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
