<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] About SSL peek-n-splice/bump configurations
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20About%20SSL%20peek-n-splice/bump%20configurations&In-Reply-To=%3C6eb5660d-8025-eedd-3ed9-47d30bf22e62%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018933.html">
   <LINK REL="Next"  HREF="018932.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] About SSL peek-n-splice/bump configurations</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20About%20SSL%20peek-n-splice/bump%20configurations&In-Reply-To=%3C6eb5660d-8025-eedd-3ed9-47d30bf22e62%40measurement-factory.com%3E"
       TITLE="[squid-users] About SSL peek-n-splice/bump configurations">rousskov at measurement-factory.com
       </A><BR>
    <I>Mon Aug 13 05:00:41 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="018933.html">[squid-users] About SSL peek-n-splice/bump configurations
</A></li>
        <LI>Next message (by thread): <A HREF="018932.html">[squid-users] Help Team Squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18935">[ date ]</a>
              <a href="thread.html#18935">[ thread ]</a>
              <a href="subject.html#18935">[ subject ]</a>
              <a href="author.html#18935">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 08/12/2018 06:57 PM, Julian Perconti wrote:
&gt;&gt;<i> De: Alex Rousskov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt;
</I>&gt;&gt;<i> Enviado el: domingo, 12 de agosto de 2018 20:50
</I>&gt;&gt;<i> Para: Julian Perconti &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">vh1988 at yahoo.com.ar</A>&gt;; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;<i> Asunto: Re: [squid-users] About SSL peek-n-splice/bump configurations
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 08/12/2018 04:09 PM, Julian Perconti wrote:
</I>&gt;&gt;&gt;<i> I would like to know which of these two cfg's are &quot;better&quot; or &quot;more secure&quot;
</I>&gt;&gt;&gt;<i> when a site/domain is spliced, bumped, etc.
</I>
&gt;&gt;<i> It is impossible to answer that question without knowing how _you_ define
</I>&gt;&gt;<i> &quot;better&quot; or &quot;more secure&quot;.
</I>

&gt;<i> I tried to meant, &quot;security&quot; from the client-side accessing to a
</I>&gt;<i> non-bumped or spliced site, i.g.: bank website... client-side
</I>&gt;<i> &quot;privacy&quot; or an a -real- man-in-the-middle attack due to squid in the
</I>&gt;<i> middle.
</I>
A splicing Squid does not perform a man-in-the-middle attack on TLS or
HTTP traffic. It essentially acts as a TCP/IP-level proxy and can log
TLS handshake details. In some environments, doing all that improves
&quot;privacy&quot; and &quot;security&quot;. In others, it makes things worse (for some
definition of &quot;privacy&quot; and &quot;security&quot;).

A bumping Squid performs a man-in-the-middle attack on TLS traffic.
After a successful attack, it essentially acts as an HTTP-level proxy
and can log or even alter TLS and HTTP traffic. In some environments,
doing all that improves &quot;privacy&quot; and &quot;security&quot; (for some definition of
&quot;privacy&quot; and &quot;security&quot;). In others, it makes things worse.

You would have to ask a much more specific question to get a more
specific (but still correct) answer.


&gt;<i> Is well-known that there is no system /network/o.s. 100% secure but,
</I>&gt;<i> I dont know why, I always thought or stil think that with a https
</I>&gt;<i> proxy/filtering, the security or &quot;the things&quot; tooggles more risky if
</I>&gt;<i> this one did not exist. Even squid 100% correctly configured and
</I>&gt;<i> server well secured.
</I>
There are examples where deploying a splicing or even bumping Squid
improves security of the humans and/or machines that are trusting Squid
to examine and/or police their traffic. There are counter-examples as
well. And I am sure that many installations can be viewed as both,
depending on who gets to define &quot;privacy&quot;, &quot;security&quot;, and the &quot;right
balance&quot; between the two.


&gt;<i> What does squid when I dont specify the step?
</I>
Bugs notwithstanding, Squid should either

* bump if you were staring during the previous (explicitly configured)
step or

* splice otherwise (including cases when no previous step was explicitly
configured or existed).

I would not rely on this (correct) behavior without testing (at least)
your Squid version (at least). I know that early SslBump implementations
had bugs in that area.


&gt;<i> For example:
</I>&gt;<i> 
</I>&gt;<i> What does squid do with..:
</I>&gt;<i> ssl_bump splice step3 noBumpSites
</I>
Assuming there are no other rules, Squid should splice at step1 (see the
&quot;splice otherwise&quot; rule above).


&gt;<i> ...And what it do instead with this?:
</I>&gt;<i> ssl_bump splice noBumpSites
</I>
Assuming there are no other rules, Squid should splice at step1. It will
do that when noBumpSites matches (naturally) and if noBumpSites does not
match (per the &quot;splice otherwise&quot; rule above).


&gt;<i> So, Would You prefer option 2?
</I>
Sorry, I cannot answer this question -- too many unknown variables. It
is like asking a doctor whether she prefers to treat the patient with
drug A or drug B when the doctor does not know what the patient is
suffering from and what the patient's treatment preferences/goals are.


&gt;&gt;&gt;<i> with Option 1 I don't see the domain in &quot;TUNNEL&quot; line, just the IP
</I>&gt;&gt;&gt;<i> addr.)
</I>
&gt;&gt;<i> I doubt that is how it is supposed to work. When splicing, Option 1 should
</I>&gt;&gt;<i> have the same or more information so it should log the domain name if
</I>&gt;&gt;<i> Option 2 has the domain name. If you are comparing log lines for identical
</I>&gt;&gt;<i> transactions, then this could be a Squid bug.
</I>
&gt;<i> I dont know, I just tell what happen in the access.log when I
</I>&gt;<i> switching between these ssl_bump configs.
</I>
Yes, and I am just describing what should be happening (IMO). If what is
actually happening bothers you, and it does not match what should be
happening, and nobody comes up with a better explanation, then consider
filing a bug report and working with developers to address the problem.


HTH,

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="018933.html">[squid-users] About SSL peek-n-splice/bump configurations
</A></li>
	<LI>Next message (by thread): <A HREF="018932.html">[squid-users] Help Team Squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18935">[ date ]</a>
              <a href="thread.html#18935">[ thread ]</a>
              <a href="subject.html#18935">[ subject ]</a>
              <a href="author.html#18935">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
