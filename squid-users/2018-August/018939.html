<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 4.2 is available ( debian stretch )
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%204.2%20is%20available%20%28%20debian%20stretch%20%29&In-Reply-To=%3Cvmime.5b719ca1.51e6.36b7c2675a3bf831%40ms249-lin-003.rotterdam.bazuin.nl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018972.html">
   <LINK REL="Next"  HREF="018940.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 4.2 is available ( debian stretch )</H1>
    <B>L.P.H. van Belle</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%204.2%20is%20available%20%28%20debian%20stretch%20%29&In-Reply-To=%3Cvmime.5b719ca1.51e6.36b7c2675a3bf831%40ms249-lin-003.rotterdam.bazuin.nl%3E"
       TITLE="[squid-users] Squid 4.2 is available ( debian stretch )">belle at bazuin.nl
       </A><BR>
    <I>Mon Aug 13 14:58:41 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="018972.html">[squid-users] [squid-announce] Squid 4.2 is available
</A></li>
        <LI>Next message (by thread): <A HREF="018940.html">[squid-users] Squid 4.2 is available ( debian stretch )
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18939">[ date ]</a>
              <a href="thread.html#18939">[ thread ]</a>
              <a href="subject.html#18939">[ subject ]</a>
              <a href="author.html#18939">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hai, 

Thank you for the new release.

If people want to test against Debian, i've create Debian Stretch packages for Squid 4.2 today. 
I am testing them as we speak and if you want to test them, you can find them here: 
<A HREF="https://downloads.van-belle.nl">https://downloads.van-belle.nl</A> 

I took the Debian squid GIT sources for this rebuild against Debian Stretch.
Build logs are avaible through the dowloads link.
Drop me a note how they are working, if they are ok, i'll put them on my repo.
I've keept all settings the default in these tests. Only enabled the &quot;localnet&quot; 

Im using the following systemd service settings. 

The defaults, +  ( systemctl edit squid.service ) 
# /etc/systemd/system/squid.service.d/override.conf
[Service]
# The default is 1024, increase this if needed.
LimitNOFILE=4096

For squid 4.1, i changed the logrotate file a bit. 
I added systemd part and changed reload to restart, due to assertion fail. 

A part of : /etc/logrotate.d/squid
        postrotate
            if [ -d /run/systemd/system ] &amp;&amp; command systemctl &gt;/dev/null 2&gt;&amp;1 &amp;&amp; systemctl is-active --quiet squid.service; then
                systemctl reload squid.service
            elif [ -f /var/run/squid.pid ]; then
                test ! -e /var/run/squid.pid || test ! -x /usr/sbin/squid || /usr/sbin/squid -k rotate
            fi
        endscript

After the upgrade to 4.2, i change the restart back to reload, and no assertion failed anymore in 4.2 :-).  

My questions for 4.2 is: 
Anyone any idea why we see 2x &quot;2018/08/13 16:30:57| Created PID file (/var/run/squid.pid)&quot;  in the start up process?  
I notice this in the cache.log, i tested this with a normal start/stop and restart and reboot.

The Log part. ( from a restart ) 
2018/08/13 16:30:26 kid1| Preparing for shutdown after 0 requests
2018/08/13 16:30:26 kid1| Waiting 30 seconds for active connections to finish
2018/08/13 16:30:26 kid1| Closing HTTP(S) port [::]:3128
2018/08/13 16:30:26 kid1| Closing Pinger socket on FD 14
2018/08/13 16:30:33| Pinger exiting.
2018/08/13 16:30:57 kid1| Shutdown: NTLM authentication.
2018/08/13 16:30:57 kid1| Shutdown: Negotiate authentication.
2018/08/13 16:30:57 kid1| Shutdown: Digest authentication.
2018/08/13 16:30:57 kid1| Shutdown: Basic authentication.
2018/08/13 16:30:57 kid1| Shutting down...
2018/08/13 16:30:57 kid1| storeDirWriteCleanLogs: Starting...
2018/08/13 16:30:57 kid1|   Finished.  Wrote 0 entries.
2018/08/13 16:30:57 kid1|   Took 0.00 seconds (  0.00 entries/sec).
CPU Usage: 0.044 seconds = 0.044 user + 0.000 sys
Maximum Resident Size: 94112 KB
Page faults with physical i/o: 0
2018/08/13 16:30:57 kid1| Logfile: closing log daemon:/var/log/squid/access.log
2018/08/13 16:30:57 kid1| Logfile Daemon: closing log daemon:/var/log/squid/access.log
2018/08/13 16:30:57 kid1| Open FD UNSTARTED    10 IPC UNIX STREAM Parent
2018/08/13 16:30:57 kid1| Squid Cache (Version 4.2): Exiting normally.
2018/08/13 16:30:57| Removing PID file (/var/run/squid.pid)
2018/08/13 16:30:57| Created PID file (/var/run/squid.pid)
2018/08/13 16:30:57 kid1| Set Current Directory to /var/spool/squid
2018/08/13 16:30:57 kid1| Creating missing swap directories
2018/08/13 16:30:57 kid1| No cache_dir stores are configured.
2018/08/13 16:30:57| Removing PID file (/var/run/squid.pid)
2018/08/13 16:30:57| Created PID file (/var/run/squid.pid)
2018/08/13 16:30:57 kid1| Set Current Directory to /var/spool/squid
2018/08/13 16:30:57 kid1| Starting Squid Cache version 4.2 for x86_64-pc-linux-gnu...
2018/08/13 16:30:57 kid1| Service Name: squid
2018/08/13 16:30:57 kid1| Process ID 1658
2018/08/13 16:30:57 kid1| Process Roles: worker
2018/08/13 16:30:57 kid1| With 4096 file descriptors available
2018/08/13 16:30:57 kid1| Initializing IP Cache...


Greetz, 

Louis



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="018972.html">[squid-users] [squid-announce] Squid 4.2 is available
</A></li>
	<LI>Next message (by thread): <A HREF="018940.html">[squid-users] Squid 4.2 is available ( debian stretch )
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18939">[ date ]</a>
              <a href="thread.html#18939">[ thread ]</a>
              <a href="subject.html#18939">[ subject ]</a>
              <a href="author.html#18939">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
