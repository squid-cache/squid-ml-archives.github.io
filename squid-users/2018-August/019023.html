<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] https requests the squid rejects the connection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20https%20requests%20the%20squid%20rejects%20the%20connection&In-Reply-To=%3C6cb7ee2a-aa10-56e3-78e0-d9ecc7bdda06%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019019.html">
   <LINK REL="Next"  HREF="019024.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] https requests the squid rejects the connection</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20https%20requests%20the%20squid%20rejects%20the%20connection&In-Reply-To=%3C6cb7ee2a-aa10-56e3-78e0-d9ecc7bdda06%40treenet.co.nz%3E"
       TITLE="[squid-users] https requests the squid rejects the connection">squid3 at treenet.co.nz
       </A><BR>
    <I>Mon Aug 20 20:02:44 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019019.html">[squid-users] https requests the squid rejects the connection
</A></li>
        <LI>Next message (by thread): <A HREF="019024.html">[squid-users] https requests the squid rejects the connection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19023">[ date ]</a>
              <a href="thread.html#19023">[ thread ]</a>
              <a href="subject.html#19023">[ subject ]</a>
              <a href="author.html#19023">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 21/08/18 6:45 AM, Marcelo J. Martinez wrote:
&gt;<i> sorry, it's a mistake to copy and paste.
</I>&gt;<i> the configuration is:
</I>&gt;<i> 
</I>&gt;<i> # Only allow cachemgr access from localhost
</I>&gt;<i> http_access allow manager localhost
</I>&gt;<i> http_access deny manager
</I>&gt;<i> # Deny requests to unknown ports
</I>&gt;<i> http_access deny !Safe_ports
</I>&gt;<i> # Deny CONNECT to other than SSL ports
</I>&gt;<i> http_access deny CONNECT !SSL_ports
</I>&gt;<i> 
</I>
FYI: current recommended config has the manager lines after the CONNECT
line, that makes Squid a tiny bit faster and safer against CONNECT to
the manager URLs.

That will not solve your current issue though. As Matus said the log
entry (access.log) for the transaction is needed for more info about
what is going on - in particular the URL which is being denied.

I suspect it is simply a normal HTTP request to a port you were not
expecting. You did reduce the Safe_Ports ACL definition significantly.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019019.html">[squid-users] https requests the squid rejects the connection
</A></li>
	<LI>Next message (by thread): <A HREF="019024.html">[squid-users] https requests the squid rejects the connection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19023">[ date ]</a>
              <a href="thread.html#19023">[ thread ]</a>
              <a href="subject.html#19023">[ subject ]</a>
              <a href="author.html#19023">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
