<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] supress some special error messages fromm access.log
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20supress%20some%20special%20error%20messages%20fromm%0A%20access.log&In-Reply-To=%3Ce55c7506-aee4-3921-c048-d20049ecb1fe%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019084.html">
   <LINK REL="Next"  HREF="019086.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] supress some special error messages fromm access.log</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20supress%20some%20special%20error%20messages%20fromm%0A%20access.log&In-Reply-To=%3Ce55c7506-aee4-3921-c048-d20049ecb1fe%40measurement-factory.com%3E"
       TITLE="[squid-users] supress some special error messages fromm access.log">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Aug 30 16:14:34 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019084.html">[squid-users] supress some special error messages fromm access.log
</A></li>
        <LI>Next message (by thread): <A HREF="019086.html">[squid-users] Fwd: squid-3.5.27 pfSense
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19085">[ date ]</a>
              <a href="thread.html#19085">[ thread ]</a>
              <a href="subject.html#19085">[ subject ]</a>
              <a href="author.html#19085">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 08/30/2018 08:03 AM, Verwaiser wrote:

&gt;<i> since updating our proxy (now squid 4.03) I get very very many error
</I>&gt;<i> messages like the following examples:
</I>&gt;<i> 
</I>&gt;<i> /192.168.12.120 - - [30/Aug/2018:12:11:51 +0200] &quot;NONE
</I>&gt;<i> error:transaction-end-before-headers NONE/0.0&quot; 0 0 NONE:HIER_NONE
</I>
AFAIK, the following email summarizes the current status of those
transaction-end-before-headers log entries:
<A HREF="http://lists.squid-cache.org/pipermail/squid-users/2017-June/015781.html">http://lists.squid-cache.org/pipermail/squid-users/2017-June/015781.html</A>


&gt;<i> How can I get rid of these messages? Is it possible to construct an ACL
</I>
Probably yes. Look at your access log entries and try (a combination of)
simple ACLs that are likely to match logged default/zero values: port,
localport, proto, method, http_status, hier_code, and has.

When designing your ACLs, be as restrictive as you can to minimize the
chance of false positives (that you will never see logged and so you
will not know that they exist). It may be a good idea to log all matches
into a separate log so that you can easily double check that they all
have error:transaction-end-before-headers.

Once you figure it out, please post the winning combination here.


&gt;<i> like
</I>&gt;<i> /acl noTransactionError url_regex -i &quot;error:transaction-end-before-headers&quot;
</I>&gt;<i> access_log none noTransactionError /
</I>&gt;<i> 
</I>&gt;<i> (doesnt work...)
</I>
If url_regex does not work in this context, it is a bug. The same bug
probably makes the workaround mentioned above possible. You can
facilitate fixing this bug instead of fiddling with ACLs, of course.


HTH,

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019084.html">[squid-users] supress some special error messages fromm access.log
</A></li>
	<LI>Next message (by thread): <A HREF="019086.html">[squid-users] Fwd: squid-3.5.27 pfSense
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19085">[ date ]</a>
              <a href="thread.html#19085">[ thread ]</a>
              <a href="subject.html#19085">[ subject ]</a>
              <a href="author.html#19085">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
