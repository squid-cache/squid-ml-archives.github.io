<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid disable ipv6 outbound traffic
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20disable%20ipv6%20outbound%20traffic&In-Reply-To=%3C6dc679d9-1e52-8f75-de59-349d38853139%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019760.html">
   <LINK REL="Next"  HREF="019771.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid disable ipv6 outbound traffic</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20disable%20ipv6%20outbound%20traffic&In-Reply-To=%3C6dc679d9-1e52-8f75-de59-349d38853139%40treenet.co.nz%3E"
       TITLE="[squid-users] squid disable ipv6 outbound traffic">squid3 at treenet.co.nz
       </A><BR>
    <I>Sun Dec  2 09:42:25 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019760.html">[squid-users] squid disable ipv6 outbound traffic
</A></li>
        <LI>Next message (by thread): <A HREF="019771.html">[squid-users] Performance issue /cache_dir / cache_mem / SMP	workers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19763">[ date ]</a>
              <a href="thread.html#19763">[ thread ]</a>
              <a href="subject.html#19763">[ subject ]</a>
              <a href="author.html#19763">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2/12/18 10:14 am, Dmitri Seletski wrote:
&gt;<i> Hello Dear Squidies,
</I>&gt;<i> 
</I>&gt;<i> Situation:
</I>&gt;<i> 
</I>&gt;<i> I have,
</I>&gt;<i> 
</I>&gt;<i> IPv4 only tunnel for security.
</I>&gt;<i> 
</I>&gt;<i> IPv6 enabled ISP.
</I>&gt;<i> 
</I>&gt;<i> VM with Squid in it, that works over bridge.(so it has both NAT IPv4 IP
</I>&gt;<i> an IPv6 IP)
</I>&gt;<i> 
</I>
FYI: Modern Internet connected software is required to prefer IPv6 over
the outdated and deprecated IPv4. Squid will not be the only software
with this behaviour so you need to do this properly (see below) not just
for Squid.

&gt;<i> 
</I>&gt;<i> Problem:
</I>&gt;<i> 
</I>&gt;<i> When i go to some sites,&#160; Squid instead of pulling traffic over tunnel
</I>&gt;<i> provider, does it over IPv6 enabled ISP of mine, which defeats purpose
</I>&gt;<i> of VPN provider.
</I>
Is that VPN provider running your traffic through some specialized
security checking software?

If not then Squid is providing *better* security just by existing in the
traffic path. Even for that IPv6 traffic.


&gt;<i> 
</I>&gt;<i> So i need to know how to kill IPv4, at least outbound traffic from Squid
</I>&gt;<i> to rest of Internetz pages. (and no, preference to IPv4 DNS is not an
</I>&gt;<i> option, as some pages are not available in IPv4, so i'd rather not see
</I>&gt;<i> them at all)
</I>
It is your OS which decides whether or not the VPN or the IPv6 is used
for any given connection.

So the proper way to do what you are asking is to set your VM's firewall
to only allow access through the VPN for connections made by Squid.
Connections to the IPv6 network should be rejected with an ICMPv6
&quot;Network Unavailable&quot; packet which makes Squid move on to the IPv4 attempts.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019760.html">[squid-users] squid disable ipv6 outbound traffic
</A></li>
	<LI>Next message (by thread): <A HREF="019771.html">[squid-users] Performance issue /cache_dir / cache_mem / SMP	workers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19763">[ date ]</a>
              <a href="thread.html#19763">[ thread ]</a>
              <a href="subject.html#19763">[ subject ]</a>
              <a href="author.html#19763">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
