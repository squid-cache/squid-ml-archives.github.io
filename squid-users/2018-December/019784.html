<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Proxy Chaining with ssl_bump
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Proxy%20Chaining%20with%20ssl_bump&In-Reply-To=%3C1ca23f19-1a60-be29-dca8-24c8bc882a73%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019783.html">
   <LINK REL="Next"  HREF="019786.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Proxy Chaining with ssl_bump</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Proxy%20Chaining%20with%20ssl_bump&In-Reply-To=%3C1ca23f19-1a60-be29-dca8-24c8bc882a73%40treenet.co.nz%3E"
       TITLE="[squid-users] Proxy Chaining with ssl_bump">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Dec  5 12:42:24 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019783.html">[squid-users] Proxy Chaining with ssl_bump
</A></li>
        <LI>Next message (by thread): <A HREF="019786.html">[squid-users] Proxy Chaining with ssl_bump
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19784">[ date ]</a>
              <a href="thread.html#19784">[ thread ]</a>
              <a href="subject.html#19784">[ subject ]</a>
              <a href="author.html#19784">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 6/12/18 1:03 am, Christof Gerber wrote:
&gt;<i> I have a squid 3.5 as forward proxy that does ssl_bump by default.
</I>&gt;<i> Some traffic I need to forward in addition to a second proxy by proxy
</I>&gt;<i> chaining. The following configuration works for HTTP traffic but not
</I>&gt;<i> with HTTPS. I found out through
</I>&gt;<i> <A HREF="https://www.spinics.net/lists/squid/msg84767.html">https://www.spinics.net/lists/squid/msg84767.html</A> that this is because
</I>&gt;<i> Squid 3.5 is not capable of doing ssl_bump + proxy chaining because
</I>&gt;<i> the first proxy in the chain won't send a CONNECT after ssl_bump was
</I>&gt;<i> performed. My question is:
</I>&gt;<i> 
</I>&gt;<i> 1. Is this finding still up-to-date , saying that Squid 3.5 does not
</I>&gt;<i> support ssl_bump + proxy chaining. How is it for Squid 4?
</I>
The situation is better and constantly being improved. But the official
releases are still not doing CONNECT to upstream peers in the case where
traffic is fully decrypted by the first proxy. Only the cases where
decryption is avoided with splice or on_unsupported_protocol tunnel's.

IIRC Measurement Factory had an experimental git branch to add CONNECT
over non-TLS/SSL peers. I'm not sure what the status is on that now, it
has not been submitted for merge auditing yet.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019783.html">[squid-users] Proxy Chaining with ssl_bump
</A></li>
	<LI>Next message (by thread): <A HREF="019786.html">[squid-users] Proxy Chaining with ssl_bump
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19784">[ date ]</a>
              <a href="thread.html#19784">[ thread ]</a>
              <a href="subject.html#19784">[ subject ]</a>
              <a href="author.html#19784">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
