<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] HTTPS proxy setup questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20HTTPS%20proxy%20setup%20questions&In-Reply-To=%3C44ad4ea0-1864-3567-c0fa-d22aca9f2492%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019800.html">
   <LINK REL="Next"  HREF="019817.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] HTTPS proxy setup questions</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20HTTPS%20proxy%20setup%20questions&In-Reply-To=%3C44ad4ea0-1864-3567-c0fa-d22aca9f2492%40treenet.co.nz%3E"
       TITLE="[squid-users] HTTPS proxy setup questions">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Dec 13 01:53:04 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019800.html">[squid-users] HTTPS proxy setup questions
</A></li>
        <LI>Next message (by thread): <A HREF="019817.html">[squid-users] HTTPS proxy setup questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19803">[ date ]</a>
              <a href="thread.html#19803">[ thread ]</a>
              <a href="subject.html#19803">[ subject ]</a>
              <a href="author.html#19803">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 13/12/18 12:50 pm, Subhish Pillai wrote:
&gt;<i> Thanks Alex, that was very helpful.
</I>&gt;<i> 
</I>&gt;<i> Based on your explanation, I just want to use squid as a blind TCP
</I>&gt;<i> tunnel carrying the HTTPS connection from client to app server.&#160;
</I>&gt;<i> 
</I>&gt;<i> In that case, I don't need to use ssl_bump feature and the ssl_crtd
</I>&gt;<i> program for certificate management, is that correct?
</I>&gt;<i> 
</I>
Going by the description you gave of the client configuration, it should be.


&gt;<i> Would this config file work to setup the TCP tunnel --
</I>
...
&gt;<i> ## Allow server side certificate errors such as untrusted certificates,
</I>&gt;<i> otherwise the connection is closed for such errors
</I>&gt;<i> sslproxy_cert_error allow all
</I>&gt;<i> 
</I>&gt;<i> ## Accept certificates that fail verification (should only be needed if
</I>&gt;<i> using 'sslproxy_cert_error allow all')
</I>&gt;<i> sslproxy_flags DONT_VERIFY_PEER
</I>&gt;<i> 
</I>
These sslproxy_* options only apply when Squid is actively performing
TLS to upstream servers. They have no place in the &quot;blind tunnel&quot; situation.
(They also are deprecated in Squid-4, replaced by the
tls_outgoing_options directive
&lt;<A HREF="http://www.squid-cache.org/Doc/config/tls_outgoing_options/">http://www.squid-cache.org/Doc/config/tls_outgoing_options/</A>&gt;).

If the client software is sending CONNECT requests containing the HTTPS
traffic, then there is absolutely nothing your config needs to do than
let them send those requests to the proxy (as the default config does).

You do not even need Squid to be built with TLS/SSL support. That is the
meaning of &quot;blind&quot; in this setup.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019800.html">[squid-users] HTTPS proxy setup questions
</A></li>
	<LI>Next message (by thread): <A HREF="019817.html">[squid-users] HTTPS proxy setup questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19803">[ date ]</a>
              <a href="thread.html#19803">[ thread ]</a>
              <a href="subject.html#19803">[ subject ]</a>
              <a href="author.html#19803">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
