<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Problem with Kerberos ticket keytab
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Problem%20with%20Kerberos%20ticket%20keytab&In-Reply-To=%3Caabe1a9e18a7a48e9bb552f6f6325cfe%40data-core.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017510.html">
   <LINK REL="Next"  HREF="017512.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Problem with Kerberos ticket keytab</H1>
    <B>Flashdown</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Problem%20with%20Kerberos%20ticket%20keytab&In-Reply-To=%3Caabe1a9e18a7a48e9bb552f6f6325cfe%40data-core.org%3E"
       TITLE="[squid-users] Problem with Kerberos ticket keytab">flashdown at data-core.org
       </A><BR>
    <I>Mon Feb  5 15:55:17 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="017510.html">[squid-users] Problem with Kerberos ticket keytab
</A></li>
        <LI>Next message (by thread): <A HREF="017512.html">[squid-users] Problem with Kerberos ticket keytab
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17511">[ date ]</a>
              <a href="thread.html#17511">[ thread ]</a>
              <a href="subject.html#17511">[ subject ]</a>
              <a href="author.html#17511">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am answering to fast, but I am writing in my little break, so sorry 
for that :D forget my last mail regarding &quot;to call it correctly&quot; that 
was misleading and wrong. sure you are talking about the HTTP SPN which 
have the same KVNO. So if you want to get rid of it delete the computer 
object, as your are updating all the SPN's that the Computer Object 
holds. If you use the Attribut-Editor you may can modify the Attribut 
servicePrincipalName and delete the wrong one and recreate the keytab 
afterwards, without deleting the Computer Object at all.



Am 2018-02-05 16:39, schrieb Flashdown:
&gt;<i> Just to call it correctly, what is wrong is the host principle after
</I>&gt;<i> you have deleted the computer object and waited for the object to
</I>&gt;<i> disappear on other DC's as well (if you have replication between dc's)
</I>&gt;<i> and rejoined it, it should be as you want it to be. Hope this helps
</I>&gt;<i> with your setup.
</I>&gt;<i> 
</I>&gt;<i> Am 5. Februar 2018 16:12:29 MEZ schrieb Flashdown
</I>&gt;<i> &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">flashdown at data-core.org</A>&gt;:
</I>&gt;<i> 
</I>&gt;&gt;<i> Delete the Computer Object in Active Directory to clear these spn's
</I>&gt;&gt;<i> up.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Am 5. Februar 2018 15:54:26 MEZ schrieb erdosain9
</I>&gt;&gt;<i> &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">erdosain9 at gmail.com</A>&gt;:
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Hi to all.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> The squid was working fine, but i made a mistake and... delete the
</I>&gt;&gt;&gt;<i> proxy.keytab. I try to do it again, but make a mistake in the
</I>&gt;&gt;&gt;<i> syntax
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> wrong syntax (the real name is not squidproxy.domain.lan is
</I>&gt;&gt;&gt;<i> squid.domain.lan):
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> msktutil -c -b &quot;CN=COMPUTERS&quot; -s HTTP/squidproxy.domain.lan -k
</I>&gt;&gt;&gt;<i> /etc/squid/PROXY.keytab --computer-name SQUIDPROXY-K --upn
</I>&gt;&gt;&gt;<i> HTTP/squidproxy.domain.lan --server adw-1.domain.lan --verbose
</I>&gt;&gt;&gt;<i> --enctypes 28
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> now i put well the syntax, but the keytab is wrong... why??
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> well syntax:
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> msktutil -c -b &quot;CN=COMPUTERS&quot; -s HTTP/squid.domain.lan -h
</I>&gt;&gt;&gt;<i> squid.domain.lan
</I>&gt;&gt;&gt;<i> -k /etc/squid/PROXY.keytab --computer-name SQUIDPROXY-K --upn
</I>&gt;&gt;&gt;<i> HTTP/squid.domain.lan --server adw-1.domain.lan --verbose
</I>&gt;&gt;&gt;<i> --enctypes 28
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> [<A HREF="https://lists.squid-cache.org/listinfo/squid-users">root at squid</A> squid]# ktutil
</I>&gt;&gt;&gt;<i> ktutil:  read_kt PROXY.keytab
</I>&gt;&gt;&gt;<i> ktutil:  l
</I>&gt;&gt;&gt;<i> slot KVNO Principal
</I>&gt;&gt;&gt;<i> ---- ----
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> -------------------------
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> 1   18                 squidproxy-k$@DOMAIN.LAN
</I>&gt;&gt;&gt;<i> 2   18                 squidproxy-k$@DOMAIN.LAN
</I>&gt;&gt;&gt;<i> 3   18                 squidproxy-k$@DOMAIN.LAN
</I>&gt;&gt;&gt;<i> 4   18    HTTP/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squidproxy.DOMAIN.lan at DOMAIN.LAN</A>
</I>&gt;&gt;&gt;<i> 5   18    HTTP/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squidproxy.DOMAIN.lan at DOMAIN.LAN</A>
</I>&gt;&gt;&gt;<i> 6   18    HTTP/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squidproxy.DOMAIN.lan at DOMAIN.LAN</A>
</I>&gt;&gt;&gt;<i> 7   18         host/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid.DOMAIN.lan at DOMAIN.LAN</A>
</I>&gt;&gt;&gt;<i> 8   18         host/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid.DOMAIN.lan at DOMAIN.LAN</A>
</I>&gt;&gt;&gt;<i> 9   18         host/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid.DOMAIN.lan at DOMAIN.LAN</A>
</I>&gt;&gt;&gt;<i> 10   18         HTTP/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid.DOMAIN.lan at DOMAIN.LAN</A>
</I>&gt;&gt;&gt;<i> 11   18         HTTP/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid.DOMAIN.lan at DOMAIN.LAN</A>
</I>&gt;&gt;&gt;<i> 12   18         HTTP/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid.DOMAIN.lan at DOMAIN.LAN</A>
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Why squidproxy.DOMAIN.LAN????????? what can i do to solve this???
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Thanks to all!!
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> --
</I>&gt;&gt;&gt;<i> Sent from:
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;<i> <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-Users-f1019091.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-Users-f1019091.html</A>
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> -------------------------
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> squid-users mailing list
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="017510.html">[squid-users] Problem with Kerberos ticket keytab
</A></li>
	<LI>Next message (by thread): <A HREF="017512.html">[squid-users] Problem with Kerberos ticket keytab
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17511">[ date ]</a>
              <a href="thread.html#17511">[ thread ]</a>
              <a href="subject.html#17511">[ subject ]</a>
              <a href="author.html#17511">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
