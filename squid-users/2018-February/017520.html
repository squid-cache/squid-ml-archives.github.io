<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] About Squid's FTP-Proxy mode support!
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20About%20Squid%27s%20FTP-Proxy%20mode%20support%21&In-Reply-To=%3Cf3eb24cd-4416-f24e-8245-e3a6ec71ca69%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017519.html">
   <LINK REL="Next"  HREF="017523.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] About Squid's FTP-Proxy mode support!</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20About%20Squid%27s%20FTP-Proxy%20mode%20support%21&In-Reply-To=%3Cf3eb24cd-4416-f24e-8245-e3a6ec71ca69%40treenet.co.nz%3E"
       TITLE="[squid-users] About Squid's FTP-Proxy mode support!">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Feb  6 12:08:56 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="017519.html">[squid-users] About Squid's FTP-Proxy mode support!
</A></li>
        <LI>Next message (by thread): <A HREF="017523.html">[squid-users] About Squid's FTP-Proxy mode support!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17520">[ date ]</a>
              <a href="thread.html#17520">[ thread ]</a>
              <a href="subject.html#17520">[ subject ]</a>
              <a href="author.html#17520">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 07/02/18 00:31, Koji Fushimi wrote:
&gt;<i> Hello, All
</I>&gt;<i> 
</I>&gt;<i> Please provide information on Squid's support for FTP-Proxy mode.
</I>&gt;<i> 
</I>
Are you asking about the new &quot;Native FTP&quot; proxy feature?
 or Squid's older HTTP&lt;-&gt;FTP gateway proxy feature?


&gt;<i> In my understanding, the default is passive mode.
</I>&gt;<i> &#160;-/etc/squid/squid.conf&#160; ftp_passive ON
</I>&gt;<i> 
</I>
The ftp_passive directive controls HTTP&lt;-&gt;FTP gateway interactions.


&gt;<i> So if I want to work in Active mode, it is necessary to change
</I>&gt;<i> to ftp_passive off.
</I>&gt;<i> 
</I>&gt;<i> Is this understanding correct?
</I>
No, Squid FTP gateway feature auto-detects the server active/passive
capabilities. Passive works most often, but Squid can fall back to
active if passive fails. There are some issues though which make active
fail sometimes.


&quot;Native FTP&quot; proxying relays the FTP mode chosen by the client. AFAICS
in the code there is some support for Squid translating between active
and passive mode transfers on the fly. Whether that works I cannot say.


But, please be aware that Active FTP often does not work through a proxy
for the same reasons it does not work through a NAT. In fact NAT is why
Passive is the default for the gateway feature.



&gt;<i> 
</I>&gt;<i> By the way, Is it possible to work both Active mode and Passive
</I>&gt;<i> mode simultaneously?
</I>&gt;<i> &#160;-In our IT system, it is connected to many FTP Server (A-FTP Sever,
</I>&gt;<i> &#160; B-FTP Server via Squid(FTP Proxy) Server. For example, A-FTP Server
</I>&gt;<i> &#160; works in Active mode and B-FTP Server works in Passive mode.
</I>&gt;<i> 
</I>

It is technically possible in FTP since the difference is only in how
the DATA connections are established. However, Squid only supports one
DATA connection at a time per FTP client - so in reality there is no
&quot;simultaneous&quot; connections for this to actually happen on.


Whether your setup works is a question of whether the FTP client
negotiates a transfer mode that the server can perform *AND* can work
through a proxy/NAT. So the answer is &quot;try it and find out&quot;.

Thanks for your interest in Squid.


PS. If you find Squid capabilities insufficient, we used to recommend
frox as the best option for native FTP proxying
(&lt;<A HREF="http://frox.sourceforge.net/">http://frox.sourceforge.net/</A>&gt;).

Cheers
Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="017519.html">[squid-users] About Squid's FTP-Proxy mode support!
</A></li>
	<LI>Next message (by thread): <A HREF="017523.html">[squid-users] About Squid's FTP-Proxy mode support!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17520">[ date ]</a>
              <a href="thread.html#17520">[ thread ]</a>
              <a href="subject.html#17520">[ subject ]</a>
              <a href="author.html#17520">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
