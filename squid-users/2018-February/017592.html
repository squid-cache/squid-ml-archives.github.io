<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] How to set up a reverse proxy using squid for a simplified scenario?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20set%20up%20a%20reverse%20proxy%20using%20squid%20for%20a%0A%20simplified%20scenario%3F&In-Reply-To=%3C2e1963ea-170d-be7f-46ad-c3e52c31d63c%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017591.html">
   <LINK REL="Next"  HREF="017598.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] How to set up a reverse proxy using squid for a simplified scenario?</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20set%20up%20a%20reverse%20proxy%20using%20squid%20for%20a%0A%20simplified%20scenario%3F&In-Reply-To=%3C2e1963ea-170d-be7f-46ad-c3e52c31d63c%40treenet.co.nz%3E"
       TITLE="[squid-users] How to set up a reverse proxy using squid for a simplified scenario?">squid3 at treenet.co.nz
       </A><BR>
    <I>Sat Feb 10 18:09:25 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="017591.html">[squid-users] How to set up a reverse proxy using squid for a	simplified scenario?
</A></li>
        <LI>Next message (by thread): <A HREF="017598.html">[squid-users] How to set up a reverse proxy using squid for a simplified scenario?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17592">[ date ]</a>
              <a href="thread.html#17592">[ thread ]</a>
              <a href="subject.html#17592">[ subject ]</a>
              <a href="author.html#17592">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/02/18 06:33, Peng Yu wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I see the following blog about setting up a reverse proxy using squid.
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://derpturkey.com/squid-as-a-reverse-proxy/">http://derpturkey.com/squid-as-a-reverse-proxy/</A>
</I>&gt;<i> 
</I>&gt;<i> But there seem to be more configurations than what I need.
</I>&gt;<i> 
</I>&gt;<i> For example, for the following line, I don't need to restrict the
</I>&gt;<i> access to a specific domain.
</I>&gt;<i> http_port 80 accel defaultsite=www.example.com
</I>
The above does not *restrict*. It sets a default value for Squid to use
when the Host header is missing from HTTP requests.


&gt;<i> 
</I>&gt;<i> Instead, any access to the IP of the reverse proxy should be OK. In
</I>&gt;<i> this sense, should I just use the following?
</I>&gt;<i> 
</I>&gt;<i> http_port 80 accel
</I>
You can if you want to. But be aware that any clients which omit the
Host header in their requests will be rejected by the proxy with an
error page.


&gt;<i> 
</I>&gt;<i> Also, let's say I have two web servers server1 and server2 to be
</I>&gt;<i> proxied. Since I don't use a domain, I am not sure how Step 3 should
</I>&gt;<i> be adjusted.
</I>
By using other types of ACLs in an arrangement which meets your desired
mapping.

Please read the FAQ about how ACLs work. That includes a list of
different ACLs.
&lt;<A HREF="http://wiki.squid-cache.org/SquidFaq/SquidAcl">http://wiki.squid-cache.org/SquidFaq/SquidAcl</A>&gt;


So far as you have stated that would be &quot;cache_peer ... allow all&quot;.

Which is a very bad idea...

Be aware that the domain based config is itself a security layer to
prevent attackers and certain type of DoS reaching through the proxy to
attack the peers directly with bogus traffic. Using other types of ACLs,
particularly ones leading to &quot;no restriction&quot; like you describe make
your proxy and the origins all at risk for denial of service attacks.


What is your reason for wanting &quot;no restrictions&quot;?
 it could be that you actually need something very different to what you
are asking about.


&gt;<i> 
</I>&gt;<i> I also do not want any restrictions to my reverse proxy. But I am not
</I>&gt;<i> sure how Step 4 should be simplified.
</I>&gt;<i> 
</I>&gt;<i> Could anybody please let me know how to configure squid reverse proxy
</I>&gt;<i> in my simplified scenario?
</I>
That tutorial is describing the simplest scenario possible with a
multiple peers in a reverse-proxy.

Yours is actually the more complicated scenario since you apparently
need some unusual ACL configuration.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="017591.html">[squid-users] How to set up a reverse proxy using squid for a	simplified scenario?
</A></li>
	<LI>Next message (by thread): <A HREF="017598.html">[squid-users] How to set up a reverse proxy using squid for a simplified scenario?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17592">[ date ]</a>
              <a href="thread.html#17592">[ thread ]</a>
              <a href="subject.html#17592">[ subject ]</a>
              <a href="author.html#17592">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
