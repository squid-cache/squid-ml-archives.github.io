<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Using squid for http to https forward proxy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Using%20squid%20for%20http%20to%20https%20forward%20proxy&In-Reply-To=%3C55d3a421-fbf5-41ba-2faf-b38380066bd9%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017703.html">
   <LINK REL="Next"  HREF="017705.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Using squid for http to https forward proxy</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Using%20squid%20for%20http%20to%20https%20forward%20proxy&In-Reply-To=%3C55d3a421-fbf5-41ba-2faf-b38380066bd9%40treenet.co.nz%3E"
       TITLE="[squid-users] Using squid for http to https forward proxy">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Feb 23 06:47:18 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="017703.html">[squid-users] Using squid for http to https forward proxy
</A></li>
        <LI>Next message (by thread): <A HREF="017705.html">[squid-users] Determined ldap server not as an Active Directory	server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17704">[ date ]</a>
              <a href="thread.html#17704">[ thread ]</a>
              <a href="subject.html#17704">[ subject ]</a>
              <a href="author.html#17704">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 23/02/18 11:20, Faling, Martin wrote:
&gt;<i> Hi all,&#160;
</I>&gt;<i> 
</I>&gt;<i> I am new to configuring Squid as a forward proxy.&#160;
</I>&gt;<i> Not sure if squid can fullfill my need.&#160;
</I>&gt;<i> My client ( in this case a Windows 2016 server) needs to connect to the
</I>&gt;<i> forward proxy (squid) which is residing in a DMZ.&#160;
</I>&gt;<i> The forward proxy needs to establish a new session to an external
</I>&gt;<i> webserver on behalf of my client (Windows 2016 server) using mutual
</I>&gt;<i> authentication (both client and server need to authenticate using
</I>&gt;<i> certificates).
</I>&gt;<i> So assume the client certificate needs to be installed on forward proxy. 
</I>
No. A regular forward-proxy has nothing to do with TLS between clients
and origin servers (aka &quot;HTTPS&quot;). It will simply open the TCP-level
CONNECT tunnels on request by the client.


&gt;<i> I am not looking for redirection from http to https for my client.
</I>
&quot;redirect&quot; between <A HREF="http://">http://</A> and <A HREF="https://">https://</A> is forbidden to proxies.

But, I suspect that your choice of the word &quot;redirect&quot; was the wrong
thing here. It does not match with the rest of your problem description.
Specifically the part where you say you are using a forward-proxy.


&gt;<i> From
</I>&gt;<i> client to proxy it needs to be plain http in order to inspect network
</I>&gt;<i> traffic on the firewall(s).&gt;
</I>&gt;<i> Question 1 : is such a configuration possible using squid ? 
</I>
Assuming that your initial statement about wanting a forward-proxy was
the correct part of your description. The answer would be yes, and that
you do not have to configure anything at all in Squid for it to work.

The client sends an HTTP CONNECT message to the proxy, which opens the
tunnel to the remote server. When the proxy reports success, the client
initiates the TLS to that server inside the tunnel.


&gt;<i> Question 2 : if it is possible, which version of squid (to be installed
</I>&gt;<i> on CentOS 7) do I need ? How would a configuration look like ? 
</I>
If what I think you are asking about is correct any Squid can do it.
Without TLS/SSL support needing to be built into the proxy.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="017703.html">[squid-users] Using squid for http to https forward proxy
</A></li>
	<LI>Next message (by thread): <A HREF="017705.html">[squid-users] Determined ldap server not as an Active Directory	server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17704">[ date ]</a>
              <a href="thread.html#17704">[ thread ]</a>
              <a href="subject.html#17704">[ subject ]</a>
              <a href="author.html#17704">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
