<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Proxy hierarchy and FTP access
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Proxy%20hierarchy%20and%20FTP%20access&In-Reply-To=%3CE286ADE35F919742812E3076A36122E701BFCA766A%40tdsnsumbx2vp%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017729.html">
   <LINK REL="Next"  HREF="017732.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Proxy hierarchy and FTP access</H1>
    <B>Sticher, Jascha</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Proxy%20hierarchy%20and%20FTP%20access&In-Reply-To=%3CE286ADE35F919742812E3076A36122E701BFCA766A%40tdsnsumbx2vp%3E"
       TITLE="[squid-users] Proxy hierarchy and FTP access">jascha.sticher at tds.fujitsu.com
       </A><BR>
    <I>Wed Feb 28 12:32:32 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="017729.html">[squid-users] Proxy hierarchy and FTP access
</A></li>
        <LI>Next message (by thread): <A HREF="017732.html">[squid-users] TCP_MISS_ABORTED/000|
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17730">[ date ]</a>
              <a href="thread.html#17730">[ thread ]</a>
              <a href="subject.html#17730">[ subject ]</a>
              <a href="author.html#17730">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

&gt;<i> I'm sorry Jascha but the suggestions you got in your thead went kind of over
</I>&gt;<i> my head, can I ask you if and how you &quot;do allow the front-end Squid to
</I>&gt;<i> re-FTP the traffic to the appropriate server then intercept it independently
</I>&gt;<i> into the backend with its own ftp_port accepting the &quot;native FTP&quot; coming out
</I>&gt;<i> of the frontend&quot;?
</I>
Please see <A HREF="https://wiki.squid-cache.org/SquidFaq/InterceptionProxy">https://wiki.squid-cache.org/SquidFaq/InterceptionProxy</A> for an overview of the interception proxy concept.

Basically, you need to route the FTP-Traffic from your client-side proxy to the DMZ-proxy. I'm not sure on how well this will work with FTP, because of its dual-connection nature.
According to the squid FAQ it is not supported, but there are several FTP-helpers which could make this work. I haven't tried that solution either,
because we can't change our design that way without breaking production traffic. Googling

&gt;<i> If that's a &quot;technically possible only&quot; suggestion, I guess my only
</I>&gt;<i> alternative is to let my FileZilla client connect directly to my DMZ Squid
</I>&gt;<i> machine and do the ACL stuff there, right?
</I>
We are currently using the &quot;frox&quot; FTP proxy on our client-side proxy server. This software does support an FTP-Upstream proxy, but has not been maintained for a few years now.
It is not available in the official Debian repositories (since Wheezy, IIRC). If you don't want to use this, you need to allow your users to the DMZ proxy.

On the other hand, FileZilla does support an HTTP proxy (you need to allow CONNECT for the FTP target ports though).


Kind regards,

Jascha


Erleben Sie Industrie 4.0 konkret &#8211; auf der HANNOVER MESSE.
Vom 23. bis 27. April 2018.
www.fujitsu.com/de/microsite/hmi/register/index.html?utm_source=Email&amp;utm_medium=Signature%20EMail&amp;utm_campaign=HANNOVER%20MESSE%20DE&amp;utm_term=&amp;utm_content=Ticket-anfordern

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="017729.html">[squid-users] Proxy hierarchy and FTP access
</A></li>
	<LI>Next message (by thread): <A HREF="017732.html">[squid-users] TCP_MISS_ABORTED/000|
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17730">[ date ]</a>
              <a href="thread.html#17730">[ thread ]</a>
              <a href="subject.html#17730">[ subject ]</a>
              <a href="author.html#17730">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
