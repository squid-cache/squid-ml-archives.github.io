<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Transparent proxy for WiFi users
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Transparent%20proxy%20for%20WiFi%20users&In-Reply-To=%3C97086c2c-cb1d-ad3b-05d7-4f0988f8da3e%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017286.html">
   <LINK REL="Next"  HREF="017290.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Transparent proxy for WiFi users</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Transparent%20proxy%20for%20WiFi%20users&In-Reply-To=%3C97086c2c-cb1d-ad3b-05d7-4f0988f8da3e%40treenet.co.nz%3E"
       TITLE="[squid-users] Transparent proxy for WiFi users">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Jan  2 20:13:13 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="017286.html">[squid-users] Transparent proxy for WiFi users
</A></li>
        <LI>Next message (by thread): <A HREF="017290.html">[squid-users] Transparent proxy for WiFi users
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17289">[ date ]</a>
              <a href="thread.html#17289">[ thread ]</a>
              <a href="subject.html#17289">[ subject ]</a>
              <a href="author.html#17289">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 03/01/18 02:48, Roberto Carna wrote:
&gt;<i> Dear, I've setup a Squid transparent proxy + Squidgard on pfSEnse 2.4
</I>&gt;<i> in order to filter HTTP and HTTPS web content for different types of
</I>&gt;<i> WiFi clients on my company:
</I>&gt;<i> 
</I>&gt;<i> - Android (different versions)
</I>&gt;<i> - Notebooks Windows 7/10
</I>&gt;<i> - Iphone
</I>&gt;<i> - Etc.
</I>&gt;<i> 
</I>&gt;<i> In some cases, depending on the device Operating System, some apps
</I>&gt;<i> experiment problems, for example Facebook and some others.
</I>
The main cause of these problems is that when the same vendor is 
authoring both the server software and the client &quot;app&quot; (or client 
device OS). They can (and often do) hard-code TLS certificate checks 
into their client code to detect and immediately fail in the presence of 
MITM in the encryption.

Following that, SSL-Bump is still very much an ongoing project. 
Selecting even a slightly older Squid version can lead to TLS features 
not being supported. So when problems occur the best option is still to 
upgrade to the very latest release before debugging further - today that 
would be squid-4.0.22 beta.


&gt;<i> 
</I>&gt;<i> Which is the best solution in order to setup a TRANSPARENT proxy
</I>&gt;<i> service in a heterogeneous scenario with diferenbt types of devices,
</I>&gt;<i> and running in the best mode with the minimum number of problems???
</I>
The _only_ solution is not to decrypt such traffic (the splice action). 
How you determine which traffic is having such special trust given to it 
is up to you. The TLS SNI is provided by the peek action at SSL-Bump step 1.


&gt;<i> 
</I>&gt;<i> Or do I have to move to a scenario with a defined proxy in another
</I>&gt;<i> server, and automatically established in clients with DHCP ???
</I>&gt;<i> 
</I>
Explicit proxy is definitely better for HTTP than interception proxy. 
That is true regardless of what else is going on. So worth doing *if* 
you can.

That said, it is also unlikely to help much with the problem you are 
facing. Perhapse a small gain for clients not sending TLS SNI values - 
otherwise no change can be expected.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="017286.html">[squid-users] Transparent proxy for WiFi users
</A></li>
	<LI>Next message (by thread): <A HREF="017290.html">[squid-users] Transparent proxy for WiFi users
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17289">[ date ]</a>
              <a href="thread.html#17289">[ thread ]</a>
              <a href="subject.html#17289">[ subject ]</a>
              <a href="author.html#17289">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
