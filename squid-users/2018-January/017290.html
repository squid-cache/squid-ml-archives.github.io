<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Transparent proxy for WiFi users
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Transparent%20proxy%20for%20WiFi%20users&In-Reply-To=%3C03aac2f3-4bf7-0f64-0953-8b0c65cc6c64%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017289.html">
   <LINK REL="Next"  HREF="017294.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Transparent proxy for WiFi users</H1>
    <B>Yuri</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Transparent%20proxy%20for%20WiFi%20users&In-Reply-To=%3C03aac2f3-4bf7-0f64-0953-8b0c65cc6c64%40gmail.com%3E"
       TITLE="[squid-users] Transparent proxy for WiFi users">yvoinov at gmail.com
       </A><BR>
    <I>Tue Jan  2 21:15:32 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="017289.html">[squid-users] Transparent proxy for WiFi users
</A></li>
        <LI>Next message (by thread): <A HREF="017294.html">[squid-users] Transparent proxy for WiFi users
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17290">[ date ]</a>
              <a href="thread.html#17290">[ thread ]</a>
              <a href="subject.html#17290">[ subject ]</a>
              <a href="author.html#17290">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
03.01.2018 02:13, Amos Jeffries &#1087;&#1080;&#1096;&#1077;&#1090;:
&gt;<i> On 03/01/18 02:48, Roberto Carna wrote:
</I>&gt;&gt;<i> Dear, I've setup a Squid transparent proxy + Squidgard on pfSEnse 2.4
</I>&gt;&gt;<i> in order to filter HTTP and HTTPS web content for different types of
</I>&gt;&gt;<i> WiFi clients on my company:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> - Android (different versions)
</I>&gt;&gt;<i> - Notebooks Windows 7/10
</I>&gt;&gt;<i> - Iphone
</I>&gt;&gt;<i> - Etc.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> In some cases, depending on the device Operating System, some apps
</I>&gt;&gt;<i> experiment problems, for example Facebook and some others.
</I>&gt;<i>
</I>&gt;<i> The main cause of these problems is that when the same vendor is
</I>&gt;<i> authoring both the server software and the client &quot;app&quot; (or client
</I>&gt;<i> device OS). They can (and often do) hard-code TLS certificate checks
</I>&gt;<i> into their client code to detect and immediately fail in the presence
</I>&gt;<i> of MITM in the encryption.
</I>&gt;<i>
</I>&gt;<i> Following that, SSL-Bump is still very much an ongoing project.
</I>&gt;<i> Selecting even a slightly older Squid version can lead to TLS features
</I>&gt;<i> not being supported. So when problems occur the best option is still
</I>&gt;<i> to upgrade to the very latest release before debugging further - today
</I>&gt;<i> that would be squid-4.0.22 beta.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Which is the best solution in order to setup a TRANSPARENT proxy
</I>&gt;&gt;<i> service in a heterogeneous scenario with diferenbt types of devices,
</I>&gt;&gt;<i> and running in the best mode with the minimum number of problems???
</I>&gt;<i>
</I>&gt;<i> The _only_ solution is not to decrypt such traffic (the splice
</I>&gt;<i> action). How you determine which traffic is having such special trust
</I>&gt;<i> given to it is up to you. The TLS SNI is provided by the peek action
</I>&gt;<i> at SSL-Bump step 1.
</I>Well, you can do it when you want. For example, take a look (for example):

<A HREF="https://stackoverflow.com/questions/4461360/how-to-install-trusted-ca-certificate-on-android-device">https://stackoverflow.com/questions/4461360/how-to-install-trusted-ca-certificate-on-android-device</A>

or on this:

<A HREF="http://wiki.cacert.org/FAQ/ImportRootCert">http://wiki.cacert.org/FAQ/ImportRootCert</A>

Or, in your case,&#160; you can differentiate users by, for example, by
network and pass wifi users to splice rule. Much approaches exists.
&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Or do I have to move to a scenario with a defined proxy in another
</I>&gt;&gt;<i> server, and automatically established in clients with DHCP ???
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Explicit proxy is definitely better for HTTP than interception proxy.
</I>&gt;<i> That is true regardless of what else is going on. So worth doing *if*
</I>&gt;<i> you can.
</I>Oh, really? You have forgotten about beatiful 252 option in DHCP, about
WCCP interception, and such other good things. In other world,
transparent interception requires just more experienced sysadmin. This
simple requires more experience with squid, LAN equipement, and a bit
more work. So, &quot;definitely better&quot; is very discussable statement.
&gt;<i>
</I>&gt;<i> That said, it is also unlikely to help much with the problem you are
</I>&gt;<i> facing. Perhapse a small gain for clients not sending TLS SNI values -
</I>&gt;<i> otherwise no change can be expected.
</I>&gt;<i>
</I>&gt;<i> Amos
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
-- 
*****************************
* C++20 : Bug to the future *
*****************************


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="017289.html">[squid-users] Transparent proxy for WiFi users
</A></li>
	<LI>Next message (by thread): <A HREF="017294.html">[squid-users] Transparent proxy for WiFi users
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17290">[ date ]</a>
              <a href="thread.html#17290">[ thread ]</a>
              <a href="subject.html#17290">[ subject ]</a>
              <a href="author.html#17290">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
