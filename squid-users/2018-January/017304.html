<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Help with UA filtering in https connections
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Help%20with%20UA%20filtering%20in%20https%20connections&In-Reply-To=%3C573d489a-1706-ee1f-5a45-1d1f5c8b1826%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017303.html">
   <LINK REL="Next"  HREF="017286.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Help with UA filtering in https connections</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Help%20with%20UA%20filtering%20in%20https%20connections&In-Reply-To=%3C573d489a-1706-ee1f-5a45-1d1f5c8b1826%40measurement-factory.com%3E"
       TITLE="[squid-users] Help with UA filtering in https connections">rousskov at measurement-factory.com
       </A><BR>
    <I>Wed Jan  3 18:31:39 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="017303.html">[squid-users] Help with UA filtering in https connections
</A></li>
        <LI>Next message (by thread): <A HREF="017286.html">[squid-users] Transparent proxy for WiFi users
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17304">[ date ]</a>
              <a href="thread.html#17304">[ thread ]</a>
              <a href="subject.html#17304">[ subject ]</a>
              <a href="author.html#17304">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 01/03/2018 10:38 AM, Matus UHLAR - fantomas wrote:

&gt;&gt;<i> In a general case, the admin has to pick between two evils:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> * Allow TLS handshakes with arbitrary servers on TLS ports (my sketch)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> * or tell Squid to respond with error pages that the user cannot see
</I>&gt;&gt;<i> &#160;(without bypassing browser security warnings).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Which evil is lesser is up to the admin to decide.
</I>

&gt;&gt;<i> (*) We should allow CONNECTs to SSL_ports, not Safe_ports. I hope my
</I>&gt;&gt;<i> sketch did not use those ACLs.
</I>
&gt;<i> I'm afraid you did.
</I>
I did not:
<A HREF="http://lists.squid-cache.org/pipermail/squid-users/2017-December/017268.html">http://lists.squid-cache.org/pipermail/squid-users/2017-December/017268.html</A>

I used toSafePorts which is not one of the default ACLs (but may contain
them). The admin should define the ACLs left out of the sketch
correctly, of course. Moreover, I would rename toSafePorts to
toConnectableDestinations or similar to emphasize that this is the right
place to ban CONNECTs to wrong/dangerous/etc. addresses.


&gt;<i> I'm also afraid that your proposal also prevents us from disabling
</I>&gt;<i> CONNECTs later
</I>
If you are saying that my simple sketch does not address all possible
use cases, then I certainly agree! I believe it addressed what OP
requested, but if I misinterpreted his or her desires, I apologize. I
hope the general description quoted at the start of this email combined
with Amos and yours warnings about undesirable CONNECT destinations will
allow them to fix their configuration as needed.

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="017303.html">[squid-users] Help with UA filtering in https connections
</A></li>
	<LI>Next message (by thread): <A HREF="017286.html">[squid-users] Transparent proxy for WiFi users
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17304">[ date ]</a>
              <a href="thread.html#17304">[ thread ]</a>
              <a href="subject.html#17304">[ subject ]</a>
              <a href="author.html#17304">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
