<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Caching for download servers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Caching%20for%20download%20servers&In-Reply-To=%3C71a4b655-2df8-d5c3-91b8-c76d672df8ae%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017313.html">
   <LINK REL="Next"  HREF="017292.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Caching for download servers</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Caching%20for%20download%20servers&In-Reply-To=%3C71a4b655-2df8-d5c3-91b8-c76d672df8ae%40treenet.co.nz%3E"
       TITLE="[squid-users] Caching for download servers">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Jan  5 07:06:54 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="017313.html">[squid-users] Caching for download servers
</A></li>
        <LI>Next message (by thread): <A HREF="017292.html">[squid-users] access blocking using DNS -&gt; &quot;NO Address records in response to '....'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17316">[ date ]</a>
              <a href="thread.html#17316">[ thread ]</a>
              <a href="subject.html#17316">[ subject ]</a>
              <a href="author.html#17316">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 04/01/18 19:43, Umut Arus wrote:
&gt;<i> Thank you. It seems a nice guide. I mean caching some destinations used 
</I>&gt;<i> for download without doing any setup on client side. Is it possible to 
</I>&gt;<i> use dns to proxy redirection for some destination zones?
</I>
No. Well, it may be _possible_ but very, very far from safe.

When intercepting traffic there are some *extremely* nasty security 
issues involved with Host header that have to be avoided. The details 
can be found at 
&lt;<A HREF="https://wiki.squid-cache.org/KnowledgeBase/HostHeaderForgery">https://wiki.squid-cache.org/KnowledgeBase/HostHeaderForgery</A>&gt;.

The only way to safely avoid lots of false errors is to relay traffic to 
the dst-IP the client presents when the security checks fail.

But if you alter DNS so Squid and clients see different things then 
*all* the traffic shows up as forged and the dst-IP will be the proxies 
own IP.

So there is nowhere the proxy can connect to which will provide the 
content needed. Attempts to do so loops infinitely back to the proxy.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="017313.html">[squid-users] Caching for download servers
</A></li>
	<LI>Next message (by thread): <A HREF="017292.html">[squid-users] access blocking using DNS -&gt; &quot;NO Address records in response to '....'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17316">[ date ]</a>
              <a href="thread.html#17316">[ thread ]</a>
              <a href="subject.html#17316">[ subject ]</a>
              <a href="author.html#17316">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
