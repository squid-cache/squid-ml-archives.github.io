<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] rock storage and max-swap-rate
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20rock%20storage%20and%20max-swap-rate&In-Reply-To=%3C27371641-f2bc-ecfe-c7de-3dceae2421cb%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017418.html">
   <LINK REL="Next"  HREF="017421.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] rock storage and max-swap-rate</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20rock%20storage%20and%20max-swap-rate&In-Reply-To=%3C27371641-f2bc-ecfe-c7de-3dceae2421cb%40treenet.co.nz%3E"
       TITLE="[squid-users] rock storage and max-swap-rate">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Jan 18 23:20:28 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="017418.html">[squid-users] rock storage and max-swap-rate
</A></li>
        <LI>Next message (by thread): <A HREF="017421.html">[squid-users] rock storage and max-swap-rate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17419">[ date ]</a>
              <a href="thread.html#17419">[ thread ]</a>
              <a href="subject.html#17419">[ subject ]</a>
              <a href="author.html#17419">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 19/01/18 12:04, Ivan Larionov wrote:
&gt;<i> Thank you for the fast reply!
</I>&gt;<i> 
</I>&gt;<i> read_ops and write_ops is AWS EBS metric and in general it correlates 
</I>&gt;<i> with OS-level reads/s writes/s stats which iostat shows.
</I>&gt;<i> 
</I>&gt;<i> So if I understand you correctly max-swap-rate doesn't limit disk IOPS 
</I>&gt;<i> but limits squid swap ops instead and every squid operation could in 
</I>&gt;<i> theory use more than 1 disk IO operation. This means we can't really say 
</I>&gt;<i> &quot;limit swap ops to 1500 because our disk can handle 1500 iops&quot; but 
</I>&gt;<i> should figure out the number after testing different values.
</I>&gt;<i> 
</I>&gt;<i> Ok, I suppose I'll just do what Rock documentation says &#8211; will test 
</I>&gt;<i> different values and figure out what works for us.
</I>&gt;<i> 
</I>

If you know what the OS level IOP size is (eg usually 4KB) and the Squid 
rock IOP size Alex mentioned of 32KB. That should give you a number to 
divide the disk IOPS limit you want with to get a rough estimate for the 
appropriate Squid setting.

The tuning bit is just to see how much variance from that is caused by 
your traffic objects being different from the 32KB slot size.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="017418.html">[squid-users] rock storage and max-swap-rate
</A></li>
	<LI>Next message (by thread): <A HREF="017421.html">[squid-users] rock storage and max-swap-rate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17419">[ date ]</a>
              <a href="thread.html#17419">[ thread ]</a>
              <a href="subject.html#17419">[ subject ]</a>
              <a href="author.html#17419">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
