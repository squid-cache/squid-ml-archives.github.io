<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] 3.5.27: Compilation failed CRYPTO_LOCK_X509 on Debian	9
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%203.5.27%3A%20Compilation%20failed%20CRYPTO_LOCK_X509%20on%20Debian%0A%099&In-Reply-To=%3C01b001d394a3%24b2be9190%24183bb4b0%24%40articatech.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017461.html">
   <LINK REL="Next"  HREF="017446.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] 3.5.27: Compilation failed CRYPTO_LOCK_X509 on Debian	9</H1>
    <B>David Touzeau</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%203.5.27%3A%20Compilation%20failed%20CRYPTO_LOCK_X509%20on%20Debian%0A%099&In-Reply-To=%3C01b001d394a3%24b2be9190%24183bb4b0%24%40articatech.com%3E"
       TITLE="[squid-users] 3.5.27: Compilation failed CRYPTO_LOCK_X509 on Debian	9">david at articatech.com
       </A><BR>
    <I>Tue Jan 23 23:41:32 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="017461.html">[squid-users] v4.0.22 error:transaction-end-before-headers using transparent SSL method
</A></li>
        <LI>Next message (by thread): <A HREF="017446.html">[squid-users] 3.5.27: Compilation failed CRYPTO_LOCK_X509 on Debian 9
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17445">[ date ]</a>
              <a href="thread.html#17445">[ thread ]</a>
              <a href="subject.html#17445">[ subject ]</a>
              <a href="author.html#17445">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all

 

Did anyone have encountered and fixed this issue :

 

Make failed with the following error :

 

/bin/bash ../../libtool  --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H
-I../.. -I../../include -I../../lib -I../../src -I../../include  -isystem
/usr/include/mit-krb5  -I/usr/include/libxml2  -I/usr/include/libxml2 -Wall
-Wpointer-arith -Wwrite-strings -Wcomments -Wshadow -Woverloaded-virtual
-Werror -pipe -D_REENTRANT -m64  -I/usr/include/p11-kit-1 -g -O2 -c -o
PortCfg.lo PortCfg.cc

libtool: compile:  g++ -DHAVE_CONFIG_H -I../.. -I../../include -I../../lib
-I../../src -I../../include -isystem /usr/include/mit-krb5
-I/usr/include/libxml2 -I/usr/include/libxml2 -Wall -Wpointer-arith
-Wwrite-strings -Wcomments -Wshadow -Woverloaded-virtual -Werror -pipe
-D_REENTRANT -m64 -I/usr/include/p11-kit-1 -g -O2 -c PortCfg.cc  -fPIC -DPIC
-o .libs/PortCfg.o

In file included from ../../src/anyp/PortCfg.h:18:0,

                 from PortCfg.cc:10:

../../src/ssl/gadgets.h:83:45: error: 'CRYPTO_LOCK_X509' was not declared in
this scope

typedef LockingPointer&lt;X509, X509_free_cpp, CRYPTO_LOCK_X509&gt; X509_Pointer;

                                             ^~~~~~~~~~~~~~~~

../../src/ssl/gadgets.h:83:61: error: template argument 3 is invalid

typedef LockingPointer&lt;X509, X509_free_cpp, CRYPTO_LOCK_X509&gt; X509_Pointer;

                                                             ^

../../src/ssl/gadgets.h:89:53: error: 'CRYPTO_LOCK_EVP_PKEY' was not
declared in this scope

typedef LockingPointer&lt;EVP_PKEY, EVP_PKEY_free_cpp, CRYPTO_LOCK_EVP_PKEY&gt;
EVP_PKEY_Pointer;

                                                     ^~~~~~~~~~~~~~~~~~~~

../../src/ssl/gadgets.h:89:73: error: template argument 3 is invalid

typedef LockingPointer&lt;EVP_PKEY, EVP_PKEY_free_cpp, CRYPTO_LOCK_EVP_PKEY&gt;
EVP_PKEY_Pointer;

                                                                         ^

../../src/ssl/gadgets.h:116:43: error: 'CRYPTO_LOCK_SSL' was not declared in
this scope

typedef LockingPointer&lt;SSL, SSL_free_cpp, CRYPTO_LOCK_SSL&gt; SSL_Pointer;

                                           ^~~~~~~~~~~~~~~

../../src/ssl/gadgets.h:116:58: error: template argument 3 is invalid

typedef LockingPointer&lt;SSL, SSL_free_cpp, CRYPTO_LOCK_SSL&gt; SSL_Pointer;

 

 

Configure options :

./configure --prefix=/usr --build=x86_64-linux-gnu
--includedir=${prefix}/include --mandir=${prefix}/share/man
--infodir=${prefix}/share/info --localstatedir=/var
--libexecdir=${prefix}/lib/squid3 --disable-maintainer-mode
--disable-dependency-tracking --srcdir=. --datadir=/usr/share/squid3
--sysconfdir=/etc/squid3 --enable-gnuregex --enable-removal-policy=heap
--enable-follow-x-forwarded-for --disable-cache-digests
--enable-http-violations --enable-removal-policies=lru,heap --enable-arp-acl
--enable-truncate --with-large-files --with-pthreads --enable-esi
--enable-storeio=aufs,diskd,ufs,rock --enable-x-accelerator-vary --with-dl
--enable-linux-netfilter --with-netfilter-conntrack --enable-wccpv2
--enable-eui --enable-auth --enable-auth-basic --enable-snmp --enable-icmp
--enable-auth-digest --enable-log-daemon-helpers
--enable-url-rewrite-helpers --enable-auth-ntlm --with-default-user=squid
--enable-icap-client --disable-cache-digests --enable-poll --enable-epoll
--enable-async-io=128 --enable-zph-qos --enable-delay-pools
--enable-http-violations --enable-url-maps --enable-ecap --enable-ssl
--with-openssl --enable-ssl-crtd --enable-xmalloc-statistics
--enable-ident-lookups --with-filedescriptors=65536 --with-aufs-threads=128
--disable-arch-native

                                                          ^

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20180124/8ad43b9f/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20180124/8ad43b9f/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="017461.html">[squid-users] v4.0.22 error:transaction-end-before-headers using transparent SSL method
</A></li>
	<LI>Next message (by thread): <A HREF="017446.html">[squid-users] 3.5.27: Compilation failed CRYPTO_LOCK_X509 on Debian 9
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17445">[ date ]</a>
              <a href="thread.html#17445">[ thread ]</a>
              <a href="subject.html#17445">[ subject ]</a>
              <a href="author.html#17445">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
