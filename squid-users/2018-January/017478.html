<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] TCP out of memory
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20TCP%20out%20of%20memory&In-Reply-To=%3C4d382013-0a57-2105-da9a-e7b114480846%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017477.html">
   <LINK REL="Next"  HREF="017479.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] TCP out of memory</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20TCP%20out%20of%20memory&In-Reply-To=%3C4d382013-0a57-2105-da9a-e7b114480846%40measurement-factory.com%3E"
       TITLE="[squid-users] TCP out of memory">rousskov at measurement-factory.com
       </A><BR>
    <I>Sat Jan 27 19:08:17 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="017477.html">[squid-users] TCP out of memory
</A></li>
        <LI>Next message (by thread): <A HREF="017479.html">[squid-users] TCP out of memory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17478">[ date ]</a>
              <a href="thread.html#17478">[ thread ]</a>
              <a href="subject.html#17478">[ subject ]</a>
              <a href="author.html#17478">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 01/27/2018 10:47 AM, Yuri wrote:

&gt;<i> He's just disabled icap-based service without disabling icap itself. So
</I>&gt;<i> - yes - this is as expected.
</I>
The above logic is flawed: Vieri told Squid to bypass (bypassable) ICAP
errors, but Squid did not bypass an ICAP error. Whether that outcome is
expected depends on whether that specific ICAP error was bypassable.

Yes, I understand that c-icap did not successfully process the message
after clamd went down, but that fact is not important here. What is
important here is how c-icap relayed that problem to Squid. That part I
do not know, so I cannot say whether Squid just could not bypass this
particular ICAP problem (i.e., Squid behavior is expected) or there is a
bug in Squid's bypass code.


&gt;<i> bupass=1 permit squid to bypass
</I>&gt;<i> adaptation in case of overloading icap service. 
</I>
Yes, but service overload is _not_ the only problem that bypass=1 can
bypass. The documentation for that option describes the option scope:

&gt;<i> If set to 'on' or '1', the ICAP service is treated as
</I>&gt;<i> optional. If the service cannot be reached or malfunctions,
</I>&gt;<i> Squid will try to ignore any errors and process the message as
</I>&gt;<i> if the service was not enabled. No all ICAP errors can be
</I>&gt;<i> bypassed.  If set to 0, the ICAP service is treated as
</I>&gt;<i> essential and all ICAP errors will result in an error page
</I>&gt;<i> returned to the HTTP client.
</I>&gt;<i> 
</I>&gt;<i> Bypass is off by default: services are treated as essential.
</I>
Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="017477.html">[squid-users] TCP out of memory
</A></li>
	<LI>Next message (by thread): <A HREF="017479.html">[squid-users] TCP out of memory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17478">[ date ]</a>
              <a href="thread.html#17478">[ thread ]</a>
              <a href="subject.html#17478">[ subject ]</a>
              <a href="author.html#17478">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
