<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] will multiple tls_outgoing_options lines be combined?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20will%20multiple%20tls_outgoing_options%20lines%20be%0A%20combined%3F&In-Reply-To=%3C1544a6f0-7b3d-9c7a-c63b-5512c85d94bb%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018580.html">
   <LINK REL="Next"  HREF="018586.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] will multiple tls_outgoing_options lines be combined?</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20will%20multiple%20tls_outgoing_options%20lines%20be%0A%20combined%3F&In-Reply-To=%3C1544a6f0-7b3d-9c7a-c63b-5512c85d94bb%40treenet.co.nz%3E"
       TITLE="[squid-users] will multiple tls_outgoing_options lines be combined?">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Jul  3 12:37:22 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="018580.html">[squid-users] will multiple tls_outgoing_options lines be combined?
</A></li>
        <LI>Next message (by thread): <A HREF="018586.html">[squid-users] will multiple tls_outgoing_options lines be combined?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18582">[ date ]</a>
              <a href="thread.html#18582">[ thread ]</a>
              <a href="subject.html#18582">[ subject ]</a>
              <a href="author.html#18582">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 03/07/18 23:23, Amish wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> I am trying new options in squid 4.1.
</I>&gt;<i> 
</I>&gt;<i> For easy readability can I use tls_outgoing_options multiple times in
</I>&gt;<i> squid.conf?
</I>&gt;<i> 
</I>
Yes. Provided the options specified on each are different.

&gt;<i> Like this: (Tips from
</I>&gt;<i> <A HREF="https://wiki.squid-cache.org/ConfigExamples/Intercept/SslBumpExplicit">https://wiki.squid-cache.org/ConfigExamples/Intercept/SslBumpExplicit</A>)
</I>&gt;<i> 
</I>&gt;<i> tls_outgoing_options cafile=/etc/ssl/cert.pem
</I>&gt;<i> tls_outgoing_options options=NO_SSLv3,SINGLE_DH_USE,SINGLE_ECDH_USE
</I>&gt;<i> tls_outgoing_options
</I>&gt;<i> cipher=HIGH:MEDIUM:!RC4:!aNULL:!eNULL:!LOW:!3DES:!MD5:!EXP:!PSK:!SRP:!DSS
</I>&gt;<i> 
</I>&gt;<i> Will it merge all 3 as if mentioned on 1 single line?
</I>
The above will, yes.

&gt;<i> Or will it pick only last (or first) option and internal defaults for rest?
</I>
Each option in the directive replaces previous values of that same option.

For example;

  tls_outgoing_options cipher=A cipher=B

 is the same as:

  tls_outgoing_options cipher=B


Since above you are setting different named option on every line, your
setup is equivalent to all the options being on one line.


However, Squid understands line wrapping. So this question is not very
useful. You could simplify even further like this:

 tls_outgoing_options \
   cafile=/etc/ssl/cert.pem \
   options=NO_SSLv3,SINGLE_DH_USE,SINGLE_ECDH_USE \
   cipher=HIGH:MEDIUM:!RC4:!aNULL:!eNULL:!LOW:....




&gt;<i> 
</I>&gt;<i> I am not an SSL/TLS expert so I do not know how to test this i.e. how to
</I>&gt;<i> know if its really working.
</I>
Then its a good sign you are asking for help. TLS is a pit of troubles
for the unaware. To successfully manage use of SSL-Bump features you
need at least an understanding of how the TLS protocol operates.
 Note that is *not* the crypto, just how the messaging works.

This directive controls what capabilities Squid lets your OpenSSL
library advertise in clientHello and TLS extension messages sent to
servers (not cache_peer) during a TLS handshake.
 So to debug use something like wireshark to look at the packets and see
what the handshake contains.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="018580.html">[squid-users] will multiple tls_outgoing_options lines be combined?
</A></li>
	<LI>Next message (by thread): <A HREF="018586.html">[squid-users] will multiple tls_outgoing_options lines be combined?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18582">[ date ]</a>
              <a href="thread.html#18582">[ thread ]</a>
              <a href="subject.html#18582">[ subject ]</a>
              <a href="author.html#18582">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
