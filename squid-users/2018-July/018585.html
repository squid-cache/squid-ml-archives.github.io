<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Make websockets work without splicing TLS connections
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Make%20websockets%20work%20without%20splicing%20TLS%0A%20connections&In-Reply-To=%3C37600e6c7e4b46218bf5068e6a7fcb41%40mbxtoa3.winmail.deshaw.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018583.html">
   <LINK REL="Next"  HREF="018589.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Make websockets work without splicing TLS connections</H1>
    <B>Ahmad, Sarfaraz</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Make%20websockets%20work%20without%20splicing%20TLS%0A%20connections&In-Reply-To=%3C37600e6c7e4b46218bf5068e6a7fcb41%40mbxtoa3.winmail.deshaw.com%3E"
       TITLE="[squid-users] Make websockets work without splicing TLS connections">Sarfaraz.Ahmad at deshaw.com
       </A><BR>
    <I>Tue Jul  3 12:59:18 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="018583.html">[squid-users] Make websockets work without splicing TLS connections
</A></li>
        <LI>Next message (by thread): <A HREF="018589.html">[squid-users] Make websockets work without splicing TLS connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18585">[ date ]</a>
              <a href="thread.html#18585">[ thread ]</a>
              <a href="subject.html#18585">[ subject ]</a>
              <a href="author.html#18585">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;&gt;<i> Squid does not understand WebSocket protocol (yet).
</I>Is supporting Websockets on the roadmap ? 



-----Original Message-----
From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; On Behalf Of Amos Jeffries
Sent: Tuesday, July 3, 2018 6:15 PM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Make websockets work without splicing TLS connections

On 04/07/18 00:19, Ahmad, Sarfaraz wrote:
&gt;<i> Guys,
</I>&gt;<i> 
</I>&gt;<i> &#160;
</I>&gt;<i> 
</I>&gt;<i> Can you think of a way to make websockets work without splicing TLS 
</I>&gt;<i> connections ?
</I>&gt;<i> 
</I>
Squid does not understand WebSocket protocol (yet). So splicing is the only option once the traffic is already going into the proxy.

Squid does support enough WebSockets to trigger the HTTP failover mechanism sin WebSockets. But many clients and/or servers apparently do not actually support WebSockets properly and break when that proxy compatibility mechanism is used.

WebSocket has its own port for native traffic. So letting that through your firewall should theoretically be enough.



&gt;<i> I don&#8217;t think on_unsupported _protocol would work here .// Also would
</I>
It may, but I agree that is not expected. WebSockets uses HTTP-like syntax in its first message to be compatible with HTTPS servers.


&gt;<i> on_unsupported_protocol work where the remote server abuses 443 for 
</I>&gt;<i> something other than TLS ?
</I>
It should. Weird non-standard crap abusing port 443 is what that directive was designed to help workaround.

Amos
_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="018583.html">[squid-users] Make websockets work without splicing TLS connections
</A></li>
	<LI>Next message (by thread): <A HREF="018589.html">[squid-users] Make websockets work without splicing TLS connections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18585">[ date ]</a>
              <a href="thread.html#18585">[ thread ]</a>
              <a href="subject.html#18585">[ subject ]</a>
              <a href="author.html#18585">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
