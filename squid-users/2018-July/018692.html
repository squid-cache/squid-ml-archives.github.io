<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] (no subject)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%28no%20subject%29&In-Reply-To=%3C221421f4-2c0c-2ab4-d6bd-853788549360%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018691.html">
   <LINK REL="Next"  HREF="018693.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] (no subject)</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%28no%20subject%29&In-Reply-To=%3C221421f4-2c0c-2ab4-d6bd-853788549360%40treenet.co.nz%3E"
       TITLE="[squid-users] (no subject)">squid3 at treenet.co.nz
       </A><BR>
    <I>Sat Jul 14 06:58:44 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="018691.html">[squid-users] (no subject)
</A></li>
        <LI>Next message (by thread): <A HREF="018693.html">[squid-users] Squid v4.1: commBind Cannot bind [::1] on SNMP with	no ipv6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18692">[ date ]</a>
              <a href="thread.html#18692">[ thread ]</a>
              <a href="subject.html#18692">[ subject ]</a>
              <a href="author.html#18692">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 14/07/18 12:34, Krystyna Niesio&#322;owska wrote:
&gt;<i> Hi All,
</I>&gt;<i> 
</I>&gt;<i> In&#160;my company, the HR uses an outsourced SaaS (on a unique public IP)
</I>&gt;<i> configured with&#160;a commercial SSL certificate (i.e. I have both the
</I>&gt;<i> private and the public key) accessed by our employees via a subdomain of
</I>&gt;<i> our company domain (saas.company.com) &lt;<A HREF="http://saas.mycompany.com_">http://saas.mycompany.com_</A>&gt;&#160;.
</I>&gt;<i> Unfortunately, we cannot control the data being transferred by the HR
</I>&gt;<i> people and because of the GDPR the board wants to be able to get alerts
</I>&gt;<i> if anyone tries to transfer personal data to the cloud + a general
</I>&gt;<i> channel to check&#160;against any data exfiltration.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> My idea is to set to route&#160;all traffic going to sass.company.com
</I>&gt;<i> &lt;<A HREF="http://sass.company.com">http://sass.company.com</A>&gt;&#160;via a box running Squid with SSL interception.
</I>&gt;<i> I would like to install the same cert as the one used with the SaaS.
</I>&gt;<i> This is to avoid the need of installing any additional certs on use's'
</I>&gt;<i> machines. Unfortunately, I cannot find an option to set Squid with a
</I>&gt;<i> single commercial cert instead of a CA (commonly used to intercept
</I>&gt;<i> generate individual certs for all of the SSL traffic).
</I>&gt;<i> 
</I>&gt;<i> Does anybody have any suggestions on the viable setup?
</I>&gt;<i> 
</I>
What you are calling a &quot;commercial certificate&quot; is actually a server
certificate. It is solely for use on servers and reverse-proxy.

So you need to setup Squid as a reverse-proxy (aka CDN frontend) to the
SAAS service instead.

To do that have your network DNS resolver provide the internal clients
with the proxy IP address instead of the remote servers IP and in
squid.conf:

 https_port 443 accel cert=... key=...
 acl saas dstdomain saas.example.com
 cache_peer saas.example.com 443 0 originserver ssl
 cache_peer_access allow saas
 cache_peer_access deny all


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="018691.html">[squid-users] (no subject)
</A></li>
	<LI>Next message (by thread): <A HREF="018693.html">[squid-users] Squid v4.1: commBind Cannot bind [::1] on SNMP with	no ipv6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18692">[ date ]</a>
              <a href="thread.html#18692">[ thread ]</a>
              <a href="subject.html#18692">[ subject ]</a>
              <a href="author.html#18692">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
