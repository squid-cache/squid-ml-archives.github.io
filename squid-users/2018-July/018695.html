<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid v4.1: commBind Cannot bind [::1] on SNMP	with no ipv6
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20v4.1%3A%20commBind%20Cannot%20bind%20%5B%3A%3A1%5D%20on%20SNMP%0A%09with%20no%20ipv6&In-Reply-To=%3C048701d41c86%24bf42d2d0%243dc87870%24%40articatech.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018694.html">
   <LINK REL="Next"  HREF="018710.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid v4.1: commBind Cannot bind [::1] on SNMP	with no ipv6</H1>
    <B>David Touzeau</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20v4.1%3A%20commBind%20Cannot%20bind%20%5B%3A%3A1%5D%20on%20SNMP%0A%09with%20no%20ipv6&In-Reply-To=%3C048701d41c86%24bf42d2d0%243dc87870%24%40articatech.com%3E"
       TITLE="[squid-users] Squid v4.1: commBind Cannot bind [::1] on SNMP	with no ipv6">david at articatech.com
       </A><BR>
    <I>Sun Jul 15 21:56:55 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="018694.html">[squid-users] Squid v4.1: commBind Cannot bind [::1] on SNMP with no ipv6
</A></li>
        <LI>Next message (by thread): <A HREF="018710.html">[squid-users] Squid v4.1: commBind Cannot bind [::1] on SNMP with no ipv6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18695">[ date ]</a>
              <a href="thread.html#18695">[ thread ]</a>
              <a href="subject.html#18695">[ subject ]</a>
              <a href="author.html#18695">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We have this one too

2018/07/15 23:38:11 kid2| Accepting SNMP messages on 0.0.0.0:3401
2018/07/15 23:45:02 kid2| snmpHandleUdp: FD 23 recvfrom: (11) Resource temporarily unavailable
2018/07/15 23:45:02 kid2| snmpHandleUdp: FD 23 recvfrom: (11) Resource temporarily unavailable
2018/07/15 23:45:02 kid2| snmpHandleUdp: FD 23 recvfrom: (11) Resource temporarily unavailable
2018/07/15 23:45:02 kid2| snmpHandleUdp: FD 23 recvfrom: (11) Resource temporarily unavailable
2018/07/15 23:45:02 kid2| snmpHandleUdp: FD 23 recvfrom: (11) Resource temporarily unavailable
2018/07/15 23:45:02 kid2| snmpHandleUdp: FD 23 recvfrom: (11) Resource temporarily unavailable
2018/07/15 23:45:02 kid2| snmpHandleUdp: FD 23 recvfrom: (11) Resource temporarily unavailable
2018/07/15 23:45:02 kid2| snmpHandleUdp: FD 23 recvfrom: (11) Resource temporarily unavailable
2018/07/15 23:45:02 kid2| snmpHandleUdp: FD 23 recvfrom: (11) Resource temporarily unavailable
2018/07/15 23:45:02 kid2| snmpHandleUdp: FD 23 recvfrom: (11) Resource temporarily unavailable
2018/07/15 23:45:02 kid2| snmpHandleUdp: FD 23 recvfrom: (11) Resource temporarily unavailable
2018/07/15 23:45:02 kid2| snmpHandleUdp: FD 23 recvfrom: (11) Resource temporarily unavailable
2018/07/15 23:45:02 kid2| snmpHandleUdp: FD 23 recvfrom: (11) Resource temporarily unavailable
2018/07/15 23:45:02 kid2| snmpHandleUdp: FD 23 recvfrom: (11) Resource temporarily unavailable
2018/07/15 23:45:02 kid2| snmpHandleUdp: FD 23 recvfrom: (11) Resource temporarily unavailable
2018/07/15 23:45:02 kid2| snmpHandleUdp: FD 23 recvfrom: (11) Resource temporarily unavailable
2018/07/15 23:45:02 kid2| snmpHandleUdp: FD 23 recvfrom: (11) Resource temporarily unavailable
2018/07/15 23:45:02 kid2| snmpHandleUdp: FD 23 recvfrom: (11) Resource temporarily unavailable
2018/07/15 23:45:02 kid2| snmpHandleUdp: FD 23 recvfrom: (11) Resource temporarily unavailable
2018/07/15 23:45:02 kid2| snmpHandleUdp: FD 23 recvfrom: (11) Resource temporarily unavailable
2018/07/15 23:45:02 kid2| snmpHandleUdp: FD 23 recvfrom: (11) Resource temporarily unavailable
2018/07/15 23:45:02 kid2| snmpHandleUdp: FD 23 recvfrom: (11) Resource temporarily unavailable
2018/07/15 23:45:02 kid2| snmpHandleUdp: FD 23 recvfrom: (11) Resource temporarily unavailable
2018/07/15 23:45:02 kid2| snmpHandleUdp: FD 23 recvfrom: (11) Resource temporarily unavailable

I&quot;m pretty sure this is the SNMP module...


-----Message d'origine-----
De : squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; De la part de Amos Jeffries
Envoy&#233; : dimanche 15 juillet 2018 07:54
&#192; : <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Objet : Re: [squid-users] Squid v4.1: commBind Cannot bind [::1] on SNMP with no ipv6

On 15/07/18 11:40, David Touzeau wrote:
&gt;<i> Hi
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> Ipv6 is not enabled on this Debian 9 system.
</I>&gt;<i> 
</I>
Nod. That would be why is cannot open IPv6 sockets.

Squid is designed to comply with RFC 6540 (aka BCP 177), and to assume the machine it is running on also complies:
 &quot;IPv6 Support Required for All IP-Capable Nodes&quot;

Anyhow ...

&gt;<i> 
</I>&gt;<i> Squid try to open a socket on ipv6 loopback&#8230;
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i> 
</I>&gt;<i> 2018/07/15 01:32:45 kid2| Sending SNMP messages from 0.0.0.0:3401
</I>&gt;<i> 
</I>
Above says SNMP is working fine.

Then _something else_ has issues ...

&gt;<i> 2018/07/15 01:32:45 kid2| commBind Cannot bind socket FD 155 to [::1]:
</I>&gt;<i> (99) Cannot assign requested address
</I>&gt;<i> 
</I>&gt;<i> 2018/07/15 01:32:45 kid2| commBind Cannot bind socket FD 156 to [::1]:
</I>&gt;<i> (99) Cannot assign requested address
</I>&gt;<i> 
</I>&gt;<i> 2018/07/15 01:32:45 kid2| ERROR: Failed to create helper child read FD:
</I>&gt;<i> UDP[::1]
</I>&gt;<i> 
</I>
One of the helpers you are using needs IPv6 to send UDP packets to/from Squid.

I would look at external_acl_type helpers. That is usually the one which surprises IPv4-only people.

When your Squid is built to assume enabled IPv6 and your machine is setup to disable it, you need to add the &quot;ipv4&quot; option to your external_acl_type helper config lines.

PS. from the config given it looks like you don't need that snmpConsole ACL. The built-in localhost ACL covers the same case(s) and will also continue working if/when you decide to enable IPv6 within your network.

Amos
_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="018694.html">[squid-users] Squid v4.1: commBind Cannot bind [::1] on SNMP with no ipv6
</A></li>
	<LI>Next message (by thread): <A HREF="018710.html">[squid-users] Squid v4.1: commBind Cannot bind [::1] on SNMP with no ipv6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18695">[ date ]</a>
              <a href="thread.html#18695">[ thread ]</a>
              <a href="subject.html#18695">[ subject ]</a>
              <a href="author.html#18695">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
