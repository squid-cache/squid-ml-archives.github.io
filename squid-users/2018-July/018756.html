<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Regression after upgrading 3.5.27 -&gt; 4.1
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Regression%20after%20upgrading%203.5.27%20-%3E%204.1&In-Reply-To=%3Cda0ed6e3-71ee-0bf8-8a67-3905a1b44e7a%40netfence.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018755.html">
   <LINK REL="Next"  HREF="018757.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Regression after upgrading 3.5.27 -&gt; 4.1</H1>
    <B>Andrea Venturoli</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Regression%20after%20upgrading%203.5.27%20-%3E%204.1&In-Reply-To=%3Cda0ed6e3-71ee-0bf8-8a67-3905a1b44e7a%40netfence.it%3E"
       TITLE="[squid-users] Regression after upgrading 3.5.27 -&gt; 4.1">ml at netfence.it
       </A><BR>
    <I>Sun Jul 22 13:29:49 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="018755.html">[squid-users] squid 4.1 and domain fronting
</A></li>
        <LI>Next message (by thread): <A HREF="018757.html">[squid-users] Regression after upgrading 3.5.27 -&gt; 4.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18756">[ date ]</a>
              <a href="thread.html#18756">[ thread ]</a>
              <a href="subject.html#18756">[ subject ]</a>
              <a href="author.html#18756">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello.

I'm maintaining several installations on FreeBSD and I've been notified 
a specific web application is not working anymore after the upgrade.



Accessing this app with FireFox and Squid 3.5.27, it works correctly.

Doing the same after the upgrade to 4.1 lets the user arrive up to a 
point and then get a &quot;Loading&quot; message which will never go away.



Using FireFox network debugger, I see a couple of 400 error and in fact, 
if I try to open those URL I get:

&gt;<i> Invalid Request error was encountered while trying to process the request:
</I>&gt;<i> 
</I>&gt;<i> Some possible problems are:
</I>&gt;<i> 
</I>&gt;<i>     Missing or unknown request method.
</I>&gt;<i> 
</I>&gt;<i>     Missing HTTP Identifier (HTTP/1.0).
</I>&gt;<i> 
</I>&gt;<i>     Request is too large.
</I>&gt;<i> 
</I>&gt;<i>     Content-Length missing for POST or PUT requests.
</I>&gt;<i> 
</I>&gt;<i>     Illegal character in hostname; underscores are not allowed.
</I>&gt;<i> 
</I>&gt;<i>     HTTP/1.1 &quot;Expect:&quot; feature is being asked from an HTTP/1.0 software.
</I>


The above error is not quite informative (too broad) and there's nothing 
useful in the logs.

Here are those two URL (which unfortunately I have to partially obfuscate):

&gt;<i> <A HREF="http://xxxxxxxxxxx.xxxxxxxxxxx.xx/rest?method=navi_path.add&amp;opera=I029&amp;tipo=0&amp;descr=XXXXXXXXX%20-%20Xxxxxxx%20xxxxxxxxxxx%20xxx%2030/12/2014%20-%20XXXX&amp;xxxxx_xxxx=0&amp;params={idDoc:%27C0002019%27,clasDoc:%27XXXXXX%27,nomeDoc:%27XXXXXXXXX%20-%20Xxxxxxx%20xxxxxxxxxxx%20xxx%2030/12/2014%20-%20XXXX%27,_X_TRACK_ID:%xxxxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx%27">http://xxxxxxxxxxx.xxxxxxxxxxx.xx/rest?method=navi_path.add&amp;opera=I029&amp;tipo=0&amp;descr=XXXXXXXXX%20-%20Xxxxxxx%20xxxxxxxxxxx%20xxx%2030/12/2014%20-%20XXXX&amp;xxxxx_xxxx=0&amp;params={idDoc:%27C0002019%27,clasDoc:%27XXXXXX%27,nomeDoc:%27XXXXXXXXX%20-%20Xxxxxxx%20xxxxxxxxxxx%20xxx%2030/12/2014%20-%20XXXX%27,_X_TRACK_ID:%xxxxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx%27</A>}&amp;_ts=1532264445584&amp;_dc=1532264445584
</I>
&gt;<i> <A HREF="http://xxxxxxxxxxx.xxxxxxxxxxx.xx/php/ajax/openDocumentREST.php?core=xxxxxxxXXXX&amp;query={%22field%22:%22id%22,%22mode%22:%22EQUAL%22,%22value%22:%xxxxxxxxxx_XXXXXXXXX%22">http://xxxxxxxxxxx.xxxxxxxxxxx.xx/php/ajax/openDocumentREST.php?core=xxxxxxxXXXX&amp;query={%22field%22:%22id%22,%22mode%22:%22EQUAL%22,%22value%22:%xxxxxxxxxx_XXXXXXXXX%22</A>}&amp;nomeTab=&amp;arts=&amp;toHighlight=&amp;XXXXXXXX=I029
</I>
(the x and X are always alphanumeric characters).




I'm seeking help on how to better diagnose this: how can I find what 
Squid 4 does not like in those URLs?

None of the above causes seems to apply, IMVHO.

Has some default changed from 3.5 to 4.1 which might trigger this problem?



  bye &amp; Thanks
	av.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="018755.html">[squid-users] squid 4.1 and domain fronting
</A></li>
	<LI>Next message (by thread): <A HREF="018757.html">[squid-users] Regression after upgrading 3.5.27 -&gt; 4.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18756">[ date ]</a>
              <a href="thread.html#18756">[ thread ]</a>
              <a href="subject.html#18756">[ subject ]</a>
              <a href="author.html#18756">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
