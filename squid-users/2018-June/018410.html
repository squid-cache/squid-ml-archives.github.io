<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] About to upgrade from 3 to 4
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20About%20to%20upgrade%20from%203%20to%204&In-Reply-To=%3Ce6e9ae8d-9041-c21c-45bf-8a71975354ae%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018406.html">
   <LINK REL="Next"  HREF="018412.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] About to upgrade from 3 to 4</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20About%20to%20upgrade%20from%203%20to%204&In-Reply-To=%3Ce6e9ae8d-9041-c21c-45bf-8a71975354ae%40treenet.co.nz%3E"
       TITLE="[squid-users] About to upgrade from 3 to 4">squid3 at treenet.co.nz
       </A><BR>
    <I>Sun Jun 10 07:55:41 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="018406.html">[squid-users] About to upgrade from 3 to 4
</A></li>
        <LI>Next message (by thread): <A HREF="018412.html">[squid-users] About to upgrade from 3 to 4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18410">[ date ]</a>
              <a href="thread.html#18410">[ thread ]</a>
              <a href="subject.html#18410">[ subject ]</a>
              <a href="author.html#18410">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/06/18 02:23, James Lay wrote:
&gt;<i> On Sat, 2018-06-09 at 07:17 -0600, James Lay wrote:
</I>&gt;&gt;<i> On Sun, 2018-06-10 at 01:13 +1200, Amos Jeffries wrote:
</I>&gt;&gt;&gt;<i> On 10/06/18 01:02, James Lay wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> So in my config file I have:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> sslcrtd_program /opt/libexec/ssl_crtd -s /opt/var/ssl_db -M 4MB
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> However I do not see this after compiling and installing. Has this gone
</I>&gt;&gt;&gt;<i> away in 4? Thank you.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> James
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> It's now called security_file_certgen.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &lt;<A HREF="http://www.squid-cache.org/Versions/v4/squid-4.0.24-RELEASENOTES.html#ss2.4">http://www.squid-cache.org/Versions/v4/squid-4.0.24-RELEASENOTES.html#ss2.4</A>&gt;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Amos
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks Amos...I'll read this before asking anymore questions &#9786;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> So ok...after making the changes to the config to account for new
</I>&gt;<i> security_file_certgen and tls_outgoing_options (thanks Amos!) I am
</I>&gt;<i> greeted with (hostname changed from real):
</I>&gt;<i> 
</I>&gt;<i> FATAL: mimeLoadIcon: cannot parse internal URL:
</I>&gt;<i> <A HREF="http://&lt;hostname">http://&lt;hostname</A>&gt;:0/squid-internal-static/icons/silk/image.png
</I>&gt;<i> 
</I>
There should be an error about no forward-proxy port as well. Squid
requires at least one port able to receive requests for those URLs from
clients. Port 3128 is normally that port, but you have repurposed it for
interception, which disqualifies it.

The hostname in these URLs is taken from that port's IP address
reverse-DNS name, or the proxies public/visible hostname. Whichever
meets the requirement of being resolvable in DNS.


&gt;<i> Here's my config line:
</I>&gt;<i> 
</I>&gt;<i> ./configure --prefix=/opt/squid --with-openssl=/opt/libressl
</I>&gt;<i> --sysconfdir=/opt/squid/etc --enable-ssl --enable-ssl-crtd
</I>&gt;<i> --enable-linux-netfilter --enable-follow-x-forwarded-for
</I>&gt;<i> --with-large-files --enable-xternal-acl-helpers=none
</I>
Missing 'e' on --enable-external-acl-helpers.

...
&gt;<i> 
</I>&gt;<i> sslproxy_cert_error allow all
</I>&gt;<i> tls_outgoing_options capath=/etc/ssl/certs flags=DONT_VERIFY_PEER
</I>
Please avoid DONT_VERIFY_PEER and &quot;allow all&quot; for cert errors. They are
useless for both production AND debugging since all they do is hide
security issues from *you*.

It is best to watch for security issues and fix them. Not just ignore
everything.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="018406.html">[squid-users] About to upgrade from 3 to 4
</A></li>
	<LI>Next message (by thread): <A HREF="018412.html">[squid-users] About to upgrade from 3 to 4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18410">[ date ]</a>
              <a href="thread.html#18410">[ thread ]</a>
              <a href="subject.html#18410">[ subject ]</a>
              <a href="author.html#18410">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
