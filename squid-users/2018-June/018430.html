<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] SSL errors with Squid 3.5.27
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SSL%20errors%20with%20Squid%203.5.27&In-Reply-To=%3C48966683-1714-9daa-673a-594a0a06609c%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018570.html">
   <LINK REL="Next"  HREF="018434.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] SSL errors with Squid 3.5.27</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SSL%20errors%20with%20Squid%203.5.27&In-Reply-To=%3C48966683-1714-9daa-673a-594a0a06609c%40treenet.co.nz%3E"
       TITLE="[squid-users] SSL errors with Squid 3.5.27">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Jun 13 17:16:42 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="018570.html">[squid-users] SSL errors with Squid 3.5.27
</A></li>
        <LI>Next message (by thread): <A HREF="018434.html">[squid-users] SSL errors with Squid 3.5.27
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18430">[ date ]</a>
              <a href="thread.html#18430">[ thread ]</a>
              <a href="subject.html#18430">[ subject ]</a>
              <a href="author.html#18430">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 13/06/18 07:54, Julian Perconti wrote:
&gt;&gt;<i> Interesting.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The main issue was that you configured only params for the Diffi-Helman (DH and DHE) ciphers - no &gt;curve name. That meant your specified EEC* ciphers were disabled since they require a curve name as &gt;well.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Removing this option completely disables both DH and ECDH cipher types.
</I>&gt;&gt;<i> Leaving your proxy with only the RSA based ciphers.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Amos
</I>&gt;<i> 
</I>&gt;<i> kid1| Error negotiating SSL on FD 60: error:14007086:SSL routines:CONNECT_CR_CERT:certificate verify failed (1/-1/0)
</I>&gt;<i> 
</I>&gt;<i> Hi Amos,
</I>&gt;<i> 
</I>&gt;<i> I still have no look to connect with WhatsApp from iOS.
</I>&gt;<i> 
</I>&gt;<i> How do I can track this error?:
</I>&gt;<i> 
</I>&gt;<i> kid1| Error negotiating SSL on FD 60: error:14007086:SSL routines:CONNECT_CR_CERT:certificate verify failed (1/-1/0)
</I>&gt;<i> 
</I>&gt;<i> I mean examine the FD, ...or.. what? How? Because from iOS i cant see any error, it just tries to connect indefinitely.
</I>
Yes. With &quot;debug_options ALL,9&quot; and a &quot;grep --context=10 'FD nn'&quot; f the
resulting cache.log for whatever the FD number is in the test after you
update the logging content. Some of those lines should show what is
happening on that FD, maybe some clues in there.


&gt;<i> 
</I>&gt;<i> Some whatsapp/Facebook server with the command:
</I>&gt;<i> 
</I>&gt;<i> Openssl s_client -connect -showcerts x.x.x.x:443 
</I>&gt;<i> 
</I>&gt;<i> Does not shows any cert and establishes a connection with TLS 1.2...
</I>&gt;<i> 
</I>&gt;<i> Any idea?
</I>
Probably something you are not noticing, or think is irrelevant but
actually is.

Since you are hiding the details of what is going on we cannot replicate
and see for ourselves if there is any hint in those hidden results which
anyone with more knowledge might find.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="018570.html">[squid-users] SSL errors with Squid 3.5.27
</A></li>
	<LI>Next message (by thread): <A HREF="018434.html">[squid-users] SSL errors with Squid 3.5.27
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18430">[ date ]</a>
              <a href="thread.html#18430">[ thread ]</a>
              <a href="subject.html#18430">[ subject ]</a>
              <a href="author.html#18430">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
