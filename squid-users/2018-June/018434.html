<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] SSL errors with Squid 3.5.27
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SSL%20errors%20with%20Squid%203.5.27&In-Reply-To=%3C00da01d4035c%246e7e1be0%244b7a53a0%24%40yahoo.com.ar%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018430.html">
   <LINK REL="Next"  HREF="018438.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] SSL errors with Squid 3.5.27</H1>
    <B>Julian Perconti</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SSL%20errors%20with%20Squid%203.5.27&In-Reply-To=%3C00da01d4035c%246e7e1be0%244b7a53a0%24%40yahoo.com.ar%3E"
       TITLE="[squid-users] SSL errors with Squid 3.5.27">vh1988 at yahoo.com.ar
       </A><BR>
    <I>Wed Jun 13 21:20:59 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="018430.html">[squid-users] SSL errors with Squid 3.5.27
</A></li>
        <LI>Next message (by thread): <A HREF="018438.html">[squid-users] SSL errors with Squid 3.5.27
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18434">[ date ]</a>
              <a href="thread.html#18434">[ thread ]</a>
              <a href="subject.html#18434">[ subject ]</a>
              <a href="author.html#18434">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>Yes. With &quot;debug_options ALL,9&quot; and a &quot;grep --context=10 'FD nn'&quot; f the resulting cache.log for whatever the FD number is in the test after you update the logging content. Some of those lines should show &gt;what is happening on &gt;that FD, maybe some clues in there.
</I>&gt;<i>
</I>
OK Amos,
I Will try that debug options and then post here...

&gt;<i> 
</I>&gt;<i> Some whatsapp/Facebook server with the command:
</I>&gt;<i> 
</I>&gt;<i> Openssl s_client -connect -showcerts x.x.x.x:443
</I>&gt;<i> 
</I>&gt;<i> Does not shows any cert and establishes a connection with TLS 1.2...
</I>&gt;<i> 
</I>&gt;<i> Any idea?
</I>&gt;<i>
</I>&gt;<i>Probably something you are not noticing, or think is irrelevant but actually is.
</I>&gt;<i>
</I>&gt;<i>Since you are hiding the details of what is going on we cannot replicate and see for ourselves if there is any hint in those hidden results which anyone with more knowledge might find.
</I>&gt;<i>
</I>&gt;<i>Amos
</I>
#####
Here a example:
#####

openssl s_client -connect 31.13.94.54:443
CONNECTED(00000003)
write:errno=104
---
no peer certificate available
---
No client certificate CA names sent
---
SSL handshake has read 0 bytes and written 290 bytes
---
New, (NONE), Cipher is (NONE)
Secure Renegotiation IS NOT supported
Compression: NONE
Expansion: NONE
SSL-Session:
    Protocol  : TLSv1.2
    Cipher    : 0000
    Session-ID:
    Session-ID-ctx:
    Master-Key:
    Key-Arg   : None
    PSK identity: None
    PSK identity hint: None
    SRP username: None
    Start Time: 1528924452
    Timeout   : 300 (sec)
    Verify return code: 0 (ok)

#####
And the whois that server:
#####

whois 31.13.94.54
% This is the RIPE Database query service.
% The objects are in RPSL format.
%
% The RIPE Database is subject to Terms and Conditions.
% See <A HREF="http://www.ripe.net/db/support/db-terms-conditions.pdf">http://www.ripe.net/db/support/db-terms-conditions.pdf</A>

% Note: this output has been filtered.
%       To receive output for a database update, use the &quot;-B&quot; flag.

% Information related to '31.13.94.0 - 31.13.94.255'

% Abuse contact for '31.13.94.0 - 31.13.94.255' is '<A HREF="https://lists.squid-cache.org/listinfo/squid-users">domain at fb.com</A>'

inetnum:        31.13.94.0 - 31.13.94.255
netname:        MNL1
descr:          Facebook
country:        PH
admin-c:        RD4299-RIPE
tech-c:         RD4299-RIPE
status:         ASSIGNED PA
mnt-by:         fb-neteng
mnt-lower:      fb-neteng
mnt-routes:     fb-neteng
created:        2014-06-11T19:03:34Z
last-modified:  2014-06-11T19:03:34Z
source:         RIPE

role:           RIPE DBM
address:        1601 Willow Rd.
address:        Menlo Park, CA, 94025
admin-c:        PH4972-RIPE
tech-c:         PH4972-RIPE
nic-hdl:        RD4299-RIPE
mnt-by:         fb-neteng
created:        2011-04-11T18:49:50Z
last-modified:  2013-08-14T15:49:58Z
source:         RIPE # Filtered
abuse-mailbox:  <A HREF="https://lists.squid-cache.org/listinfo/squid-users">domain at fb.com</A>

% This query was served by the RIPE Database Query Service version 1.91.2 (ANGUS)

#####

The same if the server had been whatsapp, etc...

Thanks!


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="018430.html">[squid-users] SSL errors with Squid 3.5.27
</A></li>
	<LI>Next message (by thread): <A HREF="018438.html">[squid-users] SSL errors with Squid 3.5.27
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18434">[ date ]</a>
              <a href="thread.html#18434">[ thread ]</a>
              <a href="subject.html#18434">[ subject ]</a>
              <a href="author.html#18434">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
