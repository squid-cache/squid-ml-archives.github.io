<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] building 4.0.25
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20building%204.0.25&In-Reply-To=%3C5B261BA6.1090008%40tlinx.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018472.html">
   <LINK REL="Next"  HREF="018468.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] building 4.0.25</H1>
    <B>L A Walsh</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20building%204.0.25&In-Reply-To=%3C5B261BA6.1090008%40tlinx.org%3E"
       TITLE="[squid-users] building 4.0.25">squid-user at tlinx.org
       </A><BR>
    <I>Sun Jun 17 08:28:22 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="018472.html">[squid-users] Active Directory Integration?
</A></li>
        <LI>Next message (by thread): <A HREF="018468.html">[squid-users] 4.0.25 -- build, ok... probs on 3.x still there, but may not be so important?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18466">[ date ]</a>
              <a href="thread.html#18466">[ thread ]</a>
              <a href="subject.html#18466">[ subject ]</a>
              <a href="author.html#18466">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I unpacked the tar and ran configure via a script.

Ran make, but am running into this:

  CCLD     libmiscencoding.la
../libtool: line 7979: func_quote_for_eval: command not found
...
../libtool: line 7979: func_quote_for_eval: command not found
  CXXLD    libmisccontainers.la
../libtool: line 7979: func_quote_for_eval: command not found
...
../libtool: line 7979: func_quote_for_eval: command not found
  CXXLD    libmiscutil.la
../libtool: line 7979: func_quote_for_eval: command not found
...
../libtool: line 7979: func_quote_for_eval: command not found
make[2]: Leaving directory '/home/tools/squid/squid-4.0.25/lib'
make[1]: Leaving directory '/home/tools/squid/squid-4.0.25/lib'
Making all in libltdl
make[1]: Entering directory '/home/tools/squid/squid-4.0.25/libltdl'
CDPATH=&quot;${ZSH_VERSION+.}:&quot; &amp;&amp; cd . &amp;&amp; /bin/sh 
/home/tools/squid/squid-4.0.25/cfgaux/missing aclocal-1.15 -I m4
CDPATH=&quot;${ZSH_VERSION+.}:&quot; &amp;&amp; cd . &amp;&amp; /bin/sh 
/home/tools/squid/squid-4.0.25/cfgaux/missing autoconf
 cd . &amp;&amp; /bin/sh /home/tools/squid/squid-4.0.25/cfgaux/missing 
automake-1.15 --foreign
/home/tools/squid/squid-4.0.25/cfgaux/missing: line 81: automake-1.15: 
command not found
WARNING: 'automake-1.15' is missing on your system.
         You should only need it if you modified 'Makefile.am' or
         'configure.ac' or m4 files included by 'configure.ac'.

----
Is the libtool failure what is causing it to think automake is missing
(it isn't on my system and suse is shipping automake-1.16 which I haven't
installed yet).

My question is the WARNING above -- saying I shouldn't need it unless
I modified various files.  I haven't.  Just ran configure, which I'm
assuming doesn't modify those files? 

I didn't want to go off and find am1.15 without finding out why it
thinks I need it (since haven't changed any source files at this point).
Also wondering if am1.16 would work in place of am1.15 -- I know
sometimes one needs to keep multiple versions of am around.

Also, tried recompiling 3.5.21+22 and ran into some issues (which
don't really need solving if I get 4.0.25 up and running, but thought
I'd mention them as they seem to be related to me using a more recent
gcc toolchain (7.1.0).
Got a few warnings that were escalated into errors:

1 was due to something deprecated (from 3.5.21 build)

In file included from ../../include/util.h:37:0,
                 from ntlmauth.cc:20:
../../include/SquidNew.h:21:51: error: dynamic exception specifications 
are deprecated in C++11 [-Werror=deprecated]
 _SQUID_EXTERNNEW_ void *operator new(size_t size) throw (std::bad_alloc)
                                                   ^~~~~
../../include/SquidNew.h:29:54: error: dynamic exception specifications 
are deprecated in C++11 [-Werror=deprecated]
 _SQUID_EXTERNNEW_ void *operator new[] (size_t size) throw (std::bad_alloc)
--------

After disabling that fatal warning, I ran into a different warning
in the FtpGateway.cc file:
FtpGateway.cc: In member function &#8216;const char* Ftp::Gateway::ftpRealm()&#8217;:
FtpGateway.cc:1288:1: error: &#8216;%s&#8217; directive output may be truncated 
writing up to 8191 bytes into a region of size 8188 
[-Werror=format-truncation=]
 Ftp::Gateway::ftpRealm()
 ^~~
FtpGateway.cc:1294:17: note: &#8216;snprintf&#8217; output between 13 and 8204 bytes 
into a destination of size 8192
         snprintf(realm, 8192, &quot;FTP %s unknown&quot;, user);
         ~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
FtpGateway.cc:1288:1: error: &#8216;%s&#8217; directive output may be truncated 
writing up to 8191 bytes into a region of size 8188 
[-Werror=format-truncation=]
 Ftp::Gateway::ftpRealm()
 ^~~
...
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
FtpGateway.cc: In function &#8216;void ftpSendUser(Ftp::Gateway*)&#8217;:
FtpGateway.cc:1304:1: error: &#8216;%s&#8217; directive output may be truncated 
writing up to 8191 bytes into a region of size 1019 
[-Werror=format-truncation=]
 ftpSendUser(Ftp::Gateway * ftpState)
 ^~~~~~~~~~~
cc1plus: all warnings being treated as errors

There were others, of the same sort that I didn't copy here.  I turned off
fatal warnings, as this used to work under an older compiler,
but then some things didn't want to link:

  CXXLD    pinger
debug.o: In function `FileNameHashCached(char const*)':
debug.cc:(.text+0x4e): undefined reference to 
`TextException::FileNameHash(char const*)'
globals.o: In function `FileNameHashCached(char const*)':
globals.cc:(.text+0x2c): undefined reference to 
`TextException::FileNameHash(char const*)'
SquidConfig.o: In function `FileNameHashCached(char const*)':
SquidConfig.cc:(.text+0x2c): undefined reference to 
`TextException::FileNameHash(char const*)'
stub_HelperChildConfig.o: In function `FileNameHashCached(char const*)':
stub_HelperChildConfig.cc:(.text+0x2c): undefined reference to 
`TextException::FileNameHash(char const*)'
collect2: error: ld returned 1 exit status
Makefile:880: recipe for target 'pinger' failed
make[3]: *** [pinger] Error 1

----
Made wonder if maybe gcc V7.1.0 wasn't supported or tried?

---

That's when I decided to try 4.0.25...which points back to the
top of this email...

so...missing 'func_quote_for_eval'?  relation to am-1.15?
am-1.16 usable instead?

Thanks,
-linda






</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="018472.html">[squid-users] Active Directory Integration?
</A></li>
	<LI>Next message (by thread): <A HREF="018468.html">[squid-users] 4.0.25 -- build, ok... probs on 3.x still there, but may not be so important?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18466">[ date ]</a>
              <a href="thread.html#18466">[ thread ]</a>
              <a href="subject.html#18466">[ subject ]</a>
              <a href="author.html#18466">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
