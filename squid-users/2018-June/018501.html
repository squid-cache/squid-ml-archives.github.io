<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Question about traffic calculate
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Question%20about%20traffic%20calculate&In-Reply-To=%3C85ef0832-de5d-32bf-26ef-85b34ba8366b%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018499.html">
   <LINK REL="Next"  HREF="018366.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Question about traffic calculate</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Question%20about%20traffic%20calculate&In-Reply-To=%3C85ef0832-de5d-32bf-26ef-85b34ba8366b%40measurement-factory.com%3E"
       TITLE="[squid-users] Question about traffic calculate">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Jun 21 16:20:31 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="018499.html">[squid-users] Question about traffic calculate
</A></li>
        <LI>Next message (by thread): <A HREF="018366.html">[squid-users] Display eCAP meta-information on Squid error-page
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18501">[ date ]</a>
              <a href="thread.html#18501">[ thread ]</a>
              <a href="subject.html#18501">[ subject ]</a>
              <a href="author.html#18501">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 06/21/2018 05:14 AM, Tiraen wrote:
&gt;<i> where i can read more about this (I mean the development of custom
</I>&gt;<i> ICAP/eCAP modules and their connection to the proxy) ?
</I>
The best place to start is probably
<A HREF="https://wiki.squid-cache.org/SquidFaq/ContentAdaptation">https://wiki.squid-cache.org/SquidFaq/ContentAdaptation</A>

If you decide to go the ICAP route, you will need to find the right ICAP
server for your project. After that, the development will revolve around
writing a custom adapter for that ICAP server. The above URL links to a
page with a list of ICAP servers:
<A HREF="https://wiki.squid-cache.org/Features/ICAP">https://wiki.squid-cache.org/Features/ICAP</A>

If you decide to go the eCAP route, you will need to (find somebody to)
write an eCAP adapter (no server required).

In either case, the required development is similar to writing a plugin
or loadable module. Any capable developer can do it, but understanding
of HTTP concepts and familiarity with the ICAP server or eCAP API helps.


HTH,

Alex.


&gt;<i> 2018-06-13 18:35 GMT+03:00 Alex Rousskov:
</I>&gt;<i> 
</I>&gt;<i>     On 06/13/2018 07:09 AM, Matus UHLAR - fantomas wrote:
</I>&gt;<i>     &gt; On 13.06.18 13:26, Tiraen wrote:
</I>&gt;<i>     &gt;&gt; ICAP will help provide data on incoming / outgoing traffic?
</I>&gt;<i> 
</I>&gt;<i>     &gt; icap can get the data and work with it.
</I>&gt;<i>     &gt; you don't have to manipulate, just do the accounting.
</I>&gt;<i>     &gt; you just need ICAP module that will do it.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     Yes, it is possible to collect more-or-less accurate incoming request
</I>&gt;<i>     and incoming response stats using an ICAP service, but doing so would be
</I>&gt;<i>     very inefficient. Using eCAP would improve performance, but interpreting
</I>&gt;<i>     live access.log streams is probably the most efficient way of doing
</I>&gt;<i>     this.
</I>&gt;<i> 
</I>&gt;<i>     IIRC, both eCAP and ICAP interfaces do not see the exact incoming
</I>&gt;<i>     requests and incoming responses because Squid may strip hop-by-hop HTTP
</I>&gt;<i>     headers and decode chunked HTTP message bodies before forwarding the
</I>&gt;<i>     incoming message to the adaptation service. If you need exact headers
</I>&gt;<i>     and exact body sizes, then you need more than just the basic ICAP and
</I>&gt;<i>     eCAP interface. Again, access.log is probably an overall better choice
</I>&gt;<i>     for capturing that info.
</I>&gt;<i> 
</I>&gt;<i>     Both eCAP and ICAP interfaces do not see outgoing requests and outgoing
</I>&gt;<i>     responses because Squid only supports pre-cache vectoring points.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     HTH,
</I>&gt;<i> 
</I>&gt;<i>     Alex.
</I>&gt;<i>     P.S. In the above, &quot;incoming&quot; is &quot;to Squid&quot; and &quot;outgoing&quot; is &quot;from
</I>&gt;<i>     Squid&quot;.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     &gt;&gt; 2018-06-13 12:54 GMT+03:00 Matus UHLAR - fantomas &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">uhlar at fantomas.sk</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">uhlar at fantomas.sk</A>&gt;&gt;:
</I>&gt;<i>     &gt;&gt;
</I>&gt;<i>     &gt;&gt;&gt; On 13.06.18 11:51, Tiraen wrote:
</I>&gt;<i>     &gt;&gt;&gt;
</I>&gt;<i>     &gt;&gt;&gt;&gt; either such a question, perhaps someone in the course
</I>&gt;<i>     &gt;&gt;&gt;&gt;
</I>&gt;<i>     &gt;&gt;&gt;&gt; in the SQUID is still not implemented radius accounting?
</I>&gt;<i>     &gt;&gt;&gt;&gt;
</I>&gt;<i>     &gt;&gt;&gt;
</I>&gt;<i>     &gt;&gt;&gt; authentication - yes. But squid doese not support accounting (afaik).
</I>&gt;<i>     &gt;&gt;&gt;
</I>&gt;<i>     &gt;&gt;&gt; Maybe there are any third-party modules working correctly?
</I>&gt;<i>     &gt;&gt;&gt;&gt;
</I>&gt;<i>     &gt;&gt;&gt;
</I>&gt;<i>     &gt;&gt;&gt; maybe iCAP module.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     _______________________________________________
</I>&gt;<i>     squid-users mailing list
</I>&gt;<i>     <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i>     <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>     &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> With best regards,
</I>&gt;<i> 
</I>&gt;<i> Vyacheslav Yakushev,
</I>&gt;<i> 
</I>&gt;<i> Unix system administrator
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://t.me/kelewind">https://t.me/kelewind</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="018499.html">[squid-users] Question about traffic calculate
</A></li>
	<LI>Next message (by thread): <A HREF="018366.html">[squid-users] Display eCAP meta-information on Squid error-page
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18501">[ date ]</a>
              <a href="thread.html#18501">[ thread ]</a>
              <a href="subject.html#18501">[ subject ]</a>
              <a href="author.html#18501">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
