<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Splice using SubjectCN/SAN from remote server certificate
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Splice%20using%20SubjectCN/SAN%20from%20remote%20server%0A%20certificate&In-Reply-To=%3C734dfb4c-8296-4964-b75f-f72d7ee8f3ba%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018528.html">
   <LINK REL="Next"  HREF="018536.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Splice using SubjectCN/SAN from remote server certificate</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Splice%20using%20SubjectCN/SAN%20from%20remote%20server%0A%20certificate&In-Reply-To=%3C734dfb4c-8296-4964-b75f-f72d7ee8f3ba%40treenet.co.nz%3E"
       TITLE="[squid-users] Splice using SubjectCN/SAN from remote server certificate">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Jun 26 07:08:12 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="018528.html">[squid-users] Splice using SubjectCN/SAN from remote server	certificate
</A></li>
        <LI>Next message (by thread): <A HREF="018536.html">[squid-users] Splice using SubjectCN/SAN from remote server certificate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18529">[ date ]</a>
              <a href="thread.html#18529">[ thread ]</a>
              <a href="subject.html#18529">[ subject ]</a>
              <a href="author.html#18529">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 26/06/18 17:42, Ahmad, Sarfaraz wrote:
&gt;<i> I realize that unlike other proprietary MITM appliances, Squid doesn't fiddle with the original client hello.
</I>
That is not strictly true. It depends on what you have configured Squid
to do.

Squid does adjust the TLS extensions to only allow features that are
supported (ie ALPN to remove HTTP/2, etc which is not yet supported by
Squid).


&gt;<i> I think this magnifies into the fact that we cannot look at the SubjectCN/SAN in the remote server certificate and then decide whether we want to splice or bump. (peeking at step 2 really restricts our options)
</I>&gt;<i> Is my understanding correct ?
</I>
No. Peeking at the client Hello does not impact the final decision,
whether you peek or stare at the server Hello is what does that.


&gt;<i> Or is there a way to accomplish this ?
</I>
If the client and proxy capabilities and OpenSSL config are identical
(or nearly so) then theoretically Squid can still splice after a stare
action. But whether the current SSL-Bump implementation is smart enough
to detect that case I'm not sure.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="018528.html">[squid-users] Splice using SubjectCN/SAN from remote server	certificate
</A></li>
	<LI>Next message (by thread): <A HREF="018536.html">[squid-users] Splice using SubjectCN/SAN from remote server certificate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18529">[ date ]</a>
              <a href="thread.html#18529">[ thread ]</a>
              <a href="subject.html#18529">[ subject ]</a>
              <a href="author.html#18529">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
