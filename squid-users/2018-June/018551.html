<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Chrome 67 Issue with SSL Bump
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Chrome%2067%20Issue%20with%20SSL%20Bump&In-Reply-To=%3C5c5455de-c0bf-73a9-1eee-8d943c68f82f%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018550.html">
   <LINK REL="Next"  HREF="018532.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Chrome 67 Issue with SSL Bump</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Chrome%2067%20Issue%20with%20SSL%20Bump&In-Reply-To=%3C5c5455de-c0bf-73a9-1eee-8d943c68f82f%40treenet.co.nz%3E"
       TITLE="[squid-users] Chrome 67 Issue with SSL Bump">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Jun 27 18:27:22 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="018550.html">[squid-users] Chrome 67 Issue with SSL Bump
</A></li>
        <LI>Next message (by thread): <A HREF="018532.html">[squid-users] when will squid 4 be production ready?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18551">[ date ]</a>
              <a href="thread.html#18551">[ thread ]</a>
              <a href="subject.html#18551">[ subject ]</a>
              <a href="author.html#18551">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 28/06/18 05:55, Amit Pasari - XS INFOSOL Inc. USA wrote:
&gt;<i> On 6/27/18 11:20 PM, Amit Pasari - XS INFOSOL Inc. USA wrote:
</I>&gt;&gt;<i> Dear Walter ,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I use
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> sslproxy_cert_sign_hash sha256
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> and use a SHA-256&#160; certificate
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The result is still the same .
</I>&gt;&gt;<i> &#160;
</I>&gt;&gt;<i> &quot;NET::ERR_CERT_WEAK_SIGNATURE_ALGORITHM&quot;
</I>

Based on &lt;<A HREF="https://bugs.chromium.org/p/chromium/issues/detail?id=655318">https://bugs.chromium.org/p/chromium/issues/detail?id=655318</A>&gt;

v67 may have moved on to SHA-512 now, or this site be using SHA-386.


Is there any way you can debug *which* certificate in the certificate
chain is producing that error?
 It could be the server cert, or an intermediary, or the root CA.

Also, there are other uses of signatures in TLS/SSL that you could
check. eg the signature on serverHello messages. The error does point at
certs, but all Browsers have a history of wrongly re-using error
messages for only slightly related things at times if their translators
did not produce new texts fast enough for their release cycle.


&gt;&gt;<i>
</I>&gt;&gt;<i> Also one more thing , when i open yahoo.com with any of those
</I>&gt;&gt;<i> certificates in CHROME , the content of yahoo comes inline i,e without
</I>&gt;&gt;<i> any CSS etc ...
</I>&gt;&gt;<i>
</I>
This may be a side effect of the same issue affecting separate
connections those background objects are fetched over. OR, it could e
something completely unrelated. They are not use-visible so error
messages not as clearly &quot;in your face&quot;.
 Either way concentrate on one problem at a time.


&gt;&gt;<i> One more strange thing i noticed , when i browse using Firefox ,
</I>&gt;&gt;<i> safari , IE , all URLs are coming in squid/access.log where as when i
</I>&gt;&gt;<i> use CHROME only few IPs comes in access logs with CONNECT on 443 .
</I>

Not strange at all. Different browsers/clients do different things. You
only get the decrypted messages if you successfully decrypted them.


&gt;&gt;<i>
</I>&gt;&gt;<i> I also noticed with using CHROME the below type of requests :
</I>&gt;&gt;<i> POST
</I>&gt;&gt;<i> <A HREF="http://safebrowsing.googleusercontent.com/safebrowsing/clientreport/chrome-certs">http://safebrowsing.googleusercontent.com/safebrowsing/clientreport/chrome-certs</A>
</I>&gt;&gt;<i>
</I>
I suggest you look that domain and/or URL up. What its used for impacts
your ability to perform SSL-Bump.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="018550.html">[squid-users] Chrome 67 Issue with SSL Bump
</A></li>
	<LI>Next message (by thread): <A HREF="018532.html">[squid-users] when will squid 4 be production ready?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18551">[ date ]</a>
              <a href="thread.html#18551">[ thread ]</a>
              <a href="subject.html#18551">[ subject ]</a>
              <a href="author.html#18551">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
