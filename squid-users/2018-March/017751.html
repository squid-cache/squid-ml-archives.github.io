<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] R:  VPN ON PROXY
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20R%3A%20%20VPN%20ON%20PROXY&In-Reply-To=%3C0aa6b4f0128e4f61beb38dca3ad466c6%40ocgepvsw3101.ocr.priv%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017757.html">
   <LINK REL="Next"  HREF="017748.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] R:  VPN ON PROXY</H1>
    <B>Troiano Alessio</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20R%3A%20%20VPN%20ON%20PROXY&In-Reply-To=%3C0aa6b4f0128e4f61beb38dca3ad466c6%40ocgepvsw3101.ocr.priv%3E"
       TITLE="[squid-users] R:  VPN ON PROXY">alessio.troiano at leonardocompany.com
       </A><BR>
    <I>Thu Mar  8 08:34:22 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="017757.html">[squid-users] VPN ON PROXY
</A></li>
        <LI>Next message (by thread): <A HREF="017748.html">[squid-users] [Fwd:  VPN ON PROXY]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17751">[ date ]</a>
              <a href="thread.html#17751">[ thread ]</a>
              <a href="subject.html#17751">[ subject ]</a>
              <a href="author.html#17751">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The VPN is on the proxy server or on a firewall?
In the first case it may be a problem of the software that do VPN, try to check &quot;route&quot; with linux command.
In the second case check that the firewall that do the VPN is the default gateway of the proxy, either you have to add static route for the address 11.x.x.x that are public address, wrong utilized in VPN...


Il presente messaggio e-mail e ogni suo allegato devono intendersi indirizzati esclusivamente al destinatario indicato e considerarsi dal contenuto strettamente riservato e confidenziale. Se non siete l'effettivo destinatario o avete ricevuto il messaggio e-mail per errore, siete pregati di avvertire immediatamente il mittente e di cancellare il suddetto messaggio e ogni suo allegato dal vostro sistema informatico. Qualsiasi utilizzo, diffusione, copia o archiviazione del presente messaggio da parte di chi non ne &#232; il destinatario &#232; strettamente proibito e pu&#242; dar luogo a responsabilit&#224; di carattere civile e penale punibili ai sensi di legge.
Questa e-mail ha valore legale solo se firmata digitalmente ai sensi della normativa vigente.

The contents of this email message and any attachments are intended solely for the addressee(s) and contain confidential and/or privileged information.
If you are not the intended recipient of this message, or if this message has been addressed to you in error, please immediately notify the sender and then delete this message and any attachments from your system. If you are not the intended recipient, you are hereby notified that any use, dissemination, copying, or storage of this message or its attachments is strictly prohibited. Unauthorized disclosure and/or use of information contained in this email message may result in civil and criminal liability. &#8220;
This e-mail has legal value according to the applicable laws only if it is digitally signed by the sender
-----Messaggio originale-----
Da: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] Per conto di <A HREF="https://lists.squid-cache.org/listinfo/squid-users">abellon at cklass.com.mx</A>
Inviato: gioved&#236; 8 marzo 2018 01:43
A: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Oggetto: Re: [squid-users] VPN ON PROXY

&gt;<i> On Thursday 08 March 2018 at 00:56:45, <A HREF="https://lists.squid-cache.org/listinfo/squid-users">abellon at cklass.com.mx</A> wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hello squidUsers,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have a bit of a problem. Im currently on a network where there is a
</I>&gt;&gt;<i> vpn already configured and running.
</I>&gt;<i>
</I>&gt;<i> What is the VPN connecting?  I mean, what is defined as the &quot;local&quot;
</I>&gt;<i> network and
</I>&gt;<i> what is defined as the &quot;remote&quot; network, for which traffic will pass
</I>&gt;<i> through the VPN?
</I>&gt;<i>
</I>&gt;&gt;<i> The proxy is working perfectly but for 1 issue. Te issue is as follows:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   VPN works perfectly, proxy sends ping, ssh, vnc, samba, cups
</I>&gt;&gt;<i> protocols by the tunnel
</I>&gt;<i>
</I>&gt;<i> This sounds like you are trying to send almost everything over the VPN.
</I>&gt;<i>
</I>&gt;<i> Why?  What is the purpose of this VPN?
</I>&gt;<i>
</I>&gt;&gt;<i> but when trying to access local http adresses,
</I>&gt;<i>
</I>&gt;<i> Please define &quot;local&quot;, in terms of which IP addresses you think are
</I>&gt;<i> local, and how this compares to the VPN configuration.
</I>&gt;<i>
</I>&gt;&gt;<i> the proxy reads them as public
</I>&gt;<i>
</I>&gt;<i> So, are these addresses RFC1918 &quot;private&quot; addresses, or are they
</I>&gt;<i> simply public IPs which happen to exist in your local network?
</I>&gt;<i>
</I>&gt;&gt;<i> http and send those protocols via wan... Making it an error.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have located the error (local http/https is read as public http and
</I>&gt;&gt;<i> is send by wan) how can I configure it so that the local http goes by
</I>&gt;&gt;<i> the vpn (tun1).
</I>&gt;<i>
</I>&gt;<i> Give us some examples of addresses which are being incorrectly routed,
</I>&gt;<i> and tell us how your VPN is set up, and we can give you some advice as
</I>&gt;<i> to whether this is a Squid problem or a VPN / network routing problem.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Antony.
</I>&gt;<i>
</I>&gt;<i> PS: No need to send the same question twice within 2 minutes :)
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> &quot;Linux is going to be part of the future. It's going to be like Unix was.&quot;
</I>&gt;<i>
</I>&gt;<i>  - Peter Moore, Asia-Pacific general manager, Microsoft
</I>&gt;<i>
</I>&gt;<i>                                                    Please reply to the
</I>&gt;<i> list;
</I>&gt;<i>                                                          please
</I>&gt;<i> *don't* CC me.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>




So I have to networks in differnet physical locations(11.0.15.0/24,
11.0.20.0/24) connected by VPN (11.0.3.0/24). The VPN works perfectly fine (yo can visualize the 2 networks files, connect by ssh, ping),my only problem is, when i try to enter local addresses by http/s protocol, lets say the router from the other network (11.0.15.2/24) from a browser(http
protocol) will have a time-out error.

PS: when ping 11.0.15.2 you DO get a response.


_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="017757.html">[squid-users] VPN ON PROXY
</A></li>
	<LI>Next message (by thread): <A HREF="017748.html">[squid-users] [Fwd:  VPN ON PROXY]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17751">[ date ]</a>
              <a href="thread.html#17751">[ thread ]</a>
              <a href="subject.html#17751">[ subject ]</a>
              <a href="author.html#17751">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
