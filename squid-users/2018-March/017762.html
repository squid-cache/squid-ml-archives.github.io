<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Allow some domains to bypass Squid
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Allow%20some%20domains%20to%20bypass%20Squid&In-Reply-To=%3C7f570a03-4a12-de72-ef8d-83e911d7c486%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017761.html">
   <LINK REL="Next"  HREF="017763.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Allow some domains to bypass Squid</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Allow%20some%20domains%20to%20bypass%20Squid&In-Reply-To=%3C7f570a03-4a12-de72-ef8d-83e911d7c486%40treenet.co.nz%3E"
       TITLE="[squid-users] Allow some domains to bypass Squid">squid3 at treenet.co.nz
       </A><BR>
    <I>Sun Mar 11 08:24:52 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="017761.html">[squid-users] Allow some domains to bypass Squid
</A></li>
        <LI>Next message (by thread): <A HREF="017763.html">[squid-users] Allow some domains to bypass Squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17762">[ date ]</a>
              <a href="thread.html#17762">[ thread ]</a>
              <a href="subject.html#17762">[ subject ]</a>
              <a href="author.html#17762">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/03/18 21:07, Nicolas Kovacs wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I have Squid setup as a transparent HTTP+HTTPS proxy in my local
</I>&gt;<i> network, using SSL-Bump.
</I>&gt;<i> 
</I>&gt;<i> The configuration works quite nicely, according to
</I>&gt;<i> /var/log/squid/cache.log and /var/log/squid/access.log.
</I>&gt;<i> 
</I>&gt;<i> This being said, I am having trouble with a handful of domains like
</I>&gt;<i> Github, or my OwnCloud installation. I have an OwnCloud server installed
</I>&gt;<i> at <A HREF="https://cloud.microlinux.fr,">https://cloud.microlinux.fr,</A> and everytime I fire up a client, I have
</I>&gt;<i> to confirm the use of an untrusted certificate. And on my workstation, I
</I>&gt;<i> can't connect to my Github repository anymore. Here's the error I get.
</I>&gt;<i> 
</I>&gt;<i>   # git pull
</I>&gt;<i>   fatal: unable to access '<A HREF="https://github.com/kikinovak/centos-">https://github.com/kikinovak/centos-</A>
</I>&gt;<i>   7-desktop-kde/': Peer's certificate issuer has been marked as not
</I>&gt;<i>   trusted by the user.
</I>&gt;<i> 
</I>&gt;<i> So I thought the best thing to do is to create an exception for this
</I>&gt;<i> handful of domains with issues.
</I>&gt;<i> 
</I>&gt;<i> Can I configure some domains to simply bypass the proxy in my current
</I>&gt;<i> (transparent) setup? Ideally, the configuration should be able to read a
</I>&gt;<i> simple text file containing said domains, something like
</I>&gt;<i> /etc/squid/bypass-these-domains.txt. And then these bypass the proxy and
</I>&gt;<i> get treated regularly, as if there was no proxy?
</I>&gt;<i> 
</I>
What you need to start with is switch your thinking from &quot;domains&quot; to
considering things in terms of connections and individual servers. Since
&quot;domain&quot; is a URL concept, and URLs are all hidden inside the encrypted
part of the traffic there is no knowing what that really is until after
decryption.

However when dealing with servers and connections, the connections TLS
SNI can tell you which *server* a client is connecting to and you can
decide to do the splice action based on which servers you are having
trouble with (not domains).

Or better yet, decide even earlier in your NAT system not to send that
traffic to the proxy at all.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="017761.html">[squid-users] Allow some domains to bypass Squid
</A></li>
	<LI>Next message (by thread): <A HREF="017763.html">[squid-users] Allow some domains to bypass Squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17762">[ date ]</a>
              <a href="thread.html#17762">[ thread ]</a>
              <a href="subject.html#17762">[ subject ]</a>
              <a href="author.html#17762">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
