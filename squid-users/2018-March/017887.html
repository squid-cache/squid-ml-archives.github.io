<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] tcp_outgoing_address and HTTPS
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20tcp_outgoing_address%20and%20HTTPS&In-Reply-To=%3CCAA%2BMow6UjHV21vZ0OrZ3%3DwkQ5Zf%2BQjagOJGVuhUjYmwDxTM6QQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017878.html">
   <LINK REL="Next"  HREF="017888.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] tcp_outgoing_address and HTTPS</H1>
    <B>Michael Pro</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20tcp_outgoing_address%20and%20HTTPS&In-Reply-To=%3CCAA%2BMow6UjHV21vZ0OrZ3%3DwkQ5Zf%2BQjagOJGVuhUjYmwDxTM6QQ%40mail.gmail.com%3E"
       TITLE="[squid-users] tcp_outgoing_address and HTTPS">michael.adm at gmail.com
       </A><BR>
    <I>Tue Mar 20 19:12:41 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="017878.html">[squid-users] tcp_outgoing_address and HTTPS
</A></li>
        <LI>Next message (by thread): <A HREF="017888.html">[squid-users] tcp_outgoing_address and HTTPS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17887">[ date ]</a>
              <a href="thread.html#17887">[ thread ]</a>
              <a href="subject.html#17887">[ subject ]</a>
              <a href="author.html#17887">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Totally agree with you, and at the same time - do not agree. But,
consider the following situation. There is <A HREF="https://site.net/">https://site.net/</A> where
there is 1.jpg and 2.jpg. If I download from this site 1.jpg from the
address 1.1.1.1 and 2.jpg from the address 2.2.2.2. Even more. There
are situations when you need to release a certain connection to the
Internet through a single provider (for example, mobile), but you need
to download the largest file that is never physically downloaded by
this connection. On another no way. Squid theoretically these are
several computers (by the number of incoming connections) and, what
prevents us as different computers from using different outgoing
interfaces even for the same origin address?

I'm not saying that you need to push the unbroken. Look at the problem
from the other side.

For example, in Chrome, I set up a proxy 1.1.1.1 and download
<A HREF="https://site.net/1.jpg.">https://site.net/1.jpg.</A> At the same time in Mozilla I set up a proxy
2.2.2.2 and download <A HREF="https://site.net/2.jpg.">https://site.net/2.jpg.</A> What's the difference if
you set up the same one squid?
acl 1s-jpg url_regex ...1.jpg
acl 2s-jpg url_regex ... 2.jpg
tcp_outgoing_address 1.1.1.1 1s-jpg
tcp_outgoing_address 2.2.2.2 2s-jpg

Where is the entrance here?

Why do we try to shove it into one hole, if we can divide it into
separate processes. It may even need some new key or ACL to determine
that for these connections to create always new tunnels (TLS, ssl,
certs, ...)
acl separate_this CreateNewTunnelForNewLink

&gt;&gt;<i> Question: how can we break the established channel (unpinn it) along
</I>&gt;&gt;<i> the old route and establish a new channel along the new route, when we
</I>&gt;&gt;<i> already know how.
</I>
&gt;<i> Squid supports using multiple sequential connections for the same
</I>&gt;<i> from-client request, but not under the conditions you describe.
</I>&gt;<i> Moreover, the already supported cases are limited to simpler HTTP/TCP
</I>&gt;<i> failures. Complex code modifications would be required to support what
</I>&gt;<i> you want for HTTPS, but it is doable, and others have wanted a similar
</I>&gt;<i> &quot;peek and then start from scratch&quot; feature.
</I>

&gt;&gt;<i> I'm willing to pay a large price for traffic congestion in this case,
</I>&gt;&gt;<i> since the goal justifies it.
</I>&gt;<i> Please note that some origin servers may have a different opinion about
</I>&gt;<i> this trade off: Some might view (repeatedly) terminated innocent
</I>&gt;<i> sessions as an attack and block all your traffic.
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="017878.html">[squid-users] tcp_outgoing_address and HTTPS
</A></li>
	<LI>Next message (by thread): <A HREF="017888.html">[squid-users] tcp_outgoing_address and HTTPS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17887">[ date ]</a>
              <a href="thread.html#17887">[ thread ]</a>
              <a href="subject.html#17887">[ subject ]</a>
              <a href="author.html#17887">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
