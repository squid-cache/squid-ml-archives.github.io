<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] How to configure a &quot;proxy home&quot; page ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20configure%20a%20%22proxy%20home%22%20page%20%3F&In-Reply-To=%3C6df8e33d-85a5-37e7-7938-cb3eec515f1f%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="017949.html">
   <LINK REL="Next"  HREF="017951.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] How to configure a &quot;proxy home&quot; page ?</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20configure%20a%20%22proxy%20home%22%20page%20%3F&In-Reply-To=%3C6df8e33d-85a5-37e7-7938-cb3eec515f1f%40treenet.co.nz%3E"
       TITLE="[squid-users] How to configure a &quot;proxy home&quot; page ?">squid3 at treenet.co.nz
       </A><BR>
    <I>Mon Mar 26 00:30:19 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="017949.html">[squid-users] How to configure a &quot;proxy home&quot; page ?
</A></li>
        <LI>Next message (by thread): <A HREF="017951.html">[squid-users] How to configure a &quot;proxy home&quot; page ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17950">[ date ]</a>
              <a href="thread.html#17950">[ thread ]</a>
              <a href="subject.html#17950">[ subject ]</a>
              <a href="author.html#17950">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 26/03/18 12:34, Yuri wrote:
&gt;<i> 
</I>&gt;<i> 26.03.2018 05:23, Amos Jeffries &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;&gt;<i> On 26/03/18 12:07, Yuri wrote:
</I>&gt;&gt;&gt;<i> 26.03.2018 05:05, Amos Jeffries &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;&gt;&gt;&gt;<i> On 26/03/18 11:05, Yuri wrote:
</I>&gt;&gt;&gt;&gt;&gt;<i> And yes, HTTPS is insecure by design and all our actions does not it
</I>&gt;&gt;&gt;&gt;&gt;<i> less insecure :-D
</I>&gt;&gt;&gt;&gt;<i> We are not talking about HTTPS. Only about TLS. Because the TLS decrypt
</I>&gt;&gt;&gt;&gt;<i> is what is &quot;failing&quot; at the time any of these details we are discussing
</I>&gt;&gt;&gt;&gt;<i> are relevant.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> The &quot;page&quot; mentioned is HTML created by the _client_ as its way to show
</I>&gt;&gt;&gt;&gt;<i> the user things. Still no HTTP(S) involvement. Squid has zero
</I>&gt;&gt;&gt;&gt;<i> involvement with that so cannot make it do anything active (like install
</I>&gt;&gt;&gt;&gt;<i> CA certs).
</I>&gt;&gt;&gt;<i> Exactly. Users do. And we're almost have all required tools to implement
</I>&gt;&gt;&gt;<i> user'driven helper ;)
</I>&gt;&gt;<i> Yet again you are circled back to involving the user. Remember the
</I>&gt;&gt;<i> original point was trying to do things *without any user* knowing or
</I>&gt;&gt;<i> being involved.
</I>&gt;<i> I could not make such a stupid idea. It does not work out that way. The
</I>&gt;<i> user is always asked whether trust the installing CA certificate.
</I>
&quot;
On 17/03/18 01:43, Yuri wrote:
&gt;<i> I guess better way to do this is create special ACL to catch exactly
</I>&gt;<i> certificate error and then redirect by 302 using deny_info to proxy page
</I>&gt;<i> with explanation and certificate.
</I>
&quot;

The mistake here was thinking the error was something Squid could see or
detect. It is not.


&gt;<i> 
</I>&gt;<i> The only way known for me to make this silently - using AD group policy.
</I>&gt;<i> 
</I>&gt;<i> AFAIK, we're discussing usual way with catch error and redirect to page.
</I>&gt;<i> No more. Captive Portal, Splash, ACL etc.
</I>&gt;<i> 
</I>
In order to deliver that splash page or redirect requires the client to
trust the proxy CA and decrypt the proxy HTTPS response.

BUT, the problem Nicolas had in the first place was the client not
trusting the proxy CA and displaying a page of its own:

&quot;
On 16/03/18 23:37, Nicolas Kovacs wrote:
&gt;<i> User who don't have the certificate installed
</I>&gt;<i> normally get a big fat HTTPS error as soon as they connect
</I>&quot;

The idea proposed to replace the client-created page was to send a
custom one from the proxy. Which is a circle.




On 26/03/18 12:34, Yuri wrote:&gt;
&gt;<i> 26.03.2018 05:23, Amos Jeffries &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This is what I mean by &quot;TLS used properly&quot; - proper is when it always
</I>&gt;&gt;<i> circles back to user deciding who they trust. No matter how indirectly,
</I>&gt;&gt;<i> the user installs a (root) CA causing trust or allowed someone else to
</I>&gt;&gt;<i> do so.
</I>&gt;<i> Generally speaking, yes.
</I>&gt;<i> 
</I>&gt;<i> I just mean, that in some other protocols you have no any possibility to
</I>&gt;<i> make MiTM by any way, whenever installing something or not. This
</I>&gt;<i> prevents any improper or malicious use of protocol.
</I>&gt;<i> 
</I>&gt;<i> TLS*have* this possibility. SSH is *not*. You can't MiTM or compromise
</I>&gt;<i> SSH by installing any key/certs to client. Correct? This is by design?
</I>
No. SSH is just TCP/telnet over TLS. So if the SSH software were to
trust the cert/key Squid delivers one could use SSL-Bump on that SSH
traffic.

The on_unsupported_protocol feature is for exactly this non-HTTP traffic
to be bumped (and rejected) or spliced by Squid.

NP: The only thing protecting SSH against SSL-Bump is that servers there
are *supposed* to check client certs as well as the server certs being
checked by clients. The bi-directional checking breaks bumping.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="017949.html">[squid-users] How to configure a &quot;proxy home&quot; page ?
</A></li>
	<LI>Next message (by thread): <A HREF="017951.html">[squid-users] How to configure a &quot;proxy home&quot; page ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17950">[ date ]</a>
              <a href="thread.html#17950">[ thread ]</a>
              <a href="subject.html#17950">[ subject ]</a>
              <a href="author.html#17950">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
