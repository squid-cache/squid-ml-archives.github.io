<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Question about shutdown_lifetime behavior.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Question%20about%20shutdown_lifetime%20behavior.&In-Reply-To=%3Cfd7793a8-5761-2cdc-6154-bd9e8a9ee0a0%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018177.html">
   <LINK REL="Next"  HREF="018183.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Question about shutdown_lifetime behavior.</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Question%20about%20shutdown_lifetime%20behavior.&In-Reply-To=%3Cfd7793a8-5761-2cdc-6154-bd9e8a9ee0a0%40treenet.co.nz%3E"
       TITLE="[squid-users] Question about shutdown_lifetime behavior.">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue May  1 06:25:39 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="018177.html">[squid-users] Question about shutdown_lifetime behavior.
</A></li>
        <LI>Next message (by thread): <A HREF="018183.html">[squid-users] Question about shutdown_lifetime behavior.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18178">[ date ]</a>
              <a href="thread.html#18178">[ thread ]</a>
              <a href="subject.html#18178">[ subject ]</a>
              <a href="author.html#18178">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 01/05/18 18:04, Cody Herzog wrote:
&gt;<i> Hello.
</I>&gt;<i> 
</I>&gt;<i> I have a question about shutdown_lifetime:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://www.squid-cache.org/Doc/config/shutdown_lifetime/">http://www.squid-cache.org/Doc/config/shutdown_lifetime/</A>
</I>&gt;<i> 
</I>&gt;<i> Does Squid always wait the full amount of time before shutting down, even after all active connections have closed?
</I>
For now yes. Long-term the plan is to have it exit if no clients are
connected, but we have not yet finalized how that is to work internally.


&gt;<i> 
</I>&gt;<i> I'm running Squid 3.5.27 on Ubuntu 16.04.
</I>&gt;<i> 
</I>&gt;<i> If Squid does not have an internal mechanism to complete the shutdown when all active connections have closed, then I may have to create my own based on polling with 'netstat'.
</I>&gt;<i> 
</I>
You can try. Squid maintains a number of helpers though which may still
be doing things with sockets after clients are gone. Besides dev time
detecting when all that is completed is the largest blocker at present
to the long-term project.

If you really need a fast shutdown feel free to set the lifetime config
value to a shorter time, or simply call &quot;squid -k shutdown&quot; (or
equivalent init script command).

The &quot;-k shutdown&quot; behaviour is; on first use to begin the shutdown
period, on second call to trigger the end of shutdown as if
shutdown_lifetime was reached.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="018177.html">[squid-users] Question about shutdown_lifetime behavior.
</A></li>
	<LI>Next message (by thread): <A HREF="018183.html">[squid-users] Question about shutdown_lifetime behavior.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18178">[ date ]</a>
              <a href="thread.html#18178">[ thread ]</a>
              <a href="subject.html#18178">[ subject ]</a>
              <a href="author.html#18178">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
