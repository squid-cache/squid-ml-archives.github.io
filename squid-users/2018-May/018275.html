<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Sibling cache with ssl peek/splice/bump?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Sibling%20cache%20with%20ssl%20peek/splice/bump%3F&In-Reply-To=%3C0630a996-2fca-5bcd-d77b-e208287f327c%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018274.html">
   <LINK REL="Next"  HREF="018286.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Sibling cache with ssl peek/splice/bump?</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Sibling%20cache%20with%20ssl%20peek/splice/bump%3F&In-Reply-To=%3C0630a996-2fca-5bcd-d77b-e208287f327c%40measurement-factory.com%3E"
       TITLE="[squid-users] Sibling cache with ssl peek/splice/bump?">rousskov at measurement-factory.com
       </A><BR>
    <I>Tue May 15 14:48:34 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="018274.html">[squid-users] Sibling cache with ssl peek/splice/bump?
</A></li>
        <LI>Next message (by thread): <A HREF="018286.html">[squid-users] Very High Response Times to Certain Websites with	Squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18275">[ date ]</a>
              <a href="thread.html#18275">[ thread ]</a>
              <a href="subject.html#18275">[ subject ]</a>
              <a href="author.html#18275">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 05/15/2018 08:27 AM, Alex Crow wrote:

&gt;<i> Is it currently possible in v4 with bumping to have a cache_peer setup
</I>&gt;<i> so that <A HREF="https://">https://</A> resources can be fetched from a peer if they are
</I>&gt;<i> available there?
</I>

If I am interpreting the &quot;if available&quot; part of your question correctly,
then what you want is unsupported in most SslBump environments because a
bumping Squid does not receive requests for HTTP resources and, hence,
cannot check whether a resource is available somewhere. Squid receives
requests for blind TCP tunnels.

Yes, SslBump converts blind TCP tunnels into HTTP transactions, but in
nearly all practical setups, that conversion happens _after_ the TCP
connection is established and pinned to the requested server. At the TCP
connection establishment time, the HTTP resource (to be requested inside
the tunnel) is still unknown.

FWIW, with an experimental patch, you can route TCP tunnels to peers:
<A HREF="https://github.com/squid-cache/squid/compare/53fdd3f...measurement-factory:7a4c4ed.patch">https://github.com/squid-cache/squid/compare/53fdd3f...measurement-factory:7a4c4ed.patch</A>


Squid could disregard connection pinning and request the HTTP resource
by establishing a new HTTPS connection (via a secure cache_peer if
necessary). I have not tested this, but I suspect that Squid does not do
that today: After bumping, you may get local cache hits, but no
HTTP-level peering.


HTH,

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="018274.html">[squid-users] Sibling cache with ssl peek/splice/bump?
</A></li>
	<LI>Next message (by thread): <A HREF="018286.html">[squid-users] Very High Response Times to Certain Websites with	Squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18275">[ date ]</a>
              <a href="thread.html#18275">[ thread ]</a>
              <a href="subject.html#18275">[ subject ]</a>
              <a href="author.html#18275">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
