<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] GET requests remain in pending state with Squid and	Kerberos auth
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20GET%20requests%20remain%20in%20pending%20state%20with%20Squid%20and%0A%09Kerberos%20auth&In-Reply-To=%3C135eec8dc0d14b8eae8aab0ecf826309%40mbxtoa3.winmail.deshaw.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018328.html">
   <LINK REL="Next"  HREF="018331.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] GET requests remain in pending state with Squid and	Kerberos auth</H1>
    <B>Ahmad, Sarfaraz</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20GET%20requests%20remain%20in%20pending%20state%20with%20Squid%20and%0A%09Kerberos%20auth&In-Reply-To=%3C135eec8dc0d14b8eae8aab0ecf826309%40mbxtoa3.winmail.deshaw.com%3E"
       TITLE="[squid-users] GET requests remain in pending state with Squid and	Kerberos auth">Sarfaraz.Ahmad at deshaw.com
       </A><BR>
    <I>Wed May 23 07:11:50 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="018328.html">[squid-users] original_dst wrong when using intercept
</A></li>
        <LI>Next message (by thread): <A HREF="018331.html">[squid-users] GET requests remain in pending state with Squid and Kerberos auth
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18330">[ date ]</a>
              <a href="thread.html#18330">[ thread ]</a>
              <a href="subject.html#18330">[ subject ]</a>
              <a href="author.html#18330">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I am using Squid as an explicit proxy (configured in the browsers) and have configured it to authenticate all users with Kerberos.
Here are the relevant bits from squid.conf

auth_param negotiate program /usr/lib64/squid/negotiate_kerberos_auth -r -s HTTP/<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proxytest1.mydomain.com at MYDOMAIN.COM</A> -k /etc/squid/HTTP.keytab
auth_param negotiate children 10
auth_param negotiate keep_alive on

I know I should be expecting 407s for new TCP connections and pages do load a bit slower compared to Basic Auth.
But that isn't the problem. The problem is at times some of the web pages resources (GET requests mostly) just hang there endlessly. (Chrome just says pending)
When I do a refresh, the browser loads that very same resource(say a .js/.css file) just fine.

This is just a test setup and I looked at the negotiate helper stats. Here
   ID #          FD         PID     # Requests          # Replies            # Timed-out       Flags        Time   Offset  Request
      1            13        99482          551                       551                          0                    0.014         0       (none)
      2            17        99485           74          74           0                    0.016         0       (none)
      3            21      106324                           4             4             0                    0.025         0       (none)

I don't think they are the problem.
Any thoughts on what could be going on here? I don't have a way to reproduce this reliably so far and this happens intermittently.

Regards,
Sarfaraz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20180523/3b0bf7b6/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20180523/3b0bf7b6/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="018328.html">[squid-users] original_dst wrong when using intercept
</A></li>
	<LI>Next message (by thread): <A HREF="018331.html">[squid-users] GET requests remain in pending state with Squid and Kerberos auth
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18330">[ date ]</a>
              <a href="thread.html#18330">[ thread ]</a>
              <a href="subject.html#18330">[ subject ]</a>
              <a href="author.html#18330">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
