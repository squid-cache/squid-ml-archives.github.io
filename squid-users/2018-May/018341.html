<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid display garbage character.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20display%20garbage%20character.&In-Reply-To=%3C469119c5-ac02-0676-bc86-ae5385296caf%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="018340.html">
   <LINK REL="Next"  HREF="018343.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid display garbage character.</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20display%20garbage%20character.&In-Reply-To=%3C469119c5-ac02-0676-bc86-ae5385296caf%40treenet.co.nz%3E"
       TITLE="[squid-users] Squid display garbage character.">squid3 at treenet.co.nz
       </A><BR>
    <I>Sat May 26 20:43:11 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="018340.html">[squid-users] Squid display garbage character.
</A></li>
        <LI>Next message (by thread): <A HREF="018343.html">[squid-users] Squid display garbage character.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18341">[ date ]</a>
              <a href="thread.html#18341">[ thread ]</a>
              <a href="subject.html#18341">[ subject ]</a>
              <a href="author.html#18341">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 27/05/18 07:21, Willsz CS wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I'am running squid with transparent mode, browsing several site from
</I>&gt;<i> client something like www.cintapoker88.com
</I>&gt;<i> &lt;<A HREF="http://www.cintapoker88.com">http://www.cintapoker88.com</A>&gt;, but get strange garbage character
</I>&gt;<i> (<A HREF="https://ibb.co/kcEGfo">https://ibb.co/kcEGfo</A> for clearly picture). I guessing my ISP running
</I>&gt;<i> transparent proxy too for censorship. For temporary solution is
</I>&gt;<i> unredirection HTTP rule to Squid.&#160;Anyone help me for clue this problem?
</I>&gt;<i> 
</I>
This display happens when the browser is being told the response object
is or one type (eg HTML/XML text), but it is actually binary content (eg
an image, or compressed object). Usually when fetching the main HTML
index object, images, or video content - things which are displayed
directly to the user.


It usually occurs because:

A) an admin forces things to be cached by a proxy and served from cache
despite instructions from the website author on the HTTP response that
caching is not permitted for that object.
  - check your squid.conf for any refresh_pattern directives with
override-* or ignore-* options which might be forcing things to be
cached when they are not supposed to. BE VERY careful and conservative
with your use of regex patterns.
  - current Squid versions &quot;squid -k parse&quot; command should provide you
nice loud WARNING messages about any of these options if it is possibly
going to cause the types of issue you can see. The text will mention
violating HTTP and you being responsible for the issues cased (if any).

or,

B) the web server is not sending Vary headers consistently and the proxy
cache ends up thinking that a compressed object is possible to be sent
to clients only accepting plain-text objects.
 - this one there is not much you can do except to prevent these
particular URLs not to be cashed by your own proxy.


Both cases result in the client sometimes displaying binary octets as if
they were plain text, as you can see in that demo image. More often they
occur with scripts and nothing gets displayed - just parts of the
website dont work properly (no scrolling, missing content, or
unclickable buttons, etc).


The tool at
(&lt;<A HREF="https://redbot.org/?descend=True&amp;uri=http://www.cintapoker88.com/&amp;check_name=default">https://redbot.org/?descend=True&amp;uri=http://www.cintapoker88.com/&amp;check_name=default</A>&gt;)
indicates that some (but only a very few) of the javascripts being used
by that website have Vary header issues. The images pulled from Imgur
have some serious problems

So it depends on exactly which URL(s) you are having trouble with. You
can plug them into that redbot tool to get an analysis of particular URL.


Also, it would help to know which Squid version you are using and which
OS distro you use it on. If you are unsure of your regex_pattern rules
please post your squid.conf and we can assist pointing out any
unsuspected issues there.


HTH
Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="018340.html">[squid-users] Squid display garbage character.
</A></li>
	<LI>Next message (by thread): <A HREF="018343.html">[squid-users] Squid display garbage character.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#18341">[ date ]</a>
              <a href="thread.html#18341">[ thread ]</a>
              <a href="subject.html#18341">[ subject ]</a>
              <a href="author.html#18341">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
