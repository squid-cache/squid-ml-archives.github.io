<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 4.3: SSL Bump fails to send client certificate
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%204.3%3A%20SSL%20Bump%20fails%20to%20send%20client%0A%20certificate&In-Reply-To=%3C513e5713-510a-ed8c-56a6-fd8e58c16e31%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019612.html">
   <LINK REL="Next"  HREF="019619.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 4.3: SSL Bump fails to send client certificate</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%204.3%3A%20SSL%20Bump%20fails%20to%20send%20client%0A%20certificate&In-Reply-To=%3C513e5713-510a-ed8c-56a6-fd8e58c16e31%40measurement-factory.com%3E"
       TITLE="[squid-users] Squid 4.3: SSL Bump fails to send client certificate">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Nov  1 16:40:57 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019612.html">[squid-users] Squid 4.3: SSL Bump fails to send client certificate
</A></li>
        <LI>Next message (by thread): <A HREF="019619.html">[squid-users] Squid 4.3: SSL Bump fails to send client	certificate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19613">[ date ]</a>
              <a href="thread.html#19613">[ thread ]</a>
              <a href="subject.html#19613">[ subject ]</a>
              <a href="author.html#19613">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/31/18 10:55 PM, Sid wrote:

&gt;<i> Actually in my case Server is looking for a certificate to be sent by
</I>&gt;<i> client; How to configure Squid to get
</I>&gt;<i> this certificate from client for mutual authentication?
</I>
It is technically impossible to meaningfully forward a client
certificate to the origin server when _bumping_ connections, and, hence,
Squid cannot support such forwarding. You should be able to configure a
bumping Squid to send its own client certificate to the origin server
though; see tls_outgoing_options cert=... key=....

The question is, can you give Squid the same client certificate as used
by your client?

* If that client certificate is the same for all from-Squid traffic, you
have access to the client certificate key, and you can store that key
securely on the Squid server, then the answer is probably &quot;yes&quot;. It
would not be true &quot;forwarding&quot;, but the origin server will get the
certificate it expects, and Squid will be able to send the right TLS
CertificateVerify message to prove that Squid has the private key.

* Otherwise, the answer is probably &quot;no&quot;, and you cannot use client
certificate-based authentication with the origin server while bumping
connections. Whether it is possible to support that by enhancing Squid
would depend on which precondition(s) in the first bullet are not
satisfied. For example, it is possible to enhance Squid to select from a
list of client certificates when bumping a server connection.


HTH,

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019612.html">[squid-users] Squid 4.3: SSL Bump fails to send client certificate
</A></li>
	<LI>Next message (by thread): <A HREF="019619.html">[squid-users] Squid 4.3: SSL Bump fails to send client	certificate
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19613">[ date ]</a>
              <a href="thread.html#19613">[ thread ]</a>
              <a href="subject.html#19613">[ subject ]</a>
              <a href="author.html#19613">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
