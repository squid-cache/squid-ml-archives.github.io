<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Message with SSL-bump with a specific site ...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Message%20with%20SSL-bump%20with%20a%20specific%20site%20...&In-Reply-To=%3C0524d935-3449-dc38-6945-87577098c950%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019632.html">
   <LINK REL="Next"  HREF="019633.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Message with SSL-bump with a specific site ...</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Message%20with%20SSL-bump%20with%20a%20specific%20site%20...&In-Reply-To=%3C0524d935-3449-dc38-6945-87577098c950%40treenet.co.nz%3E"
       TITLE="[squid-users] Message with SSL-bump with a specific site ...">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Nov  6 03:47:26 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019632.html">[squid-users] Message with SSL-bump with a specific site ...
</A></li>
        <LI>Next message (by thread): <A HREF="019633.html">[squid-users] squid-users Digest, Vol 51, Issue 6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19634">[ date ]</a>
              <a href="thread.html#19634">[ thread ]</a>
              <a href="subject.html#19634">[ subject ]</a>
              <a href="author.html#19634">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 6/11/18 9:40 AM, Walter H. wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> can some explain what is causing this message
</I>&gt;<i> 
</I>&gt;<i> While trying to retrieve the URL: <A HREF="https://www.3bg.at/*">https://www.3bg.at/*</A>
</I>
Squid was asked to open an HTTPS connection or tunnel to that server.


&gt;<i> The following error was encountered:
</I>&gt;<i> 
</I>&gt;<i>   * *Failed to establish a secure connection to 193.138.123.75 *
</I>&gt;<i> 
</I>
The connection attempt failed.


&gt;<i> The system returned:
</I>&gt;<i> /&#160;&#160;&#160; (71) Protocol error (TLS code: SQUID_ERR_SSL_HANDSHAKE)/
</I>&gt;<i> 
</I>
The TCP connection was closed by the OS or OpenSSL with TCP code 71.

Squid is using the SQUID_ERR_SSL_HANDSHAKE to represent what type of
protocol error. To make it clearer that it is not a TCP error but a TLS
handshake error inside the TCP connection.


&gt;<i> Handshake with SSL server failed: error:1408E0F4:SSL
</I>&gt;<i> routines:SSL3_GET_MESSAGE:unexpected message
</I>&gt;<i> 
</I>
OpenSSL gave this weird string to Squid as the reason for the failure.

A quick search for the string on line find that it means what it says -
 the other end of the connection is delivering something that your
OpenSSL library does not understand.


What that something is and why it is not understood is unknown. One now
has to look at the TCP packet trace to see what went wrong with the TLS
messaging.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019632.html">[squid-users] Message with SSL-bump with a specific site ...
</A></li>
	<LI>Next message (by thread): <A HREF="019633.html">[squid-users] squid-users Digest, Vol 51, Issue 6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19634">[ date ]</a>
              <a href="thread.html#19634">[ thread ]</a>
              <a href="subject.html#19634">[ subject ]</a>
              <a href="author.html#19634">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
