<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Multiple ecap req services
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Multiple%20ecap%20req%20services&In-Reply-To=%3C94a0cf51-5887-061f-12f3-cb2554d9255a%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019687.html">
   <LINK REL="Next"  HREF="019686.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Multiple ecap req services</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Multiple%20ecap%20req%20services&In-Reply-To=%3C94a0cf51-5887-061f-12f3-cb2554d9255a%40measurement-factory.com%3E"
       TITLE="[squid-users] Multiple ecap req services">rousskov at measurement-factory.com
       </A><BR>
    <I>Fri Nov 16 14:59:55 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019687.html">[squid-users] Multiple ecap req services
</A></li>
        <LI>Next message (by thread): <A HREF="019686.html">[squid-users] Multiple ecap req services
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19688">[ date ]</a>
              <a href="thread.html#19688">[ thread ]</a>
              <a href="subject.html#19688">[ subject ]</a>
              <a href="author.html#19688">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/16/18 6:14 AM, Luis Felipe Dominguez Vega wrote:

&gt;<i> adaptation_service_chain request_chain ...
</I>&gt;<i> 
</I>&gt;<i> adaptation_access ecapBlockSiteRequest allow all
</I>&gt;<i> adaptation_access ecapSquidTransferAuditRequest allow all
</I>
You did not tell Squid to use request_chain. You told Squid to use
ecapBlockSiteRequest and only ecapBlockSiteRequest. adaptation_access
directive selects which service (or a group of services) is going to be
used. Your directive always selects ecapBlockSiteRequest.

You may declare 100 adaptation services, service sets, and service
chains. How should Squid know which service (or set or chain) it should
send the request to? Squid evaluates adaptation_access rules to answer
that question. The first applicable matching rule determines the service
(or set or chain) that will be used at a given vectoring point for a
given transaction.

Alex.


&gt;<i> El jue., 15 nov. 2018 a las 12:43, Alex Rousskov escribi&#243;:
</I>&gt;<i> 
</I>&gt;<i>     On 11/15/18 2:51 AM, Amos Jeffries wrote:
</I>&gt;<i>     &gt; On 15/11/18 9:00 AM, Luis Felipe Dominguez Vega wrote:
</I>&gt;<i>     &gt;&gt; Not working.... i was added
</I>&gt;<i>     &gt;&gt;
</I>&gt;<i>     &gt;&gt; adaptation_service_chain request_chain ecapBlockSiteRequest
</I>&gt;<i>     &gt;&gt; ecapSquidTransferAuditRequest
</I>&gt;<i>     &gt;&gt;
</I>&gt;<i>     &gt;&gt; and only&#160;ecapBlockSiteRequest is used.....
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     &gt; This is sounding more and more like the eCAP module is broken.
</I>&gt;<i> 
</I>&gt;<i>     Unless Squid configuration does not _use_ the declared request_chain. I
</I>&gt;<i>     would ask for *all* adaptation-related lines from squid.conf first.
</I>&gt;<i> 
</I>&gt;<i>     A good test is to reorder ecapSquidTransferAuditRequest and
</I>&gt;<i>     ecapBlockSiteRequest in request_chain and see if ecapBlockSiteRequest is
</I>&gt;<i>     still the only adaptation service that is being used. If it is, a
</I>&gt;<i>     different set of adaptation_access lines is needed to enable
</I>&gt;<i>     request_chain usage.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     &gt; Can you get a cache.log trace of what it is receiving and sending
</I>&gt;<i>     to Squid?
</I>&gt;<i> 
</I>&gt;<i>     HTH,
</I>&gt;<i> 
</I>&gt;<i>     Alex.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     &gt;&gt; El mi&#233;., 14 nov. 2018 a las 8:54, Amos Jeffries escribi&#243;:
</I>&gt;<i>     &gt;&gt;
</I>&gt;<i>     &gt;&gt;&#160; &#160; &#160;On 15/11/18 2:13 AM, Luis Felipe Dominguez Vega wrote:
</I>&gt;<i>     &gt;&gt;&#160; &#160; &#160;&gt; by &quot;use all services&quot; i mean, that all the ecap services set as
</I>&gt;<i>     &gt;&gt;&#160; &#160; &#160;&gt; reqmod_precache.... see this:
</I>&gt;<i>     &gt;&gt;&#160; &#160; &#160;&gt; if i change the order in adaptation_access, then only the first
</I>&gt;<i>     &gt;&gt;&#160; &#160; &#160;defined
</I>&gt;<i>     &gt;&gt;&#160; &#160; &#160;&gt; is used, the another is not used, so i think that in my
</I>&gt;<i>     &gt;&gt;&#160; &#160; &#160;&gt; ecap module i need to put something like.... &quot;continue to next
</I>&gt;<i>     &gt;&gt;&#160; &#160; &#160;&gt; adaptation_service&quot;?????
</I>&gt;<i>     &gt;&gt;
</I>&gt;<i>     &gt;&gt;
</I>&gt;<i>     &gt;&gt;&#160; &#160; &#160;Did you read the documentation I provided links for earlier?
</I>&gt;<i>     &gt;&gt;
</I>&gt;<i>     &gt;&gt;&#160; &#160; &#160;There are multiple ways to group and order services. The services
</I>&gt;<i>     &gt;&gt;&#160; &#160; &#160;themselves can even change the order of what follows. The
</I>&gt;<i>     config sample
</I>&gt;<i>     &gt;&gt;&#160; &#160; &#160;you mention does not contain anything telling Squid those
</I>&gt;<i>     details.
</I>&gt;<i>     &gt;&gt;
</I>&gt;<i>     &gt;&gt;&#160; &#160; &#160;You need to add one of those directives I provided links to -
</I>&gt;<i>     whichever
</I>&gt;<i>     &gt;&gt;&#160; &#160; &#160;one meets your required ordering.
</I>&gt;<i>     &gt;&gt;
</I>&gt;<i>     &gt;&gt;&#160; &#160; &#160;Amos
</I>&gt;<i>     &gt;&gt;&#160; &#160; &#160;_______________________________________________
</I>&gt;<i>     &gt;&gt;&#160; &#160; &#160;squid-users mailing list
</I>&gt;<i>     &gt;&gt;&#160; &#160; &#160;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i>     &gt;&gt;&#160; &#160; &#160;&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;&gt;
</I>&gt;<i>     &gt;&gt;&#160; &#160; &#160;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>     &gt;&gt;
</I>&gt;<i>     &gt; _______________________________________________
</I>&gt;<i>     &gt; squid-users mailing list
</I>&gt;<i>     &gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i>     &gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>     &gt;
</I>&gt;<i> 
</I>&gt;<i>     _______________________________________________
</I>&gt;<i>     squid-users mailing list
</I>&gt;<i>     <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i>     <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019687.html">[squid-users] Multiple ecap req services
</A></li>
	<LI>Next message (by thread): <A HREF="019686.html">[squid-users] Multiple ecap req services
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19688">[ date ]</a>
              <a href="thread.html#19688">[ thread ]</a>
              <a href="subject.html#19688">[ subject ]</a>
              <a href="author.html#19688">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
