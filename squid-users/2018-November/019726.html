<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] need help with cachemgr
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20need%20help%20with%20cachemgr&In-Reply-To=%3Cd714b96a-765a-a592-6c43-220ca6c62981%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019720.html">
   <LINK REL="Next"  HREF="019713.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] need help with cachemgr</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20need%20help%20with%20cachemgr&In-Reply-To=%3Cd714b96a-765a-a592-6c43-220ca6c62981%40measurement-factory.com%3E"
       TITLE="[squid-users] need help with cachemgr">rousskov at measurement-factory.com
       </A><BR>
    <I>Wed Nov 28 15:50:50 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019720.html">[squid-users] Fwd: Re: need help with cachemgr
</A></li>
        <LI>Next message (by thread): <A HREF="019713.html">[squid-users] Parent proxy chaining
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19726">[ date ]</a>
              <a href="thread.html#19726">[ thread ]</a>
              <a href="subject.html#19726">[ subject ]</a>
              <a href="author.html#19726">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/28/18 4:59 AM, jmperrote wrote:

&gt;<i> This is the new error that I have when I tried to squidclint via https +
</I>&gt;<i> certicicate.
</I>
You have many different problems.

Problem 0: You are not responding on the mailing list. Please keep this
thread on the mailing list so that others can benefit from this triage
and so that others can help you.

Problem 1: You seem to ignore errors and warnings that you can fix on
your own. Please fix the ones you can fix before asking for help with
the remaining problems. When asking for help, explain what you think
each remaining warning/error means, and why you cannot fix that problem.
This approach shows that you invest serious effort into making this work
rather than simply abusing the mailing list as a free replacement for a
system administrator.


Problem 2:

&gt;<i> squidclient -vvv --https --cert /soporte/ssl/educacion.crt -h 10.0.0.4 -p 1084 mgr:info
</I>
The --cert option specifies a TLS client certificate. Your reverse
proxy, AFAICT, does not use client certificates. Remove that option. See
&quot;man squidclient&quot; for details about each option you use.


Problem 3:

&gt;<i> WARNING: Failed to load Certificate from /soporte/ssl/educacion.crt
</I>
I do not know what went wrong here because you have not provided any
relevant information like whether the file is actually there and can be
read by the user squidclient runs as.


Problem 4:

&gt;<i> X.509 TLS handshake ...
</I>&gt;<i> VERIFY DATUM: The certificate is NOT trusted. The certificate issuer is
</I>&gt;<i> unknown. The name in the certificate does not match the expected.
</I>&gt;<i> WARNING: Insecure Connection
</I>
Looks self-explanatory to me: Your squidclient does not trust the server
certificate used by your reverse proxy. You may need to either

* use a --trusted-ca option or
* configure your TLS library environment to always trust the CA that
signed the https_port certificate of your reverse proxy.


Problem 5:

&gt;<i> HTTP/1.1 401 Unauthorized
</I>&gt;<i> X-Squid-Error: ERR_CACHE_ACCESS_DENIED 0
</I>&gt;<i> WWW-Authenticate: Basic realm=...
</I>
Your reverse proxy requires HTTP client authentication. Depending on
your needs, you should either

* adjust your Squid http_access rules to disable authentication for
cache manager requests or
* give a valid username and password to squidclient (search &quot;man
squidclient&quot; manual page for &quot;authentication&quot; and &quot;WWW&quot; to discover the
right options).


Potential problem 6:

This may not be relevant to you, but please note that Squid Cache
Manager does not yet support secure queries when Squid is running in SMP
mode. For details, please see
<A HREF="https://wiki.squid-cache.org/Features/CacheManager#Secure_SMP_reports">https://wiki.squid-cache.org/Features/CacheManager#Secure_SMP_reports</A>


HTH,

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019720.html">[squid-users] Fwd: Re: need help with cachemgr
</A></li>
	<LI>Next message (by thread): <A HREF="019713.html">[squid-users] Parent proxy chaining
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19726">[ date ]</a>
              <a href="thread.html#19726">[ thread ]</a>
              <a href="subject.html#19726">[ subject ]</a>
              <a href="author.html#19726">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
