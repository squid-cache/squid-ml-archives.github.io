<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] external ACL based on requested port?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20external%20ACL%20based%20on%20requested%20port%3F&In-Reply-To=%3C1218166078.7254349.1543532002018.JavaMail.zimbra%40rentec.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019743.html">
   <LINK REL="Next"  HREF="019738.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] external ACL based on requested port?</H1>
    <B>Kevin Kretz</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20external%20ACL%20based%20on%20requested%20port%3F&In-Reply-To=%3C1218166078.7254349.1543532002018.JavaMail.zimbra%40rentec.com%3E"
       TITLE="[squid-users] external ACL based on requested port?">kevin at rentec.com
       </A><BR>
    <I>Thu Nov 29 22:53:22 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019743.html">[squid-users] office365 - brand new endpoint management question!!
</A></li>
        <LI>Next message (by thread): <A HREF="019738.html">[squid-users] external ACL based on requested port?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19736">[ date ]</a>
              <a href="thread.html#19736">[ thread ]</a>
              <a href="subject.html#19736">[ subject ]</a>
              <a href="author.html#19736">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi, 

I'm using an external ACL script to allow/limit access based on some factors including (authenticated) username, client IP, the domain of the requested URL. 

I'd also like to base the access on the port of the destination. Most would just be 80 or 443, but I'd like to limit/allow access to particular ports with the external script based on the other factors (a rule that would allow a connection to domain.com on port 80 from user 'user' coming from his IP address, for example), so a simple &quot;acl allow_port port 80&quot; would be too broad. 

It looks, though, like the &lt;lp format code doesn't have a value until after the connection is made (or attempted) so I can't use it for this purpose. 

Is there a way to provide the desired port to the external ACL along with the other information? 


thanks 

Kevin 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20181129/a1a027fc/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20181129/a1a027fc/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019743.html">[squid-users] office365 - brand new endpoint management question!!
</A></li>
	<LI>Next message (by thread): <A HREF="019738.html">[squid-users] external ACL based on requested port?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19736">[ date ]</a>
              <a href="thread.html#19736">[ thread ]</a>
              <a href="subject.html#19736">[ subject ]</a>
              <a href="author.html#19736">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
