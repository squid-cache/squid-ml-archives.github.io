<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Fwd: ERROR: http_port or ACL larger than 65536	(short type)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Fwd%3A%20ERROR%3A%20http_port%20or%20ACL%20larger%20than%2065536%0A%09%28short%20type%29&In-Reply-To=%3C201811301817.32706.Antony.Stone%40squid.open.source.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019746.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Fwd: ERROR: http_port or ACL larger than 65536	(short type)</H1>
    <B>Antony Stone</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Fwd%3A%20ERROR%3A%20http_port%20or%20ACL%20larger%20than%2065536%0A%09%28short%20type%29&In-Reply-To=%3C201811301817.32706.Antony.Stone%40squid.open.source.it%3E"
       TITLE="[squid-users] Fwd: ERROR: http_port or ACL larger than 65536	(short type)">Antony.Stone at squid.open.source.it
       </A><BR>
    <I>Fri Nov 30 18:17:32 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019746.html">[squid-users] Fwd: ERROR: http_port or ACL larger than 65536 (short	type)
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19747">[ date ]</a>
              <a href="thread.html#19747">[ thread ]</a>
              <a href="subject.html#19747">[ subject ]</a>
              <a href="author.html#19747">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Friday 30 November 2018 at 19:07:58, kalice caprice wrote:

&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> Inside my squid.conf I'm setting up ACL like this:
</I>&gt;<i> 
</I>&gt;<i> http_port 0.0.0.0:20740 name=20740
</I>
So, you're using the name to represent the port number...

&gt;<i> acl ip10740 myportname 20740
</I>&gt;<i> 
</I>&gt;<i> and then
</I>&gt;<i> 
</I>&gt;<i> tcp_outgoing_address x.x.x.x ip10740
</I>&gt;<i> 
</I>&gt;<i> I've got over 65536
</I>
Well, that'll be a problem, then...

&gt;<i> (about 80k) ACL inside my squid.conf and squid throws this error:
</I>&gt;<i> 
</I>&gt;<i> ERROR: The value '65536' is larger than the type 'short'.
</I>
Indeed.  That's how many TCP port numbers you get to play with.

&gt;<i> Well, that's really unfortunate, I'm good at reading C language, but does
</I>&gt;<i> anyone know whether there is a workaround without having to dig into the
</I>&gt;<i> code to change variable type of if not, what variable and where should I
</I>&gt;<i> change it ?
</I>
You'd need to change the way TCP networking works (and, no, that's not 
possible).

&gt;<i> I'm afraid this could break things but it's not like I've got many choices
</I>&gt;<i> at the current state.
</I>
What are you really trying to achieve by defining 80,000 different port numbers 
in your ACLs?


Antony.

-- 
The Royal Society for the Prevention of Cruelty to Animals was formed in 1824.
The National Society for the Prevention of Cruelty to Children was not formed 
until 1884.
That says something about the British.

                                                   Please reply to the list;
                                                         please *don't* CC me.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019746.html">[squid-users] Fwd: ERROR: http_port or ACL larger than 65536 (short	type)
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19747">[ date ]</a>
              <a href="thread.html#19747">[ thread ]</a>
              <a href="subject.html#19747">[ subject ]</a>
              <a href="author.html#19747">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
