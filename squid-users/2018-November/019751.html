<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Question on Many Clients to Many Proxy Lists
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Question%20on%20Many%20Clients%20to%20Many%20Proxy%20Lists&In-Reply-To=%3CCAPL%3DMgdCgDwrFUwxeAni2ZKe5mi0qRE%2BSvb6i2UZqzCyX6WT%3Dg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019750.html">
   <LINK REL="Next"  HREF="019732.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Question on Many Clients to Many Proxy Lists</H1>
    <B>Wire Cutter</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Question%20on%20Many%20Clients%20to%20Many%20Proxy%20Lists&In-Reply-To=%3CCAPL%3DMgdCgDwrFUwxeAni2ZKe5mi0qRE%2BSvb6i2UZqzCyX6WT%3Dg%40mail.gmail.com%3E"
       TITLE="[squid-users] Question on Many Clients to Many Proxy Lists">wirecutter at shadycloud.com
       </A><BR>
    <I>Fri Nov 30 19:57:08 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019750.html">[squid-users] Question on Many Clients to Many Proxy Lists
</A></li>
        <LI>Next message (by thread): <A HREF="019732.html">[squid-users] office365 - brand new endpoint management question!!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19751">[ date ]</a>
              <a href="thread.html#19751">[ thread ]</a>
              <a href="subject.html#19751">[ subject ]</a>
              <a href="author.html#19751">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Yes both were before the cache, but I wasn't calling the correct group in
the ACL, which caused the issue.


Thanks for you help.

Now to figure out why it's slow

On Fri, Nov 30, 2018 at 2:17 PM Alex Rousskov &lt;
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt; wrote:

&gt;<i> On 11/30/18 11:51 AM, Wire Cutter wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; cache_peer_access peerA1 allow port_8080
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; cache_peer 192.168.1.2 parent 8800 0 round-robin no-query name=peerA1
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; Then this is the error I get when I start the service
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Bungled /etc/squid/squid.conf line 3148: cache_peer_access peerA1 allow
</I>&gt;<i> port_8080
</I>&gt;<i>
</I>&gt;<i> Did you define peerA1 and port_8080 before (you used them on) line 3148?
</I>&gt;<i> If not, you should.
</I>&gt;<i>
</I>&gt;<i> Alex.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; On Thu, Nov 29, 2018 at 10:44 AM Alex Rousskov wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     On 11/29/18 7:57 AM, Wire Cutter wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     &gt; I&#8217;ve created 4 ports for clients to talk to, then created ACL
</I>&gt;<i> &gt;     lists for
</I>&gt;<i> &gt;     &gt; those ports.  From there I&#8217;ve tried (and failed) to create naming
</I>&gt;<i> &gt;     groups
</I>&gt;<i> &gt;     &gt; for cacheing peers, then added those to ACLs and it fails. Any
</I>&gt;<i> ideas?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Use cache_peer_access to allow http_port X traffic (and only that
</I>&gt;<i> &gt;     traffic) to peer group Y:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;       # rules for peer group A
</I>&gt;<i> &gt;       cache_peer_access peerA1 allow receivedOnPortForPeersA
</I>&gt;<i> &gt;       cache_peer_access peerA2 allow receivedOnPortForPeersA
</I>&gt;<i> &gt;       cache_peer_access peerA3 allow receivedOnPortForPeersA
</I>&gt;<i> &gt;       ...
</I>&gt;<i> &gt;       # rules for peer group B
</I>&gt;<i> &gt;       cache_peer_access peerB1 allow receivedOnPortForPeersB
</I>&gt;<i> &gt;       cache_peer_access peerB2 allow receivedOnPortForPeersB
</I>&gt;<i> &gt;       ...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Depending on your traffic and needs, you may also need to allow
</I>&gt;<i> &gt;     non-hierarchical requests to go to peer:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;       nonhierarchical_direct off
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     and/or to prohibit direct connections for portX:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;       never_direct allow receivedOnPortForPeersA
</I>&gt;<i> &gt;       never_direct allow receivedOnPortForPeersB
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Once you get this working, please make Squid documentation
</I>&gt;<i> improvements
</I>&gt;<i> &gt;     that would have allowed you to figure this out on your own.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     HTH,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Alex.
</I>&gt;<i> &gt;     _______________________________________________
</I>&gt;<i> &gt;     squid-users mailing list
</I>&gt;<i> &gt;     <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> &gt;     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i> &gt;     <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt;
</I>&gt;<i> _________________________________________________________________________________
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; This transmission may contain information that is privileged,
</I>&gt;<i> &gt; confidential and exempt from disclosure under applicable law.  If you
</I>&gt;<i> &gt; are not the intended recipient, you are hereby notified that any
</I>&gt;<i> &gt; disclosure, copying, distribution, or use of the information contained
</I>&gt;<i> &gt; herein (including any reliance thereon) is STRICTLY PROHIBITED.  If you
</I>&gt;<i> &gt; received this transmission in error, please immediately contact the
</I>&gt;<i> &gt; sender and destroy the material in its entirety, whether in electronic
</I>&gt;<i> &gt; or hard copy format.
</I>&gt;<i>
</I>&gt;<i>
</I>
-- 
_________________________________________________________________________________

This transmission may contain information that is privileged, confidential
and exempt from disclosure under applicable law.  If you are not the
intended recipient, you are hereby notified that any disclosure, copying,
distribution, or use of the information contained herein (including any
reliance thereon) is STRICTLY PROHIBITED.  If you received this
transmission in error, please immediately contact the sender and destroy
the material in its entirety, whether in electronic or hard copy format.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20181130/43d5c901/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20181130/43d5c901/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019750.html">[squid-users] Question on Many Clients to Many Proxy Lists
</A></li>
	<LI>Next message (by thread): <A HREF="019732.html">[squid-users] office365 - brand new endpoint management question!!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19751">[ date ]</a>
              <a href="thread.html#19751">[ thread ]</a>
              <a href="subject.html#19751">[ subject ]</a>
              <a href="author.html#19751">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
