<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] acl declaration
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20acl%20declaration&In-Reply-To=%3C6427fb6a-eccd-e369-39aa-7f51da1f8770%40dvm.esines.cu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019365.html">
   <LINK REL="Next"  HREF="019369.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] acl declaration</H1>
    <B>Alex Guti&#233;rrez Mart&#237;nez</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20acl%20declaration&In-Reply-To=%3C6427fb6a-eccd-e369-39aa-7f51da1f8770%40dvm.esines.cu%3E"
       TITLE="[squid-users] acl declaration">alex at dvm.esines.cu
       </A><BR>
    <I>Thu Oct  4 18:40:48 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019365.html">[squid-users] Caching ChromeOS update files
</A></li>
        <LI>Next message (by thread): <A HREF="019369.html">[squid-users] acl declaration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19366">[ date ]</a>
              <a href="thread.html#19366">[ thread ]</a>
              <a href="subject.html#19366">[ subject ]</a>
              <a href="author.html#19366">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi comunity, i'm tryn to set a few acl but is not working, here is what 
i do:


1- time acl

I declare 3 acl, officina for workers, pcinternet for the boss and 
adminred for me, the network admin. Each rule links to a file.

acl oficina src &quot;/etc/squid3/reglas/oc-cu&quot;
acl pcinternet src &quot;/etc/squid3/reglas/oc-internet&quot;
acl adminred src &quot;/etc/squid3/reglas/oc-inf&quot;

this is the file content:

pc-interet : 192.168.0.253

oficina: 192.168.1.0/29

adminred : 192.168.2.0/30


i create a facebook time rule for my squid so i get like this


1rst i create the rule for facebook

acl sociales dstdomain -n &quot;/etc/squid3/reglas/bloqueo/sociales&quot;

this is what the file sociales contains

.facebook.com
.akamaihd.net
.fbcdn.net

2dn i create the schedule

acl trabajo time MTWHF 09:00-12:00 14:00-17:00

3rd i create 1 refusal rule

http_access deny trabajo sociales !pcinternet !adminred oficina


This is my question. Do i write the rule like above or like this, with a 
refusal rule for each acl

http_access deny trabajo sociales !pcinternet

http_access deny trabajo sociales !adminred

http_access deny trabajo sociales oficina


I make this question because both ways are given me trouble at the time 
to block facebook.


I also have trouble with delay_pools, this i what i do

1st i define my delays pools

delay_pools 1

#Canal Facebook
delay_class 1 2
delay_access 1 allow sociales !pc-internet !adminred
delay_access 1 deny all
delay_parameters 1 65536/49152 49152/32768

my problem is adminred is falling into delay pool 1 acording to sqstat.


Any one be so nice to clarify this for me.


Thanks for your time, remember, always attack ideas, never people.


Please forgive my English, this is not my native language


-- 
Saludos Cordiales

Lic. Alex Guti&#233;rrez Mart&#237;nez

Tel. +53 7 2710327

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20181004/f6d0f820/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20181004/f6d0f820/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019365.html">[squid-users] Caching ChromeOS update files
</A></li>
	<LI>Next message (by thread): <A HREF="019369.html">[squid-users] acl declaration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19366">[ date ]</a>
              <a href="thread.html#19366">[ thread ]</a>
              <a href="subject.html#19366">[ subject ]</a>
              <a href="author.html#19366">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
