<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] socket failure: (24) Too many open files
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20socket%20failure%3A%20%2824%29%20Too%20many%20open%20files&In-Reply-To=%3C74cb1f53c3507974051cb8bf62708cda%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019396.html">
   <LINK REL="Next"  HREF="019399.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] socket failure: (24) Too many open files</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20socket%20failure%3A%20%2824%29%20Too%20many%20open%20files&In-Reply-To=%3C74cb1f53c3507974051cb8bf62708cda%40ngtech.co.il%3E"
       TITLE="[squid-users] socket failure: (24) Too many open files">eliezer at ngtech.co.il
       </A><BR>
    <I>Mon Oct  8 19:18:04 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019396.html">[squid-users] socket failure: (24) Too many open files
</A></li>
        <LI>Next message (by thread): <A HREF="019399.html">[squid-users] socket failure: (24) Too many open files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19394">[ date ]</a>
              <a href="thread.html#19394">[ thread ]</a>
              <a href="subject.html#19394">[ subject ]</a>
              <a href="author.html#19394">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I recommend Squid upgrade if possible due to couple bugs as something..
Try to bump the server to 32k open file descriptors and see what 
happens.
Depends on the load on the server it might need at peek times more then 
8k.
The cache manage info page should give you couple technical details on 
the status of the service.
It can also give some statistics which might shed some light on the 
scenario.
Others might be able to give you some more detail on the relevant cache 
manager pages.

<A HREF="https://wiki.squid-cache.org/Features/CacheManager">https://wiki.squid-cache.org/Features/CacheManager</A>

Eliezer

On 2018-10-05 18:57, Cherukuri, Naresh wrote:
&gt;<i> Hello Squid Group,
</I>&gt;<i> 
</I>&gt;<i> I am using squid 3.5.20 as a proxy server.  I Increased the memory
</I>&gt;<i> from 12 GB to 32 GB and Max file descriptors from &quot;4096&quot; to &quot;8192&quot; and
</I>&gt;<i> deployed this server into production on 09/26/2018&quot;.
</I>&gt;<i> 
</I>&gt;<i> I don't have any problem from the past 10 days everything working as
</I>&gt;<i> expected till today. Now after 10 days for the first time, I got
</I>&gt;<i> following errors on cache log today. Can someone advise/suggest any
</I>&gt;<i> ideas here?
</I>&gt;<i> 
</I>&gt;<i> Error(s) in /var/log/squid/cache.log: 2018/10/05 11:03:59 kid1|
</I>&gt;<i> comm_open: socket failure: (24) Too many open files
</I>&gt;<i> 
</I>&gt;<i> 2018/10/05 11:03:59 kid1| comm_open: socket failure: (24) Too many
</I>&gt;<i> open files
</I>&gt;<i> 
</I>&gt;<i> 2018/10/05 11:03:59 kid1| comm_open: socket failure: (24) Too many
</I>&gt;<i> open files
</I>&gt;<i> 
</I>&gt;<i> 2018/10/05 11:03:59 kid1| comm_open: socket failure: (24) Too many
</I>&gt;<i> open files
</I>&gt;<i> 
</I>&gt;<i> 2018/10/05 11:03:59 kid1| comm_open: socket failure: (24) Too many
</I>&gt;<i> open files
</I>&gt;<i> 
</I>&gt;<i> 2018/10/05 11:03:59 kid1| comm_open: socket failure: (24) Too many
</I>&gt;<i> open files
</I>&gt;<i> 
</I>&gt;<i> 2018/10/05 11:03:59 kid1| comm_open: socket failure: (24) Too many
</I>&gt;<i> open files
</I>&gt;<i> 
</I>&gt;<i> 2018/10/05 11:03:59 kid1| comm_open: socket failure: (24) Too many
</I>&gt;<i> open files
</I>&gt;<i> 
</I>&gt;<i> 2018/10/05 11:03:59 kid1| comm_open: socket failure: (24) Too many
</I>&gt;<i> open files
</I>&gt;<i> 
</I>&gt;<i> [n*****@squidprod ~]$ free -m
</I>&gt;<i> 
</I>&gt;<i>              total       used       free     shared    buffers
</I>&gt;<i> cached
</I>&gt;<i> 
</I>&gt;<i> Mem:         32004      15907      16097        138        295
</I>&gt;<i> 14132
</I>&gt;<i> 
</I>&gt;<i> -/+ buffers/cache:       1480      30524
</I>&gt;<i> 
</I>&gt;<i> Swap:        24999          0      24999
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> 
</I>&gt;<i> Naresh
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
-- 
----
Eliezer Croitoru
Linux System Administrator
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019396.html">[squid-users] socket failure: (24) Too many open files
</A></li>
	<LI>Next message (by thread): <A HREF="019399.html">[squid-users] socket failure: (24) Too many open files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19394">[ date ]</a>
              <a href="thread.html#19394">[ thread ]</a>
              <a href="subject.html#19394">[ subject ]</a>
              <a href="author.html#19394">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
