<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Recent Squid 4 versions show ERR_CANNOT_FORWARD instead of ERR_DNS_FAIL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Recent%20Squid%204%20versions%20show%20ERR_CANNOT_FORWARD%0A%20instead%20of%20ERR_DNS_FAIL&In-Reply-To=%3Cb526da5c-6a7d-ad03-5f98-33cdd06f474c%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019406.html">
   <LINK REL="Next"  HREF="019408.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Recent Squid 4 versions show ERR_CANNOT_FORWARD instead of ERR_DNS_FAIL</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Recent%20Squid%204%20versions%20show%20ERR_CANNOT_FORWARD%0A%20instead%20of%20ERR_DNS_FAIL&In-Reply-To=%3Cb526da5c-6a7d-ad03-5f98-33cdd06f474c%40treenet.co.nz%3E"
       TITLE="[squid-users] Recent Squid 4 versions show ERR_CANNOT_FORWARD instead of ERR_DNS_FAIL">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Oct 10 14:24:08 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019406.html">[squid-users] Recent Squid 4 versions show ERR_CANNOT_FORWARD	instead of ERR_DNS_FAIL
</A></li>
        <LI>Next message (by thread): <A HREF="019408.html">[squid-users] SMP mode, workers, cache_dir with conditional
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19409">[ date ]</a>
              <a href="thread.html#19409">[ thread ]</a>
              <a href="subject.html#19409">[ subject ]</a>
              <a href="author.html#19409">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/10/18 12:58 AM, Christof Gerber wrote:
&gt;<i> I am wondering why the recent Squid4
</I>&gt;<i> (v4-57a5679bae20e90ef73473e03327e37aa0263570) with a minimal config,
</I>
This is not how Squid versions are numbered.

The commit hash above matches to squid-5.0.0-20181008-r57a5679

Any build made from a checkout of that hash contains much code that has
never been in Squid-4 and never will.


&gt;<i> when accessing a non-existing domain (e.g.
</I>&gt;<i> <A HREF="http://fsdafasdfsadfklsdj.ch/">http://fsdafasdfsadfklsdj.ch/</A>) produces a ERR_CANNOT_FORWARD error
</I>

Squid-5 code is currently in &quot;alpha&quot; state. Meaning it is not yet well
tested by many people beyond the particular change authors, and one
should expect to face not-yet documented behaviour changes and bugs when
running it.

If you did not intend to run the latest cutting-edge Squid code, you may
want to stick with the formal release bundles and snapshots rather than
building binaries by commit hash.

If you do want to run the latest development code, I thank you for the
interest and assistance testing. But please do refer to the commits by
their matching formal Squid versions (eg snapshot name or release
number). Doing so will clarify for you and for us both the expected
behaviour and the state of the code (alpha, beta, stable) you are comparing.


&gt;<i> when the older Squid4 (v4-6d8f397398995c4512cb045920ee2747cc6b14f8)
</I>
This hash being the Squid-4.2 stable release commit.

Which makes its version number(s) 4.2 or snapshot
squid-4.2-20180910-r6d8f397.


&gt;<i> produces a ERR_DNS_FAIL as it is also the case for Squid 3.5.
</I>&gt;<i> 
</I>&gt;<i> Why does this different behaviour occur?
</I>&gt;<i> Is it a bug or is it a feature?
</I>

To answer your questions we will need to know what actual Squid version
you are running. Show the output of squid -v please.

Also the config that Squid is using. The contents of your squid.conf
please. Strip out #-commented lines if it is large.

Also what do DNS responses look like when the resolver being used by
Squid is asked to fetch those non-existent domains.
 Does it return an NXDOMAIN, a SERVFAIL, no response, a response with no
IPs, or a response with false IPs ?


&gt;<i> 
</I>&gt;<i> Ps. Squid 4 v4-9d6a91ba608acadb9f3cb397d72748a711db3c91 is still
</I>&gt;<i> producing ERR_DNS_FAIL.
</I>&gt;<i> 
</I>
This is again a Squid-5 commit hash.

The equivalent Squid-4 hash was fcc58c36535edf58ecef3683762c051d4e7e93cc
and correlates to a 4.0.23 beta release snapshot.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019406.html">[squid-users] Recent Squid 4 versions show ERR_CANNOT_FORWARD	instead of ERR_DNS_FAIL
</A></li>
	<LI>Next message (by thread): <A HREF="019408.html">[squid-users] SMP mode, workers, cache_dir with conditional
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19409">[ date ]</a>
              <a href="thread.html#19409">[ thread ]</a>
              <a href="subject.html#19409">[ subject ]</a>
              <a href="author.html#19409">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
