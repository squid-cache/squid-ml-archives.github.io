<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] How to create a simple whitelist using regexes?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20create%20a%20simple%20whitelist%20using%20regexes%3F&In-Reply-To=%3C20181015172538.GA8499%40fantomas.sk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019441.html">
   <LINK REL="Next"  HREF="019455.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] How to create a simple whitelist using regexes?</H1>
    <B>Matus UHLAR - fantomas</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20create%20a%20simple%20whitelist%20using%20regexes%3F&In-Reply-To=%3C20181015172538.GA8499%40fantomas.sk%3E"
       TITLE="[squid-users] How to create a simple whitelist using regexes?">uhlar at fantomas.sk
       </A><BR>
    <I>Mon Oct 15 17:25:38 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019441.html">[squid-users] How to create a simple whitelist using regexes?
</A></li>
        <LI>Next message (by thread): <A HREF="019455.html">[squid-users] How to create a simple whitelist using regexes?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19442">[ date ]</a>
              <a href="thread.html#19442">[ thread ]</a>
              <a href="subject.html#19442">[ subject ]</a>
              <a href="author.html#19442">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 15.10.18 12:48, RB wrote:
&gt;<i>After some more research it looks like squid only has access to the url
</I>&gt;<i>domain if it's HTTPS and the only way to get the url path and query string
</I>&gt;<i>is to use ssl_bump to decrypt https so squid can see url path and query
</I>&gt;<i>arguments.
</I>
this is what I wrote before. Looking at it now, I should have explained more
deeply....

&gt;&gt;&gt;<i> &gt; are you aware that you can only see CONNECT in https requests, unless
</I>&gt;&gt;&gt;<i> &gt; using ssl_bump?
</I>
&gt;<i>To use ssl_bump, I have to compile the code from source with --enable-ssl,
</I>&gt;<i>create a certificate, and add it to the chain of certs to every other vm
</I>&gt;<i>that proxies through squid, then squid can decrypt the https urls to see
</I>&gt;<i>paths and query args and finally apply the regex to those urls in order to
</I>&gt;<i>only allow explicit regex urls.
</I>&gt;<i>
</I>&gt;<i>Is this correct?
</I>
Alex has explained already.

I would like to note that the whole purpose of SSL encription in HTTPS is to
deny anyone between client and server to see what is the client accessing.
That includes your proxy.

And we often see complaints about SSL bump not working because different
clients expect certificates signed by their certificate autorities, not by
yours.

-- 
Matus UHLAR - fantomas, <A HREF="https://lists.squid-cache.org/listinfo/squid-users">uhlar at fantomas.sk</A> ; <A HREF="http://www.fantomas.sk/">http://www.fantomas.sk/</A>
Warning: I wish NOT to receive e-mail advertising to this address.
Varovanie: na tuto adresu chcem NEDOSTAVAT akukolvek reklamnu postu.
Windows 2000: 640 MB ought to be enough for anybody

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019441.html">[squid-users] How to create a simple whitelist using regexes?
</A></li>
	<LI>Next message (by thread): <A HREF="019455.html">[squid-users] How to create a simple whitelist using regexes?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19442">[ date ]</a>
              <a href="thread.html#19442">[ thread ]</a>
              <a href="subject.html#19442">[ subject ]</a>
              <a href="author.html#19442">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
