<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Unable to open youtube.com
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Unable%20to%20open%20youtube.com&In-Reply-To=%3CCAKK%2BL1eHaiS7Aq-cC%3D9M3denn74rzyshp2L%3DgV6msXbXysMHQQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019459.html">
   <LINK REL="Next"  HREF="019461.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Unable to open youtube.com</H1>
    <B>Timur Lagutenko</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Unable%20to%20open%20youtube.com&In-Reply-To=%3CCAKK%2BL1eHaiS7Aq-cC%3D9M3denn74rzyshp2L%3DgV6msXbXysMHQQ%40mail.gmail.com%3E"
       TITLE="[squid-users] Unable to open youtube.com">timur.lagutenko at gmail.com
       </A><BR>
    <I>Wed Oct 17 04:17:53 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019459.html">[squid-users] Unable to open youtube.com
</A></li>
        <LI>Next message (by thread): <A HREF="019461.html">[squid-users] Unable to open youtube.com
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19460">[ date ]</a>
              <a href="thread.html#19460">[ thread ]</a>
              <a href="subject.html#19460">[ subject ]</a>
              <a href="author.html#19460">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>i'm sure that the issue is not related to firewall rules.
because if I pass traffic from client IP (using NAT, browser is not
configured to use proxy) it works.
I think it is related to some SSL/TLS lib in the system.
Because today i've tried CLI browser - links.
Launching it directly from gateway (which has direct access to web), i was
able to browse any site in text mode.
Except youtube.
So i guess it is related to some missing ssl lib.
Could you please suggest how can i find all required libs for my squid?

# squid -v
Squid Cache: Version 3.5.28
Service Name: squid

This binary uses OpenSSL 1.0.2p  14 Aug 2018. For legal restrictions on
distribution see <A HREF="https://www.openssl.org/source/license.html">https://www.openssl.org/source/license.html</A>

configure options:  '--with-default-user=squid' '--bindir=/usr/local/sbin'
'--sbindir=/usr/local/sbin' '--datadir=/usr/local/etc/squid'
'--libexecdir=/usr/local/libexec/squid' '--localstatedir=/var'
'--sysconfdir=/usr/local/etc/squid' '--with-logdir=/var/log/squid'
'--with-pidfile=/var/run/squid/squid.pid' '--with-swapdir=/var/squid/cache'
'--without-gnutls' '--with-included-ltdl' '--enable-auth'
'--enable-zph-qos' '--enable-build-info' '--enable-loadable-modules'
'--enable-removal-policies=lru heap' '--disable-epoll'
'--disable-linux-netfilter' '--disable-linux-tproxy'
'--disable-translation' '--disable-arch-native' '--disable-eui'
'--enable-cache-digests' '--disable-delay-pools' '--disable-ecap'
'--disable-esi' '--enable-follow-x-forwarded-for' '--without-heimdal-krb5'
'--without-mit-krb5' '--without-gss' '--disable-htcp'
'--disable-icap-client' '--disable-icmp' '--disable-ident-lookups'
'--disable-ipv6' '--enable-kqueue' '--with-large-files'
'--enable-http-violations' '--without-nettle' '--disable-snmp'
'--enable-ssl' '--with-openssl=/usr/local'
'LIBOPENSSL_CFLAGS=-I/usr/local/include' 'LIBOPENSSL_LIBS=-lcrypto -lssl'
'--disable-ssl-crtd' '--disable-stacktraces' '--disable-ipf-transparent'
'--disable-ipfw-transparent' '--disable-pf-transparent'
'--without-nat-devpf' '--enable-forw-via-db' '--enable-wccp'
'--enable-wccpv2' '--enable-auth-basic=DB SMB_LM MSNT-multi-domain NCSA PAM
POP3 RADIUS fake getpwnam' '--enable-auth-digest=file'
'--enable-external-acl-helpers=file_userip time_quota unix_group'
'--enable-auth-negotiate=none' '--enable-auth-ntlm=fake smb_lm'
'--enable-storeio=aufs ufs' '--enable-disk-io=DiskThreads AIO Blocking
IpcIo Mmapped' '--enable-log-daemon-helpers=file'
'--enable-url-rewrite-helpers=fake' '--enable-storeid-rewrite-helpers=file'
'--prefix=/usr/local' '--mandir=/usr/local/man' '--disable-silent-rules'
'--infodir=/usr/local/info/' '--build=amd64-portbld-freebsd11.2'
'build_alias=amd64-portbld-freebsd11.2' 'CC=cc' 'CFLAGS=-O2 -pipe
-fstack-protector -fno-strict-aliasing ' 'LDFLAGS= -pthread
-L/usr/local/lib -lpcreposix -lpcre -Wl,-rpath,/usr/local/lib
-fstack-protector ' 'LIBS=' 'CPPFLAGS=-I/usr/local/include' 'CXX=c++'
'CXXFLAGS=-O2 -pipe -fstack-protector -fno-strict-aliasing
-Wno-unknown-warning-option -Wno-undefined-bool-conversion
-Wno-tautological-undefined-compare -Wno-dynamic-class-memaccess '
'CPP=cpp' --enable-ltdl-convenience

# uname -a
FreeBSD gate.xxxxxx.local 11.2-RELEASE-p4 FreeBSD 11.2-RELEASE-p4 #0: Thu
Sep 27 08:16:24 UTC 2018
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">root at amd64-builder.daemonology.net</A>:/usr/obj/usr/src/sys/GENERIC
amd64



&#1089;&#1088;, 17 &#1086;&#1082;&#1090;. 2018 &#1075;. &#1074; 8:48, Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;:

&gt;<i> On 17/10/18 6:22 AM, Bruno de Paula Larini wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Em 16/10/2018 02:46, Timur Lagutenko escreveu:
</I>&gt;<i> &gt;&gt; Hello friends,
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; recently I've updated my freebsd gateway.
</I>&gt;<i> &gt;&gt; from 11.1 to 11.2.
</I>&gt;<i> &gt;&gt; also I've updated squid form 3.5 to 4.1
</I>&gt;<i> &gt;&gt; i have no transparency, no ssl-bump/splice etc..
</I>&gt;<i> &gt;&gt; simple installation.
</I>&gt;<i> &gt;&gt; browser is configured to use proxy.
</I>&gt;<i> &gt;&gt; squid configuration is default.
</I>&gt;<i>
</I>&gt;<i> Then Squid interactino wit this traffic is a simple test of whether the
</I>&gt;<i> client IP address is within your LAN and then blindly shovel the HTTPS
</I>&gt;<i> traffic through.
</I>&gt;<i>
</I>&gt;<i> Problems are limited to routing, MTU/MSS misconfiguration somewhere
</I>&gt;<i> (network VPM tunnel?), and problems with the endpoints TLS negotiation
</I>&gt;<i> (browser or upstream server).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt;&gt; everything works fine except youtube.com &lt;<A HREF="http://youtube.com/">http://youtube.com/</A>&gt;
</I>&gt;<i> &gt;&gt; Browser freezes on &quot;trying to set secure connection&quot;, and after gives
</I>&gt;<i> &gt;&gt; time-out error.
</I>&gt;<i> &gt;&gt; i've also tied to downgrade squid back to 3,5
</I>&gt;<i> &gt;&gt; no success.
</I>&gt;<i>
</I>&gt;<i> That downgrade not resolving the issue indicates that it is not Squid
</I>&gt;<i> related.
</I>&gt;<i>
</I>&gt;<i> As Bruno suggested, probably a change to the routing or firewall systems
</I>&gt;<i> that traffic is going through that appeared with the OS version bump. It
</I>&gt;<i> is pretty rare to see on small bumps, but can happen.
</I>&gt;<i>
</I>&gt;<i> Amos
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20181017/a3fca13b/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20181017/a3fca13b/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019459.html">[squid-users] Unable to open youtube.com
</A></li>
	<LI>Next message (by thread): <A HREF="019461.html">[squid-users] Unable to open youtube.com
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19460">[ date ]</a>
              <a href="thread.html#19460">[ thread ]</a>
              <a href="subject.html#19460">[ subject ]</a>
              <a href="author.html#19460">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
