<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] deny_info and CONNECT for https request gives SSL error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20deny_info%20and%20CONNECT%20for%20https%20request%20gives%20SSL%0A%20error&In-Reply-To=%3C33f4fe65-da3d-4c54-cc5c-7ca5350bbb79%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019454.html">
   <LINK REL="Next"  HREF="019464.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] deny_info and CONNECT for https request gives SSL error</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20deny_info%20and%20CONNECT%20for%20https%20request%20gives%20SSL%0A%20error&In-Reply-To=%3C33f4fe65-da3d-4c54-cc5c-7ca5350bbb79%40treenet.co.nz%3E"
       TITLE="[squid-users] deny_info and CONNECT for https request gives SSL error">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Oct 17 05:07:30 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019454.html">[squid-users] deny_info and CONNECT for https request gives SSL error
</A></li>
        <LI>Next message (by thread): <A HREF="019464.html">[squid-users] deny_info and CONNECT for https request gives SSL error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19462">[ date ]</a>
              <a href="thread.html#19462">[ thread ]</a>
              <a href="subject.html#19462">[ subject ]</a>
              <a href="author.html#19462">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 17/10/18 3:15 PM, Amish wrote:
&gt;<i> 
</I>&gt;<i> My proposal for would be to add &quot;-n&quot; (nobump) option to deny_info.
</I>&gt;<i> 
</I>&gt;<i> If -n is specified then squid will send 307 directly instead of 200.
</I>&gt;<i> 
</I>&gt;<i> Case 1)
</I>&gt;<i> deny_info <A HREF="http://192.168.1.1/blocked.html">http://192.168.1.1/blocked.html</A> denyit
</I>&gt;<i> 
</I>&gt;<i> Return with 200 and bump it (existing behaviour)
</I>&gt;<i> 
</I>&gt;<i> Case 2)
</I>&gt;<i> deny_info 3xx:<A HREF="http://192.168.1.1/blocked.html">http://192.168.1.1/blocked.html</A> denyit
</I>&gt;<i> 
</I>&gt;<i> Return with 200 and bump it (existing behaviour)
</I>&gt;<i> 
</I>&gt;<i> Case 3)
</I>&gt;<i> deny_info -n <A HREF="http://192.168.1.1/blocked.html">http://192.168.1.1/blocked.html</A> denyit
</I>&gt;<i> 
</I>&gt;<i> Return with 307 Temporary Redirect and Location: header
</I>&gt;<i> 
</I>&gt;<i> Case 4)
</I>&gt;<i> deny_info -n 302:<A HREF="http://192.168.1.1/blocked.html">http://192.168.1.1/blocked.html</A> denyit
</I>&gt;<i> 
</I>&gt;<i> Return with 302 Found and Location: header.
</I>&gt;<i> 
</I>&gt;<i> Case 1 and 2 above applicable only for sslbump cases.
</I>&gt;<i> 
</I>&gt;<i> For non-sslbump it already behaves as 3) and 4) above.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> This would not change anything for existing users who want existing
</I>&gt;<i> behaviour.
</I>&gt;<i> 
</I>&gt;<i> But allow people like me to *NOT* bump connection when deny_info is
</I>&gt;<i> activated.
</I>&gt;<i> 
</I>
IMO the deny_info is very much the wrong place to be making such
decisions. Its purpose is to supply the *content* of the denial message
itself. Nothing about how that message gets delivered.

If anything this would be an additional ssl-bump option on the port line
to say that traffic is not really being ssl-bump'ed despite the presence
of the ssl-bump setting.

So think about that - why bother putting &quot;ssl-bump&quot; on the port in the
first place if the behaviour that option enables is not wanted to ever
happen?

If your purpose is simply to convert port 443 traffic into HTTP CONNECT
for upstream software to receive there are other far simpler and more
efficient software to be using for that. httptunnel being the popular one.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019454.html">[squid-users] deny_info and CONNECT for https request gives SSL error
</A></li>
	<LI>Next message (by thread): <A HREF="019464.html">[squid-users] deny_info and CONNECT for https request gives SSL error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19462">[ date ]</a>
              <a href="thread.html#19462">[ thread ]</a>
              <a href="subject.html#19462">[ subject ]</a>
              <a href="author.html#19462">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
