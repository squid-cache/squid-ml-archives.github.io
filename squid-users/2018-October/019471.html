<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] [External] Re: SQUID Proxy - SSL Certificate error
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%5BExternal%5D%20Re%3A%20SQUID%20Proxy%20-%20SSL%20Certificate%20error&In-Reply-To=%3CSN4P114MB022324409921E2694A322F168FF80%40SN4P114MB0223.NAMP114.PROD.OUTLOOK.COM%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019469.html">
   <LINK REL="Next"  HREF="019477.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] [External] Re: SQUID Proxy - SSL Certificate error</H1>
    <B>Vayalpadu, Vedavyas</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%5BExternal%5D%20Re%3A%20SQUID%20Proxy%20-%20SSL%20Certificate%20error&In-Reply-To=%3CSN4P114MB022324409921E2694A322F168FF80%40SN4P114MB0223.NAMP114.PROD.OUTLOOK.COM%3E"
       TITLE="[squid-users] [External] Re: SQUID Proxy - SSL Certificate error">vedavyas.vayalpadu at accenture.com
       </A><BR>
    <I>Thu Oct 18 09:28:51 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019469.html">[squid-users] SQUID Proxy - SSL Certificate error
</A></li>
        <LI>Next message (by thread): <A HREF="019477.html">[squid-users] [External] Re: SQUID Proxy - SSL Certificate error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19471">[ date ]</a>
              <a href="thread.html#19471">[ thread ]</a>
              <a href="subject.html#19471">[ subject ]</a>
              <a href="author.html#19471">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Amos,

Both have 2 different certificates, below is the squid configuration. Cache_Peer is same for both the URLs ( Same data server and same name)

Old One: WORKING

#### Reverse Proxy for WebShop UK ####
http_port 10.XX.XX.XX:80 accel vhost defaultsite=webshop.XXX.co.uk name=80013
acl XXXUKwebshop_acl myportname 80013
http_access deny XXXXUKwebshop_acl
deny_info <A HREF="https://webshop.XXX.co.uk">https://webshop.XXX.co.uk</A> XXXXUKwebshop_acl
######
https_port 10.XX.XX.XX:443 accel vhost defaultsite=webshop.XXXX.co.uk cert=/etc/squid/certificate/webshop.XXXXX.co.uk.pfx_both.pem name=80014
cache_peer XXX.XXX.int parent 8070 0 no-query originserver name=XXXXUK_webshops
acl XXXXUKwebshop_acls myportname 80014 dst XXX.XXX.int
cache_peer_access XXXXUK_webshops allow XXXXUKwebshop_acls


New One: NOT-WORKING

#### Reverse Proxy for WebShopUK ####
http_port 10.YY.YY.YY:80 accel vhost defaultsite=webshopuk.YYYY.co.uk name=80013
acl YYYYUKwebshop_acl myportname 80013
http_access deny YYYYUKwebshop_acl
deny_info <A HREF="https://webshopuk.YYYY.co.uk">https://webshopuk.YYYY.co.uk</A> YYYYUKwebshop_acl
######
https_port 10.YY.YY.YY:443 accel vhost defaultsite=webshopuk.YYYY.co.uk cert=/etc/squid/certificate/webshopuk.cert.pem name=80014
cache_peer XXX.XXX.int parent 8070 0 no-query originserver name=XXXXUK_webshops
acl XXXXUKwebshop_acls myportname 80014 dst XXX.XXX.int
cache_peer_access XXXXUK_webshops allow XXXXUKwebshop_acls





-----Original Message-----
From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; On Behalf Of Amos Jeffries
Sent: Thursday, October 18, 2018 8:19 AM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: [External] Re: [squid-users] SQUID Proxy - SSL Certificate error

On 18/10/18 2:31 AM, Vayalpadu, Vedavyas wrote:
&gt;<i> Hi All,
</I>&gt;<i>
</I>&gt;<i> We have an existing SSL certificate for a WebShop URL. It has an
</I>&gt;<i> external IP Natted to a Load Balancer and has 2 reverse-squid proxies
</I>&gt;<i> configured for load balancing.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Now we need to on-board a new URL with same external IP, Same Load
</I>&gt;<i> Balancers and r-Squid proxy servers ? Is it possible.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I have uploaded the new URL certificate and restarted the squid proxy
</I>&gt;<i> services, when I try to access the URL iam getting below error, and
</I>&gt;<i> Certificate error as below.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Can anyone help me on this ?
</I>&gt;<i>
</I>
OpenSSL builds of Squid do not support multiple certificates per listening port.

Squid-4 does support multiple certificates when built with GnuTLS instead of OpenSSL. This is still an experimental feature though, so YMMV.

Amos
_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
<A HREF="https://urldefense.proofpoint.com/v2/url?u=http-3A__lists.squid-2Dcache.org_listinfo_squid-2Dusers&amp;d=DwIGaQ&amp;c=eIGjsITfXP_y-DLLX0uEHXJvU8nOHrUK8IrwNKOtkVU&amp;r=tFxAuERmcRdMDY2ODYAvl6bEao1jdCMqbJq7uebMlVg&amp;m=LemWGJCk_zI_BNi880abyP4vFLbKBqpsHNOfwGmWTeg&amp;s=zG-T9PhS7SH74eqtG4DnQIXf0Y-ePm24dqiA7TPV_Ww&amp;e=">https://urldefense.proofpoint.com/v2/url?u=http-3A__lists.squid-2Dcache.org_listinfo_squid-2Dusers&amp;d=DwIGaQ&amp;c=eIGjsITfXP_y-DLLX0uEHXJvU8nOHrUK8IrwNKOtkVU&amp;r=tFxAuERmcRdMDY2ODYAvl6bEao1jdCMqbJq7uebMlVg&amp;m=LemWGJCk_zI_BNi880abyP4vFLbKBqpsHNOfwGmWTeg&amp;s=zG-T9PhS7SH74eqtG4DnQIXf0Y-ePm24dqiA7TPV_Ww&amp;e=</A>



  ________________________________

This message is for the designated recipient only and may contain privileged, proprietary, or otherwise confidential information. If you have received it in error, please notify the sender immediately and delete the original. Any other use of the e-mail by you is prohibited. Where allowed by local law, electronic communications with Accenture and its affiliates, including e-mail and instant messaging (including content), may be scanned by our systems for the purposes of information security and assessment of internal compliance with Accenture policy. Your privacy is important to us. Accenture uses your personal data only in compliance with data protection laws. For further information on how Accenture processes your personal data, please see our privacy statement at <A HREF="https://www.accenture.com/us-en/privacy-policy.">https://www.accenture.com/us-en/privacy-policy.</A>
______________________________________________________________________________________

www.accenture.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20181018/6c82d8b5/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20181018/6c82d8b5/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019469.html">[squid-users] SQUID Proxy - SSL Certificate error
</A></li>
	<LI>Next message (by thread): <A HREF="019477.html">[squid-users] [External] Re: SQUID Proxy - SSL Certificate error
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19471">[ date ]</a>
              <a href="thread.html#19471">[ thread ]</a>
              <a href="subject.html#19471">[ subject ]</a>
              <a href="author.html#19471">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
