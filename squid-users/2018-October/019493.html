<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] https_port Listen on different IP
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20https_port%20Listen%20on%20different%20IP&In-Reply-To=%3Ca416cc65-3f97-46b0-dcd1-b14cfa0b32ba%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019486.html">
   <LINK REL="Next"  HREF="019498.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] https_port Listen on different IP</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20https_port%20Listen%20on%20different%20IP&In-Reply-To=%3Ca416cc65-3f97-46b0-dcd1-b14cfa0b32ba%40treenet.co.nz%3E"
       TITLE="[squid-users] https_port Listen on different IP">squid3 at treenet.co.nz
       </A><BR>
    <I>Sat Oct 20 04:10:01 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019486.html">[squid-users] https_port Listen on different IP
</A></li>
        <LI>Next message (by thread): <A HREF="019498.html">[squid-users] https_port Listen on different IP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19493">[ date ]</a>
              <a href="thread.html#19493">[ thread ]</a>
              <a href="subject.html#19493">[ subject ]</a>
              <a href="author.html#19493">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 20/10/18 6:04 AM, Alex Rousskov wrote:
&gt;<i> On 10/19/2018 01:10 AM, houheming wrote:
</I>&gt;&gt;<i> https_port 443 ...
</I>&gt;&gt;<i> https_port 180.97.33.107:443 ...
</I>&gt;&gt;<i> https_port 180.97.33.108:443 ...
</I>&gt;<i> 
</I>&gt;<i> I am not sure, but perhaps the first https_port line (the one without an
</I>&gt;<i> explicit IP address) should come _last_ so that Squid can listen on the
</I>&gt;<i> addresses that remain after 180.97.33.107 and 180.97.33.108 are taken by
</I>&gt;<i> the other two ports?
</I>
I think that is what was meant by &quot;If I switch line1 with line2 and
line3 ..., then only line2 and line3 will get its chance to work, line1
will not work. &quot;

The problem is that TCP does not permit any IP:port combination to have
two simultaneous listening sockets with different parameters. These
configuration lines differ in both address and protocol they are receiving.


houheming:
 you have to use different ports to receive the traffic into Squid.

Since you are using TPROXY there is no requirement for the proxy
listening port to be 443. Squid can listen on any port you want.

This problem should disappear if you set the wildcard port to another
number and update the TPROXY rule which is sending traffic to it.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019486.html">[squid-users] https_port Listen on different IP
</A></li>
	<LI>Next message (by thread): <A HREF="019498.html">[squid-users] https_port Listen on different IP
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19493">[ date ]</a>
              <a href="thread.html#19493">[ thread ]</a>
              <a href="subject.html#19493">[ subject ]</a>
              <a href="author.html#19493">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
