<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] redirect based on url (302)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20redirect%20based%20on%20url%20%28302%29&In-Reply-To=%3Ca2ca5119-39c1-c744-0e8b-6373f7f525a3%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019526.html">
   <LINK REL="Next"  HREF="019589.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] redirect based on url (302)</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20redirect%20based%20on%20url%20%28302%29&In-Reply-To=%3Ca2ca5119-39c1-c744-0e8b-6373f7f525a3%40treenet.co.nz%3E"
       TITLE="[squid-users] redirect based on url (302)">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Oct 23 15:06:03 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019526.html">[squid-users] redirect based on url (302)
</A></li>
        <LI>Next message (by thread): <A HREF="019589.html">[squid-users] redirect based on url (302)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19527">[ date ]</a>
              <a href="thread.html#19527">[ thread ]</a>
              <a href="subject.html#19527">[ subject ]</a>
              <a href="author.html#19527">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 24/10/18 3:31 AM, uppsalanet wrote:
&gt;<i> Thanks Amos for all you help.
</I>&gt;<i> I've done a few of your suggested steps:
</I>&gt;<i> * Create the databas.
</I>&gt;<i> createdb.sql
</I>&gt;<i> &lt;<A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/file/t377569/createdb.sql">http://squid-web-proxy-cache.1019090.n4.nabble.com/file/t377569/createdb.sql</A>&gt;  
</I>&gt;<i> * The acl to fill upp the database with values works fine :-)
</I>&gt;<i> external_acl_type whitelist_add ttl=10 %SRC %&lt;{Location}
</I>&gt;<i> /etc/squid/add2db.pl
</I>&gt;<i> add2db.pl
</I>&gt;<i> &lt;<A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/file/t377569/add2db.pl">http://squid-web-proxy-cache.1019090.n4.nabble.com/file/t377569/add2db.pl</A>&gt;  
</I>&gt;<i> 
</I>&gt;<i> So now i fill up the database with records like this:
</I>&gt;<i> dbdump.txt
</I>&gt;<i> &lt;<A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/file/t377569/dbdump.txt">http://squid-web-proxy-cache.1019090.n4.nabble.com/file/t377569/dbdump.txt</A>&gt;  
</I>&gt;<i> 
</I>&gt;<i> My question is how i get the domains out from it? I don't really under stand
</I>&gt;<i> this part:
</I>&gt;<i>  external_acl_type whitelist ttl=60 %SRC %DST \
</I>&gt;<i>    /usr/lib/squid/ext_session_db_acl \
</I>&gt;<i>    --dsn ... --user ... --password ... \
</I>&gt;<i>    --table sessions --cond &quot;&quot; 
</I>&gt;<i> 
</I>&gt;<i> Do I need to write another script for that
</I>&gt;<i> &quot;/usr/lib/squid/ext_session_db_acl&quot; 
</I>
Nope, Squid should have come with that helper. It may not be at that
exact path though.

All you should have to do now is find where that helper binary actually
is and setup those parameters so it can access your DB.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019526.html">[squid-users] redirect based on url (302)
</A></li>
	<LI>Next message (by thread): <A HREF="019589.html">[squid-users] redirect based on url (302)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19527">[ date ]</a>
              <a href="thread.html#19527">[ thread ]</a>
              <a href="subject.html#19527">[ subject ]</a>
              <a href="author.html#19527">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
