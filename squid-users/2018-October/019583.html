<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Hyper-threading, SSD vs HDD, CentOS vs Ubuntu Server and best performer Squid version
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Hyper-threading%2C%20SSD%20vs%20HDD%2C%0A%20CentOS%20vs%20Ubuntu%20Server%20and%20best%20performer%20Squid%20version&In-Reply-To=%3Ca5ab9e33-5bf6-8d00-b881-0e66f456794e%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019579.html">
   <LINK REL="Next"  HREF="019581.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Hyper-threading, SSD vs HDD, CentOS vs Ubuntu Server and best performer Squid version</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Hyper-threading%2C%20SSD%20vs%20HDD%2C%0A%20CentOS%20vs%20Ubuntu%20Server%20and%20best%20performer%20Squid%20version&In-Reply-To=%3Ca5ab9e33-5bf6-8d00-b881-0e66f456794e%40measurement-factory.com%3E"
       TITLE="[squid-users] Hyper-threading, SSD vs HDD, CentOS vs Ubuntu Server and best performer Squid version">rousskov at measurement-factory.com
       </A><BR>
    <I>Mon Oct 29 16:07:06 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019579.html">[squid-users] Hyper-threading, SSD vs HDD, CentOS vs Ubuntu Server and best performer Squid version
</A></li>
        <LI>Next message (by thread): <A HREF="019581.html">[squid-users] ERROR The requested URL could not be retrieved
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19583">[ date ]</a>
              <a href="thread.html#19583">[ thread ]</a>
              <a href="subject.html#19583">[ subject ]</a>
              <a href="author.html#19583">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/28/18 4:13 PM, manuelfgarcia wrote:
&gt;<i> According to <A HREF="https://wiki.squid-cache.org/BestOsForSquid">https://wiki.squid-cache.org/BestOsForSquid</A> :
</I>&gt;<i> &quot;CPU speed and core count:
</I>&gt;<i> few faster cores are better than many slow cores. SMP Squid can currently
</I>&gt;<i> operate most efficiently with 4-8 cores of 3GHz or more. multi-tenant
</I>&gt;<i> installations are better for machinery with very many cores.
</I>&gt;<i> only the physical cores are useful, hyper-threaded &quot;cores&quot; can actually be
</I>&gt;<i> worse.
</I>
&gt;<i> Is that statement still up to date or is is it no longer the case from any
</I>&gt;<i> specific version of Squid?
</I>
There are several statements in &quot;that statement&quot;:

* The statement about fewer faster cores being better can be true or
false for SMP Squids, depending on how much fewer and how much faster
those cores are. That statement should be removed or toned down IMO.

* The statement that only the physical cores are useful is bogus.
Virtual cores can be useful in some environments. For busy systems with
many cores, it is usually a bad idea to put multiple busy processes
(e.g., Squid workers) on one physical core, but that does not mean that
ignoring or disabling virtual cores is always a good idea. The optimal
process:core mapping depends on many factors.

* The statement about hyperthreading sometimes leading to worse
performance is still correct. Improper use of hyperthreading can
decrease performance compared to disabling hyperthreading. However, that
does not mean one should always disable hyperthreading.

The above applies to all modern Squids.


&gt;<i> Considering the statement that &quot;hyper-threaded &quot;cores&quot; can actually be
</I>&gt;<i> worse.&quot;, what is supposed to handle faster and concurrent connections on
</I>&gt;<i> reverse proxy mode?:
</I>&gt;<i> - Intel Xeon X3430 (2.40GHz, 2,80 GHz turbo, 4 physical cores, 4 threads)
</I>&gt;<i> vs.
</I>&gt;<i> - Intel Xeon E3-1230-V6 3.40GHz (3.50 GHz, 3.90 GHz, 4 physical cores, 8
</I>&gt;<i> threads)
</I>
In most cases, it is not so much the _presence_ of virtual cores that
matters. It is whether you overload physical cores by placing too many
busy processes on them. Thus, if each of the two machines is correctly
configured/optimized, then I would bet on E3-1230-V6 because it has the
same number of physical cores but they are faster.


&gt;<i> On another note, what is supposed to handle faster and more concurrent
</I>&gt;<i> connections on reverse proxy mode between these options?:
</I>&gt;<i> 
</I>&gt;<i> - SSD vs HDD
</I>
SSD if disk I/O is a bottleneck.


&gt;<i> - CentOS 7 vs CentOS 6 vs Ubuntu Server 16.04 vs Ubuntu Server 18.04
</I>
I would not expect a huge difference if each is properly configured and
tuned, but we have not compared these four in our lab.


&gt;<i> - Squid 3.1 vs 3.5 vs 4.x...
</I>
Squid v2 :-). If you are selecting a Squid version based primarily on
its speed, you will probably regret your choice. My suggestion is to
avoid Squid v3.1 in all cases and use Squid v4 if you can.


HTH,

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019579.html">[squid-users] Hyper-threading, SSD vs HDD, CentOS vs Ubuntu Server and best performer Squid version
</A></li>
	<LI>Next message (by thread): <A HREF="019581.html">[squid-users] ERROR The requested URL could not be retrieved
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19583">[ date ]</a>
              <a href="thread.html#19583">[ thread ]</a>
              <a href="subject.html#19583">[ subject ]</a>
              <a href="author.html#19583">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
