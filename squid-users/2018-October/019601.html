<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] bank blocked
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20bank%20blocked&In-Reply-To=%3C8b9b194a-f249-0c96-12a9-971227fa4766%40urlfilterdb.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019600.html">
   <LINK REL="Next"  HREF="019604.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] bank blocked</H1>
    <B>Marcus Kool</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20bank%20blocked&In-Reply-To=%3C8b9b194a-f249-0c96-12a9-971227fa4766%40urlfilterdb.com%3E"
       TITLE="[squid-users] bank blocked">marcus.kool at urlfilterdb.com
       </A><BR>
    <I>Wed Oct 31 15:01:09 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019600.html">[squid-users] bank blocked
</A></li>
        <LI>Next message (by thread): <A HREF="019604.html">[squid-users] Ubuntu 18 LTS repository for Squid 4.4 (rebuilt with sslbump support from sources in Debian unstable)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19601">[ date ]</a>
              <a href="thread.html#19601">[ thread ]</a>
              <a href="subject.html#19601">[ subject ]</a>
              <a href="author.html#19601">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>When there is an issue with a certificate, it is good practice to go to ssllabs to verify what is going on.

<A HREF="https://www.ssllabs.com/ssltest/analyze.html?d=i.bps%2dsberbank.by&amp;hideResults=on&amp;latest">https://www.ssllabs.com/ssltest/analyze.html?d=i.bps%2dsberbank.by&amp;hideResults=on&amp;latest</A>
shows that there is an incomplete certificate chain issue (in orange) which means that the server of the bank does not send all (intermediate) certificates.
Click on the blue '+' of certification paths and it shows that the 'GeoTrust RSA CA 2018' (intermediate certificate) had to be downloaded.

The messages are not from Squid but from ufdbGuard which apparently is configured with an option to block the URL is case of a certificate issue.
Since Squid already checks for valid certificate chains, I suggest to turn this option off in ufdbGuard.

Marcus


On 31/10/2018 11:48, Vacheslav wrote:
&gt;<i> I do not use bump or splice if that is what you mean. I do not import certificates.. it works without proxy.
</I>&gt;<i> 
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; On Behalf Of Matus UHLAR - fantomas
</I>&gt;<i> Sent: Wednesday, October 31, 2018 5:46 PM
</I>&gt;<i> To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> Subject: Re: [squid-users] bank blocked
</I>&gt;<i> 
</I>&gt;<i> On 31.10.18 17:41, Vacheslav wrote:
</I>&gt;&gt;<i> 2018-10-31 17:34:45 [4270] TLSv1.2 certificate for i.bps-sberbank.by:443: UNRECOGNISED ISSUER  (maybe a certificate chain issue)  *****
</I>&gt;&gt;<i> 2018-10-31 17:34:45 [4270]    issuer: /C=US/O=DigiCert Inc/OU=www.digicert.com/CN=GeoTrust RSA CA 2018
</I>&gt;<i> 
</I>&gt;<i> does your system recopgnize this authority? Do have actual list of CAs?
</I>&gt;<i> 
</I>&gt;&gt;<i> 2018-10-31 17:34:45 [4270]    subject: /C=BY/L=Minsk/O=BPS-Sberbank OAO/OU=Head Office/CN=*.bps-sberbank.by
</I>&gt;&gt;<i> 2018-10-31 17:34:45 [4270] TLSv1.2 connection to i.bps-sberbank.by:443 has error code 12. It is marked as a TLS/SSL certificate issue
</I>&gt;&gt;<i> 2018-10-31 17:34:45 [4270] BLOCK -                10.17.10.17     config     https-option  i.bps-sberbank.by:443 CONNECT
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> What is wrong?
</I>&gt;<i> 
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019600.html">[squid-users] bank blocked
</A></li>
	<LI>Next message (by thread): <A HREF="019604.html">[squid-users] Ubuntu 18 LTS repository for Squid 4.4 (rebuilt with sslbump support from sources in Debian unstable)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19601">[ date ]</a>
              <a href="thread.html#19601">[ thread ]</a>
              <a href="subject.html#19601">[ subject ]</a>
              <a href="author.html#19601">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
