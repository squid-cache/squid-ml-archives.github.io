<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid and DNS
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20and%20DNS&In-Reply-To=%3C000401d445a4%241ec7a320%245c56e960%24%40yahoo.com.ar%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019138.html">
   <LINK REL="Next"  HREF="019142.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid and DNS</H1>
    <B>Julian Perconti</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20and%20DNS&In-Reply-To=%3C000401d445a4%241ec7a320%245c56e960%24%40yahoo.com.ar%3E"
       TITLE="[squid-users] Squid and DNS">vh1988 at yahoo.com.ar
       </A><BR>
    <I>Thu Sep  6 05:40:25 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019138.html">[squid-users] Radius and Squid transparent mode
</A></li>
        <LI>Next message (by thread): <A HREF="019142.html">[squid-users] Squid and DNS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19140">[ date ]</a>
              <a href="thread.html#19140">[ thread ]</a>
              <a href="subject.html#19140">[ subject ]</a>
              <a href="author.html#19140">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

&quot;I discovered&quot; that if I use more than one *local* dns server/resolver, when
I use squid HTTPS, there are some problems accesing to the web.

For example:

I have a squid with TLS support in server &quot;B&quot;; the gateway and resolver of
the server &quot;B&quot; is server &quot;A&quot; and the server &quot;A&quot; has bind installed and
multiple or at least one (local) dns forwarders. (djbdns)

In this scenario squid; takes a long time to load some sites like Dropbox,
Twitter, (if it load succesfull, other times does not load in anyway).

If I remove the forwarders (local always, never publics one like 8.8.8.8) in
server &quot;A&quot;, the problem disappears.

In this scenario, the dns forwarders in server &quot;A&quot; is not being directly
used by the clients nor squid (they are forwarders for bind in server &quot;A&quot;),
e.g. browsing by server &quot;B&quot; (squid) an resolving domains via server &quot;A&quot; with
forwarders.

So, the question: How can I use multiple DNS caching resolvers/server (local
or remote) like bind/djbdns without the issue mentioned above?

Is mandatory for squid to use only 1 dns/caching nameserver?

From: <A HREF="https://wiki.squid-cache.org/KnowledgeBase/HostHeaderForgery">https://wiki.squid-cache.org/KnowledgeBase/HostHeaderForgery</A>

&gt;<i>ensure that the DNS servers Squid uses are the same as those used by the
</I>client(s). 
&gt;<i>Certain popular CDN hosting networks use load balancing systems to
</I>determine which website IPs to return in the DNS query response. These are
based on the querying DNS resolvers IP. If Squid &gt;and the client are using
different resolvers there is an increased chance of different results being
given. Which can lead to this alert


Thank You in advance!


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019138.html">[squid-users] Radius and Squid transparent mode
</A></li>
	<LI>Next message (by thread): <A HREF="019142.html">[squid-users] Squid and DNS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19140">[ date ]</a>
              <a href="thread.html#19140">[ thread ]</a>
              <a href="subject.html#19140">[ subject ]</a>
              <a href="author.html#19140">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
