<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid and DNS
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20and%20DNS&In-Reply-To=%3C20180906072243.GA9867%40fantomas.sk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019140.html">
   <LINK REL="Next"  HREF="019144.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid and DNS</H1>
    <B>Matus UHLAR - fantomas</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20and%20DNS&In-Reply-To=%3C20180906072243.GA9867%40fantomas.sk%3E"
       TITLE="[squid-users] Squid and DNS">uhlar at fantomas.sk
       </A><BR>
    <I>Thu Sep  6 07:22:43 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019140.html">[squid-users] Squid and DNS
</A></li>
        <LI>Next message (by thread): <A HREF="019144.html">[squid-users] Squid and DNS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19142">[ date ]</a>
              <a href="thread.html#19142">[ thread ]</a>
              <a href="subject.html#19142">[ subject ]</a>
              <a href="author.html#19142">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 06.09.18 02:40, Julian Perconti wrote:
&gt;<i>&quot;I discovered&quot; that if I use more than one *local* dns server/resolver, when
</I>&gt;<i>I use squid HTTPS, there are some problems accesing to the web.
</I>
&gt;<i>I have a squid with TLS support in server &quot;B&quot;; the gateway and resolver of
</I>&gt;<i>the server &quot;B&quot; is server &quot;A&quot; and the server &quot;A&quot; has bind installed and
</I>&gt;<i>multiple or at least one (local) dns forwarders. (djbdns)
</I>
&gt;<i>If I remove the forwarders (local always, never publics one like 8.8.8.8) in
</I>&gt;<i>server &quot;A&quot;, the problem disappears.
</I>
&gt;<i>In this scenario, the dns forwarders in server &quot;A&quot; is not being directly
</I>&gt;<i>used by the clients nor squid (they are forwarders for bind in server &quot;A&quot;),
</I>&gt;<i>e.g. browsing by server &quot;B&quot; (squid) an resolving domains via server &quot;A&quot; with
</I>&gt;<i>forwarders.
</I>
what do you mean forwarders? You need to send query to a DNS server that
makes the resolution.

It's OK when you have squid configured on server &quot;B&quot; and DNS on server &quot;A&quot;
and squid uses server &quot;A&quot; for resolution.

However, your repeated usage of word &quot;forwarders&quot; indicates there is
something broken in the configuration on server &quot;A&quot;.

&gt;<i>So, the question: How can I use multiple DNS caching resolvers/server (local
</I>&gt;<i>or remote) like bind/djbdns without the issue mentioned above?
</I>
do not use djbdns. ever.

simply configure bind on server &quot;A&quot;, allow it to provide recursion for
server &quot;B&quot; and that's all. Forget forwarders.


&gt;<i>Is mandatory for squid to use only 1 dns/caching nameserver?
</I>
usually, people have multiple DNS servers configured to fail over in case
one of them fails.
in some cases, client can balance the load, or prefer server with faster
responses.

There should be no problem of this kind, unless one of your DNS servers is
broken.


-- 
Matus UHLAR - fantomas, <A HREF="https://lists.squid-cache.org/listinfo/squid-users">uhlar at fantomas.sk</A> ; <A HREF="http://www.fantomas.sk/">http://www.fantomas.sk/</A>
Warning: I wish NOT to receive e-mail advertising to this address.
Varovanie: na tuto adresu chcem NEDOSTAVAT akukolvek reklamnu postu.
There's a long-standing bug relating to the x86 architecture that
allows you to install Windows.   -- Matthew D. Fuller

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019140.html">[squid-users] Squid and DNS
</A></li>
	<LI>Next message (by thread): <A HREF="019144.html">[squid-users] Squid and DNS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19142">[ date ]</a>
              <a href="thread.html#19142">[ thread ]</a>
              <a href="subject.html#19142">[ subject ]</a>
              <a href="author.html#19142">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
