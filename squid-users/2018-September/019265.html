<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Help: squid restarts and squidGuard die
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Help%3A%20squid%20restarts%20and%20squidGuard%20die&In-Reply-To=%3Cbceeb9cf-128a-79e7-8fc4-e31e9c0e27c9%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019258.html">
   <LINK REL="Next"  HREF="019266.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Help: squid restarts and squidGuard die</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Help%3A%20squid%20restarts%20and%20squidGuard%20die&In-Reply-To=%3Cbceeb9cf-128a-79e7-8fc4-e31e9c0e27c9%40treenet.co.nz%3E"
       TITLE="[squid-users] Help: squid restarts and squidGuard die">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Sep 20 11:46:14 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019258.html">[squid-users] Help: squid restarts and squidGuard die
</A></li>
        <LI>Next message (by thread): <A HREF="019266.html">[squid-users] Help: squid restarts and squidGuard die
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19265">[ date ]</a>
              <a href="thread.html#19265">[ thread ]</a>
              <a href="subject.html#19265">[ subject ]</a>
              <a href="author.html#19265">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 19/09/18 11:49 PM, Marcus Kool wrote:
&gt;<i> 
</I>&gt;<i> On 18/09/18 23:03, Amos Jeffries wrote:
</I>&gt;&gt;<i> On 19/09/18 1:54 AM, neok wrote:
</I>&gt;&gt;&gt;<i> Thank you very much Amos for putting me in the right direction.
</I>&gt;&gt;&gt;<i> I successfully carried out the modifications you indicated to me.
</I>&gt;&gt;&gt;<i> Regarding ufdbGuard, if I understood correctly, what you recommend is
</I>&gt;&gt;&gt;<i> to use
</I>&gt;&gt;&gt;<i> the ufdbConvertDB tool to convert my blacklists in plain text to the
</I>&gt;&gt;&gt;<i> ufdbGuard database format? And then use that/those databases in
</I>&gt;&gt;&gt;<i> normal squid
</I>&gt;&gt;&gt;<i> ACL's?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> No, ufdbguard is a fork of SquidGuard that can be used as a drop-in
</I>&gt;&gt;<i> replacement which works better while you improve your config.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> You should work towards less complexity. Squid / squid.conf is where
</I>&gt;&gt;<i> HTTP access control takes place. The helper is about re-writing the URL
</I>&gt;&gt;<i> (only) - which is a complex and destructive process.
</I>&gt;<i> 
</I>&gt;<i> ufdbGuard is a simple tool that has the same syntax in its configuration
</I>&gt;<i> file as squidGuard has.
</I>&gt;<i> It is far from complex, has a great Reference Manual, exmaple config
</I>&gt;<i> file and a responsive support desk.
</I>&gt;<i> Amos, I have never seen you calling a URL writer being a complex and
</I>&gt;<i> destructive process.&#160; What do you mean?
</I>
Re-writing requires Squid to:
 * fork external helpers, and
 * maintain queues of lookups to those helpers, and
 * maintain cache of helper responses, and
 * maintain a whole extra copy of HTTP-request state, and
 * copy some (not all) of that state info between the two &quot;client&quot; requests.

 ... lots of complexity, memory, CPU time, traffic latency, etc.

Also when used for access control (re-write to an &quot;error&quot; URL) the
re-write helper needs extra complexity in itself to act as the altered
origin server for error pages, or have some fourth-party web server.


&gt;<i> 
</I>&gt;<i> URL rewriters have been used for decades for HTTP access control but you
</I>&gt;<i> state &quot;squid.conf is where HTTP access control takes place&quot;.
</I>
Once upon a time, back at the dawn of the WWW (before the 1990s) Squid
lacked external_acl_type and modular ACLs.

That persisted for the first decade or so of Squid's life, with only the
re-write API for admin to use for complicated permissions.

Then one day about 2 decades or so ago, external ACL was added and the
ACLs were also made much easier to implement and plug in new checks.
Today we have hundreds of native ACLs and even a selection of custom ACL
helpers. Making the need for these abuses of the poor re-writers.

Old habits and online tutorials however are hard to get rid of.


&gt;<i> Are you saying that you want it is the _only_ place for HTTP access
</I>&gt;<i> control?
</I>

I'm saying the purpose of the url_rewrite_* API in Squid is to tell
Squid whether the URL (only) needs some mangling in order for the
server/origin to understand it.
 It can re-write transparently with all the problems that causes to
security scopes and URL sync between the endpoints. Or redirect the
client to the &quot;correct&quot; URL.


The Squid http_access and similar *access controls* are the place for
access control - hint is in the naming. With external ACL type for
anything Squid does not support natively or well. As Flashdown mentioned
even calls to SquidGuard etc. can be wrapped and used as external ACLs.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019258.html">[squid-users] Help: squid restarts and squidGuard die
</A></li>
	<LI>Next message (by thread): <A HREF="019266.html">[squid-users] Help: squid restarts and squidGuard die
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19265">[ date ]</a>
              <a href="thread.html#19265">[ thread ]</a>
              <a href="subject.html#19265">[ subject ]</a>
              <a href="author.html#19265">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
