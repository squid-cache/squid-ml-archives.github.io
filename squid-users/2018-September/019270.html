<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Is there any way to cache or forward https requests to an http proxy using Squid?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Is%20there%20any%20way%20to%20cache%20or%20forward%20https%0A%20requests%20to%20an%20http%20proxy%20using%20Squid%3F&In-Reply-To=%3Cc163d8cb-31be-5b5d-4c0c-0c876811ce4b%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019269.html">
   <LINK REL="Next"  HREF="019274.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Is there any way to cache or forward https requests to an http proxy using Squid?</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Is%20there%20any%20way%20to%20cache%20or%20forward%20https%0A%20requests%20to%20an%20http%20proxy%20using%20Squid%3F&In-Reply-To=%3Cc163d8cb-31be-5b5d-4c0c-0c876811ce4b%40measurement-factory.com%3E"
       TITLE="[squid-users] Is there any way to cache or forward https requests to an http proxy using Squid?">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Sep 20 19:47:16 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019269.html">[squid-users] Is there any way to cache or forward https requests to an http proxy using Squid?
</A></li>
        <LI>Next message (by thread): <A HREF="019274.html">[squid-users] Is there any way to cache or forward https requests to an http proxy using Squid?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19270">[ date ]</a>
              <a href="thread.html#19270">[ thread ]</a>
              <a href="subject.html#19270">[ subject ]</a>
              <a href="author.html#19270">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 09/20/2018 12:36 PM, Brett wrote:
&gt;<i> I currently have squid setup to use a self-signed certificate for MITM to
</I>&gt;<i> cache HTTPS requests. This works. [...]
</I>
&gt;<i> Is there a way I can configure squid so I can specify
</I>&gt;<i> it as a proxy for an https request and then have it act as a cache or
</I>&gt;<i> forward to an HTTP proxy (that supports CONNECT)?
</I>
AFAICT, you are asking about the missing &quot;SslBump with cache_peer&quot;
feature, which was covered in several recent threads, including this email:

<A HREF="http://lists.squid-cache.org/pipermail/squid-users/2018-July/018653.html">http://lists.squid-cache.org/pipermail/squid-users/2018-July/018653.html</A>


&gt;<i> ssl_bump peek step1
</I>&gt;<i> ssl_bump bump all
</I>
This configuration bumps everything at step2.


&gt;<i> If I change the ssl_bump directives above to the following:
</I>
&gt;<i> ssl_bump stare step2
</I>&gt;<i> ssl_bump bump step3
</I>
This (misleading!) configuration should splice everything at step1. In
other words, it should be equivalent to this (clear) configuration:

  ssl_bump splice all

or a disabled SslBump. According to your tests, that is exactly what
happens (and the lack of non-trivial SslBump involvement probably
explains why peering works in this corner case).


If you need more information about the equivalence of the last two
configurations, please consider studying the following wiki page and a
related recent email thread:

* <A HREF="https://wiki.squid-cache.org/Features/SslPeekAndSplice">https://wiki.squid-cache.org/Features/SslPeekAndSplice</A>
*
<A HREF="http://lists.squid-cache.org/pipermail/squid-users/2018-September/019162.html">http://lists.squid-cache.org/pipermail/squid-users/2018-September/019162.html</A>


HTH,

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019269.html">[squid-users] Is there any way to cache or forward https requests to an http proxy using Squid?
</A></li>
	<LI>Next message (by thread): <A HREF="019274.html">[squid-users] Is there any way to cache or forward https requests to an http proxy using Squid?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19270">[ date ]</a>
              <a href="thread.html#19270">[ thread ]</a>
              <a href="subject.html#19270">[ subject ]</a>
              <a href="author.html#19270">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
