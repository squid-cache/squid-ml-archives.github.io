<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Help: squid restarts and squidGuard die
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Help%3A%20squid%20restarts%20and%20squidGuard%20die&In-Reply-To=%3C5dea5687-93e5-da6f-73d8-2e8b78578325%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019294.html">
   <LINK REL="Next"  HREF="019259.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Help: squid restarts and squidGuard die</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Help%3A%20squid%20restarts%20and%20squidGuard%20die&In-Reply-To=%3C5dea5687-93e5-da6f-73d8-2e8b78578325%40treenet.co.nz%3E"
       TITLE="[squid-users] Help: squid restarts and squidGuard die">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Sep 25 00:48:02 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019294.html">[squid-users] Help: squid restarts and squidGuard die
</A></li>
        <LI>Next message (by thread): <A HREF="019259.html">[squid-users] Help: squid restarts and squidGuard die
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19298">[ date ]</a>
              <a href="thread.html#19298">[ thread ]</a>
              <a href="subject.html#19298">[ subject ]</a>
              <a href="author.html#19298">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 25/09/18 7:07 AM, Marcus Kool wrote:
&gt;<i> The sub-thread starts with &quot;do not use the url rewriter helper because
</I>&gt;<i> of complexity&quot;
</I>
The thread started earlier than that, with essentially &quot;move simple
rules to squid.conf&quot;

On 18/09/18 6:38 AM, Amos Jeffries wrote:
&gt;<i>
</I>&gt;<i> I recommend you convert as many of your filtering rules as you can into
</I>&gt;<i> normal Squid ACLs. Traffic which is being blocked for simple reasons can
</I>&gt;<i> be done much more efficiently by Squid than a helper.
</I>&gt;<i>
</I>
The statement about the helper being complex came later after a
misunderstanding by the OP about what the tools were used for.

You are paraphrasing in a way which changes the meaning of my actual
statement. I was clearly and explicitly advising the OP to work towards
&quot;less complexity&quot; and pointing out that the helper (any helper) is
complex and to be avoided when a simpler solution is also available.


&gt;<i> and ends with that the (not less complex) external acl helpers are fine
</I>&gt;<i> to use.
</I>
They are ... when needed. Having them do everything from src-IP check to
re-authenticating a login Squid already authenticated passed it is
needless extra complexity as a long-term solution.


&gt;<i> And in between there is an attempt to kill the URL rewriter interface.
</I>&gt;<i> 
</I>
No, just the use of the rewriters for access control. In the context of
an OP who is using a rewriter for a fairly simple set of blacklist and
whitelist of traffic - which got diverted into a debate of Squid vs
re-writer feature comparisons.

You brought up the topic of removing the interface. As I responded then,
there are still use-cases for it. Just, access control is not one of
those cases.


&gt;<i> It would be a lot less confusing if you started with something like
</I>&gt;<i> &#160;&#160; I do not like the URL rewriter interface, use the external acl one
</I>&gt;<i> 
</I>
That would be only a small amount better (improvement in principle, no
longer destructive for the state lost when re-writing - still complex in
practice). I am pointing the OP at something that should work a bit
better than even that semi-theoretical improvement. They may or may not
end up with a helper still being used, but either way re-assessing this
1980's style config will improve their situation for modern traffic.


&gt;&gt;&gt;<i> ufdbGuard supports dynamic lists of users, domains and source ip
</I>&gt;&gt;&gt;<i> addresses which are updated every X minutes without any service
</I>&gt;&gt;&gt;<i> interruption.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> So does Squid, via external ACL and/or authentication.
</I>&gt;<i> 
</I>&gt;<i> Aren't you confusing what Squid itself and what Squid+helpers can do?
</I>
There is crossover. Though we are delving into realms of principle here.
The data available to the helper running on the URL-rewrite interface is
quite limited - the other interfaces (external ACL in particular) have
wider scope and much more flexibility in what Squid can do with them.

For example SG and ufdbguard may be able to load dynamic lists of users,
but cannot make Squid generate authentication challenge with the correct
parameters to authenticate those users. They can only re-check an
already authenticated username (without access to the password details)
or rewrite/redirect to a third-party server that does so.
 Whereas looking up users in some &quot;dynamic list&quot; without needing a
reconfigure of Squid is pretty much the essence of what auth user/group
helpers do. It is rare to find a never-changing list of users.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019294.html">[squid-users] Help: squid restarts and squidGuard die
</A></li>
	<LI>Next message (by thread): <A HREF="019259.html">[squid-users] Help: squid restarts and squidGuard die
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19298">[ date ]</a>
              <a href="thread.html#19298">[ thread ]</a>
              <a href="subject.html#19298">[ subject ]</a>
              <a href="author.html#19298">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
