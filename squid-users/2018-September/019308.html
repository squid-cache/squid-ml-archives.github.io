<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Fetch missing certificate feature of Squid_v4
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Fetch%20missing%20certificate%20feature%20of%20Squid_v4&In-Reply-To=%3Cb2292743-03b5-c7dd-d1a2-382274f5f251%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019306.html">
   <LINK REL="Next"  HREF="019309.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Fetch missing certificate feature of Squid_v4</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Fetch%20missing%20certificate%20feature%20of%20Squid_v4&In-Reply-To=%3Cb2292743-03b5-c7dd-d1a2-382274f5f251%40measurement-factory.com%3E"
       TITLE="[squid-users] Fetch missing certificate feature of Squid_v4">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Sep 27 16:32:34 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019306.html">[squid-users] Fetch missing certificate feature of Squid_v4
</A></li>
        <LI>Next message (by thread): <A HREF="019309.html">[squid-users] Fetch missing certificate feature of Squid_v4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19308">[ date ]</a>
              <a href="thread.html#19308">[ thread ]</a>
              <a href="subject.html#19308">[ subject ]</a>
              <a href="author.html#19308">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 09/27/2018 09:56 AM, Christof Gerber wrote:
&gt;<i> Concerning the new feature which fetches the missing intermediate
</I>&gt;<i> certificates I have three questions about its implementation and
</I>&gt;<i> implications:
</I>
&gt;<i> 1. What happens if the certificate fetch requests runs into a timeout?
</I>
If Squid lacks a certificate required to validate the server, the server
validation will fail. What happens after that probably depends on your
configuration, but bumping the client connection to report the
validation error is typical for SslBump-driven deployments.


&gt;<i> Is this prevented somehow?
</I>
Not sure what you mean: No software can prevent external events such as
I/O timeouts.


&gt;<i> 2. Does Squid also learn intermediate certificates from complete
</I>&gt;<i> certificate chains of other requests?
</I>
Interesting question. AFAIK, Squid does not cache certificates received
in TLS server Hellos (yet?). The missing certificates are fetched and
cached using the regular Squid HTTP fetching/caching mechanism (as if
somebody else sent a simple GET request for the certificate). There is
no dedicated cache type/system for the certificates. This implies that
the same intermediate certificate, if it was fetched from two different
places/URLs, will be cached twice (by default).

I have CCed Christos that may be able to verify my statements in the
above paragraph.


&gt;<i> 3. Will this feature make it necessary to increase the cache size?
</I>
YMMV. By definition, the cache should never be necessary (i.e. required
for correct operation). You should increase the cache size if increasing
the cache size improves performance. This general statement applies to
all features, not just the feature discussed on this thread, of course.

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019306.html">[squid-users] Fetch missing certificate feature of Squid_v4
</A></li>
	<LI>Next message (by thread): <A HREF="019309.html">[squid-users] Fetch missing certificate feature of Squid_v4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19308">[ date ]</a>
              <a href="thread.html#19308">[ thread ]</a>
              <a href="subject.html#19308">[ subject ]</a>
              <a href="author.html#19308">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
