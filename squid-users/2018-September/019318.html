<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] negotiate_kerberos_auth: ERROR
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20negotiate_kerberos_auth%3A%20ERROR&In-Reply-To=%3C1492e874-ba5a-d1bc-7b9d-87d54be92981%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019316.html">
   <LINK REL="Next"  HREF="019322.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] negotiate_kerberos_auth: ERROR</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20negotiate_kerberos_auth%3A%20ERROR&In-Reply-To=%3C1492e874-ba5a-d1bc-7b9d-87d54be92981%40treenet.co.nz%3E"
       TITLE="[squid-users] negotiate_kerberos_auth: ERROR">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Sep 28 23:28:56 UTC 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019316.html">[squid-users] negotiate_kerberos_auth: ERROR
</A></li>
        <LI>Next message (by thread): <A HREF="019322.html">[squid-users] want to change squid name
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19318">[ date ]</a>
              <a href="thread.html#19318">[ thread ]</a>
              <a href="subject.html#19318">[ subject ]</a>
              <a href="author.html#19318">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 29/09/18 7:51 AM, neok wrote:
&gt;<i> Hello people, in general terms my proxy works quite well. However I tell you
</I>&gt;<i> that very eventually, (maybe about 10 times per day based on 15 users using
</I>&gt;<i> my test proxy) I get this error in cache.log:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> negotiate_kerberos_auth.cc(180): pid=21573 :2018/09/28 14:42:25|
</I>&gt;<i> negotiate_kerberos_auth: ERROR: gss_accept_sec_context() failed: Unspecified
</I>&gt;<i> GSS failure.  Minor code may provide more information. Request is a replay
</I>&gt;<i> 2018/09/28 14:42:25 kid1| ERROR: Negotiate Authentication validating user.
</I>&gt;<i> Result: {result=BH, notes={message: gss_accept_sec_context() failed:
</I>&gt;<i> Unspecified GSS failure.  Minor code may provide more information. Request
</I>&gt;<i> is a replay; }}
</I>&gt;<i> negotiate_kerberos_auth.cc(180): pid=21573 :2018/09/28 14:42:26|
</I>&gt;<i> negotiate_kerberos_auth: ERROR: gss_accept_sec_context() failed: Unspecified
</I>&gt;<i> GSS failure.  Minor code may provide more information. Request is a replay
</I>&gt;<i> 2018/09/28 14:42:26 kid1| ERROR: Negotiate Authentication validating user.
</I>&gt;<i> Result: {result=BH, notes={message: gss_accept_sec_context() failed:
</I>&gt;<i> Unspecified GSS failure.  Minor code may provide more information. Request
</I>&gt;<i> is a replay; }}
</I>&gt;<i> 
</I>&gt;<i> I've browse several hours without finding out what causes this error, or if
</I>&gt;<i> it's serious, or if I should ignore it.
</I>
It is serious.

&gt;<i> Could someone with more experience tell me if it's possible what could be
</I>&gt;<i> the reason for this error?
</I>
&quot;Request is a replay&quot;, aka &quot;token replay attack&quot;.

The client is sending a credentials token which has already been used on
another connection. Such clients are either fatally broken, or malicious.

Negotiate and NTLM credentials authenticate the specific TCP connection
they are used on. They are not permitted to be re-used on other
connections nor changed once authenticated.


PS. please upgrade if you can, there are security issues with 3.5.23 and
older releases. Eliezer provides updated CentOS packages for more recent
Squid versions (see &lt;<A HREF="https://wiki.squid-cache.org/KnowledgeBase/CentOS">https://wiki.squid-cache.org/KnowledgeBase/CentOS</A>&gt;).

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019316.html">[squid-users] negotiate_kerberos_auth: ERROR
</A></li>
	<LI>Next message (by thread): <A HREF="019322.html">[squid-users] want to change squid name
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19318">[ date ]</a>
              <a href="thread.html#19318">[ thread ]</a>
              <a href="subject.html#19318">[ subject ]</a>
              <a href="author.html#19318">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
