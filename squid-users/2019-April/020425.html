<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] How to restrict the maximum negotiated version of squid HTTPS to TLS1.2
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20restrict%20the%20maximum%20negotiated%20version%20of%0A%20squid%20HTTPS%20to%20TLS1.2&In-Reply-To=%3Ca35ce939-5eea-e965-371f-69da02a619c8%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020424.html">
   <LINK REL="Next"  HREF="020440.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] How to restrict the maximum negotiated version of squid HTTPS to TLS1.2</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20restrict%20the%20maximum%20negotiated%20version%20of%0A%20squid%20HTTPS%20to%20TLS1.2&In-Reply-To=%3Ca35ce939-5eea-e965-371f-69da02a619c8%40treenet.co.nz%3E"
       TITLE="[squid-users] How to restrict the maximum negotiated version of squid HTTPS to TLS1.2">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Apr  2 05:07:22 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020424.html">[squid-users] How to restrict the maximum negotiated version of squid HTTPS to TLS1.2
</A></li>
        <LI>Next message (by thread): <A HREF="020440.html">[squid-users] How to restrict the maximum negotiated version of squid HTTPS to TLS1.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20425">[ date ]</a>
              <a href="thread.html#20425">[ thread ]</a>
              <a href="subject.html#20425">[ subject ]</a>
              <a href="author.html#20425">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2/04/19 2:10 pm, &#36213; &#20426; wrote:
&gt;<i> Hi, this is part of my squid.conf:
</I>&gt;<i> https_port 192.168.30.4:3129 intercept ssl-bump connection-auth=off
</I>&gt;<i> generate-host-certificates=on dynamic_cert_mem_cache_size=4MB
</I>&gt;<i> cert=/opt/squid/ssl_cert/CA.pem sslflags=NO_DEFAULT_CA&#160;
</I>&gt;<i> 
</I>&gt;<i> acl broken_sites ssl::server_name foo.com&#160;
</I>&gt;<i> acl ssl_step1 at_step SslBump1
</I>&gt;<i> 
</I>&gt;<i> ssl_bump peek ssl_step1
</I>&gt;<i> ssl_bump bump broken_sites
</I>&gt;<i> ssl_bump splice all
</I>&gt;<i> 
</I>&gt;<i> so how to restrict the maximum negotiated version of squid HTTPS to TLS1.2?
</I>

That is not possible without patching Squid. Only versions up to TLS/1.2
can be controlled by any published Squid.


&gt;<i> I also try configure like this:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> https_port 192.168.30.4:3129 intercept ssl-bump connection-auth=off
</I>&gt;<i> generate-host-certificates=on dynamic_cert_mem_cache_size=4MB
</I>&gt;<i> cert=/opt/squid/ssl_cert/CA.pem&#160; version=4&#160;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> it did not work.
</I>&gt;<i> 
</I>
The deprecated 'version=4' setting means TLS/*1.0* only.

&gt;<i> the access.log show TCP/TUNNEL 200
</I>&gt;<i> 
</I>
That indicates that the protocol arriving from the client is probably
not TLS or SSL in any form, but some other protocol. If that is true
then no matter what you set for TLS versions allowed it will always tunnel.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020424.html">[squid-users] How to restrict the maximum negotiated version of squid HTTPS to TLS1.2
</A></li>
	<LI>Next message (by thread): <A HREF="020440.html">[squid-users] How to restrict the maximum negotiated version of squid HTTPS to TLS1.2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20425">[ date ]</a>
              <a href="thread.html#20425">[ thread ]</a>
              <a href="subject.html#20425">[ subject ]</a>
              <a href="author.html#20425">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
