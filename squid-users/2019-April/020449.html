<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 4 ssl_bump issue
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%204%20ssl_bump%20issue&In-Reply-To=%3C2a56b72e-911d-f600-cd4b-d4657ab33eda%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020447.html">
   <LINK REL="Next"  HREF="020450.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 4 ssl_bump issue</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%204%20ssl_bump%20issue&In-Reply-To=%3C2a56b72e-911d-f600-cd4b-d4657ab33eda%40treenet.co.nz%3E"
       TITLE="[squid-users] Squid 4 ssl_bump issue">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Apr  5 04:22:37 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020447.html">[squid-users] Squid 4 ssl_bump issue
</A></li>
        <LI>Next message (by thread): <A HREF="020450.html">[squid-users] Squid 4 ssl_bump issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20449">[ date ]</a>
              <a href="thread.html#20449">[ thread ]</a>
              <a href="subject.html#20449">[ subject ]</a>
              <a href="author.html#20449">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 5/04/19 12:37 am, Davide Belloni wrote:
&gt;<i> Hi,
</I>&gt;<i> this is the certificate that I'm using at the moment:
</I>&gt;<i> 
</I>
AFAICS the pieces Squid-4 needs for your config and checks for are all
there.

Are the pieces correctly ordered in the .pem file? key first, then CA cert.


&gt;<i> 
</I>&gt;<i> On Thu, 4 Apr 2019 at 12:57, Davide Belloni wrote:
</I>&gt;<i> 
</I>&gt;<i>     Hi, thanks very much for all the advices!
</I>&gt;<i>     About the action to generate the certificate I've followed the squid
</I>&gt;<i>     wiki, that doesn't modify (if I remember correctly) openssl conf to
</I>&gt;<i>     create it .
</I>&gt;<i> 
</I>&gt;<i>     Do you have some link to a good howto about that?
</I>&gt;<i> 
</I>

Ah, we have several how-to's in the wiki. The SSL-Bump documentation has
an example. The ConfigExamples section has one for self-signed root CA
like yours, one for intermediate CA signing cert, and one for a wildcard
domain cert.

The one most relevant to what you have is:
&lt;<A HREF="https://wiki.squid-cache.org/ConfigExamples/Intercept/SslBumpExplicit#Features.2FDynamicSslCert.Create_Self-Signed_Root_CA_Certificate">https://wiki.squid-cache.org/ConfigExamples/Intercept/SslBumpExplicit#Features.2FDynamicSslCert.Create_Self-Signed_Root_CA_Certificate</A>&gt;

If this already matches what you are doing, and the PEM file content is
correct, and that context creation ERROR still shows up. Then your next
step would be to start Squid with the -X command line option and see if
anything more specific about it shows up.
 (This will produce a huge amount of debug info, but you only need the
startup sequence where the ERROR shows up. It should not be necessary to
send traffic until the context is working.)

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020447.html">[squid-users] Squid 4 ssl_bump issue
</A></li>
	<LI>Next message (by thread): <A HREF="020450.html">[squid-users] Squid 4 ssl_bump issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20449">[ date ]</a>
              <a href="thread.html#20449">[ thread ]</a>
              <a href="subject.html#20449">[ subject ]</a>
              <a href="author.html#20449">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
