<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Permission denied on /usr/share/squid/errors/templates and /usr/share/squid/icons/silk
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Permission%20denied%20on%0A%20/usr/share/squid/errors/templates%20and%20/usr/share/squid/icons/silk&In-Reply-To=%3Cd1d0152b-175f-045a-9b70-1023d9cd142b%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020488.html">
   <LINK REL="Next"  HREF="020491.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Permission denied on /usr/share/squid/errors/templates and /usr/share/squid/icons/silk</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Permission%20denied%20on%0A%20/usr/share/squid/errors/templates%20and%20/usr/share/squid/icons/silk&In-Reply-To=%3Cd1d0152b-175f-045a-9b70-1023d9cd142b%40treenet.co.nz%3E"
       TITLE="[squid-users] Permission denied on /usr/share/squid/errors/templates and /usr/share/squid/icons/silk">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Apr 12 15:34:13 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020488.html">[squid-users] Permission denied on	/usr/share/squid/errors/templates and /usr/share/squid/icons/silk
</A></li>
        <LI>Next message (by thread): <A HREF="020491.html">[squid-users] Logging ICAP headers in access log
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20490">[ date ]</a>
              <a href="thread.html#20490">[ thread ]</a>
              <a href="subject.html#20490">[ subject ]</a>
              <a href="author.html#20490">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/04/19 6:38 pm, Ota Coder wrote:
&gt;<i> Hi!
</I>&gt;<i> 
</I>&gt;<i> I'm on Slackware 14.2 and installed Squid version 3.5.26 but I'm having
</I>&gt;<i> this problem everytime I ran in the terminal:
</I>&gt;<i> 
</I>&gt;<i> # squid -z
</I>&gt;<i> # squid -N -D -d1
</I>&gt;<i> 
</I>&gt;<i> and check the /var/log/squid/cache.log
</I>&gt;<i> 
</I>&gt;<i> Most of the errors shown is &quot;(13) Permission denied&quot; on the files at
</I>&gt;<i> folders /usr/share/squid/errors/templates/ and usr/share/squid/icons/silk/
</I>&gt;<i> 
</I>&gt;<i> Here's an excerpt:
</I>&gt;<i> 
</I>&gt;<i> 2019/04/11 14:04:22|
</I>&gt;<i> '/usr/share/squid/errors/templates/ERR_ACCESS_DENIED': (13) Permission
</I>&gt;<i> denied
</I>&gt;<i> 2019/04/11 14:04:22| WARNING: failed to find or read error text file
</I>&gt;<i> ERR_ACCESS_DENIED
</I>
...
&gt;<i> Here is the complete output in the cache.log - <A HREF="http://termbin.com/apfa">http://termbin.com/apfa</A>
</I>&gt;<i> 
</I>&gt;<i> I typed in lsattr -R on /usr/share/squid and this is the result -
</I>&gt;<i> <A HREF="http://termbin.com/k37c">http://termbin.com/k37c</A>
</I>&gt;<i> 
</I>&gt;<i> I checked the permissions and owner at
</I>&gt;<i> /usr/share/squid/errors/templates/ and it is correct -
</I>&gt;<i> <A HREF="http://termbin.com/jo0e">http://termbin.com/jo0e</A>
</I>

IIRC; Squid also needs read access to all directories along in the path.
If you are manually setting permissions that may have been overlooked.

Also, check if there is anything like SELinux or AppArmor running on the
machine. They can prevent access to files despite what the Unix
permissions say.


&gt;<i> 
</I>&gt;<i> The cache_effective_user in /etc/squid/squid.conf is &quot;squid&quot; and the
</I>&gt;<i> cache_effective_group is &quot;squid&quot;
</I>&gt;<i> 
</I>&gt;<i> I mostly followed the settings written in this post -
</I>&gt;<i> <A HREF="https://www.linuxquestions.org/questions/blog/arniekat-436077/slackware-14-1-squid-3-4-7-36215/">https://www.linuxquestions.org/questions/blog/arniekat-436077/slackware-14-1-squid-3-4-7-36215/</A>
</I>&gt;<i> 
</I>&gt;<i> But yeah, when I ran:
</I>&gt;<i> 
</I>&gt;<i> # squid -N -D -d1
</I>&gt;<i> 
</I>&gt;<i> squid really doesn't start when I checked when I ran:
</I>

According to your cache.log Squid exited due to inability to write to
the access.log files:

2019/04/11 14:04:30| logfileHandleWrite:
daemon:/var/log/squid/access.log: error writing ((32) Broken pipe)


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020488.html">[squid-users] Permission denied on	/usr/share/squid/errors/templates and /usr/share/squid/icons/silk
</A></li>
	<LI>Next message (by thread): <A HREF="020491.html">[squid-users] Logging ICAP headers in access log
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20490">[ date ]</a>
              <a href="thread.html#20490">[ thread ]</a>
              <a href="subject.html#20490">[ subject ]</a>
              <a href="author.html#20490">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
