<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] SQUID 4.6 - Kerberos Helper Error - FreeBSD
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SQUID%204.6%20-%20Kerberos%20Helper%20Error%20-%20FreeBSD&In-Reply-To=%3C001801d4f87f%24d33e0860%2479ba1920%24%40bol.com.br%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020526.html">
   <LINK REL="Next"  HREF="020528.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] SQUID 4.6 - Kerberos Helper Error - FreeBSD</H1>
    <B>Fabricio Ferreira</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SQUID%204.6%20-%20Kerberos%20Helper%20Error%20-%20FreeBSD&In-Reply-To=%3C001801d4f87f%24d33e0860%2479ba1920%24%40bol.com.br%3E"
       TITLE="[squid-users] SQUID 4.6 - Kerberos Helper Error - FreeBSD">guzzy at bol.com.br
       </A><BR>
    <I>Sun Apr 21 20:21:34 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020526.html">[squid-users] SQUID 4.6 - Kerberos Helper Error - FreeBSD
</A></li>
        <LI>Next message (by thread): <A HREF="020528.html">[squid-users] SQUID 4.6 - Kerberos Helper Error - FreeBSD
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20527">[ date ]</a>
              <a href="thread.html#20527">[ thread ]</a>
              <a href="subject.html#20527">[ subject ]</a>
              <a href="author.html#20527">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Amos,
Thanks Much for your help on this.

I have re-checked all permissions and ownership of the keytab file. Everything looks fine. Same settings I have used before on squid 3.5.x  (0440 - root:proxy  /etc/krb5.keytab)
Yes, keytab has the &quot;proxy&quot; group set - squid user is part of it.  

Looking at the stderr log, this is all I see:
##########################################
pid 85392 (negotiate_kerberos_), uid 100: exited on signal 11
pid 85451 (negotiate_kerberos_), uid 100: exited on signal 11
pid 85555 (negotiate_kerberos_), uid 100: exited on signal 11
pid 85710 (negotiate_kerberos_), uid 100: exited on signal 11
pid 85924 (negotiate_kerberos_), uid 100: exited on signal 11
pid 18353 (negotiate_kerberos_), uid 100: exited on signal 11
pid 18452 (negotiate_kerberos_), uid 100: exited on signal 11
pid 18783 (negotiate_kerberos_), uid 100: exited on signal 11
pid 19021 (negotiate_kerberos_), uid 100: exited on signal 11
pid 19294 (negotiate_kerberos_), uid 100: exited on signal 11
pid 19307 (negotiate_kerberos_), uid 100: exited on signal 11
pid 19532 (negotiate_kerberos_), uid 100: exited on signal 11
pid 19591 (negotiate_kerberos_), uid 100: exited on signal 11
...
#####################################################
Not much uh?  I don't see anybody using Kerberos with squid 4.6 on FreeBSD 12 yet, so, I think I am alone for a while.
Does it worth to report it to the FreeBSD port (squid) maintainer?

Thanks once again!
Fabricio.

-----Original Message-----
From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; On Behalf Of Amos Jeffries
Sent: Sunday, April 21, 2019 3:46 AM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] SQUID 4.6 - Kerberos Helper Error - FreeBSD

On 21/04/19 9:02 am, Fabricio Ferreira wrote:
&gt;<i> Hello Everyone,
</I>&gt;<i> Greetings.
</I>&gt;<i> Recently I had to upgrade my Squid to ver 4.6 - that&#180;s when my 
</I>&gt;<i> problems started.
</I>&gt;<i> I can't use the KERBEROS helper anymore.
</I>&gt;<i> I am trying to use exactly the same configurtion I was using for Squid 
</I>&gt;<i> 3.5.27(by the way, I am using Squid with SAMBA 4.10 &#8211; From the command 
</I>&gt;<i> prompt, everything works fine. Keytab was successfully generated and 
</I>&gt;<i> it&#180;s working.
</I>
Was that run as the same low-privilege user account Squid runs it?

One thing you can do is use the exact same options (including -d) that Squid uses and see of there is any noticable difference in the stderr log output it produces vs the cache.log entries you provided below.

If nothing shows up there, try copy-paste'ing the same &quot;YR ...&quot; line (single line of input) that Squid sends ans see if anything shows up then.


The helpers each start by opening /etc/krb5.keytab then immediately switch to separate memory-only keytabs. That may be something going wrong with the /etc/krb5.keytab file access.


Amos
_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020526.html">[squid-users] SQUID 4.6 - Kerberos Helper Error - FreeBSD
</A></li>
	<LI>Next message (by thread): <A HREF="020528.html">[squid-users] SQUID 4.6 - Kerberos Helper Error - FreeBSD
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20527">[ date ]</a>
              <a href="thread.html#20527">[ thread ]</a>
              <a href="subject.html#20527">[ subject ]</a>
              <a href="author.html#20527">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
