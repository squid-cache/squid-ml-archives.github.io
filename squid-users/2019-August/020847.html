<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 3.5.27 not caching at all
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203.5.27%20not%20caching%20at%20all&In-Reply-To=%3C552381fb-6ca5-ca44-e416-a7075c22bfe8%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020845.html">
   <LINK REL="Next"  HREF="020846.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 3.5.27 not caching at all</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203.5.27%20not%20caching%20at%20all&In-Reply-To=%3C552381fb-6ca5-ca44-e416-a7075c22bfe8%40treenet.co.nz%3E"
       TITLE="[squid-users] Squid 3.5.27 not caching at all">squid3 at treenet.co.nz
       </A><BR>
    <I>Sun Aug  4 02:26:37 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020845.html">[squid-users] Squid 3.5.27 not caching at all
</A></li>
        <LI>Next message (by thread): <A HREF="020846.html">[squid-users] cache-peer and tls
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20847">[ date ]</a>
              <a href="thread.html#20847">[ thread ]</a>
              <a href="subject.html#20847">[ subject ]</a>
              <a href="author.html#20847">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 4/08/19 1:18 am, Mohamed Ali Ahmed wrote:
&gt;<i>     You have not provided enough information for us to know whether this is
</I>&gt;<i>     a problem or testing mistake.
</I>&gt;<i> 
</I>&gt;<i>     What is this unstated &quot;minimal change&quot; you made that made caching
</I>&gt;<i>     suddenly stop working?&#160;
</I>&gt;<i> 
</I>&gt;<i> &#160;The only change i have made is adding NOC ACL and uncommenting the
</I>&gt;<i> cache_dir ufs.
</I>&gt;<i> 
</I>
Okay.

&gt;<i>     What exactly does &quot;visiting the same website over and over again&quot; mean?
</I>&gt;<i>     what exact actions did you do?
</I>&gt;<i> 
</I>&gt;<i> I expected when i visit a website for the time it will miss and after
</I>&gt;<i> retrieving it that squid will cache it internally. if i visit the same
</I>&gt;<i> website again, squid to read it from the local cache. i was visiting by
</I>&gt;<i> adding a new tap using chrome or visiting from another browser like MS
</I>&gt;<i> edge or IE.&#160;
</I>&gt;<i> 
</I>
Ah. This website uses &quot;Vary: Accept-Encoding&quot; and each web browser
supports different types of encoding, or has different preference order
for the ones they do share.

So the first request from each browser should be expected to be a MISS.
Only the second use by that particular browser can be expected to HIT or
REFRESH. I'm not sure if Chrome new-tab does the same, it should not but
maybe.
You can add &quot;debug_options 11,2&quot; to get a cache.log trace of the headers
from each test and see if they should have been a MISS, HIT or REFRESH.



&gt;<i>     Please do not do that &quot;allow all&quot;.
</I>&gt;<i> 
</I>&gt;<i>     For one thing it makes your NOC ACL pointless, *everybody* is allowed to
</I>&gt;<i>     use your proxy for whatever they want to do.
</I>&gt;<i> 
</I>&gt;<i>     If you did it to debug a caching problem, be aware that http_access has
</I>&gt;<i>     nothing to do with cache.&#160;
</I>&gt;<i> 
</I>&gt;<i> Thank you amos, I have changed to&#160; http_access deny all&#160;&#160;&#160;instead of
</I>&gt;<i> http_access allow all
</I>&gt;<i> &#160;Please ask me anything else i should share with so that you can help
</I>&gt;<i> me. thank you.&#160;
</I>&gt;<i> 
</I>
The 11,2 debug trace log would help. You may be able to find the problem
yourself from that.


&gt;<i> 
</I>&gt;<i>     &#160;- Pressing refresh, Shift+reload, or CTL+refresh in a browser will
</I>&gt;<i>     *force* a MISS - yet comes under the description you gave.
</I>&gt;<i>     &#160; - some tools send headers to forbid cached contents being delivered by
</I>&gt;<i>     default. So cannot be used for this kind of test without special
</I>&gt;<i>     options.&#160;&#160;
</I>&gt;<i> 
</I>&gt;<i> So what do you recommend i do in order to check if squid is caching or not?
</I>&gt;<i> &#160;
</I>
If you need to use a browser, then clicking on the address bar and
pressing enter re-fetches that URL without any cache affecting requirements.

Or curl, wget or squidclient tools can be used to test a single URL fetch.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020845.html">[squid-users] Squid 3.5.27 not caching at all
</A></li>
	<LI>Next message (by thread): <A HREF="020846.html">[squid-users] cache-peer and tls
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20847">[ date ]</a>
              <a href="thread.html#20847">[ thread ]</a>
              <a href="subject.html#20847">[ subject ]</a>
              <a href="author.html#20847">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
