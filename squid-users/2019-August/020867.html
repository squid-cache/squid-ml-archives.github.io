<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Problems with squid 3.1 to 3.3 upgrade
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Problems%20with%20squid%203.1%20to%203.3%20upgrade&In-Reply-To=%3Ca06ad34f-1151-afdd-8a49-98a2d2b5c418%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020866.html">
   <LINK REL="Next"  HREF="020868.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Problems with squid 3.1 to 3.3 upgrade</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Problems%20with%20squid%203.1%20to%203.3%20upgrade&In-Reply-To=%3Ca06ad34f-1151-afdd-8a49-98a2d2b5c418%40measurement-factory.com%3E"
       TITLE="[squid-users] Problems with squid 3.1 to 3.3 upgrade">rousskov at measurement-factory.com
       </A><BR>
    <I>Fri Aug  9 18:37:30 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020866.html">[squid-users] Problems with squid 3.1 to 3.3 upgrade
</A></li>
        <LI>Next message (by thread): <A HREF="020868.html">[squid-users] Problems with squid 3.1 to 3.3 upgrade
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20867">[ date ]</a>
              <a href="thread.html#20867">[ thread ]</a>
              <a href="subject.html#20867">[ subject ]</a>
              <a href="author.html#20867">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 8/9/19 1:37 PM, Tom Karches wrote:
&gt;<i> On Fri, Aug 9, 2019 at 11:38 AM Alex Rousskov wrote:
</I>
&gt;<i> Ok, here is the info from the real trace. First time with #dns_v4_first
</I>&gt;<i> on&#160; commented out, 2nd time &quot;dns_v4_ first on&quot; is active. Difference is
</I>&gt;<i> with no &quot;dns_v4_first on&quot; directive, I get a RR_CONNECT_FAIL 111. When
</I>&gt;<i> active, I get a RR_CONNECT_FAIL 101. 
</I>
BTW, it may be easier for you to read --trace--ascii output.

Both are ERR_CONNECT_FAIL errors (&quot;connection reset by peer&quot; and
&quot;connection refused&quot;). Your Squid cannot connect to where it needs to
connect in order to establish a TCP tunnel. It could be a Squid
misconfiguration, a routing problem, insufficient capabilities, and many
other things.

I suggest checking cache.log for WARNINGs and ERRORs. After arriving at
a clean cache.log, I would use a packet capture (or similar) to see
where Squid is trying to connect (and which local address it is
connecting from). That information may be enough to figure out why Squid
cannot connect successfully.

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020866.html">[squid-users] Problems with squid 3.1 to 3.3 upgrade
</A></li>
	<LI>Next message (by thread): <A HREF="020868.html">[squid-users] Problems with squid 3.1 to 3.3 upgrade
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20867">[ date ]</a>
              <a href="thread.html#20867">[ thread ]</a>
              <a href="subject.html#20867">[ subject ]</a>
              <a href="author.html#20867">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
