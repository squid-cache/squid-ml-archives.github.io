<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] While using icap_service squid working when ip is used and failing when domain name is provided
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20While%20using%20icap_service%20squid%20working%20when%20ip%20is%0A%20used%20and%20failing%20when%20domain%20name%20is%20provided&In-Reply-To=%3CCAF6Pdhuhq0ZXNAdbesX4OHVPF4hcnxp%3DpdrXJHNKAFXd30_xBQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020878.html">
   <LINK REL="Next"  HREF="020879.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] While using icap_service squid working when ip is used and failing when domain name is provided</H1>
    <B>Prudhvisagar Bellamkonda</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20While%20using%20icap_service%20squid%20working%20when%20ip%20is%0A%20used%20and%20failing%20when%20domain%20name%20is%20provided&In-Reply-To=%3CCAF6Pdhuhq0ZXNAdbesX4OHVPF4hcnxp%3DpdrXJHNKAFXd30_xBQ%40mail.gmail.com%3E"
       TITLE="[squid-users] While using icap_service squid working when ip is used and failing when domain name is provided">prudhvi.gnt65 at gmail.com
       </A><BR>
    <I>Mon Aug 12 15:55:23 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020878.html">[squid-users] squid Illegal instruction
</A></li>
        <LI>Next message (by thread): <A HREF="020879.html">[squid-users] While using icap_service squid working when ip is used and failing when domain name is provided
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20874">[ date ]</a>
              <a href="thread.html#20874">[ thread ]</a>
              <a href="subject.html#20874">[ subject ]</a>
              <a href="author.html#20874">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,
Thanks for checking my message.
 Please check the below configuration, we are running squid 3.5 version.

This service is running on aws its a ui application trying to connect to
virus scanner to scan the uploaded file and send the request to downstream
application if the file is valid.

We implemented squid before the virus scanner

https_port 8443 accel defaultsite=imageuploadqa.com no-vhost
cert=/qa/certificate/imageupload.cer
key=/qa/certificate/private/imageupload.pem
cache_peer imageuploadroute53downstreamappkication.com
&lt;<A HREF="http://imageuploadroute53.com/">http://imageuploadroute53.com/</A>&gt;. parent 443 0 proxy-only
name=imageuploadAccel ssl sslflags=DONT_VERIFY_PEER
acl imageupload dstdomain imageuploadqa.com
http_access allow imageupload
cache_peer_access imageuploadAccel allow imageupload
cache_peer_access imageuploadAccel deny all
icap_enable on
icap_service service_avi_req reqmod_precache
<A HREF="icap://domainnameofvirusscanner:1344/SYMCScanReqEx-AV">icap://domainnameofvirusscanner:1344/SYMCScanReqEx-AV</A> bypass=off (not
working, but working when we are trying to use the IP)
adaptation_access service_avi_req allow all
icap_log /var/log/squid/icap.log icap_squid


it also working when &quot;cache_peer_access imageuploadAccel deny all&quot; Line is
removed

Please let me know if am missing any configuration

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20190812/ac8f8fda/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20190812/ac8f8fda/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020878.html">[squid-users] squid Illegal instruction
</A></li>
	<LI>Next message (by thread): <A HREF="020879.html">[squid-users] While using icap_service squid working when ip is used and failing when domain name is provided
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20874">[ date ]</a>
              <a href="thread.html#20874">[ thread ]</a>
              <a href="subject.html#20874">[ subject ]</a>
              <a href="author.html#20874">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
