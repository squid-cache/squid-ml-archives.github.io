<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Stuck Filtering HTTPS URL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Stuck%20Filtering%20HTTPS%20URL&In-Reply-To=%3Cc19456cc-4ce2-83f0-2194-25948a21daf2%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020876.html">
   <LINK REL="Next"  HREF="020881.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Stuck Filtering HTTPS URL</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Stuck%20Filtering%20HTTPS%20URL&In-Reply-To=%3Cc19456cc-4ce2-83f0-2194-25948a21daf2%40measurement-factory.com%3E"
       TITLE="[squid-users] Stuck Filtering HTTPS URL">rousskov at measurement-factory.com
       </A><BR>
    <I>Mon Aug 12 20:31:38 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020876.html">[squid-users] Stuck Filtering HTTPS URL
</A></li>
        <LI>Next message (by thread): <A HREF="020881.html">[squid-users] help to disconnect users after determinated time. TTL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20877">[ date ]</a>
              <a href="thread.html#20877">[ thread ]</a>
              <a href="subject.html#20877">[ subject ]</a>
              <a href="author.html#20877">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 8/12/19 3:16 PM, Garbacik, Joe wrote:
&gt;<i> I am trying to permit access to something like the following,
</I>&gt;<i> <A HREF="https://www.example.com/world,">https://www.example.com/world,</A> without providing access to the whole site.
</I>
&gt;<i> 2019/08/12 10:40:29.081 kid1| 33,4| client_side.cc(1471) quitAfterError: Will close after error:...
</I>
&gt;<i> HTTP/1.1 403 Forbidden
</I>
&gt;<i> http_access allow SrcSubnet DSTDOMAIN_ALLOW URLPATH_ALLOW
</I>
You are probably (implicitly) denying the CONNECT request sent by client
to Squid. Squid needs to process that CONNECT request (that does not
have URL paths) before Squid can bump the TLS tunnel (and see in-tunnel
requests with URLs that have paths). If you deny CONNECT, Squid will
bump the client connection and respond with a (delayed) &quot;access denied&quot;
error to the first in-tunnel request, regardless of what that first
in-tunnel request is.

Rule of thumb: Make everything work, including SslBump, _before_
applying custom filtering rules.

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020876.html">[squid-users] Stuck Filtering HTTPS URL
</A></li>
	<LI>Next message (by thread): <A HREF="020881.html">[squid-users] help to disconnect users after determinated time. TTL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20877">[ date ]</a>
              <a href="thread.html#20877">[ thread ]</a>
              <a href="subject.html#20877">[ subject ]</a>
              <a href="author.html#20877">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
