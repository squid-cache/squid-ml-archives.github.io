<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Assertion failure in helper.cc
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Assertion%20failure%20in%20helper.cc&In-Reply-To=%3C5e3d068c-323b-f6b3-ef57-70bf755f519e%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020888.html">
   <LINK REL="Next"  HREF="020890.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Assertion failure in helper.cc</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Assertion%20failure%20in%20helper.cc&In-Reply-To=%3C5e3d068c-323b-f6b3-ef57-70bf755f519e%40measurement-factory.com%3E"
       TITLE="[squid-users] Assertion failure in helper.cc">rousskov at measurement-factory.com
       </A><BR>
    <I>Wed Aug 14 19:08:14 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020888.html">[squid-users] Assertion failure in helper.cc
</A></li>
        <LI>Next message (by thread): <A HREF="020890.html">[squid-users] Cache html pages with advertised length of -1?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20889">[ date ]</a>
              <a href="thread.html#20889">[ thread ]</a>
              <a href="subject.html#20889">[ subject ]</a>
              <a href="author.html#20889">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 8/14/19 1:44 PM, Chirayu Patel wrote:
&gt;<i> url_rewrite_program /tmp/squid/urlcat_server
</I>&gt;<i> url_rewrite_children 1 startup=1 idle=1 concurrency=30 queue-size=10000 on-persistent-overload=ERR
</I>&gt;<i> url_rewrite_extras &quot;%&gt;a %lp %ssl::&gt;sni&quot;
</I>
&gt;<i> --&gt; We are getting this error sometimes and squid crashes later :
</I>&gt;<i> 
</I>&gt;<i> Tue Aug 13 15:02:12 2019 squid[20079]: helperHandleRead: unexpected reply on channel 0 from redirector #Hlpr1 '1167 OK status=302 url=<A HREF="https://xxx.xxx.xxx">https://xxx.xxx.xxx</A>'
</I>&gt;<i> Tue Aug 13 15:02:12 2019 squid[20079]: assertion failed:&#160;helper.cc:1039: &quot;skip == 0 &amp;&amp; eom == NULL&quot;&#160;&#160;
</I>

Most likely, Squid got a malformed (from Squid point of view) helper
response and crashed while handling it. It is not clear to me whether
the response reported on the first line is the one that led to the
crash, but neither of those lines should be printed if everything works
as expected.

The parsing code for helper responses is pretty bad, but it may be
possible to figure out what caused the assertion by examining the core
dump. If you have it (or can change your environment to produce core
dumps), then please post a backtrace from gdb. Squid wiki has
instructions if you are not familiar with the process. You may prefer to
move this triage to Squid Bugzilla though.

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020888.html">[squid-users] Assertion failure in helper.cc
</A></li>
	<LI>Next message (by thread): <A HREF="020890.html">[squid-users] Cache html pages with advertised length of -1?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20889">[ date ]</a>
              <a href="thread.html#20889">[ thread ]</a>
              <a href="subject.html#20889">[ subject ]</a>
              <a href="author.html#20889">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
