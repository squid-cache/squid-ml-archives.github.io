<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Cache html pages with advertised length of -1?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Cache%20html%20pages%20with%20advertised%20length%20of%20-1%3F&In-Reply-To=%3C283ff764-ab75-01a6-e29e-74b9bd2c067a%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020891.html">
   <LINK REL="Next"  HREF="020897.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Cache html pages with advertised length of -1?</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Cache%20html%20pages%20with%20advertised%20length%20of%20-1%3F&In-Reply-To=%3C283ff764-ab75-01a6-e29e-74b9bd2c067a%40measurement-factory.com%3E"
       TITLE="[squid-users] Cache html pages with advertised length of -1?">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Aug 15 16:17:44 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020891.html">[squid-users] Cache html pages with advertised length of -1?
</A></li>
        <LI>Next message (by thread): <A HREF="020897.html">[squid-users] helping to setting a grace time for auth_param basic
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20893">[ date ]</a>
              <a href="thread.html#20893">[ thread ]</a>
              <a href="subject.html#20893">[ subject ]</a>
              <a href="author.html#20893">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 8/15/19 4:14 AM, Joshua Kronemeyer wrote:

&gt;<i> I'm trying to cache some HTML pages with squid, but the pages I'm trying
</I>&gt;<i> to cache always advertise size of -1. (Advertised Size/Actual Size i.e.
</I>&gt;<i> -1/104732)
</I>&gt;<i> The http headers don't include a content-length.
</I>
&gt;<i> As per the store.log docs &quot;If the advertised length is not zero, but not
</I>&gt;<i> equal to the real length, the object will be released from the cache.&quot;
</I>&gt;<i> Is there a way to get the size of this page in advance so squid can
</I>&gt;<i> cache it or ignore the mismatch?
</I>
IIRC, in many cases, Squid can cache documents of unknown (a priori)
size. The store.log documentation you are looking at is probably talking
about size mismatches, which is a different special/problematic case.
The docs may also be out of sync with the actual logging code (e.g.,
saying &quot;zero&quot; instead of &quot;negative&quot;).

You need to figure out whether Squid considers the response cachable.
You can start by using external tools like redbot.org often recommended
on this list. In some cases, looking at Squid debugging logs becomes
necessary to understand why Squid is not caching something (if it does
not) or why Squid is not serving a hit for the cached resource.

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020891.html">[squid-users] Cache html pages with advertised length of -1?
</A></li>
	<LI>Next message (by thread): <A HREF="020897.html">[squid-users] helping to setting a grace time for auth_param basic
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20893">[ date ]</a>
              <a href="thread.html#20893">[ thread ]</a>
              <a href="subject.html#20893">[ subject ]</a>
              <a href="author.html#20893">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
