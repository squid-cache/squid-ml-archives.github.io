<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] icap result caching in squid
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20icap%20result%20caching%20in%20squid&In-Reply-To=%3C13703a9f-21f8-d7d0-05b4-fa642fdb6505%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021403.html">
   <LINK REL="Next"  HREF="021417.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] icap result caching in squid</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20icap%20result%20caching%20in%20squid&In-Reply-To=%3C13703a9f-21f8-d7d0-05b4-fa642fdb6505%40treenet.co.nz%3E"
       TITLE="[squid-users] icap result caching in squid">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Dec  4 05:26:28 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="021403.html">[squid-users] icap result caching in squid
</A></li>
        <LI>Next message (by thread): <A HREF="021417.html">[squid-users] icap result caching in squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21405">[ date ]</a>
              <a href="thread.html#21405">[ thread ]</a>
              <a href="subject.html#21405">[ subject ]</a>
              <a href="author.html#21405">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 4/12/19 6:05 am, Darren Breeze wrote:
&gt;<i> Hi Amos
</I>&gt;<i> 
</I>&gt;<i> The Icap service is doing redirects based on client permissions (that may change). What I am doing is just setting the Expires value in the RESP_MOD response when I return a 307 redirect so I can control how long the caches (both Squid and the browser) hang on to it.
</I>&gt;<i> 
</I>
In that case you should be using Cache-Control:max-age=NN instead where
the NN being your desired TTL in seconds. This is a *lot* simpler and
faster to deliver than calculating the timestamps needed for valid
Expires header.

Also, are you aware that current Squid versions can generate redirects
(custom headers included) based on output from an external_acl_type helper?
 A helper to lookup your permissions system plus a few extra squid.conf
settings would be a lot simpler in terms of traffic processing and
bandwidth consumption than sending everything through an external ICAP
service.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="021403.html">[squid-users] icap result caching in squid
</A></li>
	<LI>Next message (by thread): <A HREF="021417.html">[squid-users] icap result caching in squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21405">[ date ]</a>
              <a href="thread.html#21405">[ thread ]</a>
              <a href="subject.html#21405">[ subject ]</a>
              <a href="author.html#21405">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
