<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] ACL reply_header_access
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20ACL%20reply_header_access&In-Reply-To=%3Ccbd07b9f-2b43-47ac-9a70-0f0ce1c093cd%40www.fastmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021416.html">
   <LINK REL="Next"  HREF="021420.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] ACL reply_header_access</H1>
    <B>creditu at eml.cc</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20ACL%20reply_header_access&In-Reply-To=%3Ccbd07b9f-2b43-47ac-9a70-0f0ce1c093cd%40www.fastmail.com%3E"
       TITLE="[squid-users] ACL reply_header_access">creditu at eml.cc
       </A><BR>
    <I>Thu Dec  5 00:29:51 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="021416.html">[squid-users] TCP_DENIED/407 AD auth
</A></li>
        <LI>Next message (by thread): <A HREF="021420.html">[squid-users] ACL reply_header_access
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21418">[ date ]</a>
              <a href="thread.html#21418">[ thread ]</a>
              <a href="subject.html#21418">[ subject ]</a>
              <a href="author.html#21418">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We have been using several squid servers in accelerator mode for a number of years mainly for load balancing to send public requests to backend servers.  The requests to the squids typically come via a well known commercial  caching service.   The squids don't do any caching, they just forward requests to the backend.

I need to remove the  X-Content-Type-Options: nosniff reply header when it's only going to a specific service that queries our web farm.

I believe I can remove it from all replies by using reply_header_access X-Content-Type-Options deny all.  But, I need an ACL that will only remove it from those responses going to that service (client).  

I'm used to writing ACLs based on Internet to our farm requests not the outbound to the clients.  I'm having trouble getting my head around the logic on the acl directives to use.  Do I need to look at the reply headers and craft the ACL based on that?   Can you write and ACL based on the original request from the client?   

What I'd like to be able to do is write a acl that does not send back the X-Content-Type header to the client that requested: <A HREF="https://www.example.com/sound/ID/text/abcde.txt.">https://www.example.com/sound/ID/text/abcde.txt.</A>  

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="021416.html">[squid-users] TCP_DENIED/407 AD auth
</A></li>
	<LI>Next message (by thread): <A HREF="021420.html">[squid-users] ACL reply_header_access
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21418">[ date ]</a>
              <a href="thread.html#21418">[ thread ]</a>
              <a href="subject.html#21418">[ subject ]</a>
              <a href="author.html#21418">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
