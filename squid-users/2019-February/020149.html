<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] ssl-bump does not redirect to block page
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20ssl-bump%20does%20not%20redirect%20to%20block%20page&In-Reply-To=%3C024a80a6-6b15-e9d8-06f9-b9645fbb3058%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020148.html">
   <LINK REL="Next"  HREF="020153.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] ssl-bump does not redirect to block page</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20ssl-bump%20does%20not%20redirect%20to%20block%20page&In-Reply-To=%3C024a80a6-6b15-e9d8-06f9-b9645fbb3058%40measurement-factory.com%3E"
       TITLE="[squid-users] ssl-bump does not redirect to block page">rousskov at measurement-factory.com
       </A><BR>
    <I>Tue Feb 12 15:04:08 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020148.html">[squid-users] ssl-bump does not redirect to block page
</A></li>
        <LI>Next message (by thread): <A HREF="020153.html">[squid-users] ssl-bump does not redirect to block page
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20149">[ date ]</a>
              <a href="thread.html#20149">[ thread ]</a>
              <a href="subject.html#20149">[ subject ]</a>
              <a href="author.html#20149">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2/12/19 7:21 AM, <A HREF="https://lists.squid-cache.org/listinfo/squid-users">leomessi983 at yahoo.com</A> wrote:

&gt;<i> Do i have to use CA and Certificate configuration if i want to block
</I>&gt;<i> only HTTPS requests with splice action?!
</I>
IIRC, you currently need a CA certificate if you want to use SslBump,
regardless of the SslBump actions in use. In some ways, this is a
limitation of the current SslBump implementation rather than a natural
requirement, but the CA certificate is needed when Squid reports an
error to the client because Squid has to bump the client connection to
report errors.

If you do not care what happens when handling errors, then you probably
do not need to configure dynamic certificate generation. I have not
tested that, but I assume that, when reporting errors in that case,
Squid will silently revert to using the old code that generates
self-signed certificates (and the client will not trust them).


Please note that it is not clear what you mean by &quot;to block with splice
action&quot; -- splice does not block anything. If you are blocking requests
using http_access rules, then Squid is probably using an (implicit) bump
action to report blocking to the client, as discussed above. Blocking is
an example of errors that may happen even when you do not explicitly
bump any requests.

Alex.


&gt;<i> https_port 3130 tproxy ssl-bump \
</I>&gt;<i> &#160; cert=/etc/squid/ssl_cert/myCA.pem \
</I>&gt;<i> &#160; generate-host-certificates=on dynamic_cert_mem_cache_size=4MB
</I>&gt;<i>   sslcrtd_program /usr/lib64/squid/security_file_certgen -s /var/lib/ssl_db -M 4MB
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020148.html">[squid-users] ssl-bump does not redirect to block page
</A></li>
	<LI>Next message (by thread): <A HREF="020153.html">[squid-users] ssl-bump does not redirect to block page
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20149">[ date ]</a>
              <a href="thread.html#20149">[ thread ]</a>
              <a href="subject.html#20149">[ subject ]</a>
              <a href="author.html#20149">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
