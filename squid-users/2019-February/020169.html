<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] High response times with Squid
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20High%20response%20times%20with%20Squid&In-Reply-To=%3Cdcad10c2-614e-7a21-cb2a-f1b7f66520a1%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020165.html">
   <LINK REL="Next"  HREF="020171.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] High response times with Squid</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20High%20response%20times%20with%20Squid&In-Reply-To=%3Cdcad10c2-614e-7a21-cb2a-f1b7f66520a1%40treenet.co.nz%3E"
       TITLE="[squid-users] High response times with Squid">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Feb 15 03:53:50 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020165.html">[squid-users] High response times with Squid
</A></li>
        <LI>Next message (by thread): <A HREF="020171.html">[squid-users] High response times with Squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20169">[ date ]</a>
              <a href="thread.html#20169">[ thread ]</a>
              <a href="subject.html#20169">[ subject ]</a>
              <a href="author.html#20169">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 14/02/19 11:38 pm, Ahmad, Sarfaraz wrote:
&gt;<i> Hi again,
</I>&gt;<i> I made some progress on this.
</I>&gt;<i> To reiterate, I am peeking at the SNI and then bump all connections to the origin server in context of this problem. ( the origin server is seamless.com )
</I>&gt;<i> 
</I>&gt;<i> Here are the new findings ,
</I>&gt;<i> 1) The 20sec lag is noticed even when I splice the connection.
</I>&gt;<i> 2) It 99% has to do with the following slow ACL acl.
</I>&gt;<i> 
</I>&gt;<i> acl deny_explicit_dstdomain dstdomain &quot;/etc/squid/acls/deny_explicit_dstdomain&quot;
</I>&gt;<i> 
</I>&gt;<i> I see PTR lookups failing when Squid tries to validate my ACLs. When I disable that ACL, the 20second lag is gone. So I am pretty confident that subsequent PTR lookups are causing the delay here.
</I>&gt;<i> I don't see a configuration directive with which I can configure how many times Squid retries the lookup.
</I>&gt;<i> I see one that sets the timeout though (dns_timeout  defaults 30 seconds).
</I>&gt;<i> 
</I>&gt;<i> Could you guys give me some pointers on what could be happening here ?
</I>
Only repeat back to you what you have described to us ... DNS PTR
lookups are slow.

Your squid.conf is needed to know where those lookups are happening and
see if any can be avoided.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020165.html">[squid-users] High response times with Squid
</A></li>
	<LI>Next message (by thread): <A HREF="020171.html">[squid-users] High response times with Squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20169">[ date ]</a>
              <a href="thread.html#20169">[ thread ]</a>
              <a href="subject.html#20169">[ subject ]</a>
              <a href="author.html#20169">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
