<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid for Windows Repeatedly Crashing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20for%20Windows%20Repeatedly%20Crashing&In-Reply-To=%3CCO1PR85MB01811043577EBDD2888620E9C87E0%40CO1PR85MB0181.NAMPRD85.PROD.OUTLOOK.COM%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020189.html">
   <LINK REL="Next"  HREF="020197.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid for Windows Repeatedly Crashing</H1>
    <B>Van Order, Drew (US - Hermitage)</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20for%20Windows%20Repeatedly%20Crashing&In-Reply-To=%3CCO1PR85MB01811043577EBDD2888620E9C87E0%40CO1PR85MB0181.NAMPRD85.PROD.OUTLOOK.COM%3E"
       TITLE="[squid-users] Squid for Windows Repeatedly Crashing">dvanorder at deloitte.com
       </A><BR>
    <I>Thu Feb 21 15:21:11 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020189.html">[squid-users] Squid for Windows Repeatedly Crashing
</A></li>
        <LI>Next message (by thread): <A HREF="020197.html">[squid-users] Squid for Windows Repeatedly Crashing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20191">[ date ]</a>
              <a href="thread.html#20191">[ thread ]</a>
              <a href="subject.html#20191">[ subject ]</a>
              <a href="author.html#20191">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thank you for replying, and that's an excellent point.

Short answer--definitely not in a container, these are garden variety VMWare instances. I've already flagged the OS power settings to maximum performance, so nothing should be going to sleep. I'll doublecheck, though.

So, if I understand correctly, this error could also be indicative of an issue in between the agent and Squid. Agents first go through a firewall, then the F5 before reaching Squid.

[Stopped, reason:Listener socket closed job1]: (14) Bad address

Any thoughts on this error, which tends to be more common than the other?

2019/02/20 09:42:33 kid1| comm_poll: poll failure: (14) Bad address
2019/02/20 09:42:33 kid1| Select loop Error. Retry 2



-----Original Message-----
From: Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;
Sent: Thursday, February 21, 2019 6:38 AM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Squid for Windows Repeatedly Crashing

On 21/02/19 6:23 pm, Van Order, Drew (US - Hermitage) wrote:
&gt;<i> Hello folks, we're running Squid 3.5.28 on four Windows 2016 VM's,
</I>&gt;<i> each has 4 CPU, 8 GB memory, 10 GB NIC. We implemented Squid to
</I>&gt;<i> support forwarding Azure Log Analytics data, it's all CONNECT. The
</I>&gt;<i> Squids are load balanced through a F5. There are less than 1,000
</I>&gt;<i> servers sending data to Log Analytics.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> All four Squids are regularly crashing, and I don't know how to
</I>&gt;<i> interpret the errors in cache.log. It crashes if we disable caching too.
</I>&gt;<i>
</I>...
&gt;<i>
</I>&gt;<i> 2019/02/20 09:42:32 kid1|  FD 12, 10.5.11.12 [Stopped, reason:Listener
</I>&gt;<i> socket closed job1]: (14) Bad address
</I>&gt;<i>
</I>
Something other than Squid closed the network socket Squid was using to receive new client connections (the http_port socket).

The only things which should know that socket even exists are Squid and the operating system.

This is not an error I've seen before. Is this Squid maybe running in a container or VM which is being hibernated, or suspended, or anything along those lines which may cause the OS filedescriptors to change unexpectedly?

Amos

This message (including any attachments) contains confidential information intended for a specific individual and purpose, and is protected by law. If you are not the intended recipient, you should delete this message and any disclosure, copying, or distribution of this message, or the taking of any action based on it, by you is strictly prohibited.

v.E.1

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020189.html">[squid-users] Squid for Windows Repeatedly Crashing
</A></li>
	<LI>Next message (by thread): <A HREF="020197.html">[squid-users] Squid for Windows Repeatedly Crashing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20191">[ date ]</a>
              <a href="thread.html#20191">[ thread ]</a>
              <a href="subject.html#20191">[ subject ]</a>
              <a href="author.html#20191">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
