<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid 4.x: decided: do not cache but share because the entry has been released
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%204.x%3A%20decided%3A%20do%20not%20cache%20but%20share%0A%20because%20the%20entry%20has%20been%20released&In-Reply-To=%3C433e34b3-f3e8-ac9f-db77-2074ade6dfe8%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020216.html">
   <LINK REL="Next"  HREF="020226.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid 4.x: decided: do not cache but share because the entry has been released</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%204.x%3A%20decided%3A%20do%20not%20cache%20but%20share%0A%20because%20the%20entry%20has%20been%20released&In-Reply-To=%3C433e34b3-f3e8-ac9f-db77-2074ade6dfe8%40measurement-factory.com%3E"
       TITLE="[squid-users] squid 4.x: decided: do not cache but share because the entry has been released">rousskov at measurement-factory.com
       </A><BR>
    <I>Sat Feb 23 22:16:25 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020216.html">[squid-users] squid 4.x: decided: do not cache but share because the entry has been released
</A></li>
        <LI>Next message (by thread): <A HREF="020226.html">[squid-users] squid 4.x: decided: do not cache but share	because the entry has been released
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20221">[ date ]</a>
              <a href="thread.html#20221">[ thread ]</a>
              <a href="subject.html#20221">[ subject ]</a>
              <a href="author.html#20221">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2/23/19 10:17 AM, Amos Jeffries wrote:
&gt;<i> On 24/02/19 5:33 am, David Touzeau wrote:
</I>&gt;&gt;<i> http.cc(982) haveParsedReplyHeaders: decided: do not cache but share
</I>&gt;&gt;<i> because the entry has been released; HTTP status 200
</I>
&gt;&gt;<i> What &#8220;but share because the entry has been released&#8221; event means ?
</I>
&gt;<i> 'do not cache but share' means the reply may still be shared with other
</I>&gt;<i> concurrent clients (eg. collapsed forwarding), but not to bother trying
</I>&gt;<i> to cache it.
</I>
Correct. To participate in that sharing, those concurrent clients must
already have a lock on this entry. In other words, &quot;concurrency&quot; here is
determined by having guaranteed access to the Store entry rather than
just overlapping transaction lifetimes.


&gt;<i> 'entry has been released' means something else already caused the disk
</I>&gt;<i> copy in cache to be removed or replaced.
</I>
Yes, and this is not limited to the old entries in the disk cache. Entry
&quot;release&quot; may happen even before the entry is earmarked for any of the
caches, and the release affects both disk and memory caches.


If you want to figure out why this response is not being cached, you may
need to figure out why the corresponding Store entry was marked for
release. Look for releaseRequest lines in the debugging cache.log that
match the same entry and try to determine why releaseRequest was called.

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020216.html">[squid-users] squid 4.x: decided: do not cache but share because the entry has been released
</A></li>
	<LI>Next message (by thread): <A HREF="020226.html">[squid-users] squid 4.x: decided: do not cache but share	because the entry has been released
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20221">[ date ]</a>
              <a href="thread.html#20221">[ thread ]</a>
              <a href="subject.html#20221">[ subject ]</a>
              <a href="author.html#20221">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
