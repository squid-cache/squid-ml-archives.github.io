<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 4.x: cache_peer PROXY_PROTOCOL support	with	squid parents
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%204.x%3A%20cache_peer%20PROXY_PROTOCOL%20support%0A%09with%09squid%20parents&In-Reply-To=%3C053401d4cbc5%24771fb6f0%24655f24d0%24%40ngtech.co.il%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020215.html">
   <LINK REL="Next"  HREF="020214.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 4.x: cache_peer PROXY_PROTOCOL support	with	squid parents</H1>
    <B>eliezer at ngtech.co.il</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%204.x%3A%20cache_peer%20PROXY_PROTOCOL%20support%0A%09with%09squid%20parents&In-Reply-To=%3C053401d4cbc5%24771fb6f0%24655f24d0%24%40ngtech.co.il%3E"
       TITLE="[squid-users] Squid 4.x: cache_peer PROXY_PROTOCOL support	with	squid parents">eliezer at ngtech.co.il
       </A><BR>
    <I>Sat Feb 23 22:16:46 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020215.html">[squid-users] Squid 4.x: cache_peer PROXY_PROTOCOL support with squid parents
</A></li>
        <LI>Next message (by thread): <A HREF="020214.html">[squid-users] squid 4.x: decided: do not cache but share because	the entry has been released
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20222">[ date ]</a>
              <a href="thread.html#20222">[ thread ]</a>
              <a href="subject.html#20222">[ subject ]</a>
              <a href="author.html#20222">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>What would be the reason to replace haproxy eactly?

Eliezer

----
Eliezer Croitoru
Linux System Administrator
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">eliezer at ngtech.co.il</A>


-----Original Message-----
From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; On Behalf Of David Touzeau
Sent: Saturday, February 23, 2019 18:31
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Squid 4.x: cache_peer PROXY_PROTOCOL support with squid parents


Currently we are working on Kerberos with Active Directory with Ha-proxy 
that
sends requests to squid using proxy_protocol.
Everything works great but we want to replace the ha-proxy with a squid.
In fact, we want to the squid client send the credentials information to a
squid parent in order to centralize ACLs on the parent proxy according to 
the user's login name.
If you have any suggestion ?

Best regards




-----Message d'origine-----
De : squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; De la part de
Amos Jeffries
Envoy&#233; : samedi 23 f&#233;vrier 2019 04:07
&#192; : <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Objet : Re: [squid-users] Squid 4.x: cache_peer PROXY_PROTOCOL support with
squid parents

On 23/02/19 2:45 am, David Touzeau wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> We would like to use this infrastructure:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Squid-cache client authentication 1--------
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>    | ----&gt; Squid Parent with ACLs per user/LDAP groups/Web filtering
</I>&gt;<i> ---&gt; INTERNET
</I>&gt;<i>
</I>&gt;<i> Squid-cache client authentication 2 --------
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Currently this kind of infrastructure cannot be done because the Squid
</I>&gt;<i> that acts as a client did not send credentials information to the
</I>&gt;<i> parent proxy.
</I>&gt;<i>
</I>
There are many types of &quot;client authentication&quot; that can exist in multiple
nested protocol layers:

* HTTP WWW-Auth* credentials

* HTTP Proxy-Auth* credentials

* TLS client X.509 certificate

* CONNECT tunnel Proxy-Auth*

* TCP connection-auth scheme credentials (NTLM, Negotiate)

* IPSEC key exchange

* EUI

* IDENT user name

Which one(s) are you talking about?


&gt;<i>
</I>&gt;<i> We think it should be done if the cache_peer is compliance with
</I>&gt;<i> PROXY_PROTOCOL rfc as the http_port is already compliance.
</I>&gt;<i>
</I>
What are you thinking PROXY would be doing to help with the situation?

Keep in mind that the PROXY header needs to be sent before any other bytes
on the server connection. Which immediately limits the cases where any type
of client information is available.


&gt;<i>
</I>&gt;<i> Do you have plans to add PROXY_PROTOCOL inside cache_peer feature ?
</I>&gt;<i>
</I>&gt;<i>
</I>
To whom are you addressing this question?


Cheers,
Amos
_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>

_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020215.html">[squid-users] Squid 4.x: cache_peer PROXY_PROTOCOL support with squid parents
</A></li>
	<LI>Next message (by thread): <A HREF="020214.html">[squid-users] squid 4.x: decided: do not cache but share because	the entry has been released
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20222">[ date ]</a>
              <a href="thread.html#20222">[ thread ]</a>
              <a href="subject.html#20222">[ subject ]</a>
              <a href="author.html#20222">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
