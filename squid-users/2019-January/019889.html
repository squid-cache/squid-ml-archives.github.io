<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Web Socket Support For Reverse Proxy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Web%20Socket%20Support%20For%20Reverse%20Proxy&In-Reply-To=%3Cadb7a9ca0632ed7776eab41a2c9d88d6%40dweimer.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019896.html">
   <LINK REL="Next"  HREF="019897.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Web Socket Support For Reverse Proxy</H1>
    <B>Dean E. Weimer</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Web%20Socket%20Support%20For%20Reverse%20Proxy&In-Reply-To=%3Cadb7a9ca0632ed7776eab41a2c9d88d6%40dweimer.net%3E"
       TITLE="[squid-users] Web Socket Support For Reverse Proxy">dweimer at dweimer.net
       </A><BR>
    <I>Thu Jan  3 16:48:19 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019896.html">[squid-users] Sslbump with multiple users and multiple ACLs for	each
</A></li>
        <LI>Next message (by thread): <A HREF="019897.html">[squid-users] Web Socket Support For Reverse Proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19889">[ date ]</a>
              <a href="thread.html#19889">[ thread ]</a>
              <a href="subject.html#19889">[ subject ]</a>
              <a href="author.html#19889">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am running Squid as a reverse proxy for several internally hosted 
websites, some HTTP and some HTTPS with wild card cerrtificate. We have 
recently setup a Atlassian Confluence Server, and are unable to edit any 
documents through the reverse proxy. On inspection of client web console 
logs we are receiving the following error.

failed: Error during WebSocket handshake: Unexpected response code: 200

I have been searching the Squid documentation and can't find anything on 
web sockets. Is it not supported in reverse proxy mode?

Currently running Squid 4.3, the cache peer for the specific server is.

cache_peer 10.20.10.25 parent 8490 0 ssl no-query no-digest originserver 
name=confluence_parent sslcapath=/usr/local/share/certs 
sslflags=DONT_VERIFY_PEER login=PASSTHRU front-end-https=on proxy-only
cache_peer_access confluence_parent allow CONFLUENCE SSL
cache_peer_access confluence_parent deny all

The confluence server is configured to use a proxy, and is aware that it 
is there. There instructions only discuss settings specific to Nginx and 
Apache, in both cases the Confluence connector is the same the 
difference is the settings for Nginx and Apache.

-- 
Thanks,
    Dean E. Weimer
    <A HREF="http://www.dweimer.net/">http://www.dweimer.net/</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019896.html">[squid-users] Sslbump with multiple users and multiple ACLs for	each
</A></li>
	<LI>Next message (by thread): <A HREF="019897.html">[squid-users] Web Socket Support For Reverse Proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19889">[ date ]</a>
              <a href="thread.html#19889">[ thread ]</a>
              <a href="subject.html#19889">[ subject ]</a>
              <a href="author.html#19889">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
