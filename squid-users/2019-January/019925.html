<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Any way to cause 512 byte alignment of data passed to ECAP?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Any%20way%20to%20cause%20512%20byte%20alignment%20of%20data%0A%20passed%20to%20ECAP%3F&In-Reply-To=%3C44d0b3a1-662e-ba56-ade9-401e46a52b5c%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019924.html">
   <LINK REL="Next"  HREF="019926.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Any way to cause 512 byte alignment of data passed to ECAP?</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Any%20way%20to%20cause%20512%20byte%20alignment%20of%20data%0A%20passed%20to%20ECAP%3F&In-Reply-To=%3C44d0b3a1-662e-ba56-ade9-401e46a52b5c%40measurement-factory.com%3E"
       TITLE="[squid-users] Any way to cause 512 byte alignment of data passed to ECAP?">rousskov at measurement-factory.com
       </A><BR>
    <I>Wed Jan  9 18:22:09 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019924.html">[squid-users] Any way to cause 512 byte alignment of data passed to	ECAP?
</A></li>
        <LI>Next message (by thread): <A HREF="019926.html">[squid-users] squid 4.5 , ssl bump and c-icap on google sites
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19925">[ date ]</a>
              <a href="thread.html#19925">[ thread ]</a>
              <a href="subject.html#19925">[ subject ]</a>
              <a href="author.html#19925">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 1/9/19 9:39 AM, Russel McDonald wrote:

&gt;<i> 1.&#160;&#160;&#160;&#160;&#160;&#160; Is there any way to configure squid to align the data passed to
</I>&gt;<i> ECAP to occur on 512 byte boundaries, of course allowing for any ending
</I>&gt;<i> partial size? 
</I>
No, it is not possible to force Squid to align HTTP message data made
available to adaptation services. If you have to do something like that,
you might be able to shape the incoming TCP data into properly sized
packets before Squid reads them, but even if you are successful at that
difficult task, Squid may aggregate or split TCP payloads for various
reasons.


&gt;<i> If that is not a current capability then is that an acceptable
</I>&gt;<i> feature someone could join and contribute?
</I>
I do not think so: In eCAP, it is the adapter that pulls message body
data from the host application! The host application (in your case
Squid) does not push data into the adapter. Thus, an adapter can pull as
much or as little as it wants, observing whatever &quot;alignment&quot; it needs.


&gt;<i> 2.&#160;&#160;&#160;&#160;&#160;&#160; When streaming a file, say playing a song (.m4a file), and
</I>&gt;<i> scroll bar is jumped to the end of the song, is there any way that the
</I>&gt;<i> ECAP callbacks specify where at in the file the stream restarted from?
</I>
No, not directly: eCAP does not know anything about files, songs, and
scroll bars. It works at the lower HTTP level while you are asking about
higher level metadata that would be specific to the playback
protocol/method being used on top of HTTP.


&gt;<i> Dumping and looking at the chunk contents in method
</I>&gt;<i> noteVbContentAvailable&#160;&#160;I don&#8217;t see any HTML that indicates any
</I>&gt;<i> offset/position/range. And in start enumerating the HTTP header entries
</I>&gt;<i> I don&#8217;t see any such either (adapted-&gt;header().visitEach(*visitor);).
</I>
*If* the plugin/code in the client browser has requested something
special after the &quot;scroll bar is jumped to the end of the song&quot; event,
then that special request will be reflected in HTTP request headers
and/or body. It could be the request URL itself, the Range header field,
some custom request header, or even something inside a POST request body.

All those things _can_ be analyzed by an eCAP adapter code, using
existing eCAP APIs, of course. It is adapter responsibility to map those
HTTP concepts to playback position or any similar applicaction-specific
info.


HTH,

Alex.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019924.html">[squid-users] Any way to cause 512 byte alignment of data passed to	ECAP?
</A></li>
	<LI>Next message (by thread): <A HREF="019926.html">[squid-users] squid 4.5 , ssl bump and c-icap on google sites
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19925">[ date ]</a>
              <a href="thread.html#19925">[ thread ]</a>
              <a href="subject.html#19925">[ subject ]</a>
              <a href="author.html#19925">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
