<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid 4.5, can't download certificate?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%204.5%2C%20can%27t%20download%20certificate%3F&In-Reply-To=%3C12b7851d-d93c-992e-56b6-70f942eea528%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="019976.html">
   <LINK REL="Next"  HREF="019978.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid 4.5, can't download certificate?</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%204.5%2C%20can%27t%20download%20certificate%3F&In-Reply-To=%3C12b7851d-d93c-992e-56b6-70f942eea528%40measurement-factory.com%3E"
       TITLE="[squid-users] squid 4.5, can't download certificate?">rousskov at measurement-factory.com
       </A><BR>
    <I>Fri Jan 18 15:31:47 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="019976.html">[squid-users] squid 4.5, can't download certificate?
</A></li>
        <LI>Next message (by thread): <A HREF="019978.html">[squid-users] squid 4.5, can't download certificate?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19977">[ date ]</a>
              <a href="thread.html#19977">[ thread ]</a>
              <a href="subject.html#19977">[ subject ]</a>
              <a href="author.html#19977">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 1/18/19 4:35 AM, Dmitry Melekhov wrote:
&gt;<i> 
</I>&gt;<i> 17.01.2019 21:02, Alex Rousskov &#1087;&#1080;&#1096;&#1077;&#1090;:
</I>&gt;&gt;<i> On 1/16/19 10:30 PM, Dmitry Melekhov wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 2019/01/17 09:18:21 kid1| ERROR: negotiating TLS on FD 55:
</I>&gt;&gt;&gt;<i> error:14090086:SSL routines:ssl3_get_server_certificate:certificate
</I>&gt;&gt;&gt;<i> verify failed (1/-1/0)
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> In access log:
</I>&gt;&gt;&gt;<i> 1547702300.945&#160;&#160;&#160;&#160;&#160; 0 192.168.22.229 NONE/503 329 GET
</I>&gt;&gt;&gt;<i> <A HREF="https://lkk-udm.esplus.ru/Services/Auth.asmx/Safe?">https://lkk-udm.esplus.ru/Services/Auth.asmx/Safe?</A> dm HIER_NONE/-
</I>&gt;&gt;&gt;<i> text/html
</I>&gt;&gt;&gt;<i> 1547702301.304&#160;&#160;&#160;&#160; 84 - TCP_MISS/404 162 GET
</I>&gt;&gt;&gt;<i> <A HREF="http://crt.sectigo.com/SectigoRSADomainValidationSecureServerCA.crt-/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff-GETmyip=-myport=0">http://crt.sectigo.com/SectigoRSADomainValidationSecureServerCA.crt-/ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff-GETmyip=-myport=0</A>
</I>&gt;&gt;&gt;<i> - HIER_DIRECT/91.199.212.52 text/html
</I>&gt;&gt;<i> Your Squid (or some helper) appears to be adding an
</I>&gt;&gt;<i> &quot;-/ffff...GETmyip=-myport=0&quot; suffix to the crt.sectigo.com URL,
</I>&gt;&gt;<i> resulting in a 404 response from that server.
</I>
&gt;<i> Yes, I suspected this, there is no helper which can add this, as far as
</I>&gt;<i> I know
</I>
&gt;<i> can squid add this
</I>
Squid itself does not add non-trivial paths to URLs. If your Squid does
not have a URL rewriter or an adaptation service, and the certificate
your Squid receives does not containt that weird URL, then this is
probably a Squid bug such as using an &quot;unterminated c-string&quot; when
forming the request URL. If you can reproduce, it may be fairly easy to
distinguish bugs from helpers from certificates as the source of this
problem using an ALL,9 cache.log.
 Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="019976.html">[squid-users] squid 4.5, can't download certificate?
</A></li>
	<LI>Next message (by thread): <A HREF="019978.html">[squid-users] squid 4.5, can't download certificate?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#19977">[ date ]</a>
              <a href="thread.html#19977">[ thread ]</a>
              <a href="subject.html#19977">[ subject ]</a>
              <a href="author.html#19977">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
