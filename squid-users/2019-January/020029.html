<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] How to definitively disable IPv6
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20definitively%20disable%20IPv6&In-Reply-To=%3Cf4c2f26f7bf045e38a1d973198e7ba2b%40ocgepvsw3101.ocr.priv%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020033.html">
   <LINK REL="Next"  HREF="020030.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] How to definitively disable IPv6</H1>
    <B>Troiano Alessio</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20definitively%20disable%20IPv6&In-Reply-To=%3Cf4c2f26f7bf045e38a1d973198e7ba2b%40ocgepvsw3101.ocr.priv%3E"
       TITLE="[squid-users] How to definitively disable IPv6">alessio.troiano at leonardocompany.com
       </A><BR>
    <I>Fri Jan 25 10:29:46 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020033.html">[squid-users] HELP! Ssl_bump - acl , dstdomain , denied by fqdn need ip
</A></li>
        <LI>Next message (by thread): <A HREF="020030.html">[squid-users] How to definitively disable IPv6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20029">[ date ]</a>
              <a href="thread.html#20029">[ thread ]</a>
              <a href="subject.html#20029">[ subject ]</a>
              <a href="author.html#20029">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,
I need to definitively solve the ipv6 (un)reachbility issue.
I state I read this topic: <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/dns-v4-first-on-ignored-td4658427.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/dns-v4-first-on-ignored-td4658427.html</A> but not found a solution. Amos wrote &#8220;Squid tests for IPv6 ability automatically by opening a socket on a private IP address, if that works the socket options are noted and used.&#8221;
Anyway I disable IPv6 on my Red Hat 7.4 with the following:
net.ipv6.conf.all.disable_ipv6 = 1
net.ipv6.conf.default.disable_ipv6 = 1
net.ipv6.conf.bond0.disable_ipv6 = 1
net.ipv6.conf.lo.disable_ipv6 = 1
Used the &#8220;dns_v4_first on&#8221; and also &#8220;tcp_outgoing_address 172.31.1.x all&#8221; on squid conf to force the use of IPv4.
Anyway squid try to connect to the IPv6 address instead of IPv4 and I&#8217;m not able to reach it:
C:\Users\atroiano&gt;nslookup download.pdfforge.org
Server:  espevmdxxxx.xxxx.prv
Address:  172.x.x.x

Risposta da un server non autorevole:
Nome:    download.pdfforge.org
Addresses:  2001:4860:4802:38::15
          2001:4860:4802:34::15
          2001:4860:4802:32::15
          2001:4860:4802:36::15
          216.239.32.21
          216.239.38.21
          216.239.36.21
          216.239.34.21
[<A HREF="https://lists.squid-cache.org/listinfo/squid-users">root at HUB-RM-PRX-03</A> ~]# tail -f /var/log/squid/rsa/access.log | grep pdfforge.org
%SQUID-4: 172.31.x.x 49444 [25/Jan/2019:11:02:58 +0100] &quot;GET <A HREF="http://download.pdfforge.org/download/pdfcreator/PDFCreator-stable">http://download.pdfforge.org/download/pdfcreator/PDFCreator-stable</A> HTTP/1.1&quot; download.pdfforge.org - - &quot;/download/pdfcreator/PDFCreator-stable&quot; 503 text/html 4545 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:64.0) Gecko/20100101 Firefox/64.0&quot; TCP_MISS:HIER_DIRECT 2001:4860:4802:38::15 80 0
Squid doesn&#8217;t try to connect to IPv4 addresses for this site and for many others.

What can I do?
My ISP is IPv4 only.

Thank you, Regards.

Il presente messaggio e-mail e ogni suo allegato devono intendersi indirizzati esclusivamente al destinatario indicato e considerarsi dal contenuto strettamente riservato e confidenziale. Se non siete l'effettivo destinatario o avete ricevuto il messaggio e-mail per errore, siete pregati di avvertire immediatamente il mittente e di cancellare il suddetto messaggio e ogni suo allegato dal vostro sistema informatico. Qualsiasi utilizzo, diffusione, copia o archiviazione del presente messaggio da parte di chi non ne &#232; il destinatario &#232; strettamente proibito e pu&#242; dar luogo a responsabilit&#224; di carattere civile e penale punibili ai sensi di legge.
Questa e-mail ha valore legale solo se firmata digitalmente ai sensi della normativa vigente.
________________________________
The contents of this email message and any attachments are intended solely for the addressee(s) and contain confidential and/or privileged information.
If you are not the intended recipient of this message, or if this message has been addressed to you in error, please immediately notify the sender and then delete this message and any attachments from your system. If you are not the intended recipient, you are hereby notified that any use, dissemination, copying, or storage of this message or its attachments is strictly prohibited. Unauthorized disclosure and/or use of information contained in this email message may result in civil and criminal liability. &#8220;
This e-mail has legal value according to the applicable laws only if it is digitally signed by the sender
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20190125/985ee26d/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20190125/985ee26d/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020033.html">[squid-users] HELP! Ssl_bump - acl , dstdomain , denied by fqdn need ip
</A></li>
	<LI>Next message (by thread): <A HREF="020030.html">[squid-users] How to definitively disable IPv6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20029">[ date ]</a>
              <a href="thread.html#20029">[ thread ]</a>
              <a href="subject.html#20029">[ subject ]</a>
              <a href="author.html#20029">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
