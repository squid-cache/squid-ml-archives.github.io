<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Non-standard proxy setup
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Non-standard%20proxy%20setup&In-Reply-To=%3Cadf806f395d24d45a575a0ee772759d3%40DG2MBX03-WYN.bell.corp.bce.ca%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020708.html">
   <LINK REL="Next"  HREF="020713.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Non-standard proxy setup</H1>
    <B>Tardif, Christian</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Non-standard%20proxy%20setup&In-Reply-To=%3Cadf806f395d24d45a575a0ee772759d3%40DG2MBX03-WYN.bell.corp.bce.ca%3E"
       TITLE="[squid-users] Non-standard proxy setup">christian.tardif at bell.ca
       </A><BR>
    <I>Tue Jul  9 13:10:21 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020708.html">[squid-users] Gmail issues Windows 10
</A></li>
        <LI>Next message (by thread): <A HREF="020713.html">[squid-users] Non-standard proxy setup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20712">[ date ]</a>
              <a href="thread.html#20712">[ thread ]</a>
              <a href="subject.html#20712">[ subject ]</a>
              <a href="author.html#20712">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I'm trying to figure out how to make the following setup work:

I have a node on which there's an application which isn't proxy aware so basically, the only remaining option would be to use a transparent proxy. But my corporate proxy isn't a transparent proxy. So I have to build this in two layers. My solution would be to:


1)     Have a squid proxy on the node's router host configured as a transparent proxy for both HTTP and HTTPS

2)     Have this squid proxy configured to talk to the parent host, which would be my corporate proxy

3)     Have this squid proxy able to decide if a particular flow should go to the corporate proxy or connect &quot;directly&quot; with the destination host

I've been successful at tasks #2 and #3 (well, in fact, I did it with tinyproxy but stopped because of task #1

I've partly succedded at task #1. In fact, it worked for HTTP. I haven't figured out how to do it for HTTPS. My questions are:


1)     I do not understand how the client would be able to perform a CONNECT to reach squid in HTTPS. So I'm assuming that there's some other magic.

2)     The second thing I don't understand is the certificates management. Let's say my node tries to reach <A HREF="https://www.google.com">https://www.google.com</A> but does not know anything about the proxy. I assume that the client will get the certificate from squid in some way, but would probably expect to receive a certificate from Google. How would that work?

Can someone help me?   I'm running out of options...

Thanks,

Christian Tardif
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20190709/fe8a972b/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20190709/fe8a972b/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020708.html">[squid-users] Gmail issues Windows 10
</A></li>
	<LI>Next message (by thread): <A HREF="020713.html">[squid-users] Non-standard proxy setup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20712">[ date ]</a>
              <a href="thread.html#20712">[ thread ]</a>
              <a href="subject.html#20712">[ subject ]</a>
              <a href="author.html#20712">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
