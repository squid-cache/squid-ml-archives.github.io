<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Non-standard proxy setup
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Non-standard%20proxy%20setup&In-Reply-To=%3C10042704-0095-8a59-d146-b202ff09394e%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020753.html">
   <LINK REL="Next"  HREF="020755.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Non-standard proxy setup</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Non-standard%20proxy%20setup&In-Reply-To=%3C10042704-0095-8a59-d146-b202ff09394e%40measurement-factory.com%3E"
       TITLE="[squid-users] Non-standard proxy setup">rousskov at measurement-factory.com
       </A><BR>
    <I>Tue Jul 16 18:24:38 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020753.html">[squid-users] squid-users Digest, Vol 59, Issue 12
</A></li>
        <LI>Next message (by thread): <A HREF="020755.html">[squid-users] Possible to user reply_header_add directive with acl random access list ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20754">[ date ]</a>
              <a href="thread.html#20754">[ thread ]</a>
              <a href="subject.html#20754">[ subject ]</a>
              <a href="author.html#20754">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 7/16/19 1:51 PM, Arunabha Saha wrote:
&gt;<i> i did get it working with the latest 5.0.0 (unreleased) code
</I>&gt;<i> in github.    The configuration has to be  &quot;ssl-bump client-first ..&quot;
</I>&gt;<i> for this to work. Does that sound right?
</I>

No, it does not, both because the deprecated &quot;client-first&quot; action
should not be used in moderns Squids, and because supported SslBump
actions should work through peers IIRC (which action is the right one
for you depends on your exact needs -- not every action will work for
any given use case, of course).

Alex.

&gt;&gt;<i> When replying, please edit your Subject line so it is more specific
</I>&gt;&gt;<i> than &quot;Re: Contents of squid-users digest...&quot;
</I>

&gt;&gt;<i> On 7/10/19 7:44 PM, Arunabha Saha wrote:
</I>&gt;&gt;&gt;&gt;<i> The client will attempt to open a TLS/TCP connection to the origin
</I>&gt;&gt;&gt;&gt;<i> server. Your router (or some such) will redirect client TLS/TCP bytes to
</I>&gt;&gt;&gt;&gt;<i> your Squid's https_port. If configured correctly, Squid will accept that
</I>&gt;&gt;&gt;&gt;<i> TCP connection and wrap/forward it into/inside an HTTP CONNECT tunnel
</I>&gt;&gt;&gt;&gt;<i> through the corporate proxy.
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> i don't see squid
</I>&gt;&gt;&gt;<i> wrap the connection to parent proxy in a HTTP CONNECT tunnel.
</I>&gt;&gt;&gt;<i>    User -----&gt;Squid(Transparent Proxy)---------&gt;Parent Proxy------&gt;Internet.
</I>&gt;&gt;&gt;<i>    I need to see a CONNECT tunnel between Squid(Transparent Proxy)
</I>&gt;&gt;&gt;<i> and Parent Proxy but I don't.   Based on another thread, Is this
</I>&gt;&gt;&gt;<i> something that works only starting squid 4.X.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I do not remember for sure, but you may need a development version of
</I>&gt;&gt;<i> Squid (future v5) or an unofficial patch to forward intercepted tunnels
</I>&gt;&gt;<i> to a cache peer. If SslBump-related peering support is indeed required
</I>&gt;&gt;<i> to support such forwarding, then please see this seemingly unrelated bug
</I>&gt;&gt;<i> report for more details and options:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   <A HREF="https://bugs.squid-cache.org/show_bug.cgi?id=4968">https://bugs.squid-cache.org/show_bug.cgi?id=4968</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Alex.
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020753.html">[squid-users] squid-users Digest, Vol 59, Issue 12
</A></li>
	<LI>Next message (by thread): <A HREF="020755.html">[squid-users] Possible to user reply_header_add directive with acl random access list ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20754">[ date ]</a>
              <a href="thread.html#20754">[ thread ]</a>
              <a href="subject.html#20754">[ subject ]</a>
              <a href="author.html#20754">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
