<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid external address to be sequential from list	of addresses
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20external%20address%20to%20be%20sequential%20from%20list%0A%09of%20addresses&In-Reply-To=%3Cc69bcf50-9c61-e965-c8f9-9f347ca1a7b3%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020788.html">
   <LINK REL="Next"  HREF="020791.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid external address to be sequential from list	of addresses</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20external%20address%20to%20be%20sequential%20from%20list%0A%09of%20addresses&In-Reply-To=%3Cc69bcf50-9c61-e965-c8f9-9f347ca1a7b3%40measurement-factory.com%3E"
       TITLE="[squid-users] squid external address to be sequential from list	of addresses">rousskov at measurement-factory.com
       </A><BR>
    <I>Sat Jul 20 20:09:33 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020788.html">[squid-users] squid external address to be sequential from list of	addresses
</A></li>
        <LI>Next message (by thread): <A HREF="020791.html">[squid-users] squdi access.log
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20793">[ date ]</a>
              <a href="thread.html#20793">[ thread ]</a>
              <a href="subject.html#20793">[ subject ]</a>
              <a href="author.html#20793">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 7/20/19 6:49 AM, --Ahmad-- wrote:

&gt;<i> i need squid to have sequential outgoing addresses over specified list .
</I>&gt;<i> 
</I>&gt;<i> say i want an ip:port for that connection .
</I>&gt;<i> and have pool of 10 address .
</I>&gt;<i> is it possible with squid to match 1st ip as external for 1st request .
</I>&gt;<i> 2nd ip for 2nd request . 
</I>&gt;<i> 3rd ip for 3rd request 
</I>&gt;<i> 
</I>&gt;<i> until reach end , then the cycle span again ?
</I>&gt;<i> 
</I>&gt;<i> im thinking of how can do it   with marking acl or so ?
</I>
If you need to round-robin outgoing addresses for requests on the same
persistent connection, then a long list of annotation ACLs may be
sufficient (but awkward!) way of doing that. If you understand how
annotations helped avoid multiple matches in your random-based
configuration, you may be able to build the corresponding configuration
for this use case as well. If not, please post your failed attempts with
analysis why you think they should have worked and ask questions -- this
will avoid the impression of abusing the mailing list for doing your own
legwork.

If you need to round-robin outgoing address across all cache misses,
then you will probably have to either write an external ACL (that sets
the right annotation) or add a new &quot;round robin&quot; ACL type to Squid
sources. The latter requires development, of course. I recommend
starting with the external ACL if you need this functionality (and later
optimize with a new built-in ACL type if really needed).

In all of these use cases, please note that you are configuring which
outgoing address Squid should use. The order of those
decisions/assignments may not match the order in which Squid opens new
connections and/or sends requests. Connection opening delays and other
factors may change the order, deviating from the strict round-robin rules.


HTH,

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020788.html">[squid-users] squid external address to be sequential from list of	addresses
</A></li>
	<LI>Next message (by thread): <A HREF="020791.html">[squid-users] squdi access.log
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20793">[ date ]</a>
              <a href="thread.html#20793">[ thread ]</a>
              <a href="subject.html#20793">[ subject ]</a>
              <a href="author.html#20793">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
