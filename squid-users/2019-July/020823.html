<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Unable to limit bandwidth (squid 4.7.2 )
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Unable%20to%20limit%20bandwidth%20%28squid%204.7.2%20%29&In-Reply-To=%3CCA%2Bd%3D%3DoEeORkzpGb5x%2BuDG4Ca5zK3WhAfwmM6ms%2BG4E1SDr8Mww%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020822.html">
   <LINK REL="Next"  HREF="020825.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Unable to limit bandwidth (squid 4.7.2 )</H1>
    <B>Service MV</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Unable%20to%20limit%20bandwidth%20%28squid%204.7.2%20%29&In-Reply-To=%3CCA%2Bd%3D%3DoEeORkzpGb5x%2BuDG4Ca5zK3WhAfwmM6ms%2BG4E1SDr8Mww%40mail.gmail.com%3E"
       TITLE="[squid-users] Unable to limit bandwidth (squid 4.7.2 )">service.mv at gmail.com
       </A><BR>
    <I>Tue Jul 30 13:22:18 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020822.html">[squid-users] Unable to limit bandwidth (squid 4.7.2 )
</A></li>
        <LI>Next message (by thread): <A HREF="020825.html">[squid-users] Unable to limit bandwidth (squid 4.7.2 )
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20823">[ date ]</a>
              <a href="thread.html#20823">[ thread ]</a>
              <a href="subject.html#20823">[ subject ]</a>
              <a href="author.html#20823">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Just to explain clearly, my goal is that no user of my LAN can download
more than 15 megabits/s, because some downloads consume me 100 magabits/s
leaving the rest of the users offline.
Since squid calculates in bytes, it would be: 1966080 bytes the limit that
I want to establish for any user of my LAN
Thank you very much for your help.

El mar., 30 de jul. de 2019 a la(s) 09:57, Service MV (<A HREF="https://lists.squid-cache.org/listinfo/squid-users">service.mv at gmail.com</A>)
escribi&#243;:

&gt;<i> Thanks for patience.
</I>&gt;<i>
</I>&gt;<i> I modify the line:
</I>&gt;<i> #                                 All net setting
</I>&gt;<i>                                                           Individual client
</I>&gt;<i> setting
</I>&gt;<i> #                                 first 15MB of file download full speed,
</I>&gt;<i> then continue at 10MB/s            first 10MB of file download full speed,
</I>&gt;<i> then continue at 7MB/s
</I>&gt;<i> delay_parameters 1      1310720/1966080
</I>&gt;<i>                                                            917504/1310720
</I>&gt;<i>
</I>&gt;<i> In this way I can make the Delay Pool work.
</I>&gt;<i> But I'm still not sure if I'm using my symmetrical 100Mb/s bandwidth
</I>&gt;<i> correctly.
</I>&gt;<i>
</I>&gt;<i> Any comments on that?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> El lun., 29 de jul. de 2019 a la(s) 16:58, Service MV (
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">service.mv at gmail.com</A>) escribi&#243;:
</I>&gt;<i>
</I>&gt;&gt;<i> Hello everyone!
</I>&gt;&gt;<i> I have a 100/100 Mbit/s internet link and I am trying unsuccessfully to
</I>&gt;&gt;<i> limit downloads to a maximum of 15Mb/s of any IP on my network. Some
</I>&gt;&gt;<i> downloads consume the entire link.
</I>&gt;&gt;<i> I copy my settings to help me see where I'm going wrong. Thank you very
</I>&gt;&gt;<i> much!
</I>&gt;&gt;<i> Gabriel
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> PS.: squid -v '--enable-delay-pools'
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> #
</I>&gt;&gt;<i> # Recommended minimum configuration:
</I>&gt;&gt;<i> #
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> # Example rule allowing access from your local networks.
</I>&gt;&gt;<i> # Adapt to list your (internal) IP networks from where browsing
</I>&gt;&gt;<i> # should be allowed
</I>&gt;&gt;<i> #acl localnet src 0.0.0.1-0.255.255.255 # RFC 1122 &quot;this&quot; network (LAN)
</I>&gt;&gt;<i> acl localnet src 10.10.8.0/22 # (My LAN)
</I>&gt;&gt;<i> #acl largefiledown src 10.10.8.0/22 # Limitar bajada y subida a 10Mbps
</I>&gt;&gt;<i> #acl localnet src 10.0.0.0/8 # RFC 1918 local private network (LAN)
</I>&gt;&gt;<i> #acl localnet src 100.64.0.0/10 # RFC 6598 shared address space (CGN)
</I>&gt;&gt;<i> #acl localnet src 169.254.0.0/16 # RFC 3927 link-local (directly
</I>&gt;&gt;<i> plugged) machines
</I>&gt;&gt;<i> #acl localnet src 172.16.0.0/12 # RFC 1918 local private network (LAN)
</I>&gt;&gt;<i> #acl localnet src 192.168.0.0/16 # RFC 1918 local private network (LAN)
</I>&gt;&gt;<i> #acl localnet src fc00::/7       # RFC 4193 local private network range
</I>&gt;&gt;<i> #acl localnet src fe80::/10       # RFC 4291 link-local (directly
</I>&gt;&gt;<i> plugged) machines
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> acl SSL_ports port 443
</I>&gt;&gt;<i> acl Safe_ports port 80 # http
</I>&gt;&gt;<i> acl Safe_ports port 21 # ftp
</I>&gt;&gt;<i> acl Safe_ports port 443 # https
</I>&gt;&gt;<i> acl Safe_ports port 70 # gopher
</I>&gt;&gt;<i> acl Safe_ports port 210 # wais
</I>&gt;&gt;<i> acl Safe_ports port 1025-65535 # unregistered ports
</I>&gt;&gt;<i> acl Safe_ports port 280 # http-mgmt
</I>&gt;&gt;<i> acl Safe_ports port 488 # gss-http
</I>&gt;&gt;<i> acl Safe_ports port 591 # filemaker
</I>&gt;&gt;<i> acl Safe_ports port 777 # multiling http
</I>&gt;&gt;<i> acl CONNECT method CONNECT
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> acl LS_whitedomains dstdomain &quot;/etc/squid/acl/whitedomains.txt&quot;
</I>&gt;&gt;<i> acl LS_blackdomains dstdomain &quot;/etc/squid/acl/blackdomains.txt&quot;
</I>&gt;&gt;<i> acl LS_malicius dstdomain &quot;/etc/squid/acl/malicius.txt&quot;
</I>&gt;&gt;<i> acl LS_ads-tracking dstdomain &quot;/etc/squid/acl/ads-tracking.txt&quot;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> #
</I>&gt;&gt;<i> # Recommended minimum Access Permission configuration:
</I>&gt;&gt;<i> #
</I>&gt;&gt;<i> # Deny requests to certain unsafe ports
</I>&gt;&gt;<i> http_access deny !Safe_ports
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> # Deny CONNECT to other than secure SSL ports
</I>&gt;&gt;<i> http_access deny CONNECT !SSL_ports
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> # Only allow cachemgr access from localhost
</I>&gt;&gt;<i> http_access allow localhost manager
</I>&gt;&gt;<i> http_access deny manager
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> # We strongly recommend the following be uncommented to protect innocent
</I>&gt;&gt;<i> # web applications running on the proxy server who think the only
</I>&gt;&gt;<i> # one who can access services on &quot;localhost&quot; is a local user
</I>&gt;&gt;<i> #http_access deny to_localhost
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> #
</I>&gt;&gt;<i> # INSERT YOUR OWN RULE(S) HERE TO ALLOW ACCESS FROM YOUR CLIENTS
</I>&gt;&gt;<i> #
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> delay_pools 1
</I>&gt;&gt;<i> delay_class 1 2
</I>&gt;&gt;<i> delay_parameters 1 103809024/103809024 15728640/15728640 # (98/98
</I>&gt;&gt;<i> megabytes in bytes and 15/15 megabytes in bytes)
</I>&gt;&gt;<i> delay_access 1 allow localnet
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> http_access deny LS_blackdomains
</I>&gt;&gt;<i> http_access allow LS_whitedomains
</I>&gt;&gt;<i> http_access deny LS_malicius
</I>&gt;&gt;<i> http_access deny LS_ads-tracking
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> # Example rule allowing access from your local networks.
</I>&gt;&gt;<i> # Adapt localnet in the ACL section to list your (internal) IP networks
</I>&gt;&gt;<i> # from where browsing should be allowed
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> http_access allow localnet
</I>&gt;&gt;<i> http_access allow localhost
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> # And finally deny all other access to this proxy
</I>&gt;&gt;<i> http_access deny all
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> # Squid normally listens to port 3128
</I>&gt;&gt;<i> http_port 3128
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> # Uncomment and adjust the following to add a disk cache directory.
</I>&gt;&gt;<i> #cache_dir ufs /var/spool/squid 100 16 256
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> # Leave coredumps in the first cache dir
</I>&gt;&gt;<i> coredump_dir /var/spool/squid
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> #
</I>&gt;&gt;<i> # Add any of your own refresh_pattern entries above these.
</I>&gt;&gt;<i> #
</I>&gt;&gt;<i> refresh_pattern ^ftp: 1440 20% 10080
</I>&gt;&gt;<i> refresh_pattern ^gopher: 1440 0% 1440
</I>&gt;&gt;<i> refresh_pattern -i (/cgi-bin/|\?) 0 0% 0
</I>&gt;&gt;<i> refresh_pattern . 0 20% 4320
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> # Other settings
</I>&gt;&gt;<i> quick_abort_min 0 KB
</I>&gt;&gt;<i> quick_abort_max 0 KB
</I>&gt;&gt;<i> read_timeout 5 minutes
</I>&gt;&gt;<i> request_timeout 3 minutes
</I>&gt;&gt;<i> shutdown_lifetime 0 seconds
</I>&gt;&gt;<i> ipcache_size 2048
</I>&gt;&gt;<i> fqdncache_size 4096
</I>&gt;&gt;<i> forwarded_for off
</I>&gt;&gt;<i> visible_hostname s-px02
</I>&gt;&gt;<i> httpd_suppress_version_string on
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20190730/ddf88efa/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20190730/ddf88efa/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020822.html">[squid-users] Unable to limit bandwidth (squid 4.7.2 )
</A></li>
	<LI>Next message (by thread): <A HREF="020825.html">[squid-users] Unable to limit bandwidth (squid 4.7.2 )
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20823">[ date ]</a>
              <a href="thread.html#20823">[ thread ]</a>
              <a href="subject.html#20823">[ subject ]</a>
              <a href="author.html#20823">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
