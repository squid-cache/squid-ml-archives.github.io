<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 3.5 Disable CONNECT TUNNEL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203.5%20Disable%20CONNECT%20TUNNEL&In-Reply-To=%3C646bb9c7-a17b-50f4-e4fd-e8b3f22d99ac%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020619.html">
   <LINK REL="Next"  HREF="020621.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 3.5 Disable CONNECT TUNNEL</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203.5%20Disable%20CONNECT%20TUNNEL&In-Reply-To=%3C646bb9c7-a17b-50f4-e4fd-e8b3f22d99ac%40treenet.co.nz%3E"
       TITLE="[squid-users] Squid 3.5 Disable CONNECT TUNNEL">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Jun  7 08:44:28 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020619.html">[squid-users] Squid 3.5 Disable CONNECT TUNNEL
</A></li>
        <LI>Next message (by thread): <A HREF="020621.html">[squid-users] Questions about connection pooling to origins when using squid as a HTTPS forward egress proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20620">[ date ]</a>
              <a href="thread.html#20620">[ thread ]</a>
              <a href="subject.html#20620">[ subject ]</a>
              <a href="author.html#20620">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 7/06/19 6:50 pm, Techie wrote:
&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> Previously running squid 3.1 on Centos 6, recently went to Centos7 with
</I>&gt;<i> squid 3.5.
</I>&gt;<i> Since the upgrade I have been receiving SSL errors connecting to https
</I>&gt;<i> sites.
</I>&gt;<i> 
</I>&gt;<i> I notice in the log for squid 3.1I have entries like this when hitting
</I>&gt;<i> https sites
</I>&gt;<i> &#160;172.16.80.25 TCP_MISS/200 6086 CONNECT www.securesite.com:443
</I>&gt;<i> &lt;<A HREF="http://www.securesite.com:443">http://www.securesite.com:443</A>&gt; - DIRECT/x.x.x.x
</I>&gt;<i> 
</I>&gt;<i> Now they look to be utilizing TCP_TUNNEL as seen below with squid 3.5
</I>&gt;<i> 192.168.2.10 TCP_TUNNEL/200 4371 CONNECT www.securesite.com:443
</I>&gt;<i> &lt;<A HREF="http://www.securesite.com:443">http://www.securesite.com:443</A>&gt; - HIER_DIRECT/x.x.x.x&#160;
</I>&gt;<i> 
</I>&gt;<i> Is there a way to disable the TCP_TUNNEL feature?
</I>

The &quot;MISS&quot; earlier was always a lie, implying that the cache had some
involvement. These transactions are simply not involving cache in any
way. The old version log entries that had CONNECT method with &quot;TCP_MISS&quot;
are identical to what the newer versions log as CONNECT with &quot;TCP_TUNNEL&quot;

If you are seeing &quot;TUNNEL&quot; logged, then Squid is not touching that
traffic at all. Any TLS/SSL problems are an issue between the client and
server directly talking that protocol to each other - Squid is
irrelevant to traffic problems.

If you are okay telling us what HTTPS errors exactly are showing up
perhaps someone may be able to help with or at least identify where the
problem actually is.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020619.html">[squid-users] Squid 3.5 Disable CONNECT TUNNEL
</A></li>
	<LI>Next message (by thread): <A HREF="020621.html">[squid-users] Questions about connection pooling to origins when using squid as a HTTPS forward egress proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20620">[ date ]</a>
              <a href="thread.html#20620">[ thread ]</a>
              <a href="subject.html#20620">[ subject ]</a>
              <a href="author.html#20620">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
