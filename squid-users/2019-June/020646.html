<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid Listening on many ports
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Listening%20on%20many%20ports&In-Reply-To=%3C5df0bfab-88f4-1957-5191-bee7211ebecc%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020644.html">
   <LINK REL="Next"  HREF="020649.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid Listening on many ports</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Listening%20on%20many%20ports&In-Reply-To=%3C5df0bfab-88f4-1957-5191-bee7211ebecc%40treenet.co.nz%3E"
       TITLE="[squid-users] Squid Listening on many ports">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Jun 18 05:56:40 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020644.html">[squid-users] Squid Listening on many ports
</A></li>
        <LI>Next message (by thread): <A HREF="020649.html">[squid-users] Squid Process
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20646">[ date ]</a>
              <a href="thread.html#20646">[ thread ]</a>
              <a href="subject.html#20646">[ subject ]</a>
              <a href="author.html#20646">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 18/06/19 8:33 am, johnr wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I am wanting to run squid listening on many ports (~100-200). From prior
</I>&gt;<i> mailing list questions
</I>&gt;<i> (<A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/squid-with-multiple-ips-is-listenting-to-some-ips-with-port-and-not-all-of-ips-td4668784.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/squid-with-multiple-ips-is-listenting-to-some-ips-with-port-and-not-all-of-ips-td4668784.html</A>),
</I>&gt;<i> I see how this is possible. But, I was curious about an answer in that
</I>&gt;<i> thread...
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> A brief glance through the squid code seems as if there is support for
</I>&gt;<i> epoll... In that case, shouldn't listening on multiple ports not have the
</I>&gt;<i> performance cost mentioned above? 
</I>&gt;<i> 
</I>
No. The problem is that each &quot;port with an I/O&quot; needs to be looked up in
the set of LISTEN sockets.

It does not matter whether the I/O event handler produces a small set of
I/O-only sockets (epoll, kqueue), or a large set with a small sub-set
marked as I/O pending (select, poll). Only the ones with I/O pending
have the listener lookup. When the listener set is large they both have
the same CPU loading side effect(s).


PS. please be aware (as you can see above) that quoting with HTML via
the Nabble forum does not make it to this plain-text mailing list.


Cheers
Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020644.html">[squid-users] Squid Listening on many ports
</A></li>
	<LI>Next message (by thread): <A HREF="020649.html">[squid-users] Squid Process
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20646">[ date ]</a>
              <a href="thread.html#20646">[ thread ]</a>
              <a href="subject.html#20646">[ subject ]</a>
              <a href="author.html#20646">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
