<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Prepending a string to cache_peer username
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Prepending%20a%20string%20to%20cache_peer%20username&In-Reply-To=%3C78cca6e1-db9d-cb31-9e0f-624143647909%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020647.html">
   <LINK REL="Next"  HREF="020655.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Prepending a string to cache_peer username</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Prepending%20a%20string%20to%20cache_peer%20username&In-Reply-To=%3C78cca6e1-db9d-cb31-9e0f-624143647909%40treenet.co.nz%3E"
       TITLE="[squid-users] Prepending a string to cache_peer username">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Jun 18 12:15:55 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020647.html">[squid-users] Prepending a string to cache_peer username
</A></li>
        <LI>Next message (by thread): <A HREF="020655.html">[squid-users] Prepending a string to cache_peer username
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20648">[ date ]</a>
              <a href="thread.html#20648">[ thread ]</a>
              <a href="subject.html#20648">[ subject ]</a>
              <a href="author.html#20648">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 18/06/19 5:01 pm, ngtech1ltd wrote:
&gt;<i> I believe that eCAP or ICAP can do the trick for you.
</I>&gt;<i> 
</I>&gt;<i> However I am not sure if it&#8217;s a good thing to pass usernames and
</I>&gt;<i> password in WWW Http requests.
</I>&gt;<i> 
</I>
Only if there are no other peers, and no traffic going direct either.

Otherwise you end up broadcasting the users credentials everywhere.
Unfortunately that applies to all the header editing by Squid itself as
well.


On 17/06/19 11:46 pm, Charlie Orford wrote:
&gt;<i> Annoyingly, one of our upstream cache_peers requires a fixed string to
</I>&gt;<i> be prepended to client usernames.
</I>
What type of fixed string exactly?


&gt;<i>
</I>&gt;<i> I'm aware the login= option for cache_peer allows substituting * with
</I>&gt;<i> client provided username and appending a fixed string to this.
</I>&gt;<i>
</I>
That is wrong. There is no change to the username at all.

&quot;cache_peer ... login=*:foo &quot; takes the username from the client and the
password &quot;foo&quot; to login to that peer. The fact that Basic is the only
type of login is incidental, and the 'append' an illusion from the Basic
auth credential syntax being username then password. Other types may be
added in future that use different credential encoding.


&gt;<i> Is there a way to achieve something similar if we need to prepend rather
</I>&gt;<i> than append a string (perhaps a clever ACL/external_auth trick we could
</I>&gt;<i> use to modify client usernames destined for this peer)?
</I>&gt;<i>
</I>
All the ways which come to mind impose unreasonable restrictions. Like
Eliezers idea 100% of traffic has to go to that peer or not being able
to authenticate the users in your own proxy etc.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020647.html">[squid-users] Prepending a string to cache_peer username
</A></li>
	<LI>Next message (by thread): <A HREF="020655.html">[squid-users] Prepending a string to cache_peer username
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20648">[ date ]</a>
              <a href="thread.html#20648">[ thread ]</a>
              <a href="subject.html#20648">[ subject ]</a>
              <a href="author.html#20648">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
