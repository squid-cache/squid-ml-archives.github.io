<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid4 forward proxy to upgrade from ws to wss
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid4%20forward%20proxy%20to%20upgrade%20from%20ws%20to%20wss&In-Reply-To=%3Cb3731828-8005-ebda-9cab-47eacc74505e%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020656.html">
   <LINK REL="Next"  HREF="020658.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid4 forward proxy to upgrade from ws to wss</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid4%20forward%20proxy%20to%20upgrade%20from%20ws%20to%20wss&In-Reply-To=%3Cb3731828-8005-ebda-9cab-47eacc74505e%40treenet.co.nz%3E"
       TITLE="[squid-users] Squid4 forward proxy to upgrade from ws to wss">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Jun 19 06:31:12 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020656.html">[squid-users] Squid4 forward proxy to upgrade from ws to wss
</A></li>
        <LI>Next message (by thread): <A HREF="020658.html">[squid-users] Squid4 forward proxy to upgrade from ws to wss
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20657">[ date ]</a>
              <a href="thread.html#20657">[ thread ]</a>
              <a href="subject.html#20657">[ subject ]</a>
              <a href="author.html#20657">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 19/06/19 4:13 pm, Satyanarayana, Shekhar wrote:
&gt;<i> Hi Squid Community,
</I>&gt;<i> 
</I>&gt;<i> I am relatively new to Squid and I am facing the following issue, would
</I>&gt;<i> truly appreciate if you could help.
</I>&gt;<i> 
</I>&gt;<i> Squid4.6 is used as a forward proxy to convert all traffic to secure
</I>&gt;<i> traffic.
</I>&gt;<i> 
</I>&gt;<i> The configuration of squid is very simple, it allows all traffic and
</I>&gt;<i> uses urlrewrite.pl to replace &quot;http&quot; to &quot;https&quot;.
</I>
What you are doing is actually the opposite to secure. Letting the
server think the traffic is secure so it passes on confidential or
privacy sensitive information - then exposing all that within clear-text
HTTP and again within the client itself.


&gt;<i> 
</I>&gt;<i> Question:
</I>&gt;<i> 
</I>&gt;<i> 1.Is there any way to upgrade a websocket connection to secure websocket
</I>&gt;<i> using squid4.6?
</I>&gt;<i> 
</I>
No. Squid does not support WebSockets natively.


&gt;<i> 2.Or say I use wss-client (without certificate) and a wss-server(with
</I>&gt;<i> certificates), is there a way to inform squid to use its own
</I>&gt;<i> certificates even mentioned in &quot;tls_outgoing_options&quot; to establish the
</I>&gt;<i> connection?
</I>&gt;<i> 
</I>
What Squid does is enact the CONNECT or GET request of the HTTP messages
you see with wireshark - excluding the Upgrade HTTP feature you may see
being attempted.

For the CONNECT WebSockets happens inside the tunnel. With no
interference by Squid.

For the GET either the server accepts the fallback to HTTP response. Or
rejects it and the client is expected to fallback itself to another
method of communication. eg WebSockets native port or a CONNECT tunnel.

You cannot simply turn a GET request onto a bi-directional binary
tunnel. Nor a bi-directional tunnel into a GET response. They are
entirely different syntax and incompatible concepts / semantics.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020656.html">[squid-users] Squid4 forward proxy to upgrade from ws to wss
</A></li>
	<LI>Next message (by thread): <A HREF="020658.html">[squid-users] Squid4 forward proxy to upgrade from ws to wss
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20657">[ date ]</a>
              <a href="thread.html#20657">[ thread ]</a>
              <a href="subject.html#20657">[ subject ]</a>
              <a href="author.html#20657">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
