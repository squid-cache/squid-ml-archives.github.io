<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid4 forward proxy to upgrade from ws to wss
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid4%20forward%20proxy%20to%20upgrade%20from%20ws%20to%20wss&In-Reply-To=%3C08D74A92-90D1-469F-B053-6FB7485C6BD5%40hpe.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020657.html">
   <LINK REL="Next"  HREF="020660.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid4 forward proxy to upgrade from ws to wss</H1>
    <B>Nersisyan, Roman</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid4%20forward%20proxy%20to%20upgrade%20from%20ws%20to%20wss&In-Reply-To=%3C08D74A92-90D1-469F-B053-6FB7485C6BD5%40hpe.com%3E"
       TITLE="[squid-users] Squid4 forward proxy to upgrade from ws to wss">roman.nersisyan at hpe.com
       </A><BR>
    <I>Wed Jun 19 13:12:50 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020657.html">[squid-users] Squid4 forward proxy to upgrade from ws to wss
</A></li>
        <LI>Next message (by thread): <A HREF="020660.html">[squid-users] How to enable proxy protocol v2 on squid version	4.6.1, and NLB
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20658">[ date ]</a>
              <a href="thread.html#20658">[ thread ]</a>
              <a href="subject.html#20658">[ subject ]</a>
              <a href="author.html#20658">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thank you, Amos,

In scenario that Shekhar described it is acceptable to have unsecure clinet&lt;-&gt;squid communication. There would be actually only one client and and the difficulty we are facing is that our websocket client implementation is unable to interact with specific certificates using openssl. Ultimate goal is that client (via squid) should represent to server certificates that openssl have access. Thus, we are considering squid. 

Based on your answer I assume it is not possible to configure squid in such a way, please correct me if I'm wrong.
Seems our scenario is similar to the option #3 described here: <A HREF="http://lists.squid-cache.org/pipermail/squid-users/2017-January/013953.html">http://lists.squid-cache.org/pipermail/squid-users/2017-January/013953.html</A>


Thanks,
Roman
 

&#65279;On 6/18/19, 11:31 PM, &quot;squid-users on behalf of Amos Jeffries&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A> on behalf of <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt; wrote:

    On 19/06/19 4:13 pm, Satyanarayana, Shekhar wrote:
    &gt; Hi Squid Community,
    &gt; 
    &gt; I am relatively new to Squid and I am facing the following issue, would
    &gt; truly appreciate if you could help.
    &gt; 
    &gt; Squid4.6 is used as a forward proxy to convert all traffic to secure
    &gt; traffic.
    &gt; 
    &gt; The configuration of squid is very simple, it allows all traffic and
    &gt; uses urlrewrite.pl to replace &quot;http&quot; to &quot;https&quot;.
    
    What you are doing is actually the opposite to secure. Letting the
    server think the traffic is secure so it passes on confidential or
    privacy sensitive information - then exposing all that within clear-text
    HTTP and again within the client itself.
    
    
    &gt; 
    &gt; Question:
    &gt; 
    &gt; 1.Is there any way to upgrade a websocket connection to secure websocket
    &gt; using squid4.6?
    &gt; 
    
    No. Squid does not support WebSockets natively.
    
    
    &gt; 2.Or say I use wss-client (without certificate) and a wss-server(with
    &gt; certificates), is there a way to inform squid to use its own
    &gt; certificates even mentioned in &quot;tls_outgoing_options&quot; to establish the
    &gt; connection?
    &gt; 
    
    What Squid does is enact the CONNECT or GET request of the HTTP messages
    you see with wireshark - excluding the Upgrade HTTP feature you may see
    being attempted.
    
    For the CONNECT WebSockets happens inside the tunnel. With no
    interference by Squid.
    
    For the GET either the server accepts the fallback to HTTP response. Or
    rejects it and the client is expected to fallback itself to another
    method of communication. eg WebSockets native port or a CONNECT tunnel.
    
    You cannot simply turn a GET request onto a bi-directional binary
    tunnel. Nor a bi-directional tunnel into a GET response. They are
    entirely different syntax and incompatible concepts / semantics.
    
    Amos
    _______________________________________________
    squid-users mailing list
    <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
    <A HREF="https://urldefense.proofpoint.com/v2/url?u=http-3A__lists.squid-2Dcache.org_listinfo_squid-2Dusers&amp;d=DwIGaQ&amp;c=C5b8zRQO1miGmBeVZ2LFWg&amp;r=3q1cou6mQpySVdgvrT4UXuR-8zDVO5Th0-ypQm3MaSE&amp;m=DXanVFfv4gim1_IFY24RenJExFIumvXojFN06ovaVpA&amp;s=53LUnq1oGInZT4hR-9DXBQYqjI_OSYRktzTEhBOzQ1U&amp;e=">https://urldefense.proofpoint.com/v2/url?u=http-3A__lists.squid-2Dcache.org_listinfo_squid-2Dusers&amp;d=DwIGaQ&amp;c=C5b8zRQO1miGmBeVZ2LFWg&amp;r=3q1cou6mQpySVdgvrT4UXuR-8zDVO5Th0-ypQm3MaSE&amp;m=DXanVFfv4gim1_IFY24RenJExFIumvXojFN06ovaVpA&amp;s=53LUnq1oGInZT4hR-9DXBQYqjI_OSYRktzTEhBOzQ1U&amp;e=</A> 
    
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 5103 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20190619/e94b4c14/attachment.bin">http://lists.squid-cache.org/pipermail/squid-users/attachments/20190619/e94b4c14/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020657.html">[squid-users] Squid4 forward proxy to upgrade from ws to wss
</A></li>
	<LI>Next message (by thread): <A HREF="020660.html">[squid-users] How to enable proxy protocol v2 on squid version	4.6.1, and NLB
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20658">[ date ]</a>
              <a href="thread.html#20658">[ thread ]</a>
              <a href="subject.html#20658">[ subject ]</a>
              <a href="author.html#20658">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
