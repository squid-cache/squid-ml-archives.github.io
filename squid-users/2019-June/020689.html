<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Bypassing SSL Man In the Middle Filtering For Certain LAN IP's
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Bypassing%20SSL%20Man%20In%20the%20Middle%20Filtering%20For%0A%20Certain%20LAN%20IP%27s&In-Reply-To=%3C6e721121-1569-4b6c-21f0-6429d763c5ae%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020688.html">
   <LINK REL="Next"  HREF="020690.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Bypassing SSL Man In the Middle Filtering For Certain LAN IP's</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Bypassing%20SSL%20Man%20In%20the%20Middle%20Filtering%20For%0A%20Certain%20LAN%20IP%27s&In-Reply-To=%3C6e721121-1569-4b6c-21f0-6429d763c5ae%40treenet.co.nz%3E"
       TITLE="[squid-users] Bypassing SSL Man In the Middle Filtering For Certain LAN IP's">squid3 at treenet.co.nz
       </A><BR>
    <I>Sun Jun 30 06:36:19 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020688.html">[squid-users] Bypassing SSL Man In the Middle Filtering For Certain	LAN IP's
</A></li>
        <LI>Next message (by thread): <A HREF="020690.html">[squid-users] delay_pools does not work in squid 4.x
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20689">[ date ]</a>
              <a href="thread.html#20689">[ thread ]</a>
              <a href="subject.html#20689">[ subject ]</a>
              <a href="author.html#20689">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 30/06/19 2:32 pm, Mike Golf wrote:
&gt;<i> Hi All,
</I>&gt;<i> 
</I>&gt;<i> I've setup a squid proxy server on my PFSense router, is there any way
</I>&gt;<i> of bypassing HTTPS/SSL filtering for certain LAN IP's.
</I>
HTTPS is not normally filtered at all. So for that to be happening
something must be forcing it - all you have to do is *not* force the
filtering or MITM to happen.

* remove any rules in your NAT or routes directing port 443 to the proxy.

* remove any https_port in the proxy for receiving that intercepted traffic

* remove any SSL-Bump config for handling intercepted port 443 traffic
or decrypting CONNECT tunnels.

With that all done you will at most be left with clients using the proxy
in forward-proxy capacity to open CONNECT tunnels.


&gt;<i> I have IP
</I>&gt;<i> addresses 192.168.1.0-192.168.1.200 allocated through DHCP and I want
</I>&gt;<i> these devices to bypass SSL interception but not the standard HTTP proxy.
</I>
Consider how are those clients using the proxy in the first place? Their
method of IP assignment has nothing to do with it.


&gt;<i> 
</I>&gt;<i> Since most modern sites use HTTPS by default HTTP caching isn't that
</I>&gt;<i> effective anymore,
</I>
That is a deceptive statement, more false than most think. But
irrelevant since what you are wanting will prevent HTTPS caching entirely.


&gt;<i> however I want my personal devices to use the SSL
</I>&gt;<i> proxy 
</I>
Note that SSL protocols both v2 and v3 are obsolete.

Are you asking for:
 a) a TLS explicit proxy, or
 b) a TLS interception proxy, or
 c) a forward-proxy for relaying HTTPS ?


&gt;<i>so I can get the fastest possible browsing experience without
</I>&gt;<i> having to install certificate authorities on my guests devices which use
</I>&gt;<i> the DHCP range.
</I>&gt;<i> 
</I>
A proxy is not going to do anything in regards to speed for those clients.

The only way which you can improve speed with a proxy is by caching of
HTTPS content - by avoiding all the re-encrypt delays on every request
that can be made a HIT. But that requires those cert installations you
are trying to avoid.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020688.html">[squid-users] Bypassing SSL Man In the Middle Filtering For Certain	LAN IP's
</A></li>
	<LI>Next message (by thread): <A HREF="020690.html">[squid-users] delay_pools does not work in squid 4.x
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20689">[ date ]</a>
              <a href="thread.html#20689">[ thread ]</a>
              <a href="subject.html#20689">[ subject ]</a>
              <a href="author.html#20689">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
