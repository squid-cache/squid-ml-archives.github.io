<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid-3.5.28 slowdown
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid-3.5.28%20slowdown&In-Reply-To=%3C17F6D645-13A8-4B9A-8B83-2CDEF2CF7842%40data-core.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020297.html">
   <LINK REL="Next"  HREF="020283.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid-3.5.28 slowdown</H1>
    <B>Enrico Heine</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid-3.5.28%20slowdown&In-Reply-To=%3C17F6D645-13A8-4B9A-8B83-2CDEF2CF7842%40data-core.org%3E"
       TITLE="[squid-users] Squid-3.5.28 slowdown">flashdown at data-core.org
       </A><BR>
    <I>Mon Mar  4 09:42:50 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020297.html">[squid-users] Squid-3.5.28 slowdown
</A></li>
        <LI>Next message (by thread): <A HREF="020283.html">[squid-users] Squid-3.5.28 slowdown
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20308">[ date ]</a>
              <a href="thread.html#20308">[ thread ]</a>
              <a href="subject.html#20308">[ subject ]</a>
              <a href="author.html#20308">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hm, I do at least &quot;believe&quot; that it is very likely to be the same with ecap, but I don't know this protocol in anyway, so I can't give a qualified answer on that. 

Anyway, if it is your issue then you can use the test command provided anytime and see the issue slowly emerging until it reaches an amount where tcp_mem is getting to big and a net rate limit is triggered by the kernel which then finally results in slow networking performance, which can be only resolved with a squid restart  . Also check /var/log/kern.log for the point in time where you had the slowness issue, you should see some lines there which you can provide here.

Anyway, if it is your bug, please share this info with us.

Br, Flashdown

Am 1. M&#228;rz 2019 23:43:49 MEZ schrieb Michael Hendrie &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">michael at hendrie.id.au</A>&gt;:
&gt;<i>
</I>&gt;&gt;<i> On 1 Mar 2019, at 9:34 pm, Enrico Heine &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">flashdown at data-core.org</A>&gt;
</I>&gt;<i>wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> &gt;&gt;just a shot into the dark&lt;&lt;, is it possible that you use the
</I>&gt;<i>adaption service for ICAP?
</I>&gt;<i>
</I>&gt;<i>There is an eCAP adaptation service but not ICAP, would eCAP be
</I>&gt;<i>effected by the same condition reported the bug report you linked to?  
</I>&gt;<i>Early in the investigation I did change 'ecap enable off' and do 'squid
</I>&gt;<i>-k reconfigure' while the condition was present but it didn't restore
</I>&gt;<i>speed, a full squid restart was required.
</I>&gt;<i>
</I>&gt;&gt;<i> If so, fast test, this should return 0 if u are not affected by this,
</I>&gt;<i>if higher than 0 check the link below:
</I>&gt;&gt;<i> netstat -pa | grep CLOSE_WAIT | wc -l 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> also have a look into /var/log/kern.log 
</I>&gt;<i>
</I>&gt;<i>I will check these out next time the condition occurs
</I>&gt;<i>
</I>&gt;<i>Thanks,
</I>&gt;<i>
</I>&gt;<i>Michael
</I>
-- 
Diese Nachricht wurde von meinem Android-Ger&#228;t mit K-9 Mail gesendet.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20190304/53477315/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20190304/53477315/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020297.html">[squid-users] Squid-3.5.28 slowdown
</A></li>
	<LI>Next message (by thread): <A HREF="020283.html">[squid-users] Squid-3.5.28 slowdown
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20308">[ date ]</a>
              <a href="thread.html#20308">[ thread ]</a>
              <a href="subject.html#20308">[ subject ]</a>
              <a href="author.html#20308">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
