<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Issues setting up a proxy for malware scanning
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Issues%20setting%20up%20a%20proxy%20for%20malware%20scanning&In-Reply-To=%3C63a8841a-3935-a00d-1258-f19b0fe9a756%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020311.html">
   <LINK REL="Next"  HREF="020312.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Issues setting up a proxy for malware scanning</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Issues%20setting%20up%20a%20proxy%20for%20malware%20scanning&In-Reply-To=%3C63a8841a-3935-a00d-1258-f19b0fe9a756%40treenet.co.nz%3E"
       TITLE="[squid-users] Issues setting up a proxy for malware scanning">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Mar  5 11:46:57 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020311.html">[squid-users] Issues setting up a proxy for malware scanning
</A></li>
        <LI>Next message (by thread): <A HREF="020312.html">[squid-users] Squid fallback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20329">[ date ]</a>
              <a href="thread.html#20329">[ thread ]</a>
              <a href="subject.html#20329">[ subject ]</a>
              <a href="author.html#20329">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 5/03/19 6:20 am, Egoitz Aurrekoetxea wrote:
&gt;<i> Hi mates!
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I was trying to setup a Squid server for the following matter. I wanted
</I>&gt;<i> to have some modified url pointing to my Squid proxy, so that Squid to
</I>&gt;<i> be able to connect to destination, scan the content and if all is ok,
</I>&gt;<i> return a 3xx to the real URL. For that purpose I use the following
</I>&gt;<i> configuration <A HREF="https://pastebin.com/raw/mP73fame">https://pastebin.com/raw/mP73fame</A> . The url redirector in
</I>&gt;<i> that config is&#160; <A HREF="https://pastebin.com/p6Usmq75">https://pastebin.com/p6Usmq75</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I'm facing the two following problems, probably due to not having a
</I>&gt;<i> large experience in Squid :
</I>

It seems not have much experience with HTTP either.

You would be far better off forgetting this whole fake-domains and URL
redirection thing. It is almost the hardest possible way to do what you
say you are wanting.

Just divert the client traffic to the proxy and scan (or not) as it goes
through. No problems with changing HTTP response objects just to get the
traffic to a state where the scanner receives it. No confusing the
scanner which may at times be checking the domain naming pattern as part
of the signature.


HTH
Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020311.html">[squid-users] Issues setting up a proxy for malware scanning
</A></li>
	<LI>Next message (by thread): <A HREF="020312.html">[squid-users] Squid fallback
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20329">[ date ]</a>
              <a href="thread.html#20329">[ thread ]</a>
              <a href="subject.html#20329">[ subject ]</a>
              <a href="author.html#20329">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
