<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] reply_header_access for Strict-Transport-Security doesn't work
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20reply_header_access%20for%20Strict-Transport-Security%0A%20doesn%27t%20work&In-Reply-To=%3C769b32cc-4b7f-a5ff-f524-899e62270c23%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020358.html">
   <LINK REL="Next"  HREF="020360.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] reply_header_access for Strict-Transport-Security doesn't work</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20reply_header_access%20for%20Strict-Transport-Security%0A%20doesn%27t%20work&In-Reply-To=%3C769b32cc-4b7f-a5ff-f524-899e62270c23%40treenet.co.nz%3E"
       TITLE="[squid-users] reply_header_access for Strict-Transport-Security doesn't work">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Mar 12 16:45:54 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020358.html">[squid-users] reply_header_access for Strict-Transport-Security	doesn't work
</A></li>
        <LI>Next message (by thread): <A HREF="020360.html">[squid-users] reply_header_access for Strict-Transport-Security	doesn't work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20359">[ date ]</a>
              <a href="thread.html#20359">[ thread ]</a>
              <a href="subject.html#20359">[ subject ]</a>
              <a href="author.html#20359">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 13/03/19 3:57 am, leomessi983 wrote:
&gt;<i> Hi
</I>&gt;<i> I compiled squid with this options:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ./configure \
</I>&gt;<i> --with-openssl \
</I>&gt;<i> --enable-ssl-crtd \
</I>&gt;<i> --prefix=/usr \
</I>&gt;<i> --enable-linux-netfilter \
</I>&gt;<i> --with-netfilter-conntrack \
</I>&gt;<i> --exec-prefix=/usr \
</I>&gt;<i> --includedir=/usr/include \
</I>&gt;<i> --datadir=/usr/share/squid \
</I>&gt;<i> --libdir=/usr/lib64 \
</I>&gt;<i> --libexecdir=/usr/lib64/squid \
</I>&gt;<i> --localstatedir=/var \
</I>&gt;<i> --sysconfdir=/etc/squid/ \
</I>&gt;<i> --sharedstatedir=/var/lib/ \
</I>&gt;<i> --with-logdir=/var/log/squid/ \
</I>&gt;<i> --enable-ltdl-convenience \
</I>&gt;<i> --enable-http-violations
</I>&gt;<i> 
</I>&gt;<i> but when i use &quot;request_header_access Strict-Transport-Security deny
</I>&gt;<i> all&quot; in my squid.conf its doesnt work?
</I>&gt;<i> 
</I>&gt;<i> What is wrong?
</I>

Strict-Transport-Security is an instruction from the server to the
client. That makes it a *response* header.


&gt;<i> I want to block https request and show block page for them,but for some
</I>&gt;<i> sites like bing.com or google.com i got &quot;HSTS Error&quot; in my client!!
</I>&gt;<i> What can i do?
</I>&gt;<i> &#160;
</I>
Current Squid automatically erase that header to prevent HSTS breaking
web traffic. Where possible try to get clients to upgrade to Browsers
which have also dropped use of the feature.

Please be aware the HSTS header have a time period associated. Once a
client has received the header via *any* connection (including non-HTTP
connections). It will complaining about HSTS errors until the period
expires, maybe a bit longer.

That means you need to test it with clients that can erase their HSTS
information cache explicitly. Find a site with short HSTS timeout to
test with. OR wait up to 7 days between each test request.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020358.html">[squid-users] reply_header_access for Strict-Transport-Security	doesn't work
</A></li>
	<LI>Next message (by thread): <A HREF="020360.html">[squid-users] reply_header_access for Strict-Transport-Security	doesn't work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20359">[ date ]</a>
              <a href="thread.html#20359">[ thread ]</a>
              <a href="subject.html#20359">[ subject ]</a>
              <a href="author.html#20359">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
