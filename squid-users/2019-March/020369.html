<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Got [No Error] (TLS code: SQUID_ERR_SSL_HANDSHAKE)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Got%20%5BNo%20Error%5D%20%28TLS%20code%3A%20SQUID_ERR_SSL_HANDSHAKE%29&In-Reply-To=%3C1552807376811-0.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020367.html">
   <LINK REL="Next"  HREF="020370.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Got [No Error] (TLS code: SQUID_ERR_SSL_HANDSHAKE)</H1>
    <B>Itai Tieger</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Got%20%5BNo%20Error%5D%20%28TLS%20code%3A%20SQUID_ERR_SSL_HANDSHAKE%29&In-Reply-To=%3C1552807376811-0.post%40n4.nabble.com%3E"
       TITLE="[squid-users] Got [No Error] (TLS code: SQUID_ERR_SSL_HANDSHAKE)">itai at hysolate.com
       </A><BR>
    <I>Sun Mar 17 07:22:56 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020367.html">[squid-users] ACL inside ClamAV?
</A></li>
        <LI>Next message (by thread): <A HREF="020370.html">[squid-users] Got [No Error] (TLS code: SQUID_ERR_SSL_HANDSHAKE)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20369">[ date ]</a>
              <a href="thread.html#20369">[ thread ]</a>
              <a href="subject.html#20369">[ subject ]</a>
              <a href="author.html#20369">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey, 

I'm using squid 4.4 compiled with openssl 1.1.0. 
Sometimes when I try to access a site, I get this error: 
 The following error was encountered while trying to retrieve the URL:
<A HREF="https://175.41.13.121/*">https://175.41.13.121/*</A> Failed to establish a secure connection to
175.41.13.121 The system returned: [No Error] (TLS code:
SQUID_ERR_SSL_HANDSHAKE) Handshake with SSL server failed: [No Error] This
proxy and the remote host failed to negotiate a mutually acceptable security
settings for handling your request. It is possible that the remote host does
not support secure connections, or the proxy is not satisfied with the host
security credentials. Your cache administrator is webmaster. 
This is the capture file: 
sniff.cap
&lt;<A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/file/t377689/sniff.cap">http://squid-web-proxy-cache.1019090.n4.nabble.com/file/t377689/sniff.cap</A>&gt;  
I can't seem to understand what is the problem, what exactly is missing and
how can I debug it myself? 

I also get many 
 32	2019/02/25 00:09:19 kid1| ERROR: negotiating TLS on FD 43:
error:1416F086:SSL routines:tls_process_server_certificate:certificate
verify failed (1/-1/0) 
in the log, might be related... ?



--
Sent from: <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-Users-f1019091.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-Users-f1019091.html</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020367.html">[squid-users] ACL inside ClamAV?
</A></li>
	<LI>Next message (by thread): <A HREF="020370.html">[squid-users] Got [No Error] (TLS code: SQUID_ERR_SSL_HANDSHAKE)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20369">[ date ]</a>
              <a href="thread.html#20369">[ thread ]</a>
              <a href="subject.html#20369">[ subject ]</a>
              <a href="author.html#20369">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
