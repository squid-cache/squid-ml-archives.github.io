<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] security_file_certgen problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20security_file_certgen%20problem&In-Reply-To=%3C51d9eefb-b1d8-1e4f-3363-e51662694f50%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020374.html">
   <LINK REL="Next"  HREF="020384.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] security_file_certgen problem</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20security_file_certgen%20problem&In-Reply-To=%3C51d9eefb-b1d8-1e4f-3363-e51662694f50%40treenet.co.nz%3E"
       TITLE="[squid-users] security_file_certgen problem">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Mar 19 11:32:14 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020374.html">[squid-users] security_file_certgen problem
</A></li>
        <LI>Next message (by thread): <A HREF="020384.html">[squid-users] security_file_certgen problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20378">[ date ]</a>
              <a href="thread.html#20378">[ thread ]</a>
              <a href="subject.html#20378">[ subject ]</a>
              <a href="author.html#20378">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 19/03/19 2:26 am, leomessi983 wrote:
&gt;<i> Hi all
</I>&gt;<i> I compiled squid 4.6 with this options:
</I>&gt;<i> 
</I>...
&gt;<i> 
</I>&gt;<i> And my configurations is:
</I>...
&gt;<i> sslcrtd_program /usr/lib64/squid/security_file_certgen -s
</I>&gt;<i> /var/lib/ssl_db -M 20MB
</I>
Have you initialized the /var/lib/ssl_db directory using the
low-privilege account Squid operates as?


&gt;<i> 
</I>&gt;<i> After that i use squid to block https requests, when i try to get
</I>&gt;<i> blocked https site i get this error in my cache.log:
</I>&gt;<i> 
</I>&gt;<i> 2019/03/18 16:46:11| WARNING: /usr/lib64/squid/security_file_certgen -s
</I>&gt;<i> /var/lib/ssl_db -M 20MB #Hlpr1 exited
</I>
The helper should have output a message before it shutdown. If that
managed to get written it would occur somewhere before this line in your
cache.log.


&gt;<i> 2019/03/18 16:46:11| Too few /usr/lib64/squid/security_file_certgen -s
</I>&gt;<i> /var/lib/ssl_db -M 20MB processes are running (need 1/10)
</I>&gt;<i> 2019/03/18 16:46:11| Starting new helpers
</I>&gt;<i> 2019/03/18 16:46:11| helperOpenServers: Starting 1/10
</I>&gt;<i> 'security_file_certgen' processes
</I>&gt;<i> 2019/03/18 16:46:11| &quot;ssl_crtd&quot; helper returned &lt;NULL&gt; reply.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> What is wrong? what am i do?!
</I>&gt;<i> 
</I>
Usually run the helper manually with the -c option to initialize the
OpenSSL certificate storage before using it. Make sure this is done with
the same user account Squid will be using when it runs.
 Also make sure that anything like AppArmor or SELinux that does
advanced filesystem permissions is updated to permit access to Squid.



Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020374.html">[squid-users] security_file_certgen problem
</A></li>
	<LI>Next message (by thread): <A HREF="020384.html">[squid-users] security_file_certgen problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20378">[ date ]</a>
              <a href="thread.html#20378">[ thread ]</a>
              <a href="subject.html#20378">[ subject ]</a>
              <a href="author.html#20378">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
