<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] delay_pools don't work on squid 4.4
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20delay_pools%20don%27t%20work%20on%20squid%204.4&In-Reply-To=%3C019301d4e4f4%24e07c4260%24a174c720%24%40eleccav.une.cu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020414.html">
   <LINK REL="Next"  HREF="020408.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] delay_pools don't work on squid 4.4</H1>
    <B>Yanier Salazar Sanchez</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20delay_pools%20don%27t%20work%20on%20squid%204.4&In-Reply-To=%3C019301d4e4f4%24e07c4260%24a174c720%24%40eleccav.une.cu%3E"
       TITLE="[squid-users] delay_pools don't work on squid 4.4">yanier at eleccav.une.cu
       </A><BR>
    <I>Wed Mar 27 23:29:08 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020414.html">[squid-users] Deny_Info TCP_RESET
</A></li>
        <LI>Next message (by thread): <A HREF="020408.html">[squid-users] delay_pools don't work on squid 4.4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20407">[ date ]</a>
              <a href="thread.html#20407">[ thread ]</a>
              <a href="subject.html#20407">[ subject ]</a>
              <a href="author.html#20407">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Good afternoon:
I have squid4.4 installed in linux on ubuntu 18.04.1 and I have the
following problem with the delay_pools aren't working properly, the squid
identify them with their number but do not comply with the speed limits
They are functioning as if they didn't have speed limits
Someone has some idea why this happens.
Previously I had squid 3.5 and they worked perfectly. I don't compile this
version of squid, but I download a precompiled version .deb.

A clarification I have kerberos authentication.

Thanks for your time

 

I'm so sorry for my bad English

 

 

/etc/squid# squid -v

Squid Cache: Version 4.4

Service Name: squid

Debian linux

configure options:  '--build=x86_64-linux-gnu' '--prefix=/usr'
'--includedir=${prefix}/include' '--mandir=${prefix}/share/man'
'--infodir=${prefix}/share/info' '--sysconfdir=/etc' '--localstatedir=/var'
'--libexecdir=${prefix}/lib/squid' '--srcdir=.' '--disable-maintainer-mode'
'--disable-dependency-tracking' '--disable-silent-rules' 'BUILDCXXFLAGS=-g
-O2 -fdebug-prefix-map=/build/squid-4.4=. -fstack-protector-strong -Wformat
-Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -Wl,-z,relro
-Wl,-z,now -Wl,--as-needed -latomic' '--enable-build-info=Debian linux'
'--datadir=/usr/share/squid' '--sysconfdir=/etc/squid'
'--libexecdir=/usr/lib/squid' '--mandir=/usr/share/man' '--enable-inline'
'--disable-arch-native' '--enable-async-io=8'
'--enable-storeio=ufs,aufs,diskd,rock' '--enable-removal-policies=lru,heap'
'--enable-delay-pools' '--enable-cache-digests' '--enable-icap-client'
'--enable-follow-x-forwarded-for'
'--enable-auth-basic=DB,fake,getpwnam,LDAP,NCSA,NIS,PAM,POP3,RADIUS,SASL,SMB
' '--enable-auth-digest=file,LDAP'
'--enable-auth-negotiate=kerberos,wrapper' '--enable-auth-ntlm=fake,SMB_LM'
'--enable-external-acl-helpers=file_userip,kerberos_ldap_group,LDAP_group,se
ssion,SQL_session,time_quota,unix_group,wbinfo_group'
'--enable-security-cert-validators=fake'
'--enable-storeid-rewrite-helpers=file' '--enable-url-rewrite-helpers=fake'
'--enable-eui' '--enable-esi' '--enable-icmp' '--enable-zph-qos'
'--enable-ecap' '--disable-translation' '--with-swapdir=/var/spool/squid'
'--with-logdir=/var/log/squid' '--with-pidfile=/var/run/squid.pid'
'--with-filedescriptors=65536' '--with-large-files'
'--with-default-user=proxy' '--with-gnutls' '--enable-linux-netfilter'
'build_alias=x86_64-linux-gnu' 'CFLAGS=-g -O2
-fdebug-prefix-map=/build/squid-4.4=. -fstack-protector-strong -Wformat
-Werror=format-security -Wall' 'LDFLAGS=-Wl,-z,relro -Wl,-z,now
-Wl,--as-needed -latomic' 'CPPFLAGS=-Wdate-time -D_FORTIFY_SOURCE=2'
'CXXFLAGS=-g -O2 -fdebug-prefix-map=/build/squid-4.4=.
-fstack-protector-strong -Wformat -Werror=format-security'

 

squidstat shows me this

remote=10.100.1.150:49791

local=10.100.2.5:3128

uri=r4---sn-xuxaxasda234-i58e.googlevideo.com:443

bytes=3429753

seconds=20

username=juan

delay_pool=4

connection=0x55fd2432a158

 

squid.conf 

acl youtube url_regex .youtube.com .youtube.com:443 .googlevideo.com
.googlevideo.com:443

delay_initial_bucket_level 90

 

delay_class 4 2

delay_access 4 allow youtube

delay_parameters 4 18000/19000 10000/11000

delay_access 4 deny all

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20190327/9ee65ace/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20190327/9ee65ace/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020414.html">[squid-users] Deny_Info TCP_RESET
</A></li>
	<LI>Next message (by thread): <A HREF="020408.html">[squid-users] delay_pools don't work on squid 4.4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20407">[ date ]</a>
              <a href="thread.html#20407">[ thread ]</a>
              <a href="subject.html#20407">[ subject ]</a>
              <a href="author.html#20407">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
