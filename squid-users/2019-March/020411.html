<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Deny_Info TCP_RESET
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Deny_Info%20TCP_RESET&In-Reply-To=%3C817aa8e9-9cfc-6438-0df5-facbddaf2e8a%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020409.html">
   <LINK REL="Next"  HREF="020412.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Deny_Info TCP_RESET</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Deny_Info%20TCP_RESET&In-Reply-To=%3C817aa8e9-9cfc-6438-0df5-facbddaf2e8a%40measurement-factory.com%3E"
       TITLE="[squid-users] Deny_Info TCP_RESET">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Mar 28 23:36:59 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020409.html">[squid-users] Deny_Info TCP_RESET
</A></li>
        <LI>Next message (by thread): <A HREF="020412.html">[squid-users] Deny_Info TCP_RESET
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20411">[ date ]</a>
              <a href="thread.html#20411">[ thread ]</a>
              <a href="subject.html#20411">[ subject ]</a>
              <a href="author.html#20411">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 3/28/19 8:13 AM, <A HREF="https://lists.squid-cache.org/listinfo/squid-users">creditu at eml.cc</A> wrote:

&gt;<i> Is using the http_reply_access deny a viable option if all else fails
</I>&gt;<i> to correct the issue until we can upgrade?
</I>
Probably it is not: I am not sure, but based on my quick reading of the
code and a basic test, http_reply_access does not support the &quot;deny_info
TCP_RESET&quot; feature at all. Only http_access (and possibly
adapted_http_access, but I did not check) supports that feature (bugs
notwithstanding).

In the ideal world, &quot;deny_info TCP_RESET&quot; would work regardless of which
directive (http_access, adapted_http_access/http_access2, or
http_reply_access) is denying access. I may have assumed that ideal in
my earlier response, but this is not what was hacked into Squid AFAICT.


&gt;<i> I'm still a bit confused on how to implement it to give it try.
</I>
There is pretty much no relationship between the three access checking
directives mentioned above. They are checked in their natural order, and
the first denial stops further transaction progress, with the denial
page delivered to the client. If you understand how http_access works,
you can apply that understanding to the other two directives.


&gt;<i> Do I need to use http_access with http_reply_access 
</I>
No, you do not:

* http_access checks whether HTTP client request should be forwarded (to
the server.

* http_reply_access checks whether HTTP server response should be
forwarded to the client. Naturally, there is no server response to speak
of if the request was previously denied using http_access.


&gt;<i> can http_reply_access be used by itself with deny_info?
</I>
You can, but http_reply_access does not support the TCP_RESET feature.
Fixes and fix sponsorship welcomed.


HTH,

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020409.html">[squid-users] Deny_Info TCP_RESET
</A></li>
	<LI>Next message (by thread): <A HREF="020412.html">[squid-users] Deny_Info TCP_RESET
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20411">[ date ]</a>
              <a href="thread.html#20411">[ thread ]</a>
              <a href="subject.html#20411">[ subject ]</a>
              <a href="author.html#20411">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
