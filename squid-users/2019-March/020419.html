<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] kerberos
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20kerberos&In-Reply-To=%3C583a4b76-f9e4-f482-7527-1a52252fccb5%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020413.html">
   <LINK REL="Next"  HREF="020415.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] kerberos</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20kerberos&In-Reply-To=%3C583a4b76-f9e4-f482-7527-1a52252fccb5%40treenet.co.nz%3E"
       TITLE="[squid-users] kerberos">squid3 at treenet.co.nz
       </A><BR>
    <I>Sun Mar 31 04:22:19 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020413.html">[squid-users] kerberos
</A></li>
        <LI>Next message (by thread): <A HREF="020415.html">[squid-users] Why Squid on CentOS is faster than Debian ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20419">[ date ]</a>
              <a href="thread.html#20419">[ thread ]</a>
              <a href="subject.html#20419">[ subject ]</a>
              <a href="author.html#20419">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 30/03/19 3:30 am, Alex Guti&#233;rrez Mart&#237;nez wrote:
&gt;<i> Hello Community, I just compiled my squid 4. Everything works fine
</I>&gt;<i> except integration to the Kerberos authentication server.
</I>&gt;<i> 
</I>&gt;<i> I have already managed to integrate my ubuntu with the kerberos and the
</I>&gt;<i> tickets are created correctly. Here i leave my configuration of the auth
</I>&gt;<i> in the squid
</I>&gt;<i> ###############################################################################################
</I>&gt;<i> auth_param negotiate program / usr / lib / squid /
</I>&gt;<i> negotiate_kerberos_auth -d -s HTTP / proxy.empresa.cu
</I>&gt;<i> auth_param negotiate children 1000
</I>
Why 1000? This looks to me like a number one would be forced to use for
NTLM auth due to how painfully slow NTLM is.

Kerberos can easily handle several orders of magnitude more traffic per
helper than NTLM. So you can possibly cut that down to 10 or 100
depending on how many TCP connections are being handled per-second in
production traffic.



&gt;<i> auth_param negotiate keep_alive on
</I>&gt;<i> 
</I>&gt;<i> external_acl_type kerberos_group ttl = 3600 negative_ttl = 3600% LOGIN /
</I>&gt;<i> usr / lib / squid / ext_kerberos_ldap_group_acl -a -g Internet_access -D
</I>&gt;<i> EMPRESA.CU
</I>&gt;<i> 
</I>
Missing details of squid.conf acl and access control directives.
http_access in particular, but also any others using the auth ACLs.


&gt;<i> ###############################################################################################
</I>&gt;<i> in this case my domain is EMPRESA.CU
</I>&gt;<i> 
</I>&gt;<i> but i been unable to log in
</I>&gt;<i> 
</I>&gt;<i> this is the cache log
</I>&gt;<i> 
</I>&gt;<i> 2019/03/28 09:46:47 kid1| helperOpenServers: Starting 0/1000
</I>&gt;<i> 'negotiate_kerberos_auth' processes
</I>&gt;<i> 2019/03/28 09:46:47 kid1| helperStatefulOpenServers: No
</I>&gt;<i> 'negotiate_kerberos_auth' processes needed.
</I>&gt;<i> 2019/03/28 09:46:47 kid1| helperOpenServers: Starting 0/5
</I>&gt;<i> 'ext_kerberos_ldap_group_acl' processes
</I>&gt;<i> 2019/03/28 09:46:47 kid1| helperOpenServers: No
</I>&gt;<i> 'ext_kerberos_ldap_group_acl' processes needed.
</I>&gt;<i> 2019/03/28 09:46:47 kid1| helperOpenServers: Starting 0/5
</I>&gt;<i> 'ext_kerberos_ldap_group_acl' processes
</I>&gt;<i> 2019/03/28 09:46:47 kid1| helperOpenServers: No
</I>&gt;<i> 'ext_kerberos_ldap_group_acl' processes needed.
</I>
Notice the word *needed*.


Current Squid default only start helpers when traffic actually needs them.

If you have a proxy with a very large memory footprint when running,
that default may be sub-optimal. The 'startup' and 'idle' parameters are
for tuning that.
 &lt;<A HREF="http://www.squid-cache.org/Doc/config/auth_param/">http://www.squid-cache.org/Doc/config/auth_param/</A>&gt;
 &lt;<A HREF="http://www.squid-cache.org/Doc/config/external_acl_type/">http://www.squid-cache.org/Doc/config/external_acl_type/</A>&gt;


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020413.html">[squid-users] kerberos
</A></li>
	<LI>Next message (by thread): <A HREF="020415.html">[squid-users] Why Squid on CentOS is faster than Debian ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20419">[ date ]</a>
              <a href="thread.html#20419">[ thread ]</a>
              <a href="subject.html#20419">[ subject ]</a>
              <a href="author.html#20419">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
