<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 4 pconn_lifetime questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%204%20pconn_lifetime%20questions&In-Reply-To=%3C1557512282209-0.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020552.html">
   <LINK REL="Next"  HREF="020555.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 4 pconn_lifetime questions</H1>
    <B>johnr</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%204%20pconn_lifetime%20questions&In-Reply-To=%3C1557512282209-0.post%40n4.nabble.com%3E"
       TITLE="[squid-users] Squid 4 pconn_lifetime questions">johnrefwe at mail.com
       </A><BR>
    <I>Fri May 10 18:18:02 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020552.html">[squid-users] Squid File Upload Blocking
</A></li>
        <LI>Next message (by thread): <A HREF="020555.html">[squid-users] Squid 4 pconn_lifetime questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20554">[ date ]</a>
              <a href="thread.html#20554">[ thread ]</a>
              <a href="subject.html#20554">[ subject ]</a>
              <a href="author.html#20554">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

The configuration directive pconn_lifetime
(<A HREF="http://www.squid-cache.org/Doc/config/pconn_lifetime/">http://www.squid-cache.org/Doc/config/pconn_lifetime/</A>), seems to give the
squid admin control over whether squid closes idle connections or moves them
into the 'idle connection pool'... I am curious if in squid3, the connection
was automatically terminated after being idle or if it was automatically
moved to the idle connection pool. Given the default value for this config
(to always move to the idle connection pool), I assume the default
functionality between squid 3 and 4 is the same?

I ask because I am seeing a strange, not consistently reproducible scenario
where I navigate to an origin through squid (SSL bump), and then after some
time if I click on a link that navigates somewhere within the same domain,
the browser hangs for a bit until eventually making the navigation. On the
squid side, in the logs, I can see that there is an event in the access logs
that is &quot;NONE error:transaction-end-before-headers HTTP/0.0&quot; before then
seeing the browser issue a fresh CONNECT at which point everything seems to
work. 

It seems like the client is trying to use the same connection, but from the
squid side that connection is in a strange state, and so some amount of time
transpires before squid deems the connection closed. I can use this
pconn_lifetime configuration to 'fix' this problem, but I'm weary of
potentially causing some other side effects by too aggressively closing
connections? Since this doesn't reproduce in squid3, I thought I would ask
if the behavior has changed in anyway in this path..

Thank you for any help,

John



--
Sent from: <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-Users-f1019091.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-Users-f1019091.html</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020552.html">[squid-users] Squid File Upload Blocking
</A></li>
	<LI>Next message (by thread): <A HREF="020555.html">[squid-users] Squid 4 pconn_lifetime questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20554">[ date ]</a>
              <a href="thread.html#20554">[ thread ]</a>
              <a href="subject.html#20554">[ subject ]</a>
              <a href="author.html#20554">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
