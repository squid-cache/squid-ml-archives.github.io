<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 4 pconn_lifetime questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%204%20pconn_lifetime%20questions&In-Reply-To=%3C6009a0c2-db74-239a-73f1-b54dd3870f1b%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020559.html">
   <LINK REL="Next"  HREF="020561.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 4 pconn_lifetime questions</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%204%20pconn_lifetime%20questions&In-Reply-To=%3C6009a0c2-db74-239a-73f1-b54dd3870f1b%40treenet.co.nz%3E"
       TITLE="[squid-users] Squid 4 pconn_lifetime questions">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue May 14 11:42:25 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020559.html">[squid-users] Squid 4 pconn_lifetime questions
</A></li>
        <LI>Next message (by thread): <A HREF="020561.html">[squid-users] Squid 4 pconn_lifetime questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20560">[ date ]</a>
              <a href="thread.html#20560">[ thread ]</a>
              <a href="subject.html#20560">[ subject ]</a>
              <a href="author.html#20560">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 14/05/19 6:25 pm, johnr wrote:
&gt;<i> Alex - thank you for the reply.
</I>&gt;<i> 
</I>&gt;<i> If in the context of this directive became idle means &quot;done processing the
</I>&gt;<i> previous request&quot; then how is the pconn_lifetime directive different than
</I>&gt;<i> the client_idle_pconn_timeout and server_idle_pconn_timeout (other than
</I>&gt;<i> affecting both at the same time)?
</I>

Lifetime is essentially TCP level timeout. TCP connections which go past
it will be closed, the HTTP keep-alive / persistence mechanism will no
longer keep the connection alive. Squid should negotiate for &quot;close&quot; on
any pending HTTP transactions.


The *_idle_pconn_timeout directives (both server and client) manage the
maximum allowed time between completing one HTTP transaction and
starting the next. Connections which go past this timeout should be
closed as soon as doing so is possible without breaking any existing
transactions.


There is an obvious edge case for very long duration transactions. Where
Squid may negotiate keep-alive when it starts, but the lifetime limit is
reached before it completes. I believe those connections should just
close at that completion point despite the negotiated keep-alive.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020559.html">[squid-users] Squid 4 pconn_lifetime questions
</A></li>
	<LI>Next message (by thread): <A HREF="020561.html">[squid-users] Squid 4 pconn_lifetime questions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20560">[ date ]</a>
              <a href="thread.html#20560">[ thread ]</a>
              <a href="subject.html#20560">[ subject ]</a>
              <a href="author.html#20560">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
