<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] LDAP authentication from android and iphones
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20LDAP%20authentication%20from%20android%20and%20iphones&In-Reply-To=%3Cmailman.5.1736411439.1101126.squid-users%40lists.squid-cache.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020599.html">
   <LINK REL="Next"  HREF="020602.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] LDAP authentication from android and iphones</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20LDAP%20authentication%20from%20android%20and%20iphones&In-Reply-To=%3Cmailman.5.1736411439.1101126.squid-users%40lists.squid-cache.org%3E"
       TITLE="[squid-users] LDAP authentication from android and iphones">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu May 30 04:36:38 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020599.html">[squid-users] LDAP authentication from android and iphones
</A></li>
        <LI>Next message (by thread): <A HREF="020602.html">[squid-users] LDAP authentication from android and iphones
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20600">[ date ]</a>
              <a href="thread.html#20600">[ thread ]</a>
              <a href="subject.html#20600">[ subject ]</a>
              <a href="author.html#20600">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 30/05/2019 12:25, Ilias Clifton wrote:


&gt;<i> &gt;&gt; Sent: Wednesday, May 29 2019 6:42
</I>&gt;<i> &gt;&gt; From: Ilias Clifton
</I>&gt;<i> &gt;&gt; 
</I>&gt;<i> &gt;&gt; I have Squid 3.5.27 running on Ubuntu 18.04.2, and have been unsuccesfull in being able to authenticate users via ldap (kerberos is working well)
</I>&gt;<i> &gt;&gt; &#160;
</I>&gt;<i> &gt;&gt; What else can I do for troubleshooting?
</I>&gt;<i> &gt;&gt; &#160;
</I>
What I do is take one of the access.log lines and read through the squid.conf (whole thing) to see what squid would do with that transaction. Most 40* status problems are with http_access ordering, so quickly spotted.

If you can provide those details in full im happy to do so for you. Or someone experienced with a similar config may spot the issue.

If that is not possible, then you will need to do the above yourself. debug_options ALL,6 can be used to get a cache.log trace to read if you are not confident doing it by-eye or to double-check the expectations. 

&gt;<i> &gt; Sent:&#160;Wednesday, May 29, 2019 at 5:04 PM
</I>&gt;<i> &gt; From:&#160;&quot;L.P.H. van Belle&quot;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Hai,
</I>&gt;<i> &gt; &#160;
</I>&gt;<i> &gt; You are probely missing in you smb.conf:
</I>&gt;<i> &gt; &#160;
</I>&gt;<i> &gt; ntlm auth = yes
</I>&gt;<i> &gt; &#160;
</I>&gt;<i> &gt; &#160;
</I>&gt;<i> &gt; Greetz,
</I>&gt;<i> &gt; &#160;
</I>&gt;<i> &gt; Louis
</I>&gt;<i>
</I>&gt;<i> I don't have Samba installed on this server - I can authenticate Firefox users via LDAP, just not Android or iPhones.
</I>&gt;<i>
</I>&gt;<i> To authenticate Android and iPhone users - do I need to use NTLM instead?
</I>&gt;<i>
</I>&gt;<i>
</I>
You should not have to. NTLM is worse than basic in many regards.

If basic has the right credentials from client (check that) and producing a 407/401 then you have a config issue somewhere.

May not be in squid.conf though, could be LDAP service account, or other permissions in the network between squid and the auth backend. The -d helper option should help track that kind of thing down.

FYI; LDAP is not an auth type. It is just a protocol for contacting the database backend where you store the user account credentials. There may be other ways to contact the aurh backend if necessary. But since your manual test worked I agree it should work for squid too. 


Amos
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020599.html">[squid-users] LDAP authentication from android and iphones
</A></li>
	<LI>Next message (by thread): <A HREF="020602.html">[squid-users] LDAP authentication from android and iphones
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20600">[ date ]</a>
              <a href="thread.html#20600">[ thread ]</a>
              <a href="subject.html#20600">[ subject ]</a>
              <a href="author.html#20600">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
