<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] helperHandleRead: unexpected read
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20helperHandleRead%3A%20unexpected%20read&In-Reply-To=%3C6c978212-0a27-d5b4-cb9d-f9faa253ecc7%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021227.html">
   <LINK REL="Next"  HREF="021235.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] helperHandleRead: unexpected read</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20helperHandleRead%3A%20unexpected%20read&In-Reply-To=%3C6c978212-0a27-d5b4-cb9d-f9faa253ecc7%40treenet.co.nz%3E"
       TITLE="[squid-users] helperHandleRead: unexpected read">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Nov  1 07:23:12 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="021227.html">[squid-users] helperHandleRead: unexpected read
</A></li>
        <LI>Next message (by thread): <A HREF="021235.html">[squid-users] helperHandleRead: unexpected read
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21230">[ date ]</a>
              <a href="thread.html#21230">[ thread ]</a>
              <a href="subject.html#21230">[ subject ]</a>
              <a href="author.html#21230">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 1/11/19 7:15 pm, 499258179 wrote:
&gt;<i> Following is my php script, can u check for me, it is looks like  only one
</I>&gt;<i> line stdout
</I>
How have you tested it?

Your explicit fwrite calls look okay for the expected outputs. But are
they actually the only things producing output?

With PHP any of the functions you call can produce things that the
engine puts on stdout (eg errors, but also debug info) if any one of the
many background config file(s) says to.


FWIW: Have you considered using the DB session helper bundled with Squid?

Something like the below should do the same as your current helper.
Double check the --cond syntax, it has been a while since I dealt with
MySQL timestamp math.


external_acl_type guests %un /usr/lib/squid/ext_sql_session_acl \
  --dsn DBI:mysql:database=test:localhost:3306 --persist \
  --user test --password test \
  --table MyGuests --uidcol username \
  --cond &quot;NOW() &lt; DATETIME_ADD(reg_date, INTERVAL 720 HOUR)&quot;


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="021227.html">[squid-users] helperHandleRead: unexpected read
</A></li>
	<LI>Next message (by thread): <A HREF="021235.html">[squid-users] helperHandleRead: unexpected read
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21230">[ date ]</a>
              <a href="thread.html#21230">[ thread ]</a>
              <a href="subject.html#21230">[ subject ]</a>
              <a href="author.html#21230">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
