<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] optional verification of clients?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20optional%20verification%20of%20clients%3F&In-Reply-To=%3Cb165a209-dacf-dd6c-57b6-fd9f466eca2b%40spawn.link%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021228.html">
   <LINK REL="Next"  HREF="021236.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] optional verification of clients?</H1>
    <B>Antonio SJ Musumeci</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20optional%20verification%20of%20clients%3F&In-Reply-To=%3Cb165a209-dacf-dd6c-57b6-fd9f466eca2b%40spawn.link%3E"
       TITLE="[squid-users] optional verification of clients?">trapexit at spawn.link
       </A><BR>
    <I>Fri Nov  1 12:17:37 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="021228.html">[squid-users] optional verification of clients?
</A></li>
        <LI>Next message (by thread): <A HREF="021236.html">[squid-users] optional verification of clients?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21233">[ date ]</a>
              <a href="thread.html#21233">[ thread ]</a>
              <a href="subject.html#21233">[ subject ]</a>
              <a href="author.html#21233">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/1/2019 2:32 AM, Amos Jeffries wrote:
&gt;<i> On 1/11/19 9:19 am, Antonio SJ Musumeci wrote:
</I>&gt;&gt;<i> Is there a way to do something similar to NGINX's &quot;ssl_verify_client
</I>&gt;&gt;<i> optional;&quot;?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Set sslflags=DELAYED_AUTH on the http(s)_port line.
</I>&gt;<i> 
</I>&gt;<i> Though why you would want to slow every TLS connection setup with KBs of
</I>&gt;<i> certificates pushed in both directions then &quot;dropped on the floor&quot; is
</I>&gt;<i> beyond me.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Amos
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> 
</I>
The docs indicated that DELAYED_AUTH isn't implemented and doesn't seem 
to work on 4.8. If I enable it it acts as if no certs are passed and the 
http_access user_cert acl I setup which works fine when not using 
DELAYED_AUTH does not seem to trigger the verification.

Regardless, the point is to create an &quot;anonymous&quot; setup. Not all clients 
have, need, or can provide certs. With NGINX setting verify to optional 
I can verify iff they are provided allowing me to convert no certs into 
a generic guest / anonymous account and entitle separately.

If I understand DELAYED_AUTH's behavior this isn't going to get me that. 
I need to be able to tell if the cert was provided. If verification is 
just delayed till when the acl is processed that doesn't help unless 
there is an acl I'm missing that indicates a cert was provided. The 
ssl_error acl values all imply existence.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="021228.html">[squid-users] optional verification of clients?
</A></li>
	<LI>Next message (by thread): <A HREF="021236.html">[squid-users] optional verification of clients?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21233">[ date ]</a>
              <a href="thread.html#21233">[ thread ]</a>
              <a href="subject.html#21233">[ subject ]</a>
              <a href="author.html#21233">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
