<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] optional verification of clients?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20optional%20verification%20of%20clients%3F&In-Reply-To=%3C97180954-5943-6bb3-4ccb-0d1024cac911%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021233.html">
   <LINK REL="Next"  HREF="021255.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] optional verification of clients?</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20optional%20verification%20of%20clients%3F&In-Reply-To=%3C97180954-5943-6bb3-4ccb-0d1024cac911%40treenet.co.nz%3E"
       TITLE="[squid-users] optional verification of clients?">squid3 at treenet.co.nz
       </A><BR>
    <I>Sat Nov  2 00:37:38 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="021233.html">[squid-users] optional verification of clients?
</A></li>
        <LI>Next message (by thread): <A HREF="021255.html">[squid-users] optional verification of clients?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21236">[ date ]</a>
              <a href="thread.html#21236">[ thread ]</a>
              <a href="subject.html#21236">[ subject ]</a>
              <a href="author.html#21236">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2/11/19 1:17 am, Antonio SJ Musumeci wrote:
&gt;<i> On 11/1/2019 2:32 AM, Amos Jeffries wrote:
</I>&gt;&gt;<i> On 1/11/19 9:19 am, Antonio SJ Musumeci wrote:
</I>&gt;&gt;&gt;<i> Is there a way to do something similar to NGINX's &quot;ssl_verify_client
</I>&gt;&gt;&gt;<i> optional;&quot;?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Set sslflags=DELAYED_AUTH on the http(s)_port line.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Though why you would want to slow every TLS connection setup with KBs of
</I>&gt;&gt;<i> certificates pushed in both directions then &quot;dropped on the floor&quot; is
</I>&gt;&gt;<i> beyond me.
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> The docs indicated that DELAYED_AUTH isn't implemented and doesn't seem
</I>&gt;<i> to work on 4.8. If I enable it it acts as if no certs are passed and the
</I>&gt;<i> http_access user_cert acl I setup which works fine when not using
</I>&gt;<i> DELAYED_AUTH does not seem to trigger the verification.
</I>&gt;<i> 
</I>
Oh well. That was the closest Squid has. I was hoping the library would
sent cert request but not verify the clients response. So the details
would be available for logging etc as handshake parameters.

If that client cert request/delivery is not working then the only
alternative would be two proxy ports, one with client certificates
required and one without. Which does not match what you are trying to
achieve.


If this is of particular importance patch/PR are welcome. I will keep it
in mind for future TLS improvements, but there is no guarantees that way.
&lt;<A HREF="https://wiki.squid-cache.org/SquidFaq/AboutSquid#How_to_add_a_new_Squid_feature.2C_enhance.2C_of_fix_something.3F">https://wiki.squid-cache.org/SquidFaq/AboutSquid#How_to_add_a_new_Squid_feature.2C_enhance.2C_of_fix_something.3F</A>&gt;
&lt;<A HREF="https://wiki.squid-cache.org/DeveloperResources">https://wiki.squid-cache.org/DeveloperResources</A>&gt;

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="021233.html">[squid-users] optional verification of clients?
</A></li>
	<LI>Next message (by thread): <A HREF="021255.html">[squid-users] optional verification of clients?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21236">[ date ]</a>
              <a href="thread.html#21236">[ thread ]</a>
              <a href="subject.html#21236">[ subject ]</a>
              <a href="author.html#21236">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
