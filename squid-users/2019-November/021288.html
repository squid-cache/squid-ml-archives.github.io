<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] After enabling IPv6 squid no longer responds
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20After%20enabling%20IPv6%20squid%20no%20longer%20responds&In-Reply-To=%3Csig.0220b7c3fc.a74dc21c-a500-a9c5-3912-f7db7e68c02d%40sohnen-moe.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021286.html">
   <LINK REL="Next"  HREF="021296.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] After enabling IPv6 squid no longer responds</H1>
    <B>James Moe</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20After%20enabling%20IPv6%20squid%20no%20longer%20responds&In-Reply-To=%3Csig.0220b7c3fc.a74dc21c-a500-a9c5-3912-f7db7e68c02d%40sohnen-moe.com%3E"
       TITLE="[squid-users] After enabling IPv6 squid no longer responds">jimoe at sohnen-moe.com
       </A><BR>
    <I>Wed Nov 13 19:36:24 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="021286.html">[squid-users] Ubuntu 18 LTS repository for Squid 4.9 (rebuilt with sslbump support from sources in Debian unstable)
</A></li>
        <LI>Next message (by thread): <A HREF="021296.html">[squid-users] After enabling IPv6 squid no longer responds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21288">[ date ]</a>
              <a href="thread.html#21288">[ thread ]</a>
              <a href="subject.html#21288">[ subject ]</a>
              <a href="author.html#21288">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,
  squid v4.8

  I have started transitioning our local network to IPv6.
  After adding v6 addresses to the server and hosts, and enabling an RA, squid
no longer delivers anything from its cache, or is exceedingly slow about it.
  I have reviewed the wiki. The one section that discusses this issue has a
solution only for v3.1 or earlier. Does it also apply to later versions?
  What am I missing?

----[ squid.conf ]----
# acl manager url_regex -i ^cache_<A HREF="object://">object://</A> /squid-internal-mgr/
acl manager_admin src 192.168.69.115
#
# acl localnet src fc00::/7
# acl localnet src fe80::/10
#
# https, cups
acl SSL_ports port 443
acl SSL_ports port 631
#
# Jumpline cPanel ports
acl SSL_ports port 2083
acl SSL_ports port 2096
#
# sma-nas-02, cgatePro, webadmin
acl SSL_ports port 5000
acl SSL_ports port 5001
acl SSL_ports port 9010
acl SSL_ports port 9100
acl SSL_ports port 10000
#
acl Safe_ports port 80
acl Safe_ports port 21
acl Safe_ports port 443
acl Safe_ports port 563
acl Safe_ports port 631
acl Safe_ports port 70
acl Safe_ports port 210
acl Safe_ports port 1025-65535
acl Safe_ports port 280
acl Safe_ports port 488
acl Safe_ports port 591
acl Safe_ports port 777
acl Safe_ports port 9100
#
acl CONNECT method CONNECT
acl localnet src 192.168.69.0/24
acl localnet src fd2f:4760:521f:3f3c::0/64

access_log /data01/var/log/squid/access.log
#
http_access deny !Safe_ports
http_access deny CONNECT !SSL_ports
http_access allow manager_admin
http_access allow manager localhost
http_access deny manager
http_access allow localnet
http_access deny all

# Squid normally listens to port 3128
http_port 3128

# Uncomment and adjust the following to add a disk cache directory.
# cache_dir ufs /var/cache/squid 100 16 256
cache_dir ufs /data01/var/cache/squid 51200 16 256
maximum_object_size 99999 KB
cache_mem 256 MB

# Leave coredumps in the first cache dir
coredump_dir /var/cache/squid

# Add any of your own refresh_pattern entries above these.
refresh_pattern ^ftp: 1440 20 10080
refresh_pattern ^gopher: 1440 0 1440
refresh_pattern -i  (/cgi-bin/|\?) 0 0 0
refresh_pattern . 0 20 4320

cache_log /data01/var/log/squid/cache.log
cache_mgr <A HREF="https://lists.squid-cache.org/listinfo/squid-users">jimoe at sohnen-moe.com</A>
cache_replacement_policy lru
cache_store_log /data01/var/log/squid/store.log
cache_swap_high 95
cache_swap_low 90
client_lifetime 1 days
connect_timeout 2 minutes

logfile_rotate 0

error_directory /usr/share/squid/errors/en

ftp_passive on
memory_replacement_policy lru
minimum_object_size 0 KB
----[ end ]----

-- 
James Moe
moe dot james at sohnen-moe dot com
520.743.3936
Think.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 195 bytes
Desc: OpenPGP digital signature
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20191113/58d5ea67/attachment.sig">http://lists.squid-cache.org/pipermail/squid-users/attachments/20191113/58d5ea67/attachment.sig</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="021286.html">[squid-users] Ubuntu 18 LTS repository for Squid 4.9 (rebuilt with sslbump support from sources in Debian unstable)
</A></li>
	<LI>Next message (by thread): <A HREF="021296.html">[squid-users] After enabling IPv6 squid no longer responds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21288">[ date ]</a>
              <a href="thread.html#21288">[ thread ]</a>
              <a href="subject.html#21288">[ subject ]</a>
              <a href="author.html#21288">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
