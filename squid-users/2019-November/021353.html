<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] making proxy-int to talk to proxy-ext
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20making%20proxy-int%20to%20talk%20to%20proxy-ext&In-Reply-To=%3C065009ab-3993-f44f-7757-43ee81e10a7e%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021352.html">
   <LINK REL="Next"  HREF="021359.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] making proxy-int to talk to proxy-ext</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20making%20proxy-int%20to%20talk%20to%20proxy-ext&In-Reply-To=%3C065009ab-3993-f44f-7757-43ee81e10a7e%40measurement-factory.com%3E"
       TITLE="[squid-users] making proxy-int to talk to proxy-ext">rousskov at measurement-factory.com
       </A><BR>
    <I>Tue Nov 26 16:59:37 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="021352.html">[squid-users] making proxy-int to talk to proxy-ext
</A></li>
        <LI>Next message (by thread): <A HREF="021359.html">[squid-users] making proxy-int to talk to proxy-ext
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21353">[ date ]</a>
              <a href="thread.html#21353">[ thread ]</a>
              <a href="subject.html#21353">[ subject ]</a>
              <a href="author.html#21353">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/26/19 10:54 AM, robert k Wild wrote:

&gt;<i> as i have configured both internal proxy (non internet facing) and
</I>&gt;<i> external proxy (internet facing) from source, 
</I>
Please show the essential parts of both internal and external Squid
configurations for the broken setup (at least).

It is difficult to guess what went wrong because the guide you are
quoting does not talk about internal and external proxy instances _and_,
in most cases, simply adding a valid http_port line has no effect on
test cases that worked before -- the new port will be unused by the old
test traffic. It is not even clear which proxy you are adding the
SslBump configuration to.


Thank you,

Alex.


&gt;<i> followed this guide - 
</I>&gt;<i> <A HREF="https://wiki.squid-cache.org/ConfigExamples/Intercept/SslBumpExplicit">https://wiki.squid-cache.org/ConfigExamples/Intercept/SslBumpExplicit</A>
</I>&gt;<i> 
</I>&gt;<i> it works if i comment out the ssl lines -
</I>&gt;<i> 
</I>&gt;<i> #SSL
</I>&gt;<i> #http_port 3128 ssl-bump \
</I>&gt;<i> #cert=/etc/squid/ssl_cert/myCA.pem \
</I>&gt;<i> #generate-host-certificates=on dynamic_cert_mem_cache_size=4MB
</I>&gt;<i> #sslcrtd_program /usr/local/squid/libexec/security_file_certgen -s
</I>&gt;<i> /var/lib/ssl_db -M 4MB
</I>&gt;<i> #acl step1 at_step SslBump1
</I>&gt;<i> #ssl_bump peek step1
</I>&gt;<i> #ssl_bump bump all
</I>&gt;<i> 
</I>&gt;<i> but as soon as i uncomment them it breaks the link between both servers
</I>&gt;<i> 
</I>&gt;<i> this is the error i get from the internal proxy when it tries to contact
</I>&gt;<i> the external proxy
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://i.postimg.cc/JzC29gh8/ssl.png">https://i.postimg.cc/JzC29gh8/ssl.png</A>
</I>&gt;<i> -- 
</I>&gt;<i> Regards,
</I>&gt;<i> 
</I>&gt;<i> Robert K Wild.
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="021352.html">[squid-users] making proxy-int to talk to proxy-ext
</A></li>
	<LI>Next message (by thread): <A HREF="021359.html">[squid-users] making proxy-int to talk to proxy-ext
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21353">[ date ]</a>
              <a href="thread.html#21353">[ thread ]</a>
              <a href="subject.html#21353">[ subject ]</a>
              <a href="author.html#21353">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
