<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] limit new req/sec on squid to X per sec
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20limit%20new%20req/sec%20on%20squid%20to%20X%20per%20sec&In-Reply-To=%3C0e4eec16-0e03-21e0-c03c-63df9e963581%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021363.html">
   <LINK REL="Next"  HREF="021367.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] limit new req/sec on squid to X per sec</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20limit%20new%20req/sec%20on%20squid%20to%20X%20per%20sec&In-Reply-To=%3C0e4eec16-0e03-21e0-c03c-63df9e963581%40treenet.co.nz%3E"
       TITLE="[squid-users] limit new req/sec on squid to X per sec">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Nov 27 12:20:18 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="021363.html">[squid-users] limit new req/sec on squid to X per sec
</A></li>
        <LI>Next message (by thread): <A HREF="021367.html">[squid-users] limit new req/sec on squid to X per sec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21366">[ date ]</a>
              <a href="thread.html#21366">[ thread ]</a>
              <a href="subject.html#21366">[ subject ]</a>
              <a href="author.html#21366">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 28/11/19 1:03 am, --Ahmad-- wrote:
&gt;<i> Hello Amos , Thank you for your response .
</I>&gt;<i> 
</I>&gt;<i> we have an APP behind squid http APP that will crash if # of (req/sec ) exceeded X .
</I>&gt;<i> it won&#8217;t crash about Already established session , it only care about new req/sec hitting squid .
</I>&gt;<i> 
</I>
That does not make sense. Any server (aka. app *behind* Squid) does not
see all requests *arriving* at Squid, only the ones Squid sends to it.


&gt;<i> I think its doable by iptables , but i really was hopping we can do it from squid level .
</I>&gt;<i> 
</I>
iptables would be right if you actually mean new TCP connections per second.

If you actually mean HTTP requests per second, then you would need
Squid. But since this is completely counter to the goals of a proxy
(*increasing* req/sec) you will need an external_acl_type helper to
delay requests.

In current Squid we have a helper called ext_delayer_acl which delays
each request by a fixed amount of time. You may be able to use that as
the basis of one that does what you need.


&gt;<i>
</I>&gt;<i> so you can imagine http req/sec or tcp req/sec same here as squid is
</I>being used only on http protocol .


Er, that does not make sense. HTTP protocol has infinite number of
requests per single TCP connection. There is no equivalence.



Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="021363.html">[squid-users] limit new req/sec on squid to X per sec
</A></li>
	<LI>Next message (by thread): <A HREF="021367.html">[squid-users] limit new req/sec on squid to X per sec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21366">[ date ]</a>
              <a href="thread.html#21366">[ thread ]</a>
              <a href="subject.html#21366">[ subject ]</a>
              <a href="author.html#21366">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
