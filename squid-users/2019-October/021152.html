<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Icap redirection issues
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Icap%20redirection%20issues&In-Reply-To=%3C3df89698-6aca-a71b-1987-05a54d87bb2a%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021151.html">
   <LINK REL="Next"  HREF="021153.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Icap redirection issues</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Icap%20redirection%20issues&In-Reply-To=%3C3df89698-6aca-a71b-1987-05a54d87bb2a%40measurement-factory.com%3E"
       TITLE="[squid-users] Icap redirection issues">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Oct 10 21:28:16 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="021151.html">[squid-users] Icap redirection issues
</A></li>
        <LI>Next message (by thread): <A HREF="021153.html">[squid-users] Icap redirection issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21152">[ date ]</a>
              <a href="thread.html#21152">[ thread ]</a>
              <a href="subject.html#21152">[ subject ]</a>
              <a href="author.html#21152">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/10/19 3:46 PM, Darren Breeze wrote:
&gt;<i> I am generating responses that look like this
</I>
&gt;<i> ICAP/1.0 200 OK
</I>...
&gt;<i> Encapsulated: req-hdr=0, res-hdr=615
</I>
Depending on the ICAP request method and other details, the ICAP server
must send either an embedded HTTP request or an embedded HTTP response.

Currently, your ICAP server sends an embedded HTTP request _and_ an
embedded HTTP response (header) which may violate the ICAP specs and is
definitely not supported by Squid (because it does not make sense in
Squid context -- only one message can be adapted at a time).


Please note that the ICAP RESPMOD _request_ does (usually) contain both
an embedded HTTP request and an embedded HTTP response, but since the
ICAP server cannot modify the embedded request (too late for that!), the
ICAP server should only return an embedded response (the same or a
different/adapted one).


HTH,

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="021151.html">[squid-users] Icap redirection issues
</A></li>
	<LI>Next message (by thread): <A HREF="021153.html">[squid-users] Icap redirection issues
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21152">[ date ]</a>
              <a href="thread.html#21152">[ thread ]</a>
              <a href="subject.html#21152">[ subject ]</a>
              <a href="author.html#21152">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
