<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] How to use &quot;cache&quot;,	&quot;store_miss&quot; and &quot;send_hit&quot; directives?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20use%20%22cache%22%2C%0A%09%22store_miss%22%20and%20%22send_hit%22%20directives%3F&In-Reply-To=%3C99ed2b95f3cb0e5dd2bb188708637eaf7486ab64.camel%40lists.microscopium.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021162.html">
   <LINK REL="Next"  HREF="021167.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] How to use &quot;cache&quot;,	&quot;store_miss&quot; and &quot;send_hit&quot; directives?</H1>
    <B>Robert</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20use%20%22cache%22%2C%0A%09%22store_miss%22%20and%20%22send_hit%22%20directives%3F&In-Reply-To=%3C99ed2b95f3cb0e5dd2bb188708637eaf7486ab64.camel%40lists.microscopium.de%3E"
       TITLE="[squid-users] How to use &quot;cache&quot;,	&quot;store_miss&quot; and &quot;send_hit&quot; directives?">rs-squid at lists.microscopium.de
       </A><BR>
    <I>Wed Oct 16 14:38:47 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="021162.html">[squid-users] pinger replacements?
</A></li>
        <LI>Next message (by thread): <A HREF="021167.html">[squid-users] How to use &quot;cache&quot;, &quot;store_miss&quot; and &quot;send_hit&quot; directives?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21165">[ date ]</a>
              <a href="thread.html#21165">[ thread ]</a>
              <a href="subject.html#21165">[ subject ]</a>
              <a href="author.html#21165">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi there,

after upgrading to 4.6 from 3.x, I am completely confused about how to
use the cache, store_miss and send_hit directives correctly.

I am using ACLs for different handling of clients connecting to
different local ports:

  acl proxy-basic localip 172.16.2.243
  acl proxy-standard localip 172.16.3.243

These ACLs are used to determine outgoing address, which are routed to
different outgoing interfaces like this:

  tcp_outgoing_address 172.16.3.244 proxy-basic
  tcp_outgoing_address 172.16.4.244 proxy-standard

This works as desired.

Now I am struggling with caching objects. The goal is, to have objects
requested by proxy-basic clients not to be cached, but objects
requested by proxy-standard to be cached normally.

Tried this:

  cache deny proxy-basic
  cache allow all

And this:

  cache allow proxy-standard
  cache deny all

And many other different configs. Does not work as desired.

The result is always the same, either all objects are cached, or no
objects at all are cached.

Even if I try a simple configuration like this, objects are never
cached:

  cache allow proxy-standard

If I use ANY &quot;cache ___&quot; directive other than a (useless) &quot;cache allow
all&quot;, caching is completely disabled for all ACLs.

What am I doing wrong? Are those ACLs unsuitable for configuring
caching with cache directives?

I haven't found any examples in the net about how to do achieve what I
want to do. As far as I remember, this used to work with the old 3.x
setup (this is gone, cannot test this any more).

Thanks for help.

Robert


-- 
Robert Senger



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="021162.html">[squid-users] pinger replacements?
</A></li>
	<LI>Next message (by thread): <A HREF="021167.html">[squid-users] How to use &quot;cache&quot;, &quot;store_miss&quot; and &quot;send_hit&quot; directives?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21165">[ date ]</a>
              <a href="thread.html#21165">[ thread ]</a>
              <a href="subject.html#21165">[ subject ]</a>
              <a href="author.html#21165">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
