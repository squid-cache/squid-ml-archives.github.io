<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Overwrite an URL containing an IP when it is requested with a custom Host header
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Overwrite%20an%20URL%20containing%20an%20IP%20when%20it%20is%0A%20requested%20with%20a%20custom%20Host%20header&In-Reply-To=%3C1571308419878-0.post%40n4.nabble.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021172.html">
   <LINK REL="Next"  HREF="021175.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Overwrite an URL containing an IP when it is requested with a custom Host header</H1>
    <B>jl</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Overwrite%20an%20URL%20containing%20an%20IP%20when%20it%20is%0A%20requested%20with%20a%20custom%20Host%20header&In-Reply-To=%3C1571308419878-0.post%40n4.nabble.com%3E"
       TITLE="[squid-users] Overwrite an URL containing an IP when it is requested with a custom Host header">joaolopes at gmx.com
       </A><BR>
    <I>Thu Oct 17 10:33:39 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="021172.html">[squid-users] Overwrite an URL containing an IP when it is requested with a custom Host header
</A></li>
        <LI>Next message (by thread): <A HREF="021175.html">[squid-users] Overwrite an URL containing an IP when it is requested with a custom Host header
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21174">[ date ]</a>
              <a href="thread.html#21174">[ thread ]</a>
              <a href="subject.html#21174">[ subject ]</a>
              <a href="author.html#21174">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks both for your replies.

&gt;&gt;&gt;<i> Or for this: 
</I>&gt;&gt;&gt;<i> curl -v -k -x IP:PORT <A HREF="http://192.121.151.106/doc/search/">http://192.121.151.106/doc/search/</A> -H &quot;Host: 
</I>&gt;&gt;&gt;<i> erlang.org&quot; 
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> to return &quot;HTTP/1.1 200 OK&quot; instead of &quot;HTTP/1.1 404 Not Found&quot; &gt;
</I>
&gt;<i>That one is not a good idea. The origin server is producing that 404, 
</I>&gt;<i>nothing to do with Squid. 
</I>
But in this case the Host header resolves to the IP in the URL and if we
simply do `curl -v -k -x IP:PORT <A HREF="http://erlang.org/doc/search/`">http://erlang.org/doc/search/`</A> it returns a
&quot;HTTP/1.1 200 OK&quot;. Shouldn't be possible for Squid to use the Host header
instead of the IP in such cases and not rewriting the Host header with the
IP? Or such behavior would go against the RFC 7230 (HTTP/1.1):

   When a proxy receives a request with an absolute-form of
   request-target, the proxy MUST ignore the received Host header field
   (if any) and instead replace it with the host information of the
   request-target.  A proxy that forwards such a request MUST generate a
   new Host field-value based on the received request-target rather than
   forward the received Host field-value

?

Thanks.



--
Sent from: <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-Users-f1019091.html">http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-Users-f1019091.html</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="021172.html">[squid-users] Overwrite an URL containing an IP when it is requested with a custom Host header
</A></li>
	<LI>Next message (by thread): <A HREF="021175.html">[squid-users] Overwrite an URL containing an IP when it is requested with a custom Host header
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21174">[ date ]</a>
              <a href="thread.html#21174">[ thread ]</a>
              <a href="subject.html#21174">[ subject ]</a>
              <a href="author.html#21174">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
