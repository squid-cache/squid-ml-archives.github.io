<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] SSL negotiation errors on https_port
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SSL%20negotiation%20errors%20on%20https_port&In-Reply-To=%3Cadbcba3f-b244-5939-5e0e-414dff9e7f3e%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021179.html">
   <LINK REL="Next"  HREF="021186.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] SSL negotiation errors on https_port</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SSL%20negotiation%20errors%20on%20https_port&In-Reply-To=%3Cadbcba3f-b244-5939-5e0e-414dff9e7f3e%40measurement-factory.com%3E"
       TITLE="[squid-users] SSL negotiation errors on https_port">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Oct 17 21:32:50 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="021179.html">[squid-users] SSL negotiation errors on https_port
</A></li>
        <LI>Next message (by thread): <A HREF="021186.html">[squid-users] How to make squid use ipv4 only for connecting to	websites
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21181">[ date ]</a>
              <a href="thread.html#21181">[ thread ]</a>
              <a href="subject.html#21181">[ subject ]</a>
              <a href="author.html#21181">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/17/19 4:52 PM, Robert wrote:

&gt;<i> I see many lines like these in the cache.log file:
</I>
&gt;<i> 2019/10/17 22:38:33.552 kid1| Error negotiating SSL connection on FD 44: error:00000001:lib(0):func(0):reason(1) (1/-1)
</I>
OpenSSL refused to accept a TLS client connection with a generic
SSL_ERROR_SSL:

    A non-recoverable, fatal error in the SSL library occurred, usually
    a protocol error.  The OpenSSL error queue contains more information
    on the error.

AFAICT, Squid does not have the code to examine OpenSSL error queue
beyond the surface level (shown in your cache.log), but that does not
mean there is actually more information in that queue in your particular
case. Said that, quality pull requests (or sponsorship for) adding deep
error queue inspection support are welcomed.

I trust there are no other potentially relevant ERRORs and WARNINGs in
your cache.log.

It sounds like you can trivially reproduce the problem. If so, a capable
developer with access to your box should be able to triage it further.


&gt;<i> Is it just related to the ssl handshake and not to worry about?
</I>
It is most likely related to the SSL handshake. FWIW, I would worry
about it because it should not be happening under normal conditions.


HTH,

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="021179.html">[squid-users] SSL negotiation errors on https_port
</A></li>
	<LI>Next message (by thread): <A HREF="021186.html">[squid-users] How to make squid use ipv4 only for connecting to	websites
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21181">[ date ]</a>
              <a href="thread.html#21181">[ thread ]</a>
              <a href="subject.html#21181">[ subject ]</a>
              <a href="author.html#21181">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
