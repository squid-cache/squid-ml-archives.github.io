<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Call for adaptation after sni peeked
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Call%20for%20adaptation%20after%20sni%20peeked&In-Reply-To=%3CCAGRJihX_X%2BFFK-M0UOg6UhnPL3_TeOykxY8%2BF64L5AL7teRfVg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021202.html">
   <LINK REL="Next"  HREF="021207.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Call for adaptation after sni peeked</H1>
    <B>Jatin Bhasin</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Call%20for%20adaptation%20after%20sni%20peeked&In-Reply-To=%3CCAGRJihX_X%2BFFK-M0UOg6UhnPL3_TeOykxY8%2BF64L5AL7teRfVg%40mail.gmail.com%3E"
       TITLE="[squid-users] Call for adaptation after sni peeked">jbhasin83 at gmail.com
       </A><BR>
    <I>Wed Oct 23 19:37:19 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="021202.html">[squid-users] Call for adaptation after sni peeked
</A></li>
        <LI>Next message (by thread): <A HREF="021207.html">[squid-users] Call for adaptation after sni peeked
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21206">[ date ]</a>
              <a href="thread.html#21206">[ thread ]</a>
              <a href="subject.html#21206">[ subject ]</a>
              <a href="author.html#21206">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

This question is related to ssl decryption and ecap adaptation call.
When the ssl connection starts then before it even extracts sni squid sends
 fakeConnect which comes to ecap as well.
I am using peek in step 1 and after fakeConnect squid extracts the sni, but
at this point squid does not make another call to ecap. This function in
squid is startPeekAndSpliceDone in file client_side.cc
In this function it only makes a call to acl for ssl bump to check but no
call to ecap adaptation checks.

I was hoping at this point I can put a call to http-&gt;doCallouts which can
make the call to ecap adapter and this time we have sni as well?

I needed this functionality as I want to make the decision using sni
whether to bump the connection or not.

Thanks,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20191024/bb3e5d0c/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20191024/bb3e5d0c/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="021202.html">[squid-users] Call for adaptation after sni peeked
</A></li>
	<LI>Next message (by thread): <A HREF="021207.html">[squid-users] Call for adaptation after sni peeked
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21206">[ date ]</a>
              <a href="thread.html#21206">[ thread ]</a>
              <a href="subject.html#21206">[ subject ]</a>
              <a href="author.html#21206">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
