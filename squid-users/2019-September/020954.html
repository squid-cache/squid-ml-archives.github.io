<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] help with helper
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20help%20with%20helper&In-Reply-To=%3C24302a32-3954-170f-bb21-6b69530ccede%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020950.html">
   <LINK REL="Next"  HREF="020943.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] help with helper</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20help%20with%20helper&In-Reply-To=%3C24302a32-3954-170f-bb21-6b69530ccede%40treenet.co.nz%3E"
       TITLE="[squid-users] help with helper">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Sep  3 14:28:48 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020950.html">[squid-users] help with helper
</A></li>
        <LI>Next message (by thread): <A HREF="020943.html">[squid-users] Cant open some HTTPS with Squid 4.8
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20954">[ date ]</a>
              <a href="thread.html#20954">[ thread ]</a>
              <a href="subject.html#20954">[ subject ]</a>
              <a href="author.html#20954">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 4/09/19 1:13 am, jmperrote wrote:
&gt;<i> Hello Amos, yes but how can I identified that is on the first request ??
</I>&gt;<i> 
</I>
It will be first? but what does first actually mean?
  first this year? first today? first this second?

HTTP is stateless. There is no concept of &quot;second request&quot; etc. outside
of feature which are *not* related to users or useful to you here.

_Every_ request that your config requires credentials to accept, needs
credentials provided or will get a 401/407 response. That is just how
auth works in HTTP. There are likely many of those which are handled by
the Browser without any popup at all.
 To Squid there is no difference between request 1 without credentials
and request 2 without credentials.


&gt;<i> Else squid request to autentificate and later when invoque the helper
</I>&gt;<i> again request to autentificate.
</I>
Every time Squid is handed never-before-seen credentials the helper will
be asked to check them.

Every time Squid is handed credentials that are apparently expired, the
helper will be asked to check them.


&gt;<i> 
</I>&gt;<i> I handle recover the user from squid cache (cachmanager) on the helper,
</I>&gt;<i> for asking if the user previous exist, but squid refresh cache and users
</I>&gt;<i> disapearing time to time.
</I>
Yes. Computers do not have infinite memory. Things that are clearly
obsolete are thrown away after a reasonable time.


To make credentials stick around longer you can do two things;

 1) increase their TTL. The longer they are considered valid the longer
they are retained as possibly useful.

 Pros: they stick around. Less CPU load on the auth system.

 Cons: they stick around. Increased memory usage. Reduced ability to
change passwords. Reduced ability to kick malicious users off the proxy
by disabling hacked credentials.


 2) increase the garbage collection interval Squid uses. This keeps
obsolete logins around longer.

 Pros: more known logins.

 Cons: more memory used storing logins.


Both have the possibility/risk that users &quot;login session&quot; goes longer
than you might be expecting.

For example; if set to 10hrs (one working day). A user may &quot;logout&quot; late
one night, then re-login early the next day (9hrs of sleep later) and be
seen by Squid as having continued the same login started yesterday.
 Even 2hrs is too long to cover lunch breaks etc.
 Up to you of course, just consider what type of activities may be
problematic for your system for any given time range.

&gt;<i> 
</I>&gt;<i> The exact question is: how to know is the user is previous logued, so
</I>&gt;<i> the helper just validate user/password 
</I>
Yes.

&gt;<i> and later ALLOW to continue.
</I>&gt;<i> 
</I>
No.

Authentication vs Authorization. There is a thin difference, but it is
very important to understanding these things going on.

The auth helper only does Authentication - checking that credentials are
*correct*.

Squid ACLs do the Authorization - allow/deny actions. Which may (or not)
be based on whether credentials are correct / authenticated.



HTH
Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020950.html">[squid-users] help with helper
</A></li>
	<LI>Next message (by thread): <A HREF="020943.html">[squid-users] Cant open some HTTPS with Squid 4.8
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20954">[ date ]</a>
              <a href="thread.html#20954">[ thread ]</a>
              <a href="subject.html#20954">[ subject ]</a>
              <a href="author.html#20954">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
