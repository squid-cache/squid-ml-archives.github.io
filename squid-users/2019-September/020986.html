<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Disable 302 redirect in squid, but only to http://eais.rkn.gov.ru
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Disable%20302%20redirect%20in%20squid%2C%0A%20but%20only%20to%20http%3A//eais.rkn.gov.ru&In-Reply-To=%3C3e50f0a6-dbd8-fb01-3207-5846b7ff6176%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="020984.html">
   <LINK REL="Next"  HREF="020995.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Disable 302 redirect in squid, but only to http://eais.rkn.gov.ru</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Disable%20302%20redirect%20in%20squid%2C%0A%20but%20only%20to%20http%3A//eais.rkn.gov.ru&In-Reply-To=%3C3e50f0a6-dbd8-fb01-3207-5846b7ff6176%40treenet.co.nz%3E"
       TITLE="[squid-users] Disable 302 redirect in squid, but only to http://eais.rkn.gov.ru">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Sep 12 05:25:08 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="020984.html">[squid-users] Disable 302 redirect in squid,	but only to http://eais.rkn.gov.ru
</A></li>
        <LI>Next message (by thread): <A HREF="020995.html">[squid-users] Disable 302 redirect in squid, but only to http://eais.rkn.gov.ru
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20986">[ date ]</a>
              <a href="thread.html#20986">[ thread ]</a>
              <a href="subject.html#20986">[ subject ]</a>
              <a href="author.html#20986">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 12/09/19 7:45 am, Igor Rylov wrote:
&gt;<i> After I've wrote my question, I thought, if it's possible to to do it with:
</I>&gt;<i> 
</I>&gt;<i> acl sites_blocking_redirect url_regex eais\.rkn\.gov\.ru
</I>&gt;<i> &lt;<A HREF="http://eais.rkn.gov.ru">http://eais.rkn.gov.ru</A>&gt;
</I>&gt;<i> reply_header_access Location deny sites_blocking_redirect
</I>&gt;<i> 
</I>&gt;<i> Is it a workable or the correct way to do it, so it solves my problem?
</I>
It is close. That would stop the Location header getting to the client
Browser. But the 302 status still will, and given that the Browser back
button functionality is not working like it used to (a browser bug?),
the full result may still not be worth it.

I would use the http_reply_access to deny instead. That way the client
gets a 403 status from Squid and definitely none of the upstream's redirect.

If you want to be more fancy than 403, the current Squid can attach a
deny_info to the ACL to make the denial have 451 status with custom
template page explaining the block to any user that sees it.
 (Which is what your upstream should have been doing.)

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="020984.html">[squid-users] Disable 302 redirect in squid,	but only to http://eais.rkn.gov.ru
</A></li>
	<LI>Next message (by thread): <A HREF="020995.html">[squid-users] Disable 302 redirect in squid, but only to http://eais.rkn.gov.ru
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#20986">[ date ]</a>
              <a href="thread.html#20986">[ thread ]</a>
              <a href="subject.html#20986">[ subject ]</a>
              <a href="author.html#20986">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
