<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] caching and changing content
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20caching%20and%20changing%20content&In-Reply-To=%3C7947cd1c-8396-60d9-3cab-d5a7c8b3626b%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021002.html">
   <LINK REL="Next"  HREF="020989.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] caching and changing content</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20caching%20and%20changing%20content&In-Reply-To=%3C7947cd1c-8396-60d9-3cab-d5a7c8b3626b%40measurement-factory.com%3E"
       TITLE="[squid-users] caching and changing content">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Sep 12 17:14:01 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="021002.html">[squid-users] caching and changing content
</A></li>
        <LI>Next message (by thread): <A HREF="020989.html">[squid-users] intercept vs. accel vhost allow-direct
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21003">[ date ]</a>
              <a href="thread.html#21003">[ thread ]</a>
              <a href="subject.html#21003">[ subject ]</a>
              <a href="author.html#21003">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 9/12/19 12:22 PM, fansari wrote:
&gt;<i> '--enable-delay-pools'
</I>
OK, so we should be careful with not trusting TCP_MISS too much.


&gt;<i> <A HREF="http://squid-web-proxy-cache.1019090.n4.nabble.com/file/t377780/cache.log">http://squid-web-proxy-cache.1019090.n4.nabble.com/file/t377780/cache.log</A>
</I>

Squid shows these headers for the second response (near 15:40:03.814):

&gt;<i> X-Cache: MISS from my-client-02
</I>&gt;<i> X-Cache-Lookup: HIT from my-client-02:3128
</I>
This means that Squid found the requested resource in the cache (good!)
but decided not to use that cached response (bad).

Moreover, according to your cache.log, Squid decided not to send a
conditional request to check that cached response freshness. Squid sent
a regular/unconditional request instead. I do not know why. Perhaps your
old Squid does not support revalidation using weak E-Tags, but that is
just a wild guess.

If others cannot find the answer in your logs, then one way to figure it
out would be to increase debugging (debug_options ALL,3 88,7 22,7). An
alternative strategy would be to upgrade to Squid v4 in hope that it
would be better at revalidating this particular resource.

HTH,

Alex.





</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="021002.html">[squid-users] caching and changing content
</A></li>
	<LI>Next message (by thread): <A HREF="020989.html">[squid-users] intercept vs. accel vhost allow-direct
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21003">[ date ]</a>
              <a href="thread.html#21003">[ thread ]</a>
              <a href="subject.html#21003">[ subject ]</a>
              <a href="author.html#21003">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
