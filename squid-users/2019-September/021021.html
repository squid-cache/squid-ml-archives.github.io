<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid Transparent Proxy with Coovachilli is not working
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Transparent%20Proxy%20with%20Coovachilli%20is%20not%0A%20working&In-Reply-To=%3C20190915090912.GA4063%40fantomas.sk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021019.html">
   <LINK REL="Next"  HREF="021020.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid Transparent Proxy with Coovachilli is not working</H1>
    <B>Matus UHLAR - fantomas</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Transparent%20Proxy%20with%20Coovachilli%20is%20not%0A%20working&In-Reply-To=%3C20190915090912.GA4063%40fantomas.sk%3E"
       TITLE="[squid-users] Squid Transparent Proxy with Coovachilli is not working">uhlar at fantomas.sk
       </A><BR>
    <I>Sun Sep 15 09:09:12 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="021019.html">[squid-users] Squid Transparent Proxy with Coovachilli is not	working
</A></li>
        <LI>Next message (by thread): <A HREF="021020.html">[squid-users] Squid Transparent Proxy with Coovachilli is not	working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21021">[ date ]</a>
              <a href="thread.html#21021">[ thread ]</a>
              <a href="subject.html#21021">[ subject ]</a>
              <a href="author.html#21021">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 14.09.19 23:57, sknz wrote:
&gt;<i>eht1 is not useless really, Coovachilli created tun0 under eth1. Yes, I've
</I>&gt;<i>heard about stateful firewall, though this is not my domain of expertise.
</I>
it's very hard to guess what's the problem and how should the solution look
like, when someone does this to passing network traffic. Correct solutions
may work, incorrect may not, when someone does modify traffic like this.

&gt;<i>/CoovaChilli takes control of the internal interface (eth1) using a raw
</I>&gt;<i>promiscuous socket. It then uses the vtun kernel module to bring up a
</I>&gt;<i>virtual interface tun0 to pass and receive packets to and from the
</I>&gt;<i>eth0(WAN). In fact, the vtun kernel module is used to move IP packets from
</I>&gt;<i>the kernel to user mode, in such a way that CoovaChilli can function without
</I>&gt;<i>any non-standard kernel modules. CoovaChilli then provides DHCP, ARP, and
</I>&gt;<i>HTTP Hijacking on the &quot;dhcpif&quot; interface, in our case that's eth0/
</I>
I believe you should ask in coovachilli forums/lists for proper solutions.

However, from packet capture it seems that requests are really getting to
squid (they are being responded to), so squid logs shouls show.

Or, it may be the coovachilli manipulating them. Try asking coovchilli.

-- 
Matus UHLAR - fantomas, <A HREF="https://lists.squid-cache.org/listinfo/squid-users">uhlar at fantomas.sk</A> ; <A HREF="http://www.fantomas.sk/">http://www.fantomas.sk/</A>
Warning: I wish NOT to receive e-mail advertising to this address.
Varovanie: na tuto adresu chcem NEDOSTAVAT akukolvek reklamnu postu.
Atheism is a non-prophet organization.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="021019.html">[squid-users] Squid Transparent Proxy with Coovachilli is not	working
</A></li>
	<LI>Next message (by thread): <A HREF="021020.html">[squid-users] Squid Transparent Proxy with Coovachilli is not	working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21021">[ date ]</a>
              <a href="thread.html#21021">[ thread ]</a>
              <a href="subject.html#21021">[ subject ]</a>
              <a href="author.html#21021">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
