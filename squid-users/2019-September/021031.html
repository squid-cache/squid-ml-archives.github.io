<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] How to extend Squid ICAP preview size
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20extend%20Squid%20ICAP%20preview%20size&In-Reply-To=%3CCADcj3%3D4fNho5AA3FmBJnnpsfc4ZuLb6VbBnVhT3rCcJfih1Acw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021047.html">
   <LINK REL="Next"  HREF="021032.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] How to extend Squid ICAP preview size</H1>
    <B>Felipe Arturo Polanco</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20extend%20Squid%20ICAP%20preview%20size&In-Reply-To=%3CCADcj3%3D4fNho5AA3FmBJnnpsfc4ZuLb6VbBnVhT3rCcJfih1Acw%40mail.gmail.com%3E"
       TITLE="[squid-users] How to extend Squid ICAP preview size">felipeapolanco at gmail.com
       </A><BR>
    <I>Mon Sep 16 14:37:11 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="021047.html">[squid-users] Problem with ssl_choose_client_version:inappropriate fallback on some sites when using TLS1.2
</A></li>
        <LI>Next message (by thread): <A HREF="021032.html">[squid-users] How to extend Squid ICAP preview size
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21031">[ date ]</a>
              <a href="thread.html#21031">[ thread ]</a>
              <a href="subject.html#21031">[ subject ]</a>
              <a href="author.html#21031">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

We would like to add some logic to our custom made ICAP server, one of
these logics is to analyze up to 10MB of data of a given file and if the
file is larger than that, squid should not keep sending it to icap,
basically, a 204 message should be returned.

We understand this is not possible with Transfer-Complete OPTION, because
that will send the whole file to the ICAP server, no matter the size.

And while Transfer-Preview may be good for this, squid has a cap of 64K of
preview size that limit us in the aspect.

Is there a way to extend this limit? Modifying the source code perhaps?
If so, what are the disadvantages of doing so? Would it require more RAM
per response or is RAM dynamically allocated as the file is being received?

Thanks,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20190916/9320cfe5/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20190916/9320cfe5/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="021047.html">[squid-users] Problem with ssl_choose_client_version:inappropriate fallback on some sites when using TLS1.2
</A></li>
	<LI>Next message (by thread): <A HREF="021032.html">[squid-users] How to extend Squid ICAP preview size
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21031">[ date ]</a>
              <a href="thread.html#21031">[ thread ]</a>
              <a href="subject.html#21031">[ subject ]</a>
              <a href="author.html#21031">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
