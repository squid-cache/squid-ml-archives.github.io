<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] --foreground vs -N
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20--foreground%20vs%20-N&In-Reply-To=%3CCAOyb_Ex0X%3DRu28yw1VL%2BiDZXgH%2BnGgeCf1j_iYMV24Zkuyg-Gw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021045.html">
   <LINK REL="Next"  HREF="021044.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] --foreground vs -N</H1>
    <B>B. Cook</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20--foreground%20vs%20-N&In-Reply-To=%3CCAOyb_Ex0X%3DRu28yw1VL%2BiDZXgH%2BnGgeCf1j_iYMV24Zkuyg-Gw%40mail.gmail.com%3E"
       TITLE="[squid-users] --foreground vs -N">bcook at poughkeepsieschools.org
       </A><BR>
    <I>Wed Sep 18 17:59:37 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="021045.html">[squid-users] SSL termination problem - squid's requests using	https
</A></li>
        <LI>Next message (by thread): <A HREF="021044.html">[squid-users] --foreground vs -N
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21043">[ date ]</a>
              <a href="thread.html#21043">[ thread ]</a>
              <a href="subject.html#21043">[ subject ]</a>
              <a href="author.html#21043">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>tl;dr:
is there any functional difference between the two?


Using runit to handle my squid processes.

I have Observium graphing system information.

My data/traffic is consistent

In my run file I changed from squid -N to squid --foreground

#!/bin/sh -e

exec \
chpst -o 131070 \
chpst -e ./env \
/usr/sbin/squid --foreground -s
# /usr/sbin/squid -N -s

I made the change at 10:30 and the cpu usage increased.

cpu graph: <A HREF="https://imgur.com/a/PWrpDcM">https://imgur.com/a/PWrpDcM</A>
memory graph: <A HREF="https://imgur.com/a/uUhwHA6">https://imgur.com/a/uUhwHA6</A>
bandwidth graph: <A HREF="https://imgur.com/a/dzHDiKO">https://imgur.com/a/dzHDiKO</A>
(bandwidth has trend applied)

I can not tell from the graph if 'performance' increased or 'latency'
decreased.. but cpu usage certainly did increase.

I have no workers defined.

stock squid.conf plus this:

&lt;code&gt;
cache deny all
shutdown_lifetime 1 seconds
dns_nameservers 10.20.8.29
cache_mem 1024 MB
cache_mgr <A HREF="https://lists.squid-cache.org/listinfo/squid-users">Support_ at _PCSD_0_120</A>
dns_defnames off
dns_v4_first on
max_filedescriptors 65536
ipcache_size 4096
read_ahead_gap 512 KB
quick_abort_min 1024 KB
pid_filename /run/squid/squid.pid
forwarded_for off
eui_lookup off
hosts_file none
url_rewrite_extras &quot;%&gt;a %un %&gt;rm myip=%la myport=%lp&quot;
store_id_extras &quot;%&gt;a %un %&gt;rm myip=%la myport=%lp&quot;
log_uses_indirect_client off
&lt;/code&gt;

Archlinux squid 4.8, 4.19.72-1-lts kernel

Thank you in advance for taking the time to read this..

-- 
Network Analyst
Poughkeepsie City School District
SMS &amp; Mobile: (202) 810-5827
twitter.com/bcookatpcsd

If you can't explain it simply, you don't understand it well enough.

-- 

This message may contain confidential information and is intended only for 
the individual(s) named. If you are not an intended recipient you are not 
authorized to disseminate, distribute or copy this e-mail. Please notify 
the sender immediately if you have received this e-mail by mistake and 
delete this e-mail from your system.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="021045.html">[squid-users] SSL termination problem - squid's requests using	https
</A></li>
	<LI>Next message (by thread): <A HREF="021044.html">[squid-users] --foreground vs -N
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21043">[ date ]</a>
              <a href="thread.html#21043">[ thread ]</a>
              <a href="subject.html#21043">[ subject ]</a>
              <a href="author.html#21043">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
