<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] access log without hostname
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20access%20log%20without%20hostname&In-Reply-To=%3C9f2a02ed-c280-dce9-26c5-29159c2961cf%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021051.html">
   <LINK REL="Next"  HREF="021053.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] access log without hostname</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20access%20log%20without%20hostname&In-Reply-To=%3C9f2a02ed-c280-dce9-26c5-29159c2961cf%40measurement-factory.com%3E"
       TITLE="[squid-users] access log without hostname">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Sep 19 15:00:45 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="021051.html">[squid-users] access log without hostname
</A></li>
        <LI>Next message (by thread): <A HREF="021053.html">[squid-users] access log without hostname
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21052">[ date ]</a>
              <a href="thread.html#21052">[ thread ]</a>
              <a href="subject.html#21052">[ subject ]</a>
              <a href="author.html#21052">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 9/19/19 10:29 AM, sknz wrote:
&gt;<i> I'm using squid 3.5.3 to intercept https without issuing the client
</I>&gt;<i> certificate.  
</I>&gt;<i> 
</I>&gt;<i> https_port 3127 intercept ssl-bump generate-host-certificates=off
</I>&gt;<i> cert=certs/squid.pem
</I>&gt;<i> ssl_bump none all
</I>
&gt;<i> So my squid access log is similar to this. Is there any way to make it more
</I>&gt;<i> meaningful? perhaps hostname?
</I>
You can peek at step1 to get access to TLS client handshake information,
which may include TLS SNI. You can also peek at step2 to get access to
TLS server handshake information, which may include TLS server CN and
other details. IIRC, some of those details will be logged automatically
with the default logformat. Others can be logged using TLS-specific
logformat %codes.

  <A HREF="https://wiki.squid-cache.org/Features/SslPeekAndSplice">https://wiki.squid-cache.org/Features/SslPeekAndSplice</A>


HTH,

Alex.


&gt;<i> ...............................
</I>&gt;<i> 1568902948.817  65168 10.1.0.1 TCP_TUNNEL/200 891 CONNECT 157.240.16.63:443
</I>&gt;<i> - ORIGINAL_DST/157.240.16.63 - 10.1.0.1
</I>&gt;<i> 1568903081.342 240109 10.1.0.1 TCP_TUNNEL/200 458 CONNECT
</I>&gt;<i> 172.217.163.132:443 - ORIGINAL_DST/172.217.163.132 - 10.1.0.1
</I>&gt;<i> 1568903132.645 240133 10.1.0.1 TCP_TUNNEL/200 99047 CONNECT
</I>&gt;<i> 172.217.31.214:443 - ORIGINAL_DST/172.217.31.214 - 10.1.0.1
</I>&gt;<i> ...............................
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="021051.html">[squid-users] access log without hostname
</A></li>
	<LI>Next message (by thread): <A HREF="021053.html">[squid-users] access log without hostname
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21052">[ date ]</a>
              <a href="thread.html#21052">[ thread ]</a>
              <a href="subject.html#21052">[ subject ]</a>
              <a href="author.html#21052">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
