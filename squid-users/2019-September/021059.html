<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Peek-and-splice not working when mixing TLS1.3 servers and TLS1.2 clients
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Peek-and-splice%20not%20working%20when%20mixing%20TLS1.3%0A%20servers%20and%20TLS1.2%20clients&In-Reply-To=%3C43742d32-1bf7-b194-2641-d29273588d4d%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021057.html">
   <LINK REL="Next"  HREF="021067.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Peek-and-splice not working when mixing TLS1.3 servers and TLS1.2 clients</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Peek-and-splice%20not%20working%20when%20mixing%20TLS1.3%0A%20servers%20and%20TLS1.2%20clients&In-Reply-To=%3C43742d32-1bf7-b194-2641-d29273588d4d%40measurement-factory.com%3E"
       TITLE="[squid-users] Peek-and-splice not working when mixing TLS1.3 servers and TLS1.2 clients">rousskov at measurement-factory.com
       </A><BR>
    <I>Fri Sep 20 16:01:58 UTC 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="021057.html">[squid-users] Peek-and-splice not working when mixing TLS1.3 servers and TLS1.2 clients
</A></li>
        <LI>Next message (by thread): <A HREF="021067.html">[squid-users] Peek-and-splice not working when mixing TLS1.3 servers and TLS1.2 clients
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21059">[ date ]</a>
              <a href="thread.html#21059">[ thread ]</a>
              <a href="subject.html#21059">[ subject ]</a>
              <a href="author.html#21059">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 9/20/19 10:53 AM, Nikolaus wrote:

&gt;<i> If server and squid use TLS 1.3, but client only supports TLS 1.2: The
</I>&gt;<i> client terminates the connection due to certificate verification errors.
</I>&gt;<i> 
</I>&gt;<i> I have had a look at what happens at TLS protocol level using wireshark,
</I>&gt;<i> and it seems that in the latter case, squid - for some reason - performs
</I>&gt;<i> (something similar to) bumping instead of splicing!
</I>
Bumping happens when a splicing Squid wants to report an SslBump-related
error to the client.


&gt;<i> How can I get the splicing setup working when mixing TLS 1.3 servers and
</I>&gt;<i> TLS 1.2 clients?
</I>
I do not know the exact answer to that question, but I would start by
figuring out what error Squid is trying to serve to the client. You may
be able to figure it out by looking at the corresponding access.log
records, especially if you log %err_code and %err_detail. In the worst
case, enabling and looking at debugging info in cache.log may be
necessary, but I would start with access.log anyway.

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="021057.html">[squid-users] Peek-and-splice not working when mixing TLS1.3 servers and TLS1.2 clients
</A></li>
	<LI>Next message (by thread): <A HREF="021067.html">[squid-users] Peek-and-splice not working when mixing TLS1.3 servers and TLS1.2 clients
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21059">[ date ]</a>
              <a href="thread.html#21059">[ thread ]</a>
              <a href="subject.html#21059">[ subject ]</a>
              <a href="author.html#21059">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
