<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid transparent not caching apt requests from	deb.debian.org
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20transparent%20not%20caching%20apt%20requests%20from%0A%09deb.debian.org&In-Reply-To=%3C202004032232.16885.Antony.Stone%40squid.open.source.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021880.html">
   <LINK REL="Next"  HREF="021882.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid transparent not caching apt requests from	deb.debian.org</H1>
    <B>Antony Stone</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20transparent%20not%20caching%20apt%20requests%20from%0A%09deb.debian.org&In-Reply-To=%3C202004032232.16885.Antony.Stone%40squid.open.source.it%3E"
       TITLE="[squid-users] Squid transparent not caching apt requests from	deb.debian.org">Antony.Stone at squid.open.source.it
       </A><BR>
    <I>Fri Apr  3 20:32:16 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="021880.html">[squid-users] Squid transparent not caching apt requests from	deb.debian.org
</A></li>
        <LI>Next message (by thread): <A HREF="021882.html">[squid-users] Squid transparent not caching apt requests from deb.debian.org
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21881">[ date ]</a>
              <a href="thread.html#21881">[ thread ]</a>
              <a href="subject.html#21881">[ subject ]</a>
              <a href="author.html#21881">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Friday 03 April 2020 at 22:26:13, zrm wrote:

&gt;<i> Greetings! Today I bring you a Squid cache mystery.
</I>
&gt;<i> In the first case we get TCP_MISS every time because it isn't caching
</I>&gt;<i> the data, in the second case it's only the first time and after that we
</I>&gt;<i> get TCP_REFRESH_UNMODIFIED. But how and why is this happening?
</I>
Given that this is an intercepting proxy and you're using HTTP (not HTTPS), 
can you do a packet capture with tshark or similar on the internal interface, 
to show the full details of the HTTP request which comes in to Squid from apt, 
and the same for wget, to see what difference there is?


Antony.

-- 
Normal people think &quot;If it ain't broke, don't fix it&quot;.
Engineers think &quot;If it ain't broke, it doesn't have enough features yet&quot;.

                                                   Please reply to the list;
                                                         please *don't* CC me.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="021880.html">[squid-users] Squid transparent not caching apt requests from	deb.debian.org
</A></li>
	<LI>Next message (by thread): <A HREF="021882.html">[squid-users] Squid transparent not caching apt requests from deb.debian.org
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21881">[ date ]</a>
              <a href="thread.html#21881">[ thread ]</a>
              <a href="subject.html#21881">[ subject ]</a>
              <a href="author.html#21881">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
