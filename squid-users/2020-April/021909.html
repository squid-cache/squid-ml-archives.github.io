<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Setting up proxy with private to public
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Setting%20up%20proxy%20with%20private%20to%20public&In-Reply-To=%3CCAHKi8ChiBm4V4XhmohsvSYHx8psOxsN_qQX%3D8%2BY%3D0em3Ea%2BVFg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021908.html">
   <LINK REL="Next"  HREF="021910.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Setting up proxy with private to public</H1>
    <B>Chris Bidwell - NOAA Federal</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Setting%20up%20proxy%20with%20private%20to%20public&In-Reply-To=%3CCAHKi8ChiBm4V4XhmohsvSYHx8psOxsN_qQX%3D8%2BY%3D0em3Ea%2BVFg%40mail.gmail.com%3E"
       TITLE="[squid-users] Setting up proxy with private to public">chris.bidwell at noaa.gov
       </A><BR>
    <I>Mon Apr 13 21:46:46 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="021908.html">[squid-users] Setting up proxy with private to public
</A></li>
        <LI>Next message (by thread): <A HREF="021910.html">[squid-users] Setting up proxy with private to public
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21909">[ date ]</a>
              <a href="thread.html#21909">[ thread ]</a>
              <a href="subject.html#21909">[ subject ]</a>
              <a href="author.html#21909">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sure.  So we have a few internal networks that aren't meant to have direct
internet access without access through a proxy so that it can be better
regulated and monitored.

That being said, we've previously used a microsoft product that is EOL and
I thought I could do much of what it's wanting with Linux and squid and
nginx for reverse proxy.

We've got several internal subnets that need to be able to talk through
squid (I've chosen tcp/8080) to connect to from internally and want to
translate that to an external IP address that does have access to the
outside world.  Using the acl's that squid provides and allowing for
various ports (80/443, etc) I'd like to use this functionality.

Once again, the squid server has two IP addresses.  One internal, and one
external.  The outbound traffic would be accessible through that external
ip.

I hope I'm making *some* sense.  :)

Thanks

On Mon, Apr 13, 2020 at 3:38 PM Antony Stone &lt;
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">Antony.Stone at squid.open.source.it</A>&gt; wrote:

&gt;<i> On Monday 13 April 2020 at 21:19:04, Chris Bidwell - NOAA Federal wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Hi all,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Very new to squid and am looking to setup several internal subnets to
</I>&gt;<i> &gt; access external network (internet) through squid on a separate interface.
</I>&gt;<i>
</I>&gt;<i> What are you trying to achieve by using Squid?  What is your objective,
</I>&gt;<i> compared to giving clients direct access to the Internet?
</I>&gt;<i>
</I>&gt;<i> &gt; Server has two IP's.  One private internal and one public.  Can someone
</I>&gt;<i> &gt; point me in the right direction to get this setup?  Running RHEL7.
</I>&gt;<i>
</I>&gt;<i> Firstly, install Squid and look at its configuration file.  It is *very*
</I>&gt;<i> well
</I>&gt;<i> commented / documented, and there is *very* little you need to change in
</I>&gt;<i> order
</I>&gt;<i> to get it working on your network.
</I>&gt;<i>
</I>&gt;<i> For more details, see:
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://wiki.squid-cache.org/SquidFaq/BinaryPackages">https://wiki.squid-cache.org/SquidFaq/BinaryPackages</A>
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://wiki.squid-cache.org/SquidFaq/ConfiguringSquid">https://wiki.squid-cache.org/SquidFaq/ConfiguringSquid</A>
</I>&gt;<i> <A HREF="https://wiki.squid-cache.org/SquidFaq">https://wiki.squid-cache.org/SquidFaq</A>
</I>&gt;<i> <A HREF="https://wiki.squid-cache.org/ConfigExamples">https://wiki.squid-cache.org/ConfigExamples</A>
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://www.packtpub.com/squid-proxy-server-31-beginners-guide/book">https://www.packtpub.com/squid-proxy-server-31-beginners-guide/book</A>
</I>&gt;<i> <A HREF="http://www.oreilly.com/catalog/squid/">http://www.oreilly.com/catalog/squid/</A>
</I>&gt;<i>
</I>&gt;<i> (All the above available from <A HREF="http://www.squid-cache.org">http://www.squid-cache.org</A> )
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; Do I need to create static routes?
</I>&gt;<i>
</I>&gt;<i> Provided the machine you want install Squid on can reach (a) arbitrary web
</I>&gt;<i> servers on the Internet, and (b) the client machines on your internal
</I>&gt;<i> networks, then no.
</I>&gt;<i>
</I>&gt;<i> If not, then yes, you will need to add suitable routes so that the Squid
</I>&gt;<i> server can find both origin servers and clients.
</I>&gt;<i>
</I>&gt;<i> &gt; Do I need firewalld rules in place?
</I>&gt;<i>
</I>&gt;<i> A firewall is always a good idea, however Squid imposes no special
</I>&gt;<i> requirement
</I>&gt;<i> of its own here.
</I>&gt;<i>
</I>&gt;<i> A very good starting point for firewalls is &quot;allow the traffic you know
</I>&gt;<i> you want,
</I>&gt;<i> block the traffic you know you do not want, and log and block the traffic
</I>&gt;<i> you're
</I>&gt;<i> not sure about - then look at the logs and adjust the rules as necessary
</I>&gt;<i> to
</I>&gt;<i> keep the log entries minimal&quot;.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Finally, if you run into problems, come back here and tell us:
</I>&gt;<i>
</I>&gt;<i>  - what you want to achieve
</I>&gt;<i>  - what you did to try to achieve it
</I>&gt;<i>  - how you tested whether it worked
</I>&gt;<i>  - what you found which told you it didn't work
</I>&gt;<i>
</I>&gt;<i> Basically, give us enough information to understand what you're trying to
</I>&gt;<i> do,
</I>&gt;<i> what you've done to get there, and what went wrong (such that we could
</I>&gt;<i> reproduce the problem for ourselves if need be), and people here will
</I>&gt;<i> happily
</I>&gt;<i> help out.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Antony.
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Pavlov is in the pub enjoying a pint.
</I>&gt;<i> The barman rings for last orders, and Pavlov jumps up exclaiming &quot;Damn!  I
</I>&gt;<i> forgot to feed the dog!&quot;
</I>&gt;<i>
</I>&gt;<i>                                                    Please reply to the
</I>&gt;<i> list;
</I>&gt;<i>                                                          please *don't* CC
</I>&gt;<i> me.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>

-- 

Chris Bidwell, CISSP
Space Weather Prediction Center
National Oceanic Atmospheric Administration
email: c &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">cbidwell at usgs.gov</A>&gt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">hris.bidwell at noaa.gov</A>
office: 303-497-3204
mobile: 720-496-3126
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20200413/cf244a8e/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20200413/cf244a8e/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="021908.html">[squid-users] Setting up proxy with private to public
</A></li>
	<LI>Next message (by thread): <A HREF="021910.html">[squid-users] Setting up proxy with private to public
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21909">[ date ]</a>
              <a href="thread.html#21909">[ thread ]</a>
              <a href="subject.html#21909">[ subject ]</a>
              <a href="author.html#21909">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
