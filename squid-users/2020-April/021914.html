<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Setting up proxy with private to public
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Setting%20up%20proxy%20with%20private%20to%20public&In-Reply-To=%3CCAHKi8Ci%2BVsPWRxdGj-i1bJOk09QRKzpSoSiRYJ7f89Zk%3D2cdiQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021913.html">
   <LINK REL="Next"  HREF="021919.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Setting up proxy with private to public</H1>
    <B>Chris Bidwell - NOAA Federal</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Setting%20up%20proxy%20with%20private%20to%20public&In-Reply-To=%3CCAHKi8Ci%2BVsPWRxdGj-i1bJOk09QRKzpSoSiRYJ7f89Zk%3D2cdiQ%40mail.gmail.com%3E"
       TITLE="[squid-users] Setting up proxy with private to public">chris.bidwell at noaa.gov
       </A><BR>
    <I>Wed Apr 15 13:08:36 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="021913.html">[squid-users] Setting up proxy with private to public
</A></li>
        <LI>Next message (by thread): <A HREF="021919.html">[squid-users] Setting up proxy with private to public
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21914">[ date ]</a>
              <a href="thread.html#21914">[ thread ]</a>
              <a href="subject.html#21914">[ subject ]</a>
              <a href="author.html#21914">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sure thing.

On Tue, Apr 14, 2020 at 8:32 AM Antony Stone &lt;
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">Antony.Stone at squid.open.source.it</A>&gt; wrote:

&gt;<i> On Tuesday 14 April 2020 at 16:03:19, Chris Bidwell - NOAA Federal wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Okay, so I think I'm starting to get somewhere but the connection isn't
</I>&gt;<i> &gt; completing. I can see the connection come through my firewall, but the
</I>&gt;<i> &gt; handshake doesn't appear to be happening.
</I>&gt;<i>
</I>&gt;<i> Tell us more about your network setup.  Is the firewall between the
</I>&gt;<i> clients and
</I>&gt;<i> Squid, between Squid and the Internet, or do you have both?
</I>&gt;<i>
</I>
There is a firewall between my internal clients and squid.  There is a
firewall rule allowing tcp/8080 from my clients to the squid server.  And
from the squid server, it is allowed to the internet.

&gt;<i>
</I>&gt;<i> Can you do a simple Ping test from a client machine to the Squid server
</I>&gt;<i> (and
</I>&gt;<i> get replies)?
</I>&gt;<i>
</I>&gt;<i> Can you do the same from the Squid server to some Internet-based web
</I>&gt;<i> server
</I>&gt;<i> (making sure it's one which replies to pings - some machines are badly
</I>&gt;<i> configured and don't do this).
</I>&gt;<i>
</I>&gt;<i> &gt; My squid access log is saying:  TCP_MISS/503.
</I>&gt;<i>
</I>&gt;<i> I'm sure it says a lot more than that, but at least it's an indication
</I>&gt;<i> that
</I>&gt;<i> your client is getting the request through to Squid okay.
</I>&gt;<i>
</I>
Here is the full output of my access.log:
1586873819.383      0 192.168.226.241 TAG_NONE/409 4108 CONNECT
www.nginx.com:443 - HIER_NONE/- text/html

&gt;<i>
</I>&gt;<i> Assuming the Ping test from Squid to an Internet web server works, what
</I>&gt;<i> happens if you try wget, lynx, curl or even telnet to port 80, from the
</I>&gt;<i> Squid
</I>&gt;<i> server to some external web server?  Does it indicate that the Squid
</I>&gt;<i> server
</I>&gt;<i> has &quot;Internet access&quot;?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Antony.
</I>&gt;<i>
</I>
So after looking further.  It looks like when I'm trying to wget from my
squid server, which has the two nics (internal and public), it's trying to
send it through the internal
connection.  It doesn't seem to want to route through the external nic.

&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Programming is a Dark Art, and it will always be. The programmer is
</I>&gt;<i> fighting against the two most destructive forces in the universe:
</I>&gt;<i> entropy and human stupidity. They're not things you can always
</I>&gt;<i> overcome with a &quot;methodology&quot; or on a schedule.
</I>&gt;<i>
</I>&gt;<i>  - Damian Conway, Perl God
</I>&gt;<i>
</I>&gt;<i>                                                    Please reply to the
</I>&gt;<i> list;
</I>&gt;<i>                                                          please *don't* CC
</I>&gt;<i> me.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20200415/2c343053/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20200415/2c343053/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="021913.html">[squid-users] Setting up proxy with private to public
</A></li>
	<LI>Next message (by thread): <A HREF="021919.html">[squid-users] Setting up proxy with private to public
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21914">[ date ]</a>
              <a href="thread.html#21914">[ thread ]</a>
              <a href="subject.html#21914">[ subject ]</a>
              <a href="author.html#21914">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
