<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] ssl proxy and decrypted forwarding
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20ssl%20proxy%20and%20decrypted%20forwarding&In-Reply-To=%3C2061590632.34473388.1587139211439.JavaMail.zimbra%40quadrantsec.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021926.html">
   <LINK REL="Next"  HREF="021929.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] ssl proxy and decrypted forwarding</H1>
    <B>Sam Castellano</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20ssl%20proxy%20and%20decrypted%20forwarding&In-Reply-To=%3C2061590632.34473388.1587139211439.JavaMail.zimbra%40quadrantsec.com%3E"
       TITLE="[squid-users] ssl proxy and decrypted forwarding">scastellano at quadrantsec.com
       </A><BR>
    <I>Fri Apr 17 16:00:11 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="021926.html">[squid-users] ssl proxy and decrypted forwarding
</A></li>
        <LI>Next message (by thread): <A HREF="021929.html">[squid-users] ssl proxy and decrypted forwarding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21927">[ date ]</a>
              <a href="thread.html#21927">[ thread ]</a>
              <a href="subject.html#21927">[ subject ]</a>
              <a href="author.html#21927">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thank you for the swift response Alex, my main goal is to be able to use suricata or snort to analyze the decrypted https traffic/payload. Suricata/Snort is looking at the interface and naturally will only see the https messages encrypted as the squid server receives the messages encrypted and sends them out encrypted. So I am actually trying to send the proxied https messages decrypted. I hope that makes sense.... Sorry if I misunderstood your explanation and all the help is greatly appreciated so thank you ! 

Best regards- 

Sam Castellano 


----- Original Message -----
From: &quot;Alex Rousskov&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt;
To: &quot;Sam Castellano&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">scastellano at quadrantsec.com</A>&gt;, &quot;squid-users&quot; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
Sent: Friday, April 17, 2020 11:49:13 AM
Subject: Re: [squid-users] ssl proxy and decrypted forwarding

On 4/17/20 11:22 AM, Sam Castellano wrote:

&gt;<i> My question relates to ssl bumping and potentially Icap/Ecap
</I>&gt;<i> functionality. I currently have ssl bump/ interception working and
</I>&gt;<i> communicating with a local ICAP server. Im trying to understand the
</I>&gt;<i> process of how the decrypted data gets sent to the ICAP server for
</I>&gt;<i> analysis in things such as clamav etc. My goal is to have the decrypted
</I>&gt;<i> traffic analyzed by Suricata preferably on a separate box if possible.&#160;&#160;
</I>
I do not know what particular information you are looking for, but ICAP
mechanics are documented in RFC 3507 while eCAP mechanics are documented
at www.e-cap.org.

If you are worried about exposing proxied HTTP[S] messages in transit to
your ICAP service, then consider using a &quot;Secure ICAP&quot; service (for a
starting point, look for those two words in squid.conf.documented).

N.B. Neither ICAP nor eCAP know about SslBump. In an SslBump context,
they just get CONNECT requests and the HTTP messages decrypted by Squid.
The same is true for the majority of Squid features -- while inside
Squid, decrypted HTTP traffic is usually handled similar to plain HTTP
traffic.


HTH,

Alex.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2144 bytes
Desc: S/MIME Cryptographic Signature
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20200417/d40211b6/attachment.bin">http://lists.squid-cache.org/pipermail/squid-users/attachments/20200417/d40211b6/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="021926.html">[squid-users] ssl proxy and decrypted forwarding
</A></li>
	<LI>Next message (by thread): <A HREF="021929.html">[squid-users] ssl proxy and decrypted forwarding
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21927">[ date ]</a>
              <a href="thread.html#21927">[ thread ]</a>
              <a href="subject.html#21927">[ subject ]</a>
              <a href="author.html#21927">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
