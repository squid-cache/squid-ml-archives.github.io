<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] tproxy sslbump and user authentication
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20tproxy%20sslbump%20and%20user%20authentication&In-Reply-To=%3Ca2d8da57-6a3b-839a-7400-31b6ab467f99%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021951.html">
   <LINK REL="Next"  HREF="021959.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] tproxy sslbump and user authentication</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20tproxy%20sslbump%20and%20user%20authentication&In-Reply-To=%3Ca2d8da57-6a3b-839a-7400-31b6ab467f99%40treenet.co.nz%3E"
       TITLE="[squid-users] tproxy sslbump and user authentication">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Apr 21 06:28:53 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="021951.html">[squid-users] tproxy sslbump and user authentication
</A></li>
        <LI>Next message (by thread): <A HREF="021959.html">[squid-users] tproxy sslbump and user authentication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21954">[ date ]</a>
              <a href="thread.html#21954">[ thread ]</a>
              <a href="subject.html#21954">[ subject ]</a>
              <a href="author.html#21954">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 21/04/20 11:08 am, Vieri wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> Is it possible to somehow combine the filtering capabilities of tproxy ssl-bump for access to https sites and the access control flexibility of proxy_auth (eg. kerberos)?
</I>
Please see the FAQ:
 &lt;<A HREF="https://wiki.squid-cache.org/SquidFaq/InterceptionProxy#Why_can.27t_I_use_authentication_together_with_interception_proxying.3F">https://wiki.squid-cache.org/SquidFaq/InterceptionProxy#Why_can.27t_I_use_authentication_together_with_interception_proxying.3F</A>&gt;


&gt;<i> 
</I>&gt;<i> Is having two proxy servers in sequence an acceptable approach, or can it be done within the same instance with the CONNECT method?
</I>&gt;<i> 
</I>&gt;<i> My first approach would be to configure clients to send their user credentials to an explicit proxy (Squid #1) which would then proxy_auth via Kerberos to a PDC. ACL rules would be applied here based on users, domains, IP addr., etc.
</I>&gt;<i> 
</I>&gt;<i> The http/https traffic would then go forcibly through a tproxy ssl-bump host (Squid #2) which would basically analyze/filter traffic via ICAP.
</I>

Why bother with the second proxy at all? The explicit proxy has access
to all the details the interception one does (and more - such as
credentials). It should be able to do all filtering necessary.

TPROXY and NAT are for proxying traffic of clients which do not support
HTTP proxies. They are hugely limited in what they can do. If you have
ability to use explicit-proxy, do so.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="021951.html">[squid-users] tproxy sslbump and user authentication
</A></li>
	<LI>Next message (by thread): <A HREF="021959.html">[squid-users] tproxy sslbump and user authentication
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21954">[ date ]</a>
              <a href="thread.html#21954">[ thread ]</a>
              <a href="subject.html#21954">[ subject ]</a>
              <a href="author.html#21954">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
