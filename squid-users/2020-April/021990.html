<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 4.11 not building with ssl enable on Buster
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%204.11%20not%20building%20with%20ssl%20enable%20on%20Buster&In-Reply-To=%3Cvmime.5ea1aedd.6c05.24a9da0bb2a082d%40ms249-lin-003.rotterdam.bazuin.nl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021985.html">
   <LINK REL="Next"  HREF="021984.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 4.11 not building with ssl enable on Buster</H1>
    <B>L.P.H. van Belle</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%204.11%20not%20building%20with%20ssl%20enable%20on%20Buster&In-Reply-To=%3Cvmime.5ea1aedd.6c05.24a9da0bb2a082d%40ms249-lin-003.rotterdam.bazuin.nl%3E"
       TITLE="[squid-users] Squid 4.11 not building with ssl enable on Buster">belle at bazuin.nl
       </A><BR>
    <I>Thu Apr 23 15:06:05 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="021985.html">[squid-users] Squid 4.11 not building with ssl enable on Buster
</A></li>
        <LI>Next message (by thread): <A HREF="021984.html">[squid-users] FW: Squid 4.11 not building with ssl enable on Buster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21990">[ date ]</a>
              <a href="thread.html#21990">[ thread ]</a>
              <a href="subject.html#21990">[ subject ]</a>
              <a href="author.html#21990">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hai Amos

Thank you for all the help, it nicely builded now..
:<i>-) 
</I>
My used changes 

0004-fix-var-run.patch
From: Louis van Belle &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">louis at van-belle.nl</A>&gt;
Date Thu, 23 Apr 2020 15:22:00 +0200
Subject : fix-var-run location to debian standards /run
--- a/tools/systemd/squid.service
+++ b/tools/systemd/squid.service
@@ -12,7 +12,7 @@

 [Service]
 Type=notify
-PIDFile=/var/run/squid.pid
+PIDFile=/run/squid.pid
 ExecStartPre=/usr/sbin/squid --foreground -z
 ExecStart=/usr/sbin/squid --foreground -sYC
 ExecReload=/bin/kill -HUP $MAINPID


0005-fix-missing-debug-break-bz5041.patch
commit c26cd1cb6a60ff196ef13c00e82576d3bfeb2e30 (HEAD, refs/remotes/origin/v4, refs/heads/v4)
Author: Alex Rousskov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt;
Date:   2020-04-23 05:56:35 -0600
Subject: Bug 5041: Missing Debug::Extra breaks build on hosts with systemd (#611)

--- a/configure.ac
+++ b/configure.ac
@@ -2162,6 +2162,7 @@
   fi
   if test &quot;x$SYSTEMD_LIBS&quot; != &quot;x&quot; ; then
     CXXFLAGS=&quot;$SYSTEMD_CFLAGS $CXXFLAGS&quot;
+    LDFLAGS=&quot;$SYSTEMD_LIBS $LDFLAGS&quot;
     AC_DEFINE(USE_SYSTEMD,1,[systemd support is available])
   else
     with_systemd=no
--- a/src/Debug.h
+++ b/src/Debug.h
@@ -99,6 +99,10 @@

     /// configures the active debugging context to write syslog ALERT
     static void ForceAlert();
+
+    /// prefixes each grouped debugs() line after the first one in the group
+    static std::ostream&amp; Extra(std::ostream &amp;os) { return os &lt;&lt; &quot;\n    &quot;; }
+
 private:
     static Context *Current; ///&lt; deepest active context; nil outside debugs()
 };
 

Greetz, 

Louis


&gt;<i> -----Oorspronkelijk bericht-----
</I>&gt;<i> Van: squid-users 
</I>&gt;<i> [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] Namens 
</I>&gt;<i> Amos Jeffries
</I>&gt;<i> Verzonden: donderdag 23 april 2020 14:52
</I>&gt;<i> Aan: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> Onderwerp: Re: [squid-users] Squid 4.11 not building with ssl 
</I>&gt;<i> enable on Buster
</I>&gt;<i> 
</I>&gt;<i> On 24/04/20 12:28 am, Amos Jeffries wrote:
</I>&gt;<i> &gt; On 24/04/20 12:00 am, L.P.H. van Belle wrote:
</I>&gt;<i> &gt;&gt; Hai, 
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Im currently building squid 411 on debian buster. 
</I>&gt;<i> Cowbuilder setup. 
</I>&gt;<i> &gt;&gt; I re-used the debian.tar.gz from squid-4.10-1 Debian Testing/Sid. 
</I>&gt;<i> &gt;&gt; Which i have done since squid 3.2, first time it fails. 
</I>&gt;<i> &gt;&gt; but only AMD64 fails to build, while i386 build fine. 
</I>&gt;<i> &gt;&gt; That a part im not familiar with, any suggestions?  
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt; ...
</I>&gt;<i> &gt;&gt; client_side.cc: In function 'void 
</I>&gt;<i> clientListenerConnectionOpened(AnyP::PortCfgPointer&amp;, 
</I>&gt;<i> Ipc::FdNoteId, const Pointer&amp;)':
</I>&gt;<i> &gt;&gt; client_side.cc:3663:27: error: 'Extra' is not a member of 'Debug'
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; You will need to add this patch:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &lt;<A HREF="https://github.com/squid-cache/squid/commit/c26cd1cb6a60ff196">https://github.com/squid-cache/squid/commit/c26cd1cb6a60ff196</A>
</I>&gt;<i> ef13c00e82576d3bfeb2e30&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> 
</I>&gt;<i> Or for a more easily used plain-text link:
</I>&gt;<i>  
</I>&gt;<i> &lt;<A HREF="http://master.squid-cache.org/Versions/v4/changesets/squid-4-">http://master.squid-cache.org/Versions/v4/changesets/squid-4-</A>
</I>&gt;<i> c26cd1cb6a60ff196ef13c00e82576d3bfeb2e30.patch&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Amos
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="021985.html">[squid-users] Squid 4.11 not building with ssl enable on Buster
</A></li>
	<LI>Next message (by thread): <A HREF="021984.html">[squid-users] FW: Squid 4.11 not building with ssl enable on Buster
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21990">[ date ]</a>
              <a href="thread.html#21990">[ thread ]</a>
              <a href="subject.html#21990">[ subject ]</a>
              <a href="author.html#21990">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
