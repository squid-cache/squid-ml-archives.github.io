<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Gateway Proxy failure - but only with one browser ...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Gateway%20Proxy%20failure%20-%20but%20only%20with%20one%20browser%0A%20...&In-Reply-To=%3C7d3ceedc-4c10-71f6-0211-cf2412306948%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022027.html">
   <LINK REL="Next"  HREF="022029.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Gateway Proxy failure - but only with one browser ...</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Gateway%20Proxy%20failure%20-%20but%20only%20with%20one%20browser%0A%20...&In-Reply-To=%3C7d3ceedc-4c10-71f6-0211-cf2412306948%40treenet.co.nz%3E"
       TITLE="[squid-users] Gateway Proxy failure - but only with one browser ...">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Apr 29 18:39:10 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022027.html">[squid-users] Gateway Proxy failure - but only with one browser ...
</A></li>
        <LI>Next message (by thread): <A HREF="022029.html">[squid-users] Gateway Proxy failure - but only with one browser ...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22028">[ date ]</a>
              <a href="thread.html#22028">[ thread ]</a>
              <a href="subject.html#22028">[ subject ]</a>
              <a href="author.html#22028">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 30/04/20 6:16 am, Walter H. wrote:
&gt;<i> It is very probable that the following has the same reason - but I don't
</I>&gt;<i> know what's causing it ...
</I>&gt;<i> 
</I>&gt;<i> the old browser on old OS gives this
</I>&gt;<i> 
</I>&gt;<i> &lt;errorpage&gt;
</I>&gt;<i> While trying to retrieve the URL: <A HREF="https://mein.elba.hypo.at/*">https://mein.elba.hypo.at/*</A>
</I>&gt;<i> 
</I>&gt;<i> The following error was encountered:
</I>&gt;<i> 
</I>&gt;<i> &#160;&#160;&#160; * Failed to establish a secure connection to 217.13.188.204
</I>&gt;<i> 
</I>&gt;<i> The system returned:
</I>&gt;<i> 
</I>&gt;<i> &#160;&#160;&#160; (71) Protocol error (TLS code: SQUID_ERR_SSL_HANDSHAKE)
</I>&gt;<i> 
</I>&gt;<i> &#160;&#160;&#160; Handshake with SSL server failed: error:1407742E:SSL
</I>&gt;<i> routines:SSL23_GET_SERVER_HELLO:tlsv1 alert protocol version
</I>&gt;<i> ...
</I>&gt;<i> &lt;/errorpage&gt;
</I>&gt;<i> 
</I>&gt;<i> the&#160; new browser works ...
</I>&gt;<i> 
</I>&gt;<i> I thought that the SSL connection between browser and squid is different
</I>&gt;<i> from the one between squid and server;
</I>&gt;<i> how can there be a SSL handshake problem between squid and server when
</I>&gt;<i> using an old browser?
</I>&gt;<i> 
</I>
For transparency and because TLS requirements are embedded in the
certificates Squid makes the connection to the server as close as
possible to the same properties the client connection uses.
 The change in browser thus affects both what Squid can pass on to the
server, and what can be passed back from the server to the client.

...

&gt;&gt;<i> sslproxy_flags DONT_VERIFY_PEER,NO_DEFAULT_CA
</I>
This is a misconfiguration. Please drop the DONT_VERIFY_PEER.

If the server is not validating using the CA certs you told Squid were
the *only* acceptible CAs:

  sslproxy_cafile /etc/squid/ca-bundle.trust.crt

... then either the contents of that file are wrong, or the server
connection is compromised. Determining the latter is the whole point of TLS.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022027.html">[squid-users] Gateway Proxy failure - but only with one browser ...
</A></li>
	<LI>Next message (by thread): <A HREF="022029.html">[squid-users] Gateway Proxy failure - but only with one browser ...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22028">[ date ]</a>
              <a href="thread.html#22028">[ thread ]</a>
              <a href="subject.html#22028">[ subject ]</a>
              <a href="author.html#22028">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
