<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] High memory usage under load with caching disabled, memory is not being freed even with no load
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20High%20memory%20usage%20under%20load%20with%20caching%0A%20disabled%2C%20memory%20is%20not%20being%20freed%20even%20with%20no%20load&In-Reply-To=%3CCABA8h%3DRDxzCx6vcTfbRee%3D7JLE6ozE%2B2Nb-QYQev6peb3b6h4g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022521.html">
   <LINK REL="Next"  HREF="022528.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] High memory usage under load with caching disabled, memory is not being freed even with no load</H1>
    <B>NgTech LTD</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20High%20memory%20usage%20under%20load%20with%20caching%0A%20disabled%2C%20memory%20is%20not%20being%20freed%20even%20with%20no%20load&In-Reply-To=%3CCABA8h%3DRDxzCx6vcTfbRee%3D7JLE6ozE%2B2Nb-QYQev6peb3b6h4g%40mail.gmail.com%3E"
       TITLE="[squid-users] High memory usage under load with caching disabled, memory is not being freed even with no load">ngtech1ltd at gmail.com
       </A><BR>
    <I>Wed Aug  5 23:06:32 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022521.html">[squid-users] High memory usage under load with caching disabled, memory is not being freed even with no load
</A></li>
        <LI>Next message (by thread): <A HREF="022528.html">[squid-users] High memory usage under load with caching disabled, memory is not being freed even with no load
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22522">[ date ]</a>
              <a href="thread.html#22522">[ thread ]</a>
              <a href="subject.html#22522">[ subject ]</a>
              <a href="author.html#22522">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Ivan,

&gt;<i>From what i remember there is a calculation for how much k per conn should
</I>squid use.
another thing is that squid is not returning memory once ot took it.
Amos knows about this and might be able to respond.

Eliezer

On Wed, Aug 5, 2020, 20:34 Ivan Bulatovic &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ivan.bulatovic at gmail.com</A>&gt; wrote:

&gt;<i> Hi Eliezer,
</I>&gt;<i>
</I>&gt;<i> In the original message I sent to the squid-users mail list, I
</I>&gt;<i> attached listings from mgr:info and mgr:mem. The server is definitely
</I>&gt;<i> using a lot of connections (close to 200K connections), which is why I
</I>&gt;<i> increased the open files limits in linux as well as in squid.conf. And
</I>&gt;<i> there are a lot of requests per second, when the server is running. I
</I>&gt;<i> could understand that it needs a lot of memory for in-transit cache,
</I>&gt;<i> but that memory should be later released  back to OS, once the
</I>&gt;<i> requests load goes down. However, that is not the case, even days
</I>&gt;<i> after there is no load on the server, it stays at 11GB of RAM and 5.5
</I>&gt;<i> GB of swap used. The second I restart the squid process, everything
</I>&gt;<i> goes to normal, memory is released. That is why I suspect there is
</I>&gt;<i> some memory leak somewhere.
</I>&gt;<i>
</I>&gt;<i> The server is a Ubuntu 18.04 LTS VM (running on Hyper-V 2019 server),
</I>&gt;<i> with 8 virtual processors and 12GB of RAM (although I can increase
</I>&gt;<i> that if that is the problem, but I thought that without caching this
</I>&gt;<i> would be more than enough).
</I>&gt;<i>
</I>&gt;<i> I am not using dynamic memory on Hyper-V (it is turned off for this VM).
</I>&gt;<i>
</I>&gt;<i> Best regards,
</I>&gt;<i> Ivan
</I>&gt;<i>
</I>&gt;<i> On Wed, Aug 5, 2020 at 7:14 PM NgTech LTD &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>&gt; wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I think that the mgr:info or another page there contains the amount of
</I>&gt;<i> requests per second etc.
</I>&gt;<i> &gt; also netstat or ss -ntp might give some basic understanding about this
</I>&gt;<i> server size.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; are you using dynamic memory on the hyper-v hypervisor?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Eliezer
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On Wed, Aug 5, 2020, 19:59 Ivan Bulatovic &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ivan.bulatovic at gmail.com</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Hi Alex,
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Thank you very much for your help.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; I opened a bug on bugs.squid-cache.org
</I>&gt;<i> &gt;&gt; (<A HREF="https://bugs.squid-cache.org/show_bug.cgi?id=5071">https://bugs.squid-cache.org/show_bug.cgi?id=5071</A>).
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Best regards,
</I>&gt;<i> &gt;&gt; Ivan
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; On Mon, Aug 3, 2020 at 10:02 PM Alex Rousskov
</I>&gt;<i> &gt;&gt; &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt; wrote:
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; On 8/3/20 9:11 AM, Ivan Bulatovic wrote:
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; &gt; Looks like squid has some serious memory issues when under heavy
</I>&gt;<i> load
</I>&gt;<i> &gt;&gt; &gt; &gt; (90 servers that crawl Internet sites).
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; &gt;         Maximum Resident Size: 41500720 KB
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; If the above (unreliable) report matches your observations using
</I>&gt;<i> system
</I>&gt;<i> &gt;&gt; &gt; tools like &quot;top&quot;, then it is indeed likely that your Squid is
</I>&gt;<i> suffering
</I>&gt;<i> &gt;&gt; &gt; from a memory leak -- 41GB is usually too much for most non-caching
</I>&gt;<i> &gt;&gt; &gt; Squid instances.
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; Identifying the leak may take some time, and I am not volunteering to
</I>&gt;<i> do
</I>&gt;<i> &gt;&gt; &gt; the necessary legwork personally, but the Squid Project does fix
</I>&gt;<i> &gt;&gt; &gt; virtually all runtime leaks that we know about. If you want to speed
</I>&gt;<i> up
</I>&gt;<i> &gt;&gt; &gt; the process, one of the best things you can do is to run Squid under
</I>&gt;<i> &gt;&gt; &gt; valgrind with a good suppression file. This requires building Squid
</I>&gt;<i> with
</I>&gt;<i> &gt;&gt; &gt; a special ./configure option. Several testing iterations may be
</I>&gt;<i> &gt;&gt; &gt; necessary. If you are willing to do this, please file a bug report and
</I>&gt;<i> &gt;&gt; &gt; somebody will guide you through the steps.
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; &gt; It just eats up memory, and
</I>&gt;<i> &gt;&gt; &gt; &gt; does not free it up even days after it is being used (with no load
</I>&gt;<i> on
</I>&gt;<i> &gt;&gt; &gt; &gt; the proxy for days).
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; Some memory retention is expected by default. See
</I>&gt;<i> &gt;&gt; &gt; <A HREF="http://www.squid-cache.org/Doc/config/memory_pools/">http://www.squid-cache.org/Doc/config/memory_pools/</A>
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; Unfortunately, AFAICT, your mgr:mem output does not show any obvious
</I>&gt;<i> &gt;&gt; &gt; leaks -- all numbers are very small. If something is leaking a lot,
</I>&gt;<i> then
</I>&gt;<i> &gt;&gt; &gt; it is probably not pooled by Squid.
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; HTH,
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; Alex.
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; &gt; On Mon, Jul 20, 2020 at 10:46 PM Ivan Bulatovic wrote:
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; Hi all,
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; I am trying to configure squid to run as a forward proxy with no
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; caching (cache deny all) with an option to choose the outgoing IP
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; address based on the username. So all squid has to do is to use a
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; certain outgoing IP address for a certain user, return the data
</I>&gt;<i> from
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; the server to that user and cache nothing.
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; For that I created a special authentication helper and used the
</I>&gt;<i> ACLs
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; and tcp_outgoing_address to create a lot of users and outgoing IP
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; addresses (about 260 at the moment). Example (not the real IP I
</I>&gt;<i> use,
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; of course):
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; acl use_IP1 proxy_auth user1
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; tcp_outgoing_address 1.2.3.4   use_IP1
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; I also configured the squid to use 4 workers, but this happens even
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; when I use only one worker (default)
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; And this works. However, under heavy load, Squid eats all of the
</I>&gt;<i> RAM
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; and then starts going to swap. And the memory usage does not drop
</I>&gt;<i> when
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; I remove all the load from squid (I shut down all clients).
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; I left it to see if the memory will be freed but even after
</I>&gt;<i> leaving it
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; for an hour the info page reports this:
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; Cache information for squid:
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;         Hits as % of all requests:      5min: 0.0%, 60min: 0.0%
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;         Hits as % of bytes sent:        5min: 0.0%, 60min: 1.1%
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;         Memory hits as % of hit requests:       5min: 0.0%, 60min:
</I>&gt;<i> 0.0%
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;         Disk hits as % of hit requests: 5min: 0.0%, 60min: 100.0%
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;         Storage Swap size:      0 KB
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;         Storage Swap capacity:   0.0% used, 100.0% free
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;         Storage Mem size:       0 KB
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;         Storage Mem capacity:    0.0% used, 100.0% free
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;         Mean Object Size:       0.00 KB
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;         Requests given to unlinkd:      0
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; Resource usage for squid:
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;         UP Time:        255334.875 seconds
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;         CPU Time:       7122.436 seconds
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;         CPU Usage:      2.79%
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;         CPU Usage, 5 minute avg:        0.05%
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;         CPU Usage, 60 minute avg:       37.66%
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;         Maximum Resident Size: 41500720 KB
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;         Page faults with physical i/o: 1003410
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; And here is the listing of free and top commands (with no load on
</I>&gt;<i> the server):
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; # free -h
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;               total        used        free      shared
</I>&gt;<i> buff/cache   available
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; Mem:            11G         10G        791M        676K
</I>&gt;<i> 491M        1.0G
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; Swap:           11G        5.5G        6.5G
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; # top
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; top - 14:12:32 up 3 days,  1:30,  1 user,  load average: 0.00,
</I>&gt;<i> 0.00, 0.00
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; Tasks: 177 total,   1 running, 102 sleeping,   0 stopped,   0
</I>&gt;<i> zombie
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; %Cpu0  :  0.0 us,  0.0 sy,  0.0 ni,100.0 id,  0.0 wa,  0.0 hi,
</I>&gt;<i> 0.0 si,  0.0 st
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; %Cpu1  :  0.0 us,  0.0 sy,  0.0 ni,100.0 id,  0.0 wa,  0.0 hi,
</I>&gt;<i> 0.0 si,  0.0 st
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; %Cpu2  :  0.0 us,  0.3 sy,  0.0 ni, 99.7 id,  0.0 wa,  0.0 hi,
</I>&gt;<i> 0.0 si,  0.0 st
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; %Cpu3  :  0.0 us,  0.0 sy,  0.0 ni,100.0 id,  0.0 wa,  0.0 hi,
</I>&gt;<i> 0.0 si,  0.0 st
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; %Cpu4  :  0.0 us,  0.0 sy,  0.0 ni,100.0 id,  0.0 wa,  0.0 hi,
</I>&gt;<i> 0.0 si,  0.0 st
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; %Cpu5  :  0.0 us,  0.0 sy,  0.0 ni,100.0 id,  0.0 wa,  0.0 hi,
</I>&gt;<i> 0.0 si,  0.0 st
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; %Cpu6  :  0.0 us,  0.0 sy,  0.0 ni,100.0 id,  0.0 wa,  0.0 hi,
</I>&gt;<i> 0.0 si,  0.0 st
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; %Cpu7  :  0.0 us,  0.0 sy,  0.0 ni,100.0 id,  0.0 wa,  0.0 hi,
</I>&gt;<i> 0.0 si,  0.0 st
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; KiB Mem : 91.2/12251688
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;
</I>&gt;<i> [|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;         ]
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; KiB Swap: 45.8/12582904
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; [||||||||||||||||||||||||||||||||||||||||||||||
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;                               ]
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;    PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM
</I>&gt;<i>  TIME+ COMMAND
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;   7851 proxy     20   0 6946872 2.514g   8084 S   0.0 21.5
</I>&gt;<i> 29:43.74 squid
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;   7832 proxy     20   0 6711480 2.464g   8040 S   0.0 21.1
</I>&gt;<i> 29:58.17 squid
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;   7814 proxy     20   0 6834928 2.454g  10024 S   0.0 21.0
</I>&gt;<i> 29:47.56 squid
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;   7843 proxy     20   0 6906252 2.436g   8208 S   0.0 20.8
</I>&gt;<i> 29:15.60 squid
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;   1329 root      20   0 2416672 167272  12680 S   0.0  1.4
</I>&gt;<i> 136:18.57 metricbeat
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;   1321 root      20   0 1831804  48364  11648 S   0.0  0.4
</I>&gt;<i> 14:32.10 filebeat
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;    474 root      19  -1  127796  17576  17144 S   0.0  0.1
</I>&gt;<i>  0:27.01
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; systemd-journal
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;   7811 proxy     20   0  549384  14168   8372 S   0.0  0.1
</I>&gt;<i>  0:20.87 squid
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;   1166 root      20   0 1749724  10596   4468 S   0.0  0.1
</I>&gt;<i>  0:31.83 snapd
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;  43940 proxy     20   0   28884   9608   5384 S   0.0  0.1
</I>&gt;<i>  0:00.14 python3
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;  43941 proxy     20   0   28884   9552   5328 S   0.0  0.1
</I>&gt;<i>  0:00.10 python3
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;  43939 proxy     20   0   28884   9524   5308 S   0.0  0.1
</I>&gt;<i>  0:00.12 python3
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;  43938 proxy     20   0   28884   9452   5232 S   0.0  0.1
</I>&gt;<i>  0:00.16 python3
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;  48848 root      20   0  105688   6960   5968 S   0.0  0.1
</I>&gt;<i>  0:00.02 sshd
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;  48974 janitor   20   0  108120   5380   4372 S   0.0  0.0
</I>&gt;<i>  0:00.00 sshd
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;      1 root      20   0   86360   4364   2488 S   0.0  0.0
</I>&gt;<i> 32:46.22 systemd
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; ...
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; ... lines ommited
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; ...
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; In the attachment you can find the printout from squidclient
</I>&gt;<i> mgr:info
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; and squidclient mgr:mem. These are both taken at the moment when
</I>&gt;<i> there
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; is no more load on the proxy. I also included my squid.conf file
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; (minus the two files where acls are defined and outgoing IP
</I>&gt;<i> addresses,
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; these two contain only acl and tcp_outgoing_address lines as in the
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; example above).
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; Machine info:
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; OS: Ubuntu 18.04 with latest updates
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; Squid version 4.12 (from diladele repository)
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; Hardware: Hyper-V virtual machine with 8 vCPU, 12GB of RAM
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; I can not understand what is eating all of the memory, if I
</I>&gt;<i> disabled the cache.
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; Maybe I configured something wrong but I can not find what.
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; Thank you for any help you can provide.
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt;
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; Best regards,
</I>&gt;<i> &gt;&gt; &gt; &gt;&gt; Ivan
</I>&gt;<i> &gt;&gt; &gt; &gt; _______________________________________________
</I>&gt;<i> &gt;&gt; &gt; &gt; squid-users mailing list
</I>&gt;<i> &gt;&gt; &gt; &gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> &gt;&gt; &gt; &gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> &gt;&gt; &gt; &gt;
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt; squid-users mailing list
</I>&gt;<i> &gt;&gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> &gt;&gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20200806/0515ad3c/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20200806/0515ad3c/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022521.html">[squid-users] High memory usage under load with caching disabled, memory is not being freed even with no load
</A></li>
	<LI>Next message (by thread): <A HREF="022528.html">[squid-users] High memory usage under load with caching disabled, memory is not being freed even with no load
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22522">[ date ]</a>
              <a href="thread.html#22522">[ thread ]</a>
              <a href="subject.html#22522">[ subject ]</a>
              <a href="author.html#22522">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
