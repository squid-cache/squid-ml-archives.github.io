<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] I would like to know performance sizing aspects.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20I%20would%20like%20to%20know%20performance%20sizing%20aspects.&In-Reply-To=%3C001e01d66bdf%24b0871490%2411953db0%24%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022571.html">
   <LINK REL="Next"  HREF="022527.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] I would like to know performance sizing aspects.</H1>
    <B>Eliezer Croitor</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20I%20would%20like%20to%20know%20performance%20sizing%20aspects.&In-Reply-To=%3C001e01d66bdf%24b0871490%2411953db0%24%40gmail.com%3E"
       TITLE="[squid-users] I would like to know performance sizing aspects.">ngtech1ltd at gmail.com
       </A><BR>
    <I>Thu Aug  6 10:52:32 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022571.html">[squid-users] I would like to know performance sizing aspects.
</A></li>
        <LI>Next message (by thread): <A HREF="022527.html">[squid-users] I would like to know performance sizing aspects.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22526">[ date ]</a>
              <a href="thread.html#22526">[ thread ]</a>
              <a href="subject.html#22526">[ subject ]</a>
              <a href="author.html#22526">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Did you mean 1 CPU with couple cores?

 

For squid it most of the time takes time to load these lists into ram.

It&#8217;s not wrong to do so since in many cases it&#8217;s the right thing to do.

In case these lists are stale for at-least a day I assume it should be fine.

 

However there are tools like ufdbguard and others which are very good in the sense of
memory footprint and fast URLs lookup.

 

How do you add these URLS, I am not mistaken about URLs and not domains right?

 

Eliezer

 

----

Eliezer Croitoru

Tech Support

Mobile: +972-5-28704261

Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>&gt; 

 

From: m k &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">tamurin0525 at gmail.com</A>&gt; 
Sent: Thursday, August 6, 2020 8:29 AM
To: Eliezer Croitor &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>&gt;
Cc: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] I would like to know performance sizing aspects.

 

Eliezer,

 

Squid's default setting is 1 core CPU, 16GB mem.

How many URLs(Blacklist) will degrade Squid's performance?

 

Also, SSL-Bump.

 

Thank you,

kitamura

 

 

2020&#24180;8&#26376;6&#26085;(&#26408;) 13:38 Eliezer Croitor &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>&gt; &gt;:

Kitamura,

 

About the tens of thousands of URLs, Have you considered using a Blacklisting utility, it might lower the memory footprint.

 

Eliezer

 

----

Eliezer Croitoru

Tech Support

Mobile: +972-5-28704261

Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>&gt; 

 

From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; &gt; On Behalf Of m k
Sent: Thursday, August 6, 2020 7:25 AM
To: Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt; &gt;
Cc: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt; 
Subject: Re: [squid-users] I would like to know performance sizing aspects.

 

Amos,

 

Thank you for your reply.

It was very helpful.

 

&gt;<i> That number was gained before HTTPS became so popular. So YMMV depending
</I>&gt;<i> on how many CONNECT tunnels you have to deal with. That HTTPS traffic can possibly be decrypted 
</I>
&gt;<i> and cached but performance trade-offs are quite large.
</I>
 

Squid uses SSL-Bump.

I'm very worried about the internet slowing down due to https decording. and I'm also worried about the internet slowing down due to using Blacklist.

I load tens of thousands of URL(black list file) every time I set up ACL.

 

How many requests does SSL-Bump in one second?

 

Thank you,

kitamura

 

2020&#24180;8&#26376;5&#26085;(&#27700;) 10:32 Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt; &gt;:

On 5/08/20 11:28 am, m k wrote:
&gt;&gt;<i> We are considering to use Squid for our proxy, and would like to know
</I>&gt;&gt;<i> performance sizing aspects.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Current web access request averages per 1 hour are as followings 
</I>&gt;&gt;<i> Clients&#65306;30,000&#12289;
</I>&gt;&gt;<i> Page Views:141,741/hour
</I>&gt;&gt;<i> *Requests:4,893,106
</I>&gt;&gt;<i>
</I>
Okay. Requests and client count are the important numbers there.

The ~1359 req/sec is well within a default Squid capabilities, which can
extend up to around 10k req/sec before needing careful tuning.

That number was gained before HTTPS became so popular. So YMMV depending
on how many CONNECT tunnels you have to deal with. That HTTPS traffic
can possibly be decrypted and cached but performance trade-offs are
quite large.


&gt;&gt;<i> We will install Squid on CentOS 8.1.   Please kindly share your
</I>&gt;&gt;<i> thoughts / advices
</I>
Whatever OS you are most comfortable with administering. Be aware that
CentOS official Squid packages are very slow to update - Apparently they
still have only v4.4 (8 months old) despite a 8.2 point release only a
few weeks ago.

So you may need to be building your own from sources and/or using other
semi-official packagers such as the ones from Eliezer at NGTech when he
gets around to CentOS 8 packages.
  &lt;<A HREF="https://wiki.squid-cache.org/KnowledgeBase/CentOS">https://wiki.squid-cache.org/KnowledgeBase/CentOS</A>&gt;


FYI; If you find yourself having to use SSL-Bump, then we highly
recommended to follow the latest Squid releases with fairly frequent
updates (at minimum a few times per year - worst case monthly). If you
like CentOS you may find Fedora more suitable to track the security
environment volatility and update churn.


&gt;&gt;<i> Is there sizing methodology and tools?
</I>
There are a couple of methodologies, depending on what aspect you are
tuning towards - and one for identifying the limitation points to begin
a tuning process tuning.

The info you gave above is the beginning. Checking to see if your
traffic rate is reasonably within capability of a single Squid instance.

Yours is reasonable, so next step is to get Squid running and see where
the trouble points (if any) are.

 For more see &lt;<A HREF="https://wiki.squid-cache.org/SquidFaq/">https://wiki.squid-cache.org/SquidFaq/</A>&gt;



&gt;&gt;<i> How much resources are generally recommended for our environment?
</I>&gt;&gt;<i>&#12288; CPU:&#12288; Memory:&#12288; Disk space : Other factors to be considered if any:
</I>&gt;&gt;<i> Do you have a generally recommended performance testing tools? Any
</I>&gt;&gt;<i> suggested guidelines?
</I>&gt;&gt;<i>
</I>

 CPU - squid is still mostly single-process. So prioritize faster GHz
rates over core number. Multi-core can help of course, but not as much
as cycle speeds do. Hyper-threading is useless for Squid.

 Memory - Squid will use as much as you can give it. Let your budget
govern this.

 Disk - Squid will happily run with no disk - or lots of large ones.

   - Avoid RAID. Squid *will* shorten disk lifetimes with its unusually
high write I/O pattern. How much shorter varies by disk type (HDD vs
SSD). So you may find it better to plan budget towards maintenance costs
of replacing disks in future rather than buying multiple up-front for
RAID use.
 see &lt;<A HREF="https://wiki.squid-cache.org/SquidFaq/RAID">https://wiki.squid-cache.org/SquidFaq/RAID</A>&gt; for details.

    - Up to a few hundred GB per cache_dir can be good for large caches.
Going up to TB is not (yet) worth the disk cost as Squid has a per-cache
limit on stored objects.

   - Disk caches can be re-tuned, added, moved, removed, and/or extended
at any time and will depend on the profile of object sizes your proxy
handles - which itself likely changes over time. So general let your
budget decide the initial disks and work from there.



Load Testing - the tools us dev use to review performance are listed at
the bottom of the profiling FAQ page. These are best for testing the
theoretical limits of a particular installation - real traffic tends to
be somewhat lower. So I personally prefer taking stats from the running
proxy on real traffic and seeing what I can observe from those.


HTH
Amos
_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt; 
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20200806/ed6f9c65/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20200806/ed6f9c65/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022571.html">[squid-users] I would like to know performance sizing aspects.
</A></li>
	<LI>Next message (by thread): <A HREF="022527.html">[squid-users] I would like to know performance sizing aspects.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22526">[ date ]</a>
              <a href="thread.html#22526">[ thread ]</a>
              <a href="subject.html#22526">[ subject ]</a>
              <a href="author.html#22526">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
