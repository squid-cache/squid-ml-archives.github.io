<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] I would like to know performance sizing aspects.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20I%20would%20like%20to%20know%20performance%20sizing%20aspects.&In-Reply-To=%3Cd3d156ea-c902-1900-1e0c-d4af362dffaa%40skno.by%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022525.html">
   <LINK REL="Next"  HREF="022526.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] I would like to know performance sizing aspects.</H1>
    <B>vacheslav</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20I%20would%20like%20to%20know%20performance%20sizing%20aspects.&In-Reply-To=%3Cd3d156ea-c902-1900-1e0c-d4af362dffaa%40skno.by%3E"
       TITLE="[squid-users] I would like to know performance sizing aspects.">m_zouhairy at skno.by
       </A><BR>
    <I>Thu Aug  6 05:31:59 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022525.html">[squid-users] I would like to know performance sizing aspects.
</A></li>
        <LI>Next message (by thread): <A HREF="022526.html">[squid-users] I would like to know performance sizing aspects.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22571">[ date ]</a>
              <a href="thread.html#22571">[ thread ]</a>
              <a href="subject.html#22571">[ subject ]</a>
              <a href="author.html#22571">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>having 3GB memory with a ufdb improves performace

6.08.20 08:28, m k &#1087;&#1080;&#1096;&#1077;&#1090;:
&gt;<i> Eliezer,
</I>&gt;<i>
</I>&gt;<i> Squid's default setting is 1 core CPU, 16GB mem.
</I>&gt;<i> How many URLs(Blacklist) will degrade Squid's performance?
</I>&gt;<i>
</I>&gt;<i> Also, SSL-Bump.
</I>&gt;<i>
</I>&gt;<i> Thank you,
</I>&gt;<i> kitamura
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 2020&#24180;8&#26376;6&#26085;(&#26408;) 13:38 Eliezer Croitor &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A> 
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>&gt;&gt;:
</I>&gt;<i>
</I>&gt;<i>     Kitamura,
</I>&gt;<i>
</I>&gt;<i>     About the tens of thousands of URLs, Have you considered using a
</I>&gt;<i>     Blacklisting utility, it might lower the memory footprint.
</I>&gt;<i>
</I>&gt;<i>     Eliezer
</I>&gt;<i>
</I>&gt;<i>     ----
</I>&gt;<i>
</I>&gt;<i>     Eliezer Croitoru
</I>&gt;<i>
</I>&gt;<i>     Tech Support
</I>&gt;<i>
</I>&gt;<i>     Mobile: +972-5-28704261
</I>&gt;<i>
</I>&gt;<i>     Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>&gt;
</I>&gt;<i>
</I>&gt;<i>     *From:* squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt;&gt; *On Behalf Of *m k
</I>&gt;<i>     *Sent:* Thursday, August 6, 2020 7:25 AM
</I>&gt;<i>     *To:* Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;&gt;
</I>&gt;<i>     *Cc:* <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i>     *Subject:* Re: [squid-users] I would like to know performance
</I>&gt;<i>     sizing aspects.
</I>&gt;<i>
</I>&gt;<i>     Amos,
</I>&gt;<i>
</I>&gt;<i>     Thank you for your reply.
</I>&gt;<i>
</I>&gt;<i>     It was very helpful.
</I>&gt;<i>
</I>&gt;<i>     &gt; That number was gained before HTTPS became so popular. So YMMV
</I>&gt;<i>     depending
</I>&gt;<i>     &gt; on how many CONNECT tunnels you have to deal with. That HTTPS
</I>&gt;<i>     traffic&#160;can possibly be decrypted
</I>&gt;<i>
</I>&gt;<i>     &gt; and cached but performance trade-offs are&#160;quite large.
</I>&gt;<i>
</I>&gt;<i>     Squid uses SSL-Bump.
</I>&gt;<i>
</I>&gt;<i>     I'm very worried about the internet slowing down due to https
</I>&gt;<i>     decording. and I'm also worried about the internet slowing down
</I>&gt;<i>     due to using Blacklist.
</I>&gt;<i>
</I>&gt;<i>     I load tens of thousands of URL(black list file) every time I set
</I>&gt;<i>     up ACL.
</I>&gt;<i>
</I>&gt;<i>     How many requests does SSL-Bump in one second?
</I>&gt;<i>
</I>&gt;<i>     Thank you,
</I>&gt;<i>
</I>&gt;<i>     kitamura
</I>&gt;<i>
</I>&gt;<i>     2020&#24180;8&#26376;5&#26085;(&#27700;) 10:32 Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;&gt;:
</I>&gt;<i>
</I>&gt;<i>         On 5/08/20 11:28 am, m k wrote:
</I>&gt;<i>         &gt;&gt; We are considering to use Squid for our proxy, and&#160;would
</I>&gt;<i>         like to know
</I>&gt;<i>         &gt;&gt; performance sizing aspects.
</I>&gt;<i>         &gt;&gt;
</I>&gt;<i>         &gt;&gt; Current web access request averages per 1 hour are as
</I>&gt;<i>         followings
</I>&gt;<i>         &gt;&gt; Clients&#65306;30,000&#12289;
</I>&gt;<i>         &gt;&gt; Page Views:141,741/hour
</I>&gt;<i>         &gt;&gt; *Requests:4,893,106
</I>&gt;<i>         &gt;&gt;
</I>&gt;<i>
</I>&gt;<i>         Okay. Requests and client count are the important numbers there.
</I>&gt;<i>
</I>&gt;<i>         The ~1359 req/sec is well within a default Squid capabilities,
</I>&gt;<i>         which can
</I>&gt;<i>         extend up to around 10k req/sec before needing careful tuning.
</I>&gt;<i>
</I>&gt;<i>         That number was gained before HTTPS became so popular. So YMMV
</I>&gt;<i>         depending
</I>&gt;<i>         on how many CONNECT tunnels you have to deal with. That HTTPS
</I>&gt;<i>         traffic
</I>&gt;<i>         can possibly be decrypted and cached but performance
</I>&gt;<i>         trade-offs are
</I>&gt;<i>         quite large.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>         &gt;&gt; We will install Squid on CentOS 8.1. &#160;Please kindly share your
</I>&gt;<i>         &gt;&gt; thoughts / advices
</I>&gt;<i>
</I>&gt;<i>         Whatever OS you are most comfortable with administering. Be
</I>&gt;<i>         aware that
</I>&gt;<i>         CentOS official Squid packages are very slow to update -
</I>&gt;<i>         Apparently they
</I>&gt;<i>         still have only v4.4 (8 months old) despite a 8.2 point
</I>&gt;<i>         release only a
</I>&gt;<i>         few weeks ago.
</I>&gt;<i>
</I>&gt;<i>         So you may need to be building your own from sources and/or
</I>&gt;<i>         using other
</I>&gt;<i>         semi-official packagers such as the ones from Eliezer at
</I>&gt;<i>         NGTech when he
</I>&gt;<i>         gets around to CentOS 8 packages.
</I>&gt;<i>         &#160; &lt;<A HREF="https://wiki.squid-cache.org/KnowledgeBase/CentOS">https://wiki.squid-cache.org/KnowledgeBase/CentOS</A>&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>         FYI; If you find yourself having to use SSL-Bump, then we highly
</I>&gt;<i>         recommended to follow the latest Squid releases with fairly
</I>&gt;<i>         frequent
</I>&gt;<i>         updates (at minimum a few times per year - worst case
</I>&gt;<i>         monthly). If you
</I>&gt;<i>         like CentOS you may find Fedora more suitable to track the
</I>&gt;<i>         security
</I>&gt;<i>         environment volatility and update churn.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>         &gt;&gt; Is there sizing methodology and tools?
</I>&gt;<i>
</I>&gt;<i>         There are a couple of methodologies, depending on what aspect
</I>&gt;<i>         you are
</I>&gt;<i>         tuning towards - and one for identifying the limitation points
</I>&gt;<i>         to begin
</I>&gt;<i>         a tuning process tuning.
</I>&gt;<i>
</I>&gt;<i>         The info you gave above is the beginning. Checking to see if your
</I>&gt;<i>         traffic rate is reasonably within capability of a single Squid
</I>&gt;<i>         instance.
</I>&gt;<i>
</I>&gt;<i>         Yours is reasonable, so next step is to get Squid running and
</I>&gt;<i>         see where
</I>&gt;<i>         the trouble points (if any) are.
</I>&gt;<i>
</I>&gt;<i>         &#160;For more see &lt;<A HREF="https://wiki.squid-cache.org/SquidFaq/">https://wiki.squid-cache.org/SquidFaq/</A>&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>         &gt;&gt; How much resources are generally recommended for our
</I>&gt;<i>         environment?
</I>&gt;<i>         &gt;&gt;&#12288; CPU:&#12288; Memory:&#12288; Disk space : Other factors to be considered
</I>&gt;<i>         if any:
</I>&gt;<i>         &gt;&gt; Do you have a generally recommended performance testing
</I>&gt;<i>         tools? Any
</I>&gt;<i>         &gt;&gt; suggested guidelines?
</I>&gt;<i>         &gt;&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>         &#160;CPU - squid is still mostly single-process. So prioritize
</I>&gt;<i>         faster GHz
</I>&gt;<i>         rates over core number. Multi-core can help of course, but not
</I>&gt;<i>         as much
</I>&gt;<i>         as cycle speeds do. Hyper-threading is useless for Squid.
</I>&gt;<i>
</I>&gt;<i>         &#160;Memory - Squid will use as much as you can give it. Let your
</I>&gt;<i>         budget
</I>&gt;<i>         govern this.
</I>&gt;<i>
</I>&gt;<i>         &#160;Disk - Squid will happily run with no disk - or lots of large
</I>&gt;<i>         ones.
</I>&gt;<i>
</I>&gt;<i>         &#160; &#160;- Avoid RAID. Squid *will* shorten disk lifetimes with its
</I>&gt;<i>         unusually
</I>&gt;<i>         high write I/O pattern. How much shorter varies by disk type
</I>&gt;<i>         (HDD vs
</I>&gt;<i>         SSD). So you may find it better to plan budget towards
</I>&gt;<i>         maintenance costs
</I>&gt;<i>         of replacing disks in future rather than buying multiple
</I>&gt;<i>         up-front for
</I>&gt;<i>         RAID use.
</I>&gt;<i>         &#160;see &lt;<A HREF="https://wiki.squid-cache.org/SquidFaq/RAID">https://wiki.squid-cache.org/SquidFaq/RAID</A>&gt; for details.
</I>&gt;<i>
</I>&gt;<i>         &#160; &#160; - Up to a few hundred GB per cache_dir can be good for
</I>&gt;<i>         large caches.
</I>&gt;<i>         Going up to TB is not (yet) worth the disk cost as Squid has a
</I>&gt;<i>         per-cache
</I>&gt;<i>         limit on stored objects.
</I>&gt;<i>
</I>&gt;<i>         &#160; &#160;- Disk caches can be re-tuned, added, moved, removed,
</I>&gt;<i>         and/or extended
</I>&gt;<i>         at any time and will depend on the profile of object sizes
</I>&gt;<i>         your proxy
</I>&gt;<i>         handles - which itself likely changes over time. So general
</I>&gt;<i>         let your
</I>&gt;<i>         budget decide the initial disks and work from there.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>         Load Testing - the tools us dev use to review performance are
</I>&gt;<i>         listed at
</I>&gt;<i>         the bottom of the profiling FAQ page. These are best for
</I>&gt;<i>         testing the
</I>&gt;<i>         theoretical limits of a particular installation - real traffic
</I>&gt;<i>         tends to
</I>&gt;<i>         be somewhat lower. So I personally prefer taking stats from
</I>&gt;<i>         the running
</I>&gt;<i>         proxy on real traffic and seeing what I can observe from those.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>         HTH
</I>&gt;<i>         Amos
</I>&gt;<i>         _______________________________________________
</I>&gt;<i>         squid-users mailing list
</I>&gt;<i>         <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>         &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i>         <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20200806/ab9962aa/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20200806/ab9962aa/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022525.html">[squid-users] I would like to know performance sizing aspects.
</A></li>
	<LI>Next message (by thread): <A HREF="022526.html">[squid-users] I would like to know performance sizing aspects.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22571">[ date ]</a>
              <a href="thread.html#22571">[ thread ]</a>
              <a href="subject.html#22571">[ subject ]</a>
              <a href="author.html#22571">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
