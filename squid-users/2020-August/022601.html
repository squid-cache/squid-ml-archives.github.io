<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] (71) Protocol error (TLS code: X509_V_ERR_DEPTH_ZERO_SELF_SIGNED_CERT)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%2871%29%20Protocol%20error%20%28TLS%20code%3A%0A%20X509_V_ERR_DEPTH_ZERO_SELF_SIGNED_CERT%29&In-Reply-To=%3C5c62a8a9-0458-3a9d-91f9-753b95558b88%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022599.html">
   <LINK REL="Next"  HREF="022612.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] (71) Protocol error (TLS code: X509_V_ERR_DEPTH_ZERO_SELF_SIGNED_CERT)</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%2871%29%20Protocol%20error%20%28TLS%20code%3A%0A%20X509_V_ERR_DEPTH_ZERO_SELF_SIGNED_CERT%29&In-Reply-To=%3C5c62a8a9-0458-3a9d-91f9-753b95558b88%40treenet.co.nz%3E"
       TITLE="[squid-users] (71) Protocol error (TLS code: X509_V_ERR_DEPTH_ZERO_SELF_SIGNED_CERT)">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Aug 26 04:28:01 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022599.html">[squid-users] (71) Protocol error (TLS code: X509_V_ERR_DEPTH_ZERO_SELF_SIGNED_CERT)
</A></li>
        <LI>Next message (by thread): <A HREF="022612.html">[squid-users] IPVS/LVS load balancing Squid servers, anyone did it?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22601">[ date ]</a>
              <a href="thread.html#22601">[ thread ]</a>
              <a href="subject.html#22601">[ subject ]</a>
              <a href="author.html#22601">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 26/08/20 1:30 pm, m k wrote:
&gt;<i> Hi team,
</I>&gt;<i> 
</I>&gt;<i> Sorry for the many questions.
</I>&gt;<i> As an in-house SE, I plan to switch from Bluecoat to Squid.&#160;
</I>&gt;<i> ***I am Japanese. And I can not do English.
</I>&gt;<i> All are Google translations.***
</I>&gt;<i> 
</I>&gt;<i> I am doing a load test on Squid.
</I>&gt;<i> Apache Jmeter is loading the self-certified WEB server.
</I>&gt;<i> How can I test with a self-certified WEB server with Jmeter?
</I>&gt;<i> 
</I>
You can use cache_peer for custom connectivity to a server:

  cache_peer jmeter.local parent 443 0 originserver \
    tls-cafile=/etc/squid/jmeter_ca_cert.pem \
    tls-default-ca=off

  cache_peer_access jmeter.local allow ...
  never_direct allow ...


Put the CA cert for jmeter in /etc/squid/jmeter_ca_cert.pem.


FYI: it is best to keep the self-signed cert as your own private CA and
give jmeter a normal server cert. Then you only have to change the
jmeter config if its cert gets compromised or needs updating for any
other reason. Squid can continue to use your self-signed CA to verify
any server certs it signed for jmeter.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022599.html">[squid-users] (71) Protocol error (TLS code: X509_V_ERR_DEPTH_ZERO_SELF_SIGNED_CERT)
</A></li>
	<LI>Next message (by thread): <A HREF="022612.html">[squid-users] IPVS/LVS load balancing Squid servers, anyone did it?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22601">[ date ]</a>
              <a href="thread.html#22601">[ thread ]</a>
              <a href="subject.html#22601">[ subject ]</a>
              <a href="author.html#22601">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
