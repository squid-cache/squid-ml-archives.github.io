<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] deny_info page not shown
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20deny_info%20page%20not%20shown&In-Reply-To=%3Cc9352b1d-7a4c-e3f9-8452-f7c5d1b95e9e%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022642.html">
   <LINK REL="Next"  HREF="022634.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] deny_info page not shown</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20deny_info%20page%20not%20shown&In-Reply-To=%3Cc9352b1d-7a4c-e3f9-8452-f7c5d1b95e9e%40measurement-factory.com%3E"
       TITLE="[squid-users] deny_info page not shown">rousskov at measurement-factory.com
       </A><BR>
    <I>Fri Aug 28 20:10:36 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022642.html">[squid-users] deny_info page not shown
</A></li>
        <LI>Next message (by thread): <A HREF="022634.html">[squid-users] filter access.log
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22645">[ date ]</a>
              <a href="thread.html#22645">[ thread ]</a>
              <a href="subject.html#22645">[ subject ]</a>
              <a href="author.html#22645">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;&gt;<i> Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt; wrote:
</I>&gt;&gt;&gt;<i> CONNECT is a request to open a TCP connection. Delivering an HTTP
</I>&gt;&gt;&gt;<i> page, or even a URL redirect in response to a TCP connection request
</I>&gt;&gt;&gt;<i> is completely the wrong type of result.
</I>
&gt;&gt;&gt;<i> Like asking someone to open a door because you have a load of things
</I>&gt;&gt;&gt;<i> needing to go through it - and they instead throw a basket of apples
</I>&gt;&gt;&gt;<i> at you. Not want you expected, and more harm than good. 
</I>

On 8/28/20 4:31 AM, Matus UHLAR - fantomas wrote:
&gt;<i> when you ask via HTTP for HTTP page and get HTTP answer, it is different
</I>&gt;<i> than asking via HTTP for CONNECT and getting CONNECT denied via HTTP.
</I>&gt;<i> 
</I>&gt;<i> in the latter case it is clear that the request was denied by proxy and
</I>&gt;<i> since secure content was requested, the insecure response must not be
</I>&gt;<i> shown.
</I>&gt;<i> 
</I>&gt;<i> That's the security provided.
</I>

I believe the above explanations and analogies are rather misleading!
There are no conceptual or protocol problems with HTTP error responses
to HTTP CONNECT requests. The browser knows where the response is coming
from. The browser knows that the response is an error. The browser
already anticipates and processes some error CONNECT responses specially
(think proxy authentication). There is no confusion, harm,
inappropriateness, or some new insecurity here!

What is actually happening (AFAICT) is that browser folks do not want to
spend their resources on properly informing the user of the error. There
are ways to do it, but they all require non-trivial work in a
controversial area, and browser folks simply do not consider this
specific use case important enough to support. At the end of the day,
you are not their customer. They do not want you as their customer. You
lost.


While opinions on the underlying causes may differ, the end result is
still the same -- a forward proxy cannot display an error page to a user
behind a popular browser in a modern environment (without bumping the
browser connection first).


Cheer,

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022642.html">[squid-users] deny_info page not shown
</A></li>
	<LI>Next message (by thread): <A HREF="022634.html">[squid-users] filter access.log
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22645">[ date ]</a>
              <a href="thread.html#22645">[ thread ]</a>
              <a href="subject.html#22645">[ subject ]</a>
              <a href="author.html#22645">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
