<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] replacement for obsoleted cache controls (ign-no-cache; ign-must-reval. + ign-auth)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20replacement%20for%20obsoleted%20cache%20controls%0A%20%28ign-no-cache%3B%20ign-must-reval.%20%2B%20ign-auth%29&In-Reply-To=%3C72ece466-d028-f38f-894f-58d46888b010%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022968.html">
   <LINK REL="Next"  HREF="022976.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] replacement for obsoleted cache controls (ign-no-cache; ign-must-reval. + ign-auth)</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20replacement%20for%20obsoleted%20cache%20controls%0A%20%28ign-no-cache%3B%20ign-must-reval.%20%2B%20ign-auth%29&In-Reply-To=%3C72ece466-d028-f38f-894f-58d46888b010%40measurement-factory.com%3E"
       TITLE="[squid-users] replacement for obsoleted cache controls (ign-no-cache; ign-must-reval. + ign-auth)">rousskov at measurement-factory.com
       </A><BR>
    <I>Sun Dec  6 20:14:12 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022968.html">[squid-users] replacement for obsoleted cache controls (ign-no-cache; ign-must-reval. + ign-auth)
</A></li>
        <LI>Next message (by thread): <A HREF="022976.html">[squid-users] replacement for obsoleted cache controls (ign-no-cache; ign-must-reval. + ign-auth)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22975">[ date ]</a>
              <a href="thread.html#22975">[ thread ]</a>
              <a href="subject.html#22975">[ subject ]</a>
              <a href="author.html#22975">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 12/6/20 10:12 AM, L A Walsh wrote:
&gt;<i> Since the early 4.x series and now, the cache control headers:
</I>
&gt;<i> ignore-no-cache
</I>&gt;<i> ignore-must-revalidate
</I>&gt;<i> ignore-auth
</I>
&gt;<i> have been &quot;obsoleted&quot;.&#160; Indicating something has replaced them and
</I>&gt;<i> there's a new &amp; better way to ignore those headers for
</I>&gt;<i> static files (most often web-fonts, though some javascript files
</I>&gt;<i> also fall into that category).
</I>

AFAICT, the options were _not_ removed because there are new/better
options to ignore the corresponding directives. I see how this can be
confusing in a classical &quot;obsoletion&quot; context. I will try to clarify:

* ignore-no-cache

Squid v3.2 release notes imply that Squid does what most admins want
now, without any explicit option: &quot;Its commonly desired behaviour is
obsoleted by correct HTTP/1.1 Cache-Control:no-cache handling.&quot; Commit
7ed5335 message details that claim:
<A HREF="https://github.com/squid-cache/squid/commit/7ed5335">https://github.com/squid-cache/squid/commit/7ed5335</A>


* ignore-must-revalidate

Squid v4 release notes claim that &quot;Other more HTTP compliant directives
(cache, store_miss) can be used to prevent objects from caching&quot;. That
official statement mismatches the ignore-must-revalidate intent AFAICT:
The ignore-must-revalidate intent was to prevent revalidations rather
than prevent caching.

The corresponding commit message paints a rather different picture by
claiming that ignore-must-revalidate was broken -- it was actually
preventing caching rather preventing revalidation (and caused other
problems):
<A HREF="https://github.com/squid-cache/squid/commit/064679e">https://github.com/squid-cache/squid/commit/064679e</A>

If you combine the two together, you may get something like &quot;the option
was removed because it did not do what it promised to do, and what it
actually did can be accomplished with cache and store_miss&quot;.


* ignore-auth

Squid v4 release notes imply that Squid does what most admins want now,
without any explicit option: &quot;Its commonly desired behaviour is
performed by default with correct HTTP/1.1 revalidation&quot;. More details
at <A HREF="https://github.com/squid-cache/squid/commit/d94cbaa">https://github.com/squid-cache/squid/commit/d94cbaa</A>


Please do not shoot the messenger -- I am just relaying and interpreting
the official information. If you have a specific use case that cannot be
addressed using the existing directives, please ask about that specific
use case, detailing what Squid receives and what you want Squid to do.


HTH,

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022968.html">[squid-users] replacement for obsoleted cache controls (ign-no-cache; ign-must-reval. + ign-auth)
</A></li>
	<LI>Next message (by thread): <A HREF="022976.html">[squid-users] replacement for obsoleted cache controls (ign-no-cache; ign-must-reval. + ign-auth)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22975">[ date ]</a>
              <a href="thread.html#22975">[ thread ]</a>
              <a href="subject.html#22975">[ subject ]</a>
              <a href="author.html#22975">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
