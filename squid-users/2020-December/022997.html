<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid with more than 128 ports?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20with%20more%20than%20128%20ports%3F&In-Reply-To=%3CCAGCa14rTaYzMp-X%2BE_UoJLM3i5%2BgiHKwubuN3nmKmogRct-4Zw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022995.html">
   <LINK REL="Next"  HREF="022998.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid with more than 128 ports?</H1>
    <B>roee klinger</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20with%20more%20than%20128%20ports%3F&In-Reply-To=%3CCAGCa14rTaYzMp-X%2BE_UoJLM3i5%2BgiHKwubuN3nmKmogRct-4Zw%40mail.gmail.com%3E"
       TITLE="[squid-users] Squid with more than 128 ports?">roeeklinger60 at gmail.com
       </A><BR>
    <I>Thu Dec 10 18:39:22 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022995.html">[squid-users] Squid with more than 128 ports?
</A></li>
        <LI>Next message (by thread): <A HREF="022998.html">[squid-users] Squid with more than 128 ports?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22997">[ date ]</a>
              <a href="thread.html#22997">[ thread ]</a>
              <a href="subject.html#22997">[ subject ]</a>
              <a href="author.html#22997">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Anthony,

Giving this a second thought, I believe I didn't explain myself correctly.

I have 5 Squid servers, each listening on 80 ports, I would like to add
another
Squid server in the middle of the client and these servers to
authenticate users
before sending them to their ports. I already have ACL controls and auth
control tools
which I wrote and are working fine.

My question is regarding how to configure this, I have found this
configuration online
but I am not sure how it will work performance-wise with 500+ proxies
(could be 1000s in
the future):

http_port 3128 name=port_3128
&gt;<i> http_port 3127 name=port_3127
</I>&gt;<i> nonhierarchical_direct off
</I>&gt;<i> acl port_3128_acl myportname port_3128
</I>&gt;<i> acl port_3127_acl myportname port_3127
</I>&gt;<i> always_direct deny port_3128_acl
</I>&gt;<i> always_direct deny port_3127_acl
</I>&gt;<i> never_direct allow port_3128_acl
</I>&gt;<i> never_direct allow port_3127_acl
</I>&gt;<i> # 3128
</I>&gt;<i> cache_peer proxy1 parent 3128 0 proxy-only default name=proxy3128
</I>&gt;<i> cache_peer_access proxy3128 allow port_3128_acl
</I>&gt;<i> cache_peer_access proxy3128 deny all
</I>&gt;<i> # 3127
</I>&gt;<i> cache_peer proxy2 parent 3128 0 proxy-only default name=proxy3127
</I>&gt;<i> cache_peer_access proxy3127 allow port_3127_acl
</I>&gt;<i> cache_peer_access proxy3127 deny all
</I>

Combine these 2000+ lines in squid.conf with 2 external ACLs and a custom
authenticator,
can this cause a hit on performance or should it be no problem for squid to
handle?






On Thu, Dec 10, 2020 at 2:29 PM Antony Stone &lt;
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">Antony.Stone at squid.open.source.it</A>&gt; wrote:

&gt;<i> On Thursday 10 December 2020 at 13:02:19, roee klinger wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Hello,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; We have a few Squid proxy servers with a total of around 400 ports
</I>&gt;<i>
</I>&gt;<i> What do you mean by that?  What are you using 400 ports for?
</I>&gt;<i>
</I>&gt;<i> &gt; We have decided that we want to add a cloud instance in the middle of the
</I>&gt;<i> &gt; connections, that will authenticate users and only then send them to the
</I>&gt;<i> &gt; squid instance.
</I>&gt;<i>
</I>&gt;<i> What authentication method / protocol do you want to use?
</I>&gt;<i>
</I>&gt;<i> &gt; Is it a smart idea to use Squid for this use case or just use a different
</I>&gt;<i> &gt; proxy software that doesn't have this limitation?
</I>&gt;<i>
</I>&gt;<i> I think the best starting point is to ask what sort of authentication you
</I>&gt;<i> want
</I>&gt;<i> to perform (ie: what is the authoritative system which holds the
</I>&gt;<i> information
</I>&gt;<i> about who can authenticate and who cannot), then you can decide on the
</I>&gt;<i> best
</I>&gt;<i> software to use to do that in front of Squid.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Antony.
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Under UK law, no VAT is charged on biscuits and cakes - they are &quot;zero
</I>&gt;<i> rated&quot;.
</I>&gt;<i> Chocolate covered biscuits, however, are classed as &quot;luxury items&quot; and are
</I>&gt;<i> subject to VAT.  McVitie's classed its Jaffa Cakes as cakes, but in 1991
</I>&gt;<i> this
</I>&gt;<i> was challenged by Her Majesty's Customs and Excise in court.
</I>&gt;<i>
</I>&gt;<i> The question which had to be answered was what criteria should be used to
</I>&gt;<i> class something as a cake or a biscuit.  McVitie's defended the
</I>&gt;<i> classification
</I>&gt;<i> of Jaffa Cakes as a cake by arguing that cakes go hard when stale, whereas
</I>&gt;<i> biscuits go soft.  It was demonstrated that Jaffa Cakes become hard when
</I>&gt;<i> stale
</I>&gt;<i> and McVitie's won the case.
</I>&gt;<i>
</I>&gt;<i>                                                    Please reply to the
</I>&gt;<i> list;
</I>&gt;<i>                                                          please *don't* CC
</I>&gt;<i> me.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20201210/f5776ec6/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20201210/f5776ec6/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022995.html">[squid-users] Squid with more than 128 ports?
</A></li>
	<LI>Next message (by thread): <A HREF="022998.html">[squid-users] Squid with more than 128 ports?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22997">[ date ]</a>
              <a href="thread.html#22997">[ thread ]</a>
              <a href="subject.html#22997">[ subject ]</a>
              <a href="author.html#22997">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
