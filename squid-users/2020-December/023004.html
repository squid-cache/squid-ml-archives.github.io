<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Questions regarding &quot;store-id&quot; made by helper and log system
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Questions%20regarding%20%22store-id%22%20made%20by%20helper%20and%0A%20log%20system&In-Reply-To=%3C0190B4114E037F439F4450CC747234EF015FC35408%40srvmail22.numen.mg%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023003.html">
   <LINK REL="Next"  HREF="023001.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Questions regarding &quot;store-id&quot; made by helper and log system</H1>
    <B>Thomas PALFRAY</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Questions%20regarding%20%22store-id%22%20made%20by%20helper%20and%0A%20log%20system&In-Reply-To=%3C0190B4114E037F439F4450CC747234EF015FC35408%40srvmail22.numen.mg%3E"
       TITLE="[squid-users] Questions regarding &quot;store-id&quot; made by helper and log system">tpal at numen.mg
       </A><BR>
    <I>Fri Dec 11 15:11:09 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="023003.html">[squid-users] Questions regarding &quot;store-id&quot; made by helper and log system
</A></li>
        <LI>Next message (by thread): <A HREF="023001.html">[squid-users] dhcp
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23004">[ date ]</a>
              <a href="thread.html#23004">[ thread ]</a>
              <a href="subject.html#23004">[ subject ]</a>
              <a href="author.html#23004">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Alex,

Thanks for your quick answer.

&gt;<i> For a more complete picture, I would test with four sequential requests, two with one URL and two with another.
</I>
I get a HIT for the two request when i retry each one which let me think than the store-id computed is not the one from the helper but the plain url.

I also tried to force each request to go through my helper with &quot; store_id_bypass off&quot;
When I do that performance go dramatically down (i have around 400 users behind squid).

&gt;<i>That is one of many possibilities. Your best bet may be to examine Squid debugging log to understand whether the right Store ID is computed for each request and, if yes, why the second request misses. See debug_options in squid.conf.documented.
</I>&gt;<i>If setting debug_options to &quot;ALL,7&quot; overwhelms you with noise, try something like &quot;ALL,3 33,7 47,7 61,7 85,7&quot;. If you cannot figure it out, then use &quot;ALL,9&quot; and share a pointer to compressed cache.log containing just the two transactions (to start with).
</I>
Ok i will try these settings, i let you know.

BR,

Thomas PALFRAY

-----Message d'origine-----
De&#160;: Alex Rousskov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt; 
Envoy&#233;&#160;: vendredi 11 d&#233;cembre 2020 18:01
&#192;&#160;: Thomas PALFRAY &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">tpal at numen.mg</A>&gt;; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Objet&#160;: Re: [squid-users] Questions regarding &quot;store-id&quot; made by helper and log system

On 12/11/20 1:42 AM, Thomas PALFRAY wrote:

&gt;<i> When i call the first request of my example of output help, then the 
</I>&gt;<i> second, i get a MISS.
</I>
For a more complete picture, I would test with four sequential requests, two with one URL and two with another.


&gt;<i> I suppose that there's not using the same store-id.
</I>
That is one of many possibilities. Your best bet may be to examine Squid debugging log to understand whether the right Store ID is computed for each request and, if yes, why the second request misses. See debug_options in squid.conf.documented.

If setting debug_options to &quot;ALL,7&quot; overwhelms you with noise, try something like &quot;ALL,3 33,7 47,7 61,7 85,7&quot;. If you cannot figure it out, then use &quot;ALL,9&quot; and share a pointer to compressed cache.log containing just the two transactions (to start with).


HTH,

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="023003.html">[squid-users] Questions regarding &quot;store-id&quot; made by helper and log system
</A></li>
	<LI>Next message (by thread): <A HREF="023001.html">[squid-users] dhcp
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23004">[ date ]</a>
              <a href="thread.html#23004">[ thread ]</a>
              <a href="subject.html#23004">[ subject ]</a>
              <a href="author.html#23004">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
