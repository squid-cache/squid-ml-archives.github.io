<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid for Windows: negotiate_kerberos_auth helper seems to leak(?) handles
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20for%20Windows%3A%20negotiate_kerberos_auth%20helper%0A%20seems%20to%20leak%28%3F%29%20handles&In-Reply-To=%3Cdbd232bc-9dcf-4e4f-28b7-54c91dd85f5f%40westkamp.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023026.html">
   <LINK REL="Next"  HREF="023036.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid for Windows: negotiate_kerberos_auth helper seems to leak(?) handles</H1>
    <B>Klaus Westkamp</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20for%20Windows%3A%20negotiate_kerberos_auth%20helper%0A%20seems%20to%20leak%28%3F%29%20handles&In-Reply-To=%3Cdbd232bc-9dcf-4e4f-28b7-54c91dd85f5f%40westkamp.net%3E"
       TITLE="[squid-users] Squid for Windows: negotiate_kerberos_auth helper seems to leak(?) handles">klaus at westkamp.net
       </A><BR>
    <I>Mon Dec 14 15:03:53 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="023026.html">[squid-users] Adding header with destination IP to icap server via adaptation_meta
</A></li>
        <LI>Next message (by thread): <A HREF="023036.html">[squid-users] Squid for Windows: negotiate_kerberos_auth helper seems to leak(?) handles
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23022">[ date ]</a>
              <a href="thread.html#23022">[ thread ]</a>
              <a href="subject.html#23022">[ subject ]</a>
              <a href="author.html#23022">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

i'm uncertain, wether this mailing list is the correct one to ask, but i 
have the disputable honor to make a squid running on a Windows Server 
(if possible). Whilst squid.exe seems to run fine, i constantly run into 
an unresponsive system, when i enable Kerberos authentication via 
auth_param and the negotiate_kerberos_auth.exe helper.

For a while authentication works fine, but all at the sudden the system 
hangs at 100% CPU usage. My Observation is that one of the 
negotiate_kerberos_auth.exe processes has a constantly increasing number 
of handles (Files and events). If i understand the Sysinternals handle 
tool correctly, most handles are event corrolated.

The setting:

Windows 2012 R2 AD Controllers with Windows 2008R2 Domain Level. A 
Windows Server 2016 running Squid 3.5 for Windows. The squid server is a 
VM running on HyperV with 8 Gigs of RAM and 4 vCPUs. The AD Controllers 
are HP Systems with 24 Cores and 64 GByte of RAM.

Any Suggestions, besides changing to Linux, as inn that case the 
customer will favor to look for another proxy,(Sigh) that i might follow.


Best Regards,

Klaus Westkamp


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="023026.html">[squid-users] Adding header with destination IP to icap server via adaptation_meta
</A></li>
	<LI>Next message (by thread): <A HREF="023036.html">[squid-users] Squid for Windows: negotiate_kerberos_auth helper seems to leak(?) handles
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23022">[ date ]</a>
              <a href="thread.html#23022">[ thread ]</a>
              <a href="subject.html#23022">[ subject ]</a>
              <a href="author.html#23022">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
