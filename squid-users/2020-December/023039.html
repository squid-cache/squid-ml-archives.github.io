<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Proxy Server closes the connection to http server before transferring all application data to http client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Proxy%20Server%20closes%20the%20connection%20to%20http%20server%0A%20before%20transferring%20all%20application%20data%20to%20http%20client&In-Reply-To=%3Cbade1e0f-f11e-889c-ad5e-b832db3ca56c%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023046.html">
   <LINK REL="Next"  HREF="023049.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Proxy Server closes the connection to http server before transferring all application data to http client</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Proxy%20Server%20closes%20the%20connection%20to%20http%20server%0A%20before%20transferring%20all%20application%20data%20to%20http%20client&In-Reply-To=%3Cbade1e0f-f11e-889c-ad5e-b832db3ca56c%40measurement-factory.com%3E"
       TITLE="[squid-users] Proxy Server closes the connection to http server before transferring all application data to http client">rousskov at measurement-factory.com
       </A><BR>
    <I>Tue Dec 15 15:41:43 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="023046.html">[squid-users] Proxy Server closes the connection to http server before transferring all application data to http client
</A></li>
        <LI>Next message (by thread): <A HREF="023049.html">[squid-users] What is the state of V5 branch? Can I try to publish some RPMS?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23039">[ date ]</a>
              <a href="thread.html#23039">[ thread ]</a>
              <a href="subject.html#23039">[ subject ]</a>
              <a href="author.html#23039">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 12/14/20 10:21 PM, Zhang, Lily (USD) wrote:

&gt;<i>  1. Is it normal that proxy server sends FIN, ACK to http server before
</I>&gt;<i>     http client finishes receiving &#160;all the &#8220;Application Data&#8221; ?
</I>
Yes, this is how Squid works, even if Squid is tunneling at TCP level.
After Squid notices that the server has closed the Squid-server
connection, Squid closes its end of that connection as well, regardless
of what the client is doing (in some cases, there may be no client at
all at that point).

Some may argue that the lack of accurate closure timing propagation for
TCP tunnels is a Squid bug or a missing Squid feature, but that argument
does not change the answer to your question about the current Squid
behavior.


&gt;<i>  2. Does proxy server have option to stop item 1?
</I>
No. If you want to discuss whether adding such an option is a good idea
please detail your use case (i.e. _why_ such an option is needed).


HTH,

Alex.
P.S. Please note that Squid works above the individual TCP packet layer.
Squid operates on TCP sockets and does not see or send individual TCP
packets.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="023046.html">[squid-users] Proxy Server closes the connection to http server before transferring all application data to http client
</A></li>
	<LI>Next message (by thread): <A HREF="023049.html">[squid-users] What is the state of V5 branch? Can I try to publish some RPMS?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23039">[ date ]</a>
              <a href="thread.html#23039">[ thread ]</a>
              <a href="subject.html#23039">[ subject ]</a>
              <a href="author.html#23039">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
