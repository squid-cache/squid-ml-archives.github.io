<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid proxy incoming and outcoming connections?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20proxy%20incoming%20and%20outcoming%20connections%3F&In-Reply-To=%3CCADcj3%3D6d4SytLH0o4ppBsC1yCK5nP6cwb%2Bd%2BdO%2BMyg84vFimkg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021741.html">
   <LINK REL="Next"  HREF="021746.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid proxy incoming and outcoming connections?</H1>
    <B>Felipe Arturo Polanco</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20proxy%20incoming%20and%20outcoming%20connections%3F&In-Reply-To=%3CCADcj3%3D6d4SytLH0o4ppBsC1yCK5nP6cwb%2Bd%2BdO%2BMyg84vFimkg%40mail.gmail.com%3E"
       TITLE="[squid-users] Squid proxy incoming and outcoming connections?">felipeapolanco at gmail.com
       </A><BR>
    <I>Thu Feb 13 16:29:31 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="021741.html">[squid-users] Squid proxy incoming and outcoming connections?
</A></li>
        <LI>Next message (by thread): <A HREF="021746.html">[squid-users] Squid proxy incoming and outcoming connections?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21742">[ date ]</a>
              <a href="thread.html#21742">[ thread ]</a>
              <a href="subject.html#21742">[ subject ]</a>
              <a href="author.html#21742">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>You only have one port open for Squid
http_port 3128
You need two ports, one for HTTP and another for HTTPS.
Also, if you are going to block HTTPS based on the domain name, you need to
do sslBump to get the SNI of the destination website and then terminate the
SSL connection.

On Thu, Feb 13, 2020 at 12:26 PM Patr&#237;cia Sousa &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">psousadp at gmail.com</A>&gt; wrote:

&gt;<i> I think so.
</I>&gt;<i>
</I>&gt;<i> Here is the conf file: <A HREF="https://pastebin.com/DKMbwNV6">https://pastebin.com/DKMbwNV6</A>
</I>&gt;<i>
</I>&gt;<i> Felipe Arturo Polanco &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">felipeapolanco at gmail.com</A>&gt; escreveu no dia quinta,
</I>&gt;<i> 13/02/2020 &#224;(s) 16:22:
</I>&gt;<i>
</I>&gt;&gt;<i> Did you configure Squid to accept both HTTP and HTTPS ports?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Please share your squid.conf file.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Thu, Feb 13, 2020 at 12:18 PM Patr&#237;cia Sousa &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">psousadp at gmail.com</A>&gt;
</I>&gt;&gt;<i> wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Hi,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Thanks for the tip,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Enabling debug_options I can see that the wget from the machine computer
</I>&gt;&gt;&gt;<i> to the Squid machine does not goes through the proxy. Any idea why?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Felipe Arturo Polanco &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">felipeapolanco at gmail.com</A>&gt; escreveu no dia
</I>&gt;&gt;&gt;<i> quinta, 13/02/2020 &#224;(s) 15:32:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Hi,
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> For this, you need to use IPtables to block at the network level.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> SSH uses port 22/tcp but wget uses HTTP, it should have been blocked by
</I>&gt;&gt;&gt;&gt;<i> squid.
</I>&gt;&gt;&gt;&gt;<i> Enabled debug_options in squid to see why it was allowed.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> On Thu, Feb 13, 2020 at 11:10 AM Patr&#237;cia Sousa &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">psousadp at gmail.com</A>&gt;
</I>&gt;&gt;&gt;&gt;<i> wrote:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> I'm using the squid proxy and I'm trying to block some connections
</I>&gt;&gt;&gt;&gt;&gt;<i> (incoming and outcoming traffic) from a certain ip address. However, for
</I>&gt;&gt;&gt;&gt;&gt;<i> example, if I deny all the connections (http_access deny all) it only
</I>&gt;&gt;&gt;&gt;&gt;<i> blocks the connections that I made to websites for example, but if I use
</I>&gt;&gt;&gt;&gt;&gt;<i> another PC and try to ssh or wget the PC that owns the proxy squid, it is
</I>&gt;&gt;&gt;&gt;&gt;<i> allowed. How can I block the traffic from and to a specific IP or DNS? It
</I>&gt;&gt;&gt;&gt;&gt;<i> is possible to do this with Squid?
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> If not, what is the best way to do this?
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Thank you.
</I>&gt;&gt;&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;&gt;&gt;<i> squid-users mailing list
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20200213/d317bf68/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20200213/d317bf68/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="021741.html">[squid-users] Squid proxy incoming and outcoming connections?
</A></li>
	<LI>Next message (by thread): <A HREF="021746.html">[squid-users] Squid proxy incoming and outcoming connections?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21742">[ date ]</a>
              <a href="thread.html#21742">[ thread ]</a>
              <a href="subject.html#21742">[ subject ]</a>
              <a href="author.html#21742">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
