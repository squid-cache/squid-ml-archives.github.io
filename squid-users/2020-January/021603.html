<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] icap SOPHOS SAVDI and custom errorpage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20icap%20SOPHOS%20SAVDI%20and%20custom%20errorpage&In-Reply-To=%3Cc14c3265-7d60-7a46-c5bb-7d3e02e39c9b%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021598.html">
   <LINK REL="Next"  HREF="021604.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] icap SOPHOS SAVDI and custom errorpage</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20icap%20SOPHOS%20SAVDI%20and%20custom%20errorpage&In-Reply-To=%3Cc14c3265-7d60-7a46-c5bb-7d3e02e39c9b%40treenet.co.nz%3E"
       TITLE="[squid-users] icap SOPHOS SAVDI and custom errorpage">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Jan 10 05:30:57 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="021598.html">[squid-users] icap SOPHOS SAVDI and custom errorpage
</A></li>
        <LI>Next message (by thread): <A HREF="021604.html">[squid-users] icap SOPHOS SAVDI and custom errorpage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21603">[ date ]</a>
              <a href="thread.html#21603">[ thread ]</a>
              <a href="subject.html#21603">[ subject ]</a>
              <a href="author.html#21603">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 9/01/20 10:22 pm, netadmin wrote:
&gt;<i> I try to use the configuration given in the previous post
</I>
FYI: this post started a brand new thread, there is no previous post
visible to us. Please provide a direct reference to the post and/or
config file in question.


&gt;<i> with: Squid 4.9 and
</I>&gt;<i> Sophos SAVDI 2.6.
</I>&gt;<i> If I download a virus file, the Squid sends the file for scanning and is
</I>&gt;<i> detected by Sophos SAVDI (I find it in logs) but it is not blocked by Squid
</I>&gt;<i> (I can download it).
</I>&gt;<i> The problem I think is in the response received by the Squid after the scan
</I>&gt;<i> but I do not know where.
</I>&gt;<i> Has anyone managed to make this solution functional?
</I>&gt;<i> 
</I>
I assume the config uses the AV software as an ICAP service?
That has been made working by many AFAIK, with several different AV
software.

It is most likely that the ICAP service is either telling Squid it can
start delivering the response early before it finds the virus payload.
Or, producing the wrong response and thus causing Squid to deliver the
content.


To help we are likely to need your squid.conf details, the access.log
entries that show the transaction(s) you know are wrong, and the
icap.log content.

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="021598.html">[squid-users] icap SOPHOS SAVDI and custom errorpage
</A></li>
	<LI>Next message (by thread): <A HREF="021604.html">[squid-users] icap SOPHOS SAVDI and custom errorpage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21603">[ date ]</a>
              <a href="thread.html#21603">[ thread ]</a>
              <a href="subject.html#21603">[ subject ]</a>
              <a href="author.html#21603">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
