<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid access.log
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20access.log&In-Reply-To=%3C6547a0a7-e4bc-84ff-629c-b7c56ebed007%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="021654.html">
   <LINK REL="Next"  HREF="021688.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid access.log</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20access.log&In-Reply-To=%3C6547a0a7-e4bc-84ff-629c-b7c56ebed007%40measurement-factory.com%3E"
       TITLE="[squid-users] Squid access.log">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Jan 16 21:04:06 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="021654.html">[squid-users] Squid access.log
</A></li>
        <LI>Next message (by thread): <A HREF="021688.html">[squid-users] Squid access.log
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21655">[ date ]</a>
              <a href="thread.html#21655">[ thread ]</a>
              <a href="subject.html#21655">[ subject ]</a>
              <a href="author.html#21655">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 1/16/20 3:39 PM, Kornexl, Anton wrote:

&gt;<i> Why are some https-requests logged with the correct hostname and no
</I>&gt;<i> fake CONNECT https:443 and other requests are logged without correct
</I>&gt;<i> domain but with fake CONNECT entries
</I>
For every specific log record, either there is a Squid bug or you are
dealing with some special traffic that you do not know about (e.g., see
Amos response regarding old redirectors causing such weird entries).

Your best bet may be to find out what exactly Squid receives when it
produces a specific unexpected log entry. You can try to do that using
%&gt;handshake logformat code or, if that does not work, using
tcpdump/wireshark/etc. Once properly collected and shared, the folks
here can help you decode the binary handshake blob and, hopefully,
explain what you are seeing.

Alex.


&gt;<i> -----Urspr&#252;ngliche Nachricht-----
</I>&gt;<i> Von: Alex Rousskov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt; 
</I>&gt;<i> Gesendet: Donnerstag, 16. Januar 2020 15:08
</I>&gt;<i> An: Kornexl, Anton &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">KORNEXL at ads.uni-passau.de</A>&gt;; 217.252.117.35
</I>&gt;<i> Betreff: Re: [squid-users] Squid access.log
</I>&gt;<i> 
</I>&gt;<i> On 1/16/20 3:06 AM, Kornexl, Anton wrote::
</I>&gt;<i> 
</I>&gt;&gt;<i> I see many requests with CONNECT https:443 in my access.log
</I>&gt;<i> 
</I>&gt;&gt;<i> How are these entries triggered?
</I>&gt;<i> 
</I>&gt;<i> These records are logged when your Squid is done with an HTTP CONNECT
</I>&gt;<i> tunnel or after Squid intercepts a TLS connection. In very broad terms,
</I>&gt;<i> they are a sign that your Squid participates in HTTPS transactions.
</I>&gt;<i> Normally, there should be more than &quot;https:443&quot; in those CONNECT records.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> They produce errors in some accounting scripts
</I>&gt;<i> 
</I>&gt;<i> Consider either fixing the scripts or, if losing information about
</I>&gt;<i> CONNECT tunnels is acceptable to your accounting, filtering CONNECT
</I>&gt;<i> records out before giving the logs to the scripts.
</I>&gt;<i> 
</I>&gt;<i> You can also configure Squid to stop logging CONNECT transactions (using
</I>&gt;<i> access_log ACLs), but I do not recommend hiding the truth that may be
</I>&gt;<i> critical in a triage.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> HTH,
</I>&gt;<i> 
</I>&gt;<i> Alex.
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="021654.html">[squid-users] Squid access.log
</A></li>
	<LI>Next message (by thread): <A HREF="021688.html">[squid-users] Squid access.log
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21655">[ date ]</a>
              <a href="thread.html#21655">[ thread ]</a>
              <a href="subject.html#21655">[ subject ]</a>
              <a href="author.html#21655">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
