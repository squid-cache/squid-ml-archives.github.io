<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Redirect request to cache_peer using username and	passwords
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Redirect%20request%20to%20cache_peer%20using%20username%20and%0A%09passwords&In-Reply-To=%3CCACbtF4PRB2rWKFkAMnHUoAgYzoxq%2BnUVAPcEJ5Zf5d5EsC%3DAhg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022356.html">
   <LINK REL="Next"  HREF="022360.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Redirect request to cache_peer using username and	passwords</H1>
    <B>Prem Chand</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Redirect%20request%20to%20cache_peer%20using%20username%20and%0A%09passwords&In-Reply-To=%3CCACbtF4PRB2rWKFkAMnHUoAgYzoxq%2BnUVAPcEJ5Zf5d5EsC%3DAhg%40mail.gmail.com%3E"
       TITLE="[squid-users] Redirect request to cache_peer using username and	passwords">premchand142 at gmail.com
       </A><BR>
    <I>Thu Jul  2 12:59:19 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022356.html">[squid-users] Redirect request to cache_peer using username and passwords
</A></li>
        <LI>Next message (by thread): <A HREF="022360.html">[squid-users] Redirect request to cache_peer using username and	passwords
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22358">[ date ]</a>
              <a href="thread.html#22358">[ thread ]</a>
              <a href="subject.html#22358">[ subject ]</a>
              <a href="author.html#22358">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Amos,

Thanks for the response.

However, what do you want to happen when that user's dedicated peer is
unavailable?
Can it be routed to another peer if a dedicated peer is unavailable?
because each peer is accessed by a different username and password. If
there is an option to route then I will keep a backup peer(Peer4) so if any
one of the peers(Peer1,Peer2,Peer3) is unavailable it can route to the
backup peer and once the unavailable peer become available then traffic
should auto route to them from backup peer.

If there is no option that fits as I explained above then I want to stop
all access for them.

Are you wanting to keep this behaviour?
I don't want to use the round-robin behaviour. I want to route requests to
dedicated Peer/Client.

On Thu, Jul 2, 2020 at 3:19 PM Prem Chand &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">premchand142 at gmail.com</A>&gt; wrote:

&gt;<i>
</I>&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I need to redirect my clients requests to different Cache_peers using
</I>&gt;<i> username and passwords through my proxy. Below is the rough sketch. Can
</I>&gt;<i> someone suggest to me how I can achieve this?
</I>&gt;<i>
</I>&gt;<i> Client1(Username1:password1) -&gt;Proxy:443 -&gt; Cache_peer:3218
</I>&gt;<i> Client 2(Username2:password2)-&gt;Proxy:443-&gt; Cache_peer:3219
</I>&gt;<i> .
</I>&gt;<i> .
</I>&gt;<i> .
</I>&gt;<i> .
</I>&gt;<i>
</I>&gt;<i> This is my current configuration, I'm doing round robin through
</I>&gt;<i> cache_peers when authenticated with a single username and password in
</I>&gt;<i> /etc/squid/squidpasswdfile file
</I>&gt;<i>
</I>&gt;<i> auth_param basic program /usr/lib64/squid/ncsa_auth
</I>&gt;<i> /etc/squid/squidpasswdfile
</I>&gt;<i> auth_param basic realm proxy
</I>&gt;<i> acl auth_users proxy_auth REQUIRED
</I>&gt;<i> http_access allow auth_users
</I>&gt;<i> http_access deny all
</I>&gt;<i> cache_peer Peer1 parent 3218 0 round-robin no-query weight=1
</I>&gt;<i> connect-fail-limit=1
</I>&gt;<i> cache_peer Peer2 parent 3219 0 round-robin no-query weight=1
</I>&gt;<i> connect-fail-limit=1
</I>&gt;<i> cache_peer Peer3 parent 3219 0 round-robin no-query weight=1
</I>&gt;<i> connect-fail-limit=1
</I>&gt;<i>
</I>&gt;<i> Thanks &amp; Regards
</I>&gt;<i> Premchand.
</I>&gt;<i>
</I>

-- 
prem
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20200702/5f229db9/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20200702/5f229db9/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022356.html">[squid-users] Redirect request to cache_peer using username and passwords
</A></li>
	<LI>Next message (by thread): <A HREF="022360.html">[squid-users] Redirect request to cache_peer using username and	passwords
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22358">[ date ]</a>
              <a href="thread.html#22358">[ thread ]</a>
              <a href="subject.html#22358">[ subject ]</a>
              <a href="author.html#22358">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
