<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Assertion failed (mempool.cc)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Assertion%20failed%20%28mempool.cc%29&In-Reply-To=%3Cd3ee06ee-f6e9-a0de-ba54-d57954ac2997%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022414.html">
   <LINK REL="Next"  HREF="022416.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Assertion failed (mempool.cc)</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Assertion%20failed%20%28mempool.cc%29&In-Reply-To=%3Cd3ee06ee-f6e9-a0de-ba54-d57954ac2997%40measurement-factory.com%3E"
       TITLE="[squid-users] Assertion failed (mempool.cc)">rousskov at measurement-factory.com
       </A><BR>
    <I>Sat Jul 18 21:15:53 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022414.html">[squid-users] Assertion failed (mempool.cc)
</A></li>
        <LI>Next message (by thread): <A HREF="022416.html">[squid-users] Assertion failed (mempool.cc)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22415">[ date ]</a>
              <a href="thread.html#22415">[ thread ]</a>
              <a href="subject.html#22415">[ subject ]</a>
              <a href="author.html#22415">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 7/18/20 11:43 AM, Gabor Berczi wrote:

&gt;<i> newly compiled squid executables don't
</I>&gt;<i> start. The previous one does. Where do I start looking?
</I>
I would try building the previous one again, using the exact same
procedure as you are using to build the new executable. Does the freshly
rebuilt old executable start OK? If yes, rebuild the new one from a
fresh directory. Just in case.

Also, checking (e.g., using &quot;ldd&quot;) that both working and broken
executables are usining the same shared libraries may be useful.

Your gdb sessions suggest a broken/malformed executable. If that is what
happened, debugging it further is unlikely to be fruitful.


Good luck,

Alex.


&gt;<i> Assertion failed: (aLabel != NULL &amp;&amp; aSize), function
</I>&gt;<i> MemImplementingAllocator, file MemPool.cc, line 394.
</I>&gt;<i> 
</I>&gt;<i> Program received signal SIGABRT, Aborted.
</I>&gt;<i> [Switching to Thread 8024041c0 (LWP 100089/initial thread)]
</I>&gt;<i> 0x00000008020d022c in kill () from /lib/libc.so.7
</I>&gt;<i> (gdb) bt
</I>&gt;<i> #0&#160; 0x00000008020d022c in kill () from /lib/libc.so.7
</I>&gt;<i> #1&#160; 0x00000008020cf02b in abort () from /lib/libc.so.7
</I>&gt;<i> #2&#160; 0x00000008020b8355 in __assert () from /lib/libc.so.7
</I>&gt;<i> #3&#160; 0x00000000008188e8 in MemImplementingAllocator (this=0x80240e7c0,
</I>&gt;<i> &#160;&#160;&#160; aLabel=0x845614 &quot;Short Strings&quot;, aSize=0) at MemPool.cc:394
</I>&gt;<i> #4&#160; 0x000000000081a220 in MemPoolMalloc (this=0x80240e7c0,
</I>&gt;<i> &#160;&#160;&#160; aLabel=&lt;value optimized out&gt;, aSize=&lt;value optimized out&gt;)
</I>&gt;<i> &#160;&#160;&#160; at MemPoolMalloc.cc:96
</I>&gt;<i> #5&#160; 0x0000000000817d3f in MemPools::create (this=&lt;value optimized out&gt;,
</I>&gt;<i> &#160;&#160;&#160; label=0x845614 &quot;Short Strings&quot;, obj_size=0) at MemPool.cc:111
</I>&gt;<i> #6&#160; 0x00000000005d2089 in Mem::Init () at mem.cc:454
</I>&gt;<i> #7&#160; 0x00000000005cefce in SquidMain (argc=1, argv=0x7fffffffe7c8) at
</I>&gt;<i> main.cc:1391
</I>&gt;<i> #8&#160; 0x00000000005cfcc3 in main (argc=&lt;value optimized out&gt;,
</I>&gt;<i> &#160;&#160;&#160; argv=&lt;value optimized out&gt;) at main.cc:1265
</I>&gt;<i> 
</I>&gt;<i> Or with -v:
</I>&gt;<i> 
</I>&gt;<i> (gdb) r -v
</I>&gt;<i> Starting program: /tmp/squid-3.5.28/src/squid -v
</I>&gt;<i> [New LWP 100093]
</I>&gt;<i> [New Thread 8024041c0 (LWP 100093/initial thread)]
</I>&gt;<i> Squid Cache: Version 3.5.28
</I>&gt;<i> 
</I>&gt;<i> Program received signal SIGSEGV, Segmentation fault.
</I>&gt;<i> [Switching to Thread 8024041c0 (LWP 100093/initial thread)]
</I>&gt;<i> 0x00000000005fe2ee in SBuf::rawContent (this=0xbf7220) at SBuf.cc:545
</I>&gt;<i> 545&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ++stats.rawAccess;
</I>&gt;<i> (gdb) bt
</I>&gt;<i> #0&#160; 0x00000000005fe2ee in SBuf::rawContent (this=0xbf7220) at SBuf.cc:545
</I>&gt;<i> #1&#160; 0x00000000005cdd9e in mainParseOptions (argc=2, argv=0x7fffffffe7b8)
</I>&gt;<i> &#160;&#160;&#160; at main.cc:563
</I>&gt;<i> #2&#160; 0x00000000005cef9f in SquidMain (argc=2, argv=0x7fffffffe7b8) at
</I>&gt;<i> main.cc:1356
</I>&gt;<i> #3&#160; 0x00000000005cfcc3 in main (argc=&lt;value optimized out&gt;,
</I>&gt;<i> &#160;&#160;&#160; argv=&lt;value optimized out&gt;) at main.cc:1265
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022414.html">[squid-users] Assertion failed (mempool.cc)
</A></li>
	<LI>Next message (by thread): <A HREF="022416.html">[squid-users] Assertion failed (mempool.cc)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22415">[ date ]</a>
              <a href="thread.html#22415">[ thread ]</a>
              <a href="subject.html#22415">[ subject ]</a>
              <a href="author.html#22415">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
