<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Caching https data
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Caching%20https%20data&In-Reply-To=%3Ce4416845-a5a6-64ca-b434-812344b3c8c5%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022502.html">
   <LINK REL="Next"  HREF="022504.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Caching https data</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Caching%20https%20data&In-Reply-To=%3Ce4416845-a5a6-64ca-b434-812344b3c8c5%40treenet.co.nz%3E"
       TITLE="[squid-users] Caching https data">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Jul 30 09:11:02 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022502.html">[squid-users] Caching https data
</A></li>
        <LI>Next message (by thread): <A HREF="022504.html">[squid-users] Caching https data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22503">[ date ]</a>
              <a href="thread.html#22503">[ thread ]</a>
              <a href="subject.html#22503">[ subject ]</a>
              <a href="author.html#22503">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 30/07/20 10:34 am, Darwin O'Connor wrote:
&gt;<i> I run a transit prediction web app &lt;<A HREF="https://www.transsee.ca/">https://www.transsee.ca/</A>&gt;. It
</I>&gt;<i> connects to a variety of web APIs to collect the real time data it
</I>&gt;<i> needs. The apps activities are split among many processes. They
</I>&gt;<i> currently uses libcurl to connect to squid for caching (often for as
</I>&gt;<i> little as 10-30 seconds) and benefits of connection sharing, but some of
</I>&gt;<i> the APIs use https, so in that case the data passes through squid
</I>&gt;<i> without the benefits of caching or connection sharing.
</I>&gt;<i> 
</I>&gt;<i> I would like to configure squid to connect to these servers securely and
</I>&gt;<i> pass it unencrypted to clients. Security isn't really an issue since
</I>&gt;<i> this step is all within the one server. I'll have to configure libcurl
</I>&gt;<i> to allow unencrypted data.
</I>&gt;<i> 
</I>
There are several approaches you can take;

1) configure libcurl and/or the apps to send <A HREF="https://">https://</A> URLs to Squid in
regular HTTP requests. Leaving Squid to handle all the HTTPS portion.
  &lt;&gt;


2) configure libcurl and/or the apps to send <A HREF="https://">https://</A> URLs to a Squid
secure listening port (https_port) in regular HTTP requests. Leaving
Squid to handle all the HTTPS portion with servers. I'm not sure about
libcurl, but some clients allow this when they prohibit (1) because it
is somewhat more secure.

&lt;<A HREF="https://wiki.squid-cache.org/Features/HTTPS#Encrypted_browser-Squid_connection">https://wiki.squid-cache.org/Features/HTTPS#Encrypted_browser-Squid_connection</A>&gt;


3) SSL-Bump to decrypt the CONNECT tunnels clients tend to prefer when
using an HTTP proxy.
  &lt;<A HREF="https://wiki.squid-cache.org/Features/SslPeekAndSplice">https://wiki.squid-cache.org/Features/SslPeekAndSplice</A>&gt;


Current Squid (v4 or later) support (1) and (2) with either GnuTLS or
OpenSSL. (3) requires OpenSSL.

Once decrypted the <A HREF="https://">https://</A> URLs are subject to normal HTTP caching rules.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022502.html">[squid-users] Caching https data
</A></li>
	<LI>Next message (by thread): <A HREF="022504.html">[squid-users] Caching https data
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22503">[ date ]</a>
              <a href="thread.html#22503">[ thread ]</a>
              <a href="subject.html#22503">[ subject ]</a>
              <a href="author.html#22503">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
