<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] no response from the proxy squid parent
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20no%20response%20from%20the%20proxy%20squid%20parent&In-Reply-To=%3C909fe308-7c06-88d7-fefb-562e41af317e%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022294.html">
   <LINK REL="Next"  HREF="022312.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] no response from the proxy squid parent</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20no%20response%20from%20the%20proxy%20squid%20parent&In-Reply-To=%3C909fe308-7c06-88d7-fefb-562e41af317e%40treenet.co.nz%3E"
       TITLE="[squid-users] no response from the proxy squid parent">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Jun 26 11:11:25 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022294.html">[squid-users] no response from the proxy squid parent
</A></li>
        <LI>Next message (by thread): <A HREF="022312.html">[squid-users] no response from the proxy squid parent
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22304">[ date ]</a>
              <a href="thread.html#22304">[ thread ]</a>
              <a href="subject.html#22304">[ subject ]</a>
              <a href="author.html#22304">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 24/06/20 7:27 am, <A HREF="https://lists.squid-cache.org/listinfo/squid-users">yannick.rousseau at tutanota.com</A> wrote:
&gt;<i> Hi,&#160;
</I>&gt;<i> 
</I>&gt;<i> I'm using squid (4.6) on my server (debianedu buster LTSP), and I'm
</I>&gt;<i> trying to configure a parent proxy.
</I>&gt;<i> 
</I>&gt;<i> At first, when I configure the client's firefox (manual proxy
</I>&gt;<i> configuration) with the ip and port of the parent proxy, it's ok, I can
</I>&gt;<i> surf on the internet.&#160;
</I>&gt;<i> 
</I>&gt;<i> But I would like to configure my server's Squid Proxy to forward to a
</I>&gt;<i> parent proxy (172.16.103.254:3128)
</I>&gt;<i> -&gt; So I add these two lines at the end of squid.conf:
</I>&gt;<i> cache_peer 172.16.103.254 parent 3128 0 no-query no-digest
</I>&gt;<i> never_direct allow all
</I>&gt;<i> 
</I>&gt;<i> -&gt; And restart squid. It seems to be ok:
</I>&gt;<i> # cat /var/log/squid/cache.log
</I>&gt;<i> (.....)
</I>&gt;<i> 2020/06/23 09:51:12 kid1| Configuring Parent 172.16.103.254/3128/0
</I>&gt;<i> (....)
</I>&gt;<i> 
</I>&gt;<i> -&gt; Then I configure firefox to use system proxy settings, but when I try
</I>&gt;<i> to google something or visit debian-fr.org, it doesn't work (no reponse
</I>&gt;<i> from the proxy).
</I>
That is odd. The log shows a 403 response being delivered by the parent
proxy and delivered to Firefox.

Browsers refuse to display proxy responses on CONNECT requests. So the
first is expected. But the second one using <A HREF="http://">http://</A> should be shown.


&gt;<i> But my squid's configuration seems to be ok:
</I>&gt;<i> # cat /var/log/squid/access.log
</I>&gt;<i> (....)
</I>&gt;<i> 1592921221.753&#160;&#160;&#160; 138 10.0.2.2 TCP_TUNNEL/403 361
</I>&gt;<i> CONNECT&#160;www.google.com:443 &lt;<A HREF="http://www.google.com:443/">http://www.google.com:443/</A>&gt;&#160;-
</I>&gt;<i> FIRSTUP_PARENT/172.16.103.254 -
</I>&gt;<i> 1592921275.641&#160;&#160;&#160; 521 10.0.2.2 TCP_MISS/403 4289
</I>&gt;<i> GET&#160;<A HREF="http://www.debian-fr.org/&#160;-">http://www.debian-fr.org/&#160;-</A> FIRSTUP_PARENT/172.16.103.254 text/html
</I>&gt;<i> 1592921275.692&#160;&#160;&#160;&#160;&#160; 0 10.0.2.2 TCP_HIT/200 13072 GET
</I>&gt;<i> (...)
</I>&gt;<i> 
</I>&gt;<i> Is it possible that the squid parent refuse to have &quot;a child&quot; ?
</I>
Maybe. You will need to know the parent proxy configuration to tell
that. All that is visible from the detail you have shown is that parent
proxy has forbidden the requests it is receiving.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022294.html">[squid-users] no response from the proxy squid parent
</A></li>
	<LI>Next message (by thread): <A HREF="022312.html">[squid-users] no response from the proxy squid parent
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22304">[ date ]</a>
              <a href="thread.html#22304">[ thread ]</a>
              <a href="subject.html#22304">[ subject ]</a>
              <a href="author.html#22304">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
