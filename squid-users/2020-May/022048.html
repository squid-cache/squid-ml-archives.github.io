<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid Proxy not blocking websites
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Proxy%20not%20blocking%20websites&In-Reply-To=%3C2093095721.337076.1588506662085%40mail.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022076.html">
   <LINK REL="Next"  HREF="022064.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid Proxy not blocking websites</H1>
    <B>Arjun K</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Proxy%20not%20blocking%20websites&In-Reply-To=%3C2093095721.337076.1588506662085%40mail.yahoo.com%3E"
       TITLE="[squid-users] Squid Proxy not blocking websites">email_arjun at yahoo.com
       </A><BR>
    <I>Sun May  3 11:51:02 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022076.html">[squid-users] Passing XML through squid proxy
</A></li>
        <LI>Next message (by thread): <A HREF="022064.html">[squid-users] Squid Proxy not blocking websites
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22048">[ date ]</a>
              <a href="thread.html#22048">[ thread ]</a>
              <a href="subject.html#22048">[ subject ]</a>
              <a href="author.html#22048">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All
The below is the configuration defined in the proxy server.The issue is that the proxy is not blocking the websites mentioned in a file named denylist.txt.
Kindly let me know what needs to be changed to block the websites.


####IP Ranges allowed to use proxyacl localnet src 10.196.0.0/16
acl localnet src 10.197.0.0/16acl localnet src 10.198.0.0/16acl localnet src 10.199.0.0/16acl localnet src 10.200.0.0/16
####Allowed and Denied URLsacl allowedurl dstdomain /etc/squid/allowed_url.txtacl denylist dstdomain /etc/squid/denylist.txt
acl windowsupdate dstdomain windowsupdate.microsoft.comacl windowsupdate dstdomain .update.microsoft.comacl windowsupdate dstdomain download.windowsupdate.comacl windowsupdate dstdomain redir.metaservices.microsoft.comacl windowsupdate dstdomain images.metaservices.microsoft.comacl windowsupdate dstdomain c.microsoft.comacl windowsupdate dstdomain www.download.windowsupdate.comacl windowsupdate dstdomain wustat.windows.comacl windowsupdate dstdomain crl.microsoft.comacl windowsupdate dstdomain sls.microsoft.comacl windowsupdate dstdomain productactivation.one.microsoft.comacl windowsupdate dstdomain ntservicepack.microsoft.comacl windowsupdate dstdomain eu.vortex-win.data.microsoft.comacl windowsupdate dstdomain eu-v20.events.data.microsoft.comacl windowsupdate dstdomain usseu1northprod.blob.core.windows.netacl windowsupdate dstdomain usseu1westprod.blob.core.windows.netacl windowsupdate dstdomain winatp-gw-neu.microsoft.comacl windowsupdate dstdomain winatp-gw-weu.microsoft.comacl windowsupdate dstdomain wseu1northprod.blob.core.windows.netacl windowsupdate dstdomain wseu1westprod.blob.core.windows.netacl windowsupdate dstdomain automatedirstrprdweu.blob.core.windows.netacl windowsupdate dstdomain automatedirstrprdneu.blob.core.windows.netacl windowsupdate dstdomain play.google.comacl windowsupdate dstdomain go.microsoft.com
acl CONNECT method CONNECTacl wuCONNECT dstdomain www.update.microsoft.comacl wuCONNECT dstdomain sls.microsoft.comhttp_access allow CONNECT wuCONNECT localnethttp_access allow windowsupdate localnet
acl Safe_ports port 80 # httpacl Safe_ports port 443 # httpsacl CONNECT method CONNECT
http_access allow allowedurlhttp_access deny denylisthttp_access allow localhost managerhttp_access allow localhosthttp_access allow localnethttp_access deny managerhttp_access deny !Safe_portshttp_access deny all
http_port 8080
cache_dir ufs /var/spool/squid 10000 16 256coredump_dir /var/spool/squid
refresh_pattern ^ftp:&#160; &#160; &#160; &#160; &#160; &#160;1440&#160; &#160; 20%&#160; &#160; &#160;10080refresh_pattern ^gopher:&#160; &#160; &#160; &#160; 1440&#160; &#160; 0%&#160; &#160; &#160; 1440refresh_pattern -i (/cgi-bin/|\?) 0&#160; &#160; &#160;0%&#160; &#160; &#160; 0refresh_pattern .&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;0&#160; &#160; &#160; &#160;20%&#160; &#160; &#160;4320refresh_pattern -i windowsupdate.com/.*\.(cab|exe|ms[i|u|f]|[ap]sf|wm[v|a]|dat|zip) 4320 80% 43200 reload-into-imsrefresh_pattern -i microsoft.com/.*\.(cab|exe|ms[i|u|f]|[ap]sf|wm[v|a]|dat|zip) 4320 80% 43200 reload-into-imsrefresh_pattern -i windows.com/.*\.(cab|exe|ms[i|u|f]|[ap]sf|wm[v|a]|dat|zip) 4320 80% 43200 reload-into-ims



RegardsArjun K.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20200503/343cf3e0/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20200503/343cf3e0/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022076.html">[squid-users] Passing XML through squid proxy
</A></li>
	<LI>Next message (by thread): <A HREF="022064.html">[squid-users] Squid Proxy not blocking websites
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22048">[ date ]</a>
              <a href="thread.html#22048">[ thread ]</a>
              <a href="subject.html#22048">[ subject ]</a>
              <a href="author.html#22048">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
