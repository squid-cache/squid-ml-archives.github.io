<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid negotation auth for Java webstart not working
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20negotation%20auth%20for%20Java%20webstart%20not%20working&In-Reply-To=%3Ccf2a9f6f5c5d445bb286b06b4be4db62%40stala.bwl.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022088.html">
   <LINK REL="Next"  HREF="022089.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid negotation auth for Java webstart not working</H1>
    <B>Molecki, Christian (STL)</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20negotation%20auth%20for%20Java%20webstart%20not%20working&In-Reply-To=%3Ccf2a9f6f5c5d445bb286b06b4be4db62%40stala.bwl.de%3E"
       TITLE="[squid-users] Squid negotation auth for Java webstart not working">Christian.Molecki at stala.bwl.de
       </A><BR>
    <I>Tue May  5 14:29:50 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022088.html">[squid-users] Encrypt CONNECT Header
</A></li>
        <LI>Next message (by thread): <A HREF="022089.html">[squid-users] Problem with Debugging Useragent
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22074">[ date ]</a>
              <a href="thread.html#22074">[ thread ]</a>
              <a href="subject.html#22074">[ subject ]</a>
              <a href="author.html#22074">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,
 
we are using Squid 3.5.21 and trying to implement the negotation authentification, based on kerberos and ntlm.
Browsing in the internet works fine, even with acls based on active directory groups.
 
 
Unfortunately we can't call java web start applications:
java.io.IOException: Unable to tunnel through proxy. Proxy returns &quot;HTTP/1.1 407 Proxy Authentication Required&quot;

We are using Java 1.8.0_221 on the clients.
 
Squid.conf
auth_param negotiate program /usr/sbin/negotiate_wrapper_auth -d --ntlm /usr/bin/ntlm_auth --diagnostics --helper-protocol=squid-2.5-ntlmssp --domain=STL --kerberos /usr/sbin/negotiate_kerberos_auth -d -s GSS_C_NO_NAME
auth_param negotiate children 10
auth_param negotiate keep_alive off
 
acl grp-www external nt_group GRP_WWW
acl www-auth proxy_auth REQUIRED
 
http_access allow p-http  grp-www www-auth
http_access allow p-https grp-www www-auth
 
Without grp-www and www-auth the calls work fine, but there is also no authentification.
 
cache.log (last entry of kerberos debug)
negotiate_kerberos_auth.cc(801): pid=2876 :2020/05/05 16:12:02| negotiate_kerberos_auth: DEBUG: AF oYG3MIG0oAMKAQChCwYJKoZIgvcSAQICooGfBIGcYIGZBgkqhkiG9xIBAgICAG+BiTCBhqADAgEFoQMCAQ+iejB4oAMCARKicQRv5cOyDbJ0+OYmI5iv0/mdKKd3Ez6ewG43c2U2rzYvooNfdMUT4ap5vufPMNSw3fGLJvPKgupMawOvcduXlBkCHqa5pqkmczvXGAdJvC2yRSJagDSrpuvjC9/XXaZCJl906Pluwo2ovPaYcKCXDy9c &lt;myuser&gt;
 
 The wiki says: AF - Success. Valid credentials. Deprecated by OK result from Squid-3.4 onwards.
 
Does anyone have a clue or a similar behavior?
 
 
 
Best Regards
Christian Molecki


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022088.html">[squid-users] Encrypt CONNECT Header
</A></li>
	<LI>Next message (by thread): <A HREF="022089.html">[squid-users] Problem with Debugging Useragent
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22074">[ date ]</a>
              <a href="thread.html#22074">[ thread ]</a>
              <a href="subject.html#22074">[ subject ]</a>
              <a href="author.html#22074">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
