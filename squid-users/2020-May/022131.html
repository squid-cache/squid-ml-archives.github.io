<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid 4.10: ssl-bump on https_port requires tproxy/intercept which is missing in secure proxy method
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%204.10%3A%20ssl-bump%20on%20https_port%20requires%0A%20tproxy/intercept%20which%20is%20missing%20in%20secure%20proxy%20method&In-Reply-To=%3C20200520100238.GA4558%40fantomas.sk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022136.html">
   <LINK REL="Next"  HREF="022137.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid 4.10: ssl-bump on https_port requires tproxy/intercept which is missing in secure proxy method</H1>
    <B>Matus UHLAR - fantomas</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%204.10%3A%20ssl-bump%20on%20https_port%20requires%0A%20tproxy/intercept%20which%20is%20missing%20in%20secure%20proxy%20method&In-Reply-To=%3C20200520100238.GA4558%40fantomas.sk%3E"
       TITLE="[squid-users] squid 4.10: ssl-bump on https_port requires tproxy/intercept which is missing in secure proxy method">uhlar at fantomas.sk
       </A><BR>
    <I>Wed May 20 10:02:38 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022136.html">[squid-users] squid 4.10: ssl-bump on https_port requires tproxy/intercept which is missing in secure proxy method
</A></li>
        <LI>Next message (by thread): <A HREF="022137.html">[squid-users] squid 4.10: ssl-bump on https_port requires tproxy/intercept which is missing in secure proxy method
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22131">[ date ]</a>
              <a href="thread.html#22131">[ thread ]</a>
              <a href="subject.html#22131">[ subject ]</a>
              <a href="author.html#22131">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;&gt;&gt;<i> On 18/05/20 10:15 am, David Touzeau wrote:
</I>&gt;&gt;&gt;&gt;<i> Hi we want to use squid as * * * Secure Proxy * * * using https_port
</I>&gt;&gt;&gt;&gt;<i> We have tested major browsers and it seems working good.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> To make it work, we need to deploy the proxy certificate on all browsers
</I>&gt;&gt;&gt;&gt;<i> to make the secure connection running.
</I>
On 19.05.20 10:46, Alex Rousskov wrote:
&gt;<i>I hope that deployment is not necessary -- an HTTPS proxy should be
</I>&gt;<i>using a certificate issued for its domain name and signed by a
</I>&gt;<i>well-known CA already trusted by browsers. An HTTPS proxy is not faking
</I>&gt;<i>anything. If browsers do require CA certificate import in this
</I>&gt;<i>environment, it is their limitation.
</I>
That means, SSL connection from brower to the proxy will be encrypted and
signed by certificate installed on the proxy, which may be signed by public
authority, provided the proxy has public DNS name 
(public authorities only sign public domains)

the traffic inside of the SSL tunnel will be standard proxy communication -
GET, POST, CONNECT requests.

CONNECT requests will ask the proxy to build tunnel to destination server,
which will usually contain encrypted HTTPS communication between browser and
final server.  So, CONNECT will create HTTPS connection (browser-server)
inside of HTTPS connection (browser-proxy)

&gt;<i>On 5/19/20 9:24 AM, Matus UHLAR - fantomas wrote:
</I>&gt;&gt;<i> David, note that requiring browsers to connect to your proxy over encrypted
</I>&gt;&gt;<i> (https) connection, and then decrypting tunnels to real server will lower
</I>&gt;&gt;<i> the clients' security
</I>&gt;<i>
</I>&gt;<i>A proper SslBump implementation for HTTPS proxy will not be &quot;decrypting
</I>&gt;<i>tunnels to real server&quot;. The security of such an implementation will be
</I>&gt;<i>the same as of SslBump supported today (plus the additional protections
</I>&gt;<i>offered by securing the browser-proxy communication).
</I>
If David wants to ssl-bump the traffic inside the HTTPS tunel (and I from
Davis's request I believe he wants to do that), it means that the
communication between browser and server has to be decrypted on squid, squid
will talk to server using HTTPS and create HTTPS endpoint to the client that
provides data, which means:

- squid will see the communication between browser and server
  (which is what HTTPS is designed to avoid)
- squid will need to dynamically creste certificated for sites it bumps
  using local CA
- clients will need to install the CA as trusted.

This is exactly what SSL Bump is about. 

My point is that David wants to provide &quot;secure&quot; proxy which may compromise
the security instead by bumping connections.

I am not objecting against doing it, but I want to note that whole point of
HTTPS (where the &quot;S&quot; means secure) is that noone in the middle sees what is
the content of communication between client and server.

-- 
Matus UHLAR - fantomas, <A HREF="https://lists.squid-cache.org/listinfo/squid-users">uhlar at fantomas.sk</A> ; <A HREF="http://www.fantomas.sk/">http://www.fantomas.sk/</A>
Warning: I wish NOT to receive e-mail advertising to this address.
Varovanie: na tuto adresu chcem NEDOSTAVAT akukolvek reklamnu postu.
On the other hand, you have different fingers.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022136.html">[squid-users] squid 4.10: ssl-bump on https_port requires tproxy/intercept which is missing in secure proxy method
</A></li>
	<LI>Next message (by thread): <A HREF="022137.html">[squid-users] squid 4.10: ssl-bump on https_port requires tproxy/intercept which is missing in secure proxy method
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22131">[ date ]</a>
              <a href="thread.html#22131">[ thread ]</a>
              <a href="subject.html#22131">[ subject ]</a>
              <a href="author.html#22131">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
