<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Bypass squid using iptables
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Bypass%20squid%20using%20iptables&In-Reply-To=%3C915a225e-022f-70a1-d48a-cbdcd2b3b478%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022138.html">
   <LINK REL="Next"  HREF="022171.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Bypass squid using iptables</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Bypass%20squid%20using%20iptables&In-Reply-To=%3C915a225e-022f-70a1-d48a-cbdcd2b3b478%40treenet.co.nz%3E"
       TITLE="[squid-users] Bypass squid using iptables">squid3 at treenet.co.nz
       </A><BR>
    <I>Mon May 25 06:54:43 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022138.html">[squid-users] Bypass squid using iptables
</A></li>
        <LI>Next message (by thread): <A HREF="022171.html">[squid-users] Bypass squid using iptables
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22163">[ date ]</a>
              <a href="thread.html#22163">[ thread ]</a>
              <a href="subject.html#22163">[ subject ]</a>
              <a href="author.html#22163">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 21/05/20 3:49 am, Ben Goz wrote:
&gt;<i> B.H.
</I>&gt;<i> 
</I>&gt;<i> I'm using squid with c-icap module for specific content filtering. I
</I>&gt;<i> configured squid with ssl bump so website with WSS won't work on it as
</I>&gt;<i> mentioned on squid documentation. So for such URLs (with WSS) I need
</I>&gt;<i> bypassing squid. I read in some posts that squid doesn't fully supports
</I>&gt;<i> bypassing URLs and best way is to bypasses it via iptables.
</I>&gt;<i> 
</I>&gt;<i> Eventually I redirects browser traffic to my proxy machine using local
</I>&gt;<i> machine proxy settings, and Its redirects traffic to my machine with IP
</I>&gt;<i> x.x.x.x port 3128.
</I>&gt;<i> 
</I>&gt;<i> If I want to use the conservative iptables bypassing how should I config
</I>&gt;<i> my machine? and how iptables rules should looks like?
</I>&gt;<i> 
</I>
Since you are redirecting the traffic to Squid in the first place. All
you have to do is *not* redirect the relevant traffic. See your firewall
software documentation on how to configure that.


The hard part is figuring out which traffic you want the proxy to
service, and what to bypass given only a TCP SYN packet.


Be aware that once a TCP SYN+ACK packet is delivered to accept the
connection Squid *has* to service that TCP connection in its entirety.
Such 'service' may mean terminating it without any traffic, tunneling it
elsewhere, or full processing of the traffic.
 Either way Squid is the agent servicing it. You cannot have iptables
suddenly divert packets to other software mid-stream.


HTH
Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022138.html">[squid-users] Bypass squid using iptables
</A></li>
	<LI>Next message (by thread): <A HREF="022171.html">[squid-users] Bypass squid using iptables
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22163">[ date ]</a>
              <a href="thread.html#22163">[ thread ]</a>
              <a href="subject.html#22163">[ subject ]</a>
              <a href="author.html#22163">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
