<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid configuration with c-icap
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20configuration%20with%20c-icap&In-Reply-To=%3Cad26c2e3-7ffe-cbb7-b525-b8a22ec0d20b%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022165.html">
   <LINK REL="Next"  HREF="022166.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid configuration with c-icap</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20configuration%20with%20c-icap&In-Reply-To=%3Cad26c2e3-7ffe-cbb7-b525-b8a22ec0d20b%40treenet.co.nz%3E"
       TITLE="[squid-users] squid configuration with c-icap">squid3 at treenet.co.nz
       </A><BR>
    <I>Mon May 25 09:26:11 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022165.html">[squid-users] squid configuration with c-icap
</A></li>
        <LI>Next message (by thread): <A HREF="022166.html">[squid-users] Squid cache with SSL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22168">[ date ]</a>
              <a href="thread.html#22168">[ thread ]</a>
              <a href="subject.html#22168">[ subject ]</a>
              <a href="author.html#22168">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 25/05/20 7:14 pm, Amiq Nahas wrote:
&gt;<i> Hi Guys,
</I>&gt;<i> 
</I>&gt;<i> At this point, I have got squid installed on my system. I think it is
</I>&gt;<i> working fine since I can browse the internet by adding a manual proxy
</I>&gt;<i> in firefox at localhost:3128.
</I>&gt;<i> 
</I>&gt;<i> What I want now is to configure squid such that it passes the request
</I>&gt;<i> to c-icap. Something like mentioned in this image
</I>&gt;<i> <A HREF="https://postimg.cc/qgsfRbWc">https://postimg.cc/qgsfRbWc</A>
</I>&gt;<i> 
</I>&gt;<i> To elaborate, I want to run a squid proxy such that every time the
</I>&gt;<i> browser or any other application on a system makes request to a url,
</I>&gt;<i> the squid proxy receives it. Then, squid sends it to the c-icap
</I>&gt;<i> server. On the c-icap server there would be a custom module (C
</I>&gt;<i> program) which takes the url as the input and the custom module will
</I>&gt;<i> decide whether the url should be allowed or not.
</I>
&gt;<i>From that API description there is no need for ICAP which is a very
</I>processing-expensive system.

A simple external ACL helper can perform exactly what you describe far
more efficiently.

Like so:

 external_acl_type urlChecker %&gt;ru /path/to/helper
 acl urlCheck external urlChecker
 http_access deny !urlCheck


Useful documentation on the protocol the helper needs to communicate
with Squid can be found at:
 &lt;<A HREF="https://wiki.squid-cache.org/Features/AddonHelpers#Access_Control_.28ACL.29">https://wiki.squid-cache.org/Features/AddonHelpers#Access_Control_.28ACL.29</A>&gt;


&gt;<i> 
</I>&gt;<i> <A HREF="https://wiki.squid-cache.org/ConfigExamples/ContentAdaptation/C-ICAP">https://wiki.squid-cache.org/ConfigExamples/ContentAdaptation/C-ICAP</A>
</I>&gt;<i> The link above shows the configuration using squidclamav. I do not
</I>&gt;<i> want to use that.
</I>
Squid is just an ICAP client. What C-ICAP uses internally is irrelevant
to Squid. squidclamav is just a module people tend to ask for, so the
example shows it. The squid.conf rules will be the same or similar for
whatever your system has (assuming you stay with ICAP instead of moving
to external ACL for access control).

Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022165.html">[squid-users] squid configuration with c-icap
</A></li>
	<LI>Next message (by thread): <A HREF="022166.html">[squid-users] Squid cache with SSL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22168">[ date ]</a>
              <a href="thread.html#22168">[ thread ]</a>
              <a href="subject.html#22168">[ subject ]</a>
              <a href="author.html#22168">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
