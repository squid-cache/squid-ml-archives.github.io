<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] HTTPS_PORT AND SSL CERT
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20HTTPS_PORT%20AND%20SSL%20CERT&In-Reply-To=%3CPR2P264MB0894BA1216C861126843039AEBB00%40PR2P264MB0894.FRAP264.PROD.OUTLOOK.COM%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022178.html">
   <LINK REL="Next"  HREF="022180.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] HTTPS_PORT AND SSL CERT</H1>
    <B>Julien  TEHERY</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20HTTPS_PORT%20AND%20SSL%20CERT&In-Reply-To=%3CPR2P264MB0894BA1216C861126843039AEBB00%40PR2P264MB0894.FRAP264.PROD.OUTLOOK.COM%3E"
       TITLE="[squid-users] HTTPS_PORT AND SSL CERT">julien.tehery at mediactivegroup.com
       </A><BR>
    <I>Tue May 26 07:24:46 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022178.html">[squid-users] squid and c-icap configuration
</A></li>
        <LI>Next message (by thread): <A HREF="022180.html">[squid-users] HTTPS_PORT AND SSL CERT
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22179">[ date ]</a>
              <a href="thread.html#22179">[ thread ]</a>
              <a href="subject.html#22179">[ subject ]</a>
              <a href="author.html#22179">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi there,

I'm actually facing a problem with Squid 4.6-1 (Debian 10).
I'm using squid with https_port directive, using an SSL certficate ( a true one, not self signed)

Here is the simple setup:

https_port X.X.X.X:8443 tls-cert=/etc/squid/mywildcard.com.pem

The fact is that setup works for all firefox version using a proxy.pac file for HTTPS connexions to the squid server.
But for chrome this is quite different. Indeed chrome uses the system's proxy settings and i noticed that sometimes it would work and sometinles it would fail.
To make it work all the time i had to add my intermediate certificate (thawte) in the local store, so that means intermediate certificate has not been delivered by the squid server as it should.

The pem file in the above setup allreadycontains this (pem file done by concatenating  private key, cert, intermediate and root CA. I also tried the following syntax:

https_port X.X.X.X:8443 cert=/etc/squid/mywildcard..com.cer key=/etc/squid/mywildcard.com.key cafile=/etc/squid/mywildcard..com-intermediaire.txt

but each time i try to see with openssl client if my intermediate is delivered, it's not
I use &quot;openssl s_client -showcerts -connect myproxy.com:8443&quot;

If i do the same thing on an apache server with the same certificate files i can see both certificate and intermediate. Why squid isn't able to show it, did i miss something ?


Thanks for your help
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20200526/c5bcd368/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20200526/c5bcd368/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022178.html">[squid-users] squid and c-icap configuration
</A></li>
	<LI>Next message (by thread): <A HREF="022180.html">[squid-users] HTTPS_PORT AND SSL CERT
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22179">[ date ]</a>
              <a href="thread.html#22179">[ thread ]</a>
              <a href="subject.html#22179">[ subject ]</a>
              <a href="author.html#22179">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
