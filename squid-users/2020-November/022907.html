<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid kerberos auth, acl note group
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20kerberos%20auth%2C%20acl%20note%20group&In-Reply-To=%3C001101d6b2ac%2439543fb0%24abfcbf10%24%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022906.html">
   <LINK REL="Next"  HREF="022908.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid kerberos auth, acl note group</H1>
    <B>Eliezer Croitor</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20kerberos%20auth%2C%20acl%20note%20group&In-Reply-To=%3C001101d6b2ac%2439543fb0%24abfcbf10%24%40gmail.com%3E"
       TITLE="[squid-users] squid kerberos auth, acl note group">ngtech1ltd at gmail.com
       </A><BR>
    <I>Wed Nov  4 13:13:00 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022906.html">[squid-users] allow certian user ips to access only 2 domains and disallow everything
</A></li>
        <LI>Next message (by thread): <A HREF="022908.html">[squid-users] squid kerberos auth, acl note group
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22907">[ date ]</a>
              <a href="thread.html#22907">[ thread ]</a>
              <a href="subject.html#22907">[ subject ]</a>
              <a href="author.html#22907">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Klaus,

I tried to follow the thread and understand what went wrong and how it was fixed,
and I didn't manage to understand. (Maybe I am missing some emails in the thread)

Can you please clear out what was done to resolve this issue?

Thanks,
Eliezer

----
Eliezer Croitoru
Tech Support
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>

-----Original Message-----
From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; On Behalf Of Klaus Brandl
Sent: Monday, July 27, 2020 7:36 PM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] squid kerberos auth, acl note group

Hi Markus and Amos,

thanks for your answers, it is working now, after the group was deleted and 
created new. Most likely it was no security object...

Regards

On Saturday 25 July 2020 16:43:13 Markus Moeller wrote:
&gt;<i> Hi Klaus,
</I>&gt;<i> 
</I>&gt;<i>     Is the group you added a security group ?  Only security groups are part
</I>&gt;<i> of the Kerberos ticket.  Which authorisation helper do you use or is this
</I>&gt;<i> just based on the auth helper output ?
</I>&gt;<i> 
</I>&gt;<i>     What do you see on the client ?  e.g. in powershell run whoami /groups
</I>&gt;<i> 
</I>&gt;<i>     Did you clear the client Kerberos cache e.g. by login out and in again
</I>&gt;<i> or use klist purge ?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Markus
</I>&gt;<i> 
</I>&gt;<i> &quot;Amos Jeffries&quot;  wrote in message
</I>&gt;<i> news:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">704e36b3-4cd8-611c-0643-231c02045db6 at treenet.co.nz...</A>
</I>&gt;<i> 
</I>&gt;<i> On 25/07/20 2:48 am, Klaus Brandl wrote:
</I>&gt;<i> &gt; sorry, i did not found this script, and the binary is not available on our
</I>&gt;<i> &gt; product, because i'm no developer...
</I>&gt;<i> 
</I>&gt;<i> Darn. Okay that hinders testing a bit.
</I>&gt;<i> 
</I>&gt;<i> &gt; But i think, we have a caching problem here, i found out, that the group
</I>&gt;<i> &gt; informations are only updated on a squid reconfigure.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; And also the acl note group ... seems to be cached as long as squid is
</I>&gt;<i> &gt; restarted completely. I removed the configured group from the user, but i
</I>&gt;<i> &gt; could
</I>&gt;<i> &gt; see this group still maching in the cache.log, also after a reconfigure,
</I>&gt;<i> &gt; when
</I>&gt;<i> &gt; the auth_helper does not tell about this group any more.
</I>&gt;<i> 
</I>&gt;<i> The groups are attached to credentials which are attached to the TCP
</I>&gt;<i> connection (TTL only as long as the connection is open) and a token
</I>&gt;<i> replay cache for up to authenticate_ttl directive time (default 1 hour).
</I>&gt;<i> 
</I>&gt;<i> Setting that TTL to something very short, eg:
</I>&gt;<i> 
</I>&gt;<i>   authenticate_ttl 10 seconds
</I>&gt;<i> 
</I>&gt;<i> ... and disabling connection keep-alive:
</I>&gt;<i> 
</I>&gt;<i>   client_persistent_connections off
</I>&gt;<i> 
</I>&gt;<i> ... should work around the cache for testing. At least on HTTP traffic.
</I>&gt;<i> HTTPS traffic goes through the proxy as a single tunnel request - so the
</I>&gt;<i> entire HTTPS session is just one request/response pair to Squid.
</I>&gt;<i> 
</I>&gt;<i> Amos
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
Klaus

---

genua GmbH
Domagkstrasse 7, 85551 Kirchheim bei Muenchen
tel +49 89 991950-0, fax -999, www.genua.de

Geschaeftsfuehrer: Matthias Ochs, Marc Tesch
Amtsgericht Muenchen HRB 98238
genua ist ein Unternehmen der Bundesdruckerei-Gruppe.
_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022906.html">[squid-users] allow certian user ips to access only 2 domains and disallow everything
</A></li>
	<LI>Next message (by thread): <A HREF="022908.html">[squid-users] squid kerberos auth, acl note group
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22907">[ date ]</a>
              <a href="thread.html#22907">[ thread ]</a>
              <a href="subject.html#22907">[ subject ]</a>
              <a href="author.html#22907">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
