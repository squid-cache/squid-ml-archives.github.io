<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid kerberos auth, acl note group
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20kerberos%20auth%2C%20acl%20note%20group&In-Reply-To=%3C003901d6b42a%24f85d0480%24e9170d80%24%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022908.html">
   <LINK REL="Next"  HREF="022912.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid kerberos auth, acl note group</H1>
    <B>Eliezer Croitor</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20kerberos%20auth%2C%20acl%20note%20group&In-Reply-To=%3C003901d6b42a%24f85d0480%24e9170d80%24%40gmail.com%3E"
       TITLE="[squid-users] squid kerberos auth, acl note group">ngtech1ltd at gmail.com
       </A><BR>
    <I>Fri Nov  6 10:52:44 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022908.html">[squid-users] squid kerberos auth, acl note group
</A></li>
        <LI>Next message (by thread): <A HREF="022912.html">[squid-users] issues with sslbump and &quot;Host header forgery detected&quot; warnings
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22909">[ date ]</a>
              <a href="thread.html#22909">[ thread ]</a>
              <a href="subject.html#22909">[ subject ]</a>
              <a href="author.html#22909">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks.

----
Eliezer Croitoru
Tech Support
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>

-----Original Message-----
From: Klaus Brandl &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">klaus_brandl at genua.de</A>&gt; 
Sent: Thursday, November 5, 2020 11:21 AM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>
Cc: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] squid kerberos auth, acl note group

Hi Eliezer,

we have deleted the group in active directory and created it again.
Not sure, if this was the real problem, because this was done by our
customer.

But we have already this caching problem, if membership of this group
is changed in AD, squid has to be completely restartet to take effekt.

Regards

Klaus

Am Mittwoch, den 04.11.2020, 15:13 +0200 schrieb Eliezer Croitor:
&gt;<i> Hey Klaus,
</I>&gt;<i> 
</I>&gt;<i> I tried to follow the thread and understand what went wrong and how
</I>&gt;<i> it was fixed,
</I>&gt;<i> and I didn't manage to understand. (Maybe I am missing some emails in
</I>&gt;<i> the thread)
</I>&gt;<i> 
</I>&gt;<i> Can you please clear out what was done to resolve this issue?
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> Eliezer
</I>&gt;<i> 
</I>&gt;<i> ----
</I>&gt;<i> Eliezer Croitoru
</I>&gt;<i> Tech Support
</I>&gt;<i> Mobile: +972-5-28704261
</I>&gt;<i> Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>
</I>&gt;<i> 
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; On
</I>&gt;<i> Behalf Of Klaus Brandl
</I>&gt;<i> Sent: Monday, July 27, 2020 7:36 PM
</I>&gt;<i> To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> Subject: Re: [squid-users] squid kerberos auth, acl note group
</I>&gt;<i> 
</I>&gt;<i> Hi Markus and Amos,
</I>&gt;<i> 
</I>&gt;<i> thanks for your answers, it is working now, after the group was
</I>&gt;<i> deleted and 
</I>&gt;<i> created new. Most likely it was no security object...
</I>&gt;<i> 
</I>&gt;<i> Regards
</I>&gt;<i> 
</I>&gt;<i> On Saturday 25 July 2020 16:43:13 Markus Moeller wrote:
</I>&gt;<i> &gt; Hi Klaus,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;     Is the group you added a security group ?  Only security groups
</I>&gt;<i> &gt; are part
</I>&gt;<i> &gt; of the Kerberos ticket.  Which authorisation helper do you use or
</I>&gt;<i> &gt; is this
</I>&gt;<i> &gt; just based on the auth helper output ?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;     What do you see on the client ?  e.g. in powershell run whoami
</I>&gt;<i> &gt; /groups
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;     Did you clear the client Kerberos cache e.g. by login out and
</I>&gt;<i> &gt; in again
</I>&gt;<i> &gt; or use klist purge ?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Markus
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &quot;Amos Jeffries&quot;  wrote in message
</I>&gt;<i> &gt; news:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">704e36b3-4cd8-611c-0643-231c02045db6 at treenet.co.nz...</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; On 25/07/20 2:48 am, Klaus Brandl wrote:
</I>&gt;<i> &gt; &gt; sorry, i did not found this script, and the binary is not
</I>&gt;<i> &gt; &gt; available on our
</I>&gt;<i> &gt; &gt; product, because i'm no developer...
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Darn. Okay that hinders testing a bit.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &gt; But i think, we have a caching problem here, i found out, that
</I>&gt;<i> &gt; &gt; the group
</I>&gt;<i> &gt; &gt; informations are only updated on a squid reconfigure.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; And also the acl note group ... seems to be cached as long as
</I>&gt;<i> &gt; &gt; squid is
</I>&gt;<i> &gt; &gt; restarted completely. I removed the configured group from the
</I>&gt;<i> &gt; &gt; user, but i
</I>&gt;<i> &gt; &gt; could
</I>&gt;<i> &gt; &gt; see this group still maching in the cache.log, also after a
</I>&gt;<i> &gt; &gt; reconfigure,
</I>&gt;<i> &gt; &gt; when
</I>&gt;<i> &gt; &gt; the auth_helper does not tell about this group any more.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; The groups are attached to credentials which are attached to the
</I>&gt;<i> &gt; TCP
</I>&gt;<i> &gt; connection (TTL only as long as the connection is open) and a token
</I>&gt;<i> &gt; replay cache for up to authenticate_ttl directive time (default 1
</I>&gt;<i> &gt; hour).
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Setting that TTL to something very short, eg:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   authenticate_ttl 10 seconds
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; ... and disabling connection keep-alive:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;   client_persistent_connections off
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; ... should work around the cache for testing. At least on HTTP
</I>&gt;<i> &gt; traffic.
</I>&gt;<i> &gt; HTTPS traffic goes through the proxy as a single tunnel request -
</I>&gt;<i> &gt; so the
</I>&gt;<i> &gt; entire HTTPS session is just one request/response pair to Squid.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Amos
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; squid-users mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> &gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; squid-users mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> &gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> 
</I>&gt;<i> Klaus
</I>&gt;<i> 
</I>&gt;<i> ---
</I>&gt;<i> 
</I>&gt;<i> genua GmbH
</I>&gt;<i> Domagkstrasse 7, 85551 Kirchheim bei Muenchen
</I>&gt;<i> tel +49 89 991950-0, fax -999, www.genua.de
</I>&gt;<i> 
</I>&gt;<i> Geschaeftsfuehrer: Matthias Ochs, Marc Tesch
</I>&gt;<i> Amtsgericht Muenchen HRB 98238
</I>&gt;<i> genua ist ein Unternehmen der Bundesdruckerei-Gruppe.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022908.html">[squid-users] squid kerberos auth, acl note group
</A></li>
	<LI>Next message (by thread): <A HREF="022912.html">[squid-users] issues with sslbump and &quot;Host header forgery detected&quot; warnings
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22909">[ date ]</a>
              <a href="thread.html#22909">[ thread ]</a>
              <a href="subject.html#22909">[ subject ]</a>
              <a href="author.html#22909">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
