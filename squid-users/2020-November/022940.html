<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Gather POST request on HTTPS traffic?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Gather%20POST%20request%20on%20HTTPS%20traffic%3F&In-Reply-To=%3CCC8E1C68-3B50-43C5-A455-8B9DF3AEF1A8%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022937.html">
   <LINK REL="Next"  HREF="022941.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Gather POST request on HTTPS traffic?</H1>
    <B>roee klinger</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Gather%20POST%20request%20on%20HTTPS%20traffic%3F&In-Reply-To=%3CCC8E1C68-3B50-43C5-A455-8B9DF3AEF1A8%40gmail.com%3E"
       TITLE="[squid-users] Gather POST request on HTTPS traffic?">roeeklinger60 at gmail.com
       </A><BR>
    <I>Tue Nov 17 12:41:53 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022937.html">[squid-users] Gather POST request on HTTPS traffic?
</A></li>
        <LI>Next message (by thread): <A HREF="022941.html">[squid-users] Gather POST request on HTTPS traffic?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22940">[ date ]</a>
              <a href="thread.html#22940">[ thread ]</a>
              <a href="subject.html#22940">[ subject ]</a>
              <a href="author.html#22940">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Amos,

Thanks for your response, I will try to implement this today and check if I can get the data I am looking for.

I do however have a few questions regarding this approach:
1. If I understand the docu currently, then the server is getting a response which is identical to the client, meaning the server should not detect anything unusual? The last thing I want is for Instagram to detect something unusual and ban our clients Instagram accounts.
2. You said I will need to figure out a way to identify accounts, in Chrome the requests contain the info for both the accounts performing the action and the account receiving the action, should I see the same in these requests?
3. By &#8220;personal&#8221; data we are referring to data generated by our clients accounts, which are paying and willing for us to collect it to improve our service, of course it will also contain data on the account which they are performing the actions on, but this is not something that is not visible on the Instagram app, is there anything else I should be aware of that might be a privacy issue?
4. While this is great for my use case, is this something I should be aware of when using outside proxies on our machine? Can any proxy service simply decrypt and log our personal data? Seems like a security  vulnerability I should be aware of.

Thanks again.

&gt;<i> On Nov 17, 2020, at 02:17, Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> &#65279;On 17/11/20 12:14 pm, roee klinger wrote:
</I>&gt;&gt;<i> Hello everyone,
</I>&gt;&gt;<i> I work at a digital agency that has quite a few machines that are managing some Instagram accounts, they are all running in the same LAN and we are using Squid as a proxy to log and analyze some usage statistics and to make sure the machines are only used for Instagram.
</I>&gt;&gt;<i> We had an idea to use Squid to capture the POST data of users on the proxy level, for example, likes, follows, comments, etc so we can log and analyze everything in a convenient central way, so we can analyze it and even send out clients a monthly report of all the actions their accounts made (who they followed, what they liked, etc).
</I>&gt;&gt;<i> I can easily see the requests that I want to capture inside the &quot;network&quot; tab in Chrome but the problem is that Instagram uses HTTPS, so I can't seem to be able to capture this data.
</I>&gt;&gt;<i> Is there any way for me to log this data via Squid using the POST data or any other way?
</I>&gt;<i> 
</I>&gt;<i> Access to HTTPS transactions for a domain you do not own requires the SSL-Bump feature to decrypt (&quot;bump&quot;) the TLS layer.
</I>&gt;<i> see &lt;<A HREF="https://wiki.squid-cache.org/Features/SslPeekAndSplice">https://wiki.squid-cache.org/Features/SslPeekAndSplice</A>&gt;.
</I>&gt;<i> 
</I>&gt;<i> You could use cache.log with &quot;debug_options ALL,1 11,2&quot; configured to log the transactions. However an ICAP service or eCAP module that does both the record and analyze for you is probably better.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> Note: We are aware of the legal issues, all machines connected to the network are company property, and all the accounts are client accounts that allow us to gather statistics. No personal account data will be gathered.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Please be aware:
</I>&gt;<i>  That statement conflicts with the stated purpose(s) of your plan.
</I>&gt;<i> 
</I>&gt;<i> Personal data *will* be part of the messages you are decrypting and recording for analysis. Further, to perform targeted reports such as described you must also associate the data with accounts somehow.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Amos
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20201117/44eb8227/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20201117/44eb8227/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022937.html">[squid-users] Gather POST request on HTTPS traffic?
</A></li>
	<LI>Next message (by thread): <A HREF="022941.html">[squid-users] Gather POST request on HTTPS traffic?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22940">[ date ]</a>
              <a href="thread.html#22940">[ thread ]</a>
              <a href="subject.html#22940">[ subject ]</a>
              <a href="author.html#22940">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
