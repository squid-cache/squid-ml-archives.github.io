<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] found out why my &quot;rep_mime_type&quot; wasnt working
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20found%20out%20why%20my%20%22rep_mime_type%22%20wasnt%20working&In-Reply-To=%3CCAGU_CiJbmyQ_Dv5yogncQ0EsFiEraUXPp66oiZNG6e-U-WhCNQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022957.html">
   <LINK REL="Next"  HREF="022959.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] found out why my &quot;rep_mime_type&quot; wasnt working</H1>
    <B>robert k Wild</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20found%20out%20why%20my%20%22rep_mime_type%22%20wasnt%20working&In-Reply-To=%3CCAGU_CiJbmyQ_Dv5yogncQ0EsFiEraUXPp66oiZNG6e-U-WhCNQ%40mail.gmail.com%3E"
       TITLE="[squid-users] found out why my &quot;rep_mime_type&quot; wasnt working">robertkwild at gmail.com
       </A><BR>
    <I>Thu Nov 26 14:05:58 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022957.html">[squid-users] squid won't cache some files with errors &quot; storeCreate: no swapdirs for...&quot;
</A></li>
        <LI>Next message (by thread): <A HREF="022959.html">[squid-users] Debugging a slow Squid?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22958">[ date ]</a>
              <a href="thread.html#22958">[ thread ]</a>
              <a href="subject.html#22958">[ subject ]</a>
              <a href="author.html#22958">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>i finally figured out why my blocking of mime types wasn't working

this is my good code now

#allow special URL paths
acl special_url url_regex &quot;/usr/local/squid/etc/urlspecial.txt&quot;
#
#deny MIME types
acl mimetype rep_mime_type &quot;/usr/local/squid/etc/mimedeny.txt&quot;
#
http_reply_access allow special_url
http_reply_access deny mimetype

in my mime deny its

application/octet-stream
application/x-msi
application/zip
application/x-7z-compressed
application/vnd.ms-cab-compressed

but in my url specials

<A HREF="http://ccmdl.adobe.com/AdobeProducts/KCCC/1/win64/packages/">http://ccmdl.adobe.com/AdobeProducts/KCCC/1/win64/packages/</A>

it contains a mime type that im blocking but now it passes it through as i
have put an allow specials before the deny mime types

and when i go to an adobe website to download an exe ie adobe reader dc, it
detects it and blocks it as its an exe or octet stream

but then this was in my code aswell

#SSL Interception
acl DiscoverSNIHost at_step SslBump1
acl NoSSLIntercept ssl::server_name_regex -i
&quot;/usr/local/squid/etc/interceptssl.txt&quot;
ssl_bump splice NoSSLIntercept
ssl_bump peek DiscoverSNIHost
ssl_bump bump all

and in my &quot;interceptssl.txt&quot; i stupidly put

.adobe.com

and this was just allowing me to download the exe acrobat adobe reader, i
was going nuts over this but i finally figured it out

thanks all

-- 
Regards,

Robert K Wild.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20201126/272f73e8/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20201126/272f73e8/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022957.html">[squid-users] squid won't cache some files with errors &quot; storeCreate: no swapdirs for...&quot;
</A></li>
	<LI>Next message (by thread): <A HREF="022959.html">[squid-users] Debugging a slow Squid?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22958">[ date ]</a>
              <a href="thread.html#22958">[ thread ]</a>
              <a href="subject.html#22958">[ subject ]</a>
              <a href="author.html#22958">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
