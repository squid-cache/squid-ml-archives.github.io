<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] I want to know the concerns of load testing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20I%20want%20to%20know%20the%20concerns%20of%20load%20testing&In-Reply-To=%3Ca05436c2-bcf4-1a9f-d47d-782fd1ecaea2%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022794.html">
   <LINK REL="Next"  HREF="022765.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] I want to know the concerns of load testing</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20I%20want%20to%20know%20the%20concerns%20of%20load%20testing&In-Reply-To=%3Ca05436c2-bcf4-1a9f-d47d-782fd1ecaea2%40measurement-factory.com%3E"
       TITLE="[squid-users] I want to know the concerns of load testing">rousskov at measurement-factory.com
       </A><BR>
    <I>Fri Oct  9 14:10:04 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022794.html">[squid-users] [ext] Re: I want to know the concerns of load testing
</A></li>
        <LI>Next message (by thread): <A HREF="022765.html">[squid-users] I want to know the concerns of load testing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22796">[ date ]</a>
              <a href="thread.html#22796">[ thread ]</a>
              <a href="subject.html#22796">[ subject ]</a>
              <a href="author.html#22796">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/9/20 8:59 AM, m k wrote:

&gt;<i> The CPU is not 100%, but the number of simultaneous connections does not
</I>&gt;<i> exceed 450. 
</I>
The average number of active concurrent connections is offered request
rate multiplied by mean response time. Thus, if you want to see more
active concurrent connections, you have to increase request rate and/or
delay packets/origin responses, but be aware that this metric is a
derivative, and playing with derivatives often leads to misleading results.

I hope others will answer your other questions about socks and FIN_WAIT.
You might also be able to find answers to those questions in the mailing
list archive.


HTH,

Alex.


&gt;<i> 2020&#24180;10&#26376;2&#26085;(&#37329;) 23:09 Alex Rousskov:
</I>&gt;<i> 
</I>&gt;<i>     On 10/2/20 1:26 AM, m k wrote:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     &gt; Is there any case where Squid is used by a company that is used
</I>&gt;<i> 
</I>&gt;<i>     &gt; by more than 30,000 users?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     Yes, some Squid (hierarchies) probably serve millions of users. I know
</I>&gt;<i> 
</I>&gt;<i>     several companies using Squids for serving large user populations, but I
</I>&gt;<i> 
</I>&gt;<i>     cannot name customer names.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     &gt; What are the important point when using the
</I>&gt;<i> 
</I>&gt;<i>     &gt; &quot;wokers&quot; setting for multiple processes?&#160;&#160;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     For a few starting points, please see
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     *
</I>&gt;<i> 
</I>&gt;<i>     <A HREF="https://wiki.squid-cache.org/Features/SmpScale#How_to_configure_SMP_Squid_for_top_performance.3F">https://wiki.squid-cache.org/Features/SmpScale#How_to_configure_SMP_Squid_for_top_performance.3F</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     * the recently added &quot;worker-queues&quot; configuration option:
</I>&gt;<i> 
</I>&gt;<i>     &#160; <A HREF="https://github.com/squid-cache/squid/pull/369">https://github.com/squid-cache/squid/pull/369</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     HTH,
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     Alex.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     &gt; 2020&#24180;10&#26376;2&#26085;(&#37329;) 11:15 m k:
</I>&gt;<i> 
</I>&gt;<i>     &gt;
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;Hello,
</I>&gt;<i> 
</I>&gt;<i>     &gt;
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;I'm planning a proxy renewal for a company with 45k clients.
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;I'm looking at the performance of a single Squid to determine the
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;number of Squids.
</I>&gt;<i> 
</I>&gt;<i>     &gt;
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;Environment: Virtual (OpenStack)
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;OS: CentOS8.1
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;CPU: 4 cores
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;MEM: 8GB
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;DISK: SATA30GB / 100GB
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;Squid 4.4
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;&#160;SSL Bump
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;&#160;Blacklist: 1,700k
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;&#160;auth: NTLM
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;&#160;cache: 4GB
</I>&gt;<i> 
</I>&gt;<i>     &gt;
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;In an environment with authentication disabled and SSL
</I>&gt;<i>     decoding enabled
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;A load test was performed with Jmeter.
</I>&gt;<i> 
</I>&gt;<i>     &gt;
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;Result: CPU high load (100rps-1000rps: CPU Usage 80-90%)
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;(Confirm with top command)
</I>&gt;<i> 
</I>&gt;<i>     &gt;
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;Added multi-core support settings to squid.conf
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;&quot;workers 4&quot;
</I>&gt;<i> 
</I>&gt;<i>     &gt;
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;A load test with Jmeter was performed again.
</I>&gt;<i> 
</I>&gt;<i>     &gt;
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;Result: CPU load is distributed to 4 cores (CPU Usage 20-40%)
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;(Confirm with top command)
</I>&gt;<i> 
</I>&gt;<i>     &gt;
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;Question
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;1. 1. How much will CPU Usage increase if NTLM authentication is
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;enabled?
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;2. 2. Are there any concerns other than CPU Usage in Squid?
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;3. 3. When I enabled the cache in this test, the CPU Usage
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;decreased, but in general, does the Squid cache increase the
</I>&gt;<i>     CPU Usage?
</I>&gt;<i> 
</I>&gt;<i>     &gt;
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;Thank you,
</I>&gt;<i> 
</I>&gt;<i>     &gt;&#160; &#160; &#160;Kitamura
</I>&gt;<i> 
</I>&gt;<i>     &gt;
</I>&gt;<i> 
</I>&gt;<i>     &gt;
</I>&gt;<i> 
</I>&gt;<i>     &gt; _______________________________________________
</I>&gt;<i> 
</I>&gt;<i>     &gt; squid-users mailing list
</I>&gt;<i> 
</I>&gt;<i>     &gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i> 
</I>&gt;<i>     &gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> 
</I>&gt;<i>     &gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022794.html">[squid-users] [ext] Re: I want to know the concerns of load testing
</A></li>
	<LI>Next message (by thread): <A HREF="022765.html">[squid-users] I want to know the concerns of load testing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22796">[ date ]</a>
              <a href="thread.html#22796">[ thread ]</a>
              <a href="subject.html#22796">[ subject ]</a>
              <a href="author.html#22796">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
