<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] websockets through Squid
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20websockets%20through%20Squid&In-Reply-To=%3C500754459.961112.1602770889399%40mail.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022818.html">
   <LINK REL="Next"  HREF="022832.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] websockets through Squid</H1>
    <B>Vieri</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20websockets%20through%20Squid&In-Reply-To=%3C500754459.961112.1602770889399%40mail.yahoo.com%3E"
       TITLE="[squid-users] websockets through Squid">rentorbuy at yahoo.com
       </A><BR>
    <I>Thu Oct 15 14:08:09 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022818.html">[squid-users] websockets through Squid
</A></li>
        <LI>Next message (by thread): <A HREF="022832.html">[squid-users] websockets through Squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22829">[ date ]</a>
              <a href="thread.html#22829">[ thread ]</a>
              <a href="subject.html#22829">[ subject ]</a>
              <a href="author.html#22829">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE> On Tuesday, October 13, 2020, 6:14:18 PM GMT+2, Alex Rousskov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt; wrote: 

&gt;<i> You should probably follow up with Gentoo folks responsible for this Squid customization.
</I>
Squid 5 now builds and installs perfectly on Gentoo Linux with a few custom changes to the distro's package installation script. I hope the devs will include these changes so Squid 5 can be readily available to everyone.
BTW it &quot;makes&quot; in parallel fine with -jx where x &gt; 1, so no issues there either.

So, coming back to the original post: websockets.

I added this to Squid 5:

http_upgrade_request_protocols OTHER allow all

Am I right if I state that this should allow any protocol not just WebSockets?
In other words, I do not need to be specific with 'http_upgrade_request_protocols WebSocket allow all' unless I want to, right?

Unfortunately, after reloading Squid 5 the client browser still states the same:

The connection to <A HREF="wss://ed1lncb65702.webex.com/direct?type=websocket&amp;dtype=binary&amp;rand=1602769907574&amp;uuidtag=9E73C14G-1580-43B4-B8D4-91453FCF1939&amp;gatewayip=MY_IP_ADDR">wss://ed1lncb65702.webex.com/direct?type=websocket&amp;dtype=binary&amp;rand=1602769907574&amp;uuidtag=9E73C14G-1580-43B4-B8D4-91453FCF1939&amp;gatewayip=MY_IP_ADDR</A> was interrupted while the page was loading.

And in access.log I can see this:

[Thu Oct 15 15:52:27 2020].411&#160; 29846 10.215.144.48 TCP_TUNNEL/101 0 GET <A HREF="https://ed1lncb65702.webex.com/direct?">https://ed1lncb65702.webex.com/direct?</A> - ORIGINAL_DST/62.109.225.174 -
[Thu Oct 15 15:52:27 2020].831&#160;&#160;&#160; 125 10.215.144.48 NONE_NONE/000 0 CONNECT 62.109.225.174:443 - ORIGINAL_DST/62.109.225.174 -
[Thu Oct 15 15:52:28 2020].786&#160;&#160;&#160;&#160; 11 10.215.111.210 NONE_NONE_ABORTED/000 0 CONNECT 44.233.111.149:443 - HIER_NONE/- -
[Thu Oct 15 15:52:37 2020].414&#160; 29870 10.215.144.48 TCP_TUNNEL/101 0 GET <A HREF="https://ed1lncb65702.webex.com/direct?">https://ed1lncb65702.webex.com/direct?</A> - ORIGINAL_DST/62.109.225.174 -
[Thu Oct 15 15:52:37 2020].919&#160;&#160;&#160; 107 10.215.144.48 NONE_NONE/000 0 CONNECT 62.109.225.174:443 - ORIGINAL_DST/62.109.225.174 -

What does NONE_NONE/000 mean?

Where can I go from here?
What can I try to debug this further?

Vieri

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022818.html">[squid-users] websockets through Squid
</A></li>
	<LI>Next message (by thread): <A HREF="022832.html">[squid-users] websockets through Squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22829">[ date ]</a>
              <a href="thread.html#22829">[ thread ]</a>
              <a href="subject.html#22829">[ subject ]</a>
              <a href="author.html#22829">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
