<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] websockets through Squid
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20websockets%20through%20Squid&In-Reply-To=%3C3f7b01cd-f71c-6fb0-27bf-74fbda532384%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022840.html">
   <LINK REL="Next"  HREF="022848.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] websockets through Squid</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20websockets%20through%20Squid&In-Reply-To=%3C3f7b01cd-f71c-6fb0-27bf-74fbda532384%40measurement-factory.com%3E"
       TITLE="[squid-users] websockets through Squid">rousskov at measurement-factory.com
       </A><BR>
    <I>Sat Oct 17 20:36:45 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022840.html">[squid-users] websockets through Squid
</A></li>
        <LI>Next message (by thread): <A HREF="022848.html">[squid-users] websockets through Squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22845">[ date ]</a>
              <a href="thread.html#22845">[ thread ]</a>
              <a href="subject.html#22845">[ subject ]</a>
              <a href="author.html#22845">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/16/20 11:58 AM, Vieri wrote:

&gt;<i> I pinpointed one particular request that's failing:
</I>&gt;<i> 
</I>&gt;<i> 2020/10/16 16:56:37.250 kid1| 85,2| client_side_request.cc(745) clientAccessCheckDone: The request GET <A HREF="https://ed1lncb62601.webex.com/direct?type=websocket&amp;dtype=binary&amp;rand=1602860196950&amp;uuidtag=G7609603-81A2-4B8D-A1C0-C379CC9B12G9&amp;gatewayip=PUB_IPv4_ADDR_2">https://ed1lncb62601.webex.com/direct?type=websocket&amp;dtype=binary&amp;rand=1602860196950&amp;uuidtag=G7609603-81A2-4B8D-A1C0-C379CC9B12G9&amp;gatewayip=PUB_IPv4_ADDR_2</A> is ALLOWED; last ACL checked: all
</I>&gt;<i> 
</I>&gt;<i> It is in this log:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://drive.google.com/file/d/1OrB42Cvom2PNmV-dnfLVrnMY5IhJkcpS/view?usp=sharing">https://drive.google.com/file/d/1OrB42Cvom2PNmV-dnfLVrnMY5IhJkcpS/view?usp=sharing</A>
</I>
Thank you, that helped a lot!

I see that Squid decides that the client has closed the connection.
Squid propagates that connection closure to the server. Due to a Squid
bug (or my misunderstanding), cache.log does not contain enough details
to tell whether the client actually closed the connection in this case
and, if it did, whether it did so nicely or due to some TLS error.

I filed bug #5084 in hope to improve handling of this case. At the very
least, the log should categorize the closure, but it is also possible
that the client did not actually close the connection, and Squid is
completely mishandling the situation (in addition to being silent about
it). See <A HREF="https://bugs.squid-cache.org/show_bug.cgi?id=5084">https://bugs.squid-cache.org/show_bug.cgi?id=5084</A> for details.

I cannot volunteer to work on this further right now, but I hope this
triage will help another volunteer (or a paid contractor) to make
further progress.

<A HREF="https://wiki.squid-cache.org/SquidFaq/AboutSquid#How_to_add_a_new_Squid_feature.2C_enhance.2C_of_fix_something.3F">https://wiki.squid-cache.org/SquidFaq/AboutSquid#How_to_add_a_new_Squid_feature.2C_enhance.2C_of_fix_something.3F</A>

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022840.html">[squid-users] websockets through Squid
</A></li>
	<LI>Next message (by thread): <A HREF="022848.html">[squid-users] websockets through Squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22845">[ date ]</a>
              <a href="thread.html#22845">[ thread ]</a>
              <a href="subject.html#22845">[ subject ]</a>
              <a href="author.html#22845">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
