<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] sslbump https intercepted or tproxy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20sslbump%20https%20intercepted%20or%20tproxy&In-Reply-To=%3C2036280346.1069803.1603121945761%40mail.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022850.html">
   <LINK REL="Next"  HREF="022858.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] sslbump https intercepted or tproxy</H1>
    <B>Vieri</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20sslbump%20https%20intercepted%20or%20tproxy&In-Reply-To=%3C2036280346.1069803.1603121945761%40mail.yahoo.com%3E"
       TITLE="[squid-users] sslbump https intercepted or tproxy">rentorbuy at yahoo.com
       </A><BR>
    <I>Mon Oct 19 15:39:05 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022850.html">[squid-users] squid kerberos auth, acl note group
</A></li>
        <LI>Next message (by thread): <A HREF="022858.html">[squid-users] sslbump https intercepted or tproxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22851">[ date ]</a>
              <a href="thread.html#22851">[ thread ]</a>
              <a href="subject.html#22851">[ subject ]</a>
              <a href="author.html#22851">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

It's unclear to me if I can use TPROXY for HTTPS traffic.

If I divert traffic and use tproxy in the Linux kernel and then set this in squid:

https_port 3130 tproxy ssl-bump generate-host-certificates=on dynamic_cert_mem_cache_size=16MB cert=/etc/ssl/squid/proxyserver.pem

it seems to be working fine, just as if I were to REDIRECT https traffic and then use this in Squid:

https_port 3130 intercept ssl-bump generate-host-certificates=on dynamic_cert_mem_cache_size=16MB cert=/etc/ssl/squid/proxyserver.pem

So, does anyone know if it's not recommended / not supported to use tproxy with https traffic?
I'm asking because I don't see any issues with tproxy, with the added advantage of being able to route on the gateway per source IP addr. (in intercepted mode, the source is always Squid).

Are there any reasons for which one would not use TPROXY with HTTPS?

Vieri

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022850.html">[squid-users] squid kerberos auth, acl note group
</A></li>
	<LI>Next message (by thread): <A HREF="022858.html">[squid-users] sslbump https intercepted or tproxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22851">[ date ]</a>
              <a href="thread.html#22851">[ thread ]</a>
              <a href="subject.html#22851">[ subject ]</a>
              <a href="author.html#22851">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
