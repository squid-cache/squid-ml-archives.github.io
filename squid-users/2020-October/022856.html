<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid doesn't call helper
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20doesn%27t%20call%20helper&In-Reply-To=%3C71236fda-fd8a-6055-a287-7c2e60058f58%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022854.html">
   <LINK REL="Next"  HREF="022864.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid doesn't call helper</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20doesn%27t%20call%20helper&In-Reply-To=%3C71236fda-fd8a-6055-a287-7c2e60058f58%40treenet.co.nz%3E"
       TITLE="[squid-users] Squid doesn't call helper">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Oct 20 11:38:20 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022854.html">[squid-users] Squid doesn't call helper
</A></li>
        <LI>Next message (by thread): <A HREF="022864.html">[squid-users] Squid doesn't call helper
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22856">[ date ]</a>
              <a href="thread.html#22856">[ thread ]</a>
              <a href="subject.html#22856">[ subject ]</a>
              <a href="author.html#22856">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 20/10/20 6:18 pm, Kornexl, Anton wrote:
&gt;<i> Squid 4.10 on Ubuntu 20.04
</I>&gt;<i> 
</I>&gt;<i> &#160;
</I>&gt;<i> 
</I>&gt;<i> The configured program is started but not called (or the result not used)
</I>&gt;<i> 
</I>
Please check cache.log to find out which of those two very different
things is happening.

One means the ACL is not being checked or credentials not provided. The
other means credentials are invalid.

You may need to set this directive:
  debug_options 11,2 29,5 28,4

&gt;<i> The authentication window does not show up in the browser
</I>
That means the auth result was not deny.


&gt;<i> 
</I>&gt;<i> All request are denied because acl proxyuser doesn&#8217;t match
</I>&gt;<i> 
</I>
There is no deny line in your shown config using auth ACLs.


&gt;<i> The same config runs on squid 3.5.27 on Ubuntu 18.04 and squid 4.13 on
</I>&gt;<i> opensuse 4.13
</I>&gt;<i> 
</I>&gt;<i> &#160;
</I>&gt;<i> 
</I>&gt;<i> How can i debug this problem
</I>&gt;<i> 
</I>
Check cache.log with this directive set:
  debug_options 11,2 29,5 28,4


&gt;<i> Other helpers are also not called/used
</I>&gt;<i> 
</I>&gt;<i> &#160;
</I>
That strongly implies you have an ordering problem in your config file.
One early ACL allowing or denying traffic before any helpers get checked.


&gt;<i> 
</I>&gt;<i> http_access allow jufi1
</I>&gt;<i> 
</I>&gt;<i> http_access allow jufi1-6
</I>&gt;<i> 
</I>&gt;<i> http_access allow jufi2
</I>&gt;<i> 
</I>&gt;<i> http_access allow jufi2-6
</I>&gt;<i> 
</I>
Since they are all the same type, and used the same way at the same time
You can combine all those ACLs into one name.

&gt;<i> 
</I>&gt;<i> http_access allow proxyusers
</I>&gt;<i> 
</I>
Please try the recommended auth config:

  http_access deny !proxyusers
  http_access allow localnet



Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022854.html">[squid-users] Squid doesn't call helper
</A></li>
	<LI>Next message (by thread): <A HREF="022864.html">[squid-users] Squid doesn't call helper
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22856">[ date ]</a>
              <a href="thread.html#22856">[ thread ]</a>
              <a href="subject.html#22856">[ subject ]</a>
              <a href="author.html#22856">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
