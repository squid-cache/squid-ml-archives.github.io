<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Reverse proxying Exchange OWA wembail with SSL offloading - not working on IE/Chrome
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Reverse%20proxying%20Exchange%20OWA%20wembail%20with%20SSL%0A%20offloading%20-%20not%20working%20on%20IE/Chrome&In-Reply-To=%3C00af01d6ac97%2499cfa610%24cd6ef230%24%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022881.html">
   <LINK REL="Next"  HREF="022883.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Reverse proxying Exchange OWA wembail with SSL offloading - not working on IE/Chrome</H1>
    <B>Eliezer Croitor</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Reverse%20proxying%20Exchange%20OWA%20wembail%20with%20SSL%0A%20offloading%20-%20not%20working%20on%20IE/Chrome&In-Reply-To=%3C00af01d6ac97%2499cfa610%24cd6ef230%24%40gmail.com%3E"
       TITLE="[squid-users] Reverse proxying Exchange OWA wembail with SSL offloading - not working on IE/Chrome">ngtech1ltd at gmail.com
       </A><BR>
    <I>Tue Oct 27 19:30:16 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022881.html">[squid-users] Reverse proxying Exchange OWA wembail with SSL offloading - not working on IE/Chrome
</A></li>
        <LI>Next message (by thread): <A HREF="022883.html">[squid-users] Reverse proxying Exchange OWA wembail with SSL offloading - not working on IE/Chrome
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22882">[ date ]</a>
              <a href="thread.html#22882">[ thread ]</a>
              <a href="subject.html#22882">[ subject ]</a>
              <a href="author.html#22882">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Scott,

Can you attach any example cookie with and without the secure value?
(replace sensitive data)

Thanks,
Eliezer

----
Eliezer Croitoru
Tech Support
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>

-----Original Message-----
From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; On Behalf Of Scott
Sent: Tuesday, October 27, 2020 11:24 AM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: [squid-users] Reverse proxying Exchange OWA wembail with SSL offloading - not working on IE/Chrome

Hi,

I've been trying to track down why, when reverse proxying Microsoft Exchange OWA (Outlook Web Access), recent versions of IE and Chrome don't get past the logon page.  Upon entering a username and password the browser just goes back to the login page with no error displayed.  Firefox works fine.

It seems to be something to do with SSL offloading (when the cache peer is HTTP/80).  Without SSL offloading (cache peer is HTTPS/443) everything works as expected.

I did some debugging and noticed that the cookie sent from the server when SSL offloading is ON (squid &lt;-&gt; OWA is HTTP) is missing the &quot;secure&quot; 
attribute, whereas it is present when the data is HTTPS.

This makes perfect sense, and I'm wondering if that's the reason why some of the browsers are not working.

Given that the browser &lt;-&gt; Squid traffic is HTTPS, is there a way to get squid to add the &quot;secure&quot; attribute to cookies?  At least for testing it clarify what's going on.

Thanks,
Scott
_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022881.html">[squid-users] Reverse proxying Exchange OWA wembail with SSL offloading - not working on IE/Chrome
</A></li>
	<LI>Next message (by thread): <A HREF="022883.html">[squid-users] Reverse proxying Exchange OWA wembail with SSL offloading - not working on IE/Chrome
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22882">[ date ]</a>
              <a href="thread.html#22882">[ thread ]</a>
              <a href="subject.html#22882">[ subject ]</a>
              <a href="author.html#22882">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
