<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Forwarded-for functionality(squid)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Forwarded-for%20functionality%28squid%29&In-Reply-To=%3C31718_1599555688_5F574868_31718_1_2_FB9F07820FAE75499D7A4E37F6CD7664AA810A%40OPEXCAUBMA1.corporate.adroot.infra.ftgroup%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022672.html">
   <LINK REL="Next"  HREF="022674.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Forwarded-for functionality(squid)</H1>
    <B>piyush.gaba at orange.com</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Forwarded-for%20functionality%28squid%29&In-Reply-To=%3C31718_1599555688_5F574868_31718_1_2_FB9F07820FAE75499D7A4E37F6CD7664AA810A%40OPEXCAUBMA1.corporate.adroot.infra.ftgroup%3E"
       TITLE="[squid-users] Forwarded-for functionality(squid)">piyush.gaba at orange.com
       </A><BR>
    <I>Tue Sep  8 09:01:27 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022672.html">[squid-users] deny_info page not shown
</A></li>
        <LI>Next message (by thread): <A HREF="022674.html">[squid-users] Forwarded-for functionality(squid)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22673">[ date ]</a>
              <a href="thread.html#22673">[ thread ]</a>
              <a href="subject.html#22673">[ subject ]</a>
              <a href="author.html#22673">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Team,

I would like to ask for your inputs/resolution for one of the issues that I am facing while using forwarded_for functionality with new version of squid i.e. v4.13

UseCase:
I have a client, a webserver and squid hosted in 3 different VMs. I have set up interfaces in such a way that Client cannot access webserver directly, but only through squid proxy.(Works fine)

Now, When I append forwarded_for off to my squid.conf and then curl the webserver from client [ curl {Webserver.mgmtIP} ], the expected logs on webserver should have, &quot;unknown&quot; at the end of line.
And if there is nothing appended or forwarded_for on is appended, it should have &quot;Client_IP&quot; at the end of the line in log file.
But I am not getting expected output.

PFA squid.conf ,output at httpd , httpd.conf.

After several tries, I am looking forward for your help/advice.

Thank You.

Bien cordialement,
Piyush Gaba
Software Engineer
TGI/OLN- INDIA
Tower B, 8th Floor, DLF Infinity Towers,
DLF Cyber City Phase - II
Gurgaon - 122002, Haryana, INDIA
* Mobile: +91-9818498198
[Email] <A HREF="https://lists.squid-cache.org/listinfo/squid-users">piyush.gaba at orange.com</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">piyush.gaba at orange.com</A>&gt;


_________________________________________________________________________________________________________________________

Ce message et ses pieces jointes peuvent contenir des informations confidentielles ou privilegiees et ne doivent donc
pas etre diffuses, exploites ou copies sans autorisation. Si vous avez recu ce message par erreur, veuillez le signaler
a l'expediteur et le detruire ainsi que les pieces jointes. Les messages electroniques etant susceptibles d'alteration,
Orange decline toute responsabilite si ce message a ete altere, deforme ou falsifie. Merci.

This message and its attachments may contain confidential or privileged information that may be protected by law;
they should not be distributed, used or copied without authorisation.
If you have received this email in error, please notify the sender and delete this message and its attachments.
As emails may be altered, Orange is not liable for messages that have been modified, changed or falsified.
Thank you.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20200908/d6f5c668/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20200908/d6f5c668/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: httpd.conf
Type: application/octet-stream
Size: 12093 bytes
Desc: httpd.conf
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20200908/d6f5c668/attachment.obj">http://lists.squid-cache.org/pipermail/squid-users/attachments/20200908/d6f5c668/attachment.obj</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: httpdlogsaftercurl.PNG
Type: image/png
Size: 50415 bytes
Desc: httpdlogsaftercurl.PNG
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20200908/d6f5c668/attachment.png">http://lists.squid-cache.org/pipermail/squid-users/attachments/20200908/d6f5c668/attachment.png</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: squid.conf
Type: application/octet-stream
Size: 2838 bytes
Desc: squid.conf
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20200908/d6f5c668/attachment-0001.obj">http://lists.squid-cache.org/pipermail/squid-users/attachments/20200908/d6f5c668/attachment-0001.obj</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022672.html">[squid-users] deny_info page not shown
</A></li>
	<LI>Next message (by thread): <A HREF="022674.html">[squid-users] Forwarded-for functionality(squid)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22673">[ date ]</a>
              <a href="thread.html#22673">[ thread ]</a>
              <a href="subject.html#22673">[ subject ]</a>
              <a href="author.html#22673">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
