<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Configuring squid to fake Internet connection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Configuring%20squid%20to%20fake%20Internet%20connection&In-Reply-To=%3Cc6708c26-d593-f1b0-37eb-3666a605f707%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="022686.html">
   <LINK REL="Next"  HREF="022689.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Configuring squid to fake Internet connection</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Configuring%20squid%20to%20fake%20Internet%20connection&In-Reply-To=%3Cc6708c26-d593-f1b0-37eb-3666a605f707%40treenet.co.nz%3E"
       TITLE="[squid-users] Configuring squid to fake Internet connection">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Sep 11 23:28:25 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="022686.html">[squid-users] Configuring squid to fake Internet connection
</A></li>
        <LI>Next message (by thread): <A HREF="022689.html">[squid-users] How is Proxy chaining done ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22687">[ date ]</a>
              <a href="thread.html#22687">[ thread ]</a>
              <a href="subject.html#22687">[ subject ]</a>
              <a href="author.html#22687">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/09/20 4:07 am, Ari Fordsham wrote:
&gt;<i> Hi, I'm brand new to Squid.
</I>&gt;<i> 
</I>&gt;<i> I am trying to use Squid to solve the following problem -
</I>&gt;<i> I work on the road, often without an Internet connection. Unfortunately,
</I>&gt;<i> an application I am using downloads some files from the Internet on
</I>&gt;<i> every interface navigation, and when offline, waits (2 minutes!) for the
</I>&gt;<i> connection to time out before responding. This makes the
</I>&gt;<i> application&#160;completely unusable. The actual content of the download is
</I>&gt;<i> unimportant (probably even a 404 error would be fine) but I cannot
</I>&gt;<i> prevent the application from waiting for connection timeout.
</I>
Have you disabled ICMP on this network?

ICMP is used by routers to inform other devices about network
connectivity being offline etc. When ICMP is working the software would
not be able to have a hung connection waiting for timeout - it would be
terminated immediately upon the routers command.

This is important to fix because if you have disabled ICMP then Squid
will have the same timeout issues that software is having. Things might
even get *worse* because Squid tries multiple times to fetch content
before giving up and has even longer timeouts.


&gt;<i> 
</I>&gt;<i> To this end I installed squid, and have successfully routed the traffic
</I>&gt;<i> from said problematic application through it, to the exclusion of
</I>&gt;<i> regular Internet, including browsing traffic, which does not go through
</I>&gt;<i> squid, and successfully configured internet access through squid.
</I>&gt;<i> 
</I>
I assume that means you have any environment, interception or
application proxy settings already configured and working.


&gt;<i> I would now like to configure squid so that i can run the application
</I>&gt;<i> (with internet on), loading its downloads into squid's cache, and then
</I>&gt;<i> have squid serve that up to the application instantly on every
</I>&gt;<i> subsequent request, irrelevant of internet connectivity and content
</I>&gt;<i> expiry headers,
</I>
Those headers exist in the traffic for very good reasons.  The nature of
web applications is that the content is *generated* on demand based on
dynamic state from the client. There is no way for Squid to know the
internal code and design of any application in order to generate those
responses or even request them ahead of time.

You said the content of the download is fine. So errors generated by
Squid saying it could not get connectivity should be fine instead of
trying to cache everything.


&gt;<i> including from a fresh boot while offline.
</I>&gt;<i> 
</I>&gt;<i> Can someone point me toward the correct configuration/directives?
</I>

Squid by default caches everything which is cacheable. No settings to do
for that part of things. If the traffic is <A HREF="http://">http://</A> then there is nothing
else to configure.


If the traffic is HTTPS and the client software opening CONNECT tunnels
to use the proxy, then you will need SSL-Bump feature configured to
decrypt the traffic before caching can be done. Details on that can be
found in the wiki &lt;<A HREF="https://wiki.squid-cache.org/Features/SslPeekAndSplice">https://wiki.squid-cache.org/Features/SslPeekAndSplice</A>&gt;


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="022686.html">[squid-users] Configuring squid to fake Internet connection
</A></li>
	<LI>Next message (by thread): <A HREF="022689.html">[squid-users] How is Proxy chaining done ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22687">[ date ]</a>
              <a href="thread.html#22687">[ thread ]</a>
              <a href="subject.html#22687">[ subject ]</a>
              <a href="author.html#22687">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
