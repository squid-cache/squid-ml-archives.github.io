<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Errors Compiling Squid on Windows Server using Cygwin
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Errors%20Compiling%20Squid%20on%20Windows%20Server%20using%20Cygwin&In-Reply-To=%3CBL1PR12MB50481DF21266E09E28EDADC4A7459%40BL1PR12MB5048.namprd12.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023582.html">
   <LINK REL="Next"  HREF="023570.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Errors Compiling Squid on Windows Server using Cygwin</H1>
    <B>Brian Hall</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Errors%20Compiling%20Squid%20on%20Windows%20Server%20using%20Cygwin&In-Reply-To=%3CBL1PR12MB50481DF21266E09E28EDADC4A7459%40BL1PR12MB5048.namprd12.prod.outlook.com%3E"
       TITLE="[squid-users] Errors Compiling Squid on Windows Server using Cygwin">bhall at geosolinc.com
       </A><BR>
    <I>Fri Apr 23 17:28:56 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="023582.html">[squid-users] Client certificate authentication problem
</A></li>
        <LI>Next message (by thread): <A HREF="023570.html">[squid-users] Whitelist Src IP and Tie it to specific ip outgoing ip
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23569">[ date ]</a>
              <a href="thread.html#23569">[ thread ]</a>
              <a href="subject.html#23569">[ subject ]</a>
              <a href="author.html#23569">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I have searched the previous posts and I can only find a mention of this issue from back in 2018 where the solution was to use 3.5. I would like to use 4.12 instead of older versions because of the security concerns.

The following is the errors the compiler gave me:

In file included from /usr/include/w32api/lm.h:18,

from ext_lm_group_acl.cc:96:
/usr/include/w32api/lmserver.h:29:33: error: 'SERVICE_STATUS_HANDLE' was not declared in this scope; did you mean 'SERVICE_PAUSABLE'?
   29 |   WINBOOL WINAPI SetServiceBits(SERVICE_STATUS_HANDLE hServiceStatus,DWORD dwServiceBits,WINBOOL bSetBitsOn,WINBOOL bUpdateImmediately);
      |                                 ^~~~~~~~~~~~~~~~~~~~~
      |                                 SERVICE_PAUSABLE
/usr/include/w32api/lmserver.h:29:76: error: expected primary-expression before 'dwServiceBits'
   29 |   WINBOOL WINAPI SetServiceBits(SERVICE_STATUS_HANDLE hServiceStatus,DWORD dwServiceBits,WINBOOL bSetBitsOn,WINBOOL bUpdateImmediately);
      |                                                                            ^~~~~~~~~~~~~
/usr/include/w32api/lmserver.h:29:98: error: expected primary-expression before 'bSetBitsOn'
   29 |   WINBOOL WINAPI SetServiceBits(SERVICE_STATUS_HANDLE hServiceStatus,DWORD dwServiceBits,WINBOOL bSetBitsOn,WINBOOL bUpdateImmediately);
      |                                                                                                  ^~~~~~~~~~
/usr/include/w32api/lmserver.h:29:117: error: expected primary-expression before 'bUpdateImmediately'
   29 |   WINBOOL WINAPI SetServiceBits(SERVICE_STATUS_HANDLE hServiceStatus,DWORD dwServiceBits,WINBOOL bSetBitsOn,WINBOOL bUpdateImmediately);
      |                                                                                                                     ^~~~~~~~~~~~~~~~~~
/usr/include/w32api/lmserver.h:29:135: error: expression list treated as compound expression in initializer [-fpermissive]
   29 |   WINBOOL WINAPI SetServiceBits(SERVICE_STATUS_HANDLE hServiceStatus,DWORD dwServiceBits,WINBOOL bSetBitsOn,WINBOOL bUpdateImmediately);
      |                                                                                                                                       ^
In file included from ../../../../compat/compat.h:105,
                 from ../../../../include/squid.h:43,
                 from ext_lm_group_acl.cc:78:
ext_lm_group_acl.cc: In function 'char* GetDomainName()':
ext_lm_group_acl.cc:173:19: error: format '%ld' expects argument of type 'long int', but argument 3 has type 'NTSTATUS' {aka 'int'} [-Werror=format=]
  173 |             debug(&quot;OpenPolicy Error: %ld\n&quot;, status);
      |                   ^~~~~~~~~~~~~~~~~~~~~~~~~  ~~~~~~
      |                                              |
      |                                              NTSTATUS {aka int}
../../../../compat/debug.h:31:41: note: in definition of macro 'debug'
   31 |                          fprintf(stderr,X); \
      |                                         ^
ext_lm_group_acl.cc:173:40: note: format string is defined here
  173 |             debug(&quot;OpenPolicy Error: %ld\n&quot;, status);
      |                                      ~~^
      |                                        |
      |                                        long int
      |                                      %d
In file included from ../../../../compat/compat.h:105,
                 from ../../../../include/squid.h:43,
                 from ext_lm_group_acl.cc:78:
ext_lm_group_acl.cc:184:23: error: format '%ld' expects argument of type 'long int', but argument 3 has type 'NTSTATUS' {aka 'int'} [-Werror=format=]
  184 |                 debug(&quot;LsaQueryInformationPolicy Error: %ld\n&quot;, status);
      |                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  ~~~~~~
      |                                                                 |
      |                                                                 NTSTATUS {aka int}
../../../../compat/debug.h:31:41: note: in definition of macro 'debug'
   31 |                          fprintf(stderr,X); \
      |                                         ^
ext_lm_group_acl.cc:184:59: note: format string is defined here
  184 |                 debug(&quot;LsaQueryInformationPolicy Error: %ld\n&quot;, status);
      |                                                         ~~^
      |                                                           |
      |                                                           long int
      |                                                         %d
In file included from ../../../../compat/compat.h:105,
                 from ../../../../include/squid.h:43,
                 from ext_lm_group_acl.cc:78:
ext_lm_group_acl.cc:214:15: error: format '%ld' expects argument of type 'long int', but argument 3 has type 'DWORD' {aka 'unsigned int'} [-Werror=format=]
  214 |         debug(&quot;NetWkstaGetInfo Error: %ld\n&quot;, netret);
      |               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  ~~~~~~
      |                                               |
      |                                               DWORD {aka unsigned int}
../../../../compat/debug.h:31:41: note: in definition of macro 'debug'
   31 |                          fprintf(stderr,X); \
      |                                         ^
ext_lm_group_acl.cc:214:41: note: format string is defined here
  214 |         debug(&quot;NetWkstaGetInfo Error: %ld\n&quot;, netret);
      |                                       ~~^
      |                                         |
      |                                         long int
      |                                       %d
In file included from ../../../../compat/compat.h:105,
                 from ../../../../include/squid.h:43,
                 from ext_lm_group_acl.cc:78:
ext_lm_group_acl.cc: In function 'int main(int, char**)':
ext_lm_group_acl.cc:572:15: error: format '%d' expects argument of type 'int', but argument 4 has type 'size_t' {aka 'long unsigned int'} [-Werror=format=]
  572 |         debug(&quot;Got '%s' from Squid (length: %d).\n&quot;, buf, strlen(buf));
      |               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~       ~~~~~~~~~~~
      |                                                                 |
      |                                                                 size_t {aka long unsigned int}
../../../../compat/debug.h:31:41: note: in definition of macro 'debug'
   31 |                          fprintf(stderr,X); \
      |                                         ^
ext_lm_group_acl.cc:572:46: note: format string is defined here
  572 |         debug(&quot;Got '%s' from Squid (length: %d).\n&quot;, buf, strlen(buf));
      |                                             ~^
      |                                              |
      |                                              int
      |                                             %ld
cc1plus: all warnings being treated as errors
make[5]: *** [Makefile:840: ext_lm_group_acl.o] Error 1
make[5]: Leaving directory '/cygdrive/c/new/squid-4.14/src/acl/external/LM_group'
make[4]: *** [Makefile:532: install-recursive] Error 1
make[4]: Leaving directory '/cygdrive/c/new/squid-4.14/src/acl/external'
make[3]: *** [Makefile:1125: install-recursive] Error 1
make[3]: Leaving directory '/cygdrive/c/new/squid-4.14/src/acl'
make[2]: *** [Makefile:7129: install-recursive] Error 1
make[2]: Leaving directory '/cygdrive/c/new/squid-4.14/src'
make[1]: *** [Makefile:7657: install] Error 2
make[1]: Leaving directory '/cygdrive/c/new/squid-4.14/src'
make: *** [Makefile:588: install-recursive] Error 1



Brian Hall
Job Spider Team Lead
Geographic Solutions, Inc.
727.786.7955 phone | 727.786.5871 fax | <A HREF="https://lists.squid-cache.org/listinfo/squid-users">bhall at geosolinc.com</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">bhall at geosolinc.com</A>&gt;
1001 Omaha Circle, Palm Harbor, FL 34683 | geographicsolutions.com&lt;<A HREF="http://www.geographicsolutions.com/">http://www.geographicsolutions.com/</A>&gt;
[2016 Email Signature]&lt;<A HREF="http://www.geographicsolutions.com/">http://www.geographicsolutions.com/</A>&gt;

The information contained in this message may be privileged, confidential
and protected from disclosure. If the reader of this message is not the intended
recipient, or an employee or agent responsible for delivering this message to the
intended recipient, you are hereby notified that any dissemination, distribution
or copying of this communication is strictly prohibited. If you have received this
communication in error, please notify us immediately by replying to the message
and deleting it from your computer.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20210423/35352dae/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20210423/35352dae/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.gif
Type: image/gif
Size: 15980 bytes
Desc: image001.gif
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20210423/35352dae/attachment.gif">http://lists.squid-cache.org/pipermail/squid-users/attachments/20210423/35352dae/attachment.gif</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="023582.html">[squid-users] Client certificate authentication problem
</A></li>
	<LI>Next message (by thread): <A HREF="023570.html">[squid-users] Whitelist Src IP and Tie it to specific ip outgoing ip
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23569">[ date ]</a>
              <a href="thread.html#23569">[ thread ]</a>
              <a href="subject.html#23569">[ subject ]</a>
              <a href="author.html#23569">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
