<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Allowing User Certificate Authentication with SSL Bump
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Allowing%20User%20Certificate%20Authentication%20with%20SSL%20Bump&In-Reply-To=%3CCAH%2BvZy_9VWCNSCPu2AZhL5xJXW0kJjgLTn447qwCzhO7_TdDaQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023575.html">
   <LINK REL="Next"  HREF="023577.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Allowing User Certificate Authentication with SSL Bump</H1>
    <B>Justin Cook</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Allowing%20User%20Certificate%20Authentication%20with%20SSL%20Bump&In-Reply-To=%3CCAH%2BvZy_9VWCNSCPu2AZhL5xJXW0kJjgLTn447qwCzhO7_TdDaQ%40mail.gmail.com%3E"
       TITLE="[squid-users] Allowing User Certificate Authentication with SSL Bump">justinglencook at gmail.com
       </A><BR>
    <I>Tue Apr 27 17:33:03 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="023575.html">[squid-users] Sporadic FATAL on squid 4.14
</A></li>
        <LI>Next message (by thread): <A HREF="023577.html">[squid-users] Allowing User Certificate Authentication with SSL Bump
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23576">[ date ]</a>
              <a href="thread.html#23576">[ thread ]</a>
              <a href="subject.html#23576">[ subject ]</a>
              <a href="author.html#23576">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We are running into a situation where we are unable to fully authenticate
our users to an internal tooling service that requires certificate
authentication as part of its login process, when going through squid
forward proxy with SSL bump enabled.  The problem, however, is that it
shares a domain name with all of our other internal tooling services so we
cannot just enable splice for the domain, since we then lose access to ssl
bump and the url logging that it allows.

In this implementation, the main thing that we are using Squid for is
allowance-only access for a locked down subset of machines, where specific
URLs are allowed for different machine sets.  We need the source machine
and URLs accessed to be logged in case they need to be reviewed at a later
date.

So I am trying to find some way to accomplish one of the following:
1.  Log full URL paths for spliced domains (www.domain.com/auth/tool
instead of just www.domain.com)
2.  Allow user certificate based authentication for SSL Bumped URLs
3.  Splice only a specific subdirectory instead of a whole domain (which is
impossible, if I understand correctly)

Are any of these even possible with squid or have we hit a brick wall in
terms of available functionality?  I haven't been able to find any working
solutions for enabling user certificate authentication with squid forward
proxies.  The most I have been able to do is have the squid proxy itself
present a static user certificate, but that won't be deemed acceptable by
the security teams that manage the authentication services.
Thanks in advance for your help!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20210427/03170ad7/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20210427/03170ad7/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="023575.html">[squid-users] Sporadic FATAL on squid 4.14
</A></li>
	<LI>Next message (by thread): <A HREF="023577.html">[squid-users] Allowing User Certificate Authentication with SSL Bump
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23576">[ date ]</a>
              <a href="thread.html#23576">[ thread ]</a>
              <a href="subject.html#23576">[ subject ]</a>
              <a href="author.html#23576">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
