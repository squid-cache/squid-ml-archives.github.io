<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid is active but not working
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20is%20active%20but%20not%20working&In-Reply-To=%3C202108161854.36813.Antony.Stone%40squid.open.source.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023956.html">
   <LINK REL="Next"  HREF="023958.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid is active but not working</H1>
    <B>Antony Stone</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20is%20active%20but%20not%20working&In-Reply-To=%3C202108161854.36813.Antony.Stone%40squid.open.source.it%3E"
       TITLE="[squid-users] Squid is active but not working">Antony.Stone at squid.open.source.it
       </A><BR>
    <I>Mon Aug 16 16:54:36 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="023956.html">[squid-users] Squid is active but not working
</A></li>
        <LI>Next message (by thread): <A HREF="023958.html">[squid-users] Squid is active but not working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23957">[ date ]</a>
              <a href="thread.html#23957">[ thread ]</a>
              <a href="subject.html#23957">[ subject ]</a>
              <a href="author.html#23957">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Monday 16 August 2021 at 18:09:12, Peter Thesing wrote:

&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> English is not my native tongue so I am sorry for any mistakes that I've
</I>&gt;<i> made or will make in the future.
</I>
That's not problem - I just wanted to make sure I understood your meaning 
(which I did).

&gt;<i> Both apache and squid are running of the same machine. This I like to
</I>&gt;<i> call the server.
</I>
Sounds good to me.

&gt;<i> Then on another machine, lets call it the client,  there is also
</I>&gt;<i> opensuse 15.1 but with another purpose. When this client is directly
</I>&gt;<i> connected to the internet is cannot connect to the server.
</I>
I do not understand that part.  Why can you not have two machines on one 
network which can both connect to the Internet and also connect to each other?

How does each machine connect to the Internet?

&gt;<i> The relevance of apache is that on some mysterious way I would be able
</I>&gt;<i> to check if squid is working but I just installed it and I have to
</I>&gt;<i> figure this one out.
</I>
I would suggest that the best way to find out whether Squid is working is 
either to use Squid itself, or to check whether it is listening on port 3128, 
or perhaps even use something like Icinga2 (although that's prbably going a 
bit far just to &quot;find out whether Squid is working&quot;).

&gt;<i> DHCP and DNS are working. The client machine gets an IP address from the
</I>&gt;<i> server.
</I>
So, the client machien gets an IP address from the server by DHCP, and it gets 
told to ask the server for DNS queries (which the server then performs and 
returns the results)?

&gt;<i> On the second card i have designated an ip address which is 192.168.1.1
</I>&gt;<i> and the range on which the client computers can connect 192.168.1.20
</I>&gt;<i> through 192.168.1.50.
</I>
So, it sounds as though you are using the server as a router, with a public 
address on one interface and a private address on the other.  This doesn't 
explain to me why the client cannot access the Internet through the server, 
acting as a router.

&gt;<i> When using squid in firefox it should connect to <A HREF="http://192.168.1.1:3128">http://192.168.1.1:3128</A>
</I>&gt;<i> but it does not...
</I>
You mean, it does not even connect to the proxy, or it does connect and the 
proxy does not work correctly, so you get no content from Internet websites?

&gt;<i> Question:
</I>&gt;<i> 
</I>&gt;<i> Where are the log files?
</I>
Usually, /var/log/squid/*.log

&gt;<i> How do I read the log files?
</I>
less?  cat?  vim?  grep?

&gt;<i> What log-files are relevant to answer the mystery of not connecting?
</I>
I would start with access.log.

&gt;<i> the firewall is off and stays off. I have only the ports 21, 80 and 443
</I>&gt;<i> open.
</I>
Oh, that is far from my definition of &quot;off&quot;.  It means your firewall is active, 
and blocking connections other than FTP (why???), HTTP and HTTPS.

Is this firewall running on your &quot;server&quot; or on some modem/router which the 
server uses to connect to the Internet?

If these firewall rules are on your &quot;server&quot;, is there a rule allowing the 
client machine/s to connect to Squid on port 3128?

Further questions:

1. How are you testing from the client machine?  What exactly happens when you 
try?

2. What shows up in Squid's access.log when you attempt to connect from the 
client machine?

3. What changes have you made to the default Squid configuration file?

And, while we're at it:

4. Are you trying to implement Squid purely in order to give the client 
machine access to the Internet, simply because otherwise it cannot?  If that 
is the case, why not simply route the client machine through the server so 
that the client can access the Internet directly?


Antony.

-- 
I thought of going into banking, until I lost interest.

                                                   Please reply to the list;
                                                         please *don't* CC me.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="023956.html">[squid-users] Squid is active but not working
</A></li>
	<LI>Next message (by thread): <A HREF="023958.html">[squid-users] Squid is active but not working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23957">[ date ]</a>
              <a href="thread.html#23957">[ thread ]</a>
              <a href="subject.html#23957">[ subject ]</a>
              <a href="author.html#23957">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
