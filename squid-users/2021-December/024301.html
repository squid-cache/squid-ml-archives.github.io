<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] security_file_certgen I/O
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20security_file_certgen%20I/O&In-Reply-To=%3CCANj0NToPe6ptViFJrHXi1sKascRS0uoP_7UMq_nhXOWzqJ-J2g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024300.html">
   <LINK REL="Next"  HREF="024302.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] security_file_certgen I/O</H1>
    <B>Jason Spashett</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20security_file_certgen%20I/O&In-Reply-To=%3CCANj0NToPe6ptViFJrHXi1sKascRS0uoP_7UMq_nhXOWzqJ-J2g%40mail.gmail.com%3E"
       TITLE="[squid-users] security_file_certgen I/O">jason.spashett at menlosecurity.com
       </A><BR>
    <I>Wed Dec  1 18:55:21 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024300.html">[squid-users] security_file_certgen I/O
</A></li>
        <LI>Next message (by thread): <A HREF="024302.html">[squid-users] security_file_certgen I/O
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24301">[ date ]</a>
              <a href="thread.html#24301">[ thread ]</a>
              <a href="subject.html#24301">[ subject ]</a>
              <a href="author.html#24301">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, 1 Dec 2021 at 18:29, Alex Rousskov
&lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> On 12/1/21 12:06 PM, David Touzeau wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Hi
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; We used Squid 5.2 and we see that security_file_certgen consume I/O
</I>&gt;<i> &gt; Is there any way to put the ssldb in memory without need to mount a tmpfs ?
</I>&gt;<i>
</I>&gt;<i> Yes, there are at least two other ways to reduce disk I/O related to
</I>&gt;<i> certificate generation:
</I>&gt;<i>
</I>&gt;<i> 1) Tell the official certificate generator helper not to cache the
</I>&gt;<i> generated certificates. See sslcrtd_program documentation for details.
</I>&gt;<i>
</I>&gt;<i> 2) Write your own certificate generator helper.
</I>&gt;<i>
</I>&gt;<i> Alex.
</I>
We have found that the certificate helpers perform strictly worse with
the disk cache turned on, over approximately 3 processes. It is
something that perhaps one day, with luck, we may be able to
contribute something. The problems are the way in which the disk cache
is stored and accessed.

I do have a large spreadsheet with some performance results, which (at
some point) I do plan to share.

I feel it's likely that the process of generating the certificates
could, or should be separate from their caching on disk (or in
memory). Currently the helper does both, and the disk caching does
seem detrimental in a multi process setting.
Another reason for separating these concerns is that some people may
wish to use HSM facilities (Hardware Security Module), and so it may
make sense to separate out the caching, and; in light of the
consideration that the HSM interface may vary widely, and require a
specific HSM helper type for each HSM.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024300.html">[squid-users] security_file_certgen I/O
</A></li>
	<LI>Next message (by thread): <A HREF="024302.html">[squid-users] security_file_certgen I/O
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24301">[ date ]</a>
              <a href="thread.html#24301">[ thread ]</a>
              <a href="subject.html#24301">[ subject ]</a>
              <a href="author.html#24301">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
