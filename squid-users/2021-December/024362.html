<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Logging in Squid external helpers in Docker?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Logging%20in%20Squid%20external%20helpers%20in%20Docker%3F&In-Reply-To=%3CCAGCa14rNuxSn57Qf7f38ZH_GGHMX0Kqm%2BGCVqQpJF_JU9hLaPg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024361.html">
   <LINK REL="Next"  HREF="024364.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Logging in Squid external helpers in Docker?</H1>
    <B>roee klinger</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Logging%20in%20Squid%20external%20helpers%20in%20Docker%3F&In-Reply-To=%3CCAGCa14rNuxSn57Qf7f38ZH_GGHMX0Kqm%2BGCVqQpJF_JU9hLaPg%40mail.gmail.com%3E"
       TITLE="[squid-users] Logging in Squid external helpers in Docker?">roeeklinger60 at gmail.com
       </A><BR>
    <I>Tue Dec 28 06:01:39 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024361.html">[squid-users] Logging in Squid external helpers in Docker?
</A></li>
        <LI>Next message (by thread): <A HREF="024364.html">[squid-users] Logging in Squid external helpers in Docker?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24362">[ date ]</a>
              <a href="thread.html#24362">[ thread ]</a>
              <a href="subject.html#24362">[ subject ]</a>
              <a href="author.html#24362">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>
</I>&gt;<i> stdout of the helper is the channel to respond to Squid requests. Do not
</I>&gt;<i> send other information there.
</I>

Helper debug info etc should go to the helper stderr which Squid will
&gt;<i> deliver to cache.log.
</I>

Thank you, Amos.

I am glad there is a built-in way to handle this.

However, I tried putting this inside the script:

&gt;<i> sys.stderr.write(&quot;test ################################################&quot;)
</I>

However, I still can not see the info in the cache log, these are my
configurations:

&gt;<i> cache_log stdio:/dev/stdout
</I>&gt;<i> cache_store_log stdio:/dev/stdout
</I>

I even tried adding this, but still no luck:

&gt;<i> debug_options 82,9
</I>

I can see the rest of the cache log just fine, and stdout makes it to
its destination just fine as well.

Any idea what is wrong?

Thanks,
Roee

On Tue, Dec 28, 2021 at 7:46 AM Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt; wrote:

&gt;<i> On 28/12/21 18:32, roee klinger wrote:
</I>&gt;<i> &gt; Hey,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I am running Squid inside a Docker container, and I am using an external
</I>&gt;<i> &gt; helper, I am trying to get the logs from the external helper to go to
</I>&gt;<i> &gt; Docker logs (stdout).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Currently, I am writing the logs to a file, which works, but I would
</I>&gt;<i> &gt; like to get them to stdout instead, however, Squid redirects all the
</I>&gt;<i> &gt; stdout from the external helper to itself, which makes me unable to send
</I>&gt;<i> &gt; the logs I want to stdout.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Is there a way for me to send the logs I want to the main stdout of the
</I>&gt;<i> &gt; container and not to Squid itself?
</I>&gt;<i>
</I>&gt;<i> stdout of the helper is the channel to respond to Squid requests. Do not
</I>&gt;<i> send other information there.
</I>&gt;<i>
</I>&gt;<i> Helper debug info etc should go to the helper stderr which Squid will
</I>&gt;<i> deliver to cache.log.
</I>&gt;<i>
</I>&gt;<i> Amos
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20211228/d99ece94/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20211228/d99ece94/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024361.html">[squid-users] Logging in Squid external helpers in Docker?
</A></li>
	<LI>Next message (by thread): <A HREF="024364.html">[squid-users] Logging in Squid external helpers in Docker?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24362">[ date ]</a>
              <a href="thread.html#24362">[ thread ]</a>
              <a href="subject.html#24362">[ subject ]</a>
              <a href="author.html#24362">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
