<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Started testing squid-6.0.0-20210204-r5f37a71ac
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Started%20testing%20squid-6.0.0-20210204-r5f37a71ac&In-Reply-To=%3C8b2ceac2-e585-7b34-3538-3758466a10e0%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023336.html">
   <LINK REL="Next"  HREF="023348.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Started testing squid-6.0.0-20210204-r5f37a71ac</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Started%20testing%20squid-6.0.0-20210204-r5f37a71ac&In-Reply-To=%3C8b2ceac2-e585-7b34-3538-3758466a10e0%40measurement-factory.com%3E"
       TITLE="[squid-users] Started testing squid-6.0.0-20210204-r5f37a71ac">rousskov at measurement-factory.com
       </A><BR>
    <I>Tue Feb 16 19:56:54 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="023336.html">[squid-users] Started testing squid-6.0.0-20210204-r5f37a71ac
</A></li>
        <LI>Next message (by thread): <A HREF="023348.html">[squid-users] Started testing squid-6.0.0-20210204-r5f37a71ac
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23342">[ date ]</a>
              <a href="thread.html#23342">[ thread ]</a>
              <a href="subject.html#23342">[ subject ]</a>
              <a href="author.html#23342">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2/16/21 2:40 AM, Eliezer Croitoru wrote:
&gt;<i> Google host means that the host that squid couldn't connect ie :
</I>&gt;&gt;&gt;&gt;<i> connection on conn2195 local=216.58.198.67:443
</I>&gt;&gt;&gt;&gt;<i> remote=192.168.189.94:41724 FD 104 flags=33: 0x55cf6a6debe0*1
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> 216.58.198.67:443
</I>&gt;<i> 
</I>&gt;<i> The issue can be teste against this host.( the above)
</I>&gt;<i> There is an issue with ssl bump and this specific host is a re-producible issue/case/problem.
</I>
Thank you for clarifying that.

FWIW, in my tests, a v6-based Squid successfully bumps the connection to
(a result of the reverse DNS lookup of) 216.58.198.67 IP address:

&gt;<i> ... NONE_NONE/200 0 CONNECT dub08s02-in-f3.1e100.net:443 ...
</I>&gt;<i> ... TCP_MISS/404 1960 GET <A HREF="https://dub08s02-in-f3.1e100.net/">https://dub08s02-in-f3.1e100.net/</A> ...
</I>
Also, the ERROR message you shared earlier suggests that the problem
happens when accepting a TLS client connection (&quot;failure while accepting
a TLS&quot;), but your summary above says &quot;squid couldn't connect&quot; as if the
problem happens when establishing a TLS connection with the server.

The information you have provided so far does not tell me what goes
wrong in your tests. Hopefully, somebody will volunteer to reproduce
this and discover the cause of these connection establishment problems.
Alternatively, you can try sharing an ALL,9 cache.log of the isolated
failed transaction[1]. After that, we will probably know how to address
those problems.

[1]
<A HREF="https://wiki.squid-cache.org/SquidFaq/BugReporting#Debugging_a_single_transaction">https://wiki.squid-cache.org/SquidFaq/BugReporting#Debugging_a_single_transaction</A>

Alex.


&gt;<i> -----Original Message-----
</I>&gt;<i> From: Alex Rousskov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt; 
</I>&gt;<i> Sent: Monday, February 15, 2021 9:03 PM
</I>&gt;<i> To: Eliezer Croitoru &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>&gt;; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> Subject: Re: [squid-users] Started testing squid-6.0.0-20210204-r5f37a71ac
</I>&gt;<i> 
</I>&gt;<i> On 2/15/21 6:32 AM, Eliezer Croitoru wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> Where exactly do you see Host Header Forgery in my last email?
</I>&gt;<i> 
</I>&gt;<i> Your last email says &quot;google hosts&quot;. The previous email from you (in the
</I>&gt;<i> same thread) said &quot;Most of the issues I see are related to Host header
</I>&gt;<i> forgery detection&quot; and then named &quot;google host related issue&quot; to be &quot;the
</I>&gt;<i> main issue&quot;. I naturally assumed that you are talking about a set of
</I>&gt;<i> Host forgery related issues with one specific Host forgery detection
</I>&gt;<i> issue being the prevalent/major one.
</I>&gt;<i> 
</I>&gt;<i> If my assumption was wrong, then you have not addressed the problem I
</I>&gt;<i> stated in my very first response -- I still do not know what &quot;google
</I>&gt;<i> host related issue&quot; is. The cache.log lines you have posted do not
</I>&gt;<i> answer that question for me. You seem to know what the problem actually
</I>&gt;<i> is, so, if you want answers, perhaps you can detail/explain the problem
</I>&gt;<i> you are asking about.
</I>&gt;<i> 
</I>&gt;<i> Alex.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> -----Original Message-----
</I>&gt;&gt;<i> From: Alex Rousskov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt; 
</I>&gt;&gt;<i> Sent: Thursday, February 11, 2021 7:02 PM
</I>&gt;&gt;<i> To: Eliezer Croitoru &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>&gt;; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;<i> Subject: Re: [squid-users] Started testing squid-6.0.0-20210204-r5f37a71ac
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 2/11/21 10:41 AM, Eliezer Croitoru wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The issue that makes it's impossible to surf not to cache.
</I>&gt;&gt;&gt;<i> The 
</I>&gt;&gt;&gt;&gt;<i> 2021/02/07 19:46:07 kid1| ERROR: failure while accepting a TLS
</I>&gt;&gt;&gt;&gt;<i> connection on conn2195 local=216.58.198.67:443
</I>&gt;&gt;&gt;&gt;<i> remote=192.168.189.94:41724 FD 104 flags=33: 0x55cf6a6debe0*1
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>     current master transaction: master78
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> which is a google host related issue.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The access to google hosts seems to be the main issue here.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> How is this different from the host forgery related discussions we
</I>&gt;&gt;<i> recently had? I consider the general &quot;What can we do about host forgery
</I>&gt;&gt;<i> errors?&quot;  question answered already. If you disagree with those answers,
</I>&gt;&gt;<i> we can discuss further, but, to make progress, you need to say
</I>&gt;&gt;<i> explicitly which answer you disagree with and why.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Alex.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> -----Original Message-----
</I>&gt;&gt;&gt;<i> From: Alex Rousskov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt; 
</I>&gt;&gt;&gt;<i> Sent: Tuesday, February 9, 2021 11:03 PM
</I>&gt;&gt;&gt;<i> To: Eliezer Croitoru &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>&gt;;
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;&gt;<i> Subject: Re: [squid-users] Started testing squid-6.0.0-20210204-r5f37a71ac
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On 2/7/21 12:47 PM, Eliezer Croitoru wrote:
</I>&gt;&gt;&gt;&gt;<i> I move on to testing squid-6.0.0-20210204-r5f37a71ac
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Most of the issues I see are related to Host header forgery detection.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> I do see that the main issue with TLS is similar to:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> 2021/02/07 19:46:07 kid1| ERROR: failure while accepting a TLS
</I>&gt;&gt;&gt;&gt;<i> connection on conn2195 local=216.58.198.67:443
</I>&gt;&gt;&gt;&gt;<i> remote=192.168.189.94:41724 FD 104 flags=33: 0x55cf6a6debe0*1
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>     current master transaction: master78
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> which is a google host related issue.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Alex and Amos,
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Can the project do something about this?
</I>&gt;&gt;&gt;<i>  FWIW, I do not understand what you are asking about -- it is not clear
</I>&gt;&gt;&gt;<i> to me what &quot;this&quot; is in the context of your question. As you know, there
</I>&gt;&gt;&gt;<i> have been several recent discussions about host header forgery detection
</I>&gt;&gt;&gt;<i> problems. It is not clear to me whether you are asking about some
</I>&gt;&gt;&gt;<i> specific new case or want to revisit some specific aspects of those
</I>&gt;&gt;&gt;<i> discussions.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Alex.
</I>&gt;&gt;&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="023336.html">[squid-users] Started testing squid-6.0.0-20210204-r5f37a71ac
</A></li>
	<LI>Next message (by thread): <A HREF="023348.html">[squid-users] Started testing squid-6.0.0-20210204-r5f37a71ac
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23342">[ date ]</a>
              <a href="thread.html#23342">[ thread ]</a>
              <a href="subject.html#23342">[ subject ]</a>
              <a href="author.html#23342">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
