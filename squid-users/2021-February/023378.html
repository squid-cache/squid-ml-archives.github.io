<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Problem with upload size limit in squid
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Problem%20with%20upload%20size%20limit%20in%20squid&In-Reply-To=%3C75db0d54-1277-859e-1c35-19bb30b2c9b5%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023375.html">
   <LINK REL="Next"  HREF="023373.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Problem with upload size limit in squid</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Problem%20with%20upload%20size%20limit%20in%20squid&In-Reply-To=%3C75db0d54-1277-859e-1c35-19bb30b2c9b5%40measurement-factory.com%3E"
       TITLE="[squid-users] Problem with upload size limit in squid">rousskov at measurement-factory.com
       </A><BR>
    <I>Fri Feb 26 14:59:24 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="023375.html">[squid-users] Problem with upload size limit in squid
</A></li>
        <LI>Next message (by thread): <A HREF="023373.html">[squid-users] Squid ACL for bypassing ssl-bump
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23378">[ date ]</a>
              <a href="thread.html#23378">[ thread ]</a>
              <a href="subject.html#23378">[ subject ]</a>
              <a href="author.html#23378">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2/25/21 8:44 PM, Raj Nagar wrote:

&gt;<i> Is there any way by which I can enforce these
</I>&gt;<i> limits on other protocols as https?
</I>
If you want to enforce HTTP request size limits for HTTPS transactions,
then you have to bump TLS connections (to see HTTP inside TLS).

If you want to enforce connection limits for TLS (and other non-HTTP)
connections, then you can either enhance Squid or perhaps use some
TCP-level software that can track individual TCP connection usage. Since
this option deals with TCP connections, it cannot limit individual HTTP
uploads, only the total amount of bytes sent by the client. One TLS/TCP
connection could carry one (encrypted) request or thousands of
(encrypted) requests or even non HTTP traffic -- Squid cannot tell
without bumping that TLS connection.

Both options have ugly drawbacks. There is no good solution for what you
want to do (if you do not control the browser).

Alex.


&gt;<i> On Thu, Feb 25, 2021, 23:33 Alex Rousskov wrote:
</I>&gt;<i> 
</I>&gt;<i>     On 2/24/21 11:51 PM, Raj Nagar wrote:
</I>&gt;<i> 
</I>&gt;<i>     &gt; I am using squid as forward proxy and want to restrict upload of files
</I>&gt;<i>     &gt; larger than 1 MB. I have used following configuration for
</I>&gt;<i>     &gt; same:&#160;*request_body_max_size 1 MB*.
</I>&gt;<i>     &gt; But this is not working for me and I am able to upload larger files.
</I>&gt;<i>     &gt; Can someone please help for same. Thanks in advance
</I>&gt;<i> 
</I>&gt;<i>     Does your Squid have access to the HTTP request information? For
</I>&gt;<i>     example, if it is an HTTPS request, and you are not bumping the
</I>&gt;<i>     corresponding TLS connection, then Squid would not be working at HTTP
</I>&gt;<i>     level and, hence, would not be able to limit individual HTTP request
</I>&gt;<i>     sizes.
</I>&gt;<i> 
</I>&gt;<i>     The corresponding access.log record may tell us more about the
</I>&gt;<i>     problematic transaction.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     HTH,
</I>&gt;<i> 
</I>&gt;<i>     Alex.
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="023375.html">[squid-users] Problem with upload size limit in squid
</A></li>
	<LI>Next message (by thread): <A HREF="023373.html">[squid-users] Squid ACL for bypassing ssl-bump
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23378">[ date ]</a>
              <a href="thread.html#23378">[ thread ]</a>
              <a href="subject.html#23378">[ subject ]</a>
              <a href="author.html#23378">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
