<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Mutual TLS for the upstream example
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Mutual%20TLS%20for%20the%20upstream%20example&In-Reply-To=%3CCAB3mbkSohTFJHWDzEYxWMue6LA79v1-80wbpbLvdmpD7_8RY6g%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023193.html">
   <LINK REL="Next"  HREF="023195.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Mutual TLS for the upstream example</H1>
    <B>Sergey Maslyakov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Mutual%20TLS%20for%20the%20upstream%20example&In-Reply-To=%3CCAB3mbkSohTFJHWDzEYxWMue6LA79v1-80wbpbLvdmpD7_8RY6g%40mail.gmail.com%3E"
       TITLE="[squid-users] Mutual TLS for the upstream example">evolvah at gmail.com
       </A><BR>
    <I>Thu Jan 14 19:41:25 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="023193.html">[squid-users] generate-host-certificates=on fails to generate certificates for _some_ hosts
</A></li>
        <LI>Next message (by thread): <A HREF="023195.html">[squid-users] Mutual TLS for the upstream example
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23194">[ date ]</a>
              <a href="thread.html#23194">[ thread ]</a>
              <a href="subject.html#23194">[ subject ]</a>
              <a href="author.html#23194">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Folks,

Is the CONNECT tunnel designed in a way that enables it to &quot;enrich&quot; the
outgoing connection with mTLS authentication? &quot;tls_outgoing_options&quot; does
not seem to work the way I was hoping it does.

My destination server requires mTLS authentication of the client. I have a
valid key-cert pair and I can successfully execute a &quot;curl&quot; command to
fetch a document from that server using the key-cert pair at hand.

I want to put Squid between my clients (Maven, Gradle, Docker Engine, etc)
and the server so that clients would be configured to use the instance of
Squid as an HTTPS proxy but would not have to be configured with the mTLS
key-cert pair.

Here is how I see it:

Maven --- (HTTPS/CONNECT) ---&gt; Squid (stores my mTLS key-cert pair) ---
(mTLS/SSL) ---&gt; Server

Is this doable within Squid architecture?

I got it working using NGINX with some minor hiccups and I was hoping I can
do it more elegantly with Squid.


Thank you,
/Sergey
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20210114/5f99857d/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20210114/5f99857d/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="023193.html">[squid-users] generate-host-certificates=on fails to generate certificates for _some_ hosts
</A></li>
	<LI>Next message (by thread): <A HREF="023195.html">[squid-users] Mutual TLS for the upstream example
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23194">[ date ]</a>
              <a href="thread.html#23194">[ thread ]</a>
              <a href="subject.html#23194">[ subject ]</a>
              <a href="author.html#23194">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
