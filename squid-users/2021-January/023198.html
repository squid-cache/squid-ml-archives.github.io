<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Mutual TLS for the upstream example
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Mutual%20TLS%20for%20the%20upstream%20example&In-Reply-To=%3CCAB3mbkRJw9ft8LsHOWxcpE-V5HjUSrsOin%2Bjq3LFzq142HxJCQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023195.html">
   <LINK REL="Next"  HREF="023199.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Mutual TLS for the upstream example</H1>
    <B>Sergey Maslyakov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Mutual%20TLS%20for%20the%20upstream%20example&In-Reply-To=%3CCAB3mbkRJw9ft8LsHOWxcpE-V5HjUSrsOin%2Bjq3LFzq142HxJCQ%40mail.gmail.com%3E"
       TITLE="[squid-users] Mutual TLS for the upstream example">evolvah at gmail.com
       </A><BR>
    <I>Thu Jan 14 23:38:11 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="023195.html">[squid-users] Mutual TLS for the upstream example
</A></li>
        <LI>Next message (by thread): <A HREF="023199.html">[squid-users] Mutual TLS for the upstream example
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23198">[ date ]</a>
              <a href="thread.html#23198">[ thread ]</a>
              <a href="subject.html#23198">[ subject ]</a>
              <a href="author.html#23198">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thank you, Eliezer! I will look into it but it appears that the underlying
problem is not solvable by design of the mTLS handshake... There are corner
cases that can be solved but not the original issue.


On Thu, Jan 14, 2021 at 2:39 PM Eliezer Croitoru &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>&gt;
wrote:

&gt;<i> I don&#8217;t know about Squid but I assume varnish has this feature:
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://docs.varnish-software.com/varnish-cache-plus/features/backend-ssl/">https://docs.varnish-software.com/varnish-cache-plus/features/backend-ssl/</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> If you just need a GW without caching it should work as expected.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Eliezer
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ----
</I>&gt;<i>
</I>&gt;<i> Eliezer Croitoru
</I>&gt;<i>
</I>&gt;<i> Tech Support
</I>&gt;<i>
</I>&gt;<i> Mobile: +972-5-28704261
</I>&gt;<i>
</I>&gt;<i> Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>
</I>&gt;<i>
</I>&gt;<i> Zoom: Coming soon
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> *From:* squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; *On
</I>&gt;<i> Behalf Of *Sergey Maslyakov
</I>&gt;<i> *Sent:* Thursday, January 14, 2021 9:41 PM
</I>&gt;<i> *To:* <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> *Subject:* [squid-users] Mutual TLS for the upstream example
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Folks,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Is the CONNECT tunnel designed in a way that enables it to &quot;enrich&quot; the
</I>&gt;<i> outgoing connection with mTLS authentication? &quot;tls_outgoing_options&quot; does
</I>&gt;<i> not seem to work the way I was hoping it does.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> My destination server requires mTLS authentication of the client. I have a
</I>&gt;<i> valid key-cert pair and I can successfully execute a &quot;curl&quot; command to
</I>&gt;<i> fetch a document from that server using the key-cert pair at hand.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I want to put Squid between my clients (Maven, Gradle, Docker Engine, etc)
</I>&gt;<i> and the server so that clients would be configured to use the instance of
</I>&gt;<i> Squid as an HTTPS proxy but would not have to be configured with the mTLS
</I>&gt;<i> key-cert pair.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Here is how I see it:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Maven --- (HTTPS/CONNECT) ---&gt; Squid (stores my mTLS key-cert pair) ---
</I>&gt;<i> (mTLS/SSL) ---&gt; Server
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Is this doable within Squid architecture?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I got it working using NGINX with some minor hiccups and I was hoping I
</I>&gt;<i> can do it more elegantly with Squid.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thank you,
</I>&gt;<i>
</I>&gt;<i> /Sergey
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20210114/7b8a679b/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20210114/7b8a679b/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="023195.html">[squid-users] Mutual TLS for the upstream example
</A></li>
	<LI>Next message (by thread): <A HREF="023199.html">[squid-users] Mutual TLS for the upstream example
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23198">[ date ]</a>
              <a href="thread.html#23198">[ thread ]</a>
              <a href="subject.html#23198">[ subject ]</a>
              <a href="author.html#23198">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
