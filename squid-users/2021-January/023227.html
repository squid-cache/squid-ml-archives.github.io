<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid doesn't notice AD group changes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20doesn%27t%20notice%20AD%20group%20changes&In-Reply-To=%3C8298afbba8b8bd6e9646750dc31f7d3a536dcb88.camel%40genua.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023224.html">
   <LINK REL="Next"  HREF="023230.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid doesn't notice AD group changes</H1>
    <B>Klaus Brandl</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20doesn%27t%20notice%20AD%20group%20changes&In-Reply-To=%3C8298afbba8b8bd6e9646750dc31f7d3a536dcb88.camel%40genua.de%3E"
       TITLE="[squid-users] Squid doesn't notice AD group changes">klaus_brandl at genua.de
       </A><BR>
    <I>Wed Jan 20 16:21:18 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="023224.html">[squid-users] Squid doesn't notice AD group changes
</A></li>
        <LI>Next message (by thread): <A HREF="023230.html">[squid-users] Squid doesn't notice AD group changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23227">[ date ]</a>
              <a href="thread.html#23227">[ thread ]</a>
              <a href="subject.html#23227">[ subject ]</a>
              <a href="author.html#23227">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>some similar problem here...

What type of acl do you use for the group selection? Could you please
post the related config lines?

Remember, the client caches also the group informations, i have to
logout/login to let this take effect.
(check with &quot;whoami /groups&quot;)

Regards

Klaus

Am Mittwoch, den 20.01.2021, 14:50 +0100 schrieb
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">heimarbeit123.99 at web.de</A>:
&gt;<i> Hello all! :)
</I>&gt;<i>  
</I>&gt;<i> I am running squid 4.1 on the newest Linux Mint with Kerberos
</I>&gt;<i> SSO(connected to my AD), so I can check for AD groups and therefore
</I>&gt;<i> block websites and so on. Thanks to the very good documentation
</I>&gt;<i> everything looks good so far!
</I>&gt;<i> But there is one realy big problem: Squid does not recognize AD group
</I>&gt;<i> membership changes.
</I>&gt;<i> What does that mean?
</I>&gt;<i>  
</I>&gt;<i> Imagine I have TestUser1 and TestGroup1 and Testgroup2 in my AD. If I
</I>&gt;<i> join TestUser1 to Testgroup1 everything is working(the first time
</I>&gt;<i> ever, this specific user is getting member of one of these two
</I>&gt;<i> groups). SSO works and the forbidden websites get blocked. So far so
</I>&gt;<i> good ;)
</I>&gt;<i> But if I remove TestUser1 from TestGroup1 and make him a member of
</I>&gt;<i> Testgroup2, shit is about to hit the fan!
</I>&gt;<i> After some seconds(winbind cache time = 30 in smb.conf) winbind
</I>&gt;<i> recognizes, that TestUser1 is not member of TestGroup1 anymore, but
</I>&gt;<i> now is a member of Testgroup2. But Squid doesn't!! Squid further
</I>&gt;<i> treats TestUser1 as he would still be in TestGroup1.
</I>&gt;<i> But if I now add a completly new user TestUser2 to the AD and then to
</I>&gt;<i> Testgroup2, squid will treat this user corretly. If I then remove
</I>&gt;<i> TestUser2 from Testgroup2 and add this user to TestGroup1, same shit
</I>&gt;<i> again: winbind recognizes the change, but squid still treats
</I>&gt;<i> TestUser2 like he would be member of TestGroup2.
</I>&gt;<i>  
</I>&gt;<i> What I tried:
</I>&gt;<i> -remove cache (net cache flush, &quot;cache deny all&quot;, &quot;no_cache deny
</I>&gt;<i> all&quot;)
</I>&gt;<i> -remove squid with &quot;purge&quot; and reinstall it, still same problem
</I>&gt;<i>  
</I>&gt;<i> Can anyone help???
</I>&gt;<i>  
</I>&gt;<i> remember: Everything works with a new user, so I dont think kerberos
</I>&gt;<i> is the problem. And winbind recognizes the change, so I think winbind
</I>&gt;<i> is well configured too. Maybe squid is caching something(only
</I>&gt;<i> explanation for me) but I don't see any caching.. Maybe someone had
</I>&gt;<i> the same issue. Would be awesome, if someone could help me!
</I>&gt;<i>  
</I>&gt;<i> Regards
</I>&gt;<i> Philipp
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I></PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="023224.html">[squid-users] Squid doesn't notice AD group changes
</A></li>
	<LI>Next message (by thread): <A HREF="023230.html">[squid-users] Squid doesn't notice AD group changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23227">[ date ]</a>
              <a href="thread.html#23227">[ thread ]</a>
              <a href="subject.html#23227">[ subject ]</a>
              <a href="author.html#23227">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
