<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] chromium based browsers don't play a video, when sslbump is enabled
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20chromium%20based%20browsers%20don%27t%20play%20a%20video%2C%0A%20when%20sslbump%20is%20enabled&In-Reply-To=%3C000901d6ef4d%2472ff69f0%2458fe3dd0%24%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023226.html">
   <LINK REL="Next"  HREF="023234.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] chromium based browsers don't play a video, when sslbump is enabled</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20chromium%20based%20browsers%20don%27t%20play%20a%20video%2C%0A%20when%20sslbump%20is%20enabled&In-Reply-To=%3C000901d6ef4d%2472ff69f0%2458fe3dd0%24%40gmail.com%3E"
       TITLE="[squid-users] chromium based browsers don't play a video, when sslbump is enabled">ngtech1ltd at gmail.com
       </A><BR>
    <I>Wed Jan 20 16:58:16 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="023226.html">[squid-users] chromium based browsers don't play a video, when sslbump is enabled
</A></li>
        <LI>Next message (by thread): <A HREF="023234.html">[squid-users] chromium based browsers don't play a video, when sslbump is enabled
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23228">[ date ]</a>
              <a href="thread.html#23228">[ thread ]</a>
              <a href="subject.html#23228">[ subject ]</a>
              <a href="author.html#23228">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I can watch both Edge and Chromium here with a &quot;naked&quot; sslbump:
1611161802.690  16176 192.168.189.48 TCP_MISS/206 30704989 GET <A HREF="https://admin.wissen-ad.de/storage/TEST/Big_Buck_Bunny_1080_10s_30MB.mp4">https://admin.wissen-ad.de/storage/TEST/Big_Buck_Bunny_1080_10s_30MB.mp4</A> - ORIGINAL_DST/85.214.58.228 video/mp4 admin.wissen-ad.de

# squid -v
Squid Cache: Version 5.0.4-20201125-r5fadc09ee
Service Name: squid

This binary uses OpenSSL 1.1.1g FIPS  21 Apr 2020. For legal restrictions on distribution see <A HREF="https://www.openssl.org/source/license.html">https://www.openssl.org/source/license.html</A>

configure options:  '--build=x86_64-redhat-linux-gnu' '--host=x86_64-redhat-linux-gnu' '--program-prefix=' '--prefix=/usr' '--exec-prefix=/usr' '--bindir=/usr/bin' '--sbindir=/usr/sbin' '--sysconfdir=/etc' '--datadir=/usr/share' '--includedir=/usr/include' '--libdir=/usr/lib64' '--libexecdir=/usr/libexec' '--sharedstatedir=/var/lib' '--mandir=/usr/share/man' '--infodir=/usr/share/info' '--exec_prefix=/usr' '--libexecdir=/usr/lib64/squid' '--localstatedir=/var' '--datadir=/usr/share/squid' '--sysconfdir=/etc/squid' '--with-logdir=/var/log/squid' '--with-pidfile=/var/run/squid.pid' '--disable-dependency-tracking' '--enable-follow-x-forwarded-for' '--enable-auth' '--enable-auth-basic=DB,LDAP,NCSA,PAM,POP3,RADIUS,SASL,SMB,getpwnam,fake' '--enable-auth-ntlm=fake' '--enable-auth-digest=file,LDAP,eDirectory' '--enable-auth-negotiate=kerberos,wrapper' '--enable-external-acl-helpers=wbinfo_group,kerberos_ldap_group,LDAP_group,delayer,file_userip,SQL_session,unix_group,session,time_quota' '--enable-cache-digests' '--enable-cachemgr-hostname=localhost' '--enable-delay-pools' '--enable-epoll' '--enable-icap-client' '--enable-ident-lookups' '--enable-linux-netfilter' '--enable-removal-policies=heap,lru' '--enable-snmp' '--enable-storeio=aufs,diskd,ufs,rock' '--enable-wccpv2' '--enable-esi' '--enable-security-cert-generators' '--enable-security-cert-validators' '--enable-icmp' '--with-aio' '--with-default-user=squid' '--with-filedescriptors=16384' '--with-dl' '--with-openssl' '--enable-ssl-crtd' '--with-pthreads' '--with-included-ltdl' '--disable-arch-native' '--without-nettle' 'build_alias=x86_64-redhat-linux-gnu' 'host_alias=x86_64-redhat-linux-gnu' 'CC=gcc' 'CFLAGS=-O2  -fexceptions -g -grecord-gcc-switches -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -fstack-protector-strong -specs=/usr/lib/rpm/redhat/redhat-annobin-cc1  -m64 -mtune=generic -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection' 'LDFLAGS=-Wl,-z,relro -Wl,--as-needed  -Wl,-z,now -specs=/usr/lib/rpm/redhat/redhat-hardened-ld ' 'CXX=g++' 'CXXFLAGS=-O2  -fexceptions -g -grecord-gcc-switches -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -fstack-protector-strong -specs=/usr/lib/rpm/redhat/redhat-annobin-cc1  -m64 -mtune=generic -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection -fPIC' 'PKG_CONFIG_PATH=:/usr/lib64/pkgconfig:/usr/share/pkgconfig' 'LT_SYS_LIBRARY_PATH=/usr/lib64:' --enable-ltdl-convenience


Eliezer

----
Eliezer Croitoru
Tech Support
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>
Zoom: Coming soon


-----Original Message-----
From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; On Behalf Of Dieter Bloms
Sent: Wednesday, January 20, 2021 6:01 PM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] chromium based browsers don't play a video, when sslbump is enabled

Hello Eliezer,

I've tested with chrome 87.0.4280.141 and Edge 87.0.664.75.

On Wed, Jan 20, Eliezer Croitoru wrote:

&gt;<i> It's not clear if only Chromium or also a simple Chrome.
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> Eliezer
</I>&gt;<i> 
</I>&gt;<i> ----
</I>&gt;<i> Eliezer Croitoru
</I>&gt;<i> Tech Support
</I>&gt;<i> Mobile: +972-5-28704261
</I>&gt;<i> Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>
</I>&gt;<i> Zoom: Coming soon
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; On Behalf Of Dieter Bloms
</I>&gt;<i> Sent: Wednesday, January 20, 2021 1:26 PM
</I>&gt;<i> To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> Subject: [squid-users] chromium based browsers don't play a video, when sslbump is enabled
</I>&gt;<i> 
</I>&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> I use squid 4.13 with enabled sslbump.
</I>&gt;<i> Chromium based browsers like chrome and edge don't play this video
</I>&gt;<i> <A HREF="https://admin.wissen-ad.de/storage/TEST/Big_Buck_Bunny_1080_10s_30MB.mp4">https://admin.wissen-ad.de/storage/TEST/Big_Buck_Bunny_1080_10s_30MB.mp4</A>
</I>&gt;<i> The firefox browser and the old internet explorer have no problems.
</I>&gt;<i> 
</I>&gt;<i> When I disable sslbumping for this destination the chromium based
</I>&gt;<i> browsers work as well.
</I>&gt;<i> 
</I>&gt;<i> Here are some parts of my config:
</I>&gt;<i> 
</I>&gt;<i> --snip--
</I>&gt;<i> http_port MYIP:8080 ssl-bump generate-host-certificates=on dynamic_cert_mem_cache_size=32MB cert=/etc/squid/cert.pem key=/etc/squid/key.pem tls-dh=/etc/squid/dhparams.pem
</I>&gt;<i> sslcrtd_program /usr/sbin/security_file_certgen -s /var/cache/squid/sslcert_db -M 32MB
</I>&gt;<i> sslcrtd_children 32 startup=10 idle=3
</I>&gt;<i> tls_outgoing_options capath=/etc/ssl/certs min-version=1.2
</I>&gt;<i> tls_outgoing_options cipher=TLSv1.2:+aRSA:+SHA384:+SHA256:+DH:-kRSA:!PSK:!eNULL:!aNULL:!DSS:!AESCCM:!CAMELLIA:!ARIA:AES256-SHA:AES128-SHA:@SECLEVEL=1
</I>&gt;<i> 
</I>&gt;<i> acl nobumping dstdomain &quot;/etc/squid/nohttpsscan.domains&quot;
</I>&gt;<i> ssl_bump splice nobumping
</I>&gt;<i> ssl_bump bump all
</I>&gt;<i> --snip--
</I>&gt;<i> 
</I>&gt;<i> with wget or curl I can download the mp4 file in both cases (with and without sslbump)
</I>&gt;<i> 
</I>&gt;<i> Can anybody try to view the video in a chromium based browser with enabled sslbump ?
</I>&gt;<i> 
</I>&gt;<i> Thank you very much.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Regards
</I>&gt;<i> 
</I>&gt;<i>   Dieter
</I>&gt;<i> 
</I>&gt;<i> --
</I>&gt;<i> I do not get viruses because I do not use MS software.
</I>&gt;<i> If you use Outlook then please do not put my email address in your
</I>&gt;<i> address-book so that WHEN you get a virus it won't use my address in the
</I>&gt;<i> From field.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>
-- 
Gru&#223;

  Dieter

--
I do not get viruses because I do not use MS software.
If you use Outlook then please do not put my email address in your
address-book so that WHEN you get a virus it won't use my address in the
&gt;<i>From field.
</I>_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="023226.html">[squid-users] chromium based browsers don't play a video, when sslbump is enabled
</A></li>
	<LI>Next message (by thread): <A HREF="023234.html">[squid-users] chromium based browsers don't play a video, when sslbump is enabled
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23228">[ date ]</a>
              <a href="thread.html#23228">[ thread ]</a>
              <a href="subject.html#23228">[ subject ]</a>
              <a href="author.html#23228">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
