<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Problems with HTTPS on Squid
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Problems%20with%20HTTPS%20on%20Squid&In-Reply-To=%3C202107122023.02446.Antony.Stone%40squid.open.source.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023876.html">
   <LINK REL="Next"  HREF="023882.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Problems with HTTPS on Squid</H1>
    <B>Antony Stone</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Problems%20with%20HTTPS%20on%20Squid&In-Reply-To=%3C202107122023.02446.Antony.Stone%40squid.open.source.it%3E"
       TITLE="[squid-users] Problems with HTTPS on Squid">Antony.Stone at squid.open.source.it
       </A><BR>
    <I>Mon Jul 12 18:23:02 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="023876.html">[squid-users] Problems with HTTPS on Squid
</A></li>
        <LI>Next message (by thread): <A HREF="023882.html">[squid-users] Sharing info from eCAP adapter with other adapters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23877">[ date ]</a>
              <a href="thread.html#23877">[ thread ]</a>
              <a href="subject.html#23877">[ subject ]</a>
              <a href="author.html#23877">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Monday 12 July 2021 at 20:12:03, Marcio B. wrote:

&gt;<i> I have the following problem on my Squid 4.6 on Debian 10.
</I>&gt;<i> 
</I>&gt;<i> Squid does not redirect the user to the error page when blocking an HTTPS
</I>&gt;<i> url. On HTTP it works correctly.
</I>
Short answer - it can't.

Longer answer - browser requests <A HREF="https://thing.example.com">https://thing.example.com</A>

Squid won't allow connection to thing.example.com, and wants to send the 
browser to an error page instead.

The error page cannot possibly have the correct certificate for 
<A HREF="https://thing.example.com">https://thing.example.com</A> (because that's signed by some genuine CA), so the 
browser won't accept the error page as being valid.

Squid cannot even send an HTTP 302 redirect back to the browser, because that 
also is HTTPS content, and would need to have the correct certification for the 
browser to accept it and follow the redirect.

So, what you want is understandable, but not possible.

The only option I can think of is to add a CA certificate to all your browsers, 
and get Squid (somehow; sorry, I don't know how) to issue either a redirect or 
a substitute web page, claiming to tbe the original web server, and with a 
certificate signed by that CA that your browsers now trust.

I suspect that involves transparent interception, but someone might know how / 
whether it can be done.


Antony.

-- 
&quot;The future is already here.   It's just not evenly distributed yet.&quot;

 - William Gibson

                                                   Please reply to the list;
                                                         please *don't* CC me.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="023876.html">[squid-users] Problems with HTTPS on Squid
</A></li>
	<LI>Next message (by thread): <A HREF="023882.html">[squid-users] Sharing info from eCAP adapter with other adapters
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23877">[ date ]</a>
              <a href="thread.html#23877">[ thread ]</a>
              <a href="subject.html#23877">[ subject ]</a>
              <a href="author.html#23877">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
