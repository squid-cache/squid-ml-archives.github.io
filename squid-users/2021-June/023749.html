<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] TCP Connection to parent failed
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20TCP%20Connection%20to%20parent%20failed&In-Reply-To=%3C622a95ad-99d4-1941-1096-5d25923cd6b0%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023740.html">
   <LINK REL="Next"  HREF="023743.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] TCP Connection to parent failed</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20TCP%20Connection%20to%20parent%20failed&In-Reply-To=%3C622a95ad-99d4-1941-1096-5d25923cd6b0%40measurement-factory.com%3E"
       TITLE="[squid-users] TCP Connection to parent failed">rousskov at measurement-factory.com
       </A><BR>
    <I>Tue Jun  8 16:02:47 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="023740.html">[squid-users] TCP Connection to parent failed
</A></li>
        <LI>Next message (by thread): <A HREF="023743.html">[squid-users] tarpit, silent-drop vs. DDoS ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23749">[ date ]</a>
              <a href="thread.html#23749">[ thread ]</a>
              <a href="subject.html#23749">[ subject ]</a>
              <a href="author.html#23749">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 6/8/21 7:43 AM, Frank Schichterich wrote:

&gt;<i> i am running multiple squid servers in our company. We have around 5k
</I>&gt;<i> current connections per proxy during work hours.
</I>&gt;<i> I recently switched two Server from Squid 3.5.28 to Squid 4.15.
</I>&gt;<i> 
</I>&gt;<i> The moment i did this my cache.log got filled with &quot;TCP connection to
</I>&gt;<i> parent-proxy.de/80 failed&quot;
</I>&gt;<i> entries.&#160;Approximately 50 entries per hour. But the proxy seems to run
</I>&gt;<i> normally.&#160;
</I>&gt;<i> The proxies running with version 3.5.28 dont show any tcp connection
</I>&gt;<i> errors (to the exact same parent proxy).
</I>
Squid v3 does not log a lot of things that newers Squids log. However,
the message in question is present in v3.5 as well, which increases the
probability (but does not guarantee) that you are dealing with a problem
that should be addressed rather than ignored.


&gt;<i> I don't have any information about the parent proxies. They are part of
</I>&gt;<i> our &quot;provider&quot;.
</I>

&gt;<i> Is there anything i can do / change?
</I>
Probably. I recommend these steps:

  1. Figure out _why_ these connections fail.
  2. Either fix the problem or quell the messages about it.

The first step probably requires analyzing debugging cache.logs and/or
packet traces to determine the reason behind those closures. It could be
idle connection timeouts, capacity limits, access control violations, or
even Squid bugs.


HTH,

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="023740.html">[squid-users] TCP Connection to parent failed
</A></li>
	<LI>Next message (by thread): <A HREF="023743.html">[squid-users] tarpit, silent-drop vs. DDoS ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23749">[ date ]</a>
              <a href="thread.html#23749">[ thread ]</a>
              <a href="subject.html#23749">[ subject ]</a>
              <a href="author.html#23749">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
