<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Newbie question, How to fully disable/disallow https?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Newbie%20question%2C%0A%20How%20to%20fully%20disable/disallow%20https%3F&In-Reply-To=%3Ca0a584d7-e77a-fd20-5205-533ae5ee5cbd%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023796.html">
   <LINK REL="Next"  HREF="023798.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Newbie question, How to fully disable/disallow https?</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Newbie%20question%2C%0A%20How%20to%20fully%20disable/disallow%20https%3F&In-Reply-To=%3Ca0a584d7-e77a-fd20-5205-533ae5ee5cbd%40measurement-factory.com%3E"
       TITLE="[squid-users] Newbie question, How to fully disable/disallow https?">rousskov at measurement-factory.com
       </A><BR>
    <I>Tue Jun 22 20:37:16 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="023796.html">[squid-users] Newbie question, How to fully disable/disallow https?
</A></li>
        <LI>Next message (by thread): <A HREF="023798.html">[squid-users] Newbie question, How to fully disable/disallow https?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23797">[ date ]</a>
              <a href="thread.html#23797">[ thread ]</a>
              <a href="subject.html#23797">[ subject ]</a>
              <a href="author.html#23797">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 6/22/21 4:28 PM, Arctic5824 wrote:
&gt;&gt;<i> To disable HTTPS access through the proxy, simply deny all CONNECT
</I>&gt;&gt;<i> requests using http_access rules.
</I>
&gt;<i> Hey! thanks for the info, I just tried that but it seems https is still being allowed, and I can see it in the logs as well
</I>&gt;<i> &quot;TCP_TUNNEL/200 717 CONNECT s.youtube.com:443 -&quot;
</I>&gt;<i> my config is <A HREF="https://pastebin.com/8txzkEnG">https://pastebin.com/8txzkEnG</A>
</I>&gt;<i> and a version of the config without comments: <A HREF="https://pastebin.com/zuJYQpXW">https://pastebin.com/zuJYQpXW</A>
</I>
&gt;<i> acl CONNECT method CONNECT
</I>&gt;<i> http_access allow localhost
</I>&gt;<i> http_access deny CONNECT
</I>
Squid bugs notwithstanding, either your Squid is not running with the
configuration that you have shared with us OR that logged request comes
from localhost. If you are not sure, I suggest shutting down Squid,
making sure that nobody listens on port 3128 and then restarting Squid.
Due to the first http_access rule, the test request must not come from
the same machine Squid runs on.

HTH,

Alex.
P.S. If you are worried about custom clients or scripts (not regular
browsers) bypassing your controls, then you will also need to ban &quot;GET
<A HREF="https://...">https://...</A>&quot; requests, but let's figure out the above basics first.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="023796.html">[squid-users] Newbie question, How to fully disable/disallow https?
</A></li>
	<LI>Next message (by thread): <A HREF="023798.html">[squid-users] Newbie question, How to fully disable/disallow https?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23797">[ date ]</a>
              <a href="thread.html#23797">[ thread ]</a>
              <a href="subject.html#23797">[ subject ]</a>
              <a href="author.html#23797">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
