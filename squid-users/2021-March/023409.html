<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid full request logging
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20full%20request%20logging&In-Reply-To=%3C7447d4bc-e8f5-d51b-f91c-e15d7921b285%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023408.html">
   <LINK REL="Next"  HREF="023410.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid full request logging</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20full%20request%20logging&In-Reply-To=%3C7447d4bc-e8f5-d51b-f91c-e15d7921b285%40measurement-factory.com%3E"
       TITLE="[squid-users] Squid full request logging">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Mar  4 21:23:17 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="023408.html">[squid-users] Squid full request logging
</A></li>
        <LI>Next message (by thread): <A HREF="023410.html">[squid-users] Squid full request logging
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23409">[ date ]</a>
              <a href="thread.html#23409">[ thread ]</a>
              <a href="subject.html#23409">[ subject ]</a>
              <a href="author.html#23409">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 3/4/21 2:52 PM, Niels Hofmans wrote:

&gt;<i> is it possible to do full request/response logging?
</I>
Squid can log HTTP headers with %&gt;h and %&lt;h logformat codes.

Squid cannot log HTTP message bodies.


&gt;<i> I do not see the appropriate log_format directive in the docs.
</I>&gt;<i> I was hoping not having to do this in my ICAP service since this slows
</I>&gt;<i> down approval of the HTTP request. (Empty preview v.s. a request capped
</I>&gt;<i> at 1MB that needs to be sent over every time)
</I>
FWIW, an ICAP or eCAP service can start responding to the request
_before_ the service receives the entire HTTP message body. To get
things going, all the service needs is HTTP headers (and even that is,
technically, optional in some cases).

Using an adaptation service is still an overhead, of course, but, very
few legitimate Squid use cases involve logging message bodies, so there
is no built-in mechanism optimized for that specific rare purpose
(yet?). The fastest option available today is probably a dedicated eCAP
service that refuses to adapt the message bit continues to receive (and
log) the message body.


HTH,

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="023408.html">[squid-users] Squid full request logging
</A></li>
	<LI>Next message (by thread): <A HREF="023410.html">[squid-users] Squid full request logging
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23409">[ date ]</a>
              <a href="thread.html#23409">[ thread ]</a>
              <a href="subject.html#23409">[ subject ]</a>
              <a href="author.html#23409">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
