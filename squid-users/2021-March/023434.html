<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid Logs - TAG_NONE/503 errors
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Logs%20-%20TAG_NONE/503%20errors&In-Reply-To=%3C65c93c05-99dc-6fab-aa86-b7f7bdb5bba6%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023433.html">
   <LINK REL="Next"  HREF="023435.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid Logs - TAG_NONE/503 errors</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Logs%20-%20TAG_NONE/503%20errors&In-Reply-To=%3C65c93c05-99dc-6fab-aa86-b7f7bdb5bba6%40measurement-factory.com%3E"
       TITLE="[squid-users] Squid Logs - TAG_NONE/503 errors">rousskov at measurement-factory.com
       </A><BR>
    <I>Wed Mar 10 14:19:48 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="023433.html">[squid-users] Squid Logs - TAG_NONE/503 errors
</A></li>
        <LI>Next message (by thread): <A HREF="023435.html">[squid-users] Squid Logs - TAG_NONE/503 errors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23434">[ date ]</a>
              <a href="thread.html#23434">[ thread ]</a>
              <a href="subject.html#23434">[ subject ]</a>
              <a href="author.html#23434">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 3/10/21 8:15 AM, Arjun K wrote:
&gt;<i> Can you please let us know what this error means - TAG_NONE/503 in the
</I>&gt;<i> access logs.
</I>
Most likely, Squid generated an error response and sent that to the
client. The response was probably generated before Squid made the cache
hit/miss decision.

In modern Squids, adding %err_code/%err_detail to your custom logformat
definition may help detail the error further in some cases. In all
Squids, looking at the Squid error response itself may help detail the
error further.


HTH,

Alex.


&gt;<i> Some times, I get the above error for all the URLs and no one is able to
</I>&gt;<i> reach the internet and now I am facing the issue only for specific URLs.
</I>&gt;<i> 
</I>&gt;<i> The concern is that the issue gets automatically solved without making
</I>&gt;<i> any changes to any configuration and it comes back again and again and
</I>&gt;<i> it gets resolved.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> The below is the configuration in the proxy server.
</I>&gt;<i> 
</I>&gt;<i> ###IP Ranges
</I>&gt;<i> 
</I>&gt;<i> acl localnet src &quot;/etc/squid/linux_server.txt&quot;
</I>&gt;<i> acl localnet src &quot;/etc/squid/server_allowed.txt&quot;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ### URL - Allow / Deny
</I>&gt;<i> 
</I>&gt;<i> acl allowedurl dstdomain &quot;/etc/squid/allowed_url.txt&quot;
</I>&gt;<i> acl denylist dstdomain &quot;/etc/squid/denylist.txt&quot;
</I>&gt;<i> 
</I>&gt;<i> acl Safe_ports port 80 # http
</I>&gt;<i> acl Safe_ports port 443 # https
</I>&gt;<i> acl CONNECT method CONNECT
</I>&gt;<i> 
</I>&gt;<i> http_access deny denylist
</I>&gt;<i> http_access deny !Safe_ports
</I>&gt;<i> http_access allow allowedurl
</I>&gt;<i> 
</I>&gt;<i> http_access allow localhost manager
</I>&gt;<i> http_access deny manager
</I>&gt;<i> 
</I>&gt;<i> http_access allow localnet
</I>&gt;<i> http_access allow localhost
</I>&gt;<i> http_access deny all
</I>&gt;<i> 
</I>&gt;<i> http_port 8080
</I>&gt;<i> 
</I>&gt;<i> cache_dir ufs /var/spool/squid 10000 16 256
</I>&gt;<i> coredump_dir /var/spool/squid
</I>&gt;<i> 
</I>&gt;<i> refresh_pattern -i
</I>&gt;<i> windowsupdate.com/.*\.(cab|exe|ms[i|u|f]|[ap]sf|wm[v|a]|dat|zip) 4320
</I>&gt;<i> 80% 43200 reload-into-ims
</I>&gt;<i> refresh_pattern -i
</I>&gt;<i> microsoft.com/.*\.(cab|exe|ms[i|u|f]|[ap]sf|wm[v|a]|dat|zip) 4320 80%
</I>&gt;<i> 43200 reload-into-ims
</I>&gt;<i> refresh_pattern -i
</I>&gt;<i> windows.com/.*\.(cab|exe|ms[i|u|f]|[ap]sf|wm[v|a]|dat|zip) 4320 80%
</I>&gt;<i> 43200 reload-into-ims
</I>&gt;<i> refresh_pattern ^ftp:&#160; &#160; &#160; &#160; &#160; &#160;1440&#160; &#160; 20%&#160; &#160; &#160;10080
</I>&gt;<i> refresh_pattern ^gopher:&#160; &#160; &#160; &#160; 1440&#160; &#160; 0%&#160; &#160; &#160; 1440
</I>&gt;<i> refresh_pattern -i (/cgi-bin/|\?) 0&#160; &#160; &#160;0%&#160; &#160; &#160; 0
</I>&gt;<i> refresh_pattern .&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;0&#160; &#160; &#160; &#160;20%&#160; &#160; &#160;4320
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Could you please let me know what causes these issues and how to give a
</I>&gt;<i> permanent fix.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Regards
</I>&gt;<i> Arjun K.
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="023433.html">[squid-users] Squid Logs - TAG_NONE/503 errors
</A></li>
	<LI>Next message (by thread): <A HREF="023435.html">[squid-users] Squid Logs - TAG_NONE/503 errors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23434">[ date ]</a>
              <a href="thread.html#23434">[ thread ]</a>
              <a href="subject.html#23434">[ subject ]</a>
              <a href="author.html#23434">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
