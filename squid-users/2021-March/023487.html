<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] X-Next-Services
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20X-Next-Services&In-Reply-To=%3CCAGSk-40jH5BUhJYw-RKj000quZ3By2Q23jyUYB4q2uuTdA7dMw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023490.html">
   <LINK REL="Next"  HREF="023491.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] X-Next-Services</H1>
    <B>Moti Berger</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20X-Next-Services&In-Reply-To=%3CCAGSk-40jH5BUhJYw-RKj000quZ3By2Q23jyUYB4q2uuTdA7dMw%40mail.gmail.com%3E"
       TITLE="[squid-users] X-Next-Services">moberger at metanetworks.com
       </A><BR>
    <I>Thu Mar 25 13:06:41 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="023490.html">[squid-users] squid ftp list files problem
</A></li>
        <LI>Next message (by thread): <A HREF="023491.html">[squid-users] X-Next-Services
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23487">[ date ]</a>
              <a href="thread.html#23487">[ thread ]</a>
              <a href="subject.html#23487">[ subject ]</a>
              <a href="author.html#23487">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

I want to be able to skip all subsequent ICAP servers defined in squid
based on some logic I have in one of my ICAP servers.
I used the X-Next-Services and it seems to control only the current ICAP
chain.
I also saw it while configuring two ICAP servers to handle requests and one
ICAP server to handle responses. When the header was sent from the first
ICAP on the request chain, the ICAP request didn't arrive at the second
ICAP server handling requests but did get to the ICAP server that handles
responses. I wish to also skip the ICAP which handles the responses.
Is that possible?

If not, is it possible for an ICAP server to add an ICAP header during
request handling to be read by the other ICAP servers that come after it
when they handle the same request or the same request's response?
I'm aware I can add a header to the encapsulated HTTP request, but this is
something I want to avoid because I don't want to have a performance hit
because I need to copy all HTTP request bodies for this header (I work in
zero-bytes preview mode).

Thanks,
Moti
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20210325/bd098c1c/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20210325/bd098c1c/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="023490.html">[squid-users] squid ftp list files problem
</A></li>
	<LI>Next message (by thread): <A HREF="023491.html">[squid-users] X-Next-Services
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23487">[ date ]</a>
              <a href="thread.html#23487">[ thread ]</a>
              <a href="subject.html#23487">[ subject ]</a>
              <a href="author.html#23487">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
