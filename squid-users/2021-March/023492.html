<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid won't return cached even with refresh_pattern extra options override-lastmod override-expire ignore-reload ignore-no-store ignore-private store-stale
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20won%27t%20return%20cached%20even%20with%0A%20refresh_pattern%20extra%20options%20override-lastmod%20override-expire%0A%20ignore-reload%20ignore-no-store%20ignore-private%20store-stale&In-Reply-To=%3C9fd62eef-02d3-a46c-75bf-c717af869089%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023483.html">
   <LINK REL="Next"  HREF="023494.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid won't return cached even with refresh_pattern extra options override-lastmod override-expire ignore-reload ignore-no-store ignore-private store-stale</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20won%27t%20return%20cached%20even%20with%0A%20refresh_pattern%20extra%20options%20override-lastmod%20override-expire%0A%20ignore-reload%20ignore-no-store%20ignore-private%20store-stale&In-Reply-To=%3C9fd62eef-02d3-a46c-75bf-c717af869089%40measurement-factory.com%3E"
       TITLE="[squid-users] squid won't return cached even with refresh_pattern extra options override-lastmod override-expire ignore-reload ignore-no-store ignore-private store-stale">rousskov at measurement-factory.com
       </A><BR>
    <I>Fri Mar 26 19:35:54 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="023483.html">[squid-users] squid won't return cached even with refresh_pattern extra options override-lastmod override-expire ignore-reload ignore-no-store ignore-private store-stale
</A></li>
        <LI>Next message (by thread): <A HREF="023494.html">[squid-users] squid won't return cached even with refresh_pattern extra options override-lastmod override-expire ignore-reload ignore-no-store ignore-private store-stale
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23492">[ date ]</a>
              <a href="thread.html#23492">[ thread ]</a>
              <a href="subject.html#23492">[ subject ]</a>
              <a href="author.html#23492">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 3/24/21 3:34 PM, Miroslaw Malinowski wrote:
&gt;<i> I thought about upper service but as is not required at the moment,
</I>&gt;<i> introducing extra hop just to remove the header looks a bit like a
</I>&gt;<i> hammer approach. I'll look into how easily I can amend the code as the
</I>&gt;<i> other option is to introduce a proxy like a feature to the application,
</I>&gt;<i> so either way, it is a code change. The only problem here is that it's
</I>&gt;<i> an OPNSense squid service so I have to compile from source on BSD and
</I>&gt;<i> then keep adding in manually each time they do the update.
</I>
At the risk of stating the obvious: If your feature is officially
accepted into Squid sources, then you would not have to keep adding it
manually (once the changes reach your Squid packaging source).

Alex.


&gt;<i> On Wed, Mar 24, 2021 at 7:11 PM Alex Rousskov wrote:
</I>&gt;<i> 
</I>&gt;<i>     On 3/24/21 2:49 PM, Miroslaw Malinowski wrote:
</I>&gt;<i> 
</I>&gt;<i>     &gt; looking at the code and reading carefully your response, you're saying
</I>&gt;<i>     &gt; there is no way you can do it with squid.
</I>&gt;<i> 
</I>&gt;<i>     With Squid, your options include:
</I>&gt;<i> 
</I>&gt;<i>     1. Squid source code changes. Should not be too difficult and, IMO, a
</I>&gt;<i>     high-quality implementation would deserve official acceptance because it
</I>&gt;<i>     is a generally useful feature in line with existing control knobs.
</I>&gt;<i>     <A HREF="https://wiki.squid-cache.org/SquidFaq/AboutSquid#How_to_add_a_new_Squid_feature.2C_enhance.2C_of_fix_something.3F">https://wiki.squid-cache.org/SquidFaq/AboutSquid#How_to_add_a_new_Squid_feature.2C_enhance.2C_of_fix_something.3F</A>
</I>&gt;<i> 
</I>&gt;<i>     2. An adaptation service that removes Cache-Control:no-cache from the
</I>&gt;<i>     response before Squid processes it:
</I>&gt;<i>     <A HREF="https://wiki.squid-cache.org/SquidFaq/ContentAdaptation">https://wiki.squid-cache.org/SquidFaq/ContentAdaptation</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     HTH,
</I>&gt;<i> 
</I>&gt;<i>     Alex.
</I>&gt;<i> 
</I>&gt;<i>     &gt; On Wed, Mar 24, 2021 at 6:28 PM Miroslaw Malinowski wrote:
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160;Hi,
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160;You've right yes it's revalidating as API server I'm
</I>&gt;<i>     requesting data
</I>&gt;<i>     &gt;&#160; &#160; &#160;is setting Cache-Control: no-cache. My question is how I can force
</I>&gt;<i>     &gt;&#160; &#160; &#160;squid to cache and not validate as I know it's safe to do so. As
</I>&gt;<i>     &gt;&#160; &#160; &#160;I've explained earlier we are making the same request and
</I>&gt;<i>     receiving
</I>&gt;<i>     &gt;&#160; &#160; &#160;the same response from 100+ server so as to reduce number of
</I>&gt;<i>     &gt;&#160; &#160; &#160;requests to the external server we would like squid to cache the
</I>&gt;<i>     &gt;&#160; &#160; &#160;response and issue a cached version.
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160;2021/03/24 18:00:54.867 kid1| 22,3| refresh.cc(351) refreshCheck:
</I>&gt;<i>     &gt;&#160; &#160; &#160;YES: Must revalidate stale object (origin set no-cache or private)
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160;Mirek
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160;On Wed, Mar 24, 2021 at 6:15 PM Alex Rousskov
</I>&gt;<i>     &gt;&#160; &#160; &#160;&lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160;&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt;&gt;&gt; wrote:
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;On 3/24/21 12:48 PM, Miroslaw Malinowski wrote:
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; Probably, me missing on something silly or it can't be done
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;but I don't
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; know why but squid won't return the cached version even
</I>&gt;<i>     when I
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;turn all
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; override options ON in refresh_pattern.
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;AFAICT, no configuration options that can disable
</I>&gt;<i>     revalidation of
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;Cache-Control:no-cache responses. refresh_pattern does not
</I>&gt;<i>     have an
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;(equivalent of) &quot;ignore-no-cache-in-responses&quot; option.
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;IIRC, older Squids were violating an HTTP MUST by
</I>&gt;<i>     forgetting to
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;revalidate Cache-Control:no-cache responses, but that was
</I>&gt;<i>     fixed
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;in [1].
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;Your Squid version has that fix.
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;[1]
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160;
</I>&gt;<i>     &#160;<A HREF="https://github.com/squid-cache/squid/commit/fa83b766a208b27abed8da4c9073cf8784cf10fa">https://github.com/squid-cache/squid/commit/fa83b766a208b27abed8da4c9073cf8784cf10fa</A>
</I>&gt;<i>     &lt;<A HREF="https://github.com/squid-cache/squid/commit/fa83b766a208b27abed8da4c9073cf8784cf10fa">https://github.com/squid-cache/squid/commit/fa83b766a208b27abed8da4c9073cf8784cf10fa</A>&gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160;
</I>&gt;<i>     &#160;&lt;<A HREF="https://github.com/squid-cache/squid/commit/fa83b766a208b27abed8da4c9073cf8784cf10fa">https://github.com/squid-cache/squid/commit/fa83b766a208b27abed8da4c9073cf8784cf10fa</A>
</I>&gt;<i>     &lt;<A HREF="https://github.com/squid-cache/squid/commit/fa83b766a208b27abed8da4c9073cf8784cf10fa">https://github.com/squid-cache/squid/commit/fa83b766a208b27abed8da4c9073cf8784cf10fa</A>&gt;&gt;
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; With debug, I can see the rule is matched and the cache is
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;fresh but
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; still in access.log is TCP_REFRESH_MODIFIED
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; 2021-03-24T15:04:34&#160; &#160;squid&#160; &#160;.710 kid1| 11,3| http.cc(982)
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; haveParsedReplyHeaders: decided: cache positively and share
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;because
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;FYI: You are looking at cache.log lines logged _after_
</I>&gt;<i>     Squid has
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;already
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;decided to refresh the cached version. If you want to analyze
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;why Squid
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;decided to refresh the cached version, you should look
</I>&gt;<i>     _before_
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;Squid
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;logged the request to the server (and before any FwdState.cc
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;lines). I
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;have not checked the details, but I bet that your Squid
</I>&gt;<i>     revalidates
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;because of Cache-Control:no-cache in the response. Look for
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&quot;YES: Must
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;revalidate stale object&quot;.
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;HTH,
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;Alex.
</I>&gt;<i>     &gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; squid conf:
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; refresh_pattern -i &lt;URL&gt; 4320 80% 129600 override-lastmod
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; override-expire ignore-reload ignore-no-store ignore-private
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;store-stale
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; curl headers:
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; curl --insecure --verbose --request GET --url 'URL'
</I>&gt;<i>     &gt;/dev/null
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; * TCP_NODELAY set
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; * ALPN, offering h2
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; * ALPN, offering http/1.1
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; * successfully set certificate verify locations:
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; * &#160;&#160;CAfile: /etc/ssl/certs/ca-certificates.crt
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; &#160;CApath: /etc/ssl/certs
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; } [5 bytes data]
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; * TLSv1.3 (OUT), TLS handshake, Client hello (1):
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; } [512 bytes data]
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; * TLSv1.3 (IN), TLS handshake, Server hello (2):
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; { [122 bytes data]
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; * TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8):
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; { [6 bytes data]
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; * TLSv1.3 (IN), TLS handshake, Certificate (11):
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; { [1956 bytes data]
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; * TLSv1.3 (IN), TLS handshake, CERT verify (15):
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; { [78 bytes data]
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; * TLSv1.3 (IN), TLS handshake, Finished (20):
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; { [52 bytes data]
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; * TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1):
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; } [1 bytes data]
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; * TLSv1.3 (OUT), TLS handshake, Finished (20):
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; } [52 bytes data]
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; * SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt;&gt; GET URL HTTP/1.1
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt;&gt; Host: URL
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt;&gt; User-Agent: curl/7.68.0
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt;&gt; Accept: */*
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt;&gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; { [5 bytes data]
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; * TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; { [217 bytes data]
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; * TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; { [217 bytes data]
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; * old SSL session ID is stale, removing
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; { [5 bytes data]
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; * Mark bundle as not supporting multiuse
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; &lt; HTTP/1.1 200 OK
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; &lt; Cache-Control: no-cache
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; &lt; Content-Type: application/json
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; &lt; X-Cloud-Trace-Context: d3c27833b8b4312ce31a2dbae7e12fd0
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; &lt; Date: Wed, 24 Mar 2021 15:04:34 GMT
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; &lt; Server: Google Frontend
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; &lt; Content-Length: 7950
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; &lt; X-Cache: MISS from server
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; &lt; X-Cache-Lookup: HIT from server
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; &lt; Via: 1.1 server (squid/4.14)
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; &lt; Connection: keep-alive
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; access log:
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; 243 172.16.230.249 TCP_REFRESH_MODIFIED/200 8328 GET URL -
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; ORIGINAL_DST/IP application/json
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; cache log:
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; 2021-03-24T15:04:34&#160; &#160;squid&#160; &#160;.710 kid1| 11,3| http.cc(982)
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; haveParsedReplyHeaders: decided: cache positively and share
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;because
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; refresh check returned cacheable; HTTP status 200
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;e:=p2V/0x34868914670*3&#160; &#160; &#160; &#160;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; 2021-03-24T15:04:34&#160; &#160;squid&#160; &#160;.710 kid1| 22,3|
</I>&gt;<i>     refresh.cc(470)
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;refreshCheck:
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; returning FRESH_MIN_RULE&#160; &#160; &#160; &#160;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; 2021-03-24T15:04:34&#160; &#160;squid&#160; &#160;.710 kid1| 22,3|
</I>&gt;<i>     refresh.cc(455)
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;refreshCheck:
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; Object isn't stale..&#160; &#160;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; 2021-03-24T15:04:34&#160; &#160;squid&#160; &#160;.710 kid1| 22,3|
</I>&gt;<i>     refresh.cc(327)
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;refreshCheck:
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; Staleness = -1&#160; &#160; &#160; &#160; &#160;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; 2021-03-24T15:04:34&#160; &#160;squid&#160; &#160;.710 kid1| 22,3|
</I>&gt;<i>     refresh.cc(199)
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; refreshStaleness: FRESH: age (60 sec) is less than
</I>&gt;<i>     configured
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;minimum
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; (259200 sec)&#160; &#160;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; 2021-03-24T15:04:34&#160; &#160;squid&#160; &#160;.710 kid1| 22,3|
</I>&gt;<i>     refresh.cc(166)
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; refreshStaleness: No explicit expiry given, using
</I>&gt;<i>     heuristics to
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; determine freshness&#160; &#160;&#160;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; 2021-03-24T15:04:34&#160; &#160;squid&#160; &#160;.710 kid1| 22,3|
</I>&gt;<i>     refresh.cc(307)
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;refreshCheck:
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; entry-&gt;timestamp: Wed, 24 Mar 2021 15:04:34 GMT&#160; &#160; &#160; &#160;&#160;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; 2021-03-24T15:04:34&#160; &#160;squid&#160; &#160;.710 kid1| 22,3|
</I>&gt;<i>     refresh.cc(305)
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;refreshCheck:
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; check_time: Wed, 24 Mar 2021 15:05:34 GMT&#160; &#160; &#160;&#160;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; 2021-03-24T15:04:34&#160; &#160;squid&#160; &#160;.710 kid1| 22,3|
</I>&gt;<i>     refresh.cc(303)
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;refreshCheck:
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; age: 60&#160; &#160; &#160; &#160;&#160;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; 2021-03-24T15:04:34&#160; &#160;squid&#160; &#160;.710 kid1| 22,3|
</I>&gt;<i>     refresh.cc(301)
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;refreshCheck:
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; Matched 'URL 259200 80%% 7776000'&#160; &#160; &#160;&#160;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; 2021-03-24T15:04:34&#160; &#160;squid&#160; &#160;.710 kid1| 22,3|
</I>&gt;<i>     refresh.cc(279)
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;refreshCheck:
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; checking freshness of URI: <A HREF="https://URL">https://URL</A> &lt;<A HREF="https://URL">https://URL</A>&gt;
</I>&gt;<i>     &lt;<A HREF="https://URL">https://URL</A> &lt;<A HREF="https://URL">https://URL</A>&gt;&gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&lt;<A HREF="https://URL">https://URL</A> &lt;<A HREF="https://URL">https://URL</A>&gt; &lt;<A HREF="https://URL">https://URL</A> &lt;<A HREF="https://URL">https://URL</A>&gt;&gt;&gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; _______________________________________________
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; squid-users mailing list
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;&gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>     &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>&gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>     &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>&gt;&gt;
</I>&gt;<i>     &gt;&#160; &#160; &#160; &#160; &#160;&gt;
</I>&gt;<i>     &gt;
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="023483.html">[squid-users] squid won't return cached even with refresh_pattern extra options override-lastmod override-expire ignore-reload ignore-no-store ignore-private store-stale
</A></li>
	<LI>Next message (by thread): <A HREF="023494.html">[squid-users] squid won't return cached even with refresh_pattern extra options override-lastmod override-expire ignore-reload ignore-no-store ignore-private store-stale
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23492">[ date ]</a>
              <a href="thread.html#23492">[ thread ]</a>
              <a href="subject.html#23492">[ subject ]</a>
              <a href="author.html#23492">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
