<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid complains on missing Intermediate certificate in version 4.14 and 5.0.5
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20complains%20on%20missing%20Intermediate%0A%20certificate%20in%20version%204.14%20and%205.0.5&In-Reply-To=%3C19cd6614-9277-4ae6-e03b-cd7c4085c7b0%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023588.html">
   <LINK REL="Next"  HREF="023592.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid complains on missing Intermediate certificate in version 4.14 and 5.0.5</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20complains%20on%20missing%20Intermediate%0A%20certificate%20in%20version%204.14%20and%205.0.5&In-Reply-To=%3C19cd6614-9277-4ae6-e03b-cd7c4085c7b0%40measurement-factory.com%3E"
       TITLE="[squid-users] Squid complains on missing Intermediate certificate in version 4.14 and 5.0.5">rousskov at measurement-factory.com
       </A><BR>
    <I>Tue May  4 15:30:23 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="023588.html">[squid-users] Squid complains on missing Intermediate certificate in version 4.14 and 5.0.5
</A></li>
        <LI>Next message (by thread): <A HREF="023592.html">[squid-users] Advanced Dynamic/Conditional Squid Configuration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23591">[ date ]</a>
              <a href="thread.html#23591">[ thread ]</a>
              <a href="subject.html#23591">[ subject ]</a>
              <a href="author.html#23591">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 5/4/21 1:16 AM, roie rachamim wrote:

&gt;<i> When trying to reach some times via https e.g. <A HREF="https://acadamy.atera.com">https://acadamy.atera.com</A>
</I>&gt;<i> 
</I>&gt;<i> Squid complains on missing Intermediate certificate.
</I>&gt;<i> I see this in the logs:
</I>&gt;<i> 
</I>&gt;<i> 2021/05/03 10:58:14.554| 83,4| support.cc(1147) untrustedToStoreCtx_cb:
</I>&gt;<i> Try to use pre-downloaded intermediate certificates
</I>&gt;<i> 2021/05/03 10:58:14.554| 83,5| support.cc(333) ssl_verify_cb: Unable to
</I>&gt;<i> get local issuer certificate: /CN=*.atera.com &lt;<A HREF="http://atera.com">http://atera.com</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> From what i saw in the Wiki Squid 4 should include a mechanism to
</I>&gt;<i> download required intermediate certificate, So does what i see make sense ?
</I>
I see no red flags in those two cache.log lines.

* If this is a TLS v1.3 connection, then you need to try with the latest
v5 snapshot to get commit 4624a2e. See Bug 5067 for more info:
<A HREF="https://bugs.squid-cache.org/show_bug.cgi?id=5067">https://bugs.squid-cache.org/show_bug.cgi?id=5067</A>

* Otherwise, more information is needed to figure out why Squid did not
try to fetch the missing certificates, tried but failed, or succeeded
but they were not enough to validate. To know whether Squid tried to
fetch intermediate certificates, you can check access.log. For more
details, consider sharing debugging cache.log of the whole problematic
transaction.

<A HREF="https://wiki.squid-cache.org/SquidFaq/BugReporting#Debugging_a_single_transaction">https://wiki.squid-cache.org/SquidFaq/BugReporting#Debugging_a_single_transaction</A>


HTH,
 Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="023588.html">[squid-users] Squid complains on missing Intermediate certificate in version 4.14 and 5.0.5
</A></li>
	<LI>Next message (by thread): <A HREF="023592.html">[squid-users] Advanced Dynamic/Conditional Squid Configuration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23591">[ date ]</a>
              <a href="thread.html#23591">[ thread ]</a>
              <a href="subject.html#23591">[ subject ]</a>
              <a href="author.html#23591">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
