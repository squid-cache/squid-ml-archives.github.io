<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid not using hosts file
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20not%20using%20hosts%20file&In-Reply-To=%3C16df7023-89e2-a9b8-daf9-dfa976281f75%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023602.html">
   <LINK REL="Next"  HREF="023604.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid not using hosts file</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20not%20using%20hosts%20file&In-Reply-To=%3C16df7023-89e2-a9b8-daf9-dfa976281f75%40measurement-factory.com%3E"
       TITLE="[squid-users] Squid not using hosts file">rousskov at measurement-factory.com
       </A><BR>
    <I>Sat May  8 14:49:14 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="023602.html">[squid-users] Squid not using hosts file
</A></li>
        <LI>Next message (by thread): <A HREF="023604.html">[squid-users] Squid not using hosts file
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23605">[ date ]</a>
              <a href="thread.html#23605">[ thread ]</a>
              <a href="subject.html#23605">[ subject ]</a>
              <a href="author.html#23605">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 5/7/21 10:16 PM, Jazmine Redmond wrote:
&gt;<i> The problem was in the hosts file. Each new line should begin with the
</I>&gt;<i> IP address, followed by one or more spaces, followed by a name.
</I>&gt;<i> My hosts file had a space before the IP address. Once I removed the
</I>&gt;<i> space at the beginning of the line, everything worked fine.
</I>
If a supported Squid version does not at least log ERROR messages about
(what it considers) malformed /etc/hosts lines, please consider filing a
bug report with Squid bugzilla. This problem is not something admins
should be guessing on their own, and surprising interpretation of
/etc/hosts file may have security implications in some environments.


&gt;<i> I downgraded my Squid to a supported version v2.7 so I can confirm it
</I>&gt;<i> works on this version. I have not upgraded to v3.5 yet... perhaps in the
</I>&gt;<i> future.
</I>
Please note that there has been no work on Squid v2 for about 10 years.
Those ancient versions are full of security vulnerabilities and are not
supported by the Squid Project in any shape or form.

Alex.


&gt;<i> On Fri, May 7, 2021 at 2:01 PM Jazmine Redmond wrote:
</I>&gt;<i> 
</I>&gt;<i>     Thanks for the reply.
</I>&gt;<i>     You mentioned supported Squid versions. For Windows I see Squid
</I>&gt;<i>     versions 3.5, 3.3 and 2.7. Which ones are supported?
</I>&gt;<i>     Additionally, what are the supported versions for Linux?&#160;
</I>&gt;<i> 
</I>&gt;<i>     Jazmine
</I>&gt;<i> 
</I>&gt;<i>     On Thu, May 6, 2021 at 7:04 AM Alex Rousskov wrote:
</I>&gt;<i> 
</I>&gt;<i>         On 5/6/21 12:09 AM, Jazmine Redmond wrote:
</I>&gt;<i>         &gt; Hi,&#160;
</I>&gt;<i>         &gt;
</I>&gt;<i>         &gt; I am having issues getting Squid to use the hosts file on the
</I>&gt;<i>         squid server.
</I>&gt;<i>         &gt; &#160;
</I>&gt;<i>         &gt; I added the hosts_file configuration directive to my squid
</I>&gt;<i>         config file
</I>&gt;<i>         &gt; as follows:
</I>&gt;<i>         &gt; &#160;
</I>&gt;<i>         &gt; hosts_file&#160; C:/Windows/System32/drivers/etc/hosts
</I>&gt;<i>         &gt; &#160;
</I>&gt;<i>         &gt; But, when my squid client browser specifies a URL with a
</I>&gt;<i>         machine name
</I>&gt;<i>         &gt; listed in the hosts file, squid returns an error that says:
</I>&gt;<i>         &gt; &#160;
</I>&gt;<i>         &gt; &#8220;Unable to determine IP address from host name. The DNS server
</I>&gt;<i>         returned:
</I>&gt;<i>         &gt; Name Error: the domain name does not exist. This means that
</I>&gt;<i>         the cache
</I>&gt;<i>         &gt; was not able to resolve the hostname presented in the URL.&#8221;
</I>&gt;<i>         &gt; &#160;
</I>&gt;<i>         &gt; So, it seems that squid is NOT using my hosts file.
</I>&gt;<i>         &gt; &#160;
</I>&gt;<i>         &gt; I have tried using forward slashes (/) and backward slashes
</I>&gt;<i>         (\) in the
</I>&gt;<i>         &gt; hosts_file configuration directive, yet the error persists.
</I>&gt;<i>         &gt; &#160;
</I>&gt;<i>         &gt; I have verified the path to the hosts file is correct and I
</I>&gt;<i>         restart
</I>&gt;<i>         &gt; Squid each time I make edits to the configuration file. Yet
</I>&gt;<i>         the error
</I>&gt;<i>         &gt; persists.
</I>&gt;<i>         &gt; &#160;
</I>&gt;<i>         &gt; I am running Squid version 3.5.28 on Windows 10.
</I>&gt;<i>         &gt; &#160;
</I>&gt;<i>         &gt; Am I missing something?
</I>&gt;<i> 
</I>&gt;<i>         Supported Squid versions are known to use /etc/hosts file. I do
</I>&gt;<i>         not know
</I>&gt;<i>         whether there are any Windows-specific or v3-specific bugs in
</I>&gt;<i>         that area.
</I>&gt;<i>         Unfortunately, very few people responding on this mailing list
</I>&gt;<i>         are using
</I>&gt;<i>         Squid v3 and Squid on Windows in general. That is probably why
</I>&gt;<i>         you are
</I>&gt;<i>         not getting any responses.
</I>&gt;<i> 
</I>&gt;<i>         If you can try a supported Squid version, please do so
</I>&gt;<i>         (especially if
</I>&gt;<i>         you can try it on Linux). You may also share a pointer to a
</I>&gt;<i>         compressed
</I>&gt;<i>         cache.log after setting debug_options to ALL,9 in case somebody
</I>&gt;<i>         volunteers to help you with triage.
</I>&gt;<i> 
</I>&gt;<i>         Alex.
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="023602.html">[squid-users] Squid not using hosts file
</A></li>
	<LI>Next message (by thread): <A HREF="023604.html">[squid-users] Squid not using hosts file
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23605">[ date ]</a>
              <a href="thread.html#23605">[ thread ]</a>
              <a href="subject.html#23605">[ subject ]</a>
              <a href="author.html#23605">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
