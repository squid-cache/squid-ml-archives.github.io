<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] changing squid explicit mode to transparent mode
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20changing%20squid%20explicit%20mode%20to%20transparent%20mode&In-Reply-To=%3Cac3fdd44-753f-3059-bad5-f39332c32ef4%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023709.html">
   <LINK REL="Next"  HREF="023711.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] changing squid explicit mode to transparent mode</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20changing%20squid%20explicit%20mode%20to%20transparent%20mode&In-Reply-To=%3Cac3fdd44-753f-3059-bad5-f39332c32ef4%40treenet.co.nz%3E"
       TITLE="[squid-users] changing squid explicit mode to transparent mode">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri May 28 02:21:10 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="023709.html">[squid-users] changing squid explicit mode to transparent mode
</A></li>
        <LI>Next message (by thread): <A HREF="023711.html">[squid-users] How to forward squid access.log to a remote server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23715">[ date ]</a>
              <a href="thread.html#23715">[ thread ]</a>
              <a href="subject.html#23715">[ subject ]</a>
              <a href="author.html#23715">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 27/05/21 8:43 pm, simon ben wrote:
&gt;<i> Dear All,
</I>&gt;<i> 
</I>&gt;<i> I have the below setup running perfectly for a couple of years
</I>&gt;<i> 
</I>&gt;<i> Centos 8 X64
</I>&gt;<i> squid-4.11-3
</I>&gt;<i> 
</I>&gt;<i> configured in explicit mode so all client machines have the proxy IP 
</I>&gt;<i> configured in their browser
</I>&gt;<i> 
</I>&gt;<i> Recently we have got a security cloud solution which requires the source 
</I>&gt;<i> IP of the client machine
</I>&gt;<i> 
</I>
Okay. Have you looked into the ways it will accept that IP address?

Does it actually require direct connections from each client?
   In that case you need to use TPROXY feature.

Otherwise,

You may be able to simply send a custom header containing the client's 
IP. &quot;Forwarded:&quot; is the standard header for that use, there are also 
many application-specific headers names around.


&gt;<i> Since I have to configure the squid in transparent mode so the client 
</I>&gt;<i> source IP is visible and as required for transparent mode config i need 
</I>&gt;<i> to change the gateway to my squid server IP .
</I>&gt;<i> 
</I>&gt;<i> 1 ) Is there any way so that I retain the source client PC IP in the 
</I>&gt;<i> current setup ????
</I>
Please define &quot;retain&quot;.


&gt;<i> 
</I>&gt;<i> 2 ) if only way possible is by reconfiguring&#160; my current proxy to  
</I>&gt;<i> transparent mode then if there is some way without changing the client 
</I>&gt;<i> pc Gateway
</I>&gt;<i> Right Now the default gateway of the client PC is our Core switch vlan 
</I>&gt;<i> ip address.
</I>&gt;<i> 
</I>
Any commercial router should provide capabilities to *route* client 
packets to Squid machine and Squid's outbound to wherever they need to go.

Note that doing it this way can *double* or even triple the amount of 
traffic load that switch is handling when Squid is in the same subnet as 
the clients.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="023709.html">[squid-users] changing squid explicit mode to transparent mode
</A></li>
	<LI>Next message (by thread): <A HREF="023711.html">[squid-users] How to forward squid access.log to a remote server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23715">[ date ]</a>
              <a href="thread.html#23715">[ thread ]</a>
              <a href="subject.html#23715">[ subject ]</a>
              <a href="author.html#23715">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
