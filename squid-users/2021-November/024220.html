<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid upgrade failure support questions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20upgrade%20failure%20support%20questions&In-Reply-To=%3CCO6PR20MB3732F173AB16179F76EE9BD09C8C9%40CO6PR20MB3732.namprd20.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024219.html">
   <LINK REL="Next"  HREF="024221.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid upgrade failure support questions</H1>
    <B>Yuen, John</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20upgrade%20failure%20support%20questions&In-Reply-To=%3CCO6PR20MB3732F173AB16179F76EE9BD09C8C9%40CO6PR20MB3732.namprd20.prod.outlook.com%3E"
       TITLE="[squid-users] Squid upgrade failure support questions">John.Yuen at moodys.com
       </A><BR>
    <I>Wed Nov  3 16:53:31 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024219.html">[squid-users] Error 503 accessing Instagram/facebook via IPv6
</A></li>
        <LI>Next message (by thread): <A HREF="024221.html">[squid-users] acl / format code evaluation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24220">[ date ]</a>
              <a href="thread.html#24220">[ thread ]</a>
              <a href="subject.html#24220">[ subject ]</a>
              <a href="author.html#24220">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Rafael,

Thanks for getting back to me on this. The link you provided to me for issues #95 and #101 pretty much sound like what I'm experiencing on my 'Squid-01' server after it got upgraded to v4.14.  As you mentioned, I checked the non-working 'Squid-01' server as well as the working 'Squid-02' server to compare the two. 

- On the non-working 'Squid-01' server, the 'Squid for Windows' service is running, and I can see the associated ' Diladele.Squid.Service.exe' service executable running and listed in the Windows task manager. (under the 'Details' tab). I also see a separate 'Diladele.Squid.Tray.exe' process running as well in the Windows Task Manager. However, I don't see the 'squid.exe' process listed in the Windows Task manager. I wasn't aware there were 2 separate processes that should be running, until you told me. The CPU, memory, etc. seem fine, so it can't be related to those things. Lastly, when I typed in the following command from a command prompt, I don't see any entries as it should if Squid was working and listening properly on port 3128:
=&gt; netstat -a | find &quot;3128&quot;

- On the working 'Squid-02' server, the 'Squid for Windows' service is running, and I can see the associated ' Diladele.Squid.Service.exe' service executable running and listed in the Windows task manager. (under the 'Details' tab). I don't see a separate 'Diladele.Squid.Tray.exe' process running (like on the 'Squid-01' server) in the Windows Task Manager. However, I do see the 'squid.exe' process listed in the Windows Task manager. Lastly, when I type in the following command from a command prompt, I see that it's listening to the default Squid port 3128 and that there are remote computers establishing connections to the Squid port 3128, as it should since it's working and listening properly on port 3128:
=&gt; netstat -a | find &quot;3128&quot;

The question is, why isn't the 'squid.exe' process running and listed in the Windows Task manager on the 'Squid-01' server after it was upgraded, and even with an uninstall and re-install of Squid v4.14? Not sure if the upgrade did anything to make it not work and listen on port 3128 on the 'Squid-01' server. Please let me know if this is a known issue and if others are facing the same issue. If there's a way to fix this, please provide the detailed steps on how to make it work again. As mentioned, we have other Squid servers that we need to upgrade the version to the same v4.14, so we don't want to face the same upgrade issues like this one. Or maybe you can tell me what's the best way to upgrade to v4.14 so I can avoid having this issue in the future.

Both the 'Squid-01' and 'Squid-02' are virtual machines running on Microsoft Hyper-V physical servers. So, will that be an issue as you mentioned v4.14 does not work on older processors? Does it matter about the CPU age on the physical Hyper-V servers, where the 2 VMs reside? Please advise.

Hope all this makes sense. If you have any questions, please let me know. Thanks for any help in advance. 

John

-----Original Message-----
From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; On Behalf Of Rafael Akchurin
Sent: Monday, October 25, 2021 2:07 AM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Squid upgrade failure support questions

 

CAUTION: This email originated from outside of Moody's. Do not click links or open attachments unless you recognize the sender and know the content is safe.

 

Be sure to also check the actual squid.exe is running - not just the service wrapper, you might be facing the <A HREF="https://github.com/diladele/squid-windows/issues/101">https://github.com/diladele/squid-windows/issues/101</A> bug (4.14 does not work on older processors)

Best regards,
Rafael

-----Original Message-----
From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; On Behalf Of Amos Jeffries
Sent: Sunday, 24 October 2021 22:45
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Squid upgrade failure support questions

On 25/10/21 6:33 am, Yuen, John wrote:
&gt;<i> 
</I>&gt;<i> http_port 3128
</I>&gt;<i> 
</I>&gt;<i> The 'Squid for Windows' service is set to 'Automatic' startup type and 
</I>&gt;<i> shows the 'Running' status. So it can't be that. I can telnet to port
</I>&gt;<i> 3128 on the new working Squid v4.14 server. But I can't telnet to the 
</I>&gt;<i> same port 3128 on the upgraded/non-working Squid server. When I do, it 
</I>&gt;<i> doesn't work and errors out like this:
</I>&gt;<i> 
</I>&gt;<i> C:\&gt;telnet Squid-01 3128
</I>&gt;<i> 
</I>&gt;<i> Connecting To Squid-01...Could not open connection to the host, on 
</I>&gt;<i> port
</I>&gt;<i> 3128: Connect failed
</I>&gt;<i> 
</I>
At no point in your post do I see any mention of what the IP addresses are. Can you please indicate what &quot;localhost&quot;, &quot;Squid-01&quot; resolve to on both the machine used as client and the Squid machine. And what IP(s) those firewall rules by Local subnet &quot;Any&quot; and Remote address &quot;local subnet&quot;.


Amos
_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024219.html">[squid-users] Error 503 accessing Instagram/facebook via IPv6
</A></li>
	<LI>Next message (by thread): <A HREF="024221.html">[squid-users] acl / format code evaluation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24220">[ date ]</a>
              <a href="thread.html#24220">[ thread ]</a>
              <a href="subject.html#24220">[ subject ]</a>
              <a href="author.html#24220">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
