<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Too many ERROR: Collapsed forwarding queue overflow for kid2 at 1024 items
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Too%20many%20ERROR%3A%20Collapsed%20forwarding%20queue%0A%20overflow%20for%20kid2%20at%201024%20items&In-Reply-To=%3Cdb48287e-021f-744b-6624-7c9c20624f48%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024242.html">
   <LINK REL="Next"  HREF="024247.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Too many ERROR: Collapsed forwarding queue overflow for kid2 at 1024 items</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Too%20many%20ERROR%3A%20Collapsed%20forwarding%20queue%0A%20overflow%20for%20kid2%20at%201024%20items&In-Reply-To=%3Cdb48287e-021f-744b-6624-7c9c20624f48%40measurement-factory.com%3E"
       TITLE="[squid-users] Too many ERROR: Collapsed forwarding queue overflow for kid2 at 1024 items">rousskov at measurement-factory.com
       </A><BR>
    <I>Fri Nov 12 16:24:11 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024242.html">[squid-users] Too many ERROR: Collapsed forwarding queue overflow for kid2 at 1024 items
</A></li>
        <LI>Next message (by thread): <A HREF="024247.html">[squid-users] Too many ERROR: Collapsed forwarding queue overflow for kid2 at 1024 items
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24246">[ date ]</a>
              <a href="thread.html#24246">[ thread ]</a>
              <a href="subject.html#24246">[ subject ]</a>
              <a href="author.html#24246">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/11/21 10:19 AM, Lou&#269;ansk&#253; Luk&#225;&#353; wrote:

&gt;<i> recently I'm facing too many ERROR: Collapsed forwarding queue
</I>&gt;<i> overflow for kid2 at 1024 items lines in my Squid 5.2 log files.
</I>
We see those overflows when kids die. Do you see any FATAL messages,
assertions, or similar deadly errors in cache.log?


&gt;<i> Could someone elaborate how the queue is filled - what is clogging it?
</I>
The sender/writer sends messages faster than the recipient/reader is
reading them, eventually exceeding the queue capacity (i.e. 1024
messages). These messages are about Store entries that may need
synchronization across workers. Each message is very small.


&gt;<i> I don't mind too much if I have to turn collapsed forwarding off
</I>
Most likely, the problem is not tied to collapsed forwarding. These
queues were used for collapsed forwarding when they were added, but they
are used for regular traffic as well in modern SMP Squids. We need to
change the queue names (and related code/message text) to reflect the
expanded nature of these queues.


HTH,

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024242.html">[squid-users] Too many ERROR: Collapsed forwarding queue overflow for kid2 at 1024 items
</A></li>
	<LI>Next message (by thread): <A HREF="024247.html">[squid-users] Too many ERROR: Collapsed forwarding queue overflow for kid2 at 1024 items
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24246">[ date ]</a>
              <a href="thread.html#24246">[ thread ]</a>
              <a href="subject.html#24246">[ subject ]</a>
              <a href="author.html#24246">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
