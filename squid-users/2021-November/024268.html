<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] How to prevent Squid to use more and more HD space in virtualbox
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20prevent%20Squid%20to%20use%20more%20and%20more%20HD%0A%20space%20in%20virtualbox&In-Reply-To=%3Cfa294143-ada8-6425-b11e-0479db8b9fe6%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024267.html">
   <LINK REL="Next"  HREF="024269.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] How to prevent Squid to use more and more HD space in virtualbox</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20prevent%20Squid%20to%20use%20more%20and%20more%20HD%0A%20space%20in%20virtualbox&In-Reply-To=%3Cfa294143-ada8-6425-b11e-0479db8b9fe6%40measurement-factory.com%3E"
       TITLE="[squid-users] How to prevent Squid to use more and more HD space in virtualbox">rousskov at measurement-factory.com
       </A><BR>
    <I>Fri Nov 19 22:51:32 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024267.html">[squid-users] How to prevent Squid to use more and more HD space in virtualbox
</A></li>
        <LI>Next message (by thread): <A HREF="024269.html">[squid-users] How to prevent Squid to use more and more HD space in virtualbox
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24268">[ date ]</a>
              <a href="thread.html#24268">[ thread ]</a>
              <a href="subject.html#24268">[ subject ]</a>
              <a href="author.html#24268">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/19/21 2:45 PM, Graminsta wrote:

&gt;<i> I have a problem with the continuous increase in disk space usage on
</I>&gt;<i> linux where squid is hosted. Even having turned off the cache
</I>&gt;<i> (&quot;#cache_dir ufs /var/spool/squid/ 1000 16 256&quot;).
</I>
This is unrelated to your question, but please note that removing
cache_dir directives disables disk caching but not memory caching.
Memory caching does not consume disk space, but if you want to disable
memory caching as well, use &quot;cache_mem 0&quot;.
 &#160;

&gt;<i> VMs starts at 7gb and in a few weeks grows to 10...20...30Gb.
</I>&gt;<i> 
</I>&gt;<i> Why does Squid need so much growing hard drive space
</I>
There could be several reasons, but the most common one is logging.
There are several kinds of logs (cache_log, access_log, icap_log, etc.).
You should find out which ones are growing beyond your expectations in
your environment. Look for files that are actively growing in size on
the disk partition that grows in size (e.g., some logs are often found
in /use/local/squid/var/logs or similar directories).

If logs are not the reason for excessive disk usage, then I would check
for coredump files (with unique file names).


&gt;<i> and how to prevent it?
</I>
0. If you start your Squid with &quot;-X&quot; command line option, then stop
doing that. That option enables extensive debugging that goes into
cache_log. It is meant for triage sessions only.

1. If you set &quot;debug_options&quot; to anything other than &quot;ALL,1&quot;, then
either set it to ALL,1 or remove all debug_options lines. The default is
ALL,1.

2. Rotate your logs as needed. There is some good advice in the Squid
FAQ[F], but since some of the wiki pages are quite all/stale, use common
sense and best sysadmin practices.

[F] <A HREF="https://wiki.squid-cache.org/SquidFaq/SquidLogs">https://wiki.squid-cache.org/SquidFaq/SquidLogs</A>


3. If your Squids are crashing (and leaving coredumps with unique file
names), then fixing Squid or removing crash triggers is usually the best
way forward.


HTH,

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024267.html">[squid-users] How to prevent Squid to use more and more HD space in virtualbox
</A></li>
	<LI>Next message (by thread): <A HREF="024269.html">[squid-users] How to prevent Squid to use more and more HD space in virtualbox
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24268">[ date ]</a>
              <a href="thread.html#24268">[ thread ]</a>
              <a href="subject.html#24268">[ subject ]</a>
              <a href="author.html#24268">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
