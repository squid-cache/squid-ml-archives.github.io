<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Is this related? store.cc:1094: &quot;store_status == STORE_PENDING&quot; + TCP_MISS_ABORTED
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Is%20this%20related%3F%20store.cc%3A1094%3A%20%22store_status%20%3D%3D%0A%20STORE_PENDING%22%20%2B%20TCP_MISS_ABORTED&In-Reply-To=%3C72DD5D5CF661B5459DC08A060BF26B53010897AE%40kjj-server.KJJ.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024287.html">
   <LINK REL="Next"  HREF="024286.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Is this related? store.cc:1094: &quot;store_status == STORE_PENDING&quot; + TCP_MISS_ABORTED</H1>
    <B>Lou&#269;ansk&#253; Luk&#225;&#353;</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Is%20this%20related%3F%20store.cc%3A1094%3A%20%22store_status%20%3D%3D%0A%20STORE_PENDING%22%20%2B%20TCP_MISS_ABORTED&In-Reply-To=%3C72DD5D5CF661B5459DC08A060BF26B53010897AE%40kjj-server.KJJ.local%3E"
       TITLE="[squid-users] Is this related? store.cc:1094: &quot;store_status == STORE_PENDING&quot; + TCP_MISS_ABORTED">Loucansky.Lukas at kjj.cz
       </A><BR>
    <I>Tue Nov 23 10:10:24 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024287.html">[squid-users] tlu.dl.delivery.mp.microsoft.com and HTTP range header
</A></li>
        <LI>Next message (by thread): <A HREF="024286.html">[squid-users] Is this related? store.cc:1094: &quot;store_status == STORE_PENDING&quot; + TCP_MISS_ABORTED
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24283">[ date ]</a>
              <a href="thread.html#24283">[ thread ]</a>
              <a href="subject.html#24283">[ subject ]</a>
              <a href="author.html#24283">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,
as I was going through some upgrades during my investigation of the &quot;transient&quot; queues overflows - I've noticed that my squid asserted on store.cc line 1094 which I read as a test to see if the store is in progress while the transfer is being aborted. Sure enough I've found aborted requests for windows updates. I have dstdomain ACL for WU sites and set quick_abort (min 4MB, max 12MB, pct 100) rules and range_offset_limit (for this ACL to 16MB). I've seen squid downloading ot its own so I eyeballed these values on my sightsigns. I have 1Gbps download so I don't mind downloading 16MB multiple times.But it seems my rock storage is not fast enough as I see I/O timeouts and warnings (delays I/O requests for 72.84 seconds to obey 200/sec rate limit
 etc.).  Is it possible that the store is too slow and is still pending operation while there is request abort? This rock storage is 64GB in size, slot size 32kB, max-swap-rate 200, swap-timeout 250.
fio with randomread shows 587 IOPS (bs 32k, iodepth 1), with rwmixread 75 read IOPS 490 write IOPS 167.
Is this related? Can I do anyzhing to avoid such asserts?
Thanks!
LL

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024287.html">[squid-users] tlu.dl.delivery.mp.microsoft.com and HTTP range header
</A></li>
	<LI>Next message (by thread): <A HREF="024286.html">[squid-users] Is this related? store.cc:1094: &quot;store_status == STORE_PENDING&quot; + TCP_MISS_ABORTED
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24283">[ date ]</a>
              <a href="thread.html#24283">[ thread ]</a>
              <a href="subject.html#24283">[ subject ]</a>
              <a href="author.html#24283">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
