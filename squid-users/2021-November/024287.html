<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] tlu.dl.delivery.mp.microsoft.com and HTTP range header
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20tlu.dl.delivery.mp.microsoft.com%20and%20HTTP%20range%0A%20header&In-Reply-To=%3Cb6dd05a0-de9a-1419-5c09-f4952c91ec70%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024282.html">
   <LINK REL="Next"  HREF="024283.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] tlu.dl.delivery.mp.microsoft.com and HTTP range header</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20tlu.dl.delivery.mp.microsoft.com%20and%20HTTP%20range%0A%20header&In-Reply-To=%3Cb6dd05a0-de9a-1419-5c09-f4952c91ec70%40measurement-factory.com%3E"
       TITLE="[squid-users] tlu.dl.delivery.mp.microsoft.com and HTTP range header">rousskov at measurement-factory.com
       </A><BR>
    <I>Tue Nov 23 15:17:31 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024282.html">[squid-users] tlu.dl.delivery.mp.microsoft.com and HTTP range header
</A></li>
        <LI>Next message (by thread): <A HREF="024283.html">[squid-users] Is this related? store.cc:1094: &quot;store_status == STORE_PENDING&quot; + TCP_MISS_ABORTED
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24287">[ date ]</a>
              <a href="thread.html#24287">[ thread ]</a>
              <a href="subject.html#24287">[ subject ]</a>
              <a href="author.html#24287">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/23/21 5:09 AM, David Touzeau wrote:

&gt;<i> tlu.dl.delivery.mp.microsoft.com is from the app store and it encounters
</I>&gt;<i> an issue with high bandwidth usage.
</I>&gt;<i> We think that it was caused because Squid filtering the HTTP Range
</I>&gt;<i> header from the HTTP requests.
</I>
Does Squid actually filter the HTTP Range header when forwarding HTTP
requests sent by that app?

If the resource is served over a TLS connection, does your Squid bump
the corresponding transaction using the SslBump feature?

Do you disable all caching? Caching of these specific responses?


&gt;<i> This caused the app store download everything in an endless loop
</I>
Does Squid return a partial response to the application? It should do
that in most cases, even if it filters the HTTP Range header out when
forwarding the request to the origin server, but there are exceptions to
that general principle.


&gt;<i> We know that Squid is not currently compatible with http range :
</I>&gt;<i> <A HREF="https://wiki.squid-cache.org/Features/HTTP11#Range_Requests">https://wiki.squid-cache.org/Features/HTTP11#Range_Requests</A>
</I>
That wiki page does not say that Squid is incompatible with HTTP Range
feature. It says that Squid does not support caching of partial responses.


&gt;<i> Is there any workaround in order to avoid high bandwidth usage of
</I>&gt;<i> Microsoft clients without needing caching objects ?
</I>
More information may help troubleshoot this problem. Please use the
questions above as starting points.


Thank you,

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024282.html">[squid-users] tlu.dl.delivery.mp.microsoft.com and HTTP range header
</A></li>
	<LI>Next message (by thread): <A HREF="024283.html">[squid-users] Is this related? store.cc:1094: &quot;store_status == STORE_PENDING&quot; + TCP_MISS_ABORTED
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24287">[ date ]</a>
              <a href="thread.html#24287">[ thread ]</a>
              <a href="subject.html#24287">[ subject ]</a>
              <a href="author.html#24287">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
