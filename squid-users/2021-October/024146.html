<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 5.1 memory usage
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%205.1%20memory%20usage&In-Reply-To=%3Cd4f67cbf-f8fd-6081-5eb7-8c1575c5a6dc%40opendium.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024144.html">
   <LINK REL="Next"  HREF="024147.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 5.1 memory usage</H1>
    <B>Steve Hill</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%205.1%20memory%20usage&In-Reply-To=%3Cd4f67cbf-f8fd-6081-5eb7-8c1575c5a6dc%40opendium.com%3E"
       TITLE="[squid-users] Squid 5.1 memory usage">steve at opendium.com
       </A><BR>
    <I>Fri Oct  8 08:56:45 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024144.html">[squid-users] Squid do not reply
</A></li>
        <LI>Next message (by thread): <A HREF="024147.html">[squid-users] Squid 5.1 memory usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24146">[ date ]</a>
              <a href="thread.html#24146">[ thread ]</a>
              <a href="subject.html#24146">[ subject ]</a>
              <a href="author.html#24146">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
I'm seeing high memory usage on Squid 5.1.  Caching is disabled, so I'd 
expect memory usage to be fairly low (and it was under Squid 3.5), but 
some workers are growing pretty large.  I'm using ICAP and SSL bump.

I've got a worker using 5 GB which I've collected memory stats from - 
the things which stand out are:
  - Long Strings: 220 MB
  - Short Strings: 2.1 GB
  - Comm::Connection: 217 MB
  - HttpHeaderEntry: 777 MB
  - MemBlob: 773 MB
  - Entry: 226 MB

What's the best way of debugging this?  It there a way to list all of 
the Comm::Connection objects?

Thanks.

-- 
- Steve Hill
    Technical Director | Cyfarwyddwr Technegol
    Opendium    Online Safety &amp; Web Filtering     <A HREF="http://www.opendium.com">http://www.opendium.com</A>
                Diogelwch Ar-Lein a Hidlo Gwefan

    Enquiries | Ymholiadau:   <A HREF="https://lists.squid-cache.org/listinfo/squid-users">sales at opendium.com</A>     +44-1792-824568
    Support   | Cefnogi:      <A HREF="https://lists.squid-cache.org/listinfo/squid-users">support at opendium.com</A>   +44-1792-825748

------------------------------------------------------------------------
Opendium Limited is a company registered in England and Wales.
Mae Opendium Limited yn gwmni sydd wedi'i gofrestru yn Lloegr a Chymru.

Company No. | Rhif Cwmni:   5465437
Highfield House, 1 Brue Close, Bruton, Somerset, BA10 0HY, England.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: steve.vcf
Type: text/x-vcard
Size: 259 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20211008/10c838b3/attachment.vcf">http://lists.squid-cache.org/pipermail/squid-users/attachments/20211008/10c838b3/attachment.vcf</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024144.html">[squid-users] Squid do not reply
</A></li>
	<LI>Next message (by thread): <A HREF="024147.html">[squid-users] Squid 5.1 memory usage
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24146">[ date ]</a>
              <a href="thread.html#24146">[ thread ]</a>
              <a href="subject.html#24146">[ subject ]</a>
              <a href="author.html#24146">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
