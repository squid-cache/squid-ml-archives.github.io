<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid 5 and parent peers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%205%20and%20parent%20peers&In-Reply-To=%3C7e75c2bf-51db-f8c3-73f0-ba7fca55efcb%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024160.html">
   <LINK REL="Next"  HREF="024162.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid 5 and parent peers</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%205%20and%20parent%20peers&In-Reply-To=%3C7e75c2bf-51db-f8c3-73f0-ba7fca55efcb%40measurement-factory.com%3E"
       TITLE="[squid-users] squid 5 and parent peers">rousskov at measurement-factory.com
       </A><BR>
    <I>Sat Oct  9 21:59:10 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024160.html">[squid-users] squid 5 and parent peers
</A></li>
        <LI>Next message (by thread): <A HREF="024162.html">[squid-users] squid 5 and parent peers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24161">[ date ]</a>
              <a href="thread.html#24161">[ thread ]</a>
              <a href="subject.html#24161">[ subject ]</a>
              <a href="author.html#24161">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/9/21 1:46 PM, Markus Moeller wrote:
&gt;<i> i try to find a way how squid can &quot;route&quot; all Internet
</I>&gt;<i> domains to a default proxy and a subset of well defined domains to the
</I>&gt;<i> &quot;special&quot; proxy (and having&#160; &quot;internal&quot; traffic based on IP ranges go
</I>&gt;<i> direct)
</I>
Assuming the latter conditions overwrite the former ones, the part that
remains unclear is what you want Squid to do when the request does not
match any of the three conditions above. For example, consider a request
that uses an IP address as a destination, and that IP address is not in
the &quot;go direct&quot; range, and its reverse DNS lookup is unsuccessful so
there is no &quot;domain&quot; that the proxy selection rules are based on.

Another similar question is what should Squid do with domain names that
do not resolve to an IP address. Since Squid is configured to use parent
proxies, Squid could let those proxies try to resolve the domain name,
blindly assuming that the resolution at a parent proxy will not match
one of the &quot;go direct&quot; IPs (a matches would possibly indicate that the
decision to go to a parent proxy was wrong in the first place!).

The final set of questions deals with HTTPS traffic. For example, if
clients sent HTTPS requests, are you OK with Squid making routing
decisions based on the target of the initial CONNECT request?


&gt;<i> Thank you for spotting the !. I got confused with the combinations of
</I>&gt;<i> the never/always direct statement.
</I>
Does your test case work after removing that &quot;!&quot;? If not, please share
the updated debugging snippets.


Thank you,

Alex.


&gt;&gt;&gt;<i> ....
</I>&gt;&gt;&gt;<i> # Example rule allowing access from your local networks.
</I>&gt;&gt;&gt;<i> # Adapt to list your (internal) IP networks from where browsing
</I>&gt;&gt;&gt;<i> # should be allowed
</I>&gt;&gt;&gt;<i> #acl localnet src 0.0.0.1-0.255.255.255&#160; # RFC 1122 &quot;this&quot; network (LAN)
</I>&gt;&gt;&gt;<i> acl localnet src 10.0.0.0/8&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # RFC 1918 local private network
</I>&gt;&gt;&gt;<i> (LAN)
</I>&gt;&gt;&gt;<i> acl localnet src 100.64.0.0/10&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # RFC 6598 shared address space
</I>&gt;&gt;&gt;<i> (CGN)
</I>&gt;&gt;&gt;<i> acl localnet src 169.254.0.0/16&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # RFC 3927 link-local (directly
</I>&gt;&gt;&gt;<i> plugged) machines
</I>&gt;&gt;&gt;<i> acl localnet src 172.16.0.0/12&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # RFC 1918 local private network
</I>&gt;&gt;&gt;<i> (LAN)
</I>&gt;&gt;&gt;<i> acl localnet src 192.168.0.0/16&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # RFC 1918 local private network
</I>&gt;&gt;&gt;<i> (LAN)
</I>&gt;&gt;&gt;<i> acl localnet src fc00::/7&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # RFC 4193 local private network
</I>&gt;&gt;&gt;<i> range
</I>&gt;&gt;&gt;<i> acl localnet src fe80::/10&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # RFC 4291 link-local (directly
</I>&gt;&gt;&gt;<i> plugged) machines
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> #acl localdst dst 0.0.0.1-0.255.255.255&#160; # RFC 1122 &quot;this&quot; network (LAN)
</I>&gt;&gt;&gt;<i> acl localdst dst 10.0.0.0/8&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # RFC 1918 local private network
</I>&gt;&gt;&gt;<i> (LAN)
</I>&gt;&gt;&gt;<i> acl localdst dst 100.64.0.0/10&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # RFC 6598 shared address space
</I>&gt;&gt;&gt;<i> (CGN)
</I>&gt;&gt;&gt;<i> acl localdst dst 169.254.0.0/16&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # RFC 3927 link-local (directly
</I>&gt;&gt;&gt;<i> plugged) machines
</I>&gt;&gt;&gt;<i> acl localdst dst 172.16.0.0/12&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # RFC 1918 local private network
</I>&gt;&gt;&gt;<i> (LAN)
</I>&gt;&gt;&gt;<i> acl localdst dst 192.168.0.0/16&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # RFC 1918 local private network
</I>&gt;&gt;&gt;<i> (LAN)
</I>&gt;&gt;&gt;<i> acl localdst dst fc00::/7&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # RFC 4193 local private network
</I>&gt;&gt;&gt;<i> range
</I>&gt;&gt;&gt;<i> acl localdst dst fe80::/10&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # RFC 4291 link-local (directly
</I>&gt;&gt;&gt;<i> plugged) machines
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> acl google dstdomain -n .google.com
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> cache_peer internetproxy.example.com parent 8080 0 no-query no-digest
</I>&gt;&gt;&gt;<i> no-netdb-exchange default
</I>&gt;&gt;&gt;<i> cache_peer authproxy.example.com parent 8080 0 no-query no-digest
</I>&gt;&gt;&gt;<i> no-netdb-exchange default login=NEGOTIATE auth-no-keytab
</I>&gt;&gt;&gt;<i> # Only google to auth proxy
</I>&gt;&gt;&gt;<i> cache_peer_access authproxy.example.com deny localdst
</I>&gt;&gt;&gt;<i> cache_peer_access authproxy.example.com allow google
</I>&gt;&gt;&gt;<i> cache_peer_access authproxy.example.com deny all
</I>&gt;&gt;&gt;<i> # All other external domains
</I>&gt;&gt;&gt;<i> cache_peer_access internetproxy.example.com deny localdst
</I>&gt;&gt;&gt;<i> cache_peer_access internetproxy.example.com deny google
</I>&gt;&gt;&gt;<i> cache_peer_access internetproxy.example.com allow all
</I>&gt;&gt;&gt;<i> # Local goes direct
</I>&gt;&gt;&gt;<i> always_direct allow localdst
</I>&gt;&gt;&gt;<i> always_direct deny all
</I>&gt;&gt;&gt;<i> never_direct deny !localdst
</I>&gt;&gt;&gt;<i> never_direct allow all
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> debug_options 44,10 11,20
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> ....
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The first test looked fine:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> #curl -vvv -x <A HREF="http://localhost:3128">http://localhost:3128</A> <A HREF="http://www.google.com">http://www.google.com</A>
</I>&gt;&gt;&gt;<i> * Uses proxy env variable no_proxy == 'localhost, 127.0.0.1'
</I>&gt;&gt;&gt;<i> *&#160;&#160; Trying 127.0.0.1:3128...
</I>&gt;&gt;&gt;<i> * Connected to localhost (127.0.0.1) port 3128 (#0)
</I>&gt;&gt;&gt;&gt;<i> GET <A HREF="http://www.google.com/">http://www.google.com/</A> HTTP/1.1
</I>&gt;&gt;&gt;&gt;<i> Host: www.google.com
</I>&gt;&gt;&gt;&gt;<i> User-Agent: curl/7.75.0
</I>&gt;&gt;&gt;&gt;<i> Accept: */*
</I>&gt;&gt;&gt;&gt;<i> Proxy-Connection: Keep-Alive
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> * Mark bundle as not supporting multiuse
</I>&gt;&gt;&gt;<i> &lt; HTTP/1.1 301 Moved Permanently
</I>&gt;&gt;&gt;<i> &lt; Location: <A HREF="https://www.google.com/">https://www.google.com/</A>
</I>&gt;&gt;&gt;<i> &lt; Content-Length: 0
</I>&gt;&gt;&gt;<i> &lt; Date: Sat, 09 Oct 2021 12:29:23 GMT
</I>&gt;&gt;&gt;<i> &lt; X-Cache: MISS from clientproxy
</I>&gt;&gt;&gt;<i> &lt; X-Cache-Lookup: MISS from clientproxy:3128
</I>&gt;&gt;&gt;<i> &lt; Connection: keep-alive
</I>&gt;&gt;&gt;<i> &lt;
</I>&gt;&gt;&gt;<i> * Connection #0 to host localhost left intact
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Second request failed with a cache error:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> #curl -vvv -x <A HREF="http://localhost:3128">http://localhost:3128</A> <A HREF="http://www.google.com">http://www.google.com</A>
</I>&gt;&gt;&gt;<i> * Uses proxy env variable no_proxy == 'localhost, 127.0.0.1'
</I>&gt;&gt;&gt;<i> *&#160;&#160; Trying 127.0.0.1:3128...
</I>&gt;&gt;&gt;<i> * Connected to localhost (127.0.0.1) port 3128 (#0)
</I>&gt;&gt;&gt;&gt;<i> GET <A HREF="http://www.google.com/">http://www.google.com/</A> HTTP/1.1
</I>&gt;&gt;&gt;&gt;<i> Host: www.google.com
</I>&gt;&gt;&gt;&gt;<i> User-Agent: curl/7.75.0
</I>&gt;&gt;&gt;&gt;<i> Accept: */*
</I>&gt;&gt;&gt;&gt;<i> Proxy-Connection: Keep-Alive
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> * Mark bundle as not supporting multiuse
</I>&gt;&gt;&gt;<i> &lt; HTTP/1.1 503 Service Unavailable
</I>&gt;&gt;&gt;<i> &lt; Server: squid/5.1-VCS
</I>&gt;&gt;&gt;<i> &lt; Mime-Version: 1.0
</I>&gt;&gt;&gt;<i> &lt; Date: Sat, 09 Oct 2021 12:30:27 GMT
</I>&gt;&gt;&gt;<i> &lt; Content-Type: text/html;charset=utf-8
</I>&gt;&gt;&gt;<i> &lt; Content-Length: 3573
</I>&gt;&gt;&gt;<i> &lt; X-Squid-Error: ERR_CONNECT_FAIL 110
</I>&gt;&gt;&gt;<i> &lt; Vary: Accept-Language
</I>&gt;&gt;&gt;<i> &lt; Content-Language: en
</I>&gt;&gt;&gt;<i> &lt; X-Cache: MISS from clientproxy
</I>&gt;&gt;&gt;<i> &lt; X-Cache-Lookup: MISS from clientproxy:3128
</I>&gt;&gt;&gt;<i> &lt; Connection: keep-alive
</I>&gt;&gt;&gt;<i> &lt;
</I>&gt;&gt;&gt;<i> &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01//EN&quot;
</I>&gt;&gt;&gt;<i> <A HREF="http://www.w3.org/TR/html4/strict.dtd">http://www.w3.org/TR/html4/strict.dtd</A>&gt;
</I>&gt;&gt;&gt;<i> &lt;html&gt;&lt;head&gt;
</I>&gt;&gt;&gt;<i> &lt;meta type=&quot;copyright&quot; content=&quot;Copyright (C) 1996-2021 The Squid
</I>&gt;&gt;&gt;<i> Software Foundation and contributors&quot;&gt;
</I>&gt;&gt;&gt;<i> &lt;meta http-equiv=&quot;Content-Type&quot; CONTENT=&quot;text/html; charset=utf-8&quot;&gt;
</I>&gt;&gt;&gt;<i> &lt;title&gt;ERROR: The requested URL could not be retrieved&lt;/title&gt;
</I>&gt;&gt;&gt;<i> .....
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The cache log says:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.520 kid1| 11,2| client_side.cc(1353)
</I>&gt;&gt;&gt;<i> parseHttpRequest: HTTP Client conn10 local=127.0.0.1:3128
</I>&gt;&gt;&gt;<i> remote=127.0.0.1:45192 FD 12 flags=1
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.520 kid1| 11,2| client_side.cc(1354)
</I>&gt;&gt;&gt;<i> parseHttpRequest: HTTP Client REQUEST:
</I>&gt;&gt;&gt;<i> ---------
</I>&gt;&gt;&gt;<i> GET <A HREF="http://www.google.com/">http://www.google.com/</A> HTTP/1.1
</I>&gt;&gt;&gt;<i> Host: www.google.com
</I>&gt;&gt;&gt;<i> User-Agent: curl/7.75.0
</I>&gt;&gt;&gt;<i> Accept: */*
</I>&gt;&gt;&gt;<i> Proxy-Connection: Keep-Alive
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> ----------
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.520 kid1| 44,3| peer_select.cc(309) peerSelect:
</I>&gt;&gt;&gt;<i> e:=IV/0x12e63f0*2 <A HREF="http://www.google.com/">http://www.google.com/</A>
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.520 kid1| 44,7| peer_select.cc(1149)
</I>&gt;&gt;&gt;<i> interestedInitiator: PeerSelector1
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.520 kid1| 44,3| peer_select.cc(612) selectMore: GET
</I>&gt;&gt;&gt;<i> www.google.com
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.520 kid1| 44,3| peer_select.cc(617) selectMore:
</I>&gt;&gt;&gt;<i> direct = DIRECT_UNKNOWN (always_direct to be checked)
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 44,3| peer_select.cc(373)
</I>&gt;&gt;&gt;<i> checkAlwaysDirectDone: DENIED
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 44,7| peer_select.cc(1149)
</I>&gt;&gt;&gt;<i> interestedInitiator: PeerSelector1
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 44,3| peer_select.cc(612) selectMore: GET
</I>&gt;&gt;&gt;<i> www.google.com
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 44,3| peer_select.cc(626) selectMore:
</I>&gt;&gt;&gt;<i> direct = DIRECT_UNKNOWN (never_direct to be checked)
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 44,3| peer_select.cc(345)
</I>&gt;&gt;&gt;<i> checkNeverDirectDone: DENIED
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 44,7| peer_select.cc(1149)
</I>&gt;&gt;&gt;<i> interestedInitiator: PeerSelector1
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 44,3| peer_select.cc(612) selectMore: GET
</I>&gt;&gt;&gt;<i> www.google.com
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 44,3| peer_select.cc(577)
</I>&gt;&gt;&gt;<i> checkNetdbDirect: MY RTT = 0 msec
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 44,3| peer_select.cc(578)
</I>&gt;&gt;&gt;<i> checkNetdbDirect: minimum_direct_rtt = 400 msec
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 44,3| peer_select.cc(585)
</I>&gt;&gt;&gt;<i> checkNetdbDirect: MY hops = 0
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 44,3| peer_select.cc(586)
</I>&gt;&gt;&gt;<i> checkNetdbDirect: minimum_direct_hops = 4
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 44,3| peer_select.cc(647) selectMore:
</I>&gt;&gt;&gt;<i> direct = DIRECT_MAYBE (default)
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 44,3| peer_select.cc(650) selectMore:
</I>&gt;&gt;&gt;<i> direct = DIRECT_MAYBE
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 44,3| peer_select.cc(286)
</I>&gt;&gt;&gt;<i> peerSelectIcpPing: <A HREF="http://www.google.com/">http://www.google.com/</A>
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 44,3| peer_select.cc(297)
</I>&gt;&gt;&gt;<i> peerSelectIcpPing: counted 0 neighbors
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 44,3| peer_select.cc(833)
</I>&gt;&gt;&gt;<i> selectSomeParent: GET www.google.com
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 44,3| peer_select.cc(1098) addSelection:
</I>&gt;&gt;&gt;<i> adding FIRSTUP_PARENT/authproxy.example.com
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 44,3| peer_select.cc(1091) addSelection:
</I>&gt;&gt;&gt;<i> skipping ANY_OLD_PARENT/authproxy.example.com; have
</I>&gt;&gt;&gt;<i> FIRSTUP_PARENT/authproxy.example.com
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 44,3| peer_select.cc(1091) addSelection:
</I>&gt;&gt;&gt;<i> skipping DEFAULT_PARENT/authproxy.example.com; have
</I>&gt;&gt;&gt;<i> FIRSTUP_PARENT/authproxy.example.com
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 44,3| peer_select.cc(1098) addSelection:
</I>&gt;&gt;&gt;<i> adding HIER_DIRECT#www.google.com
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 44,7| peer_select.cc(1149)
</I>&gt;&gt;&gt;<i> interestedInitiator: PeerSelector1
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 44,2| peer_select.cc(460) resolveSelected:
</I>&gt;&gt;&gt;<i> Find IP destination for: <A HREF="http://www.google.com/">http://www.google.com/</A>' via
</I>&gt;&gt;&gt;<i> authproxy.example.com
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 44,7| peer_select.cc(1149)
</I>&gt;&gt;&gt;<i> interestedInitiator: PeerSelector1
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 44,2| peer_select.cc(1171) handlePath:
</I>&gt;&gt;&gt;<i> PeerSelector1 found conn11 local=0.0.0.0 remote=10.20.1.1:8080
</I>&gt;&gt;&gt;<i> FIRSTUP_PARENT flags=1, destination #1 for <A HREF="http://www.google.com/">http://www.google.com/</A>
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 44,2| peer_select.cc(1177) handlePath:
</I>&gt;&gt;&gt;<i> always_direct = DENIED
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 44,2| peer_select.cc(1178) handlePath:
</I>&gt;&gt;&gt;<i> never_direct = DENIED
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 44,2| peer_select.cc(1179) handlePath:
</I>&gt;&gt;&gt;<i> timedout = 0
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 44,7| peer_select.cc(1149)
</I>&gt;&gt;&gt;<i> interestedInitiator: PeerSelector1
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.523 kid1| 11,7| HttpRequest.cc(468) clearError: old:
</I>&gt;&gt;&gt;<i> ERR_NONE
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.524 kid1| 44,7| peer_select.cc(1149)
</I>&gt;&gt;&gt;<i> interestedInitiator: PeerSelector1
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.524 kid1| 44,7| peer_select.cc(1149)
</I>&gt;&gt;&gt;<i> interestedInitiator: PeerSelector1
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.524 kid1| 44,2| peer_select.cc(460) resolveSelected:
</I>&gt;&gt;&gt;<i> Find IP destination for: <A HREF="http://www.google.com/">http://www.google.com/</A>' via www.google.com
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.524 kid1| 44,7| peer_select.cc(1149)
</I>&gt;&gt;&gt;<i> interestedInitiator: PeerSelector1
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.524 kid1| 44,2| peer_select.cc(1171) handlePath:
</I>&gt;&gt;&gt;<i> PeerSelector1 found conn12 local=0.0.0.0 remote=172.217.23.100:80
</I>&gt;&gt;&gt;<i> HIER_DIRECT flags=1, destination #2 for <A HREF="http://www.google.com/">http://www.google.com/</A>
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.524 kid1| 44,2| peer_select.cc(1177) handlePath:
</I>&gt;&gt;&gt;<i> always_direct = DENIED
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.524 kid1| 44,2| peer_select.cc(1178) handlePath:
</I>&gt;&gt;&gt;<i> never_direct = DENIED
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.524 kid1| 44,2| peer_select.cc(1179) handlePath:
</I>&gt;&gt;&gt;<i> timedout = 0
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.524 kid1| 44,7| peer_select.cc(1149)
</I>&gt;&gt;&gt;<i> interestedInitiator: PeerSelector1
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.524 kid1| 44,7| peer_select.cc(1149)
</I>&gt;&gt;&gt;<i> interestedInitiator: PeerSelector1
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.524 kid1| 44,7| peer_select.cc(1149)
</I>&gt;&gt;&gt;<i> interestedInitiator: PeerSelector1
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.524 kid1| 44,2| peer_select.cc(479) resolveSelected:
</I>&gt;&gt;&gt;<i> PeerSelector1 found all 2 destinations for <A HREF="http://www.google.com/">http://www.google.com/</A>
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.524 kid1| 44,2| peer_select.cc(480) resolveSelected:
</I>&gt;&gt;&gt;<i> always_direct = DENIED
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.524 kid1| 44,2| peer_select.cc(481) resolveSelected:
</I>&gt;&gt;&gt;<i> never_direct = DENIED
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.524 kid1| 44,2| peer_select.cc(482) resolveSelected:
</I>&gt;&gt;&gt;<i> timedout = 0
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.524 kid1| 44,7| peer_select.cc(1149)
</I>&gt;&gt;&gt;<i> interestedInitiator: PeerSelector1
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.524 kid1| 44,3| peer_select.cc(241) ~PeerSelector:
</I>&gt;&gt;&gt;<i> <A HREF="http://www.google.com/">http://www.google.com/</A>
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.526 kid1| 11,4| HttpRequest.cc(453) prepForPeering:
</I>&gt;&gt;&gt;<i> 0x1154cf0 to authproxy.example.com proxy
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.526 kid1| 11,3| http.cc(2486) httpStart: GET
</I>&gt;&gt;&gt;<i> <A HREF="http://www.google.com/">http://www.google.com/</A>
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.527 kid1| 11,5| http.cc(87) HttpStateData:
</I>&gt;&gt;&gt;<i> HttpStateData 0x12e9988 created
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.527 kid1| 11,5| http.cc(2367) sendRequest: conn13
</I>&gt;&gt;&gt;<i> local=10.10.1.1:36928 remote=10.20.1.1:8080 FIRSTUP_PARENT FD 13
</I>&gt;&gt;&gt;<i> flags=1, request 0x1154cf0*6, this 0x12e9988.
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.527 kid1| 11,5| AsyncCall.cc(29) AsyncCall: The
</I>&gt;&gt;&gt;<i> AsyncCall HttpStateData::httpTimeout constructed, this=0x12e8920
</I>&gt;&gt;&gt;<i> [call65]
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.527 kid1| 11,8| http.cc(1656)
</I>&gt;&gt;&gt;<i> maybeMakeSpaceAvailable: may read up to 65536 bytes info buf(0/65536)
</I>&gt;&gt;&gt;<i> from conn13 local=10.10.1.1:36928 remote=10.20.1.1:8080 FIRSTUP_PARENT
</I>&gt;&gt;&gt;<i> FD 13 flags=1
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.527 kid1| 11,5| AsyncCall.cc(29) AsyncCall: The
</I>&gt;&gt;&gt;<i> AsyncCall HttpStateData::readReply constructed, this=0x12f9c10 [call66]
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.527 kid1| 11,5| AsyncCall.cc(29) AsyncCall: The
</I>&gt;&gt;&gt;<i> AsyncCall HttpStateData::wroteLast constructed, this=0x12f9cc0 [call67]
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.527 kid1| 11,8| http.cc(2309) decideIfWeDoRanges:
</I>&gt;&gt;&gt;<i> decideIfWeDoRanges: range specs: 0, cachable: 1; we_do_ranges: 0
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.527 kid1| 11,5| http.cc(2113)
</I>&gt;&gt;&gt;<i> copyOneHeaderFromClientsideRequestToUpstreamRequest:
</I>&gt;&gt;&gt;<i> httpBuildRequestHeader: User-Agent: curl/7.75.0
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.527 kid1| 11,5| http.cc(2113)
</I>&gt;&gt;&gt;<i> copyOneHeaderFromClientsideRequestToUpstreamRequest:
</I>&gt;&gt;&gt;<i> httpBuildRequestHeader: Accept: */*
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.527 kid1| 11,5| http.cc(2113)
</I>&gt;&gt;&gt;<i> copyOneHeaderFromClientsideRequestToUpstreamRequest:
</I>&gt;&gt;&gt;<i> httpBuildRequestHeader: Proxy-Connection: Keep-Alive
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.527 kid1| 11,5| http.cc(2113)
</I>&gt;&gt;&gt;<i> copyOneHeaderFromClientsideRequestToUpstreamRequest:
</I>&gt;&gt;&gt;<i> httpBuildRequestHeader: Host: www.google.com
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.527 kid1| 11,5| peer_proxy_negotiate_auth.cc(539)
</I>&gt;&gt;&gt;<i> peer_proxy_negotiate_auth: Import gss name
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.527 kid1| 11,5| peer_proxy_negotiate_auth.cc(546)
</I>&gt;&gt;&gt;<i> peer_proxy_negotiate_auth: Initialize gss security context
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.531 kid1| 11,5| peer_proxy_negotiate_auth.cc(560)
</I>&gt;&gt;&gt;<i> peer_proxy_negotiate_auth: Got token with length 2568
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.531 kid1| 11,2| http.cc(2442) sendRequest: HTTP
</I>&gt;&gt;&gt;<i> Server conn13 local=10.10.1.1:36928 remote=10.20.1.1:8080 FIRSTUP_PARENT
</I>&gt;&gt;&gt;<i> FD 13 flags=1
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.531 kid1| 11,2| http.cc(2443) sendRequest: HTTP
</I>&gt;&gt;&gt;<i> Server REQUEST:
</I>&gt;&gt;&gt;<i> ---------
</I>&gt;&gt;&gt;<i> GET <A HREF="http://www.google.com/">http://www.google.com/</A> HTTP/1.1
</I>&gt;&gt;&gt;<i> User-Agent: curl/7.75.0
</I>&gt;&gt;&gt;<i> Accept: */*
</I>&gt;&gt;&gt;<i> Host: www.google.com
</I>&gt;&gt;&gt;<i> Proxy-Authorization: Negotiate YIIK....
</I>&gt;&gt;&gt;<i> Cache-Control: max-age=259200
</I>&gt;&gt;&gt;<i> Connection: keep-alive
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> ----------
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.531 kid1| 11,5| AsyncCall.cc(96) ScheduleCall:
</I>&gt;&gt;&gt;<i> IoCallback.cc(131) will call HttpStateData::wroteLast(conn13
</I>&gt;&gt;&gt;<i> local=10.10.1.1:36928 remote=10.20.1.1:8080 FIRSTUP_PARENT FD 13
</I>&gt;&gt;&gt;<i> flags=1, data=0x12e9988) [call67]
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.531 kid1| 11,5| AsyncCallQueue.cc(59) fireNext:
</I>&gt;&gt;&gt;<i> entering HttpStateData::wroteLast(conn13 local=10.10.1.1:36928
</I>&gt;&gt;&gt;<i> remote=10.20.1.1:8080 FIRSTUP_PARENT FD 13 flags=1, data=0x12e9988)
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.531 kid1| 11,5| AsyncCall.cc(41) make: make call
</I>&gt;&gt;&gt;<i> HttpStateData::wroteLast [call67]
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.531 kid1| 11,5| AsyncJob.cc(122) callStart:
</I>&gt;&gt;&gt;<i> HttpStateData status in: [ job8]
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.531 kid1| 11,5| http.cc(1667) wroteLast: conn13
</I>&gt;&gt;&gt;<i> local=10.10.1.1:36928 remote=10.20.1.1:8080 FIRSTUP_PARENT FD 13
</I>&gt;&gt;&gt;<i> flags=1: size 3611: errflag 0.
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.531 kid1| 11,5| AsyncCall.cc(29) AsyncCall: The
</I>&gt;&gt;&gt;<i> AsyncCall HttpStateData::httpTimeout constructed, this=0xe34fa0 [call69]
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.531 kid1| 11,5| AsyncJob.cc(153) callEnd:
</I>&gt;&gt;&gt;<i> HttpStateData status out: [ job8]
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.531 kid1| 11,5| AsyncCallQueue.cc(61) fireNext:
</I>&gt;&gt;&gt;<i> leaving HttpStateData::wroteLast(conn13 local=10.10.1.1:36928
</I>&gt;&gt;&gt;<i> remote=10.20.1.1:8080 FIRSTUP_PARENT FD 13 flags=1, data=0x12e9988)
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.615 kid1| 11,5| AsyncCall.cc(96) ScheduleCall:
</I>&gt;&gt;&gt;<i> IoCallback.cc(131) will call HttpStateData::readReply(conn13
</I>&gt;&gt;&gt;<i> local=10.10.1.1:36928 remote=10.20.1.1:8080 FIRSTUP_PARENT FD 13
</I>&gt;&gt;&gt;<i> flags=1, data=0x12e9988) [call66]
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.615 kid1| 11,5| AsyncCallQueue.cc(59) fireNext:
</I>&gt;&gt;&gt;<i> entering HttpStateData::readReply(conn13 local=10.10.1.1:36928
</I>&gt;&gt;&gt;<i> remote=10.20.1.1:8080 FIRSTUP_PARENT FD 13 flags=1, data=0x12e9988)
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.615 kid1| 11,5| AsyncCall.cc(41) make: make call
</I>&gt;&gt;&gt;<i> HttpStateData::readReply [call66]
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.615 kid1| 11,5| AsyncJob.cc(122) callStart:
</I>&gt;&gt;&gt;<i> HttpStateData status in: [ job8]
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.615 kid1| 11,5| http.cc(1215) readReply: conn13
</I>&gt;&gt;&gt;<i> local=10.10.1.1:36928 remote=10.20.1.1:8080 FIRSTUP_PARENT FD 13 flags=1
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.615 kid1| ctx: enter level&#160; 0:
</I>&gt;&gt;&gt;<i> '<A HREF="http://www.google.com/">http://www.google.com/</A>'
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.615 kid1| 11,3| http.cc(666) processReplyHeader:
</I>&gt;&gt;&gt;<i> processReplyHeader: key '0200000000000000843D000001000000'
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.615 kid1| 11,2| http.cc(720) processReplyHeader:
</I>&gt;&gt;&gt;<i> HTTP Server conn13 local=10.10.1.1:36928 remote=10.20.1.1:8080
</I>&gt;&gt;&gt;<i> FIRSTUP_PARENT FD 13 flags=1
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.615 kid1| 11,2| http.cc(721) processReplyHeader:
</I>&gt;&gt;&gt;<i> HTTP Server RESPONSE:
</I>&gt;&gt;&gt;<i> ---------
</I>&gt;&gt;&gt;<i> HTTP/1.1 301 Moved Permanently
</I>&gt;&gt;&gt;<i> Location: <A HREF="https://www.google.com/">https://www.google.com/</A>
</I>&gt;&gt;&gt;<i> Content-Length: 0
</I>&gt;&gt;&gt;<i> Proxy-Connection: Keep-Alive
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> ----------
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.616 kid1| 11,5| Client.cc(119) setVirginReply:
</I>&gt;&gt;&gt;<i> 0x12e9988 setting virgin reply to 0x12fa850
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.616 kid1| ctx: exit level&#160; 0
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.616 kid1| 11,5| Client.cc(973) adaptOrFinalizeReply:
</I>&gt;&gt;&gt;<i> adaptationAccessCheckPending=0
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.616 kid1| 11,5| Client.cc(139) setFinalReply:
</I>&gt;&gt;&gt;<i> 0x12e9988 setting final reply to 0x12fa850
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.616 kid1| ctx: enter level&#160; 0:
</I>&gt;&gt;&gt;<i> '<A HREF="http://www.google.com/">http://www.google.com/</A>'
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.616 kid1| 11,3| http.cc(979) haveParsedReplyHeaders:
</I>&gt;&gt;&gt;<i> HTTP CODE: 301
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.616 kid1| 11,3| http.cc(1054)
</I>&gt;&gt;&gt;<i> haveParsedReplyHeaders: decided: do not cache but share because refresh
</I>&gt;&gt;&gt;<i> check returned non-cacheable; HTTP status 301 e:=p2XIV/0x12e63f0*3
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.616 kid1| ctx: exit level&#160; 0
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.616 kid1| 11,2| Stream.cc(279) sendStartOfMessage:
</I>&gt;&gt;&gt;<i> HTTP Client conn10 local=127.0.0.1:3128 remote=127.0.0.1:45192 FD 12
</I>&gt;&gt;&gt;<i> flags=1
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.616 kid1| 11,2| Stream.cc(280) sendStartOfMessage:
</I>&gt;&gt;&gt;<i> HTTP Client REPLY:
</I>&gt;&gt;&gt;<i> ---------
</I>&gt;&gt;&gt;<i> HTTP/1.1 301 Moved Permanently
</I>&gt;&gt;&gt;<i> Location: <A HREF="https://www.google.com/">https://www.google.com/</A>
</I>&gt;&gt;&gt;<i> Content-Length: 0
</I>&gt;&gt;&gt;<i> Date: Sat, 09 Oct 2021 12:29:23 GMT
</I>&gt;&gt;&gt;<i> X-Cache: MISS from clientproxy
</I>&gt;&gt;&gt;<i> X-Cache-Lookup: MISS from clientproxy:3128
</I>&gt;&gt;&gt;<i> Connection: keep-alive
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> ----------
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.616 kid1| 11,5| http.cc(1491) processReplyBody:
</I>&gt;&gt;&gt;<i> adaptationAccessCheckPending=0
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.616 kid1| 11,3| http.cc(1154) persistentConnStatus:
</I>&gt;&gt;&gt;<i> conn13 local=10.10.1.1:36928 remote=10.20.1.1:8080 FIRSTUP_PARENT FD 13
</I>&gt;&gt;&gt;<i> flags=1 eof=0
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.616 kid1| 11,5| http.cc(1174) persistentConnStatus:
</I>&gt;&gt;&gt;<i> persistentConnStatus: content_length=0
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.616 kid1| 11,5| http.cc(1178) persistentConnStatus:
</I>&gt;&gt;&gt;<i> persistentConnStatus: clen=0
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.616 kid1| 11,5| http.cc(1537) processReplyBody:
</I>&gt;&gt;&gt;<i> processReplyBody: COMPLETE_PERSISTENT_MSG from conn13
</I>&gt;&gt;&gt;<i> local=10.10.1.1:36928 remote=10.20.1.1:8080 FIRSTUP_PARENT FD 13 flags=1
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.616 kid1| 11,5| Client.cc(162) serverComplete:
</I>&gt;&gt;&gt;<i> serverComplete 0x12e9988
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.616 kid1| 11,5| Client.cc(184) serverComplete2:
</I>&gt;&gt;&gt;<i> serverComplete2 0x12e9988
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.616 kid1| 11,5| Client.cc(212) completeForwarding:
</I>&gt;&gt;&gt;<i> completing forwarding for 0x12e6e28*2
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.616 kid1| 11,5| Client.cc(586) cleanAdaptation:
</I>&gt;&gt;&gt;<i> cleaning ICAP; ACL: 0
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.616 kid1| 11,5| http.cc(134) ~HttpStateData:
</I>&gt;&gt;&gt;<i> HttpStateData 0x12e9988 destroyed;
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:23.616 kid1| 11,5| AsyncCallQueue.cc(61) fireNext:
</I>&gt;&gt;&gt;<i> leaving HttpStateData::readReply(conn13 local=10.10.1.1:36928
</I>&gt;&gt;&gt;<i> remote=10.20.1.1:8080 FIRSTUP_PARENT FD 13 flags=1, data=0x12e9988)
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 11,2| client_side.cc(1353)
</I>&gt;&gt;&gt;<i> parseHttpRequest: HTTP Client conn15 local=127.0.0.1:3128
</I>&gt;&gt;&gt;<i> remote=127.0.0.1:45219 FD 12 flags=1
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 11,2| client_side.cc(1354)
</I>&gt;&gt;&gt;<i> parseHttpRequest: HTTP Client REQUEST:
</I>&gt;&gt;&gt;<i> ---------
</I>&gt;&gt;&gt;<i> GET <A HREF="http://www.google.com/">http://www.google.com/</A> HTTP/1.1
</I>&gt;&gt;&gt;<i> Host: www.google.com
</I>&gt;&gt;&gt;<i> User-Agent: curl/7.75.0
</I>&gt;&gt;&gt;<i> Accept: */*
</I>&gt;&gt;&gt;<i> Proxy-Connection: Keep-Alive
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> ----------
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,3| peer_select.cc(309) peerSelect:
</I>&gt;&gt;&gt;<i> e:=IV/0x12e63f0*2 <A HREF="http://www.google.com/">http://www.google.com/</A>
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,7| peer_select.cc(1149)
</I>&gt;&gt;&gt;<i> interestedInitiator: PeerSelector2
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,3| peer_select.cc(612) selectMore: GET
</I>&gt;&gt;&gt;<i> www.google.com
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,3| peer_select.cc(617) selectMore:
</I>&gt;&gt;&gt;<i> direct = DIRECT_UNKNOWN (always_direct to be checked)
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,3| peer_select.cc(373)
</I>&gt;&gt;&gt;<i> checkAlwaysDirectDone: DENIED
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,7| peer_select.cc(1149)
</I>&gt;&gt;&gt;<i> interestedInitiator: PeerSelector2
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,3| peer_select.cc(612) selectMore: GET
</I>&gt;&gt;&gt;<i> www.google.com
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,3| peer_select.cc(626) selectMore:
</I>&gt;&gt;&gt;<i> direct = DIRECT_UNKNOWN (never_direct to be checked)
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,3| peer_select.cc(345)
</I>&gt;&gt;&gt;<i> checkNeverDirectDone: DENIED
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,7| peer_select.cc(1149)
</I>&gt;&gt;&gt;<i> interestedInitiator: PeerSelector2
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,3| peer_select.cc(612) selectMore: GET
</I>&gt;&gt;&gt;<i> www.google.com
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,3| peer_select.cc(577)
</I>&gt;&gt;&gt;<i> checkNetdbDirect: MY RTT = 1 msec
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,3| peer_select.cc(578)
</I>&gt;&gt;&gt;<i> checkNetdbDirect: minimum_direct_rtt = 400 msec
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,3| peer_select.cc(644) selectMore:
</I>&gt;&gt;&gt;<i> direct = DIRECT_YES (checkNetdbDirect)
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,3| peer_select.cc(650) selectMore:
</I>&gt;&gt;&gt;<i> direct = DIRECT_YES
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,3| peer_select.cc(1098) addSelection:
</I>&gt;&gt;&gt;<i> adding HIER_DIRECT#www.google.com
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,7| peer_select.cc(1149)
</I>&gt;&gt;&gt;<i> interestedInitiator: PeerSelector2
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,2| peer_select.cc(460) resolveSelected:
</I>&gt;&gt;&gt;<i> Find IP destination for: <A HREF="http://www.google.com/">http://www.google.com/</A>' via www.google.com
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,7| peer_select.cc(1149)
</I>&gt;&gt;&gt;<i> interestedInitiator: PeerSelector2
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,2| peer_select.cc(1171) handlePath:
</I>&gt;&gt;&gt;<i> PeerSelector2 found conn16 local=0.0.0.0 remote=172.217.23.100:80
</I>&gt;&gt;&gt;<i> HIER_DIRECT flags=1, destination #1 for <A HREF="http://www.google.com/">http://www.google.com/</A>
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,2| peer_select.cc(1177) handlePath:
</I>&gt;&gt;&gt;<i> always_direct = DENIED
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,2| peer_select.cc(1178) handlePath:
</I>&gt;&gt;&gt;<i> never_direct = DENIED
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,2| peer_select.cc(1179) handlePath:
</I>&gt;&gt;&gt;<i> timedout = 0
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,7| peer_select.cc(1149)
</I>&gt;&gt;&gt;<i> interestedInitiator: PeerSelector2
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 11,7| HttpRequest.cc(468) clearError: old:
</I>&gt;&gt;&gt;<i> ERR_NONE
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,7| peer_select.cc(1149)
</I>&gt;&gt;&gt;<i> interestedInitiator: PeerSelector2
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,7| peer_select.cc(1149)
</I>&gt;&gt;&gt;<i> interestedInitiator: PeerSelector2
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,2| peer_select.cc(479) resolveSelected:
</I>&gt;&gt;&gt;<i> PeerSelector2 found all 1 destinations for <A HREF="http://www.google.com/">http://www.google.com/</A>
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,2| peer_select.cc(480) resolveSelected:
</I>&gt;&gt;&gt;<i> always_direct = DENIED
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,2| peer_select.cc(481) resolveSelected:
</I>&gt;&gt;&gt;<i> never_direct = DENIED
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,2| peer_select.cc(482) resolveSelected:
</I>&gt;&gt;&gt;<i> timedout = 0
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,7| peer_select.cc(1149)
</I>&gt;&gt;&gt;<i> interestedInitiator: PeerSelector2
</I>&gt;&gt;&gt;<i> 2021/10/09 13:29:27.287 kid1| 44,3| peer_select.cc(241) ~PeerSelector:
</I>&gt;&gt;&gt;<i> <A HREF="http://www.google.com/">http://www.google.com/</A>
</I>&gt;&gt;&gt;<i> 2021/10/09 13:30:27.421 kid1| 11,2| Stream.cc(279) sendStartOfMessage:
</I>&gt;&gt;&gt;<i> HTTP Client conn15 local=127.0.0.1:3128 remote=127.0.0.1:45219 FD 12
</I>&gt;&gt;&gt;<i> flags=1
</I>&gt;&gt;&gt;<i> 2021/10/09 13:30:27.421 kid1| 11,2| Stream.cc(280) sendStartOfMessage:
</I>&gt;&gt;&gt;<i> HTTP Client REPLY:
</I>&gt;&gt;&gt;<i> ---------
</I>&gt;&gt;&gt;<i> HTTP/1.1 503 Service Unavailable
</I>&gt;&gt;&gt;<i> Server: squid/5.1-VCS
</I>&gt;&gt;&gt;<i> Mime-Version: 1.0
</I>&gt;&gt;&gt;<i> Date: Sat, 09 Oct 2021 12:30:27 GMT
</I>&gt;&gt;&gt;<i> Content-Type: text/html;charset=utf-8
</I>&gt;&gt;&gt;<i> Content-Length: 3573
</I>&gt;&gt;&gt;<i> X-Squid-Error: ERR_CONNECT_FAIL 110
</I>&gt;&gt;&gt;<i> Vary: Accept-Language
</I>&gt;&gt;&gt;<i> Content-Language: en
</I>&gt;&gt;&gt;<i> X-Cache: MISS from clientproxy
</I>&gt;&gt;&gt;<i> X-Cache-Lookup: MISS from clientproxy:3128
</I>&gt;&gt;&gt;<i> Connection: keep-alive
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> ----------
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Thank you
</I>&gt;&gt;&gt;<i> Markus
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &quot;Markus Moeller&quot;&#160; wrote in message news:sjrrhc$lat$<A HREF="https://lists.squid-cache.org/listinfo/squid-users">1 at ciao.gmane.io...</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I understand now better the concept.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Thank you
</I>&gt;&gt;&gt;<i> Markus
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> Markus
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024160.html">[squid-users] squid 5 and parent peers
</A></li>
	<LI>Next message (by thread): <A HREF="024162.html">[squid-users] squid 5 and parent peers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24161">[ date ]</a>
              <a href="thread.html#24161">[ thread ]</a>
              <a href="subject.html#24161">[ subject ]</a>
              <a href="author.html#24161">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
