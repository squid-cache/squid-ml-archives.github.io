<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Kerberos authentication with multiple squids
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Kerberos%20authentication%20with%20multiple%20squids&In-Reply-To=%3Csk7d6c%2410fh%241%40ciao.gmane.io%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024168.html">
   <LINK REL="Next"  HREF="024174.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Kerberos authentication with multiple squids</H1>
    <B>Markus Moeller</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Kerberos%20authentication%20with%20multiple%20squids&In-Reply-To=%3Csk7d6c%2410fh%241%40ciao.gmane.io%3E"
       TITLE="[squid-users] Kerberos authentication with multiple squids">huaraz at moeller.plus.com
       </A><BR>
    <I>Wed Oct 13 19:48:25 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024168.html">[squid-users] Kerberos authentication with multiple squids
</A></li>
        <LI>Next message (by thread): <A HREF="024174.html">[squid-users] Kerberos authentication with multiple squids
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24173">[ date ]</a>
              <a href="thread.html#24173">[ thread ]</a>
              <a href="subject.html#24173">[ subject ]</a>
              <a href="author.html#24173">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The problem lies more in the way how Kerberos proxy authentication works. 
The client uses the proxy name to create a ticket and in this case it would 
be the name of the first proxy e.g. proxy1.internal.  The first proxy will 
pass it through to the authenticating proxy for authentication 
proxy2.internal. Now the client receiving a 407 thinks that proxy1 asked for 
authentication (not knowing it is only a passthrough) and will ask for a 
ticket for proxy1, which it can't get as proxy1 is not in AD.  Even if 
proxy1 would be in AD, the client would send a proxy1 ticket to proxy2 which 
will be rejected.

Markus





&quot;Amos Jeffries&quot;  wrote in message 
news:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ac36f75f-97c7-211e-a5bd-b12b7035ad0d at treenet.co.nz...</A>

On 12/10/21 9:33 pm, &#26862; &#38534;&#32865; wrote:
&gt;<i> I made Single Sign On environment with AD+Squid and it worked fine.
</I>&gt;<i>
</I>&gt;<i> [It works]
</I>&gt;<i> Client(Windows) -&gt; Squid(CentOS) -&gt; Internet
</I>&gt;<i>
</I>&gt;<i> * Client is joined the domain and Squid configured Kerberos Authentication 
</I>&gt;<i> with AD.
</I>&gt;<i>
</I>&gt;<i> But after add another squid, it didn't work.
</I>&gt;<i>
</I>...
&gt;<i>
</I>&gt;<i> Do I misundastand something or squid originally don't support
</I>&gt;<i> multiple proxy those relay Kerberos authentication information?
</I>&gt;<i>
</I>
login=PASSTHRU means your Squid plays no part in the authentication. It
literally passes the peer the same Proxy-Auth* headers it receives from
the client, and the resulting response ones go back to the client.
  Which means auth issues are a problem with either the client or server
software. Squid cannot do anything about those.


Amos
_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A> 



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024168.html">[squid-users] Kerberos authentication with multiple squids
</A></li>
	<LI>Next message (by thread): <A HREF="024174.html">[squid-users] Kerberos authentication with multiple squids
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24173">[ date ]</a>
              <a href="thread.html#24173">[ thread ]</a>
              <a href="subject.html#24173">[ subject ]</a>
              <a href="author.html#24173">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
