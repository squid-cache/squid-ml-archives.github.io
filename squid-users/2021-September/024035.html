<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Compile/Rebuilding on debian bullseye (or buster)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Compile/Rebuilding%20on%20debian%20bullseye%20%28or%20buster%29&In-Reply-To=%3Cvmime.614069e5.43a6.3660c743bb9ffb5%40ms249-lin-003.rotterdam.bazuin.nl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024034.html">
   <LINK REL="Next"  HREF="024037.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Compile/Rebuilding on debian bullseye (or buster)</H1>
    <B>L.P.H. van Belle</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Compile/Rebuilding%20on%20debian%20bullseye%20%28or%20buster%29&In-Reply-To=%3Cvmime.614069e5.43a6.3660c743bb9ffb5%40ms249-lin-003.rotterdam.bazuin.nl%3E"
       TITLE="[squid-users] Compile/Rebuilding on debian bullseye (or buster)">belle at bazuin.nl
       </A><BR>
    <I>Tue Sep 14 09:22:45 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024034.html">[squid-users] How to define two radius servers in radius_config
</A></li>
        <LI>Next message (by thread): <A HREF="024037.html">[squid-users] Compile/Rebuilding on debian bullseye (or buster)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24035">[ date ]</a>
              <a href="thread.html#24035">[ thread ]</a>
              <a href="subject.html#24035">[ subject ]</a>
              <a href="author.html#24035">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hai Amos, 

Im attempting to make a squid 5.1 build based on the bullseye squid/debian folder. 
( ps. Im building with sbuilder ) 

Now, this &quot;normaly&quot; worked since squid 3.2 for me, copy the debian folder, make minor adjustments if needed, 
Just with latest adjustments, well, i cant make it work. 

This was my last adjustmated.. 

  * Used build : squid-5.1-20210804-r1f9e52827 of 04 Aug 2021
  * Refreshed patches, removed patches already included.
  * d/control lower debhelper to 12 to allow building


Changed d/rules, added. -srcdir=. --disable-dependency-tracking 
Any suggestions what i can do here? 
If you want/need, i have the complete build log available. 

The confirgure part and error. 

configure: exit 1
dh_auto_configure: ./configure --build=x86_64-linux-gnu --prefix=/usr --includedir=\${prefix}/include --mandir=\${prefix}/share/man --infodir=\${prefix}/share/info --sysconfdir=/etc --localstatedir=/var --disable-silent-rules --libdir=\${prefix}/lib/x86_64-linux-gnu --runstatedir=/run --disable-maintainer-mode --disable-dependency-tracking &quot;BUILDCXXFLAGS=-g -O2 -fdebug-prefix-map=/&lt;&lt;PKGBUILDDIR&gt;&gt;=. -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -Wl,-z,relro -Wl,-z,now &quot; BUILDCXX=g\+\+ --with-build-environment=default &quot;--enable-build-info=Debian linux&quot; --datadir=/usr/share/squid --sysconfdir=/etc/squid --libexecdir=/usr/lib/squid --mandir=/usr/share/man --enable-inline --disable-arch-native --enable-async-io=8 --enable-storeio=ufs,aufs,diskd,rock --enable-removal-policies=lru,heap --enable-delay-pools --enable-cache-digests --enable-icap-client --enable-follow-x-forwarded-for --enable-au
 th-basic=DB,fake,getpwnam,LDAP,NCSA,NIS,PAM,POP3,RADIUS,SASL,SMB --enable-auth-digest=file,LDAP --enable-auth-negotiate=kerberos,wrapper --enable-auth-ntlm=fake,SMB_LM --enable-external-acl-helpers=file_userip,kerberos_ldap_group,LDAP_group,session,SQL_session,time_quota,unix_group,wbinfo_group --enable-security-cert-validators=fake --enable-storeid-rewrite-helpers=file --enable-url-rewrite-helpers=fake --enable-eui --enable-esi --enable-icmp --enable-zph-qos --enable-ecap --disable-translation --with-swapdir=/var/spool/squid --with-logdir=/var/log/squid --with-pidfile=/run/squid.pid --with-filedescriptors=65536 --with-large-files --with-default-user=proxy --srcdir=. --disable-dependency-tracking --enable-linux-netfilter --with-systemd --with-gnutls returned exit code 1
make[1]: *** [debian/rules:79: override_dh_auto_configure] Error 2
make[1]: Leaving directory '/&lt;&lt;PKGBUILDDIR&gt;&gt;'
make: *** [debian/rules:71: build] Error 2


And i tested also with my last settings from my backport to Debian buster and squid 4.16(ssl enabled) 

Resulting in : 
configure: Samba TrivialDB library support: no
configure: error: external acl helper time_quota ... found but cannot be built
make: *** [/usr/share/cdbs/1/class/autotools.mk:46: debian/stamp-autotools] Error 1
dpkg-buildpackage: error: debian/rules build subprocess returned exit status 2
--------------------------------------------------------------------------------


So im a bit stuck here..
And yes, a ./configure does configure it all without problems.. 

Any tips on this ? 

Greetz, 

Louis



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024034.html">[squid-users] How to define two radius servers in radius_config
</A></li>
	<LI>Next message (by thread): <A HREF="024037.html">[squid-users] Compile/Rebuilding on debian bullseye (or buster)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24035">[ date ]</a>
              <a href="thread.html#24035">[ thread ]</a>
              <a href="subject.html#24035">[ subject ]</a>
              <a href="author.html#24035">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
