<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Compile/Rebuilding on debian bullseye (or buster)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Compile/Rebuilding%20on%20debian%20bullseye%20%28or%20buster%29&In-Reply-To=%3Cvmime.6141cae4.2ada.6144343c44c14f24%40ms249-lin-003.rotterdam.bazuin.nl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024037.html">
   <LINK REL="Next"  HREF="024049.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Compile/Rebuilding on debian bullseye (or buster)</H1>
    <B>L.P.H. van Belle</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Compile/Rebuilding%20on%20debian%20bullseye%20%28or%20buster%29&In-Reply-To=%3Cvmime.6141cae4.2ada.6144343c44c14f24%40ms249-lin-003.rotterdam.bazuin.nl%3E"
       TITLE="[squid-users] Compile/Rebuilding on debian bullseye (or buster)">belle at bazuin.nl
       </A><BR>
    <I>Wed Sep 15 10:28:52 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024037.html">[squid-users] Compile/Rebuilding on debian bullseye (or buster)
</A></li>
        <LI>Next message (by thread): <A HREF="024049.html">[squid-users] Compile/Rebuilding on debian bullseye (or buster)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24044">[ date ]</a>
              <a href="thread.html#24044">[ thread ]</a>
              <a href="subject.html#24044">[ subject ]</a>
              <a href="author.html#24044">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hai Amos, 

Thanks on the reply, ive missed the change from db to tdb, thanks on that. 

What i notice in the builds is, 

I see this one.. 

config.status: creating test-suite/Makefile

And then i see these, then it failes. 

cp ../../src/tests/stub_fd.cc tests/stub_fd.cc
cp: cannot create regular file 'tests/stub_fd.cc': No such file or directory
make[4]: *** [Makefile:1445: tests/stub_fd.cc] Error 1


Is it possible that the &quot;tests&quot; folder (keep in mind above uses the old /debian setup),
is changed to &quot;test-suite&quot;..  

Im not really that into the code but, it &quot;looks&quot; like there is a folder missing &quot;tests&quot;  
Based on above, if can disable all tests, it should build. 

Suggestion on disabling the tests? 


Greetz, 

Louis

 

&gt;<i> -----Oorspronkelijk bericht-----
</I>&gt;<i> Van: squid-users 
</I>&gt;<i> [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] Namens 
</I>&gt;<i> Amos Jeffries
</I>&gt;<i> Verzonden: woensdag 15 september 2021 1:14
</I>&gt;<i> Aan: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> Onderwerp: Re: [squid-users] Compile/Rebuilding on debian 
</I>&gt;<i> bullseye (or buster)
</I>&gt;<i> 
</I>&gt;<i> On 14/09/21 9:22 pm, L.P.H. van Belle wrote:
</I>&gt;<i> &gt; Hai Amos,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Im attempting to make a squid 5.1 build based on the 
</I>&gt;<i> bullseye squid/debian folder.
</I>&gt;<i> &gt; ( ps. Im building with sbuilder )
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Now, this &quot;normaly&quot; worked since squid 3.2 for me, copy the 
</I>&gt;<i> debian folder, make minor adjustments if needed,
</I>&gt;<i> &gt; Just with latest adjustments, well, i cant make it work.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; This was my last adjustmated..
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;    * Used build : squid-5.1-20210804-r1f9e52827 of 04 Aug 2021
</I>&gt;<i> &gt;    * Refreshed patches, removed patches already included.
</I>&gt;<i> &gt;    * d/control lower debhelper to 12 to allow building
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Changed d/rules, added. -srcdir=. --disable-dependency-tracking
</I>&gt;<i> &gt; Any suggestions what i can do here?
</I>&gt;<i> 
</I>&gt;<i> I am a bit stuck here myself with this build style, that is 
</I>&gt;<i> part of why 
</I>&gt;<i> the package is not already updated. The Debian auto-build system adds 
</I>&gt;<i> those options and AFAICT does not provide an easy way to avoid.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; And i tested also with my last settings from my backport to 
</I>&gt;<i> Debian buster and squid 4.16(ssl enabled)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Resulting in :
</I>&gt;<i> &gt; configure: Samba TrivialDB library support: no
</I>&gt;<i> &gt; configure: error: external acl helper time_quota ... found 
</I>&gt;<i> but cannot be built
</I>&gt;<i> &gt; make: *** [/usr/share/cdbs/1/class/autotools.mk:46: 
</I>&gt;<i> debian/stamp-autotools] Error 1
</I>&gt;<i> &gt; dpkg-buildpackage: error: debian/rules build subprocess 
</I>&gt;<i> returned exit status 2
</I>&gt;<i> &gt; 
</I>&gt;<i> --------------------------------------------------------------
</I>&gt;<i> ------------------
</I>&gt;<i> 
</I>&gt;<i> Debian used to use the BerkeleyDB, so the normal Squid build 
</I>&gt;<i> dependencies pulls the library in for that.
</I>&gt;<i> 
</I>&gt;<i> If libdb-dev is no longer available you will need to install 
</I>&gt;<i> libtdb-dev 
</I>&gt;<i> package.
</I>&gt;<i> 
</I>&gt;<i> Also, (for now) if you are using the ext_time_quote_acl or 
</I>&gt;<i> ext_session_acl helpers you will need to manually purge their 
</I>&gt;<i> databases 
</I>&gt;<i> on install/upgrade.
</I>&gt;<i> 
</I>&gt;<i> Amos
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024037.html">[squid-users] Compile/Rebuilding on debian bullseye (or buster)
</A></li>
	<LI>Next message (by thread): <A HREF="024049.html">[squid-users] Compile/Rebuilding on debian bullseye (or buster)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24044">[ date ]</a>
              <a href="thread.html#24044">[ thread ]</a>
              <a href="subject.html#24044">[ subject ]</a>
              <a href="author.html#24044">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
