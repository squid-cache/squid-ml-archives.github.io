<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid 5.1/Debian WARNING: no_suid: setuid(0): (1) Operation not permitted
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%205.1/Debian%20WARNING%3A%20no_suid%3A%20setuid%280%29%3A%20%281%29%0A%20Operation%20not%20permitted&In-Reply-To=%3Cvmime.6141dcd9.636.2cf633ef57cb8fe9%40ms249-lin-003.rotterdam.bazuin.nl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024045.html">
   <LINK REL="Next"  HREF="024047.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid 5.1/Debian WARNING: no_suid: setuid(0): (1) Operation not permitted</H1>
    <B>L.P.H. van Belle</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%205.1/Debian%20WARNING%3A%20no_suid%3A%20setuid%280%29%3A%20%281%29%0A%20Operation%20not%20permitted&In-Reply-To=%3Cvmime.6141dcd9.636.2cf633ef57cb8fe9%40ms249-lin-003.rotterdam.bazuin.nl%3E"
       TITLE="[squid-users] squid 5.1/Debian WARNING: no_suid: setuid(0): (1) Operation not permitted">belle at bazuin.nl
       </A><BR>
    <I>Wed Sep 15 11:45:29 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024045.html">[squid-users] squid 5.1/Debian WARNING: no_suid: setuid(0): (1) Operation not permitted
</A></li>
        <LI>Next message (by thread): <A HREF="024047.html">[squid-users] squid 5.1/Debian WARNING: no_suid: setuid(0): (1) Operation not permitted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24046">[ date ]</a>
              <a href="thread.html#24046">[ thread ]</a>
              <a href="subject.html#24046">[ subject ]</a>
              <a href="author.html#24046">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>How do you build and start it, init.d/squid or systemd start squid

In case of last, what i suspect, I seen more if these messages on previous version.. 
But all my version dont show this on Debian 10. 
 
This is my latest startup for systemd 

# /lib/systemd/system/squid.service
## Copyright (C) 1996-2021 The Squid Software Foundation and contributors
##
## Squid software is distributed under GPLv2+ license and includes
## contributions from numerous individuals and organizations.
## Please see the COPYING and CONTRIBUTORS files for details.
##
 
[Unit]
Description=Squid Web Proxy Server
Documentation=man:squid(8)
After=network.target network-online.target nss-lookup.target
 
[Service]
Type=notify
PIDFile=/run/squid.pid
ExecStartPre=/usr/sbin/squid --foreground -z
ExecStart=/usr/sbin/squid --foreground -sYC
ExecReload=/bin/kill -HUP $MAINPID
KillMode=mixed
NotifyAccess=all
 
[Install]
WantedBy=multi-user.target


--- 
these are the settings from a debian (own) build setup with squid 4.16. ( with ssl enabled) 

squid -v
Squid Cache: Version 4.16
Service Name: squid
Debian linux
 
This binary uses OpenSSL 1.1.1d  10 Sep 2019. For legal restrictions on distribution see <A HREF="https://www.openssl.org/source/license.html">https://www.openssl.org/source/license.html</A>
 
configure options:  '--build=x86_64-linux-gnu' '--prefix=/usr' '--includedir=${prefix}/include' '--mandir=${prefix}/share/man' '--infodir=${prefix}/share/info' '--sysconfdir=/etc' '--localstatedir=/var' '--libexecdir=${prefix}/lib/squid' '--srcdir=.' '--disable-maintainer-mode' '--disable-dependency-tracking' '--disable-silent-rules' 'BUILDCXXFLAGS=-g -O2 -fdebug-prefix-map=/build/squid-4.16=. -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -Wl,-z,relro -Wl,-z,now -Wl,--as-needed' 'BUILDCXX=x86_64-linux-gnu-g++' '--with-build-environment=default' '--enable-build-info=Debian linux' '--datadir=/usr/share/squid' '--sysconfdir=/etc/squid' '--libexecdir=/usr/lib/squid' '--mandir=/usr/share/man' '--enable-inline' '--disable-arch-native' '--enable-async-io=8' '--enable-storeio=ufs,aufs,diskd,rock' '--enable-removal-policies=lru,heap' '--enable-delay-pools' '--enable-cache-digests' '--enable-ica
 p-client' '--enable-follow-x-forwarded-for' '--enable-auth-basic=DB,fake,getpwnam,LDAP,NCSA,NIS,PAM,POP3,RADIUS,SASL,SMB' '--enable-auth-digest=file,LDAP' '--enable-auth-negotiate=kerberos,wrapper' '--enable-auth-ntlm=fake,SMB_LM' '--enable-external-acl-helpers=file_userip,kerberos_ldap_group,LDAP_group,session,SQL_session,time_quota,unix_group,wbinfo_group' '--enable-security-cert-validators=fake' '--enable-storeid-rewrite-helpers=file' '--enable-url-rewrite-helpers=fake' '--enable-eui' '--enable-esi' '--enable-icmp' '--enable-zph-qos' '--enable-ecap' '--disable-translation' '--with-swapdir=/var/spool/squid' '--with-logdir=/var/log/squid' '--with-pidfile=/var/run/squid.pid' '--with-filedescriptors=65536' '--with-large-files' '--with-default-user=proxy' '--with-gnutls' '--enable-ssl' '--enable-ssl-crtd' '--with-openssl' '--enable-linux-netfilter' 'build_alias=x86_64-linux-gnu' 'CC=x86_64-linux-gnu-gcc' 'CFLAGS=-g -O2 -fdebug-prefix-map=/buil
 d/squid-4.16=. -fstack-protector-strong -Wformat -Werror=format-security -Wall' 'LDFLAGS=-Wl,-z,relro -Wl,-z,now -Wl,--as-needed' 'CPPFLAGS=-Wdate-time -D_FORTIFY_SOURCE=2' 'CXX=x86_64-linux-gnu-g++' 'CXXFLAGS=-g -O2 -fdebug-prefix-map=/build/squid-4.16=. -fstack-protector-strong -Wformat -Werror=format-security'


look if you also see : '--with-default-user=proxy'  
and if its self compiled. 
sudo adduser --system proxy 
And when thats done verify the needed folders and there rights/ownerships. 
 
The &quot;debian&quot; folder if you want it have a look of what i use currently in production. 

<A HREF="https://apt.van-belle.nl/debian/pool/main/s/squid/squid_4.16-0.1ssl1buster1.debian.tar.xz">https://apt.van-belle.nl/debian/pool/main/s/squid/squid_4.16-0.1ssl1buster1.debian.tar.xz</A> &lt;<A HREF="https://apt.van-belle.nl/debian/pool/main/s/squid/squid_4.16-0.1ssl1buster1.debian.tar.xz">https://apt.van-belle.nl/debian/pool/main/s/squid/squid_4.16-0.1ssl1buster1.debian.tar.xz</A>&gt;  
 
As soon i can make debian packages of 5.1, im making a buster and bullseye version. 

I hope this helps you a bit. 

Greetz, 

Louis

 




________________________________

	Van: squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] Namens David Touzeau
	Verzonden: woensdag 15 september 2021 12:40
	Aan: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
	Onderwerp: [squid-users] squid 5.1/Debian WARNING: no_suid: setuid(0): (1) Operation not permitted
	
	
	On Debian 10 64bits  with squid 5.1 we have thousand warning as this:
	
	2021/09/15 08:00:18 kid1| WARNING: no_suid: setuid(0): (1) Operation not permitted
	2021/09/15 08:00:18 kid2| WARNING: no_suid: setuid(0): (1) Operation not permitted
	2021/09/15 08:00:18 kid1| WARNING: no_suid: setuid(0): (1) Operation not permitted
	2021/09/15 08:00:18 kid2| WARNING: no_suid: setuid(0): (1) Operation not permitted
	2021/09/15 08:00:18 kid1| WARNING: no_suid: setuid(0): (1) Operation not permitted
	2021/09/15 08:00:18 kid2| WARNING: no_suid: setuid(0): (1) Operation not permitted
	2021/09/15 08:00:18 kid1| WARNING: no_suid: setuid(0): (1) Operation not permitted
	
	When squid try to load external acls binaries 
	
	add chmod 04755 in binaries  did not resolve the issue.
	
	No issue with same configuration with squid 3.5x branch
	
	Any tips ?
	



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024045.html">[squid-users] squid 5.1/Debian WARNING: no_suid: setuid(0): (1) Operation not permitted
</A></li>
	<LI>Next message (by thread): <A HREF="024047.html">[squid-users] squid 5.1/Debian WARNING: no_suid: setuid(0): (1) Operation not permitted
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24046">[ date ]</a>
              <a href="thread.html#24046">[ thread ]</a>
              <a href="subject.html#24046">[ subject ]</a>
              <a href="author.html#24046">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
