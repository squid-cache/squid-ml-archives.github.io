<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Compile/Rebuilding on debian bullseye (or buster)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Compile/Rebuilding%20on%20debian%20bullseye%20%28or%20buster%29&In-Reply-To=%3Cvmime.61435d58.7fd6.4efd7d68643436d8%40ms249-lin-003.rotterdam.bazuin.nl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024051.html">
   <LINK REL="Next"  HREF="024036.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Compile/Rebuilding on debian bullseye (or buster)</H1>
    <B>L.P.H. van Belle</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Compile/Rebuilding%20on%20debian%20bullseye%20%28or%20buster%29&In-Reply-To=%3Cvmime.61435d58.7fd6.4efd7d68643436d8%40ms249-lin-003.rotterdam.bazuin.nl%3E"
       TITLE="[squid-users] Compile/Rebuilding on debian bullseye (or buster)">belle at bazuin.nl
       </A><BR>
    <I>Thu Sep 16 15:06:00 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024051.html">[squid-users] Compile/Rebuilding on debian bullseye (or buster)
</A></li>
        <LI>Next message (by thread): <A HREF="024036.html">[squid-users] logformat odd values
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24057">[ date ]</a>
              <a href="thread.html#24057">[ thread ]</a>
              <a href="subject.html#24057">[ subject ]</a>
              <a href="author.html#24057">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Good Afernoon Amos, (and others offcourse), 

A small update on this. 
Short version, i can make bullseye package ready for production but not for buster (yet).

Long version.. 

If i pull in the debian salsa git, the build fails on bullseye. 
( thats more me, because i lack knowledge on git use ). 
So i took the &quot;debian&quot; folder from git and add it to the 
extracted 5.1 source from 4 aug. (squid-5.1-20210804-r1f9e52827) 
Then i can build the packages for debian bullseye. 

Lintian shows some messages but no show stoppers. 

Currently the salsa debian/changelog contains, 5.1-2 but since its not release yet, 
I'll change this to 0.1 in my package builds, but i think, when you update it into debian
You should have 5.1-1 (for unstable).

Now i try to build again buster.. And these keep failing on this part. ( see below ). 
What i dont get is, why are there below in the output &quot;suddenly&quot; files misses, thats one i dont get. 
I think is build standards or debhelper where this is coming from, i dont know (yet).. 

The only changes i made where these. :
  * Build from upstream release : squid-5.1-20210804-r1f9e52827
  * d/watch, changed http to https
  * d/control, changed build depend : debhelper 12.8 to 13
  * d/patches, added fix-typos.patch #(typos found by lintian)
  * changed versioning in d/changelog 5.1-2 back to 5.1-1

Note, debhelper the bullseye build worked, only we need 13 and up, 
i did lower it to 12 to allow building for buster. 

# fix-typos.patch included in this mail.

I'll revert the debhelper compat back to 13 and will do 
a new buster build attempt with debhelper 13 from buster-backports

(error part on buster, maybe someone can use it) 
make[1]: Entering directory '/&lt;&lt;PKGBUILDDIR&gt;&gt;'
dh_install -psquid -psquid-common -psquidclient -psquid-cgi -psquid-purge \
        --sourcedir=/&lt;&lt;PKGBUILDDIR&gt;&gt;/debian/tmp
dh_install: Cannot find (any matches for) &quot;etc/squid/conf.d&quot; (tried in /&lt;&lt;PKGBUILDDIR&gt;&gt;/debian/tmp, debian/tmp)

dh_install: squid missing files: etc/squid/conf.d
dh_install: Cannot find (any matches for) &quot;etc/logrotate.d&quot; (tried in /&lt;&lt;PKGBUILDDIR&gt;&gt;/debian/tmp, debian/tmp)

dh_install: squid missing files: etc/logrotate.d
dh_install: Cannot find (any matches for) &quot;etc/resolvconf&quot; (tried in /&lt;&lt;PKGBUILDDIR&gt;&gt;/debian/tmp, debian/tmp)

dh_install: squid missing files: etc/resolvconf
dh_install: Cannot find (any matches for) &quot;etc/ufw&quot; (tried in /&lt;&lt;PKGBUILDDIR&gt;&gt;/debian/tmp, debian/tmp)

dh_install: squid missing files: etc/ufw
dh_install: Cannot find (any matches for) &quot;etc/apparmor.d/disable&quot; (tried in /&lt;&lt;PKGBUILDDIR&gt;&gt;/debian/tmp, debian/tmp)

dh_install: squid missing files: etc/apparmor.d/disable
dh_install: Cannot find (any matches for) &quot;etc/apparmor.d/force-complain&quot; (tried in /&lt;&lt;PKGBUILDDIR&gt;&gt;/debian/tmp, debian/tmp)

dh_install: squid missing files: etc/apparmor.d/force-complain
dh_install: Cannot find (any matches for) &quot;etc/apparmor.d/usr.sbin.squid&quot; (tried in /&lt;&lt;PKGBUILDDIR&gt;&gt;/debian/tmp, debian/tmp)

dh_install: squid missing files: etc/apparmor.d/usr.sbin.squid
dh_install: Cannot find (any matches for) &quot;usr/lib/cgi-bin/cachemgr.cgi&quot; (tried in /&lt;&lt;PKGBUILDDIR&gt;&gt;/debian/tmp, debian/tmp)

dh_install: squid-cgi missing files: usr/lib/cgi-bin/cachemgr.cgi
dh_install: Cannot find (any matches for) &quot;usr/bin/squid-purge&quot; (tried in /&lt;&lt;PKGBUILDDIR&gt;&gt;/debian/tmp, debian/tmp)

dh_install: squid-purge missing files: usr/bin/squid-purge
dh_install: Cannot find (any matches for) &quot;usr/share/man/man1/squid-purge.1&quot; (tried in /&lt;&lt;PKGBUILDDIR&gt;&gt;/debian/tmp, debian/tmp)

dh_install: squid-purge missing files: usr/share/man/man1/squid-purge.1
dh_install: missing files, aborting
make[1]: *** [debian/rules:154: override_dh_install] Error 25
make[1]: Leaving directory '/&lt;&lt;PKGBUILDDIR&gt;&gt;'
make: *** [debian/rules:70: binary] Error 2
dpkg-buildpackage: error: fakeroot debian/rules binary subprocess returned exit status 2



So far,

Greetz, 

Louis

&gt;<i> -----Oorspronkelijk bericht-----
</I>&gt;<i> Van: squid-users 
</I>&gt;<i> [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] Namens 
</I>&gt;<i> L.P.H. van Belle
</I>&gt;<i> Verzonden: donderdag 16 september 2021 8:51
</I>&gt;<i> Aan: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> Onderwerp: Re: [squid-users] Compile/Rebuilding on debian 
</I>&gt;<i> bullseye (or buster)
</I>&gt;<i> 
</I>&gt;<i> Good Morning. 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I have spent a while working on it today and have pushed an 
</I>&gt;<i> update to 
</I>&gt;<i> &gt; Debian packaging repo. Please pull a new copy of that latest. 
</I>&gt;<i> &gt; It should  fix all the issues you have.
</I>&gt;<i> 
</I>&gt;<i> Wow, Thank you very very much Amos.. 
</I>&gt;<i> Im on it now :-) ?&#190;
</I>&gt;<i> 
</I>&gt;<i> I'll post the results later today.
</I>&gt;<i> 
</I>&gt;<i> Greetz, 
</I>&gt;<i> Louis
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> 
</I>-------------- next part --------------
A non-text attachment was scrubbed...
Name: fix-typos.patch
Type: application/octet-stream
Size: 5811 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20210916/b5a0d339/attachment.obj">http://lists.squid-cache.org/pipermail/squid-users/attachments/20210916/b5a0d339/attachment.obj</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024051.html">[squid-users] Compile/Rebuilding on debian bullseye (or buster)
</A></li>
	<LI>Next message (by thread): <A HREF="024036.html">[squid-users] logformat odd values
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24057">[ date ]</a>
              <a href="thread.html#24057">[ thread ]</a>
              <a href="subject.html#24057">[ subject ]</a>
              <a href="author.html#24057">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
