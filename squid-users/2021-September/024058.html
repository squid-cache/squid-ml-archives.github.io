<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] SOLVED - compiling squid 5.1
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SOLVED%20-%20compiling%20squid%205.1&In-Reply-To=%3CCAFNHiA8GqZDGz6WwECXRfjQrHSKxxKPnO8Om-c9dfMyp-2CWkg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024054.html">
   <LINK REL="Next"  HREF="024059.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] SOLVED - compiling squid 5.1</H1>
    <B>Meike Stone</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SOLVED%20-%20compiling%20squid%205.1&In-Reply-To=%3CCAFNHiA8GqZDGz6WwECXRfjQrHSKxxKPnO8Om-c9dfMyp-2CWkg%40mail.gmail.com%3E"
       TITLE="[squid-users] SOLVED - compiling squid 5.1">meike.stone at googlemail.com
       </A><BR>
    <I>Thu Sep 16 15:57:50 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024054.html">[squid-users] SOLVED - compiling squid 5.1
</A></li>
        <LI>Next message (by thread): <A HREF="024059.html">[squid-users] SOLVED - compiling squid 5.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24058">[ date ]</a>
              <a href="thread.html#24058">[ thread ]</a>
              <a href="subject.html#24058">[ subject ]</a>
              <a href="author.html#24058">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Am Do., 16. Sept. 2021 um 16:15 Uhr schrieb Amos Jeffries
&lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;:
&gt;<i>
</I>&gt;<i> On 17/09/21 1:38 am, Meike Stone wrote:
</I>&gt;<i> &gt; Hello Amos,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; thanks for answering!
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Am Mi., 8. Sept. 2021 um 11:26 Uhr schrieb Amos Jeffries:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; This hack only works if you are building manually from source code, in
</I>&gt;<i> &gt;&gt; the same directory you expanded the sources. Which is not he case for
</I>&gt;<i> &gt;&gt; anyone building with automated tools or CI systems.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; that's the problem I'm facing right now :-O
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; The earlier provided ./configure parameter change works just as well
</I>&gt;<i> &gt;&gt; without manual changes to the source code.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Can you please guide me with this configure parameter?
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> The problem is use of --disable-dependency-tracking
</I>
I use this option already.
I started from a clean untared directory from squid 5.1.
Here my configure options:
./configure --host=x86_64-suse-linux-gnu --build=x86_64-suse-linux-gnu \
         --program-prefix= \
         --disable-dependency-tracking \
         --prefix=/usr \
         --exec-prefix=/usr \
         --bindir=/usr/bin \
         --sbindir=/usr/sbin \
         --sysconfdir=/etc \
         --datadir=/usr/share \
         --includedir=/usr/include \
         --libdir=/usr/lib64 \
         --libexecdir=/usr/lib \
         --localstatedir=/var \
         --sharedstatedir=/var/lib \
         --mandir=/usr/share/man \
         --infodir=/usr/share/info \
         --disable-strict-error-checking \
         --sysconfdir=/etc/squid \
         --libexecdir=/usr/sbin \
         --datadir=/usr/share/squid \
         --sharedstatedir=/var/squid \
         --with-logdir=/var/log/squid \
         --with-pidfile=/run/squid.pid \
         --with-dl \
         --enable-disk-io \
         --enable-storeio \
         --enable-removal-policies=heap,lru \
         --enable-icmp \
         --enable-delay-pools \
         --enable-esi \
         --enable-icap-client \
         --enable-useragent-log \
         --enable-referer-log \
         --enable-kill-parent-hack \
         --enable-arp-acl \
         --enable-ssl-crtd \
         --with-openssl \
         --enable-forw-via-db \
         --enable-cache-digests \
         --enable-linux-netfilter \
         --with-large-files \
         --enable-underscores \
         --enable-auth \
         --enable-auth-basic=&quot;SMB_LM,DB,fake,getpwnam,LDAP,NCSA,NIS,PAM,POP3,RADIUS,SASL,SMB&quot;
\
         --enable-auth-ntlm=&quot;SMB_LM,fake&quot; \
         --enable-auth-negotiate \
         --enable-auth-digest \
         --enable-external-acl-helpers=LDAP_group,eDirectory_userip,file_userip,kerberos_ldap_group,session,unix_group,wbinfo_group
\
         --enable-stacktraces \
         --enable-x-accelerator-vary \
         --with-default-user=squid \
         --disable-ident-lookups \
         --enable-follow-x-forwarded-for \
         --disable-arch-native \
         --enable-security-cert-generators \
         --enable-security-cert-validators
with
make -d -O SAMBAPREFIX=/usr -j1
I get:
cp ../../src/SquidConfig.cc SquidConfig.cc
Putting child 0x55d56bed8400 (SquidConfig.cc) PID 28219 on the chain.
Live child 0x55d56bed8400 (SquidConfig.cc) PID 28219
Reaping winning child 0x55d56bed8400 PID 28219
Removing child 0x55d56bed8400 PID 28219 from chain.
         Successfully remade target file 'SquidConfig.cc'.
        Finished prerequisites of target file 'SquidConfig.o'.
       Must remake target 'SquidConfig.o'.
g++ -DHAVE_CONFIG_H -DDEFAULT_CONFIG_FILE=\&quot;/etc/squid/squid.conf\&quot;
-DDEFAULT_SQUID_DATA_DIR=\&quot;/usr/share/squid\&quot;
-DDEFAULT_SQUID_CONFIG_DIR=\&quot;/etc/squid\&quot;   -I../.. -I../../include
-I../../lib -I../../src -I../../include    -I/usr/include/libxml2 -Wall
-Wpointer-arith -Wwrite-strings -Wcomments -Wshadow -Woverloaded-virtual
-pipe -D_REENTRANT -I/usr/include/libxml2 -m64 -DOPENSSL_LOAD_CONF -g
-O2 -c -o SquidConfig.o SquidConfig.cc
Putting child 0x55d56bed8400 (SquidConfig.o) PID 28220 on the chain.
Live child 0x55d56bed8400 (SquidConfig.o) PID 28220
Reaping winning child 0x55d56bed8400 PID 28220
Removing child 0x55d56bed8400 PID 28220 from chain.
       Successfully remade target file 'SquidConfig.o'.
       Considering target file 'tests/stub_fd.o'.
        File 'tests/stub_fd.o' does not exist.
        Looking for an implicit rule for 'tests/stub_fd.o'.
        Trying pattern rule with stem 'stub_fd'.
        Trying implicit prerequisite 'tests/stub_fd.cc'.
        Found an implicit rule for 'tests/stub_fd.o'.
         Considering target file 'tests/stub_fd.cc'.
          File 'tests/stub_fd.cc' does not exist.
           Considering target file '../../src/tests/stub_fd.cc'.
            Looking for an implicit rule for '../../src/tests/stub_fd.cc'.
            Trying pattern rule with stem 'stub_fd.cc'.
            Trying implicit prerequisite '../../src/tests/stub_fd.cc,v'.
            Trying pattern rule with stem 'stub_fd.cc'.
            Trying implicit prerequisite '../../src/tests/RCS/stub_fd.cc,v'.
            Trying pattern rule with stem 'stub_fd.cc'.
            Trying implicit prerequisite '../../src/tests/RCS/stub_fd.cc'.
            Trying pattern rule with stem 'stub_fd.cc'.
            Trying implicit prerequisite '../../src/tests/s.stub_fd.cc'.
            Trying pattern rule with stem 'stub_fd.cc'.
            Trying implicit prerequisite
'../../src/tests/SCCS/s.stub_fd.cc'.
            No implicit rule found for '../../src/tests/stub_fd.cc'.
            Finished prerequisites of target file
'../../src/tests/stub_fd.cc'.
           No need to remake target '../../src/tests/stub_fd.cc'.
          Finished prerequisites of target file 'tests/stub_fd.cc'.
         Must remake target 'tests/stub_fd.cc'.
cp ../../src/tests/stub_fd.cc tests/stub_fd.cc
Putting child 0x55d56bedaf20 (tests/stub_fd.cc) PID 28223 on the chain.
Live child 0x55d56bedaf20 (tests/stub_fd.cc) PID 28223
cp: cannot create regular file 'tests/stub_fd.cc': No such file or directory
Reaping losing child 0x55d56bedaf20 PID 28223
make[3]: *** [Makefile:1446: tests/stub_fd.cc] Error 1
Removing child 0x55d56bedaf20 PID 28223 from chain.
make[3]: Leaving directory '/root/squid-5.1/src/icmp'
Reaping losing child 0x562fd125dd40 PID 3751
make[2]: *** [Makefile:6866: all-recursive] Error 1
Removing child 0x562fd125dd40 PID 3751 from chain.
make[2]: Leaving directory '/root/squid-5.1/src'
Reaping losing child 0x5615187d9070 PID 3750
make[1]: *** [Makefile:5855: all] Error 2
Removing child 0x5615187d9070 PID 3750 from chain.
make[1]: Leaving directory '/root/squid-5.1/src'
Reaping losing child 0x5644cbb08770 PID 31009
make: *** [Makefile:593: all-recursive] Error 1
Removing child 0x5644cbb08770 PID 31009 from chain.

Do you see what's wrong?
The goal is, to pack squid in an rpm on SuSEs buildservice, so that
there is a binary package available from squid 5.1 for everyone!

Thanks Meike

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024054.html">[squid-users] SOLVED - compiling squid 5.1
</A></li>
	<LI>Next message (by thread): <A HREF="024059.html">[squid-users] SOLVED - compiling squid 5.1
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24058">[ date ]</a>
              <a href="thread.html#24058">[ thread ]</a>
              <a href="subject.html#24058">[ subject ]</a>
              <a href="author.html#24058">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
