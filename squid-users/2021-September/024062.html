<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid 5.1: external_acl_type: Get public remote address
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%205.1%3A%20external_acl_type%3A%20Get%20public%20remote%0A%20address&In-Reply-To=%3Ca384aa07-11ac-0801-9a5a-4d6addc8a886%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024061.html">
   <LINK REL="Next"  HREF="024063.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid 5.1: external_acl_type: Get public remote address</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%205.1%3A%20external_acl_type%3A%20Get%20public%20remote%0A%20address&In-Reply-To=%3Ca384aa07-11ac-0801-9a5a-4d6addc8a886%40measurement-factory.com%3E"
       TITLE="[squid-users] squid 5.1: external_acl_type: Get public remote address">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Sep 16 17:43:05 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024061.html">[squid-users] squid 5.1: external_acl_type: Get public remote address
</A></li>
        <LI>Next message (by thread): <A HREF="024063.html">[squid-users] squid 5.1: external_acl_type: Get public remote address
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24062">[ date ]</a>
              <a href="thread.html#24062">[ thread ]</a>
              <a href="subject.html#24062">[ subject ]</a>
              <a href="author.html#24062">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 9/16/21 1:30 PM, David Touzeau wrote:

&gt;<i> I'm turning to create a DNS resolution dev and I'm giving up looking
</I>&gt;<i> retreive this information through Squid.
</I>
Please note that if you do your own DNS resolution, then Squid DNS
resolution results will probably mismatch your results in some cases.
There have been many complaints about associated problems from folks
that went this route...

I am not sure what you are trying to do with that a %&lt;a-based external
ACL in Squid, so it is difficult to narrow down the solution search
scope, but Squid does support slow ACLs in certain directives used when
talking to origin servers or peers (after built-in DNS resolution and
destination selection) so perhaps there is a way to do what you want
without Squid modifications.

If there is not, it would not be difficult to add a post-resolution
directive that supports slow ACLs IMO, but, again, that requires more
knowledge of the use case -- there are several places where such a
directive can be added.


Cheers,

Alex.



&gt;<i> Le 16/09/2021 &#224; 19:13, Amos Jeffries a &#233;crit&#160;:
</I>&gt;&gt;<i> On 17/09/21 2:42 am, David Touzeau wrote:
</I>&gt;&gt;&gt;<i> Thanks Amos for quick answer.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Can you take away any hope of a workaround with Squid ?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> This makes me plan having to develop a function that has to perform
</I>&gt;&gt;&gt;<i> DNS resolution inside the helper with the performance consequences
</I>&gt;&gt;&gt;<i> that this will impose.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I would be looking at a design where a helper classifies requests and
</I>&gt;&gt;<i> using that later on when the server is known to match up the IP vs the
</I>&gt;&gt;<i> classification. I'm struggling to think of a flow that works
</I>&gt;&gt;<i> efficiently though.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Amos
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> squid-users mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024061.html">[squid-users] squid 5.1: external_acl_type: Get public remote address
</A></li>
	<LI>Next message (by thread): <A HREF="024063.html">[squid-users] squid 5.1: external_acl_type: Get public remote address
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24062">[ date ]</a>
              <a href="thread.html#24062">[ thread ]</a>
              <a href="subject.html#24062">[ subject ]</a>
              <a href="author.html#24062">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
