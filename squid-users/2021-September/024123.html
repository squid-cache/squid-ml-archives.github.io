<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Running SMP workers on multi-core systems
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Running%20SMP%20workers%20on%20multi-core%20systems&In-Reply-To=%3CCACabJxMpcV%2BixKRm9Z7EGfE9NEWN50N2g16_5vkje8oj7A6tGw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024122.html">
   <LINK REL="Next"  HREF="024125.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Running SMP workers on multi-core systems</H1>
    <B>Praveen Ponakanti</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Running%20SMP%20workers%20on%20multi-core%20systems&In-Reply-To=%3CCACabJxMpcV%2BixKRm9Z7EGfE9NEWN50N2g16_5vkje8oj7A6tGw%40mail.gmail.com%3E"
       TITLE="[squid-users] Running SMP workers on multi-core systems">pponakanti at roblox.com
       </A><BR>
    <I>Thu Sep 30 06:49:55 UTC 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024122.html">[squid-users] windows authentification
</A></li>
        <LI>Next message (by thread): <A HREF="024125.html">[squid-users] Running SMP workers on multi-core systems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24123">[ date ]</a>
              <a href="thread.html#24123">[ thread ]</a>
              <a href="subject.html#24123">[ subject ]</a>
              <a href="author.html#24123">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I am trying to use the squid cache as an outbound HTTP/S proxy service for
our production network and would like to scale up the request per sec by
running it on multi-core systems.

I have searched up the archives and config docs, but couldn't find anything
more recent than the below on setting up SMP workers.
<A HREF="https://wiki.squid-cache.org/ConfigExamples/SmpCarpCluster">https://wiki.squid-cache.org/ConfigExamples/SmpCarpCluster</A>
<A HREF="https://wiki.squid-cache.org/ConfigExamples/MultiCpuSystem">https://wiki.squid-cache.org/ConfigExamples/MultiCpuSystem</A>

* Can someone please let me know if the config examples in those docs still
apply to the latest version 5.1.

* Do we still need the combination of squid, frontend, backend.conf files,
or is it enabled simply with the &quot;workers&quot; line in the main config file?

* When I attempt to run the squid server with &quot;workers 4&quot; in the
squid.conf, I get the following error (one for each kid) and the main
process does not bind to the &quot;http_port 3128&quot;. I see several UDP ports
opened up for each kid process.

2021/09/29 00:44:10 kid5| commBind Cannot bind socket FD 11 to [::]:
(2) No such file or directory

* Does anyone have recommendations on the maximum number of workers to use
on a 64 core host (assuming no other CPU intensive apps are running on the
same host). Caching is not a must for our initial deployment, so we are
fine disabling caching.

Thanks
Praveen
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20210929/3899dcce/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20210929/3899dcce/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024122.html">[squid-users] windows authentification
</A></li>
	<LI>Next message (by thread): <A HREF="024125.html">[squid-users] Running SMP workers on multi-core systems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24123">[ date ]</a>
              <a href="thread.html#24123">[ thread ]</a>
              <a href="subject.html#24123">[ subject ]</a>
              <a href="author.html#24123">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
