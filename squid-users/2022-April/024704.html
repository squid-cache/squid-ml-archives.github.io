<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 3-5 CPU optimization and best practise .
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203-5%20CPU%20optimization%20and%20best%20practise%20.&In-Reply-To=%3C0455291c-e65a-ee8b-7cc8-261d350c6ee1%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="024708.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 3-5 CPU optimization and best practise .</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%203-5%20CPU%20optimization%20and%20best%20practise%20.&In-Reply-To=%3C0455291c-e65a-ee8b-7cc8-261d350c6ee1%40treenet.co.nz%3E"
       TITLE="[squid-users] Squid 3-5 CPU optimization and best practise .">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Apr  1 08:46:44 UTC 2022</I>
    <P><UL>
        
        <LI>Next message (by thread): <A HREF="024708.html">[squid-users] Squid 3-5 CPU optimization and best practise .
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24704">[ date ]</a>
              <a href="thread.html#24704">[ thread ]</a>
              <a href="subject.html#24704">[ subject ]</a>
              <a href="author.html#24704">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>FYI; CPU in Squid is primarily consumed by two things:


1) parsing and processing HTTP message headers.

The only thing you can do about this is detect and reject unwanted 
traffic as early as possible.

Your OS firewall is obviously the early line of defense. Preventing 
unwanted network ranges from reaching Squid listening ports saves Squid 
from spending CPU cycles looking up details about those unwanted clients.

Then for clients who are potentially valid the default http_access rules 
reject dangerous traffic quickly and efficiently. Make sure any custom 
http_access rules are listed *after* those ones. Then see (2).



2) processing access controls (ACL checks).

To optimize this needs attention to what order ACLs are tested in versus 
how complex they are to process.

How many CPU cycles are consumed managing any resources they or other 
processes they trigger is also important.

If you want a free optimization review please post your full squid.conf 
(just without the documentation comments and empty lines). Then we can 
point out any performance tricks you may not yet be using.




Beyond those two you are getting into &quot;advanced admin&quot; levels of 
performance optimization. Where YMMV, Alex has mentioned. Every network 
is different so none of us can say a specific thing to do that will be 
better for you.

HTH
Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message (by thread): <A HREF="024708.html">[squid-users] Squid 3-5 CPU optimization and best practise .
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24704">[ date ]</a>
              <a href="thread.html#24704">[ thread ]</a>
              <a href="subject.html#24704">[ subject ]</a>
              <a href="author.html#24704">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
