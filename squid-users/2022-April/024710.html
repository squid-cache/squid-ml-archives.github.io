<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Fine tuning of Squid and OS configuration for handling more loads
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Fine%20tuning%20of%20Squid%20and%20OS%20configuration%20for%0A%20handling%20more%20loads&In-Reply-To=%3Cdd3c0c0a-1190-7210-f177-79be2b3294af%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024707.html">
   <LINK REL="Next"  HREF="024711.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Fine tuning of Squid and OS configuration for handling more loads</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Fine%20tuning%20of%20Squid%20and%20OS%20configuration%20for%0A%20handling%20more%20loads&In-Reply-To=%3Cdd3c0c0a-1190-7210-f177-79be2b3294af%40measurement-factory.com%3E"
       TITLE="[squid-users] Fine tuning of Squid and OS configuration for handling more loads">rousskov at measurement-factory.com
       </A><BR>
    <I>Fri Apr  8 13:39:45 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024707.html">[squid-users] Fine tuning of Squid and OS configuration for handling more loads
</A></li>
        <LI>Next message (by thread): <A HREF="024711.html">[squid-users] Fine tuning of Squid and OS configuration for handling more loads
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24710">[ date ]</a>
              <a href="thread.html#24710">[ thread ]</a>
              <a href="subject.html#24710">[ subject ]</a>
              <a href="author.html#24710">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 4/8/22 05:56, pvs wrote:

 &gt; sudo /usr/squid/5.2/sbin/squid -f /etc/squid/squid.conf

Next time, try starting Squid from the console/terminal using the 
following command:

     sudo /usr/squid/5.2/sbin/squid -Nd1 -f /etc/squid/squid.conf

This is _not_ the right way to start Squid in production, but it is a 
good way to test whether you can get some error messages on the console 
after Squid dies during this _test_ run.


 &gt; I wanted to share cache.log file, but the size is too big.

You can always share a link to a (compressed) log file or at least 
copy-paste the last ~100 lines written just _before Squid exited_. The 
exiting lines, if any, would be printed above the Squid startup lines 
similar to these:

 &gt; 2022/04/07 18:43:38.457| Created PID file (.../squid.pid)
 &gt; 2022/04/07 18:43:38.459| Set Current Directory to /usr/local/squid/var
 &gt; 2022/04/07 18:43:38.459| Starting Squid Cache version ...

The other information you have provided was useful but not sufficient.


Please keep this conversation on the squid-users list instead of 
responding to me personally.


Thank you,

Alex.


 &gt; On 07-04-2022 19:09, Alex Rousskov wrote:
 &gt;&gt; On 4/7/22 00:15, pvs wrote:
 &gt;&gt;
 &gt;&gt;&gt; On the 3rd day morning all of a sudden squid process stopped, after
 &gt;&gt;&gt; restarting it worked 10 minutes and again stopped, this process
 &gt;&gt;&gt; repeated and finally we removed this squid from production network.
 &gt;&gt;
 &gt;&gt;&gt; We tried to analyze the syslog file, squid access/cache log files,
 &gt;&gt;&gt; not got any concrete clues.
 &gt;&gt;&gt;
 &gt;&gt;&gt; Any clues/ideas where i can look for additional info for the squid
 &gt;&gt;&gt; process all of a sudden dying.
 &gt;&gt;
 &gt;&gt; How do you start Squid?
 &gt;&gt;
 &gt;&gt; How many &quot;sbin/squid&quot; or equivalent processes are running when
 &gt;&gt; everything is working OK?
 &gt;&gt;
 &gt;&gt; You may want to share &quot;ps aux | fgrep squid&quot; or similar output after
 &gt;&gt; starting Squid the usual way.
 &gt;&gt;
 &gt;&gt;
 &gt;&gt; If Squid knows that it is dying, then cache.log usually has a record
 &gt;&gt; of the cause of death. Squid will often known that it is dying, but
 &gt;&gt; there are exceptions. Squid will know less if you start it with a -C
 &gt;&gt; command line option.
 &gt;&gt;
 &gt;&gt; If Squid does not know that it is dying, then whatever scripts/system
 &gt;&gt; you used to start Squid may have a record of it. Usually, those
 &gt;&gt; messages go into syslog.
 &gt;&gt;
 &gt;&gt; I know you said you looked in cache.log and syslog, but perhaps there
 &gt;&gt; are some clues there that you consider unimportant. If anything is
 &gt;&gt; logged at the time of death, consider sharing those records.
 &gt;&gt;
 &gt;&gt;
 &gt;&gt; If there are really no traces anywhere, then you are doing something
 &gt;&gt; very unusual, but you should still be able to triage the issue if you
 &gt;&gt; start Squid by hand from the terminal (add &quot;-d1&quot; if you are not using
 &gt;&gt; that option already) and watch the console output at the time of
 &gt;&gt; death. You will also be able to collect the exit code of the top-level
 &gt;&gt; squid process this way -- another potential clue.
 &gt;&gt;
 &gt;&gt;
 &gt;&gt; HTH,
 &gt;&gt;
 &gt;&gt; Alex.
 &gt;
 &gt; --
 &gt; Regards,
 &gt;
 &gt; &#2346;&#2306;. &#2357;&#2367;&#2359;&#2381;&#2339;&#2369; &#2358;&#2306;&#2325;&#2352;		P. Vishnu Sankar
 &gt; &#2335;&#2368;&#2350; &#2354;&#2368;&#2337;&#2352;                Team Leader-Network Operations
 &gt; &#2360;&#2368;-&#2337;&#2377;&#2335;                  C-DOT
 &gt; &#2311;&#2354;&#2376;&#2325;&#2381;&#2335;&#2381;&#2352;&#2377;&#2344;&#2367;&#2325;&#2381;&#2360; &#2360;&#2367;&#2335;&#2368; &#2347;&#2375;&#2332;&#2364; I    Electronics City Phase I
 &gt; &#2361;&#2379;&#2360;&#2370;&#2352; &#2352;&#2379;&#2337; &#2348;&#2375;&#2306;&#2327;&#2354;&#2370;&#2352;&#2369;          Hosur Road Bengaluru &#8211; 560100
 &gt; &#2347;&#2379;&#2344;  Ph                91 80 25119466
 &gt; ------------------------------------------------------

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024707.html">[squid-users] Fine tuning of Squid and OS configuration for handling more loads
</A></li>
	<LI>Next message (by thread): <A HREF="024711.html">[squid-users] Fine tuning of Squid and OS configuration for handling more loads
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24710">[ date ]</a>
              <a href="thread.html#24710">[ thread ]</a>
              <a href="subject.html#24710">[ subject ]</a>
              <a href="author.html#24710">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
