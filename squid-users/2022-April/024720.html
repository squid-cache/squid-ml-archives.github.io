<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid compilation error in Docker
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20compilation%20error%20in%20Docker&In-Reply-To=%3CCAHvB88yg3LhvAs6KdZV%3DQDeHbZoKFre3V1EpTCe7OSmUEs-oBw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024719.html">
   <LINK REL="Next"  HREF="024721.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid compilation error in Docker</H1>
    <B>Ivan Larionov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20compilation%20error%20in%20Docker&In-Reply-To=%3CCAHvB88yg3LhvAs6KdZV%3DQDeHbZoKFre3V1EpTCe7OSmUEs-oBw%40mail.gmail.com%3E"
       TITLE="[squid-users] squid compilation error in Docker">xeron.oskom at gmail.com
       </A><BR>
    <I>Thu Apr 14 00:07:11 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024719.html">[squid-users] squid compilation error in Docker
</A></li>
        <LI>Next message (by thread): <A HREF="024721.html">[squid-users] squid compilation error in Docker
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24720">[ date ]</a>
              <a href="thread.html#24720">[ thread ]</a>
              <a href="subject.html#24720">[ subject ]</a>
              <a href="author.html#24720">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Yes this worked. Thanks Eliezer.

This means some of these dependencies are required but not caught by the
configure script.

I'll try to figure out which specific one was the culprit.

On Wed, Apr 13, 2022 at 4:36 PM Eliezer Croitoru &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>&gt;
wrote:

&gt;<i> For CentOS 7 use the next:
</I>&gt;<i>
</I>&gt;<i> RUN yum install -y epel-release \
</I>&gt;<i>
</I>&gt;<i>    &amp;&amp;  yum clean all \
</I>&gt;<i>
</I>&gt;<i>    &amp;&amp;  yum update -y \
</I>&gt;<i>
</I>&gt;<i>    &amp;&amp;  yum install -y gcc gcc-c++ libtool libtool-ltdl make cmake \
</I>&gt;<i>
</I>&gt;<i>                git pkgconfig sudo automake autoconf yum-utils rpm-build \
</I>&gt;<i>
</I>&gt;<i>    &amp;&amp;  yum install -y libxml2 expat-devel openssl-devel libcap ccache \
</I>&gt;<i>
</I>&gt;<i>                libtool-ltdl-devel cppunit cppunit-devel bzr git autoconf \
</I>&gt;<i>
</I>&gt;<i>                automake libtool gcc-c++ perl-Pod-MinimumVersion bzip2 ed \
</I>&gt;<i>
</I>&gt;<i>                 make openldap-devel pam-devel db4-devel libxml2-devel \
</I>&gt;<i>
</I>&gt;<i>                libcap-devel screen vim nettle-devel redhat-lsb-core \
</I>&gt;<i>
</I>&gt;<i>                autoconf-archive libtdb-devel libtdb redhat-rpm-config
</I>&gt;<i> rpm-build rpm-devel \
</I>&gt;<i>
</I>&gt;<i>    &amp;&amp;  yum install -y perl-libwww-perl ruby ruby-devel \
</I>&gt;<i>
</I>&gt;<i>    &amp;&amp;  yum clean all
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> RUN yum update -y \
</I>&gt;<i>
</I>&gt;<i>    &amp;&amp;  yum install -y systemd-units openldap-devel pam-devel \
</I>&gt;<i>
</I>&gt;<i>                openssl-devel krb5-devel db4-devel expat-devel \
</I>&gt;<i>
</I>&gt;<i>                libxml2-devel libcap-devel libtool libtool-ltdl-devel \
</I>&gt;<i>
</I>&gt;<i>                redhat-rpm-config libdb-devel libnetfilter_conntrack-devel \
</I>&gt;<i>
</I>&gt;<i>                gnutls-devel rpmdevtools wget \
</I>&gt;<i>
</I>&gt;<i>    &amp;&amp;  yum clean all
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> For CentOS 8 Stream:
</I>&gt;<i>
</I>&gt;<i> RUN dnf install -y epel-release dnf-plugins-core \
</I>&gt;<i>
</I>&gt;<i>    &amp;&amp;  dnf config-manager --set-enabled powertools \
</I>&gt;<i>
</I>&gt;<i>    &amp;&amp;  dnf clean all \
</I>&gt;<i>
</I>&gt;<i>    &amp;&amp;  dnf update -y \
</I>&gt;<i>
</I>&gt;<i>    &amp;&amp;  dnf install -y gcc gcc-c++ libtool libtool-ltdl make cmake \
</I>&gt;<i>
</I>&gt;<i>                git pkgconfig sudo automake autoconf yum-utils rpm-build \
</I>&gt;<i>
</I>&gt;<i>    &amp;&amp;  dnf install -y libxml2 expat-devel openssl-devel libcap ccache \
</I>&gt;<i>
</I>&gt;<i>                libtool-ltdl-devel git autoconf \
</I>&gt;<i>
</I>&gt;<i>                automake libtool gcc-c++ bzip2 ed \
</I>&gt;<i>
</I>&gt;<i>                make openldap-devel pam-devel libxml2-devel \
</I>&gt;<i>
</I>&gt;<i>                libcap-devel screen vim nettle-devel redhat-lsb-core \
</I>&gt;<i>
</I>&gt;<i>                libtdb-devel libtdb redhat-rpm-config rpm-build rpm-devel \
</I>&gt;<i>
</I>&gt;<i>                libnetfilter_conntrack-devel \
</I>&gt;<i>
</I>&gt;<i>    &amp;&amp;  dnf install -y perl-libwww-perl ruby ruby-devel \
</I>&gt;<i>
</I>&gt;<i>    &amp;&amp;  dnf clean all
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> RUN dnf update -y \
</I>&gt;<i>
</I>&gt;<i>    &amp;&amp;  dnf install -y systemd-units openldap-devel pam-devel \
</I>&gt;<i>
</I>&gt;<i>                openssl-devel krb5-devel expat-devel \
</I>&gt;<i>
</I>&gt;<i>                libxml2-devel libcap-devel libtool libtool-ltdl-devel \
</I>&gt;<i>
</I>&gt;<i>                redhat-rpm-config libdb-devel \
</I>&gt;<i>
</I>&gt;<i>                gnutls-devel rpmdevtools wget \
</I>&gt;<i>
</I>&gt;<i>    &amp;&amp;  dnf clean all
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ----
</I>&gt;<i>
</I>&gt;<i> Eliezer Croitoru
</I>&gt;<i>
</I>&gt;<i> NgTech, Tech Support
</I>&gt;<i>
</I>&gt;<i> Mobile: +972-5-28704261
</I>&gt;<i>
</I>&gt;<i> Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> *From:* squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; *On
</I>&gt;<i> Behalf Of *Ivan Larionov
</I>&gt;<i> *Sent:* Thursday, April 14, 2022 01:34
</I>&gt;<i> *To:* <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> *Subject:* [squid-users] squid compilation error in Docker
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hi.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I have no issues building squid normally, but when I try to do exactly the
</I>&gt;<i> same steps in docker I'm getting the following errors:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://gist.github.com/xeron/5530fe9aa1f5bdcb6a72c6edd6476467">https://gist.github.com/xeron/5530fe9aa1f5bdcb6a72c6edd6476467</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Example from that log:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> cache_cf.o: In function `configFreeMemory()':
</I>&gt;<i>
</I>&gt;<i> /root/build/src/cache_cf.cc:2982: undefined reference to
</I>&gt;<i> `Adaptation::Icap::TheConfig'
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I can't figure out what exactly is wrong. Doesn't look like any
</I>&gt;<i> dependencies are missing.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Here's my build script:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>       yum install -y autoconf automake file gcc72 gcc72-c++ libtool
</I>&gt;<i> libtool-ltdl-devel pkgconfig diffutils \
</I>&gt;<i>         libxml2-devel libcap-devel openssl-devel
</I>&gt;<i>
</I>&gt;<i>       autoreconf -ivf
</I>&gt;<i>
</I>&gt;<i>       ./configure --program-prefix= --prefix=/usr --exec-prefix=/usr \
</I>&gt;<i>         --bindir=/usr/sbin --sbindir=/usr/sbin --sysconfdir=/etc/squid \
</I>&gt;<i>         --libdir=/usr/lib --libexecdir=/usr/lib/squid \
</I>&gt;<i>         --includedir=/usr/include --datadir=/usr/share/squid \
</I>&gt;<i>         --sharedstatedir=/usr/com --localstatedir=/var \
</I>&gt;<i>         --mandir=/usr/share/man --infodir=/usr/share/info \
</I>&gt;<i>         --enable-epoll --enable-removal-policies=heap,lru \
</I>&gt;<i>         --enable-storeio=aufs,rock \
</I>&gt;<i>         --enable-delay-pools --with-pthreads --enable-cache-digests \
</I>&gt;<i>         --with-large-files --with-filedescriptors=65536 \
</I>&gt;<i>         --enable-htcp
</I>&gt;<i>
</I>&gt;<i>       make -j$(nproc) install DESTDIR=$PWD/_destroot
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Any ideas?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i>
</I>&gt;<i> With best regards, Ivan Larionov.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>

-- 
With best regards, Ivan Larionov.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20220413/3e383bec/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20220413/3e383bec/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024719.html">[squid-users] squid compilation error in Docker
</A></li>
	<LI>Next message (by thread): <A HREF="024721.html">[squid-users] squid compilation error in Docker
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24720">[ date ]</a>
              <a href="thread.html#24720">[ thread ]</a>
              <a href="subject.html#24720">[ subject ]</a>
              <a href="author.html#24720">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
