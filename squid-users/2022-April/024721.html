<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid compilation error in Docker
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20compilation%20error%20in%20Docker&In-Reply-To=%3C5b63e001-d8c6-aa65-6f37-a6c39e39f4e3%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024720.html">
   <LINK REL="Next"  HREF="024722.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid compilation error in Docker</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20compilation%20error%20in%20Docker&In-Reply-To=%3C5b63e001-d8c6-aa65-6f37-a6c39e39f4e3%40measurement-factory.com%3E"
       TITLE="[squid-users] squid compilation error in Docker">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Apr 14 02:19:43 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024720.html">[squid-users] squid compilation error in Docker
</A></li>
        <LI>Next message (by thread): <A HREF="024722.html">[squid-users] squid compilation error in Docker
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24721">[ date ]</a>
              <a href="thread.html#24721">[ thread ]</a>
              <a href="subject.html#24721">[ subject ]</a>
              <a href="author.html#24721">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 4/13/22 20:07, Ivan Larionov wrote:
&gt;<i> Yes this worked. Thanks&#160;Eliezer.
</I>&gt;<i> 
</I>&gt;<i> This means some of these dependencies are required but not caught by the 
</I>&gt;<i> configure script.
</I>&gt;<i> 
</I>&gt;<i> I'll try to figure out which specific one was the culprit.
</I>
And maybe find the earlier error in the make log? The errors you shared 
did not look like a direct effect of some missing package, more like a 
side effect of something that went wrong earlier...


Thank you both,

Alex.


&gt;<i> On Wed, Apr 13, 2022 at 4:36 PM Eliezer Croitoru wrote:
</I>&gt;<i> 
</I>&gt;<i>     For CentOS 7 use the next:____
</I>&gt;<i> 
</I>&gt;<i>     RUN yum install -y epel-release \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160; &amp;&amp;&#160; yum clean all \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160; &amp;&amp;&#160; yum update -y \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160; &amp;&amp;&#160; yum install -y gcc gcc-c++ libtool libtool-ltdl make cmake \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; git pkgconfig sudo automake autoconf yum-utils
</I>&gt;<i>     rpm-build \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160; &amp;&amp;&#160; yum install -y libxml2 expat-devel openssl-devel libcap
</I>&gt;<i>     ccache \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; libtool-ltdl-devel cppunit cppunit-devel bzr git
</I>&gt;<i>     autoconf \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; automake libtool gcc-c++ perl-Pod-MinimumVersion
</I>&gt;<i>     bzip2 ed \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160; make openldap-devel pam-devel db4-devel
</I>&gt;<i>     libxml2-devel \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; libcap-devel screen vim nettle-devel redhat-lsb-core
</I>&gt;<i>     \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; autoconf-archive libtdb-devel libtdb
</I>&gt;<i>     redhat-rpm-config rpm-build rpm-devel \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160; &amp;&amp;&#160; yum install -y perl-libwww-perl ruby ruby-devel \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160; &amp;&amp; &#160;yum clean all____
</I>&gt;<i> 
</I>&gt;<i>     __ __
</I>&gt;<i> 
</I>&gt;<i>     RUN yum update -y \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160; &amp;&amp;&#160; yum install -y systemd-units openldap-devel pam-devel \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; openssl-devel krb5-devel db4-devel expat-devel \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; libxml2-devel libcap-devel libtool
</I>&gt;<i>     libtool-ltdl-devel \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; redhat-rpm-config libdb-devel
</I>&gt;<i>     libnetfilter_conntrack-devel \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; gnutls-devel rpmdevtools wget \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160; &amp;&amp;&#160; yum clean all____
</I>&gt;<i> 
</I>&gt;<i>     __ __
</I>&gt;<i> 
</I>&gt;<i>     __ __
</I>&gt;<i> 
</I>&gt;<i>     For CentOS 8 Stream:____
</I>&gt;<i> 
</I>&gt;<i>     RUN dnf install -y epel-release dnf-plugins-core \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160; &amp;&amp;&#160; dnf config-manager --set-enabled powertools \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160; &amp;&amp;&#160; dnf clean all \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160; &amp;&amp;&#160; dnf update -y \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160; &amp;&amp;&#160; dnf install -y gcc gcc-c++ libtool libtool-ltdl make cmake \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; git pkgconfig sudo automake autoconf yum-utils rpm-build \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160; &amp;&amp;&#160; dnf install -y libxml2 expat-devel openssl-devel libcap ccache \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; libtool-ltdl-devel git autoconf \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; automake libtool gcc-c++ bzip2 ed \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; make openldap-devel pam-devel libxml2-devel \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; libcap-devel screen vim nettle-devel redhat-lsb-core \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; libtdb-devel libtdb redhat-rpm-config rpm-build rpm-devel \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; libnetfilter_conntrack-devel \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160; &amp;&amp;&#160; dnf install -y perl-libwww-perl ruby ruby-devel \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160; &amp;&amp;&#160; dnf clean all____
</I>&gt;<i> 
</I>&gt;<i>     __  __
</I>&gt;<i> 
</I>&gt;<i>     RUN dnf update -y \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160; &amp;&amp;&#160; dnf install -y systemd-units openldap-devel pam-devel \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; openssl-devel krb5-devel expat-devel \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; libxml2-devel libcap-devel libtool libtool-ltdl-devel \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; redhat-rpm-config libdb-devel \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; gnutls-devel rpmdevtools wget \____
</I>&gt;<i> 
</I>&gt;<i>      &#160;&#160; &amp;&amp;&#160; dnf clean all____
</I>&gt;<i> 
</I>&gt;<i>     __ __
</I>&gt;<i> 
</I>&gt;<i>     __ __
</I>&gt;<i> 
</I>&gt;<i>     ----____
</I>&gt;<i> 
</I>&gt;<i>     Eliezer Croitoru____
</I>&gt;<i> 
</I>&gt;<i>     NgTech, Tech Support____
</I>&gt;<i> 
</I>&gt;<i>     Mobile: +972-5-28704261____
</I>&gt;<i> 
</I>&gt;<i>     Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>&gt;____
</I>&gt;<i> 
</I>&gt;<i>     __ __
</I>&gt;<i> 
</I>&gt;<i>     *From:* squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt;&gt; *On Behalf Of
</I>&gt;<i>     *Ivan Larionov
</I>&gt;<i>     *Sent:* Thursday, April 14, 2022 01:34
</I>&gt;<i>     *To:* <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i>     *Subject:* [squid-users] squid compilation error in Docker____
</I>&gt;<i> 
</I>&gt;<i>     __ __
</I>&gt;<i> 
</I>&gt;<i>     Hi.____
</I>&gt;<i> 
</I>&gt;<i>     __ __
</I>&gt;<i> 
</I>&gt;<i>     I have no issues building squid normally, but when I try to do
</I>&gt;<i>     exactly the same steps in docker I'm getting the following errors:____
</I>&gt;<i> 
</I>&gt;<i>     __ __
</I>&gt;<i> 
</I>&gt;<i>     <A HREF="https://gist.github.com/xeron/5530fe9aa1f5bdcb6a72c6edd6476467">https://gist.github.com/xeron/5530fe9aa1f5bdcb6a72c6edd6476467</A>
</I>&gt;<i>     &lt;<A HREF="https://gist.github.com/xeron/5530fe9aa1f5bdcb6a72c6edd6476467">https://gist.github.com/xeron/5530fe9aa1f5bdcb6a72c6edd6476467</A>&gt;____
</I>&gt;<i> 
</I>&gt;<i>     __ __
</I>&gt;<i> 
</I>&gt;<i>     Example from that log:____
</I>&gt;<i> 
</I>&gt;<i>     __ __
</I>&gt;<i> 
</I>&gt;<i>     cache_cf.o: In function `configFreeMemory()':____
</I>&gt;<i> 
</I>&gt;<i>     /root/build/src/cache_cf.cc:2982: undefined reference to
</I>&gt;<i>     `Adaptation::Icap::TheConfig'____
</I>&gt;<i> 
</I>&gt;<i>     __ __
</I>&gt;<i> 
</I>&gt;<i>     I can't figure out what exactly is wrong. Doesn't look like any
</I>&gt;<i>     dependencies are missing.
</I>&gt;<i>     ____
</I>&gt;<i> 
</I>&gt;<i>     __ __
</I>&gt;<i> 
</I>&gt;<i>     Here's my build script:____
</I>&gt;<i> 
</I>&gt;<i>     __ __
</I>&gt;<i> 
</I>&gt;<i>      &#160; &#160; &#160; yum install -y autoconf automake file gcc72 gcc72-c++ libtool
</I>&gt;<i>     libtool-ltdl-devel pkgconfig diffutils \
</I>&gt;<i>      &#160; &#160; &#160; &#160; libxml2-devel libcap-devel openssl-devel
</I>&gt;<i> 
</I>&gt;<i>      &#160; &#160; &#160; autoreconf -ivf
</I>&gt;<i> 
</I>&gt;<i>      &#160; &#160; &#160; ./configure --program-prefix= --prefix=/usr --exec-prefix=/usr \
</I>&gt;<i>      &#160; &#160; &#160; &#160; --bindir=/usr/sbin --sbindir=/usr/sbin
</I>&gt;<i>     --sysconfdir=/etc/squid \
</I>&gt;<i>      &#160; &#160; &#160; &#160; --libdir=/usr/lib --libexecdir=/usr/lib/squid \
</I>&gt;<i>      &#160; &#160; &#160; &#160; --includedir=/usr/include --datadir=/usr/share/squid \
</I>&gt;<i>      &#160; &#160; &#160; &#160; --sharedstatedir=/usr/com --localstatedir=/var \
</I>&gt;<i>      &#160; &#160; &#160; &#160; --mandir=/usr/share/man --infodir=/usr/share/info \
</I>&gt;<i>      &#160; &#160; &#160; &#160; --enable-epoll --enable-removal-policies=heap,lru \
</I>&gt;<i>      &#160; &#160; &#160; &#160; --enable-storeio=aufs,rock \
</I>&gt;<i>      &#160; &#160; &#160; &#160; --enable-delay-pools --with-pthreads --enable-cache-digests \
</I>&gt;<i>      &#160; &#160; &#160; &#160; --with-large-files --with-filedescriptors=65536 \
</I>&gt;<i>      &#160; &#160; &#160; &#160; --enable-htcp
</I>&gt;<i> 
</I>&gt;<i>      &#160; &#160; &#160; make -j$(nproc) install DESTDIR=$PWD/_destroot____
</I>&gt;<i> 
</I>&gt;<i>     __ __
</I>&gt;<i> 
</I>&gt;<i>     Any ideas?____
</I>&gt;<i> 
</I>&gt;<i>     __ __
</I>&gt;<i> 
</I>&gt;<i>     -- ____
</I>&gt;<i> 
</I>&gt;<i>     With best regards, Ivan Larionov.____
</I>&gt;<i> 
</I>&gt;<i>     _______________________________________________
</I>&gt;<i>     squid-users mailing list
</I>&gt;<i>     <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i>     <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>     &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> With best regards, Ivan Larionov.
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024720.html">[squid-users] squid compilation error in Docker
</A></li>
	<LI>Next message (by thread): <A HREF="024722.html">[squid-users] squid compilation error in Docker
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24721">[ date ]</a>
              <a href="thread.html#24721">[ thread ]</a>
              <a href="subject.html#24721">[ subject ]</a>
              <a href="author.html#24721">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
