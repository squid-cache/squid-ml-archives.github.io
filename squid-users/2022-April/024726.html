<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid-Cache VS PHP, put some things in perspective
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid-Cache%20VS%20PHP%2C%20put%20some%20things%20in%20perspective&In-Reply-To=%3C000001d852b6%24712204d0%2453660e70%24%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024723.html">
   <LINK REL="Next"  HREF="024737.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid-Cache VS PHP, put some things in perspective</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid-Cache%20VS%20PHP%2C%20put%20some%20things%20in%20perspective&In-Reply-To=%3C000001d852b6%24712204d0%2453660e70%24%40gmail.com%3E"
       TITLE="[squid-users] Squid-Cache VS PHP, put some things in perspective">ngtech1ltd at gmail.com
       </A><BR>
    <I>Sun Apr 17 23:54:12 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024723.html">[squid-users] Squid-Cache VS PHP, put some things in perspective
</A></li>
        <LI>Next message (by thread): <A HREF="024737.html">[squid-users] Squid-Cache VS PHP, put some things in perspective
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24726">[ date ]</a>
              <a href="thread.html#24726">[ thread ]</a>
              <a href="subject.html#24726">[ subject ]</a>
              <a href="author.html#24726">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>OK so I have created a vagrant simple proxy:
<A HREF="https://github.com/elico/squid-php-helper-tests">https://github.com/elico/squid-php-helper-tests</A>

It works with REDIS and can be tunned for production use.
It's based on Oracle Enterprise Linux 8 and seems to do the job.
Anyone is interested in trying to help testing if PHP is still leaking?

Thanks,
Eliezer

----
Eliezer Croitoru
NgTech, Tech Support
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>

-----Original Message-----
From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; On Behalf Of
Amos Jeffries
Sent: Thursday, April 14, 2022 07:18
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Squid-Cache VS PHP, put some things in
perspective

On 13/04/22 10:30, Eliezer Croitoru wrote:
&gt;<i> 
</I>&gt;<i> I am looking for adventurous Squid Users which wants to help me test if 
</I>&gt;<i> PHP 7.4+ still possess the same old 5.x STDIN bugs.
</I>&gt;<i> 
</I>

Hi Eliezer, Thanks for taking on a re-investingation.


FTR, the old problem was not stdin itself. The issue was that PHP was 
designed with the fundamental assumption that it was used for scripts 
with very short execution times. Implying that all resources used would 
be freed quickly.

This assumption resulted in scripts (like helpers) which need to run for 
very long times having terrible memory and resource consumption side 
effects. Naturally that effect alone compounds badly when Squid attempts 
to run dozens or hundreds of helpers at once.

Later versions (PHP-3/4/5) that I tested had various attempts at 
internal Zend engine controls to limit the memory problems. Based on the 
same assumption though, so they chose to terminate helpers early. Which 
still causes Squid issues. PHP config settings for that Zend timeout 
were unreliable.


AFAIK, That is where we are with knowledge of PHP vs helper usage. 
PHP-6+ have not had any serious testing to check if the language updates 
have improved either resource usage or the Zend timeout/abort behaviour.


HTH
Amos
_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024723.html">[squid-users] Squid-Cache VS PHP, put some things in perspective
</A></li>
	<LI>Next message (by thread): <A HREF="024737.html">[squid-users] Squid-Cache VS PHP, put some things in perspective
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24726">[ date ]</a>
              <a href="thread.html#24726">[ thread ]</a>
              <a href="subject.html#24726">[ subject ]</a>
              <a href="author.html#24726">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
