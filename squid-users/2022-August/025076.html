<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid and Epic Games HCapctca
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20and%20Epic%20Games%20HCapctca&In-Reply-To=%3C005301d8a84d%2460dd1780%2422974680%24%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025075.html">
   <LINK REL="Next"  HREF="025077.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid and Epic Games HCapctca</H1>
    <B>ngtech1ltd at gmail.com</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20and%20Epic%20Games%20HCapctca&In-Reply-To=%3C005301d8a84d%2460dd1780%2422974680%24%40gmail.com%3E"
       TITLE="[squid-users] Squid and Epic Games HCapctca">ngtech1ltd at gmail.com
       </A><BR>
    <I>Thu Aug  4 21:58:48 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="025075.html">[squid-users] Squid and Epic Games HCapctca
</A></li>
        <LI>Next message (by thread): <A HREF="025077.html">[squid-users] Squid and Epic Games HCapctca
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25076">[ date ]</a>
              <a href="thread.html#25076">[ thread ]</a>
              <a href="subject.html#25076">[ subject ]</a>
              <a href="author.html#25076">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please don&#8217;t bang your head&#8230; everybody is here for you.
Sometimes it takes time to respond but you will get your answers.
 
<A HREF="https://www.ngtech.co.il/squid/support-save/support-save-2022-08-05_00-51-47.tar.gz">https://www.ngtech.co.il/squid/support-save/support-save-2022-08-05_00-51-47.tar.gz</A>
 
Is not the fastest connection and it has a blacklist in the DB dump so for now it&#8217;s a production system but works good enough for me.
I hope it&#8217;s not too much information in the support save file.
 
Let me know if it makes more sense for you.
Also I am happy that you have asked this question since now others can enjoy from the answer &#128522;
 
Eliezer
 
----
Eliezer Croitoru
NgTech, Tech Support
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>&gt; 
Web: <A HREF="https://ngtech.co.il/">https://ngtech.co.il/</A>
My-Tube: <A HREF="https://tube.ngtech.co.il/">https://tube.ngtech.co.il/</A>
 
From: Adam Barnett &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">abarnett at belofx.com</A>&gt; 
Sent: Friday, 5 August 2022 0:44
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>
Cc: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Squid and Epic Games HCapctca
 
Sure, the more the beter, ive been banging my head against the wall for a while on this
 
Adam 
 
On Thu, 4 Aug 2022 at 22:41, &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>&gt; &gt; wrote:
You are welcome.
 
I wrote an app that does everything for me so I just need to dump the database into a:
ssl::server_name directive
 
it&#8217;s basically:
## START
acl NoBump_server_name ssl::server_name &quot;/etc/squid/no-ssl-bump-server-name.list&quot;
 
acl tls_to_splice any-of inspect_only NoBump_src NoBump_server_name NoBump_server_regex_by_urls_domain NoBump_server_regex
 
ssl_bump peek app_matcher_helper
ssl_bump peek tls_s1_connect
 
ssl_bump bump app_matcher_helper
ssl_bump bump app_reader_helper
ssl_bump bump deny_note
 
ssl_bump splice app_matcher_helper
ssl_bump splice tls_to_splice
 
ssl_bump stare app_matcher_helper
ssl_bump stare tls_s2_client_hello
 
ssl_bump bump app_matcher_helper
ssl_bump bump tls_to_bump
## END
 
If you want I can upload a snippet of the whole setup dump with hope you could make use of it.
 
Eliezer
 
----
Eliezer Croitoru
NgTech, Tech Support
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>&gt; 
Web: <A HREF="https://ngtech.co.il/">https://ngtech.co.il/</A>
My-Tube: <A HREF="https://tube.ngtech.co.il/">https://tube.ngtech.co.il/</A>
 
From: Adam Barnett &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">abarnett at belofx.com</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">abarnett at belofx.com</A>&gt; &gt; 
Sent: Friday, 5 August 2022 0:26
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>&gt; 
Cc: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt; 
Subject: Re: [squid-users] Squid and Epic Games HCapctca
 
&#1514;&#1493;&#1491;&#1492; &#1512;&#1489;&#1492;
It looks like you are using a database and then building the config from that? any cahnce you can send me the snippet of the config instead of the DB bits? ? 
 
Thanks again 
 
Adam 
 
On Thu, 4 Aug 2022 at 22:18, &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>&gt; &gt; wrote:
Hey Adam,
 
I recorded a video for you on how I do it at:
<A HREF="https://cloud1.ngtech.co.il/static/squid-data/splice-epic-games.mp4">https://cloud1.ngtech.co.il/static/squid-data/splice-epic-games.mp4</A>
 
So basically the relevant domains are:
 
epicgames-download1.akamaized.net &lt;<A HREF="http://epicgames-download1.akamaized.net">http://epicgames-download1.akamaized.net</A>&gt; 
.epicgames.com &lt;<A HREF="http://epicgames.com">http://epicgames.com</A>&gt; 
.unrealengine.com &lt;<A HREF="http://unrealengine.com">http://unrealengine.com</A>&gt; 
 
And you can peek at robert k Wild mail: &#8220;regex for normal websites&#8221;
 
And it contains the relevant technical details.
If for any reason you need a more detailed answer let me know.
 
Yours,
Eliezer 
 
----
Eliezer Croitoru
NgTech, Tech Support
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>&gt; 
Web: <A HREF="https://ngtech.co.il/">https://ngtech.co.il/</A>
My-Tube: <A HREF="https://tube.ngtech.co.il/">https://tube.ngtech.co.il/</A>
 
From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; &gt; On Behalf Of Adam Barnett
Sent: Thursday, 4 August 2022 14:28
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt; 
Subject: [squid-users] Squid and Epic Games HCapctca
 
Hi All, 
 
I am trying to get squid to allow me to login to Epicgames.com with my epic login, i get to the login page and get the hcaptca images and everytime i get &quot;invalid response&quot; 
 
i looked at the headers and the only error that i can see is &quot;The cache information is missing from the entry&quot; 
 
My config looks like so 

workers 2

```
# Leave coredumps in the first cache dir
coredump_dir /var/spool/squid

http_port 3128 ssl-bump  dynamic_cert_mem_cache_size=16MB  generate-host-certificates=on cert=/etc/squid/certs/squid-ca-cert-key.pem

sslcrtd_program /usr/lib64/squid/security_file_certgen -s /var/spool/squid/ssl -M 16MB
dns_nameservers 10.5.1.2 8.8.8.8
visible_hostname foo-proxy-1
forwarded_for truncate
via off

# Send to file
access_log daemon:/var/log/squid/access.log



acl CONNECT method CONNECT
acl local src 10.0.0.0/8 &lt;<A HREF="http://10.0.0.0/8">http://10.0.0.0/8</A>&gt; 
always_direct allow all
request_header_add X-GoogApps-Allowed-Domains &quot;foo.com &lt;<A HREF="http://foo.com">http://foo.com</A>&gt; &quot; all

memory_replacement_policy heap GDSF
maximum_object_size 100 KB
maximum_object_size 1 MB

cache allow all
cache_mem 256 MB
cache_dir rock /var/spool/squid 1024
memory_pools off
cache_swap_low 90
client_persistent_connections on


http_access allow localhost manager
http_access deny manager

# SquidGaurd
url_rewrite_program /usr/bin/squidGuard
```

Any suggestions? 
 
Thanks
	



Adam Barnett
Senior SysAdmin beloFX
	

	


  &lt;<A HREF="https://cdn.gifo.wisestamp.com/s/rich-field-email-1/F1C13B/22/trans.png">https://cdn.gifo.wisestamp.com/s/rich-field-email-1/F1C13B/22/trans.png</A>&gt; 
 
 &lt;<A HREF="https://514584150-atari-embeds.googleusercontent.com/embeds/16cb204cf3a9d4d223a0a3fd8b0eec5d/inner-frame-minified.html?jsh=m%3B%2F_%2Fscs%2Fabc-static%2F_%2Fjs%2Fk%3Dgapi.lb.en.dzXZWX9QTbE.O%2Fd%3D1%2Frs%3DAHpOoo_epIQDPHdjFr3MLkazUi2Jmy50dQ%2Fm%3D__features__">https://514584150-atari-embeds.googleusercontent.com/embeds/16cb204cf3a9d4d223a0a3fd8b0eec5d/inner-frame-minified.html?jsh=m%3B%2F_%2Fscs%2Fabc-static%2F_%2Fjs%2Fk%3Dgapi.lb.en.dzXZWX9QTbE.O%2Fd%3D1%2Frs%3DAHpOoo_epIQDPHdjFr3MLkazUi2Jmy50dQ%2Fm%3D__features__</A>&gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">abarnett at belofx.com</A>


  &lt;<A HREF="https://cdn.gifo.wisestamp.com/s/rich-field-website-1/F1C13B/22/trans.png">https://cdn.gifo.wisestamp.com/s/rich-field-website-1/F1C13B/22/trans.png</A>&gt; 
 
 &lt;<A HREF="http://www.belofx.com/">http://www.belofx.com/</A>&gt; www.belofx.com


  &lt;<A HREF="https://cdn.gifo.wisestamp.com/s/rich-field-website-3/F1C13B/22/trans.png">https://cdn.gifo.wisestamp.com/s/rich-field-website-3/F1C13B/22/trans.png</A>&gt; 
 
 &lt;<A HREF="http://www.linkedin.com/company/belofx">http://www.linkedin.com/company/belofx</A>&gt; LinkedIn
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20220805/28c5a474/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20220805/28c5a474/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="025075.html">[squid-users] Squid and Epic Games HCapctca
</A></li>
	<LI>Next message (by thread): <A HREF="025077.html">[squid-users] Squid and Epic Games HCapctca
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25076">[ date ]</a>
              <a href="thread.html#25076">[ thread ]</a>
              <a href="subject.html#25076">[ subject ]</a>
              <a href="author.html#25076">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
