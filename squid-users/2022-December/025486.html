<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid Degrading
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Degrading&In-Reply-To=%3CCAFuFF_JbRFv-KWbtHpQcLw6jK4vvE%3DQ9awFPJah4XW6pS%3D%3DL3Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025485.html">
   <LINK REL="Next"  HREF="025487.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid Degrading</H1>
    <B>utb trialuser</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20Degrading&In-Reply-To=%3CCAFuFF_JbRFv-KWbtHpQcLw6jK4vvE%3DQ9awFPJah4XW6pS%3D%3DL3Q%40mail.gmail.com%3E"
       TITLE="[squid-users] Squid Degrading">utbtrialuser at gmail.com
       </A><BR>
    <I>Thu Dec  1 21:57:27 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="025485.html">[squid-users] Squid Degrading
</A></li>
        <LI>Next message (by thread): <A HREF="025487.html">[squid-users] Squid Degrading
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25486">[ date ]</a>
              <a href="thread.html#25486">[ thread ]</a>
              <a href="subject.html#25486">[ subject ]</a>
              <a href="author.html#25486">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thank you for your help Alex. I changed the max file descriptor value to
4096 in the squid.conf file and now everything is working fine. I tried to
sudo apt install squid but it says that I'm on the latest version and
downloading it from the website is not as straightforward as I'd want it to
be so for now I will stick to 5.2 but I will keep an eye on it if I have
other issues down the line. Best.

On Thu, Dec 1, 2022 at 11:31 AM Alex Rousskov &lt;
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt; wrote:

&gt;<i> On 12/1/22 11:20, utb trialuser wrote:
</I>&gt;<i>
</I>&gt;<i> &gt;&gt; What is your Squid version (squid --version)?
</I>&gt;<i>
</I>&gt;<i> &gt; 5.2
</I>&gt;<i>
</I>&gt;<i> We can stop here. Please upgrade to Squid v5.7 or later. Squid v5.2 is
</I>&gt;<i> just too buggy to be usable in most production environments (and to
</I>&gt;<i> investigate any performance problems).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt;&gt; Any errors or warnings in cache.log?
</I>&gt;<i>
</I>&gt;<i> &gt; *WARNING! Your cache is running out of filedescriptors*
</I>&gt;<i>
</I>&gt;<i> There are known Squid v5.2 bugs that may result in the above warnings
</I>&gt;<i> and related performance degradation. I hope that these problems will be
</I>&gt;<i> gone, and your Squid performance will be acceptable after you upgrade.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Good luck,
</I>&gt;<i>
</I>&gt;<i> Alex.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; On Wed, Nov 30, 2022 at 6:12 PM Alex Rousskov wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     On 11/30/22 16:57, utb trialuser wrote:
</I>&gt;<i> &gt;      &gt; Hello, I'm running a basic Squid setup on the latest version of
</I>&gt;<i> &gt;     Ubuntu.
</I>&gt;<i> &gt;      &gt; Could you help me figure out why when 15 people connect to my
</I>&gt;<i> &gt;     proxy it
</I>&gt;<i> &gt;      &gt; starts degrading and websites start to take really long to load?
</I>&gt;<i> &gt;      &gt; According to the log file, connections take up to 300000ms to
</I>&gt;<i> &gt;     load when
</I>&gt;<i> &gt;      &gt; this happens. And via other networking tools I was able to
</I>&gt;<i> &gt;     realize that
</I>&gt;<i> &gt;      &gt; packets were being dropped. Bandwidth usage tops at 6MB/s
</I>&gt;<i> &gt;     according to
</I>&gt;<i> &gt;      &gt; another networking tool. Thanks.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     What is your Squid version (squid --version)?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Any errors or warnings in cache.log?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Do you have a cache_dir and/or cache_mem configured in squid.conf? Do
</I>&gt;<i> &gt;     you have &quot;workers&quot; configured?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     How much free RAM is left on the box when &quot;websites start to take
</I>&gt;<i> &gt;     really
</I>&gt;<i> &gt;     long to load&quot;?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Alex.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     _______________________________________________
</I>&gt;<i> &gt;     squid-users mailing list
</I>&gt;<i> &gt;     <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> &gt;     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i> &gt;     <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> &gt;     &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; squid-users mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> &gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20221201/89d6acf1/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20221201/89d6acf1/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="025485.html">[squid-users] Squid Degrading
</A></li>
	<LI>Next message (by thread): <A HREF="025487.html">[squid-users] Squid Degrading
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25486">[ date ]</a>
              <a href="thread.html#25486">[ thread ]</a>
              <a href="subject.html#25486">[ subject ]</a>
              <a href="author.html#25486">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
