<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] URL filtering technical
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20URL%20filtering%20technical&In-Reply-To=%3C002b01d915b1%2440a37870%24c1ea6950%24%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025518.html">
   <LINK REL="Next"  HREF="025520.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] URL filtering technical</H1>
    <B>ngtech1ltd at gmail.com</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20URL%20filtering%20technical&In-Reply-To=%3C002b01d915b1%2440a37870%24c1ea6950%24%40gmail.com%3E"
       TITLE="[squid-users] URL filtering technical">ngtech1ltd at gmail.com
       </A><BR>
    <I>Thu Dec 22 02:57:58 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="025518.html">[squid-users] URL filtering technical
</A></li>
        <LI>Next message (by thread): <A HREF="025520.html">[squid-users] URL filtering technical
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25519">[ date ]</a>
              <a href="thread.html#25519">[ thread ]</a>
              <a href="subject.html#25519">[ subject ]</a>
              <a href="author.html#25519">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey,
 
Depends on your needs but from my experience the most simple solution would be external_acl helper.
I have used all 3 options and unless you really have foundation in ICAP and you do have a specific logic that can be done only via ICAP you should stick with external_acl.
 
If you do ask me about the ideal content filter solution?
It should be some deep inspection in the content level and not just the URL or domain etc.
However again, unless you do have the resources and the basic idea of how you do want to do this deep inspection and mangling of the payload you should stick with external_acl, don&#8217;t use url_rewrite unless you do have a specific tool that only supports that.
 
Eliezer 
 
----
Eliezer Croitoru
NgTech, Tech Support
Mobile: +972-5-28704261
Email:  &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>&gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>
Web:  &lt;<A HREF="https://ngtech.co.il/">https://ngtech.co.il/</A>&gt; <A HREF="https://ngtech.co.il/">https://ngtech.co.il/</A>
My-Tube:  &lt;<A HREF="https://tube.ngtech.co.il/">https://tube.ngtech.co.il/</A>&gt; <A HREF="https://tube.ngtech.co.il/">https://tube.ngtech.co.il/</A>
 
From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; On Behalf Of Lucas Vicente Pereira
Sent: Friday, 16 December 2022 23:06
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: [squid-users] URL filtering technical
 
Good Evening, Community
 
When thinking about URL filtering (http and or https), Which one is the best technique you recommend for integration with Squid 5.7?
 
Environment information:
 ~2500 users
3 x Internet links 1 Gbps each
Average HTTP requests per minute since start: 65956.1
Iptables REDIRECT for squid for transparent mode
 
1 - External_acl (e.g.:
 
external_acl_type webfilter ipv4 ttl=300 children-startup=40 children-max=256 %&gt;ha{SSLproxy} %ACL %ssl::&gt;sni %&gt;ha{REFERER} %URI %SRC %SRCPORT %DST %PORT %&gt;eui % &lt;h{Content-Type} %&gt;ha{Content-Type} %&lt;h{Content-Length} %&gt;ha{Content-Length} %MYPORT %MYADDR %un %METHOD %&gt;ha{USER-AGENT} /sbin/ webfilter
acl acl_webfilter_access external webfilter
acl acl_webfilter_reply external webfilter
 
2 - I-CAP Servers
 
3 - url_rewrite_program (eg:
url_rewrite_program /sbin/webfilter - url_rewrite_children 16 m 4 startup=8 idle=2 concurrency= -l /var/squid/logs 4
 
Thanks a lot.
 
Sincerely,
Lucas Pereira
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20221222/7254b79e/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20221222/7254b79e/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="025518.html">[squid-users] URL filtering technical
</A></li>
	<LI>Next message (by thread): <A HREF="025520.html">[squid-users] URL filtering technical
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25519">[ date ]</a>
              <a href="thread.html#25519">[ thread ]</a>
              <a href="subject.html#25519">[ subject ]</a>
              <a href="author.html#25519">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
