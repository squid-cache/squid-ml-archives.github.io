<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Base64 encoding of X-Authenticated-User Request Header
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Base64%20encoding%20of%20X-Authenticated-User%20Request%0A%20Header&In-Reply-To=%3C78ae3a0a-5057-c4af-a532-74adfe5f49ee%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024476.html">
   <LINK REL="Next"  HREF="024479.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Base64 encoding of X-Authenticated-User Request Header</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Base64%20encoding%20of%20X-Authenticated-User%20Request%0A%20Header&In-Reply-To=%3C78ae3a0a-5057-c4af-a532-74adfe5f49ee%40treenet.co.nz%3E"
       TITLE="[squid-users] Base64 encoding of X-Authenticated-User Request Header">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Feb  4 12:45:30 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024476.html">[squid-users] Base64 encoding of X-Authenticated-User Request Header
</A></li>
        <LI>Next message (by thread): <A HREF="024479.html">[squid-users] The status of AIA ie: TLS code: X509_V_ERR_UNABLE_TO_GET_ISSUER_CERT_LOCALLY ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24477">[ date ]</a>
              <a href="thread.html#24477">[ thread ]</a>
              <a href="subject.html#24477">[ subject ]</a>
              <a href="author.html#24477">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 4/02/22 21:43, Nolan wrote:
&gt;<i> Hi All!
</I>&gt;<i> 
</I>&gt;<i> I'm using a Squid proxy instance to authenticate users on the local LAN 
</I>&gt;<i> and then forward requests to an upstream proxy.
</I>&gt;<i> I'm trying to figure out a way to do a base64 encoding of the 
</I>&gt;<i> X-Authenticated-User request header.
</I>&gt;<i> 
</I>&gt;<i> Right now I have the following line:
</I>&gt;<i> request_header_add X-Authenticated-User &quot;%un&quot; all
</I>&gt;<i> 
</I>&gt;<i> I'm just missing the component to convert that %un value into base64 format.
</I>&gt;<i> 
</I>&gt;<i> Any ideas on how to do this?
</I>&gt;<i> 
</I>

Firstly, why are you using that X- header?

Squid configured with a cache_peer should be able to pass on the 
username in Basic auth headers.


Secondly, base64 encoding is not currently supported for the format codes.

For now, you will have to either have the authenticator or an 
external_acl_type helper provide Squid with the base64 encoded form and 
use the %note code to generate the header.


PS. I am happy to provide a patch adding base64 encoding to logformat's. 
If you (or anyone) wants to sponsor it please contact me.


Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024476.html">[squid-users] Base64 encoding of X-Authenticated-User Request Header
</A></li>
	<LI>Next message (by thread): <A HREF="024479.html">[squid-users] The status of AIA ie: TLS code: X509_V_ERR_UNABLE_TO_GET_ISSUER_CERT_LOCALLY ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24477">[ date ]</a>
              <a href="thread.html#24477">[ thread ]</a>
              <a href="subject.html#24477">[ subject ]</a>
              <a href="author.html#24477">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
