<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid plugin sponsor
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20plugin%20sponsor&In-Reply-To=%3C001a01d81fd1%243b14bb70%24b13e3250%24%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024513.html">
   <LINK REL="Next"  HREF="024519.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid plugin sponsor</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20plugin%20sponsor&In-Reply-To=%3C001a01d81fd1%243b14bb70%24b13e3250%24%40gmail.com%3E"
       TITLE="[squid-users] Squid plugin sponsor">ngtech1ltd at gmail.com
       </A><BR>
    <I>Sat Feb 12 05:27:28 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024513.html">[squid-users] Squid plugin sponsor
</A></li>
        <LI>Next message (by thread): <A HREF="024519.html">[squid-users] Squid plugin sponsor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24514">[ date ]</a>
              <a href="thread.html#24514">[ thread ]</a>
              <a href="subject.html#24514">[ subject ]</a>
              <a href="author.html#24514">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey David,

 

The general name of this concept is SSO service.

It can have single or multiple backends.

The main question is how to implement the solution in the optimal way possible.
(taking into account money, coding complexity and other humane parts)

 

You will need to authenticate the client against the main AUTH service.

There is a definitive way or statistical way to implement this solution.

With AD or Kerberos it&#8217;s possible to implement the solution in such a way that windows will
&#8220;transparently&#8221; authenticate to the proxy service.

However you must understand that all of this requires an infrastructure that will provide every piece of the setup.

If your setup doesn&#8217;t contains RDP like servers then it&#8217;s possible that you can authenticate a user with an IP compared
to pinning every connection to a specific user.

Also, the &#8220;cost&#8221; of non-transparent authentication is that the user will be required to enter (manually or automatically) 
the username and the password.

An HotSpot like setup is called &#8220;Captive Portal&#8221; and it&#8217;s a very simple setup to implement with active directory.

It&#8217;s also possible to implement a transparent authentication for such a setup based on session tokens.

 

You actually don&#8217;t need to create a &#8220;fake&#8221; helper for such a setup but you can create one that is based on Linux.

It&#8217;s an &#8220;Advanced&#8221; topic but if you do ask me it&#8217;s possible that you can take this in steps.

The first step would be to use a session helper that will authenticate the user and will identify the user
based on it&#8217;s IP address.

If it&#8217;s a wireless setup you can use a radius based authentication ( can also be implemented on a wired setup).

Once you will authenticate the client transparently or in another way you can limit the usage of the username to
a specific client and with that comes a guaranteed situation that a username will not be used from two sources.

I don&#8217;t know about your experience but the usage of a captive portal is very common In such situations.

The other option is to create an agent in the client side that will identify the user against the proxy/auth service
and it will create a situation which an authorization will be acquired based on some degree of authentication.

 

In most SSO environments it&#8217;s possible that per request/domain/other there is a transparent validation.

 

In all the above scenarios which requires authentication the right way to do it would be to use the proxy as
a configured proxy compared to transparent.

I believe that one thing to consider is that once you authenticate against a RADIUS service you would just
minimize the user interaction.

The main point from what I understand is to actually minimize the authentication steps of the client.

 

My suggestion for you is to first try and asses the complexity of a session helper, raidus and captive portal.

These are steps that you will need to do in order to asses the necessity of transparent SSO.

 

Also take your time to compare how a captive portal is configured in the next general products:

*	Palo Alto
*	FortiGate
*	Untangle
*	Others

 

&gt;<i>From the documentation you would see the different ways and &#8220;grades&#8221; that they implement the solutions.
</I>
Once you know what the market offers and their equivalent costs you will probably understand what
you want and what you can afford to invest in the development process of each part of setup.

 

All The Bests,

Eliezer

 

----

Eliezer Croitoru

NgTech, Tech Support

Mobile: +972-5-28704261

Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>&gt; 

 

From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; On Behalf Of David Touzeau
Sent: Friday, February 11, 2022 17:03
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Squid plugin sponsor

 

Hello

Thank you but this is not the objective and this is the reason for needing the &quot;fake&quot;.
Access to Kerberos or NTLM ports of the AD, is not possible. An LDAP server would be present with accounts replication.
The idea is to do a silent authentication without joining the AD 
We did not need the double user/password credential, only the user sent by the browser is required

If the user has an Active Directory session then his account is automatically sent without him having to take any action.
If the user is in a workgroup then the account sent will not be in the LDAP database and will be rejected.
I don't need to argue about the security value of this method. It saves us from setting up a gas factory to make a kind of HotSpot

Le 11/02/2022 &#224; 05:55, Dieter Bloms a &#233;crit :

Hello David,
 
for me it looks like you want to use kerberos authentication.
With kerberos authentication the user don't have to authenticate against
the proxy. The authentication is done in the background.
 
Mayb this link will help:
 
<A HREF="https://wiki.squid-cache.org/ConfigExamples/Authenticate/Kerberos">https://wiki.squid-cache.org/ConfigExamples/Authenticate/Kerberos</A>
 
On Thu, Feb 10, David Touzeau wrote:
 

Hi
 
What we are looking for is to retrieve a &quot;user&quot; token without having to ask
anything from the user.
That's why we're looking at Active Directory credentials.
Once the user account is retrieved, a helper would be in charge of checking
if the user exists in the LDAP database.
This is to avoid any connection to an Active Directory
Maybe this is impossible
 
 
Le 10/02/2022 &#224; 05:03, Amos Jeffries a &#233;crit :

On 10/02/22 01:43, David Touzeau wrote:

Hi
 
I would like to sponsor the improvement of ntlm_fake_auth to support
new protocols

 
ntlm_* helpers are specific to NTLM authentication. All LanManager (LM)
protocols should already be supported as well as currently possible.
NTLM is formally discontinued by MS and *very* inefficient.
 
NP: NTLMv2 with encryption does not *work* because that encryption step
requires secret keys the proxy is not able to know.
 

or go further produce a new negotiate_kerberos_auth_fake
 

 
With current Squid this helper only needs to produce an &quot;OK&quot; response
regardless of the input. The basic_auth_fake does that.
 
Amos
_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt; 
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>

 

_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt; 
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>

 
 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20220212/11294157/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20220212/11294157/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024513.html">[squid-users] Squid plugin sponsor
</A></li>
	<LI>Next message (by thread): <A HREF="024519.html">[squid-users] Squid plugin sponsor
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24514">[ date ]</a>
              <a href="thread.html#24514">[ thread ]</a>
              <a href="subject.html#24514">[ subject ]</a>
              <a href="author.html#24514">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
