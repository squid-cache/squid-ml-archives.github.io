<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid 5.3 frequent crash
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%205.3%20frequent%20crash&In-Reply-To=%3C0b2da47a-a862-6f25-5a0b-9b2bb881303b%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024388.html">
   <LINK REL="Next"  HREF="024408.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid 5.3 frequent crash</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%205.3%20frequent%20crash&In-Reply-To=%3C0b2da47a-a862-6f25-5a0b-9b2bb881303b%40measurement-factory.com%3E"
       TITLE="[squid-users] squid 5.3 frequent crash">rousskov at measurement-factory.com
       </A><BR>
    <I>Fri Jan  7 16:02:54 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024388.html">[squid-users] squid 5.3 frequent crash
</A></li>
        <LI>Next message (by thread): <A HREF="024408.html">[squid-users] squid 5.3 frequent crash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24389">[ date ]</a>
              <a href="thread.html#24389">[ thread ]</a>
              <a href="subject.html#24389">[ subject ]</a>
              <a href="author.html#24389">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 1/7/22 9:34 AM, Amos Jeffries wrote:
&gt;<i> On 7/01/22 06:00, Alex Rousskov wrote:
</I>&gt;&gt;<i> On 1/6/22 6:53 AM, Majed Zouhairy wrote:
</I>&gt;&gt;&gt;<i> after upgrading today to 5.3 i'm getting:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 2022/01/06 14:27:18 kid1| FATAL: check failed: opening()
</I>&gt;&gt;&gt;<i> &#160;&#160;&#160;&#160; exception location: FwdState.cc(628) noteDestinationsEnd
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> what is the cause?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This is most likely bug 5055 fixed in August 2021:
</I>&gt;&gt;<i> <A HREF="https://bugs.squid-cache.org/show_bug.cgi?id=5055">https://bugs.squid-cache.org/show_bug.cgi?id=5055</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> In many environments, Squid v5 is unusable without that bug fix. I do
</I>&gt;&gt;<i> not know whether the v5 maintainer plans to officially backport the fix
</I>&gt;&gt;<i> from master/v6 to v5, but we would be happy to assist with that.
</I>

&gt;<i> The commit message documents that the bug fix is a small part of the
</I>&gt;<i> changes made.
</I>
I am unable to separate many of the bug fixes from most other changes in
that commit. I am a fan of surgical fixes, but, sometimes, significant
code changes are required to address a set of bugs. One could, of
course, ignore most of the bugs fixed by the official commit and just
make sure that v5 does not violate the opening() MUST that triggered
this thread, but I see no point in doing that -- we will end up chasing
one known bug after another, sometimes in circles, and often via painful
triage.


&gt;<i> Others include altering the fundamental AsyncJob API behaviour -
</I>&gt;<i> affecting every feature in Squid at their most fundamental levels.
</I>
I disagree with the above summary.


&gt;<i> That amount of change is not going into a &quot;stable&quot; release of
</I>&gt;<i> Squid.
</I>
FWIW, IMHO, Squid v5 is much better with those changes than it is
without them. Once tested, the changes do not violate any fundamental
stability principles that I know of. However, I think it is best to let
the maintainer (i.e. you) make v5 admission decisions. I am just
providing feedback to facilitate informed decisions.


&gt;<i> I will consider patches for just the bug 5055 issue though.
</I>
To avoid misunderstanding, (the backport of) the official set of fixes
is what I am offering for your consideration. If others can address all
those bugs using smaller patches, great! Otherwise, I recommend
backporting the comprehensive fix and am happy to assist with that.


HTH,

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024388.html">[squid-users] squid 5.3 frequent crash
</A></li>
	<LI>Next message (by thread): <A HREF="024408.html">[squid-users] squid 5.3 frequent crash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24389">[ date ]</a>
              <a href="thread.html#24389">[ thread ]</a>
              <a href="subject.html#24389">[ subject ]</a>
              <a href="author.html#24389">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
