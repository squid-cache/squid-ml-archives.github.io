<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Tune Squid proxy to handle 90k connection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Tune%20Squid%20proxy%20to%20handle%2090k%20connection&In-Reply-To=%3C%21%26%21AAAAAAAAAAAuAAAAAAAAAJJD97gEMN5Ch2HBNn/5W3IBAMO2jhD3dRHOtM0AqgC7tuYAAAAAAA4AABAAAABNxsPHehKwSZDzyb36Q4ZsAQAAAAA%3D%40articatech.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024405.html">
   <LINK REL="Next"  HREF="024420.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Tune Squid proxy to handle 90k connection</H1>
    <B>Andr&#233; Bolinhas</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Tune%20Squid%20proxy%20to%20handle%2090k%20connection&In-Reply-To=%3C%21%26%21AAAAAAAAAAAuAAAAAAAAAJJD97gEMN5Ch2HBNn/5W3IBAMO2jhD3dRHOtM0AqgC7tuYAAAAAAA4AABAAAABNxsPHehKwSZDzyb36Q4ZsAQAAAAA%3D%40articatech.com%3E"
       TITLE="[squid-users] Tune Squid proxy to handle 90k connection">andre.bolinhas at articatech.com
       </A><BR>
    <I>Thu Jan 13 16:44:11 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024405.html">[squid-users] Tune Squid proxy to handle 90k connection
</A></li>
        <LI>Next message (by thread): <A HREF="024420.html">[squid-users] Tune Squid proxy to handle 90k connection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24406">[ date ]</a>
              <a href="thread.html#24406">[ thread ]</a>
              <a href="subject.html#24406">[ subject ]</a>
              <a href="author.html#24406">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi
~80k request per second  10k users
CPU info:
CPU(s) 16
Threads per code 2
Cores per socket 8
Sockets 1
Inter Xeron Silver 4208  @ 2.10GHz

Squid Mode: Direct mode on port 3128.


-----Mensagem original-----
De: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; Em Nome De Amos Jeffries
Enviada: 13 de janeiro de 2022 16:26
Para: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Assunto: Re: [squid-users] Tune Squid proxy to handle 90k connection

On 14/01/22 04:00, Andr&#233; Bolinhas wrote:
&gt;<i> Hi all,
</I>&gt;<i> 
</I>&gt;<i> I would like you help to setup my squid server to handle 90k connection.
</I>&gt;<i> 
</I>&gt;<i> 1 box, with 128GB ram, 1CPU and 1TB SSD.
</I>&gt;<i> 
</I>
Does that means 1 CPU core?
  What speed CPU?


&gt;<i> My question is:
</I>&gt;<i> 
</I>&gt;<i> How many squid process need to run (workers, cpu-affinity) ?
</I>&gt;<i> 
</I>&gt;<i> Any special configuration that I need to do in squid configuration file?
</I>&gt;<i> 
</I>
What &quot;mode&quot; of proxy is this Squid operating as?


&gt;<i> Any tunning the I need to perform on kernel, sysctl or proc files?
</I>&gt;<i> 
</I>
The number of connections does not matter much unfortunately. What matters is how many requests are being made on those connections, and how fast they arrive.

90k connections over a day with one request each is trivial. A single connection delivering a million requests in one minute is a major problem. Your reality will be somewhere in between.

If you are able to gather network statistics to find out the request-per-second traffic rates happening in your traffic do that and we can use those numbers more helpfully.

If not, then the best thing to do is simply setup Squid how you want to use it and see what happens. At the very least it can provide you those numbers for fine tuning once it is already operational.

FYI; Tuning is an ongoing process as popularity of websites and the technology they are built from changes relatively often. So the &quot;same&quot; 
traffic will change over time and tuning will need irregular updates.


Amos
_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024405.html">[squid-users] Tune Squid proxy to handle 90k connection
</A></li>
	<LI>Next message (by thread): <A HREF="024420.html">[squid-users] Tune Squid proxy to handle 90k connection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24406">[ date ]</a>
              <a href="thread.html#24406">[ thread ]</a>
              <a href="subject.html#24406">[ subject ]</a>
              <a href="author.html#24406">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
