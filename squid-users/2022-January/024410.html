<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid 5.3 frequent crash
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%205.3%20frequent%20crash&In-Reply-To=%3Cd13fc0ef-76ef-5ca7-0693-b0a0bd2161f5%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024408.html">
   <LINK REL="Next"  HREF="024391.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid 5.3 frequent crash</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%205.3%20frequent%20crash&In-Reply-To=%3Cd13fc0ef-76ef-5ca7-0693-b0a0bd2161f5%40measurement-factory.com%3E"
       TITLE="[squid-users] squid 5.3 frequent crash">rousskov at measurement-factory.com
       </A><BR>
    <I>Tue Jan 18 20:56:23 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024408.html">[squid-users] squid 5.3 frequent crash
</A></li>
        <LI>Next message (by thread): <A HREF="024391.html">[squid-users] Squid 4.13 does not access Facebook
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24410">[ date ]</a>
              <a href="thread.html#24410">[ thread ]</a>
              <a href="subject.html#24410">[ subject ]</a>
              <a href="author.html#24410">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 1/18/22 2:51 AM, Amos Jeffries wrote:
&gt;<i> On 8/01/22 05:02, Alex Rousskov wrote:
</I>&gt;&gt;<i> On 1/7/22 9:34 AM, Amos Jeffries wrote:
</I>&gt;&gt;&gt;<i> Others include altering the fundamental AsyncJob API behaviour -
</I>&gt;&gt;&gt;<i> affecting every feature in Squid at their most fundamental levels.
</I>
&gt;&gt;<i> I disagree with the above summary.
</I>
&gt;<i> This is not an opinion.
</I>
It is impossible to tell for sure whether this is an opinion or a fact
because the summary is using undefined terms like &quot;every feature&quot; and
&quot;most fundamental levels&quot;. To you, it may sound like a fact. To me, it
sounds like gross exaggeration at best: Clearly, there are Squid
features (for some reasonable definition of a &quot;feature&quot;) unaffected by
this change at &quot;most fundamental levels&quot; (for some reasonable definition
of &quot;most fundamental levels&quot;).


&gt;<i> The patch &quot;part 2&quot; makes logic changes to
</I>&gt;<i> AsyncJob - specifically destructors and swanSong. That touches
</I>&gt;<i> *everything* Squid does. The other parts touch I/O in similarly deep
</I>&gt;<i> ways and we have a history of unexpected weird side effects with I/O
</I>&gt;<i> refactorings.
</I>
I do not think squid-users is the right place to debate complex
development issues. I will just note that the commit in question does
not, IMO, change AsyncJob methods in fundamental ways. It only shrinks
the long-known gray area of what those functions should (not) do. Before
this change, we did not know where certain actions should take place.
Now, we (think we) do, and we have adjusted a few places to follow those
newly discovered rules.

Will this complex change have unexpected side effects? Yes, of course! I
have disclosed that risk when posting the changes. No need to grossly
exaggerate to agree on that point -- nobody is arguing against it.


&gt;<i> I am seriously considering using our exceptional beta release process
</I>&gt;<i> for these changes once v5.4 bug fixes are out.
</I>
FWIW, I see no need for a special process here. We have no reasons to
believe that the change is making Squid v5 worse overall. All those who
tested the change in v5 and master reported significant improvement in
Squid stability. Moreover, since the last numbered v5 release was
unstable (for many reasons), the bar for the next numbered v5 release is
pretty low: We are not going from very stable to possibly unstable; we
are going from very unstable to possibly less unstable.

Said that, I am not trying to block the &quot;exceptional beta release
process&quot; you want to use. I am just providing feedback. Most v5 actions
are your call as a v5 maintainer, including special v5.x.y snapshots
that have three numbers instead of the usual two.


&gt;<i> IMO the best code to base your backport PR on would be the v5 HEAD after
</I>&gt;<i> 1st Feb when I post the &quot;prep for 5.4&quot; or similar QA for review.
</I>
To avoid misunderstanding, when you have a commit SHA that the backport
should be based on, please let me know that SHA, and I will start
backporting from that point. That commit/SHA does not have to be in the
official branch, of course.


&gt;<i> That gives us 6 weeks for validation before v5.5 release decisions are
</I>&gt;<i> made. I seriously *hope* that is enough testing not to be hit later with
</I>&gt;<i> another one of these.
</I>
FWIW, all other factors being equal, I doubt you would see more &quot;beta&quot;
v5 testers than you would see without any special &quot;beta&quot; releases. If
anything, the opposite is probably true. That is one of the several
reasons I do not recommend using special procedures for releasing this
important bug fix in v5. Again, this is your call.


HTH,

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024408.html">[squid-users] squid 5.3 frequent crash
</A></li>
	<LI>Next message (by thread): <A HREF="024391.html">[squid-users] Squid 4.13 does not access Facebook
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24410">[ date ]</a>
              <a href="thread.html#24410">[ thread ]</a>
              <a href="subject.html#24410">[ subject ]</a>
              <a href="author.html#24410">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
