<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] How to fix the error error:transaction-end-before-headers in access log
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20fix%20the%20error%0A%20error%3Atransaction-end-before-headers%20in%20access%20log&In-Reply-To=%3Cc85a0789-2066-4674-2b80-1f1d2e454e1d%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024417.html">
   <LINK REL="Next"  HREF="024423.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] How to fix the error error:transaction-end-before-headers in access log</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20How%20to%20fix%20the%20error%0A%20error%3Atransaction-end-before-headers%20in%20access%20log&In-Reply-To=%3Cc85a0789-2066-4674-2b80-1f1d2e454e1d%40measurement-factory.com%3E"
       TITLE="[squid-users] How to fix the error error:transaction-end-before-headers in access log">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Jan 20 17:39:30 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024417.html">[squid-users] How to fix the error error:transaction-end-before-headers in access log
</A></li>
        <LI>Next message (by thread): <A HREF="024423.html">[squid-users] tls_key_log Configuration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24419">[ date ]</a>
              <a href="thread.html#24419">[ thread ]</a>
              <a href="subject.html#24419">[ subject ]</a>
              <a href="author.html#24419">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 1/20/22 2:42 AM, Matus UHLAR - fantomas wrote:
&gt;<i> On 20.01.22 07:04, Hg Mi wrote:
</I>&gt;&gt;<i> We currently using squid 4.13 on ubuntu 18.04,&#160; the following error
</I>&gt;&gt;<i> generates really frequently in the access.log.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> error:transaction-end-before-headers
</I>&gt;<i> 
</I>&gt;<i> it means that either client or server closed connection before
</I>
In most cases, this means the client opened a TCP connection to a Squid
listening port and then closed it without sending the HTTP headers. To
figure out who is at fault, you need to figure out who is making these
connections to Squid and why they are closing them without sending HTTP
headers (if that is what they are actually doing).

Bugs notwithstanding, server closures should not lead to
transaction-end-before-headers records.

&gt;&gt;<i> Is this a bug in squid4?&#160; or it was misconfigured in my environment?
</I>&gt;<i> 
</I>&gt;<i> most likely your environment. don't you have any content filter in front of
</I>&gt;<i> your proxy?
</I>
... or anything that would &quot;probe&quot; or &quot;health check&quot; Squid http_port or
https_port at TCP level.


HTH,

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024417.html">[squid-users] How to fix the error error:transaction-end-before-headers in access log
</A></li>
	<LI>Next message (by thread): <A HREF="024423.html">[squid-users] tls_key_log Configuration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24419">[ date ]</a>
              <a href="thread.html#24419">[ thread ]</a>
              <a href="subject.html#24419">[ subject ]</a>
              <a href="author.html#24419">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
