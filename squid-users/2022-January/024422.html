<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Tune Squid proxy to handle 90k connection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Tune%20Squid%20proxy%20to%20handle%2090k%20connection&In-Reply-To=%3C7ad2938f-27ce-dcab-4579-1b2c49b814a0%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024421.html">
   <LINK REL="Next"  HREF="024437.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Tune Squid proxy to handle 90k connection</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Tune%20Squid%20proxy%20to%20handle%2090k%20connection&In-Reply-To=%3C7ad2938f-27ce-dcab-4579-1b2c49b814a0%40treenet.co.nz%3E"
       TITLE="[squid-users] Tune Squid proxy to handle 90k connection">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Jan 21 18:09:07 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024421.html">[squid-users] Tune Squid proxy to handle 90k connection
</A></li>
        <LI>Next message (by thread): <A HREF="024437.html">[squid-users] Tune Squid proxy to handle 90k connection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24422">[ date ]</a>
              <a href="thread.html#24422">[ thread ]</a>
              <a href="subject.html#24422">[ subject ]</a>
              <a href="author.html#24422">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 22/01/22 05:35, Andr&#233; Bolinhas wrote:
&gt;<i> Thanks Amos
</I>&gt;<i> Yes, you are right, I will put a second box with HaProxy in front to balance the traffic.
</I>&gt;<i> About the sockets I can't double it because is a physical machine, do you think disable hyperthreading from bios will help, because we have other services inside the box that works in multi-threading, like unbound DNS?
</I>
CPU hyperthreading and software multi-threading are different things. 
Software can still perform threading without CPU hyperthreading turned on.

Like I said you will have to test its effect, and other services 
reaction will be one of the things to look at carefully there.


Disclaimer: it has been ~5 years since I last had hands-on with any high 
performance Squid system. Others here are likely to have better 
experience when you come to the actual fine tuning.


&gt;<i> 
</I>&gt;<i> Just more a few questions:
</I>&gt;<i> 1&#186; The server have 92Gb of Ram, do you think that is needed that adding swap will help squid performance?
</I>
That should be fine. But YMMV.

Swap is an absolute killer of performance for Squid. Avoid it as much as 
you can.


&gt;<i> 2&#186; Right now we are using squid 4.17 did you recommend upgrade or downgrade to any specific version?
</I>
I have not seen any good benchmarking since v3.5 so don't have any 
specific version advice in regards to your install.

I would usually advise the latest supported for new setups. Purely to 
ensure maximum length of support time before upgrade. However, there are 
some issues in v5.3 that make me reluctant to promote it for now.


&gt;<i> 3&#186; We need categorization, for this we are using an external helper to achieve it, do you recommend use this approach with ACL or move to some kind of ufdbguard service?
</I>&gt;<i> 
</I>
That depends on what and why your categories are.

External ACL helper is usually best for making access control decisions 
and/or marking traffic on arbitrary (but non-payload) properties.

ufdbguard operates primarily on the URI-rewrite/redirect API so best for 
decisions focused around URI modification.

Both are external processes, taking up cycles for their own use and so 
the performance impact should be similar.



Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024421.html">[squid-users] Tune Squid proxy to handle 90k connection
</A></li>
	<LI>Next message (by thread): <A HREF="024437.html">[squid-users] Tune Squid proxy to handle 90k connection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24422">[ date ]</a>
              <a href="thread.html#24422">[ thread ]</a>
              <a href="subject.html#24422">[ subject ]</a>
              <a href="author.html#24422">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
