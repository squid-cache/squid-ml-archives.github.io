<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Reverse DNS lookups from squid logging port
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Reverse%20DNS%20lookups%20from%20squid%20logging%20port&In-Reply-To=%3C14c42a20-dfd1-55b0-91c3-51c55a6e2769%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024429.html">
   <LINK REL="Next"  HREF="024431.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Reverse DNS lookups from squid logging port</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Reverse%20DNS%20lookups%20from%20squid%20logging%20port&In-Reply-To=%3C14c42a20-dfd1-55b0-91c3-51c55a6e2769%40measurement-factory.com%3E"
       TITLE="[squid-users] Reverse DNS lookups from squid logging port">rousskov at measurement-factory.com
       </A><BR>
    <I>Tue Jan 25 04:38:05 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024429.html">[squid-users] Reverse DNS lookups from squid logging port
</A></li>
        <LI>Next message (by thread): <A HREF="024431.html">[squid-users] Reverse DNS lookups from squid logging port
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24430">[ date ]</a>
              <a href="thread.html#24430">[ thread ]</a>
              <a href="subject.html#24430">[ subject ]</a>
              <a href="author.html#24430">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 1/24/22 7:24 PM, Praveen Ponakanti wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I am running squid version&#160;4.17 and have not been able to disable the
</I>&gt;<i> reverse DNS lookups it does on each client's IP address. Found the
</I>&gt;<i> thread below that discusses this; I have attempted adding the following
</I>&gt;<i> config knobs, but it still does not disable the reverse lookups. I do
</I>&gt;<i> not have any logformat containing &quot;&gt;A&quot; or &quot;&lt;A&quot;.&#160;
</I>&gt;<i> 
</I>&gt;<i> store_id_extras &quot;%&gt;a %un %&gt;rm myip=%la myport=%lp&quot;
</I>&gt;<i> url_rewrite_extras &quot;%&gt;a %un %&gt;rm myip=%la myport=%lp&quot;
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/pipermail/squid-users/2016-February/009109.html">http://lists.squid-cache.org/pipermail/squid-users/2016-February/009109.html</A>
</I>&gt;<i> 
</I>&gt;<i> The proposed solution seems to be to change the following lines and
</I>&gt;<i> recompile. If this is still the recommended fix, can it be upstreamed in
</I>&gt;<i> an upcoming release?
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://github.com/squid-cache/squid/blob/master/src/cf.data.pre#L6042">https://github.com/squid-cache/squid/blob/master/src/cf.data.pre#L6042</A>
</I>&gt;<i> <A HREF="https://github.com/squid-cache/squid/blob/master/src/cf.data.pre#L6136">https://github.com/squid-cache/squid/blob/master/src/cf.data.pre#L6136</A>
</I>
The above change of squid.conf defaults will probably work for you, but
it will also break some deployments affected by this bug because the
current code implicitly relies on those defaults triggering lookups.
Thus, it is probably not the right solution for upstreaming. The PR
mentioned below discusses specifics (see item #1 in the PR description).


The solution proposed for upstreaming is at
<A HREF="https://github.com/squid-cache/squid/pull/912">https://github.com/squid-cache/squid/pull/912</A>

It does not require changing squid.conf defaults and has no (known to
me) other serious flaws.


HTH,

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024429.html">[squid-users] Reverse DNS lookups from squid logging port
</A></li>
	<LI>Next message (by thread): <A HREF="024431.html">[squid-users] Reverse DNS lookups from squid logging port
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24430">[ date ]</a>
              <a href="thread.html#24430">[ thread ]</a>
              <a href="subject.html#24430">[ subject ]</a>
              <a href="author.html#24430">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
