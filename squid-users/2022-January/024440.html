<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] [ext] Re: Absolute upper limit for filedescriptors in squid-6?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%5Bext%5D%20Re%3A%20Absolute%20upper%20limit%20for%0A%20filedescriptors%20in%20squid-6%3F&In-Reply-To=%3C%21%26%21AAAAAAAAAAAuAAAAAAAAAJJD97gEMN5Ch2HBNn/5W3IBAMO2jhD3dRHOtM0AqgC7tuYAAAAAAA4AABAAAADBlOEWbBXTSqJUSg07MipBAQAAAAA%3D%40articatech.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024439.html">
   <LINK REL="Next"  HREF="024441.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] [ext] Re: Absolute upper limit for filedescriptors in squid-6?</H1>
    <B>Andr&#233; Bolinhas</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%5Bext%5D%20Re%3A%20Absolute%20upper%20limit%20for%0A%20filedescriptors%20in%20squid-6%3F&In-Reply-To=%3C%21%26%21AAAAAAAAAAAuAAAAAAAAAJJD97gEMN5Ch2HBNn/5W3IBAMO2jhD3dRHOtM0AqgC7tuYAAAAAAA4AABAAAADBlOEWbBXTSqJUSg07MipBAQAAAAA%3D%40articatech.com%3E"
       TITLE="[squid-users] [ext] Re: Absolute upper limit for filedescriptors in squid-6?">andre.bolinhas at articatech.com
       </A><BR>
    <I>Tue Jan 25 23:14:34 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024439.html">[squid-users] [ext] Re: Absolute upper limit for filedescriptors in squid-6?
</A></li>
        <LI>Next message (by thread): <A HREF="024441.html">[squid-users] [ext] Re: Absolute upper limit for filedescriptors in squid-6?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24440">[ date ]</a>
              <a href="thread.html#24440">[ thread ]</a>
              <a href="subject.html#24440">[ subject ]</a>
              <a href="author.html#24440">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi
I have a question regarding with this topic to, I need about 2M
filedescriptors so my squid is compiled with --enable-poll and
--enable-epoll.
In this case which mechanism Squid will use poll or epoll?
Also, for better performance for large FD, which mechanism did you recommend
poll, epoll or kqueue?
Thanks
Best regards

-----Mensagem original-----
De: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; Em Nome De Amos
Jeffries
Enviada: 25 de janeiro de 2022 20:17
Para: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Assunto: Re: [squid-users] [ext] Re: Absolute upper limit for
filedescriptors in squid-6?

On 26/01/22 03:55, Ralf Hildebrandt wrote:
&gt;<i> * Francesco Chemolli:
</I>&gt;&gt;<i> See configure --max-filedescriptors
</I>&gt;<i> 
</I>&gt;<i> ...
</I>&gt;<i> configure: forcing default of 131072 filedescriptors (user-forced) 
</I>&gt;<i> checking Default FD_SETSIZE value... 1024 checking for getrlimit... 
</I>&gt;<i> yes checking for setrlimit... yes checking Maximum number of 
</I>&gt;<i> filedescriptors we can open... 32768
</I>&gt;<i> configure: Default number of filedescriptors: 131072 ...
</I>&gt;<i> 
</I>&gt;<i> Yes, I set &quot;ulimit -n 131072&quot; before running configure
</I>&gt;<i> 
</I>
The ./configure has a 2^15 limit for the _default_ FD number. Runtime should
allow configuring larger values later (sans bugs).


It also depends on the I/O module selected for runtime. Make sure you 
avoid select(2) and poll(2) for large FD numbers.

  select(2) is limited to 1024.
  poll(2) allows numbers large enough to hit RAM and CPU limits on speed.
  epoll(2) is limited to ~3.5 million.
  kqueue(2) is technically &quot;unlimited&quot; but YMMV regarding bugs etc.


Amos
_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024439.html">[squid-users] [ext] Re: Absolute upper limit for filedescriptors in squid-6?
</A></li>
	<LI>Next message (by thread): <A HREF="024441.html">[squid-users] [ext] Re: Absolute upper limit for filedescriptors in squid-6?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24440">[ date ]</a>
              <a href="thread.html#24440">[ thread ]</a>
              <a href="subject.html#24440">[ subject ]</a>
              <a href="author.html#24440">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
