<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] SQUID refuses to listen on any TCP Port
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SQUID%20refuses%20to%20listen%20on%20any%20TCP%20Port&In-Reply-To=%3C5625a031-aafe-2453-93a4-c0043bb5cf8e%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024603.html">
   <LINK REL="Next"  HREF="024605.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] SQUID refuses to listen on any TCP Port</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SQUID%20refuses%20to%20listen%20on%20any%20TCP%20Port&In-Reply-To=%3C5625a031-aafe-2453-93a4-c0043bb5cf8e%40measurement-factory.com%3E"
       TITLE="[squid-users] SQUID refuses to listen on any TCP Port">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Mar  3 14:52:22 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024603.html">[squid-users] SQUID refuses to listen on any TCP Port
</A></li>
        <LI>Next message (by thread): <A HREF="024605.html">[squid-users] SQUID refuses to listen on any TCP Port
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24604">[ date ]</a>
              <a href="thread.html#24604">[ thread ]</a>
              <a href="subject.html#24604">[ subject ]</a>
              <a href="author.html#24604">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 3/3/22 09:42, &#33487; &#26684; wrote:

&gt;<i> Yes, I checked the config again and I'm sure that's the config squid is 
</I>&gt;<i> running with
</I>
Your Squid output suggests that you are running an SMP Squid. That, in 
turn, suggests that you suffer from an SMP/IPC communication problem.

I suggest the following triage steps:

1. Move your Squid configuration file somewhere else for safekeeping.

2. Write a new configuration file with nothing but some garbage in it. 
For example, you can put an &quot;http_port XXX&quot; line and nothing else. Make 
sure you get a startup error with that configuration file. No Squid 
process should be running. If your Squid still starts OK, then you are 
not using the configuration file you think you are using.

3. Start Squid from the command line, using &quot;-N -d1 -f 
path/to/saved-configuration-file-from-item1.conf&quot; or similar command 
line options and see if you can get your Squid to listen that way. Share 
your results.


HTH,

Alex.




&gt;<i> netstat -tnlpe|grep :3128 failed to produce any output
</I>&gt;<i> 
</I>&gt;<i> Thank you for your help!
</I>&gt;<i> 
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i> *&#21457;&#20214;&#20154;:* squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; &#20195;&#34920; 
</I>&gt;<i> Matus UHLAR - fantomas &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">uhlar at fantomas.sk</A>&gt;
</I>&gt;<i> *&#21457;&#36865;&#26102;&#38388;:* 2022&#24180;3&#26376;3&#26085; 14:29
</I>&gt;<i> *&#25910;&#20214;&#20154;:* <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> 
</I>&gt;<i> &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i> *&#20027;&#39064;:* Re: [squid-users] SQUID refuses to listen on any TCP Port
</I>&gt;<i> On 03.03.22 13:56, &#33487; &#26684; wrote:
</I>&gt;&gt;<i>I tried using the default config. No difference
</I>&gt;<i> 
</I>&gt;<i> are you sure there's this line in the default config?
</I>&gt;<i> 
</I>&gt;<i> http_port 3128
</I>&gt;<i> 
</I>&gt;<i> are you sure there's nothing listening on 3128?
</I>&gt;<i> 
</I>&gt;<i> netstat -tnlpe|grep :3128
</I>&gt;<i> 
</I>&gt;&gt;<i>2022/03/03 21:49:17 kid1| Set Current Directory to /var/cache/squid
</I>&gt;&gt;<i>2022/03/03 21:49:17 kid1| Starting Squid Cache version 4.17 for x86_64-pc-linux-gnu...
</I>&gt;&gt;<i>2022/03/03 21:49:17 kid1| Service Name: squid
</I>&gt;&gt;<i>2022/03/03 21:49:17 kid1| Process ID 382776
</I>&gt;&gt;<i>2022/03/03 21:49:17 kid1| Process Roles: worker
</I>&gt;&gt;<i>2022/03/03 21:49:17 kid1| With 1024 file descriptors available
</I>&gt;&gt;<i>2022/03/03 21:49:17 kid1| Initializing IP Cache...
</I>&gt;&gt;<i>2022/03/03 21:49:17 kid1| DNS Socket created at [::], FD 5
</I>&gt;&gt;<i>2022/03/03 21:49:17 kid1| DNS Socket created at 0.0.0.0, FD 8
</I>&gt;&gt;<i>2022/03/03 21:49:17 kid1| Adding nameserver 8.8.8.8 from /etc/resolv.conf
</I>&gt;&gt;<i>2022/03/03 21:49:17 kid1| Logfile: opening log daemon:/var/log/access.log
</I>&gt;&gt;<i>2022/03/03 21:49:17 kid1| Logfile Daemon: opening log /var/log/access.log
</I>&gt;&gt;<i>2022/03/03 21:49:17 kid1| Local cache digest enabled; rebuild/rewrite every 3600/3600 sec
</I>&gt;&gt;<i>2022/03/03 21:49:17 kid1| Store logging disabled
</I>&gt;&gt;<i>2022/03/03 21:49:17 kid1| Swap maxSize 0 + 262144 KB, estimated 20164 objects
</I>&gt;&gt;<i>2022/03/03 21:49:17 kid1| Target number of buckets: 1008
</I>&gt;&gt;<i>2022/03/03 21:49:17 kid1| Using 8192 Store buckets
</I>&gt;&gt;<i>2022/03/03 21:49:17 kid1| Max Mem&#160; size: 262144 KB
</I>&gt;&gt;<i>2022/03/03 21:49:17 kid1| Max Swap size: 0 KB
</I>&gt;&gt;<i>2022/03/03 21:49:17 kid1| Using Least Load store dir selection
</I>&gt;&gt;<i>2022/03/03 21:49:17 kid1| Set Current Directory to /var/cache/squid
</I>&gt;&gt;<i>2022/03/03 21:49:17 kid1| Finished loading MIME types and icons.
</I>&gt;&gt;<i>2022/03/03 21:49:17 kid1| HTCP Disabled.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>netstat -tunpal shows
</I>&gt;&gt;<i> netstat -tunpal | grep squid
</I>&gt;&gt;<i>udp&#160;&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0 0.0.0.0:21638&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 0.0.0.0:*&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 382776/(squid-1)
</I>&gt;&gt;<i>udp6&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0 ::1:40383&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ::1:50900&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ESTABLISHED 382776/(squid-1)
</I>&gt;&gt;<i>udp6&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0 ::1:50900&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ::1:40383&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ESTABLISHED 382776/(squid-1)
</I>&gt;&gt;<i>udp6&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160; 0 :::15633&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; :::*&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 382776/(squid-1)
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Matus UHLAR - fantomas, <A HREF="https://lists.squid-cache.org/listinfo/squid-users">uhlar at fantomas.sk</A> ; <A HREF="http://www.fantomas.sk/">http://www.fantomas.sk/</A> 
</I>&gt;<i> &lt;<A HREF="http://www.fantomas.sk/">http://www.fantomas.sk/</A>&gt;
</I>&gt;<i> Warning: I wish NOT to receive e-mail advertising to this address.
</I>&gt;<i> Varovanie: na tuto adresu chcem NEDOSTAVAT akukolvek reklamnu postu.
</I>&gt;<i> I don't have lysdexia. The Dog wouldn't allow that.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A> 
</I>&gt;<i> &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024603.html">[squid-users] SQUID refuses to listen on any TCP Port
</A></li>
	<LI>Next message (by thread): <A HREF="024605.html">[squid-users] SQUID refuses to listen on any TCP Port
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24604">[ date ]</a>
              <a href="thread.html#24604">[ thread ]</a>
              <a href="subject.html#24604">[ subject ]</a>
              <a href="author.html#24604">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
