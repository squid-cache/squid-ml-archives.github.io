<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] SQUID refuses to listen on any TCP Port
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SQUID%20refuses%20to%20listen%20on%20any%20TCP%20Port&In-Reply-To=%3C2e950932-dc5a-dc9a-9347-9b254e0be6bc%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024654.html">
   <LINK REL="Next"  HREF="024613.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] SQUID refuses to listen on any TCP Port</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SQUID%20refuses%20to%20listen%20on%20any%20TCP%20Port&In-Reply-To=%3C2e950932-dc5a-dc9a-9347-9b254e0be6bc%40measurement-factory.com%3E"
       TITLE="[squid-users] SQUID refuses to listen on any TCP Port">rousskov at measurement-factory.com
       </A><BR>
    <I>Fri Mar  4 15:32:00 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024654.html">[squid-users] SQUID refuses to listen on any TCP Port
</A></li>
        <LI>Next message (by thread): <A HREF="024613.html">[squid-users] log UUID
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24614">[ date ]</a>
              <a href="thread.html#24614">[ thread ]</a>
              <a href="subject.html#24614">[ subject ]</a>
              <a href="author.html#24614">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 3/4/22 06:11, ben wrote:

&gt;<i> I've done this and uploaded the log. Please take a look at it. Thank you
</I>&gt;<i> <A HREF="https://www.dropbox.com/s/k8nwdjs7bly4exw/squid.log.gz">https://www.dropbox.com/s/k8nwdjs7bly4exw/squid.log.gz</A>
</I>
Did you wait a few seconds and then killed Squid? Or did Squid quit 
(i.e. gave back control to your terminal/console session) on its own?

It looks like your Squid process is being killed by something: The log 
is missing a debugging line that should have been there right after the 
last line logged. There are no particularly dangerous calls between 
those two debugging lines.

Can you start your Squid from gdb instead of the command line?

     sudo gdb --args squid -X -N -d9 -f ...
     (gdb) run

Alex.

&gt;&gt;<i> On 3/3/22 11:12, ben wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I tried your suggestions and it is the same result
</I>&gt;&gt;&gt;<i> first I deliberately put some erroreous config in squid.conff and it 
</I>&gt;&gt;&gt;<i> failed to start as a result.
</I>&gt;&gt;&gt;<i> When I ran it again by specifying the default config manually, it 
</I>&gt;&gt;&gt;<i> make no difference from before.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> There is a difference, but apparently not in the final outcome.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Please use the following or equivalent command to start your Squid 
</I>&gt;&gt;<i> with debugging enabled (-X), wait ~30 seconds, and then press 
</I>&gt;&gt;<i> Control-C (to kill the running Squid process if it is running), 
</I>&gt;&gt;<i> compress, and share a pointer to the resulting stderr output captured 
</I>&gt;&gt;<i> in the /tmp/debugging.log file.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160;&#160;&#160; squid -X -N -d9 -f /etc/squid/squid.conf.saved 2&gt; /tmp/debugging.log
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> It is best to use default Squid configuration for this triage in order 
</I>&gt;&gt;<i> to reduce the chances of sharing sensitive information in that 
</I>&gt;&gt;<i> debugging log.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Alex.
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> squid-users mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024654.html">[squid-users] SQUID refuses to listen on any TCP Port
</A></li>
	<LI>Next message (by thread): <A HREF="024613.html">[squid-users] log UUID
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24614">[ date ]</a>
              <a href="thread.html#24614">[ thread ]</a>
              <a href="subject.html#24614">[ subject ]</a>
              <a href="author.html#24614">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
