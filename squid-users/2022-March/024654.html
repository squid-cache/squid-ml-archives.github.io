<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] SQUID refuses to listen on any TCP Port
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SQUID%20refuses%20to%20listen%20on%20any%20TCP%20Port&In-Reply-To=%3C000e01d83781%24eef40cf0%24ccdc26d0%24%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024661.html">
   <LINK REL="Next"  HREF="024614.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] SQUID refuses to listen on any TCP Port</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SQUID%20refuses%20to%20listen%20on%20any%20TCP%20Port&In-Reply-To=%3C000e01d83781%24eef40cf0%24ccdc26d0%24%40gmail.com%3E"
       TITLE="[squid-users] SQUID refuses to listen on any TCP Port">ngtech1ltd at gmail.com
       </A><BR>
    <I>Mon Mar 14 09:00:18 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024661.html">[squid-users] SQUID refuses to listen on any TCP Port
</A></li>
        <LI>Next message (by thread): <A HREF="024614.html">[squid-users] SQUID refuses to listen on any TCP Port
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24654">[ date ]</a>
              <a href="thread.html#24654">[ thread ]</a>
              <a href="subject.html#24654">[ subject ]</a>
              <a href="author.html#24654">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Ben,

As I suspected it's the pinger that is causing this issue.
In my RPM builds it's disabled by defaults to avoid selinux complications.
I think it's a very special case you have found.
Try to use the:
pinger_enable off

and see if it fixes your issue.

All The Bests,
Eliezer

----
Eliezer Croitoru
NgTech, Tech Support
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>

-----Original Message-----
From: Eliezer Croitoru &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>&gt; 
Sent: Monday, March 14, 2022 10:49
To: '<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>' &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
Subject: RE: [squid-users] SQUID refuses to listen on any TCP Port

Hey Ben,

I do not know if it won't listen.
I can try to reproduce locally and see the results.
I assume it might be related to the pinger process or maybe something else but not 100% sure.

Eliezer

----
Eliezer Croitoru
NgTech, Tech Support
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>

-----Original Message-----
From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; On Behalf Of ben
Sent: Monday, March 14, 2022 06:43
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] SQUID refuses to listen on any TCP Port


Hi Eliezer,

SQUID started listening only after I run &quot;ip6tables -P INPUT ACCEPT&quot;. I 
had searched everywhere on the internet regarding this issue and no one 
mentioned that IPV6 iptables rules could stop squid from listening on 
TCP ports. And Squid just started without any complaint. To my limited 
knowledge, it seems no other software behaves like this?
    At first I was indeed suspecting that the issue is related to IPV6. 
I had tried recompiling SQUID without IPV6 and disabed IPV6 using 
sysctl.conf, nothing worked. It never occured to me that my IPV6 INPUT 
POLICY could be the culprit.
   Again, many thanks for your help
&gt;<i> Hey Ben,
</I>&gt;<i>
</I>&gt;<i> The next step in this situation is to try and connect with netcat from a
</I>&gt;<i> remote host and also locally.
</I>&gt;<i>  From what I understood the issue was a firewall issue so Squid was
</I>&gt;<i> listening.
</I>&gt;<i> I can also assume that squid was listening.
</I>&gt;<i> Just For future reference:
</I>&gt;<i> Try to run the next commands:
</I>&gt;<i> sudo netstat -ntlp
</I>&gt;<i> sudo ss -ntlp
</I>&gt;<i>
</I>&gt;<i> and send their output to us.
</I>&gt;<i> In ubuntu you will not see any &quot;squid&quot; when running plain netstat or ss.
</I>&gt;<i>
</I>&gt;<i> All The Bests,
</I>&gt;<i> Eliezer
</I>&gt;<i>
</I>&gt;<i> ----
</I>&gt;<i> Eliezer Croitoru
</I>&gt;<i> NgTech, Tech Support
</I>&gt;<i> Mobile: +972-5-28704261
</I>&gt;<i> Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>
</I>&gt;<i>
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; On Behalf Of
</I>&gt;<i> ben
</I>&gt;<i> Sent: Sunday, March 13, 2022 12:24
</I>&gt;<i> To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> Subject: Re: [squid-users] SQUID refuses to listen on any TCP Port
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> It looks like that if I start installing it right after OS installation,
</I>&gt;<i> it works. But not if I install any packages, for example, make,
</I>&gt;<i> gcc,strongswan and so on. once it stop working, it will not work anymore
</I>&gt;<i> even if I remove all aforementioned packages. reboot also doesn't help.
</I>&gt;<i> I also tried it on Debian 11. no luck either! it only works in old ubuntu 16
</I>&gt;<i> I can be 100% sure that squid is not listening on any TCP ports. running
</I>&gt;<i> these commands looks fine
</I>&gt;<i>
</I>&gt;<i> Thanks for your being patient and kind
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">root at host8d66c97880</A>:~# netcat -v -l -4 34568
</I>&gt;<i> Listening on 0.0.0.0 34568
</I>&gt;<i> ^C
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">root at host8d66c97880</A>:~# netcat -v -l -6 34568
</I>&gt;<i> Listening on :: 34568
</I>&gt;<i>
</I>&gt;<i> I configured it to listen on 34568
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> netcat -v -l -6 4444
</I>&gt;&gt;<i> netcat -v -l -4 4444
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024661.html">[squid-users] SQUID refuses to listen on any TCP Port
</A></li>
	<LI>Next message (by thread): <A HREF="024614.html">[squid-users] SQUID refuses to listen on any TCP Port
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24654">[ date ]</a>
              <a href="thread.html#24654">[ thread ]</a>
              <a href="subject.html#24654">[ subject ]</a>
              <a href="author.html#24654">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
