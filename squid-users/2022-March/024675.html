<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Reconfiguring Squid every few seconds
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Reconfiguring%20Squid%20every%20few%20seconds&In-Reply-To=%3C775aa04d-3aa3-e7b4-8dd0-c59541a8ac6b%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024674.html">
   <LINK REL="Next"  HREF="024676.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Reconfiguring Squid every few seconds</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Reconfiguring%20Squid%20every%20few%20seconds&In-Reply-To=%3C775aa04d-3aa3-e7b4-8dd0-c59541a8ac6b%40measurement-factory.com%3E"
       TITLE="[squid-users] Reconfiguring Squid every few seconds">rousskov at measurement-factory.com
       </A><BR>
    <I>Sat Mar 19 14:46:57 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024674.html">[squid-users] Reconfiguring Squid every few seconds
</A></li>
        <LI>Next message (by thread): <A HREF="024676.html">[squid-users] Reconfiguring Squid every few seconds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24675">[ date ]</a>
              <a href="thread.html#24675">[ thread ]</a>
              <a href="subject.html#24675">[ subject ]</a>
              <a href="author.html#24675">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 3/18/22 20:48, roee klinger wrote:

&gt;<i> I set up Squid to use the interfaces as follows:
</I>&gt;<i> 
</I>&gt;<i>     tcp_outgoing_address &lt;some_ip&gt;
</I>
&gt;<i> I will be running &quot;squid -k reconfigure&quot; multiple times a minute.
</I>
&gt;<i> Will this have a bad effect on Squid and traffic?
</I>
Yes, it will. Squid reconfiguration is a fairly heavy, disruptive event. 
FWIW, we are working on a smooth reconfiguration project that removes 
most of the negative side effects of reconfiguration.


&gt;<i> What is my alternative?
</I>
There are probably some routing solutions external to Squid, but I 
cannot recommend any specific one.

If you are looking for a Squid-specific solution, then hacking Squid 
sources to do what you want (without reconfiguration) feels like a 
viable short-term workaround. I also see two long-term solutions:

* Smooth reconfiguration: We have an ongoing project that makes Squid 
reconfigure just the changed configuration directives, without 
disrupting traffic. We can modify Squid to add the tcp_outgoing_address 
directive to the list of options that support smooth reconfiguration.

* Dynamic routing: Modify Squid to select the outgoing IP address based 
on dynamically computed addresses. The address configuration strings can 
be supplied by an external ACL helper or an adaptation service 
implementing your custom IP detection logic, including loading the new 
IP address from a file.


HTH,

Alex.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024674.html">[squid-users] Reconfiguring Squid every few seconds
</A></li>
	<LI>Next message (by thread): <A HREF="024676.html">[squid-users] Reconfiguring Squid every few seconds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24675">[ date ]</a>
              <a href="thread.html#24675">[ thread ]</a>
              <a href="subject.html#24675">[ subject ]</a>
              <a href="author.html#24675">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
