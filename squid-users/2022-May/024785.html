<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] is there a way to tell squid to write external ip even that external ip not attached into the machine ?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20is%20there%20a%20way%20to%20tell%20squid%20to%20write%20external%20ip%0A%20even%20that%20external%20ip%20not%20attached%20into%20the%20machine%20%3F&In-Reply-To=%3C000901d866e8%2429e3cb30%247dab6190%24%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024784.html">
   <LINK REL="Next"  HREF="024786.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] is there a way to tell squid to write external ip even that external ip not attached into the machine ?</H1>
    <B>Eliezer Croitoru</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20is%20there%20a%20way%20to%20tell%20squid%20to%20write%20external%20ip%0A%20even%20that%20external%20ip%20not%20attached%20into%20the%20machine%20%3F&In-Reply-To=%3C000901d866e8%2429e3cb30%247dab6190%24%40gmail.com%3E"
       TITLE="[squid-users] is there a way to tell squid to write external ip even that external ip not attached into the machine ?">ngtech1ltd at gmail.com
       </A><BR>
    <I>Fri May 13 16:40:31 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="024784.html">[squid-users] is there a way to tell squid to write external ip even that external ip not attached into the machine ?
</A></li>
        <LI>Next message (by thread): <A HREF="024786.html">[squid-users] disable https inspection for licensing some apps
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24785">[ date ]</a>
              <a href="thread.html#24785">[ thread ]</a>
              <a href="subject.html#24785">[ subject ]</a>
              <a href="author.html#24785">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Ahmad,

 

To be clear, a simple forward proxy that will fake the source IP address is
kind of a simple task with these days libraries.

I do not know your exact scenario and use case but it's possible to write
such a proxy in roughly 200 lines of code in Golang.
Take a peek at:

<A HREF="https://github.com/LiamHaworth/go-tproxy">https://github.com/LiamHaworth/go-tproxy</A>

 

It's a nice library for tproxy alone.

Squid is great but if you will touch any source code it's possible that
you'd better write your own customized proxy.

 

Good Luck,

Eliezer

 

----

Eliezer Croitoru

NgTech, Tech Support

Mobile: +972-5-28704261

Email:  &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>&gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>

 

From: Ahmad Alzaeem &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">0xff1f at gmail.com</A>&gt; 
Sent: Friday, May 13, 2022 18:34
To: Eliezer Croitoru &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>&gt;;
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] is there a way to tell squid to write external ip
even that external ip not attached into the machine ?

 

Hello Eliezer

I thought it could be done by editing squid src file  like to skip inet
address lookup .

 

Thanks 

 

 

From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>
&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; &gt; on behalf of Eliezer
Croitoru &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>&gt; &gt;
Date: Friday, May 13, 2022 at 8:21 AM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
&lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt; &gt;
Subject: Re: [squid-users] is there a way to tell squid to write external ip
even that external ip not attached into the machine ?

Hey Ahmad,

 

You should use a tproxy port with a PROXY protocol support and acls.

With these you can try to push traffic to the network from a local process
that will write the right details to squid that will generate a fake source
ip.


And since you have asked I assume you are not familiar enough with this kind
of setup so it's crucial you will understand what are doing
before trying and testing it since at might not work as you expect.

 

All The Bests,

Eliezer

 

----

Eliezer Croitoru

NgTech, Tech Support

Mobile: +972-5-28704261

Email:  &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>&gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>

 

From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>
&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; &gt; On Behalf Of Ahmad
Alzaeem
Sent: Friday, May 13, 2022 16:13
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt; ; Amos Jeffries
&lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt; &gt;
Subject: [squid-users] is there a way to tell squid to write external ip
even that external ip not attached into the machine ?

 

 

Hello Guys ,

We are testing squid with a project such as we need squid to write and
proceed with tcp_outgoing address address even its not attached to the
machine by ifconfig or ip add  ?

 

After some tests we found that squid wont write the external Ip to be pushed
out the network card interface if the ip address is not added to the machine
.

 

Is there anyway to bypass this checkout and let squid ignore checking the
external ips if attached or not attached ?

Not sure if from config or may be editing src files .

 

 

Many Thanks 

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20220513/19a5fafe/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20220513/19a5fafe/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="024784.html">[squid-users] is there a way to tell squid to write external ip even that external ip not attached into the machine ?
</A></li>
	<LI>Next message (by thread): <A HREF="024786.html">[squid-users] disable https inspection for licensing some apps
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24785">[ date ]</a>
              <a href="thread.html#24785">[ thread ]</a>
              <a href="subject.html#24785">[ subject ]</a>
              <a href="author.html#24785">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
