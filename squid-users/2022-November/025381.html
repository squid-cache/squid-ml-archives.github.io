<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Does Squid support client ssl termination?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Does%20Squid%20support%20client%20ssl%20termination%3F&In-Reply-To=%3Ca580846c-5341-a3a9-9e71-e83d0181ca35%40spamtrap.tnetconsulting.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025375.html">
   <LINK REL="Next"  HREF="025395.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Does Squid support client ssl termination?</H1>
    <B>Grant Taylor</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Does%20Squid%20support%20client%20ssl%20termination%3F&In-Reply-To=%3Ca580846c-5341-a3a9-9e71-e83d0181ca35%40spamtrap.tnetconsulting.net%3E"
       TITLE="[squid-users] Does Squid support client ssl termination?">gtaylor at tnetconsulting.net
       </A><BR>
    <I>Wed Nov  2 15:13:52 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="025375.html">[squid-users] Does Squid support client ssl termination?
</A></li>
        <LI>Next message (by thread): <A HREF="025395.html">[squid-users] Does Squid support client ssl termination?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25381">[ date ]</a>
              <a href="thread.html#25381">[ thread ]</a>
              <a href="subject.html#25381">[ subject ]</a>
              <a href="author.html#25381">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/1/22 4:17 PM, <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A> wrote:
&gt;<i> Yes I was addressing mingheng's statement.
</I>
Thank you for clarifying.

&gt;<i> The first thing you need to do is avoid that &quot;HTTPS&quot; term. It has 
</I>&gt;<i> multiple meanings and they cause confusion. Instead decompose it into 
</I>&gt;<i> its TLS and HTTP layers.
</I>
Largely okay.

However, a minor nitpick:  TCP, TLS, and HTTP are three distinct things.

TCP is the traditional transport.
TLS is the optional presentation layer that rides on top of TCP.
HTTP is the application layer protocol that's spoken between endpoints 
which rides on top of TLS if present or TCP if TLS is not present.

N.B. I'm eliding UDP / QUIC.

&gt;<i> * A client can use TCP or TLS to connect to a proxy.
</I>&gt;<i>  &#160;- this is configured with http_port vs https_port
</I>&gt;<i> 
</I>&gt;<i> * Independently of the connection type the client can request <A HREF="http://">http://</A> or 
</I>&gt;<i> <A HREF="https://">https://</A> URLs or CONNECT tunnels.
</I>
Do you have any recommendation of clarifying / consistent terms for 
using to describe the connection between the client and the proxy with 
the goal of differentiating it from the connection between the proxy and 
the server?

I'll argue, but be open to arguments to the contrary, that both 
connections are using the HTTP application layer protocol on top of 
whatever transport is being used; TCP or TCP+TLS.

&gt;<i> * Independent of what the client is doing/requesting, a cache_peer may 
</I>&gt;<i> be connected to using TCP or TLS.
</I>&gt;<i>  &#160;- this is configured with cache_peer tls options (or their absence)
</I>&gt;<i> 
</I>&gt;<i> * Independent of anything else, a cache_peer MAY be asked to open a 
</I>&gt;<i> CONNECT tunnel for opaque uses.
</I>&gt;<i>  &#160;- this is automatically decided by Squid based on various criteria.
</I>
Oy vey!

I had forgotten about using HTTP's CONNECT to carry non-HTTP traffic.

&gt;<i> TCP is the foundation layer. On top of that can be HTTP transfer or TLS 
</I>&gt;<i> transfer. Transfer layers can be nested infinitely deep in any order.
</I>
I'm avoiding -- what I've seen referenced as -- &quot;chaining&quot; for this 
discussion.

I'm focusing on the what traditional web browsers / clients support out 
of the box; client-to-proxy and proxy-to-server.

After all, even when chaining is in scope, the chained / down stream 
proxy is really functioning as the server that the first / upstream 
proxy connects to.  Thus it's really higher layer traffic as far as the 
first / upstream proxy is concerned.

&gt;<i> So &quot;HTTPS&quot; can mean any one of things like:
</I>&gt;<i>  &#160;1) HTTP-over-TLS (how Browsers handle <A HREF="https://">https://</A> URLs)
</I>&gt;<i>  &#160;2) HTTP-over-TLS (sending <A HREF="http://">http://</A> URLs over a secure connection)
</I>&gt;<i>  &#160;3) HTTP-over-TLS-over-TLS (relay (1) through a secure cache_peer)
</I>&gt;<i>  &#160;4) HTTP-over-TLS-over-HTTP (relay (1), (2) or (3) through an insecure 
</I>&gt;<i> cache_peer via CONNECT tunnel)
</I>
Hence my question about nomenclature.

...really big snip...

&gt;<i> Vaguely yes. There are three dimensions to the matrix, you only have two 
</I>&gt;<i> shown here.
</I>
Please elaborate.  I'm not following what the 3rd dimension would be 
with the small amount of coffee that I've had.

&gt;<i> The box showing &quot;unsupported&quot; has &quot;supported&quot; in its other dimension.
</I>
I'll wait for your elaboration and to finish my coffee before trying to 
understand that.  Also, $WORK beckons.



-- 
Grant. . . .
unix || die

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4017 bytes
Desc: S/MIME Cryptographic Signature
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20221102/bb47b21a/attachment.bin">http://lists.squid-cache.org/pipermail/squid-users/attachments/20221102/bb47b21a/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="025375.html">[squid-users] Does Squid support client ssl termination?
</A></li>
	<LI>Next message (by thread): <A HREF="025395.html">[squid-users] Does Squid support client ssl termination?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25381">[ date ]</a>
              <a href="thread.html#25381">[ thread ]</a>
              <a href="subject.html#25381">[ subject ]</a>
              <a href="author.html#25381">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
