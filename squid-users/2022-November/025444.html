<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 5: server_cert_fingerprint not working fine...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%205%3A%20server_cert_fingerprint%20not%20working%0A%20fine...&In-Reply-To=%3C69e50488-3006-0e8b-6b7e-c4b48d76801e%40articatech.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025443.html">
   <LINK REL="Next"  HREF="025452.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 5: server_cert_fingerprint not working fine...</H1>
    <B>David Touzeau</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%205%3A%20server_cert_fingerprint%20not%20working%0A%20fine...&In-Reply-To=%3C69e50488-3006-0e8b-6b7e-c4b48d76801e%40articatech.com%3E"
       TITLE="[squid-users] Squid 5: server_cert_fingerprint not working fine...">david at articatech.com
       </A><BR>
    <I>Sat Nov 19 18:19:20 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="025443.html">[squid-users] Squid 5: server_cert_fingerprint not working fine...
</A></li>
        <LI>Next message (by thread): <A HREF="025452.html">[squid-users] [SPAM] Re: Squid 5: server_cert_fingerprint not working fine...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25444">[ date ]</a>
              <a href="thread.html#25444">[ thread ]</a>
              <a href="subject.html#25444">[ subject ]</a>
              <a href="author.html#25444">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks Amos for this clarification,

We also have the same needs and indeed, we face with the same approach.

It is possible that the structure of Squid could not, in some cases, 
recovering this type of information.
Although the concept of a proxy is neither more nor less than a big 
browser that surfs instead of the client browsers.

The SHA1 and certificate information reception are very valuable because 
it ensures better detection of compromised sites (many malicious sites 
use the same information in their certificates).
This allows detecting &quot;nests&quot; of malicious sites automatically.

Unfortunately, there is madness in the approach to security, there is a 
race to strengthen the security of tunnels (produced by Google and 
browsers vendors).
What is the advantage of encrypting wikipedia and Youtube channels?

On the other hand, it is crucial to look inside these streams to detect 
threats.
This is antinomic...

So TLS 1.3 and soon the use of QUIC with UDP 80/443 will make use of a 
proxy useless as these features are rolled out&#160; (trust Google to 
motivate them)
Unless the proxy manages to follow this protocol madness race...

For this reason, firewall manufacturers propose the use of client 
software that fills the gap of protocol visibility in their gateway 
products or you -can see a growth of workstation protections , such EDR 
concept

Just an ideological and non-technical approach...

Regards

Le 19/11/2022 &#224; 16:50, Amos Jeffries a &#233;crit&#160;:
&gt;<i> On 19/11/2022 2:55 am, UnveilTech - Support wrote:
</I>&gt;&gt;<i> Hi Amos,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> We have tested with a &quot;ssl_bump bump&quot; (&quot;ssl_bump all&quot; and &quot;ssl_bump 
</I>&gt;&gt;<i> bump sslstep1&quot;), it does not solve the problem.
</I>&gt;&gt;<i> According to Alex, we can also confirm it's a bug with Squid 5.x and 
</I>&gt;&gt;<i> TLS 1.3.
</I>&gt;<i>
</I>&gt;<i> Okay.
</I>&gt;<i>
</I>&gt;&gt;<i> It seems Squid is only compatible with TLS 1.2, it's not good for the 
</I>&gt;&gt;<i> future...
</I>&gt;<i>
</I>&gt;<i> One bug (or lack of ability) does not make the entire protocol 
</I>&gt;<i> &quot;incompatible&quot;. It only affects people trying to do the particular 
</I>&gt;<i> buggy action.
</I>&gt;<i> Unfortunately for you (and others) it happens to be accessing this 
</I>&gt;<i> server cert fingerprint.
</I>&gt;<i>
</I>&gt;<i> I/we have been clear from the beginning that *when used properly* 
</I>&gt;<i> TLS/SSL cannot be &quot;bump&quot;ed - that is true for all versions of TLS and 
</I>&gt;<i> SSL before it. In that same &quot;bump&quot; use-case the server does not 
</I>&gt;<i> provide *any* details, it just rejects the proxy attempted connection. 
</I>&gt;<i> In some paranoid security environments the server can reject even for 
</I>&gt;<i> &quot;splice&quot; when the clientHello is passed on unchanged by the proxy. 
</I>&gt;<i> HTTPS use on the web is typically *neither* of those &quot;proper&quot; setups 
</I>&gt;<i> so SSL-Bump &quot;bump&quot; in general works and &quot;splice&quot; almost always.
</I>&gt;<i>
</I>&gt;<i> Cheers
</I>&gt;<i> Amos
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20221119/0d1ebef4/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20221119/0d1ebef4/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="025443.html">[squid-users] Squid 5: server_cert_fingerprint not working fine...
</A></li>
	<LI>Next message (by thread): <A HREF="025452.html">[squid-users] [SPAM] Re: Squid 5: server_cert_fingerprint not working fine...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25444">[ date ]</a>
              <a href="thread.html#25444">[ thread ]</a>
              <a href="subject.html#25444">[ subject ]</a>
              <a href="author.html#25444">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
