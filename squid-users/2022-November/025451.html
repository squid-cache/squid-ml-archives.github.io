<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Scaling concurrent TCP sessions beyond ephemeral port range
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Scaling%20concurrent%20TCP%20sessions%20beyond%20ephemeral%0A%20port%20range&In-Reply-To=%3C984bcb90-05cd-fb2b-5955-59593219c10e%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025450.html">
   <LINK REL="Next"  HREF="025454.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Scaling concurrent TCP sessions beyond ephemeral port range</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Scaling%20concurrent%20TCP%20sessions%20beyond%20ephemeral%0A%20port%20range&In-Reply-To=%3C984bcb90-05cd-fb2b-5955-59593219c10e%40measurement-factory.com%3E"
       TITLE="[squid-users] Scaling concurrent TCP sessions beyond ephemeral port range">rousskov at measurement-factory.com
       </A><BR>
    <I>Wed Nov 23 03:58:31 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="025450.html">[squid-users] Scaling concurrent TCP sessions beyond ephemeral port range
</A></li>
        <LI>Next message (by thread): <A HREF="025454.html">[squid-users] Scaling concurrent TCP sessions beyond ephemeral port range
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25451">[ date ]</a>
              <a href="thread.html#25451">[ thread ]</a>
              <a href="subject.html#25451">[ subject ]</a>
              <a href="author.html#25451">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/22/22 21:06, Praveen Ponakanti wrote:

&gt;<i> Do we have a recent squid ver 6 snapshot build available for testing? 
</I>
Sorry, I do not know the exact answer to your question. One can 
certainly build master/v6 from git sources, of course.


&gt;<i> The following config knobs were tried and did not make much of a 
</I>&gt;<i> difference with respect to concurrent outbound TLS sessions across the 
</I>&gt;<i> workers.
</I>
I can only speculate that there is a Squid bug that prevents workers 
from using (or sharing) the TLS session cache OR your traffic patterns 
do not allow (much) sharing OR your TLS session cache is too small for 
those traffic patterns. Lot's of possibilities here!


&gt;<i> The docs say the default sslproxy_session_cache_size is 2 MB, 
</I>&gt;<i> how high can we go?
</I>
I have not tested this, but, bugs notwithstanding, I would expect you to 
be able to go as high as the maximum shared memory segment size in your 
environment (e.g., see sysctl kernel.shmax). The entire cache must fit 
into a single shared memory segment IIRC. It certainly does not hurt to 
try 100 MB if you already tried 10 MB. Squid should complain if it 
cannot allocate a segment of the specified size.


&gt;<i> Are there any other knobs we can try to improve 
</I>&gt;<i> session reuse for HTTPS reqs ? (without enabling squid cache)
</I>
FWIW, I would try to understand _why_ sessions are not shared (enough) 
in the first place, especially if increasing sslproxy_session_cache_size 
value does not result in session cache hit ratio increase while there 
are still many false cache misses. I do not know whether anybody is 
paying a lot of attention to that cache in production, but the 
corresponding Squid code is not tested by the Squid Project CI (yet?).

Also, there are different kinds of TLS session reuse. It is possible 
that the sessions you want to reuse are not supported by the Squid 
session cache. Unfortunately, I do not remember enough details to tell 
you more, but one can set up a controlled test and see what is actually 
going on.


HTH,

Alex.


&gt;<i> sslproxy_session_cache_size 10 MB
</I>&gt;<i> tls_outgoing_options options=NO_TICKET
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     &gt; Agree, it might not make sense to increase the complexity with sharing
</I>&gt;<i>     &gt; socket among the workers. Was thinking more on the lines of a hashmap
</I>&gt;<i>     &gt; that the coordinator could use to pick workers that already have a TCP
</I>&gt;<i>     &gt; connection to the destination being requested, instead of having the
</I>&gt;<i>     &gt; workers themselves share connection details.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     Coordinator does not receive/see regular HTTP traffic. If we start
</I>&gt;<i>     routing HTTP transactions through that process, it may become the
</I>&gt;<i>     bottleneck itself _and_ will introduce additional overheads for passing
</I>&gt;<i>     descriptors to workers. From performance point of view, the model with
</I>&gt;<i>     one &quot;routing&quot; task doling work to workers works best (and is commonly
</I>&gt;<i>     used) in threaded applications, but Squid is not threaded at that level.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>      &gt; Most of the TCP connections are for HTTPS reqs, w/o TLS
</I>&gt;<i>     termination at
</I>&gt;<i>      &gt; the squid. Does squid currently support a TLS session cache ?
</I>&gt;<i> 
</I>&gt;<i>     Yes, there is some support for worker-specific TLS session caching,
</I>&gt;<i>     with
</I>&gt;<i>     directives like sslproxy_session_cache_size, tls_outgoing_options
</I>&gt;<i>     options=NO_TICKET (for outgoing sessions IIRC) and https_port
</I>&gt;<i>     sslflags=NO_SESSION_REUSE and https_port sslcontext (for incoming
</I>&gt;<i>     sessions).
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     HTH,
</I>&gt;<i> 
</I>&gt;<i>     Alex.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>      &gt;&#160; &#160; &#160;If you are dealing with TLS sessions as well, then we should
</I>&gt;<i>     add a
</I>&gt;<i>      &gt;&#160; &#160; &#160;shared memory TLS session cache that all workers can tap into.
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;Cheers,
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;Alex.
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; On Tue, Jun 21, 2022 at 2:11 PM Alex Rousskov wrote:
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;On 6/19/22 12:48, Praveen Ponakanti wrote:
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; What is the process to have this code patch
</I>&gt;<i>     upstreamed for
</I>&gt;<i>      &gt;&#160; &#160; &#160;future
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;squid
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; versions?
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;In short, just post a quality pull request on GitHub
</I>&gt;<i>     (or find
</I>&gt;<i>      &gt;&#160; &#160; &#160;somebody
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;who can guide your code towards official acceptance
</I>&gt;<i>     for you). For
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;details, please see
</I>&gt;<i>      &gt; <A HREF="https://wiki.squid-cache.org/MergeProcedure">https://wiki.squid-cache.org/MergeProcedure</A>
</I>&gt;<i>     &lt;<A HREF="https://wiki.squid-cache.org/MergeProcedure">https://wiki.squid-cache.org/MergeProcedure</A>&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;&lt;<A HREF="https://wiki.squid-cache.org/MergeProcedure">https://wiki.squid-cache.org/MergeProcedure</A>
</I>&gt;<i>     &lt;<A HREF="https://wiki.squid-cache.org/MergeProcedure">https://wiki.squid-cache.org/MergeProcedure</A>&gt;&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;&lt;<A HREF="https://wiki.squid-cache.org/MergeProcedure">https://wiki.squid-cache.org/MergeProcedure</A>
</I>&gt;<i>     &lt;<A HREF="https://wiki.squid-cache.org/MergeProcedure">https://wiki.squid-cache.org/MergeProcedure</A>&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;&lt;<A HREF="https://wiki.squid-cache.org/MergeProcedure">https://wiki.squid-cache.org/MergeProcedure</A>
</I>&gt;<i>     &lt;<A HREF="https://wiki.squid-cache.org/MergeProcedure">https://wiki.squid-cache.org/MergeProcedure</A>&gt;&gt;&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;Thank you,
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;Alex.
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; On Fri, May 20, 2022 at 9:31 PM Amos Jeffries
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;&lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;&gt;&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; wrote:
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;On 20/05/22 19:44, Praveen Ponakanti wrote:
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; Hi Alex,
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; Thanks for going through several steps to
</I>&gt;<i>     help mitigate
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;src port
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; exhaustion. We are looking to achieve
</I>&gt;<i>     400-500% more
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; concurrent&#160;connections if we could :) as
</I>&gt;<i>     there is a
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;significant&#160;buffer
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; on the available CPU.
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;Then you require at least 4, maybe 5, IP
</I>&gt;<i>     addresses to
</I>&gt;<i>      &gt;&#160; &#160; &#160;handle
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;that many
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;concurrent connections with Squid.
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; We would like to investigate going beyond the
</I>&gt;<i>     ephemeral port
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;range for
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; some specific destination IP:PORT addresses. For
</I>&gt;<i>     that it
</I>&gt;<i>      &gt;&#160; &#160; &#160;appears
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;squid
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; does not round-robin requests if we use multiple
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;tcp_outgoing_addresses.
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; We could use ACL&#8217;s to pick a different outbound IP
</I>&gt;<i>     based
</I>&gt;<i>      &gt;&#160; &#160; &#160;on the
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;clients
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; source IP, however that is not very ideal in our
</I>&gt;<i>      &gt;&#160; &#160; &#160;environment as our
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; clients aren&#8217;t always equally split by subnet.
</I>&gt;<i>     However, if
</I>&gt;<i>      &gt;&#160; &#160; &#160;we could
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; split by the client&#8217;s source port that might help
</I>&gt;<i>     achieve
</I>&gt;<i>      &gt;&#160; &#160; &#160;this. For
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; example something like:
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; acl pool1 clientport 0-32768
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; acl pool2 clientport 32769-65536
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; tcp_outgoing_address 10.1.0.1 pool1
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; tcp_outgoing_address 10.1.0.2 pool2
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; Squid's ACLs currently do not allow filtering by the
</I>&gt;<i>      &gt;&#160; &#160; &#160;client's source
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; port. We could look into a separate patch to add this
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;functionality to
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; squid&#8217;s ACL code if that makes sense. Or is there a
</I>&gt;<i>     better
</I>&gt;<i>      &gt;&#160; &#160; &#160;way to
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; achieve this?
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; Thanks
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; Praveen
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; The option to use multiple tcp_outoing_addresses
</I>&gt;<i>      &gt;&#160; &#160; &#160;appears to be
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;promising
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; along with some tweaks to the TCP timeouts.
</I>&gt;<i>     I guess we
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;could use
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;ACLs to
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; pick a different outbound IP based on the
</I>&gt;<i>      &gt;&#160; &#160; &#160;requesting client's
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;prefix. We
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; had not considered that option as the ephemeral
</I>&gt;<i>      &gt;&#160; &#160; &#160;ports were
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;no longer
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; available&#160;to other applications when squid
</I>&gt;<i>     uses most of
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;them with a
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; single outbound IP configured. We are also
</I>&gt;<i>     looking to
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;modify the
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;code to
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; use the IP_BIND_ADDRESS_NO_PORT sockopt as that
</I>&gt;<i>      &gt;&#160; &#160; &#160;could help
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;delay
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;port
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; assignment with the bind() call on the
</I>&gt;<i>     outbound TCP
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;sessions (to
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; hopefully allow access to the 4-tuple on the
</I>&gt;<i>     socket).
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;Patches welcome.
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;However, please be aware that use of the 4-tuple is
</I>&gt;<i>      &gt;&#160; &#160; &#160;often no
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;different
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;from the 3-tuple since the dst-port is
</I>&gt;<i>     typically identical
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;for all
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;outgoing traffic to a given dst-IP.
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;Cheers
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;Amos
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="025450.html">[squid-users] Scaling concurrent TCP sessions beyond ephemeral port range
</A></li>
	<LI>Next message (by thread): <A HREF="025454.html">[squid-users] Scaling concurrent TCP sessions beyond ephemeral port range
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25451">[ date ]</a>
              <a href="thread.html#25451">[ thread ]</a>
              <a href="subject.html#25451">[ subject ]</a>
              <a href="author.html#25451">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
