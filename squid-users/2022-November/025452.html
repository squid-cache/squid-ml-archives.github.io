<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] [SPAM] Re: Squid 5: server_cert_fingerprint not working fine...
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%5BSPAM%5D%20Re%3A%20Squid%205%3A%20server_cert_fingerprint%20not%0A%20working%20fine...&In-Reply-To=%3Cf1adf0a84faa4585a7f4ed8ffdf18669%40unveiltech.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025444.html">
   <LINK REL="Next"  HREF="025438.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] [SPAM] Re: Squid 5: server_cert_fingerprint not working fine...</H1>
    <B>UnveilTech - Support</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%5BSPAM%5D%20Re%3A%20Squid%205%3A%20server_cert_fingerprint%20not%0A%20working%20fine...&In-Reply-To=%3Cf1adf0a84faa4585a7f4ed8ffdf18669%40unveiltech.com%3E"
       TITLE="[squid-users] [SPAM] Re: Squid 5: server_cert_fingerprint not working fine...">support at unveiltech.com
       </A><BR>
    <I>Wed Nov 23 12:59:25 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="025444.html">[squid-users] Squid 5: server_cert_fingerprint not working fine...
</A></li>
        <LI>Next message (by thread): <A HREF="025438.html">[squid-users] Squid 5: server_cert_fingerprint not working fine...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25452">[ date ]</a>
              <a href="thread.html#25452">[ thread ]</a>
              <a href="subject.html#25452">[ subject ]</a>
              <a href="author.html#25452">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Amos,

For your information, sslcrtvalidator_program is also not compatible with TLS1.3.
We have done dozen of tests and we only get TLS1.2 information with sslcrtvalidator_program.

My &#171; question-conclusion &#187; &#171;  could be ridiculous but the imcompability is here a fact, sorry for that.
Instead a PHP helper we have build a C++ helper (300 lines including comments) and we can also work with TLS1.3 by using basis OpenSSL functions, we suppose the same the Squid uses&#8230;

PS : OpenSSL is the same we use to compile Squid 5.7.

Ye Fred

De : squid-users [mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>] De la part de David Touzeau
Envoy&#233; : samedi 19 novembre 2022 19:19
&#192; : <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Objet : [SPAM] Re: [squid-users] Squid 5: server_cert_fingerprint not working fine...

Thanks Amos for this clarification,

We also have the same needs and indeed, we face with the same approach.

It is possible that the structure of Squid could not, in some cases, recovering this type of information.
Although the concept of a proxy is neither more nor less than a big browser that surfs instead of the client browsers.

The SHA1 and certificate information reception are very valuable because it ensures better detection of compromised sites (many malicious sites use the same information in their certificates).
This allows detecting &quot;nests&quot; of malicious sites automatically.

Unfortunately, there is madness in the approach to security, there is a race to strengthen the security of tunnels (produced by Google and browsers vendors).
What is the advantage of encrypting wikipedia and Youtube channels?

On the other hand, it is crucial to look inside these streams to detect threats.
This is antinomic...

So TLS 1.3 and soon the use of QUIC with UDP 80/443 will make use of a proxy useless as these features are rolled out  (trust Google to motivate them)
Unless the proxy manages to follow this protocol madness race...

For this reason, firewall manufacturers propose the use of client software that fills the gap of protocol visibility in their gateway products or you -can see a growth of workstation protections , such EDR concept

Just an ideological and non-technical approach...

Regards
Le 19/11/2022 &#224; 16:50, Amos Jeffries a &#233;crit :
On 19/11/2022 2:55 am, UnveilTech - Support wrote:

Hi Amos,

We have tested with a &quot;ssl_bump bump&quot; (&quot;ssl_bump all&quot; and &quot;ssl_bump bump sslstep1&quot;), it does not solve the problem.
According to Alex, we can also confirm it's a bug with Squid 5.x and TLS 1.3.

Okay.


It seems Squid is only compatible with TLS 1.2, it's not good for the future...

One bug (or lack of ability) does not make the entire protocol &quot;incompatible&quot;. It only affects people trying to do the particular buggy action.
Unfortunately for you (and others) it happens to be accessing this server cert fingerprint.

I/we have been clear from the beginning that *when used properly* TLS/SSL cannot be &quot;bump&quot;ed - that is true for all versions of TLS and SSL before it. In that same &quot;bump&quot; use-case the server does not provide *any* details, it just rejects the proxy attempted connection. In some paranoid security environments the server can reject even for &quot;splice&quot; when the clientHello is passed on unchanged by the proxy. HTTPS use on the web is typically *neither* of those &quot;proper&quot; setups so SSL-Bump &quot;bump&quot; in general works and &quot;splice&quot; almost always.

Cheers
Amos

_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20221123/fd528bb1/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20221123/fd528bb1/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="025444.html">[squid-users] Squid 5: server_cert_fingerprint not working fine...
</A></li>
	<LI>Next message (by thread): <A HREF="025438.html">[squid-users] Squid 5: server_cert_fingerprint not working fine...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25452">[ date ]</a>
              <a href="thread.html#25452">[ thread ]</a>
              <a href="subject.html#25452">[ subject ]</a>
              <a href="author.html#25452">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
