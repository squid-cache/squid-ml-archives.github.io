<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid exiting on signal 6
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20exiting%20on%20signal%206&In-Reply-To=%3C86mta1pijq.fsf%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025295.html">
   <LINK REL="Next"  HREF="025294.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid exiting on signal 6</H1>
    <B>Ludovit Koren</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%20exiting%20on%20signal%206&In-Reply-To=%3C86mta1pijq.fsf%40gmail.com%3E"
       TITLE="[squid-users] squid exiting on signal 6">ludovit.koren at gmail.com
       </A><BR>
    <I>Wed Oct 12 08:12:09 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="025295.html">[squid-users] rejecting CONNECT if Proxy-Authentication header is sent but not required
</A></li>
        <LI>Next message (by thread): <A HREF="025294.html">[squid-users] squid exiting on signal 6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25293">[ date ]</a>
              <a href="thread.html#25293">[ thread ]</a>
              <a href="subject.html#25293">[ subject ]</a>
              <a href="author.html#25293">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi,

I am running squid-5.7 on FreeBSD 12.3-STABLE r371879. Occasionally I
get the following error:

Oct 12 09:40:59 xxxxx kernel: pid 88291 (squid), jid 0, uid 100: exited on signal 6 (core dumped)
Oct 12 09:40:59 xxxxx squid[76820]: Squid Parent: squid-1 process 88291 exited due to signal 6 with status 0
Oct 12 09:40:59 xxxxx squid[76820]: Squid Parent: (squid-1) process 89357 started

&gt;<i>From backtrace I get:
</I>
gdb /usr/local/sbin/squid squid.core 
GNU gdb (GDB) 12.1 [GDB v12.1 for FreeBSD]
Copyright (C) 2022 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;<A HREF="http://gnu.org/licenses/gpl.html">http://gnu.org/licenses/gpl.html</A>&gt;
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
Type &quot;show copying&quot; and &quot;show warranty&quot; for details.
This GDB was configured as &quot;x86_64-portbld-freebsd12.3&quot;.
Type &quot;show configuration&quot; for configuration details.
For bug reporting instructions, please see:
&lt;<A HREF="https://www.gnu.org/software/gdb/bugs/">https://www.gnu.org/software/gdb/bugs/</A>&gt;.
Find the GDB manual and other documentation resources online at:
    &lt;<A HREF="http://www.gnu.org/software/gdb/documentation/">http://www.gnu.org/software/gdb/documentation/</A>&gt;.

For help, type &quot;help&quot;.
Type &quot;apropos word&quot; to search for commands related to &quot;word&quot;...
Reading symbols from /usr/local/sbin/squid...
[New LWP 102541]
Core was generated by `(squid-1) --kid squid-1 -f /usr/local/etc/squid/squid.conf'.
Program terminated with signal SIGABRT, Aborted.
Sent by thr_kill() from pid 88291 and user 100.
#0  thr_kill () at thr_kill.S:3
3       RSYSCALL(thr_kill)
(gdb) bt
#0  thr_kill () at thr_kill.S:3
#1  0x000000080112fd44 in __raise (s=<A HREF="https://lists.squid-cache.org/listinfo/squid-users">s at entry</A>=6) at /usr/src/lib/libc/gen/raise.c:52
#2  0x00000008010a8409 in abort () at /usr/src/lib/libc/stdlib/abort.c:67
#3  0x000000080111fcb1 in __assert (func=&lt;optimized out&gt;, file=&lt;optimized out&gt;, line=&lt;optimized out&gt;, failedexpr=&lt;optimized out&gt;) at /usr/src/lib/libc/gen/assert.c:51
#4  0x0000000000698fcd in Ip::Address::getAddrInfo (this=0x861c04588, dst=&lt;optimized out&gt;, force=0) at Address.cc:663
#5  0x000000000068b732 in comm_openex (sock_type=<A HREF="https://lists.squid-cache.org/listinfo/squid-users">sock_type at entry</A>=1, proto=<A HREF="https://lists.squid-cache.org/listinfo/squid-users">proto at entry</A>=6, addr=..., flags=1, note=0x85ce42dc0 &quot;[fe80::21f:29ff:fe28:7017]&quot;) at comm.cc:347
#6  0x00000000006dcdb9 in Comm::ConnOpener::createFd (this=<A HREF="https://lists.squid-cache.org/listinfo/squid-users">this at entry</A>=0x85e66b8b8) at ConnOpener.cc:288
#7  0x00000000006dcb72 in Comm::ConnOpener::start (this=0x85e66b8b8) at ConnOpener.cc:261
#8  0x0000000000682294 in JobDialer&lt;AsyncJob&gt;::dial (this=0x85390c798, call=...) at ../../src/base/AsyncJobCalls.h:175
#9  0x000000000067e9bb in AsyncCall::make (this=0x85390c760) at AsyncCall.cc:44
#10 0x000000000067fa91 in AsyncCallQueue::fireNext (this=&lt;optimized out&gt;, <A HREF="https://lists.squid-cache.org/listinfo/squid-users">this at entry</A>=0x801c00740) at AsyncCallQueue.cc:60
#11 0x000000000067f6e8 in AsyncCallQueue::fire (this=0x801c00740) at AsyncCallQueue.cc:43
#12 0x00000000004914f2 in EventLoop::dispatchCalls (this=&lt;optimized out&gt;) at EventLoop.cc:144
#13 EventLoop::runOnce (this=<A HREF="https://lists.squid-cache.org/listinfo/squid-users">this at entry</A>=0x7fffffffe9d0) at EventLoop.cc:121
#14 0x0000000000491418 in EventLoop::run (this=0x7fffffffe9d0) at EventLoop.cc:83
#15 0x00000000005792a8 in SquidMain (argc=&lt;optimized out&gt;, <A HREF="https://lists.squid-cache.org/listinfo/squid-users">argc at entry</A>=5, argv=&lt;optimized out&gt;, <A HREF="https://lists.squid-cache.org/listinfo/squid-users">argv at entry</A>=0x7fffffffeab8) at main.cc:1719
#16 0x00000000005786a0 in SquidMainSafe (argc=102541, argv=0x6) at main.cc:1406
#17 main (argc=102541, argv=0x6) at main.cc:1394
(gdb) 


The squid is compiled without IPv6 option, so I do not understand why it
tries to reach IPv6 address.

Please, can anybody help, why I am getting signal 6 and core dump?

Thank you very much.

Regards,

lk

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="025295.html">[squid-users] rejecting CONNECT if Proxy-Authentication header is sent but not required
</A></li>
	<LI>Next message (by thread): <A HREF="025294.html">[squid-users] squid exiting on signal 6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25293">[ date ]</a>
              <a href="thread.html#25293">[ thread ]</a>
              <a href="subject.html#25293">[ subject ]</a>
              <a href="author.html#25293">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
