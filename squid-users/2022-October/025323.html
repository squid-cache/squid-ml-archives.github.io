<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] FW: Encrypted browser-Squid connection errors
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20FW%3A%20Encrypted%20browser-Squid%20connection%20errors&In-Reply-To=%3C0dc84627-5af0-78e1-9fe8-9a8329db92e1%40spamtrap.tnetconsulting.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025319.html">
   <LINK REL="Next"  HREF="025327.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] FW: Encrypted browser-Squid connection errors</H1>
    <B>Grant Taylor</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20FW%3A%20Encrypted%20browser-Squid%20connection%20errors&In-Reply-To=%3C0dc84627-5af0-78e1-9fe8-9a8329db92e1%40spamtrap.tnetconsulting.net%3E"
       TITLE="[squid-users] FW: Encrypted browser-Squid connection errors">gtaylor at tnetconsulting.net
       </A><BR>
    <I>Fri Oct 21 17:04:46 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="025319.html">[squid-users] FW: Encrypted browser-Squid connection errors
</A></li>
        <LI>Next message (by thread): <A HREF="025327.html">[squid-users] FW: Encrypted browser-Squid connection errors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25323">[ date ]</a>
              <a href="thread.html#25323">[ thread ]</a>
              <a href="subject.html#25323">[ subject ]</a>
              <a href="author.html#25323">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/20/22 11:58 PM, Adam Majer wrote:
&gt;<i> It's basically by convention now.
</I>
Sure.

Conventions change over time.

Long enough ago 3128 wasn't the conventional port for Squid.

It used to be a convention to allow smoking in public / government 
offices.  Now the convention is the exact opposite.

&gt;<i> Port 3128 has been set as default port by Squid for more than 2 
</I>&gt;<i> decades.
</I>
Agreed.

&gt;<i> Don't expect a change.
</I>
I'm not expecting a change.

At most I was hoping for a discussion about it.

Maybe, hopefully, said discussion will spark an idea in at least one 
person's head and that might turn into something in 10 or 20 years.

&gt;<i> Secondly, like it was said already, servers and proxies are different 
</I>&gt;<i> things.
</I>
Semantics are VERY important here.  HTTP daemons and proxy daemons are 
both servers.  They just serve slightly different things.

&gt;<i> And you need to understand the difference between forward and reverse 
</I>&gt;<i> proxies.
</I>
Agreed.  I've been using / leveraging / exploiting (in a good way) a 
combination of forward and reverse proxies for multiple decades.  They 
are distinctly different, but yet still remarkably similar.

Squid, Apache's HTTPD, Nginx, and even contemporary IIS can act as both 
an HTTP(S) server (a.k.a. reverse proxy) and / or a forward proxy.

&gt;<i> Reverse proxies can sit on the regular ports because that's their 
</I>&gt;<i> job -- to ask as origins.
</I>


&gt;<i> Forward proxies don't sit on regular server ports because they require 
</I>&gt;<i> explicit config on the client.
</I>
If we're explicitly configuring the client, then what does the port 
that's chosen have any influence on the explicit configuration?

Curl's man page is rather convenient and somewhat supportive ~&gt; telling:

```
        Using an environment variable to set the proxy has the same 
effect as using the -x, --proxy option.

        http_proxy [<A HREF="protocol://">protocol://</A>]&lt;host&gt;[:port]
               Sets the proxy server to use for HTTP.

        HTTPS_PROXY [<A HREF="protocol://">protocol://</A>]&lt;host&gt;[:port]
               Sets the proxy server to use for HTTPS.
```

Notice how the `[:port]` is /optional/?

Curl (and other things) will default to using the IANA defined port for 
`[<A HREF="protocol://">protocol://</A>]` if `[:port]` is unspecified.

So ... why do we /need/ to use a different port than what IANA has 
defined for `[<A HREF="protocol://">protocol://</A>]`?

I'm genuinely asking why we /need/ to use a different port.

What, other than convention or even port contention, is prompting us to 
use a port other than what IANA has defined for the protocol?

&gt;<i> And don't forget we used to have transparent proxies which kind of died 
</I>&gt;<i> (I think?) thanks to TLS.
</I>
I question the veracity of /used/ /to/.

Yes, TLS made things more difficult.  But in a corporate (like) 
environment doing TLS monkey in the middle is quite possible with Squid.

I am and have been doing exactly that on my personal devices for the 
last two years.

&gt;<i> Port 3128 is for *forward* proxy setup.
</I>
That's by convention / Squid default.

I've run forward HTTP proxies on port 80 and forward HTTPS proxies on 
port 443 for years without any problems.  What's more is that it 
simplifies the client configuration by removing the need to specify the 
port.  The following works perfectly fine for curl, et al.

    export http_proxy=&quot;proxy.home.example&quot;

So -- again -- why do we /need/ to use a different port?

I fully acknowledge /contention/ and /contention/.  If that's the answer 
to the question, then so be it.  But I'm not yet convinced of such.



-- 
Grant. . . .
unix || die

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4017 bytes
Desc: S/MIME Cryptographic Signature
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20221021/bf38f1a1/attachment.bin">http://lists.squid-cache.org/pipermail/squid-users/attachments/20221021/bf38f1a1/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="025319.html">[squid-users] FW: Encrypted browser-Squid connection errors
</A></li>
	<LI>Next message (by thread): <A HREF="025327.html">[squid-users] FW: Encrypted browser-Squid connection errors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25323">[ date ]</a>
              <a href="thread.html#25323">[ thread ]</a>
              <a href="subject.html#25323">[ subject ]</a>
              <a href="author.html#25323">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
