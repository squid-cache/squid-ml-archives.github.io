<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Unwanted authentication requests
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Unwanted%20authentication%20requests&In-Reply-To=%3CqcRVW_0gtCSQwAm3fLUNjgjDDMwYp_G96UV5aQvJ60Nc18sC2P1aZwYJY_Xzn_EMc1Av6l9sAjIOY7bZ5c0AO0kNW_TXeWXf8lS1SsXOgSE%3D%40protonmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025183.html">
   <LINK REL="Next"  HREF="025186.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Unwanted authentication requests</H1>
    <B>Marek Gre&#353;ko</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Unwanted%20authentication%20requests&In-Reply-To=%3CqcRVW_0gtCSQwAm3fLUNjgjDDMwYp_G96UV5aQvJ60Nc18sC2P1aZwYJY_Xzn_EMc1Av6l9sAjIOY7bZ5c0AO0kNW_TXeWXf8lS1SsXOgSE%3D%40protonmail.com%3E"
       TITLE="[squid-users] Unwanted authentication requests">marek.gresko at protonmail.com
       </A><BR>
    <I>Thu Sep  8 07:13:04 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="025183.html">[squid-users] Failover using Cache Peer feature.
</A></li>
        <LI>Next message (by thread): <A HREF="025186.html">[squid-users] Unwanted authentication requests
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25184">[ date ]</a>
              <a href="thread.html#25184">[ thread ]</a>
              <a href="subject.html#25184">[ subject ]</a>
              <a href="author.html#25184">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I have a setup that users in one vlan use kerberos authentication to the squid and users in second vlan are not kerberos aware. They are either allowed by ip address or use basic authentication. This setup was working quite well for a long time. Time to time users on the kerberos aware vlan got basic auth request which after pressing cancel disappeared. This happened maybe once a month without apparent reason.

But nowadays I observe the basic auth on the kerberos aware vlan very often without any change to policy. When looking into the logs it seems it is related to these logs:

NONE_NONE/000 0 - error:transaction-end-before-headers - HIER_NONE/- -

It seems the after connection crash brower receives another auth request and it thinks the kerberos was not successful and tries basic auth.

Is there some way to limit the use of basic auth only to the users on the second vlan and not present it to the users on the first vlan and vice versa? Or am I doing something wrong? Or do you have some suggestion what could happen that it appears so frequently now? Squid proxy update? Browser update (firefox)? I am using Fedora 36 with latest updates on both server and client when this happens.

I worked with Bluecoat proxies in the past and if I remember well there was separate policy layer for authentication. I cannot find such a thing in the squid proxy.

Thanks for suggestions.

Marek
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20220908/acfb35ce/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20220908/acfb35ce/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="025183.html">[squid-users] Failover using Cache Peer feature.
</A></li>
	<LI>Next message (by thread): <A HREF="025186.html">[squid-users] Unwanted authentication requests
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25184">[ date ]</a>
              <a href="thread.html#25184">[ thread ]</a>
              <a href="subject.html#25184">[ subject ]</a>
              <a href="author.html#25184">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
