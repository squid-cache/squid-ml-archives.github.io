<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Exchange server authentication via squid reverse proxy not working after upgrade from squid 4.15 to 5.6
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Exchange%20server%20authentication%20via%20squid%20reverse%0A%20proxy%20not%20working%20after%20upgrade%20from%20squid%204.15%20to%205.6&In-Reply-To=%3CDM6PR10MB3740189C7803EC2C750365E6B3409%40DM6PR10MB3740.namprd10.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025196.html">
   <LINK REL="Next"  HREF="025195.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Exchange server authentication via squid reverse proxy not working after upgrade from squid 4.15 to 5.6</H1>
    <B>Hannes Fasching</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Exchange%20server%20authentication%20via%20squid%20reverse%0A%20proxy%20not%20working%20after%20upgrade%20from%20squid%204.15%20to%205.6&In-Reply-To=%3CDM6PR10MB3740189C7803EC2C750365E6B3409%40DM6PR10MB3740.namprd10.prod.outlook.com%3E"
       TITLE="[squid-users] Exchange server authentication via squid reverse proxy not working after upgrade from squid 4.15 to 5.6">hfasching at barracuda.com
       </A><BR>
    <I>Thu Sep  8 07:40:09 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="025196.html">[squid-users] Unwanted authentication requests
</A></li>
        <LI>Next message (by thread): <A HREF="025195.html">[squid-users] Exchange server authentication via squid reverse proxy not working after upgrade from squid 4.15 to 5.6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25185">[ date ]</a>
              <a href="thread.html#25185">[ thread ]</a>
              <a href="subject.html#25185">[ subject ]</a>
              <a href="author.html#25185">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,
A customer have an issue that after upgrading from squid 4.15 to actual 5.6 with reverse proxy mode for an exchange server.
The authentication is not working anymore when the integrated Windows authentication is enabled (needed for SSO). When disabled, the authentication via squid is then working.
The difference is that Windows with integrated authentication is trying several authentication schemes otherwise only Basic authentication is used.
Please follow the link to see the squid.conf and the cache log file starting with the attempt when it fails and afterwards, with the time stamp 19:15, the attempt when it is working.

<A HREF="https://barracudacorp-my.sharepoint.com/:u:/g/personal/hfasching_barracuda_com/EZBjHnJqCaFLlArPb8a_-FwB-7FIzvK0e21ow1Qec-MVhw?e=5149sA">https://barracudacorp-my.sharepoint.com/:u:/g/personal/hfasching_barracuda_com/EZBjHnJqCaFLlArPb8a_-FwB-7FIzvK0e21ow1Qec-MVhw?e=5149sA</A> (squid.conf)
<A HREF="https://barracudacorp-my.sharepoint.com/:u:/g/personal/hfasching_barracuda_com/EcPpd3DeeoFLs4_9Dn6JWAYBbHrwenOEJ3SZ0IW8_ED1-A?e=Ff9BZc">https://barracudacorp-my.sharepoint.com/:u:/g/personal/hfasching_barracuda_com/EcPpd3DeeoFLs4_9Dn6JWAYBbHrwenOEJ3SZ0IW8_ED1-A?e=Ff9BZc</A> (squid_cache.log)

It would be great if you could help me finding out what is wrong with Windows integrated authentication as our customer needs the SSO feature.


Thanks in advance and Kind regards,
Hannes Fasching

PS: All public/relevant IP's and domain names where replaced with text that should give a meaning e.g. IP of the proxy -&gt; proxyip, IP of the client -&gt; clientip, etc.
Also the Basic authentication string was replaced by '*'s














Get the 13 Email Threat Types eBook

<A HREF="https://www.barracuda.com/">https://www.barracuda.com/</A>

This e-mail and any attachments to it contain confidential and proprietary material of Barracuda, its affiliates or agents, and is solely for the use of the intended recipient. Any review, use, disclosure, distribution or copying of this transmittal is prohibited except by or on behalf of the intended recipient. If you have received this transmittal in error, please notify the sender and destroy this e-mail and any attachments and all copies, whether electronic or printed.

________________________________

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="025196.html">[squid-users] Unwanted authentication requests
</A></li>
	<LI>Next message (by thread): <A HREF="025195.html">[squid-users] Exchange server authentication via squid reverse proxy not working after upgrade from squid 4.15 to 5.6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25185">[ date ]</a>
              <a href="thread.html#25185">[ thread ]</a>
              <a href="subject.html#25185">[ subject ]</a>
              <a href="author.html#25185">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
