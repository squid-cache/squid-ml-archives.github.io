<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] TCP_MISS only
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20TCP_MISS%20only&In-Reply-To=%3C5d36de4a-715d-4910-c235-2c7d777867b9%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025262.html">
   <LINK REL="Next"  HREF="025268.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] TCP_MISS only</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20TCP_MISS%20only&In-Reply-To=%3C5d36de4a-715d-4910-c235-2c7d777867b9%40treenet.co.nz%3E"
       TITLE="[squid-users] TCP_MISS only">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Sep 29 12:03:46 UTC 2022</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="025262.html">[squid-users] TCP_MISS only
</A></li>
        <LI>Next message (by thread): <A HREF="025268.html">[squid-users] TCP_MISS only
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25264">[ date ]</a>
              <a href="thread.html#25264">[ thread ]</a>
              <a href="subject.html#25264">[ subject ]</a>
              <a href="author.html#25264">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 28/09/22 07:56, Andy Armstrong wrote:
&gt;<i> Okay &#8211; but what happens if you are communicating with a non REST 
</I>&gt;<i> endpoint.
</I>
You are still communicating over HTTP. To interact with and benefit from 
HTTP agents like caches you need to comply to the HTTP semantics they use.

IMO, REST is just a useful tool to define (in abstract) an API's 
operation when considering what/how it needs to be implemented.


&gt;<i> Consider a Web services endpoint for example where a request 
</I>&gt;<i> is only interacted with via POST but the operation for example may 
</I>&gt;<i> frequently be a read based function akin to a HTTP GET?
</I>
That is by definition a broken implementation of HTTP. The agent is 
using a *delivery* API (POST) for retrieval (GET).

If you can separate the delivery and fetch operations HTTP becomes much 
easier to use.


&gt;<i> Is Squid just 
</I>&gt;<i> simply not going to help cache those requests?
</I>
Not *by default*, no.

POST implies changing some arbitrary resource *other* than the URL 
presented. Based on data and logic which may not be provided in the 
request message URL+headers.

To use POST with caching both the client *and* the server have to 
explicitly tell the HTTP cache agent(s) what to do on every single HTTP 
message.

  - The client has to tell the cache whether a stored response is able 
to be produced as reply, what object-ID it is trying to retrieve, what 
object-ID's it already knows about (if any), and how old the stored 
object is allowed to be.

  - The server has to tell the cache whether the response can be stored, 
what to use for a unique-ID of the reply object, how old it already is, 
how long it can be stored for, how and when to update it when it becomes 
stale.

The Squid refresh_pattern can provide defaults for the storage times 
when they are omitted. But all the ID related things and whether to use 
cache at all can only come from the client/server.


As you can see by limiting yourself to POST-only you have imposed a huge 
amount of complexity. Using GET instead for fetches makes all the above 
*optional* where now it is mandatory.


&gt;<i> It is only helpful for 
</I>&gt;<i> more strict alignment to REST principles?
</I>&gt;<i> 
</I>
You lost me here. Squid implements HTTP.

REST is a very abstract simplification of basic HTTP/1.0 semantics. So 
the closer ones code aligns to REST the *easier* it is to implement HTTP 
properly. But HTTP/1.1+ are vastly more than REST.

HTH
Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="025262.html">[squid-users] TCP_MISS only
</A></li>
	<LI>Next message (by thread): <A HREF="025268.html">[squid-users] TCP_MISS only
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25264">[ date ]</a>
              <a href="thread.html#25264">[ thread ]</a>
              <a href="subject.html#25264">[ subject ]</a>
              <a href="author.html#25264">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
