<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Disable IPV6 for certain destinations only?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Disable%20IPV6%20for%20certain%20destinations%20only%3F&In-Reply-To=%3C2d4c8a7a-accb-217d-f0e9-8b932dea1977%40suse.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025775.html">
   <LINK REL="Next"  HREF="025777.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Disable IPV6 for certain destinations only?</H1>
    <B>Adam Majer</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Disable%20IPV6%20for%20certain%20destinations%20only%3F&In-Reply-To=%3C2d4c8a7a-accb-217d-f0e9-8b932dea1977%40suse.de%3E"
       TITLE="[squid-users] Disable IPV6 for certain destinations only?">amajer at suse.de
       </A><BR>
    <I>Tue Apr 18 08:35:03 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="025775.html">[squid-users] Disable IPV6 for certain destinations only?
</A></li>
        <LI>Next message (by thread): <A HREF="025777.html">[squid-users] [ext] Re: Disable IPV6 for certain destinations only?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25776">[ date ]</a>
              <a href="thread.html#25776">[ thread ]</a>
              <a href="subject.html#25776">[ subject ]</a>
              <a href="author.html#25776">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 4/18/23 09:38, Ralf Hildebrandt wrote:
 &gt; Thus arises the need to &quot;fall back&quot; to ipv4 in the unlikely case some
 &gt; publisher already has ipv6, we connect via ipv6 and suddenly are not
 &gt; allowed to download the publications.
 &gt;
 &gt; Is there an acl for that kind of need?

Hi,

The main thing about acl is that acl == access control list and it's 
there to filter if some client is allowed to access the destination and 
not so much in in specifying the route the request follows. The request 
follows the default outbound connection.

So, I don't think this is the right mechanism and I don't believe it 
exists. There is only this, and it's just flat option that will connect 
with IPv4 first, for everything. It will hide issues with dual stack sites.

<A HREF="http://www.squid-cache.org/Doc/config/dns_v4_first/">http://www.squid-cache.org/Doc/config/dns_v4_first/</A>

The correct way of doing this is to,

  1. contact the journal providers that are causing issues ... you 
cannot find problems until someone reports them, so if you are doing 
IPv4 only, you will not be part of the solution :-)

  2. don't use the above option

  3. if you need to workaround the problem temporarily, add the IPv4 
only address to the /etc/hosts of the proxy server(s). This will resolve 
the address to your override. You can also do this with a local 
recursive DNS server (like Bind) too.


I believe option #3 is the answer to your request. But do that on a 
temporarily basis, while actively fixing the issue with the journal, 
because it will cause mystery issues in the future, when the journal 
access domain is moved to a different IPv4 ;)

- Adam


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="025775.html">[squid-users] Disable IPV6 for certain destinations only?
</A></li>
	<LI>Next message (by thread): <A HREF="025777.html">[squid-users] [ext] Re: Disable IPV6 for certain destinations only?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25776">[ date ]</a>
              <a href="thread.html#25776">[ thread ]</a>
              <a href="subject.html#25776">[ subject ]</a>
              <a href="author.html#25776">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
