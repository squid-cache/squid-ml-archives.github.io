<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] cache_peer_access by dynamic ACL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20cache_peer_access%20by%20dynamic%20ACL&In-Reply-To=%3CCAFqyDwB82whYStQnbLcjX8JUyostgeMgiWQP1o0UxoYs9FKJyQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025787.html">
   <LINK REL="Next"  HREF="025784.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] cache_peer_access by dynamic ACL</H1>
    <B>Alexey&#1103;&#1088; Gruzdov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20cache_peer_access%20by%20dynamic%20ACL&In-Reply-To=%3CCAFqyDwB82whYStQnbLcjX8JUyostgeMgiWQP1o0UxoYs9FKJyQ%40mail.gmail.com%3E"
       TITLE="[squid-users] cache_peer_access by dynamic ACL">my.shellac at gmail.com
       </A><BR>
    <I>Tue Apr 18 15:41:47 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="025787.html">[squid-users] Instructions to build Squid proxy for Windows
</A></li>
        <LI>Next message (by thread): <A HREF="025784.html">[squid-users] cache_peer_access by dynamic ACL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25783">[ date ]</a>
              <a href="thread.html#25783">[ thread ]</a>
              <a href="subject.html#25783">[ subject ]</a>
              <a href="author.html#25783">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Guys!

Could you explain me how the annotation transaction works and how it
related to acl that I could to use with cache_peers

ok! Lets look to my case example:

1. I have three of cache_peers:

     cache_peer peerG1.com parent 40001 0 no-query no-digest
name=peerG1 round-robin
     cache_peer peerG2.com parent 40002 0 no-query no-digest
name=peerG2 round-robin
     cache_peer peerG3.com parent 40003 0 no-query no-digest
name=peerG3 round-robin

2. I have cache_peer_acces policy:

     cache_peer_access peerG1 allow proxy_peerG1_acl cache_peer_access
peerG1 allow proxy_all_acl cache_peer_access peerG1 deny all

     cache_peer_access peerG2 allow proxy_peerG2_acl cache_peer_access
peerG2 allow proxy_all_acl cache_peer_access peerG2 deny all

     cache_peer_access peerG3 allow proxy_peerG3_acl
cache_peer_access peerG3 allow proxy_all_acl cache_peer_access peerG3 deny
all 3. And of course ACL defined: proxy_peerG1_acl proxy_auth  &quot;../users.
peerG1.txt&quot; proxy_peerG2_acl proxy_auth  &quot;../users.peerG2.txt&quot;
proxy_peerG3_acl proxy_auth  &quot;../users.peerG3.txt&quot;  proxy_all_acl proxy_auth
&quot;../users.all.txt&quot;
And these all works like I need, But - once I am changing a list of users
(add or remove) - I need to use &quot;squid -k reconfigure&quot;...... but of course
better to go without this reconfigure and use ACL like in a dynamic mode.
Squid supports the external ACL, but this is slow ACL, but cache_peer
doesn't support the low_acl. Also there is one more option - called
annotation_transaction - could you explain me how I could to use this in my
case ? Thank you. AlexG
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20230418/d9fb1ba3/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20230418/d9fb1ba3/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="025787.html">[squid-users] Instructions to build Squid proxy for Windows
</A></li>
	<LI>Next message (by thread): <A HREF="025784.html">[squid-users] cache_peer_access by dynamic ACL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25783">[ date ]</a>
              <a href="thread.html#25783">[ thread ]</a>
              <a href="subject.html#25783">[ subject ]</a>
              <a href="author.html#25783">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
