<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Fwd: cache_peer_access by dynamic ACL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Fwd%3A%20cache_peer_access%20by%20dynamic%20ACL&In-Reply-To=%3C433fe77c-544a-df35-258b-85a5ebd7a39e%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025793.html">
   <LINK REL="Next"  HREF="025795.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Fwd: cache_peer_access by dynamic ACL</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Fwd%3A%20cache_peer_access%20by%20dynamic%20ACL&In-Reply-To=%3C433fe77c-544a-df35-258b-85a5ebd7a39e%40measurement-factory.com%3E"
       TITLE="[squid-users] Fwd: cache_peer_access by dynamic ACL">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Apr 20 18:31:11 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="025793.html">[squid-users] Fwd:  cache_peer_access by dynamic ACL
</A></li>
        <LI>Next message (by thread): <A HREF="025795.html">[squid-users] Fwd: cache_peer_access by dynamic ACL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25794">[ date ]</a>
              <a href="thread.html#25794">[ thread ]</a>
              <a href="subject.html#25794">[ subject ]</a>
              <a href="author.html#25794">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 4/20/23 13:14, Alexey&#1103;&#1088; Gruzdov wrote:

&gt;<i> Tell me please If I right understood I could to get answer like 
</I>&gt;<i> &quot;name=value&quot; from my ACL ext script, instead of &quot;OK&quot; or &quot;ERR&quot;, right?
</I>
Not &quot;instead&quot;, but in addition to either OK or ERR.

Unfortunately, our documentation of the external ACL helper protocol has 
been hidden in a transition to GitHub Pages (or I cannot find it), but 
you can use the old wiki sources at the URL below to learn about that 
protocol:

<A HREF="https://github.com/squid-cache/squid-cache.github.io/blob/fa00274/Features/AddonHelpers.md#access-control-acl">https://github.com/squid-cache/squid-cache.github.io/blob/fa00274/Features/AddonHelpers.md#access-control-acl</A>

General information about from-helper annotations:

<A HREF="https://github.com/squid-cache/squid-cache.github.io/blob/fa00274/Features/AddonHelpers.md#keyvalue-pairs-kv-pairs-format">https://github.com/squid-cache/squid-cache.github.io/blob/fa00274/Features/AddonHelpers.md#keyvalue-pairs-kv-pairs-format</A>


&gt;<i> And does it means - I could to get answer depends from what users 
</I>&gt;<i> authorises in to proxy.
</I>
&gt;<i> For example:
</I>&gt;<i> 
</I>&gt;<i> If user &quot;Jon&quot;&#160; -&#160; the my ACL will check the policy in the DB and send 
</I>&gt;<i> answer like &quot;proxy=g1&quot; to squid, or if user is &quot;Jack&quot; - answer will be 
</I>&gt;<i> like &quot;proxy=all&quot;
</I>
Yes, what annotation(s) the helper script sends to Squid (and why) is up 
to you. Please note, however, that annotation _names_ not ending with an 
underscore (_) are officially reserved for Squid use. I would be 
especially worried about using single, simple, generic words like &quot;proxy&quot;!


&gt;<i> and I will have ACL for this
</I>&gt;<i> 
</I>&gt;<i> acl proxy_g1_marked.acl note proxy g1
</I>&gt;<i> acl proxy_all_marked.acl note proxy all
</I>&gt;<i> 
</I>&gt;<i> will that correct ?
</I>
Yes. An no transaction_annotation ACLs.


HTH,

Alex.


&gt;<i> &#1095;&#1090;, 20 &#1072;&#1087;&#1088;. 2023&#8239;&#1075;. &#1074; 19:50, Alex Rousskov 
</I>&gt;<i> &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A> 
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt;&gt;:
</I>&gt;<i> 
</I>&gt;<i>     On 4/20/23 10:54, Alexey&#1103;&#1088; Gruzdov wrote:
</I>&gt;<i>      &gt; The cpu is around 100% even no any requests is going....
</I>&gt;<i> 
</I>&gt;<i>     Then the problem is most likely in your script. Foe example, the script
</I>&gt;<i>     actively doing something while there are no Squid requests to work on
</I>&gt;<i>     (instead of blocking while waiting for the next Squid request).
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>      &gt; For now I left just one cache_peer in configuration&#160;and got the
</I>&gt;<i>     new error:
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt; commBind Cannot bind socket FD 28 to [::]: (13) Permission denied
</I>&gt;<i> 
</I>&gt;<i>     Could be one of the misconfigurations discussed at
</I>&gt;<i>     <A HREF="https://wiki.squid-cache.org/Features/SmpScale#cannot-bind-socket-fd-nn-to--13-permission-denied">https://wiki.squid-cache.org/Features/SmpScale#cannot-bind-socket-fd-nn-to--13-permission-denied</A> &lt;<A HREF="https://wiki.squid-cache.org/Features/SmpScale#cannot-bind-socket-fd-nn-to--13-permission-denied">https://wiki.squid-cache.org/Features/SmpScale#cannot-bind-socket-fd-nn-to--13-permission-denied</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>     HTH,
</I>&gt;<i> 
</I>&gt;<i>     Alex.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>      &gt; &#1095;&#1090;, 20 &#1072;&#1087;&#1088;. 2023&#8239;&#1075;. &#1074; 17:21, Alex Rousskov:
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;On 4/20/23 04:23, Alexey&#1103;&#1088; Gruzdov wrote:
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; cache_peer peerG1.com parent 40001 0 no-query no-digest
</I>&gt;<i>     name=peerG1
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; external_acl_type ext_proxy_g1_type %LOGIN %DST
</I>&gt;<i>     /usr/local/bin/g1.py
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; acl&#160;proxy_g1_ext_mark_acl&#160; ext_proxy_g1_type
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; acl&#160;proxy_g1_ext_marked_acl&#160; annotate_transaction proxy=g1
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; acl proxy_peerG1_acl&#160;note proxy g1
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; http_access deny
</I>&gt;<i>     proxy_g1_ext_mark_acl&#160;&#160;proxy_g1_ext_marked_acl&#160;!all
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; .....
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; others http_access rules
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; And this above works.
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;Glad to hear that. ( If others are going to use the above as
</I>&gt;<i>     a guiding
</I>&gt;<i>      &gt;&#160; &#160; &#160;example, I would recommend naming these ACLs very
</I>&gt;<i>     differently, but that
</I>&gt;<i>      &gt;&#160; &#160; &#160;is not important to Squid. )
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; BUT
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; I am worried&#160;about why this my external script for ACL&#160; type
</I>&gt;<i>      &gt;&#160; &#160; &#160;loads the
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; one of core of CPU to 100%.....???
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;External ACL caching aside, the script will be contacted once
</I>&gt;<i>     for every
</I>&gt;<i>      &gt;&#160; &#160; &#160;Squid transaction. Does your script CPU usage go down to zero
</I>&gt;<i>     when
</I>&gt;<i>      &gt;&#160; &#160; &#160;there
</I>&gt;<i>      &gt;&#160; &#160; &#160;is no traffic? If not, then there is a bug in the script itself.
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;If you use the script from the command line, without Squid,
</I>&gt;<i>     does it
</I>&gt;<i>      &gt;&#160; &#160; &#160;consume a lot of CPU and/or take a lot of time per fake
</I>&gt;<i>     query? You can
</I>&gt;<i>      &gt;&#160; &#160; &#160;adjust the script to log the real query (when the script is
</I>&gt;<i>     used by
</I>&gt;<i>      &gt;&#160; &#160; &#160;Squid), so that you can easily replicate that query when
</I>&gt;<i>     running the
</I>&gt;<i>      &gt;&#160; &#160; &#160;script without Squid...
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;The cache key in your case is (the expansion of) &quot;%LOGIN
</I>&gt;<i>     %DST&quot;. It is
</I>&gt;<i>      &gt;&#160; &#160; &#160;enabled by default IIRC. Look for &quot;cache&quot; related options at
</I>&gt;<i>      &gt; <A HREF="http://www.squid-cache.org/Doc/config/external_acl_type/">http://www.squid-cache.org/Doc/config/external_acl_type/</A>
</I>&gt;<i>     &lt;<A HREF="http://www.squid-cache.org/Doc/config/external_acl_type/">http://www.squid-cache.org/Doc/config/external_acl_type/</A>&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;&lt;<A HREF="http://www.squid-cache.org/Doc/config/external_acl_type/">http://www.squid-cache.org/Doc/config/external_acl_type/</A>
</I>&gt;<i>     &lt;<A HREF="http://www.squid-cache.org/Doc/config/external_acl_type/">http://www.squid-cache.org/Doc/config/external_acl_type/</A>&gt;&gt;
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; ( I used three of workers in config,
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; but I can see a six process called like my external helper
</I>&gt;<i>      &gt;&#160; &#160; &#160;script, looks
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; like squid runs x2 process for external ACL )
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;See external_acl_type children-* options:
</I>&gt;<i>      &gt; <A HREF="http://www.squid-cache.org/Doc/config/external_acl_type/">http://www.squid-cache.org/Doc/config/external_acl_type/</A>
</I>&gt;<i>     &lt;<A HREF="http://www.squid-cache.org/Doc/config/external_acl_type/">http://www.squid-cache.org/Doc/config/external_acl_type/</A>&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;&lt;<A HREF="http://www.squid-cache.org/Doc/config/external_acl_type/">http://www.squid-cache.org/Doc/config/external_acl_type/</A>
</I>&gt;<i>     &lt;<A HREF="http://www.squid-cache.org/Doc/config/external_acl_type/">http://www.squid-cache.org/Doc/config/external_acl_type/</A>&gt;&gt;
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;In most environments, I recommend setting all three of them
</I>&gt;<i>     to the same
</I>&gt;<i>      &gt;&#160; &#160; &#160;value. Please note that these options are not SMP-aware
</I>&gt;<i>     (yet), so Squid
</I>&gt;<i>      &gt;&#160; &#160; &#160;will _not_ divide their values by the number of workers and
</I>&gt;<i>     give each
</I>&gt;<i>      &gt;&#160; &#160; &#160;worker as many children as you state in squid.conf.
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; Because if I will put the one more group of users (that
</I>&gt;<i>     must to use
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; another cache_peer ) - I will need to create one more external
</I>&gt;<i>      &gt;&#160; &#160; &#160;script
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; that will making to check an existed users from an
</I>&gt;<i>     other&#160;DB table
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;Once you get the basic setup above working for one group to your
</I>&gt;<i>      &gt;&#160; &#160; &#160;satisfaction, I would recommend migrating from (one script
</I>&gt;<i>     and one
</I>&gt;<i>      &gt;&#160; &#160; &#160;matching annotate_transaction ACL) per group to a single
</I>&gt;<i>     script for all
</I>&gt;<i>      &gt;&#160; &#160; &#160;groups. That single external ACL script will send the right
</I>&gt;<i>      &gt;&#160; &#160; &#160;annotation(s) to Squid.
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;HTH,
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;Alex.
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; &#1089;&#1088;, 19 &#1072;&#1087;&#1088;. 2023&#8239;&#1075;. &#1074; 22:39, Alex Rousskov:
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;On 4/19/23 13:30, Alexey&#1103;&#1088; Gruzdov wrote:
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; cache_peer peerG1.com parent 40001 0 no-query no-digest
</I>&gt;<i>      &gt;&#160; &#160; &#160;name=peerG1
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; external_acl_type ext_proxy_g1_type %LOGIN %DST
</I>&gt;<i>      &gt;&#160; &#160; &#160;/usr/local/bin/g1.py
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; acl&#160;proxy_g1_ext_acl&#160;ext_proxy_g1_type
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;OK. I assume that /usr/local/bin/g1.py will only match
</I>&gt;<i>     users that
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;should
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;go to cache_peer called peerG1.
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; acl&#160;proxy_g1_ext_acl_mark&#160; annotate_transaction
</I>&gt;<i>     proxy=g1
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;Please note that the name of this annotate_transaction
</I>&gt;<i>     ACL --
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;&quot;proxy_g1_ext_acl_mark&quot; -- implies a relationship to the
</I>&gt;<i>      &gt;&#160; &#160; &#160;external ACL
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;named &quot;proxy_g1_ext_acl&quot;, but there is no such
</I>&gt;<i>     relationship.
</I>&gt;<i>      &gt;&#160; &#160; &#160;Squid does
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;not care about ACL names, but this naming problem may
</I>&gt;<i>     indicate a
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;misunderstanding. To follow your naming scheme, this ACL
</I>&gt;<i>      &gt;&#160; &#160; &#160;should be
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;called something like &quot;proxy_g1_mark_acl&quot; or
</I>&gt;<i>      &gt;&#160; &#160; &#160;&quot;mark_for_proxy_g1_acl&quot;.
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; acl proxy_peerG1_acl&#160;note proxy g1
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;OK. FWIW, a more consistent ACL name would have been
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;&quot;proxy_g1_marked_acl&quot; or &quot;marked_for_proxy_g1_acl&quot;. Again,
</I>&gt;<i>      &gt;&#160; &#160; &#160;Squid does
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;not really care about these names, so use whatever you
</I>&gt;<i>     think is
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;consistent/meaningful/etc.
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; http_access deny proxy_g1_ext_acl !all
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;This line has no (positive) effect. Squid will
</I>&gt;<i>     evaluate the
</I>&gt;<i>      &gt;&#160; &#160; &#160;external
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;ACL, but since the rule, as a whole, will never match
</I>&gt;<i>     due to
</I>&gt;<i>      &gt;&#160; &#160; &#160;&quot;!all&quot;,
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;and
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;since the external ACL has no (relevant) side effects, you
</I>&gt;<i>      &gt;&#160; &#160; &#160;can just
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;delete this line from your configuration.
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;Needless to say, if you delete this line, then
</I>&gt;<i>      &gt;&#160; &#160; &#160;proxy_g1_ext_acl will be
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;unused, which should tell you that this configuration
</I>&gt;<i>     is not
</I>&gt;<i>      &gt;&#160; &#160; &#160;doing what
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;you want. See below for a fix recommendation.
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; http_access deny proxy_g1_ext_acl_mark !all
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;This line will mark _all_ transactions. You only want
</I>&gt;<i>     to mark
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;transactions that also matched proxy_g1_ext_acl. That
</I>&gt;<i>     &quot;b only
</I>&gt;<i>      &gt;&#160; &#160; &#160;if a&quot;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;logic is accomplished by using _both_ ACLs in the same
</I>&gt;<i>     rule:
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;http_access deny proxy_g1_ext_acl
</I>&gt;<i>     proxy_g1_ext_acl_mark !all
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;With the above http_access rule (instead of the
</I>&gt;<i>     earlier two),
</I>&gt;<i>      &gt;&#160; &#160; &#160;Squid
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;will
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;evaluate the external ACL, and, if it matches, Squid will
</I>&gt;<i>      &gt;&#160; &#160; &#160;also evaluate
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;the annotation-setting ACL. The whole rule will then be
</I>&gt;<i>      &gt;&#160; &#160; &#160;rejected due to
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;&quot;!all&quot;, but not until it annotates the transaction (if the
</I>&gt;<i>      &gt;&#160; &#160; &#160;external ACL
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;matches). Again, in this sketch, we are using this
</I>&gt;<i>     rule for its
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;annotation side effect only.
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; And this works like I need now....
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;AFAICT, if the tests indicate that this configuration
</I>&gt;<i>     works,
</I>&gt;<i>      &gt;&#160; &#160; &#160;then the
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;tests are broken. IMHO, you should fix the tests
</I>&gt;<i>     (while you
</I>&gt;<i>      &gt;&#160; &#160; &#160;have a
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;broken configuration that can be used to test the
</I>&gt;<i>     tests) before
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;proceeding with the configuration fix.
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;HTH,
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;Alex.
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;P.S. Please keep this email thread on squid-users
</I>&gt;<i>     instead of
</I>&gt;<i>      &gt;&#160; &#160; &#160;responding
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;to me personally.
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; &#1089;&#1088;, 19 &#1072;&#1087;&#1088;. 2023&#8239;&#1075;. &#1074; 21:01, Alexey&#1103;&#1088; Gruzdov:
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;so, ok&#160; - Lets limit just to one cache peer and
</I>&gt;<i>     one single
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;ACL (just
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;to understand the logic):
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160;cache_peer peerG1.com parent 40001 0 no-query
</I>&gt;<i>     no-digest
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;name=peerG1
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160;external_acl_type ext_proxy_g1_type %LOGIN %DST
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;/usr/local/bin/g1.py&#160; &#160;(this will answer &quot;OK&quot; 
</I>&gt;<i>     or &quot;ERR&quot;,
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;depends if
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;user consists in DB)
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160;acl&#160;proxy_g1_ext_acl
</I>&gt;<i>      &gt;&#160; &#160; &#160;ext_proxy_g1_type&#160;annotate_transaction
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;proxy=g1&#160; &#160;(If I right understood here is a key
</I>&gt;<i>     point
</I>&gt;<i>      &gt;&#160; &#160; &#160;of how
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;to add
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;the tag to transaction related with user)
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160;acl proxy_peerG1_acl&#160;note proxy g1&#160; (here we
</I>&gt;<i>     create
</I>&gt;<i>      &gt;&#160; &#160; &#160;the ACL
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;based
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;on the tag and this is fast ACL yet and we
</I>&gt;<i>     should to
</I>&gt;<i>      &gt;&#160; &#160; &#160;use it in
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;cache_peer_access)
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;http_access deny proxy_g1_ext_acl !all
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;......&lt;others http access rules&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;cache_peer_access peerG1 allow proxy_peerG1_acl
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;cache_peer_access peerG1 deny all
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;Is that correct ?
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;&#1074;&#1090;, 18 &#1072;&#1087;&#1088;. 2023&#8239;&#1075;. &#1074; 23:44, Alex Rousskov
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;&lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt;&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt;&gt;&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt;&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt;&gt;&gt;&gt;&gt;:
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;On 4/18/23 11:41, Alexey&#1103;&#1088; Gruzdov wrote:
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160; &gt; Could you explain me how the annotation
</I>&gt;<i>     transaction
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;works and
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;how it
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160; &gt; related to acl that I could to use with
</I>&gt;<i>     cache_peers
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;Transactions have a (possibly empty) set of
</I>&gt;<i>     name=value
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;annotations.
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;During Squid configuration time, Squid
</I>&gt;<i>     parses all ACL
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;declarations in
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;your configuration file. When Squid parses an
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;annotation_transaction ACL
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;declaration, Squid remembers what transaction
</I>&gt;<i>      &gt;&#160; &#160; &#160;annotation
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;to add
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;in the
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;future, [every time] when that ACL is
</I>&gt;<i>     evaluated (e.g.,
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;used in
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;http_access rule that Squid reaches during
</I>&gt;<i>     transaction
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;processing).
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;When evaluated, an &quot;annotation_transaction&quot;
</I>&gt;<i>     ACL simply
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;adds the
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;previously configured annotation to the current
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;transaction and
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;returns
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;a &quot;yes, this transaction matches&quot; result.
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;When evaluated, a &quot;note&quot; ACL returns a
</I>&gt;<i>     &quot;yes, this
</I>&gt;<i>      &gt;&#160; &#160; &#160;transaction
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;matches&quot;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;result if and only if the current transaction
</I>&gt;<i>      &gt;&#160; &#160; &#160;already has the
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;matching
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;annotation. This ACL does not modify the set of
</I>&gt;<i>      &gt;&#160; &#160; &#160;transaction
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;annotations.
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;The combination of annotate_transaction and
</I>&gt;<i>     note ACLs
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;allows you to
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;annotate a transaction at one time and check
</I>&gt;<i>      &gt;&#160; &#160; &#160;previously set
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;transaction
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;annotations at another time. The timing and
</I>&gt;<i>      &gt;&#160; &#160; &#160;meaning of those
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;annotations
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;are up to you.
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160; &gt; ok! Lets look to my case example:
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160; &gt; cache_peer peerG1.com parent 40001 0
</I>&gt;<i>     no-query
</I>&gt;<i>      &gt;&#160; &#160; &#160;no-digest
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;name=peerG1&#160;round-robin
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160; &gt; cache_peer_access&#160; peerG1 allow
</I>&gt;<i>     proxy_peerG1_acl
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160; &gt; cache_peer_access&#160; peerG1 allow
</I>&gt;<i>     proxy_all_acl
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160; &gt; cache_peer_access&#160; peerG1 deny all
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160; &gt; acl proxy_peerG1_acl&#160; proxy_auth
</I>&gt;<i>      &gt;&#160; &#160; &#160;&quot;../users.peerG1.txt&quot;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160; &gt; acl proxy_all_acl&#160; proxy_auth 
</I>&gt;<i>     &quot;../users.all.txt&quot;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;[ I added the missing &quot;acl &quot; directive to the
</I>&gt;<i>      &gt;&#160; &#160; &#160;above ACL
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;declarations and
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;stripped rules for two out of three
</I>&gt;<i>     cache_peers ]
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;As you know, the above cache_peer_access
</I>&gt;<i>      &gt;&#160; &#160; &#160;configuration is not
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;supported
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;because it uses &quot;slow&quot; proxy_auth ACLs in
</I>&gt;<i>      &gt;&#160; &#160; &#160;cache_peer_access
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;directives
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;that only support &quot;fast&quot; ACLs. It does not
</I>&gt;<i>     matter
</I>&gt;<i>      &gt;&#160; &#160; &#160;(to me),
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;whether the
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;above appears to &quot;work&quot; in some
</I>&gt;<i>     environments. YMMV.
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;To fix this problem, we can use http_access
</I>&gt;<i>     rules to
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;essentially
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;remember proxy_auth evaluation results (at
</I>&gt;<i>     http_access
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;evaluation time)
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;as transaction annotations. Here is an untested
</I>&gt;<i>      &gt;&#160; &#160; &#160;sketch that
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;omits other
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;(important but irrelevant here) http_access
</I>&gt;<i>     rules
</I>&gt;<i>      &gt;&#160; &#160; &#160;and assumes
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;that these
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;sketched http_access rules _are_ evaluated:
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160;# if proxy_peerG1_acl matches, evaluate
</I>&gt;<i>      &gt;&#160; &#160; &#160;mark_for_peerG1
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160;http_access deny proxy_peerG1_acl
</I>&gt;<i>      &gt;&#160; &#160; &#160;mark_for_peerG1 !all
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160;# if proxy_all_acl matches, evaluate
</I>&gt;<i>      &gt;&#160; &#160; &#160;mark_for_all_peers
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160;http_access deny proxy_all_acl
</I>&gt;<i>      &gt;&#160; &#160; &#160;mark_for_all_peers !all
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;Now we can use those remembered proxy_... acl
</I>&gt;<i>      &gt;&#160; &#160; &#160;evaluation
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;results
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;(i.e.
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;we can check for the matching annotations) in
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;cache_peer_access
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;rules:
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160;cache_peer_access peerG1 allow
</I>&gt;<i>     marked_for_peerG1
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160;cache_peer_access peerG1 allow
</I>&gt;<i>      &gt;&#160; &#160; &#160;marked_for_all_peers
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160;cache_peer_access peerG1 deny all
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;where the new ACLs mentioned above are
</I>&gt;<i>     declared along
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;these lines:
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160;acl mark_for_peerG1 annotate_transaction
</I>&gt;<i>      &gt;&#160; &#160; &#160;for_peer_=G1
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160;acl mark_for_all_peers annotate_transaction
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;for_all_peers_=true
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160;acl marked_for_peerG1 note for_peer_ G1
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160; &#160; &#160;acl marked_for_all_peers note
</I>&gt;<i>     for_all_peers_ true
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;This can probably be simplified further by
</I>&gt;<i>     using
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;for_peer_=ALL
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;instead
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;of for_all_peers_=true annotation, but I
</I>&gt;<i>     wanted to
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;preserve the
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;symmetry
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;with your original configuration.
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160; &gt; And these all works like I need, But -
</I>&gt;<i>     once I am
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;changing a
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;list of
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160; &gt; users (add or remove) - I need to use
</I>&gt;<i>     &quot;squid -k
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;reconfigure&quot;...... but
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160; &gt; of course better to go without this
</I>&gt;<i>     reconfigure
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;One can avoid reconfiguration using an
</I>&gt;<i>     external ACL
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;script that
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;gives
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;Squid the right for_peer_=... annotations
</I>&gt;<i>     (instead
</I>&gt;<i>      &gt;&#160; &#160; &#160;of using
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;&quot;constant&quot;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;or &quot;hard-coded&quot; annotate_transaction ACLs
</I>&gt;<i>     to store
</I>&gt;<i>      &gt;&#160; &#160; &#160;the same
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;annotations).
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;However, it may be better to make the above
</I>&gt;<i>     sketch
</I>&gt;<i>      &gt;&#160; &#160; &#160;to work
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;_before_ you
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;replace mark_for_peerG1 ACLs/rules with an
</I>&gt;<i>     external
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;mark_for_the_right_peer ACL.
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;HTH,
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;Alex.
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;P.S. This thread continues the discussion
</I>&gt;<i>     started at
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; <A HREF="https://bugs.squid-cache.org/show_bug.cgi?id=5268">https://bugs.squid-cache.org/show_bug.cgi?id=5268</A>
</I>&gt;<i>     &lt;<A HREF="https://bugs.squid-cache.org/show_bug.cgi?id=5268">https://bugs.squid-cache.org/show_bug.cgi?id=5268</A>&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;&lt;<A HREF="https://bugs.squid-cache.org/show_bug.cgi?id=5268">https://bugs.squid-cache.org/show_bug.cgi?id=5268</A>
</I>&gt;<i>     &lt;<A HREF="https://bugs.squid-cache.org/show_bug.cgi?id=5268">https://bugs.squid-cache.org/show_bug.cgi?id=5268</A>&gt;&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;&lt;<A HREF="https://bugs.squid-cache.org/show_bug.cgi?id=5268">https://bugs.squid-cache.org/show_bug.cgi?id=5268</A>
</I>&gt;<i>     &lt;<A HREF="https://bugs.squid-cache.org/show_bug.cgi?id=5268">https://bugs.squid-cache.org/show_bug.cgi?id=5268</A>&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;&lt;<A HREF="https://bugs.squid-cache.org/show_bug.cgi?id=5268">https://bugs.squid-cache.org/show_bug.cgi?id=5268</A>
</I>&gt;<i>     &lt;<A HREF="https://bugs.squid-cache.org/show_bug.cgi?id=5268">https://bugs.squid-cache.org/show_bug.cgi?id=5268</A>&gt;&gt;&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;       
</I>&gt;<i>      &#160;&lt;<A HREF="https://bugs.squid-cache.org/show_bug.cgi?id=5268">https://bugs.squid-cache.org/show_bug.cgi?id=5268</A>
</I>&gt;<i>     &lt;<A HREF="https://bugs.squid-cache.org/show_bug.cgi?id=5268">https://bugs.squid-cache.org/show_bug.cgi?id=5268</A>&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;&lt;<A HREF="https://bugs.squid-cache.org/show_bug.cgi?id=5268">https://bugs.squid-cache.org/show_bug.cgi?id=5268</A>
</I>&gt;<i>     &lt;<A HREF="https://bugs.squid-cache.org/show_bug.cgi?id=5268">https://bugs.squid-cache.org/show_bug.cgi?id=5268</A>&gt;&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;&lt;<A HREF="https://bugs.squid-cache.org/show_bug.cgi?id=5268">https://bugs.squid-cache.org/show_bug.cgi?id=5268</A>
</I>&gt;<i>     &lt;<A HREF="https://bugs.squid-cache.org/show_bug.cgi?id=5268">https://bugs.squid-cache.org/show_bug.cgi?id=5268</A>&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;&lt;<A HREF="https://bugs.squid-cache.org/show_bug.cgi?id=5268">https://bugs.squid-cache.org/show_bug.cgi?id=5268</A>
</I>&gt;<i>     &lt;<A HREF="https://bugs.squid-cache.org/show_bug.cgi?id=5268">https://bugs.squid-cache.org/show_bug.cgi?id=5268</A>&gt;&gt;&gt;&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;_______________________________________________
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;squid-users mailing list
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;&gt;&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &#160; &#160;&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;&gt;&gt;&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>     &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;&lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>     &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>&gt;&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;&lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>     &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;&lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>     &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>&gt;&gt;&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;       
</I>&gt;<i>      &#160;&lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>     &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;&lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>     &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>&gt;&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;&lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>     &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;&lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>     &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>&gt;&gt;&gt;&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;--
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;&#1057; &#1091;&#1074;&#1072;&#1078;&#1077;&#1085;&#1080;&#1077;&#1084; &#1082; &#1042;&#1072;&#1084;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;&#1040;&#1083;&#1077;&#1082;&#1089;&#1077;&#1081;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;+79043828661
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160;620000 &#1075;.&#1045;&#1082;&#1072;&#1090;&#1077;&#1088;&#1080;&#1085;&#1073;&#1091;&#1088;&#1075; &#160;2022
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; --
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; &#1057; &#1091;&#1074;&#1072;&#1078;&#1077;&#1085;&#1080;&#1077;&#1084; &#1082; &#1042;&#1072;&#1084;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; &#1040;&#1083;&#1077;&#1082;&#1089;&#1077;&#1081;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; +79043828661
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt; 620000 &#1075;.&#1045;&#1082;&#1072;&#1090;&#1077;&#1088;&#1080;&#1085;&#1073;&#1091;&#1088;&#1075; &#160;2022
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; --
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; &#1057; &#1091;&#1074;&#1072;&#1078;&#1077;&#1085;&#1080;&#1077;&#1084; &#1082; &#1042;&#1072;&#1084;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; &#1040;&#1083;&#1077;&#1082;&#1089;&#1077;&#1081;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; +79043828661
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; 620000 &#1075;.&#1045;&#1082;&#1072;&#1090;&#1077;&#1088;&#1080;&#1085;&#1073;&#1091;&#1088;&#1075; &#160;2022
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; _______________________________________________
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; squid-users mailing list
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160; &gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>     &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;&lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>     &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>&gt;&gt;
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;_______________________________________________
</I>&gt;<i>      &gt;&#160; &#160; &#160;squid-users mailing list
</I>&gt;<i>      &gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;&gt;
</I>&gt;<i>      &gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>     &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>&gt;
</I>&gt;<i>      &gt;&#160; &#160; &#160;&lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>     &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>&gt;&gt;
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt;
</I>&gt;<i>      &gt; _______________________________________________
</I>&gt;<i>      &gt; squid-users mailing list
</I>&gt;<i>      &gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i>      &gt; <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>     &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>&gt;
</I>&gt;<i> 
</I>&gt;<i>     _______________________________________________
</I>&gt;<i>     squid-users mailing list
</I>&gt;<i>     <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>     &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i>     <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>     &lt;<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="025793.html">[squid-users] Fwd:  cache_peer_access by dynamic ACL
</A></li>
	<LI>Next message (by thread): <A HREF="025795.html">[squid-users] Fwd: cache_peer_access by dynamic ACL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25794">[ date ]</a>
              <a href="thread.html#25794">[ thread ]</a>
              <a href="subject.html#25794">[ subject ]</a>
              <a href="author.html#25794">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
