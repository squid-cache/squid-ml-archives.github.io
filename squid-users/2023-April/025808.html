<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] %LOGIN place in squid 5.8 acls
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%25LOGIN%20place%20in%20squid%205.8%20acls&In-Reply-To=%3Ccc274759-0b31-96e2-0208-371fa579e682%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025803.html">
   <LINK REL="Next"  HREF="025806.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] %LOGIN place in squid 5.8 acls</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%25LOGIN%20place%20in%20squid%205.8%20acls&In-Reply-To=%3Ccc274759-0b31-96e2-0208-371fa579e682%40treenet.co.nz%3E"
       TITLE="[squid-users] %LOGIN place in squid 5.8 acls">squid3 at treenet.co.nz
       </A><BR>
    <I>Tue Apr 25 13:24:10 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="025803.html">[squid-users] %LOGIN place in squid 5.8 acls
</A></li>
        <LI>Next message (by thread): <A HREF="025806.html">[squid-users] Caching uncachable resources
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25808">[ date ]</a>
              <a href="thread.html#25808">[ thread ]</a>
              <a href="subject.html#25808">[ subject ]</a>
              <a href="author.html#25808">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 25/04/2023 12:14 am, David Touzeau wrote:
&gt;<i> Thanks Amos for the mistake, yes my explains was wrong.
</I>&gt;<i> Your are right, the first object !allowed_domains matches, so squid 
</I>&gt;<i> usually compute the second object. This an expected behavior.
</I>&gt;<i>
</I>&gt;<i> According your suggest my problem was the first rule &quot;http_access 
</I>&gt;<i> allow noauth_sites&quot; in first place.
</I>&gt;<i> yes, it will allow requests but, requests will be allowed for all 
</I>&gt;<i> other rules too.
</I>&gt;<i> It make sense, why compute all others rules if the first one is allowed ?
</I>&gt;<i>
</I>&gt;<i> if a add office365.com in noauth_sites object but i did not want 
</I>&gt;<i> office365.com for limited_users, the noauth_sites in first place will 
</I>&gt;<i> disable all &quot;deny&quot; rules.
</I>&gt;<i>
</I>&gt;<i> I'm wrong ?
</I>
I assume the ACL name &quot;noauth_...&quot; means the domains listed there are to 
be accepted without checking the authentication.
In that case you **cannot** check (aka require) authentication before 
allowing them.

To have any authentication-based special handing on a domain requires 
that authentication happens.

So you have the choice for any given domain, whether to always-allow 
(no-auth for everybody) or to require *everyone* login before deciding 
allow/deny.


HTH
Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="025803.html">[squid-users] %LOGIN place in squid 5.8 acls
</A></li>
	<LI>Next message (by thread): <A HREF="025806.html">[squid-users] Caching uncachable resources
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25808">[ date ]</a>
              <a href="thread.html#25808">[ thread ]</a>
              <a href="subject.html#25808">[ subject ]</a>
              <a href="author.html#25808">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
