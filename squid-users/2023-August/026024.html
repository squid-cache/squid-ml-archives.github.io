<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid 6.1 esi compile error, ubuntu 22.04
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%206.1%20esi%20compile%20error%2C%20ubuntu%2022.04&In-Reply-To=%3C9c02114b-8244-d595-0fe3-3a97dfd42b75%40belkam.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026023.html">
   <LINK REL="Next"  HREF="026025.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid 6.1 esi compile error, ubuntu 22.04</H1>
    <B>Dmitry Melekhov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid%206.1%20esi%20compile%20error%2C%20ubuntu%2022.04&In-Reply-To=%3C9c02114b-8244-d595-0fe3-3a97dfd42b75%40belkam.com%3E"
       TITLE="[squid-users] squid 6.1 esi compile error, ubuntu 22.04">dm at belkam.com
       </A><BR>
    <I>Mon Aug  7 08:00:15 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="026023.html">[squid-users] Problem with 6.1 squidclient mgr:
</A></li>
        <LI>Next message (by thread): <A HREF="026025.html">[squid-users] squid 6.1 esi compile error, ubuntu 22.04
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26024">[ date ]</a>
              <a href="thread.html#26024">[ thread ]</a>
              <a href="subject.html#26024">[ subject ]</a>
              <a href="author.html#26024">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello!


Built&#160; using --disable-esi without problems.



Could you tell me what can cause this?



/bin/bash ../../libtool&#160; --tag=CXX&#160;&#160; --mode=compile g++ -std=c++17 
-DHAVE_CONFIG_H -DDEFAULT_CONFIG_FILE=\&quot;/etc/squid/squid.conf\&quot; 
-DDEFAULT_SQUID_DATA_DIR=\&quot;/usr/share/squid\&quot; 
-DDEFAULT_SQUID_CONFIG_DIR=\&quot;/etc/squid\&quot;&#160;&#160; -I../.. -I../../include 
-I../../lib -I../../src -I../../include&#160; -isystem /usr/include/mit-krb5 
-isystem /usr/include/mit-krb5 -I../../libltdl&#160; -Wall -Wextra 
-Wimplicit-fallthrough=5 -Wpointer-arith -Wwrite-strings -Wcomments 
-Wshadow -Wmissing-declarations -Woverloaded-virtual -Werror -pipe 
-D_REENTRANT -m64&#160;&#160;&#160; -g -O2 -MT Libxml2Parser.lo -MD -MP -MF 
$depbase.Tpo -c -o Libxml2Parser.lo Libxml2Parser.cc &amp;&amp;\
mv -f $depbase.Tpo $depbase.Plo
libtool: compile:&#160; g++ -std=c++17 -DHAVE_CONFIG_H 
-DDEFAULT_CONFIG_FILE=\&quot;/etc/squid/squid.conf\&quot; 
-DDEFAULT_SQUID_DATA_DIR=\&quot;/usr/share/squid\&quot; 
-DDEFAULT_SQUID_CONFIG_DIR=\&quot;/etc/squid\&quot; -I../.. -I../../include 
-I../../lib -I../../src -I../../include -isystem /usr/include/mit-krb5 
-isystem /usr/include/mit-krb5 -I../../libltdl -Wall -Wextra 
-Wimplicit-fallthrough=5 -Wpointer-arith -Wwrite-strings -Wcomments 
-Wshadow -Wmissing-declarations -Woverloaded-virtual -Werror -pipe 
-D_REENTRANT -m64 -g -O2 -MT Libxml2Parser.lo -MD -MP -MF 
.deps/Libxml2Parser.Tpo -c Libxml2Parser.cc&#160; -fPIC -DPIC -o 
.libs/Libxml2Parser.o
In file included from Libxml2Parser.cc:20:
../../src/esi/Libxml2Parser.h:66:13: error: 'xmlParserCtxtPtr' does not 
name a type
 &#160;&#160; 66 |&#160;&#160;&#160;&#160; mutable xmlParserCtxtPtr parser; /* our parser */
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^~~~~~~~~~~~~~~~
Libxml2Parser.cc:45:8: error: 'htmlDocPtr' does not name a type
 &#160;&#160; 45 | static htmlDocPtr entity_doc = nullptr;
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^~~~~~~~~~
Libxml2Parser.cc:51:43: error: 'xmlChar' does not name a type
 &#160;&#160; 51 | esi_startElementSAXFunc(void * ctx, const xmlChar * name, const 
xmlChar ** atts)
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^~~~~~~
Libxml2Parser.cc:51:65: error: 'xmlChar' does not name a type
 &#160;&#160; 51 | esi_startElementSAXFunc(void * ctx, const xmlChar * name, const 
xmlChar ** atts)
|<i> ^~~~~~~
</I>Libxml2Parser.cc: In function 'void esi_startElementSAXFunc(void*, const 
int*, const int**)':
Libxml2Parser.cc:54:5: error: 'xmlChar' was not declared in this scope
 &#160;&#160; 54 |&#160;&#160;&#160;&#160; xmlChar **tmp = (xmlChar **)atts;
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160; ^~~~~~~
Libxml2Parser.cc:54:15: error: 'tmp' was not declared in this scope; did 
you mean 'tm'?
 &#160;&#160; 54 |&#160;&#160;&#160;&#160; xmlChar **tmp = (xmlChar **)atts;
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^~~
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; tm
Libxml2Parser.cc:54:32: error: expected primary-expression before ')' token
 &#160;&#160; 54 |&#160;&#160;&#160;&#160; xmlChar **tmp = (xmlChar **)atts;
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^
Libxml2Parser.cc: At global scope:
Libxml2Parser.cc:70:40: error: 'xmlChar' does not name a type
 &#160;&#160; 70 | esi_endElementSAXFunc(void *ctx, const xmlChar *name)
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^~~~~~~
Libxml2Parser.cc:77:37: error: 'xmlChar' does not name a type
 &#160;&#160; 77 | esi_commentSAXFunc(void *ctx, const xmlChar *value)
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^~~~~~~
Libxml2Parser.cc:84:40: error: 'xmlChar' does not name a type
 &#160;&#160; 84 | esi_charactersSAXFunc(void *ctx, const xmlChar *ch, int len)
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^~~~~~~
Libxml2Parser.cc:90:8: error: 'xmlEntityPtr' does not name a type
 &#160;&#160; 90 | static xmlEntityPtr
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^~~~~~~~~~~~
Libxml2Parser.cc: In constructor 
'ESILibxml2Parser::ESILibxml2Parser(ESIParserClient*)':
Libxml2Parser.cc:110:5: error: 'xmlSAXHandler' was not declared in this 
scope
 &#160; 110 |&#160;&#160;&#160;&#160; xmlSAXHandler sax;
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160; ^~~~~~~~~~~~~
Libxml2Parser.cc:111:5: error: 'xmlInitParser' was not declared in this 
scope
 &#160; 111 |&#160;&#160;&#160;&#160; xmlInitParser();
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160; ^~~~~~~~~~~~~
Libxml2Parser.cc:112:13: error: 'sax' was not declared in this scope; 
did you mean 'max'?
 &#160; 112 |&#160;&#160;&#160;&#160; memset(&amp;sax, 0, sizeof(sax));
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^~~
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; max
Libxml2Parser.cc:117:21: error: 'esi_getEntitySAXFunc' was not declared 
in this scope
 &#160; 117 |&#160;&#160;&#160;&#160; sax.getEntity = esi_getEntitySAXFunc;
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^~~~~~~~~~~~~~~~~~~~
Libxml2Parser.cc:120:5: error: 'parser' was not declared in this scope; 
did you mean 'Parser'?
 &#160; 120 |&#160;&#160;&#160;&#160; parser = xmlCreatePushParserCtxt(&amp;sax, static_cast&lt;void 
*&gt;(this), nullptr, 0, nullptr);
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160; ^~~~~~
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160; Parser
Libxml2Parser.cc:120:14: error: 'xmlCreatePushParserCtxt' was not 
declared in this scope
 &#160; 120 |&#160;&#160;&#160;&#160; parser = xmlCreatePushParserCtxt(&amp;sax, static_cast&lt;void 
*&gt;(this), nullptr, 0, nullptr);
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^~~~~~~~~~~~~~~~~~~~~~~
Libxml2Parser.cc:122:9: error: 'entity_doc' was not declared in this scope
 &#160; 122 |&#160;&#160;&#160;&#160; if (entity_doc == nullptr)
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^~~~~~~~~~
Libxml2Parser.cc:123:22: error: 'htmlNewDoc' was not declared in this scope
 &#160; 123 |&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; entity_doc = htmlNewDoc(nullptr, nullptr);
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^~~~~~~~~~
Libxml2Parser.cc: In destructor 'virtual 
ESILibxml2Parser::~ESILibxml2Parser()':
Libxml2Parser.cc:128:23: error: 'parser' was not declared in this scope; 
did you mean 'Parser'?
 &#160; 128 |&#160;&#160;&#160;&#160; xmlFreeParserCtxt(parser);
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^~~~~~
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Parser
Libxml2Parser.cc:128:5: error: 'xmlFreeParserCtxt' was not declared in 
this scope
 &#160; 128 |&#160;&#160;&#160;&#160; xmlFreeParserCtxt(parser);
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160; ^~~~~~~~~~~~~~~~~
Libxml2Parser.cc: In member function 'virtual bool 
ESILibxml2Parser::parse(const char*, size_t, bool)':
Libxml2Parser.cc:135:27: error: 'parser' was not declared in this scope; 
did you mean 'Parser'?
 &#160; 135 |&#160;&#160;&#160;&#160; return (xmlParseChunk(parser, dataToParse, lengthOfData, 
endOfStream) == 0);
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^~~~~~
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Parser
Libxml2Parser.cc:135:13: error: 'xmlParseChunk' was not declared in this 
scope
 &#160; 135 |&#160;&#160;&#160;&#160; return (xmlParseChunk(parser, dataToParse, lengthOfData, 
endOfStream) == 0);
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^~~~~~~~~~~~~
Libxml2Parser.cc: In member function 'virtual long int 
ESILibxml2Parser::lineNumber() const':
Libxml2Parser.cc:141:43: error: 'parser' was not declared in this scope; 
did you mean 'Parser'?
 &#160; 141 |&#160;&#160;&#160;&#160; return (long int)xmlSAX2GetLineNumber(parser);
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^~~~~~
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Parser
Libxml2Parser.cc:141:22: error: 'xmlSAX2GetLineNumber' was not declared 
in this scope
 &#160; 141 |&#160;&#160;&#160;&#160; return (long int)xmlSAX2GetLineNumber(parser);
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^~~~~~~~~~~~~~~~~~~~
Libxml2Parser.cc: In member function 'virtual const char* 
ESILibxml2Parser::errorString() const':
Libxml2Parser.cc:147:5: error: 'xmlErrorPtr' was not declared in this scope
 &#160; 147 |&#160;&#160;&#160;&#160; xmlErrorPtr error = xmlGetLastError();
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160; ^~~~~~~~~~~
Libxml2Parser.cc:149:9: error: 'error' was not declared in this scope; 
did you mean 'perror'?
 &#160; 149 |&#160;&#160;&#160;&#160; if (error == nullptr)
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^~~~~
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; perror
Libxml2Parser.cc:152:12: error: 'error' was not declared in this scope; 
did you mean 'perror'?
 &#160; 152 |&#160;&#160;&#160;&#160; return error-&gt;message;
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ^~~~~
 &#160;&#160;&#160;&#160;&#160; |&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; perror
make[3]: *** [Makefile:886: Libxml2Parser.lo] Error 1
make[3]: Leaving directory '/var/local/files/squid-6.1/src/esi'
make[2]: *** [Makefile:6005: all-recursive] Error 1
make[2]: Leaving directory '/var/local/files/squid-6.1/src'
make[1]: *** [Makefile:5005: all] Error 2
make[1]: Leaving directory '/var/local/files/squid-6.1/src'
make: *** [Makefile:600: all-recursive] Error 1


And how to fix it?

Thank you!


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="026023.html">[squid-users] Problem with 6.1 squidclient mgr:
</A></li>
	<LI>Next message (by thread): <A HREF="026025.html">[squid-users] squid 6.1 esi compile error, ubuntu 22.04
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26024">[ date ]</a>
              <a href="thread.html#26024">[ thread ]</a>
              <a href="subject.html#26024">[ subject ]</a>
              <a href="author.html#26024">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
