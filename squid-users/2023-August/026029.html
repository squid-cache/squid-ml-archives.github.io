<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Recent Squid 4 versions show ERR_CANNOT_FORWARD instead of ERR_DNS_FAIL
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Recent%20Squid%204%20versions%20show%20ERR_CANNOT_FORWARD%0A%20instead%20of%20ERR_DNS_FAIL&In-Reply-To=%3CCAARumM%3DNsEt6Lkyec7bEWPOLb93k1TfOrk%3DuzWr%2Bb5cQj8hJew%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026026.html">
   <LINK REL="Next"  HREF="026030.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Recent Squid 4 versions show ERR_CANNOT_FORWARD instead of ERR_DNS_FAIL</H1>
    <B>Tommy Brunn</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Recent%20Squid%204%20versions%20show%20ERR_CANNOT_FORWARD%0A%20instead%20of%20ERR_DNS_FAIL&In-Reply-To=%3CCAARumM%3DNsEt6Lkyec7bEWPOLb93k1TfOrk%3DuzWr%2Bb5cQj8hJew%40mail.gmail.com%3E"
       TITLE="[squid-users] Recent Squid 4 versions show ERR_CANNOT_FORWARD instead of ERR_DNS_FAIL">tommy.brunn at klarna.com
       </A><BR>
    <I>Wed Aug  9 12:14:49 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="026026.html">[squid-users] squid 6.1 esi compile error, ubuntu 22.04
</A></li>
        <LI>Next message (by thread): <A HREF="026030.html">[squid-users] Recent Squid 4 versions show ERR_CANNOT_FORWARD instead of ERR_DNS_FAIL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26029">[ date ]</a>
              <a href="thread.html#26029">[ thread ]</a>
              <a href="subject.html#26029">[ subject ]</a>
              <a href="author.html#26029">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>It's been 5 years since this was originally posted, but I am currently
in the process of upgrading from Squid 4.13 to 5.8, and have
encountered the same scenario when running our integration tests to
validate the existing behavior. To summarize, given the exact same
configuration in both versions, making a CONNECT request for a domain
that doesn't exist used to result in a 503 response with an
ERR_DNS_FAIL error. In Squid 5.8 this instead results in a 500
response with an ERR_CANNOT_FORWARD error.

For reference, I am using the version of Squid that is packaged in the
most recent version of Amazon Linux 2023. As requested in the last
email regarding this issue, I have attached verbose debug logs from
squid, as well as the squid configuration file, the full output of
`squid -v` and finally the output of `dig` on the non-existent domain
from the same context as squid is running in:
<A HREF="https://gist.github.com/Nevon/ee4d379877b9570cccb4f21df7382a63">https://gist.github.com/Nevon/ee4d379877b9570cccb4f21df7382a63</A>

Does anyone know if this is an intentional change or a bug? If it's an
intentional change, what is the rationale behind the change and is it
mentioned anywhere in a pull request or similar? I wasn't able to find
any other references to this other than this one thread with no
resolution from October 2018.

Thanks!

-- 
Tommy Brunn

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="026026.html">[squid-users] squid 6.1 esi compile error, ubuntu 22.04
</A></li>
	<LI>Next message (by thread): <A HREF="026030.html">[squid-users] Recent Squid 4 versions show ERR_CANNOT_FORWARD instead of ERR_DNS_FAIL
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26029">[ date ]</a>
              <a href="thread.html#26029">[ thread ]</a>
              <a href="subject.html#26029">[ subject ]</a>
              <a href="author.html#26029">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
