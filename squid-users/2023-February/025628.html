<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Reverse Proxy Redirect - Stops in Browser
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Reverse%20Proxy%20Redirect%20-%20Stops%20in%20Browser&In-Reply-To=%3C56bfadbc-7b76-4f40-9c1f-af9ac32f8890%40app.fastmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025627.html">
   <LINK REL="Next"  HREF="025632.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Reverse Proxy Redirect - Stops in Browser</H1>
    <B>squid at buglecreek.com</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Reverse%20Proxy%20Redirect%20-%20Stops%20in%20Browser&In-Reply-To=%3C56bfadbc-7b76-4f40-9c1f-af9ac32f8890%40app.fastmail.com%3E"
       TITLE="[squid-users] Reverse Proxy Redirect - Stops in Browser">squid at buglecreek.com
       </A><BR>
    <I>Wed Feb 15 21:56:06 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="025627.html">[squid-users] HTTPS Request Header acl
</A></li>
        <LI>Next message (by thread): <A HREF="025632.html">[squid-users] Reverse Proxy Redirect - Stops in Browser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25628">[ date ]</a>
              <a href="thread.html#25628">[ thread ]</a>
              <a href="subject.html#25628">[ subject ]</a>
              <a href="author.html#25628">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have a reverse proxy that that does the following:

acl example_www url_regex -i ^https?:\/\/example-www?.example.com.*
http_access allow internal_IPs example_www
deny_info <A HREF="https://other-www.other.com%R">https://other-www.other.com%R</A> example_www
http_access deny example_www

When a tool or a browser goes to <A HREF="http://example-www.example.com">http://example-www.example.com</A> it immediately sends them to <A HREF="https://other-www.other.com">https://other-www.other.com</A> as expected.

When a tool or a browser goes to <A HREF="https://example-www.example.com">https://example-www.example.com</A> it brings up in chrome the Your connection is not private page and when you hit Advanced and hit the allow to proceed it is then redirected to the site.

This is causing us come compliance issues due to the tool thinking we are running a non-compliant https page since user interaction is required to get to the other page.

Is there a way to send to the other page earlier so the tool or user doesn't even see the Your connection is not private page?  I just want to only aloow the internal IPs and cut everyone else off.

I've tried taking out the deny_info, but that sends the user and tool to a squid error page which basically fails the test as well since it's on the same site.
I've also tried doing a TCP_RESET instead, but for some reason the squid actually send the word reset back to the client the first time and again would fail the test. 

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="025627.html">[squid-users] HTTPS Request Header acl
</A></li>
	<LI>Next message (by thread): <A HREF="025632.html">[squid-users] Reverse Proxy Redirect - Stops in Browser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25628">[ date ]</a>
              <a href="thread.html#25628">[ thread ]</a>
              <a href="subject.html#25628">[ subject ]</a>
              <a href="author.html#25628">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
