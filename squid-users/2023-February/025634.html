<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Portal Splash Page 4.7 -&gt; 5.7 FATAL: (ext_session_acl): Failed to open session db
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Portal%20Splash%20Page%204.7%20-%3E%205.7%20FATAL%3A%0A%20%28ext_session_acl%29%3A%20Failed%20to%20open%20session%20db&In-Reply-To=%3C7ec11549-164f-7aa2-87ce-ef87dd7f3303%40dsi-as.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025653.html">
   <LINK REL="Next"  HREF="025636.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Portal Splash Page 4.7 -&gt; 5.7 FATAL: (ext_session_acl): Failed to open session db</H1>
    <B>MATYAS, Tibor</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Portal%20Splash%20Page%204.7%20-%3E%205.7%20FATAL%3A%0A%20%28ext_session_acl%29%3A%20Failed%20to%20open%20session%20db&In-Reply-To=%3C7ec11549-164f-7aa2-87ce-ef87dd7f3303%40dsi-as.de%3E"
       TITLE="[squid-users] Portal Splash Page 4.7 -&gt; 5.7 FATAL: (ext_session_acl): Failed to open session db">tibor.matyas at dsi-as.de
       </A><BR>
    <I>Fri Feb 17 09:09:14 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="025653.html">[squid-users] Log 407-transactions when username is known
</A></li>
        <LI>Next message (by thread): <A HREF="025636.html">[squid-users] Portal Splash Page 4.7 -&gt; 5.7 FATAL: (ext_session_acl): Failed to open session db
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25634">[ date ]</a>
              <a href="thread.html#25634">[ thread ]</a>
              <a href="subject.html#25634">[ subject ]</a>
              <a href="author.html#25634">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello List,

trying to move from 4.7 to 5.7 (on gentoo Linux).
Splash portal is in use 
<A HREF="https://wiki.squid-cache.org/ConfigExamples/Portal/Splash">https://wiki.squid-cache.org/ConfigExamples/Portal/Splash</A>

squid -k parse -&gt; OK
/var/lib/squid/session/ is clean, old berkeleyDB session files deleted.
Owner of the folder is the squid user.

Squid compiled with tdb:

Squid Cache: Version 5.7
Service Name: squid
Gentoo squid-5.7-r1 (r: NONE)
This binary uses OpenSSL 1.1.1t&#160; 7 Feb 2023. For legal restrictions on 
distribution see <A HREF="https://www.openssl.org/source/license.html">https://www.openssl.org/source/license.html</A>
configure options:&#160; '--prefix=/usr' '--build=x86_64-pc-linux-gnu' 
'--host=x86_64-pc-linux-gnu' '--mandir=/usr/share/man' 
'--infodir=/usr/share/info' '--datadir=/usr/share' '--sysconfdir=/etc' 
'--localstatedir=/var/lib' '--datarootdir=/usr/share' 
'--disable-dependency-tracking' '--disable-silent-rules' 
'--disable-static' '--docdir=/usr/share/doc/squid-5.7-r1' 
'--htmldir=/usr/share/doc/squid-5.7-r1/html' '--with-sysroot=/' 
'--libdir=/usr/lib64' '--datadir=/usr/share/squid' 
'--libexecdir=/usr/libexec/squid' '--localstatedir=/var' 
'--sysconfdir=/etc/squid' '--with-default-user=squid' 
'--with-logdir=/var/log/squid' '--with-pidfile=/run/squid.pid' 
'--enable-build-info=Gentoo squid-5.7-r1 (r: NONE)' 
'--enable-log-daemon-helpers' '--enable-url-rewrite-helpers' 
'--enable-cache-digests' '--enable-delay-pools' '--enable-disk-io' 
'--enable-eui' '--enable-icmp' '--enable-ipv6' 
'--enable-follow-x-forwarded-for' '--enable-removal-policies=lru,heap' 
'--disable-strict-error-checking' '--disable-arch-native' 
'--with-large-files' '--with-build-environment=default' '--with-tdb' 
'--without-included-ltdl' '--with-ltdl-include=/usr/include' 
'--with-ltdl-lib=/usr/lib64' '--with-libcap' '--enable-snmp' 
'--with-openssl' '--with-nettle' '--with-gnutls' '--enable-ssl-crtd' 
'--without-systemd' '--without-cppunit' '--disable-ecap' '--disable-esi' 
'--disable-expat' '--disable-libxml2' '--enable-htcp' '--enable-wccp' 
'--enable-wccpv2' '--without-mit-krb5' '--without-heimdal-krb5' 
'--enable-linux-netfilter' '--enable-storeio=aufs,diskd,rock,ufs' 
'--enable-auth-basic=NCSA,POP3,getpwnam,PAM' '--enable-auth-digest=file' 
'--enable-auth-ntlm=none' '--enable-auth-negotiate=none' 
'--enable-external-acl-helpers=file_userip,session,unix_group,delayer,time_quota' 
'build_alias=x86_64-pc-linux-gnu' 'host_alias=x86_64-pc-linux-gnu' 
'CC=x86_64-pc-linux-gnu-gcc' 'CFLAGS=-march=nocona -O2 -pipe 
-fomit-frame-pointer' 'LDFLAGS=-Wl,-O1 -Wl,--as-needed' 
'CXXFLAGS=-march=nocona -O2 -pipe -fomit-frame-pointer' 
'BUILDCXX=x86_64-pc-linux-gnu-g++' 'BUILDCXXFLAGS=-march=nocona -O2 
-pipe -fomit-frame-pointer'

starting squid results in:

FATAL: (ext_session_acl): Failed to open session db 
'/var/lib/squid/session/session'
2023/02/17 09:21:11 kid1| WARNING: external_acl_type #Hlpr27652 exited
 &#160;&#160;&#160; current master transaction: master3
2023/02/17 09:21:11 kid1| Too few external_acl_type processes are 
running (need 1/1)
 &#160;&#160;&#160; current master transaction: master3
2023/02/17 09:21:11 kid1| Starting new helpers
 &#160;&#160;&#160; current master transaction: master3
2023/02/17 09:21:11 kid1| helperOpenServers: Starting 1/1 
'ext_session_acl' processes
 &#160;&#160;&#160; current master transaction: master3

What am I missing?

Thanks a lot and br
Tibor




--------------------------------------------------
DSI Aerospace Technologie GmbH

Sitz der Gesellschaft: Otto-Lilienthal-Str. 1, D-28199 Bremen, Germany
Web: <A HREF="http://www.dsi-as.de">http://www.dsi-as.de</A>

Geschaeftsfuehrer: Dr.-Ing. Christian Dierker
                   M. Sc. Elias Hashem

HRB 17726, Amtsgericht Bremen
USt-IdNr.: DE 192 681 774
--------------------------------------------------




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="025653.html">[squid-users] Log 407-transactions when username is known
</A></li>
	<LI>Next message (by thread): <A HREF="025636.html">[squid-users] Portal Splash Page 4.7 -&gt; 5.7 FATAL: (ext_session_acl): Failed to open session db
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25634">[ date ]</a>
              <a href="thread.html#25634">[ thread ]</a>
              <a href="subject.html#25634">[ subject ]</a>
              <a href="author.html#25634">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
