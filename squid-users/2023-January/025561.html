<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] SSLBUMP for specific domains
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SSLBUMP%20for%20specific%20domains&In-Reply-To=%3Cb57bd803-0991-eb62-ad9c-c0e2844dc9e5%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025558.html">
   <LINK REL="Next"  HREF="025554.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] SSLBUMP for specific domains</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20SSLBUMP%20for%20specific%20domains&In-Reply-To=%3Cb57bd803-0991-eb62-ad9c-c0e2844dc9e5%40treenet.co.nz%3E"
       TITLE="[squid-users] SSLBUMP for specific domains">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Jan 13 23:08:45 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="025558.html">[squid-users] SSLBUMP for specific domains
</A></li>
        <LI>Next message (by thread): <A HREF="025554.html">[squid-users] packages for alma linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25561">[ date ]</a>
              <a href="thread.html#25561">[ thread ]</a>
              <a href="subject.html#25561">[ subject ]</a>
              <a href="author.html#25561">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>

On 13/01/2023 10:47 am, andre.bolinhas wrote:
&gt;<i> So is a bug for 500 or a bad configuration?
</I>&gt;<i> I have also tried this setup and seams to &quot;fix&quot; the tcp_tunnel/500
</I>...
&gt;<i> Basically the changes that I made is on peek step changing from
</I>&gt;<i> ssl_bump peek ssl_step1
</I>&gt;<i> To
</I>&gt;<i> acl NotPeek any-of Group26
</I>
You should not need &quot;any-of&quot; ACL with a single entry. Just use &quot;Group26&quot; 
directly.

&gt;<i> ssl_bump peek !NotPeek
</I>&gt;<i>
</I>&gt;<i> This is a good idea?
</I>
What you have done here is tell Squid to peek at both step1 and step2.
The peek action is not relevant at step3, which lets Squid reach the 
splice rules.

The &quot;bump&quot; action will now be performed at step1 before any details of 
the server cert are available.
This can work, but generally is a bad idea with current TLS. I recommend 
doing a peek, stare, bump sequence instead for the NotPeek/Group26 traffic.

Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="025558.html">[squid-users] SSLBUMP for specific domains
</A></li>
	<LI>Next message (by thread): <A HREF="025554.html">[squid-users] packages for alma linux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25561">[ date ]</a>
              <a href="thread.html#25561">[ thread ]</a>
              <a href="subject.html#25561">[ subject ]</a>
              <a href="author.html#25561">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
