<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Issues with blacklist and a domain.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Issues%20with%20blacklist%20and%20a%20domain.&In-Reply-To=%3C000501d92a5a%2480267ed0%2480737c70%24%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025571.html">
   <LINK REL="Next"  HREF="025567.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Issues with blacklist and a domain.</H1>
    <B>ngtech1ltd at gmail.com</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Issues%20with%20blacklist%20and%20a%20domain.&In-Reply-To=%3C000501d92a5a%2480267ed0%2480737c70%24%40gmail.com%3E"
       TITLE="[squid-users] Issues with blacklist and a domain.">ngtech1ltd at gmail.com
       </A><BR>
    <I>Tue Jan 17 10:00:15 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="025571.html">[squid-users] Issues with blacklist and a domain.
</A></li>
        <LI>Next message (by thread): <A HREF="025567.html">[squid-users] Since Squid-Cache wiki is moving to another era I had to...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25572">[ date ]</a>
              <a href="thread.html#25572">[ thread ]</a>
              <a href="subject.html#25572">[ subject ]</a>
              <a href="author.html#25572">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey,

What you are using is regular expression and as Matus wrote you need dstdom and not dst_domrex.
To understand better what maybe is going on we can try to use a regex visual editor.
I like very much:
<A HREF="https://rubular.com/">https://rubular.com/</A>

What you actually want is the next:
\.(party|porn|xxx|vip|me)$

Which will only match the suffix of a domain.
What you are writing in your file is actually the equivalent of:
.*(party|porn|xxx|vip|me).*

Which shouldn't match to the domain you mentioned and I assume it might be because of something else.
What is the error message you are receiving in the browser?
Also, how do you use your proxy, forward or Intercept mode?

Eliezer

----
Eliezer Croitoru
NgTech, Tech Support
Mobile: +972-5-28704261
Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>
Web: <A HREF="https://ngtech.co.il/">https://ngtech.co.il/</A>
My-Tube: <A HREF="https://tube.ngtech.co.il/">https://tube.ngtech.co.il/</A>

-----Original Message-----
From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; On Behalf Of Periko Support
Sent: Tuesday, 17 January 2023 2:29
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Issues with blacklist and a domain.

I got the same question, why is doing that...

This is the blacklist setting:

acl blacklist dstdom_regex -i &quot;/var/squid/acl/blacklist.acl&quot;

http_access deny blacklist

Regards!!!

On Mon, Jan 16, 2023 at 1:47 PM &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Hey,
</I>&gt;<i>
</I>&gt;<i> I am not sure how exactly how the domain:
</I>&gt;<i> dof.gob.mx
</I>&gt;<i>
</I>&gt;<i> is being blocked by the:
</I>&gt;<i> .me
</I>&gt;<i>
</I>&gt;<i> Domain suffix?
</I>&gt;<i> What exactly your squid.conf is doing? (remove private info).
</I>&gt;<i>
</I>&gt;<i> Eliezer
</I>&gt;<i>
</I>&gt;<i> ----
</I>&gt;<i> Eliezer Croitoru
</I>&gt;<i> NgTech, Tech Support
</I>&gt;<i> Mobile: +972-5-28704261
</I>&gt;<i> Email: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>
</I>&gt;<i> Web: <A HREF="https://ngtech.co.il/">https://ngtech.co.il/</A>
</I>&gt;<i> My-Tube: <A HREF="https://tube.ngtech.co.il/">https://tube.ngtech.co.il/</A>
</I>&gt;<i>
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; On Behalf Of Periko Support
</I>&gt;<i> Sent: Monday, 16 January 2023 20:30
</I>&gt;<i> To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> Subject: [squid-users] Issues with blacklist and a domain.
</I>&gt;<i>
</I>&gt;<i> Hello people.
</I>&gt;<i>
</I>&gt;<i> I running squid 5.7, I got an issue that would like to know if I could fix this.
</I>&gt;<i> In my blacklist I got this entries:
</I>&gt;<i>
</I>&gt;<i> .party
</I>&gt;<i> .porn
</I>&gt;<i> .xxx
</I>&gt;<i> .vip
</I>&gt;<i> .me
</I>&gt;<i>
</I>&gt;<i> Which I have found on adult sites that I want to block.
</I>&gt;<i>
</I>&gt;<i> Now, the problem is the &quot;.me&quot; because I found that it is blocking a
</I>&gt;<i> government domain on my country.
</I>&gt;<i>
</I>&gt;<i> &quot;dof.gob.mx&quot;
</I>&gt;<i>
</I>&gt;<i> If I remove &quot;.me&quot; from my blacklist I can surf on my government site.
</I>&gt;<i>
</I>&gt;<i> Then what I see is that once squid detects &quot;.m&quot; it will block any domain.
</I>&gt;<i>
</I>&gt;<i> If I add the url on the whitelist won't fix the issue.
</I>&gt;<i>
</I>&gt;<i> Any recommendations?
</I>&gt;<i>
</I>&gt;<i> Regards!!!
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="025571.html">[squid-users] Issues with blacklist and a domain.
</A></li>
	<LI>Next message (by thread): <A HREF="025567.html">[squid-users] Since Squid-Cache wiki is moving to another era I had to...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25572">[ date ]</a>
              <a href="thread.html#25572">[ thread ]</a>
              <a href="subject.html#25572">[ subject ]</a>
              <a href="author.html#25572">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
