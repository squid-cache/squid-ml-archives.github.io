<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Making squid into socks proxy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Making%20squid%20into%20socks%20proxy&In-Reply-To=%3Ce9bad6c4-141a-e5ae-4fe2-c74f262308e6%40tnetconsulting.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025948.html">
   <LINK REL="Next"  HREF="025950.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Making squid into socks proxy</H1>
    <B>Grant Taylor</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Making%20squid%20into%20socks%20proxy&In-Reply-To=%3Ce9bad6c4-141a-e5ae-4fe2-c74f262308e6%40tnetconsulting.net%3E"
       TITLE="[squid-users] Making squid into socks proxy">gtaylor at tnetconsulting.net
       </A><BR>
    <I>Mon Jul 10 23:52:35 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="025948.html">[squid-users] Making squid into socks proxy
</A></li>
        <LI>Next message (by thread): <A HREF="025950.html">[squid-users] instances/queues when same script for multiple external_acl_type rules
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25949">[ date ]</a>
              <a href="thread.html#25949">[ thread ]</a>
              <a href="subject.html#25949">[ subject ]</a>
              <a href="author.html#25949">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 7/10/23 2:36&#8239;PM, Francesco Chemolli wrote:
&gt;<i> Hi Robert,
</I>
Hi Francesco,

&gt;<i> in my understanding that configuration&#160;turns Squid into a Socks 
</I>&gt;<i> client. Outbound squid connections will then be proxied through a socks 
</I>&gt;<i> proxy.
</I>
According to &quot;this  page&quot; [1] linked from the &quot;How to enable SOCKS5 for 
Squid Proxy?&quot; page [2] that Rob linked to, this seems like it is both 
client /and/ server support.

--8&lt;--
Details:

Squid handles many HTTP related protocols. But presently is unable to 
natively accept or send HTTP connections over SOCKS.

The aim of this project will be to make http_port accept SOCKS 
connections and make outgoing connections to SOCKS cache_peers so that 
Squid can send requests easily through to SOCKS gateways or act as an 
HTTP SOCKS gateway itself.
--&gt;8--

Particularly germane are &quot;accept ... HTTP connections over SOCKS&quot;, &quot;make 
http_port accept SOCKS connections&quot;, and &quot;act as an HTTP SOCKS gateway 
itself&quot;.

&gt;<i> There&#160;might be a point, in some use cases, but I agree it's a stretch.
</I>&gt;<i> For instance it could help if there's a need to log URLs being accessed, 
</I>&gt;<i> which socks by itself can' tdo; it might also work as a TLS interception 
</I>&gt;<i> proxy which then needs to access some tightly-controlled network segment.
</I>
I can see a modicum of value in making Squid be a SOCKS client -- via 
something more graceful than an LD_PRELOAD.  I suspect that I'd turn to 
a different SOCKS daemon before I'd turn to Squid as such.  Dante comes 
to mind.

I can see a LOT of value in SOCKS proxy support.  Especially 
authenticated access to the SOCKS proxy.  Even more so if you 
communicate with the proxy over encrypted channels

In some ways a SOCKS proxy acts sort of like a remote TCP/IP client / 
stack.  Combine this functionality with authentication and I can easily 
allow controlled remote access into a segregated network and know which 
authenticated user did what.  Much like a VPN, but at the application level.

At a former job we used a lot of SOCKS servers.  We would have a pair 
(for redundancy) of SOCKS servers co-located at client networks and 
required authentication of our employees to be able to utilize said 
SOCKS servers.  This configuration made it relatively trivial to our 
employees change which SOCKS server they were using to switch between 
the client they were doing administration work for.

One of the biggest advantages that I saw with SOCKS was the VPN like 
connectivity, which required authentication, and the ability to filter 
each packet / connection completely independently of the underlying 
transport between the employee and the SOCKS server(s).

What's more is that the SOCKS servers appeared as if they were on the 
client's network.  Thus the, and the remote employees using them, could 
access things on the client's network without any routing changes to the 
client's network.

Think of it sort of like a remote extension of a network in a manner 
that's completely divorced from the underlying network topology / 
transport between clients and the SOCKS server.

This complete separation also means that things that aren't expressly 
configured to use the SOCKS server can't accidentally be routed through 
the SOCKS server.  So when there is a security incident on the network, 
it will be much better isolated to one side of the SOCKS server than if 
it were a more traditional routed VPN type connection.

I can definitely see value in enabling Squid to be a SOCKS client to be 
able to utilize / benefit from the perks that SOCKS servers can offer.

I see less value in having Squid be a SOCKS server.

That being said, I wonder how closely related SOCKS server functionality 
and WebSocket support provide.  Perhaps SOCKS can be another side door 
into code needed to support WebSocket.

[1] Feature: SOCKS Support - <A HREF="http://wiki.squid-cache.org/Features/Socks">http://wiki.squid-cache.org/Features/Socks</A>

[2] How to enable SOCKS5 for Squid proxy? - 
<A HREF="https://serverfault.com/questions/820578/how-to-enable-socks5-for-squid-proxy#820612">https://serverfault.com/questions/820578/how-to-enable-socks5-for-squid-proxy#820612</A>



Grant. . . .

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="025948.html">[squid-users] Making squid into socks proxy
</A></li>
	<LI>Next message (by thread): <A HREF="025950.html">[squid-users] instances/queues when same script for multiple external_acl_type rules
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25949">[ date ]</a>
              <a href="thread.html#25949">[ thread ]</a>
              <a href="subject.html#25949">[ subject ]</a>
              <a href="author.html#25949">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
