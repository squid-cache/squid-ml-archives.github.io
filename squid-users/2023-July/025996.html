<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] [ext] FATAL: Dying from an exception handling failure; exception: [no active exception]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%5Bext%5D%20FATAL%3A%20Dying%20from%20an%20exception%20handling%0A%20failure%3B%20exception%3A%20%5Bno%20active%20exception%5D&In-Reply-To=%3CZMOG0n7J%2BpxRLV1p%40charite.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025995.html">
   <LINK REL="Next"  HREF="025997.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] [ext] FATAL: Dying from an exception handling failure; exception: [no active exception]</H1>
    <B>Ralf Hildebrandt</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%5Bext%5D%20FATAL%3A%20Dying%20from%20an%20exception%20handling%0A%20failure%3B%20exception%3A%20%5Bno%20active%20exception%5D&In-Reply-To=%3CZMOG0n7J%2BpxRLV1p%40charite.de%3E"
       TITLE="[squid-users] [ext] FATAL: Dying from an exception handling failure; exception: [no active exception]">Ralf.Hildebrandt at charite.de
       </A><BR>
    <I>Fri Jul 28 09:13:54 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="025995.html">[squid-users] FATAL: Dying from an exception handling failure; exception: [no active exception]
</A></li>
        <LI>Next message (by thread): <A HREF="025997.html">[squid-users] FATAL: Dying from an exception handling failure; exception: [no active exception]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25996">[ date ]</a>
              <a href="thread.html#25996">[ thread ]</a>
              <a href="subject.html#25996">[ subject ]</a>
              <a href="author.html#25996">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>* Waldemar Brodkorb &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">wbx at openadk.org</A>&gt;:
&gt;<i> Hi Squid community,
</I>&gt;<i> 
</I>&gt;<i> we recently updated our proxies to 6.1 on Ubuntu 22.04 (x86_64) and
</I>&gt;<i> now seeing sometime following fatal errors in the cache.log:
</I>&gt;<i> 
</I>&gt;<i> FATAL: Dying from an exception handling failure; exception: [no
</I>&gt;<i> active exception]
</I>&gt;<i> 
</I>&gt;<i> What does it mean and how can I further analyze the problem?
</I>
In most cases you'll need to run squid from within an debugger.

I use a script for that:
========================

#!/bin/bash
rm /var/run/squid.pid
echo 512 &gt;  /proc/sys/kernel/msgmni
ulimit -n 262144
ulimit -c unlimited
ulimit -v 85000000

backtrace=`mktemp`
outfile=`mktemp`
gdb -q -x /etc/service/squid5/gdbcommands /usr/sbin/squid 2&gt;&amp;1 &gt;$backtrace
cat $backtrace | \
      /usr/bin/mail -s &quot;`hostname`: Squid wurde beendet&quot; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">Ralf.Hildebrandt at charite.de</A>
rm $backtrace
rm $outfile


The file /etc/service/squid5/gdbcommands contains the commands for the
GDB debugger:

# snip
set args -NsYC
handle SIGPIPE pass nostop noprint
handle SIGTERM pass nostop noprint
handle SIGUSR1 pass nostop noprint
handle SIGHUP  pass nostop noprint
handle SIGSEGV stop
handle SIGABRT stop
run
set print pretty
backtrace full
generate-core-file
quit
# snip

I hope this helps.

-- 
Ralf Hildebrandt
Charit&#233; - Universit&#228;tsmedizin Berlin
Gesch&#228;ftsbereich IT | Abteilung Netzwerk

Campus Benjamin Franklin (CBF)
Haus I | 1. OG | Raum 105
Hindenburgdamm 30 | D-12203 Berlin

Tel. +49 30 450 570 155
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ralf.hildebrandt at charite.de</A>
<A HREF="https://www.charite.de">https://www.charite.de</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="025995.html">[squid-users] FATAL: Dying from an exception handling failure; exception: [no active exception]
</A></li>
	<LI>Next message (by thread): <A HREF="025997.html">[squid-users] FATAL: Dying from an exception handling failure; exception: [no active exception]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25996">[ date ]</a>
              <a href="thread.html#25996">[ thread ]</a>
              <a href="subject.html#25996">[ subject ]</a>
              <a href="author.html#25996">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
