<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] cachemgr.cgi &amp; Internal Error: Missing Template MGR_INDEX
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20cachemgr.cgi%20%26%20Internal%20Error%3A%20Missing%20Template%0A%20MGR_INDEX&In-Reply-To=%3C9f929826-4b70-896d-0729-ee815e64a568%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026002.html">
   <LINK REL="Next"  HREF="026004.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] cachemgr.cgi &amp; Internal Error: Missing Template MGR_INDEX</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20cachemgr.cgi%20%26%20Internal%20Error%3A%20Missing%20Template%0A%20MGR_INDEX&In-Reply-To=%3C9f929826-4b70-896d-0729-ee815e64a568%40measurement-factory.com%3E"
       TITLE="[squid-users] cachemgr.cgi &amp; Internal Error: Missing Template MGR_INDEX">rousskov at measurement-factory.com
       </A><BR>
    <I>Sat Jul 29 02:42:25 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="026002.html">[squid-users] cachemgr.cgi &amp; Internal Error: Missing Template MGR_INDEX
</A></li>
        <LI>Next message (by thread): <A HREF="026004.html">[squid-users] cachemgr.cgi &amp; Internal Error: Missing Template MGR_INDEX
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26003">[ date ]</a>
              <a href="thread.html#26003">[ thread ]</a>
              <a href="subject.html#26003">[ subject ]</a>
              <a href="author.html#26003">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 7/28/23 20:08, Brendan Kearney wrote:

&gt;<i> i am running squid 6.1 on fedora 38, and cannot get the cachemgr.cgi 
</I>&gt;<i> working on this box.&#160; I am getting the error:
</I>&gt;<i> 
</I>&gt;<i> Internal Error: Missing Template MGR_INDEX
</I>&gt;<i> 
</I>&gt;<i> when i try to connect using the cache manager interface.
</I>

Hi Brendan,

     AFAICT, Squid v6 looks for a template file called &quot;MGR_INDEX&quot;. 
Squid checks up to three directories (in the listed order):

* &lt;error_directory&gt;
* DATA_DIR / &quot;errors&quot; / &lt;error_default_language&gt;
* DATA_DIR / &quot;errors&quot; / &quot;templates&quot;

... where

* &lt;error_directory&gt; and &lt;error_default_language&gt; are the values of the 
corresponding squid.conf directives; they (and the corresponding list 
items above) are unused by default;

* DATA_DIR is set by ./configure --datadir (including its --datarootdir- 
or --prefix-dependent default value);

* &quot;errors&quot; and &quot;templates&quot; are those exact words.


For example, in my test without those squid.conf directives configured, 
Squid v6 tried to load /usr/local/squid/share/errors/templates/MGR_INDEX


Where is your MGR_INDEX file? Is it readable by Squid?


If you start your Squid with &quot;-X&quot;, then you can grep cache.log for 
MGR_INDEX to find the location(s) Squid was considering. For example, I 
see the following cache.log line:

2023/07/28 22:32:41.589| 50,3| fs_io.cc(60) file_open: error opening 
file /usr/local/squid/share/errors/templates/MGR_INDEX: (2) No such file 
or directory


It is possible that your Squid loads the file but cannot serve it when 
satisfying the cache manager request. If that happens, it could be a 
Squid bug. I did not test things that far.


HTH,

Alex.

&gt;<i> oddly, when i 
</I>&gt;<i> connect from a different host running squid, using the older squid 4.14 
</I>&gt;<i> on fedora 32 cachemgr.cgi, i am able to get into the cache manager 
</I>&gt;<i> interface.&#160; is there something i am missing?
</I>&gt;<i> 
</I>&gt;<i> thanks,
</I>&gt;<i> 
</I>&gt;<i> brendan
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="026002.html">[squid-users] cachemgr.cgi &amp; Internal Error: Missing Template MGR_INDEX
</A></li>
	<LI>Next message (by thread): <A HREF="026004.html">[squid-users] cachemgr.cgi &amp; Internal Error: Missing Template MGR_INDEX
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26003">[ date ]</a>
              <a href="thread.html#26003">[ thread ]</a>
              <a href="subject.html#26003">[ subject ]</a>
              <a href="author.html#26003">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
