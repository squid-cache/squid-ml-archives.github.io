<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] External ACL doesn't used
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20External%20ACL%20doesn%27t%20used&In-Reply-To=%3C838f5767-5a1e-e810-1cbb-a26087256aa3%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025858.html">
   <LINK REL="Next"  HREF="025860.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] External ACL doesn't used</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20External%20ACL%20doesn%27t%20used&In-Reply-To=%3C838f5767-5a1e-e810-1cbb-a26087256aa3%40treenet.co.nz%3E"
       TITLE="[squid-users] External ACL doesn't used">squid3 at treenet.co.nz
       </A><BR>
    <I>Sat Jun  3 09:30:35 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="025858.html">[squid-users] External ACL doesn't used
</A></li>
        <LI>Next message (by thread): <A HREF="025860.html">[squid-users] External ACL doesn't used
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25859">[ date ]</a>
              <a href="thread.html#25859">[ thread ]</a>
              <a href="subject.html#25859">[ subject ]</a>
              <a href="author.html#25859">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 3/06/2023 3:14 am, Alexey&#1103;&#1088; Gruzdov wrote:
&gt;<i> So.ok. Looks like this is misconfig....
</I>&gt;<i> I just restore from backup and now works well
</I>&gt;<i>
</I>
Great to hear. I will answer your question below anyway to help avoid 
future issues...

&gt;<i> &#1087;&#1090;, 2 &#1080;&#1102;&#1085;. 2023&#8239;&#1075;. &#1074; 18:05, Alexey&#1103;&#1088; Gruzdov:
</I>&gt;<i>
</I>&gt;<i>     Hello Guys!
</I>&gt;<i>
</I>&gt;<i>     Could you explain&#160;me case when&#160;the external acl couldn't to be run
</I>&gt;<i>     by squid.
</I>&gt;<i>
</I>
There are three cases when an &quot;external&quot; type ACL has troubles:

 &#160;1) when there are OS permission issues with the helper binary/script.

This can show up as either Squid not being allowed to run the helper, or 
as the helper existing (maybe &quot;crashing&quot;) when it tries to use forbidden 
resources.

2) when the ACL is being checked in a &quot;fast&quot; group (aka synchronous) 
access check

The helper lookup is asynchronous, so does not work inn the synchronous 
checks. However there is a cache of previous helper checks which may 
have the result - so long as there is an identical previous lookup whose 
result has not yet reached its TTL, this cache can supply the answer. So 
external ACL can have the **appearance** of working in simple tests or 
some types of traffic.

3) when the ACL is used conditionally

Squid helpers are only started as-needed. Immediately after startup 
there may be traffic that goes through which does not need to check the 
external ACL, so the helper does not get started for a while. Also, as 
mentioned above there is the helper cache, so at time there may also be 
traffic that gets answered by that instead of waiting on the helper 
lookup. At times both of these may be having an effect, for example 
after a helper crash/exit or reconfigure of Squid.


HTH
Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="025858.html">[squid-users] External ACL doesn't used
</A></li>
	<LI>Next message (by thread): <A HREF="025860.html">[squid-users] External ACL doesn't used
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25859">[ date ]</a>
              <a href="thread.html#25859">[ thread ]</a>
              <a href="subject.html#25859">[ subject ]</a>
              <a href="author.html#25859">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
