<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] make URL bypass squid proxy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20make%20URL%20bypass%20squid%20proxy&In-Reply-To=%3CCAGU_CiK5EXtYuK4dPod%3DsLvUHGWr63WeLdKW9k45RLjt_%3De%3DBg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025895.html">
   <LINK REL="Next"  HREF="025900.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] make URL bypass squid proxy</H1>
    <B>robert k Wild</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20make%20URL%20bypass%20squid%20proxy&In-Reply-To=%3CCAGU_CiK5EXtYuK4dPod%3DsLvUHGWr63WeLdKW9k45RLjt_%3De%3DBg%40mail.gmail.com%3E"
       TITLE="[squid-users] make URL bypass squid proxy">robertkwild at gmail.com
       </A><BR>
    <I>Tue Jun 27 06:36:20 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="025895.html">[squid-users] make URL bypass squid proxy
</A></li>
        <LI>Next message (by thread): <A HREF="025900.html">[squid-users] make URL bypass squid proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25898">[ date ]</a>
              <a href="thread.html#25898">[ thread ]</a>
              <a href="subject.html#25898">[ subject ]</a>
              <a href="author.html#25898">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE> Hi Eliezer,

this is a snippet of my whitelist and no intercept SSL config

#SSL Interception
acl DiscoverSNIHost at_step SslBump1
acl NoSSLIntercept ssl::server_name_regex
&quot;/usr/local/squid/etc/interceptssl.txt&quot;
ssl_bump peek DiscoverSNIHost
ssl_bump splice NoSSLIntercept
ssl_bump bump all
#
#SSL Bump
http_port 3128 ssl-bump cert=/usr/local/squid/etc/ssl_cert/myCA.pem
generate-host-certificates=on dynamic_cert_mem_cache_size=4MB
sslcrtd_program /usr/local/squid/libexec/security_file_certgen -s
/var/lib/ssl_db -M 4MB
#
#deny up MIME types
acl upmime req_mime_type &quot;/usr/local/squid/etc/mimedeny.txt&quot;
#
#deny URL links
acl url_links url_regex &quot;/usr/local/squid/etc/linksurl.txt&quot;
#
#allow special URL paths
acl special_url url_regex &quot;/usr/local/squid/etc/urlspecial.txt&quot;
#
#deny down MIME types
acl downmime rep_mime_type &quot;/usr/local/squid/etc/mimedeny.txt&quot;
#
http_reply_access allow special_url
http_reply_access deny downmime
#http_access deny upmime
#http_access deny url_links
#
#HTTP_HTTPS whitelist websites
acl whitelist ssl::server_name_regex &quot;/usr/local/squid/etc/urlwhite.txt&quot;
#
http_access allow activation whitelist
http_access deny all

so basically no SSL interception

#SSL Interception
acl DiscoverSNIHost at_step SslBump1
acl NoSSLIntercept ssl::server_name_regex
&quot;/usr/local/squid/etc/interceptssl.txt&quot;
ssl_bump peek DiscoverSNIHost
ssl_bump splice NoSSLIntercept
ssl_bump bump all

and whitelisting

#HTTP_HTTPS whitelist websites
acl whitelist ssl::server_name_regex &quot;/usr/local/squid/etc/urlwhite.txt&quot;

in both txt files ie

/usr/local/squid/etc/interceptssl.txt
/usr/local/squid/etc/urlwhite.txt

i have a URL that first i have to whitelist and then if i want squid not to
inspect the url traffic i put it in the SSL interception (i do this as some
websites dont like MITM )

but even putting the URL in question in both files im still having issues
with this website ie its still being detected that its passing through a
proxy

thanks,
rob

On Mon, 26 Jun 2023 at 23:35, &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>&gt; wrote:

&gt;<i> Hey Robert,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I am not sure what forward proxy setup you have there.
</I>&gt;<i>
</I>&gt;<i> A simple forward proxy?
</I>&gt;<i>
</I>&gt;<i> What tool are you using for whitelisting?
</I>&gt;<i>
</I>&gt;<i> You can use an external acl helper to allow dynamic updates of the
</I>&gt;<i> whitelists or
</I>&gt;<i> to periodic update your lists and reload.
</I>&gt;<i> It will depend on the size of your lists.
</I>&gt;<i> What OS are you using for your squid proxy?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> More details will help us help you.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Eliezer
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> *From:* squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; *On
</I>&gt;<i> Behalf Of *robert k Wild
</I>&gt;<i> *Sent:* Monday, June 26, 2023 22:25
</I>&gt;<i> *To:* Squid Users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i> *Subject:* [squid-users] make URL bypass squid proxy
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> hi all,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> i have set up squid for url whitelisting and no intercept SSL (see below)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://wiki.squid-cache.org/ConfigExamples/Caching/AdobeProducts">https://wiki.squid-cache.org/ConfigExamples/Caching/AdobeProducts</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> but some websites i want the client to bypass the squid proxy and go
</I>&gt;<i> straight to the website as i think this is why a url isnt working even when
</I>&gt;<i> i add the url to both files ie urlwhite and no intercept SSL
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> thanks,
</I>&gt;<i>
</I>&gt;<i> rob
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Robert K Wild.
</I>&gt;<i>
</I>

-- 
Regards,

Robert K Wild.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20230627/6ba16129/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20230627/6ba16129/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="025895.html">[squid-users] make URL bypass squid proxy
</A></li>
	<LI>Next message (by thread): <A HREF="025900.html">[squid-users] make URL bypass squid proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25898">[ date ]</a>
              <a href="thread.html#25898">[ thread ]</a>
              <a href="subject.html#25898">[ subject ]</a>
              <a href="author.html#25898">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
