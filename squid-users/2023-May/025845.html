<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] cache_peer round robin
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20cache_peer%20round%20robin&In-Reply-To=%3CCAFqyDwDsQrjRYoqUD6YsqUYszSwSvGKA0XR8Bc_73_7QiS0fDg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025844.html">
   <LINK REL="Next"  HREF="025846.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] cache_peer round robin</H1>
    <B>Alexey&#1103;&#1088; Gruzdov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20cache_peer%20round%20robin&In-Reply-To=%3CCAFqyDwDsQrjRYoqUD6YsqUYszSwSvGKA0XR8Bc_73_7QiS0fDg%40mail.gmail.com%3E"
       TITLE="[squid-users] cache_peer round robin">my.shellac at gmail.com
       </A><BR>
    <I>Tue May 23 05:29:11 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="025844.html">[squid-users] cache_peer round robin
</A></li>
        <LI>Next message (by thread): <A HREF="025846.html">[squid-users] maintenance period for ngtech www services
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25845">[ date ]</a>
              <a href="thread.html#25845">[ thread ]</a>
              <a href="subject.html#25845">[ subject ]</a>
              <a href="author.html#25845">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello!

Looks like this doesn't help. And this affect is more pronounced if you add
more cache_peers and a lot of these doesn't alive.

For example:  If to have 50 whole of parent proxy, and ten of these is
alive  -  the squid hangs on the first UP parent and looks like it make
checking all other and looks like some timer expired and squid still
working with one first up parent, after some time (30 sec or 40 sec) the
round-robin works again for just one two next parent proxy, and then again
hangs on one parent
May be we could to change some response timer in cache_peer checking
procedure ?

Thank you.
Alexg

&#1074;&#1089;, 21 &#1084;&#1072;&#1103; 2023&#8239;&#1075;. &#1074; 03:03, Alexey&#1103;&#1088; Gruzdov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">my.shellac at gmail.com</A>&gt;:

&gt;<i>
</I>&gt;<i> Ok! Will try !
</I>&gt;<i> Thanks !
</I>&gt;<i> On Sun, 21 May 2023 at 02:25, Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> On 21/05/2023 5:26 am, Alexey&#1103;&#1088; Gruzdov wrote:
</I>&gt;&gt;<i> &gt; Hello !
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; About cache_peer section:
</I>&gt;&gt;<i> &gt; cache_peer 1.2.3.1 parent 40001 0 no-query no-digest proxy-only
</I>&gt;&gt;<i> &gt; name=proxy_1.2.3.1 round-robin
</I>&gt;&gt;<i> &gt; ....
</I>&gt;&gt;<i> &gt; ....
</I>&gt;&gt;<i> &gt; cache_peer 1.2.3.20 parent 40001 0 no-query no-digest proxy-only
</I>&gt;&gt;<i> &gt; name=proxy_1.2.3.20 round-robin
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Try removing the no-query options.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> HTH
</I>&gt;&gt;<i> Amos
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> squid-users mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;<i> <A HREF="http://lists.squid-cache.org/listinfo/squid-users">http://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20230523/947c37da/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20230523/947c37da/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="025844.html">[squid-users] cache_peer round robin
</A></li>
	<LI>Next message (by thread): <A HREF="025846.html">[squid-users] maintenance period for ngtech www services
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25845">[ date ]</a>
              <a href="thread.html#25845">[ thread ]</a>
              <a href="subject.html#25845">[ subject ]</a>
              <a href="author.html#25845">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
