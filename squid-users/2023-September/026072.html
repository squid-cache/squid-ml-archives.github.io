<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] ICAP reply pipe is full
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20ICAP%20reply%20pipe%20is%20full&In-Reply-To=%3Ca93ed546-1f3c-4675-bafc-fd2b2e2b426c%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026066.html">
   <LINK REL="Next"  HREF="026067.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] ICAP reply pipe is full</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20ICAP%20reply%20pipe%20is%20full&In-Reply-To=%3Ca93ed546-1f3c-4675-bafc-fd2b2e2b426c%40measurement-factory.com%3E"
       TITLE="[squid-users] ICAP reply pipe is full">rousskov at measurement-factory.com
       </A><BR>
    <I>Sat Sep  9 22:48:46 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="026066.html">[squid-users] ICAP reply pipe is full
</A></li>
        <LI>Next message (by thread): <A HREF="026067.html">[squid-users] Squid-cache authentication is not working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26072">[ date ]</a>
              <a href="thread.html#26072">[ thread ]</a>
              <a href="subject.html#26072">[ subject ]</a>
              <a href="author.html#26072">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2023-09-03 09:39, Ben Goz wrote:

&gt;<i> I'm working with squid that sends http/s traffic to a custom c-icap filter.
</I>&gt;<i> I see a lot of ICAP reply debug messages in Squid's cache log.
</I>&gt;<i> 
</I>&gt;<i> kid1| 93,3| ModXact.cc(556) readMore: not reading because ICAP reply pipe is full
</I>&gt;<i> 
</I>&gt;<i> What are the implications of this message?
</I>
It implies several things, including that you are looking at debugging 
output meant for Squid developers, not Squid administrators (and this 
mailing list) :-).


&gt;<i> How can I find out what is the root cause of this message?
</I>
A Squid developer would start by looking at the corresponding code 
(src/adaptation/icap/ModXact.cc line 556). You can ask here (like you 
are doing), but, IMO, you should not. I recommend focusing on (or 
starting with) the high-level problem you are trying to solve rather 
than a low-level debugging message.


&gt;<i> Can I increase the ICAP reply pipe in Squid's configuration?
</I>
You cannot -- the pipe buffer will not grow beyond 64KB, a hard-coded 
limit (BodyPipe::MaxCapacity). However, bugs notwithstanding, the pipe 
may be full not because it is too small, but because the adapted HTTP 
message body consumer on the other side of this pipe (i.e. Squid, Squid 
client, origin server, or cache_peer) cannot consume ICAP response bytes 
fast enough.


HTH,

Alex.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="026066.html">[squid-users] ICAP reply pipe is full
</A></li>
	<LI>Next message (by thread): <A HREF="026067.html">[squid-users] Squid-cache authentication is not working
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26072">[ date ]</a>
              <a href="thread.html#26072">[ thread ]</a>
              <a href="subject.html#26072">[ subject ]</a>
              <a href="author.html#26072">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
