<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] squid-users Digest, Vol 109, Issue 19
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid-users%20Digest%2C%20Vol%20109%2C%20Issue%2019&In-Reply-To=%3CCALO-o%3Dx6bpei3Q8zuVW1upgCFAQ0ExpQhc2AW8NjQSiF77whTg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026126.html">
   <LINK REL="Next"  HREF="026138.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] squid-users Digest, Vol 109, Issue 19</H1>
    <B>nikhil deshpande</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20squid-users%20Digest%2C%20Vol%20109%2C%20Issue%2019&In-Reply-To=%3CCALO-o%3Dx6bpei3Q8zuVW1upgCFAQ0ExpQhc2AW8NjQSiF77whTg%40mail.gmail.com%3E"
       TITLE="[squid-users] squid-users Digest, Vol 109, Issue 19">nikhildeshpande18 at gmail.com
       </A><BR>
    <I>Wed Sep 27 12:22:57 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="026126.html">[squid-users] [squid-announce] SQUID-2020:13 Denial of Service in gopher gateway
</A></li>
        <LI>Next message (by thread): <A HREF="026138.html">[squid-users] Seeking Help with SSL Bump Configuration, for ECDSA Ciphers in Squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26128">[ date ]</a>
              <a href="thread.html#26128">[ thread ]</a>
              <a href="subject.html#26128">[ subject ]</a>
              <a href="author.html#26128">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Team,

[Question]: Are you trying to bump TLS client connections when and
only when the TLS
client is offering to use one of those ciphers in its ClientHello
message? Or do you want Squid to use one of those ciphers when bumping
all TLS client connections? Or something else? Please clarify.

[Answer]: In our case client is offering these two
ciphers(*ECDHE-ECDSA-AES256-GCM-SHA384 &amp;
**ECDHE-ECDSA-AES128-GCM-SHA256*) in Client Hello but squid is failing
to complete handshake with client while performing SSL-Bump.

We have attached logs and network capture.

[Question]: FWIW, to restrict Squid use of ciphers on accepted TLS client

connections, use the http_port (or https_port) &quot;cipher&quot; option. For
example,

     https_port 3129 ssl-bump ... \
         cipher=DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384

[Answer]: We dont want to restrict to use this specific ciphers only.
We wanted that Squid should use strong ciphers.

One more point I wanted to add here is that this issue is getting
reproduced with latest squid also.


On Mon, Sep 25, 2023 at 5:30&#8239;PM &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-request at lists.squid-cache.org</A>&gt;
wrote:

&gt;<i> Send squid-users mailing list submissions to
</I>&gt;<i>         <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>
</I>&gt;<i> To subscribe or unsubscribe via the World Wide Web, visit
</I>&gt;<i>         <A HREF="https://lists.squid-cache.org/listinfo/squid-users">https://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> or, via email, send a message with subject or body 'help' to
</I>&gt;<i>         <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-request at lists.squid-cache.org</A>
</I>&gt;<i>
</I>&gt;<i> You can reach the person managing the list at
</I>&gt;<i>         <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-owner at lists.squid-cache.org</A>
</I>&gt;<i>
</I>&gt;<i> When replying, please edit your Subject line so it is more specific
</I>&gt;<i> than &quot;Re: Contents of squid-users digest...&quot;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Today's Topics:
</I>&gt;<i>
</I>&gt;<i>    1. Re: A few things about Squid-cache (Jason Long)
</I>&gt;<i>    2. Re: A few things about Squid-cache (Amos Jeffries)
</I>&gt;<i>    3. Re: Seeking Help with SSL Bump Configuration for ECDSA
</I>&gt;<i>       Ciphers in Squid (nikhil deshpande)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ----------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> Message: 1
</I>&gt;<i> Date: Sun, 24 Sep 2023 18:49:06 +0000 (UTC)
</I>&gt;<i> From: Jason Long &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">hack3rcon at yahoo.com</A>&gt;
</I>&gt;<i> To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">gkinkie at gmail.com</A>
</I>&gt;<i> Cc: Squid Users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i> Subject: Re: [squid-users] A few things about Squid-cache
</I>&gt;<i> Message-ID: &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">575071616.3138479.1695581346718 at mail.yahoo.com</A>&gt;
</I>&gt;<i> Content-Type: text/plain; charset=&quot;utf-8&quot;
</I>&gt;<i>
</I>&gt;<i> Hello,Thank you so much for your reply.1- Regarding security, what
</I>&gt;<i> parameters should be changed or added in the configuration file?
</I>&gt;<i>
</I>&gt;<i>  2- How to configure Squid-cache?service for 1000 clients?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   On Sat, Sep 23, 2023 at 12:26 AM, Francesco Chemolli&lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">gkinkie at gmail.com</A>&gt;
</I>&gt;<i> wrote:   Hi Jason!
</I>&gt;<i> Squid is a complex piece of software, which is deployed in a vast number
</I>&gt;<i> of scenarios, some are simpler and some are intensely adversarial and
</I>&gt;<i> trickier.Securing squid is similar to any other public-facing complex
</I>&gt;<i> service; it's unfortunately not something?that can be explained with a few
</I>&gt;<i> tips.
</I>&gt;<i> Regarding how many users Squid can support at the same time, it really
</I>&gt;<i> depends, mostly on the hardware, services configuration, and user
</I>&gt;<i> behaviour. On modern hardware, Squid can generally support many users, in
</I>&gt;<i> the order of several thousands
</I>&gt;<i> Squid is not a firewall, on most modern Unix-like operating systems,
</I>&gt;<i> including Linux, FreeBSD, and OpenBSD, that role can be fulfilled by the
</I>&gt;<i> underlying operating system
</I>&gt;<i> On Thu, Sep 21, 2023 at 7:59?PM Jason Long &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">hack3rcon at yahoo.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> Hello,I have some questions:1- What tips should be considered to keep
</I>&gt;<i> Squid-cache safe?
</I>&gt;<i>
</I>&gt;<i> 2-?How strong is Squid-cache? How many users can use it at the same time?
</I>&gt;<i> 3-?Can Squid-cache?also play the role of a firewall? Something like the
</I>&gt;<i> Microsoft ForeFront TMG Replacement or the Kemp LoadMaster.
</I>&gt;<i>
</I>&gt;<i> Thank you._______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">https://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> ? ? Francesco
</I>&gt;<i> -------------- next part --------------
</I>&gt;<i> An HTML attachment was scrubbed...
</I>&gt;<i> URL: &lt;
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20230924/2ef15d28/attachment-0001.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20230924/2ef15d28/attachment-0001.htm</A>
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> Message: 2
</I>&gt;<i> Date: Mon, 25 Sep 2023 17:51:45 +1300
</I>&gt;<i> From: Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;
</I>&gt;<i> To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> Subject: Re: [squid-users] A few things about Squid-cache
</I>&gt;<i> Message-ID: &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">8ffe5581-d731-4f43-be7f-72c00e5a7a9e at treenet.co.nz</A>&gt;
</I>&gt;<i> Content-Type: text/plain; charset=UTF-8; format=flowed
</I>&gt;<i>
</I>&gt;<i> On 25/09/23 07:49, Jason Long wrote:
</I>&gt;<i> &gt; Hello,
</I>&gt;<i> &gt; Thank you so much for your reply.
</I>&gt;<i> &gt; 1- Regarding security, what parameters should be changed or added in the
</I>&gt;<i> &gt; configuration file?
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> First steps with a new Squid install are to check in squid.conf for the
</I>&gt;<i> &quot;acl localnet&quot; lines and adjust so it lists your LAN ranges. The common
</I>&gt;<i> ones are listed there by default.
</I>&gt;<i>
</I>&gt;<i> Then look for the &quot;http_access&quot; directive. That is the primary means of
</I>&gt;<i> telling Squid what the network policy needs are.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; 2- How to configure Squid-cache?service for 1000 clients?
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> Apart from the above (1) answer, Squid does not care about number of
</I>&gt;<i> clients it will serve as many as your machine can handle. Until the
</I>&gt;<i> hardware overloads the CPU, RAM or disks capacity limits.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> For good advise we will need details...
</I>&gt;<i>
</I>&gt;<i>   Forward or Reverse proxy installation?
</I>&gt;<i>   LAN or WAN clients?
</I>&gt;<i>
</I>&gt;<i>   What policies do you need to comply with regarding client use of the
</I>&gt;<i> proxy, or access to any special websites?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Cheers
</I>&gt;<i> Amos
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> Message: 3
</I>&gt;<i> Date: Mon, 25 Sep 2023 15:01:05 +0530
</I>&gt;<i> From: nikhil deshpande &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">nikhildeshpande18 at gmail.com</A>&gt;
</I>&gt;<i> To: Shyam varun &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">shyam3898 at gmail.com</A>&gt;
</I>&gt;<i> Cc: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>, <A HREF="https://lists.squid-cache.org/listinfo/squid-users">jrose at qualys.com</A>
</I>&gt;<i> Subject: Re: [squid-users] Seeking Help with SSL Bump Configuration
</I>&gt;<i>         for ECDSA Ciphers in Squid
</I>&gt;<i> Message-ID:
</I>&gt;<i>         &lt;CALO-o=
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">xTe18tuGww-gsr-vAVKMJqRai1ZvNR-hRqaToWXp1NGQ at mail.gmail.com</A>&gt;
</I>&gt;<i> Content-Type: text/plain; charset=&quot;utf-8&quot;
</I>&gt;<i>
</I>&gt;<i> Hi team,
</I>&gt;<i>
</I>&gt;<i> Any update on this?
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i> Nikhil
</I>&gt;<i>
</I>&gt;<i> On Thu, Sep 14, 2023 at 6:05?PM Shyam varun &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">shyam3898 at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> &gt; Dear Squid Mailing List Community,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I hope this email finds you well. I am currently working on configuring
</I>&gt;<i> &gt; SSL bump in Squid proxy server to support ECDSA ciphers, and I am seeking
</I>&gt;<i> &gt; assistance with a particular issue I've encountered.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; To provide some context:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - *Squid Version:* Squid 5.2
</I>&gt;<i> &gt; - *OpenSSL Version*: OpenSSL 1.1.1l
</I>&gt;<i> &gt; - *OS:* Alpine Linux v3.16
</I>&gt;<i> &gt; -
</I>&gt;<i> &gt; *Squid Configuration: *
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; * sslproxy_cert_error allow all*
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; * sslcrtd_program /usr/lib/squid/security_file_certgen -s /var/lib/ssl_db
</I>&gt;<i> &gt; -M 4MB*
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; * http_port 3129 ssl-bump generate-host-certificates=on
</I>&gt;<i> &gt; dynamic_cert_mem_cache_size=4MB
</I>&gt;<i> cert=/opt/ssl/intermediate_certificate.pem
</I>&gt;<i> &gt; key=/opt/ssl/intermediate_key.pem options=SINGLE_DH_USE,SINGLE_ECDH_USE
</I>&gt;<i> &gt; tls-dh=/opt/dhparam.pem*
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; * tls_outgoing_options min-version=1.1  options=NO_SSLv3*
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; * acl step1 at_step SslBump1*
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; * ssl_bump peek step1*
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; * ssl_bump bump all*
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The goal of my configuration is to enable SSL bump for ECDSA ciphers,
</I>&gt;<i> &gt; specifically the &quot;ECDHE-ECDSA-AES256-GCM-SHA384&quot; and
</I>&gt;<i> &gt; &quot;ECDHE-ECDSA-AES128-GCM-SHA256&quot; cipher suites. However, I've run into
</I>&gt;<i> &gt; challenges and issues while trying to achieve this.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; *Things I tried:*
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;    1. I created an ECDSA-based certificate chain using OpenSSL.
</I>&gt;<i> &gt;    2. I configured the ECDSA-based certificate certs in squid as shown in
</I>&gt;<i> &gt;    above snippet but still not able to make it work.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I've thoroughly reviewed the Squid documentation and online resources,
</I>&gt;<i> but
</I>&gt;<i> &gt; I haven't been able to resolve these issues on my own.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I would greatly appreciate any guidance, insights, or assistance from the
</I>&gt;<i> &gt; Squid community regarding the proper configuration for SSL bump with
</I>&gt;<i> ECDSA
</I>&gt;<i> &gt; ciphers. If you have successfully configured Squid to support ECDSA
</I>&gt;<i> ciphers
</I>&gt;<i> &gt; or if you have expertise in this area, your input would be invaluable.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thank you in advance for your time and support. I look forward to your
</I>&gt;<i> &gt; responses and insights.
</I>&gt;<i> &gt;
</I>&gt;<i> -------------- next part --------------
</I>&gt;<i> An HTML attachment was scrubbed...
</I>&gt;<i> URL: &lt;
</I>&gt;<i> <A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20230925/9e18cf96/attachment-0001.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20230925/9e18cf96/attachment-0001.htm</A>
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> Subject: Digest Footer
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">https://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> End of squid-users Digest, Vol 109, Issue 19
</I>&gt;<i> ********************************************
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20230927/04095cdc/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20230927/04095cdc/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: squid-pcap-and-cache-log.zip
Type: application/x-zip-compressed
Size: 58034 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20230927/04095cdc/attachment.bin">http://lists.squid-cache.org/pipermail/squid-users/attachments/20230927/04095cdc/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="026126.html">[squid-users] [squid-announce] SQUID-2020:13 Denial of Service in gopher gateway
</A></li>
	<LI>Next message (by thread): <A HREF="026138.html">[squid-users] Seeking Help with SSL Bump Configuration, for ECDSA Ciphers in Squid
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26128">[ date ]</a>
              <a href="thread.html#26128">[ thread ]</a>
              <a href="subject.html#26128">[ subject ]</a>
              <a href="author.html#26128">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
