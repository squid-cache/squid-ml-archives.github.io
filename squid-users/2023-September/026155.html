<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid quits while starting?!
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20quits%20while%20starting%3F%21&In-Reply-To=%3CCAPO8no%2BozZxmnJTJi_iRDvf5%2BJ_NMCs4ZWfZfMttS2ouN%3DCWFw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026148.html">
   <LINK REL="Next"  HREF="026156.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid quits while starting?!</H1>
    <B>Bud Miljkovic</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20quits%20while%20starting%3F%21&In-Reply-To=%3CCAPO8no%2BozZxmnJTJi_iRDvf5%2BJ_NMCs4ZWfZfMttS2ouN%3DCWFw%40mail.gmail.com%3E"
       TITLE="[squid-users] Squid quits while starting?!">bud_miljkovic at trimble.com
       </A><BR>
    <I>Fri Sep 29 03:12:26 UTC 2023</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="026148.html">[squid-users] No valid signing SSL certificate configured for HTTPS_port
</A></li>
        <LI>Next message (by thread): <A HREF="026156.html">[squid-users] [ext]  Squid quits while starting?!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26155">[ date ]</a>
              <a href="thread.html#26155">[ thread ]</a>
              <a href="subject.html#26155">[ subject ]</a>
              <a href="author.html#26155">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I am trying to run Squid on the `open-embedded` pyro distro on my target.

Here is the `squid-ota.conf` file which is during the squid start:
```
#Visible hostname
visible_hostname ctct-r2

# An ACL named 'whitelist'
acl whitelist dstdomain '/etc/squid/whitelist.ota'

# Allow whitelisted URLs through
http_access allow whitelist

# Listen for incoming HTTP traffic
http_port 3128

# Block the rest
http_access deny all

# Intercept transparent HTTPS traffic
https_port 3129 intercept ssl-bump cert=/etc/squid/ssl_cert/myCA.pem
generate-host-certificates=on dynamic_cert_mem_cache_size=4MB
ssl_bump splice all
sslcrtd_program /usr/libexec/ssl_crtd -s /var/lib/ssl_db -M 4MB

cache_dir ufs /var/volatile/log/squid/logs 100 16 256

# Send out HTTPS traffic to destination server
tcp_outgoing_address 10.3.16.51
```.

And here is the log after I start squid:
```
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">root at abc-r2</A>:/# /usr/sbin/squid -f /etc/squid/squid-ota.conf -NCd1
2023/09/29 15:02:52| Current Directory is /
2023/09/29 15:02:52| Starting Squid Cache version 3.5.25 for
arm-poky-linux-gnueabi...
2023/09/29 15:02:52| Service Name: squid
2023/09/29 15:02:52| Process ID 2806
2023/09/29 15:02:52| Process Roles: master worker
2023/09/29 15:02:52| With 1024 file descriptors available
2023/09/29 15:02:52| Initializing IP Cache...
2023/09/29 15:02:52| DNS Socket created at [::], FD 8
2023/09/29 15:02:52| DNS Socket created at 0.0.0.0, FD 9
2023/09/29 15:02:52| Adding nameserver 127.0.0.1 from /etc/resolv.conf
2023/09/29 15:02:52| helperOpenServers: Starting 5/32 'ssl_crtd' processes
2023/09/29 15:02:52| Logfile: opening log daemon:/var/log/squid/access.log
2023/09/29 15:02:52| Logfile Daemon: opening log /var/log/squid/access.log
2023/09/29 15:02:52| Unlinkd pipe opened on FD 26
2023/09/29 15:02:52| Store logging disabled
2023/09/29 15:02:52| Swap maxSize 102400 + 262144 KB, estimated 28041
objects
2023/09/29 15:02:52| Target number of buckets: 1402
2023/09/29 15:02:52| Using 8192 Store buckets
2023/09/29 15:02:52| Max Mem  size: 262144 KB
2023/09/29 15:02:52| Max Swap size: 102400 KB
2023/09/29 15:02:52| Rebuilding storage in /var/volatile/log/squid/logs (no
log)
2023/09/29 15:02:52| Using Least Load store dir selection
2023/09/29 15:02:52| Current Directory is /
2023/09/29 15:02:52| Finished loading MIME types and icons.
2023/09/29 15:02:52| HTCP Disabled.
2023/09/29 15:02:52| Squid plugin modules loaded: 0
2023/09/29 15:02:52| Adaptation support is off.
2023/09/29 15:02:52| Accepting HTTP Socket connections at local=[::]:3128
remote=[::] FD 28 flags=9
2023/09/29 15:02:52| Accepting NAT intercepted SSL bumped HTTPS Socket
connections at local=[::]:3129 remote=[::] FD 29 flags=41
2023/09/29 15:02:52| WARNING: ssl_crtd #Hlpr1 exited
2023/09/29 15:02:52| Too few ssl_crtd processes are running (need 1/32)
2023/09/29 15:02:52| Closing HTTP port [::]:3128
2023/09/29 15:02:52| Closing HTTPS port [::]:3129
FATAL: The ssl_crtd helpers are crashing too rapidly, need help!
```

Can you suggest what is going on here?

Buda
-- 
Budimir Miljkovi&#263; BSc E | He
Senior Development Engineer
Civil Construction Field Systems
Trimble

11-17 Birmingham Drive, Christchurch, Canterbury, 8024
New Zealand
+64 3 963-5550 Direct
+64 21 419-024 Mobile

www.trimble.com

This email may contain confidential information that is intended only for
the listed recipient(s) of this email. Any unauthorized review, use,
disclosure or distribution is prohibited. If you believe you have received
this email in error, please immediately delete this email and any
attachments, and inform me via reply email.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20230929/1f4c8da1/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20230929/1f4c8da1/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="026148.html">[squid-users] No valid signing SSL certificate configured for HTTPS_port
</A></li>
	<LI>Next message (by thread): <A HREF="026156.html">[squid-users] [ext]  Squid quits while starting?!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26155">[ date ]</a>
              <a href="thread.html#26155">[ thread ]</a>
              <a href="subject.html#26155">[ subject ]</a>
              <a href="author.html#26155">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
