<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid with PV6 Tunnel Broker
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20with%20PV6%20Tunnel%20Broker&In-Reply-To=%3C0b7b4f9b-2174-4b51-8057-6928b56a9637%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="027017.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid with PV6 Tunnel Broker</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20with%20PV6%20Tunnel%20Broker&In-Reply-To=%3C0b7b4f9b-2174-4b51-8057-6928b56a9637%40treenet.co.nz%3E"
       TITLE="[squid-users] Squid with PV6 Tunnel Broker">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Aug  1 00:39:09 UTC 2024</I>
    <P><UL>
        
        <LI>Next message (by thread): <A HREF="027017.html">[squid-users] squidclient -h 127.0.0.1 -p 3128 mgr:info shows access denined
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27016">[ date ]</a>
              <a href="thread.html#27016">[ thread ]</a>
              <a href="subject.html#27016">[ subject ]</a>
              <a href="author.html#27016">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 31/07/24 18:05, Jonathan Lee wrote:
&gt;<i> The error it shows when I activate IPv6 only mode not dual stack is
</I>&gt;<i> 
</I>
There is no &quot;IPv6 only mode&quot; in Squid. What do you mean?


&gt;<i> Error: no forward proxy ports configured
</I>&gt;<i> 
</I>
In the config you showed earlier all of your IPv6 listening ports use 
the &quot;intercept&quot; flag.

Please try with this much simplified configuration for listening ports:

  # Receive forward-proxy and cache manager traffic
  http_port 3128 ssl-bump \
     generate-host-certificates=on dynamic_cert_mem_cache_size=20MB \
     tls-cert=/usr/local/etc/squid/serverkey.pem \
     tls-dh=prime256v1:/etc/dh-parameters.2048 \
     options=NO_SSLv3

  # Receive intercepted port 80 traffic
  http_port 3127 intercept ssl-bump \
     generate-host-certificates=on dynamic_cert_mem_cache_size=20MB \
     tls-cert=/usr/local/etc/squid/serverkey.pem \
     tls-dh=prime256v1:/etc/dh-parameters.2048 \
     options=NO_SSLv3

  # Receive intercepted port 443 traffic
  https_port 3129 intercept ssl-bump \
     generate-host-certificates=on dynamic_cert_mem_cache_size=20MB \
     tls-cert=/usr/local/etc/squid/serverkey.pem \
     tls-dh=prime256v1:/etc/dh-parameters.2048 \
     options=NO_SSLv3


There are other changes you will need to make the SSL-Bump and access 
controls fully work. But this is all you should need to at least get 
Squid accepting TCP and TLS connections.

The two &quot;intercept&quot; port numbers above are arbitrary. Just make sure 
that your NAT rules are passing port 80 and port 443 to the right one.
  IIRC, your IPv6 NAT rule may need changing.


Cheers
Amos

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message (by thread): <A HREF="027017.html">[squid-users] squidclient -h 127.0.0.1 -p 3128 mgr:info shows access denined
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27016">[ date ]</a>
              <a href="thread.html#27016">[ thread ]</a>
              <a href="subject.html#27016">[ subject ]</a>
              <a href="author.html#27016">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
