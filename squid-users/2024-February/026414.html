<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] external icap issue with squid 5 and higher
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20external%20icap%20issue%20with%20squid%205%20and%20higher&In-Reply-To=%3CDB9PR07MB9809EEA844CB5E49E9B48E079C422%40DB9PR07MB9809.eurprd07.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026413.html">
   <LINK REL="Next"  HREF="026415.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] external icap issue with squid 5 and higher</H1>
    <B>Yvain PAYEN</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20external%20icap%20issue%20with%20squid%205%20and%20higher&In-Reply-To=%3CDB9PR07MB9809EEA844CB5E49E9B48E079C422%40DB9PR07MB9809.eurprd07.prod.outlook.com%3E"
       TITLE="[squid-users] external icap issue with squid 5 and higher">yvain.payen at tessi.fr
       </A><BR>
    <I>Fri Feb  2 16:00:26 UTC 2024</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="026413.html">[squid-users] chunked transfer over sslbump
</A></li>
        <LI>Next message (by thread): <A HREF="026415.html">[squid-users] external icap issue with squid 5 and higher
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26414">[ date ]</a>
              <a href="thread.html#26414">[ thread ]</a>
              <a href="subject.html#26414">[ subject ]</a>
              <a href="author.html#26414">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Squid users,

I have an issue with an external icap service I have to use (from Forcepoint).
This service is working great with squid v3 and v4.
Starting v5 (v6 also tested) the service only work with plain text http requests, all requests for https content are allowed even if the website should be denied.

We are searching in the debug logs but don't find anything interesting by now.

My first question is : do you know if a big change in the icap code happened between v4 and v5 ?
My second question : How can I trace only icap debug logs to understand the issue ?

Service is setup like this :
icap_service service_req reqmod_precache <A HREF="icap://10.1.1.1:1344/icap">icap://10.1.1.1:1344/icap</A> bypass=1


Regards,

Yvain PAYEN

P&#244;le Op&#233;rations &amp; Technologies
Equipe Infrastructure syst&#232;me
T. +33 (0)5 57 57 01 85 (Poste 1185)
M. +33 (0)7 87 30 34 01

Absent tous les mercredi

Tessi France
Immeuble Cassiop&#233;e
1-3 avenue des Satellites
33185 Le Haillan

<A HREF="https://lists.squid-cache.org/listinfo/squid-users">yvain.payen at tessi.fr</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">yvain.payen at tessi.fr</A>&gt;
www.tessi.eu
[cid:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">image001.png at 01DA55F7.B0BA8DB0</A>]
Pensez &#224; l'environnement avant d'imprimer cet e-mail.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20240202/fe047a61/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20240202/fe047a61/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 1692 bytes
Desc: image001.png
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20240202/fe047a61/attachment.png">http://lists.squid-cache.org/pipermail/squid-users/attachments/20240202/fe047a61/attachment.png</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="026413.html">[squid-users] chunked transfer over sslbump
</A></li>
	<LI>Next message (by thread): <A HREF="026415.html">[squid-users] external icap issue with squid 5 and higher
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26414">[ date ]</a>
              <a href="thread.html#26414">[ thread ]</a>
              <a href="subject.html#26414">[ subject ]</a>
              <a href="author.html#26414">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
