<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] New Squid prefers IPv4
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20New%20Squid%20prefers%20IPv4&In-Reply-To=%3Cc1057249-ef91-4c13-a231-ea700b558cdd%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026429.html">
   <LINK REL="Next"  HREF="026426.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] New Squid prefers IPv4</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20New%20Squid%20prefers%20IPv4&In-Reply-To=%3Cc1057249-ef91-4c13-a231-ea700b558cdd%40measurement-factory.com%3E"
       TITLE="[squid-users] New Squid prefers IPv4">rousskov at measurement-factory.com
       </A><BR>
    <I>Mon Feb  5 18:17:31 UTC 2024</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="026429.html">[squid-users] New Squid prefers IPv4
</A></li>
        <LI>Next message (by thread): <A HREF="026426.html">[squid-users] New Squid prefers IPv4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26425">[ date ]</a>
              <a href="thread.html#26425">[ thread ]</a>
              <a href="subject.html#26425">[ subject ]</a>
              <a href="author.html#26425">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2024-02-05 11:32, Rob van der Putten wrote:
&gt;<i> On 05/02/2024 17:16, Dieter Bloms wrote:
</I>&gt;&gt;<i> On Mon, Feb 05, Rob van der Putten wrote:
</I>&gt;&gt;&gt;<i> After upgrading Squid from 3 to 5 the percentage of IPv6 reduced from 
</I>&gt;&gt;&gt;<i> 61% to less then 1%. Any ideas?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> yes, since squid5 the happy eyeball algorithm as described in rfc 8305
</I>&gt;&gt;<i> is used. If your ipv4 connectivity is better than ipv6 than ipv4 is used.
</I>&gt;<i> 
</I>&gt;<i> I'm not quite sure how this is established.
</I>
See RFC 8305 for the general approach, search squid.conf.documented for 
&quot;Happy Eyeballs&quot; to find relevant configuration directives, and see the 
following Squid commit message for a subset of Squid implementation caveats:

<A HREF="https://github.com/squid-cache/squid/commit/5562295321debdf33b59f772bce846bf6dd33c26">https://github.com/squid-cache/squid/commit/5562295321debdf33b59f772bce846bf6dd33c26</A>


Antony is correct that ICMP is pretty much irrelevant here. A brief 
algorithm description in Antony's response is easy to misinterpret, but 
it can be used as a rough approximation of what is actually going on.

AFAICT, we do not have a good understanding of how the implemented 
algorithm actually behaves in various deployment environments. If you 
believe your IPv6 connectivity is better than your IPv4 connectivity, 
you may want to investigate why your Squid favors IPv4.


HTH,

Alex.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="026429.html">[squid-users] New Squid prefers IPv4
</A></li>
	<LI>Next message (by thread): <A HREF="026426.html">[squid-users] New Squid prefers IPv4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26425">[ date ]</a>
              <a href="thread.html#26425">[ thread ]</a>
              <a href="subject.html#26425">[ subject ]</a>
              <a href="author.html#26425">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
