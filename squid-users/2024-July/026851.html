<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Rewriting HTTP to HTTPS for generic package proxy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Rewriting%20HTTP%20to%20HTTPS%20for%20generic%20package%20proxy&In-Reply-To=%3C6727429ee289454dbfde22ccf092ffd2%40eurodata.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026849.html">
   <LINK REL="Next"  HREF="026853.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Rewriting HTTP to HTTPS for generic package proxy</H1>
    <B>Fiehe, Christoph</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Rewriting%20HTTP%20to%20HTTPS%20for%20generic%20package%20proxy&In-Reply-To=%3C6727429ee289454dbfde22ccf092ffd2%40eurodata.de%3E"
       TITLE="[squid-users] Rewriting HTTP to HTTPS for generic package proxy">c.fiehe at eurodata.de
       </A><BR>
    <I>Wed Jul 10 10:57:57 UTC 2024</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="026849.html">[squid-users] Rewriting HTTP to HTTPS for generic package proxy
</A></li>
        <LI>Next message (by thread): <A HREF="026853.html">[squid-users] Rewriting HTTP to HTTPS for generic package proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26851">[ date ]</a>
              <a href="thread.html#26851">[ thread ]</a>
              <a href="subject.html#26851">[ subject ]</a>
              <a href="author.html#26851">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The idea behind was to find a way to cache packages from a repository that only provides HTTPS-based connections. It would work, when the HTTPS connection terminates at the Squid Proxy and not at the client, so that the proxy can forward the message payload to the client using normal HTTP. Apt-Cacher-NG implements the behavior, but it seems to be too buggy to use in a productive environment.

There is no way to achieve that with standard Squid mechanisms?

Regards,
Christoph


&gt;<i>-----Urspr&#252;ngliche Nachricht-----
</I>&gt;<i>Von: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; Im Auftrag von Amos Jeffries
</I>&gt;<i>Gesendet: Mittwoch, 10. Juli 2024 11:42
</I>&gt;<i>An: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i>Betreff: Re: [squid-users] Rewriting HTTP to HTTPS for generic package proxy
</I>&gt;<i>
</I>&gt;<i>On 10/07/24 10:25, Fiehe, Christoph wrote:
</I>&gt;&gt;<i> Hallo,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I hope that somebody has an idea, what I am doing wrong. I try to build a generic
</I>&gt;<i>package proxy with Squid and need the feature to rewrite (not redirect) a HTTP request to
</I>&gt;<i>a package repository transparently to a HTTPS-based package source.
</I>&gt;<i>
</I>&gt;<i>The &quot;Wrong&quot; starts with the very idea you have that re-writing a URL
</I>&gt;<i>scheme is even useful.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>While it mas *seem* like an okay idea, what you are actually doing is
</I>&gt;<i>exposing the HTTPS secured Response message to transmission over
</I>&gt;<i>insecure connections from Squid to client. That is prohibited by HTTPS
</I>&gt;<i>which assumes/requires encryption negotiated between the origin client
</I>&gt;<i>and the origin server.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>The best you can do for a regular proxy. Is *redirect* the <A HREF="http://">http://</A>
</I>&gt;<i>requests with a 302 message telling the client to use <A HREF="https://">https://</A> instead.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   ...
</I>&gt;<i>   http_access deny !to_archive_mirrors
</I>&gt;<i>
</I>&gt;<i>   acl HTTP proto HTTP
</I>&gt;<i>   deny_info 302:<A HREF="https://%">https://%</A>&gt;rd%rp HTTP
</I>&gt;<i>   http_access deny HTTP
</I>&gt;<i>
</I>&gt;<i>   http_access allow src_networks
</I>&gt;<i>   ...
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>HTH
</I>&gt;<i>Amos
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>squid-users mailing list
</I>&gt;<i><A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i><A HREF="https://lists.squid-cache.org/listinfo/squid-users">https://lists.squid-cache.org/listinfo/squid-users</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="026849.html">[squid-users] Rewriting HTTP to HTTPS for generic package proxy
</A></li>
	<LI>Next message (by thread): <A HREF="026853.html">[squid-users] Rewriting HTTP to HTTPS for generic package proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26851">[ date ]</a>
              <a href="thread.html#26851">[ thread ]</a>
              <a href="subject.html#26851">[ subject ]</a>
              <a href="author.html#26851">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
