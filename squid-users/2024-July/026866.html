<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Rewriting HTTP to HTTPS for generic package proxy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Rewriting%20HTTP%20to%20HTTPS%20for%20generic%20package%20proxy&In-Reply-To=%3Ccda7c451-72eb-4be5-bc10-a7db7ea1ba64%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026865.html">
   <LINK REL="Next"  HREF="026867.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Rewriting HTTP to HTTPS for generic package proxy</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Rewriting%20HTTP%20to%20HTTPS%20for%20generic%20package%20proxy&In-Reply-To=%3Ccda7c451-72eb-4be5-bc10-a7db7ea1ba64%40measurement-factory.com%3E"
       TITLE="[squid-users] Rewriting HTTP to HTTPS for generic package proxy">rousskov at measurement-factory.com
       </A><BR>
    <I>Wed Jul 10 20:15:10 UTC 2024</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="026865.html">[squid-users] Rewriting HTTP to HTTPS for generic package proxy
</A></li>
        <LI>Next message (by thread): <A HREF="026867.html">[squid-users] Rewriting HTTP to HTTPS for generic package proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26866">[ date ]</a>
              <a href="thread.html#26866">[ thread ]</a>
              <a href="subject.html#26866">[ subject ]</a>
              <a href="author.html#26866">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2024-07-10 15:31, Fiehe, Christoph wrote:
&gt;<i> The problem is that the proxy just forwards the client GET request to the upstream proxy
</I>
Why does sending a GET request to the upstream proxy represent a problem 
in your use case? I cannot find anything in your prior messages on this 
thread that would preclude sending a GET request to the upstream proxy.


&gt;<i> but in that case a CONNECT is required.
</I>
Why?

Please do not interpret my response as implying that this &quot;must send 
CONNECT&quot; requirement is wrong (or correct). At this point, I am just 
trying to understand what problem(s) you are trying to solve beyond the 
one you have originally described.


Thank you,

Alex.


&gt;<i> Working case: Upstream proxy receives a CONNECT from the downstream proxy
</I>&gt;<i> 
</I>&gt;<i> 2024/07/10 21:06:05.355 kid1| 5,2| TcpAcceptor.cc(214) doAccept: New connection on FD 12
</I>&gt;<i> 2024/07/10 21:06:05.355 kid1| 5,2| TcpAcceptor.cc(316) acceptNext: connection on conn482169 local=[::]:3128 remote=[::] FD 12 flags=9
</I>&gt;<i> 2024/07/10 21:06:05.355 kid1| 51,3| fd.cc(168) fd_open: fd_open() FD 16 HTTP Request
</I>&gt;<i> 2024/07/10 21:06:05.355 kid1| 28,3| Eui48.cc(511) lookup: id=0x5651b3e6d558 10.2.59.181 NOT found
</I>&gt;<i> 2024/07/10 21:06:05.355 kid1| 17,2| QosConfig.cc(162) getNfConnmark: QOS: Failed to retrieve connection mark: (-1) (2) No such file or directory (Destination X.X.X.X:3128, source 10.2.59.181:40122)
</I>&gt;<i> 2024/07/10 21:06:05.355 kid1| 5,3| comm.cc(599) commSetConnTimeout: conn482750 local=X.X.X.X:3128 remote=10.2.59.181:40122 FD 16 flags=1 timeout 300
</I>&gt;<i> 2024/07/10 21:06:05.355 kid1| 5,3| IoCallback.cc(112) finish: called for conn482750 local=X.X.X.X:3128 remote=10.2.59.181:40122 FD 16 flags=1 (0, 0)
</I>&gt;<i> 2024/07/10 21:06:05.355 kid1| 5,3| Read.cc(93) ReadNow: conn482750 local=X.X.X.X:3128 remote=10.2.59.181:40122 FD 16 flags=1, size 4096, retval 213, errno 0
</I>&gt;<i> 2024/07/10 21:06:05.355 kid1| 5,3| comm.cc(599) commSetConnTimeout: conn482750 local=X.X.X.X:3128 remote=10.2.59.181:40122 FD 16 flags=1 timeout 300
</I>&gt;<i> 2024/07/10 21:06:05.355 kid1| 33,3| Pipeline.cc(43) back: Pipeline 0x5651b328cb80 empty
</I>&gt;<i> 2024/07/10 21:06:05.355 kid1| 11,2| client_side.cc(1332) parseHttpRequest: HTTP Client conn482750 local=X.X.X.X:3128 remote=10.2.59.181:40122 FD 16 flags=1
</I>&gt;<i> 2024/07/10 21:06:05.355 kid1| 11,2| client_side.cc(1333) parseHttpRequest: HTTP Client REQUEST:
</I>&gt;<i> ---------
</I>&gt;<i> CONNECT download.docker.com:443 HTTP/1.1
</I>&gt;<i> Host: download.docker.com:443
</I>&gt;<i> User-Agent: curl/7.81.0
</I>&gt;<i> Via: 1.1 pkg-proxy (squid/6.10)
</I>&gt;<i> X-Forwarded-For: 10.2.59.102
</I>&gt;<i> Cache-Control: max-age=259200
</I>&gt;<i> Connection: close
</I>&gt;<i> 
</I>&gt;<i> Not working after schema rewrite: Upstream proxy receives a GET from the proxy
</I>&gt;<i> 
</I>&gt;<i> 2024/07/10 18:24:44.031 kid1| 5,2| TcpAcceptor.cc(214) doAccept: New connection on FD 12
</I>&gt;<i> 2024/07/10 18:24:44.031 kid1| 5,2| TcpAcceptor.cc(316) acceptNext: connection on conn482169 local=[::]:3128 remote=[::] FD 12 flags=9
</I>&gt;<i> 2024/07/10 18:24:44.031 kid1| 51,3| fd.cc(168) fd_open: fd_open() FD 16 HTTP Request
</I>&gt;<i> 2024/07/10 18:24:44.031 kid1| 28,3| Eui48.cc(511) lookup: id=0x5651b3e6d558 10.2.59.181 NOT found
</I>&gt;<i> 2024/07/10 18:24:44.031 kid1| 17,2| QosConfig.cc(162) getNfConnmark: QOS: Failed to retrieve connection mark: (-1) (2) No such file or directory (Destination X.X.X.X:3128, source 10.2.59.181:59100)
</I>&gt;<i> 2024/07/10 18:24:44.031 kid1| 5,3| comm.cc(599) commSetConnTimeout: conn482175 local=X.X.X.X:3128 remote=10.2.59.181:59100 FD 16 flags=1 timeout 300
</I>&gt;<i> 2024/07/10 18:24:44.031 kid1| 5,3| IoCallback.cc(112) finish: called for conn482175 local=X.X.X.X:3128 remote=10.2.59.181:59100 FD 16 flags=1 (0, 0)
</I>&gt;<i> 2024/07/10 18:24:44.031 kid1| 5,3| Read.cc(93) ReadNow: conn482175 local=X.X.X.X:3128 remote=10.2.59.181:59100 FD 16 flags=1, size 4096, retval 293, errno 0
</I>&gt;<i> 2024/07/10 18:24:44.031 kid1| 5,3| comm.cc(599) commSetConnTimeout: conn482175 local=X.X.X.X:3128 remote=10.2.59.181:59100 FD 16 flags=1 timeout 300
</I>&gt;<i> 2024/07/10 18:24:44.031 kid1| 33,3| Pipeline.cc(43) back: Pipeline 0x5651b328cb80 empty
</I>&gt;<i> 2024/07/10 18:24:44.031 kid1| 11,2| client_side.cc(1332) parseHttpRequest: HTTP Client conn482175 local=X.X.X.X:3128 remote=10.2.59.181:59100 FD 16 flags=1
</I>&gt;<i> 2024/07/10 18:24:44.031 kid1| 11,2| client_side.cc(1333) parseHttpRequest: HTTP Client REQUEST:
</I>&gt;<i> ---------
</I>&gt;<i> GET <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A> HTTP/1.1
</I>&gt;<i> Host: download.docker.com
</I>&gt;<i> Accept: text/*
</I>&gt;<i> User-Agent: Debian APT-HTTP/1.3 (2.4.12) non-interactive
</I>&gt;<i> Via: 1.1 pkg-proxy (squid/6.10)
</I>&gt;<i> X-Forwarded-For: 10.2.59.102
</I>&gt;<i> Cache-Control: max-age=0
</I>&gt;<i> Connection: keep-alive
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> -----Urspr&#252;ngliche Nachricht-----
</I>&gt;&gt;<i> Von: Alex Rousskov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt;
</I>&gt;&gt;<i> Gesendet: Mittwoch, 10. Juli 2024 18:56
</I>&gt;&gt;<i> An: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;<i> Cc: Fiehe, Christoph &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">c.fiehe at eurodata.de</A>&gt;
</I>&gt;&gt;<i> Betreff: Re: [squid-users] Rewriting HTTP to HTTPS for generic package proxy
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 2024-07-10 12:42, Fiehe, Christoph wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> In the next test case, I used a more modern upstream proxy server based von Squid 6.8
</I>&gt;&gt;<i> and enabled debugging.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The log shows the error SQUID_TLS_ERR_CONNECT+GNUTLS_E_FATAL_ALERT_RECEIVED. I am not
</I>&gt;&gt;<i> sure, what I can do to prevent it from occurring
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I cannot help with GnuTLS, but I can recommend using Squid built with
</I>&gt;&gt;<i> OpenSSL libraries (./configure --with-openssl) instead of Squid built
</I>&gt;&gt;<i> with GnuTLS.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> HTH,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Alex.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.031 kid1| 5,2| TcpAcceptor.cc(214) doAccept: New connection on FD 12
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.031 kid1| 5,2| TcpAcceptor.cc(316) acceptNext: connection on
</I>&gt;&gt;<i> conn482169 local=[::]:3128 remote=[::] FD 12 flags=9
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.031 kid1| 51,3| fd.cc(168) fd_open: fd_open() FD 16 HTTP Request
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.031 kid1| 28,3| Eui48.cc(511) lookup: id=0x5651b3e6d558 10.2.59.181
</I>&gt;&gt;<i> NOT found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.031 kid1| 17,2| QosConfig.cc(162) getNfConnmark: QOS: Failed to
</I>&gt;&gt;<i> retrieve connection mark: (-1) (2) No such file or directory (Destination
</I>&gt;&gt;<i> 212.89.134.12:3128, source 10.2.59.181:59100)
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.031 kid1| 5,3| comm.cc(599) commSetConnTimeout: conn482175
</I>&gt;&gt;<i> local=212.89.134.12:3128 remote=10.2.59.181:59100 FD 16 flags=1 timeout 300
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.031 kid1| 5,3| IoCallback.cc(112) finish: called for conn482175
</I>&gt;&gt;<i> local=212.89.134.12:3128 remote=10.2.59.181:59100 FD 16 flags=1 (0, 0)
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.031 kid1| 5,3| Read.cc(93) ReadNow: conn482175
</I>&gt;&gt;<i> local=212.89.134.12:3128 remote=10.2.59.181:59100 FD 16 flags=1, size 4096, retval 293,
</I>&gt;&gt;<i> errno 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.031 kid1| 5,3| comm.cc(599) commSetConnTimeout: conn482175
</I>&gt;&gt;<i> local=212.89.134.12:3128 remote=10.2.59.181:59100 FD 16 flags=1 timeout 300
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.031 kid1| 33,3| Pipeline.cc(43) back: Pipeline 0x5651b328cb80 empty
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.031 kid1| 11,2| client_side.cc(1332) parseHttpRequest: HTTP Client
</I>&gt;&gt;<i> conn482175 local=212.89.134.12:3128 remote=10.2.59.181:59100 FD 16 flags=1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.031 kid1| 11,2| client_side.cc(1333) parseHttpRequest: HTTP Client
</I>&gt;&gt;<i> REQUEST:
</I>&gt;&gt;&gt;<i> ---------
</I>&gt;&gt;&gt;<i> GET <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A> HTTP/1.1
</I>&gt;&gt;&gt;<i> Host: download.docker.com
</I>&gt;&gt;&gt;<i> Accept: text/*
</I>&gt;&gt;&gt;<i> User-Agent: Debian APT-HTTP/1.3 (2.4.12) non-interactive
</I>&gt;&gt;&gt;<i> Via: 1.1 pkg-proxy (squid/6.10)
</I>&gt;&gt;&gt;<i> X-Forwarded-For: 10.2.59.102
</I>&gt;&gt;&gt;<i> Cache-Control: max-age=0
</I>&gt;&gt;&gt;<i> Connection: keep-alive
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> ----------
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.031 kid1| 33,3| client_side.cc(1364) parseHttpRequest: complete
</I>&gt;&gt;<i> request received. prefix_sz = 293, request-line-size=77, mime-header-size=216, mime header
</I>&gt;&gt;<i> block:
</I>&gt;&gt;&gt;<i> Host: download.docker.com
</I>&gt;&gt;&gt;<i> Accept: text/*
</I>&gt;&gt;&gt;<i> User-Agent: Debian APT-HTTP/1.3 (2.4.12) non-interactive
</I>&gt;&gt;&gt;<i> Via: 1.1 pkg-proxy (squid/6.10)
</I>&gt;&gt;&gt;<i> X-Forwarded-For: 10.2.59.102
</I>&gt;&gt;&gt;<i> Cache-Control: max-age=0
</I>&gt;&gt;&gt;<i> Connection: keep-alive
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> ----------
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.031 kid1| 87,3| clientStream.cc(139) clientStreamInsertHead:
</I>&gt;&gt;<i> clientStreamInsertHead: Inserted node 0x5651b6c14538 with data 0x5651b379ecb0 after head
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.031 kid1| 5,3| comm.cc(599) commSetConnTimeout: conn482175
</I>&gt;&gt;<i> local=212.89.134.12:3128 remote=10.2.59.181:59100 FD 16 flags=1 timeout 86400
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.031 kid1| 33,3| client_side.cc(1767) add: 0x5651b379dc40*3 to 0/0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.031 kid1| 33,3| Pipeline.cc(24) add: Pipeline 0x5651b328cb80 add
</I>&gt;&gt;<i> request 1 0x5651b379dc40*4
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.031 kid1| 23,3| Uri.cc(446) parse: Split URL
</I>&gt;&gt;<i> '<A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>' into proto='https',
</I>&gt;&gt;<i> host='download.docker.com', port='443', path='/linux/ubuntu/dists/jammy/InRelease'
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.031 kid1| 14,3| Address.cc(389) lookupHostIP: Given Non-IP
</I>&gt;&gt;<i> 'download.docker.com': Name or service not known
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.031 kid1| 33,3| client_side.cc(702) clientSetKeepaliveFlag: http_ver
</I>&gt;&gt;<i> = HTTP/1.1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.031 kid1| 33,3| client_side.cc(703) clientSetKeepaliveFlag: method =
</I>&gt;&gt;<i> GET
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.031 kid1| 85,3| client_side_request.cc(123) ClientRequestContext:
</I>&gt;&gt;<i> ClientRequestContext constructed, this=0x5651b667b8b8
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.031 kid1| 83,3| client_side_request.cc(1709) doCallouts: Doing
</I>&gt;&gt;<i> calloutContext-&gt;hostHeaderVerify()
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.031 kid1| 85,3| client_side_request.cc(607) hostHeaderVerify:
</I>&gt;&gt;<i> validate host=download.docker.com, port=0, portStr=NULL
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.031 kid1| 85,3| client_side_request.cc(621) hostHeaderVerify:
</I>&gt;&gt;<i> validate skipped.
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.031 kid1| 83,3| client_side_request.cc(1716) doCallouts: Doing
</I>&gt;&gt;<i> calloutContext-&gt;clientAccessCheck()
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.031 kid1| 28,3| Checklist.cc(69) preCheck: 0x5651b56d0d38 checking
</I>&gt;&gt;<i> slow rules
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp: '10.2.59.181' found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 28,3| Acl.cc(175) matches: checked: all = 1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 28,3| Acl.cc(175) matches: checked:
</I>&gt;&gt;<i> follow_x_forwarded_for#1 = 1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 28,3| Acl.cc(175) matches: checked: follow_x_forwarded_for
</I>&gt;&gt;<i> = 1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 28,3| Checklist.cc(62) markFinished: 0x5651b56d0d38 answer
</I>&gt;&gt;<i> DENIED for match
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 28,3| Checklist.cc(162) checkCallback:
</I>&gt;&gt;<i> ACLChecklist::checkCallback: 0x5651b56d0d38 answer=DENIED
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 28,3| Checklist.cc(69) preCheck: 0x5651b5f334e8 checking
</I>&gt;&gt;<i> slow rules
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 28,3| Acl.cc(175) matches: checked: Safe_ports = 1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 28,3| Acl.cc(175) matches: checked: !Safe_ports = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 28,3| Acl.cc(175) matches: checked: http_access#1 = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 28,3| Acl.cc(175) matches: checked: CONNECT = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 28,3| Acl.cc(175) matches: checked: http_access#2 = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp: '10.2.59.181' NOT
</I>&gt;&gt;<i> found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 28,3| Acl.cc(175) matches: checked: localhost = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 28,3| Acl.cc(175) matches: checked: http_access#3 = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 28,3| RegexData.cc(50) match: checking
</I>&gt;&gt;<i> '<A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>'
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 28,3| Acl.cc(175) matches: checked: manager = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 28,3| Acl.cc(175) matches: checked: http_access#4 = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 14,3| ipcache.cc(733) ipcache_gethostbyname:
</I>&gt;&gt;<i> 'download.docker.com', flags=1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 14,3| ipcache.cc(314) ipcacheRelease: ipcacheRelease:
</I>&gt;&gt;<i> Releasing entry for 'download.docker.com'
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 14,3| Address.cc(389) lookupHostIP: Given Non-IP
</I>&gt;&gt;<i> 'download.docker.com': Name or service not known
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 14,3| Address.cc(389) lookupHostIP: Given Non-IP
</I>&gt;&gt;<i> 'download.docker.com': Name or service not known
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 78,3| dns_internal.cc(1793) idnsALookup: idnsALookup: buf
</I>&gt;&gt;<i> is 37 bytes for download.docker.com, id = 0xc228
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 50,3| comm.cc(927) comm_udp_sendto: comm_udp_sendto:
</I>&gt;&gt;<i> Attempt to send UDP packet to X.X.X.X:53 using FD 10 using Port 52871
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 78,3| dns_internal.cc(1729) idnsSendSlaveAAAAQuery: buf is
</I>&gt;&gt;<i> 48 bytes for download.docker.com, id = 0x798c
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 50,3| comm.cc(927) comm_udp_sendto: comm_udp_sendto:
</I>&gt;&gt;<i> Attempt to send UDP packet to X.X.X.X:53 using FD 10 using Port 52871
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 28,3| DestinationIp.cc(78) match: can't yet compare
</I>&gt;&gt;<i> 'to_localhost' ACL for download.docker.com
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 14,3| Address.cc(389) lookupHostIP: Given Non-IP
</I>&gt;&gt;<i> 'download.docker.com': Name or service not known
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 28,3| Acl.cc(175) matches: checked: to_localhost = -1
</I>&gt;&gt;<i> async
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 28,3| Acl.cc(175) matches: checked: http_access#5 = -1
</I>&gt;&gt;<i> async
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.032 kid1| 28,3| Acl.cc(175) matches: checked: http_access = -1 async
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.048 kid1| 78,3| dns_internal.cc(1320) idnsRead: idnsRead: starting
</I>&gt;&gt;<i> with FD 10
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 78,3| dns_internal.cc(1366) idnsRead: idnsRead: FD 10:
</I>&gt;&gt;<i> received 144 bytes from X.X.X.X:53
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 78,3| dns_internal.cc(1173) idnsGrokReply: idnsGrokReply:
</I>&gt;&gt;<i> QID 0xc228, 5 answers
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(481) ipcacheParse: 5 answers for
</I>&gt;&gt;<i> download.docker.com
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(536) addGood: download.docker.com #1
</I>&gt;&gt;<i> 108.138.7.18
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(536) addGood: download.docker.com #2
</I>&gt;&gt;<i> 108.138.7.33
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(536) addGood: download.docker.com #3
</I>&gt;&gt;<i> 108.138.7.48
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(536) addGood: download.docker.com #4
</I>&gt;&gt;<i> 108.138.7.88
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(481) ipcacheParse: 5 answers for
</I>&gt;&gt;<i> download.docker.com
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(536) addGood: download.docker.com #1
</I>&gt;&gt;<i> 108.138.7.18
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(536) addGood: download.docker.com #2
</I>&gt;&gt;<i> 108.138.7.33
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(536) addGood: download.docker.com #3
</I>&gt;&gt;<i> 108.138.7.48
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(536) addGood: download.docker.com #4
</I>&gt;&gt;<i> 108.138.7.88
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 78,3| dns_internal.cc(1320) idnsRead: idnsRead: starting
</I>&gt;&gt;<i> with FD 10
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 78,3| dns_internal.cc(1366) idnsRead: idnsRead: FD 10:
</I>&gt;&gt;<i> received 315 bytes from X.X.X.X:53
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 78,3| dns_internal.cc(1173) idnsGrokReply: idnsGrokReply:
</I>&gt;&gt;<i> QID 0x798c, 9 answers
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(481) ipcacheParse: 9 answers for
</I>&gt;&gt;<i> download.docker.com
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(536) addGood: download.docker.com #5
</I>&gt;&gt;<i> [2600:9000:2490:2200:3:db06:4200:93a1]
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(536) addGood: download.docker.com #6
</I>&gt;&gt;<i> [2600:9000:2490:3600:3:db06:4200:93a1]
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(536) addGood: download.docker.com #7
</I>&gt;&gt;<i> [2600:9000:2490:7000:3:db06:4200:93a1]
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(536) addGood: download.docker.com #8
</I>&gt;&gt;<i> [2600:9000:2490:d600:3:db06:4200:93a1]
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(536) addGood: download.docker.com #9
</I>&gt;&gt;<i> [2600:9000:2490:5a00:3:db06:4200:93a1]
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(536) addGood: download.docker.com #10
</I>&gt;&gt;<i> [2600:9000:2490:6600:3:db06:4200:93a1]
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(536) addGood: download.docker.com #11
</I>&gt;&gt;<i> [2600:9000:2490:b600:3:db06:4200:93a1]
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(536) addGood: download.docker.com #12
</I>&gt;&gt;<i> [2600:9000:2490:aa00:3:db06:4200:93a1]
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(587) ipcacheHandleReply: done with
</I>&gt;&gt;<i> download.docker.com: 108.138.7.18 #1/12-0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(481) ipcacheParse: 9 answers for
</I>&gt;&gt;<i> download.docker.com
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(536) addGood: download.docker.com #5
</I>&gt;&gt;<i> [2600:9000:2490:2200:3:db06:4200:93a1]
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(536) addGood: download.docker.com #6
</I>&gt;&gt;<i> [2600:9000:2490:3600:3:db06:4200:93a1]
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(536) addGood: download.docker.com #7
</I>&gt;&gt;<i> [2600:9000:2490:7000:3:db06:4200:93a1]
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(536) addGood: download.docker.com #8
</I>&gt;&gt;<i> [2600:9000:2490:d600:3:db06:4200:93a1]
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(536) addGood: download.docker.com #9
</I>&gt;&gt;<i> [2600:9000:2490:5a00:3:db06:4200:93a1]
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(536) addGood: download.docker.com #10
</I>&gt;&gt;<i> [2600:9000:2490:6600:3:db06:4200:93a1]
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(536) addGood: download.docker.com #11
</I>&gt;&gt;<i> [2600:9000:2490:b600:3:db06:4200:93a1]
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(536) addGood: download.docker.com #12
</I>&gt;&gt;<i> [2600:9000:2490:aa00:3:db06:4200:93a1]
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(587) ipcacheHandleReply: done with
</I>&gt;&gt;<i> download.docker.com: 108.138.7.18 #1/12-0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(314) ipcacheRelease: ipcacheRelease:
</I>&gt;&gt;<i> Releasing entry for 'download.docker.com'
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(733) ipcache_gethostbyname:
</I>&gt;&gt;<i> 'download.docker.com', flags=1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp: '108.138.7.18' NOT
</I>&gt;&gt;<i> found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp: '108.138.7.33' NOT
</I>&gt;&gt;<i> found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp: '108.138.7.48' NOT
</I>&gt;&gt;<i> found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp: '108.138.7.88' NOT
</I>&gt;&gt;<i> found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp:
</I>&gt;&gt;<i> '[2600:9000:2490:2200:3:db06:4200:93a1]' NOT found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp:
</I>&gt;&gt;<i> '[2600:9000:2490:3600:3:db06:4200:93a1]' NOT found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp:
</I>&gt;&gt;<i> '[2600:9000:2490:7000:3:db06:4200:93a1]' NOT found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp:
</I>&gt;&gt;<i> '[2600:9000:2490:d600:3:db06:4200:93a1]' NOT found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp:
</I>&gt;&gt;<i> '[2600:9000:2490:5a00:3:db06:4200:93a1]' NOT found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp:
</I>&gt;&gt;<i> '[2600:9000:2490:6600:3:db06:4200:93a1]' NOT found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp:
</I>&gt;&gt;<i> '[2600:9000:2490:b600:3:db06:4200:93a1]' NOT found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp:
</I>&gt;&gt;<i> '[2600:9000:2490:aa00:3:db06:4200:93a1]' NOT found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: to_localhost = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| InnerNode.cc(100) resumeMatchingAt: checked:
</I>&gt;&gt;<i> http_access#5 = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: PURGE = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: http_access#6 = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: PURGE = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: http_access#7 = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp: '10.2.59.181' NOT
</I>&gt;&gt;<i> found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: localhost = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: http_access#8 = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp: '10.2.59.181' NOT
</I>&gt;&gt;<i> found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: nocnet = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: http_access#9 = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp: '10.2.59.181' NOT
</I>&gt;&gt;<i> found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: EXTERNAL_DEV_CLIENTS =
</I>&gt;&gt;<i> 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: http_access#10 = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: CONNECT = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: http_access#11 = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: CONNECT = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: http_access#12 = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp: '10.2.59.181' NOT
</I>&gt;&gt;<i> found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: GERMANIA_PROXY = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: http_access#13 = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp: '10.2.59.181' NOT
</I>&gt;&gt;<i> found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: GERMANIA_PROXY = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: http_access#14 = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp: '10.2.59.181' NOT
</I>&gt;&gt;<i> found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: GERMANIA_PROXY = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: http_access#15 = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp: '10.2.59.181' NOT
</I>&gt;&gt;<i> found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: GERMANIA_PROXY = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: http_access#16 = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp: '10.2.59.181' NOT
</I>&gt;&gt;<i> found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: GERMANIA_PROXY = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: http_access#17 = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: Safe_ports = 1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: !Safe_ports = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: http_access#18 = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: CONNECT = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: http_access#19 = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| RegexData.cc(50) match: checking
</I>&gt;&gt;<i> '/linux/ubuntu/dists/jammy/InRelease'
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: worm = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: http_access#20 = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 14,3| ipcache.cc(733) ipcache_gethostbyname:
</I>&gt;&gt;<i> 'download.docker.com', flags=1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp: '108.138.7.18' NOT
</I>&gt;&gt;<i> found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp: '108.138.7.33' NOT
</I>&gt;&gt;<i> found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp: '108.138.7.48' NOT
</I>&gt;&gt;<i> found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp: '108.138.7.88' NOT
</I>&gt;&gt;<i> found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp:
</I>&gt;&gt;<i> '[2600:9000:2490:2200:3:db06:4200:93a1]' NOT found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp:
</I>&gt;&gt;<i> '[2600:9000:2490:3600:3:db06:4200:93a1]' NOT found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp:
</I>&gt;&gt;<i> '[2600:9000:2490:7000:3:db06:4200:93a1]' NOT found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp:
</I>&gt;&gt;<i> '[2600:9000:2490:d600:3:db06:4200:93a1]' NOT found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp:
</I>&gt;&gt;<i> '[2600:9000:2490:5a00:3:db06:4200:93a1]' NOT found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp:
</I>&gt;&gt;<i> '[2600:9000:2490:6600:3:db06:4200:93a1]' NOT found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp:
</I>&gt;&gt;<i> '[2600:9000:2490:b600:3:db06:4200:93a1]' NOT found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp:
</I>&gt;&gt;<i> '[2600:9000:2490:aa00:3:db06:4200:93a1]' NOT found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: SEUCHEN_IPS = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: http_access#21 = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| DomainData.cc(110) match: aclMatchDomainList:
</I>&gt;&gt;<i> checking 'download.docker.com'
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| DomainData.cc(115) match: aclMatchDomainList:
</I>&gt;&gt;<i> 'download.docker.com' NOT found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: SEUCHEN_DOMAINS = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: http_access#22 = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| RegexData.cc(50) match: checking
</I>&gt;&gt;<i> 'download.docker.com'
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.049 kid1| 28,3| Acl.cc(175) matches: checked: SEUCHEN_DOMAINS_REGEX
</I>&gt;&gt;<i> = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| Acl.cc(175) matches: checked: http_access#23 = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp: '10.2.59.181' NOT
</I>&gt;&gt;<i> found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| Acl.cc(175) matches: checked: GERMANIA_PROXY = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| Acl.cc(175) matches: checked: http_access#24 = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp: '10.2.59.181' found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| Acl.cc(175) matches: checked: REPOSITORY-CLIENTS = 1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| DomainData.cc(110) match: aclMatchDomainList:
</I>&gt;&gt;<i> checking 'download.docker.com'
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| DomainData.cc(115) match: aclMatchDomainList:
</I>&gt;&gt;<i> 'download.docker.com' found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| Acl.cc(175) matches: checked: REPOSITORY-ZIELE = 1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| Acl.cc(175) matches: checked: http_access#25 = 1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| InnerNode.cc(100) resumeMatchingAt: checked:
</I>&gt;&gt;<i> http_access = 1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| Checklist.cc(62) markFinished: 0x5651b5f334e8 answer
</I>&gt;&gt;<i> ALLOWED for match
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| Checklist.cc(162) checkCallback:
</I>&gt;&gt;<i> ACLChecklist::checkCallback: 0x5651b5f334e8 answer=ALLOWED
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 85,2| client_side_request.cc(715) clientAccessCheckDone:
</I>&gt;&gt;<i> The request GET <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A> is ALLOWED;
</I>&gt;&gt;<i> last ACL checked: REPOSITORY-ZIELE
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 83,3| AccessCheck.cc(42) Start: adaptation off, skipping
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 83,3| client_side_request.cc(1744) doCallouts: Doing
</I>&gt;&gt;<i> calloutContext-&gt;clientAccessCheck2()
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 85,2| client_side_request.cc(693) clientAccessCheck2: No
</I>&gt;&gt;<i> adapted_http_access configuration. default: ALLOW
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 85,2| client_side_request.cc(715) clientAccessCheckDone:
</I>&gt;&gt;<i> The request GET <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A> is ALLOWED;
</I>&gt;&gt;<i> last ACL checked: REPOSITORY-ZIELE
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 83,3| client_side_request.cc(1762) doCallouts: Doing
</I>&gt;&gt;<i> clientInterpretRequestHeaders()
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 85,3| client_side_request.cc(117) ~ClientRequestContext:
</I>&gt;&gt;<i> ClientRequestContext destructed, this=0x5651b667b8b8
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 83,3| client_side_request.cc(1856) doCallouts: calling
</I>&gt;&gt;<i> processRequest()
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 87,3| clientStream.cc(178) clientStreamRead:
</I>&gt;&gt;<i> clientStreamRead: Calling 1 with cbdata 0x5651b379fd80 from node 0x5651b6c14538
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 73,3| HttpRequest.cc(742) storeId: sent back
</I>&gt;&gt;<i> effectiveRequestUrl: <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 20,3| Controller.cc(429) peek:
</I>&gt;&gt;<i> D3522EE27FB0ED7004DD594AF7674667
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 85,3| client_side_reply.cc(1523) identifyFoundObject:
</I>&gt;&gt;<i> StoreEntry is NULL -  MISS
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 20,3| store.cc(731) storeCreatePureEntry:
</I>&gt;&gt;<i> storeCreateEntry: '<A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>'
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 20,3| MemObject.cc(99) MemObject: MemObject constructed,
</I>&gt;&gt;<i> this=0x5651b3ae4fc0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 88,3| MemObject.cc(82) setUris: 0x5651b3ae4fc0 storeId:
</I>&gt;&gt;<i> <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 20,3| store.cc(435) lock: storeCreateEntry locked key
</I>&gt;&gt;<i> [null_store_key] e:=V/0x5651b365e210*1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 20,3| store.cc(537) setPrivateKey: 00
</I>&gt;&gt;<i> e:=V/0x5651b365e210*1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 20,3| store.cc(413) hashInsert: StoreEntry::hashInsert:
</I>&gt;&gt;<i> Inserting Entry e:=IV/0x5651b365e210*1 key '8349000000000000D107000001000000'
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 20,3| store.cc(435) lock: store_client locked key
</I>&gt;&gt;<i> 8349000000000000D107000001000000 e:=IV/0x5651b365e210*2
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 90,3| store_client.cc(243) copy: store_client::copy:
</I>&gt;&gt;<i> 8349000000000000D107000001000000, from 0, for length 4096, cb 1, cbdata 0x5651b379ece8
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 20,3| store.cc(435) lock: store_client::copy locked key
</I>&gt;&gt;<i> 8349000000000000D107000001000000 e:=IV/0x5651b365e210*3
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 90,3| store_client.cc(343) storeClientCopy2:
</I>&gt;&gt;<i> storeClientCopy2: 8349000000000000D107000001000000
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 90,3| store_client.cc(390) doCopy: store_client::doCopy:
</I>&gt;&gt;<i> Waiting for more
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 20,3| store.cc(458) unlock: store_client::copy unlocking
</I>&gt;&gt;<i> key 8349000000000000D107000001000000 e:=IV/0x5651b365e210*3
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| Checklist.cc(69) preCheck: 0x7ffef6c09e30 checking
</I>&gt;&gt;<i> fast rules
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp: '10.2.59.181:59100'
</I>&gt;&gt;<i> found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| Acl.cc(175) matches: checked: all = 1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| Acl.cc(175) matches: checked: miss_access#1 = 1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| Acl.cc(175) matches: checked: miss_access = 1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| Checklist.cc(62) markFinished: 0x7ffef6c09e30 answer
</I>&gt;&gt;<i> ALLOWED for match
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 17,3| FwdState.cc(373) Start:
</I>&gt;&gt;<i> '<A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>'
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 17,2| FwdState.cc(133) FwdState: Forwarding client request
</I>&gt;&gt;<i> conn482175 local=212.89.134.12:3128 remote=10.2.59.181:59100 FD 16 flags=1,
</I>&gt;&gt;<i> url=<A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 20,3| store.cc(435) lock: FwdState locked key
</I>&gt;&gt;<i> 8349000000000000D107000001000000 e:=IV/0x5651b365e210*3
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 17,3| FwdState.cc(140) FwdState: FwdState constructed,
</I>&gt;&gt;<i> this=0x5651b695faf8
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,3| peer_select.cc(309) peerSelect:
</I>&gt;&gt;<i> e:=IV/0x5651b365e210*3 <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 20,3| store.cc(435) lock: peerSelect locked key
</I>&gt;&gt;<i> 8349000000000000D107000001000000 e:=IV/0x5651b365e210*4
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,3| peer_select.cc(612) selectMore: GET
</I>&gt;&gt;<i> download.docker.com
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,3| peer_select.cc(617) selectMore: direct =
</I>&gt;&gt;<i> DIRECT_UNKNOWN (always_direct to be checked)
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| Checklist.cc(69) preCheck: 0x5651b56d0d38 checking
</I>&gt;&gt;<i> slow rules
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp: '10.2.59.181' found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| Acl.cc(175) matches: checked: all = 1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| Acl.cc(175) matches: checked: always_direct#1 = 1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| Acl.cc(175) matches: checked: always_direct = 1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| Checklist.cc(62) markFinished: 0x5651b56d0d38 answer
</I>&gt;&gt;<i> ALLOWED for match
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| Checklist.cc(162) checkCallback:
</I>&gt;&gt;<i> ACLChecklist::checkCallback: 0x5651b56d0d38 answer=ALLOWED
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,3| peer_select.cc(373) checkAlwaysDirectDone: ALLOWED
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,3| peer_select.cc(379) checkAlwaysDirectDone: direct =
</I>&gt;&gt;<i> DIRECT_YES (always_direct allow)
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,3| peer_select.cc(612) selectMore: GET
</I>&gt;&gt;<i> download.docker.com
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,3| peer_select.cc(1102) addSelection: adding
</I>&gt;&gt;<i> HIER_DIRECT#download.docker.com
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(460) resolveSelected: Find IP
</I>&gt;&gt;<i> destination for: <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>' via
</I>&gt;&gt;<i> download.docker.com
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 14,3| Address.cc(389) lookupHostIP: Given Non-IP
</I>&gt;&gt;<i> 'download.docker.com': Name or service not known
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1174) handlePath: PeerSelector64364
</I>&gt;&gt;<i> found conn482176 local=0.0.0.0 remote=108.138.7.18:443 HIER_DIRECT flags=1, destination #1
</I>&gt;&gt;<i> for <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1180) handlePath:   always_direct =
</I>&gt;&gt;<i> ALLOWED
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1181) handlePath:    never_direct =
</I>&gt;&gt;<i> DUNNO
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1182) handlePath:        timedout = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 17,3| FwdState.cc(610) noteDestination: conn482176
</I>&gt;&gt;<i> local=0.0.0.0 remote=108.138.7.18:443 HIER_DIRECT flags=1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 17,3| FwdState.cc(1124) connectStart: 1+ paths to
</I>&gt;&gt;<i> <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1174) handlePath: PeerSelector64364
</I>&gt;&gt;<i> found conn482177 local=0.0.0.0 remote=108.138.7.33:443 HIER_DIRECT flags=1, destination #2
</I>&gt;&gt;<i> for <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1180) handlePath:   always_direct =
</I>&gt;&gt;<i> ALLOWED
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1181) handlePath:    never_direct =
</I>&gt;&gt;<i> DUNNO
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1182) handlePath:        timedout = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 17,3| FwdState.cc(610) noteDestination: conn482177
</I>&gt;&gt;<i> local=0.0.0.0 remote=108.138.7.33:443 HIER_DIRECT flags=1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1174) handlePath: PeerSelector64364
</I>&gt;&gt;<i> found conn482178 local=0.0.0.0 remote=108.138.7.48:443 HIER_DIRECT flags=1, destination #3
</I>&gt;&gt;<i> for <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1180) handlePath:   always_direct =
</I>&gt;&gt;<i> ALLOWED
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1181) handlePath:    never_direct =
</I>&gt;&gt;<i> DUNNO
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1182) handlePath:        timedout = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 17,3| FwdState.cc(610) noteDestination: conn482178
</I>&gt;&gt;<i> local=0.0.0.0 remote=108.138.7.48:443 HIER_DIRECT flags=1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1174) handlePath: PeerSelector64364
</I>&gt;&gt;<i> found conn482179 local=0.0.0.0 remote=108.138.7.88:443 HIER_DIRECT flags=1, destination #4
</I>&gt;&gt;<i> for <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1180) handlePath:   always_direct =
</I>&gt;&gt;<i> ALLOWED
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1181) handlePath:    never_direct =
</I>&gt;&gt;<i> DUNNO
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1182) handlePath:        timedout = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 17,3| FwdState.cc(610) noteDestination: conn482179
</I>&gt;&gt;<i> local=0.0.0.0 remote=108.138.7.88:443 HIER_DIRECT flags=1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1174) handlePath: PeerSelector64364
</I>&gt;&gt;<i> found conn482180 local=[::] remote=[2600:9000:2490:2200:3:db06:4200:93a1]:443 HIER_DIRECT
</I>&gt;&gt;<i> flags=1, destination #5 for <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1180) handlePath:   always_direct =
</I>&gt;&gt;<i> ALLOWED
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1181) handlePath:    never_direct =
</I>&gt;&gt;<i> DUNNO
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1182) handlePath:        timedout = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 17,3| FwdState.cc(610) noteDestination: conn482180
</I>&gt;&gt;<i> local=[::] remote=[2600:9000:2490:2200:3:db06:4200:93a1]:443 HIER_DIRECT flags=1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1174) handlePath: PeerSelector64364
</I>&gt;&gt;<i> found conn482181 local=[::] remote=[2600:9000:2490:3600:3:db06:4200:93a1]:443 HIER_DIRECT
</I>&gt;&gt;<i> flags=1, destination #6 for <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1180) handlePath:   always_direct =
</I>&gt;&gt;<i> ALLOWED
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1181) handlePath:    never_direct =
</I>&gt;&gt;<i> DUNNO
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1182) handlePath:        timedout = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 17,3| FwdState.cc(610) noteDestination: conn482181
</I>&gt;&gt;<i> local=[::] remote=[2600:9000:2490:3600:3:db06:4200:93a1]:443 HIER_DIRECT flags=1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1174) handlePath: PeerSelector64364
</I>&gt;&gt;<i> found conn482182 local=[::] remote=[2600:9000:2490:7000:3:db06:4200:93a1]:443 HIER_DIRECT
</I>&gt;&gt;<i> flags=1, destination #7 for <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1180) handlePath:   always_direct =
</I>&gt;&gt;<i> ALLOWED
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1181) handlePath:    never_direct =
</I>&gt;&gt;<i> DUNNO
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1182) handlePath:        timedout = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 17,3| FwdState.cc(610) noteDestination: conn482182
</I>&gt;&gt;<i> local=[::] remote=[2600:9000:2490:7000:3:db06:4200:93a1]:443 HIER_DIRECT flags=1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1174) handlePath: PeerSelector64364
</I>&gt;&gt;<i> found conn482183 local=[::] remote=[2600:9000:2490:d600:3:db06:4200:93a1]:443 HIER_DIRECT
</I>&gt;&gt;<i> flags=1, destination #8 for <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1180) handlePath:   always_direct =
</I>&gt;&gt;<i> ALLOWED
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1181) handlePath:    never_direct =
</I>&gt;&gt;<i> DUNNO
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1182) handlePath:        timedout = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 17,3| FwdState.cc(610) noteDestination: conn482183
</I>&gt;&gt;<i> local=[::] remote=[2600:9000:2490:d600:3:db06:4200:93a1]:443 HIER_DIRECT flags=1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1174) handlePath: PeerSelector64364
</I>&gt;&gt;<i> found conn482184 local=[::] remote=[2600:9000:2490:5a00:3:db06:4200:93a1]:443 HIER_DIRECT
</I>&gt;&gt;<i> flags=1, destination #9 for <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1180) handlePath:   always_direct =
</I>&gt;&gt;<i> ALLOWED
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1181) handlePath:    never_direct =
</I>&gt;&gt;<i> DUNNO
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1182) handlePath:        timedout = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 17,3| FwdState.cc(610) noteDestination: conn482184
</I>&gt;&gt;<i> local=[::] remote=[2600:9000:2490:5a00:3:db06:4200:93a1]:443 HIER_DIRECT flags=1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1174) handlePath: PeerSelector64364
</I>&gt;&gt;<i> found conn482185 local=[::] remote=[2600:9000:2490:6600:3:db06:4200:93a1]:443 HIER_DIRECT
</I>&gt;&gt;<i> flags=1, destination #10 for
</I>&gt;&gt;<i> <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1180) handlePath:   always_direct =
</I>&gt;&gt;<i> ALLOWED
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1181) handlePath:    never_direct =
</I>&gt;&gt;<i> DUNNO
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1182) handlePath:        timedout = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 17,3| FwdState.cc(610) noteDestination: conn482185
</I>&gt;&gt;<i> local=[::] remote=[2600:9000:2490:6600:3:db06:4200:93a1]:443 HIER_DIRECT flags=1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1174) handlePath: PeerSelector64364
</I>&gt;&gt;<i> found conn482186 local=[::] remote=[2600:9000:2490:b600:3:db06:4200:93a1]:443 HIER_DIRECT
</I>&gt;&gt;<i> flags=1, destination #11 for
</I>&gt;&gt;<i> <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1180) handlePath:   always_direct =
</I>&gt;&gt;<i> ALLOWED
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1181) handlePath:    never_direct =
</I>&gt;&gt;<i> DUNNO
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1182) handlePath:        timedout = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 17,3| FwdState.cc(610) noteDestination: conn482186
</I>&gt;&gt;<i> local=[::] remote=[2600:9000:2490:b600:3:db06:4200:93a1]:443 HIER_DIRECT flags=1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1174) handlePath: PeerSelector64364
</I>&gt;&gt;<i> found conn482187 local=[::] remote=[2600:9000:2490:aa00:3:db06:4200:93a1]:443 HIER_DIRECT
</I>&gt;&gt;<i> flags=1, destination #12 for
</I>&gt;&gt;<i> <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1180) handlePath:   always_direct =
</I>&gt;&gt;<i> ALLOWED
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1181) handlePath:    never_direct =
</I>&gt;&gt;<i> DUNNO
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(1182) handlePath:        timedout = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 17,3| FwdState.cc(610) noteDestination: conn482187
</I>&gt;&gt;<i> local=[::] remote=[2600:9000:2490:aa00:3:db06:4200:93a1]:443 HIER_DIRECT flags=1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(479) resolveSelected:
</I>&gt;&gt;<i> PeerSelector64364 found all 12 destinations for
</I>&gt;&gt;<i> <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(480) resolveSelected:   always_direct
</I>&gt;&gt;<i> = ALLOWED
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(481) resolveSelected:    never_direct
</I>&gt;&gt;<i> = DUNNO
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,2| peer_select.cc(482) resolveSelected:        timedout
</I>&gt;&gt;<i> = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 44,3| peer_select.cc(241) ~PeerSelector:
</I>&gt;&gt;<i> <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 20,3| store.cc(458) unlock: peerSelect unlocking key
</I>&gt;&gt;<i> 8349000000000000D107000001000000 e:=p2IV/0x5651b365e210*4
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 48,3| pconn.cc(474) popStored: lookup for key
</I>&gt;&gt;<i> {108.138.7.18:443/download.docker.com} failed.
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| Checklist.cc(69) preCheck: 0x7ffef6c0a460 checking
</I>&gt;&gt;<i> fast ACLs
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| DomainData.cc(110) match: aclMatchDomainList:
</I>&gt;&gt;<i> checking 'download.docker.com'
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| DomainData.cc(115) match: aclMatchDomainList:
</I>&gt;&gt;<i> 'download.docker.com' NOT found
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| Acl.cc(175) matches: checked: SKIP_PALO_DOMAINS_FAST
</I>&gt;&gt;<i> = 0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.050 kid1| 28,3| Acl.cc(175) matches: checked:
</I>&gt;&gt;<i> !SKIP_PALO_DOMAINS_FAST = 1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.051 kid1| 28,3| Acl.cc(175) matches: checked: (tcp_outgoing_mark
</I>&gt;&gt;<i> 0x14 line) = 1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.051 kid1| 28,3| Acl.cc(175) matches: checked: tcp_outgoing_mark 0x14
</I>&gt;&gt;<i> = 1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.051 kid1| 28,3| Checklist.cc(62) markFinished: 0x7ffef6c0a460 answer
</I>&gt;&gt;<i> ALLOWED for match
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.051 kid1| 17,3| FwdState.cc(1568) GetMarkingsToServer: from 0.0.0.0
</I>&gt;&gt;<i> tos 0 netfilter mark 20
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.051 kid1| 5,3| ConnOpener.cc(42) ConnOpener: will connect to
</I>&gt;&gt;<i> conn482189 local=0.0.0.0 remote=108.138.7.18:443 HIER_DIRECT flags=1 with 60 timeout
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.051 kid1| 50,3| comm.cc(378) comm_openex: comm_openex: Attempt open
</I>&gt;&gt;<i> socket for: 0.0.0.0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.051 kid1| 50,3| comm.cc(420) comm_openex: comm_openex: Opened socket
</I>&gt;&gt;<i> conn482190 local=0.0.0.0 remote=[::] FD 19 flags=1 : family=2, type=1, protocol=6
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.051 kid1| 51,3| fd.cc(168) fd_open: fd_open() FD 19
</I>&gt;&gt;<i> download.docker.com
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.051 kid1| 50,3| QosConfig.cc(581) setSockNfmark: for FD 19 to 20
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.051 kid1| 5,3| ConnOpener.cc(312) createFd: conn482189 local=0.0.0.0
</I>&gt;&gt;<i> remote=108.138.7.18:443 HIER_DIRECT flags=1 will timeout in 60
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.058 kid1| 83,2| Io.cc(161) Handshake: handshake IN: Unknown
</I>&gt;&gt;<i> Handshake packet
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.058 kid1| 83,2| Io.cc(163) Handshake: handshake OUT: CLIENT HELLO
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.058 kid1| 5,3| comm.cc(599) commSetConnTimeout: conn482189
</I>&gt;&gt;<i> local=X.X.X.X:36718 remote=108.138.7.18:443 HIER_DIRECT FD 19 flags=1 timeout 60
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.064 kid1| 83,2| Io.cc(161) Handshake: handshake IN: Unknown
</I>&gt;&gt;<i> Handshake packet
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.064 kid1| 83,2| Io.cc(163) Handshake: handshake OUT: CLIENT HELLO
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.064 kid1| 83,2| PeerConnector.cc(279) handleNegotiationResult:
</I>&gt;&gt;<i> ERROR: Cannot establish a TLS connection to conn482189 local=X.X.X.X:36718
</I>&gt;&gt;<i> remote=108.138.7.18:443 HIER_DIRECT FD 19 flags=1:
</I>&gt;&gt;&gt;<i>       problem: failure
</I>&gt;&gt;&gt;<i>       detail: SQUID_TLS_ERR_CONNECT+GNUTLS_E_FATAL_ALERT_RECEIVED
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.064 kid1| 5,3| comm.cc(625) commUnsetConnTimeout: Remove timeout for
</I>&gt;&gt;<i> conn482189 local=X.X.X.X:36718 remote=108.138.7.18:443 HIER_DIRECT FD 19 flags=1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.064 kid1| 5,3| comm.cc(599) commSetConnTimeout: conn482189
</I>&gt;&gt;<i> local=X.X.X.X:36718 remote=108.138.7.18:443 HIER_DIRECT FD 19 flags=1 timeout -1
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.064 kid1| 5,3| comm.cc(850) _comm_close: start closing FD 19 by
</I>&gt;&gt;<i> Connection.cc:108
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.064 kid1| 5,3| comm.cc(586) commUnsetFdTimeout: Remove timeout for
</I>&gt;&gt;<i> FD 19
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.064 kid1| 83,3| Session.cc(36) tls_read_method: started for
</I>&gt;&gt;<i> session=0x5651b404d2c0
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.064 kid1| 51,3| fd.cc(93) fd_close: fd_close FD 19 server https
</I>&gt;&gt;<i> start
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.064 kid1| 17,3| FwdState.cc(471) fail: ERR_SECURE_CONNECT_FAIL
</I>&gt;&gt;<i> &quot;Service Unavailable&quot;
</I>&gt;&gt;&gt;<i> 	<A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>
</I>&gt;&gt;&gt;<i> 2024/07/10 18:24:44.064 kid1| 17,3| FwdState.cc(781) retryOrBail: re-forwarding (1
</I>&gt;&gt;<i> tries, 0 secs)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> -----Urspr&#252;ngliche Nachricht-----
</I>&gt;&gt;&gt;&gt;<i> Von: Alex Rousskov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt;
</I>&gt;&gt;&gt;&gt;<i> Gesendet: Mittwoch, 10. Juli 2024 14:50
</I>&gt;&gt;&gt;&gt;<i> An: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;&gt;&gt;<i> Cc: Fiehe, Christoph &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">c.fiehe at eurodata.de</A>&gt;
</I>&gt;&gt;&gt;&gt;<i> Betreff: Re: [squid-users] Rewriting HTTP to HTTPS for generic package proxy
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> On 2024-07-09 18:25, Fiehe, Christoph wrote:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> I hope that somebody has an idea, what I am doing wrong.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> AFAICT from the debugging log, it is your parent proxy that returns an
</I>&gt;&gt;&gt;&gt;<i> ERR_SECURE_CONNECT_FAIL error page in response to a seemingly valid
</I>&gt;&gt;&gt;&gt;<i> &quot;HEAD <A HREF="https://...">https://...</A>&quot; request. Can you ask their admin to investigate? You
</I>&gt;&gt;&gt;&gt;<i> may also recommend that they upgrade from Squid v4 that has many known
</I>&gt;&gt;&gt;&gt;<i> security vulnerabiities.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> If parent is uncooperative, you can try to reproduce the problem by
</I>&gt;&gt;&gt;&gt;<i> temporary installing your own parent Squid instance and configuring your
</I>&gt;&gt;&gt;&gt;<i> child Squid to use that instead.
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> HTH,
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Alex.
</I>&gt;&gt;&gt;&gt;<i> P.S. Unlike Amos, I do not see serious conceptual problems with
</I>&gt;&gt;&gt;&gt;<i> rewriting request target scheme (as a temporary compatibility measure).
</I>&gt;&gt;&gt;&gt;<i> It may not always work, for various reasons, but it does not necessarily
</I>&gt;&gt;&gt;&gt;<i> make things worse (and may make things better).
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> I try to build a generic package proxy with Squid and need the feature
</I>&gt;&gt;&gt;&gt;<i> to rewrite (not redirect) a HTTP request to a package repository
</I>&gt;&gt;&gt;&gt;<i> transparently to a HTTPS-based package source. I was able to get Jesred
</I>&gt;&gt;&gt;&gt;<i> working and defined the following rewrite rule:
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> regex ^http:\/\/download\.docker\.com(.*)$ <A HREF="https://download.docker.com\1">https://download.docker.com\1</A>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> I had to use a parent upstream proxy. In my test case the rule gets applied
</I>&gt;&gt;&gt;&gt;<i> successfully:
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> 1720558404.106 10.2.59.102/molecule-ubuntu-jammy.lx.mycompany.de
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://download.docker.com/linux/ubuntu/dists/jammy/InRelease[http://download.docker.com/l">http://download.docker.com/linux/ubuntu/dists/jammy/InRelease[http://download.docker.com/l</A>
</I>&gt;&gt;&gt;&gt;<i> inux/ubuntu/dists/jammy/InRelease]
</I>&gt;&gt;&gt;&gt;<i> <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A> 2
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> I have validated that the returned URL is correct and that the resource is accessible
</I>&gt;&gt;&gt;&gt;<i> via my upstream proxy.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> But at the very end, the client receives a 503 error code. I have set &quot;debug_options
</I>&gt;&gt;&gt;&gt;<i> ALL,3&quot; and this gives the log:
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> [...]
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 11,2| client_side.cc(1333) parseHttpRequest: HTTP Client
</I>&gt;&gt;&gt;&gt;<i> REQUEST:
</I>&gt;&gt;&gt;&gt;&gt;<i> ---------
</I>&gt;&gt;&gt;&gt;&gt;<i> HEAD
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://download.docker.com/linux/ubuntu/dists/jammy/InRelease[http://download.docker.com/l">http://download.docker.com/linux/ubuntu/dists/jammy/InRelease[http://download.docker.com/l</A>
</I>&gt;&gt;&gt;&gt;<i> inux/ubuntu/dists/jammy/InRelease] HTTP/1.1
</I>&gt;&gt;&gt;&gt;&gt;<i> Host: download.docker.com
</I>&gt;&gt;&gt;&gt;&gt;<i> User-Agent: curl/7.81.0
</I>&gt;&gt;&gt;&gt;&gt;<i> Accept: */*
</I>&gt;&gt;&gt;&gt;&gt;<i> Proxy-Connection: Keep-Alive
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> ----------
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 33,3| client_side.cc(1364) parseHttpRequest: complete
</I>&gt;&gt;&gt;&gt;<i> request received. prefix_sz = 174, request-line-size=77, mime-header-size=97, mime
</I>&gt;&gt;<i> header
</I>&gt;&gt;&gt;&gt;<i> block:
</I>&gt;&gt;&gt;&gt;&gt;<i> Host: download.docker.com
</I>&gt;&gt;&gt;&gt;&gt;<i> User-Agent: curl/7.81.0
</I>&gt;&gt;&gt;&gt;&gt;<i> Accept: */*
</I>&gt;&gt;&gt;&gt;&gt;<i> Proxy-Connection: Keep-Alive
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> ----------
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 87,3| clientStream.cc(139) clientStreamInsertHead:
</I>&gt;&gt;&gt;&gt;<i> clientStreamInsertHead: Inserted node 0x5c3ba4154308 with data 0x5c3ba4152950 after
</I>&gt;&gt;<i> head
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 5,3| comm.cc(599) commSetConnTimeout: conn9
</I>&gt;&gt;&gt;&gt;<i> local=10.2.59.103:8000 remote=10.2.59.102:56466 FD 15 flags=1 timeout 86400
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 33,3| client_side.cc(1767) add: 0x5c3ba41518e0*3 to 0/0
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 33,3| Pipeline.cc(24) add: Pipeline 0x5c3ba41501f0 add
</I>&gt;&gt;&gt;&gt;<i> request 1 0x5c3ba41518e0*4
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 23,3| Uri.cc(446) parse: Split URL
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> '<A HREF="http://download.docker.com/linux/ubuntu/dists/jammy/InRelease">http://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>'[<A HREF="http://download.docker.com">http://download.docker.com</A>
</I>&gt;&gt;&gt;&gt;<i> /linux/ubuntu/dists/jammy/InRelease'] into proto='http', host='download.docker.com',
</I>&gt;&gt;&gt;&gt;<i> port='80', path='/linux/ubuntu/dists/jammy/InRelease'
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 14,3| Address.cc(389) lookupHostIP: Given Non-IP
</I>&gt;&gt;&gt;&gt;<i> 'download.docker.com': Name or service not known
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 33,3| client_side.cc(702) clientSetKeepaliveFlag:
</I>&gt;&gt;<i> http_ver
</I>&gt;&gt;&gt;&gt;<i> = HTTP/1.1
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 33,3| client_side.cc(703) clientSetKeepaliveFlag: method
</I>&gt;&gt;<i> =
</I>&gt;&gt;&gt;&gt;<i> HEAD
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 85,3| client_side_request.cc(122) ClientRequestContext:
</I>&gt;&gt;&gt;&gt;<i> ClientRequestContext constructed, this=0x5c3ba4154e78
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 83,3| client_side_request.cc(1708) doCallouts: Doing
</I>&gt;&gt;&gt;&gt;<i> calloutContext-&gt;hostHeaderVerify()
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 85,3| client_side_request.cc(606) hostHeaderVerify:
</I>&gt;&gt;&gt;&gt;<i> validate host=download.docker.com, port=0, portStr=NULL
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 85,3| client_side_request.cc(620) hostHeaderVerify:
</I>&gt;&gt;&gt;&gt;<i> validate skipped.
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 83,3| client_side_request.cc(1715) doCallouts: Doing
</I>&gt;&gt;&gt;&gt;<i> calloutContext-&gt;clientAccessCheck()
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 28,3| Checklist.cc(69) preCheck: 0x5c3ba41552d8 checking
</I>&gt;&gt;&gt;&gt;<i> slow rules
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp:
</I>&gt;&gt;<i> '10.2.59.102:56466'
</I>&gt;&gt;&gt;&gt;<i> found
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 28,3| Acl.cc(175) matches: checked: all = 1
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 28,3| Acl.cc(175) matches: checked: http_access#1 = 1
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 28,3| Acl.cc(175) matches: checked: http_access = 1
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 28,3| Checklist.cc(62) markFinished: 0x5c3ba41552d8
</I>&gt;&gt;<i> answer
</I>&gt;&gt;&gt;&gt;<i> ALLOWED for match
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 28,3| Checklist.cc(162) checkCallback:
</I>&gt;&gt;&gt;&gt;<i> ACLChecklist::checkCallback: 0x5c3ba41552d8 answer=ALLOWED
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 85,2| client_side_request.cc(714) clientAccessCheckDone:
</I>&gt;&gt;&gt;&gt;<i> The request HEAD
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://download.docker.com/linux/ubuntu/dists/jammy/InRelease[http://download.docker.com/l">http://download.docker.com/linux/ubuntu/dists/jammy/InRelease[http://download.docker.com/l</A>
</I>&gt;&gt;&gt;&gt;<i> inux/ubuntu/dists/jammy/InRelease] is ALLOWED; last ACL checked: all
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 83,3| AccessCheck.cc(42) Start: adaptation off, skipping
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 83,3| client_side_request.cc(1735) doCallouts: Doing
</I>&gt;&gt;&gt;&gt;<i> calloutContext-&gt;clientRedirectStart()
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 78,3| dns_internal.cc(1836) idnsPTRLookup:
</I>&gt;&gt;<i> idnsPTRLookup:
</I>&gt;&gt;&gt;&gt;<i> buf is 42 bytes for 10.2.59.102, id = 0x8d95
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 50,3| comm.cc(927) comm_udp_sendto: comm_udp_sendto:
</I>&gt;&gt;&gt;&gt;<i> Attempt to send UDP packet to 127.0.0.53:53 using FD 11 using Port 54280
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40 kid1| Starting new redirector helpers...
</I>&gt;&gt;&gt;&gt;&gt;<i> current master transaction: master54
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40 kid1| helperOpenServers: Starting 1/3 'jesred' processes
</I>&gt;&gt;&gt;&gt;&gt;<i> current master transaction: master54
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 51,3| fd.cc(168) fd_open: fd_open() FD 17 IPC UNIX
</I>&gt;&gt;<i> STREAM
</I>&gt;&gt;&gt;&gt;<i> Parent
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 51,3| fd.cc(168) fd_open: fd_open() FD 19 IPC UNIX
</I>&gt;&gt;<i> STREAM
</I>&gt;&gt;&gt;&gt;<i> Parent
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 54,3| ipc.cc(212) ipcCreate: ipcCreate: prfd FD 17
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 54,3| ipc.cc(213) ipcCreate: ipcCreate: pwfd FD 17
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 54,3| ipc.cc(214) ipcCreate: ipcCreate: crfd FD 19
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.115 kid1| 54,3| ipc.cc(215) ipcCreate: ipcCreate: cwfd FD 19
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.116 kid1| 5,3| comm.cc(850) _comm_close: start closing FD 19 by
</I>&gt;&gt;&gt;&gt;<i> ipc.cc:271
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.116 kid1| 5,3| comm.cc(586) commUnsetFdTimeout: Remove timeout for
</I>&gt;&gt;&gt;&gt;<i> FD 19
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.116 kid1| 21,3| tools.cc(561) leave_suid: leave_suid: PID 503746
</I>&gt;&gt;&gt;&gt;<i> called
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.116 kid1| 21,3| tools.cc(651) no_suid: no_suid: PID 503746 giving
</I>&gt;&gt;<i> up
</I>&gt;&gt;&gt;&gt;<i> root privileges forever
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.116 kid1| 5,3| comm.cc(586) commUnsetFdTimeout: Remove timeout for
</I>&gt;&gt;&gt;&gt;<i> FD 17
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.117 kid1| 84,3| helper.cc(1310) GetFirstAvailable:
</I>&gt;&gt;&gt;&gt;<i> GetFirstAvailable: Least-loaded helper is fully loaded!
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.117 kid1| 51,3| fd.cc(93) fd_close: fd_close FD 19 IPC UNIX STREAM
</I>&gt;&gt;&gt;&gt;<i> Parent
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.117 kid1| 78,3| dns_internal.cc(1319) idnsRead: idnsRead: starting
</I>&gt;&gt;&gt;&gt;<i> with FD 11
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.117 kid1| 78,3| dns_internal.cc(1365) idnsRead: idnsRead: FD 11:
</I>&gt;&gt;&gt;&gt;<i> received 92 bytes from 127.0.0.53:53
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.117 kid1| 78,3| dns_internal.cc(1172) idnsGrokReply:
</I>&gt;&gt;<i> idnsGrokReply:
</I>&gt;&gt;&gt;&gt;<i> QID 0x8d95, 1 answers
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.117 kid1| 35,3| fqdncache.cc(336) fqdncacheParse: fqdncacheParse:
</I>&gt;&gt;<i> 1
</I>&gt;&gt;&gt;&gt;<i> answers for '10.2.59.102'
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.117 kid1| 5,3| IoCallback.cc(112) finish: called for conn11
</I>&gt;&gt;&gt;&gt;<i> local=[::] remote=[::] FD 17 flags=1 (0, 0)
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.125 kid1| 5,3| Read.cc(148) HandleRead: FD 17, size 32767, retval
</I>&gt;&gt;&gt;&gt;<i> 80, errno 0
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.125 kid1| 5,3| IoCallback.cc(112) finish: called for conn10
</I>&gt;&gt;&gt;&gt;<i> local=[::] remote=[::] FD 17 flags=1 (0, 0)
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.125 kid1| 84,3| helper.cc(1022) helperHandleRead:
</I>&gt;&gt;<i> helperHandleRead:
</I>&gt;&gt;&gt;&gt;<i> end of reply found
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.125 kid1| 84,3| Reply.cc(41) finalize: Parsing helper buffer
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.125 kid1| 84,3| Reply.cc(59) finalize: Buff length is larger than
</I>&gt;&gt;<i> 2
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.125 kid1| 84,3| Reply.cc(63) finalize: helper Result = OK
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.125 kid1| 23,3| Uri.cc(446) parse: Split URL
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> '<A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>'[<A HREF="https://download.docker.c">https://download.docker.c</A>
</I>&gt;&gt;&gt;&gt;<i> om/linux/ubuntu/dists/jammy/InRelease'] into proto='https', host='download.docker.com',
</I>&gt;&gt;&gt;&gt;<i> port='443', path='/linux/ubuntu/dists/jammy/InRelease'
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.125 kid1| 14,3| Address.cc(389) lookupHostIP: Given Non-IP
</I>&gt;&gt;&gt;&gt;<i> 'download.docker.com': Name or service not known
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.125 kid1| 61,2| client_side_request.cc(1235) clientRedirectDone:
</I>&gt;&gt;&gt;&gt;<i> URL-rewriter diverts URL from
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="http://download.docker.com/linux/ubuntu/dists/jammy/InRelease[http://download.docker.com/l">http://download.docker.com/linux/ubuntu/dists/jammy/InRelease[http://download.docker.com/l</A>
</I>&gt;&gt;&gt;&gt;<i> inux/ubuntu/dists/jammy/InRelease] to
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com</A>
</I>&gt;&gt;&gt;&gt;<i> /linux/ubuntu/dists/jammy/InRelease]
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.125 kid1| 83,3| client_side_request.cc(1743) doCallouts: Doing
</I>&gt;&gt;&gt;&gt;<i> calloutContext-&gt;clientAccessCheck2()
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.125 kid1| 85,2| client_side_request.cc(692) clientAccessCheck2: No
</I>&gt;&gt;&gt;&gt;<i> adapted_http_access configuration. default: ALLOW
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.125 kid1| 85,2| client_side_request.cc(714) clientAccessCheckDone:
</I>&gt;&gt;&gt;&gt;<i> The request HEAD
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com</A>
</I>&gt;&gt;&gt;&gt;<i> /linux/ubuntu/dists/jammy/InRelease] is ALLOWED; last ACL checked: all
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 83,3| client_side_request.cc(1761) doCallouts: Doing
</I>&gt;&gt;&gt;&gt;<i> clientInterpretRequestHeaders()
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 83,3| client_side_request.cc(1770) doCallouts: Doing
</I>&gt;&gt;&gt;&gt;<i> calloutContext-&gt;checkNoCache()
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 28,3| Checklist.cc(69) preCheck: 0x5c3ba41552d8 checking
</I>&gt;&gt;&gt;&gt;<i> slow rules
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 28,3| RegexData.cc(50) match: checking
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> '<A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>'[<A HREF="https://download.docker.c">https://download.docker.c</A>
</I>&gt;&gt;&gt;&gt;<i> om/linux/ubuntu/dists/jammy/InRelease']
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 28,3| Acl.cc(175) matches: checked: no_cache = 0
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 28,3| Acl.cc(175) matches: checked: cache#1 = 0
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp:
</I>&gt;&gt;<i> '10.2.59.102:56466'
</I>&gt;&gt;&gt;&gt;<i> found
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 28,3| Acl.cc(175) matches: checked: all = 1
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 28,3| Acl.cc(175) matches: checked: cache#2 = 1
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 28,3| Acl.cc(175) matches: checked: cache = 1
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 28,3| Checklist.cc(62) markFinished: 0x5c3ba41552d8
</I>&gt;&gt;<i> answer
</I>&gt;&gt;&gt;&gt;<i> ALLOWED for match
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 28,3| Checklist.cc(162) checkCallback:
</I>&gt;&gt;&gt;&gt;<i> ACLChecklist::checkCallback: 0x5c3ba41552d8 answer=ALLOWED
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 85,3| client_side_request.cc(116) ~ClientRequestContext:
</I>&gt;&gt;&gt;&gt;<i> ClientRequestContext destructed, this=0x5c3ba4154e78
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 83,3| client_side_request.cc(1855) doCallouts: calling
</I>&gt;&gt;&gt;&gt;<i> processRequest()
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 87,3| clientStream.cc(178) clientStreamRead:
</I>&gt;&gt;&gt;&gt;<i> clientStreamRead: Calling 1 with cbdata 0x5c3ba4153e70 from node 0x5c3ba4154308
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 73,3| HttpRequest.cc(742) storeId: sent back
</I>&gt;&gt;&gt;&gt;<i> effectiveRequestUrl:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com</A>
</I>&gt;&gt;&gt;&gt;<i> /linux/ubuntu/dists/jammy/InRelease]
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 20,3| Controller.cc(429) peek:
</I>&gt;&gt;&gt;&gt;<i> DE850794EBC405A27A7718F51795E32A
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 73,3| HttpRequest.cc(742) storeId: sent back
</I>&gt;&gt;&gt;&gt;<i> effectiveRequestUrl:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com</A>
</I>&gt;&gt;&gt;&gt;<i> /linux/ubuntu/dists/jammy/InRelease]
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 20,3| Controller.cc(429) peek:
</I>&gt;&gt;&gt;&gt;<i> D3522EE27FB0ED7004DD594AF7674667
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 85,3| client_side_reply.cc(1523) identifyFoundObject:
</I>&gt;&gt;&gt;&gt;<i> StoreEntry is NULL - MISS
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 20,3| store.cc(730) storeCreatePureEntry:
</I>&gt;&gt;&gt;&gt;<i> storeCreateEntry:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> '<A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>'[<A HREF="https://download.docker.c">https://download.docker.c</A>
</I>&gt;&gt;&gt;&gt;<i> om/linux/ubuntu/dists/jammy/InRelease']
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 20,3| MemObject.cc(99) MemObject: MemObject constructed,
</I>&gt;&gt;&gt;&gt;<i> this=0x5c3ba416ef10
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 88,3| MemObject.cc(82) setUris: 0x5c3ba416ef10 storeId:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com</A>
</I>&gt;&gt;&gt;&gt;<i> /linux/ubuntu/dists/jammy/InRelease]
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 20,3| store.cc(434) lock: storeCreateEntry locked key
</I>&gt;&gt;&gt;&gt;<i> [null_store_key] e:=V/0x5c3ba416ee90*1
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 20,3| store.cc(536) setPrivateKey: 00
</I>&gt;&gt;&gt;&gt;<i> e:=V/0x5c3ba416ee90*1
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 20,3| store.cc(412) hashInsert: StoreEntry::hashInsert:
</I>&gt;&gt;&gt;&gt;<i> Inserting Entry e:=IV/0x5c3ba416ee90*1 key '020000000000000061AF070001000000'
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 20,3| store.cc(434) lock: store_client locked key
</I>&gt;&gt;&gt;&gt;<i> 020000000000000061AF070001000000 e:=IV/0x5c3ba416ee90*2
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 90,3| store_client.cc(243) copy: store_client::copy:
</I>&gt;&gt;&gt;&gt;<i> 020000000000000061AF070001000000, from 0, for length 4096, cb 1, cbdata 0x5c3ba4152dd8
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 20,3| store.cc(434) lock: store_client::copy locked key
</I>&gt;&gt;&gt;&gt;<i> 020000000000000061AF070001000000 e:=IV/0x5c3ba416ee90*3
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 90,3| store_client.cc(343) storeClientCopy2:
</I>&gt;&gt;&gt;&gt;<i> storeClientCopy2: 020000000000000061AF070001000000
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 90,3| store_client.cc(390) doCopy: store_client::doCopy:
</I>&gt;&gt;&gt;&gt;<i> Waiting for more
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 20,3| store.cc(457) unlock: store_client::copy unlocking
</I>&gt;&gt;&gt;&gt;<i> key 020000000000000061AF070001000000 e:=IV/0x5c3ba416ee90*3
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 17,3| FwdState.cc(373) Start:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> '<A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>'[<A HREF="https://download.docker.c">https://download.docker.c</A>
</I>&gt;&gt;&gt;&gt;<i> om/linux/ubuntu/dists/jammy/InRelease']
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 17,2| FwdState.cc(133) FwdState: Forwarding client
</I>&gt;&gt;<i> request
</I>&gt;&gt;&gt;&gt;<i> conn9 local=10.2.59.103:8000 remote=10.2.59.102:56466 FD 15 flags=1,
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> url=<A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker</A>
</I>&gt;&gt;&gt;&gt;<i> .com/linux/ubuntu/dists/jammy/InRelease]
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 20,3| store.cc(434) lock: FwdState locked key
</I>&gt;&gt;&gt;&gt;<i> 020000000000000061AF070001000000 e:=IV/0x5c3ba416ee90*3
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 17,3| FwdState.cc(140) FwdState: FwdState constructed,
</I>&gt;&gt;&gt;&gt;<i> this=0x5c3ba416fa18
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 44,3| peer_select.cc(309) peerSelect:
</I>&gt;&gt;&gt;&gt;<i> e:=IV/0x5c3ba416ee90*3
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com</A>
</I>&gt;&gt;&gt;&gt;<i> /linux/ubuntu/dists/jammy/InRelease]
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 20,3| store.cc(434) lock: peerSelect locked key
</I>&gt;&gt;&gt;&gt;<i> 020000000000000061AF070001000000 e:=IV/0x5c3ba416ee90*4
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 44,3| peer_select.cc(612) selectMore: HEAD
</I>&gt;&gt;&gt;&gt;<i> download.docker.com
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 44,3| peer_select.cc(626) selectMore: direct =
</I>&gt;&gt;&gt;&gt;<i> DIRECT_UNKNOWN (never_direct to be checked)
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 28,3| Checklist.cc(69) preCheck: 0x5c3ba4170638 checking
</I>&gt;&gt;&gt;&gt;<i> slow rules
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 28,3| Ip.cc(538) match: aclIpMatchIp:
</I>&gt;&gt;<i> '10.2.59.102:56466'
</I>&gt;&gt;&gt;&gt;<i> found
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 28,3| Acl.cc(175) matches: checked: all = 1
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 28,3| Acl.cc(175) matches: checked: never_direct#1 = 1
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 28,3| Acl.cc(175) matches: checked: never_direct = 1
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 28,3| Checklist.cc(62) markFinished: 0x5c3ba4170638
</I>&gt;&gt;<i> answer
</I>&gt;&gt;&gt;&gt;<i> ALLOWED for match
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 28,3| Checklist.cc(162) checkCallback:
</I>&gt;&gt;&gt;&gt;<i> ACLChecklist::checkCallback: 0x5c3ba4170638 answer=ALLOWED
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 44,3| peer_select.cc(345) checkNeverDirectDone: ALLOWED
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 44,3| peer_select.cc(351) checkNeverDirectDone: direct =
</I>&gt;&gt;&gt;&gt;<i> DIRECT_NO (never_direct allow)
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 44,3| peer_select.cc(612) selectMore: HEAD
</I>&gt;&gt;&gt;&gt;<i> download.docker.com
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 14,3| ipcache.cc(732) ipcache_gethostbyname:
</I>&gt;&gt;&gt;&gt;<i> ipcache_gethostbyname: 'download.docker.com', flags=0
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 14,3| Address.cc(389) lookupHostIP: Given Non-IP
</I>&gt;&gt;&gt;&gt;<i> 'download.docker.com': Name or service not known
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 44,3| peer_select.cc(286) peerSelectIcpPing:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com</A>
</I>&gt;&gt;&gt;&gt;<i> /linux/ubuntu/dists/jammy/InRelease]
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 15,3| neighbors.cc(283) neighborsCount: neighborsCount:
</I>&gt;&gt;<i> 0
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 44,3| peer_select.cc(297) peerSelectIcpPing: counted 0
</I>&gt;&gt;&gt;&gt;<i> neighbors
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 44,3| peer_select.cc(833) selectSomeParent: HEAD
</I>&gt;&gt;&gt;&gt;<i> download.docker.com
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 15,3| neighbors.cc(350) getRoundRobinParent: returning
</I>&gt;&gt;&gt;&gt;<i> [nil]
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 15,3| neighbors.cc(403) getWeightedRoundRobinParent:
</I>&gt;&gt;&gt;&gt;<i> returning [nil]
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 15,3| neighbors.cc(309) getFirstUpParent: returning
</I>&gt;&gt;&gt;&gt;<i> 212.89.128.96
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 44,3| peer_select.cc(1102) addSelection: adding
</I>&gt;&gt;&gt;&gt;<i> FIRSTUP_PARENT/212.89.128.96
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 44,3| peer_select.cc(1095) addSelection: skipping
</I>&gt;&gt;&gt;&gt;<i> ANY_OLD_PARENT/212.89.128.96; have FIRSTUP_PARENT/212.89.128.96
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 15,3| neighbors.cc(493) getDefaultParent: returning
</I>&gt;&gt;&gt;&gt;<i> 212.89.128.96
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 44,3| peer_select.cc(1095) addSelection: skipping
</I>&gt;&gt;&gt;&gt;<i> DEFAULT_PARENT/212.89.128.96; have FIRSTUP_PARENT/212.89.128.96
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 44,2| peer_select.cc(460) resolveSelected: Find IP
</I>&gt;&gt;&gt;&gt;<i> destination for:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>'[<A HREF="https://download.docker.co">https://download.docker.co</A>
</I>&gt;&gt;&gt;&gt;<i> m/linux/ubuntu/dists/jammy/InRelease'] via 212.89.128.96
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 44,2| peer_select.cc(1174) handlePath: PeerSelector1
</I>&gt;&gt;<i> found
</I>&gt;&gt;&gt;&gt;<i> conn12 local=0.0.0.0 remote=212.89.128.96:3128 FIRSTUP_PARENT flags=1, destination #1
</I>&gt;&gt;<i> for
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com</A>
</I>&gt;&gt;&gt;&gt;<i> /linux/ubuntu/dists/jammy/InRelease]
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 44,2| peer_select.cc(1180) handlePath: always_direct =
</I>&gt;&gt;&gt;&gt;<i> DENIED
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 44,2| peer_select.cc(1181) handlePath: never_direct =
</I>&gt;&gt;&gt;&gt;<i> ALLOWED
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 44,2| peer_select.cc(1182) handlePath: timedout = 0
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 17,3| FwdState.cc(610) noteDestination: conn12
</I>&gt;&gt;&gt;&gt;<i> local=0.0.0.0 remote=212.89.128.96:3128 FIRSTUP_PARENT flags=1
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 17,3| FwdState.cc(1124) connectStart: 1+ paths to
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com</A>
</I>&gt;&gt;&gt;&gt;<i> /linux/ubuntu/dists/jammy/InRelease]
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 44,2| peer_select.cc(479) resolveSelected: PeerSelector1
</I>&gt;&gt;&gt;&gt;<i> found all 1 destinations for
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com</A>
</I>&gt;&gt;&gt;&gt;<i> /linux/ubuntu/dists/jammy/InRelease]
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 44,2| peer_select.cc(480) resolveSelected: always_direct
</I>&gt;&gt;<i> =
</I>&gt;&gt;&gt;&gt;<i> DENIED
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 44,2| peer_select.cc(481) resolveSelected: never_direct
</I>&gt;&gt;<i> =
</I>&gt;&gt;&gt;&gt;<i> ALLOWED
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 44,2| peer_select.cc(482) resolveSelected: timedout = 0
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 44,3| peer_select.cc(241) ~PeerSelector:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com</A>
</I>&gt;&gt;&gt;&gt;<i> /linux/ubuntu/dists/jammy/InRelease]
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 20,3| store.cc(457) unlock: peerSelect unlocking key
</I>&gt;&gt;&gt;&gt;<i> 020000000000000061AF070001000000 e:=p2IV/0x5c3ba416ee90*4
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 48,3| pconn.cc(474) popStored: lookup for key
</I>&gt;&gt;&gt;&gt;<i> {212.89.128.96:3128} failed.
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 17,3| FwdState.cc(1568) GetMarkingsToServer: from
</I>&gt;&gt;<i> 0.0.0.0
</I>&gt;&gt;&gt;&gt;<i> tos 0 netfilter mark 0
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 5,3| ConnOpener.cc(42) ConnOpener: will connect to
</I>&gt;&gt;<i> conn14
</I>&gt;&gt;&gt;&gt;<i> local=0.0.0.0 remote=212.89.128.96:3128 FIRSTUP_PARENT flags=1 with 30 timeout
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 50,3| comm.cc(378) comm_openex: comm_openex: Attempt
</I>&gt;&gt;<i> open
</I>&gt;&gt;&gt;&gt;<i> socket for: 0.0.0.0
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 50,3| comm.cc(420) comm_openex: comm_openex: Opened
</I>&gt;&gt;<i> socket
</I>&gt;&gt;&gt;&gt;<i> conn15 local=0.0.0.0 remote=[::] FD 19 flags=1 : family=2, type=1, protocol=6
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 51,3| fd.cc(168) fd_open: fd_open() FD 19
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.126 kid1| 5,3| ConnOpener.cc(312) createFd: conn14 local=0.0.0.0
</I>&gt;&gt;&gt;&gt;<i> remote=212.89.128.96:3128 FIRSTUP_PARENT flags=1 will timeout in 30
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.127 kid1| 17,3| FwdState.cc(1197) dispatch: conn9
</I>&gt;&gt;&gt;&gt;<i> local=10.2.59.103:8000 remote=10.2.59.102:56466 FD 15 flags=1: Fetching HEAD
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com</A>
</I>&gt;&gt;&gt;&gt;<i> /linux/ubuntu/dists/jammy/InRelease]
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.127 kid1| 14,3| Address.cc(389) lookupHostIP: Given Non-IP
</I>&gt;&gt;&gt;&gt;<i> 'download.docker.com': Name or service not known
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.127 kid1| 78,3| dns_internal.cc(1793) idnsALookup: idnsALookup:
</I>&gt;&gt;<i> buf
</I>&gt;&gt;&gt;&gt;<i> is 37 bytes for download.docker.com, id = 0xe779
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.127 kid1| 50,3| comm.cc(927) comm_udp_sendto: comm_udp_sendto:
</I>&gt;&gt;&gt;&gt;<i> Attempt to send UDP packet to 127.0.0.53:53 using FD 11 using Port 54280
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.127 kid1| 78,3| dns_internal.cc(1729) idnsSendSlaveAAAAQuery: buf
</I>&gt;&gt;<i> is
</I>&gt;&gt;&gt;&gt;<i> 37 bytes for download.docker.com, id = 0x8aee
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.127 kid1| 50,3| comm.cc(927) comm_udp_sendto: comm_udp_sendto:
</I>&gt;&gt;&gt;&gt;<i> Attempt to send UDP packet to 127.0.0.53:53 using FD 11 using Port 54280
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.127 kid1| 11,3| http.cc(2516) httpStart: HEAD
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com</A>
</I>&gt;&gt;&gt;&gt;<i> /linux/ubuntu/dists/jammy/InRelease]
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.127 kid1| 20,3| store.cc(434) lock: Client locked key
</I>&gt;&gt;&gt;&gt;<i> 020000000000000061AF070001000000 e:=p2IV/0x5c3ba416ee90*4
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.127 kid1| 5,3| comm.cc(599) commSetConnTimeout: conn14
</I>&gt;&gt;&gt;&gt;<i> local=10.2.59.103:39370 remote=212.89.128.96:3128 FIRSTUP_PARENT FD 19 flags=1 timeout
</I>&gt;&gt;&gt;&gt;<i> 86400
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.127 kid1| 22,3| refresh.cc(636) getMaxAge: getMaxAge:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> '<A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease</A>'[<A HREF="https://download.docker.c">https://download.docker.c</A>
</I>&gt;&gt;&gt;&gt;<i> om/linux/ubuntu/dists/jammy/InRelease']
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.127 kid1| 11,2| http.cc(2472) sendRequest: HTTP Server conn14
</I>&gt;&gt;&gt;&gt;<i> local=10.2.59.103:39370 remote=212.89.128.96:3128 FIRSTUP_PARENT FD 19 flags=1
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.127 kid1| 11,2| http.cc(2473) sendRequest: HTTP Server REQUEST:
</I>&gt;&gt;&gt;&gt;&gt;<i> ---------
</I>&gt;&gt;&gt;&gt;&gt;<i> HEAD
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com</A>
</I>&gt;&gt;&gt;&gt;<i> /linux/ubuntu/dists/jammy/InRelease] HTTP/1.1
</I>&gt;&gt;&gt;&gt;&gt;<i> Host: download.docker.com
</I>&gt;&gt;&gt;&gt;&gt;<i> User-Agent: curl/7.81.0
</I>&gt;&gt;&gt;&gt;&gt;<i> Accept: */*
</I>&gt;&gt;&gt;&gt;&gt;<i> Via: 1.1 pkg-proxy (squid/6.6)
</I>&gt;&gt;&gt;&gt;&gt;<i> X-Forwarded-For: 10.2.59.102
</I>&gt;&gt;&gt;&gt;&gt;<i> Cache-Control: max-age=0
</I>&gt;&gt;&gt;&gt;&gt;<i> Connection: keep-alive
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> ----------
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.127 kid1| 5,3| IoCallback.cc(112) finish: called for conn14
</I>&gt;&gt;&gt;&gt;<i> local=10.2.59.103:39370 remote=212.89.128.96:3128 FIRSTUP_PARENT FD 19 flags=1 (0, 0)
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.127 kid1| 5,3| comm.cc(599) commSetConnTimeout: conn14
</I>&gt;&gt;&gt;&gt;<i> local=10.2.59.103:39370 remote=212.89.128.96:3128 FIRSTUP_PARENT FD 19 flags=1 timeout
</I>&gt;&gt;<i> 900
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.137 kid1| 78,3| dns_internal.cc(1319) idnsRead: idnsRead: starting
</I>&gt;&gt;&gt;&gt;<i> with FD 11
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.137 kid1| 78,3| dns_internal.cc(1365) idnsRead: idnsRead: FD 11:
</I>&gt;&gt;&gt;&gt;<i> received 304 bytes from 127.0.0.53:53
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.137 kid1| 78,3| dns_internal.cc(1172) idnsGrokReply:
</I>&gt;&gt;<i> idnsGrokReply:
</I>&gt;&gt;&gt;&gt;<i> QID 0x8aee, 9 answers
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.137 kid1| 14,3| ipcache.cc(480) ipcacheParse: 9 answers for
</I>&gt;&gt;&gt;&gt;<i> download.docker.com
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.137 kid1| 14,3| ipcache.cc(535) addGood: download.docker.com #1
</I>&gt;&gt;&gt;&gt;<i> [2600:9000:2490:6c00:3:db06:4200:93a1]
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.137 kid1| 14,3| ipcache.cc(535) addGood: download.docker.com #2
</I>&gt;&gt;&gt;&gt;<i> [2600:9000:2490:a600:3:db06:4200:93a1]
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.137 kid1| 14,3| ipcache.cc(535) addGood: download.docker.com #3
</I>&gt;&gt;&gt;&gt;<i> [2600:9000:2490:9c00:3:db06:4200:93a1]
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.137 kid1| 14,3| ipcache.cc(535) addGood: download.docker.com #4
</I>&gt;&gt;&gt;&gt;<i> [2600:9000:2490:6000:3:db06:4200:93a1]
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.137 kid1| 14,3| ipcache.cc(535) addGood: download.docker.com #5
</I>&gt;&gt;&gt;&gt;<i> [2600:9000:2490:c00:3:db06:4200:93a1]
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.137 kid1| 14,3| ipcache.cc(535) addGood: download.docker.com #6
</I>&gt;&gt;&gt;&gt;<i> [2600:9000:2490:5200:3:db06:4200:93a1]
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.137 kid1| 14,3| ipcache.cc(535) addGood: download.docker.com #7
</I>&gt;&gt;&gt;&gt;<i> [2600:9000:2490:9a00:3:db06:4200:93a1]
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.137 kid1| 14,3| ipcache.cc(535) addGood: download.docker.com #8
</I>&gt;&gt;&gt;&gt;<i> [2600:9000:2490:2c00:3:db06:4200:93a1]
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.137 kid1| 78,3| dns_internal.cc(1319) idnsRead: idnsRead: starting
</I>&gt;&gt;&gt;&gt;<i> with FD 11
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.137 kid1| 78,3| dns_internal.cc(1365) idnsRead: idnsRead: FD 11:
</I>&gt;&gt;&gt;&gt;<i> received 144 bytes from 127.0.0.53:53
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.137 kid1| 78,3| dns_internal.cc(1172) idnsGrokReply:
</I>&gt;&gt;<i> idnsGrokReply:
</I>&gt;&gt;&gt;&gt;<i> QID 0xe779, 5 answers
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.137 kid1| 14,3| ipcache.cc(480) ipcacheParse: 5 answers for
</I>&gt;&gt;&gt;&gt;<i> download.docker.com
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.137 kid1| 14,3| ipcache.cc(535) addGood: download.docker.com #9
</I>&gt;&gt;&gt;&gt;<i> 108.138.7.33
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.137 kid1| 14,3| ipcache.cc(535) addGood: download.docker.com #10
</I>&gt;&gt;&gt;&gt;<i> 108.138.7.18
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.137 kid1| 14,3| ipcache.cc(535) addGood: download.docker.com #11
</I>&gt;&gt;&gt;&gt;<i> 108.138.7.88
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.137 kid1| 14,3| ipcache.cc(535) addGood: download.docker.com #12
</I>&gt;&gt;&gt;&gt;<i> 108.138.7.48
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.137 kid1| 14,3| ipcache.cc(586) ipcacheHandleReply: done with
</I>&gt;&gt;&gt;&gt;<i> download.docker.com: [2600:9000:2490:6c00:3:db06:4200:93a1] #1/12-0
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.137 kid1| 38,3| net_db.cc(337) netdbSendPing: netdbSendPing:
</I>&gt;&gt;<i> pinging
</I>&gt;&gt;&gt;&gt;<i> download.docker.com
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.137 kid1| 37,2| IcmpSquid.cc(88) SendEcho: to
</I>&gt;&gt;&gt;&gt;<i> [2600:9000:2490:6c00:3:db06:4200:93a1], opcode 3, len 19
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.137 pinger| 42,2| IcmpPinger.cc(198) Recv: Pass
</I>&gt;&gt;&gt;&gt;<i> [2600:9000:2490:6c00:3:db06:4200:93a1] off to ICMPv6 module.
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40 pinger| SendEcho ERROR: sending to ICMPv6 packet to
</I>&gt;&gt;&gt;&gt;<i> [2600:9000:2490:6c00:3:db06:4200:93a1]: (101) Network is unreachable
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.138 pinger| 42,2| Icmp.cc(90) Log: pingerLog: 1720560940.138021
</I>&gt;&gt;&gt;&gt;<i> [2600:9000:2490:6c00:3:db06:4200:93a1] 0
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.323 kid1| 5,3| IoCallback.cc(112) finish: called for conn14
</I>&gt;&gt;&gt;&gt;<i> local=10.2.59.103:39370 remote=212.89.128.96:3128 FIRSTUP_PARENT FD 19 flags=1 (0, 0)
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.324 kid1| 5,3| Read.cc(93) ReadNow: conn14 local=10.2.59.103:39370
</I>&gt;&gt;&gt;&gt;<i> remote=212.89.128.96:3128 FIRSTUP_PARENT FD 19 flags=1, size 65536, retval 348, errno 0
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.324 kid1| 11,3| http.cc(649) processReplyHeader:
</I>&gt;&gt;<i> processReplyHeader:
</I>&gt;&gt;&gt;&gt;<i> key '020000000000000061AF070001000000'
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.324 kid1| 11,2| http.cc(696) processReplyHeader: HTTP Server
</I>&gt;&gt;<i> conn14
</I>&gt;&gt;&gt;&gt;<i> local=10.2.59.103:39370 remote=212.89.128.96:3128 FIRSTUP_PARENT FD 19 flags=1
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.324 kid1| 11,2| http.cc(697) processReplyHeader: HTTP Server
</I>&gt;&gt;&gt;&gt;<i> RESPONSE:
</I>&gt;&gt;&gt;&gt;&gt;<i> ---------
</I>&gt;&gt;&gt;&gt;&gt;<i> HTTP/1.1 503 Service Unavailable
</I>&gt;&gt;&gt;&gt;&gt;<i> Server: squid/4.10
</I>&gt;&gt;&gt;&gt;&gt;<i> Mime-Version: 1.0
</I>&gt;&gt;&gt;&gt;&gt;<i> Date: Tue, 09 Jul 2024 21:35:40 GMT
</I>&gt;&gt;&gt;&gt;&gt;<i> Content-Type: text/html;charset=utf-8
</I>&gt;&gt;&gt;&gt;&gt;<i> Content-Length: 3879
</I>&gt;&gt;&gt;&gt;&gt;<i> X-Squid-Error: ERR_SECURE_CONNECT_FAIL 71
</I>&gt;&gt;&gt;&gt;&gt;<i> X-Cache: MISS from proxy-srv2
</I>&gt;&gt;&gt;&gt;&gt;<i> X-Cache-Lookup: MISS from proxy-srv2:3128
</I>&gt;&gt;&gt;&gt;&gt;<i> Via: 1.1 proxy-srv2 (squid/4.10)
</I>&gt;&gt;&gt;&gt;&gt;<i> Connection: keep-alive
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> ----------
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.324 kid1| 83,3| AccessCheck.cc(42) Start: adaptation off, skipping
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.324 kid1| 20,3| store.cc(1693) replaceHttpReply:
</I>&gt;&gt;&gt;&gt;<i> StoreEntry::replaceHttpReply:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;<i> <A HREF="https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com">https://download.docker.com/linux/ubuntu/dists/jammy/InRelease[https://download.docker.com</A>
</I>&gt;&gt;&gt;&gt;<i> /linux/ubuntu/dists/jammy/InRelease]
</I>&gt;&gt;&gt;&gt;&gt;<i> 2024/07/09 23:35:40.324 kid1| 11,3| http.cc(949) haveParsedReplyHeaders: HTTP CODE:
</I>&gt;&gt;<i> 503
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Has anybody an idea what I can do to solve the issue?
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> This is my configuration borrowed from squid-deb-proxy:
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> # this file contains private networks (10.0.0.0/8, 172.16.0.0/12,
</I>&gt;&gt;&gt;&gt;&gt;<i> # 192.168.0.0/16) by default, you can add/remove additional allowed
</I>&gt;&gt;&gt;&gt;&gt;<i> # source networks in it to customize it for your setup
</I>&gt;&gt;&gt;&gt;&gt;<i> acl src_networks src &quot;/etc/squid/acl/src-networks.acl&quot;
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> # this file contains the archive mirrors by default,
</I>&gt;&gt;&gt;&gt;&gt;<i> # if you use a different mirror, add it there
</I>&gt;&gt;&gt;&gt;&gt;<i> acl to_archive_mirrors dstdomain &quot;/etc/squid/acl/archive-mirrors.acl&quot;
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> # Disable Cache for defined domains
</I>&gt;&gt;&gt;&gt;&gt;<i> acl no_cache url_regex &quot;/etc/squid/acl/no-cache.acl&quot;
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> # this contains the package blacklist
</I>&gt;&gt;&gt;&gt;&gt;<i> acl blockedpkgs urlpath_regex &quot;/etc/squid/pkg-blacklist-regexp.acl&quot;
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> # default to a different port than stock squid
</I>&gt;&gt;&gt;&gt;&gt;<i> http_port 8000
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> # -------------------------------------------------
</I>&gt;&gt;&gt;&gt;&gt;<i> # settings below probably do not need customization
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> # user visible name
</I>&gt;&gt;&gt;&gt;&gt;<i> visible_hostname pkg-proxy
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> # we need a big cache, some debs are huge
</I>&gt;&gt;&gt;&gt;&gt;<i> maximum_object_size 512 MB
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> # use a different dir than stock squid and default to 40G
</I>&gt;&gt;&gt;&gt;&gt;<i> cache_dir aufs /var/cache/squid 40000 16 256
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> cache_peer 212.89.128.96 parent 3128 0 no-query default
</I>&gt;&gt;&gt;&gt;&gt;<i> never_direct allow all
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> # use different logs
</I>&gt;&gt;&gt;&gt;&gt;<i> cache_access_log /var/log/squid/access.log
</I>&gt;&gt;&gt;&gt;&gt;<i> cache_log /var/log/squid/cache.log
</I>&gt;&gt;&gt;&gt;&gt;<i> cache_store_log /var/log/squid/store.log
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> # tweaks to speed things up
</I>&gt;&gt;&gt;&gt;&gt;<i> cache_mem 200 MB
</I>&gt;&gt;&gt;&gt;&gt;<i> maximum_object_size_in_memory 10240 KB
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> # pid
</I>&gt;&gt;&gt;&gt;&gt;<i> pid_filename /var/run/squid.pid
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> # refresh pattern for debs and udebs
</I>&gt;&gt;&gt;&gt;&gt;<i> refresh_pattern deb$ 129600 100% 129600
</I>&gt;&gt;&gt;&gt;&gt;<i> refresh_pattern udeb$ 129600 100% 129600
</I>&gt;&gt;&gt;&gt;&gt;<i> refresh_pattern tar.gz$ 129600 100% 129600
</I>&gt;&gt;&gt;&gt;&gt;<i> refresh_pattern tar.xz$ 129600 100% 129600
</I>&gt;&gt;&gt;&gt;&gt;<i> refresh_pattern tar.bz2$ 129600 100% 129600
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> # always refresh Packages and Release files
</I>&gt;&gt;&gt;&gt;&gt;<i> refresh_pattern \/(Packages|Sources)(|\.bz2|\.gz|\.xz)$ 0 0% 0 refresh-ims
</I>&gt;&gt;&gt;&gt;&gt;<i> refresh_pattern \/Release(|\.gpg)$ 0 0% 0 refresh-ims
</I>&gt;&gt;&gt;&gt;&gt;<i> refresh_pattern \/InRelease$ 0 0% 0 refresh-ims
</I>&gt;&gt;&gt;&gt;&gt;<i> refresh_pattern \/(Translation-.*)(|\.bz2|\.gz|\.xz)$ 0 0% 0 refresh-ims
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> # handle meta-release and changelogs.ubuntu.com special
</I>&gt;&gt;&gt;&gt;&gt;<i> # (fine to have this on debian too)
</I>&gt;&gt;&gt;&gt;&gt;<i> refresh_pattern changelogs.ubuntu.com\/.* 0 1% 1
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> # only allow connects to ports for http, https
</I>&gt;&gt;&gt;&gt;&gt;<i> acl SSL_ports port 443 563
</I>&gt;&gt;&gt;&gt;&gt;<i> acl Safe_ports port 80
</I>&gt;&gt;&gt;&gt;&gt;<i> acl Safe_ports port 443 563
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> # only allow ports we trust
</I>&gt;&gt;&gt;&gt;&gt;<i> http_access deny !Safe_ports
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> # do not allow to download from the pkg blacklist
</I>&gt;&gt;&gt;&gt;&gt;<i> http_access deny blockedpkgs
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> # allow access only to official archive mirrors
</I>&gt;&gt;&gt;&gt;&gt;<i> # uncomment the third and fouth line to permit any unlisted domain
</I>&gt;&gt;&gt;&gt;&gt;<i> http_access deny !to_archive_mirrors
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> # allow access from our network and localhost
</I>&gt;&gt;&gt;&gt;&gt;<i> http_access allow src_networks
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> # And finally deny all other access to this proxy
</I>&gt;&gt;&gt;&gt;&gt;<i> http_access deny all
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> # don't cache domains not listed in the mirrors file
</I>&gt;&gt;&gt;&gt;&gt;<i> # uncomment the third and fourth line to cache any unlisted domains
</I>&gt;&gt;&gt;&gt;&gt;<i> cache deny no_cache
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> # And finally cache everything else
</I>&gt;&gt;&gt;&gt;&gt;<i> cache allow all
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> url_rewrite_children 3 startup=0 idle=1 concurrency=1
</I>&gt;&gt;&gt;&gt;&gt;<i> url_rewrite_program /usr/lib/squid/jesred
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> debug_options ALL,3
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Thanks a lot.
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Regards,
</I>&gt;&gt;&gt;&gt;&gt;<i> Christoph
</I>&gt;&gt;&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;&gt;&gt;<i> squid-users mailing list
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;&gt;&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">https://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> squid-users mailing list
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">https://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="026865.html">[squid-users] Rewriting HTTP to HTTPS for generic package proxy
</A></li>
	<LI>Next message (by thread): <A HREF="026867.html">[squid-users] Rewriting HTTP to HTTPS for generic package proxy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26866">[ date ]</a>
              <a href="thread.html#26866">[ thread ]</a>
              <a href="subject.html#26866">[ subject ]</a>
              <a href="author.html#26866">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
