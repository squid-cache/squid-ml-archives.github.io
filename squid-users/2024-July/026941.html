<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Prefer or force ipv6 usage on dual stack interface
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Prefer%20or%20force%20ipv6%20usage%20on%20dual%20stack%20interface&In-Reply-To=%3CAFCF2E50-BC23-41C2-900F-CD9575FC5741%40priceshape.dk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026936.html">
   <LINK REL="Next"  HREF="026942.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Prefer or force ipv6 usage on dual stack interface</H1>
    <B>Rasmus Horndrup</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Prefer%20or%20force%20ipv6%20usage%20on%20dual%20stack%20interface&In-Reply-To=%3CAFCF2E50-BC23-41C2-900F-CD9575FC5741%40priceshape.dk%3E"
       TITLE="[squid-users] Prefer or force ipv6 usage on dual stack interface">raho at priceshape.dk
       </A><BR>
    <I>Tue Jul 16 13:31:24 UTC 2024</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="026936.html">[squid-users] Tproxy or intercept
</A></li>
        <LI>Next message (by thread): <A HREF="026942.html">[squid-users] Prefer or force ipv6 usage on dual stack interface
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26941">[ date ]</a>
              <a href="thread.html#26941">[ thread ]</a>
              <a href="subject.html#26941">[ subject ]</a>
              <a href="author.html#26941">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,
On a dual stack network interface I&#8217;m interested in using squid as a ipv6 only forward proxy.
My general understanding was that squid will prefer to use ipv6 whenever available, but I&#8217;m having issues with squid seemingly preferring ipv4 in some cases.

I have two examples, where it proceeds using IPv6 for the first and IPv4 for the second.

From the looks of it, they both successfully receive A and AAAA records, but how can I basically force squid to use IPv6? 

Resolves to IPv6:
---------
CONNECT www.google.com:443 HTTP/1.1
Host: www.google.com:443
Proxy-Authorization: Basic cHJpY2VzaGFwZTpwcmljZXNoYXBlMTIz
User-Agent: curl/8.6.0
Proxy-Connection: Keep-Alive


----------
2024/07/16 14:08:58.089 kid1| 14,3| Address.cc(389) lookupHostIP: Given Non-IP 'www.google.com': Name or service not known
2024/07/16 14:08:58.089 kid1| 14,3| ipcache.cc(732) ipcache_gethostbyname: ipcache_gethostbyname: 'www.google.com', flags=1
2024/07/16 14:08:58.090 kid1| 14,3| ipcache.cc(313) ipcacheRelease: ipcacheRelease: Releasing entry for 'www.google.com'
2024/07/16 14:08:58.090 kid1| 14,3| Address.cc(389) lookupHostIP: Given Non-IP 'www.google.com': Name or service not known
2024/07/16 14:08:58.090 kid1| 14,4| ipcache.cc(610) ipcache_nbgethostbyname: www.google.com
2024/07/16 14:08:58.090 kid1| 14,3| Address.cc(389) lookupHostIP: Given Non-IP 'www.google.com': Name or service not known
2024/07/16 14:08:58.090 kid1| 14,5| ipcache.cc(670) ipcache_nbgethostbyname_: ipcache_nbgethostbyname: MISS for 'www.google.com'
2024/07/16 14:08:58.090 kid1| 78,3| dns_internal.cc(1793) idnsALookup: idnsALookup: buf is 32 bytes for www.google.com, id = 0xfc67
2024/07/16 14:08:58.090 kid1| 78,3| dns_internal.cc(1729) idnsSendSlaveAAAAQuery: buf is 32 bytes for www.google.com, id = 0x147d
2024/07/16 14:08:58.090 kid1| 14,4| ipcache.cc(610) ipcache_nbgethostbyname: www.google.com
2024/07/16 14:08:58.090 kid1| 14,3| Address.cc(389) lookupHostIP: Given Non-IP 'www.google.com': Name or service not known
2024/07/16 14:08:58.090 kid1| 14,5| ipcache.cc(670) ipcache_nbgethostbyname_: ipcache_nbgethostbyname: MISS for 'www.google.com'
2024/07/16 14:08:58 pinger| Pinger exiting.
2024/07/16 14:08:58.117 kid1| 78,3| dns_internal.cc(1319) idnsRead: idnsRead: starting with FD 10
2024/07/16 14:08:58.117 kid1| 78,3| dns_internal.cc(1365) idnsRead: idnsRead: FD 10: received 144 bytes from [2001:4860:4860::8888]:53
2024/07/16 14:08:58.117 kid1| 78,3| dns_internal.cc(1172) idnsGrokReply: idnsGrokReply: QID 0x147d, 4 answers
2024/07/16 14:08:58.117 kid1| 78,6| dns_internal.cc(1105) idnsCallbackOneWithAnswer: 4 records for 0x648c0dbd80d8
2024/07/16 14:08:58.117 kid1| 14,3| ipcache.cc(480) ipcacheParse: 4 answers for www.google.com
2024/07/16 14:08:58.117 kid1| 14,5| ipcache.cc(549) updateTtl: use first 300 from RR TTL 300
2024/07/16 14:08:58.117 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #1 [2607:f8b0:4004:c07::93]
2024/07/16 14:08:58.117 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #2 [2607:f8b0:4004:c07::6a]
2024/07/16 14:08:58.117 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #3 [2607:f8b0:4004:c07::67]
2024/07/16 14:08:58.117 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #4 [2607:f8b0:4004:c07::68]
2024/07/16 14:08:58.117 kid1| 78,6| dns_internal.cc(1105) idnsCallbackOneWithAnswer: 4 records for 0x648c0dbdca68
2024/07/16 14:08:58.117 kid1| 14,3| ipcache.cc(480) ipcacheParse: 4 answers for www.google.com
2024/07/16 14:08:58.117 kid1| 14,5| ipcache.cc(549) updateTtl: use first 300 from RR TTL 300
2024/07/16 14:08:58.117 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #1 [2607:f8b0:4004:c07::93]
2024/07/16 14:08:58.117 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #2 [2607:f8b0:4004:c07::6a]
2024/07/16 14:08:58.117 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #3 [2607:f8b0:4004:c07::67]
2024/07/16 14:08:58.117 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #4 [2607:f8b0:4004:c07::68]
2024/07/16 14:08:58.129 kid1| 78,3| dns_internal.cc(1319) idnsRead: idnsRead: starting with FD 10
2024/07/16 14:08:58.129 kid1| 78,3| dns_internal.cc(1365) idnsRead: idnsRead: FD 10: received 128 bytes from [2001:4860:4860::8888]:53
2024/07/16 14:08:58.129 kid1| 78,3| dns_internal.cc(1172) idnsGrokReply: idnsGrokReply: QID 0xfc67, 6 answers
2024/07/16 14:08:58.129 kid1| 78,6| dns_internal.cc(1105) idnsCallbackOneWithAnswer: last 6 records for 0x648c0dbd80d8
2024/07/16 14:08:58.129 kid1| 14,3| ipcache.cc(480) ipcacheParse: 6 answers for www.google.com
2024/07/16 14:08:58.129 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #5 172.253.62.106
2024/07/16 14:08:58.129 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #6 172.253.62.104
2024/07/16 14:08:58.129 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #7 172.253.62.99
2024/07/16 14:08:58.129 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #8 172.253.62.103
2024/07/16 14:08:58.129 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #9 172.253.62.105
2024/07/16 14:08:58.129 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #10 172.253.62.147
2024/07/16 14:08:58.129 kid1| 14,3| ipcache.cc(586) ipcacheHandleReply: done with www.google.com: [2607:f8b0:4004:c07::93] #1/10-0
2024/07/16 14:08:58.129 kid1| 78,6| dns_internal.cc(1105) idnsCallbackOneWithAnswer: last 6 records for 0x648c0dbdca68
2024/07/16 14:08:58.129 kid1| 14,3| ipcache.cc(480) ipcacheParse: 6 answers for www.google.com
2024/07/16 14:08:58.129 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #5 172.253.62.106
2024/07/16 14:08:58.129 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #6 172.253.62.104
2024/07/16 14:08:58.129 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #7 172.253.62.99
2024/07/16 14:08:58.129 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #8 172.253.62.103
2024/07/16 14:08:58.130 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #9 172.253.62.105
2024/07/16 14:08:58.130 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #10 172.253.62.147
2024/07/16 14:08:58.130 kid1| 14,3| ipcache.cc(586) ipcacheHandleReply: done with www.google.com: [2607:f8b0:4004:c07::93] #1/10-0
2024/07/16 14:08:58.130 kid1| 14,3| ipcache.cc(313) ipcacheRelease: ipcacheRelease: Releasing entry for 'www.google.com'
2024/07/16 14:08:58.130 kid1| 14,3| ipcache.cc(732) ipcache_gethostbyname: ipcache_gethostbyname: 'www.google.com', flags=1
2024/07/16 14:08:58.130 kid1| 14,3| ipcache.cc(732) ipcache_gethostbyname: ipcache_gethostbyname: 'www.google.com', flags=1
2024/07/16 14:08:58.130 kid1| 26,3| tunnel.cc(1141) tunnelStart: tunnelStart 
2024/07/16 14:08:58.130 kid1| 26,3| tunnel.cc(1174) tunnelStart: CONNECT www.google.com:443 HTTP/1.1
2024/07/16 14:08:58.130 kid1| 26,3| tunnel.cc(359) TunnelStateData: TunnelStateData constructed this=0x648c0e047388
2024/07/16 14:08:58.130 kid1| 14,4| ipcache.cc(617) nbgethostbyname: www.google.com
2024/07/16 14:08:58.131 kid1| 14,3| Address.cc(389) lookupHostIP: Given Non-IP 'www.google.com': Name or service not known
2024/07/16 14:08:58.131 kid1| 14,4| ipcache.cc(657) ipcache_nbgethostbyname_: ipcache_nbgethostbyname: HIT for 'www.google.com'
2024/07/16 14:08:58.227 kid1| 26,5| tunnel.cc(508) updateAttempts: 1
2024/07/16 14:08:58.227 kid1| 14,4| ipcache.cc(610) ipcache_nbgethostbyname: www.google.com
2024/07/16 14:08:58.227 kid1| 14,3| Address.cc(389) lookupHostIP: Given Non-IP 'www.google.com': Name or service not known
2024/07/16 14:08:58.227 kid1| 14,4| ipcache.cc(657) ipcache_nbgethostbyname_: ipcache_nbgethostbyname: HIT for 'www.google.com'
2024/07/16 14:08:58.227 kid1| 14,5| net_db.cc(357) networkFromInaddr: networkFromInaddr : Masked IPv6 Address to [2607:f8b0:4004:c07::93]/64 routing part.



Resolves to IPv4:
---------
CONNECT www.google.com:443 HTTP/1.1
Host: www.google.com:443
Proxy-Authorization: Basic cHJpY2VzaGFwZTpwcmljZXNoYXBlMTIz
User-Agent: curl/8.6.0
Proxy-Connection: Keep-Alive


----------
2024/07/16 14:29:01.280 kid1| 14,3| Address.cc(389) lookupHostIP: Given Non-IP 'www.google.com': Name or service not known
2024/07/16 14:29:01.280 kid1| 14,3| ipcache.cc(732) ipcache_gethostbyname: ipcache_gethostbyname: 'www.google.com', flags=1
2024/07/16 14:29:01.280 kid1| 14,3| ipcache.cc(313) ipcacheRelease: ipcacheRelease: Releasing entry for 'www.google.com'
2024/07/16 14:29:01.280 kid1| 14,3| Address.cc(389) lookupHostIP: Given Non-IP 'www.google.com': Name or service not known
2024/07/16 14:29:01.280 kid1| 14,4| ipcache.cc(610) ipcache_nbgethostbyname: www.google.com
2024/07/16 14:29:01.280 kid1| 14,3| Address.cc(389) lookupHostIP: Given Non-IP 'www.google.com': Name or service not known
2024/07/16 14:29:01.280 kid1| 14,5| ipcache.cc(670) ipcache_nbgethostbyname_: ipcache_nbgethostbyname: MISS for 'www.google.com'
2024/07/16 14:29:01.280 kid1| 78,3| dns_internal.cc(1793) idnsALookup: idnsALookup: buf is 32 bytes for www.google.com, id = 0xd80b
2024/07/16 14:29:01.280 kid1| 78,3| dns_internal.cc(1729) idnsSendSlaveAAAAQuery: buf is 32 bytes for www.google.com, id = 0xacdf
2024/07/16 14:29:01.280 kid1| 14,4| ipcache.cc(610) ipcache_nbgethostbyname: www.google.com
2024/07/16 14:29:01.280 kid1| 14,3| Address.cc(389) lookupHostIP: Given Non-IP 'www.google.com': Name or service not known
2024/07/16 14:29:01.280 kid1| 14,5| ipcache.cc(670) ipcache_nbgethostbyname_: ipcache_nbgethostbyname: MISS for 'www.google.com'
2024/07/16 14:29:01.300 kid1| 78,3| dns_internal.cc(1319) idnsRead: idnsRead: starting with FD 8
2024/07/16 14:29:01.300 kid1| 78,3| dns_internal.cc(1365) idnsRead: idnsRead: FD 8: received 128 bytes from [2001:4860:4860::8888]:53
2024/07/16 14:29:01.300 kid1| 78,3| dns_internal.cc(1172) idnsGrokReply: idnsGrokReply: QID 0xd80b, 6 answers
2024/07/16 14:29:01.300 kid1| 78,6| dns_internal.cc(1105) idnsCallbackOneWithAnswer: 6 records for 0x5a939a3a4e08
2024/07/16 14:29:01.300 kid1| 14,3| ipcache.cc(480) ipcacheParse: 6 answers for www.google.com
2024/07/16 14:29:01.300 kid1| 14,5| ipcache.cc(549) updateTtl: use first 300 from RR TTL 300
2024/07/16 14:29:01.300 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #1 172.253.62.104
2024/07/16 14:29:01.300 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #2 172.253.62.103
2024/07/16 14:29:01.301 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #3 172.253.62.105
2024/07/16 14:29:01.301 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #4 172.253.62.147
2024/07/16 14:29:01.301 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #5 172.253.62.106
2024/07/16 14:29:01.301 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #6 172.253.62.99
2024/07/16 14:29:01.301 kid1| 78,6| dns_internal.cc(1105) idnsCallbackOneWithAnswer: 6 records for 0x5a939a3a0438
2024/07/16 14:29:01.301 kid1| 14,3| ipcache.cc(480) ipcacheParse: 6 answers for www.google.com
2024/07/16 14:29:01.301 kid1| 14,5| ipcache.cc(549) updateTtl: use first 300 from RR TTL 300
2024/07/16 14:29:01.301 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #1 172.253.62.104
2024/07/16 14:29:01.301 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #2 172.253.62.103
2024/07/16 14:29:01.301 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #3 172.253.62.105
2024/07/16 14:29:01.301 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #4 172.253.62.147
2024/07/16 14:29:01.301 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #5 172.253.62.106
2024/07/16 14:29:01.301 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #6 172.253.62.99
2024/07/16 14:29:01.311 kid1| 78,3| dns_internal.cc(1319) idnsRead: idnsRead: starting with FD 8
2024/07/16 14:29:01.311 kid1| 78,3| dns_internal.cc(1365) idnsRead: idnsRead: FD 8: received 144 bytes from [2001:4860:4860::8888]:53
2024/07/16 14:29:01.311 kid1| 78,3| dns_internal.cc(1172) idnsGrokReply: idnsGrokReply: QID 0xacdf, 4 answers
2024/07/16 14:29:01.311 kid1| 78,6| dns_internal.cc(1105) idnsCallbackOneWithAnswer: last 4 records for 0x5a939a3a4e08
2024/07/16 14:29:01.311 kid1| 14,3| ipcache.cc(480) ipcacheParse: 4 answers for www.google.com
2024/07/16 14:29:01.311 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #7 [2607:f8b0:4004:c07::6a]
2024/07/16 14:29:01.311 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #8 [2607:f8b0:4004:c07::93]
2024/07/16 14:29:01.311 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #9 [2607:f8b0:4004:c07::63]
2024/07/16 14:29:01.311 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #10 [2607:f8b0:4004:c07::69]
2024/07/16 14:29:01.311 kid1| 14,3| ipcache.cc(586) ipcacheHandleReply: done with www.google.com: 172.253.62.104 #1/10-0
2024/07/16 14:29:01.311 kid1| 78,6| dns_internal.cc(1105) idnsCallbackOneWithAnswer: last 4 records for 0x5a939a3a0438
2024/07/16 14:29:01.311 kid1| 14,3| ipcache.cc(480) ipcacheParse: 4 answers for www.google.com
2024/07/16 14:29:01.311 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #7 [2607:f8b0:4004:c07::6a]
2024/07/16 14:29:01.311 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #8 [2607:f8b0:4004:c07::93]
2024/07/16 14:29:01.311 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #9 [2607:f8b0:4004:c07::63]
2024/07/16 14:29:01.311 kid1| 14,3| ipcache.cc(535) addGood: www.google.com #10 [2607:f8b0:4004:c07::69]
2024/07/16 14:29:01.311 kid1| 14,3| ipcache.cc(586) ipcacheHandleReply: done with www.google.com: 172.253.62.104 #1/10-0
2024/07/16 14:29:01.311 kid1| 14,3| ipcache.cc(313) ipcacheRelease: ipcacheRelease: Releasing entry for 'www.google.com'
2024/07/16 14:29:01.311 kid1| 14,3| ipcache.cc(732) ipcache_gethostbyname: ipcache_gethostbyname: 'www.google.com', flags=1
2024/07/16 14:29:01.311 kid1| 14,3| ipcache.cc(732) ipcache_gethostbyname: ipcache_gethostbyname: 'www.google.com', flags=1
2024/07/16 14:29:01.311 kid1| 26,3| tunnel.cc(1141) tunnelStart: tunnelStart 
2024/07/16 14:29:01.312 kid1| 26,3| tunnel.cc(1174) tunnelStart: CONNECT www.google.com:443 HTTP/1.1
2024/07/16 14:29:01.312 kid1| 26,3| tunnel.cc(359) TunnelStateData: TunnelStateData constructed this=0x5a939a80e858
2024/07/16 14:29:01.312 kid1| 44,3| peer_select.cc(311) peerSelect: CONNECT
2024/07/16 14:29:01.312 kid1| 44,3| peer_select.cc(612) selectMore: CONNECT www.google.com
2024/07/16 14:29:01.312 kid1| 44,3| peer_select.cc(577) checkNetdbDirect: MY RTT = 95 msec
2024/07/16 14:29:01.312 kid1| 44,3| peer_select.cc(578) checkNetdbDirect: minimum_direct_rtt = 400 msec
2024/07/16 14:29:01.312 kid1| 44,3| peer_select.cc(644) selectMore: direct = DIRECT_YES (checkNetdbDirect)
2024/07/16 14:29:01.312 kid1| 44,3| peer_select.cc(650) selectMore: direct = DIRECT_YES
2024/07/16 14:29:01.312 kid1| 44,3| peer_select.cc(1102) addSelection: adding HIER_DIRECT#www.google.com
2024/07/16 14:29:01.312 kid1| 44,2| peer_select.cc(460) resolveSelected: Find IP destination for: www.google.com:443' via www.google.com
2024/07/16 14:29:01.312 kid1| 14,4| ipcache.cc(617) nbgethostbyname: www.google.com
2024/07/16 14:29:01.312 kid1| 14,3| Address.cc(389) lookupHostIP: Given Non-IP 'www.google.com': Name or service not known
2024/07/16 14:29:01.312 kid1| 14,4| ipcache.cc(657) ipcache_nbgethostbyname_: ipcache_nbgethostbyname: HIT for 'www.google.com'
2024/07/16 14:29:01.312 kid1| 44,2| peer_select.cc(1174) handlePath: PeerSelector2 found conn24 local=0.0.0.0 remote=172.253.62.104:443 HIER_DIRECT flags=1, destination #1 for www.google.com:443
2024/07/16 14:29:01.312 kid1| 44,2| peer_select.cc(1180) handlePath: always_direct = DENIED
2024/07/16 14:29:01.312 kid1| 44,2| peer_select.cc(1181) handlePath: never_direct = DENIED
2024/07/16 14:29:01.312 kid1| 44,2| peer_select.cc(1182) handlePath: timedout = 0
2024/07/16 14:29:01.312 kid1| 17,5| AsyncCall.cc(29) AsyncCall: The AsyncCall TunnelStateData::noteConnection constructed, this=0x5a939a8009c0 [call2215]
2024/07/16 14:29:01.312 kid1| 44,2| peer_select.cc(1174) handlePath: PeerSelector2 found conn25 local=0.0.0.0 remote=172.253.62.103:443 HIER_DIRECT flags=1, destination #2 for www.google.com:443
2024/07/16 14:29:01.312 kid1| 44,2| peer_select.cc(1180) handlePath: always_direct = DENIED
2024/07/16 14:29:01.312 kid1| 44,2| peer_select.cc(1181) handlePath: never_direct = DENIED
2024/07/16 14:29:01.312 kid1| 44,2| peer_select.cc(1182) handlePath: timedout = 0
2024/07/16 14:29:01.312 kid1| 44,2| peer_select.cc(1174) handlePath: PeerSelector2 found conn26 local=0.0.0.0 remote=172.253.62.105:443 HIER_DIRECT flags=1, destination #3 for www.google.com:443
2024/07/16 14:29:01.312 kid1| 44,2| peer_select.cc(1180) handlePath: always_direct = DENIED
2024/07/16 14:29:01.312 kid1| 44,2| peer_select.cc(1181) handlePath: never_direct = DENIED
2024/07/16 14:29:01.312 kid1| 44,2| peer_select.cc(1182) handlePath: timedout = 0
2024/07/16 14:29:01.312 kid1| 44,2| peer_select.cc(1174) handlePath: PeerSelector2 found conn27 local=0.0.0.0 remote=172.253.62.147:443 HIER_DIRECT flags=1, destination #4 for www.google.com:443
2024/07/16 14:29:01.312 kid1| 44,2| peer_select.cc(1180) handlePath: always_direct = DENIED
2024/07/16 14:29:01.312 kid1| 44,2| peer_select.cc(1181) handlePath: never_direct = DENIED
2024/07/16 14:29:01.312 kid1| 44,2| peer_select.cc(1182) handlePath: timedout = 0
2024/07/16 14:29:01.312 kid1| 44,2| peer_select.cc(1174) handlePath: PeerSelector2 found conn28 local=0.0.0.0 remote=172.253.62.106:443 HIER_DIRECT flags=1, destination #5 for www.google.com:443
2024/07/16 14:29:01.312 kid1| 44,2| peer_select.cc(1180) handlePath: always_direct = DENIED
2024/07/16 14:29:01.312 kid1| 44,2| peer_select.cc(1181) handlePath: never_direct = DENIED
2024/07/16 14:29:01.312 kid1| 44,2| peer_select.cc(1182) handlePath: timedout = 0
2024/07/16 14:29:01.312 kid1| 44,2| peer_select.cc(1174) handlePath: PeerSelector2 found conn29 local=0.0.0.0 remote=172.253.62.99:443 HIER_DIRECT flags=1, destination #6 for www.google.com:443
2024/07/16 14:29:01.312 kid1| 44,2| peer_select.cc(1180) handlePath: always_direct = DENIED
2024/07/16 14:29:01.312 kid1| 44,2| peer_select.cc(1181) handlePath: never_direct = DENIED
2024/07/16 14:29:01.312 kid1| 44,2| peer_select.cc(1182) handlePath: timedout = 0
2024/07/16 14:29:01.312 kid1| 44,2| peer_select.cc(1174) handlePath: PeerSelector2 found conn30 local=[::] remote=[2607:f8b0:4004:c07::6a]:443 HIER_DIRECT flags=1, destination #7 for www.google.com:443
2024/07/16 14:29:01.312 kid1| 44,2| peer_select.cc(1180) handlePath: always_direct = DENIED
2024/07/16 14:29:01.313 kid1| 44,2| peer_select.cc(1181) handlePath: never_direct = DENIED
2024/07/16 14:29:01.313 kid1| 44,2| peer_select.cc(1182) handlePath: timedout = 0
2024/07/16 14:29:01.313 kid1| 44,2| peer_select.cc(1174) handlePath: PeerSelector2 found conn31 local=[::] remote=[2607:f8b0:4004:c07::93]:443 HIER_DIRECT flags=1, destination #8 for www.google.com:443
2024/07/16 14:29:01.313 kid1| 44,2| peer_select.cc(1180) handlePath: always_direct = DENIED
2024/07/16 14:29:01.313 kid1| 44,2| peer_select.cc(1181) handlePath: never_direct = DENIED
2024/07/16 14:29:01.313 kid1| 44,2| peer_select.cc(1182) handlePath: timedout = 0
2024/07/16 14:29:01.313 kid1| 44,2| peer_select.cc(1174) handlePath: PeerSelector2 found conn32 local=[::] remote=[2607:f8b0:4004:c07::63]:443 HIER_DIRECT flags=1, destination #9 for www.google.com:443
2024/07/16 14:29:01.313 kid1| 44,2| peer_select.cc(1180) handlePath: always_direct = DENIED
2024/07/16 14:29:01.313 kid1| 44,2| peer_select.cc(1181) handlePath: never_direct = DENIED
2024/07/16 14:29:01.313 kid1| 44,2| peer_select.cc(1182) handlePath: timedout = 0
2024/07/16 14:29:01.313 kid1| 44,2| peer_select.cc(1174) handlePath: PeerSelector2 found conn33 local=[::] remote=[2607:f8b0:4004:c07::69]:443 HIER_DIRECT flags=1, destination #10 for www.google.com:443
2024/07/16 14:29:01.313 kid1| 44,2| peer_select.cc(1180) handlePath: always_direct = DENIED
2024/07/16 14:29:01.313 kid1| 44,2| peer_select.cc(1181) handlePath: never_direct = DENIED
2024/07/16 14:29:01.313 kid1| 44,2| peer_select.cc(1182) handlePath: timedout = 0
2024/07/16 14:29:01.313 kid1| 44,2| peer_select.cc(479) resolveSelected: PeerSelector2 found all 10 destinations for www.google.com:443
2024/07/16 14:29:01.313 kid1| 44,2| peer_select.cc(480) resolveSelected: always_direct = DENIED
2024/07/16 14:29:01.313 kid1| 44,2| peer_select.cc(481) resolveSelected: never_direct = DENIED
2024/07/16 14:29:01.313 kid1| 44,2| peer_select.cc(482) resolveSelected: timedout = 0
2024/07/16 14:29:01.313 kid1| 17,3| FwdState.cc(1568) GetMarkingsToServer: from 0.0.0.0 tos 0 netfilter mark 0
2024/07/16 14:29:01.409 kid1| 17,4| HappyConnOpener.cc(501) sendSuccess: new prime connection: conn35 local=HIDDEN:38852 remote=172.253.62.104:443 HIER_DIRECT FD 15 flags=1 @0
2024/07/16 14:29:01.409 kid1| 17,5| AsyncCall.cc(96) ScheduleCall: HappyConnOpener.cc(505) will call TunnelStateData::noteConnection(new conn35 local=HIDDEN remote=172.253.62.104:443 HIER_DIRECT FD 15 flags=1 @0) [call2215]



Best regards

Rasmus

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="026936.html">[squid-users] Tproxy or intercept
</A></li>
	<LI>Next message (by thread): <A HREF="026942.html">[squid-users] Prefer or force ipv6 usage on dual stack interface
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26941">[ date ]</a>
              <a href="thread.html#26941">[ thread ]</a>
              <a href="subject.html#26941">[ subject ]</a>
              <a href="author.html#26941">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
