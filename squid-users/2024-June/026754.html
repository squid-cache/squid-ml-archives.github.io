<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Error Question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Error%20Question&In-Reply-To=%3Cc7c21aae-daa2-4e56-9344-da228ef5f443%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026753.html">
   <LINK REL="Next"  HREF="026755.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Error Question</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Error%20Question&In-Reply-To=%3Cc7c21aae-daa2-4e56-9344-da228ef5f443%40measurement-factory.com%3E"
       TITLE="[squid-users] Error Question">rousskov at measurement-factory.com
       </A><BR>
    <I>Wed Jun 12 22:38:48 UTC 2024</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="026753.html">[squid-users] Error Question
</A></li>
        <LI>Next message (by thread): <A HREF="026755.html">[squid-users] Error Question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26754">[ date ]</a>
              <a href="thread.html#26754">[ thread ]</a>
              <a href="subject.html#26754">[ subject ]</a>
              <a href="author.html#26754">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2024-06-12 17:51, Jonathan Lee wrote:
&gt;<i> when killing squid I only get the following and no core dumps core does 
</I>&gt;<i> does work
</I>
Glad you have a working &quot;sanity check&quot; test! I agree with FreeBSD forum 
folks that you have proven that your OS does have core dumps enabled (in 
general). Now we need to figure out what is the difference between that 
working test script and Squid.

Please start Squid from the command line, with -N command line option 
(among others that you might be using already), just like you start the 
&quot;sanity check&quot; test script. And then kill Squid as you kill the test script.

If the above does not produce a Squid core file, then I would suspect 
that Squid runs as &quot;squid&quot; user while the test script runs as &quot;root&quot;. 
Try starting the test script as &quot;squid&quot; user (you may be able to use 
&quot;sudo -u squid ...&quot; for that).

If same user does not expose the difference, start the test script from 
the directory where you told Squid to dump core.


HTH,

Alex.


&gt;<i> I have tested it with a sanity check with the help of FreeBSD 
</I>&gt;<i> forum users. However it just does not show a core dump for me on 
</I>&gt;<i> anything kill -11 kill -6 killall or kill -SIGABRT. I have it set in the 
</I>&gt;<i> config to use coredump directory also
</I>&gt;<i> forums.freebsd.org 
</I>&gt;<i> &lt;<A HREF="https://forums.freebsd.org/threads/core-dumps.93778/page-2">https://forums.freebsd.org/threads/core-dumps.93778/page-2</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Jun 12 14:49:09	kernel	pid 87824 (squid), jid 0, uid 100: exited on signal 6
</I>&gt;<i> Jun 12 14:47:52	kernel	pid 87551 (squid), jid 0, uid 0: exited on signal 11
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> On Jun 12, 2024, at 10:19, Jonathan Lee &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">jonathanlee571 at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> You know what it was, it needed to be bound to the loopback and not 
</I>&gt;&gt;<i> just the LAN, again I am still working on getting a core dump file 
</I>&gt;&gt;<i> manually. Will update once I get one. Chmod might be needed.
</I>&gt;&gt;<i> Sent from my iPhone
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On Jun 12, 2024, at 06:13, Alex Rousskov 
</I>&gt;&gt;&gt;<i> &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt; wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &#65279;On 2024-06-11 23:32, Jonathan Lee wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> So I just run this on command line SIGABRT squid?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On Unix-like systems, the command to send a process a signal is 
</I>&gt;&gt;&gt;<i> called &quot;kill&quot;: <A HREF="https://www.man7.org/linux/man-pages/man1/kill.1p.html">https://www.man7.org/linux/man-pages/man1/kill.1p.html</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> For example, if you want to abort a Squid worker process that has OS 
</I>&gt;&gt;&gt;<i> process ID (PID) 12345, you may do something like this:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &#160;&#160;sudo kill -SIGABRT 12345
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> You can use &quot;ps&quot; or &quot;top&quot; commands to learn PIDs of processes you 
</I>&gt;&gt;&gt;<i> want to signal.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> also added an item to the Netgate forum to, but not many users are 
</I>&gt;&gt;&gt;&gt;<i> Squid wizards
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Beyond using a reasonable coredump_dir value in squid.conf, the 
</I>&gt;&gt;&gt;<i> system administration problems you need to solve to enable Squid core 
</I>&gt;&gt;&gt;<i> dumps are most likely not specific to Squid.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> HTH,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Alex.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> It&#8217;s funny as soon as I enabled the sysctl command and set the 
</I>&gt;&gt;&gt;&gt;<i> directory it won&#8217;t crash anymore. I also changed it to reside on the 
</I>&gt;&gt;&gt;&gt;<i> loopback before it was only on my lan interface. I run an external 
</I>&gt;&gt;&gt;&gt;<i> drive as my swap partition or a swap drive, it works I get crash 
</I>&gt;&gt;&gt;&gt;<i> reports when playing around with stuff. /dev/da0 or something it 
</I>&gt;&gt;&gt;&gt;<i> dumps to it and when it reboots shows in the var/crash folder and 
</I>&gt;&gt;&gt;&gt;<i> will display on gui report ready, again if anyone else knows pfSense 
</I>&gt;&gt;&gt;&gt;<i> let me know. I also added an item to the Netgate forum to, but not 
</I>&gt;&gt;&gt;&gt;<i> many users are Squid wizards so it might take a long time to get any 
</I>&gt;&gt;&gt;&gt;<i> community input over there.
</I>&gt;&gt;&gt;<i>
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="026753.html">[squid-users] Error Question
</A></li>
	<LI>Next message (by thread): <A HREF="026755.html">[squid-users] Error Question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26754">[ date ]</a>
              <a href="thread.html#26754">[ thread ]</a>
              <a href="subject.html#26754">[ subject ]</a>
              <a href="author.html#26754">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
