<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Error during ICAP RESPMOD
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Error%20during%20ICAP%20RESPMOD&In-Reply-To=%3C283160880.349514.1711127497866%40mail.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026527.html">
   <LINK REL="Next"  HREF="026532.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Error during ICAP RESPMOD</H1>
    <B>Arun Kumar</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Error%20during%20ICAP%20RESPMOD&In-Reply-To=%3C283160880.349514.1711127497866%40mail.yahoo.com%3E"
       TITLE="[squid-users] Error during ICAP RESPMOD">s_p_arun at yahoo.com
       </A><BR>
    <I>Fri Mar 22 17:11:37 UTC 2024</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="026527.html">[squid-users] Error during ICAP RESPMOD
</A></li>
        <LI>Next message (by thread): <A HREF="026532.html">[squid-users] Error during ICAP RESPMOD
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26531">[ date ]</a>
              <a href="thread.html#26531">[ thread ]</a>
              <a href="subject.html#26531">[ subject ]</a>
              <a href="author.html#26531">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE> The lines above are. The content-length is 138 (8a in hex), but the bytes are 144. Could this be the reason?
parseMore: have 144 bytes to parse [FD 14;RBG/Comm(14)wr job24]parseMore:
8a^M{&quot;activity&quot;:&quot;Make a simple musical instrument&quot;,&quot;type&quot;:&quot;music&quot;,&quot;participants&quot;:1,&quot;price:0.4,&quot;link&quot;:&quot;&quot;,&quot;key&quot;:&quot;7091374&quot;,&quot;accessibility&quot;:0.25}^MparseHeaders: parse ICAP headersparsePart: have 144 head bytes to parse; state: 0
parsePart: head parsing result: 0 detail: 600

    On Monday, March 18, 2024 at 11:21:02 PM EDT, Alex Rousskov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt; wrote:  
 
 On 2024-03-18 18:46, Arun Kumar wrote:
&gt;<i> Any idea, the reason for error in ModXact.cc parsePart fuction.
</I>&gt;<i> Happening during parsing the response from ICAP
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> parsePart: have 144 head bytes to parse; state: 0
</I>&gt;<i> parsePart: head parsing result: 0 detail: 600
</I>
AFAICT, Squid considers received ICAP response header malformed. More 
than five possible problems/cases may match the above lines. The answer 
to your question (or an additional clue!) is in different debugging 
output, possibly logged somewhere between the two lines quoted above. 
The right debugging lines may be visible in &quot;debug_options ALL,2 58,5, 
93,5&quot; output, but it is usually best to share compressed ALL,9 logs 
(privately if needed).

<A HREF="https://wiki.squid-cache.org/SquidFaq/BugReporting#debugging-a-single-transaction">https://wiki.squid-cache.org/SquidFaq/BugReporting#debugging-a-single-transaction</A>


Sharing the problematic ICAP response (header) in a raw packet capture 
format (to preserve important details) may also be very useful.


HTH,

Alex.

  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20240322/50e98a01/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20240322/50e98a01/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="026527.html">[squid-users] Error during ICAP RESPMOD
</A></li>
	<LI>Next message (by thread): <A HREF="026532.html">[squid-users] Error during ICAP RESPMOD
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26531">[ date ]</a>
              <a href="thread.html#26531">[ thread ]</a>
              <a href="subject.html#26531">[ subject ]</a>
              <a href="author.html#26531">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
