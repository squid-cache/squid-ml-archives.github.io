<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Error from icap during respmod
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Error%20from%20icap%20during%20respmod&In-Reply-To=%3C1650153442.7740770.1715038797924%40mail.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026634.html">
   <LINK REL="Next"  HREF="026658.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Error from icap during respmod</H1>
    <B>Arun Kumar</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Error%20from%20icap%20during%20respmod&In-Reply-To=%3C1650153442.7740770.1715038797924%40mail.yahoo.com%3E"
       TITLE="[squid-users] Error from icap during respmod">s_p_arun at yahoo.com
       </A><BR>
    <I>Mon May  6 23:39:57 UTC 2024</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="026634.html">[squid-users] Error from icap during respmod
</A></li>
        <LI>Next message (by thread): <A HREF="026658.html">[squid-users] Error from icap during respmod
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26652">[ date ]</a>
              <a href="thread.html#26652">[ thread ]</a>
              <a href="subject.html#26652">[ subject ]</a>
              <a href="author.html#26652">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE> Thank you very much for the response. Are you aware of any compatible Python or Java based iCAP server implemenation? We want to implement custom virus scanning of the response.&#160;I got the book Squid: The Definitive Guide and going over for more understanding. Saw your name mentioned by the author. I am very proud to work with great people like you.

    On Thursday, May 2, 2024 at 04:18:45 PM EDT, Alex Rousskov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt; wrote:  
 
 On 2024-04-29 13:06, Arun Kumar wrote:
&gt;<i> Configured python based icap server (pyicap) and getting 500 Internal 
</I>&gt;<i> Server error during respmod.
</I>
AFAICT, this ICAP RESPMOD service is buggy: It sends what looks like an 
HTTP response body chunk after sending an ICAP 100 Continue control 
message. Instead, it is supposed to send the final ICAP response headers 
and HTTP response headers _before_ sending that HTTP response body chunk.


&#160; &#160; 00:50:54.989 ... ReadNow: conn33 ... size 65535, retval 25
&#160; &#160; ICAP/1.0 100 Continue


&#160; &#160; 00:50:54.991 ReadNow: conn33 ... size 65535, retval 137
&#160; &#160; 83
&#160; &#160; {&quot;activity&quot;:...}


HTH,

Alex.

&gt;<i> <A HREF="https://drive.google.com/file/d/19yirXfxKli7NXon4ewiy-v3GpLvECT1i/view?usp=sharing">https://drive.google.com/file/d/19yirXfxKli7NXon4ewiy-v3GpLvECT1i/view?usp=sharing</A> &lt;<A HREF="https://drive.google.com/file/d/19yirXfxKli7NXon4ewiy-v3GpLvECT1i/view?usp=sharing">https://drive.google.com/file/d/19yirXfxKli7NXon4ewiy-v3GpLvECT1i/view?usp=sharing</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> Squid configuration:
</I>&gt;<i> icap_enable on
</I>&gt;<i> icap_send_client_ip on
</I>&gt;<i> icap_send_client_username on
</I>&gt;<i> icap_client_username_encode off
</I>&gt;<i> icap_client_username_header X-Authenticated-User
</I>&gt;<i> icap_preview_enable on
</I>&gt;<i> icap_preview_size 1024
</I>&gt;<i> 
</I>&gt;<i> icap_service service_req reqmod_precache bypass=0 
</I>&gt;<i> <A HREF="icap://127.0.0.1:13440/example">icap://127.0.0.1:13440/example</A>
</I>&gt;<i> icap_service service_resp respmod_precache bypass=0 
</I>&gt;<i> <A HREF="icap://127.0.0.1:13441/example">icap://127.0.0.1:13441/example</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">https://lists.squid-cache.org/listinfo/squid-users</A>
</I>
  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20240506/301e8159/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20240506/301e8159/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="026634.html">[squid-users] Error from icap during respmod
</A></li>
	<LI>Next message (by thread): <A HREF="026658.html">[squid-users] Error from icap during respmod
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26652">[ date ]</a>
              <a href="thread.html#26652">[ thread ]</a>
              <a href="subject.html#26652">[ subject ]</a>
              <a href="author.html#26652">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
