<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] log_referrer question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20log_referrer%20question&In-Reply-To=%3CMW5PR14MB52897188C2ED83596B406151B0EA2%40MW5PR14MB5289.namprd14.prod.outlook.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026683.html">
   <LINK REL="Next"  HREF="026685.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] log_referrer question</H1>
    <B>Bobby Matznick</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20log_referrer%20question&In-Reply-To=%3CMW5PR14MB52897188C2ED83596B406151B0EA2%40MW5PR14MB5289.namprd14.prod.outlook.com%3E"
       TITLE="[squid-users] log_referrer question">bmatznick at pbandt.bank
       </A><BR>
    <I>Tue May 21 17:50:49 UTC 2024</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="026683.html">[squid-users] Question: cache_mem share among multiple squid instances with the same service_name in SMP mode
</A></li>
        <LI>Next message (by thread): <A HREF="026685.html">[squid-users] log_referrer question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26684">[ date ]</a>
              <a href="thread.html#26684">[ thread ]</a>
              <a href="subject.html#26684">[ subject ]</a>
              <a href="author.html#26684">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have been trying to use a combined log format for squid. The below line in the squid config is my current attempt.

logformat combined %&gt;a %[ui %[un [%tl &quot;%rm %ru HTTP/%rv&quot; %&gt;Hs %&lt;st &quot;%{Referer}&gt;h&quot; &quot;%{User-Agent}&gt;h&quot; %Ss:%Sh

It is working, as far as logging the normal stuff I would see before having tried to implement referrer. I noticed somewhere that you need to build squid with -enable-referrer-log, it was an older version, looked like 3.1 and lower, I am using 4.13. So, checked with squid -v and do not see &quot;-enable-referrer_log&quot; as one of the configure options used during install. Would I need to reinstall, or is that no longer necessary in version 4.13? Thanks!!

Bobby

From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; On Behalf Of <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-request at lists.squid-cache.org</A>
Sent: Tuesday, April 23, 2024 6:00 AM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: [External] squid-users Digest, Vol 116, Issue 31

Caution: This is an external email and has a suspicious subject or content. Please take care when clicking links or opening attachments. When in doubt, contact your IT Department
Send squid-users mailing list submissions to
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;

To subscribe or unsubscribe via the World Wide Web, visit
<A HREF="https://lists.squid-cache.org/listinfo/squid-users&lt;https://lists.squid-cache.org/listinfo/squid-users">https://lists.squid-cache.org/listinfo/squid-users&lt;https://lists.squid-cache.org/listinfo/squid-users</A>&gt;
or, via email, send a message with subject or body 'help' to
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-request at lists.squid-cache.org</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-request at lists.squid-cache.org</A>&gt;

You can reach the person managing the list at
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-owner at lists.squid-cache.org</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-owner at lists.squid-cache.org</A>&gt;

When replying, please edit your Subject line so it is more specific
than &quot;Re: Contents of squid-users digest...&quot;


Today's Topics:

1. Re: Warm cold times (Amos Jeffries)
2. Re: Container Based Issues Lock Down Password and Terminate
SSL (Amos Jeffries)


----------------------------------------------------------------------

Message: 1
Date: Tue, 23 Apr 2024 19:41:37 +1200
From: Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;&gt;
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
Subject: Re: [squid-users] Warm cold times
Message-ID: &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">9d8f4de6-c797-4e70-aaf5-c073f45c3390 at treenet.co.nz</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">9d8f4de6-c797-4e70-aaf5-c073f45c3390 at treenet.co.nz</A>&gt;&gt;
Content-Type: text/plain; charset=UTF-8; format=flowed

On 22/04/24 17:42, Jonathan Lee wrote:
&gt;<i> Has anyone else taken up the fun challenge of doing windows update caching. It is amazing when it works right. It is a complex configuration, but it is worth it to see a warm download come down that originally took 30 mins instantly to a second client. I didn?t know how much of the updates are the same across different vendor laptops.
</I>&gt;<i>
</I>
There have been several people over the years.
The collected information is being gathered at
&lt;<A HREF="https://wiki.squid-cache.org/ConfigExamples/Caching/WindowsUpdates&lt;https://wiki.squid-cache.org/ConfigExamples/Caching/WindowsUpdates">https://wiki.squid-cache.org/ConfigExamples/Caching/WindowsUpdates&lt;https://wiki.squid-cache.org/ConfigExamples/Caching/WindowsUpdates</A>&gt;&gt;

If you would like to check and update the information for the current
Windows 11 and Squid 6, etc. that would be useful.

Wiki updates are now made using github PRs against the repository at
&lt;<A HREF="https://github.com/squid-cache/squid-cache.github.io&lt;https://github.com/squid-cache/squid-cache.github.io">https://github.com/squid-cache/squid-cache.github.io&lt;https://github.com/squid-cache/squid-cache.github.io</A>&gt;&gt;.




&gt;<i> Amazing stuff Squid team.
</I>&gt;<i> I wish I could get some of the Roblox Xbox stuff to cache but it?s a night to get running with squid in the first place, I had to splice a bunch of stuff and also wpad the Xbox system.
</I>
FWIW, what I have seen from routing perspective is that Roblox likes to
use custom ports and P2P connections for a lot of things. So no high
expectations there, but anything cacheable is great news.



&gt;&gt;<i> On Apr 18, 2024, at 23:55, Jonathan Lee wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ?Does anyone know the current warm cold download times for dynamic cache of windows updates?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I can say my experience was a massive increase in the warm download it was delivered in under a couple mins versus 30 or so to download it cold. The warm download was almost instant on the second device. Very green energy efficient.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Does squid 5.8 or 6 work better on warm delivery?
</I>
There is no significant differences AFAIK. They both come down to what
you have configured. That said, the ongoing improvements may make v6
some amount of &quot;better&quot; - even if only trivial.



&gt;&gt;<i> Is there a way to make 100 percent sure a docker container can?t get inside the cache?
</I>
For Windows I would expect the only &quot;100% sure&quot; way is to completely
forbid access to the disk where the cache is stored.


The rest of your questions are about container management and Windows
configuration. Which are kind of off-topic.


Cheers
Amos


------------------------------

Message: 2
Date: Tue, 23 Apr 2024 20:03:42 +1200
From: Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;&gt;
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
Subject: Re: [squid-users] Container Based Issues Lock Down Password
and Terminate SSL
Message-ID: &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">58c41ee7-b88c-4d5a-bd12-220d44465067 at treenet.co.nz</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">58c41ee7-b88c-4d5a-bd12-220d44465067 at treenet.co.nz</A>&gt;&gt;
Content-Type: text/plain; charset=UTF-8; format=flowed

On 23/04/24 11:52, Jonathan Lee wrote:
&gt;<i> Hello fellow Squid Accelerator/Dynamic Cache/Web Cache Users/PfSense users
</I>&gt;<i>
</I>&gt;<i> I think this might resolve any container based issues/fears if they
</I>&gt;<i> happened to get into the cache. Ie a Docker Proxy got installed and
</I>&gt;<i> tried to data marshal the network card inside of a freeBSD jail or
</I>&gt;<i> something like that. Biggest fear with my cache it is a big cache now
</I>&gt;<i>
</I>&gt;<i> Please yet me know what you think or if it is wrong.
</I>&gt;<i>
</I>&gt;<i> Here is my configuration. I wanted to share it as it might help to
</I>&gt;<i> secure some of this.
</I>
FTR, this config was auto-generated by pfsense. A number of things which
that tool forces into the config could be done much better in the latest
Squid, but the tool does not do due to needing to support older Squid
version.


&gt;<i>
</I>&gt;<i> Keep in mine I use cachemgr.cgi within Squidlight so I had to set the
</I>&gt;<i> password and I have to also adapt the php status file to include the
</I>&gt;<i> password and also the sqlight php file.
</I>&gt;<i>
</I>&gt;<i> After that the status and gui pages work still with the new password.
</I>&gt;<i> Only issues area that it shows up in clear text when it goes over the
</I>&gt;<i> proxy I can see my password clear as day again that was an issue listed
</I>&gt;<i> inside the Squid O?REILLY book also.
</I>

Please ensure you are using the latest Squid v6 release. That release
has both a number of security fixes, and working <A HREF="https://">https://</A> URL access to
the manager reports.

The cachemgr.cgi tool is deprecated fro a number of issues including
that style of embedding passwords in the URLs.

Francesco and I have created a tool that can be found at
&lt;<A HREF="https://github.com/yadij/cachemgr.js/blob/master/README.md&lt;https://github.com/yadij/cachemgr.js/blob/master/README.md">https://github.com/yadij/cachemgr.js/blob/master/README.md&lt;https://github.com/yadij/cachemgr.js/blob/master/README.md</A>&gt;&gt; for basic
access to the reports directly from Browser.
That tool uses HTTP authentication configured via the well-documented
proxy_auth ACLs and http_access for more secure access than the old URL
based mechanism (which still exists, just deprecated).



Cheers
Amos


------------------------------

Subject: Digest Footer

_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
<A HREF="https://lists.squid-cache.org/listinfo/squid-users&lt;https://lists.squid-cache.org/listinfo/squid-users">https://lists.squid-cache.org/listinfo/squid-users&lt;https://lists.squid-cache.org/listinfo/squid-users</A>&gt;


------------------------------

End of squid-users Digest, Vol 116, Issue 31
********************************************
CONFIDENTIALITY NOTICE: The information contained in and attached to this email is intended only for the confidential use of the person or entity to which the email is addressed. This email and any attachments may contain privileged and confidential information. If you are not the intended recipient, you are notified that you received this email in error and that any reading, retention, use or distribution of this email and attachments is strictly prohibited. If you received this email in error, you are requested to immediately notify us by calling 888-728-3550 or by return email and immediately and permanently delete the email and any attachments. Thank you.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20240521/c5379930/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20240521/c5379930/attachment.htm</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0.jpg
Type: image/jpeg
Size: 6398 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20240521/c5379930/attachment.jpg">http://lists.squid-cache.org/pipermail/squid-users/attachments/20240521/c5379930/attachment.jpg</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="026683.html">[squid-users] Question: cache_mem share among multiple squid instances with the same service_name in SMP mode
</A></li>
	<LI>Next message (by thread): <A HREF="026685.html">[squid-users] log_referrer question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26684">[ date ]</a>
              <a href="thread.html#26684">[ thread ]</a>
              <a href="subject.html#26684">[ subject ]</a>
              <a href="author.html#26684">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
