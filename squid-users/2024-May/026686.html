<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] log_referrer question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20log_referrer%20question&In-Reply-To=%3Cc03ff027-d266-40ed-973c-d228047e8c1b%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026687.html">
   <LINK REL="Next"  HREF="026689.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] log_referrer question</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20log_referrer%20question&In-Reply-To=%3Cc03ff027-d266-40ed-973c-d228047e8c1b%40measurement-factory.com%3E"
       TITLE="[squid-users] log_referrer question">rousskov at measurement-factory.com
       </A><BR>
    <I>Tue May 21 19:51:55 UTC 2024</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="026687.html">[squid-users] log_referrer question
</A></li>
        <LI>Next message (by thread): <A HREF="026689.html">[squid-users] log_referrer question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26686">[ date ]</a>
              <a href="thread.html#26686">[ thread ]</a>
              <a href="subject.html#26686">[ subject ]</a>
              <a href="author.html#26686">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2024-05-21 13:50, Bobby Matznick wrote:
&gt;<i> I have been trying to use a combined log format for squid. The below 
</I>&gt;<i> line in the squid config is my current attempt.
</I>&gt;<i> 
</I>&gt;<i> logformat combined %&gt;a %[ui %[un [%tl &quot;%rm %ru HTTP/%rv&quot; %&gt;Hs %&lt;st 
</I>&gt;<i> &quot;%{Referer}&gt;h&quot; &quot;%{User-Agent}&gt;h&quot; %Ss:%Sh
</I>
Please do not redefine built-in logformat configurations like &quot;squid&quot; 
and &quot;combined&quot;. Name and define your own instead.


&gt;<i> It is working, as far as logging the normal stuff I would see before 
</I>&gt;<i> having tried to implement referrer. I noticed somewhere that you need to 
</I>&gt;<i> build squid with &#8211;enable-referrer-log, it was an older version, looked 
</I>&gt;<i> like 3.1 and lower, I am using 4.13.
</I>
Please upgrade to v6. Squid v4 is not supported by the Squid Project.


&gt;<i> So, checked with squid -v and do 
</I>&gt;<i> not see &#8220;&#8212;enable-referrer_log&#8221; as one of the configure options used 
</I>&gt;<i> during install. Would I need to reinstall, or is that no longer 
</I>&gt;<i> necessary in version 4.13?
</I>
referer_log and the corresponding ./configure options have been removed 
long time ago, probably before v4.13 was released.

HTH,

Alex.


&gt;<i> *From:*squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; *On 
</I>&gt;<i> Behalf Of *<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-request at lists.squid-cache.org</A>
</I>&gt;<i> *Sent:* Tuesday, April 23, 2024 6:00 AM
</I>&gt;<i> *To:* <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> *Subject:* [External] squid-users Digest, Vol 116, Issue 31
</I>&gt;<i> 
</I>&gt;<i> 	
</I>&gt;<i> 
</I>&gt;<i> *Caution:*This is an external email and has a suspicious subject or 
</I>&gt;<i> content. Please take care when clicking links or opening attachments. 
</I>&gt;<i> When in doubt, contact your IT Department
</I>&gt;<i> 
</I>&gt;<i> Send squid-users mailing list submissions to
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> To subscribe or unsubscribe via the World Wide Web, visit
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">https://lists.squid-cache.org/listinfo/squid-users</A> 
</I>&gt;<i> &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">https://lists.squid-cache.org/listinfo/squid-users</A>&gt;
</I>&gt;<i> or, via email, send a message with subject or body 'help' to
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-request at lists.squid-cache.org</A> 
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-request at lists.squid-cache.org</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> You can reach the person managing the list at
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-owner at lists.squid-cache.org</A> 
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-owner at lists.squid-cache.org</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> When replying, please edit your Subject line so it is more specific
</I>&gt;<i> than &quot;Re: Contents of squid-users digest...&quot;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Today's Topics:
</I>&gt;<i> 
</I>&gt;<i> 1. Re: Warm cold times (Amos Jeffries)
</I>&gt;<i> 2. Re: Container Based Issues Lock Down Password and Terminate
</I>&gt;<i> SSL (Amos Jeffries)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ----------------------------------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> Message: 1
</I>&gt;<i> Date: Tue, 23 Apr 2024 19:41:37 +1200
</I>&gt;<i> From: Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;&gt;
</I>&gt;<i> To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> 
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i> Subject: Re: [squid-users] Warm cold times
</I>&gt;<i> Message-ID: &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">9d8f4de6-c797-4e70-aaf5-c073f45c3390 at treenet.co.nz</A> 
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">9d8f4de6-c797-4e70-aaf5-c073f45c3390 at treenet.co.nz</A>&gt;&gt;
</I>&gt;<i> Content-Type: text/plain; charset=UTF-8; format=flowed
</I>&gt;<i> 
</I>&gt;<i> On 22/04/24 17:42, Jonathan Lee wrote:
</I>&gt;<i>  &gt; Has anyone else taken up the fun challenge of doing windows update 
</I>&gt;<i> caching. It is amazing when it works right. It is a complex 
</I>&gt;<i> configuration, but it is worth it to see a warm download come down that 
</I>&gt;<i> originally took 30 mins instantly to a second client. I didn?t know how 
</I>&gt;<i> much of the updates are the same across different vendor laptops.
</I>&gt;<i>  &gt;
</I>&gt;<i> 
</I>&gt;<i> There have been several people over the years.
</I>&gt;<i> The collected information is being gathered at
</I>&gt;<i> &lt;<A HREF="https://wiki.squid-cache.org/ConfigExamples/Caching/WindowsUpdates">https://wiki.squid-cache.org/ConfigExamples/Caching/WindowsUpdates</A> 
</I>&gt;<i> &lt;<A HREF="https://wiki.squid-cache.org/ConfigExamples/Caching/WindowsUpdates">https://wiki.squid-cache.org/ConfigExamples/Caching/WindowsUpdates</A>&gt;&gt;
</I>&gt;<i> 
</I>&gt;<i> If you would like to check and update the information for the current
</I>&gt;<i> Windows 11 and Squid 6, etc. that would be useful.
</I>&gt;<i> 
</I>&gt;<i> Wiki updates are now made using github PRs against the repository at
</I>&gt;<i> &lt;<A HREF="https://github.com/squid-cache/squid-cache.github.io">https://github.com/squid-cache/squid-cache.github.io</A> 
</I>&gt;<i> &lt;<A HREF="https://github.com/squid-cache/squid-cache.github.io">https://github.com/squid-cache/squid-cache.github.io</A>&gt;&gt;.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>  &gt; Amazing stuff Squid team.
</I>&gt;<i>  &gt; I wish I could get some of the Roblox Xbox stuff to cache but it?s a 
</I>&gt;<i> night to get running with squid in the first place, I had to splice a 
</I>&gt;<i> bunch of stuff and also wpad the Xbox system.
</I>&gt;<i> 
</I>&gt;<i> FWIW, what I have seen from routing perspective is that Roblox likes to
</I>&gt;<i> use custom ports and P2P connections for a lot of things. So no high
</I>&gt;<i> expectations there, but anything cacheable is great news.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>  &gt;&gt; On Apr 18, 2024, at 23:55, Jonathan Lee wrote:
</I>&gt;<i>  &gt;&gt;
</I>&gt;<i>  &gt;&gt; ?Does anyone know the current warm cold download times for dynamic 
</I>&gt;<i> cache of windows updates?
</I>&gt;<i>  &gt;&gt;
</I>&gt;<i>  &gt;&gt; I can say my experience was a massive increase in the warm download 
</I>&gt;<i> it was delivered in under a couple mins versus 30 or so to download it 
</I>&gt;<i> cold. The warm download was almost instant on the second device. Very 
</I>&gt;<i> green energy efficient.
</I>&gt;<i>  &gt;&gt;
</I>&gt;<i>  &gt;&gt;
</I>&gt;<i>  &gt;&gt; Does squid 5.8 or 6 work better on warm delivery?
</I>&gt;<i> 
</I>&gt;<i> There is no significant differences AFAIK. They both come down to what
</I>&gt;<i> you have configured. That said, the ongoing improvements may make v6
</I>&gt;<i> some amount of &quot;better&quot; - even if only trivial.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>  &gt;&gt; Is there a way to make 100 percent sure a docker container can?t get 
</I>&gt;<i> inside the cache?
</I>&gt;<i> 
</I>&gt;<i> For Windows I would expect the only &quot;100% sure&quot; way is to completely
</I>&gt;<i> forbid access to the disk where the cache is stored.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> The rest of your questions are about container management and Windows
</I>&gt;<i> configuration. Which are kind of off-topic.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Cheers
</I>&gt;<i> Amos
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ------------------------------
</I>&gt;<i> 
</I>&gt;<i> Message: 2
</I>&gt;<i> Date: Tue, 23 Apr 2024 20:03:42 +1200
</I>&gt;<i> From: Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;&gt;
</I>&gt;<i> To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> 
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i> Subject: Re: [squid-users] Container Based Issues Lock Down Password
</I>&gt;<i> and Terminate SSL
</I>&gt;<i> Message-ID: &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">58c41ee7-b88c-4d5a-bd12-220d44465067 at treenet.co.nz</A> 
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">58c41ee7-b88c-4d5a-bd12-220d44465067 at treenet.co.nz</A>&gt;&gt;
</I>&gt;<i> Content-Type: text/plain; charset=UTF-8; format=flowed
</I>&gt;<i> 
</I>&gt;<i> On 23/04/24 11:52, Jonathan Lee wrote:
</I>&gt;<i>  &gt; Hello fellow Squid Accelerator/Dynamic Cache/Web Cache Users/PfSense 
</I>&gt;<i> users
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; I think this might resolve any container based issues/fears if they
</I>&gt;<i>  &gt; happened to get into the cache. Ie a Docker Proxy got installed and
</I>&gt;<i>  &gt; tried to data marshal the network card inside of a freeBSD jail or
</I>&gt;<i>  &gt; something like that. Biggest fear with my cache it is a big cache now
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; Please yet me know what you think or if it is wrong.
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; Here is my configuration. I wanted to share it as it might help to
</I>&gt;<i>  &gt; secure some of this.
</I>&gt;<i> 
</I>&gt;<i> FTR, this config was auto-generated by pfsense. A number of things which
</I>&gt;<i> that tool forces into the config could be done much better in the latest
</I>&gt;<i> Squid, but the tool does not do due to needing to support older Squid
</I>&gt;<i> version.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; Keep in mine I use cachemgr.cgi within Squidlight so I had to set the
</I>&gt;<i>  &gt; password and I have to also adapt the php status file to include the
</I>&gt;<i>  &gt; password and also the sqlight php file.
</I>&gt;<i>  &gt;
</I>&gt;<i>  &gt; After that the status and gui pages work still with the new password.
</I>&gt;<i>  &gt; Only issues area that it shows up in clear text when it goes over the
</I>&gt;<i>  &gt; proxy I can see my password clear as day again that was an issue listed
</I>&gt;<i>  &gt; inside the Squid O?REILLY book also.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Please ensure you are using the latest Squid v6 release. That release
</I>&gt;<i> has both a number of security fixes, and working <A HREF="https://">https://</A> URL access to
</I>&gt;<i> the manager reports.
</I>&gt;<i> 
</I>&gt;<i> The cachemgr.cgi tool is deprecated fro a number of issues including
</I>&gt;<i> that style of embedding passwords in the URLs.
</I>&gt;<i> 
</I>&gt;<i> Francesco and I have created a tool that can be found at
</I>&gt;<i> &lt;<A HREF="https://github.com/yadij/cachemgr.js/blob/master/README.md">https://github.com/yadij/cachemgr.js/blob/master/README.md</A> 
</I>&gt;<i> &lt;<A HREF="https://github.com/yadij/cachemgr.js/blob/master/README.md">https://github.com/yadij/cachemgr.js/blob/master/README.md</A>&gt;&gt; for basic
</I>&gt;<i> access to the reports directly from Browser.
</I>&gt;<i> That tool uses HTTP authentication configured via the well-documented
</I>&gt;<i> proxy_auth ACLs and http_access for more secure access than the old URL
</I>&gt;<i> based mechanism (which still exists, just deprecated).
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Cheers
</I>&gt;<i> Amos
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ------------------------------
</I>&gt;<i> 
</I>&gt;<i> Subject: Digest Footer
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">https://lists.squid-cache.org/listinfo/squid-users</A> 
</I>&gt;<i> &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">https://lists.squid-cache.org/listinfo/squid-users</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ------------------------------
</I>&gt;<i> 
</I>&gt;<i> End of squid-users Digest, Vol 116, Issue 31
</I>&gt;<i> ********************************************
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> *//*
</I>&gt;<i> 
</I>&gt;<i> */
</I>&gt;<i> &lt;<A HREF="http://www.pbandt.bank">http://www.pbandt.bank</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> CONFIDENTIALITY NOTICE: The information contained in and attached to 
</I>&gt;<i> this email is intended only for the confidential use of the person or 
</I>&gt;<i> entity to which the email is addressed. This email and any attachments 
</I>&gt;<i> may contain privileged and confidential information. If you are not the 
</I>&gt;<i> intended recipient, you are notified that you received this email in 
</I>&gt;<i> error and that any reading, retention, use or distribution of this email 
</I>&gt;<i> and attachments is strictly prohibited. If you received this email in 
</I>&gt;<i> error, you are requested to immediately notify us by calling 
</I>&gt;<i> 888-728-3550 or by return email and immediately and permanently delete 
</I>&gt;<i> the email and any attachments. Thank you. /*//
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">https://lists.squid-cache.org/listinfo/squid-users</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="026687.html">[squid-users] log_referrer question
</A></li>
	<LI>Next message (by thread): <A HREF="026689.html">[squid-users] log_referrer question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26686">[ date ]</a>
              <a href="thread.html#26686">[ thread ]</a>
              <a href="subject.html#26686">[ subject ]</a>
              <a href="author.html#26686">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
