<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Adding an extra header to TLS connection
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Adding%20an%20extra%20header%20to%20TLS%20connection&In-Reply-To=%3C75EBE016-0A78-4593-99B2-2EF9B5EBB10F%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026690.html">
   <LINK REL="Next"  HREF="026692.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Adding an extra header to TLS connection</H1>
    <B>Jonathan Lee</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Adding%20an%20extra%20header%20to%20TLS%20connection&In-Reply-To=%3C75EBE016-0A78-4593-99B2-2EF9B5EBB10F%40gmail.com%3E"
       TITLE="[squid-users] Adding an extra header to TLS connection">jonathanlee571 at gmail.com
       </A><BR>
    <I>Thu May 23 16:59:25 UTC 2024</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="026690.html">[squid-users] Adding an extra header to TLS connection
</A></li>
        <LI>Next message (by thread): <A HREF="026692.html">[squid-users] Adding an extra header to TLS connection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26691">[ date ]</a>
              <a href="thread.html#26691">[ thread ]</a>
              <a href="subject.html#26691">[ subject ]</a>
              <a href="author.html#26691">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I do use ssl bump again it requires certificates installed on the devices, and or some and a splice for the others. You must also add a url list for items that must never be intercepted like banks etc. I agree it is not an easy task, it took me years to get it to work correctly for what I needed. When it does work it works beautifully, you can cache updates and reuse them, you can use clam AV on https traffic. It&#8217;s not for everyone it will make you a wizard level 1000 if you can get it going.
Sent from my iPhone

&gt;<i> On May 23, 2024, at 08:49, Alex Rousskov &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">rousskov at measurement-factory.com</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> &#65279;On 2024-05-22 03:49, Robin Wood wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> I'm trying to work out how to add an extra header to a TLS connection.
</I>&gt;<i> 
</I>&gt;<i> I assume that you want to add a header field to an HTTP request or response that is being transmitted inside a TLS connection between a TLS client (e.g., a user browser) and an HTTPS origin server.
</I>&gt;<i> 
</I>&gt;<i> Do you control the client that originates that TLS connection (or its OS/environment) or the origin server? If you do not, then what you want is impossible -- TLS encryption exists, in part, to prevent such traffic modifications.
</I>&gt;<i> 
</I>&gt;<i> If you control the client that originates that TLS connection (or its OS/environment), then you may be able to, in _some_ cases, add that header by configuring the client (or its OS/environment) to trust you as a Certificate Authority, minting your own X509 certificates, and configuring Squid to perform a &quot;man in the middle&quot; attack on client-server traffic, using your minted certificates. You can search for Squid SslBump to get more information about this feature, but the area is full of insurmountable difficulties and misleading advice. Avoid it if at all possible!
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> HTH,
</I>&gt;<i> 
</I>&gt;<i> Alex.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> I've found information on how to do it on what I think is the pre-3.5 release, but I can't find any useful information on doing it on the current version.
</I>&gt;&gt;<i> Could someone give me an example or point me at some documentation on how to do it.
</I>&gt;&gt;<i> Thanks
</I>&gt;&gt;<i> Robin
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> squid-users mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">https://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">https://lists.squid-cache.org/listinfo/squid-users</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="026690.html">[squid-users] Adding an extra header to TLS connection
</A></li>
	<LI>Next message (by thread): <A HREF="026692.html">[squid-users] Adding an extra header to TLS connection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26691">[ date ]</a>
              <a href="thread.html#26691">[ thread ]</a>
              <a href="subject.html#26691">[ subject ]</a>
              <a href="author.html#26691">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
