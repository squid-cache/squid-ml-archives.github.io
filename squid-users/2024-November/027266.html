<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] [SQUID] Some Web Page never complete download
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%5BSQUID%5D%20Some%20Web%20Page%20never%20complete%20download&In-Reply-To=%3C013901db3947%24c5d0fa70%245172ef50%24%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027265.html">
   <LINK REL="Next"  HREF="027267.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] [SQUID] Some Web Page never complete download</H1>
    <B>ngtech1ltd at gmail.com</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%5BSQUID%5D%20Some%20Web%20Page%20never%20complete%20download&In-Reply-To=%3C013901db3947%24c5d0fa70%245172ef50%24%40gmail.com%3E"
       TITLE="[squid-users] [SQUID] Some Web Page never complete download">ngtech1ltd at gmail.com
       </A><BR>
    <I>Sun Nov 17 23:23:54 UTC 2024</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="027265.html">[squid-users] [SQUID] Some Web Page never complete download
</A></li>
        <LI>Next message (by thread): <A HREF="027267.html">[squid-users] assertion failed: Controller.cc:930: &quot;EX&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27266">[ date ]</a>
              <a href="thread.html#27266">[ thread ]</a>
              <a href="subject.html#27266">[ subject ]</a>
              <a href="author.html#27266">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Great to hear all the details.
My general approach is to not intercept if possible.
In my Setup I am using squid only as an assisting software.
I wrote many tools to give squid features which are similar to other products like fortigate and checkpoint.
All the products in the market are using very basic inspections else then PaloAlto.
However, PaloAlto is an overkill for a tiny setup.
I like ufdbguard but I believe that there are other options which can be written in a much simpler way for my needs.
Ufdbguard is a great piece of software but I suggest you to use a DNSBL helper with a caching proxy for public DNS filtering services like cloudflare and others.
This way you don't need to maintain a local copy of the lists else then your custom to your choice.
I have used a set of unbound dns caching containers and a set of external helpers that are querying these caching dns services.
The overall effect is pretty good and the bandwidth worth it compared to the investment in maintaining lists.
Also you can use adguard as a container with specific lists compared to ufdbguard and a helper that runs queries against it.
The overall requirements are a bit higher but you can get clearer picture with statistics.

It would be very nice to try and sit on such a setup in a zoom meeting if it's of any interest for you to show me yours and I will show you mine.

Yours,
Eliezer

-----Original Message-----
From: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">slagauterie at hotmail.com</A> &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">slagauterie at hotmail.com</A>&gt; 
Sent: Saturday, November 16, 2024 8:08 PM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A>; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] [SQUID] Some Web Page never complete download

Hello Eliezer,

I use it as a standard forward proxy. I use a proxy.pac file deployed via DHCP and DNS WPAD entry. This makes it works easily with browsers.

10 years ago, I was doing both, but Squid was running on a DMZ server.
It was also acting as a firewall and other things.

Now, it is only forward. The main purpose is to prevent kids to access &quot;wrong site&quot; and remove ads.

Regarding C-ICAP, only squidclamav, connected to a dedicated Clamav container for virus checking.
Few years ago, ClamAV was in the same container, but for me it breaks a little bit the &quot;One service&quot; approach of conteiners.
I plan to also use DNSBL. But before, I need to fully understand how it can help or what it can improve.

Finally, I use ufdbguard instead of squidguard because it is still and well developed. It is also faster. Its main purpose is for URL checking. With it I mainly avoid:
- Trackers
- Ads
- Adults
- Violence, aggressive, weapon, etc.
- Warez

The next step will probably be to move ufdbguard out, in its dedicated container (One service approach).

At the begining, compiling was the main difficulty to produce Docker images. Then, I learn how to do multi-level image. So I can compile in one image, and use the result for other images, keeping the final image as small as possible, without all developper packages.

The main reasons why I currently don't use Squid to intercept are:
- My Docker server is a NAS. So not as powerfull as a real server. I tend to limit traffic.
- With the bump process and all the TLS approach, too many thing do not work out of the box for smartphone and their applications... Most of them are doing Certificate Pinning for example, which is broken by &quot;standard&quot; bumping and certificate mimic.

Note: I have not yet looked at all C-ICAP modules available. Feel free to recommend some.

Regards,
Slag

Le samedi 16 novembre 2024 &#224; 17:55 +0200, <A HREF="https://lists.squid-cache.org/listinfo/squid-users">ngtech1ltd at gmail.com</A> a &#233;crit :
&gt;<i> Hey Slag,
</I>&gt;<i> 
</I>&gt;<i> I want to understand the setup a bit more then what's written already.
</I>&gt;<i> The Squid instance you are using, is it a simple forward proxy or an 
</I>&gt;<i> interception one?
</I>&gt;<i> The C-ICAP is used with SquidClamAV? Are there any other C-ICAP 
</I>&gt;<i> functions you are using?
</I>&gt;<i> What are you using UfdbGuard for? 
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> Eliezer
</I>&gt;<i> 
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; On 
</I>&gt;<i> Behalf Of <A HREF="https://lists.squid-cache.org/listinfo/squid-users">slagauterie at hotmail.com</A>
</I>&gt;<i> Sent: Thursday, November 14, 2024 8:15 PM
</I>&gt;<i> To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> Subject: [squid-users] [SQUID] Some Web Page never complete download
</I>&gt;<i> 
</I>&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> This is my first mail to this list, my apologies if things are not 
</I>&gt;<i> correct.
</I>&gt;<i> 
</I>&gt;<i> I am using squid at home for more than 5 years. Recently I have 
</I>&gt;<i> updated my version from version 6.0 (early age) to the latest version 
</I>&gt;<i> 6.12.
</I>&gt;<i> 
</I>&gt;<i> I am compiling my own binaries and run it in a docker container.
</I>&gt;<i> 
</I>&gt;<i> Unfortunately, I am facing an issue with all Squid version above 6.8 
</I>&gt;<i> (included).
</I>&gt;<i> 
</I>&gt;<i> I have some web sites like www.google.com for which my browser never 
</I>&gt;<i> complete the download of the page. There is a pending request to URIs 
</I>&gt;<i> like <A HREF="https://www.google.com/xjs/_/js/k=xjs.s....">https://www.google.com/xjs/_/js/k=xjs.s....</A> and after long time
</I>&gt;<i> (timeout) Squid logs a TCP_MISS_ABORTED/200.
</I>&gt;<i> 
</I>&gt;<i> I have downgraded till version 6.7, and it works a older version, even 
</I>&gt;<i> if the same kind of request ends by a NONE_NONE_ABORTED/000. The 
</I>&gt;<i> request does not stay pending.
</I>&gt;<i> 
</I>&gt;<i> I can provide more information if it can help to investigate.
</I>&gt;<i> 
</I>&gt;<i> Configuration:
</I>&gt;<i> - Squid Version &gt;= 6.8 (Compiled, with bumping configuration and 
</I>&gt;<i> certificate mimic)
</I>&gt;<i> - C-ICAP Version 0.6.3 (Compiled)
</I>&gt;<i> - SquidClamAV Version 7.3 (Compiled)
</I>&gt;<i> - UfdbGuard Version 1.35.8 (Compiled)
</I>&gt;<i> 
</I>&gt;<i> Thank you for your help.
</I>&gt;<i> 
</I>&gt;<i> Regards,
</I>&gt;<i> Slag
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">https://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="027265.html">[squid-users] [SQUID] Some Web Page never complete download
</A></li>
	<LI>Next message (by thread): <A HREF="027267.html">[squid-users] assertion failed: Controller.cc:930: &quot;EX&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27266">[ date ]</a>
              <a href="thread.html#27266">[ thread ]</a>
              <a href="subject.html#27266">[ subject ]</a>
              <a href="author.html#27266">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
