<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] assertion failed: Controller.cc:930: &quot;EX&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20assertion%20failed%3A%20Controller.cc%3A930%3A%20%22EX%22&In-Reply-To=%3CCAJ8z1QXcTizbmc2Uon5XjxQG6mAXrfdUfvU9hhVsps0MomBANw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027266.html">
   <LINK REL="Next"  HREF="027268.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] assertion failed: Controller.cc:930: &quot;EX&quot;</H1>
    <B>Gaetano</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20assertion%20failed%3A%20Controller.cc%3A930%3A%20%22EX%22&In-Reply-To=%3CCAJ8z1QXcTizbmc2Uon5XjxQG6mAXrfdUfvU9hhVsps0MomBANw%40mail.gmail.com%3E"
       TITLE="[squid-users] assertion failed: Controller.cc:930: &quot;EX&quot;">gaedeb01 at gmail.com
       </A><BR>
    <I>Sun Nov 17 23:41:09 UTC 2024</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="027266.html">[squid-users] [SQUID] Some Web Page never complete download
</A></li>
        <LI>Next message (by thread): <A HREF="027268.html">[squid-users] assertion failed: Controller.cc:930: &quot;EX&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27267">[ date ]</a>
              <a href="thread.html#27267">[ thread ]</a>
              <a href="subject.html#27267">[ subject ]</a>
              <a href="author.html#27267">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

We are running three squid proxy 5.5, on three different VMs, same
number of CPUs (4), same memory, and same FS type (xfs) on Alma Linux
9.
All servers are staged with Ansible and they all have the same squid.conf.

workers 4
...
cache_dir ufs /var/spool/squid 512 16 256

One of those servers (always the same) crashes with this assert:
 kid1| assertion failed: Controller.cc:930: &quot;EX&quot;
kid can be from 1 to 4

everytime we enter a simple curl request to localhost proxy and proxy
to an OCSP responder.

Everything works fine when we remove workers as explained in an old
post about ufs and multithreading:
<A HREF="https://lists.squid-cache.org/pipermail/squid-users/2021-November/024285.html">https://lists.squid-cache.org/pipermail/squid-users/2021-November/024285.html</A>

However, why don't the other two proxies suffer from the same issue?

Removing  /var/spool/squid/* (+ squid -z) makes things work for a
little while, then again Empty response from the server (=&gt; assertion
failed: Controller.cc:930: &quot;EX&quot;).
So somehow it seems related to the cache and/or the response.

Any ideas that could help to understand the problem?

Thank you!

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="027266.html">[squid-users] [SQUID] Some Web Page never complete download
</A></li>
	<LI>Next message (by thread): <A HREF="027268.html">[squid-users] assertion failed: Controller.cc:930: &quot;EX&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27267">[ date ]</a>
              <a href="thread.html#27267">[ thread ]</a>
              <a href="subject.html#27267">[ subject ]</a>
              <a href="author.html#27267">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
