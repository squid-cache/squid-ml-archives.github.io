<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] ACL dstdomain and use of -n
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20ACL%20dstdomain%20and%20use%20of%20-n&In-Reply-To=%3Cc78a208f-bc2b-4dee-81ee-88551d05fab6%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027284.html">
   <LINK REL="Next"  HREF="027286.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] ACL dstdomain and use of -n</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20ACL%20dstdomain%20and%20use%20of%20-n&In-Reply-To=%3Cc78a208f-bc2b-4dee-81ee-88551d05fab6%40measurement-factory.com%3E"
       TITLE="[squid-users] ACL dstdomain and use of -n">rousskov at measurement-factory.com
       </A><BR>
    <I>Tue Nov 26 14:05:07 UTC 2024</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="027284.html">[squid-users] ACL dstdomain and use of -n
</A></li>
        <LI>Next message (by thread): <A HREF="027286.html">[squid-users] Time stamp shows off by 8 hours
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27285">[ date ]</a>
              <a href="thread.html#27285">[ thread ]</a>
              <a href="subject.html#27285">[ subject ]</a>
              <a href="author.html#27285">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2024-11-26 00:53, Jonathan Lee wrote:

   -n Disable lookups and address type conversions.  If lookup or
      conversion is required because the parameter type (IP or
      domain name) does not match the message address type (domain
      name or IP), then the ACL would immediately declare a mismatch
      without any warnings or lookups.

&gt;<i> For acls and use of -n is this considered faster over non use of the
</I>&gt;<i> flag?
</I>
When input address does not require a lookup (e.g., because the 
information is currently available in IP or DNS cache), the matching 
speed is the same with or without the -n flag.

In other cases, not doing a lookup is naturally faster than doing it, 
but not doing a lookup may change the match/mismatch outcome, so 
comparing speeds can be misleading. In these cases, the question is kind 
of similar to asking &quot;What is faster, aspirin or guillotine?&quot;


&gt;<i> What would be better for a system that is using its own DNS?
</I>
The answer depends on many factors unknown to me, including the cost of 
incorrect (mis)matches and the cost of waiting for DNS lookups. If you 
are not sure about tradeoffs in your environment, my recommendation is 
to avoid -n because -n may change match/mismatch outcome.


&gt;<i> When would we use -n versus when would we not?
</I>
We use -n when Squid should not lookup addresses. For example, when we 
want to match transactions targeting domain name X but do not want to 
match transactions targeting IP address Y that happens to resolve to 
domain name X when using a reverse DNS lookup.


&gt;<i> Also with use of caching updates would it be better to use -n ?
</I>
I assume you are asking about caching MS Windows updates. I do not know 
the answer to that question, but suspect that the question itself is 
missing essential details to allow for a meaningful answer. If the above 
discussion does not let you answer this question, consider asking a more 
specific question: Name the directive and the ACL while describing what 
you are trying to optimize (i.e. defining &quot;better&quot;).


HTH,

Alex.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="027284.html">[squid-users] ACL dstdomain and use of -n
</A></li>
	<LI>Next message (by thread): <A HREF="027286.html">[squid-users] Time stamp shows off by 8 hours
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27285">[ date ]</a>
              <a href="thread.html#27285">[ thread ]</a>
              <a href="subject.html#27285">[ subject ]</a>
              <a href="author.html#27285">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
