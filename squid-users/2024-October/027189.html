<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Unable to access a device over port 4434
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Unable%20to%20access%20a%20device%20over%20port%204434&In-Reply-To=%3Cf650f52c-4bab-4ef0-93c0-04139efa6f79%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027185.html">
   <LINK REL="Next"  HREF="027199.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Unable to access a device over port 4434</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Unable%20to%20access%20a%20device%20over%20port%204434&In-Reply-To=%3Cf650f52c-4bab-4ef0-93c0-04139efa6f79%40treenet.co.nz%3E"
       TITLE="[squid-users] Unable to access a device over port 4434">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Oct 11 01:25:21 UTC 2024</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="027185.html">[squid-users] Unable to access a device over port 4434
</A></li>
        <LI>Next message (by thread): <A HREF="027199.html">[squid-users] Unable to access a device over port 4434
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27189">[ date ]</a>
              <a href="thread.html#27189">[ thread ]</a>
              <a href="subject.html#27189">[ subject ]</a>
              <a href="author.html#27189">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 11/10/24 07:21, Piana, Josh wrote:
&gt;<i> Hello Matus,
</I>&gt;<i> 
</I>&gt;<i> I apologize, I was unable to read any of the links that were responded with because our environment appended the &quot; eur02.safelinks.protection.outlook.com...&quot; Outlook protection. Did you see that as well on your side? When I did click the links to view them is just stated as failed.
</I>&gt;<i> 
</I>&gt;<i> What I gather from what you said was that, it's not likely Squid is the issue. Even when we bypass Squid it does work. FWIW, it's possible that there is some other network problem coming into play here on our side. Though I did try to verify there's now blockages from the firewall, the networks, the traffic, etc.
</I>

FTR; the critical detail in what Matus wrote was that the &quot;wget&quot; (or 
curl if you prefer) connection test **must** be performed
  A) on the Squid machine,
  B) using the same low-privileges user account that Squid runs with,
  D) to the same server IP address Squid is trying to contact.

That ensures the TCP connection privileges are as close to identical to 
what Squid is doing.

Running it from another machine and/or user account may encounter 
different firewall or routing behaviour that hides the real issue.

If that test provides a successful TCP connection, *and* HTTP response 
message the next step is to


Also, FYI; your custom change to the timestamp has somehow lost the 
&quot;duration&quot; value, so I/we cannot tell if this was a probable TCP FIN/RST 
(hint of firewall problem) or a SYN+ACK timeout (hint of routing problem).


HTH
Amos




&gt;<i> 
</I>&gt;<i> I suppose from here I'll try to troubleshoot other things.
</I>&gt;<i> 
</I>&gt;<i> Alternatively, do you think I should try to create an ACL which bypasses any filters or rules to that network?
</I>&gt;<i> 
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; On Behalf Of Matus UHLAR - fantomas
</I>&gt;<i> Sent: Thursday, October 10, 2024 3:21 AM
</I>&gt;<i> To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> Subject: Re: [squid-users] Unable to access a device over port 4434
</I>&gt;<i> 
</I>&gt;<i> Caution: This email originated from outside of Hexcel. Do not click links or open attachments unless you recognize the sender and know the content is safe.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On 09.10.24 19:59, Piana, Josh wrote:
</I>&gt;&gt;<i> I'm running into an issue wherein, when using Squid proxy, I'm unable to get to one of our management devices from port 4434.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've already verified that this device is not blocking access from the proxy directly, and should be allowed to get to the access page.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -          When reviewing the access logs, I can see that we're running into a generic 503 error
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -          When browsing to this page, it will attempt to load for about 30 seconds, and then fail
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -          The webpage response is a generic &quot;The system returned: (110) Connection timed out&quot;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -          When we forgo the proxy, we can access it without an issue
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> This device is located on a 172.0.0.0/8 internal network.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -          Other devices which do NOT use this port are accessible
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -          Changing the access port is not an option (not up to me)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Access Log entry:
</I>&gt;&gt;<i> 09/Oct/2024:15:54:21 -0400.758 10.46.49.190 TCP_MISS/503 4448 GET
</I>&gt;&gt;<i> <A HREF="http://172.0.0.27/">http://172.0.0.27/</A>
</I>&gt;&gt;<i> .46.253%3A4434%2F&amp;data=05%7C02%7Cjosh.piana%40hexcel.com%7Cad6b9a6df5da
</I>&gt;&gt;<i> 44a2b73508dce8fc1971%7C4248050df19546d5ac9c0c7c52b04cae%7C0%7C0%7C63864
</I>&gt;&gt;<i> 1416681623895%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luM
</I>&gt;&gt;<i> zIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C0%7C%7C%7C&amp;sdata=G%2FrqNK0o%2Bdk0ia
</I>&gt;&gt;<i> zrnMhbyTvL0RmZAK27lulhMBhPMDU%3D&amp;reserved=0 jpiana \
</I>&gt;&gt;<i> HIER_DIRECT/172.27.46.253 text/html ERR_CONNECT_FAIL/WITH_SERVER
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I guess the correct URL is: <A HREF="http://172.27.46.253:4434/jpiana">http://172.27.46.253:4434/jpiana</A>
</I>&gt;<i> 
</I>&gt;<i> have you tried running following directly from the squid machine?
</I>&gt;<i> 
</I>&gt;<i> wget -Y off <A HREF="http://172.27.46.253:4434/jpiana">http://172.27.46.253:4434/jpiana</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Because ERR_CONNECT_FAIL/WITH_SERVER and &quot;Connection timed out&quot; both say that the squid was unable to open connection to server.
</I>&gt;<i> 
</I>&gt;<i> which is not a squid issue but network connection issue.
</I>&gt;<i> --
</I>&gt;<i> Matus UHLAR - fantomas, <A HREF="https://lists.squid-cache.org/listinfo/squid-users">uhlar at fantomas.sk</A> ; <A HREF="http://www.fantomas.sk/">http://www.fantomas.sk/</A>
</I>&gt;<i> Warning: I wish NOT to receive e-mail advertising to this address.
</I>&gt;<i> Varovanie: na tuto adresu chcem NEDOSTAVAT akukolvek reklamnu postu.
</I>&gt;<i> LSD will make your ECS screen display 16.7 million colors _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">https://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">https://lists.squid-cache.org/listinfo/squid-users</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="027185.html">[squid-users] Unable to access a device over port 4434
</A></li>
	<LI>Next message (by thread): <A HREF="027199.html">[squid-users] Unable to access a device over port 4434
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27189">[ date ]</a>
              <a href="thread.html#27189">[ thread ]</a>
              <a href="subject.html#27189">[ subject ]</a>
              <a href="author.html#27189">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
