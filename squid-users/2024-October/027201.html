<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Unable to access a device over port 4434
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Unable%20to%20access%20a%20device%20over%20port%204434&In-Reply-To=%3Cb4d6d64d33554466853576912b371437%40hexcel.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027200.html">
   <LINK REL="Next"  HREF="027202.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Unable to access a device over port 4434</H1>
    <B>Piana, Josh</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Unable%20to%20access%20a%20device%20over%20port%204434&In-Reply-To=%3Cb4d6d64d33554466853576912b371437%40hexcel.com%3E"
       TITLE="[squid-users] Unable to access a device over port 4434">Josh.Piana at hexcel.com
       </A><BR>
    <I>Wed Oct 16 13:43:06 UTC 2024</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="027200.html">[squid-users] Unable to access a device over port 4434
</A></li>
        <LI>Next message (by thread): <A HREF="027202.html">[squid-users] Unable to access a device over port 4434
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27201">[ date ]</a>
              <a href="thread.html#27201">[ thread ]</a>
              <a href="subject.html#27201">[ subject ]</a>
              <a href="author.html#27201">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Matus, 

I have the firewalld service disabled. I'm running RHEL 9.4, if that helps at all. 

Would a PAC file make a difference in the connection to the firewall? When comparing our old squidbox to the one I'm setting up, that's one of the outliers. 

-----Original Message-----
From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; On Behalf Of Matus UHLAR - fantomas
Sent: Wednesday, October 16, 2024 7:56 AM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Unable to access a device over port 4434

Caution: This email originated from outside of Hexcel. Do not click links or open attachments unless you recognize the sender and know the content is safe.


On 15.10.24 20:39, Piana, Josh wrote:
&gt;<i>Thank you for getting back to me and clarifying.
</I>&gt;<i>
</I>&gt;<i>I ran this command:
</I>&gt;<i>#wget -Y off 172.27.46.253
</I>&gt;<i>
</I>&gt;<i>Response:
</I>&gt;<i>--2024-10-15 16:36:15--  
</I>&gt;<i><A HREF="http://172.0.0.27/">http://172.0.0.27/</A>
</I>&gt;<i>.46.253%2F&amp;data=05%7C02%7Cjosh.piana%40hexcel.com%7Cbe640e58abb84d3ec7f
</I>&gt;<i>708dcedd977d5%7C4248050df19546d5ac9c0c7c52b04cae%7C0%7C0%7C638646765494
</I>&gt;<i>659492%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJB
</I>&gt;<i>TiI6Ik1haWwiLCJXVCI6Mn0%3D%7C0%7C%7C%7C&amp;sdata=sCSTJ4aE8Rl8UXz64cq6m%2Fl
</I>&gt;<i>1h0YgtzDXjRrTJj3nmZk%3D&amp;reserved=0
</I>&gt;<i>Connecting to 172.27.46.253:80... connected.
</I>&gt;<i>HTTP request sent, awaiting response... 301 Moved Permanently
</I>&gt;<i>Location: 
</I>&gt;<i><A HREF="https://172.0.0.2/">https://172.0.0.2/</A>
</I>&gt;<i>7.46.253%2F&amp;data=05%7C02%7Cjosh.piana%40hexcel.com%7Cbe640e58abb84d3ec7
</I>&gt;<i>f708dcedd977d5%7C4248050df19546d5ac9c0c7c52b04cae%7C0%7C0%7C63864676549
</I>&gt;<i>4815710%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJ
</I>&gt;<i>BTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C0%7C%7C%7C&amp;sdata=WnX0ke65H2V2wvpUUClPa86W
</I>&gt;<i>VcspT6kL3oLDWE4cGHk%3D&amp;reserved=0 [following]
</I>&gt;<i>--2024-10-15 16:36:15--  
</I>&gt;<i><A HREF="https://172.0.0.2/">https://172.0.0.2/</A>
</I>&gt;<i>7.46.253%2F&amp;data=05%7C02%7Cjosh.piana%40hexcel.com%7Cbe640e58abb84d3ec7
</I>&gt;<i>f708dcedd977d5%7C4248050df19546d5ac9c0c7c52b04cae%7C0%7C0%7C63864676549
</I>&gt;<i>4815710%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJ
</I>&gt;<i>BTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C0%7C%7C%7C&amp;sdata=WnX0ke65H2V2wvpUUClPa86W
</I>&gt;<i>VcspT6kL3oLDWE4cGHk%3D&amp;reserved=0
</I>&gt;<i>Connecting to 172.27.46.253:443... connected.
</I>&gt;<i>ERROR: The certificate of '172.27.46.253' is not trusted.
</I>&gt;<i>ERROR: The certificate of '172.27.46.253' doesn't have a known issuer.
</I>&gt;<i>The certificate's owner does not match hostname '172.27.46.253'
</I>&gt;<i>
</I>&gt;<i>When I tried using port 4434, the wget command just times out.
</I>
this means that your squid machine is apparently blocked from connecting to remote host on port 4434.

Either that host blocked connections from your squid machine, or your squid machine (or any device on your network) has firewall rule that prevent this.

This it not a squid error.

Do you have local firewall on your squid machine?


&gt;<i>So with the errors given, would that stop us from connecting to it?
</I>&gt;<i> Typically with sites with trust issues or certification issues, you 
</I>&gt;<i>can  still bypass it.  We'd like to do the same here if applicable.
</I>
&gt;<i>On 11/10/24 07:21, Piana, Josh wrote:
</I>&gt;&gt;<i> I apologize, I was unable to read any of the links that were 
</I>&gt;&gt;<i> responded with because our environment appended the &quot;
</I>&gt;&gt;<i> eur02.safelinks.protection.outlook.com...&quot; Outlook protection.  Did 
</I>&gt;&gt;<i> you see that as well on your side?  When I did click the links to 
</I>&gt;&gt;<i> view them is just stated as failed.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> What I gather from what you said was that, it's not likely Squid is 
</I>&gt;&gt;<i> the issue.  Even when we bypass Squid it does work.  FWIW, it's 
</I>&gt;&gt;<i> possible that there is some other network problem coming into play here on our side.
</I>&gt;&gt;<i> Though I did try to verify there's now blockages from the firewall, 
</I>&gt;&gt;<i> the networks, the traffic, etc.
</I>

&gt;<i>FTR; the critical detail in what Matus wrote was that the &quot;wget&quot; (or 
</I>&gt;<i>curl if you prefer) connection test **must** be performed
</I>&gt;<i>  A) on the Squid machine,
</I>&gt;<i>  B) using the same low-privileges user account that Squid runs with,
</I>&gt;<i>  D) to the same server IP address Squid is trying to contact.
</I>&gt;<i>
</I>&gt;<i>That ensures the TCP connection privileges are as close to identical to what Squid is doing.
</I>&gt;<i>
</I>&gt;<i>Running it from another machine and/or user account may encounter 
</I>&gt;<i>different  firewall or routing behaviour that hides the real issue.
</I>&gt;<i>
</I>&gt;<i>If that test provides a successful TCP connection, *and* HTTP response 
</I>&gt;<i>message the next step is to
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Also, FYI; your custom change to the timestamp has somehow lost the  
</I>&gt;<i>&quot;duration&quot; value, so I/we cannot tell if this was a probable TCP 
</I>&gt;<i>FIN/RST  (hint of firewall problem) or a SYN+ACK timeout (hint of routing problem).
</I>
&gt;&gt;<i> I suppose from here I'll try to troubleshoot other things.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Alternatively, do you think I should try to create an ACL which bypasses any filters or rules to that network?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -----Original Message-----
</I>&gt;&gt;<i> From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; On 
</I>&gt;&gt;<i> Behalf Of Matus UHLAR - fantomas
</I>&gt;&gt;<i> Sent: Thursday, October 10, 2024 3:21 AM
</I>&gt;&gt;<i> To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;<i> Subject: Re: [squid-users] Unable to access a device over port 4434
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Caution: This email originated from outside of Hexcel. Do not click links or open attachments unless you recognize the sender and know the content is safe.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 09.10.24 19:59, Piana, Josh wrote:
</I>&gt;&gt;&gt;<i> I'm running into an issue wherein, when using Squid proxy, I'm unable to get to one of our management devices from port 4434.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I've already verified that this device is not blocking access from the proxy directly, and should be allowed to get to the access page.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> -          When reviewing the access logs, I can see that we're running into a generic 503 error
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> -          When browsing to this page, it will attempt to load for about 30 seconds, and then fail
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> -          The webpage response is a generic &quot;The system returned: (110) Connection timed out&quot;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> -          When we forgo the proxy, we can access it without an issue
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> This device is located on a 172.0.0.0/8 internal network.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> -          Other devices which do NOT use this port are accessible
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> -          Changing the access port is not an option (not up to me)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Access Log entry:
</I>&gt;&gt;&gt;<i> 09/Oct/2024:15:54:21 -0400.758 10.46.49.190 TCP_MISS/503 4448 GET 
</I>&gt;&gt;&gt;<i> <A HREF="http://0.0.0.172/.">http://0.0.0.172/.</A>
</I>&gt;&gt;&gt;<i> 0.0.27%2F&amp;data=05%7C02%7Cjosh.piana%40hexcel.com%7C1b118e55c63c42ed3
</I>&gt;&gt;&gt;<i> d
</I>&gt;&gt;&gt;<i> e908dce99396c5%7C4248050df19546d5ac9c0c7c52b04cae%7C0%7C0%7C63864206
</I>&gt;&gt;&gt;<i> 7 
</I>&gt;&gt;&gt;<i> 356048064%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMz
</I>&gt;&gt;&gt;<i> I 
</I>&gt;&gt;&gt;<i> iLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C0%7C%7C%7C&amp;sdata=JIO8AKoz7QPe1%2BD
</I>&gt;&gt;&gt;<i> G
</I>&gt;&gt;&gt;<i> Mza7mltOnSfvf2eHAEfubJx%2FLaY%3D&amp;reserved=0
</I>&gt;&gt;&gt;<i> .46.253%3A4434%2F&amp;data=05%7C02%7Cjosh.piana%40hexcel.com%7Cad6b9a6df
</I>&gt;&gt;&gt;<i> 5
</I>&gt;&gt;&gt;<i> da
</I>&gt;&gt;&gt;<i> 44a2b73508dce8fc1971%7C4248050df19546d5ac9c0c7c52b04cae%7C0%7C0%7C63
</I>&gt;&gt;&gt;<i> 8
</I>&gt;&gt;&gt;<i> 64
</I>&gt;&gt;&gt;<i> 1416681623895%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2
</I>&gt;&gt;&gt;<i> l
</I>&gt;&gt;&gt;<i> uM
</I>&gt;&gt;&gt;<i> zIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C0%7C%7C%7C&amp;sdata=G%2FrqNK0o%2Bdk
</I>&gt;&gt;&gt;<i> 0
</I>&gt;&gt;&gt;<i> ia
</I>&gt;&gt;&gt;<i> zrnMhbyTvL0RmZAK27lulhMBhPMDU%3D&amp;reserved=0 jpiana \
</I>&gt;&gt;&gt;<i> HIER_DIRECT/172.27.46.253 text/html ERR_CONNECT_FAIL/WITH_SERVER
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I guess the correct URL is:
</I>&gt;&gt;<i> <A HREF="http://0.0.0.172/.">http://0.0.0.172/.</A>
</I>&gt;&gt;<i> 0.0.2%2F&amp;data=05%7C02%7Cjosh.piana%40hexcel.com%7Cbe640e58abb84d3ec7f
</I>&gt;&gt;<i> 708dcedd977d5%7C4248050df19546d5ac9c0c7c52b04cae%7C0%7C0%7C6386467654
</I>&gt;&gt;<i> 94971970%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIi
</I>&gt;&gt;<i> LCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C0%7C%7C%7C&amp;sdata=VCIibDWPw4CffgvrVmn
</I>&gt;&gt;<i> JBf3lzGIYjpRxRq7%2Bbai4dCM%3D&amp;reserved=0
</I>&gt;&gt;<i> 7.46.253%3A4434%2Fjpiana&amp;data=05%7C02%7Cjosh.piana%40hexcel.com%7C1b1
</I>&gt;&gt;<i> 1 
</I>&gt;&gt;<i> 8e55c63c42ed3de908dce99396c5%7C4248050df19546d5ac9c0c7c52b04cae%7C0%7
</I>&gt;&gt;<i> C 
</I>&gt;&gt;<i> 0%7C638642067356204330%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLC
</I>&gt;&gt;<i> J 
</I>&gt;&gt;<i> QIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C0%7C%7C%7C&amp;sdata=nRShvv
</I>&gt;&gt;<i> J
</I>&gt;&gt;<i> uN7mqiILEdnHF6POw6I9kOZh0fX9QiO87bXY%3D&amp;reserved=0
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> have you tried running following directly from the squid machine?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> wget -Y off
</I>&gt;&gt;<i> <A HREF="http://0.0.0.172/.">http://0.0.0.172/.</A>
</I>&gt;&gt;<i> 0.0.2%2F&amp;data=05%7C02%7Cjosh.piana%40hexcel.com%7Cbe640e58abb84d3ec7f
</I>&gt;&gt;<i> 708dcedd977d5%7C4248050df19546d5ac9c0c7c52b04cae%7C0%7C0%7C6386467654
</I>&gt;&gt;<i> 94971970%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIi
</I>&gt;&gt;<i> LCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C0%7C%7C%7C&amp;sdata=VCIibDWPw4CffgvrVmn
</I>&gt;&gt;<i> JBf3lzGIYjpRxRq7%2Bbai4dCM%3D&amp;reserved=0
</I>&gt;&gt;<i> 7.46.253%3A4434%2Fjpiana&amp;data=05%7C02%7Cjosh.piana%40hexcel.com%7C1b1
</I>&gt;&gt;<i> 1 
</I>&gt;&gt;<i> 8e55c63c42ed3de908dce99396c5%7C4248050df19546d5ac9c0c7c52b04cae%7C0%7
</I>&gt;&gt;<i> C 
</I>&gt;&gt;<i> 0%7C638642067356204330%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLC
</I>&gt;&gt;<i> J 
</I>&gt;&gt;<i> QIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C0%7C%7C%7C&amp;sdata=nRShvv
</I>&gt;&gt;<i> J
</I>&gt;&gt;<i> uN7mqiILEdnHF6POw6I9kOZh0fX9QiO87bXY%3D&amp;reserved=0
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Because ERR_CONNECT_FAIL/WITH_SERVER and &quot;Connection timed out&quot; both say that the squid was unable to open connection to server.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> which is not a squid issue but network connection issue.
</I>
--
Matus UHLAR - fantomas, <A HREF="https://lists.squid-cache.org/listinfo/squid-users">uhlar at fantomas.sk</A> ; <A HREF="http://www.fantomas.sk/">http://www.fantomas.sk/</A>
Warning: I wish NOT to receive e-mail advertising to this address.
Varovanie: na tuto adresu chcem NEDOSTAVAT akukolvek reklamnu postu.
&quot;Two words: Windows survives.&quot; - Craig Mundie, Microsoft senior strategist &quot;So does syphillis. Good thing we have penicillin.&quot; - Matthew Alton _______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">https://lists.squid-cache.org/listinfo/squid-users</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="027200.html">[squid-users] Unable to access a device over port 4434
</A></li>
	<LI>Next message (by thread): <A HREF="027202.html">[squid-users] Unable to access a device over port 4434
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27201">[ date ]</a>
              <a href="thread.html#27201">[ thread ]</a>
              <a href="subject.html#27201">[ subject ]</a>
              <a href="author.html#27201">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
