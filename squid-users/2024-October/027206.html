<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Unable to access a device over port 4434
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Unable%20to%20access%20a%20device%20over%20port%204434&In-Reply-To=%3C62587d0c-60a0-4ef4-a6ae-8b91f28665fe%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027207.html">
   <LINK REL="Next"  HREF="027208.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Unable to access a device over port 4434</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Unable%20to%20access%20a%20device%20over%20port%204434&In-Reply-To=%3C62587d0c-60a0-4ef4-a6ae-8b91f28665fe%40treenet.co.nz%3E"
       TITLE="[squid-users] Unable to access a device over port 4434">squid3 at treenet.co.nz
       </A><BR>
    <I>Thu Oct 17 03:45:28 UTC 2024</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="027207.html">[squid-users] Unable to access a device over port 4434
</A></li>
        <LI>Next message (by thread): <A HREF="027208.html">[squid-users] Unable to access a device over port 4434
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27206">[ date ]</a>
              <a href="thread.html#27206">[ thread ]</a>
              <a href="subject.html#27206">[ subject ]</a>
              <a href="author.html#27206">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 16/10/24 09:39, Piana, Josh wrote:
&gt;<i> Amos,
</I>&gt;<i> 
</I>&gt;<i> Thank you for getting back to me and clarifying.
</I>&gt;<i> 
</I>&gt;<i> I ran this command:
</I>&gt;<i> #wget -Y off 172.27.46.253
</I>&gt;<i> 
</I>&gt;<i> Response:
</I>&gt;<i> --2024-10-15 16:36:15--  <A HREF="http://172.27.46.253/">http://172.27.46.253/</A>
</I>&gt;<i> Connecting to 172.27.46.253:80... connected.
</I>&gt;<i> HTTP request sent, awaiting response... 301 Moved Permanently
</I>&gt;<i> Location: <A HREF="https://172.27.46.253/">https://172.27.46.253/</A> [following]
</I>&gt;<i> --2024-10-15 16:36:15--  <A HREF="https://172.27.46.253/">https://172.27.46.253/</A>
</I>&gt;<i> Connecting to 172.27.46.253:443... connected.
</I>
The TCP here is fully working, on both ports.

The followup hang you mentioned was likely due to a mistake in your 
followup test (that extra '4' typo?).


&gt;<i> ERROR: The certificate of '172.27.46.253' is not trusted.
</I>&gt;<i> ERROR: The certificate of '172.27.46.253' doesn't have a known issuer.
</I>&gt;<i> The certificate's owner does not match hostname '172.27.46.253'
</I>&gt;<i> 
</I>
There you go. Two problems to resolve.

First Problem;  unknown &quot;Issuer&quot; (aka root or intermediate CA certificate).

Please use this to find out what details need to be retrieved:
   wget -v --no-proxy <A HREF="https://172.27.46.253/">https://172.27.46.253/</A>


Find the public CA certificate for the missing &quot;Issuer&quot;.

Further tests with wget should use:
   wget -v --no-proxy \
     --ca-certificate=/path/to/server.ca <A HREF="https://172.27.46.253/">https://172.27.46.253/</A>

When wget test shows trust of the server certificate working, Squid 
should be configured to use it for checking too:
    tsl_outgoing_options ca=/path/to/server.ca
or
   cache_peer 172.27.46.253 443 0 originserver tls-ca=/path/to/server.ca


Second Problem;  mismatch between &quot;172.27.46.253&quot; and &quot;Owner&quot; (or 
maybe&quot;SubjectAltName&quot; fields).

The wget output when troubleshooting for the first problem should give 
more hints about what this means.



&gt;<i> So with the errors given, would that stop us from connecting to it? Typically with sites with trust issues or certification issues, you can still bypass it. We'd like to do the same here if applicable.
</I>
One could, but your wget command does not.


FYI, It is also a bad idea to bypass unless you really have to. 
Especially bad to bypass unknown amount of things when trying to 
identify reasons for failure.


Amos


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="027207.html">[squid-users] Unable to access a device over port 4434
</A></li>
	<LI>Next message (by thread): <A HREF="027208.html">[squid-users] Unable to access a device over port 4434
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27206">[ date ]</a>
              <a href="thread.html#27206">[ thread ]</a>
              <a href="subject.html#27206">[ subject ]</a>
              <a href="author.html#27206">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
