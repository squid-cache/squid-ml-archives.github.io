<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Unable to access a device over port 4434
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Unable%20to%20access%20a%20device%20over%20port%204434&In-Reply-To=%3C21116e3c66fe45678dcd8960eb0456fc%40hexcel.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027210.html">
   <LINK REL="Next"  HREF="027214.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Unable to access a device over port 4434</H1>
    <B>Piana, Josh</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Unable%20to%20access%20a%20device%20over%20port%204434&In-Reply-To=%3C21116e3c66fe45678dcd8960eb0456fc%40hexcel.com%3E"
       TITLE="[squid-users] Unable to access a device over port 4434">Josh.Piana at hexcel.com
       </A><BR>
    <I>Fri Oct 18 19:52:45 UTC 2024</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="027210.html">[squid-users] Unable to access a device over port 4434
</A></li>
        <LI>Next message (by thread): <A HREF="027214.html">[squid-users] Unable to access a device over port 4434
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27211">[ date ]</a>
              <a href="thread.html#27211">[ thread ]</a>
              <a href="subject.html#27211">[ subject ]</a>
              <a href="author.html#27211">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey guys, 

Thank you for the feedback in regards to the PAC file and the &quot;cache_peer&quot; directive. 

It looks like we're moving forward with the PAC file. So I need to introduce Apache onto my squidbox now. 

On a separate note, what would cause me to need to authenticate everytime I open a new browser? My credentials are supposed to last a week. 

Here's my authentication config: 

#####
auth_param basic program /usr/lib64/squid/basic_pam_auth
auth_param negotiate children 10
auth_param negotiate keep_alive on
auth_param basic credentialsttl 1 week
acl kerb-auth proxy_auth REQUIRED
#####

-----Original Message-----
From: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; On Behalf Of Matus UHLAR - fantomas
Sent: Friday, October 18, 2024 3:34 AM
To: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
Subject: Re: [squid-users] Unable to access a device over port 4434

Caution: This email originated from outside of Hexcel. Do not click links or open attachments unless you recognize the sender and know the content is safe.


On 17.10.24 20:40, Piana, Josh wrote:
&gt;<i> To clarify on the test, port 4434 is the port that was assigned to get 
</I>&gt;<i> access to that device, one of our firewalls.
</I>&gt;<i>
</I>&gt;<i> I looked at the old Squid config that we have, and it seems this was 
</I>&gt;<i> setup in a way that internal networks were not being passed through the proxy.
</I>&gt;<i> This was done be either an ACL, or the PAC file, is what we're thinking.
</I>
The exemption has to be done through the PAC file, because once the browser's request reaches the proxy, it's impossible to go back and tell browser to go direct.

&gt;<i> The issue is, we don't exactly know how to implement the PAC file on 
</I>&gt;<i> our new Squid box.
</I>
the PAC file has to be provided ideally via HTTP, I'm not sure whether squid has that functionality.

I guess a HTTP server was running on your old server, providing the PAC file.

&gt;<i> With that said, I agree with your statement that its difficult to 
</I>&gt;<i> troubleshoot an issue as opposed to go around it.  Unfortunately, 
</I>&gt;<i> that's how it was done before and that's the direction our current 
</I>&gt;<i> management is going again.  So I need to reconfigure the squid.conf 
</I>&gt;<i> file to ignore internal traffic, networks, and IP's, and only web 
</I>&gt;<i> filter and proxy internet connections.  We can't just copy the old 
</I>&gt;<i> config because it doesn't carry over 1:1, and its an old version from 2.5.
</I>
Once more, you can't ignore squid to be ignored by browsers, because squid can only do anything when it's accessed by browsers, when it's already too late.  Either browsers must go around the proxy (PAC or WPAD), or the proxy must be allowed to reach destination server.

Install apache server to the machine and configure it to serve the PAC&gt;

On 18.10.24 18:59, Amos Jeffries wrote:
&gt;<i>So what you need with Squid is a cache_peer, relaying relevant traffic 
</I>&gt;<i>to that device.
</I>
Amos, are you sure this can work in the case described?

&gt;<i>  # details of how Squid should connect to the device  cache_peer 
</I>&gt;<i> 172.27.46.253 parent 4434 0 originserver \
</I>&gt;<i>     tls-cert=/path/to/server.ca
</I>&gt;<i>
</I>&gt;<i>  # which traffic to relay there
</I>&gt;<i>  acl foo dstdomain foo.example.com
</I>&gt;<i>  cache_peer_access 172.27.46.253 allow foo  never_direct allow foo
</I>&gt;<i>
</I>&gt;<i>  # permission for clients to make requests that reach that device  
</I>&gt;<i> http_access allow localnet foo
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Add more ACL conditions as needed to restrict the http_access line to 
</I>&gt;<i>the appropriate clients.
</I>

--
Matus UHLAR - fantomas, <A HREF="https://lists.squid-cache.org/listinfo/squid-users">uhlar at fantomas.sk</A> ; <A HREF="http://www.fantomas.sk/">http://www.fantomas.sk/</A>
Warning: I wish NOT to receive e-mail advertising to this address.
Varovanie: na tuto adresu chcem NEDOSTAVAT akukolvek reklamnu postu.
How does cat play with mouse? cat /dev/mouse _______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">https://lists.squid-cache.org/listinfo/squid-users</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="027210.html">[squid-users] Unable to access a device over port 4434
</A></li>
	<LI>Next message (by thread): <A HREF="027214.html">[squid-users] Unable to access a device over port 4434
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27211">[ date ]</a>
              <a href="thread.html#27211">[ thread ]</a>
              <a href="subject.html#27211">[ subject ]</a>
              <a href="author.html#27211">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
