<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] proxy_auth_regex
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20proxy_auth_regex&In-Reply-To=%3Cd450806e84f1439cb82e0fd071e6ec99%40hexcel.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027217.html">
   <LINK REL="Next"  HREF="027219.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] proxy_auth_regex</H1>
    <B>Piana, Josh</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20proxy_auth_regex&In-Reply-To=%3Cd450806e84f1439cb82e0fd071e6ec99%40hexcel.com%3E"
       TITLE="[squid-users] proxy_auth_regex">Josh.Piana at hexcel.com
       </A><BR>
    <I>Thu Oct 24 19:53:18 UTC 2024</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="027217.html">[squid-users] NTRIP protocol through proxy
</A></li>
        <LI>Next message (by thread): <A HREF="027219.html">[squid-users] proxy_auth_regex
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27218">[ date ]</a>
              <a href="thread.html#27218">[ thread ]</a>
              <a href="subject.html#27218">[ subject ]</a>
              <a href="author.html#27218">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey Squid users,

Running into an issue I'm trying to figure out.

We have a few acl directives using &quot;proxy_auth_regex -i&quot; and when I have these active, it blocks any proxy connection with an HTTP 407 error, according to the logs.

Here's an example:
# block certain user IDs from using proxy server
#acl block_user proxy_auth_regex -i &quot;/etc/squid/block_user&quot;
#http_access deny block_user

What's supposed to happen with this ACL, is that any username we have on that list is to be blocked from internet access. But it seems to be blocking known good usernames too. I'm not sure where to go from here, we would like to use these ACL's but for right now I have these rules commented out.

Here's a few other rules we have that have the same issue:
# executable blocking
# reference this list for extensions to block
acl exec_files url_regex -i &quot;/etc/squid/exec_files&quot;

# ignore these usernames from being blocked
#acl exec_users proxy_auth_regex -i &quot;/etc/squid/exec_users&quot;

# combine the rules
#http_access deny !bad_exception_urls !exec_users exec_files
#deny_info ERR_BLOCK_TYPE exec_files

&gt;<i>From what you can see above, we have &quot;acl exec_files url_regex -i /etc/squid/exec_files&quot; uncommented, but it's not active because the &quot;http_access directive&quot; had to be commented out because it includes the other statements that include &quot;proxy_auth_regex -i&quot; which block all internet access as well.
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20241024/d417b627/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20241024/d417b627/attachment.htm</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="027217.html">[squid-users] NTRIP protocol through proxy
</A></li>
	<LI>Next message (by thread): <A HREF="027219.html">[squid-users] proxy_auth_regex
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27218">[ date ]</a>
              <a href="thread.html#27218">[ thread ]</a>
              <a href="subject.html#27218">[ subject ]</a>
              <a href="author.html#27218">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
