<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] connect with http and https protocols
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20connect%20with%20http%20and%20https%20protocols&In-Reply-To=%3CaBDjyBvpty-WNHnz%40fantomas.sk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027551.html">
   <LINK REL="Next"  HREF="027554.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] connect with http and https protocols</H1>
    <B>Matus UHLAR - fantomas</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20connect%20with%20http%20and%20https%20protocols&In-Reply-To=%3CaBDjyBvpty-WNHnz%40fantomas.sk%3E"
       TITLE="[squid-users] connect with http and https protocols">uhlar at fantomas.sk
       </A><BR>
    <I>Tue Apr 29 14:35:52 UTC 2025</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="027551.html">[squid-users] connect with http and https protocols
</A></li>
        <LI>Next message (by thread): <A HREF="027554.html">[squid-users] connect with http and https protocols
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27553">[ date ]</a>
              <a href="thread.html#27553">[ thread ]</a>
              <a href="subject.html#27553">[ subject ]</a>
              <a href="author.html#27553">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 29.04.25 08:54, Renzo Marengo wrote:
&gt;<i>When client uses CONNECT directive I understand that proxy establishes
</I>&gt;<i>tunnel to destination host on specified port
</I>&gt;<i>
</I>&gt;<i>e.g.
</I>&gt;<i><A HREF="http://www.example.com:8888/test.php">http://www.example.com:8888/test.php</A>
</I>&gt;<i><A HREF="https://www.example.com:8888/test.php">https://www.example.com:8888/test.php</A>
</I>&gt;<i>
</I>&gt;<i>1. I don't understand if this occurs both in presence of http and https
</I>&gt;<i>requests, The request (using CONNECT method) can be http or https ?
</I>

When you enter &quot;<A HREF="http://www.example.com:8888/test.php">http://www.example.com:8888/test.php</A>&quot; into your browser, 
your browser asks proxy server for &quot;<A HREF="http://www.example.com:8888/test.php">http://www.example.com:8888/test.php</A>&quot;
- it delegates fetching the content to proxy.

When you enter &quot;<A HREF="https://www.example.com:8888/test.php">https://www.example.com:8888/test.php</A>&quot; to your browser, it 
asks proxy server to &quot;CONNET www.example.com:8888&quot; and browser handles the 
SSL negotiation and further communication itself.

This way, you can tunnel different protocols through the proxy, not just 
HTTP (squid must be able to allow it, the destination ports are usually 
restricted via &quot;https_port&quot; acl).

&gt;<i>2.  if In both cases CONNECT method is invoked but how I can discover
</I>&gt;<i>protocol (http, https) looking for inside access.log ?
</I>&gt;<i>A.B.C.D TCP_TUNNEL/200 7085 CONNECT mtalk.google.com:5228 - HIER_DIRECT/
</I>&gt;<i>142.251.18.188
</I>&gt;<i>
</I>&gt;<i>I see only info about destination host and port but no http/https protocol
</I>&gt;<i>is referenced.
</I>

In this case, client A.B.C.D asked the proxy to &quot;CONNECT 
mtalk.google.com:5228&quot; and the proxy fullfilled the request.
In case of CONNECT requests, the proxy has no idea what data flow through 
the server. Afaik mtalk.google.com:5228 is used for google/firebase cloud 
messaging.

-- 
Matus UHLAR - fantomas, <A HREF="https://lists.squid-cache.org/listinfo/squid-users">uhlar at fantomas.sk</A> ; <A HREF="http://www.fantomas.sk/">http://www.fantomas.sk/</A>
Warning: I wish NOT to receive e-mail advertising to this address.
Varovanie: na tuto adresu chcem NEDOSTAVAT akukolvek reklamnu postu.
    One OS to rule them all, One OS to find them,
One OS to bring them all and into darkness bind them
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="027551.html">[squid-users] connect with http and https protocols
</A></li>
	<LI>Next message (by thread): <A HREF="027554.html">[squid-users] connect with http and https protocols
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27553">[ date ]</a>
              <a href="thread.html#27553">[ thread ]</a>
              <a href="subject.html#27553">[ subject ]</a>
              <a href="author.html#27553">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
