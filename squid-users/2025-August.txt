From anon.amish at gmail.com  Sat Aug  2 05:37:58 2025
From: anon.amish at gmail.com (Amish)
Date: Sat, 2 Aug 2025 11:07:58 +0530
Subject: [squid-users] Squid version 7.1 is available
In-Reply-To: <CA+Y8hcNvrLDAOXkUN_ujdde0ugVc2XQKqFHKS3oPEPS+T+zTMg@mail.gmail.com>
References: <CA+Y8hcNvrLDAOXkUN_ujdde0ugVc2XQKqFHKS3oPEPS+T+zTMg@mail.gmail.com>
Message-ID: <1ee43966-c02b-4d47-b05d-b860a4b09a43@gmail.com>

On 15/07/25 2:34 am, Francesco Chemolli wrote:
> The Squid HTTP Proxy team is very pleased to announce the availability
> of the Squid-7.1 release!
>
> This release is, we believe, stable enough for general production use.
> We encourage all users of any previous major version of Squid to upgrade to it,
> as well as users of beta version 7.0.X.

While above announcement mentions that 7.1 is stable release.

but squid website has put 7.1 in beta version section:

https://www.squid-cache.org/Versions/

Please check and clarify.

Thank you

Amish.




From gkinkie at gmail.com  Sat Aug  2 17:44:44 2025
From: gkinkie at gmail.com (Francesco Chemolli)
Date: Sat, 2 Aug 2025 18:44:44 +0100
Subject: [squid-users] Squid version 7.1 is available
In-Reply-To: <1ee43966-c02b-4d47-b05d-b860a4b09a43@gmail.com>
References: <CA+Y8hcNvrLDAOXkUN_ujdde0ugVc2XQKqFHKS3oPEPS+T+zTMg@mail.gmail.com>
 <1ee43966-c02b-4d47-b05d-b860a4b09a43@gmail.com>
Message-ID: <CA+Y8hcPG_cWyt-nALUdLv0Pe2vhvk2LZwa8V0E4k4TGaQXdsfw@mail.gmail.com>

On Sat, Aug 2, 2025 at 6:38?AM Amish <anon.amish at gmail.com> wrote:
>
> On 15/07/25 2:34 am, Francesco Chemolli wrote:
> > The Squid HTTP Proxy team is very pleased to announce the availability
> > of the Squid-7.1 release!
> >
> > This release is, we believe, stable enough for general production use.
> > We encourage all users of any previous major version of Squid to upgrade to it,
> > as well as users of beta version 7.0.X.
>
> While above announcement mentions that 7.1 is stable release.
>
> but squid website has put 7.1 in beta version section:
>
> https://www.squid-cache.org/Versions/
>
> Please check and clarify.

Hi Amish,
  thanks for noticing.

The website is now fixed, and 7.1 is listed as a stable release

-- 
    Francesco

From clement.paulet at universite-paris-saclay.fr  Mon Aug  4 13:02:59 2025
From: clement.paulet at universite-paris-saclay.fr (=?iso-8859-1?Q?Cl=E9ment_Paulet?=)
Date: Mon, 4 Aug 2025 13:02:59 +0000
Subject: [squid-users] Squid 7.1 workers options without kernel SO_REUSEPORT
 param
Message-ID: <MR1P264MB4099863E8D64FB8F83901299EB23A@MR1P264MB4099.FRAP264.PROD.OUTLOOK.COM>

Hi,

We use SQUID 6.3 with enable-workers option, 16 workers for our traffic.

How can we update to 7.1 without change our OS Kernel (based on RedHat 9) ?

Seems option SO_REUSEPORT mandatory since 7.x.

Thanks in avance,
Nice day,
Clement

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-users/attachments/20250804/1a822e60/attachment.htm>

From rousskov at measurement-factory.com  Mon Aug  4 13:33:25 2025
From: rousskov at measurement-factory.com (Alex Rousskov)
Date: Mon, 4 Aug 2025 09:33:25 -0400
Subject: [squid-users] Squid 7.1 workers options without kernel
 SO_REUSEPORT param
In-Reply-To: <MR1P264MB4099863E8D64FB8F83901299EB23A@MR1P264MB4099.FRAP264.PROD.OUTLOOK.COM>
References: <MR1P264MB4099863E8D64FB8F83901299EB23A@MR1P264MB4099.FRAP264.PROD.OUTLOOK.COM>
Message-ID: <21c78d1e-398e-462c-b426-db5bac33f7d5@measurement-factory.com>

On 2025-08-04 09:02, Cl?ment Paulet wrote:

> We use SQUID 6.3 with enable-workers option, 16 workers for our traffic.

Squid has no "enable-workers" configuration option. I assume you meant 
the "worker-queues" option that comes with http_port and similar 
listening port directives. I also assume that you use "workers 16" in 
your squid.conf. Please correct any wrong assumptions.


> How can we update to 7.1 without change our OS Kernel (based on RedHat 9) ?

If your OS configuration stays the same, then, bugs notwithstanding, you 
should be able to upgrade Squid from v6 to v7 without adding or removing 
the worker-queues option.


> Seems option SO_REUSEPORT mandatory since 7.x.

For Squids configured with the "worker-queues" port option, SO_REUSEPORT 
support in OS TCP stack is mandatory since the "worker-queues" port 
option was added in Squid v5.

For Squids configured without the "worker-queues" port option, 
SO_REUSEPORT support is unnecessary (and unused/ignored) in all Squids.

I see no relevant changes between Squid v6 and v7.


Please detail the problem you are experiencing while upgrading; it is 
not clear (to me) what prevents you from upgrading Squid while keeping 
your squid.conf the same.


Thank you,

Alex.


From anon.amish at gmail.com  Mon Aug  4 13:50:00 2025
From: anon.amish at gmail.com (Amish)
Date: Mon, 4 Aug 2025 19:20:00 +0530
Subject: [squid-users] Old style - detailed Release notes
Message-ID: <19e13404-e748-4959-8bd8-89b8b2da128e@gmail.com>

Hello

I am old squid user, using from atleast a decade.

I recall that earlier whenever there was a new squid major release, 
there used to be release notes found on downloads page.

This release notes used to provide section wise details of changes from 
previous major version.

Like What's new, What directive is deprecated / removed, What directive 
is replaced / changed.

And it used to be extremely helpful to upgrade from one major version to 
another.

We could just refer to it and change our squid.conf accordingly. And 
also make use of some new features added to new version.

However ever since migration to Github, I can not find such a release notes.

Github release page does not arrange the change log in section wise 
manner like earlier.

If such a release notes still exists then can you please provide link to 
it? I am sorry if I completely overlooked it.

Or if not then can such release notes be provided for easy reference?

Thank you

Amish


From rousskov at measurement-factory.com  Mon Aug  4 14:19:43 2025
From: rousskov at measurement-factory.com (Alex Rousskov)
Date: Mon, 4 Aug 2025 10:19:43 -0400
Subject: [squid-users] Old style - detailed Release notes
In-Reply-To: <19e13404-e748-4959-8bd8-89b8b2da128e@gmail.com>
References: <19e13404-e748-4959-8bd8-89b8b2da128e@gmail.com>
Message-ID: <3419b53b-0d3b-4f1d-b5b1-6659cd5d6b51@measurement-factory.com>

On 2025-08-04 09:50, Amish wrote:

> I recall that earlier whenever there was a new squid major release, 
> there used to be release notes found on downloads page.

You can find release notes in bootstrapped Squid sources linked from 
GitHub releases page[1]. For example, for Squid v7.1, that file is 
called squid-7.1/doc/release-notes/release-7.html (and it can be found 
inside squid-7.1.tar.bz2 archive provided at [1]). A copy of that file 
is also available in the same archive as squid-7.1/RELEASENOTES.html.

We could provide that file as a stand-alone release artifact, linked 
from every release on [1], but I am worried about increasing noise and 
sliding down the slippery slope -- there are other files in archives 
that others may find useful, and each will be increasingly difficult to 
locate as we add them as stand-alone artifacts...

That HTML file is generated so it is not found in the source code 
repository. That should change when we switch from SGML to Markdown (and 
require some automated post-processing/indexing at commit time). When 
that happens, we could easily add the corresponding link to our release 
descriptions at [1] AFAICT.


HTH,

Alex.
[1] https://github.com/squid-cache/squid/releases


> This release notes used to provide section wise details of changes from 
> previous major version.
> 
> Like What's new, What directive is deprecated / removed, What directive 
> is replaced / changed.
> 
> And it used to be extremely helpful to upgrade from one major version to 
> another.
> 
> We could just refer to it and change our squid.conf accordingly. And 
> also make use of some new features added to new version.
> 
> However ever since migration to Github, I can not find such a release 
> notes.
> 
> Github release page does not arrange the change log in section wise 
> manner like earlier.
> 
> If such a release notes still exists then can you please provide link to 
> it? I am sorry if I completely overlooked it.
> 
> Or if not then can such release notes be provided for easy reference?
> 
> Thank you
> 
> Amish
> 
> _______________________________________________
> squid-users mailing list
> squid-users at lists.squid-cache.org
> https://lists.squid-cache.org/listinfo/squid-users


From pikolasikolatest2 at gmail.com  Tue Aug  5 20:11:29 2025
From: pikolasikolatest2 at gmail.com (walid falcon)
Date: Tue, 5 Aug 2025 21:11:29 +0100
Subject: [squid-users] =?utf-8?b?2LTZh9in2K/YqSDYp9mE2KPYqNmI2Kkg2YHZiiA=?=
 =?utf-8?b?2KfZhNmF2LrYsdio?=
Message-ID: <CAEDhRErzEDjY_d2HchhYVhy3DrpU6WDLcNhUkZiStPsQ28azJg@mail.gmail.com>

?? ?? ????? ?????? ??? ????? ?????? ???????




 ????? ????? ????? ?? ???? ?????? ???????
https://www.targir.com/2025/04/blog-post_14.html



??????? ????? ???????? ????? ?????? ?????????? ????????? ???????? ???




?? ?? ????? ?????? ?? ???????




????? ?????? ????? ??????? ???? ????? ??? ??? ?????? ?????? ??????? ???????
??? ????? ?????? ?????????? ?? ??? ??? ???? ??? ???? ???? ?? ????? ????.
????? ??? ??????? ????? ?? ????????? ???????? ???? ???? ??? ????? ??????
???????.




??????? ???? ?????? ??????? ????? ??????
1. ??????? ??? ???????? ?? ?????? ???????
????? ???? ??? ???? ???? ?????? ?? ?? ??????? ???? ??????? ?? ???? ??????
???????? ????? ???? ??? ??? ???? ?????? ??? ????? ??????.




2. ????? ????? ?? ???? ??? ????
?? ????? ??? ???? ????? ?????? ??? ???????? ????? ??? ??????? ??????
??????? ???????.




??????? ?????? ??? ????? ??????
????: ??? ???? ???? ???????
????? ??? ???? ?? ??? ??? ????? ????? ??? ??? ??????? ?????????? ???? ???
???? ??? ??? ????? ?? ????? ???? ?? ??? ????? ??? ????? ?????? ??????.




??????: ??????? ????????
???? ?? ????? ??????? ???????
??? ???????? ????? ?????? (?? ????)
????? ???? ???????
????? ??????
????? ?? ??????? ???? ????? ???? ??????
????? ????? ?????? pdf
???? ??? ??????? ??????????? ????? ????? ????? ?????? PDF ???? ???????? ???
?? ??????? ?????? ?? ??? ??? ??? ??? ?????? ???? ??????? ?????? ??????
??????? ?????? ?????.




??????? ??????? ??? ????? ??????
?? ???? ????? ??? ????? ?????? ???????????
??? ??????? ??? ?????? ?????? ?????? ???? ???????.




?? ?? ??? ?????? ??? ????? ???????
?? ????? ????? ??? ??? ???????? ???? ???? ?? ?????? ??? ??? ??? ????? ?????
??? ????? ?????.




??? ??? ????? ?????? ???? ???????? ????????? ??????
?? ????? ??? ??? ?????? ??? ????? ?????? ???? ???????? ????????? ??????
???? ???? ???? ??????? ???:




1. ??????? ?????? ?????? ?????
?????? ?? ????? ?? ??? ??????? ????????? ????? ????? ???? ??? ??????? ?????
??????? ??? ?? ????? ??:




??????? ???????? ???????? ????? ????? ?? ????? ???????
????? ???? ??????
??????? ?????? ??????????
2. ??????? ??????? ????? ?????
?? ????? ??? ???? ????? ???? ????? ??? ??????? ?? ????? ??????? ??? ?????
?? ????? ?????? ?? ????? ?????? ?????????? ??? ?? ???? ????? ?????? ??????
?? ??? ??????? ????????? ??????.




????? ??????
?????? ?? ??? ??????? ?? ????? ????? ?????? ?????? ???? ??? ????? ?? ?????
?????? ?? ???? ?? ??? ??????? ????????.




???? ?????
??????? ?????? ???????




??????? ????????
??????? ?????? :




?       ????? ??????? ?




?       ?????? ???????




??????? ?????? :




?       ????? ????? ???? ?




?       ?????? ??????? .




??????? ??????? ??????? ??????? ????????
??????? ???????? ??????? ???? ????? ???? ?????




??????? ??????? ?????? ??????
??????? ???????? ??????? ???? ????? ???? ?????




?? ???? ???? ?????? ??? ??????
????? ??????




???? ???????
????? ?????? ???????? ????????




???? ????????? (??????? ???????)
????? ?????? ???????? ????????_?????




????? ????? ????? ?? ???? ?????? ???????




????? ????? ?????? ???????
????? ?????? ??: [??? ???????]
??? ?????: [????? ???????]
??? ??????: [????? ???????]




???? ????? ???????
??? ?????? ?????:




????? ??????: [????? ?????? ????]




??? ????? ??????? ???????: [??? CIN]




????? ????? ????????: [????? ????? ????? ????]




??????? ??????: [????? ???????]




??????: [?????? ???????]




?????? ????? ???? ?????? ???? ??????? ??????????? ??? ???:




?? ????? (?) ?????? (?): [??? ?????/?]
??????? (?) ??????: [????? ???????]
??: [???? ???????]




??(??) ????/????? ?????????(?)? ??? ????(?) ????? ????? ????? ????? ????
???? ??????:
[??? ????]? ???????? ??????: [????? ????? ????]? ???????? ???? ?????
??????? ???????: [??? CIN ????].




?????? ???? ????????? ????????? ???????? ???? ??? ?????/?? ????? ?? ???????
??????? ????? ??? ????? ???? ??? ????? ??? ??????? ?? ??????? ?? ??????
???????.


???????
????? ??????: _____________________
???????: ___________________________
???????: ____ / ____ / ________

??????? :
????? ??? ??????? ???????? ??????? ??: ???? ??????? ???????? ????? ???????
????? ???????? ??????.
?????? ??? ????? ??? ??????? ?????????? (??? ???? ??????) ???? ??? ???
???????? ??? ????? ????? ?? ??? ??? ????.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-users/attachments/20250805/9544b5cb/attachment.htm>

From huaraz at moeller.plus.com  Sat Aug 16 18:55:27 2025
From: huaraz at moeller.plus.com (Markus Moeller)
Date: Sat, 16 Aug 2025 19:55:27 +0100
Subject: [squid-users] Kerberos Auth weirdness/inconsistency when using
 CNAMEs/Round-robin DNS
In-Reply-To: <6a32534a-d605-474f-9cca-79d3735385b4@ed.ac.uk>
References: <6a32534a-d605-474f-9cca-79d3735385b4@ed.ac.uk>
Message-ID: <107qk73$jlb$1@ciao.gmane.io>

Hi Mark,

   Be aware that Browsers may behave differently when using CNAMES.   Some Browser uses the HTTP/<CNAME> ticket and some use HTTP/<NAME of reverse lookup of the CNAME IP>

   e.g. if proxy.example.com is a cname for server1.example.com on 192.168.1.2

   You may need tickets for both i.e. HTTP/proxy.example.com AND HTTP/server1.example.com  

   If you use GSLB or other load balancing techniques make sure all server keys plus the GSLB and CNAME keys are included in the keytab on all servers supporting the GSLB or CNAME..

Markus
 

"Mark Cairney" <Mark.Cairney at ed.ac.uk> wrote in message news:6a32534a-d605-474f-9cca-79d3735385b4 at ed.ac.uk...
Hi,

I?ve been trying to get Kerberos Authentication against AD working but have been seeing inconsistent results/behaviour across multiple Oses and I?m not sure if the issue lies with the DNS configuration, Kerberos itself or with the Squid config:

 

THE DNS setup is as follows:

 

test.squid.cluster. 3600              IN           CNAME                test-squid-cluster.dyn-zone.

test-squid-cluster.dyn-zone. 60 IN A     1.2.3.4

 

Where 1.2.3.4 is the IP of one of the servers in the cluster. The intention is to have multiple Squid servers behind a single DNS name for high-availability.

 

This is what I?m seeing in the cache log with my current setup:

 

Windows:

negotiate_kerberos_auth.cc(182): pid=668789 :2025/06/16 16:03:01| negotiate_kerb

eros_auth: ERROR: gss_accept_sec_context() failed: Unspecified GSS failure.  Min

or code may provide more information. Cannot find key for HTTP/ test-squid-cluster.dyn-zone at REALM kvno 2 in keytab (request ticket server HTTP/test.squid.cluster at REALM

 

Rocky Linux:

curl -ik -vvv -L --proxy-negotiate -U : -b ~/cookiejar.txt -c ~/cookiejar.txt -x "test.squid.cluster:3128" https://www.bbc.co.uk

 

negotiate_kerberos_auth.cc(182): pid=668789 :2025/06/17 08:51:52| negotiate_kerb

eros_auth: ERROR: gss_accept_sec_context() failed: Unspecified GSS failure.  Min

2025/06/17 08:51:52| negotiate_kerberos_auth: INFO: User not authenticated

2025/06/17 08:51:52.964 kid1| ERROR: Negotiate Authentication validating user. R

esult: {result=BH, notes={message: gss_accept_sec_context() failed: Unspecified

er HTTP/server1 at REALM); }}

 

klist -e

Ticket cache: FILE:/tmp/krb5cc_138460_vF4BWcMsZu

Default principal: ext6033 at ED.AC.UK

17/06/25 08:51:44  17/06/25 18:51:24  krbtgt/REALM at REALM

        Etype (skey, tkt): aes256-cts-hmac-sha1-96, aes256-cts-hmac-sha1-96

17/06/25 08:51:52  17/06/25 18:51:24  HTTP/server@

        Etype (skey, tkt): aes256-cts-hmac-sha1-96, aes256-cts-hmac-sha1-96

        Ticket server: server/REALM at REALM

 

With the same behaviour if I use the Dynamic Zone record in the curl command i.e.

curl -ik -vvv -L --proxy-negotiate -U : -b ~/cookiejar.txt -c ~/cookiejar.txt -x " test-squid-cluster.dyn-zone:3128" https://www.bbc.co.uk

 

Ubuntu 24.04

curl -ik -vvv -L --proxy-negotiate -U : -b ~/cookiejar.txt -c ~/cookiejar.txt -x "test.squid.cluster:3128" "https://www.bbc.co.uk" works

 

negotiate_kerberos_auth.cc(815): pid=668789 :2025/06/18 09:11:17| negotiate_kerberos_auth: DEBUG: OK token=oYG3MIG0oAMKAQChCwYJKoZIhvcSAQICooGfBIGcYIGZBgkqhkiG9xIBAgICAG+BiTCBhqADAgEFoQMCAQ+iejB4oAMCARKicQRvJ1BxA5rnZjKbfBVE0YqUlnYx7oLguj09HLH4SJRumUjWWXh99B/4X72vpFqCXeOKmvzSDlWG0Io1ZjQxNOxqni4sFx8exojIzg4aIWKAcYB21OHr9m0T9dfymDVoV61Cofyq38fUaN5Loen9YX0h user=account
2025/06/18 09:11:17| negotiate_kerberos_auth: INFO: User account authenticated


 

klist -e
Ticket cache: FILE:/tmp/krb5cc_1001_7KsHEg
Default principal: account at REALM

Valid starting     Expires            Service principal
06/18/25 09:10:09  06/18/25 19:10:09  krbtgt/REALM at REALM
    renew until 06/19/25 09:09:36, Etype (skey, tkt): aes256-cts-hmac-sha1-96, aes256-cts-hmac-sha1-96 
06/18/25 09:11:17  06/18/25 19:10:09  HTTP/test-squid-cluster.dyn-zone@
    renew until 06/19/25 09:09:36, Etype (skey, tkt): aes256-cts-hmac-sha1-96, aes256-cts-hmac-sha1-96 





curl -ik -vvv -L --proxy-negotiate -U : -b ~/cookiejar.txt -c ~/cookiejar.txt -x "test-squid-cluster.dyn-zone:3128" "https://www.bbc.co.uk"

 

Works as well


klist -e
Ticket cache: FILE:/tmp/krb5cc_1001_7KsHEg
Default principal: account at REALM

Valid starting     Expires            Service principal
06/18/25 09:17:11  06/18/25 19:17:11  krbtgt/REAM at REALM
    renew until 06/19/25 09:16:55, Etype (skey, tkt): aes256-cts-hmac-sha1-96, aes256-cts-hmac-sha1-96 
06/18/25 09:17:38  06/18/25 19:17:11  HTTP/test-squid-cluster.dyn-zone@
    renew until 06/19/25 09:16:55, Etype (skey, tkt): aes256-cts-hmac-sha1-96, aes256-cts-hmac-sha1-96 
    Ticket server: HTTP/test-exams-cache.www-dyn.ed.ac.uk at ED.AC.UK


 

Mac (Sequoia 15.5)

curl -ik -vvv -L --proxy-negotiate -U : -b ~/cookiejar.txt -c ~/cookiejar.txt -x "test.squid.cluster.dyn-zone:3128" https://www.bbc.co.uk

 

2025/06/17 09:32:26| negotiate_kerberos_auth: INFO: User not authenticated

2025/06/17 09:32:26.600 kid1| ERROR: Negotiate Authentication validating user. R

esult: {result=BH, notes={message: gss_accept_sec_context() failed: Unspecified

GSS failure.  Minor code may provide more information. Cannot find key for HTTP/

test-squid-cluster.dyn-zone at REALM kvno 2 in keytab (request ticket serv

er HTTP/test.squid.cluster at REALM); }}

 

klist -v

Server: HTTP/test.squid.cluster at REALM

Client: account at REALM

Ticket etype: aes256-cts-hmac-sha1-96, kvno 2

Ticket length: 1690

Auth time:  Jun 17 09:32:17 2025

Start time: Jun 17 09:32:26 2025

End time:   Jun 17 19:31:56 2025

Ticket flags: enc-pa-rep, pre-authent, forwardable

Addresses: addressless

 

curl -ik -vvv -L --proxy-negotiate -U : -b ~/cookiejar.txt -c ~/cookiejar.txt -x "test-squid-cluster.dyn.zone:3128" https://www.bbc.co.uk

 

Successful:

2025/06/17 09:36:38| negotiate_kerberos_auth: INFO: User account authenticated

2025/06/17 09:36:38.165 kid1| 82,2| external_acl.cc(700) aclMatchExternal: ldap_group = ALLOWED

 

Klist -v

Server: krbtgt/REALM at REALM

Client: account at REALM 

Ticket etype: aes256-cts-hmac-sha1-96, kvno 11

Ticket length: 1683

Auth time:  Jun 17 09:36:31 2025

End time:   Jun 17 19:36:23 2025

Ticket flags: enc-pa-rep, pre-authent, initial, forwardable

Addresses: addressless

 

Server: HTTP/test-squid-cluster.dyn.zone at REALM

Client: account at REALM

Ticket etype: aes256-cts-hmac-sha1-96, kvno 1

Ticket length: 1698

Auth time:  Jun 17 09:36:31 2025

Start time: Jun 17 09:36:38 2025

End time:   Jun 17 19:36:23 2025

Ticket flags: enc-pa-rep, pre-authent, forwardable

Addresses: addressless

 

The relevant parts of the squid.conf are:

 

http_port 3128

cache_mem 256 mb

maximum_object_size_in_memory 512 KB

maximum_object_size 2048 mb

cache_dir ufs /var/spool/squid 51200 16 256

debug_options ALL,2

visible_hostname test-squid-cluster.dyn.zone

unique_hostname server1

 

refresh_pattern .             0       20%     4320 ignore-reload

auth_param basic children 10

auth_param negotiate program /usr/lib64/squid/negotiate_kerberos_auth -k /etc/squid/HTTP.keytab -s HTTP/test-squid-cluster.dyn.zone at REALM -d -i -r

 

(We also have LDAP basic auth configured as a fallback which works as expected but modern Windows clients no longer support basic auth for proxy servers).

 

klist -k /etc/squid/HTTP.keytab

Keytab name: FILE:/etc/squid/HTTP.keytab

KVNO Principal

---- --------------------------------------------------------------------------

   1 TESTSQUIDCACHE at REALM

   1 TESTSQUIDCACHE at REALM

   1 TESTSQUIDCACHE at REALM

   1 HTTP/test-squid-cache.dyn.zone at REALM

   1 HTTP/test-squid-cache.dyn.zone at REALM

   1 HTTP/test-squid-cache.dyn.zone at REALM

 

/etc/hosts

1.2.3.4 server1.cache server1 test-squid-cache.dyn.zone test.squid.cluster

 

Finally the keytab was generated using msktutil e.g.

msktutil -c -h test-squid-cache.dyn.zone -b 'OU=Managed-Linux,OU=Infrastructure' --computer-name TESTSQUIDCACHE -s HTTP/test-squid-cache.dyn.zone -k /etc/squid/HTTP.keytab --server domain.controller --realm REALM --use-service-account --dont-expire-password --upn HTTP/test-squid-cache.dyn.zone at REALM

 

This works fairly well/reliably if we use a keytab containing the HTTP/fqdn of the server itself i.e. HTTP/server1 AND connect using curl using the FQDN of server1 but we need resiliency and high-availability so having a single-host service would be a last resort.

 

Any ideas on where I?m going wrong or what I need to add in terms of DNS/keytab entries? Also some of the clients attempt to use key versions which have never been issued e.g. kvno 4? 

 

Kind regards,

Mark

--
/****************************

Mark Cairney
ITI Enterprise Services
Information Services
University of Edinburgh

Tel: 0131 650 6565
Email: Mark.Cairney at ed.ac.uk

*******************************/

The University of Edinburgh is a charitable body, registered in Scotland, with registration number SC005336.<!--[if !vml]--><!--[endif]-->



--------------------------------------------------------------------------------
_______________________________________________
squid-users mailing list
squid-users at lists.squid-cache.org
https://lists.squid-cache.org/listinfo/squid-users
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-users/attachments/20250816/12301dae/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 263 bytes
Desc: not available
URL: <http://lists.squid-cache.org/pipermail/squid-users/attachments/20250816/12301dae/attachment-0001.png>

From dm at belkam.com  Wed Aug 27 07:02:11 2025
From: dm at belkam.com (Dmitry Melekhov)
Date: Wed, 27 Aug 2025 11:02:11 +0400
Subject: [squid-users] squid 7.1 , url_rewrite_program does not work
Message-ID: <cacadb97-e31d-496c-a602-311ae7c5716c@belkam.com>

Hello!


Tried to upgrade squid to 7.1 from 6.14.

And the same config does not work:

url_rewrite_program /usr/local/rejik3/redirector 
/usr/local/rejik3/redirector.conf


squid passes url to url_rewrite_program

I can see in this program log that it works, but squid does not redirect 
and just processes original request and passes it's result to user.


There is no changes decribed in manual


https://www.squid-cache.org/Versions/v7/cfgman/url_rewrite_program.html

https://www.squid-cache.org/Versions/v6/cfgman/url_rewrite_program.html


Looks the same.



Could you tell me what is wrong here?


Thank you!



From ngtech1ltd at gmail.com  Sat Aug 30 19:49:15 2025
From: ngtech1ltd at gmail.com (NgTech LTD)
Date: Sat, 30 Aug 2025 22:49:15 +0300
Subject: [squid-users] What about http 1 must die?
Message-ID: <CABA8h=R5kwtE1QL6ksfdQQc54zxG+j=TSQf-82WGk6+kKVPi9w@mail.gmail.com>

Hey,

I have seen this research:

https://portswigger.net/research/http1-must-die

And was wondering how squid is handling such cases.

Thanks,
Eliezer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-users/attachments/20250830/fb24f86f/attachment.htm>

From squid3 at treenet.co.nz  Sun Aug 31 17:15:58 2025
From: squid3 at treenet.co.nz (Amos Jeffries)
Date: Mon, 1 Sep 2025 05:15:58 +1200
Subject: [squid-users] What about http 1 must die?
In-Reply-To: <CABA8h=R5kwtE1QL6ksfdQQc54zxG+j=TSQf-82WGk6+kKVPi9w@mail.gmail.com>
References: <CABA8h=R5kwtE1QL6ksfdQQc54zxG+j=TSQf-82WGk6+kKVPi9w@mail.gmail.com>
Message-ID: <0094d2bf-d82a-49b0-9356-de0be5ace2b2@treenet.co.nz>

On 31/08/25 07:49, NgTech LTD wrote:
> Hey,
> 
> I have seen this research:
> 
> https://portswigger.net/research/http1-must-die <https:// 
> portswigger.net/research/http1-must-die>
> 

I'm not sure I would call that research exactly. It is pretty much an 
enumeration of theoretical flaws in HTTP/1 which **might** occur 
assuming one of the HTTP agents is designed badly.

I notice that proper implementation of HTTP security requirements closes 
off a number of issues listed there.

For example; all mentioned issues with "obs-fold" (obsolete HTTP/1.0 
whitespace folding) in Content-Length headers are not a problem when one 
obeys the RFC7230 / RFC9112 requirement to either; replace obs-fold with 
a single SP **before** processing the headers, OR to respond with a 
connection error (404 status response and TCP RST) whenever it is 
received on HTTP/1.1 messages.


> And was wondering how squid is handling such cases.
> 

AFAICS, Squid has been around and been updated with workarounds and 
fixes for all of these cases (and many more pre-RFC9112 issues) as they 
were discovered.

Today Squid has a rather strict parsing of input, with our "lenient" 
mode only tolerating the broken inputs when they are able to be fixed 
without causing more issues and essentially no behavior change.


Not sure I would go as far as the "must die" argument quite yet. The 
HTTP/1 syntax still has a place as Human-readable display for any HTTP 
version. But yes, that time to stop sending it in communications is fast 
approaching. HTTP/2 had its 10 year birthday earlier this year!


HTH
Amos


From ngtech1ltd at gmail.com  Sun Aug 31 17:30:24 2025
From: ngtech1ltd at gmail.com (NgTech LTD)
Date: Sun, 31 Aug 2025 20:30:24 +0300
Subject: [squid-users] What about http 1 must die?
In-Reply-To: <0094d2bf-d82a-49b0-9356-de0be5ace2b2@treenet.co.nz>
References: <CABA8h=R5kwtE1QL6ksfdQQc54zxG+j=TSQf-82WGk6+kKVPi9w@mail.gmail.com>
 <0094d2bf-d82a-49b0-9356-de0be5ace2b2@treenet.co.nz>
Message-ID: <CABA8h=QgybPe-t4z-SndjO3+-8h+P2AKMQDddH=PmS2kX8xpmQ@mail.gmail.com>

Thanks Amos,

I know what squid and other web servers do already so it's weird for me to
hear http/x should die.
I won't say if it works don't touch it but even the most basic http service
I tried to write 5 years ago didn't had such flaws.

Also, many lb and forward proxy are resistant to the attacks this post
mentioned.
I am unsure on what services he used it against.

For now I still believe that squid stable is very advanced in it's level of
perfection compared to other pieces of code out there.

There are other questions like:
Can any ai write anything in either golang/python/rust which can compete
with squid?

What others think?

And I must say i gave some ai's the chance to write an icap helper logic
for youtube.... I still couldn't make it create something like what I wrote
10 years ago.
And, I am looking for some caching challenges :)

Eliezer



?????? ??? ??, 31 ????? 2025, 20:16, ??? Amos Jeffries ?<
squid3 at treenet.co.nz>:

> On 31/08/25 07:49, NgTech LTD wrote:
> > Hey,
> >
> > I have seen this research:
> >
> > https://portswigger.net/research/http1-must-die <https://
> > portswigger.net/research/http1-must-die>
> >
>
> I'm not sure I would call that research exactly. It is pretty much an
> enumeration of theoretical flaws in HTTP/1 which **might** occur
> assuming one of the HTTP agents is designed badly.
>
> I notice that proper implementation of HTTP security requirements closes
> off a number of issues listed there.
>
> For example; all mentioned issues with "obs-fold" (obsolete HTTP/1.0
> whitespace folding) in Content-Length headers are not a problem when one
> obeys the RFC7230 / RFC9112 requirement to either; replace obs-fold with
> a single SP **before** processing the headers, OR to respond with a
> connection error (404 status response and TCP RST) whenever it is
> received on HTTP/1.1 messages.
>
>
> > And was wondering how squid is handling such cases.
> >
>
> AFAICS, Squid has been around and been updated with workarounds and
> fixes for all of these cases (and many more pre-RFC9112 issues) as they
> were discovered.
>
> Today Squid has a rather strict parsing of input, with our "lenient"
> mode only tolerating the broken inputs when they are able to be fixed
> without causing more issues and essentially no behavior change.
>
>
> Not sure I would go as far as the "must die" argument quite yet. The
> HTTP/1 syntax still has a place as Human-readable display for any HTTP
> version. But yes, that time to stop sending it in communications is fast
> approaching. HTTP/2 had its 10 year birthday earlier this year!
>
>
> HTH
> Amos
>
> _______________________________________________
> squid-users mailing list
> squid-users at lists.squid-cache.org
> https://lists.squid-cache.org/listinfo/squid-users
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.squid-cache.org/pipermail/squid-users/attachments/20250831/40722ba1/attachment.htm>

