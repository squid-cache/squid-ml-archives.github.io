<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] 2FA with Google Authenticator and squid login
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%202FA%20with%20Google%20Authenticator%20and%20squid%20login&In-Reply-To=%3CCABA8h%3DS1cHjHzPrt47uHzmYHu86Ynb9ipKYUwccPkXgeE3OcKQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027412.html">
   <LINK REL="Next"  HREF="027414.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] 2FA with Google Authenticator and squid login</H1>
    <B>NgTech LTD</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%202FA%20with%20Google%20Authenticator%20and%20squid%20login&In-Reply-To=%3CCABA8h%3DS1cHjHzPrt47uHzmYHu86Ynb9ipKYUwccPkXgeE3OcKQ%40mail.gmail.com%3E"
       TITLE="[squid-users] 2FA with Google Authenticator and squid login">ngtech1ltd at gmail.com
       </A><BR>
    <I>Mon Feb  3 05:25:35 UTC 2025</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="027412.html">[squid-users] 2FA with Google Authenticator and squid login
</A></li>
        <LI>Next message (by thread): <A HREF="027414.html">[squid-users] 2FA with Google Authenticator and squid login
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27413">[ date ]</a>
              <a href="thread.html#27413">[ thread ]</a>
              <a href="subject.html#27413">[ subject ]</a>
              <a href="author.html#27413">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>What i was talking about is using both the auth helper and the external ack
helper.
The password is static but the authorization itself is done via some push
or another totp method that will authorize the login for a specific amount
of time.
And indeed it will kind of degrade the connection to 1fa for a period of
time, but, it will protect against couple specific attacks.
So, if the proxy connection is encrypted inside a tunnel then it's ok.

As for a directly accessible proxy over plain http, it will be vulnerable
to many auth attacks..

Thanks,
Eliezer

&#1489;&#1514;&#1488;&#1512;&#1497;&#1498; &#1497;&#1493;&#1501; &#1489;&#1523;, 3 &#1489;&#1508;&#1489;&#1512;&#1523; 2025, 7:10, &#1502;&#1488;&#1514; Amos Jeffries &#8207;&lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>
&gt;:<i>
</I>
&gt;<i> On 3/02/25 00:43, NgTech LTD wrote:
</I>&gt;<i> &gt; What would make  a 2fa in squid case?
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> When receiving a new login attempt the authentication (auth_param)
</I>&gt;<i> helper should initiate whatever side-channel token delivery is needed.
</I>&gt;<i> Then return &quot;ERR&quot; to Squid as usual.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Replace the login challenge error message with a login page to receive
</I>&gt;<i> that token and deliver it to a server that marks the client as logged
</I>&gt;<i> in. (Both ERR_ACCESS_DENIED and ERR_CACHE_ACCESS_DENIED. Either new
</I>&gt;<i> templates or a deny_info 401/407 - I'm not sure which will work best)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Somewhat like how the SQL_session helper works in &quot;active mode&quot; session,
</I>&gt;<i> but through the auth_param helpers instead of external ACL sessions.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> HTH
</I>&gt;<i> Amos
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; Thanks,
</I>&gt;<i> &gt; Eliezer
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &#1489;&#1514;&#1488;&#1512;&#1497;&#1498; &#1497;&#1493;&#1501; &#1488;&#1523;, 2 &#1489;&#1508;&#1489;&#1512;&#1523; 2025, 13:22, &#1502;&#1488;&#1514; Amos Jeffries
</I>&gt;<i> &gt; &#8207;&lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt;&gt;:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     On 2/02/25 07:43, ngtech1ltd wrote:
</I>&gt;<i> &gt;      &gt; Hey,
</I>&gt;<i> &gt;      &gt;
</I>&gt;<i> &gt;      &gt; I was wondering if anyone have implemented any 2FA with squid.
</I>&gt;<i> &gt;      &gt;
</I>&gt;<i> &gt;      &gt; IE a simple forward proxy that implements an external ACL helper
</I>&gt;<i> &gt;     that
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Ah, that would not be &quot;authentication&quot;.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     2FA is done through Squid auth_param and authentication helpers same
</I>&gt;<i> as
</I>&gt;<i> &gt;     &quot;normal&quot; (1FA) authentication. It is just a slightly different bunch
</I>&gt;<i> of
</I>&gt;<i> &gt;     steps the auth system performs in the background outside of Squid.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     Cheers
</I>&gt;<i> &gt;     Amos
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;     _______________________________________________
</I>&gt;<i> &gt;     squid-users mailing list
</I>&gt;<i> &gt;     <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-</A>
</I>&gt;<i> &gt;     cache.org&gt;
</I>&gt;<i> &gt;     <A HREF="https://lists.squid-cache.org/listinfo/squid-users">https://lists.squid-cache.org/listinfo/squid-users</A> &lt;<A HREF="https://">https://</A>
</I>&gt;<i> &gt;     lists.squid-cache.org/listinfo/squid-users&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; squid-users mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> &gt; <A HREF="https://lists.squid-cache.org/listinfo/squid-users">https://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">https://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20250203/a4095808/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20250203/a4095808/attachment.htm</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="027412.html">[squid-users] 2FA with Google Authenticator and squid login
</A></li>
	<LI>Next message (by thread): <A HREF="027414.html">[squid-users] 2FA with Google Authenticator and squid login
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27413">[ date ]</a>
              <a href="thread.html#27413">[ thread ]</a>
              <a href="subject.html#27413">[ subject ]</a>
              <a href="author.html#27413">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
