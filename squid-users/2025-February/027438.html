<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] To Do List (smart pointer examples)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20To%20Do%20List%20%28smart%20pointer%20examples%29&In-Reply-To=%3C5680db0b-f876-4cf9-abd7-321c93c1bdbc%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027437.html">
   <LINK REL="Next"  HREF="027439.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] To Do List (smart pointer examples)</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20To%20Do%20List%20%28smart%20pointer%20examples%29&In-Reply-To=%3C5680db0b-f876-4cf9-abd7-321c93c1bdbc%40measurement-factory.com%3E"
       TITLE="[squid-users] To Do List (smart pointer examples)">rousskov at measurement-factory.com
       </A><BR>
    <I>Tue Feb 11 22:05:11 UTC 2025</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="027437.html">[squid-users] To Do List (smart pointer examples)
</A></li>
        <LI>Next message (by thread): <A HREF="027439.html">[squid-users] Ubuntu 22.04 LTS repository for Squid 6.13 (rebuilt from sources in Debian)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27438">[ date ]</a>
              <a href="thread.html#27438">[ thread ]</a>
              <a href="subject.html#27438">[ subject ]</a>
              <a href="author.html#27438">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2025-02-07 18:41, Jonathan Lee wrote:

&gt;<i> Can someone show me an example of doing one of these requests on the to 
</I>&gt;<i> do list?
</I>
Please direct future development questions and followups to squid-dev 
mailing list! This squid-users mailing list is meant for Squid operators 
or administrators rather than developers.


&gt;<i> Do anyone have an example plus the section of the code on gethub needs 
</I>&gt;<i> all the changes, (I am a student, and the code base is massive) What I 
</I>&gt;<i> am looking for is a single example and I will do more of them.
</I>
These TODOs may be too difficult to implement and test correctly without 
understanding of smart pointers and associated pitfalls, but you can 
look through past git commits to find similar pointer conversion examples:

* f05e4f37: Upgrade ACLFilledChecklist::request to smart Pointer
* 2d5ac435: Do not use raw pointers to index sourcehash CachePeers
* e7959b56: Do not use raw pointers to index CARP CachePeers
* d603e3c2: Cleanup: make Client::request a Pointer
* a0c227a9: Cleanup: convert MemObject::_reply to ReplyPointer
* c43405e7: Cleanup: convert MemObject::request to Pointer

Disclaimer: I have used commit messages to find the examples above. I 
did not revisit each commit to assess whether it is indeed a good 
example for the remaining TODOs quoted below.

If you decide to convert a raw pointer, my recommendation is to start 
with a class data member that is _not_ used in many places, so that you 
do not have to modify a lot of code. However, that recommendation alone 
is probably enough to avoid the pitfalls often present in such conversions!


HTH,

Alex.


&gt;<i> On Squid's easy to do list it states...
</I>&gt;<i> 
</I>&gt;<i>  1. update a /HttpRequest/&#160;raw pointer to a |HttpRequest::Pointer|.
</I>&gt;<i>     Including all code performing locking on it
</I>&gt;<i>  2. update a |HttpReply|&#160;raw pointer to a |HttpReply::Pointer|.
</I>&gt;<i>     Including all code performing locking on it
</I>&gt;<i>  3. update a |HttpMsg|&#160;raw pointer to a |HttpMsg::Pointer|. Including
</I>&gt;<i>     all code performing locking on it
</I>&gt;<i>  4. update a CBDATA raw pointer to a CbcPointer. Including all code
</I>&gt;<i>     performing validation tests and locking on it.
</I>

</PRE>





<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="027437.html">[squid-users] To Do List (smart pointer examples)
</A></li>
	<LI>Next message (by thread): <A HREF="027439.html">[squid-users] Ubuntu 22.04 LTS repository for Squid 6.13 (rebuilt from sources in Debian)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27438">[ date ]</a>
              <a href="thread.html#27438">[ thread ]</a>
              <a href="subject.html#27438">[ subject ]</a>
              <a href="author.html#27438">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
