<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid 6 with ssl-bump doesn't cache binary content over 100 kb
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%206%20with%20ssl-bump%20doesn%27t%20cache%20binary%0A%20content%20over%20100%20kb&In-Reply-To=%3Cc614d620-2f8a-4504-acfd-7f5fbf3c741b%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027465.html">
   <LINK REL="Next"  HREF="027417.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid 6 with ssl-bump doesn't cache binary content over 100 kb</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%206%20with%20ssl-bump%20doesn%27t%20cache%20binary%0A%20content%20over%20100%20kb&In-Reply-To=%3Cc614d620-2f8a-4504-acfd-7f5fbf3c741b%40measurement-factory.com%3E"
       TITLE="[squid-users] Squid 6 with ssl-bump doesn't cache binary content over 100 kb">rousskov at measurement-factory.com
       </A><BR>
    <I>Tue Feb 25 16:57:33 UTC 2025</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="027465.html">[squid-users] Squid 6 with ssl-bump doesn't cache binary content over 100 kb
</A></li>
        <LI>Next message (by thread): <A HREF="027417.html">[squid-users] Can SQUID change the destination address from ip to hostname?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27466">[ date ]</a>
              <a href="thread.html#27466">[ thread ]</a>
              <a href="subject.html#27466">[ subject ]</a>
              <a href="author.html#27466">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2025-02-25 09:56, Alex Rousskov wrote:
&gt;<i> On 2025-02-25 09:47, Thomas PALFRAY wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> we tried version 6.13 as recommended, but the behavior is the same.
</I>&gt;<i> 
</I>&gt;<i> Thank you for testing v6.13. That test eliminates many suspects.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;&gt;<i> What additional information would you need to understand the the problem 
</I>&gt;<i> 
</I>&gt;<i> For the next step in triage, I can offer a free private review of your 
</I>&gt;<i> cache.log file collected while reproducing the problem
</I>
Thank you for sharing those logs.

AFAICT, the client just closes its TCP connection to Squid after Squid 
successfully sends that client a few HTTP response parts. There are no 
I/O or TLS errors associated with that TCP closure. There are no visible 
timeouts either. Squid has successfully bumped that connection earlier. 
On Squid side, I see no signs of trouble before that client-initiated 
closure. FWIW, the client essentially violates TLS and HTTP protocols by 
closing the connection like that.

Do you control or have access to the client? We need to figure out why 
that client is closing its connection while receiving Squid responses.

Alex.


&gt;&gt;<i> *De&#160;:*squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users-bounces at lists.squid-cache.org</A>&gt; *De la 
</I>&gt;&gt;<i> part de* Thomas PALFRAY
</I>&gt;&gt;<i> *Envoy&#233;&#160;:* lundi 3 f&#233;vrier 2025 17:08
</I>&gt;&gt;<i> *&#192;&#160;:* <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;<i> *Objet&#160;:* [squid-users] Squid 6 with ssl-bump doesn't cache binary 
</I>&gt;&gt;<i> content over 100 kb
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hello everyone,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> My team and I are working on setting up *a squid with ssl-bump* to 
</I>&gt;&gt;<i> cache binary content (jpeg, png, pdf and json) on a remote site over 
</I>&gt;&gt;<i> HTTPS.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The size of the binary content can vary from a few dozen KB to several 
</I>&gt;&gt;<i> hundred MB.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> We had a working HTTP configuration under squid 3.14, but for security 
</I>&gt;&gt;<i> reasons, all our links must now go through HTTPS.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> We've tried configuring Squid 5 and Squid 6, but the behavior 
</I>&gt;&gt;<i> described below is the same for both versions of the tool.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> In fact, we're seeing 200/TCP_MISS_ABORTED codes for content larger 
</I>&gt;&gt;<i> than around 100kb.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> When content sizes are smaller, the expected behaviour occurs and data 
</I>&gt;&gt;<i> is returned from the cache.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On the client side, for content larger than 100kb :
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; * squid 5 returns x-cache = &#8220;MISS&#8221; and x-cache-lookup = &#8220;HIT&#8221;.
</I>&gt;&gt;<i> &#160; * squid 6 returns cache-status = &#8220;url;detail=match&#8221;, which is
</I>&gt;&gt;<i> &#160;&#160;&#160; equivalent if my understanding is correct.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> We first thought it might be linked to the following bug: 
</I>&gt;&gt;<i> _<A HREF="https://bugs.squid-cache.org/show_bug.cgi?id=5214">https://bugs.squid-cache.org/show_bug.cgi?id=5214</A> 
</I>&gt;&gt;<i> &lt;<A HREF="https://bugs.squid-cache.org/show_bug.cgi?id=5214">https://bugs.squid-cache.org/show_bug.cgi?id=5214</A>&gt;_, which encouraged 
</I>&gt;&gt;<i> us to try version 6, but without success.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160; * Is it a configuration problem that we missed?
</I>&gt;&gt;<i> &#160; * Can you help us ?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> HTTP client-side headers returned by squid 6 :
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> //
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /[2025-01-14T08:46:49.875] [TRACE] default - [0/1] getContentStream 
</I>&gt;&gt;<i> (user) header: {/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /&#160; &quot;date&quot;: &quot;Tue, 14 Jan 2025 05:47:30 GMT&quot;,/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /&#160; &quot;server&quot;: &quot;Apache-Chemistry-OpenCMIS/1.2.0_1859862-XXXXX-1&quot;,/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /&#160; &quot;strict-transport-security&quot;: &quot;max-age=15768000&quot;,/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /&quot;x-xss-protection&quot;: &quot;1; mode=block&quot;,/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ///&quot;x-frame-options&quot;: &quot;SAMEORIGIN&quot;,/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /&#160; &quot;x-content-type-options&quot;: &quot;nosniff&quot;,/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /&#160; &quot;access-control-allow-origin&quot;: &quot;*&quot;,/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /&#160; &quot;access-control-expose-headers&quot;: &quot;Content-Disposition&quot;,/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /&#160; &quot;cache-control&quot;: &quot;public, s-maxage=3600, must-revalidate&quot;,/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /&#160; &quot;etag&quot;: 
</I>&gt;&gt;<i> &quot;\&quot;08bd240128b475722db82d36c7ae7f164c37cab4ad2480abae052875fe7bc3bfdfef9996197d40110a13208d39a3db3a789879bc31803c82f25211eeba505455\&quot;&quot;,/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /&#160; &quot;content-disposition&quot;: &quot;inline; filename=FILENAME.jpg&quot;,/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /&#160; &quot;content-type&quot;: &quot;image/jpeg&quot;,/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /&#160; &quot;content-length&quot;: &quot;2069587&quot;,/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /&#160; &quot;content-security-policy&quot;: &quot;default-src 'none'; connect-src 'self'; 
</I>&gt;&gt;<i> font-src 'self' fonts.gstatic.com; img-src blob: 'self'; script-src 
</I>&gt;&gt;<i> 'self' 'unsafe-eval' 'unsafe-inline'; style-src 'self' 'unsafe-inline' 
</I>&gt;&gt;<i> fonts.googleapis.com&quot;,/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> */&#160; &quot;cache-status&quot;: &quot;sv-infra-pxy4;detail=match&quot;,/*
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> */&quot;via&quot;: &quot;1.1 sv-infra-pxy4 (squid/6.10)&quot;,/*
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ///&quot;connection&quot;: &quot;close&quot;/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /}/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /[2025-01-14T08:46:49.875] [INFO] default - [0/1][2] getCS 
</I>&gt;&gt;<i> oId:'369926' sId:*'80669'*name:' filename= FILENAME.jpg' 
</I>&gt;&gt;<i> type:'image/jpeg' size:*'2021.08ko'*res:[via:true hit:false length:true]/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> //
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> //
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> squid 6 acces.log extract:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> //
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> //
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> //
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> full server configuration file :
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> //
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /acl localnet src 0.0.0.1-0.255.255.255&#160;&#160;&#160;&#160;&#160;&#160;&#160; # RFC 1122 &quot;this&quot; 
</I>&gt;&gt;<i> network (LAN)/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /acl localnet src 10.0.0.0/8&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # RFC 1918 local 
</I>&gt;&gt;<i> private network (LAN)/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /acl localnet src 100.64.0.0/10&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # RFC 6598 
</I>&gt;&gt;<i> shared address space (CGN)/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /acl localnet src 169.254.0.0/16 &#160;&#160;&#160;&#160;&#160;&#160; # RFC 3927 link-local 
</I>&gt;&gt;<i> (directly plugged) machines/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /acl localnet src 172.16.0.0/12&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # RFC 1918 
</I>&gt;&gt;<i> local private network (LAN)/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /acl localnet src 192.168.0.0/16&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # RFC 1918 
</I>&gt;&gt;<i> local private network (LAN)/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /acl localnet src fc00::/7&#160;&#160;&#160;&#160;&#160;&#160; &#160; # RFC 4193 local private network 
</I>&gt;&gt;<i> range/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /acl localnet src fe80::/10&#160;&#160;&#160;&#160;&#160; # RFC 4291 link-local (directly 
</I>&gt;&gt;<i> plugged) machines/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> //
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /acl SSL_ports port 443/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /acl Safe_ports port 80&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # http/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /acl Safe_ports port 21&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # ftp/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /acl Safe_ports port 443&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # https/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /acl Safe_ports port 70&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # gopher/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /acl Safe_ports port 210&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # wais/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /acl Safe_ports port 1025-65535&#160;&#160;&#160;&#160;&#160;&#160; # unregistered ports/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /acl Safe_ports port 280&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # http-mgmt/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /acl Safe_ports port 488&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # gss-http/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /acl Safe_ports port 591&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # filemaker/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /acl Safe_ports port 777&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; # multiling http/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> //
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /#ACL pour SmartGED/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /acl smartged-mime req_mime_type -i ^image/jpeg$/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /acl smartged-mime req_mime_type -i ^image/png$/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /acl smartged-mime req_mime_type -i ^application/pdf$/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /acl smartged-mime req_mime_type -i ^application/json$/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> //
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /acl intermediate_fetching transaction_initiator certificate-fetching/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> //
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /http_access deny !Safe_ports/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /http_access deny CONNECT !SSL_ports/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> //
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /# Only allow cachemgr access from localhost/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /http_access allow localhost manager/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /http_access deny manager/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /http_access allow localnet/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /http_access deny all/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> //
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /logformat toto %{%d/%b/%Y:%H:%M:%S}tl.%tu %&gt;a %rm %03Hs/%Ss %6tr %ru 
</I>&gt;&gt;<i> %mt/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> //
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /access_log /var/log/squid/access.log toto/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> //
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /http_port 3128&#160; ssl-bump generate-host-certificates=on 
</I>&gt;&gt;<i> dynamic_cert_mem_cache_size=4MB tls-cert=/etc/squid/ssl_cert/xxxx_.pem 
</I>&gt;&gt;<i> tls-key=/etc/squid/ssl_cert/xxxx_.key 
</I>&gt;&gt;<i> tls-dh=/etc/squid/ssl_cert/dhparam.pem/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /tls_outgoing_options 
</I>&gt;&gt;<i> cipher=ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /sslcrtd_program /usr/lib/squid/security_file_certgen -s 
</I>&gt;&gt;<i> /var/spool/squid/ssl_db -M 20MB/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /sslcrtd_children 5/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /ssl_bump server-first all/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /ssl_bump splice all/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /sslproxy_cert_error allow all/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> //
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /# ACL deny pour les fichiers javascript/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /acl denyjs urlpath_regex \.js/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /# ok deny all requests above/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /cache deny denyjs/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> //
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /# Leave coredumps in the first cache dir/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /coredump_dir /cache1/squid/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> //
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /# Affichage des requetes GET completes dans cache.log/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /strip_query_terms off/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> //
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /cache_mem 20480 MB/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /# d&#233;but d'&#233;viction du cache/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /cache_swap_low 50/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /# aggressivit&#233; maximal de l'algorithme d'&#233;viction du cache/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /cache_swap_high 80/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /# The LRU policies keeps recently referenced objects./
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /cache_replacement_policy lru/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> //
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /#/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /# Add any of your own refresh_pattern entries above these./
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /#/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /refresh_pattern ^ftp:&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 1440&#160;&#160;&#160; 20%&#160;&#160;&#160;&#160; 10080/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /refresh_pattern -i (/cgi-bin/|\?) 0&#160;&#160;&#160;&#160;&#160;&#160; 0%&#160;&#160;&#160;&#160;&#160;&#160;&#160; 0/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /refresh_pattern .&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 0&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 20%&#160;&#160;&#160;&#160; 4320/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> //
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /ftp_user <A HREF="https://lists.squid-cache.org/listinfo/squid-users">_anonymous at xxx.fr</A> &lt;mailto:<A HREF="https://lists.squid-cache.org/listinfo/squid-users">anonymous at xxx.fr</A>&gt;_/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /#acl QUERY urlpath_regex cgi-bin \?/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /#no_cache deny QUERY/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /client_request_buffer_max_size 10240 KB/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /maximum_object_size 1024 MB/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /# to keep object in memory cache/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /maximum_object_size_in_memory 10240 KB/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /#to cause Squid to prefetch the whole file/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /range_offset_limit 16 MB/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /#quick_abort_min -1/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /#D&#233;finition de la taille maximum d'un en-t&#234;te HTTP lors d'une requ&#234;te/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /reply_header_max_size 8192 KB/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /#taille maximum d'un en-t&#234;te de r&#233;ponse HTTP/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /reply_header_max_size 8192 KB/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> //
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /# Uncomment and adjust the following to add a disk cache directory./
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /cache_dir aufs /cache1/squid 1024000 16 256 max-size=16777216/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> //
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> //
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /error_directory /usr/share/squid/errors/fr/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /half_closed_clients off/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /max_filedescriptors 8192/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /forward_max_tries 50/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> //
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /#Affichage du store-id/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /cache_store_log daemon:/var/log/squid/store_daemon.log/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /cache_store_log stdio:/var/log/squid/store_stdio.log/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /#debug_options &quot;ALL,3 33,7 47,7 61,7 85,7&quot;/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /# Log all critical and important messages./
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /#debug_options ALL,1/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /debug_options ALL,3/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> //
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /# Enable SQUID's SNMP/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /snmp_port 3401/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /acl snmppublic snmp_community PASdePUBLIC/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /snmp_access allow snmppublic all/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Best regards,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> *Thomas PALFRAY*
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> squid-users mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">https://lists.squid-cache.org/listinfo/squid-users</A>
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> squid-users mailing list
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
</I>&gt;<i> <A HREF="https://lists.squid-cache.org/listinfo/squid-users">https://lists.squid-cache.org/listinfo/squid-users</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="027465.html">[squid-users] Squid 6 with ssl-bump doesn't cache binary content over 100 kb
</A></li>
	<LI>Next message (by thread): <A HREF="027417.html">[squid-users] Can SQUID change the destination address from ip to hostname?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27466">[ date ]</a>
              <a href="thread.html#27466">[ thread ]</a>
              <a href="subject.html#27466">[ subject ]</a>
              <a href="author.html#27466">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
