<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Need clarifications on custom log timestamps
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Need%20clarifications%20on%20custom%20log%20timestamps&In-Reply-To=%3C583cac24-900d-4638-84fa-8c12a25d55ab%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027463.html">
   <LINK REL="Next"  HREF="027477.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Need clarifications on custom log timestamps</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Need%20clarifications%20on%20custom%20log%20timestamps&In-Reply-To=%3C583cac24-900d-4638-84fa-8c12a25d55ab%40treenet.co.nz%3E"
       TITLE="[squid-users] Need clarifications on custom log timestamps">squid3 at treenet.co.nz
       </A><BR>
    <I>Wed Feb 26 06:58:53 UTC 2025</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="027463.html">[squid-users] Need clarifications on custom log timestamps
</A></li>
        <LI>Next message (by thread): <A HREF="027477.html">[squid-users] Need clarifications on custom log timestamps
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27468">[ date ]</a>
              <a href="thread.html#27468">[ thread ]</a>
              <a href="subject.html#27468">[ subject ]</a>
              <a href="author.html#27468">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 26/02/25 00:33, BENJAMIN DELANNOY wrote:
&gt;<i>  &gt; Please detail what you mean by &quot;choice&quot; or &quot;decision&quot;. For example, do
</I>&gt;&gt;<i> you want to stop the timer when Squid makes its final http_access decision?
</I>&gt;<i> 
</I>&gt;<i> I mean I want to monitor the latency on what I could manage : the 
</I>&gt;<i> communication between client &amp; squid, the time squid uses to process 
</I>&gt;<i> requests. But not the time spent by the destination server as I don't 
</I>&gt;<i> manage it.
</I>&gt;<i> This could be multiple monitors if 1 is too complicated or not possible. 
</I>&gt;<i> So yes for example a timer that stop when Squid makes its 
</I>&gt;<i> final&#160;http_access decision (in case of http or bumped https) or its 
</I>&gt;<i> final ssl_bump splice decision.
</I>&gt;<i> 
</I>
In theory what you want is the %busy_time logformat.

However, the calculations for that are still apparently inaccurate. So 
you would be best also logging these for comparison measures:

  %dt = DNS latency

  %&lt;tt - %&lt;pt = forwarding-latency
     .. the time spent by Squid fetching the response.
     .. excluding time waiting for it to arrive from the upstream server
     .. also excluding anything that happens while the server is 
delivering response (eg. for responses &gt;4KB).

  %tr - %&lt;pt = total Squid latency
     .. including delays from parallel traffic
     .. excluding same as forwarding-latency above


HTH
Amos

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="027463.html">[squid-users] Need clarifications on custom log timestamps
</A></li>
	<LI>Next message (by thread): <A HREF="027477.html">[squid-users] Need clarifications on custom log timestamps
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27468">[ date ]</a>
              <a href="thread.html#27468">[ thread ]</a>
              <a href="subject.html#27468">[ subject ]</a>
              <a href="author.html#27468">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
