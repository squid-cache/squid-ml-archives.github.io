<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Cache dir
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Cache%20dir&In-Reply-To=%3CCA%2BY8hcNxyytGZ8qXsXnbmr%3DVdaWVXkvBgnrwjV1HDCap91XDpw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027375.html">
   <LINK REL="Next"  HREF="027377.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Cache dir</H1>
    <B>Francesco Chemolli</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Cache%20dir&In-Reply-To=%3CCA%2BY8hcNxyytGZ8qXsXnbmr%3DVdaWVXkvBgnrwjV1HDCap91XDpw%40mail.gmail.com%3E"
       TITLE="[squid-users] Cache dir">gkinkie at gmail.com
       </A><BR>
    <I>Fri Jan 10 08:25:28 UTC 2025</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="027375.html">[squid-users] Cache dir
</A></li>
        <LI>Next message (by thread): <A HREF="027377.html">[squid-users] Cache dir
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27376">[ date ]</a>
              <a href="thread.html#27376">[ thread ]</a>
              <a href="subject.html#27376">[ subject ]</a>
              <a href="author.html#27376">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, Jan 10, 2025 at 7:22&#8239;AM Jonathan Lee &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">jonathanlee571 at gmail.com</A>&gt;
wrote:

&gt;<i>
</I>&gt;<i> After trying every setting inside of Squid I thought I should ask I have
</I>&gt;<i> 4bg ram and 128GB M.2 SSD onboard disk I am using a NVMe secondary Intel
</I>&gt;<i> Optane M.2 drive for my cache.
</I>

What OS are you using? How many CPU cores do you want to dedicate to Squid?
How much memory?


&gt;<i> What is a good recommendation for Hard Drive Cache System I use UFS but
</I>&gt;<i> AUFS
</I>

UFS is the slowest option; AUFS or rock are considered the fastest


&gt;<i> inside of the Squid definitive guide says it is way faster like formula
</I>&gt;<i> one versus UFS the options I have are UFS AUFS DISKD, I have 16 Level 1
</I>&gt;<i> directories
</I>

What filesystem are you using? For modern filesystems (ext4, btrfs, apfs)
this parameter is much less meaningful than 10 years ago as they store
directories as trees instead of lists.


&gt;<i> my memory replacement policy is LRU for memory cache it seems to run
</I>&gt;<i> better with that, my options for memory replacement policy are HEAP GDSF I
</I>&gt;<i> assume any HEAP will require more memory, HEAP LFUDF, HEAP LRU and just LRU.
</I>

I think so but shouldn't be significantly more


&gt;<i> I also have a Cache Replacement policy with the same options I have it set
</I>&gt;<i> to Heap LFUDA that is the default. Squid Memory cache Size I have set to
</I>&gt;<i> default 64MB with max object size 256kb for the memory, for disk I have
</I>&gt;<i> 256GB available I only have it set to 32000MB or 3.2GB for fear of
</I>&gt;<i> overloading the RAM when it fills up.
</I>

4gb is plenty of memory; what other workloads do you want to run on that
machine?  You can also tune these parameters after checking behaviour in
practice, no need to fix them once and for all now


&gt;<i> for level 1 directories I can have 4,8,16,32,64,128,256 each layer one
</I>&gt;<i> containers 256 sub directories so this could hog memory if you did
</I>&gt;<i> 256*256=65,536 I imagine not ok with only 4GB I have onboard memory I
</I>&gt;<i> can&#8217;t make it any bigger. I use this with SSL intercept it does cache and
</I>&gt;<i> works well I just want to get rid of the lag on news websites.
</I>

number of directories has no impact on memory use. Just be aware that if
you change it, you need to wipe and rebuild your cache.


&gt;<i> rewrite process children I have it set max 25  with process children
</I>&gt;<i> startup at 12 and idle at 8
</I>&gt;<i> SSL certificate deamon children I have it set to start 10
</I>

Sure.

it runs well I have tried many different things as you know from all the
&gt;<i> emails, I am sorry it is the most fascinating software to me. Code that
</I>&gt;<i> runs as fast as the internet. Is there any thing I can do to make it go
</I>&gt;<i> faster? Some website have a lag fox news yahoo only do on the SSL intercept
</I>&gt;<i> devices the splice devices never have any issues, its lighting fast for
</I>&gt;<i> them. I thought I should finally ask after 4-5 years of doing changes. I
</I>&gt;<i> have got it to work as fast as I can on my own, time to ask the community.
</I>&gt;<i>
</I>
I think it boils down mainly to how much memory you're willing to dedicate
to squid. More memory more performance. Apart from that, they main advice
is to chang from UFS to just about anything else

-- 
    Francesco
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20250110/bffa55ea/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20250110/bffa55ea/attachment.htm</A>&gt;
</PRE>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="027375.html">[squid-users] Cache dir
</A></li>
	<LI>Next message (by thread): <A HREF="027377.html">[squid-users] Cache dir
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27376">[ date ]</a>
              <a href="thread.html#27376">[ thread ]</a>
              <a href="subject.html#27376">[ subject ]</a>
              <a href="author.html#27376">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
