<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] Squid url redirector and DoH
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20url%20redirector%20and%20DoH&In-Reply-To=%3C0ef201db63b4%2401194ce0%24034be6a0%24%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027379.html">
   <LINK REL="Next"  HREF="027383.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] Squid url redirector and DoH</H1>
    <B>jonathanlee571 at gmail.com</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20Squid%20url%20redirector%20and%20DoH&In-Reply-To=%3C0ef201db63b4%2401194ce0%24034be6a0%24%40gmail.com%3E"
       TITLE="[squid-users] Squid url redirector and DoH">jonathanlee571 at gmail.com
       </A><BR>
    <I>Fri Jan 10 23:04:29 UTC 2025</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="027379.html">[squid-users] Squid url redirector and DoH
</A></li>
        <LI>Next message (by thread): <A HREF="027383.html">[squid-users] Squid url redirector and DoH
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27380">[ date ]</a>
              <a href="thread.html#27380">[ thread ]</a>
              <a href="subject.html#27380">[ subject ]</a>
              <a href="author.html#27380">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>acl deny_rep_mime_doh rep_mime_type application/dns-message

for example would this work? I could get rid of a huge list and save memory if this solves my wackamole problem. I do not see anything on the Squid website but in theory that could resolve it right?

-----Original Message-----
From: <A HREF="https://lists.squid-cache.org/listinfo/squid-users">jonathanlee571 at gmail.com</A> &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">jonathanlee571 at gmail.com</A>&gt; 
Sent: Friday, January 10, 2025 2:54 PM
To: 'squid-users' &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
Subject: RE: Squid url redirector and DoH

I have this hair brained idea to use the media type and get rid of the endless list. 

Could this work?

<A HREF="https://www.iana.org/assignments/media-types/media-types.xhtml">https://www.iana.org/assignments/media-types/media-types.xhtml</A>

This lists mime types for doh with rfc 8484 and 8427 so technically could I just create a mime block for DoH and stop creating endless lists?

<A HREF="https://www.iana.org/assignments/media-types/application/dns-message">https://www.iana.org/assignments/media-types/application/dns-message</A>
<A HREF="https://www.iana.org/assignments/media-types/application/dns+json">https://www.iana.org/assignments/media-types/application/dns+json</A>

<A HREF="https://wiki.squid-cache.org/ConfigExamples/BlockingMimeTypes">https://wiki.squid-cache.org/ConfigExamples/BlockingMimeTypes</A>



-----Original Message-----
From: Jonathan Lee &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">jonathanlee571 at gmail.com</A>&gt; 
Sent: Friday, January 10, 2025 2:38 PM
To: squid-users &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>&gt;
Subject: Squid url redirector and DoH

Hello fellow Squid users, can you please help? I was wondering about this for years, I have a massive block list with DoH servers. Do you really need to block DoH if you want Squid to use a specific dns? Let&#8217;s say you are using a dns over tls, to Google or cloudflare and your system sometimes wants the DoH one.one.one.one is blocking that url really needed? My list is so big it is like playing wackamole with DoH. If I block it I see all the url requests if not I see IP addresses sometimes in the get requests. I must have a ACL with thousands and thousands of DoH servers in it. 

What is recommended with sites that want DoH however clients must use Squid per firewall ACLs? 
Sent from my iPhone


</PRE>















<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="027379.html">[squid-users] Squid url redirector and DoH
</A></li>
	<LI>Next message (by thread): <A HREF="027383.html">[squid-users] Squid url redirector and DoH
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27380">[ date ]</a>
              <a href="thread.html#27380">[ thread ]</a>
              <a href="subject.html#27380">[ subject ]</a>
              <a href="author.html#27380">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
