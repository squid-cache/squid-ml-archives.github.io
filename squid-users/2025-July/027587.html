<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] (no subject)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%28no%20subject%29&In-Reply-To=%3CCAELz2Fa%3DrrgJ-9P24XDNxrP%3DuPNNHa4RTBLd3znn5dADXaTmBg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="027588.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] (no subject)</H1>
    <B>MAB IT System</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20%28no%20subject%29&In-Reply-To=%3CCAELz2Fa%3DrrgJ-9P24XDNxrP%3DuPNNHa4RTBLd3znn5dADXaTmBg%40mail.gmail.com%3E"
       TITLE="[squid-users] (no subject)">mab_itsystem at machaero.com
       </A><BR>
    <I>Thu Jul 10 10:39:31 UTC 2025</I>
    <P><UL>
        
        <LI>Next message (by thread): <A HREF="027588.html">[squid-users] WCCP: duplicate security definition
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27587">[ date ]</a>
              <a href="thread.html#27587">[ thread ]</a>
              <a href="subject.html#27587">[ subject ]</a>
              <a href="author.html#27587">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Dear Squid team,

I&#8217;m currently working on deploying Squid as a transparent proxy using
WCCPv2 with a Cisco ASA firewall.

The ASA selects a router ID x.x.x.x automatically and uses GRE
encapsulation. However, in my Squid configuration, I&#8217;m using
wccp2_forwarding_method gre.

I&#8217;ve confirmed that:
- UDP traffic on port 2048 between Squid and the ASA is working correctly.
- Squid receives WCCP messages (`HERE_I_AM`, `I_SEE_YOU`) but logs errors
like:
  `ERROR: Ignoring WCCPv2 message: check failed: duplicate security
definition`
- ASA logs show that Squid is visible but marked as &#8220;NOT Usable&#8221; and gets
0% hash allocation.
- I&#8217;m running Squid version 5.9 on Linux Ubuntu.

Questions:
1. Is there a known issue when using `wccp2_forwarding_method gre` with
devices that support GRE?
2. Could Squid gracefully fallback or detect ASA&#8217;s redirect mode
automatically?
3. Is there a specific Squid version better suited for WCCPv2 with GRE only?

Any insights, suggestions, or recommended configuration would be greatly
appreciated.

Thank you for your support and great work on Squid.

Best regards,
Assoham AWOUTOU
MACHAERO

-- 
******************************************************************************
The information contained herein may be company confidential and 
proprietary. The information is intended only for the use of the named 
individual or entity. If you are not the intended recipient, the employee 
or agent responsible for delivering it to the intended recipient, you are 
hereby notified that any use, dissemination, distribution or copying of 
this communication is strictly prohibited. If you have received this 
communication in error, please notify the sender (and delete it from your 
systems) immediately. The information herein is not warranted to be free of 
virus or any other defect that may affect the recipient's computer system 
and it is your responsibility to carry out appropriate virus checks of this 
email and attachments (if any).
******************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20250710/733aee7d/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20250710/733aee7d/attachment.htm</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message (by thread): <A HREF="027588.html">[squid-users] WCCP: duplicate security definition
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27587">[ date ]</a>
              <a href="thread.html#27587">[ thread ]</a>
              <a href="subject.html#27587">[ subject ]</a>
              <a href="author.html#27587">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
