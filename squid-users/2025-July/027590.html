<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] DNS round-robin behaviour
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20DNS%20round-robin%20behaviour&In-Reply-To=%3C2929e2b6-26e3-48ab-b57c-1f659c6a13fa%40treenet.co.nz%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027589.html">
   <LINK REL="Next"  HREF="027592.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] DNS round-robin behaviour</H1>
    <B>Amos Jeffries</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20DNS%20round-robin%20behaviour&In-Reply-To=%3C2929e2b6-26e3-48ab-b57c-1f659c6a13fa%40treenet.co.nz%3E"
       TITLE="[squid-users] DNS round-robin behaviour">squid3 at treenet.co.nz
       </A><BR>
    <I>Fri Jul 11 12:07:06 UTC 2025</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="027589.html">[squid-users] DNS round-robin behaviour
</A></li>
        <LI>Next message (by thread): <A HREF="027592.html">[squid-users] DNS round-robin behaviour
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27590">[ date ]</a>
              <a href="thread.html#27590">[ thread ]</a>
              <a href="subject.html#27590">[ subject ]</a>
              <a href="author.html#27590">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>pPS, Please start a new thread for each topic.

On 11/07/25 21:54, paolo.prinx wrote:
&gt;<i> Hello all,
</I>&gt;<i>  &#160; &#160; quick question, how does Squid behave when it receives a DNS 
</I>&gt;<i> response containing multiple IP addresses? Does it pick a random one in 
</I>&gt;<i> the list, or does it stick to a certain order?
</I>
The order given by DNS is the order used. Except that when both are 
available IPv6 are preferred over IPv4.


&gt;<i> 
</I>&gt;<i> In our config, we have squid pointing to a pool of dnsdist resolvers, 
</I>&gt;<i> that implement a local packet cache with a 300-second TTL. We are seeing 
</I>&gt;<i> unbalanced traffic distributions, was wondering if there is anything we 
</I>&gt;<i> should configure on the Squid side, or if we should instead look to 
</I>&gt;<i> change the responses returned by the DNS resolver.
</I>&gt;<i> 
</I>&gt;<i> Any suggestion?
</I>&gt;<i> 
</I>
DNS alone is not sufficient to balance traffic. There are many factors 
involved including HTTP multiplexing, pipelines, variability of message 
sizes, and network RTT on each connection.

The best way to balance traffic is with proper QoS tools. DNS and HTTP 
proxy are optimized towards service speed - not load redundancy (which 
actually reduces peak performance).


HTH
Amos

</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="027589.html">[squid-users] DNS round-robin behaviour
</A></li>
	<LI>Next message (by thread): <A HREF="027592.html">[squid-users] DNS round-robin behaviour
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27590">[ date ]</a>
              <a href="thread.html#27590">[ thread ]</a>
              <a href="subject.html#27590">[ subject ]</a>
              <a href="author.html#27590">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
