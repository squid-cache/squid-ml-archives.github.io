<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] User got domain login dialog box prompt, when number of user more than 250++
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20User%20got%20domain%20login%20dialog%20box%20prompt%2C%0A%20when%20number%20of%20user%20more%20than%20250%2B%2B&In-Reply-To=%3C1683469084.717849.1750155677332%40mail.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027572.html">
   <LINK REL="Next"  HREF="027577.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] User got domain login dialog box prompt, when number of user more than 250++</H1>
    <B>wong237ma at yahoo.com</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20User%20got%20domain%20login%20dialog%20box%20prompt%2C%0A%20when%20number%20of%20user%20more%20than%20250%2B%2B&In-Reply-To=%3C1683469084.717849.1750155677332%40mail.yahoo.com%3E"
       TITLE="[squid-users] User got domain login dialog box prompt, when number of user more than 250++">wong237ma at yahoo.com
       </A><BR>
    <I>Tue Jun 17 10:21:17 UTC 2025</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="027572.html">[squid-users] User got domain login dialog box prompt, when number of user more than 250++
</A></li>
        <LI>Next message (by thread): <A HREF="027577.html">[squid-users] User got domain login dialog box prompt, when number of user more than 250++
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27573">[ date ]</a>
              <a href="thread.html#27573">[ thread ]</a>
              <a href="subject.html#27573">[ subject ]</a>
              <a href="author.html#27573">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE> Hi Amos,
can help to give configure example for external helper&#160;ext_kerberos_ldap_group_acl, since this help is faster compare to&#160;ext_wbinfo_group_acl.
Thank you.
    On Tuesday, June 17, 2025 at 03:41:58 AM GMT+8, Amos Jeffries &lt;<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid3 at treenet.co.nz</A>&gt; wrote:  
 
 On 16/06/25 16:25, wong237ma wrote:
&gt;<i> Hi Amos,
</I>&gt;<i> 
</I>&gt;<i> Thank for your replied.
</I>&gt;<i> 
</I>&gt;<i>&#160; &gt; FTR; the login prompt is not coming from Squid. The client Browser
</I>&gt;<i>&#160; &gt; decides where to get credentials from - the popup is one source, current
</I>&gt;<i>&#160; &gt; machine login another, there may be sources as well.
</I>&gt;<i> 
</I>&gt;<i> Our laptop is joined domain. I thought browser will use AD ticket TGT, 
</I>&gt;<i> (which I can view by klist)? not like this?
</I>&gt;<i> 
</I>&gt;<i>&#160; &gt; Since you are SSL-Bump'ing traffic - whatever result the initial CONNECT
</I>&gt;<i>&#160; &gt; request credentials were given when the TLS began will be used until
</I>&gt;<i>&#160; &gt; that TLS connection closes.
</I>&gt;<i> 
</I>&gt;<i> I configure Bumping github website only, the rest of the traffic not 
</I>&gt;<i> decrypt.
</I>&gt;<i> 
</I>&gt;<i>&#160; &gt; Secondly the auth helper &quot;negative-ttl=900&quot; (from config below) value
</I>&gt;<i>&#160; &gt; will make Squid only check for different results on new connections
</I>&gt;<i>&#160; &gt; started 900+ seconds after the first one was rejected.
</I>&gt;<i> 
</I>&gt;<i> squid-cache by default is one hour, so I think I configure 15 mins, 
</I>&gt;<i> which less compare to one hour, not sure whether correct or not.
</I>&gt;<i> 
</I>&gt;<i>&#160; &gt; Do you still actually **need** NTLM ?
</I>&gt;<i>&#160; &gt; It has been deprecated for 19 years already, and Windows software has
</I>&gt;<i>&#160; &gt; progressively been removing the ability to use it.
</I>&gt;<i> 
</I>&gt;<i> Yes, we are using Kerberos, NTLM and basic are for those legacy 
</I>&gt;<i> application, I think.
</I>
Nod. Just pointing out that its something to check if actually needed. 
Removal will help avoid problems - if possible.


&gt;<i> 
</I>&gt;<i>&#160; &gt; The Kerberos auth helper bundled with Squid delivers &quot;group=&quot;
</I>&gt;<i>&#160; &gt; annotations back to Squid that can be quickly checked instead of using
</I>&gt;<i>&#160; &gt; extra helper lookups.
</I>&gt;<i> 
</I>&gt;<i> you mean i can use this helper: ext_kerberos_ldap_group_acl, am I right? 
</I>
No, I literally mean the auth_param helper (negotiate_kerberos_auth) is 
producing &quot;group=&quot; values that can be checked with 'note' type ACL 
instead of 'external' type ACL .

That will halve the amount of helpers running, reduce Squid memory needs 
by whatever those helpers were using, halve the load on ActiveDirectory, 
and halve the transaction time for access to the proxy.
IF any of those things were contributing to your problem (likely) then 
you should see the problem move from 200-ish up to something higher.


&gt;<i> I will try out, since ChatGPT also mention auth faster compare to 
</I>&gt;<i> ext_wbinfo_group_acl.
</I>&gt;<i> 
</I>&gt;<i> Question: Is this main problem?
</I>&gt;<i> 
</I>&gt;<i>&#160; &gt; FYI, notice that Squid is automatically including all the config files
</I>&gt;<i>&#160; &gt; in the directory /etc/squid/conf.d/
</I>&gt;<i> 
</I>&gt;<i> yes, it is just a easier manage for me.
</I>&gt;<i> 
</I>&gt;<i> I have go through your replied several times and I try to digest.
</I>&gt;<i> My main problem here is that when user hit around 200++, user will 
</I>&gt;<i> prompt out proxy login dialog box ask user to login.
</I>&gt;<i> 
</I>&gt;<i> Is there anyway to find out issues?
</I>

You mentioned nothing occuring in the Squid logs. So that easy way is 
closed.

The alternative is to watch;

&#160; a) how much memory is being used by Squid and helpers to see if the 
problem is running out of resources,

&#160; b) traffic to find out what types of credentials are being sent to 
Squid and not being accepted (rejection may be the trigger for dialog 
boxes),

&#160; c) check logs on your ActiveDirectory for similar things and also to 
see if there is a limit being reached there.


HTH
Amos

_______________________________________________
squid-users mailing list
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">squid-users at lists.squid-cache.org</A>
<A HREF="https://lists.squid-cache.org/listinfo/squid-users">https://lists.squid-cache.org/listinfo/squid-users</A>
  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.squid-cache.org/pipermail/squid-users/attachments/20250617/3f803789/attachment.htm">http://lists.squid-cache.org/pipermail/squid-users/attachments/20250617/3f803789/attachment.htm</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="027572.html">[squid-users] User got domain login dialog box prompt, when number of user more than 250++
</A></li>
	<LI>Next message (by thread): <A HREF="027577.html">[squid-users] User got domain login dialog box prompt, when number of user more than 250++
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27573">[ date ]</a>
              <a href="thread.html#27573">[ thread ]</a>
              <a href="subject.html#27573">[ subject ]</a>
              <a href="author.html#27573">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
