<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [squid-users] assertion failed: Queue.cc:388: &quot;EX&quot;
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20assertion%20failed%3A%20Queue.cc%3A388%3A%20%22EX%22&In-Reply-To=%3C371203f3-da75-4d72-891b-3287adcb2145%40measurement-factory.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027493.html">
   <LINK REL="Next"  HREF="027495.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[squid-users] assertion failed: Queue.cc:388: &quot;EX&quot;</H1>
    <B>Alex Rousskov</B> 
    <A HREF="mailto:squid-users%40lists.squid-cache.org?Subject=Re%3A%20%5Bsquid-users%5D%20assertion%20failed%3A%20Queue.cc%3A388%3A%20%22EX%22&In-Reply-To=%3C371203f3-da75-4d72-891b-3287adcb2145%40measurement-factory.com%3E"
       TITLE="[squid-users] assertion failed: Queue.cc:388: &quot;EX&quot;">rousskov at measurement-factory.com
       </A><BR>
    <I>Thu Mar  6 14:11:42 UTC 2025</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="027493.html">[squid-users] assertion failed: Queue.cc:388: &quot;EX&quot;
</A></li>
        <LI>Next message (by thread): <A HREF="027495.html">[squid-users] assertion failed: Queue.cc:388: &quot;EX&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27494">[ date ]</a>
              <a href="thread.html#27494">[ thread ]</a>
              <a href="subject.html#27494">[ subject ]</a>
              <a href="author.html#27494">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2025-03-06 08:59, Amos Jeffries wrote:
&gt;<i> On 6/03/25 19:17, Andrey K wrote:
</I>&gt;&gt;<i> Hello,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have a similar&#160;configuration: two SMP squids running on the same OEL 
</I>&gt;&gt;<i> host.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> They were built with different configurations: with different 
</I>&gt;&gt;<i> installation path prefixes and different&#160;names of binary files: squid 
</I>&gt;&gt;<i> and squid.user and they listen to different ports.
</I>&gt;&gt;<i> They are launched&#160;from two different services:squid.service and 
</I>&gt;&gt;<i> squid.user.service with the service Type=forking:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160;&#160;&#160; ExecStart=/usr/sbin/squid -sYC
</I>&gt;&gt;<i> &#160;&#160;&#160; ExecStart=/sbin/squid.user -f /etc/squid.user/squid.conf
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have not experienced any troubles with this configuration yet.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /&gt; Please be aware that &quot;squid -n ...&quot; is a REQUIREMENT for running/
</I>&gt;&gt;<i> /multiple Squid instances on the same machine regardless of what features
</I>&gt;&gt;<i> are used./
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Could you please&#160;tell me if I should use the -n option in the 
</I>&gt;&gt;<i> ExecStart strings?
</I>&gt;&gt;<i> The arguments of the options should be the service names?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> &#160;&#160;&#160; ExecStart=/usr/sbin/squid -sYC -n squid.service
</I>&gt;&gt;<i> &#160;&#160;&#160; ExecStart=/sbin/squid.user -f /etc/squid.user/squid.conf -n
</I>&gt;&gt;<i> &#160;&#160;&#160; squid.user.service
</I>&gt;&gt;<i>
</I>&gt;<i> Yes you should. The different ./configure options has helped you avoid 
</I>&gt;<i> major issues, but some may still appear.
</I>
I agree. Moreover, I do not understand how your two SMP Squids could 
work correctly without distinct service names because (on OEL) I would 
expect them to share the same shared memory segments (which they must 
not do to remain distinct instances).

What is your Squid version? Can you tell how your Squids name their 
shared memory segment &quot;files&quot;? For example, on some Linux OSes, those 
segments could be in /var/run/shm/ with names like 
squid-tr_map_anchors.shm  and squid-tr_spaces.shm.


Thank you,

Alex.

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="027493.html">[squid-users] assertion failed: Queue.cc:388: &quot;EX&quot;
</A></li>
	<LI>Next message (by thread): <A HREF="027495.html">[squid-users] assertion failed: Queue.cc:388: &quot;EX&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27494">[ date ]</a>
              <a href="thread.html#27494">[ thread ]</a>
              <a href="subject.html#27494">[ subject ]</a>
              <a href="author.html#27494">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.squid-cache.org/listinfo/squid-users">More information about the squid-users
mailing list</a><br>
</body></html>
