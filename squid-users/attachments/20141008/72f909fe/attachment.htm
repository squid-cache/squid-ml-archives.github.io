<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;style=&quot;font-family:arial,sans-serif;font-size:13px&quot;&gt;Hello,&lt;div&gt;I&nbsp;have&nbsp;squid&nbsp;configured&nbsp;to&nbsp;forward&nbsp;requests&nbsp;to&nbsp;two&nbsp;parents,&nbsp;like&nbsp;following:&lt;/div&gt;&lt;div&gt;cache_peer&nbsp;host1&nbsp;XXX&nbsp;YYY&nbsp;proxy-only&nbsp;weighted-round-robin&nbsp;weight=1 &lt;/div&gt;&lt;div&gt;cache_peer&nbsp;host2&nbsp;ZZZ&nbsp;BBB&nbsp; proxy-only&nbsp;weighted-round-robin&nbsp;weight=1 &lt;br&gt;&lt;/div&gt;&lt;div&gt;But&nbsp;when&nbsp;one&nbsp;of&nbsp;parents&nbsp;is&nbsp;not&nbsp;available&nbsp;squid&nbsp;can&#39;t&nbsp;determine&nbsp;that&nbsp;it&#39;s&nbsp;down&nbsp;and&nbsp;still&nbsp;redirect&nbsp;to&nbsp;down&nbsp;host.&lt;/div&gt;&lt;div&gt;In&nbsp;cache.log&nbsp;i&nbsp;see:&lt;/div&gt;&lt;div&gt;neighbourUp:&nbsp;neighbourUp:&nbsp;UP&nbsp;host2:BBB&lt;/div&gt;&lt;div&gt;But&nbsp;squid&nbsp;service&nbsp;is&nbsp;stoped&nbsp;on&nbsp;host2.&lt;/div&gt;&lt;div&gt;I&nbsp;was&nbsp;trying&nbsp;different&nbsp;configuration&nbsp;directives&nbsp;for&nbsp;cache_peer&nbsp;but&nbsp;without&nbsp;any&nbsp;luck.&nbsp;After&nbsp;that&nbsp;I&nbsp;started&nbsp;debuger&nbsp;and&nbsp;after&nbsp;hours&nbsp;I&nbsp;really&nbsp;cant&nbsp;understand&nbsp;in&nbsp;which&nbsp;case&nbsp;squid&nbsp;will&nbsp;check&nbsp;parent&nbsp;for&nbsp;arability... &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;--&lt;/div&gt;&lt;div&gt;Squid&nbsp;Cache:&nbsp;Version&nbsp;3.3.13&lt;/div&gt;&lt;div&gt;OpenSUSE&nbsp;13.1&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
