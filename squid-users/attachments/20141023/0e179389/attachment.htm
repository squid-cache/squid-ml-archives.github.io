<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hi.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Before&nbsp;I&nbsp;have&nbsp;compiled&nbsp;squid-3.3.3&nbsp;with&nbsp;--enable-ecap&nbsp;option&nbsp;successfully&nbsp;on&nbsp;cygwin.&lt;/div&gt;&lt;div&gt;but&nbsp;then&nbsp;I&nbsp;faild&nbsp;to&nbsp;compile&nbsp;ecap-adapter&nbsp;module.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Now,&nbsp;I&nbsp;compiled&nbsp;it&nbsp;as&nbsp;.dll&nbsp;successfully&nbsp;by&nbsp;writing&nbsp;compile&nbsp;and&nbsp;link&nbsp;command&nbsp;by&nbsp;myself.&lt;/div&gt;&lt;div&gt;------------------------compile&nbsp;and&nbsp;link&nbsp;command-------------------------------------&lt;/div&gt;&lt;div&gt;g++&nbsp;-DHAVE_CONFIG_H&nbsp;-I../src&nbsp;-I/usr/local/include&nbsp;-g&nbsp;-O3&nbsp;-Wall&nbsp;-Wwrite-strings&nbsp;-Woverloaded-virtual&nbsp;-pipe&nbsp;-MT&nbsp;adapter_modifying.lo&nbsp;-MD&nbsp;-MP&nbsp;-MF&nbsp;.deps/adapter_modifying.Tpo&nbsp;-c&nbsp;adapter_modifying.cc&nbsp; -DDLL_EXPORT&nbsp;-DPIC&nbsp;-o&nbsp;adapter_modifying.o&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;g++&nbsp;-shared&nbsp;-o&nbsp;cygmodify.dll&nbsp;-Wl,--out-implib=libmodify.dll.a&nbsp;-Wl,--export-all-symbols&nbsp;-Wl,--enable-auto-import&nbsp;-Wl,--whole-archive&nbsp;adapter_minimal.o&nbsp;-Wl,--no-whole-archive&nbsp;/usr/local/lib/libecap.a&lt;/div&gt;&lt;div&gt;------------------------compile&nbsp;and&nbsp;link&nbsp;command&nbsp;end-------------------------------------&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;But,&nbsp;when&nbsp;I&nbsp;configure&nbsp;squid&nbsp;to&nbsp;load&nbsp;it,&nbsp;it&nbsp;does&#39;t&nbsp;work&nbsp;well.&lt;/div&gt;&lt;div&gt;Here&nbsp;are&nbsp;the&nbsp;message&nbsp;than&nbsp;squid&nbsp;output.&lt;/div&gt;&lt;div&gt;-----------------------squid&nbsp;message-------------------------------------------&lt;/div&gt;&lt;div&gt;HDM@HDM-PC&nbsp;/cygdrive/c/squdid/sbin&lt;/div&gt;&lt;div&gt;$&nbsp;./squid.exe&nbsp;-N&nbsp;-C&nbsp;-d1&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;WARNING&nbsp;cache_mem&nbsp;is&nbsp;larger&nbsp;than&nbsp;total&nbsp;disk&nbsp;cache&nbsp;space!&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;Starting&nbsp;Squid&nbsp;Cache&nbsp;version&nbsp;3.3.3&nbsp;for&nbsp;i686-pc-cygwin...&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;Process&nbsp;ID&nbsp;2040&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;Process&nbsp;Roles:&nbsp;master&nbsp;worker&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;With&nbsp;3072&nbsp;file&nbsp;descriptors&nbsp;available&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;Initializing&nbsp;IP&nbsp;Cache...&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;DNS&nbsp;Socket&nbsp;created&nbsp;at&nbsp;[::],&nbsp;FD&nbsp;4&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;DNS&nbsp;Socket&nbsp;created&nbsp;at&nbsp;0.0.0.0,&nbsp;FD&nbsp;5&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;Adding&nbsp;nameserver&nbsp;8.8.8.8&nbsp;from&nbsp;squid.conf&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;Logfile:&nbsp;opening&nbsp;log&nbsp;daemon:/cygdrive/c/squdid/var/logs/access.log&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;Logfile&nbsp;Daemon:&nbsp;opening&nbsp;log&nbsp;/cygdrive/c/squdid/var/logs/access.log&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;WARNING:&nbsp;no_suid:&nbsp;setuid(0):&nbsp;(22)&nbsp;Invalid&nbsp;argument&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;WARNING:&nbsp;no_suid:&nbsp;setuid(0):&nbsp;(22)&nbsp;Invalid&nbsp;argument&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;Unlinkd&nbsp;pipe&nbsp;opened&nbsp;on&nbsp;FD&nbsp;11&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;Store&nbsp;logging&nbsp;disabled&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;Swap&nbsp;maxSize&nbsp;102400&nbsp;+&nbsp;262144&nbsp;KB,&nbsp;estimated&nbsp;28041&nbsp;objects&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;Target&nbsp;number&nbsp;of&nbsp;buckets:&nbsp;1402&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;Using&nbsp;8192&nbsp;Store&nbsp;buckets&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;Max&nbsp;Mem&nbsp; size:&nbsp;262144&nbsp;KB&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;Max&nbsp;Swap&nbsp;size:&nbsp;102400&nbsp;KB&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;Rebuilding&nbsp;storage&nbsp;in&nbsp;/usr/local/squid/var/cache/squid&nbsp;(dirty&nbsp;log)&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;Using&nbsp;Least&nbsp;Load&nbsp;store&nbsp;dir&nbsp;selection&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;Set&nbsp;Current&nbsp;Directory&nbsp;to&nbsp;/usr/local/squid/var/cache/squid&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;Loaded&nbsp;Icons.&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;HTCP&nbsp;Disabled.&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;Loading&nbsp;Squid&nbsp;module&nbsp;from&nbsp;&#39;/usr/local/lib/cygmodify.dll&#39;&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;Squid&nbsp;plugin&nbsp;modules&nbsp;loaded:&nbsp;1&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;Adaptation&nbsp;support&nbsp;is&nbsp;on&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;WARNING:&nbsp;configured&nbsp;ecap_service&nbsp;was&nbsp;not&nbsp;loaded:&nbsp;ecap://&lt;a&nbsp;href=&quot;http://e-cap.org/ecap/services/sample/modifying&quot;&gt;e-cap.org/ecap/services/sample/modifying&lt;/a&gt;&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;Accepting&nbsp;HTTP&nbsp;Socket&nbsp;connections&nbsp;at&nbsp;local=[::]:3128&nbsp;remote=[::]&nbsp;FD&nbsp;14&nbsp;flags=9&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;Done&nbsp;reading&nbsp;/usr/local/squid/var/cache/squid&nbsp;swaplog&nbsp;(8&nbsp;entries)&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;Finished&nbsp;rebuilding&nbsp;storage&nbsp;from&nbsp;disk.&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;8&nbsp;Entries&nbsp;scanned&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp;Invalid&nbsp;entries.&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp;With&nbsp;invalid&nbsp;flags.&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;8&nbsp;Objects&nbsp;loaded.&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp;Objects&nbsp;expired.&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp;Objects&nbsp;cancelled.&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp;Duplicate&nbsp;URLs&nbsp;purged.&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp;Swapfile&nbsp;clashes&nbsp;avoided.&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp; &nbsp;Took&nbsp;0.02&nbsp;seconds&nbsp;(512.82&nbsp;objects/sec).&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp;Beginning&nbsp;Validation&nbsp;Procedure&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp; &nbsp;Completed&nbsp;Validation&nbsp;Procedure&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp; &nbsp;Validated&nbsp;8&nbsp;Entries&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:30|&nbsp; &nbsp;store_swap_size&nbsp;=&nbsp;364.00&nbsp;KB&lt;/div&gt;&lt;div&gt;2014/10/22&nbsp;19:29:31|&nbsp;storeLateRelease:&nbsp;released&nbsp;0&nbsp;objects&lt;/div&gt;&lt;div&gt;-----------------------squid&nbsp;message&nbsp;end-------------------------------------------&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;think&nbsp;that&nbsp;the&nbsp;.dll&nbsp;file&nbsp;should&nbsp;be&nbsp;not&nbsp;OK.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Please&nbsp;give&nbsp;me&nbsp;some&nbsp;hints&nbsp;and&nbsp;the&nbsp;location&nbsp;of&nbsp;src&nbsp;where&nbsp;squid&nbsp;loads&nbsp;ecap-adapter&nbsp;module.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;want&nbsp;debug&nbsp;it.&nbsp;Thanks.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;HDM1991&lt;/div&gt;&lt;/div&gt;<br>

</tt>
