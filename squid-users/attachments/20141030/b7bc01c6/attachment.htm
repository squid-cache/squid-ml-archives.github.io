<tt>
&lt;div&nbsp;class=&quot;markdown&quot;&gt;<br>
&lt;p&nbsp;dir=&quot;auto&quot;&gt;Hi&nbsp;Markus,&lt;/p&gt;<br>
<br>
&lt;p&nbsp;dir=&quot;auto&quot;&gt;Sorry&nbsp;about&nbsp;the&nbsp;delay,&nbsp;but&nbsp;I&nbsp;had&nbsp;a&nbsp;couple&nbsp;of&nbsp;urgent&nbsp;fires&nbsp;to&nbsp;put&nbsp;out.&nbsp;Anyway,&nbsp;I'm&nbsp;back&nbsp;to&nbsp;vanquishing&nbsp;this&nbsp;hellish&nbsp;beast&nbsp;that&nbsp;is&nbsp;Squid&nbsp;with&nbsp;Kerberos.&lt;/p&gt;<br>
<br>
&lt;p&nbsp;dir=&quot;auto&quot;&gt;I&nbsp;did&nbsp;a&nbsp;little&nbsp;more&nbsp;testing&nbsp;and&nbsp;I've&nbsp;concluded&nbsp;the&nbsp;following:&lt;/p&gt;<br>
<br>
&lt;p&nbsp;dir=&quot;auto&quot;&gt;&lt;strong&gt;Windows&nbsp;8.1&lt;/strong&gt;&lt;br&gt;<br>
Everything&nbsp;seems&nbsp;to&nbsp;work&nbsp;just&nbsp;fine.&nbsp;In&nbsp;debug&nbsp;mode,&nbsp;I&nbsp;see&nbsp;kerberos&nbsp;information&nbsp;being&nbsp;thrown&nbsp;around&nbsp;in&nbsp;cache&nbsp;log&nbsp;and&nbsp;I&nbsp;can&nbsp;surf&nbsp;sites&nbsp;just&nbsp;fine.&nbsp;Oddly&nbsp;enough,&nbsp;I&nbsp;don't&nbsp;see&nbsp;any&nbsp;traffic&nbsp;on&nbsp;port&nbsp;88&nbsp;with&nbsp;Wireshark&nbsp;(I&nbsp;could&nbsp;just&nbsp;be&nbsp;doing&nbsp;something&nbsp;stupid&nbsp;there).&lt;/p&gt;<br>
<br>
&lt;p&nbsp;dir=&quot;auto&quot;&gt;&lt;strong&gt;Windows&nbsp;7&lt;/strong&gt;&lt;br&gt;<br>
Same&nbsp;as&nbsp;before,&nbsp;I&nbsp;simply&nbsp;can't&nbsp;surf&nbsp;any&nbsp;site&nbsp;that&nbsp;requires&nbsp;authentication.&nbsp;If&nbsp;I&nbsp;surf&nbsp;to&nbsp;a&nbsp;site&nbsp;that&nbsp;I&nbsp;explicitly&nbsp;set&nbsp;not&nbsp;to&nbsp;require&nbsp;auth,&nbsp;then&nbsp;all&nbsp;is&nbsp;fine.&nbsp;If&nbsp;however&nbsp;I&nbsp;try&nbsp;a&nbsp;site&nbsp;that&nbsp;requires&nbsp;it,&nbsp;it&nbsp;simply&nbsp;fails&nbsp;and&nbsp;goes&nbsp;in&nbsp;to&nbsp;a&nbsp;loop&nbsp;of&nbsp;requeste&nbsp;credentials,&nbsp;I&nbsp;enter&nbsp;them,&nbsp;it&nbsp;asks&nbsp;again&nbsp;and&nbsp;again&nbsp;until&nbsp;it&nbsp;fails.&nbsp;I've&nbsp;attached&nbsp;the&nbsp;wireshark&nbsp;capture&nbsp;for&nbsp;you&nbsp;to&nbsp;look&nbsp;into.&lt;/p&gt;<br>
<br>
&lt;p&nbsp;dir=&quot;auto&quot;&gt;I&nbsp;also&nbsp;noticed&nbsp;something&nbsp;off&nbsp;in&nbsp;cache.log.&nbsp;When&nbsp;things&nbsp;fail,&nbsp;it&nbsp;seems&nbsp;as&nbsp;though&nbsp;no&nbsp;information&nbsp;is&nbsp;being&nbsp;sent&nbsp;over&nbsp;about&nbsp;the&nbsp;user.&nbsp;I&nbsp;see&nbsp;this&nbsp;is&nbsp;the&nbsp;log:&lt;/p&gt;<br>
<br>
&lt;pre&gt;&lt;code&gt;negotiate_kerberos_auth.cc(315):&nbsp;pid=1456&nbsp;:2014/10/30&nbsp;12:21:47|&nbsp;negotiate_kerberos_auth:&nbsp;DEBUG:&nbsp;Got&nbsp;'YR&nbsp;YIIHLw---&lt;cut&gt;---fmcqUg2C0CjXimVz8Lx5lNux7qfmaxGvLX4Mm4OgllOsTRB7Ng=='&nbsp;from&nbsp;squid&nbsp;(length:&nbsp;2463).<br>
<br>
negotiate_kerberos_auth.cc(378):&nbsp;pid=1456&nbsp;:2014/10/30&nbsp;12:21:47|&nbsp;negotiate_kerberos_auth:&nbsp;DEBUG:&nbsp;Decode&nbsp;'YIIHLw---&lt;cut&gt;---fmcqUg2C0CjXimVz8Lx5lNux7qfmaxGvLX4Mm4OgllOsTRB7Ng=='&nbsp;(decoded&nbsp;length:&nbsp;1843).<br>
negotiate_kerberos_auth.cc(200):&nbsp;pid=1456&nbsp;:2014/10/30&nbsp;12:21:47|&nbsp;negotiate_kerberos_auth:&nbsp;ERROR:&nbsp;gss_accept_sec_context()&nbsp;failed:&nbsp;Unspecified&nbsp;GSS&nbsp;failure.&nbsp;&nbsp;Minor&nbsp;code&nbsp;may&nbsp;provide&nbsp;more&nbsp;information.<br>
2014/10/30&nbsp;12:21:47|&nbsp;ERROR:&nbsp;Negotiate&nbsp;Authentication&nbsp;validating&nbsp;user.&nbsp;Error&nbsp;returned&nbsp;'BH&nbsp;gss_accept_sec_context()&nbsp;failed:&nbsp;Unspecified&nbsp;GSS&nbsp;failure.&nbsp;&nbsp;Minor&nbsp;code&nbsp;may&nbsp;provide&nbsp;more&nbsp;information.&nbsp;'<br>
&lt;/code&gt;&lt;/pre&gt;<br>
<br>
&lt;p&nbsp;dir=&quot;auto&quot;&gt;Notice&nbsp;that&nbsp;there&nbsp;is&nbsp;no&nbsp;username&nbsp;after&nbsp;decoding&nbsp;&lt;code&gt;=='&lt;/code&gt;&nbsp;from&nbsp;squid...&lt;/p&gt;<br>
<br>
&lt;p&nbsp;dir=&quot;auto&quot;&gt;In&nbsp;successful&nbsp;casses,&nbsp;I&nbsp;see&nbsp;something&nbsp;akin&nbsp;to:&lt;/p&gt;<br>
<br>
&lt;pre&gt;&lt;code&gt;negotiate_kerberos_auth.cc(315):&nbsp;pid=1463&nbsp;:2014/10/30&nbsp;12:54:44|&nbsp;negotiate_kerberos_auth:&nbsp;DEBUG:&nbsp;Got&nbsp;'YR&nbsp;YIIGnw---&lt;cut&gt;---vSSEll5Cl5H2pngowpplrKoJwLbahwnoSkFOzWqFoNq9qv1IXcyi4Ym7PbMadwDq4FpUdfDA84D6eGxospx8aPmJKZ0AuQMrtw=='&nbsp;from&nbsp;squid&nbsp;(length:&nbsp;2271).<br>
negotiate_kerberos_auth.cc(378):&nbsp;pid=1463&nbsp;:2014/10/30&nbsp;12:54:44|&nbsp;negotiate_kerberos_auth:&nbsp;DEBUG:&nbsp;Decode&nbsp;'YIIGnw---&lt;cut&gt;---vSSEll5Cl5H2pngowpplrKoJwLbahwnoSkFOzWqFoNq9qv1IXcyi4Ym7PbMadwDq4FpUdfDA84D6eGxospx8aPmJKZ0AuQMrtw=='&nbsp;(decoded&nbsp;length:&nbsp;1699).<br>
negotiate_kerberos_auth.cc(462):&nbsp;pid=1463&nbsp;:2014/10/30&nbsp;12:54:45|&nbsp;negotiate_kerberos_auth:&nbsp;DEBUG:&nbsp;AF&nbsp;oYGgMIGdoAMKAQChCwYJKoZIhvcSAQICooGIBIGFYIGCBgkqhkiG9xIBAgICAG9zMHGgAwIBBaEDAgEPomUwY6ADAgEXolwEWnc+iBxbOhzQ36fAORmtdcn09xrBAmdvisZ2BxTPeuj8IxMULD9BJylCXHE8DVqqgyhS1Gzy1Y+BfyPvKyugBo1NnY3r7o3wYCnmbGli2NgcdrhQekHg1fbk8w==&nbsp;echironteste<br>
&lt;/code&gt;&lt;/pre&gt;<br>
<br>
&lt;p&nbsp;dir=&quot;auto&quot;&gt;Notice&nbsp;the&nbsp;extra&nbsp;line&nbsp;with&nbsp;username&nbsp;(echironteste).&nbsp;I'm&nbsp;not&nbsp;sure&nbsp;if&nbsp;this&nbsp;is&nbsp;relevant,&nbsp;but&nbsp;it&nbsp;does&nbsp;look&nbsp;like&nbsp;it.&lt;/p&gt;<br>
<br>
&lt;p&nbsp;dir=&quot;auto&quot;&gt;&lt;strong&gt;Windows&nbsp;XP&lt;/strong&gt;&lt;br&gt;<br>
Just&nbsp;like&nbsp;Windows&nbsp;8.1,&nbsp;surfing&nbsp;worked&nbsp;fine&nbsp;and&nbsp;I&nbsp;did&nbsp;see&nbsp;kerberos&nbsp;activity&nbsp;in&nbsp;cache.log,&nbsp;however&nbsp;I&nbsp;saw&nbsp;nothing&nbsp;being&nbsp;captured&nbsp;by&nbsp;Wireshark&nbsp;on&nbsp;port&nbsp;88&nbsp;or&nbsp;even&nbsp;widening&nbsp;the&nbsp;query,&nbsp;nothing&nbsp;for&nbsp;krb5rpc.&nbsp;What's&nbsp;happening&nbsp;here,&nbsp;anybody&nbsp;have&nbsp;an&nbsp;idea?&lt;/p&gt;<br>
<br>
&lt;p&nbsp;dir=&quot;auto&quot;&gt;Cheers&nbsp;all&nbsp;and&nbsp;thanks&nbsp;for&nbsp;the&nbsp;help.&lt;/p&gt;<br>
<br>
&lt;p&nbsp;dir=&quot;auto&quot;&gt;On&nbsp;27&nbsp;Oct&nbsp;2014,&nbsp;at&nbsp;20:53,&nbsp;Markus&nbsp;Moeller&nbsp;wrote:&lt;/p&gt;<br>
<br>
&lt;blockquote&gt;<br>
&lt;p&nbsp;dir=&quot;auto&quot;&gt;Hi&nbsp;Pedro,&lt;/p&gt;<br>
<br>
&lt;p&nbsp;dir=&quot;auto&quot;&gt;Can&nbsp;you&nbsp;capture&nbsp;the&nbsp;traffic&nbsp;from&nbsp;one&nbsp;Windows&nbsp;7&nbsp;on&nbsp;XP&nbsp;client&nbsp;on&nbsp;port&nbsp;88&nbsp;(&nbsp;just&nbsp;after&nbsp;the&nbsp;login&nbsp;before&nbsp;access&nbsp;a&nbsp;website&nbsp;via&nbsp;squid&nbsp;until&nbsp;successful&nbsp;or&nbsp;unsuccessful&nbsp;accessing&nbsp;the&nbsp;website)&nbsp;using&nbsp;wireshark&nbsp;?&nbsp;&nbsp;&nbsp;Send&nbsp;me&nbsp;the&nbsp;.cap&nbsp;files&nbsp;to&nbsp;check.&lt;/p&gt;<br>
<br>
&lt;p&nbsp;dir=&quot;auto&quot;&gt;Markus&lt;/p&gt;<br>
&lt;/blockquote&gt;<br>
<br>
&lt;/div&gt;
</tt>
