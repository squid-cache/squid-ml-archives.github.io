<tt>
&lt;html&gt;&lt;body&gt;&lt;div&nbsp;style=&quot;color:#000;&nbsp;background-color:#fff;&nbsp;font-family:HelveticaNeue,&nbsp;Helvetica&nbsp;Neue,&nbsp;Helvetica,&nbsp;Arial,&nbsp;Lucida&nbsp;Grande,&nbsp;sans-serif;font-size:24px&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;id=&quot;yui_3_16_0_1_1415765045085_6748&quot;&gt;&lt;span&gt;hello&nbsp;peter&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;id=&quot;yui_3_16_0_1_1415765045085_6751&quot;&nbsp;dir=&quot;ltr&quot;&gt;&lt;span&nbsp;id=&quot;yui_3_16_0_1_1415765045085_6750&quot;&gt;can&nbsp;you&nbsp;check&nbsp;if&nbsp;your&nbsp;squid&nbsp;does&nbsp;gre&nbsp;return?&nbsp;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;id=&quot;yui_3_16_0_1_1415765045085_6752&quot;&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;span&nbsp;id=&quot;yui_3_16_0_1_1415765045085_6750&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;id=&quot;yui_3_16_0_1_1415765045085_6753&quot;&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;span&nbsp;id=&quot;yui_3_16_0_1_1415765045085_6750&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;id=&quot;yui_3_16_0_1_1415765045085_6754&quot;&nbsp;dir=&quot;ltr&quot;&gt;&lt;span&nbsp;id=&quot;yui_3_16_0_1_1415765045085_6750&quot;&gt;It&nbsp;is&nbsp;unrelated&nbsp;to&nbsp;your&nbsp;issue&nbsp;though&nbsp;:)&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;id=&quot;yui_3_16_0_1_1415765045085_6755&quot;&gt;&nbsp;&lt;/div&gt;&lt;div&nbsp;id=&quot;yui_3_16_0_1_1415765045085_6758&quot;&nbsp;class=&quot;signature&quot;&gt;&lt;div&nbsp;id=&quot;yui_3_16_0_1_1415765045085_6757&quot;&gt;&lt;strong&nbsp;id=&quot;yui_3_16_0_1_1415765045085_6756&quot;&gt;Thanks&nbsp;and&nbsp;regards&lt;br&gt;&lt;br&gt;Yogesh&nbsp;Gawankar&lt;/strong&gt;&lt;/div&gt;&lt;div&nbsp;id=&quot;yui_3_16_0_1_1415765045085_6759&quot;&nbsp;style=&quot;BACKGROUND-COLOR:transparent;FONT-STYLE:normal;FONT-FAMILY:arial,&nbsp;helvetica,&nbsp;clean,&nbsp;sans-serif;COLOR:rgb(0,0,0);FONT-SIZE:13px;&quot;&gt;&lt;br&gt;&lt;strong&nbsp;id=&quot;yui_3_16_0_1_1415765045085_6760&quot;&gt;&lt;var&nbsp;id=&quot;yui-ie-cursor&quot;&gt;&lt;/var&gt;&lt;/strong&gt;&lt;/div&gt;&lt;/div&gt;&nbsp;&lt;div&nbsp;class=&quot;qtdSeparateBR&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;display:&nbsp;block;&quot;&nbsp;class=&quot;yahoo_quoted&quot;&gt;&nbsp;&lt;div&nbsp;style=&quot;font-family:&nbsp;HelveticaNeue,&nbsp;Helvetica&nbsp;Neue,&nbsp;Helvetica,&nbsp;Arial,&nbsp;Lucida&nbsp;Grande,&nbsp;sans-serif;&nbsp;font-size:&nbsp;24px;&quot;&gt;&nbsp;&lt;div&nbsp;style=&quot;font-family:&nbsp;HelveticaNeue,&nbsp;Helvetica&nbsp;Neue,&nbsp;Helvetica,&nbsp;Arial,&nbsp;Lucida&nbsp;Grande,&nbsp;sans-serif;&nbsp;font-size:&nbsp;16px;&quot;&gt;&nbsp;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&nbsp;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;On&nbsp;Wednesday,&nbsp;November&nbsp;12,&nbsp;2014&nbsp;9:02&nbsp;AM,&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;squid3@treenet.co.nz&gt;&nbsp;wrote:&lt;br&gt;&nbsp;&lt;/font&gt;&nbsp;&lt;/div&gt;&nbsp;&nbsp;&lt;br&gt;&lt;br&gt;&nbsp;&lt;div&nbsp;class=&quot;y_msg_container&quot;&gt;-----BEGIN&nbsp;PGP&nbsp;SIGNED&nbsp;MESSAGE-----&lt;br&nbsp;clear=&quot;none&quot;&gt;Hash:&nbsp;SHA1&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;On&nbsp;12/11/2014&nbsp;7:47&nbsp;a.m.,&nbsp;Peter&nbsp;Gross&nbsp;wrote:&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;Hi,&nbsp;I&nbsp;am&nbsp;a&nbsp;new&nbsp;user&nbsp;of&nbsp;Squid&nbsp;and&nbsp;would&nbsp;first&nbsp;like&nbsp;to&nbsp;thank&nbsp;the&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;developers&nbsp;for&nbsp;this&nbsp;excellent&nbsp;software.&nbsp;This&nbsp;is&nbsp;my&nbsp;first&nbsp;post&nbsp;to&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;the&nbsp;mailing&nbsp;list&nbsp;...&nbsp;I&nbsp;have&nbsp;been&nbsp;tasked&nbsp;with&nbsp;setting&nbsp;up&nbsp;quite&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;restrictive&nbsp;web&nbsp;access&nbsp;control&nbsp;at&nbsp;work.&nbsp;I&nbsp;plan&nbsp;to&nbsp;use&nbsp;an&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;intercepting&nbsp;squid&nbsp;proxy&nbsp;with&nbsp;SSL&nbsp;bump.&nbsp;There&nbsp;will&nbsp;also&nbsp;be&nbsp;WCCPv2&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;to/from&nbsp;a&nbsp;Cisco&nbsp;IOS&nbsp;router.&nbsp;Since&nbsp;this&nbsp;is&nbsp;quite&nbsp;a&nbsp;bit&nbsp;of&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;complexity,&nbsp;I&nbsp;though&nbsp;it&nbsp;prudent&nbsp;to&nbsp;start&nbsp;slowly,&nbsp;in&nbsp;steps.&nbsp;So&nbsp;first&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;--&nbsp;to&nbsp;get&nbsp;my&nbsp;feet&nbsp;wet&nbsp;--&nbsp;I&nbsp;set&nbsp;up&nbsp;squid&nbsp;(version&nbsp;3.4.8,&nbsp;built&nbsp;using&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;rpmbuild&nbsp;from&nbsp;the&nbsp;src&nbsp;rpm&nbsp;from&nbsp;ngtech)&nbsp;on&nbsp;a&nbsp;home&nbsp;linux&nbsp;server&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;(Centos&nbsp;5.11&nbsp;--&nbsp;no&nbsp;Cisco&nbsp;at&nbsp;home)&nbsp;which&nbsp;is&nbsp;also&nbsp;the&nbsp;firewall&nbsp;router&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;for&nbsp;my&nbsp;home&nbsp;network.&nbsp;I&nbsp;also&nbsp;decided&nbsp;to&nbsp;start&nbsp;out&nbsp;with&nbsp;plain&nbsp;vanilla&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;proxying&nbsp;(no&nbsp;interception&nbsp;--&nbsp;use&nbsp;browser&nbsp;setting).&nbsp;This&nbsp;worked&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;fine.&nbsp;I&nbsp;then&nbsp;tested&nbsp;HTTP&nbsp;interception&nbsp;by&nbsp;changing&nbsp;squid.conf&nbsp;from:&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;http_port&nbsp;3128&nbsp;-to-&nbsp;http_port&nbsp;3128&nbsp;intercept&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;Please&nbsp;use&nbsp;a&nbsp;second&nbsp;http_port&nbsp;with&nbsp;a&nbsp;different&nbsp;number&nbsp;for&nbsp;each&nbsp;input&lt;br&nbsp;clear=&quot;none&quot;&gt;&quot;mode&quot;.&nbsp;Squid&nbsp;needs&nbsp;at&nbsp;least&nbsp;one&nbsp;forward-proxy&nbsp;port&nbsp;for&nbsp;things&nbsp;like&lt;br&nbsp;clear=&quot;none&quot;&gt;icons&nbsp;URLs&nbsp;in&nbsp;error&nbsp;pages&nbsp;-&nbsp;3128&nbsp;is&nbsp;the&nbsp;port&nbsp;number&nbsp;W3C&nbsp;allocated&nbsp;for&lt;br&nbsp;clear=&quot;none&quot;&gt;that.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;and&nbsp;adding&nbsp;the&nbsp;following&nbsp;rule&nbsp;to&nbsp;my&nbsp;shorewall&nbsp;firewall:&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;REDIRECT:info&nbsp;&nbsp;&nbsp;loc:192.168.101.9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3128&nbsp;&nbsp;&nbsp;&nbsp;tcp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;I&nbsp;wanted&nbsp;to&nbsp;test&nbsp;intercepting&nbsp;just&nbsp;one&nbsp;host&nbsp;before&nbsp;turning&nbsp;it&nbsp;on&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;for&nbsp;all&nbsp;hosts&nbsp;and&nbsp;wireless&nbsp;devices&nbsp;in&nbsp;my&nbsp;network.&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;192.168.101.9&nbsp;is&nbsp;another&nbsp;Centos&nbsp;PC&nbsp;on&nbsp;my&nbsp;network.&nbsp;Squid&nbsp;is&nbsp;running&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;on&nbsp;192.168.101.253.&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;The&nbsp;interception&nbsp;seemed&nbsp;to&nbsp;work&nbsp;fine&nbsp;...&nbsp;access.log&nbsp;showed&nbsp;lots&nbsp;of&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;successful&nbsp;proxy&nbsp;activity.&nbsp;Then&nbsp;came&nbsp;the&nbsp;problem:&nbsp;going&nbsp;to&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;a&nbsp;shape=&quot;rect&quot;&nbsp;href=&quot;https://www.google.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;https://www.google.com&nbsp;&lt;/a&gt;failed&nbsp;(not&nbsp;every&nbsp;time,&nbsp;but&nbsp;frequently).&nbsp;If&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;I&nbsp;turned&nbsp;off&nbsp;the&nbsp;REDIRECT&nbsp;line&nbsp;in&nbsp;the&nbsp;shorewall&nbsp;rules&nbsp;file&nbsp;and&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;restarted&nbsp;shorewall,&nbsp;no&nbsp;problem.&nbsp;This&nbsp;seemed&nbsp;very&nbsp;peculiar&nbsp;because&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;no&nbsp;HTTPS&nbsp;traffic&nbsp;should&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;proxy.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;Correct.&nbsp;Very&nbsp;perculiar.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;Here&nbsp;are&nbsp;the&nbsp;errors&nbsp;that&nbsp;showed&nbsp;up&nbsp;in&nbsp;cache.log&nbsp;when&nbsp;redirection&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;(NAT-ing)&nbsp;was&nbsp;on:&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;2014/11/11&nbsp;11:03:42&nbsp;kid1|&nbsp;ERROR:&nbsp;NF&nbsp;getsockopt(ORIGINAL_DST)&nbsp;failed&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;on&nbsp;local=192.168.101.253:3128&nbsp;remote=192.168.101.9:34165&nbsp;FD&nbsp;11&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;flags=33:&nbsp;(92)&nbsp;Protocol&nbsp;not&nbsp;available&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;That&nbsp;is&nbsp;forward-proxy&nbsp;traffic&nbsp;going&nbsp;to&nbsp;the&nbsp;port&nbsp;with&nbsp;intercept&nbsp;on&nbsp;it.&lt;br&nbsp;clear=&quot;none&quot;&gt;Separating&nbsp;the&nbsp;ports&nbsp;should&nbsp;help&nbsp;you&nbsp;identify&nbsp;if&nbsp;this&nbsp;is&nbsp;error&nbsp;pages&lt;br&nbsp;clear=&quot;none&quot;&gt;embeded&nbsp;objects&nbsp;or&nbsp;not.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;Amos&lt;br&nbsp;clear=&quot;none&quot;&gt;-----BEGIN&nbsp;PGP&nbsp;SIGNATURE-----&lt;br&nbsp;clear=&quot;none&quot;&gt;Version:&nbsp;GnuPG&nbsp;v2.0.22&nbsp;(MingW32)&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;iQEcBAEBAgAGBQJUYtSvAAoJELJo5wb/XPRjcJ0H/jeEbRpFJYp0v5nfTWlwdOTV&lt;br&nbsp;clear=&quot;none&quot;&gt;ajA2SpQ+3GY0s8iPX0FJnl2mFSfNVs5V+515/iOSGfEUhIS/+qGyWCqIjA79tTHy&lt;br&nbsp;clear=&quot;none&quot;&gt;dTx9eKOc1boF/7nadgfFl/60rpJprNfuosh9iIhkDShC3bNzz3y5lcPVyPi4bhKD&lt;br&nbsp;clear=&quot;none&quot;&gt;wkG/dT5GdUdVTVn1aA1cojebrJ2SUMe/NMyFdEADIyOLSNsDT000MMB4Mr3VnVBA&lt;br&nbsp;clear=&quot;none&quot;&gt;68nq6wdGdnK0/ydm/OvErruVgPqQGP/IvpdLaHw0+2ck2fYRlzgB9+6P1an24rDA&lt;br&nbsp;clear=&quot;none&quot;&gt;hgsn0sZ/MfIxJd/biC5Pk0gnNzapVI+n4E2NIx+F0aN/y2Bgn0+AncvEqKnSS3U=&lt;br&nbsp;clear=&quot;none&quot;&gt;=tp1A&lt;br&nbsp;clear=&quot;none&quot;&gt;-----END&nbsp;PGP&nbsp;SIGNATURE-----&lt;div&nbsp;class=&quot;yqt1393407857&quot;&nbsp;id=&quot;yqtfd33095&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;_______________________________________________&lt;br&nbsp;clear=&quot;none&quot;&gt;squid-users&nbsp;mailing&nbsp;list&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;a&nbsp;shape=&quot;rect&quot;&nbsp;ymailto=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;a&nbsp;shape=&quot;rect&quot;&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;/div&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&nbsp;&nbsp;&lt;/div&gt;&nbsp;&lt;/div&gt;&nbsp;&nbsp;&lt;/div&gt;&nbsp;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
