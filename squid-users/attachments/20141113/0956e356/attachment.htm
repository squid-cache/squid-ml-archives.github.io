<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;Hi&nbsp;Amos,&lt;br&gt;&lt;br&gt;Thanks&nbsp;for&nbsp;your&nbsp;reply. &nbsp;Let&#39;s&nbsp;say&nbsp;I&nbsp;have&nbsp;the&nbsp;following&nbsp;cache_peer&nbsp;lines&nbsp;in&nbsp;(B),&nbsp;and&nbsp;the&nbsp;address&nbsp;for&nbsp;(C)&nbsp;is&nbsp;&quot;&lt;a&nbsp;href=&quot;http://forward-proxy.example.com:3128&quot;&gt;forward-proxy.example.com:3128&lt;/a&gt;&quot;.&lt;br&gt;&lt;br&gt;&lt;/div&gt;cache_peer   &nbsp;&lt;a&nbsp;href=&quot;http://origin-x.example.com&quot;&gt;origin-x.example.com&lt;/a&gt;   &nbsp;parent&nbsp;443&nbsp;0&nbsp;no-query&nbsp;originserver&nbsp;ssl&lt;br&gt;cache_peer   &nbsp;&lt;a&nbsp;href=&quot;http://origin-y.example.com&quot;&gt;origin-y.example.com&lt;/a&gt;   &nbsp;parent&nbsp;443&nbsp;0&nbsp;no-query&nbsp;originserver&nbsp;ssl&lt;br&gt;cache_peer   &nbsp;&lt;a&nbsp;href=&quot;http://origin-z.example.com&quot;&gt;origin-z.example.com&lt;/a&gt;   &nbsp;parent&nbsp;443&nbsp;0&nbsp;no-query&nbsp;originserver&nbsp;ssl&lt;br&gt;&lt;br&gt;&lt;/div&gt;What&nbsp;would&nbsp;be&nbsp;the&nbsp;syntax&nbsp;to&nbsp;configure&nbsp;(B)&nbsp;to&nbsp;use&nbsp;&quot;&lt;a&nbsp;href=&quot;http://forward-proxy.example.com:3128&quot;&gt;forward-proxy.example.com:3128&lt;/a&gt;&quot;&nbsp;(C)&nbsp;as&nbsp;the&nbsp;forward&nbsp;proxy&nbsp;to&nbsp;the&nbsp;origin&nbsp;servers&nbsp;(D)&nbsp;?&lt;br&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;again,&lt;br&gt;Hector&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Nov&nbsp;13,&nbsp;2014&nbsp;at&nbsp;4:13&nbsp;PM,&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&nbsp;target=&quot;_blank&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;-----BEGIN&nbsp;PGP&nbsp;SIGNED&nbsp;MESSAGE-----&lt;br&gt;<br>
Hash:&nbsp;SHA1&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
On&nbsp;14/11/2014&nbsp;10:36&nbsp;a.m.,&nbsp;Hector&nbsp;Chan&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;Basically,&nbsp;what&nbsp;I&nbsp;am&nbsp;looking&nbsp;for&nbsp;is&nbsp;whether&nbsp;it&#39;s&nbsp;possible&nbsp;to&nbsp;set&nbsp;up&lt;br&gt;<br>
&gt;&nbsp;the&nbsp;following:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Client&nbsp;(A)&nbsp;--&gt;&nbsp;Squid&nbsp;as&nbsp;Reverse&nbsp;Proxy&nbsp;(B)&nbsp;--&gt;&nbsp;Squid&nbsp;as&nbsp;Forward&lt;br&gt;<br>
&gt;&nbsp;Proxy&nbsp;(C)&nbsp;--&gt;&nbsp;Origin&nbsp;Servers&nbsp;Depending&nbsp;on&nbsp;Client&nbsp;Request&nbsp;URI&nbsp;(D)&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Depending&nbsp;on&nbsp;the&nbsp;client&nbsp;request&nbsp;from&nbsp;(A),&nbsp;(B)&nbsp;could&nbsp;route&nbsp;the&lt;br&gt;<br>
&gt;&nbsp;request&nbsp;to&nbsp;different&nbsp;origin&nbsp;servers&nbsp;(multiple&nbsp;cache_peer&nbsp;lines).&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;request&nbsp;has&nbsp;to&nbsp;go&nbsp;through&nbsp;(C)&nbsp;to&nbsp;reach&nbsp;(D),&nbsp;as&nbsp;(C)&nbsp;is&nbsp;the&nbsp;only&lt;br&gt;<br>
&gt;&nbsp;way&nbsp;out&nbsp;of&nbsp;the&nbsp;network&nbsp;to&nbsp;the&nbsp;internet. &nbsp;Moreover,&nbsp;the&nbsp;logic&nbsp;of&lt;br&gt;<br>
&gt;&nbsp;figuring&nbsp;out&nbsp;where&nbsp;to&nbsp;go&nbsp;to&nbsp;lies&nbsp;in&nbsp;(C).&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;know&nbsp;it&#39;s&nbsp;kind&nbsp;of&nbsp;a&nbsp;weird&nbsp;setup,&nbsp;but,&nbsp;unfortunately,&nbsp;we&nbsp;do&nbsp;not&lt;br&gt;<br>
&gt;&nbsp;have&nbsp;access&nbsp;or&nbsp;control&nbsp;of&nbsp;(A)&nbsp;and&nbsp;(C).&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;Nothing&nbsp;weird&nbsp;about&nbsp;that&nbsp;at&nbsp;all.&nbsp;It&nbsp;is&nbsp;a&nbsp;perfectly&nbsp;normal&nbsp;CDN&nbsp;proxy&lt;br&gt;<br>
chain.&nbsp;The&nbsp;only&nbsp;potentially&nbsp;tricky&nbsp;bit&nbsp;will&nbsp;be&nbsp;getting&nbsp;the&nbsp;domain&lt;br&gt;<br>
owner&nbsp;to&nbsp;add&nbsp;your&nbsp;reverse-proxy&nbsp;IP&nbsp;address&nbsp;to&nbsp;the&nbsp;domain.&lt;br&gt;<br>
&lt;br&gt;<br>
Forward/reverse&nbsp;are&nbsp;*input*&nbsp;modes,&nbsp;indicating&nbsp;the&nbsp;HTTP&nbsp;syntax&nbsp;expected&lt;br&gt;<br>
and&nbsp;resulting&nbsp;behaviour.&nbsp;Any&nbsp;type&nbsp;of&nbsp;proxy&nbsp;can&nbsp;be&nbsp;configured&nbsp;with&nbsp;a&lt;br&gt;<br>
cache_peer&nbsp;for&nbsp;*output*.&lt;br&gt;<br>
&lt;br&gt;<br>
Only&nbsp;the&nbsp;interception&nbsp;proxy&nbsp;have&nbsp;problems&nbsp;with&nbsp;cache_peer&nbsp;sometimes,&lt;br&gt;<br>
because&nbsp;their&nbsp;very&nbsp;existence&nbsp;is&nbsp;a&nbsp;violation&nbsp;of&nbsp;the&nbsp;protocol.&lt;br&gt;<br>
&lt;br&gt;<br>
Amos&lt;br&gt;<br>
&lt;br&gt;<br>
-----BEGIN&nbsp;PGP&nbsp;SIGNATURE-----&lt;br&gt;<br>
Version:&nbsp;GnuPG&nbsp;v2.0.22&nbsp;(MingW32)&lt;br&gt;<br>
&lt;br&gt;<br>
iQEcBAEBAgAGBQJUZUkXAAoJELJo5wb/XPRj3F8H/2OIGI+RGJuJCWmH13cCmbdZ&lt;br&gt;<br>
jA4GZDYU8QgGPx6eUJ5kCVQPi31nnkNKtfv5WFfhetj7syYj40ow+C0DDaUCsPT/&lt;br&gt;<br>
udVBLMqA/qaoEYkT6q6mTu7D5xio/Gsd+SjBmPG7w6mJx6YiAceoP7/61/7EKZNA&lt;br&gt;<br>
vMTFfCuubh8a0IDSOajMUlf/ZRlRXkYNEnZMeGTliCKz2vnA/gjasu5fJcDPUunl&lt;br&gt;<br>
6JpYa4DRfYZ2S3vElyCnkInN53XkQDcTLKBR4jKIXvsjfVuc4mYxDf2TQj8hhIy0&lt;br&gt;<br>
5TGzAtMq4D53LuyH3mGN2mK0OO6itGO5k+ALHIiDgGoP6AoZU6oIqjuaLPV117k=&lt;br&gt;<br>
=NIK1&lt;br&gt;<br>
-----END&nbsp;PGP&nbsp;SIGNATURE-----&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
