<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;Hi&nbsp;Amos,&lt;br&gt;&lt;br&gt;&gt;&nbsp;those&nbsp;lines&nbsp;you&nbsp;specify&nbsp;above&nbsp;go&nbsp;in&nbsp;(C).&nbsp;*if*&nbsp;they&nbsp;are&nbsp;needed&nbsp;at&nbsp;all.&lt;br&gt;&lt;br&gt;But&nbsp;I&nbsp;don&#39;t&nbsp;have&nbsp;control&nbsp;over&nbsp;(C). &nbsp;It&#39;s&nbsp;off&nbsp;limits. &nbsp;&lt;br&gt;&lt;br&gt;<br>
&gt;&nbsp;In&nbsp;(B)&nbsp;goes:&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt; &nbsp;cache_peer&nbsp;&lt;a&nbsp;href=&quot;http://forward-proxy.example.com&quot;&nbsp;target=&quot;_blank&quot;&gt;forward-proxy.example.com&lt;/a&gt;&nbsp;parent&nbsp;3128&nbsp;0&nbsp;name=C&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;sendToC&nbsp;dstdomain&nbsp;&lt;a&nbsp;href=&quot;http://origin-x.example.com&quot;&nbsp;target=&quot;_blank&quot;&gt;origin-x.example.com&lt;/a&gt;&nbsp;&lt;a&nbsp;href=&quot;http://origin-y.example.com&quot;&nbsp;target=&quot;_blank&quot;&gt;origin-y.example.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://origin-z.example.com&quot;&nbsp;target=&quot;_blank&quot;&gt;origin-z.example.com&lt;/a&gt;&lt;br&gt;&gt;&nbsp;cache_peer_access&nbsp;C&nbsp;sendToC&lt;br&gt;&lt;br&gt;&lt;/div&gt;The&nbsp;requests&nbsp;reaching&nbsp;(B)&nbsp;(&lt;a&nbsp;href=&quot;http://reverse-proxy.example.com&quot;&nbsp;target=&quot;_blank&quot;&gt;reverse-proxy.example.com&lt;/a&gt;)&nbsp;are&nbsp;in&nbsp;the&nbsp;form:&nbsp;&lt;br&gt;    &nbsp;&lt;a&nbsp;href=&quot;http://reverse-proxy.example.com/goto-origin-x&quot;&nbsp;target=&quot;_blank&quot;&gt;http://reverse-proxy.example.com/goto-origin-x&lt;/a&gt;&lt;br&gt;    &nbsp;&lt;a&nbsp;href=&quot;http://reverse-proxy.example.com/goto-origin-y&quot;&nbsp;target=&quot;_blank&quot;&gt;http://reverse-proxy.example.com/goto-origin-y&lt;/a&gt;&lt;br&gt;    &nbsp;&lt;a&nbsp;href=&quot;http://reverse-proxy.example.com/goto-origin-z&quot;&nbsp;target=&quot;_blank&quot;&gt;http://reverse-proxy.example.com/goto-origin-z&lt;/a&gt;&lt;br&gt; &lt;br&gt;&lt;/div&gt;and&nbsp;I&nbsp;have&nbsp;a&nbsp;couple&nbsp;of&nbsp;cache_peer_access&nbsp;acls&nbsp;(urlpath&nbsp;regex)&nbsp;to&nbsp;send&nbsp;them&nbsp;to&nbsp;origin-x,&nbsp;origin-y,&nbsp;and&nbsp;origin-z. &nbsp;How&nbsp;would&nbsp;the&nbsp;above&nbsp;dstdomain&nbsp;acl&nbsp;work&nbsp;with&nbsp;these&nbsp;rules?&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Nov&nbsp;13,&nbsp;2014&nbsp;at&nbsp;7:38&nbsp;PM,&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&nbsp;target=&quot;_blank&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;span&gt;-----BEGIN&nbsp;PGP&nbsp;SIGNED&nbsp;MESSAGE-----&lt;br&gt;<br>
Hash:&nbsp;SHA1&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;&lt;span&gt;On&nbsp;14/11/2014&nbsp;4:03&nbsp;p.m.,&nbsp;Hector&nbsp;Chan&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;Ah,&nbsp;I&nbsp;think&nbsp;I&nbsp;have&nbsp;a&nbsp;typo&nbsp;in&nbsp;my&nbsp;question. &nbsp;Originally,&nbsp;I&nbsp;mentioned&lt;br&gt;<br>
&gt;&nbsp;the&nbsp;following:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;the&nbsp;logic&nbsp;of&nbsp;figuring&nbsp;out&nbsp;where&nbsp;to&nbsp;go&nbsp;to&nbsp;lies&nbsp;in&nbsp;(C).&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;What&nbsp;I&nbsp;actually&nbsp;meant&nbsp;is&nbsp;&quot;the&nbsp;logic&nbsp;that&nbsp;figuring&nbsp;out&nbsp;where&nbsp;to&nbsp;go&lt;br&gt;<br>
&gt;&nbsp;lies&nbsp;in&nbsp;(B)&quot;&nbsp;(not&nbsp;C).&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;Actually&nbsp;both&nbsp;require&nbsp;that&nbsp;logic.&nbsp;Relative&nbsp;to&nbsp;the&nbsp;traffic&nbsp;each&nbsp;is&lt;br&gt;<br>
receiving.&lt;br&gt;<br>
&lt;span&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;On&nbsp;Thu,&nbsp;Nov&nbsp;13,&nbsp;2014&nbsp;at&nbsp;5:14&nbsp;PM,&nbsp;Hector&nbsp;Chan&nbsp;wrote:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Hi&nbsp;Amos,&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Thanks&nbsp;for&nbsp;your&nbsp;reply. &nbsp;Let&#39;s&nbsp;say&nbsp;I&nbsp;have&nbsp;the&nbsp;following&nbsp;cache_peer&lt;br&gt;<br>
&gt;&gt;&nbsp;lines&nbsp;in&nbsp;(B),&nbsp;and&nbsp;the&nbsp;address&nbsp;for&nbsp;(C)&nbsp;is&lt;br&gt;<br>
&gt;&gt;&nbsp;&quot;&lt;a&nbsp;href=&quot;http://forward-proxy.example.com:3128&quot;&nbsp;target=&quot;_blank&quot;&gt;forward-proxy.example.com:3128&lt;/a&gt;&quot;.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;cache_peer &nbsp; &nbsp;&lt;a&nbsp;href=&quot;http://origin-x.example.com&quot;&nbsp;target=&quot;_blank&quot;&gt;origin-x.example.com&lt;/a&gt; &nbsp; &nbsp;parent&nbsp;443&nbsp;0&nbsp;no-query&lt;br&gt;<br>
&gt;&gt;&nbsp;originserver&nbsp;ssl&nbsp;cache_peer &nbsp; &nbsp;&lt;a&nbsp;href=&quot;http://origin-y.example.com&quot;&nbsp;target=&quot;_blank&quot;&gt;origin-y.example.com&lt;/a&gt; &nbsp; &nbsp;parent&nbsp;443&lt;br&gt;<br>
&gt;&gt;&nbsp;0&nbsp;no-query&nbsp;originserver&nbsp;ssl&nbsp;cache_peer &nbsp; &nbsp;&lt;a&nbsp;href=&quot;http://origin-z.example.com&quot;&nbsp;target=&quot;_blank&quot;&gt;origin-z.example.com&lt;/a&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;parent&nbsp;443&nbsp;0&nbsp;no-query&nbsp;originserver&nbsp;ssl&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;What&nbsp;would&nbsp;be&nbsp;the&nbsp;syntax&nbsp;to&nbsp;configure&nbsp;(B)&nbsp;to&nbsp;use&nbsp;&quot;&lt;br&gt;<br>
&gt;&gt;&nbsp;&lt;a&nbsp;href=&quot;http://forward-proxy.example.com:3128&quot;&nbsp;target=&quot;_blank&quot;&gt;forward-proxy.example.com:3128&lt;/a&gt;&quot;&nbsp;(C)&nbsp;as&nbsp;the&nbsp;forward&nbsp;proxy&nbsp;to&nbsp;the&lt;br&gt;<br>
&gt;&gt;&nbsp;origin&nbsp;servers&nbsp;(D)&nbsp;?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;those&nbsp;lines&nbsp;you&nbsp;specify&nbsp;above&nbsp;go&nbsp;in&nbsp;(C).&nbsp;*if*&nbsp;they&nbsp;are&nbsp;needed&nbsp;at&nbsp;all.&lt;br&gt;<br>
&lt;br&gt;<br>
In&nbsp;(B)&nbsp;goes:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;cache_peer&nbsp;&lt;a&nbsp;href=&quot;http://forward-proxy.example.com&quot;&nbsp;target=&quot;_blank&quot;&gt;forward-proxy.example.com&lt;/a&gt;&nbsp;parent&nbsp;3128&nbsp;0&nbsp;name=C&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;acl&nbsp;sendToC&nbsp;dstdomain&nbsp;&lt;a&nbsp;href=&quot;http://origin-x.example.com&quot;&nbsp;target=&quot;_blank&quot;&gt;origin-x.example.com&lt;/a&gt;&nbsp;&lt;a&nbsp;href=&quot;http://origin-y.example.com&quot;&nbsp;target=&quot;_blank&quot;&gt;origin-y.example.com&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://origin-z.example.com&quot;&nbsp;target=&quot;_blank&quot;&gt;origin-z.example.com&lt;/a&gt;&lt;br&gt;<br>
 &nbsp;cache_peer_access&nbsp;C&nbsp;sendToC&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
OR,&nbsp;since&nbsp;you&nbsp;say&nbsp;C&nbsp;is&nbsp;the&nbsp;*only*&nbsp;way&nbsp;to&nbsp;access&nbsp;the&nbsp;Internet&nbsp;you&nbsp;can&lt;br&gt;<br>
omit&nbsp;the&nbsp;acl&nbsp;and&nbsp;cache_peer_access&nbsp;lines.&nbsp;Which&nbsp;will&nbsp;cause&nbsp;all&nbsp;traffic&lt;br&gt;<br>
to&nbsp;try&nbsp;and&nbsp;go&nbsp;through&nbsp;C.&lt;br&gt;<br>
&lt;span&gt;&lt;br&gt;<br>
Amos&lt;br&gt;<br>
-----BEGIN&nbsp;PGP&nbsp;SIGNATURE-----&lt;br&gt;<br>
Version:&nbsp;GnuPG&nbsp;v2.0.22&nbsp;(MingW32)&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;iQEcBAEBAgAGBQJUZXkaAAoJELJo5wb/XPRjNaYH/0rD/r4hepby40bDQnLTzJyr&lt;br&gt;<br>
BP5CY/WP6tqBvavJHpJE41TpRhhx6HilZSWccAnhe5Dk7O+wit2rbp4lxZqXID01&lt;br&gt;<br>
6sxzPb6IjXldgXd6vmjCzkK8QiDFdFjEev2+26LAX6cPuQOEuiyzCiFFHzI6TK7c&lt;br&gt;<br>
lXGqDGbkTmBtIplHVAz/7u4IJlb2TNbT23wkzt6jJHUBYxhhY23g3x1sT4Tc045U&lt;br&gt;<br>
oseTZnazY+Ehrglf/NdNJfBAkcl71Lp65rxDLvo2ayUNffiXeg6bNtd7oGHyZ0S3&lt;br&gt;<br>
MMUxsF2XA7kDxgPCtD5qhVFnxnhTKCMawz3gf6PRxRlSqeCxB+FrWx01frblx2s=&lt;br&gt;<br>
=VsYA&lt;br&gt;<br>
-----END&nbsp;PGP&nbsp;SIGNATURE-----&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
