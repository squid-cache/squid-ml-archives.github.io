<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;style&gt;&lt;!--<br>
.hmmessage&nbsp;P<br>
{<br>
margin:0px;<br>
padding:0px<br>
}<br>
body.hmmessage<br>
{<br>
font-size:&nbsp;12pt;<br>
font-family:Calibri<br>
}<br>
--&gt;&lt;/style&gt;&lt;/head&gt;<br>
&lt;body&nbsp;class='hmmessage'&gt;&lt;div&nbsp;dir='ltr'&gt;Hi&nbsp;Amos,&lt;BR&gt;&nbsp;&lt;BR&gt;Hmm,&nbsp;after&nbsp;checking&nbsp;I&nbsp;found&nbsp;out&nbsp;that&nbsp;this&nbsp;fix&nbsp;works&nbsp;only&nbsp;for&nbsp;64&nbsp;bit.&nbsp;&lt;BR&gt;When&nbsp;I&nbsp;try&nbsp;this&nbsp;on&nbsp;32,&nbsp;both&nbsp;mingw&nbsp;on&nbsp;Cygwin&nbsp;and&nbsp;Ubuntu&nbsp;cannot&nbsp;identify&nbsp;presence&nbsp;of&nbsp;getaddrinfo.&lt;BR&gt;&nbsp;&lt;BR&gt;It&nbsp;seems&nbsp;the&nbsp;32&nbsp;bit&nbsp;version&nbsp;of&nbsp;libws2_32&nbsp;is&nbsp;compiled&nbsp;with&nbsp;&quot;stdcall&quot;,&nbsp;i.e.&nbsp;the&nbsp;following&nbsp;works:&lt;BR&gt;&nbsp;&lt;BR&gt;&lt;em&gt;#ifdef&nbsp;__cplusplus&lt;br&gt;extern&nbsp;&quot;C&quot;&lt;br&gt;#endif&lt;br&gt;char&nbsp;__attribute__((__stdcall__))&nbsp;getaddrinfo(int,&nbsp;int,&nbsp;int,&nbsp;int);&nbsp;//&nbsp;&lt;/em&gt;&lt;BR&gt;&lt;em&gt;&lt;/em&gt;&nbsp;&lt;BR&gt;&lt;em&gt;//&nbsp;AUTOCONF&nbsp;tries&nbsp;out&nbsp;the&nbsp;below&nbsp;one&nbsp;(which&nbsp;does&nbsp;not&nbsp;mingle&nbsp;@16)&lt;/em&gt;&lt;BR&gt;&lt;em&gt;//&nbsp;&lt;/em&gt;&lt;em&gt;char&nbsp;getaddrinfo();&lt;/em&gt;&lt;BR&gt;&lt;em&gt;//&nbsp;return&nbsp;getaddrinfo();&lt;/em&gt;&lt;BR&gt;&lt;em&gt;&lt;/em&gt;&nbsp;&lt;BR&gt;&lt;em&gt;int&lt;br&gt;main&nbsp;()&lt;br&gt;{&lt;/em&gt;&lt;BR&gt;&lt;em&gt;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;getaddrinfo(0,0,0,0);&lt;br&gt;&nbsp;&nbsp;;&lt;br&gt;&nbsp;&nbsp;return&nbsp;0;&lt;br&gt;}&nbsp;&lt;/em&gt;&lt;BR&gt;&nbsp;&lt;BR&gt;I&nbsp;also&nbsp;found&nbsp;the&nbsp;following&nbsp;report,&nbsp;which&nbsp;kind&nbsp;of&nbsp;confirms&nbsp;what&nbsp;I&nbsp;see&nbsp;(&lt;a&nbsp;href=&quot;https://patches.libav.org/patch/545/&quot;&gt;https://patches.libav.org/patch/545/&lt;/a&gt;):&lt;BR&gt;&lt;em&gt;This&nbsp;moves&nbsp;network_extralibs&nbsp;setup&nbsp;before&nbsp;use&nbsp;so&nbsp;that&nbsp;the&nbsp;link&nbsp;test&lt;br&gt;works&nbsp;correctly&nbsp;on&nbsp;mingw-w64.&nbsp;&nbsp;&lt;font&nbsp;color=&quot;#000000&quot;&nbsp;style=&quot;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;0);&quot;&gt;mingw32&nbsp;still&nbsp;fails&nbsp;to&nbsp;detect&nbsp;it&nbsp;due&lt;br&gt;to&nbsp;calling&nbsp;convention&nbsp;differences;&nbsp;getaddrinfo()&nbsp;is&nbsp;STDCALL,&nbsp;so&nbsp;it&lt;br&gt;is&nbsp;mangled&nbsp;as&nbsp;getaddrinfo@16&nbsp;on&nbsp;x86.&lt;/font&gt;&lt;/em&gt;&lt;BR&gt;&lt;br&gt;Unfortunately,&nbsp;my&nbsp;background&nbsp;is&nbsp;windows,&nbsp;so&nbsp;I'm&nbsp;new&nbsp;to&nbsp;autoconf&nbsp;and&nbsp;all&nbsp;unix&nbsp;business.&nbsp;What&nbsp;do&nbsp;you&nbsp;think&nbsp;will&nbsp;be&nbsp;the&nbsp;right&nbsp;approach&nbsp;here?&nbsp;Maybe&nbsp;AC_CECK_DECL&nbsp;instead&nbsp;of&nbsp;AC_REPLACE_FUNC&nbsp;for&nbsp;getaddrinfo&nbsp;(and&nbsp;maybe&nbsp;some&nbsp;other&nbsp;funcs&nbsp;declared&nbsp;in&nbsp;the&nbsp;same&nbsp;lib)?&lt;BR&gt;&nbsp;&lt;BR&gt;Thank&nbsp;you&nbsp;very&nbsp;much&nbsp;for&nbsp;all&nbsp;your&nbsp;help,&nbsp;really&nbsp;appreciate&nbsp;it!&lt;BR&gt;&nbsp;&lt;BR&gt;--e&lt;BR&gt;&nbsp;&lt;BR&gt;&lt;div&gt;&gt;&nbsp;Date:&nbsp;Sun,&nbsp;21&nbsp;Dec&nbsp;2014&nbsp;03:11:40&nbsp;+1300&lt;br&gt;&gt;&nbsp;From:&nbsp;squid3@treenet.co.nz&lt;br&gt;&gt;&nbsp;To:&nbsp;squid-users@lists.squid-cache.org&lt;br&gt;&gt;&nbsp;Subject:&nbsp;Re:&nbsp;[squid-users]&nbsp;Problem&nbsp;with&nbsp;running&nbsp;squid&nbsp;3.5&nbsp;on&nbsp;windows&nbsp;7&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;-----BEGIN&nbsp;PGP&nbsp;SIGNED&nbsp;MESSAGE-----&lt;br&gt;&gt;&nbsp;Hash:&nbsp;SHA1&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;On&nbsp;20/12/2014&nbsp;9:46&nbsp;a.m.,&nbsp;Amos&nbsp;Jeffries&nbsp;wrote:&lt;br&gt;&gt;&nbsp;&gt;&nbsp;On&nbsp;20/12/2014&nbsp;7:05&nbsp;a.m.,&nbsp;Eldar&nbsp;Akchurin&nbsp;wrote:&lt;br&gt;&gt;&nbsp;&gt;&gt;&nbsp;Hi&nbsp;Amos,&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&gt;&nbsp;Thanks&nbsp;a&nbsp;lot&nbsp;for&nbsp;the&nbsp;hint!&nbsp;Specifying&nbsp;LIBS=&quot;-lws2_32&quot;&nbsp;fixes&nbsp;this&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&gt;&nbsp;particular&nbsp;issue.&nbsp;Let's&nbsp;see&nbsp;what&nbsp;comes&nbsp;up&nbsp;next.&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&gt;&nbsp;--e&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;Great!&nbsp;thank&nbsp;you.&nbsp;I&nbsp;have&nbsp;added&nbsp;that&nbsp;to&nbsp;Squid-3.&nbsp;For&nbsp;the&nbsp;next&lt;br&gt;&gt;&nbsp;&gt;&nbsp;release&nbsp;you&nbsp;should&nbsp;not&nbsp;have&nbsp;to&nbsp;explicitly&nbsp;define&nbsp;it&nbsp;or&nbsp;the&nbsp;0x601&lt;br&gt;&gt;&nbsp;&gt;&nbsp;version&nbsp;options.&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;Actually,&nbsp;spoke&nbsp;too&nbsp;soon.&nbsp;I&nbsp;have&nbsp;been&nbsp;testing&nbsp;prior&nbsp;to&nbsp;the&nbsp;commit&nbsp;and&lt;br&gt;&gt;&nbsp;it&nbsp;seems&nbsp;this&nbsp;does&nbsp;not&nbsp;work&nbsp;for&nbsp;me.&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;Amos&lt;br&gt;&gt;&nbsp;-----BEGIN&nbsp;PGP&nbsp;SIGNATURE-----&lt;br&gt;&gt;&nbsp;Version:&nbsp;GnuPG&nbsp;v2.0.22&nbsp;(MingW32)&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;iQEcBAEBAgAGBQJUlYOcAAoJELJo5wb/XPRjPg0H/34HEDJvxJzxmuFIcavcRmCt&lt;br&gt;&gt;&nbsp;3BxwAUeVb07e5gX96wEcVboaKgCqWuYrjtGEnUv11E3Uo3wvmBtw83U8eFxb2DEv&lt;br&gt;&gt;&nbsp;9+FOSy59Q20oFmErmNHlWTEHfdc+I9G5aSIxQxSefvANAV3foTS7cOR8M4RBuLhp&lt;br&gt;&gt;&nbsp;SumXc/p3qtp4HhNYpab/qXwuAxXsEPuQtTzocEOFOiRrQa1HIHvjj5hYcy3/BICE&lt;br&gt;&gt;&nbsp;E4jdqNinpJ9EO2w8hDqwfGqn//mFJMf+/wcg8z9u6NED8xmt/7ihVaYZTy9p8YOk&lt;br&gt;&gt;&nbsp;b21/9AdcvuniiC50YATzhyM8Uk8GdsmN9xUBhVKy6SP8Dd9dGIYThfYE2cg3pf0=&lt;br&gt;&gt;&nbsp;=/ab+&lt;br&gt;&gt;&nbsp;-----END&nbsp;PGP&nbsp;SIGNATURE-----&lt;br&gt;&gt;&nbsp;_______________________________________________&lt;br&gt;&gt;&nbsp;squid-users&nbsp;mailing&nbsp;list&lt;br&gt;&gt;&nbsp;squid-users@lists.squid-cache.org&lt;br&gt;&gt;&nbsp;http://lists.squid-cache.org/listinfo/squid-users&lt;br&gt;&lt;/div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;/body&gt;<br>
&lt;/html&gt;
</tt>
