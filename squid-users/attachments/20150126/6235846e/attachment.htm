<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;call&nbsp;it&nbsp;what&nbsp;you&nbsp;want,&nbsp;it&nbsp;works&nbsp;:)&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&gt;-----------&lt;br&gt;Daniel&nbsp;I&nbsp;Greenwald&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Jan&nbsp;26,&nbsp;2015&nbsp;at&nbsp;10:51&nbsp;AM,&nbsp;Yuri&nbsp;Voinov&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:yvoinov@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;yvoinov@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;&lt;div&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-----BEGIN&nbsp;PGP&nbsp;SIGNED&nbsp;MESSAGE-----&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Hash:&nbsp;SHA1&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp; &lt;br&gt;&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Daniel,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;well,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;but&nbsp;AFAIK&nbsp;server-first&nbsp;directive&nbsp;is&nbsp;deprecated&nbsp;in&nbsp;3.5.x.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Hmmmmmm?&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;26.01.2015&nbsp;19:37,&nbsp;Daniel&nbsp;Greenwald&nbsp;пишет:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&gt;&nbsp;See&nbsp;below.&nbsp;Nothing&nbsp;else&nbsp;too<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;interesting.&nbsp;Those&nbsp;four&nbsp;lines&nbsp;were&nbsp;the&nbsp;key.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;http_port&nbsp;3128&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;http_port&nbsp;3180&nbsp;intercept&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;https_port&nbsp;3443&nbsp;intercept&nbsp;ssl-bump<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generate-host-certificates=on&nbsp;dynamic_cert_mem_cache_size=16MB <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cert=/usr/local/squid/ssl_cert/myCA.pem&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;sslcrtd_program&nbsp;/usr/lib64/squid/ssl_crtd&nbsp;-s<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/usr/local/squid/var/lib/ssl_db&nbsp;-M&nbsp;16MB&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;sslcrtd_children&nbsp;10&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;logformat&nbsp;dig&nbsp;%{%Y-%m-%d&nbsp;%H:%M:%S}tl &nbsp;%6tr&nbsp;%&gt;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%Ss/%03&gt;Hs&nbsp;%&lt;st&nbsp;%rm&nbsp;%ru&nbsp;%un&nbsp;%Sh/%&lt;A&nbsp;&quot;%{User-Agent}&gt;h&quot;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;logfile_rotate&nbsp;10&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;access_log&nbsp;/var/log/squid/access.log&nbsp;dig&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;pinger_enable&nbsp;off&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;acl&nbsp;step1&nbsp;at_step&nbsp;SslBump1&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;acl&nbsp;step2&nbsp;at_step&nbsp;SslBump2&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;ssl_bump&nbsp;peek&nbsp;step1&nbsp;all&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;ssl_bump&nbsp;server-first&nbsp;step2&nbsp;all&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;acl&nbsp;SSL_ports&nbsp;port&nbsp;443&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;acl&nbsp;Safe_ports&nbsp;port&nbsp;80&nbsp;443 &nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;acl&nbsp;CONNECT&nbsp;method&nbsp;CONNECT&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;http_access&nbsp;deny&nbsp;!Safe_ports&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;http_access&nbsp;deny&nbsp;CONNECT&nbsp;!SSL_ports&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;http_access&nbsp;allow&nbsp;localhost&nbsp;manager&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;http_access&nbsp;deny&nbsp;manager&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;http_access&nbsp;deny&nbsp;to_localhost&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;http_access&nbsp;allow&nbsp;all&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;http_access&nbsp;deny&nbsp;all&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;#&nbsp;Uncomment&nbsp;and&nbsp;adjust&nbsp;the&nbsp;following&nbsp;to&nbsp;add&nbsp;a&nbsp;disk&nbsp;cache<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;directory.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;#cache_dir&nbsp;ufs&nbsp;/var/spool/squid&nbsp;100&nbsp;16&nbsp;256&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;#&nbsp;Leave&nbsp;coredumps&nbsp;in&nbsp;the&nbsp;first&nbsp;cache&nbsp;dir&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;coredump_dir&nbsp;/var/spool/squid&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;#&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;#&nbsp;Add&nbsp;any&nbsp;of&nbsp;your&nbsp;own&nbsp;refresh_pattern&nbsp;entries&nbsp;above&nbsp;these.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;#&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;refresh_pattern&nbsp;^ftp:       &nbsp;1440   &nbsp;20%   &nbsp;10080&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;refresh_pattern&nbsp;^gopher:   &nbsp;1440   &nbsp;0%   &nbsp;1440&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;refresh_pattern&nbsp;-i&nbsp;(/cgi-bin/|\?)&nbsp;0   &nbsp;0%   &nbsp;0&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;refresh_pattern&nbsp;.       &nbsp;0   &nbsp;20%   &nbsp;4320&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;-----------&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;Daniel&nbsp;I&nbsp;Greenwald&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;span&nbsp;class=&quot;&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;On&nbsp;Mon,&nbsp;Jan&nbsp;26,&nbsp;2015&nbsp;at&nbsp;3:28&nbsp;AM,&nbsp;Rafael&nbsp;Akchurin<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:rafael.akchurin@diladele.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rafael.akchurin@diladele.com&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;href=&quot;mailto:rafael.akchurin@diladele.com&quot;&nbsp;target=&quot;_blank&quot;&gt;&lt;mailto:rafael.akchurin@diladele.com&gt;&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;    &nbsp;Hello&nbsp;Daniel,&nbsp;Yuri&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;    &nbsp;May&nbsp;be&nbsp;you&nbsp;could&nbsp;dump&nbsp;your&nbsp;whole&nbsp;squid.conf&nbsp;here&nbsp;(please<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;remove&nbsp;any&nbsp;sensitive&nbsp;details).&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;    &nbsp;I&nbsp;still&nbsp;cannot&nbsp;understand&nbsp;once&nbsp;Squid&nbsp;has&nbsp;the&nbsp;target<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server&nbsp;hostname&nbsp;from&nbsp;SNI&nbsp;-&nbsp;where&nbsp;is&nbsp;the&nbsp;acl/rule&nbsp;in&nbsp;squid.conf<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;can&nbsp;be&nbsp;used&nbsp;with&nbsp;this&nbsp;info&nbsp;present?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;    &nbsp;Best&nbsp;regards,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;    &nbsp;Rafael&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;    &nbsp;-------------------------&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;    &nbsp;*From:*&nbsp;squid-users<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:squid-users-bounces@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users-bounces@lists.squid-cache.org&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users-bounces@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;&lt;mailto:squid-users-bounces@lists.squid-cache.org&gt;&lt;/a&gt;&gt;&nbsp;on<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;behalf&nbsp;of&nbsp;Daniel&nbsp;Greenwald&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:dig@digcorp.net&quot;&nbsp;target=&quot;_blank&quot;&gt;dig@digcorp.net&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;href=&quot;mailto:dig@digcorp.net&quot;&nbsp;target=&quot;_blank&quot;&gt;&lt;mailto:dig@digcorp.net&gt;&lt;/a&gt;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;    &nbsp;*Sent:*&nbsp;Monday,&nbsp;January&nbsp;26,&nbsp;2015&nbsp;5:39&nbsp;AM&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;    &nbsp;*To:*&nbsp;Yuri&nbsp;Voinov&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;    &nbsp;*Cc:*&nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;&lt;mailto:squid-users@lists.squid-cache.org&gt;&lt;/a&gt;&lt;br&gt;&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;    &nbsp;*Subject:*&nbsp;Re:&nbsp;[squid-users]&nbsp;Why&nbsp;3.5.0.4&nbsp;generates<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mimicked&nbsp;certs&nbsp;with&nbsp;server&nbsp;IP&nbsp;only&nbsp;when&nbsp;bumping?&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;     &nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;    &nbsp;Thank&nbsp;you&nbsp;Amos,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;    &nbsp;Based&nbsp;on&nbsp;your&nbsp;explanation&nbsp;I&nbsp;was&nbsp;able&nbsp;to&nbsp;make&nbsp;bumping&nbsp;work<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;transparent&nbsp;with&nbsp;no&nbsp;browser&nbsp;errors&nbsp;in&nbsp;3.5.1&nbsp;by&nbsp;using&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;following.&nbsp;If&nbsp;I&nbsp;understand&nbsp;correctly,&nbsp;this&nbsp;is&nbsp;actually&nbsp;whats<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;required&nbsp;to&nbsp;mimic&nbsp;the&nbsp;behavior&nbsp;of&nbsp;pre&nbsp;3.5&nbsp;(sslbump&nbsp;server-first<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;all)&nbsp;:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;    &nbsp;acl&nbsp;step1&nbsp;at_step&nbsp;SslBump1&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;    &nbsp;acl&nbsp;step2&nbsp;at_step&nbsp;SslBump2&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;    &nbsp;ssl_bump&nbsp;peek&nbsp;step1&nbsp;all&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;    &nbsp;ssl_bump&nbsp;server-first&nbsp;step2&nbsp;all&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;    &nbsp;Hope&nbsp;that&nbsp;helps&nbsp;Yuri&nbsp;or&nbsp;any&nbsp;one&nbsp;else&nbsp;with&nbsp;this&nbsp;issue.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;    &nbsp;PS&nbsp;So&nbsp;far&nbsp;this&nbsp;is&nbsp;working&nbsp;great&nbsp;for&nbsp;eg&nbsp;&lt;a&nbsp;href=&quot;http://gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;gmail.com&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;href=&quot;http://gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;&lt;http://gmail.com&gt;&lt;/a&gt;&nbsp;which&nbsp;in&nbsp;previous&nbsp;version&nbsp;would&nbsp;throw<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;browser&nbsp;errors!&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;    &nbsp;-----------&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;    &nbsp;Daniel&nbsp;I&nbsp;Greenwald&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;    &nbsp;On&nbsp;Fri,&nbsp;Jan&nbsp;9,&nbsp;2015&nbsp;at&nbsp;2:51&nbsp;PM,&nbsp;Yuri&nbsp;Voinov<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:yvoinov@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;yvoinov@gmail.com&lt;/a&gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:yvoinov@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;&lt;mailto:yvoinov@gmail.com&gt;&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;How&nbsp;can&nbsp;that&nbsp;be?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;All&nbsp;HSTS&nbsp;sites&nbsp;cry&nbsp;with&nbsp;3.5&nbsp;bump&nbsp;option&nbsp;-&nbsp;they&nbsp;don&#39;t&nbsp;like<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;host&nbsp;IP&nbsp;as&nbsp;CN,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;other&nbsp;sites&nbsp;behaviour&nbsp;depending&nbsp;they&nbsp;(and&nbsp;browsers)&nbsp;settings.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;Is&nbsp;it&nbsp;possible&nbsp;to&nbsp;keep&nbsp;server-first&nbsp;behaviour&nbsp;in&nbsp;3.5.x&nbsp;?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;WBR,&nbsp;Yuri&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;09.01.2015&nbsp;16:57,&nbsp;Amos&nbsp;Jeffries&nbsp;пишет:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;On&nbsp;9/01/2015&nbsp;11:45&nbsp;p.m.,&nbsp;Yuri&nbsp;Voinov&nbsp;wrote:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;I&nbsp;have&nbsp;working&nbsp;production&nbsp;3.4.10&nbsp;with&nbsp;working&nbsp;ssl<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bumping.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;Config&nbsp;was&nbsp;the&nbsp;same&nbsp;as&nbsp;working&nbsp;3.4.10.&nbsp;I&#39;ve&nbsp;just<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;want&nbsp;to&nbsp;take&nbsp;a&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;look&nbsp;on&nbsp;new&nbsp;release.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;in&nbsp;squid.documented&nbsp;said,&nbsp;than&nbsp;backward<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compatibility&nbsp;server-first&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;and&nbsp;none&nbsp;options&nbsp;for&nbsp;ssl_bump&nbsp;are&nbsp;kept.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;But:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;Neither&nbsp;works&nbsp;with&nbsp;old&nbsp;syntax,&nbsp;nor&nbsp;new.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;Looks&nbsp;like&nbsp;target&nbsp;https&nbsp;hosts&nbsp;not&nbsp;resolved&nbsp;and&nbsp;bump<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;got&nbsp;only&nbsp;IP.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;The&nbsp;config&nbsp;values&nbsp;are&nbsp;still&nbsp;accepted,&nbsp;but&nbsp;there&nbsp;is&nbsp;an<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;extra&nbsp;bumping&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;stage&nbsp;now&nbsp;before&nbsp;the&nbsp;SNI&nbsp;is&nbsp;available.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;You&nbsp;are&nbsp;wanting&nbsp;to&nbsp;peek&nbsp;at&nbsp;stage&nbsp;1&nbsp;(to&nbsp;get&nbsp;the&nbsp;client<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SNI&nbsp;details)&nbsp;and&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;server-first/splice&nbsp;at&nbsp;stage&nbsp;2&nbsp;(using&nbsp;the&nbsp;domain).<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Otherwise&nbsp;All&nbsp;Squid&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;works&nbsp;with&nbsp;when&nbsp;intercepting&nbsp;are&nbsp;the&nbsp;TCP&nbsp;IPs.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;Amos&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;        &nbsp;_______________________________________________&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;        &nbsp;squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;        &nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;&lt;mailto:squid-users@lists.squid-cache.org&gt;&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;        &nbsp;&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-----BEGIN&nbsp;PGP&nbsp;SIGNATURE-----<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Version:&nbsp;GnuPG&nbsp;v2<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp; &lt;br&gt;&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;iQEcBAEBAgAGBQJUxmJ7AAoJENNXIZxhPexG/cEIAMm+urebQJM9//zH0ZPdqVDY<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;SztxbkYnHFU/3oI/Ox6CwBtn7SpvOiZn5fuk+IcKhntmF4a1iIF+jgFJkDexYGJQ<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;2/orRca1Ud4qExfDwEukEPUh+/4ccIB5mwmpDXRsBqbFsQMdIJeRstSrGeCTmomK<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;ry8m7KIX+aKb8VS6T9qyBAAoHFHs7Bffy9beJA6e7Tm52tmG/WuLc5hpzKrWYX+w<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;hAw3NIU8N+z0Gn2hsKphp0tpeO8r/DIUhPRmSqBNUnktzrzJmonsMD4///uCgBwr<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;D3yYfsiwXjo3cK1rvcCQTQj7VwUtpkZZUasr0n6LamcO/YahFFAwCgG+cm4oPXM=<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;=LzfY<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-----END&nbsp;PGP&nbsp;SIGNATURE-----<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/div&gt;<br>
<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
