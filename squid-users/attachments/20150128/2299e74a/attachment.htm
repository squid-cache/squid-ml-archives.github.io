<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;style&gt;&lt;!--<br>
.hmmessage&nbsp;P<br>
{<br>
margin:0px;<br>
padding:0px<br>
}<br>
body.hmmessage<br>
{<br>
font-size:&nbsp;12pt;<br>
font-family:Calibri<br>
}<br>
--&gt;&lt;/style&gt;&lt;/head&gt;<br>
&lt;body&nbsp;class='hmmessage'&gt;&lt;div&nbsp;dir='ltr'&gt;Hi&nbsp;Amos,&lt;BR&gt;&nbsp;&lt;BR&gt;It&nbsp;seems&nbsp;the&nbsp;functionality&nbsp;that&nbsp;is&nbsp;responsible&nbsp;for&nbsp;creation&nbsp;of&nbsp;child&nbsp;workers&nbsp;is&nbsp;absent&nbsp;on&nbsp;Windows.&nbsp;This&nbsp;is&nbsp;what&nbsp;I&nbsp;see&nbsp;in&nbsp;the&nbsp;main.cc&lt;BR&gt;&lt;em&gt;watch_child(char&nbsp;*argv[])&lt;br&gt;{&lt;br&gt;#if&nbsp;!_SQUID_WINDOWS_&nbsp;&lt;br&gt;&lt;/em&gt;...&lt;BR&gt;&lt;em&gt;#endif&lt;/em&gt;&lt;BR&gt;&lt;em&gt;}&lt;/em&gt;&lt;BR&gt;&nbsp;&lt;BR&gt;Are&nbsp;there&nbsp;any&nbsp;plans&nbsp;to&nbsp;add&nbsp;this&nbsp;functionality&nbsp;in&nbsp;the&nbsp;near&nbsp;future?&nbsp;&lt;BR&gt;&nbsp;&lt;BR&gt;Thank&nbsp;you!&lt;BR&gt;&nbsp;&lt;BR&gt;Best&nbsp;regards,&lt;BR&gt;-e&lt;BR&gt;&nbsp;&lt;BR&gt;&lt;div&gt;&gt;&nbsp;Date:&nbsp;Sun,&nbsp;25&nbsp;Jan&nbsp;2015&nbsp;17:05:43&nbsp;+1300&lt;br&gt;&gt;&nbsp;From:&nbsp;squid3@treenet.co.nz&lt;br&gt;&gt;&nbsp;To:&nbsp;al.akchurin@hotmail.com;&nbsp;squid-users@lists.squid-cache.org&lt;br&gt;&gt;&nbsp;Subject:&nbsp;Re:&nbsp;[squid-users]&nbsp;Problem&nbsp;with&nbsp;running&nbsp;squid&nbsp;3.5&nbsp;on&nbsp;windows&nbsp;7&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;On&nbsp;25/01/2015&nbsp;4:16&nbsp;p.m.,&nbsp;Eldar&nbsp;Akchurin&nbsp;wrote:&lt;br&gt;&gt;&nbsp;&gt;&nbsp;Hi&nbsp;Amos,&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;Sorry&nbsp;to&nbsp;disturb&nbsp;you&nbsp;again,&nbsp;I&nbsp;have&nbsp;changed&nbsp;the&nbsp;ModSelectWin32&nbsp;for&nbsp;now,&nbsp;it&nbsp;seems&nbsp;it&nbsp;kind&nbsp;of&nbsp;works.&lt;br&gt;&gt;&nbsp;&gt;&nbsp;I&nbsp;will&nbsp;collect&nbsp;all&nbsp;the&nbsp;patches&nbsp;and&nbsp;will&nbsp;send&nbsp;you&nbsp;after&nbsp;I&nbsp;have&nbsp;the&nbsp;first&nbsp;version&nbsp;running&nbsp;:)&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&nbsp;&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;Yay.&nbsp;Sorry&nbsp;for&nbsp;not&nbsp;having&nbsp;time&nbsp;for&nbsp;this,&nbsp;got&nbsp;flooded&nbsp;under&nbsp;with&nbsp;3.5.1&lt;br&gt;&gt;&nbsp;feedback&nbsp;but&nbsp;things&nbsp;are&nbsp;settling&nbsp;down&nbsp;again&nbsp;now.&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;The&nbsp;next&nbsp;issue&nbsp;is&nbsp;in&nbsp;the&nbsp;mswindows.h&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;inline&nbsp;ssize_t&lt;br&gt;&gt;&nbsp;&gt;&nbsp;recvfrom(int&nbsp;s,&nbsp;void&nbsp;*&nbsp;b,&nbsp;size_t&nbsp;l,&nbsp;int&nbsp;f,&nbsp;struct&nbsp;sockaddr&nbsp;*&nbsp;fr,&nbsp;socklen_t&nbsp;*&nbsp;fl)&lt;br&gt;&gt;&nbsp;&gt;&nbsp;{&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssize_t&nbsp;result;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;ifl=*fl;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;((result&nbsp;=&nbsp;::recvfrom(_get_osfhandle(s),&nbsp;(char&nbsp;*)b,&nbsp;l,&nbsp;f,&nbsp;fr,&nbsp;&amp;ifl))&nbsp;==&nbsp;SOCKET_ERROR)&nbsp;{&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;errno&nbsp;=&nbsp;WSAGetLastError();&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;-1;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;result;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;}&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;::recvfrom&nbsp;changes&nbsp;the&nbsp;size,&nbsp;but&nbsp;you&nbsp;kind&nbsp;of&nbsp;forgetting&nbsp;it&nbsp;inside&nbsp;ifl,&nbsp;not&nbsp;passing&nbsp;it&nbsp;out.Why&nbsp;not&nbsp;simply&nbsp;pass&nbsp;fl?&nbsp;why&nbsp;do&nbsp;you&nbsp;need&nbsp;ifl?&nbsp;socklen_t&nbsp;is&nbsp;declared&nbsp;as&nbsp;int.&nbsp;Or&nbsp;can&nbsp;this&nbsp;be&nbsp;changed&nbsp;in&nbsp;the&nbsp;future?&lt;br&gt;&gt;&nbsp;&gt;&nbsp;At&nbsp;least&nbsp;it&nbsp;is&nbsp;necessary&nbsp;to&nbsp;copy&nbsp;the&nbsp;value&nbsp;returned&nbsp;by&nbsp;ifl&nbsp;into&nbsp;the&nbsp;fl&nbsp;again&nbsp;after&nbsp;the&nbsp;call.&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&nbsp;&lt;br&gt;&gt;&nbsp;&gt;&nbsp;The&nbsp;next&nbsp;problem&nbsp;I'm&nbsp;having&nbsp;is&nbsp;that&nbsp;only&nbsp;squid&nbsp;-N&nbsp;works.&nbsp;As&nbsp;soon&nbsp;as&nbsp;I&nbsp;run&nbsp;it&nbsp;in&nbsp;the&nbsp;daemon&nbsp;mode&nbsp;(without&nbsp;-N)&nbsp;none&nbsp;of&nbsp;the&nbsp;workers&nbsp;is&nbsp;created.&nbsp;Could&nbsp;you&nbsp;please&nbsp;point&nbsp;me&nbsp;to&nbsp;the&nbsp;part&nbsp;of&nbsp;the&nbsp;code&nbsp;that&nbsp;is&nbsp;responsible&nbsp;for&nbsp;spawning&nbsp;workers?&lt;br&gt;&gt;&nbsp;&gt;&nbsp;&nbsp;&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;&nbsp;src/ipc/*&nbsp;does&nbsp;most&nbsp;of&nbsp;the&nbsp;SMP&nbsp;related&nbsp;stuff.&nbsp;I&nbsp;was&nbsp;expecting&nbsp;issues&lt;br&gt;&gt;&nbsp;from&nbsp;UDS&nbsp;TypedMessage&nbsp;needing&nbsp;special&nbsp;Windows&nbsp;code&nbsp;to&nbsp;pass&nbsp;handles&lt;br&gt;&gt;&nbsp;between&nbsp;the&nbsp;processes.&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;It&nbsp;may&nbsp;also&nbsp;be&nbsp;related&nbsp;to&nbsp;the&nbsp;main.cc&nbsp;code&nbsp;forking&nbsp;initial&nbsp;daemon/worker.&lt;br&gt;&gt;&nbsp;&lt;br&gt;&gt;&nbsp;Amos&lt;br&gt;&gt;&nbsp;&lt;br&gt;&lt;/div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;/body&gt;<br>
&lt;/html&gt;
</tt>
