<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;Greetings&nbsp;all,&nbsp;been&nbsp;a&nbsp;bit.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;So&nbsp;I&#39;m&nbsp;working&nbsp;on&nbsp;a&nbsp;new&nbsp;server&nbsp;config&nbsp;and&nbsp;loaded&nbsp;the&nbsp;latest&nbsp;3.5&nbsp;and&nbsp;have&nbsp;tweaked&nbsp;my&nbsp;2.7&nbsp;configs&nbsp;a&nbsp;bit.&nbsp;Things&nbsp;are&nbsp;working&nbsp;but&nbsp;I&#39;ve&nbsp;got&nbsp;one&nbsp;that&nbsp;I&nbsp;can&#39;t&nbsp;figure&nbsp;out.&lt;br&gt;&lt;br&gt;I&nbsp;have&nbsp;a&nbsp;test&nbsp;that&nbsp;insures&nbsp;that&nbsp;objects&nbsp;with&nbsp;an&nbsp;explicit&nbsp;&quot;&lt;span&nbsp;class=&quot;&quot;&gt;Cache-Control: no-cache&lt;/span&gt;&quot;<br>
&nbsp;header&nbsp;are&nbsp;NOT&nbsp;cached&nbsp;by&nbsp;Squid.&nbsp;&nbsp;This&nbsp;is&nbsp;done&nbsp;by&nbsp;keeping&nbsp;a&nbsp;special&nbsp;hit&nbsp;<br>
counter&nbsp;on&nbsp;the&nbsp;server&nbsp;and&nbsp;counting&nbsp;origin&nbsp;requests.&nbsp;&nbsp;A&nbsp;unique&nbsp;URL&nbsp;is&nbsp;<br>
fetched&nbsp;exactly&nbsp;10&nbsp;times,&nbsp;and&nbsp;all&nbsp;of&nbsp;them&nbsp;are&nbsp;asserted&nbsp;to&nbsp;be&nbsp;cache&nbsp;<br>
misses&nbsp;(both&nbsp;Squid&nbsp;headers&nbsp;must&nbsp;be&nbsp;MISS).&nbsp;&nbsp;At&nbsp;the&nbsp;end,&nbsp;the&nbsp;hit&nbsp;counter&nbsp;<br>
is&nbsp;tested&nbsp;and&nbsp;made&nbsp;sure&nbsp;it&nbsp;equals&nbsp;the&nbsp;number&nbsp;of&nbsp;requests&nbsp;(10).&quot;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;I&#39;m&nbsp;getting&nbsp;a&nbsp;fail&nbsp;when&nbsp;testing&nbsp;against&nbsp;3.5,&nbsp;meaning&nbsp;it&#39;s&nbsp;providing&nbsp;a&nbsp;cache&nbsp;object&lt;br&gt;&lt;br&gt;Miss&nbsp;with&nbsp;no-cache                 &nbsp;|&nbsp;FAIL   &nbsp;&lt;------&lt;br&gt;&lt;br&gt;&lt;br&gt;Running&nbsp;test:&nbsp;Miss&nbsp;with&nbsp;no-cache...&lt;br&gt;Resetting&nbsp;hit&nbsp;counter...&lt;br&gt;Fetching&nbsp;URL:&nbsp;&lt;a&nbsp;href=&quot;http://10.13.5.222/admin/squid_test.php?action=reset_hit_count&amp;random=0.385536803712753&quot;&gt;http://10.13.5.222/admin/squid_test.php?action=reset_hit_count&amp;random=0.385536803712753&lt;/a&gt;&lt;br&gt;HTTP&nbsp;200:&nbsp;200&nbsp;OK&lt;br&gt;X-Cache:&nbsp;MISS&nbsp;from&nbsp;dev-centOS&lt;br&gt;X-Cache-Lookup:&nbsp;MISS&nbsp;from&nbsp;dev-centOS:80&lt;br&gt;Fetching&nbsp;URL:&nbsp;&lt;a&nbsp;href=&quot;http://10.13.5.222/admin/squid_test.php?action=simple&amp;type=no_cache&amp;random=0.0843643311677589&quot;&gt;http://10.13.5.222/admin/squid_test.php?action=simple&amp;type=no_cache&amp;random=0.0843643311677589&lt;/a&gt;&lt;br&gt;HTTP&nbsp;200:&nbsp;200&nbsp;OK&lt;br&gt;X-Cache:&nbsp;MISS&nbsp;from&nbsp;dev-centOS&lt;br&gt;X-Cache-Lookup:&nbsp;MISS&nbsp;from&nbsp;dev-centOS:80&lt;br&gt;Fetching&nbsp;URL:&nbsp;&lt;a&nbsp;href=&quot;http://10.13.5.222/admin/squid_test.php?action=simple&amp;type=no_cache&amp;random=0.0843643311677589&quot;&gt;http://10.13.5.222/admin/squid_test.php?action=simple&amp;type=no_cache&amp;random=0.0843643311677589&lt;/a&gt;&lt;br&gt;HTTP&nbsp;200:&nbsp;200&nbsp;OK&lt;br&gt;X-Cache:&nbsp;MISS&nbsp;from&nbsp;dev-centOS &nbsp;&lt;br&gt;X-Cache-Lookup:&nbsp;HIT&nbsp;from&nbsp;dev-centOS:80&nbsp;&lt;b&gt;&lt;——&nbsp;Shows&nbsp;a&nbsp;hit&nbsp;(this&nbsp;should&nbsp;be&nbsp;10&nbsp;misses&nbsp;,&nbsp;a&nbsp;hit&nbsp;should&nbsp;never&nbsp;happen)&lt;/b&gt;&nbsp;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;b&gt;Test&nbsp;fails&lt;/b&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;w/&nbsp;2.7.9&nbsp;config&lt;br&gt;Miss&nbsp;with&nbsp;no-cache                 &nbsp;|&nbsp;Pass &nbsp;&lt;br&gt;&lt;br&gt;Running&nbsp;test:&nbsp;Miss&nbsp;with&nbsp;no-cache...&lt;br&gt;Resetting&nbsp;hit&nbsp;counter...&lt;br&gt;Fetching&nbsp;URL:&nbsp;&lt;a&nbsp;href=&quot;http://devcache01.eng.admission.net/admin/squid_test.php?action=reset_hit_count&amp;random=0.671442807268036&quot;&gt;http://devcache01.eng.admission.net/admin/squid_test.php?action=reset_hit_count&amp;random=0.671442807268036&lt;/a&gt;&lt;br&gt;HTTP&nbsp;200:&nbsp;200&nbsp;OK&lt;br&gt;X-Cache:&nbsp;MISS&nbsp;from&nbsp;dev-cache&lt;br&gt;X-Cache-Lookup:&nbsp;MISS&nbsp;from&nbsp;dev-cache:80&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;b&gt;I&nbsp;get&nbsp;10&nbsp;of&nbsp;the&nbsp;above&nbsp;responses&nbsp;(test&nbsp;passes).&lt;/b&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;I&#39;m&nbsp;wondering&nbsp;what&nbsp;I&#39;m&nbsp;missing,&nbsp;3.5&nbsp;should&nbsp;be&nbsp;fully&nbsp;http&nbsp;1.1&nbsp;compliant&nbsp;meaning&nbsp;that&nbsp;there&nbsp;should&nbsp;not&nbsp;be&nbsp;any&nbsp;squid&nbsp;directives&nbsp;guiding&nbsp;this&nbsp;(nor&nbsp;can&nbsp;I&nbsp;find&nbsp;any).&nbsp;If&nbsp;the&nbsp;client&nbsp;sends&nbsp;a&nbsp;&quot;&lt;span&nbsp;class=&quot;&quot;&gt;Cache-Control: no-cache&lt;/span&gt;&quot;&nbsp;it&nbsp;should&nbsp;be&nbsp;honored&nbsp;natively&nbsp;ya?&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;Thanks&nbsp;for&nbsp;any&nbsp;pointers&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;Tory&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
