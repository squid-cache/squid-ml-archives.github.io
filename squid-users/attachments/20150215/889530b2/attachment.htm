<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Amos, &lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thank&nbsp;you&nbsp;for&nbsp;your&nbsp;reply. &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;information&nbsp;I&nbsp;need&nbsp;to&nbsp;apply&nbsp;to&nbsp;the&nbsp;header&nbsp;is&nbsp;client&nbsp;specific,&nbsp;ex&nbsp;their&nbsp;internal&nbsp;ip&nbsp;address. &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;issue&nbsp;I&nbsp;am&nbsp;facing&nbsp;is&nbsp;that&nbsp;the&nbsp;network&nbsp;that&nbsp;is&nbsp;hosting&nbsp;the&nbsp;web&nbsp;services&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;network&nbsp;that&nbsp;the&nbsp;clients&nbsp;are&nbsp;accessing&nbsp;it&nbsp;from.&nbsp;So&nbsp;my&nbsp;Squid&nbsp;instances&nbsp;live&nbsp;at&nbsp;the&nbsp;client&nbsp;site&nbsp;and&nbsp;they&nbsp;access&nbsp;the&nbsp;web&nbsp;services&nbsp;out&nbsp;of&nbsp;a&nbsp;data&nbsp;center. &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;need&nbsp;to&nbsp;know&nbsp;the&nbsp;clients&nbsp;internal&nbsp;ip&nbsp;at&nbsp;the&nbsp;data&nbsp;center&nbsp;for&nbsp;a&nbsp;number&nbsp;of&nbsp;reasons.&nbsp;Therefore&nbsp;if&nbsp;I&nbsp;am&nbsp;understanding&nbsp;your&nbsp;suggestion&nbsp;correctly&nbsp;the&nbsp;reverse&nbsp;ssl&nbsp;proxy&nbsp;would&nbsp;not&nbsp;work&nbsp;as&nbsp;the&nbsp;squid&nbsp;reverse&nbsp;proxy&nbsp;needs&nbsp;to&nbsp;be&nbsp;on&nbsp;the&nbsp;same&nbsp;internal&nbsp;network/vlan&nbsp;as&nbsp;the&nbsp;destination&nbsp;host&nbsp;to&nbsp;function? &lt;a&nbsp;href=&quot;http://wiki.squid-cache.org/ConfigExamples/Reverse/SslWithWildcardCertifiate&quot;&gt;http://wiki.squid-cache.org/ConfigExamples/Reverse/SslWithWildcardCertifiate&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Essentially&nbsp;what&nbsp;I&nbsp;have&nbsp;is&nbsp;the&nbsp;clients&nbsp;internal&nbsp;ip&nbsp;at&nbsp;the&nbsp;client&nbsp;site,&nbsp;which&nbsp;with&nbsp;HTTP&nbsp;only&nbsp;used&nbsp;to&nbsp;allow&nbsp;me&nbsp;the&nbsp;pack&nbsp;the&nbsp;internal&nbsp;ip&nbsp;into&nbsp;the&nbsp;HTTP&nbsp;header&nbsp;via&nbsp;&#39;request_header_add&#39;.&nbsp;Now,&nbsp;I&nbsp;still&nbsp;need&nbsp;to&nbsp;get&nbsp;the&nbsp;internal&nbsp;ip&nbsp;into&nbsp;the&nbsp;HTTPS&nbsp;request&nbsp;so&nbsp;that&nbsp;the&nbsp;web&nbsp;services&nbsp;can&nbsp;operate&nbsp;as&nbsp;normal.&nbsp;Whether&nbsp;the&nbsp;clients&nbsp;internal&nbsp;ip&nbsp;is&nbsp;in&nbsp;the&nbsp;header&nbsp;or&nbsp;apart&nbsp;of&nbsp;each&nbsp;request&nbsp;(query&nbsp;param)&nbsp;doesnt&nbsp;really&nbsp;matter,&nbsp;just&nbsp;how&nbsp;can&nbsp;I&nbsp;get&nbsp;the&nbsp;internal&nbsp;ip&nbsp;to&nbsp;the&nbsp;server&nbsp;without&nbsp;disrupting&nbsp;the&nbsp;normal&nbsp;browsing&nbsp;activity&nbsp;of&nbsp;our&nbsp;users?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Please&nbsp;let&nbsp;me&nbsp;know&nbsp;if&nbsp;I&nbsp;have&nbsp;misunderstood&nbsp;your&nbsp;suggestion&nbsp;about&nbsp;the&nbsp;reverse&nbsp;proxy.&nbsp;FWIW&nbsp;we&nbsp;use&nbsp;nginx&nbsp;as&nbsp;a&nbsp;reverse&nbsp;proxy&nbsp;at&nbsp;the&nbsp;datacenter&nbsp;to&nbsp;load&nbsp;balance&nbsp;and&nbsp;handle&nbsp;certain&nbsp;API&nbsp;endpoints.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks, &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;James&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Sun,&nbsp;Feb&nbsp;15,&nbsp;2015&nbsp;at&nbsp;4:45&nbsp;PM,&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&nbsp;target=&quot;_blank&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&gt;-----BEGIN&nbsp;PGP&nbsp;SIGNED&nbsp;MESSAGE-----&lt;br&gt;<br>
Hash:&nbsp;SHA1&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&gt;On&nbsp;16/02/2015&nbsp;11:46&nbsp;a.m.,&nbsp;Yuri&nbsp;Voinov&nbsp;wrote:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;16.02.15&nbsp;4:40,&nbsp;James&nbsp;Beecham&nbsp;пишет:&lt;br&gt;<br>
&gt;&gt;&nbsp;Hi&nbsp;Yuri,&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Thank&nbsp;you.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Are&nbsp;these&nbsp;HTTPS&nbsp;CONNECT&nbsp;requests&nbsp;coming&nbsp;over&nbsp;port&nbsp;80?&nbsp;If&nbsp;not&lt;br&gt;<br>
&gt;&gt;&nbsp;would&nbsp;I&nbsp;need&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;It&nbsp;depends.&nbsp;In&nbsp;different&nbsp;configurations&nbsp;uses&nbsp;different&nbsp;ports.&nbsp;In&lt;br&gt;<br>
&gt;&nbsp;transparent&nbsp;interception&nbsp;mode&nbsp;your&nbsp;absolutely&nbsp;need&nbsp;separate&nbsp;ports&lt;br&gt;<br>
&gt;&nbsp;for&nbsp;HTTP/HTTPS.&nbsp;In&nbsp;forwarding&nbsp;mode&nbsp;you&nbsp;cah&nbsp;use&nbsp;one&nbsp;port,&nbsp;but&nbsp;with&lt;br&gt;<br>
&gt;&nbsp;SSL&nbsp;parameters.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;And&nbsp;James,&nbsp;since&nbsp;you&nbsp;are&nbsp;domain&nbsp;admin&nbsp;the&nbsp;question&nbsp;becomes&nbsp;why&nbsp;are&nbsp;you&lt;br&gt;<br>
not&nbsp;running&nbsp;a&nbsp;reverse-proxy&nbsp;&quot;https_port&nbsp;443&quot;&nbsp;with&nbsp;your&nbsp;domain&nbsp;cert&nbsp;to&lt;br&gt;<br>
receive&nbsp;the&nbsp;HTTPS&nbsp;traffic&nbsp;and&nbsp;forward&nbsp;it&nbsp;to&nbsp;the&nbsp;origin&nbsp;servers?&lt;br&gt;<br>
&lt;br&gt;<br>
Amos&lt;br&gt;<br>
-----BEGIN&nbsp;PGP&nbsp;SIGNATURE-----&lt;br&gt;<br>
Version:&nbsp;GnuPG&nbsp;v2.0.22&nbsp;(MingW32)&lt;br&gt;<br>
&lt;br&gt;<br>
iQEcBAEBAgAGBQJU4T2TAAoJELJo5wb/XPRjAmAIAK5HfCAwSMUCXIeFNIPzppBG&lt;br&gt;<br>
24i0loL2Bhg9z/J9ec0iENOEO4XV0LPkNQT2UmyRxO4HZis5Su3Hc8R50tG6mrPf&lt;br&gt;<br>
EdU1H+nTUTygGQkm3nK7OmfdbSy/kV6aXmLM4pToYwwV3j15GDlW0wA0DN9JZhIG&lt;br&gt;<br>
WIBfwb+fCcjD5FJq9HWdGajeWgT9yuT54ufqrRJyjnq2LQMW8q7kbxrr6ue9eZxZ&lt;br&gt;<br>
9Fsz1GnoneHO5nQ1BHbp/rTo+GCEfZLO+r87/6tCcYkYmtKsvP6kI7fCCSE1X0N6&lt;br&gt;<br>
bjUj1iya5Ec92PsPc2ubmemTBIL/P572nO15fKesxlSYWCsdkpsbA0bygiksbZI=&lt;br&gt;<br>
=ZEKG&lt;br&gt;<br>
-----END&nbsp;PGP&nbsp;SIGNATURE-----&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
