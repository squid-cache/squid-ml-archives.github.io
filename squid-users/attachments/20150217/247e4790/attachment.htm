<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Forgot&nbsp;to&nbsp;add. &nbsp;The&nbsp;actual&nbsp;cert&nbsp;is&nbsp;world&nbsp;readable.&lt;br&gt;&lt;br&gt;[admin@dsg214&nbsp;~]#&nbsp;ll&nbsp;/data/cacerts/../certs/a4a521af41327a4ab3ff1feb16a1a76888a0c2ea.crt&lt;br&gt;-rw-r--r--&nbsp;1&nbsp;admin&nbsp;root&nbsp;1108&nbsp;Feb&nbsp;18&nbsp;00:21&nbsp;/data/cacerts/../certs/a4a521af41327a4ab3ff1feb16a1a76888a0c2ea.crt&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Feb&nbsp;17,&nbsp;2015&nbsp;at&nbsp;5:18&nbsp;PM,&nbsp;Hector&nbsp;Chan&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:hectorchan@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;hectorchan@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;All,&lt;br&gt;&lt;br&gt;I&nbsp;have&nbsp;a&nbsp;question&nbsp;about&nbsp;using&nbsp;sslcapath&nbsp;in&nbsp;cache_peer. &nbsp;My&nbsp;&lt;a&nbsp;href=&quot;http://server.example.com&quot;&nbsp;target=&quot;_blank&quot;&gt;server.example.com&lt;/a&gt;&nbsp;has&nbsp;a&nbsp;self-signed&nbsp;cert,&nbsp;which&nbsp;I&nbsp;imported&nbsp;into&nbsp;my&nbsp;squid&nbsp;box&nbsp;under&nbsp;/data/certs. &nbsp;The&nbsp;following&nbsp;cache_peer&nbsp;line&nbsp;actually&nbsp;worked. &nbsp;However,&nbsp;if&nbsp;I&nbsp;remove&nbsp;the&nbsp;sslcafile,&nbsp;squid&nbsp;won&#39;t&nbsp;verify&nbsp;the&nbsp;self-signed&nbsp;cert.&lt;br&gt;&lt;div&gt;&lt;br&gt;cache_peer&nbsp;&lt;a&nbsp;href=&quot;http://server.example.com&quot;&nbsp;target=&quot;_blank&quot;&gt;server.example.com&lt;/a&gt;&nbsp;parent&nbsp;443&nbsp;0&nbsp;\&lt;br&gt;      &nbsp;no-query&nbsp;originserver&nbsp;ssl&nbsp;\&lt;br&gt;      &nbsp;forceddomain=&lt;a&nbsp;href=&quot;http://server.example.com&quot;&nbsp;target=&quot;_blank&quot;&gt;server.example.com&lt;/a&gt;&nbsp;\&lt;br&gt;      &nbsp;login=PASS&nbsp;\&lt;br&gt;      &nbsp;sslcert=/data/certs/certificate&nbsp;sslkey=/data/certs/key&nbsp;\&lt;br&gt;      &nbsp;ssloptions=NO_SSLv2,NO_SSLv3&nbsp;\&lt;br&gt;      &nbsp;sslcafile=/data/cacerts/72af835f.0&nbsp;\&lt;br&gt;      &nbsp;sslcapath=/data/cacerts&lt;br&gt;&lt;br&gt;[admin@dsg214&nbsp;cacerts]#&nbsp;ls&nbsp;-l&lt;br&gt;total&nbsp;0&lt;br&gt;lrwxrwxrwx&nbsp;1&nbsp;admin&nbsp;root&nbsp;53&nbsp;Feb&nbsp;18&nbsp;00:22&nbsp;35fa123a.0&nbsp;-&gt;&nbsp;../certs/a4a521af41327a4ab3ff1feb16a1a76888a0c2ea.crt&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Running&nbsp;openssl&nbsp;command&nbsp;from&nbsp;the&nbsp;squid&nbsp;box&nbsp;verified&nbsp;the&nbsp;certificate&nbsp;chain&nbsp;ok&nbsp;with&nbsp;the&nbsp;-CApath&nbsp;option,&nbsp;which&nbsp;really&nbsp;puzzled&nbsp;me.&lt;br&gt;&lt;/div&gt;&lt;div&gt;#&nbsp;openssl&nbsp;s_clients&nbsp;-CApath&nbsp;/data/certs&nbsp;-connect&nbsp;&lt;a&nbsp;href=&quot;http://server.example.com:443&quot;&nbsp;target=&quot;_blank&quot;&gt;server.example.com:443&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any&nbsp;ideas?&lt;br&gt;&lt;br&gt;Thanks,&lt;br&gt;Hector&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
