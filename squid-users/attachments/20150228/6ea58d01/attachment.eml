[From nobody Thu Jan  9 08:27:27 2025
X-Envelope-From: &lt;gcwsg-squid-users@m.gmane.org&gt;
X-Envelope-To: &lt;squid-users@squid-cache.org&gt;
Received: from plane.gmane.org (unknown)
 by lists.squid-cache.org(Postfix 2.11.0/8.13.0) with SMTP id unknown
 Sat, 28 Feb 2015 15:56:24 +0000
 (envelope-from &lt;gcwsg-squid-users@m.gmane.org&gt;
Received: from list by plane.gmane.org with local (Exim 4.69)
 (envelope-from &lt;gcwsg-squid-users@m.gmane.org&gt;) id 1YRjjv-0004G2-2l
 for squid-users@squid-cache.org; Sat, 28 Feb 2015 16:55:39 +0100
Received: from moeller.plus.com ([81.174.172.105])
 by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
 id 1AlnuQ-0007hv-00
 for &lt;squid-users@squid-cache.org&gt;; Sat, 28 Feb 2015 16:55:39 +0100
Received: from huaraz by moeller.plus.com with local (Gmexim 0.1 (Debian))
 id 1AlnuQ-0007hv-00
 for &lt;squid-users@squid-cache.org&gt;; Sat, 28 Feb 2015 16:55:39 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: squid-users@squid-cache.org
From: &quot;Markus Moeller&quot; &lt;huaraz@moeller.plus.com&gt;
Subject: Logging variable  question
Date: Sat, 28 Feb 2015 15:55:33 -0000
Lines: 58
Message-ID: &lt;mcsodm$i43$1@ger.gmane.org&gt;
Mime-Version: 1.0
Content-Type: text/plain; format=flowed; charset=&quot;iso-8859-1&quot;;
 reply-type=original
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: moeller.plus.com
X-MSMail-Priority: Normal
Importance: Normal
X-Newsreader: Microsoft Windows Live Mail 16.4.3528.331
X-MimeOLE: Produced By Microsoft MimeOLE V16.4.3528.331

Hi,

   I wonder about the total size variables &lt;st and &gt;st for squid logs

# &lt;st   Sent reply size including HTTP headers
# &gt;st   Received request size including HTTP headers. In the
#       case of chunked requests the chunked encoding metadata
#       are not included

I have set the logformat to

logformat squid_mm      %tg %6tr %&gt;a %Ss/%03&gt;Hs %&lt;st %&gt;st %rm %ru %un 
%Sh/%&lt;A %mt

and have 2 cases for which I would like to see the request/reply total data 
size.

Case 1

Just receiving data.  (44073 and 35754 are local and remote ports 
respectively)

28/Feb/2015:15:29:27   5887 192.168.1.17 TCP_TUNNEL/200 8895 45 CONNECT 
opensuse13.suse.home:443 - HIER_DIRECT/opensuse13.suse.home -

opensuse13:~ # grep tunnel /var/log/squid/cache_3.5.log  | grep 44073 | 
egrep readClient | awk '{ rc=rc+$12 }END{print rc&quot;\n&quot;}'
3483
opensuse13:~ # grep tunnel /var/log/squid/cache_3.5.log  | grep 35754 | grep 
readServer | awk '{ rs=rs+$12 }END{print rs&quot;\n&quot;}'
8895


Case 2

Receiving and posting data.

28/Feb/2015:15:38:21  15399 192.168.1.17 TCP_TUNNEL/200 7887 45 CONNECT 
opensuse13.suse.home:443 - HIER_DIRECT/opensuse13.suse.home -

opensuse13:~ # grep tunnel /var/log/squid/cache_3.5.log  | grep 44075 | grep 
readClient | awk '{ rc=rc+$12 }END{print rc&quot;\n&quot;}'
14555
opensuse13:~ # grep tunnel /var/log/squid/cache_3.5.log  | grep 35756 | grep 
readServer | awk '{ rs=rs+$12 }END{print rs&quot;\n&quot;}'
7887


In both cases I see &gt;st is only 45 bytes. But if I look at the debug from 
tunnel.cc  I see quite different numbers for thre read data ( BTW they match 
for &lt;st).

Is this a bug or my wrong interpretation of &gt;st ?


Thank you
Markus 


]