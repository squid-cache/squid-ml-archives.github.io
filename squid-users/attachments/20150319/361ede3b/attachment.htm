<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;style=&quot;font-size:12.8000001907349px&quot;&gt;Hey,&nbsp;I&nbsp;actually&nbsp;just&nbsp;figured&nbsp;it&nbsp;out.&nbsp;literally&nbsp;about&nbsp;2&nbsp;minutes&nbsp;ago.&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:12.8000001907349px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:12.8000001907349px&quot;&gt;I&nbsp;changed&nbsp;the&nbsp;mode&nbsp;from&nbsp;(http)&nbsp;to&nbsp;(tcp)&nbsp;in&nbsp;the &lt;span&nbsp;style=&quot;font-size:12.8000001907349px&quot;&gt;HAPROXY.CFG&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:12.8000001907349px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:12.8000001907349px&quot;&gt;It&nbsp;looks&nbsp;like&nbsp;its&nbsp;able&nbsp;to&nbsp;authenticate&nbsp;again.&nbsp;Thanks&nbsp;for&nbsp;the&nbsp;response.&nbsp; &lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Mar&nbsp;19,&nbsp;2015&nbsp;at&nbsp;7:27&nbsp;PM,&nbsp;Brendan&nbsp;Kearney&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:bpk678@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;bpk678@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;On&nbsp;Thu,&nbsp;2015-03-19&nbsp;at&nbsp;19:01&nbsp;-0600,&nbsp;Samuel&nbsp;Anderson&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;Hello&nbsp;All,&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;have&nbsp;2&nbsp;squid&nbsp;servers&nbsp;that&nbsp;authenticate&nbsp;correctly&nbsp;when&nbsp;you&nbsp;point&nbsp;your&lt;br&gt;<br>
&gt;&nbsp;browser&nbsp;to&nbsp;either&nbsp;of&nbsp;them.&nbsp;I&#39;m&nbsp;using&nbsp;a&nbsp;negotiate_wrapper.&nbsp;I&nbsp;set&nbsp;it&nbsp;up&lt;br&gt;<br>
&gt;&nbsp;following&nbsp;this&lt;br&gt;<br>
&gt;&nbsp;(&lt;a&nbsp;href=&quot;http://wiki.squid-cache.org/ConfigExamples/Authenticate/WindowsActiveDirectory&quot;&nbsp;target=&quot;_blank&quot;&gt;http://wiki.squid-cache.org/ConfigExamples/Authenticate/WindowsActiveDirectory&lt;/a&gt;)&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;set&nbsp;both&nbsp;servers&nbsp;behind&nbsp;a&nbsp;haproxy&nbsp;load&nbsp;balancer,&lt;br&gt;<br>
&gt;&nbsp;however&nbsp;when&nbsp;you&nbsp;try&nbsp;to&nbsp;utilize&nbsp;the&nbsp;haproxy&nbsp;load&nbsp;balancer,&nbsp;it&nbsp;will&nbsp;not&lt;br&gt;<br>
&gt;&nbsp;authenticate&nbsp;anymore.&nbsp;It&nbsp;just&nbsp;gives&nbsp;an&nbsp;error&nbsp;asking&nbsp;to&nbsp;authenticate.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Any&nbsp;ideas?&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Thanks&nbsp;in&nbsp;advance.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;##HAPROXY.CFG##&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;global&lt;br&gt;<br>
&gt;&nbsp;log&nbsp;/dev/log&nbsp;local0&lt;br&gt;<br>
&gt;&nbsp;log&nbsp;/dev/log&nbsp;local1&nbsp;notice&lt;br&gt;<br>
&gt;&nbsp;chroot&nbsp;/var/lib/haproxy&lt;br&gt;<br>
&gt;&nbsp;user&nbsp;haproxy&lt;br&gt;<br>
&gt;&nbsp;group&nbsp;haproxy&lt;br&gt;<br>
&gt;&nbsp;daemon&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;defaults&lt;br&gt;<br>
&gt;&nbsp;log&nbsp;global&lt;br&gt;<br>
&gt;&nbsp;mode&nbsp;http&lt;br&gt;<br>
&gt;&nbsp;option&nbsp;httplog&lt;br&gt;<br>
&gt;&nbsp;option&nbsp;dontlognull&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp; contimeout&nbsp;5000&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp; clitimeout&nbsp;50000&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp; srvtimeout&nbsp;50000&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;#&nbsp;reverse&nbsp;proxy-squid&lt;br&gt;<br>
&gt;&nbsp;listen &nbsp;proxy&nbsp;&lt;a&nbsp;href=&quot;http://10.10.0.254:3128&quot;&nbsp;target=&quot;_blank&quot;&gt;10.10.0.254:3128&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;mode&nbsp;http&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp; cookie &nbsp;SERVERID&nbsp;insert&nbsp;indirect&nbsp;nocache&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp; balance&nbsp;roundrobin&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp; option&nbsp;httpclose&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp; option&nbsp;forwardfor&nbsp;header&nbsp;X-Client&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp; server &nbsp;squid1&nbsp;&lt;a&nbsp;href=&quot;http://10.10.0.253:3128&quot;&nbsp;target=&quot;_blank&quot;&gt;10.10.0.253:3128&lt;/a&gt;&nbsp;check&nbsp;inter&nbsp;2000&nbsp;rise&nbsp;2&nbsp;fall&nbsp;5&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp; server &nbsp;squid2&nbsp;&lt;a&nbsp;href=&quot;http://10.10.0.252:3128&quot;&nbsp;target=&quot;_blank&quot;&gt;10.10.0.252:3128&lt;/a&gt;&nbsp;check&nbsp;inter&nbsp;2000&nbsp;rise&nbsp;2&nbsp;fall&nbsp;5&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;##SQUID.CONF##&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;#Kerberos&nbsp;and&nbsp;NTLM&nbsp;authentication&lt;br&gt;<br>
&gt;&nbsp;auth_param&nbsp;negotiate&nbsp;program&nbsp;/usr/local/bin/negotiate_wrapper&lt;br&gt;<br>
&gt;&nbsp;--ntlm&nbsp;/usr/bin/ntlm_auth&nbsp;--diagnostics&lt;br&gt;<br>
&gt;&nbsp;--helper-protocol=squid-2.5-ntlmssp&nbsp;--domain=****.LOCAL&lt;br&gt;<br>
&gt;&nbsp;--kerberos&nbsp;/usr/lib/squid3/negotiate_kerberos_auth&nbsp;-d&nbsp;-s&nbsp;GSS_C_NO_NAME&lt;br&gt;<br>
&gt;&nbsp;auth_param&nbsp;negotiate&nbsp;children&nbsp;30&lt;br&gt;<br>
&gt;&nbsp;auth_param&nbsp;negotiate&nbsp;keep_alive&nbsp;off&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;#&nbsp;LDAP&nbsp;authentication&lt;br&gt;<br>
&gt;&nbsp;auth_param&nbsp;basic&nbsp;program&nbsp;/usr/lib/squid3/basic_ldap_auth&nbsp;-R&nbsp;-b&lt;br&gt;<br>
&gt;&nbsp;&quot;DC=****,DC=local&quot;&nbsp;-D&nbsp;&quot;CN=SQUID,OU=Service&nbsp;Accounts,DC=****,DC=local&quot;&lt;br&gt;<br>
&gt;&nbsp;-w&nbsp;&quot;****&quot;&nbsp;-f&nbsp;sAMAccountName=%s&nbsp;-h&lt;br&gt;<br>
&gt;&nbsp;10.0.0.200,10.0.0.199,10.0.0.194,10.0.0.193&lt;br&gt;<br>
&gt;&nbsp;auth_param&nbsp;basic&nbsp;children&nbsp;150&lt;br&gt;<br>
&gt;&nbsp;auth_param&nbsp;basic&nbsp;realm&nbsp;Please&nbsp;enter&nbsp;your&nbsp;Domain&nbsp;credentials&nbsp;to&lt;br&gt;<br>
&gt;&nbsp;continue&lt;br&gt;<br>
&gt;&nbsp;auth_param&nbsp;basic&nbsp;credentialsttl&nbsp;1&nbsp;hour&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;#&nbsp;AD&nbsp;group&nbsp;membership&nbsp;commands&lt;br&gt;<br>
&gt;&nbsp;external_acl_type&nbsp;ldap_group&nbsp;ttl=60&nbsp;children-startup=10&lt;br&gt;<br>
&gt;&nbsp;children-max=50&nbsp;children-idle=2&nbsp;%&lt;br&gt;<br>
&gt;&nbsp;LOGIN&nbsp;/usr/lib/squid3/ext_ldap_group_acl&nbsp;-R&nbsp;-K&nbsp;-S&nbsp;-b&lt;br&gt;<br>
&gt;&nbsp;&quot;DC=****,DC=local&quot;&nbsp;-D&nbsp;&quot;CN=SQUID,OU=Service&nbsp;Accounts,DC=****,DC=local&quot;&lt;br&gt;<br>
&gt;&nbsp;-w&nbsp;&quot;****&quot;&nbsp;-f&nbsp;&quot;(&amp;(objectclass=person)&nbsp;(sAMAccountname=%v)(memberof=CN=%&lt;br&gt;<br>
&gt;&nbsp;a,OU=PROXY,ou=ALL &nbsp;Groups,DC=****,DC=local))&quot;&nbsp;-h&lt;br&gt;<br>
&gt;&nbsp;dc1.****.local,dc2.****.local,dc3.****.local,dc4.****.local&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;auth&nbsp;proxy_auth&nbsp;REQUIRED&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;REQGROUPS&nbsp;external&nbsp;ldap_group&nbsp;PROXY-HIGHLY-RESTRICTIVE&lt;br&gt;<br>
&gt;&nbsp;PROXY-MEDIUM-RESTRICTIVE&nbsp;PROXY-MINIMAL-RESTRICTIVE&nbsp;PROXY-UNRESTRICTED&lt;br&gt;<br>
&gt;&nbsp;PROXY-DEV&nbsp;PROXY-SALES&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;http_access&nbsp;deny&nbsp;!auth&nbsp;all&lt;br&gt;<br>
&gt;&nbsp;http_access&nbsp;deny&nbsp;!REQGROUPS&nbsp;all&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;--&lt;br&gt;<br>
&gt;&nbsp;Samuel&nbsp;Anderson &nbsp;| &nbsp;Information&nbsp;Technology&nbsp;Administrator &nbsp;|&lt;br&gt;<br>
&gt; &nbsp;International&nbsp;Document&nbsp;Services&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;IDS &nbsp;| &nbsp;11629&nbsp;South&nbsp;700&nbsp;East,&nbsp;Suite&nbsp;200 &nbsp;| &nbsp;Draper,&nbsp;UT&nbsp;84020-4607&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&gt;&nbsp;CONFIDENTIALITY&nbsp;NOTICE:&lt;br&gt;<br>
&gt;&nbsp;This&nbsp;e-mail&nbsp;and&nbsp;any&nbsp;attachments&nbsp;are&nbsp;confidential.&nbsp;If&nbsp;you&nbsp;are&nbsp;not&nbsp;an&lt;br&gt;<br>
&gt;&nbsp;intended&nbsp;recipient,&nbsp;please&nbsp;contact&nbsp;the&nbsp;sender&nbsp;to&nbsp;report&nbsp;the&nbsp;error&nbsp;and&lt;br&gt;<br>
&gt;&nbsp;delete&nbsp;all&nbsp;copies&nbsp;of&nbsp;this&nbsp;message&nbsp;from&nbsp;your&nbsp;system. &nbsp;Any&nbsp;unauthorized&lt;br&gt;<br>
&gt;&nbsp;review,&nbsp;use,&nbsp;disclosure&nbsp;or&nbsp;distribution&nbsp;is&nbsp;prohibited.&lt;br&gt;<br>
&lt;br&gt;<br>
how&nbsp;did&nbsp;you&nbsp;create&nbsp;and&nbsp;distribute&nbsp;the&nbsp;keytab&nbsp;for&nbsp;the&nbsp;proxies? &nbsp;you&nbsp;must&lt;br&gt;<br>
create&nbsp;one&nbsp;keytab&nbsp;and&nbsp;put&nbsp;the&nbsp;same&nbsp;exact&nbsp;one&nbsp;on&nbsp;each&nbsp;of&nbsp;the&nbsp;proxies.&lt;br&gt;<br>
the&nbsp;KVNO&nbsp;numbers&nbsp;must&nbsp;match&nbsp;on&nbsp;every&nbsp;proxy. &nbsp;run&nbsp;&quot;klist&lt;br&gt;<br>
-Kket&nbsp;/path/to/the.keytab&quot;&nbsp;on&nbsp;the&nbsp;proxies&nbsp;to&nbsp;check.&lt;br&gt;<br>
&lt;br&gt;<br>
kerberos&nbsp;is&nbsp;heavily&nbsp;dependent&nbsp;on&nbsp;DNS. &nbsp;the&nbsp;keytab&nbsp;should&nbsp;contain&lt;br&gt;<br>
PRIMARY/instance.domain.tld@REALM&nbsp;where&nbsp;PRIMARY&nbsp;is&nbsp;HTTP,&lt;br&gt;<br>
instance.domain.tld&nbsp;is&nbsp;the&nbsp;FQDN&nbsp;of&nbsp;the&nbsp;10.10.0.254&nbsp;IP,&nbsp;not&nbsp;either&nbsp;or&lt;br&gt;<br>
both&nbsp;of&nbsp;the&nbsp;individual&nbsp;proxies,&nbsp;and&nbsp;REALM&nbsp;should&nbsp;be&nbsp;the&nbsp;Kerberos&nbsp;REALM.&lt;br&gt;<br>
&lt;br&gt;<br>
did&nbsp;you&nbsp;export&nbsp;the&nbsp;environment&nbsp;variable&nbsp;for&nbsp;the&nbsp;keytab? &nbsp;on&nbsp;fedora,&nbsp;i&lt;br&gt;<br>
put&nbsp;the&nbsp;following&nbsp;in&nbsp;/etc/sysconfig/squid:&lt;br&gt;<br>
&lt;br&gt;<br>
KRB5_KTNAME=/etc/squid/squid.keytab&lt;br&gt;<br>
export&nbsp;KRB5_KTNAME&lt;br&gt;<br>
&lt;br&gt;<br>
do&nbsp;you&nbsp;get&nbsp;a&nbsp;HTTP&nbsp;ticket&nbsp;from&nbsp;the&nbsp;directory? &nbsp;from&nbsp;a&nbsp;command&nbsp;prompt,&lt;br&gt;<br>
what&nbsp;does&nbsp;&quot;klist&nbsp;tickets&quot;&nbsp;show? &nbsp;you&nbsp;can&nbsp;also&nbsp;install&nbsp;the&nbsp;XP&nbsp;resource&lt;br&gt;<br>
kit&nbsp;and&nbsp;run&nbsp;kerbtray.exe&nbsp;to&nbsp;get&nbsp;that&nbsp;info. &nbsp;win7&nbsp;and&nbsp;newer&nbsp;may&nbsp;have&nbsp;it&lt;br&gt;<br>
built&nbsp;in.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;Samuel&nbsp;Anderson&nbsp; |&nbsp; Information Technology Administrator&nbsp; |&nbsp; International&nbsp;Document&nbsp;Services&lt;/font&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;IDS&nbsp; |&nbsp; 11629&nbsp;South&nbsp;700&nbsp;East,&nbsp;Suite&nbsp;200&nbsp; |&nbsp; Draper,&nbsp;UT&nbsp;84020-4607&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;text-align:right&quot;&gt;&lt;img&nbsp;src=&quot;http://nationalmortgageprofessional.com/sites/default/files/images/IDS_Logo_03_12.topstoryimage.jpg&quot;&nbsp;width=&quot;96&quot;&nbsp;height=&quot;88&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/div&gt;<br>
<br>
&lt;br&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Arial,Helvetica,sans-serif&quot;&gt;&lt;font&nbsp;face=&quot;Arial,&nbsp;Helvetica,&nbsp;sans-serif&quot;&nbsp;size=&quot;4&quot;&gt;CONFIDENTIALITY&nbsp;NOTICE:&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-family:Arial,Helvetica,sans-serif&quot;&gt;&lt;font&nbsp;size=&quot;4&quot;&gt;&lt;font&nbsp;face=&quot;Arial,&nbsp;Helvetica,&nbsp;sans-serif&quot;&nbsp;style=&quot;font-family:Arial,Helvetica,sans-serif&quot;&gt;This&nbsp;e-mail&nbsp;and&nbsp;any&nbsp;attachments&nbsp;are&nbsp;confidential.&nbsp;If&nbsp;you&nbsp;are&nbsp;not&nbsp;an&nbsp;intended&nbsp;recipient,&nbsp;please&nbsp;contact&nbsp;the&nbsp;sender&nbsp;to&nbsp;report&nbsp;the&nbsp;error&nbsp;and&nbsp;delete&nbsp;all&nbsp;copies&nbsp;of&nbsp;this&nbsp;message&nbsp;from&nbsp;your&nbsp;system.&nbsp; &lt;/font&gt;&lt;font&nbsp;face=&quot;Arial,&nbsp;Helvetica,&nbsp;sans-serif&quot;&gt;Any&nbsp;unauthorized&nbsp;review,&nbsp;use,&nbsp;disclosure&nbsp;or&nbsp;distribution&nbsp;is&nbsp;prohibited&lt;/font&gt;&lt;font&nbsp;face=&quot;Arial,&nbsp;Helvetica,&nbsp;sans-serif&quot;&gt;.&lt;/font&gt;&lt;/font&gt;&lt;/div&gt;
</tt>
