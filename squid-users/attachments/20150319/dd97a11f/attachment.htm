<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html&nbsp;charset=utf-8&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Hey&nbsp;y’all&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Finally&nbsp;got&nbsp;3.5.2&nbsp;running.&nbsp;I&nbsp;was&nbsp;under&nbsp;the&nbsp;impression&nbsp;that&nbsp;using&nbsp;server-first&nbsp;SSL&nbsp;bump&nbsp;would&nbsp;still&nbsp;be&nbsp;compatible,&nbsp;despite&nbsp;all&nbsp;the&nbsp;Peek&nbsp;&amp;&nbsp;Splice&nbsp;changes,&nbsp;but&nbsp;apparently&nbsp;not.&nbsp;Hopefully&nbsp;someone&nbsp;can&nbsp;explain&nbsp;what&nbsp;might&nbsp;be&nbsp;going&nbsp;wrong&nbsp;here&nbsp;...&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Using&nbsp;the&nbsp;same&nbsp;SSL&nbsp;Bump&nbsp;config&nbsp;that&nbsp;we&nbsp;used&nbsp;for&nbsp;3.4,&nbsp;we&nbsp;now&nbsp;seeing&nbsp;this&nbsp;happen:&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;style=&quot;margin:&nbsp;0px;&nbsp;font-family:&nbsp;Menlo;&nbsp;color:&nbsp;rgb(248,&nbsp;248,&nbsp;248);&nbsp;background-color:&nbsp;rgb(35,&nbsp;35,&nbsp;35);&quot;&nbsp;class=&quot;&quot;&gt;19/Mar/2015-16:21:32&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;22&nbsp;d4:f4:6f:71:90:e6&nbsp;10.0.1.71&nbsp;TCP_DENIED&nbsp;200&nbsp;0&nbsp;CONNECT&nbsp;94.31.29.230:443&nbsp;-&nbsp;server-first&nbsp;-&nbsp;HIER_NONE/-&nbsp;-&nbsp;-&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Instead&nbsp;of&nbsp;this:&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;style=&quot;margin:&nbsp;0px;&nbsp;font-family:&nbsp;Menlo;&nbsp;color:&nbsp;rgb(248,&nbsp;248,&nbsp;248);&nbsp;background-color:&nbsp;rgb(35,&nbsp;35,&nbsp;35);&quot;&nbsp;class=&quot;&quot;&gt;19/Mar/2015-14:42:04&nbsp;&nbsp;&nbsp;&nbsp;736&nbsp;d4:f4:6f:71:90:e6&nbsp;10.0.1.71&nbsp;TCP_MISS&nbsp;200&nbsp;96913&nbsp;GET&nbsp;&lt;a&nbsp;href=&quot;https://code.jquery.com/jquery-1.11.0.min.js&quot;&nbsp;class=&quot;&quot;&gt;https://code.jquery.com/jquery-1.11.0.min.js&lt;/a&gt;&nbsp;-&nbsp;server-first&nbsp;Mozilla/5.0%20(iPhone;%20CPU%20iPhone%20OS%208_2%20like%20Mac%20OS%20X)%20AppleWebKit/600.1.4%20(KHTML,%20like%20Gecko)%20Mobile/12D508&nbsp;ORIGINAL_DST/94.31.29.53&nbsp;application/x-javascript&nbsp;-&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;This&nbsp;request&nbsp;happens&nbsp;in&nbsp;a&nbsp;little&nbsp;splash&nbsp;page&nbsp;which&nbsp;is&nbsp;designed&nbsp;to&nbsp;test&nbsp;if&nbsp;squid’s&nbsp;CA&nbsp;cert&nbsp;is&nbsp;installed&nbsp;on&nbsp;the&nbsp;client&nbsp;and&nbsp;redirect&nbsp;them&nbsp;to&nbsp;some&nbsp;instructions&nbsp;if&nbsp;it’s&nbsp;not.&nbsp;This&nbsp;definitely&nbsp;isn’t&nbsp;happening&nbsp;for&nbsp;all&nbsp;intercepted&nbsp;HTTPS&nbsp;requests,&nbsp;just&nbsp;this&nbsp;(particularly&nbsp;important)&nbsp;one&nbsp;and&nbsp;some&nbsp;others.&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;SSL&nbsp;Bump&nbsp;config:&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;style=&quot;margin:&nbsp;0px;&nbsp;font-family:&nbsp;Menlo;&nbsp;color:&nbsp;rgb(248,&nbsp;248,&nbsp;248);&nbsp;background-color:&nbsp;rgb(35,&nbsp;35,&nbsp;35);&quot;&nbsp;class=&quot;&quot;&gt;ssl_bump&nbsp;&lt;span&nbsp;style=&quot;font-variant-ligatures:&nbsp;no-common-ligatures;&nbsp;color:&nbsp;#f4888a&quot;&nbsp;class=&quot;&quot;&gt;none&lt;/span&gt;&nbsp;localhost&lt;/div&gt;&lt;div&nbsp;style=&quot;margin:&nbsp;0px;&nbsp;font-family:&nbsp;Menlo;&nbsp;color:&nbsp;rgb(248,&nbsp;248,&nbsp;248);&nbsp;background-color:&nbsp;rgb(35,&nbsp;35,&nbsp;35);&nbsp;min-height:&nbsp;14px;&quot;&nbsp;class=&quot;&quot;&gt;ssl_bump&nbsp;server-first&nbsp;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(244,&nbsp;136,&nbsp;138);&quot;&nbsp;class=&quot;&quot;&gt;all&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;style=&quot;margin:&nbsp;0px;&nbsp;font-family:&nbsp;Menlo;&nbsp;color:&nbsp;rgb(248,&nbsp;248,&nbsp;248);&nbsp;background-color:&nbsp;rgb(35,&nbsp;35,&nbsp;35);&quot;&nbsp;class=&quot;&quot;&gt;sslproxy_cert_error&nbsp;&lt;span&nbsp;style=&quot;font-variant-ligatures:&nbsp;no-common-ligatures;&nbsp;color:&nbsp;#f4888a&quot;&nbsp;class=&quot;&quot;&gt;deny&lt;/span&gt;&nbsp;&lt;span&nbsp;style=&quot;font-variant-ligatures:&nbsp;no-common-ligatures;&nbsp;color:&nbsp;#f4888a&quot;&nbsp;class=&quot;&quot;&gt;all&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin:&nbsp;0px;&nbsp;font-family:&nbsp;Menlo;&nbsp;color:&nbsp;rgb(248,&nbsp;248,&nbsp;248);&nbsp;background-color:&nbsp;rgb(35,&nbsp;35,&nbsp;35);&quot;&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;font-variant-ligatures:&nbsp;no-common-ligatures;&nbsp;color:&nbsp;#f4888a&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;margin:&nbsp;0px;&nbsp;font-family:&nbsp;Menlo;&nbsp;color:&nbsp;rgb(248,&nbsp;248,&nbsp;248);&nbsp;background-color:&nbsp;rgb(35,&nbsp;35,&nbsp;35);&nbsp;min-height:&nbsp;14px;&quot;&nbsp;class=&quot;&quot;&gt;sslcrtd_program&nbsp;/usr/bin/squid_ssl_crtd&nbsp;-s&nbsp;/path/to/squid/ssl_db&nbsp;-M&nbsp;4MB&lt;/div&gt;&lt;div&nbsp;style=&quot;margin:&nbsp;0px;&nbsp;font-family:&nbsp;Menlo;&nbsp;color:&nbsp;rgb(248,&nbsp;248,&nbsp;248);&nbsp;background-color:&nbsp;rgb(35,&nbsp;35,&nbsp;35);&quot;&nbsp;class=&quot;&quot;&gt;sslcrtd_children&nbsp;&lt;span&nbsp;style=&quot;font-variant-ligatures:&nbsp;no-common-ligatures;&nbsp;color:&nbsp;#f4888a&quot;&nbsp;class=&quot;&quot;&gt;32&lt;/span&gt;&nbsp;startup=&lt;span&nbsp;style=&quot;font-variant-ligatures:&nbsp;no-common-ligatures;&nbsp;color:&nbsp;#f4888a&quot;&nbsp;class=&quot;&quot;&gt;5&lt;/span&gt;&nbsp;idle=&lt;span&nbsp;style=&quot;font-variant-ligatures:&nbsp;no-common-ligatures;&nbsp;color:&nbsp;#f4888a&quot;&nbsp;class=&quot;&quot;&gt;1&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;font-variant-ligatures:&nbsp;no-common-ligatures;&nbsp;color:&nbsp;#f4888a&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;DNAT&nbsp;intercepting&nbsp;port&nbsp;config:&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;style=&quot;margin:&nbsp;0px;&nbsp;font-family:&nbsp;Menlo;&nbsp;color:&nbsp;rgb(248,&nbsp;248,&nbsp;248);&nbsp;background-color:&nbsp;rgb(35,&nbsp;35,&nbsp;35);&quot;&nbsp;class=&quot;&quot;&gt;https_port&nbsp;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(244,&nbsp;136,&nbsp;138);&quot;&nbsp;class=&quot;&quot;&gt;3130&lt;/span&gt;&nbsp;intercept&nbsp;name=&lt;span&nbsp;style=&quot;color:&nbsp;rgb(244,&nbsp;136,&nbsp;138);&quot;&nbsp;class=&quot;&quot;&gt;3130&lt;/span&gt;&nbsp;ssl-bump&nbsp;generate-host-certificates=&lt;span&nbsp;style=&quot;color:&nbsp;rgb(244,&nbsp;136,&nbsp;138);&quot;&nbsp;class=&quot;&quot;&gt;on&lt;/span&gt;&nbsp;dynamic_cert_mem_cache_size=4MB&nbsp;cert=/path/to/squid/proxy-cert.cer&nbsp;key=/path/to/squid/proxy-key.key&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Thanks!&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
