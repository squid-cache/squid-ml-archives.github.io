<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;I&nbsp;have&nbsp;squid&nbsp;running&nbsp;ok&nbsp;on&nbsp;one&nbsp;machine&nbsp;doing&nbsp;basic&nbsp;forwarding&nbsp;but&nbsp;when&nbsp;I&nbsp;try&nbsp;to&nbsp;add&nbsp;a&nbsp;setting&nbsp;for&nbsp;url&nbsp;redirection&nbsp;it&nbsp;just&nbsp;stops&nbsp;with&nbsp;no&nbsp;errors.&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;I&nbsp;cloned&nbsp;the&nbsp;machine&nbsp;and&nbsp;owrked&nbsp;on&nbsp;the&nbsp;url&nbsp;redirection&nbsp;and&nbsp;eventually&nbsp;settled&nbsp;on&nbsp;squirm&nbsp;and&nbsp;got&nbsp;it&nbsp;working,&nbsp;when&nbsp;I&nbsp;went&nbsp;back&nbsp;to&nbsp;the&nbsp;original&nbsp;machine&nbsp;to&nbsp;try&nbsp;it&nbsp;again&nbsp;it&nbsp;did&nbsp;the&nbsp;same.&lt;br&gt;&lt;br&gt;&lt;/div&gt;When&nbsp;I&nbsp;try&nbsp;to&nbsp;run&nbsp;it&nbsp;maunally&nbsp;on&nbsp;different&nbsp;port&nbsp;etc&nbsp;using&nbsp;a&nbsp;different&nbsp;config&nbsp;file&nbsp;on&nbsp;either&nbsp;machine&nbsp;it&nbsp;does&nbsp;the&nbsp;same.&lt;br&gt;&lt;br&gt;&lt;/div&gt;Below&nbsp;is&nbsp;the&nbsp;log&nbsp;output&lt;br&gt;&lt;br&gt;squid&nbsp;-f&nbsp;squid.conf-2&nbsp;-X&nbsp;-N&nbsp;-a&nbsp;3129&lt;br&gt;2015/03/20&nbsp;15:45:22.131|&nbsp;command-line&nbsp;-X&nbsp;overrides:&nbsp;ALL,7&lt;br&gt;2015/03/20&nbsp;15:45:22.132|&nbsp;http(s)_port:&nbsp;found&nbsp;Listen&nbsp;on&nbsp;Port:&nbsp;3129&lt;br&gt;2015/03/20&nbsp;15:45:22.132|&nbsp;http(s)_port:&nbsp;found&nbsp;Listen&nbsp;on&nbsp;wildcard&nbsp;address:&nbsp;*:3129&lt;br&gt;2015/03/20&nbsp;15:45:22.132|&nbsp;CacheManager::registerAction:&nbsp;registering&nbsp;legacy&nbsp;mem&lt;br&gt;2015/03/20&nbsp;15:45:22.132|&nbsp;CacheManager::findAction:&nbsp;looking&nbsp;for&nbsp;action&nbsp;mem&lt;br&gt;2015/03/20&nbsp;15:45:22.132|&nbsp;Action&nbsp;not&nbsp;found.&lt;br&gt;2015/03/20&nbsp;15:45:22.132|&nbsp;CacheManager::registerAction:&nbsp;registered&nbsp;mem&lt;br&gt;2015/03/20&nbsp;15:45:22.132|&nbsp;CacheManager::registerAction:&nbsp;registering&nbsp;legacy&nbsp;squidaio_counts&lt;br&gt;2015/03/20&nbsp;15:45:22.132|&nbsp;CacheManager::findAction:&nbsp;looking&nbsp;for&nbsp;action&nbsp;squidaio_counts&lt;br&gt;2015/03/20&nbsp;15:45:22.132|&nbsp;Action&nbsp;not&nbsp;found.&lt;br&gt;2015/03/20&nbsp;15:45:22.132|&nbsp;CacheManager::registerAction:&nbsp;registered&nbsp;squidaio_counts&lt;br&gt;2015/03/20&nbsp;15:45:22.132|&nbsp;CacheManager::registerAction:&nbsp;registering&nbsp;legacy&nbsp;diskd&lt;br&gt;2015/03/20&nbsp;15:45:22.132|&nbsp;CacheManager::findAction:&nbsp;looking&nbsp;for&nbsp;action&nbsp;diskd&lt;br&gt;2015/03/20&nbsp;15:45:22.132|&nbsp;Action&nbsp;not&nbsp;found.&lt;br&gt;2015/03/20&nbsp;15:45:22.132|&nbsp;CacheManager::registerAction:&nbsp;registered&nbsp;diskd&lt;br&gt;2015/03/20&nbsp;15:45:22.132|&nbsp;Detected&nbsp;IPv6&nbsp;hybrid&nbsp;or&nbsp;v4-mapping&nbsp;stack...&lt;br&gt;2015/03/20&nbsp;15:45:22.132|&nbsp;IPv6&nbsp;transport&nbsp;Enabled&lt;br&gt;2015/03/20&nbsp;15:45:22.132|&nbsp;aclDestroyACLs:&nbsp;invoked&lt;br&gt;2015/03/20&nbsp;15:45:22.132|&nbsp;cbdataFree:&nbsp;0x7ff55b585af8&lt;br&gt;2015/03/20&nbsp;15:45:22.132|&nbsp;cbdataFree:&nbsp;Freeing&nbsp;0x7ff55b585af8&lt;br&gt;2015/03/20&nbsp;15:45:22.132|&nbsp;ACL::Prototype::Registered:&nbsp;invoked&nbsp;for&nbsp;type&nbsp;src&lt;br&gt;2015/03/20&nbsp;15:45:22.132|&nbsp;ACL::Prototype::Registered:   &nbsp;yes&lt;br&gt;2015/03/20&nbsp;15:45:22.132|&nbsp;ACL::FindByName&nbsp;&#39;all&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.132|&nbsp;ACL::FindByName&nbsp;found&nbsp;no&nbsp;match&lt;br&gt;2015/03/20&nbsp;15:45:22.132|&nbsp;aclParseAclLine:&nbsp;Creating&nbsp;ACL&nbsp;&#39;all&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.132|&nbsp;ACL::Prototype::Factory:&nbsp;cloning&nbsp;an&nbsp;object&nbsp;for&nbsp;type&nbsp;&#39;src&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.132|&nbsp;aclIpParseIpData:&nbsp;all&lt;br&gt;2015/03/20&nbsp;15:45:22.132|&nbsp;aclIpParseIpData:&nbsp;magic&nbsp;&#39;all&#39;&nbsp;found.&lt;br&gt;2015/03/20&nbsp;15:45:22.132|&nbsp;aclParseAclList:&nbsp;looking&nbsp;for&nbsp;ACL&nbsp;name&nbsp;&#39;all&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.133|&nbsp;ACL::FindByName&nbsp;&#39;all&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.133|&nbsp;Processing&nbsp;Configuration&nbsp;File:&nbsp;squid.conf-2&nbsp;(depth&nbsp;0)&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;Processing:&nbsp;&#39;visible_hostname&nbsp;mailsrv1&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;Processing:&nbsp;&#39;debug_options&nbsp;rotate=3&nbsp;ALL,2&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;Processing:&nbsp;&#39;cache_effective_user&nbsp;squid&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;Processing:&nbsp;&#39;cache_effective_group&nbsp;squid&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;Processing:&nbsp;&#39;url_rewrite_program&nbsp;/usr/local/squirm/bin/squirm&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;Processing:&nbsp;&#39;redirect_children&nbsp;5&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;Processing:&nbsp;&#39;dns_nameservers&nbsp;208.67.222.222&nbsp;208.67.220.220&nbsp;192.168.32.1&nbsp;192.168.32.2&nbsp;192.168.40.254&nbsp;192.168.40.5&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;Processing:&nbsp;&#39;http_port&nbsp;3329&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;http(s)_port:&nbsp;found&nbsp;Listen&nbsp;on&nbsp;Port:&nbsp;3329&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;http(s)_port:&nbsp;found&nbsp;Listen&nbsp;on&nbsp;wildcard&nbsp;address:&nbsp;*:3329&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;Processing:&nbsp;&#39;hierarchy_stoplist&nbsp;cgi-bin&nbsp;?&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;Processing:&nbsp;&#39;coredump_dir&nbsp;/var/spool/squid&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;Processing:&nbsp;&#39;refresh_pattern&nbsp;^ftp:            &nbsp;1440   &nbsp;20%    &nbsp;10080&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;Processing:&nbsp;&#39;refresh_pattern&nbsp;^gopher: &nbsp;1440   &nbsp;0%     &nbsp;1440&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;Processing:&nbsp;&#39;refresh_pattern&nbsp;-i&nbsp;(/cgi-bin/|\?)&nbsp;0      &nbsp;0%     &nbsp;0&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;Processing:&nbsp;&#39;refresh_pattern&nbsp;.        &nbsp;0      &nbsp;20%    &nbsp;4320&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;Processing:&nbsp;&#39;delay_initial_bucket_level&nbsp;0&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;aclParseAclList:&nbsp;looking&nbsp;for&nbsp;ACL&nbsp;name&nbsp;&#39;all&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;ACL::FindByName&nbsp;&#39;all&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;aclParseAclList:&nbsp;looking&nbsp;for&nbsp;ACL&nbsp;name&nbsp;&#39;all&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;ACL::FindByName&nbsp;&#39;all&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;aclParseAclList:&nbsp;looking&nbsp;for&nbsp;ACL&nbsp;name&nbsp;&#39;all&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;ACL::FindByName&nbsp;&#39;all&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;aclParseAclList:&nbsp;looking&nbsp;for&nbsp;ACL&nbsp;name&nbsp;&#39;all&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;ACL::FindByName&nbsp;&#39;all&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;aclParseAclList:&nbsp;looking&nbsp;for&nbsp;ACL&nbsp;name&nbsp;&#39;all&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;ACL::FindByName&nbsp;&#39;all&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;aclParseAclList:&nbsp;looking&nbsp;for&nbsp;ACL&nbsp;name&nbsp;&#39;all&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;ACL::FindByName&nbsp;&#39;all&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;Log&nbsp;definition&nbsp;name&nbsp;&#39;squid&#39;&nbsp;file&nbsp;&#39;/var/log/squid/access.log&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;wccp2_add_service_list:&nbsp;added&nbsp;service&nbsp;id&nbsp;0&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;aclParseAclList:&nbsp;looking&nbsp;for&nbsp;ACL&nbsp;name&nbsp;&#39;all&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;ACL::FindByName&nbsp;&#39;all&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;aclParseAclList:&nbsp;looking&nbsp;for&nbsp;ACL&nbsp;name&nbsp;&#39;all&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;ACL::FindByName&nbsp;&#39;all&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;tools.cc(671)&nbsp;uniqueHostname: &nbsp;Config:&nbsp;&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;tools.cc(671)&nbsp;uniqueHostname: &nbsp;Config:&nbsp;&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.134|&nbsp;Initializing&nbsp;https&nbsp;proxy&nbsp;context&lt;br&gt;2015/03/20&nbsp;15:45:22.139|&nbsp;Using&nbsp;SSLv2/SSLv3.&lt;br&gt;2015/03/20&nbsp;15:45:22.141|&nbsp;Setting&nbsp;RSA&nbsp;key&nbsp;generation&nbsp;callback.&lt;br&gt;2015/03/20&nbsp;15:45:22.141|&nbsp;Setting&nbsp;certificate&nbsp;verification&nbsp;callback.&lt;br&gt;2015/03/20&nbsp;15:45:22.141|&nbsp;Setting&nbsp;CA&nbsp;certificate&nbsp;locations.&lt;br&gt;2015/03/20&nbsp;15:45:22.153|&nbsp;leave_suid:&nbsp;PID&nbsp;16685&nbsp;called&lt;br&gt;2015/03/20&nbsp;15:45:22.153|&nbsp;leave_suid:&nbsp;PID&nbsp;16685&nbsp;giving&nbsp;up&nbsp;root,&nbsp;becoming&nbsp;&#39;squid&#39;&lt;br&gt;2015/03/20&nbsp;15:45:22.153|&nbsp;command-line&nbsp;-X&nbsp;overrides:&nbsp;rotate=3&nbsp;ALL,2&lt;br&gt;[root@host2&nbsp;squid]#&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;and&nbsp;this&nbsp;is&nbsp;the&nbsp;contents&nbsp;on&nbsp;the&nbsp;squid.conf-2&nbsp;file&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;b&gt;more&nbsp;squid.conf-2&lt;/b&gt;&lt;br&gt;#&lt;br&gt;visible_hostname&nbsp;mailsrv1&lt;br&gt;#&nbsp;Recommended&nbsp;minimum&nbsp;configuration:&lt;br&gt;debug_options&nbsp;rotate=3&nbsp;ALL,2&lt;br&gt;&lt;br&gt;cache_effective_user&nbsp;squid&lt;br&gt;cache_effective_group&nbsp;squid&lt;br&gt;url_rewrite_program&nbsp;/usr/local/squirm/bin/squirm&lt;br&gt;redirect_children&nbsp;5&lt;br&gt;&lt;br&gt;#&nbsp;add&nbsp;dns&nbsp;server&nbsp;for&nbsp;squid&nbsp;to&nbsp;use&nbsp;specifically&lt;br&gt;dns_nameservers&nbsp;208.67.222.222&nbsp;208.67.220.220&nbsp;192.168.32.1&nbsp;192.168.32.2&nbsp;192.168.40.254&nbsp;192.168.40.5&lt;br&gt;&lt;br&gt;#&nbsp;Example&nbsp;rule&nbsp;allowing&nbsp;access&nbsp;from&nbsp;your&nbsp;local&nbsp;networks.&lt;br&gt;#&nbsp;Adapt&nbsp;to&nbsp;list&nbsp;your&nbsp;(internal)&nbsp;IP&nbsp;networks&nbsp;from&nbsp;where&nbsp;browsing&lt;br&gt;#&nbsp;should&nbsp;be&nbsp;allowed&lt;br&gt;&lt;br&gt;#&lt;br&gt;#&nbsp;Recommended&nbsp;minimum&nbsp;Access&nbsp;Permission&nbsp;configuration:&lt;br&gt;#&lt;br&gt;#&nbsp;Only&nbsp;allow&nbsp;cachemgr&nbsp;access&nbsp;from&nbsp;localhost&lt;br&gt;&lt;br&gt;#&nbsp;Deny&nbsp;requests&nbsp;to&nbsp;certain&nbsp;unsafe&nbsp;ports&lt;br&gt;&lt;br&gt;#&nbsp;Deny&nbsp;CONNECT&nbsp;to&nbsp;other&nbsp;than&nbsp;secure&nbsp;SSL&nbsp;ports&lt;br&gt;#http_access&nbsp;deny&nbsp;CONNECT&nbsp;!SSL_ports&lt;br&gt;&lt;br&gt;#&nbsp;We&nbsp;strongly&nbsp;recommend&nbsp;the&nbsp;following&nbsp;be&nbsp;uncommented&nbsp;to&nbsp;protect&nbsp;innocent&lt;br&gt;#&nbsp;web&nbsp;applications&nbsp;running&nbsp;on&nbsp;the&nbsp;proxy&nbsp;server&nbsp;who&nbsp;think&nbsp;the&nbsp;only&lt;br&gt;#&nbsp;one&nbsp;who&nbsp;can&nbsp;access&nbsp;services&nbsp;on&nbsp;&quot;localhost&quot;&nbsp;is&nbsp;a&nbsp;local&nbsp;user&lt;br&gt;#http_access&nbsp;deny&nbsp;to_localhost&lt;br&gt;&lt;br&gt;#&lt;br&gt;#&nbsp;INSERT&nbsp;YOUR&nbsp;OWN&nbsp;RULE(S)&nbsp;HERE&nbsp;TO&nbsp;ALLOW&nbsp;ACCESS&nbsp;FROM&nbsp;YOUR&nbsp;CLIENTS&lt;br&gt;#&lt;br&gt;&lt;br&gt;#&nbsp;Example&nbsp;rule&nbsp;allowing&nbsp;access&nbsp;from&nbsp;your&nbsp;local&nbsp;networks.&lt;br&gt;#&nbsp;Adapt&nbsp;localnet&nbsp;in&nbsp;the&nbsp;ACL&nbsp;section&nbsp;to&nbsp;list&nbsp;your&nbsp;(internal)&nbsp;IP&nbsp;networks&lt;br&gt;#&nbsp;from&nbsp;where&nbsp;browsing&nbsp;should&nbsp;be&nbsp;allowed&lt;br&gt;&lt;br&gt;#&nbsp;And&nbsp;finally&nbsp;deny&nbsp;all&nbsp;other&nbsp;access&nbsp;to&nbsp;this&nbsp;proxy&lt;br&gt;&lt;br&gt;#&nbsp;Squid&nbsp;normally&nbsp;listens&nbsp;to&nbsp;port&nbsp;3128&lt;br&gt;http_port&nbsp;3329&lt;br&gt;&lt;br&gt;#&nbsp;We&nbsp;recommend&nbsp;you&nbsp;to&nbsp;use&nbsp;at&nbsp;least&nbsp;the&nbsp;following&nbsp;line.&lt;br&gt;hierarchy_stoplist&nbsp;cgi-bin&nbsp;?&lt;br&gt;&lt;br&gt;&lt;br&gt;#&nbsp;Uncomment&nbsp;and&nbsp;adjust&nbsp;the&nbsp;following&nbsp;to&nbsp;add&nbsp;a&nbsp;disk&nbsp;cache&nbsp;directory.&lt;br&gt;&lt;br&gt;#&nbsp;Leave&nbsp;coredumps&nbsp;in&nbsp;the&nbsp;first&nbsp;cache&nbsp;dir&lt;br&gt;coredump_dir&nbsp;/var/spool/squid&lt;br&gt;&lt;br&gt;#&nbsp;Add&nbsp;any&nbsp;of&nbsp;your&nbsp;own&nbsp;refresh_pattern&nbsp;entries&nbsp;above&nbsp;these.&lt;br&gt;refresh_pattern&nbsp;^ftp:          &nbsp;1440   &nbsp;20%    &nbsp;10080&lt;br&gt;refresh_pattern&nbsp;^gopher:       &nbsp;1440   &nbsp;0%     &nbsp;1440&lt;br&gt;refresh_pattern&nbsp;-i&nbsp;(/cgi-bin/|\?)&nbsp;0    &nbsp;0%     &nbsp;0&lt;br&gt;refresh_pattern&nbsp;.              &nbsp;0      &nbsp;20%    &nbsp;4320&lt;br&gt;&lt;br&gt;delay_initial_bucket_level&nbsp;0&lt;br&gt;&lt;br&gt;&lt;/div&gt;Can&nbsp;anyone&nbsp;tell&nbsp;me&nbsp;what&nbsp;I&nbsp;am&nbsp;doing&nbsp;wrong&nbsp;?&nbsp;all&nbsp;I&nbsp;am&nbsp;after&nbsp;is&nbsp;a&nbsp;non-caching&nbsp;squid&nbsp;proxy&nbsp;server&nbsp;which&nbsp;will&nbsp;do&nbsp;some&nbsp;url&nbsp;redirection.&lt;br&gt;&lt;br&gt;&lt;/div&gt;Thanks&lt;br&gt;&lt;br&gt;&lt;/div&gt;Ian&lt;br&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
