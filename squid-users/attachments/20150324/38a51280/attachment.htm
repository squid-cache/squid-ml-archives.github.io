<tt>
&lt;p&nbsp;dir=&quot;ltr&quot;&gt;Was&nbsp;not&nbsp;sure&nbsp;if&nbsp;bugzilla&nbsp;was&nbsp;used&nbsp;for&nbsp;mailing&nbsp;list&nbsp;issues. &nbsp;If&nbsp;you&nbsp;would&nbsp;like&nbsp;me&nbsp;to&nbsp;open&nbsp;one,&nbsp;I&nbsp;will&nbsp;but&nbsp;it&nbsp;looks&nbsp;like&nbsp;the&nbsp;list&nbsp;is&nbsp;working&nbsp;again.&lt;/p&gt;<br>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mar&nbsp;24,&nbsp;2015&nbsp;2:25&nbsp;PM,&nbsp;&quot;Brendan&nbsp;Kearney&quot;&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:bpk678@gmail.com&quot;&gt;bpk678@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&nbsp;type=&quot;attribution&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;On&nbsp;Tue,&nbsp;2015-03-24&nbsp;at&nbsp;10:18&nbsp;-0400,&nbsp;Brendan&nbsp;Kearney&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;while&nbsp;load&nbsp;balancing&nbsp;is&nbsp;not&nbsp;a&nbsp;requirement&nbsp;in&nbsp;a&nbsp;proxy&nbsp;environment,&nbsp;it&lt;br&gt;<br>
&gt;&nbsp;does&nbsp;afford&nbsp;a&nbsp;great&nbsp;deal&nbsp;of&nbsp;functionality,&nbsp;scaling&nbsp;and&nbsp;fault&nbsp;tolerance&lt;br&gt;<br>
&gt;&nbsp;in&nbsp;one. &nbsp;several&nbsp;if&nbsp;not&nbsp;many&nbsp;on&nbsp;this&nbsp;list&nbsp;probably&nbsp;employ&nbsp;them&nbsp;for&nbsp;their&lt;br&gt;<br>
&gt;&nbsp;proxies&nbsp;and&nbsp;likely&nbsp;other&nbsp;technologies,&nbsp;but&nbsp;they&nbsp;are&nbsp;not&nbsp;all&nbsp;created&lt;br&gt;<br>
&gt;&nbsp;equal.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;i&nbsp;recently&nbsp;looked&nbsp;to&nbsp;see&nbsp;if&nbsp;a&nbsp;specific&nbsp;feature&nbsp;was&nbsp;in&nbsp;HAProxy. &nbsp;i&nbsp;was&lt;br&gt;<br>
&gt;&nbsp;looking&nbsp;to&nbsp;see&nbsp;if&nbsp;HAProxy&nbsp;could&nbsp;reply&nbsp;to&nbsp;a&nbsp;new&nbsp;connection&nbsp;with&nbsp;a&nbsp;RST&lt;br&gt;<br>
&gt;&nbsp;packet&nbsp;if&nbsp;no&nbsp;pool&nbsp;member&nbsp;was&nbsp;available.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;the&nbsp;idea&nbsp;behind&nbsp;this&nbsp;is,&nbsp;if&nbsp;all&nbsp;of&nbsp;the&nbsp;proxies&nbsp;are&nbsp;not&nbsp;passing&nbsp;the&lt;br&gt;<br>
&gt;&nbsp;service&nbsp;check&nbsp;and&nbsp;are&nbsp;marked&nbsp;down&nbsp;by&nbsp;the&nbsp;load&nbsp;balancer,&nbsp;the&nbsp;reply&nbsp;of&nbsp;a&lt;br&gt;<br>
&gt;&nbsp;RST&nbsp;in&nbsp;the&nbsp;TCP&nbsp;handshake&nbsp;(i.e.&nbsp;SYN&nbsp;-&gt;&nbsp;RST,&nbsp;not&nbsp;SYN&nbsp;-&gt;&nbsp;SYN/ACK&nbsp;-&gt;&nbsp;ACK)&lt;br&gt;<br>
&gt;&nbsp;tells&nbsp;the&nbsp;browser&nbsp;to&nbsp;failover&nbsp;to&nbsp;the&nbsp;next&nbsp;proxy&nbsp;assigned&nbsp;by&nbsp;the&nbsp;PAC&lt;br&gt;<br>
&gt;&nbsp;file.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;where&nbsp;i&nbsp;work,&nbsp;we&nbsp;have&nbsp;this&nbsp;configuration&nbsp;working. &nbsp;the&nbsp;load&nbsp;balancers&lt;br&gt;<br>
&gt;&nbsp;are&nbsp;configured&nbsp;with&nbsp;the&nbsp;option&nbsp;to&nbsp;send&nbsp;a&nbsp;reset&nbsp;when&nbsp;no&nbsp;proxy&nbsp;is&lt;br&gt;<br>
&gt;&nbsp;available&nbsp;in&nbsp;the&nbsp;pool. &nbsp;the&nbsp;PAC&nbsp;file&nbsp;assigns&nbsp;all&nbsp;4&nbsp;of&nbsp;the&nbsp;proxy&nbsp;VIPs&nbsp;in&lt;br&gt;<br>
&gt;&nbsp;a&nbsp;specific&nbsp;order&nbsp;based&nbsp;on&nbsp;which&nbsp;proxy&nbsp;VIP&nbsp;is&nbsp;assigned&nbsp;as&nbsp;the&nbsp;primary.&lt;br&gt;<br>
&gt;&nbsp;In&nbsp;every&nbsp;case,&nbsp;if&nbsp;the&nbsp;primary&nbsp;VIP&nbsp;does&nbsp;not&nbsp;have&nbsp;an&nbsp;available&nbsp;pool&lt;br&gt;<br>
&gt;&nbsp;member,&nbsp;the&nbsp;browser&nbsp;fails&nbsp;over&nbsp;to&nbsp;the&nbsp;next&nbsp;in&nbsp;the&nbsp;list. &nbsp;failover&nbsp;would&lt;br&gt;<br>
&gt;&nbsp;happen&nbsp;again,&nbsp;if&nbsp;the&nbsp;secondary&nbsp;VIP&nbsp;replies&nbsp;with&nbsp;a&nbsp;RST&nbsp;during&nbsp;the&lt;br&gt;<br>
&gt;&nbsp;connection&nbsp;establishing. &nbsp;the&nbsp;process&nbsp;repeats&nbsp;until&nbsp;a&nbsp;TCP&nbsp;connection&lt;br&gt;<br>
&gt;&nbsp;establishes&nbsp;or&nbsp;all&nbsp;proxies&nbsp;assigned&nbsp;have&nbsp;been&nbsp;exhausted. &nbsp;the&nbsp;browser&lt;br&gt;<br>
&gt;&nbsp;will&nbsp;use&nbsp;the&nbsp;proxy&nbsp;VIP&nbsp;that&nbsp;it&nbsp;successfully&nbsp;connects&nbsp;to,&nbsp;for&nbsp;the&lt;br&gt;<br>
&gt;&nbsp;duration&nbsp;of&nbsp;the&nbsp;session. &nbsp;once&nbsp;the&nbsp;browser&nbsp;is&nbsp;closed&nbsp;and&nbsp;reopened,&nbsp;the&lt;br&gt;<br>
&gt;&nbsp;evaluation&nbsp;of&nbsp;the&nbsp;PAC&nbsp;file&nbsp;occurs&nbsp;again,&nbsp;and&nbsp;the&nbsp;process&nbsp;starts&nbsp;anew.&lt;br&gt;<br>
&gt;&nbsp;plug-ins&nbsp;such&nbsp;as&nbsp;Proxy&nbsp;Selector&nbsp;are&nbsp;the&nbsp;exception&nbsp;to&nbsp;this,&nbsp;and&nbsp;can&nbsp;be&lt;br&gt;<br>
&gt;&nbsp;used&nbsp;to&nbsp;reevaluate&nbsp;a&nbsp;PAC&nbsp;file&nbsp;by&nbsp;selecting&nbsp;it&nbsp;for&nbsp;use.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;we&nbsp;have&nbsp;used&nbsp;this&nbsp;configuration&nbsp;several&nbsp;times,&nbsp;when&nbsp;we&nbsp;found&nbsp;an&nbsp;ISP&nbsp;link&lt;br&gt;<br>
&gt;&nbsp;was&nbsp;flapping&nbsp;or&nbsp;some&nbsp;other&nbsp;issue&nbsp;more&nbsp;global&nbsp;in&nbsp;nature&nbsp;than&nbsp;just&nbsp;the&lt;br&gt;<br>
&gt;&nbsp;proxies&nbsp;was&nbsp;affecting&nbsp;our&nbsp;egress&nbsp;and&nbsp;internet&nbsp;access. &nbsp;i&nbsp;can&nbsp;attest&nbsp;to&lt;br&gt;<br>
&gt;&nbsp;the&nbsp;solution&nbsp;as&nbsp;working&nbsp;and&nbsp;elegantly&nbsp;handling&nbsp;site&nbsp;wide&nbsp;failures.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;being&nbsp;that&nbsp;the&nbsp;solutions&nbsp;where&nbsp;i&nbsp;work&nbsp;are&nbsp;proprietary&nbsp;commercial&lt;br&gt;<br>
&gt;&nbsp;products,&nbsp;i&nbsp;wanted&nbsp;to&nbsp;find&nbsp;an&nbsp;open&nbsp;source&nbsp;product&nbsp;that&nbsp;does&nbsp;this. &nbsp;i&lt;br&gt;<br>
&gt;&nbsp;have&nbsp;been&nbsp;a&nbsp;long&nbsp;time&nbsp;user&nbsp;of&nbsp;HAProxy,&nbsp;and&nbsp;have&nbsp;recommended&nbsp;it&nbsp;for&lt;br&gt;<br>
&gt;&nbsp;others&nbsp;here,&nbsp;but&nbsp;sadly&nbsp;they&nbsp;cannot&nbsp;perform&nbsp;this&nbsp;function. &nbsp;per&nbsp;their&lt;br&gt;<br>
&gt;&nbsp;mailing&nbsp;list,&nbsp;they&nbsp;use&nbsp;the&nbsp;network&nbsp;stack&nbsp;of&nbsp;the&nbsp;OS&nbsp;for&nbsp;connection&lt;br&gt;<br>
&gt;&nbsp;establishment&nbsp;and&nbsp;cannot&nbsp;cause&nbsp;a&nbsp;RST&nbsp;to&nbsp;be&nbsp;sent&nbsp;to&nbsp;the&nbsp;client&nbsp;during&nbsp;a&lt;br&gt;<br>
&gt;&nbsp;TCP&nbsp;handshake&nbsp;if&nbsp;no&nbsp;pool&nbsp;member&nbsp;is&nbsp;available.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;they&nbsp;suggested&nbsp;an&nbsp;external&nbsp;helper&nbsp;that&nbsp;manipulates&nbsp;IPTables&nbsp;rules&nbsp;based&lt;br&gt;<br>
&gt;&nbsp;on&nbsp;a&nbsp;pool&nbsp;member&nbsp;being&nbsp;available. &nbsp;they&nbsp;do&nbsp;not&nbsp;feel&nbsp;that&nbsp;a&nbsp;feature&nbsp;like&lt;br&gt;<br>
&gt;&nbsp;this&nbsp;belongs&nbsp;in&nbsp;a&nbsp;layer&nbsp;4/7&nbsp;reverse&nbsp;proxy&nbsp;application.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;my&nbsp;search&nbsp;for&nbsp;a&nbsp;load&nbsp;balancer&nbsp;solution&nbsp;went&nbsp;through&nbsp;ipvsadm,&nbsp;balance&nbsp;and&lt;br&gt;<br>
&gt;&nbsp;haproxy&nbsp;before&nbsp;i&nbsp;selected&nbsp;haproxy. &nbsp;haproxy&nbsp;was&nbsp;more&nbsp;feature&nbsp;rich&nbsp;than&lt;br&gt;<br>
&gt;&nbsp;balance,&nbsp;and&nbsp;easier&nbsp;to&nbsp;implement&nbsp;than&nbsp;ipvsadm. &nbsp;do&nbsp;any&nbsp;other&nbsp;list&lt;br&gt;<br>
&gt;&nbsp;members&nbsp;have&nbsp;a&nbsp;need&nbsp;for&nbsp;such&nbsp;a&nbsp;feature&nbsp;from&nbsp;their&nbsp;load&nbsp;balancers? &nbsp;do&lt;br&gt;<br>
&gt;&nbsp;any&nbsp;other&nbsp;list&nbsp;members&nbsp;have&nbsp;site&nbsp;failover&nbsp;solutions&nbsp;that&nbsp;have&nbsp;been&lt;br&gt;<br>
&gt;&nbsp;tested&nbsp;or&nbsp;used&nbsp;and&nbsp;would&nbsp;consider&nbsp;sharing&nbsp;their&nbsp;design&nbsp;and/or&nbsp;pain&lt;br&gt;<br>
&gt;&nbsp;points? &nbsp;i&nbsp;am&nbsp;not&nbsp;looking&nbsp;for&nbsp;secret&nbsp;sauce&nbsp;or&nbsp;confidential&nbsp;info,&nbsp;but&lt;br&gt;<br>
&gt;&nbsp;more&nbsp;high&nbsp;level&nbsp;architecture&nbsp;decisions&nbsp;and&nbsp;such.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
trying&nbsp;to&nbsp;send&nbsp;this&nbsp;again,&nbsp;as&nbsp;it&nbsp;was&nbsp;rejected&nbsp;previously.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
