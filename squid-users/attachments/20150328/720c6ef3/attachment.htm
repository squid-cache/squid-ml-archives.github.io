<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Hello,&lt;br&gt;&lt;br&gt;&lt;/div&gt;I&nbsp;am&nbsp;faced&nbsp;with&nbsp;a&nbsp;weird&nbsp;situation&nbsp;with&nbsp;an&nbsp;external&nbsp;acl&nbsp;that&nbsp;I&nbsp;have&nbsp;built.&nbsp;&lt;br&gt;&lt;br&gt;&lt;/div&gt;The&nbsp;external&nbsp;acl&nbsp;gets&nbsp;the&nbsp;acl&nbsp;name&nbsp;and&nbsp;the&nbsp;IP&nbsp;information,&nbsp;does&nbsp;a&nbsp;lookup&nbsp;in&nbsp;a&nbsp;MySQL&nbsp;table&nbsp;if&nbsp;that&nbsp;IP&nbsp;belongs&nbsp;to&nbsp;a&nbsp;group&nbsp;(&nbsp;read:&nbsp;acl&nbsp;name&nbsp;)&nbsp;and&nbsp;returns&nbsp;an&nbsp;output.&lt;br&gt;&lt;br&gt;&lt;/div&gt;The&nbsp;situation&nbsp;is&nbsp;as&nbsp;follows:&lt;br&gt;&lt;/div&gt;Â On&nbsp;the&nbsp;first&nbsp;client&nbsp;request&nbsp;coming&nbsp;to&nbsp;the&nbsp;external&nbsp;helper,&nbsp;it&nbsp;performs&nbsp;as&nbsp;expected,&nbsp;and&nbsp;the&nbsp;correct&nbsp;action&nbsp;is&nbsp;taken.&nbsp;Whereas&nbsp;from&nbsp;the&nbsp;second&nbsp;request&nbsp;onwards,&nbsp;Squid&nbsp;just&nbsp;waits&nbsp;on&nbsp;the&nbsp;external&nbsp;acl,&nbsp;even&nbsp;though&nbsp;a&nbsp;response&nbsp;was&nbsp;sent&nbsp;by&nbsp;the&nbsp;acl,&nbsp;and&nbsp;the&nbsp;same&nbsp;was&nbsp;received&nbsp;by&nbsp;Squid.&lt;br&gt;&lt;br&gt;&lt;/div&gt;My&nbsp;acl&#39;s&nbsp;are&nbsp;as&nbsp;follows:&lt;br&gt;external_acl_type&nbsp;grpname&nbsp;ttl=10&nbsp;children-startup=1&nbsp;concurrency=1&nbsp;%SRC&nbsp;%ACL&nbsp;/usr/local/squid/libexec/grpname_helper&lt;br&gt;acl&nbsp;two&nbsp;external&nbsp;grpname&lt;br&gt;acl&nbsp;twoext&nbsp;urlpath_regex&nbsp;&quot;/usr/local/squid/etc/custom/blacklisted-two-extensions&quot;&lt;br&gt;deny_info&nbsp;&lt;a&nbsp;href=&quot;http://192.168.3.11/error.html&quot;&gt;http://192.168.3.11/error.html&lt;/a&gt;&nbsp;two&lt;br&gt;http_access&nbsp;deny&nbsp;twoext&nbsp;two&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;The&nbsp;debug&nbsp;output&nbsp;for&nbsp;the&nbsp;first&nbsp;request&nbsp;coming&nbsp;in:&lt;br&gt;2015/03/28&nbsp;20:11:30.831&nbsp;kid1|&nbsp;external_acl.cc(868)&nbsp;aclMatchExternal:&nbsp;grpname(&quot;192.168.3.243&nbsp;two&quot;)&nbsp;=&nbsp;lookup&nbsp;needed&lt;br&gt;2015/03/28&nbsp;20:11:30.831&nbsp;kid1|&nbsp;external_acl.cc(871)&nbsp;aclMatchExternal:&nbsp;&quot;192.168.3.243&nbsp;two&quot;:&nbsp;queueing&nbsp;a&nbsp;call.&lt;br&gt;2015/03/28&nbsp;20:11:30.831&nbsp;kid1|&nbsp;external_acl.cc(1453)&nbsp;Start:&nbsp;fg&nbsp;lookup&nbsp;in&nbsp;&#39;grpname&#39;&nbsp;for&nbsp;&#39;192.168.3.243&nbsp;two&#39;&lt;br&gt;2015/03/28&nbsp;20:11:30.832&nbsp;kid1|&nbsp;external_acl.cc(1508)&nbsp;Start:&nbsp;externalAclLookup:&nbsp;looking&nbsp;up&nbsp;for&nbsp;&#39;192.168.3.243&nbsp;two&#39;&nbsp;in&nbsp;&#39;grpname&#39;.&lt;br&gt;2015/03/28&nbsp;20:11:30.832&nbsp;kid1|&nbsp;helper.cc(1208)&nbsp;GetFirstAvailable:&nbsp;GetFirstAvailable:&nbsp;Running&nbsp;servers&nbsp;1&lt;br&gt;2015/03/28&nbsp;20:11:30.832&nbsp;kid1|&nbsp;AsyncCall.cc(18)&nbsp;AsyncCall:&nbsp;The&nbsp;AsyncCall&nbsp;helperDispatchWriteDone&nbsp;constructed,&nbsp;this=0x9db91e8&nbsp;[call2903]&lt;br&gt;2015/03/28&nbsp;20:11:30.832&nbsp;kid1|&nbsp;Write.cc(29)&nbsp;Write:&nbsp;local=[::]&nbsp;remote=[::]&nbsp;FD&nbsp;22&nbsp;flags=1:&nbsp;sz&nbsp;20:&nbsp;asynCall&nbsp;0x9db91e8*1&lt;br&gt;2015/03/28&nbsp;20:11:30.832&nbsp;kid1|&nbsp;ModEpoll.cc(139)&nbsp;SetSelect:&nbsp;FD&nbsp;22,&nbsp;type=2,&nbsp;handler=1,&nbsp;client_data=0x970522c,&nbsp;timeout=0&lt;br&gt;2015/03/28&nbsp;20:11:30.832&nbsp;kid1|&nbsp;helper.cc(1350)&nbsp;helperDispatch:&nbsp;helperDispatch:&nbsp;Request&nbsp;sent&nbsp;to&nbsp;grpname&nbsp;#Hlpr0,&nbsp;18&nbsp;bytes&lt;br&gt;2015/03/28&nbsp;20:11:30.833&nbsp;kid1|&nbsp;external_acl.cc(1518)&nbsp;Start:&nbsp;externalAclLookup:&nbsp;will&nbsp;wait&nbsp;for&nbsp;the&nbsp;result&nbsp;of&nbsp;&#39;192.168.3.243&nbsp;two&#39;&nbsp;in&nbsp;&#39;grpname&#39;&nbsp;(ch=0x985f400).&lt;br&gt;2015/03/28&nbsp;20:11:30.833&nbsp;kid1|&nbsp;external_acl.cc(874)&nbsp;aclMatchExternal:&nbsp;&quot;192.168.3.243&nbsp;two&quot;:&nbsp;return&nbsp;-1.&lt;br&gt;2015/03/28&nbsp;20:11:30.833&nbsp;kid1|&nbsp;Acl.cc(177)&nbsp;matches:&nbsp;checked:&nbsp;two&nbsp;=&nbsp;-1&nbsp;async&lt;br&gt;2015/03/28&nbsp;20:11:30.833&nbsp;kid1|&nbsp;Acl.cc(177)&nbsp;matches:&nbsp;checked:&nbsp;http_access#1&nbsp;=&nbsp;-1&nbsp;async&lt;br&gt;2015/03/28&nbsp;20:11:30.833&nbsp;kid1|&nbsp;Acl.cc(177)&nbsp;matches:&nbsp;checked:&nbsp;http_access&nbsp;=&nbsp;-1&nbsp;async&lt;br&gt;2015/03/28&nbsp;20:11:30.834&nbsp;kid1|&nbsp;Write.cc(60)&nbsp;HandleWrite:&nbsp;local=[::]&nbsp;remote=[::]&nbsp;FD&nbsp;22&nbsp;flags=1:&nbsp;off&nbsp;0,&nbsp;sz&nbsp;20.&lt;br&gt;2015/03/28&nbsp;20:11:30.834&nbsp;kid1|&nbsp;Write.cc(100)&nbsp;HandleWrite:&nbsp;write()&nbsp;returns&nbsp;20&lt;br&gt;2015/03/28&nbsp;20:11:30.834&nbsp;kid1|&nbsp;IoCallback.cc(108)&nbsp;finish:&nbsp;called&nbsp;for&nbsp;local=[::]&nbsp;remote=[::]&nbsp;FD&nbsp;22&nbsp;flags=1&nbsp;(0,&nbsp;0)&lt;br&gt;2015/03/28&nbsp;20:11:30.834&nbsp;kid1|&nbsp;AsyncCall.cc(85)&nbsp;ScheduleCall:&nbsp;IoCallback.cc(127)&nbsp;will&nbsp;call&nbsp;helperDispatchWriteDone(local=[::]&nbsp;remote=[::]&nbsp;FD&nbsp;22&nbsp;flags=1,&nbsp;errno=11,&nbsp;data=0x9b6c4f8,&nbsp;size=20,&nbsp;buf=0x9c9e148)&nbsp;[call2903]&lt;br&gt;2015/03/28&nbsp;20:11:30.834&nbsp;kid1|&nbsp;AsyncCallQueue.cc(51)&nbsp;fireNext:&nbsp;entering&nbsp;helperDispatchWriteDone(local=[::]&nbsp;remote=[::]&nbsp;FD&nbsp;22&nbsp;flags=1,&nbsp;errno=11,&nbsp;data=0x9b6c4f8,&nbsp;size=20,&nbsp;buf=0x9c9e148)&lt;br&gt;2015/03/28&nbsp;20:11:30.835&nbsp;kid1|&nbsp;AsyncCall.cc(30)&nbsp;make:&nbsp;make&nbsp;call&nbsp;helperDispatchWriteDone&nbsp;[call2903]&lt;br&gt;2015/03/28&nbsp;20:11:30.835&nbsp;kid1|&nbsp;AsyncCallQueue.cc(53)&nbsp;fireNext:&nbsp;leaving&nbsp;helperDispatchWriteDone(local=[::]&nbsp;remote=[::]&nbsp;FD&nbsp;22&nbsp;flags=1,&nbsp;errno=11,&nbsp;data=0x9b6c4f8,&nbsp;size=20,&nbsp;buf=0x9c9e148)&lt;br&gt;2015/03/28&nbsp;20:11:30.835&nbsp;kid1|&nbsp;ModEpoll.cc(139)&nbsp;SetSelect:&nbsp;FD&nbsp;22,&nbsp;type=2,&nbsp;handler=0,&nbsp;client_data=0,&nbsp;timeout=0&lt;br&gt;2015/03/28&nbsp;20:11:30.902&nbsp;kid1|&nbsp;comm.cc(138)&nbsp;commHandleRead:&nbsp;comm_read_try:&nbsp;FD&nbsp;22,&nbsp;size&nbsp;4095,&nbsp;retval&nbsp;4,&nbsp;errno&nbsp;0&lt;br&gt;2015/03/28&nbsp;20:11:30.902&nbsp;kid1|&nbsp;IoCallback.cc(108)&nbsp;finish:&nbsp;called&nbsp;for&nbsp;local=[::]&nbsp;remote=[::]&nbsp;FD&nbsp;22&nbsp;flags=1&nbsp;(0,&nbsp;0)&lt;br&gt;2015/03/28&nbsp;20:11:30.902&nbsp;kid1|&nbsp;AsyncCall.cc(85)&nbsp;ScheduleCall:&nbsp;IoCallback.cc(127)&nbsp;will&nbsp;call&nbsp;helperHandleRead(local=[::]&nbsp;remote=[::]&nbsp;FD&nbsp;22&nbsp;flags=1,&nbsp;data=0x9b6c4f8,&nbsp;size=4,&nbsp;buf=0x9aa1508)&nbsp;[call980]&lt;br&gt;2015/03/28&nbsp;20:11:30.902&nbsp;kid1|&nbsp;AsyncCallQueue.cc(51)&nbsp;fireNext:&nbsp;entering&nbsp;helperHandleRead(local=[::]&nbsp;remote=[::]&nbsp;FD&nbsp;22&nbsp;flags=1,&nbsp;data=0x9b6c4f8,&nbsp;size=4,&nbsp;buf=0x9aa1508)&lt;br&gt;2015/03/28&nbsp;20:11:30.902&nbsp;kid1|&nbsp;AsyncCall.cc(30)&nbsp;make:&nbsp;make&nbsp;call&nbsp;helperHandleRead&nbsp;[call980]&lt;br&gt;2015/03/28&nbsp;20:11:30.903&nbsp;kid1|&nbsp;helper.cc(906)&nbsp;helperHandleRead:&nbsp;helperHandleRead:&nbsp;4&nbsp;bytes&nbsp;from&nbsp;grpname&nbsp;#Hlpr0&lt;br&gt;2015/03/28&nbsp;20:11:30.903&nbsp;kid1|&nbsp;helper.cc(932)&nbsp;helperHandleRead:&nbsp;helperHandleRead:&nbsp;end&nbsp;of&nbsp;reply&nbsp;found&lt;br&gt;2015/03/28&nbsp;20:11:30.903&nbsp;kid1|&nbsp;HelperReply.cc(23)&nbsp;parse:&nbsp;Parsing&nbsp;helper&nbsp;buffer&lt;br&gt;2015/03/28&nbsp;20:11:30.903&nbsp;kid1|&nbsp;HelperReply.cc(42)&nbsp;parse:&nbsp;Buff&nbsp;length&nbsp;is&nbsp;larger&nbsp;than&nbsp;2&lt;br&gt;2015/03/28&nbsp;20:11:30.903&nbsp;kid1|&nbsp;HelperReply.cc(46)&nbsp;parse:&nbsp;helper&nbsp;Result&nbsp;=&nbsp;OK&lt;br&gt;2015/03/28&nbsp;20:11:30.903&nbsp;kid1|&nbsp;external_acl.cc(1375)&nbsp;externalAclHandleReply:&nbsp;reply={result=OK}&lt;br&gt;2015/03/28&nbsp;20:11:30.904&nbsp;kid1|&nbsp;external_acl.cc(1290)&nbsp;external_acl_cache_add:&nbsp;external_acl_cache_add:&nbsp;Adding&nbsp;&#39;192.168.3.243&nbsp;two&#39;&nbsp;=&nbsp;ALLOWED&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;Debug&nbsp;Output&nbsp;in&nbsp;the&nbsp;case&nbsp;of&nbsp;the&nbsp;enxt&nbsp;request:&lt;br&gt;2015/03/28&nbsp;20:11:54.422&nbsp;kid1|&nbsp;Acl.cc(157)&nbsp;matches:&nbsp;checking&nbsp;two&lt;br&gt;2015/03/28&nbsp;20:11:54.423&nbsp;kid1|&nbsp;external_acl.cc(868)&nbsp;aclMatchExternal:&nbsp;grpname(&quot;192.168.3.243&nbsp;two&quot;)&nbsp;=&nbsp;lookup&nbsp;needed&lt;br&gt;2015/03/28&nbsp;20:11:54.423&nbsp;kid1|&nbsp;external_acl.cc(871)&nbsp;aclMatchExternal:&nbsp;&quot;192.168.3.243&nbsp;two&quot;:&nbsp;queueing&nbsp;a&nbsp;call.&lt;br&gt;2015/03/28&nbsp;20:11:54.423&nbsp;kid1|&nbsp;external_acl.cc(1453)&nbsp;Start:&nbsp;fg&nbsp;lookup&nbsp;in&nbsp;&#39;grpname&#39;&nbsp;for&nbsp;&#39;192.168.3.243&nbsp;two&#39;&lt;br&gt;2015/03/28&nbsp;20:11:54.423&nbsp;kid1|&nbsp;external_acl.cc(1508)&nbsp;Start:&nbsp;externalAclLookup:&nbsp;looking&nbsp;up&nbsp;for&nbsp;&#39;192.168.3.243&nbsp;two&#39;&nbsp;in&nbsp;&#39;grpname&#39;.&lt;br&gt;2015/03/28&nbsp;20:11:54.423&nbsp;kid1|&nbsp;helper.cc(1208)&nbsp;GetFirstAvailable:&nbsp;GetFirstAvailable:&nbsp;Running&nbsp;servers&nbsp;1&lt;br&gt;2015/03/28&nbsp;20:11:54.423&nbsp;kid1|&nbsp;AsyncCall.cc(18)&nbsp;AsyncCall:&nbsp;The&nbsp;AsyncCall&nbsp;helperDispatchWriteDone&nbsp;constructed,&nbsp;this=0xa0505f0&nbsp;[call4372]&lt;br&gt;2015/03/28&nbsp;20:11:54.424&nbsp;kid1|&nbsp;Write.cc(29)&nbsp;Write:&nbsp;local=[::]&nbsp;remote=[::]&nbsp;FD&nbsp;22&nbsp;flags=1:&nbsp;sz&nbsp;20:&nbsp;asynCall&nbsp;0xa0505f0*1&lt;br&gt;2015/03/28&nbsp;20:11:54.424&nbsp;kid1|&nbsp;ModEpoll.cc(139)&nbsp;SetSelect:&nbsp;FD&nbsp;22,&nbsp;type=2,&nbsp;handler=1,&nbsp;client_data=0x970522c,&nbsp;timeout=0&lt;br&gt;2015/03/28&nbsp;20:11:54.424&nbsp;kid1|&nbsp;helper.cc(1350)&nbsp;helperDispatch:&nbsp;helperDispatch:&nbsp;Request&nbsp;sent&nbsp;to&nbsp;grpname&nbsp;#Hlpr0,&nbsp;18&nbsp;bytes&lt;br&gt;2015/03/28&nbsp;20:11:54.424&nbsp;kid1|&nbsp;external_acl.cc(1518)&nbsp;Start:&nbsp;externalAclLookup:&nbsp;will&nbsp;wait&nbsp;for&nbsp;the&nbsp;result&nbsp;of&nbsp;&#39;192.168.3.243&nbsp;two&#39;&nbsp;in&nbsp;&#39;grpname&#39;&nbsp;(ch=0x985f400).&lt;br&gt;2015/03/28&nbsp;20:11:54.424&nbsp;kid1|&nbsp;external_acl.cc(874)&nbsp;aclMatchExternal:&nbsp;&quot;192.168.3.243&nbsp;two&quot;:&nbsp;return&nbsp;-1.&lt;br&gt;2015/03/28&nbsp;20:11:54.425&nbsp;kid1|&nbsp;Acl.cc(177)&nbsp;matches:&nbsp;checked:&nbsp;two&nbsp;=&nbsp;-1&nbsp;async&lt;br&gt;2015/03/28&nbsp;20:11:54.425&nbsp;kid1|&nbsp;Acl.cc(177)&nbsp;matches:&nbsp;checked:&nbsp;http_access#1&nbsp;=&nbsp;-1&nbsp;async&lt;br&gt;2015/03/28&nbsp;20:11:54.425&nbsp;kid1|&nbsp;Acl.cc(177)&nbsp;matches:&nbsp;checked:&nbsp;http_access&nbsp;=&nbsp;-1&nbsp;async&lt;br&gt;2015/03/28&nbsp;20:11:54.425&nbsp;kid1|&nbsp;Write.cc(60)&nbsp;HandleWrite:&nbsp;local=[::]&nbsp;remote=[::]&nbsp;FD&nbsp;22&nbsp;flags=1:&nbsp;off&nbsp;0,&nbsp;sz&nbsp;20.&lt;br&gt;2015/03/28&nbsp;20:11:54.425&nbsp;kid1|&nbsp;Write.cc(100)&nbsp;HandleWrite:&nbsp;write()&nbsp;returns&nbsp;20&lt;br&gt;2015/03/28&nbsp;20:11:54.426&nbsp;kid1|&nbsp;IoCallback.cc(108)&nbsp;finish:&nbsp;called&nbsp;for&nbsp;local=[::]&nbsp;remote=[::]&nbsp;FD&nbsp;22&nbsp;flags=1&nbsp;(0,&nbsp;0)&lt;br&gt;2015/03/28&nbsp;20:11:54.426&nbsp;kid1|&nbsp;AsyncCall.cc(85)&nbsp;ScheduleCall:&nbsp;IoCallback.cc(127)&nbsp;will&nbsp;call&nbsp;helperDispatchWriteDone(local=[::]&nbsp;remote=[::]&nbsp;FD&nbsp;22&nbsp;flags=1,&nbsp;errno=11,&nbsp;data=0x9b6c4f8,&nbsp;size=20,&nbsp;buf=0x9c9e148)&nbsp;[call4372]&lt;br&gt;2015/03/28&nbsp;20:11:54.426&nbsp;kid1|&nbsp;AsyncCallQueue.cc(51)&nbsp;fireNext:&nbsp;entering&nbsp;helperDispatchWriteDone(local=[::]&nbsp;remote=[::]&nbsp;FD&nbsp;22&nbsp;flags=1,&nbsp;errno=11,&nbsp;data=0x9b6c4f8,&nbsp;size=20,&nbsp;buf=0x9c9e148)&lt;br&gt;2015/03/28&nbsp;20:11:54.426&nbsp;kid1|&nbsp;AsyncCall.cc(30)&nbsp;make:&nbsp;make&nbsp;call&nbsp;helperDispatchWriteDone&nbsp;[call4372]&lt;br&gt;2015/03/28&nbsp;20:11:54.426&nbsp;kid1|&nbsp;AsyncCallQueue.cc(53)&nbsp;fireNext:&nbsp;leaving&nbsp;helperDispatchWriteDone(local=[::]&nbsp;remote=[::]&nbsp;FD&nbsp;22&nbsp;flags=1,&nbsp;errno=11,&nbsp;data=0x9b6c4f8,&nbsp;size=20,&nbsp;buf=0x9c9e148)&lt;br&gt;2015/03/28&nbsp;20:11:54.427&nbsp;kid1|&nbsp;comm.cc(138)&nbsp;commHandleRead:&nbsp;comm_read_try:&nbsp;FD&nbsp;22,&nbsp;size&nbsp;4094,&nbsp;retval&nbsp;4,&nbsp;errno&nbsp;0&lt;br&gt;2015/03/28&nbsp;20:11:54.427&nbsp;kid1|&nbsp;IoCallback.cc(108)&nbsp;finish:&nbsp;called&nbsp;for&nbsp;local=[::]&nbsp;remote=[::]&nbsp;FD&nbsp;22&nbsp;flags=1&nbsp;(0,&nbsp;0)&lt;br&gt;2015/03/28&nbsp;20:11:54.427&nbsp;kid1|&nbsp;AsyncCall.cc(85)&nbsp;ScheduleCall:&nbsp;IoCallback.cc(127)&nbsp;will&nbsp;call&nbsp;helperHandleRead(local=[::]&nbsp;remote=[::]&nbsp;FD&nbsp;22&nbsp;flags=1,&nbsp;data=0x9b6c4f8,&nbsp;size=4,&nbsp;buf=0x9aa1509)&nbsp;[call2905]&lt;br&gt;2015/03/28&nbsp;20:11:54.427&nbsp;kid1|&nbsp;ModEpoll.cc(139)&nbsp;SetSelect:&nbsp;FD&nbsp;22,&nbsp;type=2,&nbsp;handler=0,&nbsp;client_data=0,&nbsp;timeout=0&lt;br&gt;2015/03/28&nbsp;20:11:54.427&nbsp;kid1|&nbsp;AsyncCallQueue.cc(51)&nbsp;fireNext:&nbsp;entering&nbsp;helperHandleRead(local=[::]&nbsp;remote=[::]&nbsp;FD&nbsp;22&nbsp;flags=1,&nbsp;data=0x9b6c4f8,&nbsp;size=4,&nbsp;buf=0x9aa1509)&lt;br&gt;2015/03/28&nbsp;20:11:54.428&nbsp;kid1|&nbsp;AsyncCall.cc(30)&nbsp;make:&nbsp;make&nbsp;call&nbsp;helperHandleRead&nbsp;[call2905]&lt;br&gt;2015/03/28&nbsp;20:11:54.428&nbsp;kid1|&nbsp;helper.cc(906)&nbsp;helperHandleRead:&nbsp;helperHandleRead:&nbsp;4&nbsp;bytes&nbsp;from&nbsp;grpname&nbsp;#Hlpr0&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;To&nbsp;verify&nbsp;Squid&nbsp;was&nbsp;getting&nbsp;the&nbsp;responses&nbsp;from&nbsp;the&nbsp;external&nbsp;acl,&nbsp;I&nbsp;ran&nbsp;a&nbsp;strace&nbsp;on&nbsp;the&nbsp;squid&nbsp;process.&nbsp;Below&nbsp;is&nbsp;the&nbsp;trimmed&nbsp;output:&lt;br&gt;&lt;br&gt;write(19,&nbsp;&quot;0&nbsp;192.168.3.243&nbsp;two\n&quot;,&nbsp;20)Â &nbsp;=&nbsp;20&lt;br&gt;gettimeofday({1427556227,&nbsp;22424},&nbsp;NULL)&nbsp;=&nbsp;0&lt;br&gt;epoll_wait(6,&nbsp;{{EPOLLOUT,&nbsp;{u32=19,&nbsp;u64=13821314555071954963}}},&nbsp;4096,&nbsp;201)&nbsp;=&nbsp;1&lt;br&gt;gettimeofday({1427556227,&nbsp;22698},&nbsp;NULL)&nbsp;=&nbsp;0&lt;br&gt;epoll_ctl(6,&nbsp;EPOLL_CTL_MOD,&nbsp;19,&nbsp;{EPOLLIN|EPOLLERR|EPOLLHUP,&nbsp;{u32=19,&nbsp;u64=586827630829895699}})&nbsp;=&nbsp;0&lt;br&gt;gettimeofday({1427556227,&nbsp;22772},&nbsp;NULL)&nbsp;=&nbsp;0&lt;br&gt;epoll_wait(6,&nbsp;{{EPOLLIN,&nbsp;{u32=19,&nbsp;u64=586827630829895699}}},&nbsp;4096,&nbsp;201)&nbsp;=&nbsp;1&lt;br&gt;gettimeofday({1427556227,&nbsp;22854},&nbsp;NULL)&nbsp;=&nbsp;0&lt;br&gt;read(19,&nbsp;&quot;OK\n\0&quot;,&nbsp;4095)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &nbsp;=&nbsp;4&lt;br&gt;&lt;br&gt;write(19,&nbsp;&quot;0&nbsp;192.168.3.243&nbsp;two\n&quot;,&nbsp;20)Â &nbsp;=&nbsp;20&lt;br&gt;gettimeofday({1427556242,&nbsp;856906},&nbsp;NULL)&nbsp;=&nbsp;0&lt;br&gt;epoll_wait(6,&nbsp;{{EPOLLOUT,&nbsp;{u32=19,&nbsp;u64=13821314555071954963}}},&nbsp;4096,&nbsp;388)&nbsp;=&nbsp;1&lt;br&gt;gettimeofday({1427556242,&nbsp;857085},&nbsp;NULL)&nbsp;=&nbsp;0&lt;br&gt;epoll_ctl(6,&nbsp;EPOLL_CTL_MOD,&nbsp;19,&nbsp;{EPOLLIN|EPOLLERR|EPOLLHUP,&nbsp;{u32=19,&nbsp;u64=586827630829895699}})&nbsp;=&nbsp;0&lt;br&gt;gettimeofday({1427556242,&nbsp;857175},&nbsp;NULL)&nbsp;=&nbsp;0&lt;br&gt;epoll_wait(6,&nbsp;{{EPOLLIN,&nbsp;{u32=19,&nbsp;u64=586827630829895699}}},&nbsp;4096,&nbsp;388)&nbsp;=&nbsp;1&lt;br&gt;gettimeofday({1427556242,&nbsp;857250},&nbsp;NULL)&nbsp;=&nbsp;0&lt;br&gt;read(19,&nbsp;&quot;OK\n\0&quot;,&nbsp;4094)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &nbsp;=&nbsp;4&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;Any&nbsp;suggestions&nbsp;are&nbsp;welcome.&lt;br&gt;&lt;/div&gt;<br>

</tt>
