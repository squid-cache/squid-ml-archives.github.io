<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Hi&nbsp;all,&lt;br&gt;&lt;br&gt;&lt;/div&gt;How&nbsp;does&nbsp;squid&nbsp;behave&nbsp;when&nbsp;it&nbsp;is&nbsp;downloading&nbsp;a&nbsp;5+GB&nbsp;file&nbsp;with&nbsp;a&nbsp;slow&nbsp;client? &nbsp;I&nbsp;see&nbsp;my&nbsp;client&nbsp;(curl)&nbsp;exited&nbsp;with&nbsp;error&nbsp;code&nbsp;18&nbsp;(&lt;span&nbsp;class=&quot;&quot;&gt;CURLE_PARTIAL_FILE&lt;/span&gt;)&nbsp;when&nbsp;downloading&nbsp;a&nbsp;5+GB&nbsp;file&nbsp;from&nbsp;squid. &nbsp;It&nbsp;was&nbsp;a&nbsp;cache&nbsp;miss,&nbsp;so&nbsp;the&nbsp;file&nbsp;was&nbsp;actually&nbsp;being&nbsp;fetched&nbsp;from&nbsp;the&nbsp;origin&nbsp;server. &nbsp;When&nbsp;it&nbsp;is&nbsp;cache&nbsp;hit,&nbsp;I&nbsp;don&#39;t&nbsp;see&nbsp;the&nbsp;curl&nbsp;error.&lt;br&gt;&lt;br&gt;What&nbsp;I&nbsp;observed&nbsp;was&nbsp;that&nbsp;squid&nbsp;was&nbsp;downloading&nbsp;from&nbsp;the&nbsp;origin&nbsp;server&nbsp;at&nbsp;about&nbsp;750&nbsp;KB/s,&nbsp;and&nbsp;the&nbsp;client&nbsp;was&nbsp;downloading&nbsp;from&nbsp;squid&nbsp;at&nbsp;about&nbsp;10&nbsp;to&nbsp;50&nbsp;KB/s. &nbsp;The&nbsp;client&nbsp;was&nbsp;geographically&nbsp;far&nbsp;from&nbsp;squid.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;using&nbsp;the&nbsp;ufs&nbsp;disk&nbsp;cache:&lt;br&gt;&lt;br&gt;cache_replacement_policy&nbsp;lru&lt;br&gt;minimum_object_size&nbsp;1&nbsp;bytes&lt;br&gt;cache_dir&nbsp;ufs&nbsp;/data/squid/cache&nbsp;130000&nbsp;16&nbsp;256&nbsp;max-size=26843545600&lt;br&gt;&lt;br&gt;&lt;/div&gt;Here&nbsp;is&nbsp;the&nbsp;error&nbsp;I&nbsp;found&nbsp;in&nbsp;cache.log:&lt;br&gt;&lt;br&gt;2015/03/18&nbsp;16:53:07.263|&nbsp;client_side_reply.cc(1185)&nbsp;replyStatus:&nbsp;clientReplyStatus:&nbsp;transfer&nbsp;is&nbsp;DONE&lt;br&gt;2015/03/18&nbsp;16:53:07.263|&nbsp;client_side_reply.cc(1201)&nbsp;replyStatus:&nbsp;clientReplyStatus:&nbsp;client&nbsp;didn&#39;t&nbsp;get&nbsp;all&nbsp;it&nbsp;expected&lt;br&gt;2015/03/18&nbsp;16:53:07.263|&nbsp;cbdata.cc(510)&nbsp;cbdataReferenceValid:&nbsp;cbdataReferenceValid:&nbsp;0x1707a48&lt;br&gt;2015/03/18&nbsp;16:53:07.263|&nbsp;client_side.cc(1917)&nbsp;stopSending:&nbsp;sending&nbsp;error&nbsp;(local=&lt;a&nbsp;href=&quot;http://127.0.0.1:8443&quot;&gt;127.0.0.1:8443&lt;/a&gt;&nbsp;remote=&lt;a&nbsp;href=&quot;http://127.0.0.1:54359&quot;&gt;127.0.0.1:54359&lt;/a&gt;&nbsp;FD&nbsp;8&nbsp;flags=1):&nbsp;STREAM_UNPLANNED_COMPLETE;&nbsp;old&nbsp;receiving&nbsp;erro&lt;br&gt;r:&nbsp;none&lt;br&gt;&lt;br&gt;&lt;/div&gt;Thanks,&lt;br&gt;&lt;/div&gt;Hector&lt;br&gt;&lt;/div&gt;<br>

</tt>
