<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-----BEGIN&nbsp;PGP&nbsp;SIGNED&nbsp;MESSAGE-----&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Hash:&nbsp;SHA256&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp; &lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;From&nbsp;my&nbsp;experience,&nbsp;it&nbsp;may&nbsp;occur&nbsp;as&nbsp;a&nbsp;result&nbsp;of&nbsp;forming&nbsp;the&nbsp;fake<br>
&nbsp;&nbsp;&nbsp;&nbsp;certificate&nbsp;zero&nbsp;length&nbsp;(in&nbsp;the&nbsp;case&nbsp;of&nbsp;the&nbsp;SQUID&nbsp;can&nbsp;not&nbsp;complete<br>
&nbsp;&nbsp;&nbsp;&nbsp;its&nbsp;formation&nbsp;for&nbsp;any&nbsp;reason).&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;In&nbsp;turn,&nbsp;the&nbsp;formation&nbsp;of&nbsp;such&nbsp;a&nbsp;certificate&nbsp;occurs&nbsp;in&nbsp;particular<br>
&nbsp;&nbsp;&nbsp;&nbsp;due&nbsp;to&nbsp;any&nbsp;error&nbsp;in&nbsp;the&nbsp;code&nbsp;of&nbsp;the&nbsp;SQUID&nbsp;characteristics&nbsp;or&nbsp;if<br>
&nbsp;&nbsp;&nbsp;&nbsp;server&nbsp;certificate.&nbsp;In&nbsp;particular,&nbsp;one&nbsp;of&nbsp;these&nbsp;servers&nbsp;is&nbsp;iTunes.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;09.04.15&nbsp;19:00,&nbsp;Vdoctor&nbsp;пишет:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;white-space:&nbsp;pre;&quot;&gt;&gt;&nbsp;Yury,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;I&nbsp;checked&nbsp;the&nbsp;source&nbsp;code&nbsp;(3.4/3.5)&nbsp;ssl_crtd,&nbsp;the&nbsp;default<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size&nbsp;is&nbsp;2048.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;    &nbsp;-b&nbsp;fs_block_size    &nbsp;File&nbsp;system&nbsp;block&nbsp;size&nbsp;in&nbsp;bytes.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Need&nbsp;for&nbsp;processing&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;                         &nbsp;natural&nbsp;size&nbsp;of&nbsp;certificate&nbsp;on&nbsp;disk.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default&nbsp;value&nbsp;is&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;                         &nbsp;2048&nbsp;bytes.&quot;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;/**&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt; &nbsp;\ingroup&nbsp;ssl_crtd&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt; &nbsp;*&nbsp;This&nbsp;is&nbsp;the&nbsp;external&nbsp;ssl_crtd&nbsp;process.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt; &nbsp;*/&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;int&nbsp;main(int&nbsp;argc,&nbsp;char&nbsp;*argv[])&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;{&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;    &nbsp;try&nbsp;{&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;        &nbsp;size_t&nbsp;max_db_size&nbsp;=&nbsp;0;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;        &nbsp;size_t&nbsp;fs_block_size&nbsp;=&nbsp;2048;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;But&nbsp;the&nbsp;crazy&nbsp;thing&nbsp;is&nbsp;the&nbsp;index.txt&nbsp;(last&nbsp;line)&nbsp;is&nbsp;wrong,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;complete.&nbsp;It&nbsp;seems&nbsp;the&nbsp;tool&nbsp;writes/saves&nbsp;wrong&nbsp;data&nbsp;that's&nbsp;why<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;it&nbsp;becomes&nbsp;corrupted&nbsp;and&nbsp;crash&nbsp;the&nbsp;Squid.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;We&nbsp;have&nbsp;tried&nbsp;with&nbsp;a&nbsp;single&nbsp;ssl_crtd&nbsp;in&nbsp;the&nbsp;squid.conf,&nbsp;then<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;one&nbsp;per&nbsp;worker,&nbsp;the&nbsp;same&nbsp;corruption.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;Bye&nbsp;Fred&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;-----Message&nbsp;d'origine-----&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;De&nbsp;:&nbsp;squid-users<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;mailto:squid-users-bounces@lists.squid-cache.org&quot;&gt;mailto:squid-users-bounces@lists.squid-cache.org&lt;/a&gt;]&nbsp;De&nbsp;la&nbsp;part&nbsp;de<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Yuri&nbsp;Voinov&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;Envoyé&nbsp;:&nbsp;jeudi&nbsp;9&nbsp;avril&nbsp;2015&nbsp;14:52&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;À&nbsp;:&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;Objet&nbsp;:&nbsp;***SPAM***&nbsp;Re:&nbsp;[squid-users]&nbsp;Random&nbsp;SSL&nbsp;bump&nbsp;DB<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;corruption&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;Don't&nbsp;think&nbsp;this&nbsp;is&nbsp;critical.&nbsp;What&nbsp;is&nbsp;native&nbsp;fs&nbsp;block&nbsp;size?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;09.04.15&nbsp;13:29,&nbsp;Stakres&nbsp;пишет:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;Hi&nbsp;Yuri,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;We&nbsp;have&nbsp;checked&nbsp;the&nbsp;sslproxy_capath,&nbsp;all&nbsp;certifs<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;updated.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;OpenSSL&nbsp;is:&nbsp;OpenSSL&nbsp;1.0.1e&nbsp;11&nbsp;Feb&nbsp;2013&nbsp;(Debian&nbsp;7.8)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;Additional&nbsp;point,&nbsp;the&nbsp;auto-signed&nbsp;certif&nbsp;is&nbsp;a&nbsp;1024,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;could&nbsp;it&nbsp;be&nbsp;the&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;problem&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;Maybe&nbsp;we&nbsp;need&nbsp;to&nbsp;use&nbsp;the&nbsp;ssl_crtd&nbsp;with&nbsp;the&nbsp;option&nbsp;&quot;-b<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1024&quot;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;what&nbsp;do&nbsp;you&nbsp;think&nbsp;?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;example&nbsp;of&nbsp;corrupted&nbsp;db:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;*V   &nbsp;250402155004Z       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7307E4A4E7FC6483C2B1D533821A7D2356DF1B88  &nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;unknown&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/CN=r2---sn-q4f7sn7z.googlevideo.com+Sign=signTrusted+SignHash=SHA256&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;V   &nbsp;250402155004Z       <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2D1FC87E26AC4D8AB1E6F3B45E2C69EB36C7F8D3  &nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;unknown&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;/CN=seal.verisign.com+Sign=signTrusted+SignHash=SHA256&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;6&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;*&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;the&nbsp;squid&nbsp;crash&nbsp;when&nbsp;the&nbsp;index.txt&nbsp;becomes&nbsp;wrong...<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;weird...&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;Bye&nbsp;Fred&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;--&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;View&nbsp;this&nbsp;message&nbsp;in&nbsp;context:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://squid-web-proxy-cache.1019090.n4.nabble.com/Random-SSL-bump-DB-corruption-tp4670289p4670656.html&quot;&gt;http://squid-web-proxy-cache.1019090.n4.nabble.com/Random-SSL-bump-DB-corruption-tp4670289p4670656.html&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;Sent&nbsp;from&nbsp;the&nbsp;Squid&nbsp;-&nbsp;Users&nbsp;mailing&nbsp;list&nbsp;archive&nbsp;at<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Nabble.com.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;/span&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-----BEGIN&nbsp;PGP&nbsp;SIGNATURE-----<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Version:&nbsp;GnuPG&nbsp;v2<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp; &lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;iQEcBAEBCAAGBQJVJni5AAoJENNXIZxhPexGTAkIAIx0ar6l6z84snTTem8XXZtD<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;oO/MnUvMb5FB+2IRp74dq7cO5KzlcZUeOvbbmsMsXR2CAraPqiLyTb3m3/eKqLS1<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;QdDRZZIuvV2GKyNizEzwwCV1W7QRjApbELc36rZC8fXVv5WArisDg3kk/Ycu3OeF<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;p0TBHhMNBvFKd+8Ve8xUqKQn3J6fYAYB8FHBzpssmfGaaGK7PeDmZ3LofeYHlqDP<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;eY7WKCzBQ7wOkezWJopBqkZH72OorLYHxOSanrNlbZ+5n2iO5wbuocm03F/QMJBc<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;uTN71irqNwHiqGd95ThQjSlhOXHvUSHEKssALUgmfHWEtIUy1PhLQvCksLm2510=<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;=ai9y<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-----END&nbsp;PGP&nbsp;SIGNATURE-----<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
