<tt>
&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;Transitional//EN&quot;<br>
&quot;http://www.w3.org/TR/REC-html40/loose.dtd&quot;&gt;<br>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;<br>
&lt;title&gt;&lt;/title&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;style=&quot;font-family:Arial;font-size:14px&quot;&gt;<br>
&lt;p&gt;Hello-&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp;&nbsp;I'm&nbsp;using&nbsp;squid&nbsp;version&nbsp;3.5.3&nbsp;and&nbsp;I&nbsp;could&nbsp;use&nbsp;some&nbsp;help&nbsp;with&nbsp;configuration.&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp;&nbsp;Squid&nbsp;will&nbsp;be&nbsp;installed&nbsp;at&nbsp;AWS,&nbsp;most&nbsp;clients&nbsp;will&nbsp;be&nbsp;within&nbsp;a&nbsp;corporate&nbsp;network&nbsp;and&nbsp;will&nbsp;not&nbsp;be&nbsp;able&nbsp;to&nbsp;access&nbsp;the&nbsp;service&nbsp;by&nbsp;configuring&nbsp;proxy&nbsp;settings&nbsp;in&nbsp;a&nbsp;browser.&nbsp;&nbsp;Instead&nbsp;DNS&nbsp;will&nbsp;be&nbsp;used&nbsp;to&nbsp;resolve&nbsp;to&nbsp;the&nbsp;Squid&nbsp;service.&nbsp;&nbsp;The&nbsp;Squid&nbsp;service&nbsp;will&nbsp;authenticate&nbsp;users&nbsp;via&nbsp;SLDAP.&nbsp;&nbsp;The&nbsp;service&nbsp;will&nbsp;need&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;intercept&nbsp;both&nbsp;clear&nbsp;and&nbsp;TLS&nbsp;HTTP&nbsp;traffic&nbsp;in&nbsp;order&nbsp;to&nbsp;insert&nbsp;an&nbsp;Authorization&nbsp;header.&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp;&nbsp;The&nbsp;request&nbsp;flow&nbsp;would&nbsp;be&nbsp;something&nbsp;like;&lt;br&gt;<br>
&lt;br&gt;<br>
Client&nbsp;browser&nbsp;requests&nbsp;http(s)://proxy-hostX.test.com&lt;br&gt;<br>
(where&nbsp;0&nbsp;&lt;&nbsp;X&nbsp;&lt;&nbsp;50)&lt;br&gt;<br>
&lt;br&gt;<br>
Squid&nbsp;will&nbsp;need&nbsp;to&nbsp;intercept&nbsp;the&nbsp;request&nbsp;and&nbsp;add&nbsp;an&nbsp;Authorization&nbsp;header.&lt;br&gt;<br>
Squid&nbsp;will&nbsp;need&nbsp;to&nbsp;rewrite&nbsp;the&nbsp;request&nbsp;to&nbsp;the&nbsp;origin&nbsp;server.&nbsp;&nbsp;In&nbsp;this&nbsp;case,&nbsp;the&nbsp;origin&nbsp;server&nbsp;name&nbsp;is&nbsp;hostX.test.com&lt;br&gt;<br>
&lt;br&gt;<br>
Squid&nbsp;will&nbsp;then&nbsp;intercept&nbsp;the&nbsp;server&nbsp;response&nbsp;and&nbsp;direct&nbsp;that&nbsp;response&nbsp;to&nbsp;an&nbsp;ICAP&nbsp;server&nbsp;to&nbsp;modify&nbsp;all&nbsp;embedded&nbsp;links&nbsp;to&nbsp;be&nbsp;the&nbsp;same&nbsp;as&nbsp;the&nbsp;request.&nbsp;&nbsp;All&nbsp;links&nbsp;in&nbsp;the&nbsp;response&nbsp;will&nbsp;need&nbsp;to&nbsp;be&nbsp;rewritten&nbsp;to&nbsp;http(s)://proxy-hostX.test.com&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;have&nbsp;official&nbsp;wildcard&nbsp;certificates&nbsp;for&nbsp;the&nbsp;domain.&nbsp;&nbsp;i.e.&nbsp;*.test.com&lt;br&gt;<br>
&lt;br&gt;<br>
Squid&nbsp;will&nbsp;also&nbsp;need&nbsp;to&nbsp;retrieve&nbsp;group&nbsp;memberships&nbsp;from&nbsp;SLDAP&nbsp;and&nbsp;authorize&nbsp;user&nbsp;access&nbsp;to&nbsp;hostX&nbsp;based&nbsp;on&nbsp;group&nbsp;memberships.&nbsp;&nbsp;If&nbsp;the&nbsp;user&nbsp;is&nbsp;in&nbsp;the&nbsp;groups&nbsp;host30&nbsp;and&nbsp;host43,&nbsp;then&nbsp;access&nbsp;is&nbsp;allowed&nbsp;to&nbsp;only&nbsp;host30.test.com&nbsp;and&nbsp;host43.test.com&lt;br&gt;<br>
&lt;br&gt;<br>
Thank&nbsp;you&nbsp;in&nbsp;advance&nbsp;for&nbsp;all&nbsp;assistance.&lt;/p&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;
</tt>
