<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Dear&nbsp;Amos,&lt;br&gt;&lt;br&gt;&lt;/div&gt;i&nbsp;get&nbsp;error&nbsp;:&lt;br&gt;--&nbsp;init_password:&nbsp;Wiping&nbsp;the&nbsp;computer&nbsp;password&nbsp;structure&lt;br&gt;<br>
 --&nbsp;generate_new_password:&nbsp;Generating&nbsp;a&nbsp;new,&nbsp;random&nbsp;password&nbsp;for&nbsp;the&lt;br&gt;<br>
computer&nbsp;account&lt;br&gt;<br>
 --&nbsp;generate_new_password: &nbsp;Characters&nbsp;read&nbsp;from&nbsp;/dev/udandom&nbsp;=&nbsp;90&lt;br&gt;<br>
 --&nbsp;create_fake_krb5_conf:&nbsp;Created&nbsp;a&nbsp;fake&nbsp;krb5.conf&nbsp;file:&lt;br&gt;<br>
/tmp/.msktkrb5.conf-F6iL9e&lt;br&gt;<br>
 --&nbsp;reload:&nbsp;Reloading&nbsp;Kerberos&nbsp;Context&lt;br&gt;<br>
 --&nbsp;finalize_exec:&nbsp;SAM&nbsp;Account&nbsp;Name&nbsp;is:&nbsp;PROXYAGIT01-K$&lt;br&gt;<br>
 --&nbsp;try_machine_keytab_princ:&nbsp;Trying&nbsp;to&nbsp;authenticate&nbsp;for&nbsp;PROXYAGIT01-K$&lt;br&gt;<br>
from&nbsp;&lt;span&nbsp;class=&quot;&quot;&gt;local&lt;/span&gt;&nbsp;keytab...&lt;br&gt;<br>
 --&nbsp;try_machine_keytab_princ:&nbsp;&lt;span&nbsp;class=&quot;&quot;&gt;Error&lt;/span&gt;:&nbsp;krb5_get_init_creds_keytab&nbsp;&lt;span&nbsp;class=&quot;&quot;&gt;failed&lt;/span&gt;&lt;br&gt;<br>
(Client&nbsp;not&nbsp;found&nbsp;in&nbsp;Kerberos&nbsp;database)&lt;br&gt;<br>
 --&nbsp;try_machine_keytab_princ:&nbsp;Authentication&nbsp;with&nbsp;keytab&nbsp;&lt;span&nbsp;class=&quot;&quot;&gt;failed&lt;/span&gt;&lt;br&gt;<br>
 --&nbsp;try_machine_keytab_princ:&nbsp;Trying&nbsp;to&nbsp;authenticate&nbsp;for&nbsp;host/&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://proxyagit01.ag-it.com&quot;&nbsp;target=&quot;_blank&quot;&gt;proxyagit01.ag-it.com&lt;/a&gt;&nbsp;from&nbsp;&lt;span&nbsp;class=&quot;&quot;&gt;local&lt;/span&gt;&nbsp;keytab...&lt;br&gt;<br>
 --&nbsp;try_machine_keytab_princ:&nbsp;&lt;span&nbsp;class=&quot;&quot;&gt;Error&lt;/span&gt;:&nbsp;krb5_get_init_creds_keytab&nbsp;&lt;span&nbsp;class=&quot;&quot;&gt;failed&lt;/span&gt;&lt;br&gt;<br>
(Client&nbsp;not&nbsp;found&nbsp;in&nbsp;Kerberos&nbsp;database)&lt;br&gt;<br>
 --&nbsp;try_machine_keytab_princ:&nbsp;Authentication&nbsp;with&nbsp;keytab&nbsp;&lt;span&nbsp;class=&quot;&quot;&gt;failed&lt;/span&gt;&lt;br&gt;<br>
 --&nbsp;try_machine_password:&nbsp;Trying&nbsp;to&nbsp;authenticate&nbsp;for&nbsp;PROXYAGIT01-K$&nbsp;with&lt;br&gt;<br>
password.&lt;br&gt;<br>
 --&nbsp;create_default_machine_password:&nbsp;Default&nbsp;machine&nbsp;password&nbsp;for&lt;br&gt;<br>
PROXYAGIT01-K$&nbsp;is&nbsp;proxyagit01-k&lt;br&gt;<br>
 --&nbsp;try_machine_password:&nbsp;&lt;span&nbsp;class=&quot;&quot;&gt;Error&lt;/span&gt;:&nbsp;krb5_get_init_creds_keytab&nbsp;&lt;span&nbsp;class=&quot;&quot;&gt;failed&lt;/span&gt;&nbsp;(Client&lt;br&gt;<br>
not&nbsp;found&nbsp;in&nbsp;Kerberos&nbsp;database)&lt;br&gt;<br>
 --&nbsp;try_machine_password:&nbsp;Authentication&nbsp;with&nbsp;password&nbsp;&lt;span&nbsp;class=&quot;&quot;&gt;failed&lt;/span&gt;&lt;br&gt;<br>
 --&nbsp;try_user_creds:&nbsp;Checking&nbsp;if&nbsp;default&nbsp;ticket&nbsp;cache&nbsp;has&nbsp;tickets...&lt;br&gt;<br>
 --&nbsp;finalize_exec:&nbsp;Authenticated&nbsp;using&nbsp;method&nbsp;4&lt;br&gt;<br>
&lt;br&gt;<br>
 --&nbsp;ldap_connect:&nbsp;Connecting&nbsp;to&nbsp;LDAP&nbsp;server:&nbsp;&lt;a&nbsp;href=&quot;http://svr-resdmn22.ag-it.com&quot;&nbsp;target=&quot;_blank&quot;&gt;svr-resdmn22.ag-it.com&lt;/a&gt;&lt;br&gt;<br>
try_tls=YES&lt;br&gt;<br>
 --&nbsp;ldap_connect:&nbsp;Connecting&nbsp;to&nbsp;LDAP&nbsp;server:&nbsp;&lt;a&nbsp;href=&quot;http://svr-resdmn22.ag-it.com&quot;&nbsp;target=&quot;_blank&quot;&gt;svr-resdmn22.ag-it.com&lt;/a&gt;&lt;br&gt;<br>
try_tls=NO&lt;br&gt;&lt;br&gt;<br>
&lt;b&gt;SASL/GSSAPI&nbsp;authentication&nbsp;started&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt;Error&lt;/span&gt;:&nbsp;&lt;span&nbsp;class=&quot;&quot;&gt;ldap_sasl_interactive_bind_s&lt;/span&gt;&nbsp;&lt;span&nbsp;class=&quot;&quot;&gt;failed&lt;/span&gt;&nbsp;(&lt;span&nbsp;class=&quot;&quot;&gt;Local&lt;/span&gt;&nbsp;&lt;span&nbsp;class=&quot;&quot;&gt;error&lt;/span&gt;)&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt;Error&lt;/span&gt;:&nbsp;ldap_connect&nbsp;&lt;span&nbsp;class=&quot;&quot;&gt;failed&lt;/span&gt;&lt;br&gt;<br>
--&gt;&nbsp;Is&nbsp;your&nbsp;kerberos&nbsp;ticket&nbsp;expired?&nbsp;You&nbsp;might&nbsp;try&nbsp;re-&quot;kinit&quot;ing.&lt;br&gt;<br>
 --&nbsp;~KRB5Context:&nbsp;Destroying&nbsp;Kerberos&nbsp;Context&lt;/b&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/div&gt;in&nbsp;auth.log&nbsp;:&lt;br&gt;&quot;&nbsp;msktutil:&nbsp;GSSAPI&nbsp;&lt;span&nbsp;class=&quot;&quot;&gt;Error&lt;/span&gt;:&nbsp;Unspecified&nbsp;GSS&nbsp;failure. &nbsp;Minor&lt;br&gt;<br>
code&nbsp;may&nbsp;provide&nbsp;more&nbsp;information&nbsp;(Server&nbsp;not&nbsp;found&nbsp;in&nbsp;Kerberos&nbsp;database)&quot;&lt;br&gt;&lt;br&gt;&lt;/div&gt;help&nbsp;me&lt;br&gt;&lt;br&gt;&lt;/div&gt;thanks,&lt;br&gt;&lt;/div&gt;kukuhga&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Apr&nbsp;23,&nbsp;2015&nbsp;at&nbsp;4:41&nbsp;PM,&nbsp;&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:squid-users-request@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users-request@lists.squid-cache.org&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Send&nbsp;squid-users&nbsp;mailing&nbsp;list&nbsp;submissions&nbsp;to&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
To&nbsp;subscribe&nbsp;or&nbsp;unsubscribe&nbsp;via&nbsp;the&nbsp;World&nbsp;Wide&nbsp;Web,&nbsp;visit&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
or,&nbsp;via&nbsp;email,&nbsp;send&nbsp;a&nbsp;message&nbsp;with&nbsp;subject&nbsp;or&nbsp;body&nbsp;&#39;help&#39;&nbsp;to&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users-request@lists.squid-cache.org&quot;&gt;squid-users-request@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
You&nbsp;can&nbsp;reach&nbsp;the&nbsp;person&nbsp;managing&nbsp;the&nbsp;list&nbsp;at&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users-owner@lists.squid-cache.org&quot;&gt;squid-users-owner@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
When&nbsp;replying,&nbsp;please&nbsp;edit&nbsp;your&nbsp;Subject&nbsp;line&nbsp;so&nbsp;it&nbsp;is&nbsp;more&nbsp;specific&lt;br&gt;<br>
than&nbsp;&quot;Re:&nbsp;Contents&nbsp;of&nbsp;squid-users&nbsp;digest...&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Today&#39;s&nbsp;Topics:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; 1.&nbsp;Re:&nbsp;ERR_ONLY_IF_CACHED_MISS&nbsp;and&nbsp;cache&nbsp;digests&nbsp;problem&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp;(Victor&nbsp;Sudakov)&lt;br&gt;<br>
 &nbsp; 2.&nbsp;GSSAPI&nbsp;problem&nbsp;when&nbsp;try&nbsp;create&nbsp;keytab&nbsp;using&nbsp;msktutil&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp;(kukuh&nbsp;amukti)&lt;br&gt;<br>
 &nbsp; 3.&nbsp;Re:&nbsp;[squid&nbsp;]&nbsp;externalAclLookup:&nbsp;&#39;wbinfo_group_helper&#39;&nbsp;queue&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp;overload.&nbsp;(Jagannath&nbsp;Naidu)&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
----------------------------------------------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Message:&nbsp;1&lt;br&gt;<br>
Date:&nbsp;Thu,&nbsp;23&nbsp;Apr&nbsp;2015&nbsp;14:35:24&nbsp;+0600&lt;br&gt;<br>
From:&nbsp;Victor&nbsp;Sudakov&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:sudakov@sibptus.tomsk.ru&quot;&gt;sudakov@sibptus.tomsk.ru&lt;/a&gt;&gt;&lt;br&gt;<br>
To:&nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;,&nbsp;Amos&nbsp;Jeffries&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&lt;br&gt;<br>
Subject:&nbsp;Re:&nbsp;[squid-users]&nbsp;ERR_ONLY_IF_CACHED_MISS&nbsp;and&nbsp;cache&nbsp;digests&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;problem&lt;br&gt;<br>
Message-ID:&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:20150423083524.GA92752@admin.sibptus.tomsk.ru&quot;&gt;20150423083524.GA92752@admin.sibptus.tomsk.ru&lt;/a&gt;&gt;&lt;br&gt;<br>
Content-Type:&nbsp;text/plain;&nbsp;charset=us-ascii&lt;br&gt;<br>
&lt;br&gt;<br>
Amos&nbsp;Jeffries&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
[dd]&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;dont&nbsp;think&nbsp;anything&nbsp;is&nbsp;wrong&nbsp;wth&nbsp;either.&nbsp;Its&nbsp;more&nbsp;a&nbsp;collision&nbsp;in&nbsp;how&lt;br&gt;<br>
&gt;&nbsp;the&nbsp;features&nbsp;work&nbsp;vs&nbsp;the&nbsp;protocols.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Cache&nbsp;Digests&nbsp;(CD)&nbsp;are&nbsp;exchanged&nbsp;periodically&nbsp;and&nbsp;updated&nbsp;approx&nbsp;hourly.&lt;br&gt;<br>
&gt;&nbsp;Also&nbsp;they&nbsp;are&nbsp;based&nbsp;on&nbsp;just&nbsp;the&nbsp;URL.&nbsp;So&nbsp;there&nbsp;is&nbsp;always&nbsp;a&nbsp;gap&nbsp;where&nbsp;they&lt;br&gt;<br>
&gt;&nbsp;may&nbsp;not&nbsp;be&nbsp;accurate&nbsp;for&nbsp;any&nbsp;highly&nbsp;volatile&nbsp;objects,&nbsp;and&nbsp;variant&nbsp;objects&lt;br&gt;<br>
&gt;&nbsp;(using&nbsp;Vary&nbsp;headers)&nbsp;will&nbsp;have&nbsp;a&nbsp;high&nbsp;false-positive&nbsp;rate.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;only-if-cached&nbsp;requires&nbsp;the&nbsp;*right&nbsp;now*&nbsp;state&nbsp;of&nbsp;the&nbsp;object&nbsp;to&nbsp;be&nbsp;fresh&lt;br&gt;<br>
&gt;&nbsp;and&nbsp;in&nbsp;cache.&nbsp;It&nbsp;takes&nbsp;account&nbsp;of&nbsp;both&nbsp;the&nbsp;URL&nbsp;and&nbsp;the&nbsp;entire&nbsp;HTTP&lt;br&gt;<br>
&gt;&nbsp;headers.&nbsp;So&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;ICP&nbsp;protocol&nbsp;used&nbsp;as&nbsp;a&nbsp;backup&nbsp;to&nbsp;confirm&nbsp;objects&nbsp;existence&nbsp;also&lt;br&gt;<br>
&gt;&nbsp;suffers&nbsp;the&nbsp;same&nbsp;URL&nbsp;basis&nbsp;problem&nbsp;as&nbsp;CD.&nbsp;They&nbsp;work&nbsp;fine&nbsp;for&nbsp;HTTP/1.0&lt;br&gt;<br>
&gt;&nbsp;but&nbsp;HTTP/1.1&nbsp;features&nbsp;dont&nbsp;fare&nbsp;quite&nbsp;so&nbsp;well.&lt;br&gt;<br>
&lt;br&gt;<br>
Thank&nbsp;you&nbsp;Amos,&nbsp;now&nbsp;I&nbsp;understand&nbsp;the&nbsp;mechanics&nbsp;behind&nbsp;this.&nbsp;However,&lt;br&gt;<br>
I&#39;d&nbsp;prefer&nbsp;that&nbsp;users&nbsp;do&nbsp;not&nbsp;receive&nbsp;this&nbsp;frustrating&nbsp;error&nbsp;in&nbsp;a&nbsp;setup&lt;br&gt;<br>
with&nbsp;has&nbsp;nothing&nbsp;inherently&nbsp;wrong&nbsp;about&nbsp;it&nbsp;(especially&nbsp;frustrating&nbsp;is&lt;br&gt;<br>
the&nbsp;fact&nbsp;that&nbsp;they&nbsp;receive&nbsp;the&nbsp;error&nbsp;from&nbsp;the&nbsp;wrong&nbsp;proxy&nbsp;server,&nbsp;not&nbsp;the&lt;br&gt;<br>
one&nbsp;they&nbsp;have&nbsp;configured&nbsp;in&nbsp;the&nbsp;browser&nbsp;settings).&lt;br&gt;<br>
&lt;br&gt;<br>
Do&nbsp;I&nbsp;understand&nbsp;correctly&nbsp;that&nbsp;the&nbsp;only&nbsp;way&nbsp;to&nbsp;avoid&nbsp;this&nbsp;error&lt;br&gt;<br>
message&nbsp;is&nbsp;to&nbsp;switch&nbsp;to&nbsp;HTCP&nbsp;(and&nbsp;ditch&nbsp;both&nbsp;ICP&nbsp;and&nbsp;CD)?&lt;br&gt;<br>
&lt;br&gt;<br>
--&lt;br&gt;<br>
Victor&nbsp;Sudakov, &nbsp;VAS4-RIPE,&nbsp;VAS47-RIPN&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:sip%3Asudakov@sibptus.tomsk.ru&quot;&gt;sip:sudakov@sibptus.tomsk.ru&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Message:&nbsp;2&lt;br&gt;<br>
Date:&nbsp;Thu,&nbsp;23&nbsp;Apr&nbsp;2015&nbsp;16:40:44&nbsp;+0700&lt;br&gt;<br>
From:&nbsp;kukuh&nbsp;amukti&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:kukuh.amukti@gmail.com&quot;&gt;kukuh.amukti@gmail.com&lt;/a&gt;&gt;&lt;br&gt;<br>
To:&nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
Subject:&nbsp;[squid-users]&nbsp;GSSAPI&nbsp;problem&nbsp;when&nbsp;try&nbsp;create&nbsp;keytab&nbsp;using&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;msktutil&lt;br&gt;<br>
Message-ID:&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:CAKHWrNFg7vUzmDpDJSpQvMRgc4eTCFONYYUnijyNNZRO2U0zTw@mail.gmail.com&quot;&gt;CAKHWrNFg7vUzmDpDJSpQvMRgc4eTCFONYYUnijyNNZRO2U0zTw@mail.gmail.com&lt;/a&gt;&gt;&lt;br&gt;<br>
Content-Type:&nbsp;text/plain;&nbsp;charset=&quot;utf-8&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
Dear&nbsp;All,&lt;br&gt;<br>
i&#39;ve&nbsp;building&nbsp;squid&nbsp;in&nbsp;W2K12&nbsp;and&nbsp;there&nbsp;is&nbsp;no&nbsp;problem&nbsp;but&nbsp;when&nbsp;i&nbsp;try&nbsp;running&lt;br&gt;<br>
in&nbsp;W2K3,&lt;br&gt;<br>
i&nbsp;get&nbsp;problem&nbsp;when&nbsp;try&nbsp;create&nbsp;keytab&nbsp;with&nbsp;msktutil&nbsp;command&nbsp;to&nbsp;win&nbsp;server&lt;br&gt;<br>
2003.&lt;br&gt;<br>
and&nbsp;when&nbsp;i&nbsp;run&nbsp;msktutil&nbsp;:&lt;br&gt;<br>
&lt;br&gt;<br>
msktutil&nbsp;-c&nbsp;-b&nbsp;&quot;OU=WSUS&nbsp;-&nbsp;Server,OU=Astragraphia-ITS&quot;&nbsp;-s&lt;br&gt;<br>
HTTP/&lt;a&nbsp;href=&quot;http://proxyagit01.ag-it.com&quot;&nbsp;target=&quot;_blank&quot;&gt;proxyagit01.ag-it.com&lt;/a&gt;&nbsp;-k&nbsp;/etc/squid3/PROXY.keytab&nbsp;--computer-name&lt;br&gt;<br>
PROXYAGIT-01&nbsp;--upn&nbsp;HTTP/&lt;a&nbsp;href=&quot;http://proxyagit01.ag-it.com&quot;&nbsp;target=&quot;_blank&quot;&gt;proxyagit01.ag-it.com&lt;/a&gt;&nbsp;--server&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://svr-resdmn22.ag-it.com&quot;&nbsp;target=&quot;_blank&quot;&gt;svr-resdmn22.ag-it.com&lt;/a&gt;&nbsp;--verbose&lt;br&gt;<br>
&lt;br&gt;<br>
and&nbsp;get&nbsp;some&nbsp;error&lt;br&gt;<br>
&lt;br&gt;<br>
 --&nbsp;init_password:&nbsp;Wiping&nbsp;the&nbsp;computer&nbsp;password&nbsp;structure&lt;br&gt;<br>
 --&nbsp;generate_new_password:&nbsp;Generating&nbsp;a&nbsp;new,&nbsp;random&nbsp;password&nbsp;for&nbsp;the&lt;br&gt;<br>
computer&nbsp;account&lt;br&gt;<br>
 --&nbsp;generate_new_password: &nbsp;Characters&nbsp;read&nbsp;from&nbsp;/dev/udandom&nbsp;=&nbsp;90&lt;br&gt;<br>
 --&nbsp;create_fake_krb5_conf:&nbsp;Created&nbsp;a&nbsp;fake&nbsp;krb5.conf&nbsp;file:&lt;br&gt;<br>
/tmp/.msktkrb5.conf-F6iL9e&lt;br&gt;<br>
 --&nbsp;reload:&nbsp;Reloading&nbsp;Kerberos&nbsp;Context&lt;br&gt;<br>
 --&nbsp;finalize_exec:&nbsp;SAM&nbsp;Account&nbsp;Name&nbsp;is:&nbsp;PROXYAGIT01-K$&lt;br&gt;<br>
 --&nbsp;try_machine_keytab_princ:&nbsp;Trying&nbsp;to&nbsp;authenticate&nbsp;for&nbsp;PROXYAGIT01-K$&lt;br&gt;<br>
from&nbsp;local&nbsp;keytab...&lt;br&gt;<br>
 --&nbsp;try_machine_keytab_princ:&nbsp;Error:&nbsp;krb5_get_init_creds_keytab&nbsp;failed&lt;br&gt;<br>
(Client&nbsp;not&nbsp;found&nbsp;in&nbsp;Kerberos&nbsp;database)&lt;br&gt;<br>
 --&nbsp;try_machine_keytab_princ:&nbsp;Authentication&nbsp;with&nbsp;keytab&nbsp;failed&lt;br&gt;<br>
 --&nbsp;try_machine_keytab_princ:&nbsp;Trying&nbsp;to&nbsp;authenticate&nbsp;for&nbsp;host/&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://proxyagit01.ag-it.com&quot;&nbsp;target=&quot;_blank&quot;&gt;proxyagit01.ag-it.com&lt;/a&gt;&nbsp;from&nbsp;local&nbsp;keytab...&lt;br&gt;<br>
 --&nbsp;try_machine_keytab_princ:&nbsp;Error:&nbsp;krb5_get_init_creds_keytab&nbsp;failed&lt;br&gt;<br>
(Client&nbsp;not&nbsp;found&nbsp;in&nbsp;Kerberos&nbsp;database)&lt;br&gt;<br>
 --&nbsp;try_machine_keytab_princ:&nbsp;Authentication&nbsp;with&nbsp;keytab&nbsp;failed&lt;br&gt;<br>
 --&nbsp;try_machine_password:&nbsp;Trying&nbsp;to&nbsp;authenticate&nbsp;for&nbsp;PROXYAGIT01-K$&nbsp;with&lt;br&gt;<br>
password.&lt;br&gt;<br>
 --&nbsp;create_default_machine_password:&nbsp;Default&nbsp;machine&nbsp;password&nbsp;for&lt;br&gt;<br>
PROXYAGIT01-K$&nbsp;is&nbsp;proxyagit01-k&lt;br&gt;<br>
 --&nbsp;try_machine_password:&nbsp;Error:&nbsp;krb5_get_init_creds_keytab&nbsp;failed&nbsp;(Client&lt;br&gt;<br>
not&nbsp;found&nbsp;in&nbsp;Kerberos&nbsp;database)&lt;br&gt;<br>
 --&nbsp;try_machine_password:&nbsp;Authentication&nbsp;with&nbsp;password&nbsp;failed&lt;br&gt;<br>
 --&nbsp;try_user_creds:&nbsp;Checking&nbsp;if&nbsp;default&nbsp;ticket&nbsp;cache&nbsp;has&nbsp;tickets...&lt;br&gt;<br>
 --&nbsp;finalize_exec:&nbsp;Authenticated&nbsp;using&nbsp;method&nbsp;4&lt;br&gt;<br>
&lt;br&gt;<br>
 --&nbsp;ldap_connect:&nbsp;Connecting&nbsp;to&nbsp;LDAP&nbsp;server:&nbsp;&lt;a&nbsp;href=&quot;http://svr-resdmn22.ag-it.com&quot;&nbsp;target=&quot;_blank&quot;&gt;svr-resdmn22.ag-it.com&lt;/a&gt;&lt;br&gt;<br>
try_tls=YES&lt;br&gt;<br>
 --&nbsp;ldap_connect:&nbsp;Connecting&nbsp;to&nbsp;LDAP&nbsp;server:&nbsp;&lt;a&nbsp;href=&quot;http://svr-resdmn22.ag-it.com&quot;&nbsp;target=&quot;_blank&quot;&gt;svr-resdmn22.ag-it.com&lt;/a&gt;&lt;br&gt;<br>
try_tls=NO&lt;br&gt;<br>
SASL/GSSAPI&nbsp;authentication&nbsp;started&lt;br&gt;<br>
Error:&nbsp;ldap_sasl_interactive_bind_s&nbsp;failed&nbsp;(Local&nbsp;error)&lt;br&gt;<br>
Error:&nbsp;ldap_connect&nbsp;failed&lt;br&gt;<br>
--&gt;&nbsp;Is&nbsp;your&nbsp;kerberos&nbsp;ticket&nbsp;expired?&nbsp;You&nbsp;might&nbsp;try&nbsp;re-&quot;kinit&quot;ing.&lt;br&gt;<br>
 --&nbsp;~KRB5Context:&nbsp;Destroying&nbsp;Kerberos&nbsp;Context&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
in&nbsp;auth.log &nbsp;say&nbsp;&quot;&nbsp;msktutil:&nbsp;GSSAPI&nbsp;Error:&nbsp;Unspecified&nbsp;GSS&nbsp;failure. &nbsp;Minor&lt;br&gt;<br>
code&nbsp;may&nbsp;provide&nbsp;more&nbsp;information&nbsp;(Server&nbsp;not&nbsp;found&nbsp;in&nbsp;Kerberos&nbsp;database)&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
what&nbsp;should&nbsp;i&nbsp;do?&lt;br&gt;<br>
&lt;br&gt;<br>
thanks,&lt;br&gt;<br>
kukuhga&lt;br&gt;<br>
--------------&nbsp;next&nbsp;part&nbsp;--------------&lt;br&gt;<br>
An&nbsp;HTML&nbsp;attachment&nbsp;was&nbsp;scrubbed...&lt;br&gt;<br>
URL:&nbsp;&lt;&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/pipermail/squid-users/attachments/20150423/95123d16/attachment-0001.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/pipermail/squid-users/attachments/20150423/95123d16/attachment-0001.html&lt;/a&gt;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Message:&nbsp;3&lt;br&gt;<br>
Date:&nbsp;Thu,&nbsp;23&nbsp;Apr&nbsp;2015&nbsp;15:11:09&nbsp;+0530&lt;br&gt;<br>
From:&nbsp;Jagannath&nbsp;Naidu&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:jagannath.naidu@fosteringlinux.com&quot;&gt;jagannath.naidu@fosteringlinux.com&lt;/a&gt;&gt;&lt;br&gt;<br>
To:&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&lt;br&gt;<br>
Cc:&nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
Subject:&nbsp;Re:&nbsp;[squid-users]&nbsp;[squid&nbsp;]&nbsp;externalAclLookup:&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;&#39;wbinfo_group_helper&#39;&nbsp;queue&nbsp;overload.&lt;br&gt;<br>
Message-ID:&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;&lt;CA+8bHvzhgS=-&lt;a&nbsp;href=&quot;mailto:u5zx1a82uWk0jC62qS1HmaUoawn7eW1W43ZHfA@mail.gmail.com&quot;&gt;u5zx1a82uWk0jC62qS1HmaUoawn7eW1W43ZHfA@mail.gmail.com&lt;/a&gt;&gt;&lt;br&gt;<br>
Content-Type:&nbsp;text/plain;&nbsp;charset=&quot;utf-8&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
Hi&nbsp;Amos,&lt;br&gt;<br>
&lt;br&gt;<br>
regrets,&nbsp;I&nbsp;am&nbsp;late.&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;21&nbsp;April&nbsp;2015&nbsp;at&nbsp;09:15,&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;On&nbsp;20/04/2015&nbsp;7:31&nbsp;p.m.,&nbsp;Jagannath&nbsp;Naidu&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;Hi,&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;I&nbsp;am&nbsp;having&nbsp;this&nbsp;issue&nbsp;very&nbsp;frequently.&nbsp;Please&nbsp;help&nbsp;on&nbsp;this.&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;I&nbsp;get&nbsp;these&nbsp;errors&nbsp;randomly,&nbsp;mostly&nbsp;when&nbsp;usage&nbsp;is&nbsp;at&nbsp;very&nbsp;peak.&nbsp;(800&lt;br&gt;<br>
&gt;&nbsp;users)&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;/var/log/squid/cache.log&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;2015/04/20&nbsp;12:37:40|&nbsp;externalAclLookup:&nbsp;&#39;wbinfo_group_helper&#39;&nbsp;queue&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;overload&nbsp;(ch=0x7fc99e2ce518)&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;What&nbsp;do&nbsp;you&nbsp;think&nbsp;&quot;overload&quot;&nbsp;means?&lt;br&gt;<br>
&gt; &nbsp;The&nbsp;helper&nbsp;is&nbsp;unable&nbsp;to&nbsp;cope&nbsp;with&nbsp;the&nbsp;traffic&nbsp;load&nbsp;being&nbsp;passed&nbsp;to&nbsp;it.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Here&nbsp;is&nbsp;the&nbsp;biggest&nbsp;hint:&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;in&nbsp;/var/log/messages, &nbsp;I&nbsp;get&nbsp;the&nbsp;following&nbsp;errors&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;pr&nbsp;20&nbsp;12:59:15&nbsp;GGNPROXY01&nbsp;winbindd[1910]: &nbsp; winbindd:&nbsp;Exceeding&nbsp;200&lt;br&gt;<br>
&gt;&nbsp;client&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;connections,&nbsp;no&nbsp;idle&nbsp;connection&nbsp;found&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;Then&nbsp;squid&nbsp;stops&nbsp;working.&nbsp;For&nbsp;squid&nbsp;to&nbsp;start&nbsp;work&nbsp;again,&nbsp;I&nbsp;have&nbsp;to&nbsp;dlete&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;the&nbsp;cache&nbsp;and&nbsp;restart&nbsp;the&nbsp;squid&nbsp;&quot;squid&nbsp;-k&nbsp;reconfigure&quot;,&nbsp;and&nbsp;then&nbsp;squid&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;restart.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;What&nbsp;Squid&nbsp;version&nbsp;are&nbsp;you&nbsp;using?&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;my&nbsp;squid&nbsp;version &nbsp;squid-3.1.10-19.el6_4.x86_64&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;squid.conf&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;max_filedesc&nbsp;17192&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;manager&nbsp;proto&nbsp;cache_object&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;localhost&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://172.16.50.61/24&quot;&nbsp;target=&quot;_blank&quot;&gt;172.16.50.61/24&lt;/a&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;changed&nbsp;to&nbsp;&quot;acl&nbsp;localhost&nbsp;src&nbsp;172.16.50.6*1*&quot;&nbsp;already&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;You&nbsp;have&nbsp;an&nbsp;entire&nbsp;/24&nbsp;(256&nbsp;IPs)&nbsp;assigned&nbsp;to&nbsp;this&nbsp;machine?&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;think&nbsp;you&nbsp;need&nbsp;to&nbsp;remove&nbsp;that&nbsp;&quot;/24&quot;&nbsp;part&nbsp;if&nbsp;the&nbsp;*.61&nbsp;is&nbsp;the&nbsp;local&lt;br&gt;<br>
&gt;&nbsp;machines&nbsp;*public*&nbsp;IP.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;allow&nbsp;manager&nbsp;localhost&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;dns_nameservers&nbsp;172.16.3.34&nbsp;10.1.2.91&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;allowips&nbsp;src&nbsp;172.16.58.187&nbsp;172.16.16.192&nbsp;172.16.58.113&nbsp;172.16.58.63&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;172.16.58.98&nbsp;172.16.60.244&nbsp;172.16.58.165&nbsp;172.16.58.157&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;allow&nbsp;allowips&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;auth_param&nbsp;basic&nbsp;realm&nbsp;Squid&nbsp;proxy-caching&nbsp;web&nbsp;server&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;auth_param&nbsp;basic&nbsp;credentialsttl&nbsp;2&nbsp;hours&nbsp;external_acl_type&nbsp;nt_group&nbsp;ttl=0&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;children=60&nbsp;%LOGIN&nbsp;/usr/lib64/squid/&lt;a&nbsp;href=&quot;http://wbinfo_group.pl&quot;&nbsp;target=&quot;_blank&quot;&gt;wbinfo_group.pl&lt;/a&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;above&nbsp;two&nbsp;very&nbsp;mangled&nbsp;config&nbsp;lines&nbsp;are&nbsp;useless.&nbsp;Remove&nbsp;them.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;localnet&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://172.16.0.0/24&quot;&nbsp;target=&quot;_blank&quot;&gt;172.16.0.0/24&lt;/a&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
changed&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;Its&nbsp;a&nbsp;bit&nbsp;strange&nbsp;that&nbsp;none&nbsp;of&nbsp;the&nbsp;localhost&nbsp;machine&nbsp;IPs&lt;br&gt;<br>
&gt;&nbsp;(172.16.50.0-172.16.50.255)&nbsp;are&nbsp;part&nbsp;of&nbsp;the&nbsp;LAN&nbsp;its&nbsp;plugged&nbsp;into&lt;br&gt;<br>
&gt;&nbsp;172.16.0.0-172.16.0.255.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;localnet&nbsp;src&nbsp;fc00::/7&nbsp;#&nbsp;RFC&nbsp;4193&nbsp;local&nbsp;private&nbsp;network&nbsp;range&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;localnet&nbsp;src&nbsp;fe80::/10&nbsp;#&nbsp;RFC&nbsp;4291&nbsp;link-local&nbsp;(directly&nbsp;plugged)&lt;br&gt;<br>
&gt;&nbsp;machines&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;auth_param&nbsp;ntlm&nbsp;program&nbsp;/usr/bin/ntlm_auth&nbsp;--diagnostics&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;--helper-protocol=squid-2.5-ntlmssp&nbsp;--domain=&lt;a&nbsp;href=&quot;http://HTMEDIA.NET&quot;&nbsp;target=&quot;_blank&quot;&gt;HTMEDIA.NET&lt;/a&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Okay&nbsp;you&nbsp;have&nbsp;configured&nbsp;NTLM...&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;auth_param&nbsp;ntlm&nbsp;program&nbsp;/usr/bin/ntlm_auth&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;--helper-protocol=squid-2.5-ntlmssp&nbsp;--domain=&lt;a&nbsp;href=&quot;http://HTMEDIA.NET&quot;&nbsp;target=&quot;_blank&quot;&gt;HTMEDIA.NET&lt;/a&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;...&nbsp;but&nbsp;twice.&nbsp;With&nbsp;different&nbsp;settings.&nbsp;Only&nbsp;these&nbsp;last&nbsp;ones&nbsp;will&nbsp;have&lt;br&gt;<br>
&gt;&nbsp;any&nbsp;effect.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;auth_param&nbsp;ntlm&nbsp;children&nbsp;600&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;auth_param&nbsp;ntlm&nbsp;keep_alive&nbsp;off&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;auth_param&nbsp;negotiate&nbsp;children&nbsp;150&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;auth_param&nbsp;negotiate&nbsp;keep_alive&nbsp;off&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;visible_hostname&nbsp;&lt;a&nbsp;href=&quot;http://GGNPROXY01.HTMEDIA.NET&quot;&nbsp;target=&quot;_blank&quot;&gt;GGNPROXY01.HTMEDIA.NET&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;external_acl_type&nbsp;wbinfo_group_helper&nbsp;ttl=0&nbsp;children=40&nbsp;%LOGIN&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;/usr/lib64/squid/&lt;a&nbsp;href=&quot;http://wbinfo_group.pl&quot;&nbsp;target=&quot;_blank&quot;&gt;wbinfo_group.pl&lt;/a&gt;&nbsp;-d&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;auth_param&nbsp;negotiate&nbsp;keep_alive&nbsp;off&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;You&nbsp;have&nbsp;several&nbsp;useless&nbsp;configuration&nbsp;lines&nbsp;for&nbsp;Negotiate&nbsp;auth&nbsp;which&nbsp;is&lt;br&gt;<br>
&gt;&nbsp;not&nbsp;being&nbsp;used&nbsp;in&nbsp;any&nbsp;way.&nbsp;Remove&nbsp;those.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;Safe_ports&nbsp;port&nbsp;8080&nbsp;#https&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;SSL_ports&nbsp;port&nbsp;443&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;Safe_ports&nbsp;port&nbsp;80 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;http&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;Safe_ports&nbsp;port&nbsp;21 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;ftp&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;Safe_ports&nbsp;port&nbsp;443&nbsp;#&nbsp;https&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;Safe_ports&nbsp;port&nbsp;70 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;gopher&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;Safe_ports&nbsp;port&nbsp;210 &nbsp; &nbsp; &nbsp; &nbsp; #&nbsp;wais&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;Safe_ports&nbsp;port&nbsp;1025-65535 &nbsp;#&nbsp;unregistered&nbsp;ports&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;Safe_ports&nbsp;port&nbsp;280 &nbsp; &nbsp; &nbsp; &nbsp; #&nbsp;http-mgmt&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;Safe_ports&nbsp;port&nbsp;488 &nbsp; &nbsp; &nbsp; &nbsp; #&nbsp;gss-http&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;Safe_ports&nbsp;port&nbsp;591 &nbsp; &nbsp; &nbsp; &nbsp; #&nbsp;filemaker&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;Safe_ports&nbsp;port&nbsp;777 &nbsp; &nbsp; &nbsp; &nbsp; #&nbsp;multiling&nbsp;http&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;CONNECT&nbsp;method&nbsp;CONNECT&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;auth&nbsp;proxy_auth&nbsp;REQUIRED&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;google&nbsp;dstdomain&nbsp;-i&nbsp;&quot;/etc/squid/&lt;a&nbsp;href=&quot;http://google_site.com&quot;&nbsp;target=&quot;_blank&quot;&gt;google_site.com&lt;/a&gt;&quot;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;allow&nbsp;google&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;sq1&nbsp;external&nbsp;wbinfo_group_helper&nbsp;&quot;/etc/squid/HT/sq1&quot;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;sq2&nbsp;external&nbsp;wbinfo_group_helper&nbsp;&quot;/etc/squid/HT/sq2&quot;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;sq3&nbsp;external&nbsp;wbinfo_group_helper&nbsp;&quot;/etc/squid/HT/sq3&quot;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;sq4&nbsp;external&nbsp;wbinfo_group_helper&nbsp;&quot;/etc/squid/HT/sq4&quot;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;sq5&nbsp;external&nbsp;wbinfo_group_helper&nbsp;&quot;/etc/squid/HT/sq5&quot;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;pro1&nbsp;external&nbsp;wbinfo_group_helper&nbsp;&quot;/etc/squid/HT/pro1&quot;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;pro2&nbsp;external&nbsp;wbinfo_group_helper&nbsp;&quot;/etc/squid/HT/pro2&quot;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;pro3&nbsp;external&nbsp;wbinfo_group_helper&nbsp;&quot;/etc/squid/HT/pro3&quot;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;pro4&nbsp;external&nbsp;wbinfo_group_helper&nbsp;&quot;/etc/squid/HT/pro4&quot;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;pro5&nbsp;external&nbsp;wbinfo_group_helper&nbsp;&quot;/etc/squid/HT/pro5&quot;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;pro6&nbsp;external&nbsp;wbinfo_group_helper&nbsp;&quot;/etc/squid/HT/pro6&quot;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;webvip&nbsp;external&nbsp;wbinfo_group_helper&nbsp;&quot;/etc/squid/HT/webvip&quot;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;allgroup&nbsp;external&nbsp;wbinfo_group_helper&nbsp;&quot;/etc/squid/HT/allgreop&quot;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;restricted&nbsp;external&nbsp;wbinfo_group_helper&nbsp;&quot;/etc/squid/HT/restricted&quot;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;ad_auth&nbsp;proxy_auth&nbsp;REQUIRE&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;You&nbsp;already&nbsp;have&nbsp;an&nbsp;ACL&nbsp;named&nbsp;&quot;auth&quot;&nbsp;which&nbsp;performs&nbsp;authentication.&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;above&nbsp;line&nbsp;is&nbsp;not&nbsp;useful.&nbsp;Remove&nbsp;it&nbsp;and&nbsp;replace&nbsp;all&nbsp;uses&nbsp;of&lt;br&gt;<br>
&gt;&nbsp;&quot;ad_auth&quot;&nbsp;ACL&nbsp;with&nbsp;&quot;auth&quot;&nbsp;ACL.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;allowwebsites&nbsp;dstdomain&nbsp;-i&nbsp;&quot;/blacklists/allowedwebsite/domains&quot;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;allowwebsites_url&nbsp;url_regex&nbsp;-i&nbsp;&quot;/blacklists/allowedwebsite/url&quot;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;allow&nbsp;allowwebsites&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;allow&nbsp;allowwebsites_url&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;shopping&nbsp;dstdomain&nbsp;-i&nbsp;&quot;/etc/squid/shopping.txt&quot;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;social_networking&nbsp;dstdomain&nbsp;-i&nbsp;&quot;/blacklists/social/social.networking&quot;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;youtube&nbsp;dstdomain&nbsp;-i&nbsp;.&lt;a&nbsp;href=&quot;http://youtube.com&quot;&nbsp;target=&quot;_blank&quot;&gt;youtube.com&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;allow&nbsp;Safe_ports&nbsp;pro1&nbsp;pro2&nbsp;pro3&nbsp;pro4&nbsp;pro5&nbsp;pro6&nbsp;webvip&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Incorrect&nbsp;use&nbsp;of&nbsp;&quot;Safe_ports&quot;&nbsp;security&nbsp;check.&nbsp;Correct&nbsp;usage&nbsp;is&nbsp;to&nbsp;deny&lt;br&gt;<br>
&gt;&nbsp;access&nbsp;to&nbsp;all&nbsp;*unsafe*&nbsp;ports.&nbsp;They&nbsp;are&nbsp;unsafe&nbsp;because&nbsp;HTTP&nbsp;can&nbsp;be&lt;br&gt;<br>
&gt;&nbsp;smuggled&nbsp;within&nbsp;the&nbsp;ports&nbsp;native&nbsp;protocol&nbsp;to&nbsp;attack&nbsp;your&nbsp;proxy.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Once&nbsp;the&nbsp;correct&nbsp;security&nbsp;protections&nbsp;for&nbsp;Safe_port&nbsp;and&nbsp;CONNECT&nbsp;tunnels&lt;br&gt;<br>
&gt;&nbsp;have&nbsp;been&nbsp;moved&nbsp;up&nbsp;the&nbsp;top&nbsp;remove&nbsp;the&nbsp;&quot;Safe_ports&quot;&nbsp;check&nbsp;from&nbsp;this&nbsp;line.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;This&nbsp;line&nbsp;is&nbsp;also&nbsp;very&nbsp;odd&nbsp;in&nbsp;another&nbsp;way.&nbsp;ACL&nbsp;tests&nbsp;in&nbsp;a&nbsp;single&nbsp;line&lt;br&gt;<br>
&gt;&nbsp;are&nbsp;AND&#39;ed&nbsp;together&nbsp;-&nbsp;so&nbsp;this&nbsp;means&nbsp;the&nbsp;request&nbsp;must&nbsp;be&nbsp;from&nbsp;a&nbsp;user&nbsp;who&nbsp;is:&lt;br&gt;<br>
&gt; &nbsp; authenticated&nbsp;AND&nbsp;a&nbsp;member&nbsp;of&nbsp;group&nbsp;pro1&nbsp;AND&nbsp;pro2&nbsp;AND&nbsp;pro3&nbsp;AND&nbsp;pro4&lt;br&gt;<br>
&gt;&nbsp;AND&nbsp;pro5&nbsp;AND&nbsp;pro6&nbsp;AND&nbsp;webvip&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;This&nbsp;hints&nbsp;at&nbsp;what&nbsp;your&nbsp;main&nbsp;helper&nbsp;problem&nbsp;is.&nbsp;The&nbsp;above&nbsp;line&nbsp;requires&lt;br&gt;<br>
&gt;&nbsp;7&nbsp;group&nbsp;helper&nbsp;lookups&nbsp;*per&nbsp;request*.&nbsp;The&nbsp;winbind&nbsp;helper&nbsp;has&nbsp;a&nbsp;maximum&lt;br&gt;<br>
&gt;&nbsp;of&nbsp;200&nbsp;simultaneous&nbsp;connections.&nbsp;This&nbsp;line&nbsp;alone&nbsp;will&nbsp;limit&nbsp;your&nbsp;proxy&lt;br&gt;<br>
&gt;&nbsp;just&nbsp;under&nbsp;30&nbsp;new&nbsp;visitors&nbsp;per&nbsp;second&nbsp;(that&nbsp;becomes&nbsp;60&nbsp;lookups/sec&lt;br&gt;<br>
&gt;&nbsp;before&nbsp;queue&nbsp;overload).&lt;br&gt;<br>
&gt; &nbsp;The&nbsp;helper&nbsp;result&nbsp;caching&nbsp;will&nbsp;help&nbsp;a&nbsp;lot,&nbsp;but&nbsp;you&nbsp;also&nbsp;have&nbsp;a&nbsp;LOT&nbsp;of&lt;br&gt;<br>
&gt;&nbsp;other&nbsp;group&nbsp;checks&nbsp;being&nbsp;made&nbsp;and&nbsp;800&nbsp;users.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;allow&nbsp;youtube&nbsp;pro5&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;allow&nbsp;youtube&nbsp;pro6&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;allow&nbsp;youtube&nbsp;webvip&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;deny&nbsp;youtube&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;allow&nbsp;shopping&nbsp;pro5&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;allow&nbsp;shopping&nbsp;pro6&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;allow&nbsp;shopping&nbsp;webvip&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;deny&nbsp;shopping&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Optimization&nbsp;hint:&lt;br&gt;<br>
&gt; &nbsp;&quot;youtube&quot;&nbsp;and&nbsp;&quot;shopping&quot;&nbsp;have&nbsp;the&nbsp;same&nbsp;allow/deny&nbsp;criteria.&nbsp;It&nbsp;would&nbsp;be&lt;br&gt;<br>
&gt;&nbsp;worth&nbsp;combining&nbsp;them&nbsp;into&nbsp;one&nbsp;ACL.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;allow&nbsp;social_networking&nbsp;pro2&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;allow&nbsp;social_networking&nbsp;pro4&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;allow&nbsp;social_networking&nbsp;pro6&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;allow&nbsp;social_networking&nbsp;webvip&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;deny&nbsp;social_networking&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;porn_site1 &nbsp; dstdomain&nbsp;&quot;/etc/squid/blacklists/porn/domains.txt&quot;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;porn_site2 &nbsp; dstdom_regex&nbsp;-i&nbsp;&quot;/etc/squid/blacklists/porn/expressions&quot;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;porn_site3 &nbsp; dstdom_regex&nbsp;-i&nbsp;&quot;/etc/squid/blacklists/porn/urls.txt&quot;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;audio_video1 &nbsp; dstdomain&nbsp;&quot;/etc/squid/blacklists/audio-video/urls.txt&quot;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;######################&nbsp;THERE&nbsp;ARE&nbsp;TOO&nbsp;MANY&nbsp;acls&nbsp;and&nbsp;http_access&nbsp;,&nbsp;so&nbsp;not&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;bothering&nbsp;with&nbsp;vast&nbsp;linux&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;will&nbsp;bet&nbsp;a&nbsp;lot&nbsp;of&nbsp;those&nbsp;ACLs&nbsp;are&nbsp;also&nbsp;calling&nbsp;the&nbsp;group&nbsp;helper&nbsp;too&nbsp;yes?&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;allow&nbsp;liquorinfo&nbsp;webvip&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;deny&nbsp;liquorinfo&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;allow&nbsp;ad_auth&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;allow&nbsp;auth&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Once&nbsp;you&nbsp;have&nbsp;removed&nbsp;ad_auth&nbsp;ACL,&nbsp;this&nbsp;becomes:&lt;br&gt;<br>
&gt; &nbsp;http_access&nbsp;allow&nbsp;auth&lt;br&gt;<br>
&gt; &nbsp;http_access&nbsp;allow&nbsp;auth&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;hope&nbsp;you&nbsp;can&nbsp;see&nbsp;how&nbsp;redundant&nbsp;that&nbsp;is.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Also,&nbsp;its&nbsp;very&nbsp;likely&nbsp;that&nbsp;the&nbsp;&quot;allow&nbsp;auth&quot;&nbsp;is&nbsp;a&nbsp;useless&nbsp;operation&nbsp;after&lt;br&gt;<br>
&gt;&nbsp;a&nbsp;great&nbsp;many&nbsp;group&nbsp;checks&nbsp;have&nbsp;also&nbsp;performed&nbsp;authentication.&nbsp;That&nbsp;&quot;TOO&lt;br&gt;<br>
&gt;&nbsp;MANY&nbsp;acls&nbsp;and&nbsp;https_access&quot;&nbsp;list&nbsp;you&nbsp;omitted&nbsp;will&nbsp;be&nbsp;needed&nbsp;to&nbsp;determine&lt;br&gt;<br>
&gt;&nbsp;that.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;allow&nbsp;sq1&nbsp;sq2&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;NTLMUsers&nbsp;proxy_auth&nbsp;REQUIRED&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;You&nbsp;already&nbsp;have&nbsp;an&nbsp;ACL&nbsp;named&nbsp;&quot;auth&quot;&nbsp;which&nbsp;performs&nbsp;authentication.&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;above&nbsp;line&nbsp;is&nbsp;not&nbsp;being&nbsp;used&nbsp;in&nbsp;any&nbsp;way.&nbsp;Remove&nbsp;it.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;deny&nbsp;!Safe_ports&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;deny&nbsp;CONNECT&nbsp;!SSL_ports&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;These&nbsp;are&nbsp;basic&nbsp;security&nbsp;protection&nbsp;against&nbsp;Denial&nbsp;of&nbsp;Service&nbsp;and&nbsp;other&lt;br&gt;<br>
&gt;&nbsp;types&nbsp;of&nbsp;protocol&nbsp;smuggling&nbsp;attacks.&nbsp;They&nbsp;only&nbsp;work&nbsp;when&nbsp;they&nbsp;are&nbsp;used&lt;br&gt;<br>
&gt;&nbsp;*above*&nbsp;your&nbsp;custom&nbsp;&quot;allow&quot;&nbsp;rules.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Move&nbsp;these&nbsp;two&nbsp;lines&nbsp;above&nbsp;your&nbsp;&quot;http_access&nbsp;allow&nbsp;google&quot;&nbsp;line.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_port&nbsp;8080&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;hierarchy_stoplist&nbsp;cgi-bin&nbsp;?&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;above&nbsp;line&nbsp;is&nbsp;not&nbsp;useful&nbsp;these&nbsp;days.&nbsp;Remove&nbsp;it.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;cache_effective_user&nbsp;squid&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;cache_dir&nbsp;aufs&nbsp;/var/spool/squid&nbsp;20384&nbsp;32&nbsp;512&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;cache_mem&nbsp;50&nbsp;MB&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;cache_replacement_policy&nbsp;heap&nbsp;LFUDA&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;cache_swap_low&nbsp;85&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;cache_swap_high&nbsp;95&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;maximum_object_size&nbsp;5&nbsp;MB&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;maximum_object_size_in_memory&nbsp;50&nbsp;KB&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;ipcache_size&nbsp;5240&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;ipcache_low&nbsp;90&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;ipcache_high&nbsp;95&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;cache_mgr&nbsp;amit&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;SSL_ports&nbsp;port&nbsp;443&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;above&nbsp;is&nbsp;a&nbsp;duplicate&nbsp;config&nbsp;line.&nbsp;Remove&nbsp;it.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;allow&nbsp;CONNECT&nbsp;SSL_ports&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;coredump_dir&nbsp;/var/spool/squid&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;refresh_pattern&nbsp;^ftp: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1440 &nbsp; &nbsp;20% &nbsp; &nbsp; 10080&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;refresh_pattern&nbsp;^gopher: &nbsp; &nbsp; &nbsp; &nbsp;1440 &nbsp; &nbsp;0% &nbsp; &nbsp; &nbsp;1440&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;refresh_pattern&nbsp;-i&nbsp;(/cgi-bin/|\?)&nbsp;0 &nbsp; &nbsp; 0% &nbsp; &nbsp; &nbsp;0&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;refresh_pattern&nbsp;. &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp; &nbsp; 20% &nbsp; &nbsp; 4320&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;url_rewrite_program&nbsp;/usr/local/bin/squidGuard&nbsp;-c&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;/usr/local/squidGuard/squidGuard.conf&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Now,&nbsp;as&nbsp;to&nbsp;solving&nbsp;your&nbsp;problem:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;1)&nbsp;Clean&nbsp;up&nbsp;your&nbsp;config.&nbsp;Reduce&nbsp;the&nbsp;amount&nbsp;of&nbsp;redundant&nbsp;or&nbsp;unused&lt;br&gt;<br>
&gt;&nbsp;things.&nbsp;I&#39;ve&nbsp;mentioned&nbsp;a&nbsp;few&nbsp;above.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;2)&nbsp;Run&nbsp;&quot;squid&nbsp;-k&nbsp;parse&quot;&nbsp;and&nbsp;fix&nbsp;any&nbsp;other&nbsp;problems&nbsp;it&nbsp;highlights.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;3)&nbsp;optimize&nbsp;your&nbsp;ACls&nbsp;and&nbsp;http_access&nbsp;rules.&nbsp;I&#39;ve&nbsp;mentioned&nbsp;a&nbsp;few,&nbsp;such&lt;br&gt;<br>
&gt;&nbsp;as&nbsp;moving&nbsp;the&nbsp;main&nbsp;security&nbsp;checks&nbsp;to&nbsp;the&nbsp;top&nbsp;so&nbsp;DoS&nbsp;traffic&nbsp;does&nbsp;not&lt;br&gt;<br>
&gt;&nbsp;put&nbsp;load&nbsp;on&nbsp;the&nbsp;helpers&nbsp;and&nbsp;other&nbsp;ACLs.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;believe&nbsp;though&nbsp;that&nbsp;you&nbsp;will&nbsp;probably&nbsp;find&nbsp;Squid&nbsp;works&nbsp;much&nbsp;better&lt;br&gt;<br>
&gt;&nbsp;having&nbsp;the&nbsp;following&nbsp;access&nbsp;controls&nbsp;pattern:&lt;br&gt;<br>
&gt;&nbsp;&quot;&lt;br&gt;<br>
&gt; &nbsp;http_access&nbsp;deny&nbsp;!Safe_ports&lt;br&gt;<br>
&gt; &nbsp;http_access&nbsp;deny&nbsp;CONNECT&nbsp;!SSL_ports&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt; &nbsp;#&nbsp;if&nbsp;they&nbsp;are&nbsp;not&nbsp;authenticated,&nbsp;they&nbsp;will&nbsp;not&nbsp;be&nbsp;in&nbsp;a&nbsp;group&lt;br&gt;<br>
&gt; &nbsp;http_access&nbsp;deny&nbsp;!auth&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt; &nbsp;#&nbsp;assuming&nbsp;that&nbsp;webvip&nbsp;are&nbsp;the&nbsp;group&nbsp;with&nbsp;full&nbsp;access?&lt;br&gt;<br>
&gt; &nbsp;http_access&nbsp;allow&nbsp;webvip&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt; &nbsp;#&nbsp;your&nbsp;long&nbsp;list&nbsp;of&nbsp;per-site&nbsp;group&nbsp;check&nbsp;ACLs&nbsp;go&nbsp;here&lt;br&gt;<br>
&gt; &nbsp;...&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt; &nbsp;#&nbsp;this&nbsp;is&nbsp;where&nbsp;defining&nbsp;the&nbsp;LAN&nbsp;ranges&nbsp;correctly&nbsp;comes&nbsp;in.&lt;br&gt;<br>
&gt; &nbsp;#&nbsp;note&nbsp;that&nbsp;users&nbsp;have&nbsp;authenticated&nbsp;simply&nbsp;to&nbsp;get&nbsp;near&nbsp;here&lt;br&gt;<br>
&gt; &nbsp;http_access&nbsp;allow&nbsp;localnet&lt;br&gt;<br>
&gt; &nbsp;http_access&nbsp;deny&nbsp;all&lt;br&gt;<br>
&gt;&nbsp;&quot;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;4)&nbsp;consider&nbsp;an&nbsp;upgrade&nbsp;to&nbsp;Squid&nbsp;3.4+.&nbsp;The&nbsp;&quot;notes&quot;&nbsp;ACL&nbsp;type&nbsp;offers&nbsp;much&lt;br&gt;<br>
&gt;&nbsp;more&nbsp;efficient&nbsp;ACL&nbsp;testing&nbsp;with&nbsp;a&nbsp;custom&nbsp;group&nbsp;lookup&nbsp;helper.&nbsp;The&nbsp;all-of&lt;br&gt;<br>
&gt;&nbsp;and&nbsp;any-of&nbsp;ACL&nbsp;types&nbsp;can&nbsp;also&nbsp;much&nbsp;reduce&nbsp;your&nbsp;http_access&nbsp;lines.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;HTH&lt;br&gt;<br>
&gt;&nbsp;Amos&lt;br&gt;<br>
&gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&gt;&nbsp;squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Thank&nbsp;you&nbsp;Amos,&nbsp;I&nbsp;will&nbsp;check&nbsp;and&nbsp;will&nbsp;update&nbsp;the&nbsp;list.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
--&lt;br&gt;<br>
Thanks&nbsp;&amp;&nbsp;Regards&lt;br&gt;<br>
&lt;br&gt;<br>
B&nbsp;Jagannath&lt;br&gt;<br>
Keen&nbsp;&amp;&nbsp;Able&nbsp;Computers&nbsp;Pvt.&nbsp;Ltd.&lt;br&gt;<br>
--------------&nbsp;next&nbsp;part&nbsp;--------------&lt;br&gt;<br>
An&nbsp;HTML&nbsp;attachment&nbsp;was&nbsp;scrubbed...&lt;br&gt;<br>
URL:&nbsp;&lt;&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/pipermail/squid-users/attachments/20150423/4e7744c9/attachment.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/pipermail/squid-users/attachments/20150423/4e7744c9/attachment.html&lt;/a&gt;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Subject:&nbsp;Digest&nbsp;Footer&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
End&nbsp;of&nbsp;squid-users&nbsp;Digest,&nbsp;Vol&nbsp;8,&nbsp;Issue&nbsp;52&lt;br&gt;<br>
******************************************&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
