<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html&nbsp;charset=utf-8&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&quot;&nbsp;class=&quot;&quot;&gt;Hello&nbsp;Amos,&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;Try&nbsp;adding&nbsp;this&nbsp;to&nbsp;your&nbsp;config&nbsp;file:&lt;br&nbsp;class=&quot;&quot;&gt;workers&nbsp;2&lt;/blockquote&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;I’ve&nbsp;added&nbsp;this&nbsp;directive.&nbsp;After&nbsp;a&nbsp;restart&nbsp;I&nbsp;don’t&nbsp;see&nbsp;squid-process&nbsp;listening&nbsp;on&nbsp;the&nbsp;tcp&nbsp;port&nbsp;3128.&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;i&nbsp;class=&quot;&quot;&gt;Active&nbsp;Internet&nbsp;connections&nbsp;(only&nbsp;servers)&lt;/i&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;i&nbsp;class=&quot;&quot;&gt;Proto&nbsp;Recv-Q&nbsp;Send-Q&nbsp;Local&nbsp;Address&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Foreign&nbsp;Address&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;State&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PID/Program&nbsp;name&lt;/i&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;i&nbsp;class=&quot;&quot;&gt;tcp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;0.0.0.0:22&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0:*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LISTEN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;921/sshd&lt;/i&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;i&nbsp;class=&quot;&quot;&gt;tcp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;127.0.0.1:25&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0:*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LISTEN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1033/master&lt;/i&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;i&nbsp;class=&quot;&quot;&gt;tcp6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;:::22&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:::*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LISTEN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;921/sshd&lt;/i&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;i&nbsp;class=&quot;&quot;&gt;tcp6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;::1:25&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:::*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LISTEN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1033/master&lt;/i&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;/var/log/messages&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;i&nbsp;class=&quot;&quot;&gt;squid[17362]:&nbsp;Squid&nbsp;Parent:&nbsp;will&nbsp;start&nbsp;3&nbsp;kids&lt;/i&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;i&nbsp;class=&quot;&quot;&gt;squid[17362]:&nbsp;Squid&nbsp;Parent:&nbsp;(squid-coord-3)&nbsp;process&nbsp;17364&nbsp;started&lt;/i&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;i&nbsp;class=&quot;&quot;&gt;squid[17362]:&nbsp;Squid&nbsp;Parent:&nbsp;(squid-2)&nbsp;process&nbsp;17365&nbsp;started&lt;/i&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;i&nbsp;class=&quot;&quot;&gt;squid[17362]:&nbsp;Squid&nbsp;Parent:&nbsp;(squid-1)&nbsp;process&nbsp;17366&nbsp;started&lt;/i&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;i&nbsp;class=&quot;&quot;&gt;systemd:&nbsp;Started&nbsp;Squid&nbsp;caching&nbsp;proxy.&lt;/i&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;What&nbsp;am&nbsp;I&nbsp;missing?&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Abdelouahed&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Op&nbsp;20&nbsp;apr.&nbsp;2015,&nbsp;om&nbsp;02:58&nbsp;heeft&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&nbsp;class=&quot;&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&nbsp;het&nbsp;volgende&nbsp;geschreven:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;On&nbsp;19/04/2015&nbsp;9:58&nbsp;p.m.,&nbsp;Abdelouahed&nbsp;Haitoute&nbsp;wrote:&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;Hello,&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;I’ve&nbsp;got&nbsp;the&nbsp;following&nbsp;setup,&nbsp;each&nbsp;application&nbsp;on&nbsp;its&nbsp;own&nbsp;virtual&nbsp;machine:&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Client&nbsp;(sends&nbsp;http-requests&nbsp;to&nbsp;proxy)—&gt;&nbsp;Squid&nbsp;(sends&nbsp;http-requests&nbsp;to&nbsp;apache&nbsp;based&nbsp;on&nbsp;destination&nbsp;IP&nbsp;and&nbsp;round&nbsp;robin&nbsp;to&nbsp;multiple&nbsp;apache&nbsp;machines)&nbsp;—&gt;&nbsp;Apache&nbsp;(setting&nbsp;up&nbsp;a&nbsp;two&nbsp;way&nbsp;ssl&nbsp;to&nbsp;the&nbsp;requested&nbsp;server)&nbsp;—&gt;&nbsp;HTTPS-server&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;This&nbsp;setup&nbsp;works&nbsp;great,&nbsp;and&nbsp;I&nbsp;have&nbsp;the&nbsp;Apache&nbsp;and&nbsp;the&nbsp;HTTPS-server&nbsp;its&nbsp;performance&nbsp;tuned.&nbsp;Both&nbsp;can&nbsp;handle&nbsp;2000&nbsp;concurrent&nbsp;connections&nbsp;of&nbsp;file&nbsp;sizes&nbsp;up&nbsp;to&nbsp;10MB.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Unfortunately&nbsp;I&nbsp;haven’t&nbsp;been&nbsp;successful&nbsp;with&nbsp;the&nbsp;Squid-server.&nbsp;After&nbsp;a&nbsp;while&nbsp;I’m&nbsp;getting&nbsp;the&nbsp;following&nbsp;error&nbsp;messages&nbsp;in&nbsp;the&nbsp;log:&lt;br&nbsp;class=&quot;&quot;&gt;1429432828.200&nbsp;&nbsp;62854&nbsp;10.10.7.16&nbsp;TCP_MISS_ABORTED/000&nbsp;0&nbsp;GET&nbsp;&lt;a&nbsp;href=&quot;http://https.example.com/index.html&quot;&nbsp;class=&quot;&quot;&gt;http://https.example.com/index.html&lt;/a&gt;&nbsp;-&nbsp;ROUNDROBIN_PARENT/192.168.0.20&nbsp;-&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;The&nbsp;Squid&nbsp;virtual&nbsp;machine&nbsp;contains&nbsp;the&nbsp;following:&lt;br&nbsp;class=&quot;&quot;&gt;CentOS&nbsp;7.1&nbsp;with&nbsp;latest&nbsp;updates&lt;br&nbsp;class=&quot;&quot;&gt;Squid&nbsp;Cache:&nbsp;Version&nbsp;3.3.8&lt;br&nbsp;class=&quot;&quot;&gt;CPU:&nbsp;Intel&nbsp;Xeon&nbsp;E312xx&nbsp;(Sandy&nbsp;Bridge)&nbsp;-&nbsp;1799.998&nbsp;MHz&nbsp;(4&nbsp;cores)&lt;br&nbsp;class=&quot;&quot;&gt;Memory:&nbsp;4096&nbsp;MiB&lt;br&nbsp;class=&quot;&quot;&gt;Harddisk:&nbsp;10&nbsp;GiB,&nbsp;SCSI,&nbsp;raw,&nbsp;cache&nbsp;none&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;When&nbsp;I&nbsp;execute&nbsp;a&nbsp;performance&nbsp;test&nbsp;with&nbsp;2000&nbsp;concurrent&nbsp;connections&nbsp;handling&nbsp;a&nbsp;file&nbsp;size&nbsp;of&nbsp;10KB&nbsp;on&nbsp;each&nbsp;request.&lt;br&nbsp;class=&quot;&quot;&gt;#&nbsp;ab&nbsp;-n&nbsp;10000&nbsp;-c&nbsp;2000&nbsp;-X&nbsp;10.10.7.15:3128&nbsp;&lt;a&nbsp;href=&quot;http://https.example.com/index.html&quot;&nbsp;class=&quot;&quot;&gt;http://https.example.com/index.html&lt;/a&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/blockquote&gt;&lt;br&nbsp;class=&quot;&quot;&gt;You&nbsp;are&nbsp;wrong.&nbsp;&quot;ab&nbsp;-c&nbsp;2000&quot;&nbsp;to&nbsp;a&nbsp;non-caching&nbsp;proxy&nbsp;means&nbsp;*4000*&lt;br&nbsp;class=&quot;&quot;&gt;concurrent&nbsp;connections&nbsp;being&nbsp;handled&nbsp;by&nbsp;the&nbsp;proxy.&nbsp;Web&nbsp;server&nbsp;only&nbsp;loads&lt;br&nbsp;class=&quot;&quot;&gt;the&nbsp;file&nbsp;object&nbsp;once.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;A&nbsp;non-caching&nbsp;proxy&nbsp;requires&nbsp;+1&nbsp;connection&nbsp;to&nbsp;server&nbsp;for&nbsp;each&nbsp;inbound&lt;br&nbsp;class=&quot;&quot;&gt;client&nbsp;connection&nbsp;(&nbsp;2000&nbsp;+&nbsp;2000&nbsp;=&nbsp;4K&nbsp;concurrent&nbsp;connections&nbsp;).&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;This&nbsp;is&nbsp;ApacheBench,&nbsp;Version&nbsp;2.3&nbsp;&lt;$Revision:&nbsp;1430300&nbsp;$&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Copyright&nbsp;1996&nbsp;Adam&nbsp;Twiss,&nbsp;Zeus&nbsp;Technology&nbsp;Ltd,&nbsp;&lt;a&nbsp;href=&quot;http://www.zeustech.net/&quot;&nbsp;class=&quot;&quot;&gt;http://www.zeustech.net/&lt;/a&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Licensed&nbsp;to&nbsp;The&nbsp;Apache&nbsp;Software&nbsp;Foundation,&nbsp;&lt;a&nbsp;href=&quot;http://www.apache.org/&quot;&nbsp;class=&quot;&quot;&gt;http://www.apache.org/&lt;/a&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Benchmarking&nbsp;&lt;a&nbsp;href=&quot;http://https.rinis.nl&quot;&nbsp;class=&quot;&quot;&gt;https.rinis.nl&lt;/a&gt;&nbsp;[through&nbsp;10.10.7.15:3128]&nbsp;(be&nbsp;patient)&lt;br&nbsp;class=&quot;&quot;&gt;Completed&nbsp;1000&nbsp;requests&lt;br&nbsp;class=&quot;&quot;&gt;Completed&nbsp;2000&nbsp;requests&lt;br&nbsp;class=&quot;&quot;&gt;Completed&nbsp;3000&nbsp;requests&lt;br&nbsp;class=&quot;&quot;&gt;Completed&nbsp;4000&nbsp;requests&lt;br&nbsp;class=&quot;&quot;&gt;Completed&nbsp;5000&nbsp;requests&lt;br&nbsp;class=&quot;&quot;&gt;Completed&nbsp;6000&nbsp;requests&lt;br&nbsp;class=&quot;&quot;&gt;Completed&nbsp;7000&nbsp;requests&lt;br&nbsp;class=&quot;&quot;&gt;Completed&nbsp;8000&nbsp;requests&lt;br&nbsp;class=&quot;&quot;&gt;apr_pollset_poll:&nbsp;The&nbsp;timeout&nbsp;specified&nbsp;has&nbsp;expired&nbsp;(70007)&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/blockquote&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Squid&nbsp;is&nbsp;still&nbsp;responding&nbsp;by&nbsp;the&nbsp;client&nbsp;has&nbsp;given&nbsp;up.&nbsp;As&nbsp;shown&nbsp;by&nbsp;the&lt;br&nbsp;class=&quot;&quot;&gt;_ABORTED&nbsp;in&nbsp;the&nbsp;squid&nbsp;log.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;Total&nbsp;of&nbsp;8610&nbsp;requests&nbsp;completed&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;I&nbsp;have&nbsp;the&nbsp;command&nbsp;&quot;vmstat&nbsp;5”&nbsp;running&nbsp;on&nbsp;the&nbsp;squid&nbsp;server:&lt;br&nbsp;class=&quot;&quot;&gt;procs&nbsp;-----------memory----------&nbsp;---swap--&nbsp;-----io----&nbsp;-system--&nbsp;------cpu-----&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;r&nbsp;&nbsp;b&nbsp;&nbsp;&nbsp;swpd&nbsp;&nbsp;&nbsp;free&nbsp;&nbsp;&nbsp;buff&nbsp;&nbsp;cache&nbsp;&nbsp;&nbsp;si&nbsp;&nbsp;&nbsp;so&nbsp;&nbsp;&nbsp;&nbsp;bi&nbsp;&nbsp;&nbsp;&nbsp;bo&nbsp;&nbsp;&nbsp;in&nbsp;&nbsp;&nbsp;cs&nbsp;us&nbsp;sy&nbsp;id&nbsp;wa&nbsp;st&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;2&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;3823916&nbsp;&nbsp;&nbsp;&nbsp;764&nbsp;124992&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;519&nbsp;&nbsp;&nbsp;&nbsp;26&nbsp;&nbsp;237&nbsp;&nbsp;503&nbsp;&nbsp;2&nbsp;&nbsp;3&nbsp;92&nbsp;&nbsp;3&nbsp;&nbsp;0&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;0&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;3823744&nbsp;&nbsp;&nbsp;&nbsp;764&nbsp;125072&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;44&nbsp;&nbsp;&nbsp;79&nbsp;&nbsp;0&nbsp;&nbsp;0&nbsp;100&nbsp;&nbsp;0&nbsp;&nbsp;0&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;0&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;3823776&nbsp;&nbsp;&nbsp;&nbsp;764&nbsp;125044&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;&nbsp;&nbsp;39&nbsp;&nbsp;&nbsp;70&nbsp;&nbsp;0&nbsp;&nbsp;0&nbsp;100&nbsp;&nbsp;0&nbsp;&nbsp;0&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;0&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;3729540&nbsp;&nbsp;&nbsp;&nbsp;764&nbsp;139116&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;2145&nbsp;&nbsp;257&nbsp;&nbsp;1&nbsp;&nbsp;2&nbsp;97&nbsp;&nbsp;0&nbsp;&nbsp;0&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;0&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;3728432&nbsp;&nbsp;&nbsp;&nbsp;764&nbsp;139888&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;46&nbsp;2297&nbsp;&nbsp;594&nbsp;&nbsp;1&nbsp;&nbsp;1&nbsp;97&nbsp;&nbsp;0&nbsp;&nbsp;0&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;0&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;3726484&nbsp;&nbsp;&nbsp;&nbsp;764&nbsp;140892&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;39&nbsp;2869&nbsp;&nbsp;581&nbsp;&nbsp;2&nbsp;&nbsp;1&nbsp;97&nbsp;&nbsp;0&nbsp;&nbsp;0&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;0&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;3725528&nbsp;&nbsp;&nbsp;&nbsp;764&nbsp;141376&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;2843&nbsp;&nbsp;648&nbsp;&nbsp;2&nbsp;&nbsp;2&nbsp;96&nbsp;&nbsp;0&nbsp;&nbsp;0&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;0&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;3724980&nbsp;&nbsp;&nbsp;&nbsp;764&nbsp;142008&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;69&nbsp;2824&nbsp;&nbsp;529&nbsp;&nbsp;2&nbsp;&nbsp;1&nbsp;97&nbsp;&nbsp;0&nbsp;&nbsp;0&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;0&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;3724584&nbsp;&nbsp;&nbsp;&nbsp;764&nbsp;142540&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;2742&nbsp;&nbsp;472&nbsp;&nbsp;2&nbsp;&nbsp;1&nbsp;97&nbsp;&nbsp;0&nbsp;&nbsp;0&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;0&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;3723696&nbsp;&nbsp;&nbsp;&nbsp;764&nbsp;143004&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;2511&nbsp;&nbsp;577&nbsp;&nbsp;2&nbsp;&nbsp;1&nbsp;97&nbsp;&nbsp;0&nbsp;&nbsp;0&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;0&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;3722840&nbsp;&nbsp;&nbsp;&nbsp;764&nbsp;143200&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;12&nbsp;&nbsp;884&nbsp;&nbsp;228&nbsp;&nbsp;1&nbsp;&nbsp;1&nbsp;99&nbsp;&nbsp;0&nbsp;&nbsp;0&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;0&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;3722704&nbsp;&nbsp;&nbsp;&nbsp;764&nbsp;142900&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;136&nbsp;&nbsp;127&nbsp;&nbsp;0&nbsp;&nbsp;0&nbsp;100&nbsp;&nbsp;0&nbsp;&nbsp;0&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;0&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;3722504&nbsp;&nbsp;&nbsp;&nbsp;764&nbsp;142744&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;40&nbsp;&nbsp;&nbsp;70&nbsp;&nbsp;0&nbsp;&nbsp;0&nbsp;100&nbsp;&nbsp;0&nbsp;&nbsp;0&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;0&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;3722456&nbsp;&nbsp;&nbsp;&nbsp;764&nbsp;142784&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;114&nbsp;&nbsp;&nbsp;37&nbsp;&nbsp;&nbsp;68&nbsp;&nbsp;0&nbsp;&nbsp;0&nbsp;100&nbsp;&nbsp;0&nbsp;&nbsp;0&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;0&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;3722208&nbsp;&nbsp;&nbsp;&nbsp;764&nbsp;142832&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;41&nbsp;&nbsp;&nbsp;68&nbsp;&nbsp;0&nbsp;&nbsp;0&nbsp;100&nbsp;&nbsp;0&nbsp;&nbsp;0&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;0&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;3722480&nbsp;&nbsp;&nbsp;&nbsp;764&nbsp;142280&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;179&nbsp;&nbsp;&nbsp;82&nbsp;&nbsp;0&nbsp;&nbsp;0&nbsp;100&nbsp;&nbsp;0&nbsp;&nbsp;0&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;0&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;3722544&nbsp;&nbsp;&nbsp;&nbsp;764&nbsp;142140&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7&nbsp;&nbsp;&nbsp;41&nbsp;&nbsp;&nbsp;75&nbsp;&nbsp;0&nbsp;&nbsp;0&nbsp;100&nbsp;&nbsp;0&nbsp;&nbsp;0&lt;br&nbsp;class=&quot;&quot;&gt;procs&nbsp;-----------memory----------&nbsp;---swap--&nbsp;-----io----&nbsp;-system--&nbsp;------cpu-----&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;r&nbsp;&nbsp;b&nbsp;&nbsp;&nbsp;swpd&nbsp;&nbsp;&nbsp;free&nbsp;&nbsp;&nbsp;buff&nbsp;&nbsp;cache&nbsp;&nbsp;&nbsp;si&nbsp;&nbsp;&nbsp;so&nbsp;&nbsp;&nbsp;&nbsp;bi&nbsp;&nbsp;&nbsp;&nbsp;bo&nbsp;&nbsp;&nbsp;in&nbsp;&nbsp;&nbsp;cs&nbsp;us&nbsp;sy&nbsp;id&nbsp;wa&nbsp;st&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;1&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;3722544&nbsp;&nbsp;&nbsp;&nbsp;764&nbsp;142136&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;36&nbsp;&nbsp;&nbsp;67&nbsp;&nbsp;0&nbsp;&nbsp;0&nbsp;100&nbsp;&nbsp;0&nbsp;&nbsp;0&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;0&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;3722996&nbsp;&nbsp;&nbsp;&nbsp;764&nbsp;141552&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;42&nbsp;&nbsp;&nbsp;75&nbsp;&nbsp;0&nbsp;&nbsp;0&nbsp;100&nbsp;&nbsp;0&nbsp;&nbsp;0&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;0&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;3722980&nbsp;&nbsp;&nbsp;&nbsp;764&nbsp;141568&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;37&nbsp;&nbsp;&nbsp;68&nbsp;&nbsp;0&nbsp;&nbsp;0&nbsp;100&nbsp;&nbsp;0&nbsp;&nbsp;0&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;0&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;3723028&nbsp;&nbsp;&nbsp;&nbsp;764&nbsp;141524&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;36&nbsp;&nbsp;&nbsp;66&nbsp;&nbsp;0&nbsp;&nbsp;0&nbsp;100&nbsp;&nbsp;0&nbsp;&nbsp;0&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;0&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;3736816&nbsp;&nbsp;&nbsp;&nbsp;764&nbsp;130352&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;809&nbsp;&nbsp;114&nbsp;&nbsp;0&nbsp;&nbsp;0&nbsp;99&nbsp;&nbsp;0&nbsp;&nbsp;0&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;0&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;3737544&nbsp;&nbsp;&nbsp;&nbsp;764&nbsp;130268&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;41&nbsp;&nbsp;&nbsp;42&nbsp;&nbsp;&nbsp;74&nbsp;&nbsp;0&nbsp;&nbsp;0&nbsp;100&nbsp;&nbsp;0&nbsp;&nbsp;0&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;It&nbsp;looks&nbsp;like&nbsp;the&nbsp;hardware&nbsp;has&nbsp;enough&nbsp;resources&nbsp;during&nbsp;the&nbsp;benchmark&nbsp;test.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;I’ve&nbsp;got&nbsp;the&nbsp;following&nbsp;squid.conf&nbsp;running:&lt;br&nbsp;class=&quot;&quot;&gt;cache_peer&nbsp;192.168.0.18&nbsp;parent&nbsp;3128&nbsp;0&nbsp;round-robin&nbsp;no-query&nbsp;no-digest&lt;br&nbsp;class=&quot;&quot;&gt;cache_peer&nbsp;192.168.0.20&nbsp;parent&nbsp;3128&nbsp;0&nbsp;round-robin&nbsp;no-query&nbsp;no-digest&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;acl&nbsp;development_net&nbsp;dst&nbsp;192.168.0.0/24&lt;br&nbsp;class=&quot;&quot;&gt;cache_peer_access&nbsp;192.168.0.18&nbsp;allow&nbsp;development_net&lt;br&nbsp;class=&quot;&quot;&gt;cache_peer_access&nbsp;192.168.0.20&nbsp;allow&nbsp;development_net&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;never_direct&nbsp;allow&nbsp;all&lt;br&nbsp;class=&quot;&quot;&gt;cache&nbsp;deny&nbsp;all&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;maximum_object_size_in_memory&nbsp;16&nbsp;MB&lt;br&nbsp;class=&quot;&quot;&gt;cache_mem&nbsp;2048&nbsp;MB&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;The&nbsp;squid&nbsp;must&nbsp;not&nbsp;cache&nbsp;at&nbsp;all.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/blockquote&gt;&lt;br&nbsp;class=&quot;&quot;&gt;The&nbsp;dont&nbsp;bother&nbsp;setting&nbsp;cache_mem&nbsp;to&nbsp;2GB.&nbsp;The&nbsp;memory&nbsp;cache&nbsp;wont&nbsp;be&nbsp;used.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Also&nbsp;note&nbsp;that&nbsp;the&nbsp;lack&nbsp;of&nbsp;caching&nbsp;is&nbsp;*worsening*&nbsp;your&nbsp;performance&lt;br&nbsp;class=&quot;&quot;&gt;results.&nbsp;When&nbsp;memory&nbsp;cache&nbsp;is&nbsp;used&nbsp;the&nbsp;FD&nbsp;usage&nbsp;is&nbsp;halved,&nbsp;and&nbsp;the&nbsp;time&lt;br&nbsp;class=&quot;&quot;&gt;to&nbsp;respond&nbsp;is&nbsp;greatly&nbsp;increased&nbsp;(factor&nbsp;of&nbsp;approx&nbsp;100&nbsp;in&nbsp;latency&nbsp;reduction).&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;Consider&nbsp;removing&nbsp;the&nbsp;&quot;cache&nbsp;deny&nbsp;all&quot;&nbsp;when&nbsp;you&nbsp;get&nbsp;this&nbsp;into&lt;br&nbsp;class=&quot;&quot;&gt;production.&nbsp;The&nbsp;2GB&nbsp;memory&nbsp;cache&nbsp;you&nbsp;assigned&nbsp;can&nbsp;help&nbsp;a&nbsp;*lot*&nbsp;for&nbsp;quick&lt;br&nbsp;class=&quot;&quot;&gt;short&nbsp;term&nbsp;bursts&nbsp;of&nbsp;high&nbsp;traffic&nbsp;(ie.&nbsp;some&nbsp;DoS&nbsp;situations).&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;I&nbsp;do&nbsp;not&nbsp;see&nbsp;any&nbsp;SMP&nbsp;configuration&nbsp;in&nbsp;your&nbsp;Squid.&nbsp;Meaning&nbsp;that&nbsp;its&lt;br&nbsp;class=&quot;&quot;&gt;operating&nbsp;all&nbsp;those&nbsp;4K&nbsp;connections&nbsp;with&nbsp;a&nbsp;single&nbsp;process&nbsp;on&nbsp;a&nbsp;single&lt;br&nbsp;class=&quot;&quot;&gt;1.7GHz&nbsp;core.&nbsp;Thats&nbsp;not&nbsp;much&nbsp;processor&nbsp;to&nbsp;work&nbsp;with.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Try&nbsp;adding&nbsp;this&nbsp;to&nbsp;your&nbsp;config&nbsp;file:&lt;br&nbsp;class=&quot;&quot;&gt;&nbsp;workers&nbsp;2&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Amos&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;_______________________________________________&lt;br&nbsp;class=&quot;&quot;&gt;squid-users&nbsp;mailing&nbsp;list&lt;br&nbsp;class=&quot;&quot;&gt;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;class=&quot;&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&nbsp;class=&quot;&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
