<tt>
&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;XHTML&nbsp;1.0&nbsp;Strict//EN&quot;&nbsp;&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;<br>
<br>
&lt;html&nbsp;xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=UTF-8&quot;/&gt;<br>
&nbsp;&lt;style&nbsp;type=&quot;text/css&quot;&gt;body&nbsp;{min-height:&nbsp;100px}<br>
&lt;/style&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;&quot;&gt;&lt;div&gt;&#62;&nbsp;On&nbsp;May&nbsp;13,&nbsp;2015&nbsp;at&nbsp;3:25&nbsp;AM&nbsp;Amos&nbsp;Jeffries&nbsp;&#60;squid3@treenet.co.nz&#62;&nbsp;wrote:&lt;br&gt;&#62;&nbsp;&lt;br&gt;&#62;&nbsp;&lt;br&gt;&#62;&nbsp;On&nbsp;13/05/2015&nbsp;6:17&nbsp;a.m.,&nbsp;Casey&nbsp;Daniels&nbsp;wrote:&lt;br&gt;&#62;&nbsp;&#62;&nbsp;Hi,&lt;br&gt;&#62;&nbsp;&#62;&nbsp;I&#39;ve&nbsp;been&nbsp;trying&nbsp;to&nbsp;figure&nbsp;out&nbsp;how&nbsp;to&nbsp;do&nbsp;some&nbsp;web&nbsp;filtering&nbsp;on&nbsp;HTTPs,&lt;br&gt;&#62;&nbsp;&#62;&nbsp;with&nbsp;no&nbsp;really&nbsp;good&nbsp;options&nbsp;given&nbsp;the&nbsp;layout&nbsp;I&nbsp;have.&nbsp;But&nbsp;then&nbsp;I&nbsp;just&lt;br&gt;&#62;&nbsp;&#62;&nbsp;happened&nbsp;to&nbsp;see&nbsp;this&nbsp;feature&nbsp;for&nbsp;Squid&nbsp;3.5,&nbsp;and&nbsp;was&nbsp;wondering&nbsp;if&nbsp;I&#39;m&lt;br&gt;&#62;&nbsp;&#62;&nbsp;understanding&nbsp;it&nbsp;correctly.&lt;br&gt;&#62;&nbsp;&#62;&nbsp;&lt;br&gt;&#62;&nbsp;&#62;&nbsp;With&nbsp;the&nbsp;Peak&nbsp;and&nbsp;Splice&nbsp;feature,&nbsp;is&nbsp;it&nbsp;possible&nbsp;to&nbsp;run&nbsp;squid&nbsp;in&nbsp;a&lt;br&gt;&#62;&nbsp;&#62;&nbsp;transparent&nbsp;mode&nbsp;for&nbsp;SSL,&nbsp;and&nbsp;check&nbsp;for&nbsp;certain&nbsp;host&nbsp;and&nbsp;either&nbsp;deny&nbsp;the&lt;br&gt;&#62;&nbsp;&#62;&nbsp;connection&nbsp;all&nbsp;together&nbsp;or&nbsp;allow&nbsp;the&nbsp;connection&nbsp;without&nbsp;further&lt;br&gt;&#62;&nbsp;&#62;&nbsp;interference&nbsp;from&nbsp;Squid?&nbsp;Would&nbsp;this&nbsp;be&nbsp;completely&nbsp;transparent&nbsp;without&lt;br&gt;&#62;&nbsp;&#62;&nbsp;adding&nbsp;a&nbsp;trusted&nbsp;certificate&nbsp;from&nbsp;the&nbsp;proxy&nbsp;server&nbsp;to&nbsp;all&nbsp;user&nbsp;devices?&lt;br&gt;&#62;&nbsp;&lt;br&gt;&#62;&nbsp;Depends&nbsp;on&nbsp;how&nbsp;you&nbsp;define&nbsp;&#34;host&#34;&nbsp;and&nbsp;what&nbsp;the&nbsp;TLS&nbsp;ClientHello&lt;br&gt;&#62;&nbsp;information&nbsp;contains.&lt;br&gt;&#62;&nbsp;&lt;br&gt;&#62;&nbsp;If&nbsp;you&nbsp;define&nbsp;&#34;host&#34;&nbsp;in&nbsp;the&nbsp;official&nbsp;standard&nbsp;Internet&nbsp;terminology&nbsp;(a&lt;br&gt;&#62;&nbsp;single&nbsp;machine).&nbsp;Then&nbsp;no&nbsp;its&nbsp;not&nbsp;possible.&nbsp;NAT&nbsp;and&nbsp;&#34;load&nbsp;balancing&#34;&lt;br&gt;&#62;&nbsp;utterly&nbsp;destroyed&nbsp;the&nbsp;ability&nbsp;to&nbsp;determine&nbsp;if&nbsp;the&nbsp;host&nbsp;being&nbsp;spoken&nbsp;to&lt;br&gt;&#62;&nbsp;is&nbsp;the&nbsp;host&nbsp;indicated&nbsp;in&nbsp;the&nbsp;packets.&lt;br&gt;&#62;&nbsp;Case&nbsp;in&nbsp;point&nbsp;is&nbsp;your&nbsp;interceptor&nbsp;-&nbsp;a&nbsp;completely&nbsp;different&nbsp;host&nbsp;to&nbsp;the&lt;br&gt;&#62;&nbsp;one&nbsp;the&nbsp;client&nbsp;sees&nbsp;in&nbsp;its&nbsp;packets.&nbsp;Nothing&nbsp;stops&nbsp;other&nbsp;interceptors&lt;br&gt;&#62;&nbsp;existing&nbsp;upstream&nbsp;from&nbsp;you.&lt;br&gt;&#62;&nbsp;&lt;br&gt;&#62;&nbsp;If&nbsp;by&nbsp;&#34;host&#34;&nbsp;you&nbsp;actally&nbsp;meant&nbsp;FQDN&nbsp;or&nbsp;host&nbsp;*name*.&nbsp;It&nbsp;can&nbsp;be&nbsp;done&nbsp;when&lt;br&gt;&#62;&nbsp;and&nbsp;only&nbsp;when&nbsp;the&nbsp;TLS&nbsp;SNI&nbsp;information&nbsp;is&nbsp;made&nbsp;available&nbsp;by&nbsp;the&nbsp;client.&lt;br&gt;&#62;&nbsp;&lt;br&gt;&#62;&nbsp;Amos&lt;br&gt;&#62;&nbsp;&lt;br&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;div&gt;Yes&nbsp;the&nbsp;second&nbsp;option,&nbsp;not&nbsp;the&nbsp;particular&nbsp;machine,&nbsp;but&nbsp;the&nbsp;FQDN&nbsp;(i.e.&nbsp;&lt;a&nbsp;href=&quot;http://www.cooking.com&quot;&gt;www.cooking.com&lt;/a&gt;)&lt;/div&gt;<br>
&lt;div&gt;When&nbsp;is&nbsp;the&nbsp;TLS&nbsp;SNI&nbsp;information&nbsp;made&nbsp;available&nbsp;by&nbsp;the&nbsp;client?&#160;&lt;/div&gt;<br>
&lt;div&gt;&#160;&lt;/div&gt;<br>
&lt;div&gt;Casey&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
