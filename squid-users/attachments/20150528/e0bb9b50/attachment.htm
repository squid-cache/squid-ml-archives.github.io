<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;TRANSITIONAL//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&nbsp;&nbsp;&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;CHARSET=UTF-8&quot;&gt;<br>
&nbsp;&nbsp;&lt;META&nbsp;NAME=&quot;GENERATOR&quot;&nbsp;CONTENT=&quot;GtkHTML/4.6.6&quot;&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
So&nbsp;I&nbsp;took&nbsp;the&nbsp;advice&nbsp;of&nbsp;those&nbsp;here&nbsp;to&nbsp;get&nbsp;explicit&nbsp;working&nbsp;first,&nbsp;so&nbsp;here's&nbsp;my&nbsp;first&nbsp;attempt.&nbsp;&nbsp;My&nbsp;test&nbsp;environment&nbsp;is&nbsp;Ubuntu&nbsp;15.04&nbsp;Server&nbsp;as&nbsp;the&nbsp;squid&nbsp;server&nbsp;with&nbsp;virtualbox&nbsp;running&nbsp;on&nbsp;it&nbsp;with&nbsp;Kali&nbsp;linux&nbsp;as&nbsp;the&nbsp;client.&nbsp;&nbsp;Here's&nbsp;my&nbsp;Squid&nbsp;3.5.4&nbsp;configure&nbsp;line:&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;/configure&nbsp;--prefix=/opt&nbsp;--enable-icap-client&nbsp;--with-openssl&nbsp;--enable-ssl&nbsp;--enable-ssl-crtd&nbsp;--enable-linux-netfilter&nbsp;--enable-follow-x-forwarded-for&nbsp;--with-large-files&nbsp;--sysconfdir=/opt/etc/squid&nbsp;--enable-external-acl-helpers=none&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
Full&nbsp;squid.conf:&lt;BR&gt;<br>
#####################################&lt;BR&gt;<br>
&lt;TT&gt;acl&nbsp;localnet&nbsp;src&nbsp;192.168.1.0/24&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;acl&nbsp;SSL_ports&nbsp;port&nbsp;443&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;80&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;443&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;acl&nbsp;CONNECT&nbsp;method&nbsp;CONNECT&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;http_access&nbsp;allow&nbsp;all&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;sslproxy_cert_error&nbsp;allow&nbsp;all&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;sslproxy_cert_error&nbsp;deny&nbsp;all&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;sslproxy_capath&nbsp;/etc/ssl/certs&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;sslproxy_flags&nbsp;DONT_VERIFY_PEER&nbsp;&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;sslproxy_options&nbsp;ALL&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;sslcrtd_program&nbsp;/opt/libexec/ssl_crtd&nbsp;-s&nbsp;/opt/var/ssl_db&nbsp;-M&nbsp;4MB&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;sslcrtd_children&nbsp;5&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;http_port&nbsp;3129&nbsp;ssl-bump&nbsp;cert=/opt/etc/squid/certs/sslsplit_ca_cert.pem&nbsp;cafile=/opt/etc/squid/certs/sslsplit_ca_cert.pem&nbsp;key=/opt/etc/squid/certs/sslsplit_ca_key.pem&nbsp;&nbsp;generate-host-certificates=on&nbsp;dynamic_cert_mem_cache_size=4MB&nbsp;sslflags=NO_SESSION_REUSE&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;external_acl_type&nbsp;sni&nbsp;ttl=30&nbsp;concurrency=10&nbsp;children-max=20&nbsp;children-startup=5&nbsp;%ssl::&gt;sni&nbsp;/opt/etc/squid/bumphelper.py&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;acl&nbsp;sni_exclusions&nbsp;external&nbsp;sni&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;acl&nbsp;tcp_level&nbsp;at_step&nbsp;SslBump1&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;acl&nbsp;client_hello_peeked&nbsp;at_step&nbsp;SslBump2&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;ssl_bump&nbsp;peek&nbsp;tcp_level&nbsp;all&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;ssl_bump&nbsp;splice&nbsp;client_hello_peeked&nbsp;sni_exclusions&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;ssl_bump&nbsp;bump&nbsp;all&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;logformat&nbsp;mine&nbsp;%&gt;a&nbsp;%[ui&nbsp;%[un&nbsp;[%tl]&nbsp;&quot;%rm&nbsp;%ru&nbsp;HTTP/%rv&quot;&nbsp;%&gt;Hs&nbsp;%&lt;st&nbsp;%Ss:%Sh&nbsp;%ssl::bump_mode&nbsp;%ssl::&gt;sni&nbsp;%ssl::&gt;cert_subject&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;access_log&nbsp;syslog:daemon.info&nbsp;mine&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;refresh_pattern&nbsp;-i&nbsp;(cgi-bin|\?)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;refresh_pattern&nbsp;.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;20%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4320&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;coredump_dir&nbsp;/opt/var&lt;/TT&gt;&lt;BR&gt;<br>
#####################################&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
bumphelper.py:&lt;BR&gt;<br>
#####################################&lt;BR&gt;<br>
&lt;TT&gt;#!/usr/bin/python&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;import&nbsp;sys&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;while&nbsp;True:&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;&nbsp;&nbsp;&nbsp;&nbsp;req&nbsp;=&nbsp;sys.stdin.readline()&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;not&nbsp;req:&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;&nbsp;&nbsp;&nbsp;&nbsp;id,&nbsp;sni&nbsp;=&nbsp;req.split()&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;&nbsp;&nbsp;&nbsp;&nbsp;sys.stderr.write('request&nbsp;%r\n'&nbsp;%&nbsp;req)&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;&nbsp;&nbsp;&nbsp;&nbsp;sys.stderr.flush()&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;sni&nbsp;==&nbsp;'google.com':&nbsp;&nbsp;#&nbsp;bypass&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.stdout.write('{}&nbsp;OK\n'.format(id))&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.stdout.flush()&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;&nbsp;&nbsp;&nbsp;&nbsp;else:&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.stdout.write('{}&nbsp;ERR\n'.format(id))&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.stdout.flush()&lt;/TT&gt;&lt;BR&gt;<br>
#####################################&lt;BR&gt;<br>
&lt;BR&gt;<br>
The&nbsp;tests:&lt;BR&gt;<br>
root@kali:~/test#&nbsp;wget&nbsp;-d&nbsp;&lt;A&nbsp;HREF=&quot;https://www.google.com&quot;&gt;https://www.google.com&lt;/A&gt;&lt;BR&gt;<br>
######################################&lt;BR&gt;<br>
&lt;TT&gt;DEBUG&nbsp;output&nbsp;created&nbsp;by&nbsp;Wget&nbsp;1.13.4&nbsp;on&nbsp;linux-gnu.&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;URI&nbsp;encoding&nbsp;=&nbsp;`UTF-8'&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;URI&nbsp;encoding&nbsp;=&nbsp;`UTF-8'&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;--2015-05-28&nbsp;17:44:31--&nbsp;&nbsp;&lt;A&nbsp;HREF=&quot;https://www.google.com/&quot;&gt;https://www.google.com/&lt;/A&gt;&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;Connecting&nbsp;to&nbsp;192.168.1.6:3129...&nbsp;connected.&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;Created&nbsp;socket&nbsp;4.&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;Releasing&nbsp;0x092c6730&nbsp;(new&nbsp;refcount&nbsp;0).&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;Deleting&nbsp;unused&nbsp;0x092c6730.&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;---request&nbsp;begin---&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;CONNECT&nbsp;&lt;A&nbsp;HREF=&quot;http://www.google.com:443&quot;&gt;www.google.com:443&lt;/A&gt;&nbsp;HTTP/1.1&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;User-Agent:&nbsp;Wget/1.13.4&nbsp;(linux-gnu)&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;---request&nbsp;end---&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;proxy&nbsp;responded&nbsp;with:&nbsp;[HTTP/1.1&nbsp;200&nbsp;Connection&nbsp;established&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;]&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;---request&nbsp;begin---&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;GET&nbsp;/&nbsp;HTTP/1.1&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;User-Agent:&nbsp;Wget/1.13.4&nbsp;(linux-gnu)&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;Accept:&nbsp;*/*&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;Host:&nbsp;&lt;A&nbsp;HREF=&quot;http://www.google.com&quot;&gt;www.google.com&lt;/A&gt;&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;Connection:&nbsp;Close&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;Proxy-Connection:&nbsp;Keep-Alive&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;---request&nbsp;end---&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;Proxy&nbsp;request&nbsp;sent,&nbsp;awaiting&nbsp;response...&nbsp;&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;---response&nbsp;begin---&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;HTTP/1.1&nbsp;503&nbsp;Service&nbsp;Unavailable&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;Server:&nbsp;squid/3.5.4&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;Mime-Version:&nbsp;1.0&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;Date:&nbsp;Thu,&nbsp;28&nbsp;May&nbsp;2015&nbsp;23:44:33&nbsp;GMT&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;Content-Type:&nbsp;text/html;charset=utf-8&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;Content-Length:&nbsp;3899&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;X-Squid-Error:&nbsp;ERR_SECURE_CONNECT_FAIL&nbsp;32&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;Vary:&nbsp;Accept-Language&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;Content-Language:&nbsp;en&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;X-Cache:&nbsp;MISS&nbsp;from&nbsp;analysis&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;Via:&nbsp;1.1&nbsp;analysis&nbsp;(squid/3.5.4)&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;Connection:&nbsp;close&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;---response&nbsp;end---&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;503&nbsp;Service&nbsp;Unavailable&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;URI&nbsp;content&nbsp;encoding&nbsp;=&nbsp;`utf-8'&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;2015-05-28&nbsp;17:44:32&nbsp;ERROR&nbsp;503:&nbsp;Service&nbsp;Unavailable.&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;########################################&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
access.log&nbsp;entry&nbsp;for&nbsp;the&nbsp;above&nbsp;wget:&lt;BR&gt;<br>
#####################################&lt;BR&gt;<br>
&lt;TT&gt;May&nbsp;28&nbsp;17:44:33&nbsp;analysis&nbsp;squid:&nbsp;192.168.1.91&nbsp;-&nbsp;-&nbsp;[28/May/2015:17:44:33&nbsp;-0600]&nbsp;&quot;CONNECT&nbsp;&lt;A&nbsp;HREF=&quot;http://www.google.com:443&quot;&gt;www.google.com:443&lt;/A&gt;&nbsp;HTTP/1.1&quot;&nbsp;200&nbsp;0&nbsp;TAG_NONE:HIER_DIRECT&nbsp;peek&nbsp;&lt;A&nbsp;HREF=&quot;http://www.google.com&quot;&gt;www.google.com&lt;/A&gt;&nbsp;-&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;May&nbsp;28&nbsp;17:44:33&nbsp;analysis&nbsp;squid:&nbsp;192.168.1.91&nbsp;-&nbsp;-&nbsp;[28/May/2015:17:44:33&nbsp;-0600]&nbsp;&quot;GET&nbsp;&lt;A&nbsp;HREF=&quot;https://www.google.com/&quot;&gt;https://www.google.com/&lt;/A&gt;&nbsp;HTTP/1.1&quot;&nbsp;503&nbsp;4242&nbsp;TAG_NONE:HIER_NONE&nbsp;-&nbsp;&lt;A&nbsp;HREF=&quot;http://www.google.com&quot;&gt;www.google.com&lt;/A&gt;&nbsp;-&lt;/TT&gt;&lt;BR&gt;<br>
#####################################&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
sudo&nbsp;/opt/sbin/squid&nbsp;-d&nbsp;1&nbsp;-N&nbsp;-f&nbsp;/opt/etc/squid/squid.conf&lt;BR&gt;<br>
######################################&lt;BR&gt;<br>
&lt;TT&gt;2015/05/28&nbsp;17:44:33|&nbsp;Error&nbsp;negotiating&nbsp;SSL&nbsp;on&nbsp;FD&nbsp;14:&nbsp;error:00000000:lib(0):func(0):reason(0)&nbsp;(5/-1/32)&lt;/TT&gt;&lt;BR&gt;<br>
######################################&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
I&nbsp;see&nbsp;the&nbsp;same&nbsp;type&nbsp;of&nbsp;thing&nbsp;for&nbsp;apple.com&nbsp;and&nbsp;yahoo.com.&nbsp;&nbsp;I'm&nbsp;assuming&nbsp;this&nbsp;is&nbsp;HSTS,&nbsp;but&nbsp;I&nbsp;could&nbsp;be&nbsp;wrong.&nbsp;&nbsp;MSN&nbsp;however&nbsp;works&nbsp;fine&nbsp;with&nbsp;the&nbsp;above:&lt;BR&gt;<br>
root@kali:~/test#&nbsp;wget&nbsp;-d&nbsp;&lt;A&nbsp;HREF=&quot;https://www.msn.com&quot;&gt;https://www.msn.com&lt;/A&gt;&lt;BR&gt;<br>
######################################&lt;BR&gt;<br>
&lt;TT&gt;DEBUG&nbsp;output&nbsp;created&nbsp;by&nbsp;Wget&nbsp;1.13.4&nbsp;on&nbsp;linux-gnu.&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;URI&nbsp;encoding&nbsp;=&nbsp;`UTF-8'&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;URI&nbsp;encoding&nbsp;=&nbsp;`UTF-8'&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;--2015-05-28&nbsp;18:24:50--&nbsp;&nbsp;&lt;A&nbsp;HREF=&quot;https://www.msn.com/&quot;&gt;https://www.msn.com/&lt;/A&gt;&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;Connecting&nbsp;to&nbsp;192.168.1.6:3129...&nbsp;connected.&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;Created&nbsp;socket&nbsp;4.&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;Releasing&nbsp;0x0a6493c0&nbsp;(new&nbsp;refcount&nbsp;0).&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;Deleting&nbsp;unused&nbsp;0x0a6493c0.&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;---request&nbsp;begin---&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;CONNECT&nbsp;&lt;A&nbsp;HREF=&quot;http://www.msn.com:443&quot;&gt;www.msn.com:443&lt;/A&gt;&nbsp;HTTP/1.1&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;User-Agent:&nbsp;Wget/1.13.4&nbsp;(linux-gnu)&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;---request&nbsp;end---&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;proxy&nbsp;responded&nbsp;with:&nbsp;[HTTP/1.1&nbsp;200&nbsp;Connection&nbsp;established&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;]&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;---request&nbsp;begin---&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;GET&nbsp;/&nbsp;HTTP/1.1&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;User-Agent:&nbsp;Wget/1.13.4&nbsp;(linux-gnu)&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;Accept:&nbsp;*/*&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;Host:&nbsp;&lt;A&nbsp;HREF=&quot;http://www.msn.com&quot;&gt;www.msn.com&lt;/A&gt;&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;Connection:&nbsp;Close&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;Proxy-Connection:&nbsp;Keep-Alive&lt;/TT&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;TT&gt;---request&nbsp;end---&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;Proxy&nbsp;request&nbsp;sent,&nbsp;awaiting&nbsp;response...&nbsp;&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;---response&nbsp;begin---&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;HTTP/1.1&nbsp;200&nbsp;OK&lt;/TT&gt;&lt;BR&gt;<br>
######################################&lt;BR&gt;<br>
&lt;TT&gt;May&nbsp;28&nbsp;18:24:51&nbsp;analysis&nbsp;squid:&nbsp;192.168.1.91&nbsp;-&nbsp;-&nbsp;[28/May/2015:18:24:51&nbsp;-0600]&nbsp;&quot;CONNECT&nbsp;&lt;A&nbsp;HREF=&quot;http://www.msn.com:443&quot;&gt;www.msn.com:443&lt;/A&gt;&nbsp;HTTP/1.1&quot;&nbsp;200&nbsp;0&nbsp;TAG_NONE:HIER_DIRECT&nbsp;peek&nbsp;&lt;A&nbsp;HREF=&quot;http://www.msn.com&quot;&gt;www.msn.com&lt;/A&gt;&nbsp;-&lt;/TT&gt;&lt;BR&gt;<br>
&lt;TT&gt;May&nbsp;28&nbsp;18:24:52&nbsp;analysis&nbsp;squid:&nbsp;192.168.1.91&nbsp;-&nbsp;-&nbsp;[28/May/2015:18:24:52&nbsp;-0600]&nbsp;&quot;GET&nbsp;&lt;A&nbsp;HREF=&quot;https://www.msn.com/&quot;&gt;https://www.msn.com/&lt;/A&gt;&nbsp;HTTP/1.1&quot;&nbsp;200&nbsp;38613&nbsp;TCP_MISS:HIER_DIRECT&nbsp;bump&nbsp;&lt;A&nbsp;HREF=&quot;http://www.msn.com&quot;&gt;www.msn.com&lt;/A&gt;&nbsp;-&lt;/TT&gt;&lt;BR&gt;<br>
######################################&lt;BR&gt;<br>
&lt;BR&gt;<br>
I&nbsp;found&nbsp;that&nbsp;adding&nbsp;&lt;TT&gt;%ssl::bump_mode&nbsp;&lt;/TT&gt;to&nbsp;logging&nbsp;sure&nbsp;helped&nbsp;out&nbsp;with&nbsp;where&nbsp;I&nbsp;was&nbsp;at&nbsp;in&nbsp;the&nbsp;steps.&nbsp;&nbsp;I&nbsp;also&nbsp;tried&nbsp;the&nbsp;new&nbsp;acl&nbsp;ssl::server_name&nbsp;instead&nbsp;of&nbsp;using&nbsp;the&nbsp;external&nbsp;helper,&nbsp;but&nbsp;I&nbsp;got&nbsp;the&nbsp;same&nbsp;results&nbsp;with&nbsp;google,&nbsp;yahoo,&nbsp;and&nbsp;apple.&nbsp;&nbsp;Even&nbsp;setting&nbsp;ssl_bump&nbsp;splice&nbsp;all&nbsp;didn't&nbsp;work&nbsp;well...it&nbsp;appears&nbsp;that&nbsp;yahoo,&nbsp;google,&nbsp;and&nbsp;apple&nbsp;are&nbsp;peek&nbsp;resistant.&nbsp;&nbsp;I'll&nbsp;keep&nbsp;digging.&nbsp;&nbsp;Thank&nbsp;you.&lt;BR&gt;<br>
&lt;BR&gt;<br>
James<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;<br>

</tt>
