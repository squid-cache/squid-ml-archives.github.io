<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;TRANSITIONAL//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&nbsp;&nbsp;&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;CHARSET=UTF-8&quot;&gt;<br>
&nbsp;&nbsp;&lt;META&nbsp;NAME=&quot;GENERATOR&quot;&nbsp;CONTENT=&quot;GtkHTML/4.6.6&quot;&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
On&nbsp;Mon,&nbsp;2015-06-01&nbsp;at&nbsp;12:12&nbsp;+1000,&nbsp;Nathan&nbsp;Hoad&nbsp;wrote:<br>
&lt;BLOCKQUOTE&nbsp;TYPE=CITE&gt;<br>
&lt;PRE&gt;<br>
Hello,<br>
<br>
Here&nbsp;are&nbsp;some&nbsp;excerpts&nbsp;of&nbsp;what&nbsp;I've&nbsp;used,&nbsp;and&nbsp;an&nbsp;example&nbsp;Python&nbsp;helper:<br>
<br>
https_port&nbsp;60099&nbsp;intercept&nbsp;ssl-bump&nbsp;tcpkeepalive<br>
cert=/path/to/cert.pem&nbsp;key=/path/to/key.pem&nbsp;options=NO_SSLv2,NO_SSLv3<br>
generate-host-certificates=on<br>
<br>
external_acl_type&nbsp;sni&nbsp;ttl=30&nbsp;concurrency=X&nbsp;children-max=Y<br>
children-startup=Z&nbsp;%ssl::&gt;sni&nbsp;/path/to/your/helper<br>
<br>
acl&nbsp;sni_exclusions&nbsp;external&nbsp;sni<br>
acl&nbsp;tcp_level&nbsp;at_step&nbsp;SslBump1<br>
acl&nbsp;client_hello_peeked&nbsp;at_step&nbsp;SslBump2<br>
<br>
ssl_bump&nbsp;peek&nbsp;tcp_level&nbsp;all<br>
ssl_bump&nbsp;splice&nbsp;client_hello_peeked&nbsp;sni_exclusions<br>
ssl_bump&nbsp;bump&nbsp;all<br>
<br>
Helper:<br>
<br>
import&nbsp;sys<br>
<br>
line&nbsp;=&nbsp;sys.stdin.read()<br>
<br>
#&nbsp;run&nbsp;loop&nbsp;until&nbsp;an&nbsp;empty&nbsp;read,&nbsp;which&nbsp;indicates&nbsp;the&nbsp;process&nbsp;should&nbsp;shut&nbsp;down.<br>
while&nbsp;line:<br>
&nbsp;&nbsp;&nbsp;&nbsp;concurrency_id,&nbsp;sni&nbsp;=&nbsp;line.split()<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;sni&nbsp;==&nbsp;'wellsfargo.com':<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.stdout.write('%s&nbsp;OK\n'&nbsp;%&nbsp;concurrency_id)<br>
&nbsp;&nbsp;&nbsp;&nbsp;else:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.stdout.write('%s&nbsp;ERR\n'&nbsp;%&nbsp;concurrency_id)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;line&nbsp;=&nbsp;sys.stdin.read()<br>
<br>
Hope&nbsp;that&nbsp;helps,<br>
<br>
Nathan.<br>
<br>
On&nbsp;30&nbsp;May&nbsp;2015&nbsp;at&nbsp;01:14,&nbsp;James&nbsp;Lay&nbsp;&lt;&lt;A&nbsp;HREF=&quot;mailto:jlay@slave-tothe-box.net&quot;&gt;jlay@slave-tothe-box.net&lt;/A&gt;&gt;&nbsp;wrote:<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;On&nbsp;2015-05-29&nbsp;08:57&nbsp;AM,&nbsp;Nathan&nbsp;Hoad&nbsp;wrote:&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&nbsp;Yes,&nbsp;I&nbsp;have&nbsp;it&nbsp;working&nbsp;on&nbsp;about&nbsp;a&nbsp;dozen&nbsp;deployments&nbsp;so&nbsp;far,&nbsp;using&nbsp;an&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&nbsp;external&nbsp;ACL&nbsp;to&nbsp;make&nbsp;bumping&nbsp;decisions&nbsp;based&nbsp;on&nbsp;the&nbsp;SNI&nbsp;server&nbsp;name&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&nbsp;and&nbsp;a&nbsp;few&nbsp;other&nbsp;things.&nbsp;No&nbsp;complaints&nbsp;from&nbsp;me,&nbsp;it&nbsp;Just&nbsp;Works.&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&nbsp;On&nbsp;29/05/2015&nbsp;5:50&nbsp;pm,&nbsp;&quot;sp_&quot;&nbsp;&lt;&lt;A&nbsp;HREF=&quot;mailto:apani@yandex.ru&quot;&gt;apani@yandex.ru&lt;/A&gt;&gt;&nbsp;wrote:&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&gt;&nbsp;Hello,&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&gt;&nbsp;does&nbsp;anyone&nbsp;have&nbsp;the&nbsp;working&nbsp;squid&nbsp;3.5&nbsp;with&nbsp;intercept&nbsp;+&nbsp;https?&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&gt;&nbsp;I've&nbsp;googled&nbsp;a&nbsp;lot,&nbsp;but&nbsp;seems&nbsp;there&nbsp;is&nbsp;no&nbsp;any&nbsp;positive&nbsp;experience&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&gt;&nbsp;with&nbsp;it.&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&gt;&nbsp;--&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&gt;&nbsp;View&nbsp;this&nbsp;message&nbsp;in&nbsp;context:&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&nbsp;&lt;A&nbsp;HREF=&quot;http://squid-web-proxy-cache.1019090.n4.nabble.com/ssl-bump-and-SNI-tp4670207p4671432.html&quot;&gt;http://squid-web-proxy-cache.1019090.n4.nabble.com/ssl-bump-and-SNI-tp4670207p4671432.html&lt;/A&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&gt;&nbsp;[1]&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&gt;&nbsp;Sent&nbsp;from&nbsp;the&nbsp;Squid&nbsp;-&nbsp;Users&nbsp;mailing&nbsp;list&nbsp;archive&nbsp;at&nbsp;Nabble.com.&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&gt;&nbsp;_______________________________________________&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&gt;&nbsp;squid-users&nbsp;mailing&nbsp;list&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&gt;&nbsp;&lt;A&nbsp;HREF=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/A&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&gt;&nbsp;&lt;A&nbsp;HREF=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/A&gt;&nbsp;[2]&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&nbsp;Links:&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&nbsp;------&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&nbsp;[1]&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&nbsp;&lt;A&nbsp;HREF=&quot;http://squid-web-proxy-cache.1019090.n4.nabble.com/ssl-bump-and-SNI-tp4670207p4671432.html&quot;&gt;http://squid-web-proxy-cache.1019090.n4.nabble.com/ssl-bump-and-SNI-tp4670207p4671432.html&lt;/A&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&nbsp;[2]&nbsp;&lt;A&nbsp;HREF=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/A&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&nbsp;_______________________________________________&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&nbsp;squid-users&nbsp;mailing&nbsp;list&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&nbsp;&lt;A&nbsp;HREF=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/A&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&gt;&nbsp;&lt;A&nbsp;HREF=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/A&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;Nathan,&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;Care&nbsp;to&nbsp;post&nbsp;your&nbsp;config&nbsp;and&nbsp;external&nbsp;helper?&nbsp;&nbsp;I&nbsp;know&nbsp;I'd&nbsp;love&nbsp;to&nbsp;see&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;concrete&nbsp;examples.&nbsp;&nbsp;Thank&nbsp;you.&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;James&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;_______________________________________________&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;squid-users&nbsp;mailing&nbsp;list&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;&lt;A&nbsp;HREF=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/A&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;&lt;A&nbsp;HREF=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/A&gt;&lt;/FONT&gt;<br>
&lt;/PRE&gt;<br>
&lt;/BLOCKQUOTE&gt;<br>
&lt;BR&gt;<br>
Thank&nbsp;you&nbsp;Nathan.&lt;BR&gt;<br>
&lt;BR&gt;<br>
James<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;<br>

</tt>
