<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;&lt;style&gt;&nbsp;body&nbsp;{&nbsp;&nbsp;font-family:&nbsp;&quot;Calibri&quot;,&quot;Slate&nbsp;Pro&quot;,&quot;sans-serif&quot;;&nbsp;color:#262626&nbsp;}&lt;/style&gt;&nbsp;&lt;/head&gt;&nbsp;&lt;body&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;sans-serif;&quot;&gt;Hi,&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;sans-serif;&quot;&gt;I&nbsp;am&nbsp;using&nbsp;squid&nbsp;on&nbsp;Openwrt(chaos&nbsp;calmer)&nbsp;and&nbsp;want&nbsp;to&nbsp;redirect&nbsp;all&nbsp;requests&nbsp;for&nbsp;port&nbsp;80&nbsp;to&nbsp;3128&nbsp;port&nbsp;of&nbsp;squid&nbsp;&nbsp;so&nbsp;that&nbsp;i&nbsp;can&nbsp;filter&nbsp;the&nbsp;traffic&nbsp;there&nbsp;on&nbsp;squid&nbsp;box.&nbsp;I&nbsp;am&nbsp;using&nbsp;wpad&nbsp;for&nbsp;auto&nbsp;proxy&nbsp;and&nbsp;want&nbsp;non-proxy&nbsp;user's&nbsp;traffic&nbsp;for&nbsp;port&nbsp;80&nbsp;to&nbsp;go&nbsp;to&nbsp;squid&nbsp;socket&nbsp;which&nbsp;is&nbsp;in&nbsp;my&nbsp;case&nbsp;192.168.1.1:3128&lt;/div&gt;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;sans-serif;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;sans-serif;&quot;&gt;I&nbsp;have&nbsp;included&nbsp;&lt;/div&gt;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;sans-serif;&quot;&gt;&quot;http_port&nbsp;3128&nbsp;intercept&quot;&nbsp;in&nbsp;squid.conf&nbsp;&lt;/div&gt;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;sans-serif;&quot;&gt;and&nbsp;also&nbsp;made&nbsp;rule&nbsp;in&nbsp;firewall&lt;/div&gt;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;sans-serif;&quot;&gt;config&nbsp;redirect&lt;/div&gt;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;sans-serif;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;option&nbsp;src&nbsp;'lan'&lt;/div&gt;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;sans-serif;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;option&nbsp;src_dport&nbsp;'80'&lt;/div&gt;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;sans-serif;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;option&nbsp;src_ip&nbsp;'!192.168.1.1'&lt;/div&gt;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;sans-serif;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;option&nbsp;dest&nbsp;'wan'&lt;/div&gt;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;sans-serif;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;option&nbsp;dest_port&nbsp;'3128'&lt;/div&gt;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;sans-serif;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;option&nbsp;dest_ip&nbsp;'192.168.1.1'&lt;/div&gt;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;sans-serif;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;option&nbsp;proto&nbsp;'tcp'&lt;/div&gt;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;sans-serif;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;option&nbsp;target&nbsp;'DNAT'&nbsp;&lt;/div&gt;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;sans-serif;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;sans-serif;&quot;&gt;Using&nbsp;the&nbsp;above&nbsp;configuration&nbsp;i&nbsp;am&nbsp;able&nbsp;to&nbsp;full&nbsp;fill&nbsp;my&nbsp;purpose&nbsp;but&nbsp;if&nbsp;do&nbsp;so&nbsp;then&nbsp;users&nbsp;with&nbsp;auto&nbsp;proxy&nbsp;in&nbsp;their&nbsp;browers&nbsp;â€Žcan't&nbsp;access&nbsp;internet&nbsp;at&nbsp;all&nbsp;while&nbsp;in&nbsp;access.log&nbsp;it&nbsp;shows&nbsp;everything&nbsp;perfect.&lt;/div&gt;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;sans-serif;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;sans-serif;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;sans-serif;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;sans-serif;&quot;&gt;Thanks&nbsp;in&nbsp;advance&lt;/div&gt;&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;sans-serif;&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&lt;div&gt;Regards&nbsp;&nbsp;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Yashvinder&nbsp;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Sent&nbsp;from&nbsp;my&nbsp;BlackBerry&nbsp;10&nbsp;smartphone.&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;<br>
<br>

</tt>
