<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;I&nbsp;am&nbsp;currently&nbsp;using&nbsp;Squid&nbsp;3.1&nbsp;that&nbsp;comes&nbsp;packages&nbsp;in&nbsp;RHEL&nbsp;6. &nbsp;I&nbsp;have&nbsp;this&nbsp;line&nbsp;in&nbsp;my&nbsp;config:&lt;/div&gt;&lt;div&gt; &nbsp;http_port&nbsp;80&nbsp;intercept&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;a&nbsp;split&nbsp;horizon&nbsp;dns. &nbsp;This&nbsp;means&nbsp;if&nbsp;you&nbsp;lookup&nbsp;any&nbsp;address&nbsp;for&nbsp;my&nbsp;domain&nbsp;from&nbsp;the&nbsp;internet&nbsp;you&nbsp;get&nbsp;the&nbsp;address&nbsp;of&nbsp;the&nbsp;squid&nbsp;proxy&nbsp;server. &nbsp;However&nbsp;if&nbsp;you&nbsp;lookup&nbsp;the&nbsp;same&nbsp;name&nbsp;from&nbsp;my&nbsp;proxy&nbsp;server&nbsp;you&nbsp;get&nbsp;an&nbsp;internal&nbsp;RFC1918&nbsp;IP&nbsp;address&nbsp;for&nbsp;the&nbsp;specific&nbsp;name.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Using&nbsp;squid&nbsp;3.1&nbsp;this&nbsp;works&nbsp;great. &nbsp;A&nbsp;user&nbsp;tries&nbsp;to&nbsp;connect&nbsp;to&nbsp;a&nbsp;URL&nbsp;and&nbsp;by&nbsp;DNS&nbsp;resolution&nbsp;is&nbsp;sent&nbsp;to&nbsp;the&nbsp;proxy&nbsp;server,&nbsp;the&nbsp;proxy&nbsp;server&nbsp;then&nbsp;does&nbsp;a&nbsp;DNS&nbsp;lookup&nbsp;of&nbsp;the&nbsp;name&nbsp;in&nbsp;the&nbsp;URL&nbsp;and&nbsp;gets&nbsp;the&nbsp;actual&nbsp;address&nbsp;and&nbsp;sends&nbsp;the&nbsp;request&nbsp;to&nbsp;the&nbsp;correct&nbsp;place.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;When&nbsp;I&nbsp;try&nbsp;and&nbsp;upgrade&nbsp;to&nbsp;anything&nbsp;beyond&nbsp;3.2&nbsp;this&nbsp;breaks. &nbsp;I&nbsp;am&nbsp;finding&nbsp;references&nbsp;that&nbsp;intercept&nbsp;as&nbsp;of&nbsp;Squid&nbsp;3.2&nbsp;NAT&nbsp;is&nbsp;required.&nbsp;Reference&nbsp;from&nbsp;an&nbsp;email&nbsp;post&nbsp;in&nbsp;2013:&lt;/div&gt;&lt;blockquote&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;40px;border:none;padding:0px&quot;&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13.4399995803833px&quot;&gt;In&nbsp;Squid&nbsp;since&nbsp;3.2&nbsp;if &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13.4399995803833px&quot;&gt;the&nbsp;original&nbsp;TCP&nbsp;details&nbsp;are&nbsp;not&nbsp;found&nbsp;in&nbsp;the&nbsp;NAT&nbsp;records&nbsp;some &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13.4399995803833px&quot;&gt;restrictions&nbsp;are&nbsp;placed&nbsp;on&nbsp;what&nbsp;happens&nbsp;with&nbsp;the&nbsp;request&nbsp;and&nbsp;response.&lt;/span&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;question&nbsp;is,&nbsp;is&nbsp;there&nbsp;anyway&nbsp;back&nbsp;to&nbsp;the&nbsp;old&nbsp;behavior? &nbsp;What&nbsp;are&nbsp;the&nbsp;restrictions&nbsp;mentioned?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;You&nbsp;may&nbsp;ask&nbsp;why&nbsp;I&nbsp;am&nbsp;not&nbsp;using&nbsp;the&nbsp;accel&nbsp;mode&nbsp;as&nbsp;this&nbsp;is&nbsp;quite&nbsp;obviously&nbsp;a&nbsp;reverse&nbsp;proxy. &nbsp;The&nbsp;reason&nbsp;is&nbsp;I&nbsp;could&nbsp;not&nbsp;get&nbsp;accel&nbsp;to&nbsp;work&nbsp;with&nbsp;the&nbsp;RTSP&nbsp;server&nbsp;we&nbsp;are&nbsp;using. &nbsp;I&nbsp;suspect&nbsp;because&nbsp;the&nbsp;Content-length&nbsp;returned&nbsp;by&nbsp;the&nbsp;RTSP&nbsp;server&nbsp;is&nbsp;invalid&nbsp;as&nbsp;it&nbsp;is&nbsp;unknown&nbsp;since&nbsp;it&nbsp;is&nbsp;streaming&nbsp;video&nbsp;and&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;content&nbsp;is&nbsp;not&nbsp;known&nbsp;until&nbsp;a&nbsp;user&nbsp;stops&nbsp;the&nbsp;playback.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;When&nbsp;I&nbsp;configure&nbsp;the&nbsp;proxy&nbsp;using&nbsp;accel&nbsp;I&nbsp;can&nbsp;get&nbsp;normal&nbsp;text&nbsp;pages&nbsp;back&nbsp;as&nbsp;expected&nbsp;but&nbsp;the&nbsp;video&nbsp;fails&nbsp;with TCP_MISS_ABORTED&nbsp;this&nbsp;happens&nbsp;on&nbsp;all&nbsp;version&nbsp;of&nbsp;squid.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;reason&nbsp;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;upgrade&nbsp;Squid&nbsp;is&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;do&nbsp;all&nbsp;of&nbsp;this&nbsp;using&nbsp;HTTPS.&lt;/div&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Jeff&nbsp;Scarborough &lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/div&gt;<br>

</tt>
