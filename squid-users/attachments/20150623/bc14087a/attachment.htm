<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;TRANSITIONAL//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&nbsp;&nbsp;&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;CHARSET=UTF-8&quot;&gt;<br>
&nbsp;&nbsp;&lt;META&nbsp;NAME=&quot;GENERATOR&quot;&nbsp;CONTENT=&quot;GtkHTML/4.6.6&quot;&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
On&nbsp;Tue,&nbsp;2015-06-23&nbsp;at&nbsp;09:11&nbsp;+0200,&nbsp;Klavs&nbsp;Klavsen&nbsp;wrote:<br>
&lt;BLOCKQUOTE&nbsp;TYPE=CITE&gt;<br>
&lt;PRE&gt;<br>
Hi&nbsp;James,<br>
<br>
Did&nbsp;you&nbsp;ever&nbsp;find&nbsp;an&nbsp;answer&nbsp;for&nbsp;this?<br>
<br>
James&nbsp;Lay&nbsp;wrote&nbsp;on&nbsp;06/11/2015&nbsp;02:16&nbsp;AM:<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;All,&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;&nbsp;From&nbsp;the&nbsp;docs&nbsp;at:&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;&lt;A&nbsp;HREF=&quot;http://wiki.squid-cache.org/Features/SslPeekAndSplice&quot;&gt;http://wiki.squid-cache.org/Features/SslPeekAndSplice&lt;/A&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;*peek*&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;step1,&nbsp;step2&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Receive&nbsp;SNI&nbsp;and&nbsp;client&nbsp;certificate&nbsp;(step1),&nbsp;or&nbsp;server&nbsp;certificate&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;(step2)&nbsp;while&nbsp;preserving&nbsp;the&nbsp;possibility&nbsp;of&nbsp;splicing&nbsp;the&nbsp;connection.&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;Peeking&nbsp;at&nbsp;the&nbsp;server&nbsp;certificate&nbsp;usually&nbsp;precludes&nbsp;future&nbsp;bumping&nbsp;of&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;the&nbsp;connection&nbsp;(see&nbsp;Limitations).&nbsp;This&nbsp;action&nbsp;is&nbsp;the&nbsp;focus&nbsp;of&nbsp;this&nbsp;project.&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;*stare*&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;step1,&nbsp;step2&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Receive&nbsp;SNI&nbsp;and&nbsp;client&nbsp;certificate&nbsp;(step1),&nbsp;or&nbsp;server&nbsp;certificate&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;(step2)&nbsp;while&nbsp;preserving&nbsp;the&nbsp;possibility&nbsp;of&nbsp;bumping&nbsp;the&nbsp;connection.&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;Staring&nbsp;at&nbsp;the&nbsp;server&nbsp;certificate&nbsp;usually&nbsp;precludes&nbsp;future&nbsp;splicing&nbsp;of&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;the&nbsp;connection.&nbsp;Currently,&nbsp;we&nbsp;are&nbsp;not&nbsp;aware&nbsp;of&nbsp;any&nbsp;work&nbsp;being&nbsp;done&nbsp;to&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;support&nbsp;this&nbsp;action.&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;I&nbsp;see&nbsp;a&nbsp;lot&nbsp;of:&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;ssl_bump&nbsp;peek&nbsp;all&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;Does&nbsp;this&nbsp;perform&nbsp;both&nbsp;step1&nbsp;with&nbsp;SNI&nbsp;and&nbsp;client&nbsp;cert,&nbsp;AND&nbsp;server&nbsp;cert?&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;Thank&nbsp;you.&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;James&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;_______________________________________________&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;squid-users&nbsp;mailing&nbsp;list&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;&lt;A&nbsp;HREF=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/A&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&nbsp;&lt;A&nbsp;HREF=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/A&gt;&lt;/FONT&gt;<br>
&lt;FONT&nbsp;COLOR=&quot;#737373&quot;&gt;&gt;&lt;/FONT&gt;<br>
<br>
<br>
&lt;/PRE&gt;<br>
&lt;/BLOCKQUOTE&gt;<br>
&lt;BR&gt;<br>
Hi&nbsp;Klavs,&lt;BR&gt;<br>
&lt;BR&gt;<br>
I&nbsp;did&nbsp;not.&nbsp;&nbsp;I&nbsp;can&nbsp;tell&nbsp;you&nbsp;in&nbsp;my&nbsp;testing&nbsp;that:&lt;BR&gt;<br>
&lt;BR&gt;<br>
ssl_bump&nbsp;peek&nbsp;step1&nbsp;all&lt;BR&gt;<br>
ssl_bump&nbsp;peek&nbsp;step2&nbsp;all&lt;BR&gt;<br>
&lt;BR&gt;<br>
versus&lt;BR&gt;<br>
&lt;BR&gt;<br>
ssl_bump&nbsp;peek&nbsp;all&lt;BR&gt;<br>
&lt;BR&gt;<br>
Did&nbsp;not&nbsp;give&nbsp;me&nbsp;the&nbsp;same&nbsp;results,&nbsp;so&nbsp;I'm&nbsp;going&nbsp;to&nbsp;assume&nbsp;a&nbsp;single&nbsp;statement&nbsp;only&nbsp;performs&nbsp;SNI&nbsp;lookup,&nbsp;but&nbsp;maybe&nbsp;someone&nbsp;else&nbsp;on&nbsp;the&nbsp;list&nbsp;has&nbsp;a&nbsp;better&nbsp;answer.&lt;BR&gt;<br>
&lt;BR&gt;<br>
James<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;<br>

</tt>
