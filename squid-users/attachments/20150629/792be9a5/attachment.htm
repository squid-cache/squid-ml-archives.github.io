<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;style&gt;&lt;!--<br>
.hmmessage&nbsp;P<br>
{<br>
margin:0px;<br>
padding:0px<br>
}<br>
body.hmmessage<br>
{<br>
font-size:&nbsp;12pt;<br>
font-family:Calibri<br>
}<br>
--&gt;&lt;/style&gt;&lt;/head&gt;<br>
&lt;body&nbsp;class='hmmessage'&gt;&lt;div&nbsp;dir='ltr'&gt;So&nbsp;far&nbsp;as&nbsp;I&nbsp;know,&nbsp;hen&nbsp;sslbump&nbsp;is&nbsp;enabled&nbsp;for&nbsp;a&nbsp;port,&nbsp;for&nbsp;each&nbsp;dns&nbsp;name,&nbsp;squid&nbsp;save&nbsp;a&nbsp;cert&nbsp;generated&nbsp;according&nbsp;to&nbsp;dns&nbsp;name&nbsp;and&nbsp;signing&nbsp;key&nbsp;(from&nbsp;http_port&nbsp;configuration).&nbsp;So&nbsp;the&nbsp;next&nbsp;time,&nbsp;the&nbsp;generated&nbsp;cert&nbsp;can&nbsp;be&nbsp;fetched&nbsp;if&nbsp;the&nbsp;same&nbsp;dns&nbsp;host&nbsp;and&nbsp;configured&nbsp;signing&nbsp;key.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Now&nbsp;&nbsp;have&nbsp;a&nbsp;question&nbsp;on&nbsp;this:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;http_port&lt;/span&gt;&lt;span&nbsp;class=&quot;s2&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;s3&quot;&gt;10045&lt;/span&gt;&lt;span&nbsp;class=&quot;s2&quot;&gt;&nbsp;ssl-bump&nbsp;generate-host-certificates=&lt;/span&gt;&lt;span&nbsp;class=&quot;s3&quot;&gt;on&lt;/span&gt;&lt;span&nbsp;class=&quot;s2&quot;&gt;&nbsp;dynamic_cert_mem_cache_size=4MB&nbsp;key=/opt/bg/deploy/squid/etc/mydlp/ssl/key_10045.pem&nbsp;cert=/opt/bg/deploy/squid/etc/mydlp/ssl/cert_10045.pem&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s1&quot;&gt;http_port&lt;/span&gt;&lt;span&nbsp;class=&quot;s2&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;s3&quot;&gt;10046&lt;/span&gt;&lt;span&nbsp;class=&quot;s2&quot;&gt;&nbsp;ssl-bump&nbsp;generate-host-certificates=&lt;/span&gt;&lt;span&nbsp;class=&quot;s3&quot;&gt;on&lt;/span&gt;&lt;span&nbsp;class=&quot;s2&quot;&gt;&nbsp;dynamic_cert_mem_cache_size=4MB&nbsp;key=/opt/bg/deploy/squid/etc/mydlp/ssl/key_10046.pem&nbsp;cert=/opt/bg/deploy/squid/etc/mydlp/ssl/cert_10046.pem&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;span&nbsp;class=&quot;s2&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;I&nbsp;have&nbsp;two&nbsp;ports&nbsp;configured&nbsp;with&nbsp;SSLBUMP.&nbsp;Each&nbsp;port&nbsp;has&nbsp;its&nbsp;own&nbsp;CA&nbsp;signing&nbsp;key.&nbsp;The&nbsp;desired&nbsp;behavior&nbsp;is&nbsp;that,&nbsp;for&nbsp;the&nbsp;hostname&nbsp;www.foo.com,&nbsp;the&nbsp;certificate&nbsp;generated&nbsp;for&nbsp;the&nbsp;port&nbsp;should&nbsp;use&nbsp;key_10045,&nbsp;and&nbsp;the&nbsp;certificate&nbsp;generated&nbsp;for&nbsp;the&nbsp;port&nbsp;should&nbsp;use&nbsp;key_10046.&nbsp;It&nbsp;seems&nbsp;OK.&nbsp;&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;But,&nbsp;if&nbsp;we&nbsp;look&nbsp;at&nbsp;the&nbsp;ssl_db,&nbsp;only&nbsp;the&nbsp;last&nbsp;generated&nbsp;certificate&nbsp;is&nbsp;cached&nbsp;for&nbsp;www.foo.com.&nbsp;Is&nbsp;it&nbsp;possible&nbsp;to&nbsp;cache&nbsp;the&nbsp;generated&nbsp;certificates&nbsp;by&nbsp;the&nbsp;host&nbsp;and&nbsp;signing&nbsp;key?&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;p1&quot;&gt;Alex&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;/body&gt;<br>
&lt;/html&gt;
</tt>
