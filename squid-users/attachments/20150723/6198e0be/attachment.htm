<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Befor&nbsp;all,&nbsp;thanks&nbsp;so&nbsp;so&nbsp;much&nbsp;for&nbsp;the&nbsp;answears!!!&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&#39;s&nbsp;exist,&nbsp;I&#39;m&nbsp;sure.&lt;br&gt;&lt;/div&gt;This&nbsp;is&nbsp;my&nbsp;chroot&nbsp;structre:&lt;br&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;/&nbsp;(linux&nbsp;root)&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;/etc&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;    &nbsp;squid-3.5.6/&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                     &nbsp;bin/&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                          &nbsp;purge&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                          &nbsp;squidclient&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                     &nbsp;cache/&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                          &nbsp;(squid&nbsp;cache&nbsp;dirs&nbsp;generated&nbsp;by&nbsp;squid&nbsp;-z)&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                     &nbsp;etc/&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                           &nbsp;cachemgr.conf&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                           &nbsp;errorpage.css&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                           &nbsp;group&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                           &nbsp;gshadow&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                           &nbsp;hosts&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                           &nbsp;localtime&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                           &nbsp;mime.conf&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                           &nbsp;nsswitch.conf&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                           &nbsp;passwd&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                           &nbsp;resolv.conf&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                           &nbsp;shadow&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                           &nbsp;squid.conf&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                      &nbsp;lib64/&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                            &nbsp;(a&nbsp;lot&nbsp;of&nbsp;libs&nbsp;here,&nbsp;discovered&nbsp;with&nbsp;ldd&nbsp;command)&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                      &nbsp;libexec/&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                            &nbsp;basic_ncsa_auth&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                            &nbsp;diskd&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                            &nbsp;(other&nbsp;default&nbsp;squid&nbsp;libs)&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                      &nbsp;regras/&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                            &nbsp;(my&nbsp;acl&nbsp;files&nbsp;rules)&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                      &nbsp;sbin/&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                            &nbsp;squid&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                      &nbsp;share/&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                              &nbsp;errors/&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                                      &nbsp;(default&nbsp;dir&nbsp;squid&nbsp;errors)&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                              &nbsp;icons/&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                                      &nbsp;(default&nbsp;squid&nbsp;icons&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                              &nbsp;man/&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                                      &nbsp;(default&nbsp;man&nbsp;squid&nbsp;pages)&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                      &nbsp;usr/&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                             &nbsp;lib64/&lt;br&gt;                                      &nbsp;(a&nbsp;lot&nbsp;of&nbsp;libs&nbsp;here,&nbsp;discovered&nbsp;with&nbsp;ldd&nbsp;command)&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                      &nbsp;var/&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                             &nbsp;logs/&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                                      &nbsp;(default&nbsp;squid&nbsp;logs)&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                             &nbsp;run/&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;color:rgb(255,0,0)&quot;&gt;                                   &nbsp;squid.pid&lt;/span&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;did&nbsp;the&nbsp;command:&lt;br&gt;&lt;/div&gt;&lt;div&gt;chroot&nbsp;/etc/squid-3.5.6&nbsp;/libexec/basic_ncsa_auth&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&nbsp;runs,&nbsp;that&#39;s&nbsp;why&nbsp;I&#39;m&nbsp;sure&nbsp;the&nbsp;chroot&nbsp;environment,&nbsp;unless&nbsp;for&nbsp;the&nbsp;ncsa_auth,&nbsp;is&nbsp;correct&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any&nbsp;more&nbsp;suggestions?&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2015-07-23&nbsp;11:42&nbsp;GMT-03:00&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&nbsp;target=&quot;_blank&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&lt;/span&gt;:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&gt;On&nbsp;23/07/2015&nbsp;11:23&nbsp;p.m.,&nbsp;Jorgeley&nbsp;Junior&nbsp;wrote:&lt;br&gt;<br>
&gt;&gt;&nbsp;Hi&nbsp;guys.&lt;br&gt;<br>
&gt;&gt;&nbsp;I&nbsp;have&nbsp;a&nbsp;RedHat&nbsp;6.6&nbsp;+&nbsp;squid&nbsp;3.5.6&nbsp;+&nbsp;basic_ncsa_auth&nbsp;+&nbsp;chroot&nbsp;and&nbsp;is&lt;br&gt;<br>
&gt;&gt;&nbsp;crashing&nbsp;only&nbsp;when&nbsp;I&nbsp;do&nbsp;an&nbsp;authentication.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Here&nbsp;is&nbsp;the&nbsp;main&nbsp;confs:&lt;br&gt;<br>
&gt;&gt;&nbsp;auth_param&nbsp;basic&nbsp;program&nbsp;/libexec/basic_ncsa_auth&nbsp;/regras/usuarios&lt;br&gt;<br>
&gt;&gt;&nbsp;auth_param&nbsp;basic&nbsp;children&nbsp;10&nbsp;startup=0&nbsp;idle=1&lt;br&gt;<br>
&gt;&gt;&nbsp;auth_param&nbsp;basic&nbsp;realm&nbsp;INTERNET-LOGIN&nbsp;NECESSARIO&lt;br&gt;<br>
&gt;&gt;&nbsp;...&nbsp;(other&nbsp;confs)&nbsp;...&lt;br&gt;<br>
&gt;&gt;&nbsp;acl&nbsp;usuarios &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;proxy_auth&nbsp;-i &nbsp; &quot;/etc/squid-3.5.6/regras/usuarios&quot;&lt;br&gt;<br>
&gt;&gt;&nbsp;...&nbsp;(other&nbsp;confs)&nbsp;...&lt;br&gt;<br>
&gt;&gt;&nbsp;chroot&nbsp;/etc/squid-3.5.6&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Here&nbsp;is&nbsp;what&nbsp;I&nbsp;find&nbsp;in&nbsp;the&nbsp;cache.log:&lt;br&gt;<br>
&gt;&gt;&nbsp;2015/07/22&nbsp;18:47:27.866&nbsp;kid1|&nbsp;WARNING:&nbsp;no_suid:&nbsp;setuid(0):&nbsp;(1)&nbsp;Operation&lt;br&gt;<br>
&gt;&gt;&nbsp;not&nbsp;permitted&lt;br&gt;<br>
&gt;&gt;&nbsp;2015/07/22&nbsp;18:48:01.735&nbsp;kid1|&nbsp;ipcCreate:&nbsp;/libexec/basic_ncsa_auth:&nbsp;(2)&nbsp;No&lt;br&gt;<br>
&gt;&gt;&nbsp;such&nbsp;file&nbsp;or&nbsp;directory&lt;br&gt;<br>
&gt;&gt;&nbsp;2015/07/22&nbsp;18:47:27.866&nbsp;kid1|&nbsp;WARNING:&nbsp;basicauthenticator&nbsp;#Hlpr13818&nbsp;exited&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;What&nbsp;is&nbsp;the&nbsp;ipcCreate&nbsp;and&nbsp;why&nbsp;he&nbsp;is&nbsp;not&nbsp;findind&nbsp;the&nbsp;file?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;It&nbsp;is&nbsp;the&nbsp;code&nbsp;that&nbsp;runs&nbsp;the&nbsp;helper.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;&quot;/libexec/basic_ncsa_auth&quot;&nbsp;does&nbsp;not&nbsp;exist&nbsp;as&nbsp;an&nbsp;exectuable&nbsp;binary&lt;br&gt;<br>
inside&nbsp;your&nbsp;chroot.&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;About&nbsp;the&nbsp;libs&nbsp;needed&nbsp;when&nbsp;I&nbsp;do&nbsp;the&nbsp;chroot,&nbsp;I&nbsp;have&nbsp;to&nbsp;copy&nbsp;them&nbsp;to&nbsp;the&lt;br&gt;<br>
&gt;&nbsp;squid&nbsp;folder&nbsp;or&nbsp;I&nbsp;need&nbsp;to&nbsp;create&nbsp;the&nbsp;same&nbsp;structure&nbsp;like&lt;br&gt;<br>
&gt;&nbsp;/squid-3.5.6/libs, &nbsp;/squid-3.5.6/lib64?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;They&nbsp;must&nbsp;match&nbsp;the&nbsp;OS&nbsp;layout&nbsp;where&nbsp;Squid&nbsp;(and&nbsp;everything&nbsp;else&nbsp;that&nbsp;will&lt;br&gt;<br>
run&nbsp;in&nbsp;the&nbsp;chroot)&nbsp;expects&nbsp;to&nbsp;find&nbsp;them.&lt;br&gt;<br>
&lt;br&gt;<br>
Amos&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&gt;&lt;div&nbsp;style=&quot;text-align:left&quot;&gt;&lt;font&nbsp;size=&quot;4&quot;&gt;&lt;b&gt;&lt;u&gt;&lt;br&gt;&lt;/u&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;text-align:left&quot;&gt;&lt;font&nbsp;size=&quot;4&quot;&gt;&lt;b&gt;&lt;u&gt;&lt;img&nbsp;src=&quot;https://lh6.googleusercontent.com/-xODPvbH2piQ/T6RqD0dqXjI/AAAAAAAAAPk/0I8Y3aq0mYM/h120/linuxano+assinatura+e-mail.png&quot;&gt;&lt;br&gt;&lt;/u&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/div&gt;<br>

</tt>
