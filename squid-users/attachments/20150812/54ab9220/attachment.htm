<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;thanks&nbsp;for&nbsp;the&nbsp;quick&nbsp;reply.&nbsp;Actually&nbsp;those&nbsp;lines&nbsp;are&nbsp;no&nbsp;commented&nbsp;out.&nbsp;and&nbsp;ACL&nbsp;name&nbsp;is&nbsp;corrected.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;browser&nbsp;is&nbsp;on&nbsp;the&nbsp;proxy&nbsp;machine(10.0.0.1)&nbsp;who&nbsp;host&nbsp;file&nbsp;points&nbsp;&lt;a&nbsp;href=&quot;http://testsquid.com&quot;&nbsp;target=&quot;_blank&quot;&gt;testsquid.com&lt;/a&gt;&nbsp;to&nbsp;10.0.0.1&nbsp;itself.&lt;br&gt;&lt;br&gt;Squid&nbsp;which&nbsp;is&nbsp;in&nbsp;reverse&nbsp;mode&nbsp;listen&nbsp;to&nbsp;port&nbsp;80&nbsp;in&nbsp;10.0.0.1&nbsp;is&nbsp;grabbing&nbsp;each&nbsp;request.&nbsp;but&nbsp;returning&nbsp;TCP_DENIED/403&nbsp;for&nbsp;&lt;a&nbsp;href=&quot;http://testsquid.com&quot;&nbsp;target=&quot;_blank&quot;&gt;testsquid.com&lt;/a&gt;.&nbsp;Instead&nbsp;of&nbsp;returning&nbsp;the&nbsp;webserver&nbsp;static&nbsp;index&nbsp;file&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;As&nbsp;you&nbsp;told&nbsp;i&nbsp;have&nbsp;one&nbsp;browser&nbsp;machine&nbsp;win7&nbsp;machine.&nbsp;in&nbsp;which&nbsp;i&nbsp;edited&nbsp;host&nbsp;file&nbsp;and&nbsp;set&nbsp;&lt;a&nbsp;href=&quot;http://testsquid.com&quot;&nbsp;target=&quot;_blank&quot;&gt;testsquid.com&lt;/a&gt;&nbsp;to&nbsp;10.0.0.1(proxy&nbsp;machine&nbsp;ip)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;But&nbsp;behaviour&nbsp;remains&nbsp;same.&lt;/div&gt;&lt;div&gt;below&nbsp;is&nbsp;my&nbsp;actual&nbsp;squid&nbsp;config&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;acl&nbsp;PURGE&nbsp;method&nbsp;purge&lt;/div&gt;&lt;div&gt;acl&nbsp;SSL_ports&nbsp;port&nbsp;443&nbsp;445&nbsp;448&nbsp;563&nbsp;1024-65535&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;80&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;21&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;443&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;70&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;210&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;1025-65535&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;280&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;488&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;591&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;777&lt;/div&gt;&lt;div&gt;acl&nbsp;CONNECT&nbsp;method&nbsp;CONNECT&lt;/div&gt;&lt;div&gt;acl&nbsp;local_addresses&nbsp;dst&nbsp;&quot;/usr/local/squid/etc/local_addresses.conf&quot;&lt;/div&gt;&lt;div&gt;acl&nbsp;allowsquid&nbsp;dstdomain&nbsp;&lt;a&nbsp;href=&quot;http://testsquid.com&quot;&gt;testsquid.com&lt;/a&gt;&lt;/div&gt;&lt;div&gt;httpd_suppress_version_string&nbsp;on&lt;/div&gt;&lt;div&gt;cache&nbsp;allow&nbsp;all&lt;/div&gt;&lt;div&gt;cache_effective_user&nbsp;nobody&lt;/div&gt;&lt;div&gt;cache_effective_group&nbsp;nobody&lt;/div&gt;&lt;div&gt;cache_log&nbsp;/usr/local/squid/var/logs/cache.1.100.log&lt;/div&gt;&lt;div&gt;cache_store_log&nbsp;none&lt;/div&gt;&lt;div&gt;half_closed_clients&nbsp;off&lt;/div&gt;&lt;div&gt;hierarchy_stoplist&nbsp;$&nbsp;cgi&nbsp;?&nbsp;&amp;&nbsp;;&nbsp;.asp&nbsp;.shtml&nbsp;localhost&lt;/div&gt;&lt;div&gt;http_access&nbsp;allow&nbsp;manager&nbsp;localhost&lt;/div&gt;&lt;div&gt;http_access&nbsp;allow&nbsp;allowsquid&lt;/div&gt;&lt;div&gt;http_access&nbsp;allow&nbsp;manager&nbsp;cachemgr&lt;/div&gt;&lt;div&gt;http_access&nbsp;deny&nbsp;manager&lt;/div&gt;&lt;div&gt;http_access&nbsp;deny&nbsp;CONNECT&nbsp;!SSL_ports&lt;/div&gt;&lt;div&gt;http_access&nbsp;deny&nbsp;CONNECT&nbsp;local_addresses&lt;/div&gt;&lt;div&gt;http_access&nbsp;allow&nbsp;purge&nbsp;localhost&lt;/div&gt;&lt;div&gt;http_access&nbsp;allow&nbsp;purge&nbsp;cachemgr&lt;/div&gt;&lt;div&gt;http_access&nbsp;deny&nbsp;purge&lt;/div&gt;&lt;div&gt;http_access&nbsp;allow&nbsp;all&lt;/div&gt;&lt;div&gt;http_access&nbsp;allow&nbsp;manager&nbsp;localhost&lt;/div&gt;&lt;div&gt;http_access&nbsp;deny&nbsp;manager&lt;/div&gt;&lt;div&gt;http_access&nbsp;deny&nbsp;!Safe_ports&lt;/div&gt;&lt;div&gt;http_access&nbsp;deny&nbsp;CONNECT&nbsp;!SSL_ports&lt;/div&gt;&lt;div&gt;http_access&nbsp;deny&nbsp;all&lt;/div&gt;&lt;div&gt;http_reply_access&nbsp;allow&nbsp;all&lt;/div&gt;&lt;div&gt;log_icp_queries&nbsp;off&lt;/div&gt;&lt;div&gt;maximum_object_size&nbsp;0&nbsp;KB&lt;/div&gt;&lt;div&gt;maximum_object_size_in_memory&nbsp;0&nbsp;KB&lt;/div&gt;&lt;div&gt;request_header_max_size&nbsp;64&nbsp;KB&lt;/div&gt;&lt;div&gt;reply_header_max_size&nbsp;64&nbsp;KB&lt;/div&gt;&lt;div&gt;strip_query_terms&nbsp;off&lt;/div&gt;&lt;div&gt;uri_whitespace&nbsp;encode&lt;/div&gt;&lt;div&gt;visible_hostname&nbsp;squidproxy&lt;/div&gt;&lt;div&gt;icp_access&nbsp;allow&nbsp;all&lt;/div&gt;&lt;div&gt;http_port&nbsp;&lt;a&nbsp;href=&quot;http://10.0.0.1:80&quot;&gt;10.0.0.1:80&lt;/a&gt;&nbsp;accel&nbsp;defaultsite=&lt;a&nbsp;href=&quot;http://testsquid.com&quot;&gt;testsquid.com&lt;/a&gt;&lt;/div&gt;&lt;div&gt;cache_peer&nbsp;10.0.0.2&nbsp;parent&nbsp;80&nbsp;0&nbsp;no-query&nbsp;originserver&nbsp;name=squidtest&lt;/div&gt;&lt;div&gt;cache_peer_access&nbsp;squidtest&nbsp;allow&nbsp;allowsquid&lt;/div&gt;&lt;div&gt;cache_peer_access&nbsp;squidtest&nbsp;deny&nbsp;all&lt;/div&gt;&lt;div&gt;acl&nbsp;QUERY&nbsp;urlpath_regex&nbsp;cgi-bin&nbsp;\?&lt;/div&gt;&lt;div&gt;cache&nbsp;deny&nbsp;QUERY&lt;/div&gt;&lt;div&gt;refresh_pattern&nbsp;^ftp:&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;1440&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;20%&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&lt;/span&gt;10080&lt;/div&gt;&lt;div&gt;refresh_pattern&nbsp;^gopher:&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;1440&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;0%&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;1440&lt;/div&gt;&lt;div&gt;refresh_pattern&nbsp;.&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;0&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;20%&lt;span&nbsp;class=&quot;Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&lt;/span&gt;4320&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Is&nbsp;there&nbsp;anything&nbsp;faulty&nbsp;in&nbsp;my&nbsp;config?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,Â &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Joseph&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Aug&nbsp;12,&nbsp;2015&nbsp;at&nbsp;6:22&nbsp;PM,&nbsp;Antony&nbsp;Stone&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:Antony.Stone@squid.open.source.it&quot;&nbsp;target=&quot;_blank&quot;&gt;Antony.Stone@squid.open.source.it&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;On&nbsp;Wednesday&nbsp;12&nbsp;August&nbsp;2015&nbsp;at&nbsp;14:38:55,&nbsp;joseph&nbsp;jose&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;Hi,&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;have&nbsp;set&nbsp;up&nbsp;squid&nbsp;in&nbsp;reverse&nbsp;proxy&nbsp;mode&nbsp;to&nbsp;cache&nbsp;an&nbsp;apache&nbsp;webserver&lt;br&gt;<br>
&gt;&nbsp;hosted&nbsp;in&nbsp;linux&nbsp;vm.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;IP&nbsp;of&nbsp;my&nbsp;squid&nbsp;reverse&nbsp;proxy&nbsp;is&nbsp;10.0.0.1&nbsp;and&nbsp;10.0.0.2&nbsp;is&nbsp;the&nbsp;ip&nbsp;of&lt;br&gt;<br>
&gt;&nbsp;webserver&nbsp;which&nbsp;is&nbsp;also&nbsp;a&nbsp;linux&nbsp;vm&lt;br&gt;<br>
&lt;br&gt;<br>
Your&nbsp;squid&nbsp;server&nbsp;has&nbsp;only&nbsp;one&nbsp;interface&nbsp;and&nbsp;IP&nbsp;address?&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;my&nbsp;config&nbsp;is&nbsp;as&nbsp;follows&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;#acl&nbsp;squidallow&nbsp;dstdomain&nbsp;&lt;a&nbsp;href=&quot;http://testsquid.com&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;testsquid.com&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;#&lt;br&gt;<br>
&gt;&nbsp;#&lt;br&gt;<br>
&gt;&nbsp;#http_port&nbsp;&lt;a&nbsp;href=&quot;http://10.0.0.1:80&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;10.0.0.1:80&lt;/a&gt;&nbsp;accel&nbsp;defaultsite=&lt;a&nbsp;href=&quot;http://testsquid.com&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;testsquid.com&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;#&lt;br&gt;<br>
&gt;&nbsp;#&lt;br&gt;<br>
&gt;&nbsp;#cache_peer&nbsp;10.0.0.2&nbsp;parent&nbsp;80&nbsp;0&nbsp;no-query&nbsp;originserver&nbsp;name=squidtest&lt;br&gt;<br>
&gt;&nbsp;#cache_peer_access&nbsp;squidtest&nbsp;allow&nbsp;allowsquid&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;sincerely&nbsp;hope&nbsp;you&nbsp;don&#39;t&nbsp;mean&nbsp;that&nbsp;these&nbsp;directives&nbsp;are&nbsp;all&nbsp;commented&nbsp;out,&lt;br&gt;<br>
thus&nbsp;not&nbsp;having&nbsp;any&nbsp;effect?&lt;br&gt;<br>
&lt;br&gt;<br>
Even&nbsp;if&nbsp;they&#39;re&nbsp;not&nbsp;commented&nbsp;out,&nbsp;do&nbsp;you&nbsp;see&nbsp;the&nbsp;discrepancy&nbsp;between&lt;br&gt;<br>
&quot;squidallow&quot;&nbsp;in&nbsp;the&nbsp;first&nbsp;line&nbsp;and&nbsp;&quot;allowsquid&quot;&nbsp;in&nbsp;the&nbsp;last?&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;In&nbsp;the&nbsp;squid&nbsp;proxy&nbsp;machine&nbsp;i&nbsp;have&nbsp;edited&nbsp;the&nbsp;host&nbsp;file&nbsp;and&nbsp;set&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;http://testsquid.com&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;testsquid.com&lt;/a&gt;&nbsp;10.0.0.1&nbsp;(which&nbsp;is&nbsp;the&nbsp;ip&nbsp;of&nbsp;proxy&nbsp;machine&nbsp;itself),&nbsp;as&nbsp;proxy&lt;br&gt;<br>
&gt;&nbsp;is&nbsp;configured&nbsp;in&nbsp;reverse&nbsp;mode,&nbsp;it&nbsp;is&nbsp;supposed&nbsp;to&nbsp;serve&nbsp;the&nbsp;static&nbsp;page&lt;br&gt;<br>
&gt;&nbsp;from&nbsp;webserver&nbsp;(10.0.0.2).&lt;br&gt;<br>
&lt;br&gt;<br>
What&#39;s&nbsp;more&nbsp;important&nbsp;than&nbsp;/etc/hosts&nbsp;on&nbsp;the&nbsp;squid&nbsp;server&nbsp;is&nbsp;what&nbsp;machine&nbsp;you&lt;br&gt;<br>
are&nbsp;running&nbsp;the&nbsp;browser&nbsp;on,&nbsp;and&nbsp;what&nbsp;does&nbsp;*that*&nbsp;machine&nbsp;resolve&nbsp;&lt;a&nbsp;href=&quot;http://testsquid.com&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;testsquid.com&lt;/a&gt;&lt;br&gt;<br>
to?&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;But&nbsp;when&nbsp;i&nbsp;open&nbsp;browser&nbsp;and&nbsp;search&nbsp;for&nbsp;&lt;a&nbsp;href=&quot;http://testsquid.com&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;testsquid.com&lt;/a&gt;,&nbsp;squid&nbsp;is&nbsp;logging&lt;br&gt;<br>
&gt;&nbsp;request&nbsp;but&nbsp;returning&nbsp;a&nbsp;TCP_DENIED/403&nbsp;status.&lt;br&gt;<br>
&lt;br&gt;<br>
Sounds&nbsp;like&nbsp;the&nbsp;browser&nbsp;is&nbsp;successfully&nbsp;seeing&nbsp;&lt;a&nbsp;href=&quot;http://testsquid.com&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;testsquid.com&lt;/a&gt;&nbsp;as&nbsp;10.0.0.1,&lt;br&gt;<br>
then,&nbsp;however&nbsp;you&nbsp;should&nbsp;be&nbsp;careful&nbsp;about&nbsp;trying&nbsp;to&nbsp;run&nbsp;tests&nbsp;like&nbsp;this&nbsp;on&nbsp;too&lt;br&gt;<br>
few&nbsp;machines&nbsp;-&nbsp;you&nbsp;should&nbsp;have&nbsp;the&nbsp;browser&nbsp;on&nbsp;one&nbsp;machine,&nbsp;squid&nbsp;on&nbsp;a&nbsp;second,&lt;br&gt;<br>
and&nbsp;the&nbsp;web&nbsp;server&nbsp;on&nbsp;a&nbsp;third&nbsp;(no&nbsp;matter&nbsp;whether&nbsp;any&nbsp;of&nbsp;these&nbsp;are&nbsp;real&lt;br&gt;<br>
machines&nbsp;or&nbsp;VMs).&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Regards,&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Antony.&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
--&lt;br&gt;<br>
Users&nbsp;don&#39;t&nbsp;know&nbsp;what&nbsp;they&nbsp;want&nbsp;until&nbsp;they&nbsp;see&nbsp;what&nbsp;they&nbsp;get.&lt;br&gt;<br>
&lt;br&gt;<br>
Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â Please&nbsp;reply&nbsp;to&nbsp;the&nbsp;list;&lt;br&gt;<br>
Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â &nbsp;Â please&nbsp;*don&#39;t*&nbsp;CC&nbsp;me.&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/font&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
