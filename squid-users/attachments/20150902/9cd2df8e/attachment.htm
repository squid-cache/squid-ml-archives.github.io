<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;text=&quot;#000000&quot;&nbsp;bgcolor=&quot;#FFFFFF&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-----BEGIN&nbsp;PGP&nbsp;SIGNED&nbsp;MESSAGE-----&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Hash:&nbsp;SHA256&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp; &lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;bad&nbsp;idea&nbsp;-&nbsp;to&nbsp;cache&nbsp;the&nbsp;same&nbsp;gifs&nbsp;with&nbsp;unique&nbsp;parameters.<br>
&nbsp;&nbsp;&nbsp;&nbsp;They&nbsp;keeps&nbsp;unchanged&nbsp;for&nbsp;one&nbsp;HTTP-session&nbsp;in&nbsp;best&nbsp;case.&nbsp;You&nbsp;cache<br>
&nbsp;&nbsp;&nbsp;&nbsp;will&nbsp;overloads&nbsp;with&nbsp;this&nbsp;small&nbsp;same&nbsp;gifs&nbsp;with&nbsp;unique&nbsp;parameters.<br>
&nbsp;&nbsp;&nbsp;&nbsp;Only&nbsp;store&nbsp;ID&nbsp;saves&nbsp;this&nbsp;situation.&nbsp;In&nbsp;other&nbsp;hand,&nbsp;you&nbsp;must&nbsp;cache<br>
&nbsp;&nbsp;&nbsp;&nbsp;all&nbsp;Internet&nbsp;and&nbsp;all&nbsp;it&nbsp;variations.&nbsp;Yes,&nbsp;Vary&nbsp;is&nbsp;evil.&nbsp;But<br>
&nbsp;&nbsp;&nbsp;&nbsp;web-masters&nbsp;which&nbsp;is&nbsp;fight&nbsp;against&nbsp;caching&nbsp;is&nbsp;more&nbsp;evil.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;02.09.15&nbsp;0:16,&nbsp;Marcus&nbsp;Kool&nbsp;пишет:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;white-space:&nbsp;pre;&quot;&gt;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;On&nbsp;09/01/2015&nbsp;03:08&nbsp;PM,&nbsp;Yuri&nbsp;Voinov&nbsp;wrote:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;Better&nbsp;to&nbsp;write&nbsp;store-id&nbsp;rule&nbsp;which&nbsp;cut&nbsp;off&nbsp;parameters&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;store&nbsp;gif.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;Something&nbsp;like&nbsp;this:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;<br>
^https?:\/\/(.+?)\/(.+?)\.(js|css|jp(?:e?g|e|2)|gif|png|bmp|ico|svg|web(p|m))&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://$1.squidinternal/$2.$3&quot;&gt;http://$1.squidinternal/$2.$3&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;And,&nbsp;of&nbsp;course,&nbsp;universal&nbsp;rule&nbsp;for&nbsp;store_id_access.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&nbsp;I&nbsp;think&nbsp;that&nbsp;this&nbsp;works&nbsp;well&nbsp;for&nbsp;trackers&nbsp;gifs&nbsp;but&nbsp;not<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;other&nbsp;gifs&nbsp;with&nbsp;parameters.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;Store&nbsp;ID&nbsp;is&nbsp;powerful&nbsp;instrument&nbsp;for&nbsp;deduplication&nbsp;cache<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;story.&nbsp;Which&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;permits&nbsp;not&nbsp;to&nbsp;use&nbsp;terabytes&nbsp;disks.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;02.09.15&nbsp;0:00,&nbsp;Marcus&nbsp;Kool&nbsp;пишет:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&gt;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&gt;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&gt;&gt;&nbsp;On&nbsp;09/01/2015&nbsp;05:14&nbsp;AM,&nbsp;FredB&nbsp;wrote:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&gt;&gt;&gt;&nbsp;More&nbsp;precisely&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&gt;&gt;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&gt;&gt;&gt;&nbsp;I&nbsp;reduced&nbsp;the&nbsp;ttl&nbsp;of&nbsp;the&nbsp;first&nbsp;line&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&gt;&gt;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&gt;&gt;&gt;&nbsp;refresh_pattern&nbsp;-i<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\.(htm|html|xml|css)(\?.*)?$&nbsp;10080&nbsp;100%&nbsp;10080&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&gt;&gt;&gt;&nbsp;#All&nbsp;File&nbsp;30&nbsp;days&nbsp;max&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&gt;&gt;&gt;&nbsp;refresh_pattern&nbsp;-i&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\.(3gp|7z|ace|asx|bin|deb|divx|dvr-ms|ram|rpm|exe|inc|cab|qt)(\?.*)?$&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;43200&nbsp;100%&nbsp;43200&nbsp;ignore-no-store&nbsp;reload-into-ims&nbsp;store-stale&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&gt;&gt;&gt;&nbsp;refresh_pattern&nbsp;-i&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;<br>
\.(rar|jar|gz|tgz|bz2|iso|m1v|m2(v|p)|mo(d|v)|arj|lha|lzh|zip|tar)(\?.*)?$&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;43200&nbsp;100%&nbsp;43200&nbsp;ignore-no-store&nbsp;reload-into-ims&nbsp;store-stale&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&gt;&gt;&gt;&nbsp;refresh_pattern&nbsp;-i&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;\.(jp(e?g|e|2)|gif|pn[pg]|bm?|ico|swf|dat|ad|txt|dll)(\?.*)?$<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;43200&nbsp;100%&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;43200&nbsp;ignore-no-store&nbsp;reload-into-ims&nbsp;store-stale&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&gt;&gt;&gt;&nbsp;refresh_pattern&nbsp;-i&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;<br>
\.(avi|ac4|mp(e?g|a|e|1|2|3|4)|mk(a|v)|ms(i|u|p)|og(x|v|a|g)|rm|r(a|p)m|snd|vob)(\?.*)?$&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;43200&nbsp;100%&nbsp;43200&nbsp;ignore-no-store&nbsp;reload-into-ims&nbsp;store-stale&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&gt;&gt;&gt;&nbsp;refresh_pattern&nbsp;-i&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;<br>
\.(pp(t?x)|s|t)|pdf|rtf|wax|wm(a|v)|wmx|wpl|cb(r|z|t)|xl(s?x)|do(c?x)|flv|x-flv)(\?.*)?$&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;43200&nbsp;100%&nbsp;43200&nbsp;ignore-no-store&nbsp;reload-into-ims&nbsp;store-stale&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&gt;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&gt;&gt;&nbsp;trackers&nbsp;use&nbsp;a&nbsp;1x1&nbsp;gif&nbsp;extensively&nbsp;and&nbsp;they<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;usually&nbsp;have&nbsp;parameters,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;e.g.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;http://www.example.com/track.gif?browser=chrome&amp;allsortsofdata&amp;random=RANDOMNUMBER&quot;&gt;www.example.com/track.gif?browser=chrome&amp;allsortsofdata&amp;random=RANDOMNUMBER&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&gt;&gt;&nbsp;and&nbsp;these&nbsp;trackers&nbsp;are&nbsp;not&nbsp;cacheable&nbsp;since&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parameters&nbsp;are&nbsp;never&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;the&nbsp;same.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&gt;&gt;&nbsp;So&nbsp;for&nbsp;gif,&nbsp;I&nbsp;suggest&nbsp;to&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&gt;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&gt;&gt;&nbsp;refresh_pattern&nbsp;-i&nbsp;\.gif$  &nbsp;43200&nbsp;100%&nbsp;43200<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ignore-no-store&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;reload-into-ims&nbsp;store-stale&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&gt;&gt;&nbsp;refresh_pattern&nbsp;-i&nbsp;\.gif\? &nbsp;0&nbsp;0%&nbsp;0&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&gt;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&gt;&gt;&nbsp;Marcus&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&gt;&gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&gt;&gt;&nbsp;squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&gt;&gt;&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&gt;&gt;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;/span&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-----BEGIN&nbsp;PGP&nbsp;SIGNATURE-----<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Version:&nbsp;GnuPG&nbsp;v2<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp; &lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;iQEcBAEBCAAGBQJV5fU0AAoJENNXIZxhPexGQZsIAL2/UW7K9HzbwP166GAFiERe<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;12fm9Y7BL9ryw9JMF3sKcq0qvUXvLc4liCVAQLzl8VLbVrF59xJMSXc7ljCy2iCE<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Str2h6mzIOklPyyFctvl1vq8J3upRH7EsN6oZn99RM1Y3ICxhO6aV1pgHGAnF4TS<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;166LJeBrJVGwc+gWo1V+LL1oGem5U2RMkQNBgFTzpAcQAYv60ai0tz9OExO6LRKD<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;vl9lGFVIQ/wMBU1jbbKZGLBDReqgmZnl25kqfVc8zWyu1zMt6cb3ZaRYeCVrEX6q<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;MhFG+sOMLhk6OPaNiuqftdAXZ4UUjvRN951X1kWTe18D/LFfh31sGwUiyZxb04U=<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;=P8m3<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-----END&nbsp;PGP&nbsp;SIGNATURE-----<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
