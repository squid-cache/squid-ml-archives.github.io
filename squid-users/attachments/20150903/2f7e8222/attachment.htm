<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Thanks&nbsp;a&nbsp;lot&nbsp;for&nbsp;the&nbsp;reply&nbsp;Amos.&lt;/div&gt;I&nbsp;tried&nbsp;the&nbsp;following:&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;color:rgb(80,0,80);font-size:12.8000001907349px&quot;&gt;acl&nbsp;station-ip&nbsp;src &lt;/span&gt;&lt;a&nbsp;href=&quot;http://192.168.1.0/24&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&nbsp;style=&quot;font-size:12.8000001907349px&quot;&gt;192.168.1.0/24&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;color:rgb(80,0,80);font-size:12.8000001907349px&quot;&gt;acl&nbsp;station-domain&nbsp;dstdomain&nbsp;/usr/local/squid/station-domain.acl&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#500050&quot;&gt;&lt;span&nbsp;style=&quot;font-size:12.8000001907349px&quot;&gt;http_access&nbsp;allow&nbsp; station-ip &lt;/span&gt;&lt;/font&gt;&lt;span&nbsp;style=&quot;color:rgb(80,0,80);font-size:12.8000001907349px&quot;&gt;station-domain&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#500050&quot;&gt;&lt;span&nbsp;style=&quot;font-size:12.8000001907349px&quot;&gt;http_access&nbsp;deny&nbsp;kiosk-ip&lt;/span&gt;&lt;/font&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#500050&quot;&gt;&lt;span&nbsp;style=&quot;font-size:12.8000001907349px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#500050&quot;&gt;&lt;span&nbsp;style=&quot;font-size:12.8000001907349px&quot;&gt;This&nbsp;order&nbsp;of&nbsp;rules&nbsp;only&nbsp;denies&nbsp;everything&nbsp;instead&nbsp;of&nbsp;allowing&nbsp;atleast&nbsp;domains&nbsp;in &lt;/span&gt;&lt;/font&gt;&lt;span&nbsp;style=&quot;color:rgb(80,0,80);font-size:12.8000001907349px&quot;&gt;station-domain.acl&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;color:rgb(80,0,80);font-size:12.8000001907349px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;color:rgb(80,0,80);font-size:12.8000001907349px&quot;&gt;My&nbsp;requirement&nbsp;is&nbsp;that&nbsp;everyone&nbsp;in&nbsp;that&nbsp;subnet&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;access&nbsp;domains&nbsp;in &lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(80,0,80);font-size:12.8000001907349px&quot;&gt;station-domain.acl&nbsp;only.&nbsp;Sites&nbsp;outside&nbsp;the&nbsp;list&nbsp;have&nbsp;to&nbsp;be&nbsp;blocked&nbsp;for&nbsp;them.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#500050&quot;&gt;&lt;span&nbsp;style=&quot;font-size:12.8000001907349px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#500050&quot;&gt;&lt;span&nbsp;style=&quot;font-size:12.8000001907349px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Sep&nbsp;1,&nbsp;2015&nbsp;at&nbsp;10:17&nbsp;PM,&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&nbsp;target=&quot;_blank&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&gt;On&nbsp;2/09/2015&nbsp;1:28&nbsp;a.m.,&nbsp;jake&nbsp;driscoll&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;here&nbsp;is&nbsp;my&nbsp;requirement:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;i&nbsp;have&nbsp;a&nbsp;subnet&lt;br&gt;<br>
&gt;&gt;&nbsp;only&nbsp;a&nbsp;small&nbsp;list&nbsp;of&nbsp;sites&nbsp;need&nbsp;to&nbsp;be&nbsp;allowed&nbsp;access&nbsp;to&nbsp;this&nbsp;subnet&lt;br&gt;<br>
&gt;&gt;&nbsp;this&nbsp;subnet&nbsp;should&nbsp;not&nbsp;get&nbsp;access&nbsp;to&nbsp;any&nbsp;other&nbsp;site&nbsp;except&nbsp;the&nbsp;ones&nbsp;in&nbsp;the&lt;br&gt;<br>
&gt;&nbsp;list&lt;br&gt;<br>
&gt;&gt;&nbsp;access&nbsp;for&nbsp;other&nbsp;users&nbsp;will&nbsp;remain&nbsp;the&nbsp;same&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;tried&nbsp;the&nbsp;following&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;station-ip&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://192.168.1.0/24&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;192.168.1.0/24&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;station-domain&nbsp;dstdomain&nbsp;&lt;a&nbsp;href=&quot;http://www.google.com&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;www.google.com&lt;/a&gt;&nbsp;&lt;a&nbsp;href=&quot;http://www.bbc.com&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;www.bbc.com&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;http_access&nbsp;deny&nbsp;station-ip&nbsp;!station-domain&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;That&nbsp;is&nbsp;correct&nbsp;for&nbsp;&quot;subnet&nbsp;should&nbsp;not&nbsp;get&nbsp;access&nbsp;to&nbsp;any&nbsp;other&nbsp;site&lt;br&gt;<br>
except&nbsp;the&nbsp;ones&nbsp;in&nbsp;the&nbsp;list&quot;.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
But&nbsp;you&nbsp;had&nbsp;more&nbsp;requirements&nbsp;in&nbsp;your&nbsp;description&nbsp;...&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
 ...&nbsp;&quot;sites&nbsp;need&nbsp;to&nbsp;be&nbsp;allowed&nbsp;access&nbsp;to&nbsp;this&nbsp;subnet&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
Meaning&nbsp;you&nbsp;need&nbsp;an&nbsp;allow&nbsp;line&nbsp;somewhere&nbsp;that&nbsp;does&nbsp;that&nbsp;allowing.&lt;br&gt;<br>
Such&nbsp;a&nbsp;line&nbsp;might&nbsp;exist&nbsp;in&nbsp;your&nbsp;config&nbsp;already&nbsp;in&nbsp;another&nbsp;form.&lt;br&gt;<br>
&lt;br&gt;<br>
At&nbsp;worst&nbsp;adding&nbsp;this&nbsp;line&nbsp;directly&nbsp;underneath&nbsp;the&nbsp;ones&nbsp;above&nbsp;will&nbsp;cause&lt;br&gt;<br>
that&nbsp;policy&nbsp;requirement&nbsp;to&nbsp;happen&nbsp;as&nbsp;well:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; http_access&nbsp;allow&nbsp;station-ip&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
 ...&nbsp;&quot;access&nbsp;for&nbsp;other&nbsp;users&nbsp;will&nbsp;remain&nbsp;the&nbsp;same&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
Without&nbsp;seeing&nbsp;your&nbsp;full&nbsp;squid.conf&nbsp;http_access&nbsp;rules&nbsp;and&nbsp;all&nbsp;associated&lt;br&gt;<br>
ACL&nbsp;definitions&nbsp;we&nbsp;can&#39;t&nbsp;help&nbsp;with&nbsp;that&nbsp;&quot;the&nbsp;same&quot;&nbsp;part.&nbsp;Except&nbsp;to&nbsp;say:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; Order&nbsp;is&nbsp;IMPORTANT.&lt;br&gt;<br>
&lt;br&gt;<br>
Where&nbsp;you&nbsp;place&nbsp;a&nbsp;http_access&nbsp;line&nbsp;in&nbsp;the&nbsp;sequence&nbsp;with&nbsp;*all*&nbsp;other&lt;br&gt;<br>
http_access&nbsp;rules&nbsp;matters&nbsp;a&nbsp;LOT&nbsp;about&nbsp;whether&nbsp;it&nbsp;is&nbsp;even&nbsp;tested,&nbsp;whether&lt;br&gt;<br>
it&nbsp;will&nbsp;match&nbsp;at&nbsp;that&nbsp;time,&nbsp;and&nbsp;what&nbsp;will&nbsp;happen.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;*guess*&nbsp;you&nbsp;need&nbsp;to&nbsp;place&nbsp;these&nbsp;four&nbsp;new&nbsp;lines&nbsp;near&nbsp;the&nbsp;top&nbsp;of&nbsp;your&lt;br&gt;<br>
list&nbsp;of&nbsp;http_access&nbsp;list&nbsp;right&nbsp;under&nbsp;the&nbsp;default&nbsp;configs&nbsp;&quot;CONNECT&lt;br&gt;<br>
!SSL_ports&quot;&nbsp;line.&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;and&nbsp;also&nbsp;this&nbsp;-&lt;br&gt;<br>
&gt;&nbsp;http_access&nbsp;deny&nbsp;station-ip&lt;br&gt;<br>
&gt;&nbsp;http_access&nbsp;allow&nbsp;station-ip&nbsp;station-domain&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;Good&nbsp;example&nbsp;of&nbsp;what&nbsp;I&nbsp;mean&nbsp;about&nbsp;order&nbsp;affecting&nbsp;matching.&lt;br&gt;<br>
&lt;br&gt;<br>
100%&nbsp;of&nbsp;all&nbsp;traffic&nbsp;from&nbsp;station-ip&nbsp;will&nbsp;match&nbsp;that&nbsp;&quot;deny&quot;&nbsp;line.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;&quot;allow&quot;&nbsp;line&nbsp;will&nbsp;only&nbsp;be&nbsp;reached&nbsp;by&nbsp;non-&#39;station-ip&#39;&nbsp;traffic.&nbsp;It&lt;br&gt;<br>
will&nbsp;thus&nbsp;_never_&nbsp;match,&nbsp;and&nbsp;does&nbsp;nothing.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Amos&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
