<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;I&#39;m&nbsp;using&nbsp;squid&nbsp;with&nbsp;a&nbsp;custom&nbsp;icap&nbsp;service.&nbsp;(Which&nbsp;code&nbsp;I&nbsp;plan&nbsp;to&nbsp;free)&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;http_port&nbsp;3129&nbsp;tproxy&nbsp;disable-pmtu-discovery=always&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;collapsed_forwarding&nbsp;on&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;dns_v4_first&nbsp;on&lt;/div&gt;&lt;div&gt;max_filedescriptors&nbsp;8192&lt;br&gt;&lt;/div&gt;&lt;div&gt;connect_retries&nbsp;10&lt;/div&gt;&lt;div&gt;retry_on_error&nbsp;on&lt;/div&gt;&lt;div&gt;client_request_buffer_max_size&nbsp;10250&nbsp;KB&lt;br&gt;&lt;/div&gt;&lt;div&gt;request_header_max_size&nbsp;10240&nbsp;KB&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;http_access&nbsp;allow&nbsp;manager&nbsp;localhost&lt;br&gt;&lt;/div&gt;&lt;div&gt;http_access&nbsp;deny&nbsp;manager&lt;/div&gt;&lt;div&gt;http_access&nbsp;allow&nbsp;all&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;maximum_object_size&nbsp;800&nbsp;MB&lt;br&gt;&lt;/div&gt;&lt;div&gt;maximum_object_size_in_memory&nbsp;32&nbsp;KB&lt;/div&gt;&lt;div&gt;cache_swap_low&nbsp;90&lt;/div&gt;&lt;div&gt;cache_swap_high&nbsp;95&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;#Server&nbsp;has&nbsp;16Gb&nbsp;RAM&lt;/div&gt;&lt;div&gt;cache_mem&nbsp;738&nbsp;MB&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;cache_dir&nbsp;aufs&nbsp;/cache/sdb&nbsp;228138269&nbsp;16&nbsp;256&nbsp;min-size=1&nbsp;max-size=838860800&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;buffered_logs&nbsp;off&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;icap_enable&nbsp;on&lt;/div&gt;&lt;div&gt;icap_send_client_ip&nbsp;on&lt;/div&gt;&lt;div&gt;icap_persistent_connections&nbsp;on&lt;/div&gt;&lt;div&gt;icap_preview_enable&nbsp;off&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;icap_206_enable&nbsp;off&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;icap_service&nbsp;service_reqmod&nbsp; reqmod_precache&nbsp; icap://&lt;a&nbsp;href=&quot;http://127.0.0.1:50020/request&quot;&nbsp;target=&quot;_blank&quot;&gt;127.0.0.1:50020/request&lt;/a&gt;&nbsp; bypass=0&nbsp;max-conn=100&nbsp;ipv6=off&lt;/div&gt;&lt;div&gt;icap_service&nbsp;service_respmod&nbsp;respmod_precache&nbsp;icap://&lt;a&nbsp;href=&quot;http://127.0.0.1:50020/response&quot;&nbsp;target=&quot;_blank&quot;&gt;127.0.0.1:50020/response&lt;/a&gt;&nbsp;bypass=0&nbsp;max-conn=100&nbsp;ipv6=off&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;acl&nbsp;html&nbsp;Content-Type&nbsp;-i&nbsp;html&lt;br&gt;&lt;/div&gt;&lt;div&gt;adaptation_access&nbsp;service_respmod&nbsp;allow&nbsp;html&lt;br&gt;&lt;/div&gt;&lt;div&gt;respmod_rep_header&lt;/div&gt;&lt;div&gt;adaptation_access&nbsp;service_reqmod&nbsp;allow&nbsp;all&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;#&nbsp;DEFAULT&nbsp;REFRESH&nbsp;PATTERNS&lt;br&gt;&lt;/div&gt;&lt;div&gt;refresh_pattern&nbsp;-i&nbsp;(/cgi-bin/|?)&nbsp; &nbsp; 0&nbsp; &nbsp; 0%&nbsp; &nbsp; &nbsp; &nbsp; 0&lt;/div&gt;&lt;div&gt;refresh_pattern&nbsp;.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp;20%&nbsp; &nbsp; &nbsp;4320&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;acl&nbsp;queries&nbsp;url_regex&nbsp;-i&nbsp;http://.*\?.*&lt;/div&gt;&lt;div&gt;acl&nbsp;queries&nbsp;url_regex&nbsp;-i&nbsp;http://.*/cgi-bin/.*&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;cache&nbsp;deny&nbsp;queries&lt;/div&gt;&lt;div&gt;cache&nbsp;allow&nbsp;all&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;client_persistent_connections&nbsp;on&lt;br&gt;&lt;/div&gt;&lt;div&gt;server_persistent_connections&nbsp;on&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;debug_options&nbsp;ALL,0&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;see&nbsp;the&nbsp;(squid-1)&nbsp;process&nbsp;RAM&nbsp;use&nbsp;slowly&nbsp;increasing.&nbsp;It&#39;s&nbsp;never&nbsp;going&nbsp;down.&nbsp;Ultil&nbsp;squid&nbsp;cannot&nbsp;allocate&nbsp;more&nbsp;memory&nbsp;and&nbsp;crashes.&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Could&nbsp;be&nbsp;the&nbsp;icap&nbsp;client&nbsp;functionality&nbsp;?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;&lt;div&gt;Alfrenovsky&lt;/div&gt;<br>
&lt;/div&gt;<br>

</tt>
