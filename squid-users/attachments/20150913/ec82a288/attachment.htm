<tt>
&lt;HTML&gt;&lt;HEAD&gt;&lt;TITLE&gt;&lt;/TITLE&gt;<br>
&lt;META&nbsp;content=&quot;text/html;&nbsp;charset=UTF-8&quot;&nbsp;http-equiv=Content-Type&gt;<br>
&lt;STYLE&nbsp;type=text/css&gt;.felamimail-body-blockquote&nbsp;{margin:&nbsp;5px&nbsp;10px&nbsp;0&nbsp;3px;padding-left:&nbsp;10px;border-left:&nbsp;2px&nbsp;solid&nbsp;#000088;}&nbsp;&lt;/STYLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&nbsp;dir=ltr&gt;<br>
&lt;DIV&nbsp;dir=ltr&gt;<br>
&lt;DIV&nbsp;style=&quot;FONT-SIZE:&nbsp;12pt;&nbsp;FONT-FAMILY:&nbsp;'Calibri';&nbsp;COLOR:&nbsp;#000000&quot;&gt;<br>
&lt;DIV&gt;Hi&nbsp;Enrico,&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;The&nbsp;Kerberos&nbsp;helper&nbsp;will&nbsp;authenticate&nbsp;only&nbsp;for&nbsp;now&nbsp;(&nbsp;There&nbsp;is&nbsp;<br>
a&nbsp;&nbsp;now&nbsp;code&nbsp;to&nbsp;get&nbsp;the&nbsp;group&nbsp;information,&nbsp;but&nbsp;it&nbsp;is&nbsp;not&nbsp;further&nbsp;<br>
processed).&nbsp;&nbsp;It&nbsp;does&nbsp;not&nbsp;do&nbsp;anything&nbsp;to&nbsp;group&nbsp;membership&nbsp;like&nbsp;the&nbsp;winbind&nbsp;<br>
cache.&nbsp;&nbsp;Also&nbsp;keep&nbsp;in&nbsp;mind&nbsp;Kerberos&nbsp;cache&nbsp;for&nbsp;about&nbsp;10&nbsp;hours&nbsp;the&nbsp;ticket&nbsp;on&nbsp;<br>
the&nbsp;client&nbsp;machine.&nbsp;&nbsp;If&nbsp;the&nbsp;user&nbsp;does&nbsp;not&nbsp;lock/unlock&nbsp;his&nbsp;PC&nbsp;&nbsp;there&nbsp;<br>
won’t&nbsp;be&nbsp;any&nbsp;update&nbsp;to&nbsp;the&nbsp;cached&nbsp;ticket&nbsp;and&nbsp;therefore&nbsp;not&nbsp;to&nbsp;the&nbsp;group&nbsp;<br>
membership&nbsp;information&nbsp;in&nbsp;the&nbsp;ticket&nbsp;either.&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;Regards&lt;/DIV&gt;<br>
&lt;DIV&gt;Markus&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;<br>
style=&quot;BORDER-TOP-COLOR:&nbsp;#000000;&nbsp;BORDER-BOTTOM-COLOR:&nbsp;#000000;&nbsp;PADDING-LEFT:&nbsp;5px;&nbsp;MARGIN-LEFT:&nbsp;5px;&nbsp;BORDER-LEFT:&nbsp;#000000&nbsp;4px&nbsp;solid;&nbsp;BORDER-RIGHT-COLOR:&nbsp;#000000&quot;&gt;<br>
&lt;DIV&nbsp;<br>
style=&quot;FONT-SIZE:&nbsp;small;&nbsp;FONT-FAMILY:&nbsp;'Calibri';&nbsp;FONT-WEIGHT:&nbsp;normal;&nbsp;COLOR:&nbsp;#000000;&nbsp;FONT-STYLE:&nbsp;normal;&nbsp;TEXT-DECORATION:&nbsp;none;&nbsp;DISPLAY:&nbsp;inline&quot;&gt;<br>
&lt;DIV&gt;&quot;Heine,&nbsp;Enrico&quot;&nbsp;&lt;independence@data-core.org&gt;&nbsp;wrote&nbsp;in&nbsp;message&nbsp;<br>
news:c821a938e46c6278b4cc39912760b408bb84f83c@data-core.org...&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;<br>
style=&quot;BORDER-TOP-COLOR:&nbsp;#000000;&nbsp;BORDER-BOTTOM-COLOR:&nbsp;#000000;&nbsp;PADDING-LEFT:&nbsp;5px;&nbsp;MARGIN-LEFT:&nbsp;5px;&nbsp;BORDER-LEFT:&nbsp;#000000&nbsp;4px&nbsp;solid;&nbsp;BORDER-RIGHT-COLOR:&nbsp;#000000&quot;&gt;<br>
&lt;DIV&nbsp;<br>
style=&quot;FONT-SIZE:&nbsp;small;&nbsp;FONT-FAMILY:&nbsp;'Calibri';&nbsp;FONT-WEIGHT:&nbsp;normal;&nbsp;COLOR:&nbsp;#000000;&nbsp;FONT-STYLE:&nbsp;normal;&nbsp;TEXT-DECORATION:&nbsp;none;&nbsp;DISPLAY:&nbsp;inline&quot;&gt;Hello&nbsp;<br>
together,&lt;BR&gt;&lt;BR&gt;My&nbsp;Issue&nbsp;is&nbsp;the&nbsp;following:&nbsp;&lt;BR&gt;&lt;BR&gt;Using&nbsp;Squid3&nbsp;with&nbsp;Kerberos&nbsp;<br>
Auth&nbsp;works&nbsp;just&nbsp;fine&nbsp;but&nbsp;does&nbsp;not&nbsp;update&nbsp;the&nbsp;users&nbsp;group&nbsp;membership&nbsp;in&nbsp;the&nbsp;<br>
winbind&nbsp;cache&nbsp;of&nbsp;samba&nbsp;as&nbsp;for&nbsp;examle&nbsp;ntlm_auth&nbsp;does.&lt;BR&gt;&lt;BR&gt;So&nbsp;when&nbsp;using&nbsp;<br>
/usr/lib/squid3/negotiate_kerberos_auth&nbsp;for&nbsp;Kerberos,&nbsp;the&nbsp;auth&nbsp;works,&nbsp;but&nbsp;group&nbsp;<br>
memberships&nbsp;for&nbsp;my&nbsp;user&nbsp;as&nbsp;example&nbsp;are&nbsp;never&nbsp;updated,&nbsp;when&nbsp;I&nbsp;comment&nbsp;this&nbsp;auth&nbsp;<br>
helper&nbsp;then&nbsp;it&nbsp;gets&nbsp;updated&nbsp;because&nbsp;then&nbsp;I&nbsp;use&nbsp;ntlm_auth&nbsp;for&nbsp;ntlmssp&lt;BR&gt;So&nbsp;if&nbsp;I&nbsp;<br>
have&nbsp;a&nbsp;new&nbsp;group&nbsp;eg:&nbsp;My_Test&nbsp;,&nbsp;then&nbsp;I&nbsp;can&nbsp;check&nbsp;this&nbsp;like&nbsp;this:&nbsp;&lt;BR&gt;&lt;BR&gt;wbinfo&nbsp;<br>
-n&nbsp;My_Test&nbsp;-&gt;&nbsp;returns&nbsp;SID&nbsp;of&nbsp;My_Test&lt;BR&gt;wbinfo&nbsp;-Y&nbsp;SID&nbsp;-&gt;&nbsp;returns&nbsp;mapped&nbsp;<br>
GID&lt;BR&gt;wbinfo&nbsp;-r&nbsp;myuser&nbsp;|&nbsp;grep&nbsp;GID&nbsp;-&gt;&nbsp;GID&nbsp;is&nbsp;not&nbsp;listed!!&lt;BR&gt;&lt;BR&gt;getent&nbsp;group&nbsp;<br>
My_Test&nbsp;-&gt;&nbsp;returns:&nbsp;myuser&nbsp;is&nbsp;member&nbsp;of&nbsp;that&nbsp;group!&nbsp;So&nbsp;just&nbsp;in&nbsp;my&nbsp;account&nbsp;<br>
&quot;myuser&quot;&nbsp;it&nbsp;is&nbsp;not&nbsp;listed&nbsp;(wbinfo&nbsp;-r&nbsp;myuser&nbsp;|&nbsp;grep&nbsp;GID&nbsp;-&gt;&nbsp;GID&nbsp;is&nbsp;not&nbsp;<br>
listed!!)&nbsp;but&nbsp;ext_wbinfo_group_acl&nbsp;is&nbsp;checking&nbsp;my&nbsp;group&nbsp;membership&nbsp;based&nbsp;on&nbsp;the&nbsp;<br>
commands&nbsp;listed&nbsp;above.&lt;BR&gt;&lt;BR&gt;Commenting&nbsp;Kerberos&nbsp;auth&nbsp;in&nbsp;the&nbsp;squid&nbsp;conf,&nbsp;so&nbsp;<br>
that&nbsp;only&nbsp;ntlm_auth&nbsp;is&nbsp;used&nbsp;and&nbsp;requesting&nbsp;one&nbsp;website&nbsp;to&nbsp;be&nbsp;sure&nbsp;to&nbsp;have&nbsp;done&nbsp;<br>
an&nbsp;auth,&nbsp;works.&nbsp;So&nbsp;then&nbsp;the&nbsp;GID&nbsp;is&nbsp;listed&nbsp;in&nbsp;the&nbsp;output&nbsp;of&nbsp;wbinfo&nbsp;-r&nbsp;<br>
myuser&lt;BR&gt;&lt;BR&gt;How&nbsp;can&nbsp;I&nbsp;ensure&nbsp;that&nbsp;my&nbsp;memberships&nbsp;are&nbsp;getting&nbsp;updated&nbsp;using&nbsp;<br>
/usr/lib/squid3/negotiate_kerberos_auth&nbsp;as&nbsp;it&nbsp;does&nbsp;work&nbsp;with&nbsp;ntlm_user?&nbsp;Or&nbsp;is&nbsp;<br>
there&nbsp;another&nbsp;auth&nbsp;helper&nbsp;that&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;Kerberos&nbsp;that&nbsp;is&nbsp;doing&nbsp;what&nbsp;<br>
ntlm_user&nbsp;does&nbsp;automatically&nbsp;after&nbsp;an&nbsp;successfull&nbsp;authentication?&lt;BR&gt;&lt;BR&gt;My&nbsp;<br>
Squid&nbsp;Config&nbsp;for&nbsp;Auth&nbsp;Helpers&nbsp;looks&nbsp;like&nbsp;<br>
this:&lt;BR&gt;&lt;BR&gt;#########################################################&nbsp;Kerberos&nbsp;<br>
#########################################################&lt;BR&gt;#auth_param&nbsp;<br>
negotiate&nbsp;program&nbsp;/usr/lib/squid3/negotiate_kerberos_auth&nbsp;-r&nbsp;-s&nbsp;<br>
HTTP/myserver.MYDOMAIN@MYDOMAIN&lt;BR&gt;#auth_param&nbsp;negotiate&nbsp;children&nbsp;<br>
300&lt;BR&gt;#auth_param&nbsp;negotiate&nbsp;keep_alive&nbsp;<br>
on&lt;BR&gt;&lt;BR&gt;#########################################################&nbsp;NTLM&nbsp;<br>
#########################################################&lt;BR&gt;auth_param&nbsp;ntlm&nbsp;<br>
program&nbsp;/usr/bin/ntlm_auth&nbsp;--helper-protocol=squid-2.5-ntlmssp&lt;BR&gt;auth_param&nbsp;<br>
ntlm&nbsp;children&nbsp;50&lt;BR&gt;auth_param&nbsp;ntlm&nbsp;keep_alive&nbsp;<br>
off&lt;BR&gt;&lt;BR&gt;#########################################################&nbsp;BASIC&nbsp;<br>
#########################################################&lt;BR&gt;auth_param&nbsp;basic&nbsp;<br>
program&nbsp;/usr/bin/ntlm_auth&nbsp;--helper-protocol=squid-2.5-basic&lt;BR&gt;auth_param&nbsp;basic&nbsp;<br>
children&nbsp;50&lt;BR&gt;auth_param&nbsp;basic&nbsp;credentialsttl&nbsp;2&nbsp;hours&lt;BR&gt;auth_param&nbsp;basic&nbsp;realm&nbsp;<br>
Windows&nbsp;Authentication&nbsp;required&lt;BR&gt;auth_param&nbsp;basic&nbsp;casesensitive&nbsp;<br>
off&lt;BR&gt;&lt;BR&gt;Also&nbsp;I&nbsp;am&nbsp;using&nbsp;the&nbsp;following&nbsp;to&nbsp;check&nbsp;group&nbsp;memberships,&nbsp;which&nbsp;is&nbsp;<br>
working&nbsp;fine&nbsp;!!&nbsp;with&nbsp;all&nbsp;auth&nbsp;helpers&nbsp;!!&nbsp;and&nbsp;it&nbsp;is&nbsp;much&nbsp;faster&nbsp;than&nbsp;the&nbsp;slow&nbsp;<br>
Kerberos&nbsp;group&nbsp;check,&nbsp;I&nbsp;assume&nbsp;that&nbsp;this&nbsp;helper&nbsp;is&nbsp;updating&nbsp;automatically&nbsp;the&nbsp;<br>
winbind&nbsp;group&nbsp;cache,&nbsp;which&nbsp;is&nbsp;the&nbsp;reason&nbsp;that&nbsp;the&nbsp;group&nbsp;itself&nbsp;is&nbsp;beeing&nbsp;<br>
recognized&nbsp;and&nbsp;I&nbsp;am&nbsp;also&nbsp;a&nbsp;member&nbsp;of&nbsp;that&nbsp;group&nbsp;when&nbsp;I&nbsp;check&nbsp;that&nbsp;specific&nbsp;group&nbsp;<br>
via&nbsp;getent&nbsp;group&nbsp;My_Test&lt;BR&gt;&lt;BR&gt;external_acl_type&nbsp;nt_group&nbsp;ttl=60&nbsp;<br>
children-max=300&nbsp;children-startup=50&nbsp;%LOGIN&nbsp;/usr/lib/squid3/ext_wbinfo_group_acl&nbsp;<br>
-K&lt;BR&gt;&lt;BR&gt;Software&nbsp;Versions&nbsp;used:&lt;BR&gt;-&nbsp;Squid&nbsp;Cache:&nbsp;Version&nbsp;3.4.8&lt;BR&gt;-&nbsp;Samba&nbsp;<br>
&amp;&nbsp;winbindd&nbsp;Version&nbsp;4.1.17-Debian&lt;BR&gt;-&nbsp;Distri:&nbsp;Debian&nbsp;Jessie&lt;BR&gt;&lt;BR&gt;&lt;BR&gt;&lt;SPAN&nbsp;<br>
id=felamimail-body-signature&gt;--&nbsp;&lt;BR&gt;&lt;SPAN&nbsp;<br>
id=felamimail_inline_felamimail-body-signature&gt;--&nbsp;&lt;BR&gt;Best&nbsp;regards,&lt;BR&gt;Enrico&nbsp;<br>
Heine&lt;BR&gt;&lt;BR&gt;​This&nbsp;email&nbsp;and&nbsp;any&nbsp;files&nbsp;transmitted&nbsp;with&nbsp;it&nbsp;are&nbsp;confidential&nbsp;and&nbsp;<br>
intended&nbsp;solely&nbsp;for&nbsp;the&nbsp;use&nbsp;of&nbsp;the&nbsp;individual&nbsp;or&nbsp;entity&nbsp;to&nbsp;whom&nbsp;they&nbsp;are&nbsp;<br>
addressed.&nbsp;If&nbsp;you&nbsp;have&nbsp;received&nbsp;this&nbsp;email&nbsp;in&nbsp;error&nbsp;please&nbsp;notify&nbsp;the&nbsp;system&nbsp;<br>
manager.&nbsp;This&nbsp;message&nbsp;contains&nbsp;confidential&nbsp;information&nbsp;and&nbsp;is&nbsp;intended&nbsp;only&nbsp;for&nbsp;<br>
the&nbsp;individual&nbsp;named.&nbsp;If&nbsp;you&nbsp;are&nbsp;not&nbsp;the&nbsp;named&nbsp;addressee&nbsp;you&nbsp;should&nbsp;not&nbsp;<br>
disseminate,&nbsp;distribute&nbsp;or&nbsp;copy&nbsp;this&nbsp;e-mail.&nbsp;Please&nbsp;notify&nbsp;the&nbsp;sender&nbsp;<br>
immediately&nbsp;by&nbsp;e-mail&nbsp;if&nbsp;you&nbsp;have&nbsp;received&nbsp;this&nbsp;e-mail&nbsp;by&nbsp;mistake&nbsp;and&nbsp;delete&nbsp;<br>
this&nbsp;e-mail&nbsp;from&nbsp;your&nbsp;system.&nbsp;If&nbsp;you&nbsp;are&nbsp;not&nbsp;the&nbsp;intended&nbsp;recipient&nbsp;you&nbsp;are&nbsp;<br>
notified&nbsp;that&nbsp;disclosing,&nbsp;copying,&nbsp;distributing&nbsp;or&nbsp;taking&nbsp;any&nbsp;action&nbsp;in&nbsp;reliance&nbsp;<br>
on&nbsp;the&nbsp;contents&nbsp;of&nbsp;this&nbsp;information&nbsp;is&nbsp;strictly&nbsp;<br>
prohibited.&lt;/SPAN&gt;&lt;/SPAN&gt;&lt;BR&gt;&lt;BR&gt;<br>
&lt;P&gt;<br>
&lt;HR&gt;<br>
_______________________________________________&lt;BR&gt;squid-users&nbsp;mailing&nbsp;<br>
list&lt;BR&gt;squid-users@lists.squid-cache.org&lt;BR&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;BR&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/BODY&gt;&lt;/HTML&gt;<br>

</tt>
