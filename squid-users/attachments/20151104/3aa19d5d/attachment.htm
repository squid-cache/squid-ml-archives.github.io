<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;moz-cite-prefix&quot;&gt;Le&nbsp;04/11/2015&nbsp;11:00,&nbsp;Amos&nbsp;Jeffries&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;écrit :&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;cite=&quot;mid:5639D745.20205@treenet.co.nz&quot;&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;On&nbsp;4/11/2015&nbsp;12:48&nbsp;p.m.,&nbsp;Marcus&nbsp;Kool&nbsp;wrote:<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;I&nbsp;suspect&nbsp;that&nbsp;the&nbsp;problem&nbsp;is&nbsp;that&nbsp;you&nbsp;redirect&nbsp;a&nbsp;HTTPS-based&nbsp;URL&nbsp;to&nbsp;an<br>
HTTP&nbsp;URL&nbsp;and&nbsp;Squid&nbsp;does&nbsp;not&nbsp;like&nbsp;that.<br>
<br>
Marcus<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;To&nbsp;give&nbsp;it&nbsp;a&nbsp;try&nbsp;in&nbsp;that&nbsp;direction&nbsp;I&nbsp;now&nbsp;redirect&nbsp;to&nbsp;an&nbsp;https<br>
&nbsp;&nbsp;&nbsp;&nbsp;server.&nbsp;And&nbsp;I&nbsp;get&nbsp;:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;The&nbsp;following&nbsp;error&nbsp;was&nbsp;encountered&nbsp;while&nbsp;trying&nbsp;to&nbsp;retrieve&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;URL:&nbsp;&lt;a&nbsp;href=&quot;https://https/*&quot;&gt;https://https/*&lt;/a&gt;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;id=&quot;error&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;b&gt;Unable&nbsp;to&nbsp;determine&nbsp;IP&nbsp;address&nbsp;from&nbsp;host&nbsp;name&nbsp;&lt;q&gt;https&lt;/q&gt;&lt;/b&gt;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;The&nbsp;DNS&nbsp;server&nbsp;returned:&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;id=&quot;data&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&gt;Name&nbsp;Error:&nbsp;The&nbsp;domain&nbsp;name&nbsp;does&nbsp;not&nbsp;exist.&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Moreover&nbsp;this&nbsp;would&nbsp;leads&nbsp;sometimes&nbsp;to&nbsp;HTTP-based&nbsp;URL&nbsp;to&nbsp;an&nbsp;HTTPS<br>
&nbsp;&nbsp;&nbsp;&nbsp;URL&nbsp;and&nbsp;I&nbsp;don't&nbsp;know&nbsp;how&nbsp;much&nbsp;squid&nbsp;likes&nbsp;it&nbsp;either.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;cite=&quot;mid:5639D745.20205@treenet.co.nz&quot;&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;No&nbsp;it&nbsp;is&nbsp;apparently&nbsp;the&nbsp;fact&nbsp;that&nbsp;the&nbsp;domain&nbsp;name&nbsp;being&nbsp;redirected&nbsp;to&nbsp;is<br>
&quot;http&quot;.<br>
<br>
As&nbsp;in:&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-rfc2396E&quot;&nbsp;href=&quot;http://http/something&quot;&gt;&quot;http://http/something&quot;&lt;/a&gt;<br>
<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;can&nbsp;assure&nbsp;my&nbsp;rewrite_url&nbsp;looks&nbsp;like&nbsp;&lt;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class=&quot;moz-txt-link-rfc2396E&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;href=&quot;https://proxyweb.xxxxx.xxxxx/var1=xxxx&amp;...&quot;&gt;&lt;a&nbsp;class=&quot;moz-txt-link-rfc2396E&quot;&nbsp;href=&quot;https://proxyweb.xxxxx.xxxxx/var1=xxxx&amp;...&quot;&gt;&quot;https://proxyweb.xxxxx.xxxxx/var1=xxxx&amp;...&quot;&lt;/a&gt;&lt;/a&gt;.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;And&nbsp;this&nbsp;confirm&nbsp;ssl_bump&nbsp;parse&nbsp;this&nbsp;result&nbsp;and&nbsp;get&nbsp;the&nbsp;left&nbsp;part<br>
&nbsp;&nbsp;&nbsp;&nbsp;before&nbsp;the&nbsp;&quot;:&quot;.&nbsp;To&nbsp;play&nbsp;with,&nbsp;I&nbsp;have&nbsp;also&nbsp;redirect&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;proxyweb.xxxxx.xxxxx:443/var1=xxxx&amp;...&quot;&nbsp;(ie.&nbsp;I&nbsp;removed&nbsp;the&nbsp;&lt;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class=&quot;moz-txt-link-rfc2396E&quot;&nbsp;href=&quot;https://&quot;&gt;&lt;a&nbsp;class=&quot;moz-txt-link-rfc2396E&quot;&nbsp;href=&quot;https://&quot;&gt;&quot;https://&quot;&lt;/a&gt;&lt;/a&gt;&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;add&nbsp;a&nbsp;&quot;:443&quot;)&nbsp;to&nbsp;force&nbsp;the&nbsp;parsing.&nbsp;Then&nbsp;I&nbsp;don't&nbsp;get&nbsp;this&nbsp;message<br>
&nbsp;&nbsp;&nbsp;&nbsp;anymore,&nbsp;but&nbsp;Mozilla&nbsp;gets&nbsp;crazy&nbsp;waiting&nbsp;for&nbsp;the&nbsp;ad.doubleclick.net<br>
&nbsp;&nbsp;&nbsp;&nbsp;certificate&nbsp;and&nbsp;getting&nbsp;the&nbsp;proxyweb.xxxxx.xxxxx&nbsp;one.&nbsp;And&nbsp;of&nbsp;course<br>
&nbsp;&nbsp;&nbsp;&nbsp;it&nbsp;breaks&nbsp;my&nbsp;SG&nbsp;configuration&nbsp;and&nbsp;can't&nbsp;be&nbsp;production&nbsp;solution.&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;cite=&quot;mid:5639D745.20205@treenet.co.nz&quot;&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Which&nbsp;brings&nbsp;up&nbsp;the&nbsp;question&nbsp;of&nbsp;why&nbsp;you&nbsp;are&nbsp;using&nbsp;SG&nbsp;to&nbsp;block&nbsp;adverts?<br>
<br>
squid.conf:<br>
&nbsp;acl&nbsp;ads&nbsp;dstdomain&nbsp;.doubleclick.net<br>
&nbsp;http_access&nbsp;deny&nbsp;ads<br>
<br>
Amos<br>
<br>
<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;don't&nbsp;use&nbsp;SG&nbsp;to&nbsp;specificaly&nbsp;block&nbsp;adverts,&nbsp;I&nbsp;use&nbsp;it&nbsp;to&nbsp;block&nbsp;90&nbsp;%<br>
&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;web.&nbsp;Here&nbsp;it's&nbsp;just&nbsp;an&nbsp;example&nbsp;with&nbsp;ads&nbsp;but&nbsp;it&nbsp;could&nbsp;be&nbsp;with<br>
&nbsp;&nbsp;&nbsp;&nbsp;so&nbsp;much&nbsp;other&nbsp;things...&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;just&nbsp;want&nbsp;to&nbsp;try&nbsp;make&nbsp;SG&nbsp;and&nbsp;ssl_bump&nbsp;live&nbsp;together.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Is&nbsp;this&nbsp;possible&nbsp;to&nbsp;have&nbsp;a&nbsp;rule&nbsp;like&nbsp;&quot;if&nbsp;it&nbsp;has&nbsp;been&nbsp;rewrite&nbsp;then<br>
&nbsp;&nbsp;&nbsp;&nbsp;don't&nbsp;try&nbsp;to&nbsp;ssl_bump&quot;?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Regards,&nbsp;EG&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
