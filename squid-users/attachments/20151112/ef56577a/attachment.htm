<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;11/12/15&nbsp;12:35&nbsp;PM,&nbsp;Antony&nbsp;Stone&nbsp;wrote:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;white-space:&nbsp;pre;&quot;&gt;&gt;&gt;&gt;&nbsp;I'm&nbsp;trying&nbsp;to&nbsp;set&nbsp;up&nbsp;a&nbsp;CDN-like&nbsp;frontend&nbsp;to&nbsp;our&nbsp;(bandwidth-constrained)<br>
&gt;&gt;&gt;&nbsp;master&nbsp;package&nbsp;repository. &nbsp;Everything&nbsp;seems&nbsp;to&nbsp;be&nbsp;working&nbsp;(including<br>
&gt;&gt;&gt;&nbsp;memory&nbsp;cache&nbsp;hits)&nbsp;except&nbsp;for&nbsp;some&nbsp;reason&nbsp;it&nbsp;does&nbsp;not&nbsp;seem&nbsp;to&nbsp;be<br>
&gt;&gt;&gt;&nbsp;caching/keeping&nbsp;large&nbsp;files.<br>
&gt;&nbsp;Define&nbsp;&quot;large&quot;?&lt;/span&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Sorry. &nbsp;To&nbsp;back&nbsp;up&nbsp;a&nbsp;little:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;squid&nbsp;version:&nbsp;3.4.8-6+deb8u1&nbsp;(debian&nbsp;jessie)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;With&nbsp;that&nbsp;config,&nbsp;I&nbsp;see&nbsp;memory&nbsp;hits&nbsp;to&nbsp;the&nbsp;cache,&nbsp;working&nbsp;fine. <br>
&nbsp;&nbsp;&nbsp;&nbsp;However,&nbsp;if&nbsp;I&nbsp;try&nbsp;to&nbsp;download&nbsp;something&nbsp;that's&nbsp;a&nbsp;couple&nbsp;of&nbsp;MB,&nbsp;it<br>
&nbsp;&nbsp;&nbsp;&nbsp;never&nbsp;writes&nbsp;to&nbsp;either&nbsp;cache&nbsp;directory.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;get&nbsp;this&nbsp;in&nbsp;the&nbsp;store.log:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;white-space:&nbsp;pre;&quot;&gt;&gt;&nbsp;1447350253.330&nbsp;RELEASE&nbsp;-1&nbsp;FFFFFFFF&nbsp;41BD9B4385C540AB29F252B7B7DDF41C&nbsp;<br>
&gt;&nbsp;200&nbsp;1447350184&nbsp;1447185078&nbsp;1447954984&nbsp;application/x-rpm&nbsp;2368070/2368070<br>
&gt;&nbsp;GET<br>
&gt;&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://uk-1.mirrors.opennms.org:3128/yum/stable/common/opennms/opennms-jmx-config-generator-16.0.4-1.noarch.rpm&quot;&gt;http://uk-1.mirrors.opennms.org:3128/yum/stable/common/opennms/opennms-jmx-config-generator-16.0.4-1.noarch.rpm&lt;/a&gt;&lt;/span&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;...and&nbsp;this&nbsp;in&nbsp;the&nbsp;access.log:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;white-space:&nbsp;pre;&quot;&gt;&gt;&nbsp;1447350253.330 &nbsp;70000&nbsp;2606:a000:45e2:1200:f0cb:6c0a:1e57:68bd<br>
&gt;&nbsp;TCP_MISS/200&nbsp;2368590&nbsp;GET<br>
&gt;&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://uk-1.mirrors.opennms.org:3128/yum/stable/common/opennms/opennms-jmx-config-generator-16.0.4-1.noarch.rpm&quot;&gt;http://uk-1.mirrors.opennms.org:3128/yum/stable/common/opennms/opennms-jmx-config-generator-16.0.4-1.noarch.rpm&lt;/a&gt;<br>
&gt;&nbsp;-&nbsp;TIMEOUT_FIRSTUP_PARENT/108.169.150.249&nbsp;application/x-rpm&lt;/span&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;a&nbsp;second&nbsp;hit,&nbsp;I&nbsp;get&nbsp;the&nbsp;same&nbsp;thing,&nbsp;RELEASE&nbsp;and&nbsp;TCP_MISS.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;white-space:&nbsp;pre;&quot;&gt;&gt;&gt;&gt;&nbsp;Attached&nbsp;is&nbsp;my&nbsp;configuration. &nbsp;Is&nbsp;there&nbsp;something&nbsp;obvious&nbsp;that&nbsp;I'm&nbsp;missing?<br>
&gt;&gt;&gt;&nbsp;maximum_object_size&nbsp;600&nbsp;MB<br>
&gt;&nbsp;I&nbsp;assume&nbsp;you&nbsp;don't&nbsp;mean&nbsp;&quot;it's&nbsp;not&nbsp;caching&nbsp;stuff&nbsp;bigger&nbsp;than&nbsp;600&nbsp;Mb&quot;&nbsp;&lt;/span&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Hah,&nbsp;no. &nbsp;The&nbsp;goal&nbsp;is&nbsp;to&nbsp;cache&nbsp;the&nbsp;most&nbsp;popular&nbsp;RPM&nbsp;and&nbsp;Debian<br>
&nbsp;&nbsp;&nbsp;&nbsp;packages&nbsp;and&nbsp;to&nbsp;spread&nbsp;the&nbsp;load&nbsp;out&nbsp;geographically. &nbsp;Most&nbsp;of&nbsp;them<br>
&nbsp;&nbsp;&nbsp;&nbsp;are&nbsp;somewhere&nbsp;between&nbsp;20-300MB.&nbsp;Unfortunately,&nbsp;right&nbsp;now&nbsp;it&nbsp;seems&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;only&nbsp;cache&nbsp;what&nbsp;fits&nbsp;in&nbsp;memory.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Also,&nbsp;sorry,&nbsp;just&nbsp;noticed&nbsp;this&nbsp;after&nbsp;I'd&nbsp;already&nbsp;reply-all'd:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;white-space:&nbsp;pre;&quot;&gt;&gt;&nbsp;Please&nbsp;reply&nbsp;to&nbsp;the&nbsp;list;<br>
&gt;&nbsp;please&nbsp;*don't*&nbsp;CC&nbsp;me.&lt;/span&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;won't&nbsp;do&nbsp;it&nbsp;again... &nbsp;:/&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
