<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;Hi&lt;br&gt;&lt;br&gt;In&nbsp;the&nbsp;Squid&nbsp;Server,&nbsp;I&nbsp;want&nbsp;only&nbsp;basic&nbsp;authentication.&lt;br&gt;&lt;br&gt;The&nbsp;command:&nbsp;&lt;br&gt;&lt;br&gt;/usr/lib/squid3/basic_ldap_auth&nbsp;\&lt;br&gt;  &nbsp;-b&nbsp;cn=users,dc=empresa,dc=com,dc=br&nbsp;\&lt;br&gt;  &nbsp;-D&nbsp;cn=proxy,cn=users,dc=empresa,dc=com,dc=br&nbsp;-w&nbsp;test_12345&nbsp;\&lt;br&gt;  &nbsp;-h&nbsp;192.168.0.25&nbsp;-p&nbsp;389&nbsp;-s&nbsp;sub&nbsp;-v&nbsp;3&nbsp;-f&nbsp;&quot;sAMAccountName=%s&quot;&lt;br&gt;&lt;br&gt;shows&nbsp;&quot;Success&quot;&nbsp;to&nbsp;authenticate&nbsp;only&nbsp;the&nbsp;users&nbsp;in&nbsp;Organization&nbsp;Unity &nbsp;(OU)&nbsp;&quot;Users&quot;,&nbsp;but&nbsp;in&nbsp;my&nbsp;domain&nbsp;I&nbsp;have&nbsp;many&nbsp;OU&nbsp;that&nbsp;has&nbsp;users&nbsp;as&nbsp;TI,&nbsp;Financial,&nbsp;Sales..&lt;br&gt;&lt;br&gt;How&nbsp;I&nbsp;get&nbsp;authenticate&nbsp;the&nbsp;users&nbsp;in&nbsp;others&nbsp;OU?&lt;br&gt;&lt;br&gt;&lt;/div&gt;Thanks,&lt;br&gt;&lt;br&gt;&lt;/div&gt;Márcio&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2015-12-08&nbsp;6:23&nbsp;GMT-02:00&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&nbsp;target=&quot;_blank&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&lt;/span&gt;:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&gt;On&nbsp;8/12/2015&nbsp;4:00&nbsp;p.m.,&nbsp;Marcio&nbsp;Demetrio&nbsp;Bacci&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;have&nbsp;changed&nbsp;my&nbsp;authentication&nbsp;block&nbsp;as&nbsp;below,&nbsp;but&nbsp;is&nbsp;not&nbsp;working.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;proxy&nbsp;user&nbsp;is&nbsp;a&nbsp;Read&nbsp;Only&nbsp;Domain&nbsp;Controller&nbsp;member.&nbsp;The&nbsp;password&nbsp;is&lt;br&gt;<br>
&gt;&nbsp;correct.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Samba4,&nbsp;krb5-user&nbsp;and&nbsp;winbindd&nbsp;are&nbsp;installed&nbsp;and&nbsp;work&nbsp;perfectly.&nbsp;Do&nbsp;I&nbsp;need&lt;br&gt;<br>
&gt;&nbsp;install&nbsp;any&nbsp;other&nbsp;package?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;What&nbsp;authentication&nbsp;system&nbsp;do&nbsp;you&nbsp;think&nbsp;you&nbsp;are&nbsp;using?&nbsp;Basic&nbsp;or&lt;br&gt;<br>
Kerberos?&nbsp;because&nbsp;you&nbsp;configured&nbsp;Basic.&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;How&nbsp;can&nbsp;I&nbsp;test&nbsp;in&nbsp;command&nbsp;line?&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;Everthign&nbsp;in&nbsp;squid.conf&nbsp;after&nbsp;the&nbsp;&quot;auth_param&nbsp;basic&nbsp;program&nbsp;&quot;&nbsp;is&nbsp;the&lt;br&gt;<br>
command&nbsp;line&nbsp;for&nbsp;the&nbsp;helper.&lt;br&gt;<br>
*&nbsp;Run&nbsp;that&nbsp;command&nbsp;line:&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt; &nbsp;/usr/lib/squid3/basic_ldap_auth&nbsp;\&lt;br&gt;<br>
 &nbsp; -b&nbsp;cn=users,dc=empresa,dc=com,dc=br&nbsp;\&lt;br&gt;<br>
 &nbsp; -D&nbsp;cn=proxy,cn=users,dc=empresa,dc=com,dc=br&nbsp;-w&nbsp;test_12345&nbsp;\&lt;br&gt;<br>
 &nbsp; -h&nbsp;192.168.0.25&nbsp;-p&nbsp;389&nbsp;-s&nbsp;sub&nbsp;-v&nbsp;3&nbsp;-f&nbsp;&quot;sAMAccountName=%s&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;*&nbsp;If&nbsp;nothing&nbsp;happens&nbsp;and&nbsp;it&nbsp;just&nbsp;waits&nbsp;for&nbsp;input,&nbsp;it&nbsp;has&nbsp;started&nbsp;properly.&lt;br&gt;<br>
&lt;br&gt;<br>
*&nbsp;Enter&nbsp;two&nbsp;words&nbsp;on&nbsp;each&nbsp;line,&nbsp;username&nbsp;and&nbsp;password&nbsp;for&nbsp;a&nbsp;user&nbsp;account&lt;br&gt;<br>
which&nbsp;might&nbsp;be&nbsp;using&nbsp;Squid.&nbsp;Try&nbsp;both&nbsp;valid&nbsp;and&nbsp;invalid&nbsp;combos.&lt;br&gt;<br>
&lt;br&gt;<br>
*&nbsp;The&nbsp;helper&nbsp;will&nbsp;reply&nbsp;OK&nbsp;(valid)&nbsp;or&nbsp;ERR&nbsp;(invalid)&nbsp;if&nbsp;it&nbsp;has&nbsp;been&nbsp;a&lt;br&gt;<br>
successful&nbsp;check.&nbsp;BH&nbsp;if&nbsp;there&nbsp;was&nbsp;a&nbsp;failure.&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;Have&nbsp;anything&nbsp;wrong&nbsp;in&nbsp;my&nbsp;authentication&nbsp;block&nbsp;?&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;auth_param&nbsp;basic&nbsp;program&nbsp;/usr/lib/squid3/basic_ldap_auth&nbsp;-b&lt;br&gt;<br>
&gt;&nbsp;cn=users,dc=empresa,dc=com,dc=br&nbsp;-D&lt;br&gt;<br>
&gt;&nbsp;cn=proxy,cn=users,dc=empresa,dc=com,dc=br&nbsp;-w&nbsp;test_12345&nbsp;-h&nbsp;192.168.0.25&nbsp;-p&lt;br&gt;<br>
&gt;&nbsp;389&nbsp;-s&nbsp;sub&nbsp;-v&nbsp;3&nbsp;-f&nbsp;&quot;sAMAccountName=%s&quot;&lt;br&gt;<br>
&gt;&nbsp;auth_param&nbsp;basic&nbsp;children&nbsp;50&lt;br&gt;<br>
&gt;&nbsp;auth_param&nbsp;basic&nbsp;realm&nbsp;Proxy&nbsp;Server&nbsp;Squid&lt;br&gt;<br>
&gt;&nbsp;auth_param&nbsp;basic&nbsp;credentialsttl&nbsp;2&nbsp;hours&lt;br&gt;<br>
&gt;&nbsp;auth_param&nbsp;basic&nbsp;casesensitive&nbsp;off&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;Nothing&nbsp;particularly&nbsp;visible&nbsp;to&nbsp;me.&nbsp;But&nbsp;that&nbsp;said&nbsp;I&#39;m&nbsp;not&nbsp;a&nbsp;regular&nbsp;user&lt;br&gt;<br>
of&nbsp;LDAP,&nbsp;so&nbsp;there&nbsp;could&nbsp;be&nbsp;something&nbsp;subtle&nbsp;hiding&nbsp;in&nbsp;the&nbsp;LDAP&nbsp;query&lt;br&gt;<br>
strings&nbsp;or&nbsp;ither&nbsp;parameters&nbsp;that&nbsp;deos&nbsp;not&nbsp;match&nbsp;what&nbsp;your&nbsp;LDAP&nbsp;service&lt;br&gt;<br>
needs.&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;With&nbsp;the&nbsp;command&nbsp;&quot;ldbsearch&nbsp;-H&nbsp;/opt/samba/private/sam.ldb&lt;br&gt;<br>
&gt;&nbsp;&#39;(objectclass=user)&#39;&nbsp;uidNumber&nbsp;gidNumber&nbsp;&quot;,&nbsp;my&nbsp;result&nbsp;is:&lt;br&gt;<br>
&gt;&nbsp;#&nbsp;record&nbsp;881&lt;br&gt;<br>
&gt;&nbsp;dn:&nbsp;CN=proxy,CN=Users,DC=empresa,DC=com,DC=br&lt;br&gt;<br>
&gt;&nbsp;uidNumber:&nbsp;10558&lt;br&gt;<br>
&gt;&nbsp;gidNumber:&nbsp;30037&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;The&nbsp;U&nbsp;on&nbsp;Users&nbsp;is&nbsp;upper&nbsp;case&nbsp;in&nbsp;this&nbsp;test.&nbsp;It&nbsp;is&nbsp;lower&nbsp;case&nbsp;in&nbsp;your&lt;br&gt;<br>
config&nbsp;file.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;DC/dc&nbsp;CN/cn&nbsp;values&nbsp;are&nbsp;also&nbsp;different&nbsp;case.&nbsp;That&nbsp;might&nbsp;matter&nbsp;to&lt;br&gt;<br>
your&nbsp;LDAP&nbsp;system.&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;either&nbsp;of&nbsp;those&nbsp;turn&nbsp;out&nbsp;to&nbsp;be&nbsp;the&nbsp;problem,&nbsp;then&nbsp;you&nbsp;will&nbsp;need&nbsp;to&nbsp;fix&lt;br&gt;<br>
the&nbsp;-b&nbsp;parameter&nbsp;as&nbsp;well.&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Amos&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
