<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;1.&nbsp;You&#39;re&nbsp;forgetting&nbsp;I&nbsp;only&nbsp;refer&nbsp;specific&nbsp;traffic&nbsp;using&nbsp;/etc/hosts&nbsp;to&nbsp;squid.&lt;/div&gt;&lt;div&gt;2.&nbsp;What&nbsp;do&nbsp;you&nbsp;suggest&nbsp;?&nbsp;I&nbsp;want&nbsp;to&nbsp;use&nbsp;the&nbsp;SNI&nbsp;as&nbsp;the&nbsp;direction&nbsp;of&nbsp;the&nbsp;traffic,&nbsp;not&nbsp;the&nbsp;forwarded&nbsp;IP&nbsp;address.&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Sun,&nbsp;Jan&nbsp;10,&nbsp;2016&nbsp;at&nbsp;6:30&nbsp;AM,&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&nbsp;target=&quot;_blank&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&gt;On&nbsp;9/01/2016&nbsp;7:48&nbsp;a.m.,&nbsp;Nir&nbsp;Krakowski&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;This&nbsp;is&nbsp;what&nbsp;needs&nbsp;to&nbsp;be&nbsp;done&nbsp;to&nbsp;get&nbsp;it&nbsp;to&nbsp;work&nbsp;in&nbsp;squid&nbsp;&gt;3.5&nbsp;in&nbsp;function&lt;br&gt;<br>
&gt;&nbsp;ClientRequestContext::hostHeaderIpVerify(const&nbsp;ipcache_addrs*&nbsp;ia,&nbsp;const&lt;br&gt;<br>
&gt;&nbsp;Dns::LookupDetails&nbsp;&amp;dns):&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;Hell&nbsp;NO!!!!&lt;br&gt;<br>
&lt;br&gt;<br>
clientConn&nbsp;is&nbsp;the&nbsp;state&nbsp;data&nbsp;about&nbsp;the&nbsp;TCP&nbsp;connection&nbsp;the&nbsp;message&lt;br&gt;<br>
arrived&nbsp;on.&nbsp;HTTP&nbsp;and&nbsp;SSL-Bump&nbsp;in&nbsp;no&nbsp;way&nbsp;alter&nbsp;the&nbsp;reality&nbsp;of&nbsp;what&lt;br&gt;<br>
src/dst&nbsp;IPs&nbsp;those&nbsp;TCP&nbsp;packets&nbsp;contain.&lt;br&gt;<br>
&lt;br&gt;<br>
There&nbsp;may&nbsp;be&nbsp;a&nbsp;bug&nbsp;needing&nbsp;a&nbsp;fix,&nbsp;but&nbsp;it&nbsp;absolutely&nbsp;is&nbsp;not&nbsp;that&nbsp;patch.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
By&nbsp;applying&nbsp;that&nbsp;patch&nbsp;you&nbsp;are&nbsp;allowing&nbsp;a&nbsp;remote&nbsp;sender&nbsp;to&nbsp;both&nbsp;bypass&lt;br&gt;<br>
all&nbsp;your&nbsp;Squid&nbsp;protections,&nbsp;and&nbsp;any&nbsp;network&nbsp;firewall&nbsp;security&nbsp;you&nbsp;may&lt;br&gt;<br>
have&nbsp;external&nbsp;to&nbsp;Squid.&nbsp;While&nbsp;simultaneously&nbsp;recording&nbsp;in&nbsp;your&nbsp;Squid&lt;br&gt;<br>
logs&nbsp;any&nbsp;value&nbsp;of&nbsp;its&nbsp;choosing&nbsp;for&nbsp;the&nbsp;destination&nbsp;IPs&nbsp;of&nbsp;its&nbsp;attack&lt;br&gt;<br>
traffic.&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
Amos&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/font&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
