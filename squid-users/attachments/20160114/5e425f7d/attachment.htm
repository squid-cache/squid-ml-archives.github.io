<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;&lt;br&gt;<br>
You&nbsp;*must*&nbsp;perform&nbsp;the&nbsp;NAT&nbsp;on&nbsp;the&nbsp;machine&nbsp;Squid&nbsp;is&nbsp;running&nbsp;on&nbsp;for&nbsp;intercept&lt;br&gt;<br>
mode&nbsp;to&nbsp;work.&lt;br&gt;<br>
&lt;br&gt;<br>
Doing&nbsp;it&nbsp;on&nbsp;any&nbsp;other&nbsp;router&nbsp;along&nbsp;the&nbsp;way&nbsp;will&nbsp;not&nbsp;work.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Unless&nbsp;I&#39;m&nbsp;missing&nbsp;something,&nbsp;I&#39;d&nbsp;phrase&nbsp;this&nbsp;differently:&nbsp;the&nbsp;NAT&nbsp;must&nbsp;not&nbsp;be&nbsp;performed&nbsp;between&nbsp;the&nbsp;client&nbsp;and&nbsp;Squid.&nbsp;Squid&nbsp;is&nbsp;indifferent&nbsp;if&nbsp;NAT&nbsp;occurs&nbsp;between&nbsp;itself&nbsp;and&nbsp;the&nbsp;server.&nbsp;So&nbsp;it&#39;s&nbsp;a&nbsp;matter&nbsp;of&nbsp;placing&nbsp;the&nbsp;two&nbsp;functions&nbsp;in&nbsp;the&nbsp;right&nbsp;order&nbsp;along&nbsp;the&nbsp;network&nbsp;path.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;(Example:&nbsp;my&nbsp;VDSL&nbsp;modem&nbsp;performs&nbsp;NAT,&nbsp;and&nbsp;the&nbsp;intercepting&nbsp;Squid&nbsp;instance&nbsp;on&nbsp;my&nbsp;Linux&nbsp;LAN&nbsp;gateway&nbsp;box&nbsp;neither&nbsp;knows&nbsp;nor&nbsp;cares.)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;your&nbsp;router&nbsp;is&nbsp;some&nbsp;kind&nbsp;of&nbsp;Unix-like&nbsp;box,&nbsp;putting&nbsp;Squid&nbsp;on&nbsp;it&nbsp;may&nbsp;be&nbsp;the&nbsp;most&nbsp;convenient&nbsp;path.&nbsp;If&nbsp;the&nbsp;router&nbsp;is&nbsp;underpowered,&nbsp;the&nbsp;local&nbsp;squid&nbsp;can&nbsp;(often)&nbsp;be&nbsp;set&nbsp;up&nbsp;to&nbsp;avoid&nbsp;heavy&nbsp;lifting,&nbsp;with&nbsp;only&nbsp;a&nbsp;small&nbsp;RAM&nbsp;cache,&nbsp;and&nbsp;forward&nbsp;everything&nbsp;to&nbsp;its&nbsp;smarter&nbsp;parent.&nbsp;(I&nbsp;haven&#39;t&nbsp;tried&nbsp;this&nbsp;on&nbsp;anything&nbsp;in&nbsp;the&nbsp;low&nbsp;horsepower&nbsp;+&nbsp;high&nbsp;traffic&nbsp;realm,&nbsp;though.)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;For&nbsp;a&nbsp;&quot;real&quot;&nbsp;router&nbsp;like&nbsp;a&nbsp;Cisco&nbsp;box,&nbsp;you&nbsp;can&nbsp;configure&nbsp;it&nbsp;to&nbsp;route&nbsp;appropriate&nbsp;traffic&nbsp;to&nbsp;the&nbsp;Squid&nbsp;box&nbsp;before&nbsp;performing&nbsp;NAT,&nbsp;using&nbsp;WCCP&nbsp;or&nbsp;policy-based&nbsp;routing,&nbsp;and&nbsp;let&nbsp;the&nbsp;router&nbsp;perform&nbsp;the&nbsp;NAT&nbsp;itself&nbsp;on&nbsp;the&nbsp;output&nbsp;of&nbsp;the&nbsp;Squid&nbsp;box.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Good&nbsp;luck!&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Robert&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;-- &lt;br&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Robert&nbsp;Plamondon&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:robert@plamondon.com&quot;&nbsp;target=&quot;_blank&quot;&gt;robert@plamondon.com&lt;/a&gt; &lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Some&nbsp;of&nbsp;my&nbsp;web&nbsp;sites:&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://nortoncreekfarm.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://nortoncreekfarm.com&lt;/a&gt;.&nbsp;Our&nbsp;free-range&nbsp;chicken/egg&nbsp;farm.&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://nortoncreekpress.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://nortoncreekpress.com&lt;/a&gt;.&nbsp;My&nbsp;little&nbsp;publishing&nbsp;house,&nbsp;mostly&nbsp;farming&nbsp;books.&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://hypnosis-corvallis.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://hypnosis-corvallis.com&lt;/a&gt;.&nbsp;My&nbsp;hypnotherapy&nbsp;site.&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://unlicensed-practitioner.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://unlicensed-practitioner.com&lt;/a&gt;.&nbsp;Resources&nbsp;for&nbsp;Oregon&#39;s&nbsp;alternative/exempt&nbsp;practitioners.&lt;br&gt;&lt;a&nbsp;href=&quot;http://plamondon.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://plamondon.com&lt;/a&gt;.&nbsp;My&nbsp;main&nbsp;site,&nbsp;with&nbsp;lots&nbsp;of&nbsp;poultry&nbsp;info.&lt;br&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;http://karls-diabetes.blogspot.com/2011/11/keeping-carbs-down-and-ultimate-pbj.html&quot;&nbsp;target=&quot;_blank&quot;&gt;http://karls-diabetes.blogspot.com&lt;/a&gt;.&nbsp;Adventures&nbsp;with&nbsp;an&nbsp;autistic/diabetic&nbsp;child.&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;<br>

</tt>
