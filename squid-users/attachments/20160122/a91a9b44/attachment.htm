<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;I&#39;m&nbsp;not&nbsp;sure&nbsp;that&nbsp;this&nbsp;script&nbsp;will&nbsp;work.&nbsp;The&nbsp;script&nbsp;isn&#39;t&nbsp;doing&nbsp;much&nbsp;more&nbsp;then&nbsp;adding&nbsp;an&nbsp;unstable&nbsp;entry&nbsp;to&nbsp;the&nbsp;sources&nbsp;list&nbsp;and&nbsp;trying&nbsp;to&nbsp;&lt;b&gt;_install_&lt;/b&gt;&nbsp;the&nbsp;dependencies&nbsp;(Yes,&nbsp;apt-get&nbsp;build-deb&nbsp;squid&nbsp;will&nbsp;install&nbsp;the&nbsp;depencies&nbsp;directly&nbsp;on&nbsp;my&nbsp;debian&nbsp;jessie&nbsp;system)&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;As&nbsp;I&nbsp;described&nbsp;before:&nbsp;This&nbsp;will&nbsp;not&nbsp;work,&nbsp;because&nbsp;of&nbsp;the&nbsp;missing&nbsp;libecap3&nbsp;that&nbsp;could&nbsp;not&nbsp;be&nbsp;installed&nbsp;on&nbsp;a&nbsp;stable&nbsp;debian&nbsp;without&nbsp;installing&nbsp;a&nbsp;bunch&nbsp;of&nbsp;other&nbsp;dependencies.&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;L.P.H.&nbsp;van&nbsp;Belle&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:belle@bazuin.nl&quot;&gt;belle@bazuin.nl&lt;/a&gt;&gt;&nbsp;schrieb&nbsp;am&nbsp;Fr.,&nbsp;22.&nbsp;Jan.&nbsp;2016&nbsp;um&nbsp;16:46 Uhr:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;No,&nbsp;this&nbsp;is&nbsp;NOT&nbsp;a&nbsp;problem&nbsp;at&nbsp;all.&lt;br&gt;<br>
You&nbsp;need&nbsp;4&nbsp;!&nbsp;files&nbsp;and&nbsp;no&nbsp;other&nbsp;sid&nbsp;depends,&nbsp;just&nbsp;debian&nbsp;Jessie.&lt;br&gt;<br>
Its&nbsp;a&nbsp;quick&nbsp;write,&nbsp;but&nbsp;should&nbsp;be&nbsp;error&nbsp;free,&nbsp;tested&nbsp;until&nbsp;the&nbsp;squid&nbsp;compile.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;use&nbsp;a&nbsp;separated&nbsp;VM&nbsp;for&nbsp;this&nbsp;and&nbsp;all&nbsp;my&nbsp;created&nbsp;debs&nbsp;are&nbsp;available&nbsp;throuh&nbsp;webaccess,&nbsp;like&nbsp;normal,&nbsp;below&nbsp;is&nbsp;based&nbsp;on&nbsp;&quot;local&nbsp;install&quot;&nbsp;if&nbsp;you&nbsp;want&nbsp;to&nbsp;have&nbsp;is&nbsp;network&nbsp;available,&nbsp;look&nbsp;het&nbsp;het&nbsp;apt/sources.list.d/lcoalrepo.list,&lt;br&gt;<br>
change&nbsp;to&nbsp;needed&nbsp;hostname&nbsp;for&nbsp;your&nbsp;webserver&nbsp;etc..&nbsp;not&nbsp;explained&nbsp;here..&lt;br&gt;<br>
but&nbsp;should&nbsp;be&nbsp;easy&nbsp;to&nbsp;do.&lt;br&gt;<br>
&lt;br&gt;<br>
Create&nbsp;a&nbsp;file,&nbsp;add&nbsp;content&nbsp;below&nbsp;(&nbsp;sed&nbsp;CODE&nbsp;),&lt;br&gt;<br>
chmod&nbsp;+x&nbsp;and&nbsp;run&nbsp;it.&nbsp;(as&nbsp;root)&lt;br&gt;<br>
&lt;br&gt;<br>
In&nbsp;the&nbsp;end&nbsp;you&nbsp;have&nbsp;a&nbsp;compiled&nbsp;squid&nbsp;3.5.12,&nbsp;ready&nbsp;to&nbsp;instal&nbsp;with&nbsp;ssl&nbsp;enabled.&nbsp;Which&nbsp;is&nbsp;just&nbsp;a&nbsp;apt-get&nbsp;install&nbsp;squid&nbsp;then.&lt;br&gt;<br>
And&nbsp;!!&nbsp;all&nbsp;squid3&nbsp;is&nbsp;now&nbsp;changed&nbsp;to&nbsp;squid&nbsp;!!&lt;br&gt;<br>
&lt;br&gt;<br>
Enjoy,&nbsp;and&nbsp;have&nbsp;a&nbsp;nice&nbsp;weekend,&lt;br&gt;<br>
&lt;br&gt;<br>
Greetz,&lt;br&gt;<br>
&lt;br&gt;<br>
Louis&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
###&nbsp;CODE,&nbsp;run&nbsp;as&nbsp;root,&nbsp;can&nbsp;be&nbsp;beter,&nbsp;but&nbsp;a&nbsp;quicky&nbsp;for&nbsp;you.&lt;br&gt;<br>
#!/bin/bash&lt;br&gt;<br>
&lt;br&gt;<br>
SETPATH=`pwd`&lt;br&gt;<br>
if&nbsp;[&nbsp;!&nbsp;-e&nbsp;/etc/apt/sources.list.d/sid.list&nbsp;];&nbsp;then&lt;br&gt;<br>
#&nbsp;adding&nbsp;sid&nbsp;repo&lt;br&gt;<br>
cat&nbsp;&lt;&lt;&nbsp;EOF&nbsp;&gt;&gt;&nbsp;/etc/apt/sources.list.d/sid.list&lt;br&gt;<br>
#&lt;br&gt;<br>
#deb&nbsp;&lt;a&nbsp;href=&quot;http://ftp.nl.debian.org/debian/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://ftp.nl.debian.org/debian/&lt;/a&gt;&nbsp;sid&nbsp;main&nbsp;non-free&nbsp;contrib&lt;br&gt;<br>
deb-src&nbsp;&lt;a&nbsp;href=&quot;http://ftp.nl.debian.org/debian/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://ftp.nl.debian.org/debian/&lt;/a&gt;&nbsp;sid&nbsp;main&nbsp;non-free&nbsp;contrib&lt;br&gt;<br>
EOF&lt;br&gt;<br>
fi&lt;br&gt;<br>
&lt;br&gt;<br>
if&nbsp;[&nbsp;!&nbsp;-e&nbsp;/etc/apt/sources.list.d/localrepo.list&nbsp;];&nbsp;then&lt;br&gt;<br>
#&nbsp;adding&nbsp;local&nbsp;repo&nbsp;(&nbsp;webserver&nbsp;based&nbsp;)&lt;br&gt;<br>
cat&nbsp;&lt;&lt;&nbsp;EOF&nbsp;&gt;&gt;&nbsp;/etc/apt/sources.list.d/localrepo.list&lt;br&gt;<br>
#&lt;br&gt;<br>
#&nbsp;change&nbsp;if&nbsp;you&nbsp;done&nbsp;have&nbsp;a&nbsp;webserver.&lt;br&gt;<br>
#file:/var/www/mydebs&nbsp;./&lt;br&gt;<br>
deb&nbsp;&lt;a&nbsp;href=&quot;http://localhost/mydebs/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://localhost/mydebs/&lt;/a&gt;&nbsp;./&lt;br&gt;<br>
EOF&lt;br&gt;<br>
&lt;br&gt;<br>
fi&lt;br&gt;<br>
&lt;br&gt;<br>
if&nbsp;[&nbsp;!&nbsp;-e&nbsp;/var/www/mydebs&nbsp;];&nbsp;then&lt;br&gt;<br>
#&nbsp;get&nbsp;dependes,&nbsp;sources&nbsp;and&nbsp;build&nbsp;sources,&nbsp;setup&nbsp;local&nbsp;apt.&lt;br&gt;<br>
mkdir&nbsp;-p &nbsp;/var/www/mydebs&lt;br&gt;<br>
apt-get&nbsp;install&nbsp;dpkg-dev&nbsp;-y&lt;br&gt;<br>
fi&lt;br&gt;<br>
&lt;br&gt;<br>
for&nbsp;x&nbsp;in&nbsp;c-icap&nbsp;c-icap-modules&nbsp;libecap&nbsp;squid&nbsp;;&nbsp;do&lt;br&gt;<br>
apt-get&nbsp;build-dep&nbsp;$x&lt;br&gt;<br>
apt-get&nbsp;source&nbsp;$x&lt;br&gt;<br>
if&nbsp;[&nbsp;$x&nbsp;=&nbsp;squid&nbsp;];&nbsp;then&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;sed&nbsp;-i&nbsp;&#39;s/--with-default-user=proxy/--with-default-user=proxy&nbsp;\\/g&#39;&nbsp;squid3-3.5.12/debian/rules&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;sed&nbsp;-i&nbsp;&#39;/with-default-user=proxy/a&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;--enable-ssl&nbsp;\\&#39; &nbsp;squid3-3.5.12/debian/rules&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;sed&nbsp;-i&nbsp;&#39;/enable-ssl/a&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;--with-open-ssl=/etc/ssl/openssl.cnf&nbsp;\\&#39; &nbsp;squid3-3.5.12/debian/rules&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;sed&nbsp;-i&nbsp;&#39;/with-open-ssl/a&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;\&nbsp;--enable-linux-netfilter&#39; &nbsp;squid3-3.5.12/debian/rules&lt;br&gt;<br>
fi&lt;br&gt;<br>
apt-get&nbsp;source&nbsp;$x&nbsp;-b&lt;br&gt;<br>
&lt;br&gt;<br>
cp&nbsp;*.deb&nbsp;/var/www/mydebs&lt;br&gt;<br>
cd&nbsp;/var/www/mydebs&lt;br&gt;<br>
dpkg-scanpackages&nbsp;.&nbsp;/dev/null&nbsp;|&nbsp;gzip&nbsp;-9c&nbsp;&gt;&nbsp;Packages.gz&lt;br&gt;<br>
cd&nbsp;$SETPATH&lt;br&gt;<br>
echo&nbsp;&quot;Running&nbsp;apt-get&nbsp;update,&nbsp;please&nbsp;wait.&quot;&lt;br&gt;<br>
apt-get&nbsp;update&nbsp;2&gt;&nbsp;/dev/null&lt;br&gt;<br>
sleep&nbsp;1&lt;br&gt;<br>
done&lt;br&gt;<br>
&lt;br&gt;<br>
##&nbsp;CODE&nbsp;ENDS,.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
