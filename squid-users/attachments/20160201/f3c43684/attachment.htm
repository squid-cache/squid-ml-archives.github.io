<tt>
&lt;html&nbsp;xmlns:o=&quot;urn:schemas-microsoft-com:office:office&quot;&nbsp;xmlns:w=&quot;urn:schemas-microsoft-com:office:word&quot;&nbsp;xmlns:m=&quot;http://schemas.microsoft.com/office/2004/12/omml&quot;&nbsp;xmlns=&quot;http://www.w3.org/TR/REC-html40&quot;&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=Content-Type&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;&lt;meta&nbsp;name=Generator&nbsp;content=&quot;Microsoft&nbsp;Word&nbsp;15&nbsp;(filtered&nbsp;medium)&quot;&gt;&lt;style&gt;&lt;!--<br>
/*&nbsp;Font&nbsp;Definitions&nbsp;*/<br>
@font-face<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{font-family:&quot;Cambria&nbsp;Math&quot;;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;panose-1:2&nbsp;4&nbsp;5&nbsp;3&nbsp;5&nbsp;4&nbsp;6&nbsp;3&nbsp;2&nbsp;4;}<br>
@font-face<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{font-family:Calibri;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;panose-1:2&nbsp;15&nbsp;5&nbsp;2&nbsp;2&nbsp;2&nbsp;4&nbsp;3&nbsp;2&nbsp;4;}<br>
/*&nbsp;Style&nbsp;Definitions&nbsp;*/<br>
p.MsoNormal,&nbsp;li.MsoNormal,&nbsp;div.MsoNormal<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{margin:0in;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;margin-bottom:.0001pt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-size:11.0pt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-family:&quot;Calibri&quot;,sans-serif;}<br>
a:link,&nbsp;span.MsoHyperlink<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{mso-style-priority:99;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color:blue;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text-decoration:underline;}<br>
a:visited,&nbsp;span.MsoHyperlinkFollowed<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{mso-style-priority:99;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color:#954F72;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text-decoration:underline;}<br>
.MsoChpDefault<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{mso-style-type:export-only;}<br>
@page&nbsp;WordSection1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{size:8.5in&nbsp;11.0in;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;margin:1.0in&nbsp;1.0in&nbsp;1.0in&nbsp;1.0in;}<br>
div.WordSection1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{page:WordSection1;}<br>
--&gt;&lt;/style&gt;&lt;/head&gt;&lt;body&nbsp;lang=EN-US&nbsp;link=blue&nbsp;vlink=&quot;#954F72&quot;&gt;&lt;div&nbsp;class=WordSection1&gt;&lt;p&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;Hello&nbsp;everyone&nbsp;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;I'm&nbsp;a&nbsp;newbie&nbsp;regarding&nbsp;SQUID&nbsp;and&nbsp;in&nbsp;general&nbsp;on&nbsp;Linux.&nbsp;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;I&nbsp;have&nbsp;an&nbsp;Active&nbsp;Directory&nbsp;environment&nbsp;(Windows&nbsp;Server&nbsp;2012&nbsp;R2)&nbsp;and&nbsp;a&nbsp;Linux&nbsp;Debian&nbsp;8&nbsp;Jessie&nbsp;configured&nbsp;in&nbsp;the&nbsp;same&nbsp;network.&nbsp;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;My&nbsp;goal&nbsp;is&nbsp;to&nbsp;install&nbsp;SQUID&nbsp;on&nbsp;Debian,&nbsp;integrate&nbsp;with&nbsp;Active&nbsp;Directory&nbsp;using&nbsp;Kerberos&nbsp;and&nbsp;autohise&nbsp;users&nbsp;to&nbsp;use&nbsp;SQUID&nbsp;based&nbsp;on&nbsp;Active&nbsp;Directory&nbsp;asecurity&nbsp;group&nbsp;membership&nbsp;lookup.&nbsp;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;Long&nbsp;story&nbsp;short,&nbsp;I&nbsp;followed&nbsp;the&nbsp;instructions&nbsp;here&nbsp;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;http://wiki.bitbinary.com/index.php/Active_Directory_Integrated_Squid_Proxy#Configure_Squid&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;&lt;b&gt;My&nbsp;test&nbsp;environment:&lt;o:p&gt;&lt;/o:p&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;Active&nbsp;Directory&nbsp;domain:&nbsp;KIDANEMEHRET.LOCAL&nbsp;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;test&nbsp;user:&nbsp;KIDANEMEHRET\test-full&nbsp;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;Security&nbsp;groups&nbsp;which&nbsp;is&nbsp;member&nbsp;of:&nbsp;&quot;Internet&nbsp;Users&nbsp;Full&quot;,&nbsp;&quot;Internet&nbsp;Users&nbsp;Standard&quot;&nbsp;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;&lt;b&gt;Test&nbsp;done&lt;o:p&gt;&lt;/o:p&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;After&nbsp;having&nbsp;&nbsp;properly&nbsp;configured&nbsp;my&nbsp;test&nbsp;client&nbsp;(Windows&nbsp;7&nbsp;joined&nbsp;to&nbsp;the&nbsp;domain),&nbsp;logged&nbsp;on&nbsp;with&nbsp;the&nbsp;test&nbsp;user&nbsp;KIDANEMEHRET\test-full,&nbsp;configured&nbsp;internet&nbsp;explorer&nbsp;to&nbsp;use&nbsp;the&nbsp;proxy,&nbsp;what&nbsp;I&nbsp;get&nbsp;everytime&nbsp;I&nbsp;try&nbsp;to&nbsp;browse&nbsp;the&nbsp;internet&nbsp;is&nbsp;a&nbsp;SQUID&nbsp;page&nbsp;telling&nbsp;me&nbsp;Access&nbsp;Denied.&nbsp;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;&lt;b&gt;Quick&nbsp;Analisys&lt;o:p&gt;&lt;/o:p&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;Having&nbsp;a&nbsp;look&nbsp;at&nbsp;access.log&nbsp;and&nbsp;cache.log&nbsp;(see&nbsp;attached),&nbsp;I&nbsp;understand&nbsp;that&nbsp;user&nbsp;is&nbsp;properly&nbsp;authenticated&nbsp;(I&nbsp;see&nbsp;KIDANEMEHRET\test-full&nbsp;properly&nbsp;written&nbsp;in&nbsp;each&nbsp;log).&nbsp;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;For&nbsp;this&nbsp;reason&nbsp;I&nbsp;suspect&nbsp;the&nbsp;problem&nbsp;is&nbsp;in&nbsp;the&nbsp;authorisation&nbsp;part.&nbsp;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;I&nbsp;try&nbsp;then&nbsp;to&nbsp;run&nbsp;from&nbsp;terminal&nbsp;the&nbsp;program&nbsp;used&nbsp;in&nbsp;SQUID.CONF&nbsp;to&nbsp;check&nbsp;authorisation&nbsp;(based&nbsp;on&nbsp;the&nbsp;wiki&nbsp;too);&nbsp;note&nbsp;that&nbsp;I'm&nbsp;running&nbsp;with&nbsp;sudo&nbsp;otherwise&nbsp;with&nbsp;standard&nbsp;use&nbsp;I&nbsp;get&nbsp;no&nbsp;access&nbsp;to&nbsp;password&nbsp;file:&nbsp;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;sudo&nbsp;/usr/lib/squid3/ext_ldap_group_acl&nbsp;-R&nbsp;-K&nbsp;-S&nbsp;-b&nbsp;&quot;dc=kidanemehret,dc=local&quot;&nbsp;-D&nbsp;squid@kidanemehret.local&nbsp;-W&nbsp;/etc/squid3/ldappass.txt&nbsp;-f&nbsp;&quot;(&amp;(objectclass=person)(sAMAccountName=%v)&nbsp;(memberof=cn=%g,ou=Service&nbsp;Accounts,ou=USR,dc=kidanemehret,dc=local))&quot;&nbsp;-h&nbsp;domcon.kidanemehret.local&nbsp;test-full&nbsp;Internet%20Users%20Full&nbsp;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;Do&nbsp;not&nbsp;get&nbsp;any&nbsp;result:&nbsp;waiting&nbsp;for&nbsp;minutes...&nbsp;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;Try&nbsp;to&nbsp;use&nbsp;KIDANEMEHRET\test-full&nbsp;instead&nbsp;of&nbsp;test-full&nbsp;without&nbsp;success.&nbsp;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;Most&nbsp;likely&nbsp;the&nbsp;problem&nbsp;is&nbsp;here.&nbsp;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;Do&nbsp;you&nbsp;have&nbsp;any&nbsp;suggestion&nbsp;on&nbsp;how&nbsp;to&nbsp;proceed&nbsp;next?&nbsp;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;&lt;span&nbsp;lang=IT&gt;Here&nbsp;you&nbsp;can&nbsp;find&nbsp;ACCESS.LOG,&nbsp;CACHE.LOG,&nbsp;KRB5.CONF&nbsp;and&nbsp;SQUID.CONF&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;&lt;span&nbsp;lang=IT&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;&lt;a&nbsp;href=&quot;http://1drv.ms/1nHDRXH&quot;&gt;&lt;span&nbsp;style='font-size:12.0pt;font-family:&quot;Times&nbsp;New&nbsp;Roman&quot;,serif'&gt;http://1drv.ms/1nHDRXH&lt;/span&gt;&lt;/a&gt;&lt;span&nbsp;style='font-size:12.0pt;font-family:&quot;Times&nbsp;New&nbsp;Roman&quot;,serif'&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;&lt;span&nbsp;style='font-size:12.0pt;font-family:&quot;Times&nbsp;New&nbsp;Roman&quot;,serif'&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;&lt;span&nbsp;lang=IT&nbsp;style='font-size:12.0pt;font-family:&quot;Times&nbsp;New&nbsp;Roman&quot;,serif'&gt;Thanks&nbsp;in&nbsp;advance&lt;/span&gt;&lt;span&nbsp;style='font-size:12.0pt;font-family:&quot;Times&nbsp;New&nbsp;Roman&quot;,serif'&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=MsoNormal&gt;&lt;span&nbsp;style='font-size:12.0pt;font-family:&quot;Times&nbsp;New&nbsp;Roman&quot;,serif'&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
