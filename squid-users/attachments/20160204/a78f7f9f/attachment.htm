<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;text=&quot;#000000&quot;&nbsp;bgcolor=&quot;#FFFFFF&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;04.02.2016&nbsp;14:22,&nbsp;Amos&nbsp;Jeffries&nbsp;wrote:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;cite=&quot;mid:56B350A8.30703@treenet.co.nz&quot;&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;On&nbsp;5/02/2016&nbsp;12:41&nbsp;a.m.,&nbsp;Stefan&nbsp;HÃ¶lzle&nbsp;wrote:<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Hello,<br>
<br>
I'm&nbsp;using&nbsp;a&nbsp;squid&nbsp;configured&nbsp;as&nbsp;proxy.<br>
According&nbsp;to&nbsp;the&nbsp;cache&nbsp;log,&nbsp;squid&nbsp;is&nbsp;doing&nbsp;a&nbsp;reverse&nbsp;dns&nbsp;lookup&nbsp;for<br>
client&nbsp;ips:<br>
<br>
78,3|&nbsp;dns_internal.cc(1794)&nbsp;idnsPTRLookup:&nbsp;idnsPTRLookup:&nbsp;buf&nbsp;is&nbsp;42<br>
bytes&nbsp;for&nbsp;SOME_SOURCE_IP<br>
<br>
I'm&nbsp;only&nbsp;using&nbsp;the&nbsp;following&nbsp;configuration&nbsp;parameters&nbsp;that&nbsp;might&nbsp;be<br>
relevant&nbsp;for&nbsp;this&nbsp;issue.<br>
external_acl_type<br>
acl&nbsp;aclname&nbsp;src<br>
acl&nbsp;aclname&nbsp;dst<br>
acl&nbsp;aclname&nbsp;dstdom_regex<br>
acl&nbsp;aclname&nbsp;port<br>
acl&nbsp;aclname&nbsp;proxy_auth<br>
acl&nbsp;aclname&nbsp;external<br>
acl&nbsp;aclname&nbsp;url_regex<br>
<br>
Any&nbsp;ideas&nbsp;why&nbsp;squid&nbsp;is&nbsp;doing&nbsp;PTR&nbsp;lookups&nbsp;anyway&nbsp;?<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;<br>
Because&nbsp;that&nbsp;list&nbsp;is&nbsp;incomplete.<br>
<br>
The&nbsp;format&nbsp;parameters&nbsp;for&nbsp;external_acl_type,&nbsp;any&nbsp;*_extras&nbsp;rules&nbsp;for<br>
helper&nbsp;formats,&nbsp;and&nbsp;logformat&nbsp;rules&nbsp;also&nbsp;may&nbsp;make&nbsp;use&nbsp;of&nbsp;the&nbsp;client<br>
hostname&nbsp;(if&nbsp;any).<br>
<br>
Also,&nbsp;anyone&nbsp;viewing&nbsp;the&nbsp;cachemanager&nbsp;clientdb&nbsp;report&nbsp;will&nbsp;trigger&nbsp;some<br>
as&nbsp;the&nbsp;report&nbsp;is&nbsp;generated.<br>
<br>
Amos<br>
<br>
_______________________________________________<br>
squid-users&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Thanks&nbsp;for&nbsp;the&nbsp;quick&nbsp;reply&nbsp;Amos.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Used&nbsp;formats&nbsp;for&nbsp;external_acl_type&nbsp;are:&nbsp;%LOGIN,&nbsp;%SRC&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;There&nbsp;are&nbsp;no&nbsp;*_extras&nbsp;rules&nbsp;defined&nbsp;(&lt;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;href=&quot;http://www.squid-cache.org/Doc/config/store_id_extras/&quot;&gt;store_id_extras&lt;/a&gt;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;href=&quot;http://www.squid-cache.org/Doc/config/url_rewrite_extras/&quot;&gt;url_rewrite_extras&lt;/a&gt;)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;logformat&nbsp;defaults&nbsp;are&nbsp;used&nbsp;(there&nbsp;should&nbsp;be&nbsp;nothing&nbsp;in&nbsp;there<br>
&nbsp;&nbsp;&nbsp;&nbsp;responsible&nbsp;for&nbsp;a&nbsp;ptr&nbsp;lookup)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;guess&nbsp;its&nbsp;the&nbsp;cachemanager&nbsp;then.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;There&nbsp;are&nbsp;actually&nbsp;PTR&nbsp;results&nbsp;listed&nbsp;in&nbsp;the&nbsp;client_list&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;cachemanager.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;tried&nbsp;blocking&nbsp;access&nbsp;to&nbsp;the&nbsp;cachemanager&nbsp;by&nbsp;adding&nbsp;the&nbsp;folling<br>
&nbsp;&nbsp;&nbsp;&nbsp;rule:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;http_access&nbsp;deny&nbsp;manager&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;However,&nbsp;squid&nbsp;still&nbsp;does&nbsp;PTR&nbsp;lookups.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;How&nbsp;can&nbsp;I&nbsp;prevent&nbsp;the&nbsp;clientdb&nbsp;reports&nbsp;to&nbsp;be&nbsp;generated&nbsp;?&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
