<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;was&nbsp;wondering&nbsp;if&nbsp;it&nbsp;is&nbsp;possible&nbsp;to&nbsp;filter&nbsp;HTTPS&nbsp;URLs&nbsp;using&nbsp;squid&nbsp;(for&nbsp;example&nbsp;to&nbsp;blacklist&nbsp;&lt;a&nbsp;href=&quot;http://reddit.com&quot;&gt;reddit.com&lt;/a&gt;&nbsp;but&nbsp;allow&nbsp;&lt;a&nbsp;href=&quot;https://www.reddit.com/r/news/&quot;&gt;https://www.reddit.com/r/news/&lt;/a&gt;)?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;thought&nbsp;this&nbsp;may&nbsp;be&nbsp;possible&nbsp;using&nbsp;ssl_bump&nbsp;and&nbsp;url_regex.&nbsp;I&nbsp;have&nbsp;been&nbsp;trying&nbsp;this&nbsp;using&nbsp;squid&nbsp;3.5.13&nbsp;but&nbsp;with&nbsp;no&nbsp;success.&lt;/div&gt;&lt;div&gt;<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
&lt;p&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&gt;Here&nbsp;is&nbsp;the&nbsp;squid&nbsp;configuration&nbsp;that&nbsp;I&nbsp;have&nbsp;tried&nbsp;but&nbsp;doesn&#39;t&nbsp;seem&nbsp;to&nbsp;work&nbsp;(it&nbsp;works&nbsp;for&nbsp;http&nbsp;sites&nbsp;though):&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&gt;acl&nbsp;localnet&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://10.0.0.0/8&quot;&gt;10.0.0.0/8&lt;/a&gt;&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;#&nbsp;RFC1918&nbsp;possible&nbsp;internal&nbsp;network&lt;br&gt;&lt;/span&gt;acl&nbsp;localnet&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://172.16.0.0/12&quot;&gt;172.16.0.0/12&lt;/a&gt;&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;#&nbsp;RFC1918&nbsp;possible&nbsp;internal&nbsp;network&lt;br&gt;acl&nbsp;localnet&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://192.168.0.0/16&quot;&gt;192.168.0.0/16&lt;/a&gt;&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;#&nbsp;RFC1918&nbsp;possible&nbsp;internal&nbsp;network&lt;br&gt;acl&nbsp;localnet&nbsp;src&nbsp;fc00::/7&nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;RFC&nbsp;4193&nbsp;local&nbsp;private&nbsp;network&nbsp;range&lt;br&gt;acl&nbsp;localnet&nbsp;src&nbsp;fe80::/10 &nbsp; &nbsp; &nbsp;#&nbsp;RFC&nbsp;4291&nbsp;link-local&nbsp;(directly&nbsp;plugged)&nbsp;machines&lt;br&gt;&lt;br&gt;acl&nbsp;SSL_ports&nbsp;port&nbsp;443&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;80&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;#&nbsp;http&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;21&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;#&nbsp;ftp&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;443&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;#&nbsp;https&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;70&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;#&nbsp;gopher&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;210&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;#&nbsp;wais&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;1025-65535&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;#&nbsp;unregistered&nbsp;ports&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;280&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;#&nbsp;http-mgmt&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;488&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;#&nbsp;gss-http&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;591&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;#&nbsp;filemaker&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;777&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;#&nbsp;multiling&nbsp;http&lt;br&gt;acl&nbsp;CONNECT&nbsp;method&nbsp;CONNECT&lt;br&gt;&lt;br&gt;http_access&nbsp;deny&nbsp;!Safe_ports&lt;br&gt;http_access&nbsp;deny&nbsp;CONNECT&nbsp;!SSL_ports&lt;br&gt;http_access&nbsp;allow&nbsp;localhost&nbsp;manager&lt;br&gt;http_access&nbsp;deny&nbsp;manager&lt;br&gt;&lt;br&gt;acl&nbsp;whitelist-regex&nbsp;url_regex&nbsp;-i&nbsp;&lt;a&nbsp;href=&quot;http://reddit.com/r/news&quot;&gt;reddit.com/r/news&lt;/a&gt;&lt;br&gt;http_port&nbsp;3129&nbsp;ssl-bump&nbsp;cert=/opt/squid-3.5.13/etc/squid3/ssl_cert/myCA.pem&nbsp;generate-host-certificates=on&nbsp;dynamic_cert_mem_cache_size=4MB&lt;br&gt;acl&nbsp;bump_sites&nbsp;ssl::server_name&nbsp;.&lt;a&nbsp;href=&quot;http://reddit.com&quot;&gt;reddit.com&lt;/a&gt;&lt;br&gt;ssl_bump&nbsp;bump&nbsp;bump_sites&lt;br&gt;ssl_bump&nbsp;splice&nbsp;!bump_sites&lt;br&gt;http_access&nbsp;allow&nbsp;whitelist-regex&lt;br&gt;http_access&nbsp;allow&nbsp;localhost&lt;br&gt;http_access&nbsp;deny&nbsp;all&lt;br&gt;coredump_dir&nbsp;/opt/squid-3.5.13/var/spool/squid3&lt;br&gt;refresh_pattern&nbsp;^ftp:&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;1440&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;20%&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&lt;/span&gt;10080&lt;br&gt;refresh_pattern&nbsp;^gopher:&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;1440&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;0%&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;1440&lt;br&gt;refresh_pattern&nbsp;-i&nbsp;(/cgi-bin/|\?)&nbsp;0&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;0%&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;0&lt;br&gt;refresh_pattern&nbsp;.&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;0&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;/span&gt;20%&lt;span&nbsp;class=&quot;&quot;&gt;&nbsp;&lt;/span&gt;4320&lt;br&gt;pinger_enable&nbsp;off&lt;/p&gt;&lt;/div&gt;&lt;div&gt;Relevant&nbsp;access.log&nbsp;output&nbsp;(IP&nbsp;addresses&nbsp;redacted&nbsp;to&nbsp;x.x.x.x):&lt;br&gt;1455145755.589 &nbsp; &nbsp; &nbsp;0&nbsp;x.x.x.x&nbsp;TCP_DENIED/200&nbsp;0&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://www.reddit.com:443&quot;&gt;www.reddit.com:443&lt;/a&gt;&nbsp;-&nbsp;HIER_NONE/-&nbsp;-&lt;br&gt;1455145755.669 &nbsp; &nbsp; &nbsp;0 x.x.x.x TAG_NONE/403&nbsp;4011&nbsp;GET&nbsp;&lt;a&nbsp;href=&quot;https://www.reddit.com/r/news&quot;&gt;https://www.reddit.com/r/news&lt;/a&gt;&nbsp;-&nbsp;HIER_NONE/-&nbsp;text/html&lt;br&gt;1455145755.782&nbsp; &nbsp; &nbsp; 0 x.x.x.x TCP_DENIED/200&nbsp;0&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://www.reddit.com:443&quot;&gt;www.reddit.com:443&lt;/a&gt;&nbsp;-&nbsp;HIER_NONE/-&nbsp;-&lt;/div&gt;&lt;div&gt;&lt;br&gt;I&nbsp;don&#39;t&nbsp;want&nbsp;to&nbsp;whitelist&nbsp;the&nbsp;dstdomain&nbsp;.&lt;a&nbsp;href=&quot;http://reddit.com&quot;&gt;reddit.com&lt;/a&gt;&nbsp;(i.e whitelist-ssldomain&nbsp;dstdomain&nbsp;.&lt;a&nbsp;href=&quot;http://reddit.com&quot;&gt;reddit.com&lt;/a&gt;)&nbsp;as&nbsp;that&nbsp;would&nbsp;allow&nbsp;access&nbsp;to&nbsp;all&nbsp;of&nbsp;the&nbsp;other&nbsp;subreddits.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Appreciate&nbsp;any&nbsp;help&nbsp;or&nbsp;suggestions&nbsp;you&nbsp;have.&nbsp;Thanks.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Victor&lt;/div&gt;&lt;/div&gt;<br>

</tt>
