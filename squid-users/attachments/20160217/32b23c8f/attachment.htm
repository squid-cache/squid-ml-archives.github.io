<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;It&#39;s&nbsp;been&nbsp;a&nbsp;while&nbsp;since&nbsp;I&#39;ve&nbsp;looked&nbsp;at&nbsp;this—because&nbsp;the&nbsp;software&nbsp;we&nbsp;use&nbsp;to&nbsp;generate&nbsp;our&nbsp;squid.conf&nbsp;just&nbsp;works&nbsp;around&nbsp;now—but&nbsp;we&nbsp;found&nbsp;that&nbsp;Squid&nbsp;3&nbsp;would&nbsp;only&nbsp;enforce&nbsp;exactly&nbsp;half&nbsp;the&nbsp;configured&nbsp;rate&nbsp;on&nbsp;HTTP&nbsp;requests&nbsp;but&nbsp;enforce&nbsp;the&nbsp;full&nbsp;rate&nbsp;on&nbsp;HTTPS&nbsp;requests.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;we&nbsp;now&nbsp;make&nbsp;two&nbsp;delay&nbsp;pools&nbsp;for&nbsp;every&nbsp;&quot;restriction&quot;:&nbsp;one&nbsp;for&nbsp;HTTP&nbsp;which&nbsp;is&nbsp;x2&nbsp;the&nbsp;byte&nbsp;rate&nbsp;and&nbsp;one&nbsp;for&nbsp;HTTPS&nbsp;which&nbsp;is&nbsp;normal.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;don&#39;t&nbsp;we&nbsp;looked&nbsp;much&nbsp;more&nbsp;into&nbsp;it&nbsp;or&nbsp;filed&nbsp;a&nbsp;bug&nbsp;&#39;cause&nbsp;none&nbsp;of&nbsp;the&nbsp;developers&nbsp;seem&nbsp;very&nbsp;keen&nbsp;on&nbsp;pushing&nbsp;delay_pools&nbsp;forward,&nbsp;due&nbsp;their&nbsp;being&nbsp;more&nbsp;robust&nbsp;network-level&nbsp;approaches&nbsp;these&nbsp;days.&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;On&nbsp;Wed,&nbsp;17&nbsp;Feb&nbsp;2016&nbsp;at&nbsp;12:37&nbsp;Hery&nbsp;Martin&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:scorpionxii@gmail.com&quot;&gt;scorpionxii@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;Hello&nbsp;everybody: &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;Since&nbsp;a&nbsp;few&nbsp;months&nbsp;ago&nbsp;I&#39;m&nbsp;using&nbsp;squid&nbsp;to&nbsp;provide&nbsp;a&nbsp;solution&nbsp;as&nbsp;small&nbsp;business&nbsp;proxy&nbsp;in&nbsp;the&nbsp;network&nbsp;of&nbsp;my&nbsp;work&nbsp;place. &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;I&#39;m&nbsp;from&nbsp;Cuba,&nbsp;in&nbsp;our&nbsp;country&nbsp;the&nbsp;Internet&nbsp;is&nbsp;a&nbsp;very&nbsp;limited&nbsp;resource.&nbsp;I&nbsp;have&nbsp;only&nbsp;one&nbsp;link&nbsp;of&nbsp;2Mbps&nbsp;to&nbsp;share&nbsp;with&nbsp;20&nbsp;~&nbsp;25&nbsp;users&nbsp;(even&nbsp;with&nbsp;my&nbsp;network&nbsp;have&nbsp;more&nbsp;than&nbsp;60)&nbsp;this&nbsp;is&nbsp;the&nbsp;normal&nbsp;concurrent&nbsp;number. &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;When&nbsp;I&nbsp;start&nbsp;the&nbsp;squid&nbsp;deployment&nbsp;in&nbsp;my&nbsp;network&nbsp;I&nbsp;started&nbsp;using&nbsp;2.7stable9&nbsp;version,&nbsp;I&nbsp;made&nbsp;all&nbsp;arrangements&nbsp;to&nbsp;put&nbsp;it&nbsp;work&nbsp;with&nbsp;my&nbsp;AD&nbsp;to&nbsp;match&nbsp;ACLs&nbsp;using&nbsp;AD&nbsp;Groups&nbsp;and&nbsp;everything&nbsp;works&nbsp;perfect. &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;I&nbsp;defined&nbsp;1&nbsp;class&nbsp;2&nbsp;delay&nbsp;pools&nbsp;to&nbsp;to&nbsp;limits&nbsp;traffic&nbsp;to&nbsp;12&nbsp;KBytes/s&nbsp;per&nbsp;user&nbsp;approx. &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;delay_pool&nbsp;1 &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;delay_class&nbsp;1&nbsp;2 &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;delay_parameters&nbsp;-1/-1&nbsp;12228/12228 &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;The&nbsp;delay&nbsp;pool&nbsp;works&nbsp;perfect,&nbsp;I&nbsp;was&nbsp;checking&nbsp;with&nbsp;real-time&nbsp;tool&nbsp;sqstat&nbsp;and&nbsp;with&nbsp;squidclient&nbsp;mgr:delay &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;NOW..... &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;I&nbsp;recently&nbsp;upgrade&nbsp;squid&nbsp;to&nbsp;3.3.8&nbsp;and&nbsp;I&nbsp;notice&nbsp;that&nbsp;delay&nbsp;pool&nbsp;started&nbsp;to&nbsp;going&nbsp;wrong&nbsp;when&nbsp;the&nbsp;users&nbsp;surf&nbsp;or&nbsp;download&nbsp;using&nbsp;HTTPS&nbsp;protocol &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;I&nbsp;checked&nbsp;in&nbsp;real-time&nbsp;and&nbsp;when&nbsp;the&nbsp;users&nbsp;browse&nbsp;HTTPS&nbsp;the&nbsp;pool&nbsp;goes&nbsp;in&nbsp;negative&nbsp;numbers&nbsp;and&nbsp;start&nbsp;to&nbsp;grow&nbsp;and&nbsp;grow,&nbsp;its&nbsp;very&nbsp;easy&nbsp;to&nbsp;check,&nbsp;just&nbsp;define&nbsp;a&nbsp;delay&nbsp;pool&nbsp;with&nbsp;5KB&nbsp;and&nbsp;start&nbsp;a&nbsp;download&nbsp;from&nbsp;an&nbsp;HTTPS&nbsp;source&nbsp;and&nbsp;you&nbsp;can&nbsp;check&nbsp;it&nbsp;with&nbsp;squidclient&nbsp;mgr:delay,&nbsp;the&nbsp;ip&nbsp;takes&nbsp;negative&nbsp;pool&nbsp;value&nbsp;and&nbsp;keep&nbsp;growing&nbsp;until&nbsp;the&nbsp;download&nbsp;finish. &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;Frustrated&nbsp;with&nbsp;this&nbsp;behavior&nbsp;I&nbsp;put&nbsp;different&nbsp;squid&nbsp;versions&nbsp;in&nbsp;a&nbsp;Virtualization&nbsp;Server&nbsp;and&nbsp;definitely&nbsp;I&nbsp;saw&nbsp;that&nbsp;the&nbsp;problem&nbsp;occurs&nbsp;with&nbsp;squid&nbsp;3.x&nbsp;versions,&nbsp;today&nbsp;I&nbsp;made&nbsp;a&nbsp;final&nbsp;test&nbsp;and&nbsp;I&nbsp;think&nbsp;that&nbsp;the&nbsp;implementation&nbsp;of&nbsp;HTTP&nbsp;v1.1&nbsp;is&nbsp;maybe&nbsp;related&nbsp;with&nbsp;that&nbsp;problem&nbsp;(I&#39;m&nbsp;not&nbsp;sure&nbsp;but&nbsp;tomorow&nbsp;I&nbsp;will&nbsp;make&nbsp;a&nbsp;few&nbsp;tests&nbsp;with&nbsp;squid&nbsp;3.1&nbsp;where&nbsp;HTTP&nbsp;v1.1&nbsp;was&nbsp;not&nbsp;yet&nbsp;implemented) &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;Please,&nbsp;if&nbsp;you&nbsp;have&nbsp;the&nbsp;opportunity,&nbsp;just&nbsp;test&nbsp;this&nbsp;in&nbsp;a&nbsp;Lab&nbsp;environment,&nbsp;I&nbsp;decided&nbsp;to&nbsp;write&nbsp;to&nbsp;this&nbsp;email&nbsp;list&nbsp;because&nbsp;I&nbsp;asked&nbsp;to&nbsp;many&nbsp;people&nbsp;that&nbsp;already&nbsp;have&nbsp;implemented&nbsp;squid&nbsp;as&nbsp;proxy&nbsp;in&nbsp;their&nbsp;networks&nbsp;and&nbsp;they&nbsp;didn&#39;t&nbsp;believed&nbsp;to&nbsp;me&nbsp;until&nbsp;I&nbsp;demostrated&nbsp;the&nbsp;issue. &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;Have&nbsp;anyone&nbsp;information&nbsp;about&nbsp;this&nbsp;bug?&nbsp;There&nbsp;is&nbsp;any&nbsp;hope&nbsp;to&nbsp;fix&nbsp;this&nbsp;problem&nbsp;at&nbsp;code&nbsp;level? &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;Anyway,&nbsp;I&#39;m&nbsp;computer&nbsp;systems&nbsp;engineer,&nbsp;I&nbsp;use&nbsp;to&nbsp;write&nbsp;a&nbsp;lot&nbsp;C++&nbsp;lines&nbsp;every&nbsp;week...&nbsp;I&#39;m&nbsp;not&nbsp;related&nbsp;with&nbsp;the&nbsp;squid&nbsp;development&nbsp;(never&nbsp;saw&nbsp;the&nbsp;code&nbsp;in&nbsp;my&nbsp;life)&nbsp;but&nbsp;if&nbsp;somebody&nbsp;have&nbsp;any&nbsp;idea&nbsp;how&nbsp;to&nbsp;fix&nbsp;this&nbsp;and&nbsp;wants&nbsp;help&nbsp;just&nbsp;count&nbsp;with&nbsp;me. &lt;/span&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;br&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);font-family:Verdana,Geneva,Helvetica,Arial,sans-serif;font-size:13px&quot;&gt;Greetings&nbsp;from&nbsp;Cuba&nbsp;and&nbsp;sorry&nbsp;about&nbsp;my&nbsp;English&nbsp;:)&lt;/span&gt;&lt;br&gt;&lt;/div&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
