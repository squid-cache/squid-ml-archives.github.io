<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;text=&quot;#000000&quot;&nbsp;bgcolor=&quot;#FFFFFF&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-----BEGIN&nbsp;PGP&nbsp;SIGNED&nbsp;MESSAGE-----&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Hash:&nbsp;SHA256&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp; &lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;24.02.16&nbsp;3:38,&nbsp;Heiler&nbsp;Bemerguy&nbsp;пишет:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;white-space:&nbsp;pre;&quot;&gt;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;23/02/2016&nbsp;16:40,&nbsp;Yuri&nbsp;Voinov&nbsp;wrote:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt; &nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;When&nbsp;you&nbsp;CPU's/cores&nbsp;waiting&nbsp;for&nbsp;HDD&nbsp;access,&nbsp;they&nbsp;got<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;high-loag.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;Are&nbsp;you&nbsp;sure&nbsp;it&nbsp;would&nbsp;show&nbsp;up&nbsp;as&nbsp;&quot;User&quot;&nbsp;load&nbsp;and&nbsp;not&nbsp;as<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Wait&quot;&nbsp;?&lt;/span&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Depending&nbsp;OS.&nbsp;Most&nbsp;likely&nbsp;&quot;User&quot;&nbsp;exactly.&nbsp;Still&nbsp;looks&nbsp;like<br>
&nbsp;&nbsp;&nbsp;&nbsp;overloaded&nbsp;IO&nbsp;queue.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;white-space:&nbsp;pre;&quot;&gt;&gt;&nbsp;On&nbsp;linux&nbsp;&quot;TOP&quot;&nbsp;it&nbsp;shows<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;something&nbsp;like:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;%Cpu0 &nbsp;: &nbsp;99,0&nbsp;*us*, &nbsp;1,0&nbsp;sy, &nbsp;0,0&nbsp;ni,&nbsp;0,0&nbsp;id, &nbsp;0,0&nbsp;*wa*, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0,0&nbsp;hi, &nbsp;0,0&nbsp;si, &nbsp;0,0&nbsp;st&lt;/span&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;top&nbsp;is&nbsp;not&nbsp;performance&nbsp;tool.&nbsp;It&nbsp;hides&nbsp;most&nbsp;important&nbsp;aspects&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;performance-related&nbsp;problem.&nbsp;Use&nbsp;it&nbsp;only&nbsp;at&nbsp;a&nbsp;glance&nbsp;tool.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;performance&nbsp;tuning&nbsp;usually&nbsp;uses&nbsp;more&nbsp;specific&nbsp;(and&nbsp;OS-specific,<br>
&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;course)&nbsp;tools.&nbsp;iostat,&nbsp;vmstat,&nbsp;swap&nbsp;-l,&nbsp;sar&nbsp;etc.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;white-space:&nbsp;pre;&quot;&gt;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;23/02/2016&nbsp;16:55,&nbsp;Amos&nbsp;Jeffries&nbsp;wrote:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;What&nbsp;GHz&nbsp;rating&nbsp;is&nbsp;each&nbsp;CPU&nbsp;core? &nbsp;200-250&nbsp;RPS&nbsp;is&nbsp;roughly<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;the&nbsp;range&nbsp;I&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;would&nbsp;expect&nbsp;from&nbsp;a&nbsp;1.xGHz&nbsp;core&nbsp;going&nbsp;full&nbsp;speed&nbsp;/&nbsp;100%<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;usage.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;Are&nbsp;you&nbsp;using&nbsp;RAID&nbsp;on&nbsp;the&nbsp;disk&nbsp;storage?&nbsp;IME,&nbsp;RAID&nbsp;can<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;more&nbsp;than&nbsp;halve&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;the&nbsp;speed&nbsp;of&nbsp;the&nbsp;proxy.&nbsp;Although&nbsp;the&nbsp;CPU&nbsp;thrashing&nbsp;effect<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;mostly&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;hidden&nbsp;away&nbsp;out&nbsp;of&nbsp;sight&nbsp;in&nbsp;the&nbsp;disk&nbsp;controller<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;processor(s).&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;6-core&nbsp;of&nbsp;Intel(R)&nbsp;Xeon(R)&nbsp;CPU&nbsp;E5-2667&nbsp;v2&nbsp;@&nbsp;3.30GHz&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;It's&nbsp;a&nbsp;vmware&nbsp;VM&nbsp;with&nbsp;a&nbsp;NetApp&nbsp;266TB&nbsp;storage.&nbsp;This&nbsp;VM&nbsp;has<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;access&nbsp;to&nbsp;2&nbsp;different&nbsp;LUNs&nbsp;in&nbsp;2&nbsp;different&nbsp;controllers&nbsp;to&nbsp;a&nbsp;bunch<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SAS&nbsp;HDs,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;dd&nbsp;if=/dev/zero&nbsp;of=testfile&nbsp;bs=2G&nbsp;count=1&nbsp;oflag=dsync&nbsp;=&nbsp;~391<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MB/s&lt;/span&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;tells&nbsp;nothing&nbsp;about&nbsp;SAN&nbsp;topology&nbsp;and&nbsp;whole&nbsp;IO&nbsp;subsystem.<br>
&nbsp;&nbsp;&nbsp;&nbsp;There&nbsp;is&nbsp;much&nbsp;questions&nbsp;occurs&nbsp;here:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;-&nbsp;Which&nbsp;connection&nbsp;uses&nbsp;HDD's&nbsp;bunches?&nbsp;FC?&nbsp;iSCSI?&nbsp;FCoE?&nbsp;If<br>
&nbsp;&nbsp;&nbsp;&nbsp;iSCSI/some_ethernet-Based&nbsp;-&nbsp;did&nbsp;you&nbsp;turned&nbsp;on&nbsp;jumbograms?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;-&nbsp;How&nbsp;much&nbsp;hardware&nbsp;cache&nbsp;installed&nbsp;in&nbsp;controllers&nbsp;and&nbsp;which&nbsp;type?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;-&nbsp;How&nbsp;was&nbsp;created&nbsp;LUN's?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;-&nbsp;Which&nbsp;RAID&nbsp;type&nbsp;you&nbsp;uses&nbsp;and&nbsp;what&nbsp;is&nbsp;it&nbsp;parameters?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;-&nbsp;How&nbsp;configured&nbsp;VMWare?&nbsp;Does&nbsp;you&nbsp;configure&nbsp;deferred&nbsp;syncing&nbsp;VM<br>
&nbsp;&nbsp;&nbsp;&nbsp;caches?&nbsp;Or&nbsp;not?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;etc.etc.etc.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Note:&nbsp;NetApp&nbsp;(you&nbsp;have&nbsp;forgotten&nbsp;to&nbsp;specify&nbsp;your&nbsp;NetApp&nbsp;model&nbsp;and<br>
&nbsp;&nbsp;&nbsp;&nbsp;licensed&nbsp;options)&nbsp;has&nbsp;known&nbsp;issues&nbsp;with:&nbsp;CoW&nbsp;with&nbsp;WAFL,&nbsp;hardware<br>
&nbsp;&nbsp;&nbsp;&nbsp;read-cache&nbsp;and&nbsp;write-cache&nbsp;-&nbsp;this&nbsp;is&nbsp;product&nbsp;specific&nbsp;options&nbsp;sold<br>
&nbsp;&nbsp;&nbsp;&nbsp;separately&nbsp;(!)&nbsp;and,&nbsp;generally,&nbsp;tuning&nbsp;NetApp&nbsp;is&nbsp;separated&nbsp;complex<br>
&nbsp;&nbsp;&nbsp;&nbsp;task.&nbsp;Especially&nbsp;with&nbsp;virtualized&nbsp;environment.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;And&nbsp;please&nbsp;note:&nbsp;One&nbsp;DD's&nbsp;file&nbsp;-&nbsp;it's&nbsp;about&nbsp;nothing.&nbsp;This&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;unrelated&nbsp;to&nbsp;REAL&nbsp;load.&nbsp;As&nbsp;by&nbsp;as&nbsp;abstract&nbsp;IOPS&nbsp;numbers.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;white-space:&nbsp;pre;&quot;&gt;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;Best&nbsp;Regards,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;--&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;Heiler&nbsp;Bemerguy&nbsp;-&nbsp;(91)&nbsp;98151-4894&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;Assessor&nbsp;Técnico&nbsp;-&nbsp;CINBESA&nbsp;(91)&nbsp;3184-1751&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;/span&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-----BEGIN&nbsp;PGP&nbsp;SIGNATURE-----<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Version:&nbsp;GnuPG&nbsp;v2<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp; &lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;iQEcBAEBCAAGBQJWzfdpAAoJENNXIZxhPexGYnwIALmxL3FA75PfEiaeHeRXu4a5<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;kFuzHgSb9pjldlOPHxorgbVul3BU5HE+LVFmzYsD0lMIK9hbqutKz/m/ji5B0QBN<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;yDevoIi+rGKUgXTGs0VvPZprLzbCc9X1V7uIQeCFne1gvWruyr4dx4xrjZSONdUP<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;8wcNN5irNZ0Zn+fcqQUK+G9vmvHWDBeQK/gjOFk4ZdUsWZkNx4vB7RGeBBTSH5Lo<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;G/vzY4j/Cd0L89B1PPrWrrTdko0jGe4Z0D4kFaA+bNb+eV56uRx0m7Qii4Cnl4Vu<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;KGSHhwD6gaI0sJGwWqwRgcNEPEtMcAGtO8IvaWmHGVGCEz+Bf5NyAbAtF7cQ9Zc=<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;=zPnN<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-----END&nbsp;PGP&nbsp;SIGNATURE-----<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
