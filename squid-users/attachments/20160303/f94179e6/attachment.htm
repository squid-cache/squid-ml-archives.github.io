<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Hi&nbsp;Amos,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;You&nbsp;didn't&nbsp;notice&nbsp;it&nbsp;was&nbsp;always&nbsp;the&nbsp;same&nbsp;client&nbsp;?&nbsp;The&nbsp;same&nbsp;IP<br>
&nbsp;&nbsp;&nbsp;&nbsp;address&nbsp;redownloading&nbsp;ad&nbsp;eternum..&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;managed&nbsp;to&nbsp;fix&nbsp;it&nbsp;by&nbsp;not&nbsp;caching&nbsp;stuff&nbsp;with&nbsp;&quot;?&quot;&nbsp;in&nbsp;it:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;b&gt;refresh_pattern&nbsp;-i&nbsp;(/cgi-bin/|\?)&nbsp;0&nbsp;0%&nbsp;0&lt;/b&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;But&nbsp;I&nbsp;don't&nbsp;know&nbsp;if&nbsp;it's&nbsp;the&nbsp;best&nbsp;approach..&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;URL&nbsp;was&nbsp;like&nbsp;that:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;i&gt;10.101.1.50&nbsp;TCP_HIT/206&nbsp;402&nbsp;GET&nbsp;&lt;/i&gt;&lt;i&gt;&lt;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class=&quot;moz-txt-link-freetext&quot;<br>
href=&quot;http://bg.v4.a.dl.ws.microsoft.com/dl/content/d/updt/2015/07/096c4bbc-4bc2-4ba1-8fd7-2e8cf3fb1937_132a7d6799d3bd625b0e5b375aa13552593bf0ed.appxbundle&quot;&gt;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://bg.v4.a.dl.ws.microsoft.com/dl/content/d/updt/2015/07/096c4bbc-4bc2-4ba1-8fd7-2e8cf3fb1937_132a7d6799d3bd625b0e5b375aa13552593bf0ed.appxbundle&quot;&gt;http://bg.v4.a.dl.ws.microsoft.com/dl/content/d/updt/2015/07/096c4bbc-4bc2-4ba1-8fd7-2e8cf3fb1937_132a7d6799d3bd625b0e5b375aa13552593bf0ed.appxbundle&lt;/a&gt;&lt;/a&gt;&lt;/i&gt;&lt;i&gt;?<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;HIER_NONE/-&nbsp;application/octet-stream&lt;/i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;(After&nbsp;the&nbsp;&quot;?&quot;&nbsp;there&nbsp;were&nbsp;some&nbsp;variables)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Anyways,&nbsp;this&nbsp;isn't&nbsp;the&nbsp;cause&nbsp;of&nbsp;the&nbsp;ultra-high&nbsp;bandwidth&nbsp;load..&nbsp;(&lt;b&gt;our<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DL&nbsp;link&nbsp;is&nbsp;100%&nbsp;used&nbsp;by&nbsp;squid&nbsp;right&nbsp;now!&lt;/b&gt;).&nbsp;Most&nbsp;traffic&nbsp;comes<br>
&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;windows&nbsp;updates...&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;i&gt;1457015568.658  &nbsp;9400&nbsp;10.12.0.197&nbsp;&lt;b&gt;TCP_SWAPFAIL_MISS/206&lt;/b&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1067290&nbsp;GET&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://au.v4.download&quot;&gt;http://au.v4.download&lt;/a&gt;.&lt;b&gt;windowsupdate&lt;/b&gt;.com/c/msdownload/update/software/crup/2015/02/publisher-x-none_08ccd79ac8a6bb475040360b6c9d8c9e1f258c9d.&lt;b&gt;cab<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/b&gt;-&nbsp;HIER_DIRECT/201.30.251.40&nbsp;application/octet-stream&lt;/i&gt;&lt;i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/i&gt;&lt;i&gt;1457015624.067 &nbsp;36878&nbsp;10.12.0.234&nbsp;&lt;b&gt;TCP_MISS/206&lt;/b&gt;&nbsp;77842<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GET&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://au.v4.download&quot;&gt;http://au.v4.download&lt;/a&gt;.&lt;b&gt;windowsupdate&lt;/b&gt;.com/d/msdownload/update/software/crup/2014/02/windows8.1-kb2919355-x64_66955196a82751d1c8d9806d321487562b159f41.&lt;b&gt;psf<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/b&gt;-&nbsp;HIER_DIRECT/201.30.251.40&nbsp;application/octet-stream&lt;/i&gt;&lt;i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/i&gt;&lt;i&gt;1457015750.556&nbsp;126469&nbsp;10.12.0.234&nbsp;&lt;b&gt;TCP_MISS/206&lt;/b&gt;&nbsp;151183<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GET&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://au.v4.download&quot;&gt;http://au.v4.download&lt;/a&gt;.&lt;b&gt;windowsupdate&lt;/b&gt;.com/d/msdownload/update/software/crup/2014/02/windows8.1-kb2919355-x64_66955196a82751d1c8d9806d321487562b159f41.&lt;b&gt;psf<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/b&gt;-&nbsp;HIER_DIRECT/201.30.251.40&nbsp;application/octet-stream&lt;/i&gt;&lt;i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/i&gt;&lt;i&gt;1457015753.263 &nbsp;11011&nbsp;10.12.0.197&nbsp;&lt;b&gt;TCP_MISS/206&lt;/b&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1616920&nbsp;GET&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://au.v4.download&quot;&gt;http://au.v4.download&lt;/a&gt;.&lt;b&gt;windowsupdate&lt;/b&gt;.com/c/msdownload/update/software/crup/2015/03/onenote-x-none_dd4f2bc75fc38be514c4009ce4d289e41f6b75d0.&lt;b&gt;cab<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/b&gt;-&nbsp;HIER_DIRECT/201.30.251.40&nbsp;application/octet-stream&lt;/i&gt;&lt;i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/i&gt;&lt;i&gt;1457015780.978 &nbsp;13451&nbsp;10.12.0.197&nbsp;&lt;b&gt;TCP_SWAPFAIL_MISS/206&lt;/b&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2225824&nbsp;GET&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://au.v4.download&quot;&gt;http://au.v4.download&lt;/a&gt;.&lt;b&gt;windowsupdate&lt;/b&gt;.com/c/msdownload/update/software/crup/2015/03/onenote-x-none_dd4f2bc75fc38be514c4009ce4d289e41f6b75d0.&lt;b&gt;cab<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/b&gt;-&nbsp;HIER_DIRECT/201.30.251.40&nbsp;application/octet-stream&lt;/i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Do&nbsp;you&nbsp;see&nbsp;anything&nbsp;that&nbsp;could&nbsp;make&nbsp;it&nbsp;re-download&nbsp;over&nbsp;and&nbsp;over<br>
&nbsp;&nbsp;&nbsp;&nbsp;again&nbsp;in&nbsp;this&nbsp;config?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;i&gt;acl&nbsp;windowsupdate&nbsp;dstdomain&nbsp;.ws.microsoft.com<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.windowsupdate.microsoft.com&nbsp;.update.microsoft.com<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.windowsupdate.com&nbsp;.armdl.adobe.com&lt;/i&gt;&lt;i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/i&gt;&lt;i&gt;http_access&nbsp;allow&nbsp;windowsupdate&lt;/i&gt;&lt;i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/i&gt;&lt;i&gt;range_offset_limit&nbsp;none&nbsp;windowsupdate&lt;/i&gt;&lt;i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/i&gt;&lt;i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/i&gt;&lt;i&gt;maximum_object_size&nbsp;10&nbsp;GB&lt;/i&gt;&lt;i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/i&gt;&lt;i&gt;cache_mem&nbsp;4&nbsp;GB&lt;/i&gt;&lt;i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/i&gt;&lt;i&gt;maximum_object_size_in_memory&nbsp;2&nbsp;MB&lt;/i&gt;&lt;i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/i&gt;&lt;i&gt;memory_replacement_policy&nbsp;heap&nbsp;GDSF&lt;/i&gt;&lt;i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/i&gt;&lt;i&gt;cache_replacement_policy&nbsp;heap&nbsp;LFUDA&lt;/i&gt;&lt;i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/i&gt;&lt;i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/i&gt;&lt;i&gt;cache_dir&nbsp;rock&nbsp;/cache2/rock1&nbsp;90000&nbsp;min-size=0&nbsp;max-size=32768&lt;/i&gt;&lt;i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/i&gt;&lt;i&gt;cache_dir&nbsp;rock&nbsp;/cache/rock1&nbsp;300000&nbsp;min-size=32769<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max-size=10737418240&lt;/i&gt;&lt;i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/i&gt;&lt;i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/i&gt;&lt;i&gt;refresh_pattern&nbsp;-i<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(microsoft|windowsupdate)\.com.*\.(cab|exe|ms[i|u|f]|dat|zip|psf|appx|esd)$<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;483840&nbsp;80%&nbsp;483840&nbsp;override-expire&nbsp;ignore-reload&lt;/i&gt;&lt;i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/i&gt;&lt;i&gt; ignore-must-revalidate&nbsp;ignore-private&nbsp;ignore-no-store<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;store-stale&lt;/i&gt;&lt;i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/i&gt;&lt;i&gt;refresh_pattern&nbsp;-i&nbsp;\.aspx$&nbsp;0&nbsp;0%&nbsp;0&lt;/i&gt;&lt;i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/i&gt;&lt;i&gt;refresh_pattern&nbsp;-i&nbsp;(/cgi-bin/|\?)&nbsp;0&nbsp;0%&nbsp;0&lt;/i&gt;&lt;i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/i&gt;&lt;i&gt;refresh_pattern&nbsp;.&nbsp;0&nbsp;50%&nbsp;10080&nbsp;store-stale&lt;/i&gt;&lt;i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/i&gt;&lt;i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/i&gt;&lt;i&gt;read_ahead_gap&nbsp;4096&nbsp;KB&lt;/i&gt;&lt;i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/i&gt;&lt;i&gt;client_request_buffer_max_size&nbsp;128&nbsp;KB&lt;/i&gt;&lt;i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/i&gt;&lt;i&gt;connect_timeout&nbsp;60&nbsp;seconds&lt;/i&gt;&lt;i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/i&gt;&lt;i&gt;request_timeout&nbsp;30&nbsp;seconds&lt;/i&gt;&lt;i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/i&gt;&lt;i&gt;reload_into_ims&nbsp;on&lt;/i&gt;&lt;i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/i&gt;&lt;i&gt;via&nbsp;off&lt;/i&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Best&nbsp;Regards,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-signature&quot;&nbsp;cols=&quot;72&quot;&gt;--&nbsp;<br>
Heiler&nbsp;Bemerguy&nbsp;-&nbsp;(91)&nbsp;98151-4894<br>
Assessor&nbsp;Técnico&nbsp;-&nbsp;CINBESA&nbsp;(91)&nbsp;3184-1751&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;moz-cite-prefix&quot;&gt;Em&nbsp;03/03/2016&nbsp;01:42,&nbsp;Amos&nbsp;Jeffries<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;escreveu:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;cite=&quot;mid:56D7C0C8.4000307@treenet.co.nz&quot;&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;On&nbsp;3/03/2016&nbsp;10:33&nbsp;a.m.,&nbsp;Heiler&nbsp;Bemerguy&nbsp;wrote:<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;<br>
Hello&nbsp;guys..<br>
<br>
Thanks&nbsp;for&nbsp;the&nbsp;tips.&nbsp;I've&nbsp;ajusted&nbsp;some&nbsp;stuff&nbsp;here&nbsp;and&nbsp;noticed&nbsp;these<br>
repeated&nbsp;GETS&nbsp;below..&nbsp;they&nbsp;are&nbsp;HITS,&nbsp;but&nbsp;why&nbsp;is&nbsp;this&nbsp;happening?<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;<br>
Because&nbsp;lots&nbsp;of&nbsp;clients&nbsp;want&nbsp;the&nbsp;object(s).<br>
<br>
If&nbsp;they&nbsp;are&nbsp;HITs&nbsp;then&nbsp;whats&nbsp;the&nbsp;problem?&nbsp;Squid&nbsp;is&nbsp;doing&nbsp;what&nbsp;you&nbsp;asked<br>
it&nbsp;to.&nbsp;Caching&nbsp;the&nbsp;traffic&nbsp;and&nbsp;presenting&nbsp;it&nbsp;whenever&nbsp;a&nbsp;client&nbsp;asks.<br>
<br>
<br>
Amos<br>
<br>
_______________________________________________<br>
squid-users&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
