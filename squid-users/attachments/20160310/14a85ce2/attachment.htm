<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;I&nbsp;am&nbsp;using&nbsp;Squid&nbsp;for&nbsp;caching&nbsp;with&nbsp;Apache&nbsp;and&nbsp;MediaWiki&nbsp;over&nbsp;HTTPS&nbsp;only.&nbsp;Unfortunately,&nbsp;no&nbsp;pages&nbsp;are&nbsp;being&nbsp;cached;&nbsp;each&nbsp;request&nbsp;is&nbsp;being&nbsp;sent&nbsp;from&nbsp;Squid&nbsp;to&nbsp;Apache.&nbsp;I&nbsp;would&nbsp;appreciate&nbsp;help&nbsp;figuring&nbsp;out&nbsp;how&nbsp;to&nbsp;get&nbsp;caching&nbsp;to&nbsp;work.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;configuration&nbsp;is&nbsp;as&nbsp;follows:&lt;div&gt;&lt;ul&gt;&lt;li&gt;Squid&nbsp;is&nbsp;configured&nbsp;to&nbsp;listen&nbsp;on&nbsp;&lt;external&nbsp;ip&gt;:443&nbsp;for&nbsp;HTTPS&nbsp;requests&nbsp;and&nbsp;forwards&nbsp;them&nbsp;to&nbsp;Apache&nbsp;on&nbsp;port&nbsp;8080&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;https_port&nbsp;&lt;external&nbsp;ip&gt;:443&nbsp;cert=&lt;path&nbsp;to&nbsp;cert&gt;&nbsp;key=&lt;path&nbsp;to&nbsp;key&gt;&nbsp;defaultsite=&lt;server&nbsp;name&gt;&nbsp;vhost&lt;/div&gt;&lt;/div&gt;&lt;div&gt;cache_peer&nbsp;127.0.0.1&nbsp;parent&nbsp;8080&nbsp;no-query&nbsp;originserver&nbsp;login=PASS&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;Squid&nbsp;also&nbsp;listens&nbsp;on&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:80&quot;&gt;127.0.0.1:80&lt;/a&gt;&nbsp;for&nbsp;PURGE&nbsp;requests&nbsp;from&nbsp;MediaWiki&nbsp;because&nbsp;I&nbsp;could&nbsp;not&nbsp;figure&nbsp;out&nbsp;how&nbsp;to&nbsp;configure&nbsp;MediaWiki&nbsp;to&nbsp;send&nbsp;PURGE&nbsp;requests&nbsp;with&nbsp;HTTPS&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;http_port&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:80&quot;&gt;127.0.0.1:80&lt;/a&gt;&nbsp;defaultsite=&lt;server&nbsp;name&gt;&nbsp;vhost&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;Apache&nbsp;is&nbsp;listening&nbsp;on&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:8080&quot;&gt;127.0.0.1:8080&lt;/a&gt;&nbsp;for&nbsp;requests&nbsp;from&nbsp;Squid&lt;/li&gt;&lt;li&gt;Apache&nbsp;is&nbsp;also&nbsp;listening&nbsp;on&nbsp;&lt;external&nbsp;ip&gt;:80&nbsp;which&nbsp;is&nbsp;set&nbsp;up&nbsp;as&nbsp;a&nbsp;permanent&nbsp;redirect&nbsp;to&nbsp;HTTPS&lt;/li&gt;&lt;li&gt;MediaWiki&nbsp;is&nbsp;configured&nbsp;as&nbsp;follows:&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;$wgUseSquid&nbsp;=&nbsp;true;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;$wgSquidServers&nbsp;=&nbsp;array(&#39;127.0.0.1&#39;);&nbsp;//&nbsp;this&nbsp;is&nbsp;where&nbsp;PURGE&nbsp;requests&nbsp;are&nbsp;sent&lt;/div&gt;&lt;div&gt;$wgSquidServersNoPurge&nbsp;=&nbsp;array(&#39;&lt;external&nbsp;ip&gt;&#39;);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;GET&nbsp;requests&nbsp;are&nbsp;being&nbsp;received&nbsp;by&nbsp;MediaWiki&nbsp;with&nbsp;Cache-Control:&nbsp;max-age=0&nbsp;in&nbsp;the&nbsp;headers.&nbsp;The&nbsp;response&nbsp;sent&nbsp;by&nbsp;MediaWiki&nbsp;includes&nbsp;the&nbsp;following&nbsp;headers:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cache-Control:&nbsp;s-maxage=18000,&nbsp;must-revalidate,&nbsp;max-age=0&lt;/div&gt;&lt;div&gt;X-Cache:&nbsp;MISS&nbsp;from&nbsp;&lt;server&nbsp;name&gt;&lt;/div&gt;&lt;div&gt;X-Cache-Lookup:&nbsp;HIT&nbsp;from&nbsp;&lt;server&nbsp;name&gt;:80&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;suspicious&nbsp;why&nbsp;the&nbsp;last&nbsp;line&nbsp;says&nbsp;port&nbsp;80&nbsp;rather&nbsp;than&nbsp;8080,&nbsp;but&nbsp;I&#39;m&nbsp;not&nbsp;sure&nbsp;if&nbsp;that&nbsp;is&nbsp;relevant.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Please&nbsp;let&nbsp;me&nbsp;know&nbsp;if&nbsp;there&nbsp;is&nbsp;an&nbsp;more&nbsp;relevant&nbsp;information&nbsp;that&nbsp;will&nbsp;help&nbsp;to&nbsp;troubleshoot&nbsp;this.&nbsp;Thank&nbsp;you&nbsp;in&nbsp;advance&nbsp;for&nbsp;your&nbsp;assistance!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cindy&lt;/div&gt;&lt;/div&gt;<br>

</tt>
