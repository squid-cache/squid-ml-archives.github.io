<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;We&nbsp;have&nbsp;a&nbsp;situation&nbsp;where&nbsp;we&nbsp;need&nbsp;to&nbsp;filter&nbsp;compressed&nbsp;HTTP&nbsp;traffic&nbsp;through&nbsp;an&nbsp;ICAP&nbsp;service,&nbsp;logging&nbsp;failures&nbsp;(4xx)&nbsp;or&nbsp;passing&nbsp;the&nbsp;original&nbsp;compressed&nbsp;payload&nbsp;to&nbsp;it&#39;s&nbsp;target&nbsp;destination&nbsp;on&nbsp;2xx.&lt;/span&gt;&lt;div&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Something&nbsp;like&nbsp;this:&lt;/div&gt;&lt;div&gt;&lt;ul&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;1em&nbsp;30px;padding:0px;border:0px;color:rgb(34,36,38);font-family:Arial,&#39;Helvetica&nbsp;Neue&#39;,Helvetica,sans-serif;line-height:19.5px&quot;&gt;&lt;li&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0.5em;padding:0px;border:0px;word-wrap:break-word&quot;&gt;Incoming&nbsp;compressed&nbsp;HTTP&lt;/li&gt;&lt;li&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0.5em;padding:0px;border:0px;word-wrap:break-word&quot;&gt;Decompress&nbsp;and&nbsp;forward&nbsp;to&nbsp;ICAP&nbsp;service&lt;/li&gt;&lt;li&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0.5em;padding:0px;border:0px;word-wrap:break-word&quot;&gt;Log&nbsp;and&nbsp;discard&nbsp;if&nbsp;ICAP&nbsp;service&nbsp;returns&nbsp;4xx&lt;/li&gt;&lt;li&nbsp;style=&quot;margin:0px;padding:0px;border:0px;word-wrap:break-word&quot;&gt;Send&nbsp;original,&nbsp;compressed&nbsp;payload&nbsp;to&nbsp;destination&nbsp;if&nbsp;ICAP&nbsp;returns&nbsp;2xx&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#222426&quot;&nbsp;face=&quot;Arial,&nbsp;Helvetica&nbsp;Neue,&nbsp;Helvetica,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;line-height:19.5px&quot;&gt;Is&nbsp;that&nbsp;an&nbsp;appropriate&nbsp;use&nbsp;for&nbsp;Squid?&nbsp;If&nbsp;so&nbsp;what&nbsp;sort&nbsp;of&nbsp;configuration&nbsp;commands&nbsp;would&nbsp;we&nbsp;use?&nbsp;We&#39;re&nbsp;not&nbsp;certain&nbsp;where&nbsp;to&nbsp;begin.&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#222426&quot;&nbsp;face=&quot;Arial,&nbsp;Helvetica&nbsp;Neue,&nbsp;Helvetica,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;line-height:19.5px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#222426&quot;&nbsp;face=&quot;Arial,&nbsp;Helvetica&nbsp;Neue,&nbsp;Helvetica,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;line-height:19.5px&quot;&gt;Thanks&nbsp;in&nbsp;advance.&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
