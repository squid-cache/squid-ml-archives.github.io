<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Thanks&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Well,&nbsp;I&nbsp;am&nbsp;now&nbsp;stuck&nbsp;with&nbsp;the &lt;span&nbsp;style=&quot;color:rgb(0,0,0);font-family:monospace&quot;&gt;Host&nbsp;header&nbsp;forgery&nbsp;detected &lt;/span&gt;&lt;/div&gt;&lt;div&gt;Which&nbsp;it&nbsp;means&nbsp;that&nbsp;client&nbsp;and&nbsp;squid&nbsp;resolve&nbsp;different&nbsp;IP&nbsp;(in&nbsp;my&nbsp;use&nbsp;case&nbsp;that&nbsp;is&nbsp;what&nbsp;I&nbsp;want).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;already&nbsp;have &lt;span&nbsp;style=&quot;color:rgb(0,0,0);font-family:Arial,&#39;Lucida&nbsp;Grande&#39;,sans-serif;font-size:13.6px;line-height:17px&quot;&gt; &lt;/span&gt;&lt;a&nbsp;class=&quot;&quot;&nbsp;href=&quot;http://www.squid-cache.org/Doc/config/host_verify_strict&quot;&nbsp;title=&quot;SquidConf&quot;&nbsp;style=&quot;color:rgb(89,123,179);border:0px;font-family:Arial,&#39;Lucida&nbsp;Grande&#39;,sans-serif;font-size:13.6px;line-height:17px&quot;&gt;host_verify_strict&lt;/a&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);font-family:Arial,&#39;Lucida&nbsp;Grande&#39;,sans-serif;font-size:13.6px;line-height:17px&quot;&gt; &lt;/span&gt; &nbsp;disabled,&nbsp;but&nbsp;that&nbsp;is&nbsp;not&nbsp;enough.&nbsp; &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any&nbsp;advice?&nbsp;(Rather&nbsp;than&nbsp;do&nbsp;a&nbsp;patch&nbsp;and&nbsp;disable&nbsp;that&nbsp;verification?&nbsp;)&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;--&lt;/div&gt;&lt;div&gt;Luis&nbsp;Daniel&nbsp;Lucio&nbsp;Quiroz&lt;br&gt;CISSP,&nbsp;CISM,&nbsp;CISA&lt;br&gt;Linux,&nbsp;VoIP&nbsp;and&nbsp;much&nbsp;more&nbsp;fun&lt;br&gt;&lt;a&nbsp;href=&quot;http://www.okay.com.mx&quot;&nbsp;target=&quot;_blank&quot;&gt;www.okay.com.mx&lt;/a&gt;&lt;br&gt;&lt;br&gt;Need&nbsp;LCR?&nbsp;Check&nbsp;out&nbsp;LCR&nbsp;for&nbsp;FusionPBX&nbsp;with&nbsp;FreeSWITCH&lt;br&gt;Need&nbsp;Billing?&nbsp;Check&nbsp;out&nbsp;Billing&nbsp;for&nbsp;FusionPBX&nbsp;with&nbsp;FreeSWITCH&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2016-02-01&nbsp;16:31&nbsp;GMT-05:00&nbsp;Luis&nbsp;Daniel&nbsp;Lucio&nbsp;Quiroz&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:luis.daniel.lucio@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;luis.daniel.lucio@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;p&nbsp;dir=&quot;ltr&quot;&gt;Thank&nbsp;you&lt;/p&gt;<br>
&lt;p&nbsp;dir=&quot;ltr&quot;&gt;I&nbsp;understand&nbsp;what&nbsp;you&nbsp;mean,&nbsp;but&nbsp;ssl/tls&nbsp;will&nbsp;warm&nbsp;the&nbsp;browser&nbsp;if&nbsp;something&nbsp;is&nbsp;modified.&lt;/p&gt;&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;<br>
&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;Le&nbsp;1&nbsp;févr.&nbsp;2016&nbsp;7:08&nbsp;AM,&nbsp;&quot;Amos&nbsp;Jeffries&quot;&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&nbsp;target=&quot;_blank&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&nbsp;a&nbsp;écrit :&lt;br&nbsp;type=&quot;attribution&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;On&nbsp;1/02/2016&nbsp;11:35&nbsp;a.m.,&nbsp;Luis&nbsp;Daniel&nbsp;Lucio&nbsp;Quiroz&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;Hello&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Can&nbsp;anyone&nbsp;give&nbsp;some&nbsp;clue,&nbsp;link&nbsp;something&nbsp;to&nbsp;read&nbsp;on&nbsp;how&nbsp;to&nbsp;do&nbsp;the&nbsp;HTTPs&lt;br&gt;<br>
&gt;&nbsp;work&nbsp;with&nbsp;SNI,&nbsp;i&nbsp;just&nbsp;want&nbsp;to&nbsp;forward&nbsp;to&nbsp;the&nbsp;correct&nbsp;server&nbsp;based&nbsp;on&nbsp;the&lt;br&gt;<br>
&gt;&nbsp;SNI.&nbsp;I&nbsp;want&nbsp;to&nbsp;get&nbsp;rid&nbsp;of&nbsp;SNIproxy&nbsp;in&nbsp;favor&nbsp;of&nbsp;squid.&lt;br&gt;<br>
&lt;br&gt;<br>
That&nbsp;should&nbsp;be&nbsp;possible&nbsp;with&nbsp;Squid-3.5&nbsp;or&nbsp;later&nbsp;by&nbsp;intercepting&nbsp;the&nbsp;port&lt;br&gt;<br>
443&nbsp;traffic&nbsp;(*not*&nbsp;reverse-proxy&nbsp;/&nbsp;accel)&nbsp;and&nbsp;using:&lt;br&gt;<br>
&lt;br&gt;<br>
 acl&nbsp;step1&nbsp;at_step&nbsp;SslBumpStep1&lt;br&gt;<br>
 ssl_bump&nbsp;peek&nbsp;step1&lt;br&gt;<br>
 ssl_bump&nbsp;splice&nbsp;all&lt;br&gt;<br>
&lt;br&gt;<br>
But&nbsp;be&nbsp;aware&nbsp;that&nbsp;SNI&nbsp;does&nbsp;not&nbsp;provide&nbsp;any&nbsp;guarantee&nbsp;of&nbsp;&quot;correct&lt;br&gt;<br>
server&quot;.&nbsp;HTTP&nbsp;(even&nbsp;in&nbsp;its&nbsp;&#39;HTTPS&#39;&nbsp;form)&nbsp;is&nbsp;a&nbsp;multiplexed&nbsp;messaging&lt;br&gt;<br>
protocol.&nbsp;When&nbsp;you&nbsp;do&nbsp;the&nbsp;above&nbsp;Squid&nbsp;will&nbsp;not&nbsp;be&nbsp;able&nbsp;to&nbsp;protect&nbsp;you&lt;br&gt;<br>
against&nbsp;any&nbsp;Host&nbsp;header&nbsp;attacks&nbsp;buried&nbsp;inside&nbsp;the&nbsp;TLS&nbsp;layer&nbsp;-&nbsp;not&nbsp;that&lt;br&gt;<br>
sniproxy&nbsp;does&nbsp;either&nbsp;(in&nbsp;fact&nbsp;sniproxy&nbsp;seems&nbsp;by&nbsp;design&nbsp;to&nbsp;actively&lt;br&gt;<br>
_enable_&nbsp;those&nbsp;type&nbsp;of&nbsp;vulnerabilities).&lt;br&gt;<br>
&lt;br&gt;<br>
Amos&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
