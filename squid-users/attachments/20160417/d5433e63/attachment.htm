<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-----BEGIN&nbsp;PGP&nbsp;SIGNED&nbsp;MESSAGE-----&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Hash:&nbsp;SHA256&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp; &lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;*NIX&nbsp;means&nbsp;UNIX.&nbsp;Solaris&nbsp;is&nbsp;AT&amp;T&nbsp;UNIX.&nbsp;Linux&nbsp;is&nbsp;not&nbsp;UNIX&nbsp;(C)<br>
&nbsp;&nbsp;&nbsp;&nbsp;Linus&nbsp;Torvalds.&nbsp;:)&nbsp;We&nbsp;are&nbsp;not&nbsp;speaking&nbsp;about&nbsp;all&nbsp;possible&nbsp;OS'es.&nbsp;I<br>
&nbsp;&nbsp;&nbsp;&nbsp;suggests&nbsp;the&nbsp;matter&nbsp;in&nbsp;SSL/TLS,&nbsp;not&nbsp;OS&nbsp;or&nbsp;hands&nbsp;or&nbsp;something<br>
&nbsp;&nbsp;&nbsp;&nbsp;similar.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;problem&nbsp;is&nbsp;in&nbsp;CF,&nbsp;I&nbsp;think.&nbsp;As&nbsp;a&nbsp;maximum&nbsp;in&nbsp;peek-n-splice.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Because&nbsp;of&nbsp;I've&nbsp;not&nbsp;changed&nbsp;my&nbsp;squid.conf&nbsp;over&nbsp;last&nbsp;year,&nbsp;but<br>
&nbsp;&nbsp;&nbsp;&nbsp;approx.&nbsp;in&nbsp;january&nbsp;2016&nbsp;CloudFlare&nbsp;stopped&nbsp;work&nbsp;via&nbsp;proxy,&nbsp;as&nbsp;said<br>
&nbsp;&nbsp;&nbsp;&nbsp;my&nbsp;field&nbsp;SA.&nbsp;AFAIK,&nbsp;CF&nbsp;change&nbsp;own&nbsp;security&nbsp;settings.&nbsp;Also,&nbsp;I<br>
&nbsp;&nbsp;&nbsp;&nbsp;suggests,&nbsp;mozilla&nbsp;.org&nbsp;also&nbsp;moved&nbsp;behind&nbsp;CF.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Ok,&nbsp;let's&nbsp;talk&nbsp;about&nbsp;squid.conf.&nbsp;SSL-related&nbsp;rows&nbsp;are&nbsp;here:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;SSL&nbsp;bump&nbsp;rules&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;acl&nbsp;DiscoverSNIHost&nbsp;at_step&nbsp;SslBump1&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;acl&nbsp;NoSSLIntercept&nbsp;ssl::server_name_regex&nbsp;-i<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;/usr/local/squid/etc/url.nobump&quot;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;acl&nbsp;NoSSLIntercept&nbsp;ssl::server_name_regex&nbsp;-i<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;/usr/local/squid/etc/url.tor&quot;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;ssl_bump&nbsp;peek&nbsp;DiscoverSNIHost&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;ssl_bump&nbsp;splice&nbsp;NoSSLIntercept&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;ssl_bump&nbsp;bump&nbsp;all&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;http_port&nbsp;3126&nbsp;intercept&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;https_port&nbsp;3127&nbsp;intercept&nbsp;ssl-bump&nbsp;generate-host-certificates=on<br>
&nbsp;&nbsp;&nbsp;&nbsp;dynamic_cert_mem_cache_size=4MB&nbsp;cert=/usr/local/squid/etc/rootCA.crt<br>
&nbsp;&nbsp;&nbsp;&nbsp;key=/usr/local/squid/etc/rootCA.key<br>
&nbsp;&nbsp;&nbsp;&nbsp;options=SINGLE_DH_USE,SINGLE_ECDH_USE<br>
&nbsp;&nbsp;&nbsp;&nbsp;tls-dh=prime256v1:/usr/local/squid/etc/dhparam.pem<br>
&nbsp;&nbsp;&nbsp;&nbsp;cipher=HIGH:MEDIUM:!aNULL:!eNULL:!RC4:!LOW:!MD5:!EXP:!PSK:!SRP:!DSS&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;http_port&nbsp;3128&nbsp;ssl-bump&nbsp;generate-host-certificates=on<br>
&nbsp;&nbsp;&nbsp;&nbsp;dynamic_cert_mem_cache_size=4MB&nbsp;cert=/usr/local/squid/etc/rootCA.crt<br>
&nbsp;&nbsp;&nbsp;&nbsp;key=/usr/local/squid/etc/rootCA.key<br>
&nbsp;&nbsp;&nbsp;&nbsp;options=SINGLE_DH_USE,SINGLE_ECDH_USE<br>
&nbsp;&nbsp;&nbsp;&nbsp;tls-dh=prime256v1:/usr/local/squid/etc/dhparam.pem<br>
&nbsp;&nbsp;&nbsp;&nbsp;cipher=HIGH:MEDIUM:!aNULL:!eNULL:!RC4:!LOW:!MD5:!EXP:!PSK:!SRP:!DSS&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;tls_outgoing_options&nbsp;cafile=/usr/local/squid/etc/ca-bundle.crt<br>
&nbsp;&nbsp;&nbsp;&nbsp;options=SINGLE_DH_USE,SINGLE_ECDH_USE<br>
&nbsp;&nbsp;&nbsp;&nbsp;cipher=HIGH:MEDIUM:!aNULL:!eNULL:!RC4:!LOW:!MD5:!EXP:!PSK:!SRP:!DSS&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;sslproxy_foreign_intermediate_certs<br>
&nbsp;&nbsp;&nbsp;&nbsp;/usr/local/squid/etc/intermediate_ca.pem&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;sslcrtd_program&nbsp;/usr/local/squid/libexec/security_file_certgen&nbsp;-s<br>
&nbsp;&nbsp;&nbsp;&nbsp;/var/lib/ssl_db&nbsp;-M&nbsp;4MB&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;see&nbsp;no&nbsp;anomalies&nbsp;in&nbsp;this&nbsp;lines.&nbsp;Ciphersuite&nbsp;is&nbsp;very&nbsp;relaxed.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Also,&nbsp;if&nbsp;we&nbsp;discuss&nbsp;a&nbsp;bug&nbsp;-&nbsp;may&nbsp;be&nbsp;better&nbsp;to&nbsp;turn&nbsp;on&nbsp;debug&nbsp;to&nbsp;know,<br>
&nbsp;&nbsp;&nbsp;&nbsp;why&nbsp;4.x&nbsp;got&nbsp;first&nbsp;NONE_ABORTED/200&nbsp;during&nbsp;CONNECT&nbsp;phase&nbsp;and&nbsp;then<br>
&nbsp;&nbsp;&nbsp;&nbsp;NONE/503&nbsp;during&nbsp;TLS&nbsp;negotiate?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;17.04.16&nbsp;14:58,&nbsp;Eliezer&nbsp;Croitoru&nbsp;пишет:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&nbsp;style=&quot;white-space:&nbsp;pre;&quot;&gt;&gt;&nbsp;For&nbsp;me&nbsp;it&nbsp;works.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;...&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;The&nbsp;first&nbsp;thing&nbsp;to&nbsp;do&nbsp;is&nbsp;publish&nbsp;the&nbsp;squid.conf&nbsp;with&nbsp;a&nbsp;bug<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;report&nbsp;and&nbsp;all&nbsp;other&nbsp;related&nbsp;info.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;*NIX&nbsp;doesn't&nbsp;mean&nbsp;CentOS&nbsp;since&nbsp;on&nbsp;CentOS&nbsp;this&nbsp;specific&nbsp;issue<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;doesn't&nbsp;exit.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;I&nbsp;assume&nbsp;that&nbsp;if&nbsp;it&nbsp;works&nbsp;on&nbsp;CentOS&nbsp;it&nbsp;will&nbsp;work&nbsp;almost&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;same&nbsp;for&nbsp;Ubuntu&nbsp;and&nbsp;Debian.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;Eliezer&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;On&nbsp;16/04/2016&nbsp;19:50,&nbsp;Yuri&nbsp;Voinov&nbsp;wrote:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;3.5.16&nbsp;on&nbsp;*NIX&nbsp;is&nbsp;also&nbsp;has&nbsp;this&nbsp;issue.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;Only&nbsp;3.5.16&nbsp;Win64&nbsp;is&nbsp;works&nbsp;like&nbsp;sharm.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;/span&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-----BEGIN&nbsp;PGP&nbsp;SIGNATURE-----<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Version:&nbsp;GnuPG&nbsp;v2<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp; &lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;iQEcBAEBCAAGBQJXE2qQAAoJENNXIZxhPexGD0wH/1SkyQyaa4gHV4AhXf5RrUTM<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;oEyGkOcEPwYw6M4+uYgvZ1FzvjrQhS6G8RTH/XrpSZ1utt9nbNSHP+W6FnXyxNPN<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;J/bauCQeADWf/NUGLG8GnOMXA9LD7w20ylAwOeLe1MUQJ4DTDT4arwzExkx0kohk<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;4mQNqq1Q105lgh0xyUQWF/wt0Uy3hSs2pPjyK4CGPWCbRO2kmYpPANT0ejoglfsF<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;uWNYBN5gl4hCd9kVzo0oaVwY2sNUftc1MyYztBpYUQ9WSoHoTnlvAWcWEF7FqHV6<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;TIB77Pr2fURIkEIlyLIQJ7weXkueOLI8VJp3EYLX5arDDLwu4tfXKpItHx5Tjd8=<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;=eQPH<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-----END&nbsp;PGP&nbsp;SIGNATURE-----<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
