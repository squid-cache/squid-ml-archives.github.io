<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;20&nbsp;April&nbsp;2016&nbsp;at&nbsp;18:38,&nbsp;Alex&nbsp;Rousskov&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:rousskov@measurement-factory.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rousskov@measurement-factory.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;&lt;span&gt;On&nbsp;04/20/2016&nbsp;08:16&nbsp;AM,&nbsp;Odhiambo&nbsp;Washington&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;even&nbsp;wonder&nbsp;if&nbsp;this&nbsp;config&nbsp;is&nbsp;correct:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&lt;/span&gt;&gt;&nbsp;acl&nbsp;ssl_bump_broken_sites &nbsp;dstdomain&nbsp;...&lt;br&gt;<br>
&gt;&nbsp;ssl_bump&nbsp;none&nbsp;ssl_bump_broken_sites&lt;br&gt;<br>
&lt;span&gt;&gt;&nbsp;ssl_bump&nbsp;peek&nbsp;step1&lt;br&gt;<br>
&gt;&nbsp;ssl_bump&nbsp;stare&nbsp;step2&lt;br&gt;<br>
&gt;&nbsp;ssl_bump&nbsp;bump&nbsp;all&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;You&nbsp;did&nbsp;not&nbsp;say&nbsp;what&nbsp;you&nbsp;want&nbsp;Squid&nbsp;to&nbsp;do,&nbsp;so&nbsp;it&nbsp;is&nbsp;difficult&nbsp;to&nbsp;say&lt;br&gt;<br>
whether&nbsp;the&nbsp;config&nbsp;is&nbsp;correct.&nbsp;However,&nbsp;the&nbsp;following&nbsp;combinations&nbsp;look&lt;br&gt;<br>
strange&nbsp;to&nbsp;me:&lt;br&gt;<br>
&lt;br&gt;<br>
*&nbsp;old&nbsp;&quot;none&quot;&nbsp;and&nbsp;new&nbsp;&quot;peek&quot;&nbsp;actions;&nbsp;use&nbsp;&quot;splice&quot;&nbsp;instead&nbsp;of&nbsp;&quot;none&quot;&lt;br&gt;<br>
*&nbsp;sometimes&nbsp;contradictory&nbsp;&quot;peek&quot;&nbsp;and&nbsp;&quot;stare&quot;&nbsp;actions;&nbsp;pick&nbsp;one&nbsp;kind&lt;br&gt;<br>
*&nbsp;sometimes&nbsp;contradictory&nbsp;&quot;peek&quot;&nbsp;and&nbsp;&quot;bump&quot;&nbsp;actions;&nbsp;if&nbsp;you&nbsp;intend&nbsp;to&lt;br&gt;<br>
bump,&nbsp;use&nbsp;&quot;stare&quot;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;<br>
Also,&nbsp;you&nbsp;may&nbsp;want&nbsp;to&nbsp;use&nbsp;ssl::server_name&nbsp;ACL&nbsp;instead&nbsp;of&nbsp;dstdomain.&lt;br&gt;<br>
Remember&nbsp;that&nbsp;Squid&nbsp;may&nbsp;have&nbsp;no&nbsp;domain&nbsp;information&nbsp;until&nbsp;it&nbsp;is&nbsp;too&nbsp;late&lt;br&gt;<br>
to&nbsp;splice.&nbsp;Here&nbsp;is&nbsp;a&nbsp;polished&nbsp;config&nbsp;that&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;do&nbsp;what&nbsp;you&nbsp;want:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;#&nbsp;Bump&nbsp;aggressively,&nbsp;including&nbsp;discovered-too-late&nbsp;broken_sites:&lt;br&gt;<br>
 &nbsp;acl&nbsp;ssl_bump_broken_sites&nbsp;ssl::server_name&nbsp;...&lt;br&gt;<br>
 &nbsp;ssl_bump&nbsp;splice&nbsp;ssl_bump_broken_sites&lt;br&gt;<br>
 &nbsp;ssl_bump&nbsp;stare&nbsp;all&lt;br&gt;<br>
 &nbsp;ssl_bump&nbsp;bump&nbsp;all&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Hi&nbsp;Alex,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thank&nbsp;you&nbsp;for&nbsp;looking&nbsp;into&nbsp;and&nbsp;advising&nbsp;about&nbsp;this.&nbsp;I&nbsp;really&nbsp;do&nbsp;not&nbsp;want&nbsp;to&nbsp;get&nbsp;intrusive&nbsp;on&nbsp;the&nbsp;setup.&lt;/div&gt;&lt;div&gt;All&nbsp;I&nbsp;want&nbsp;is&nbsp;the&nbsp;ability&nbsp;to&nbsp;intercept&nbsp;SSL&nbsp;sites&nbsp;and&nbsp;control&nbsp;access&nbsp;to&nbsp;them&nbsp;using&nbsp;TIME&nbsp;ACLs.&nbsp;That&#39;s&nbsp;all.&lt;/div&gt;&lt;div&gt;Sites&nbsp;should&nbsp;be&nbsp;accessed&nbsp;without&nbsp;any&nbsp;interference&nbsp;apart&nbsp;from&nbsp;determining&nbsp;at&nbsp;what&nbsp;time&nbsp;they&nbsp;can&nbsp;be&lt;/div&gt;&lt;div&gt;accessed&nbsp;by&nbsp;certain&nbsp;restricted&nbsp;users.&nbsp;Think&nbsp;about&nbsp;restricting&nbsp;&lt;a&nbsp;href=&quot;http://facebook.com&quot;&nbsp;target=&quot;_blank&quot;&gt;facebook.com&lt;/a&gt;,&nbsp;&lt;a&nbsp;href=&quot;http://youtube.com&quot;&nbsp;target=&quot;_blank&quot;&gt;youtube.com&lt;/a&gt;,&nbsp;etc&nbsp;which&lt;/div&gt;&lt;div&gt;otherwise&nbsp;I&nbsp;would&nbsp;not&nbsp;have&nbsp;control&nbsp;over&nbsp;in&nbsp;a&nbsp;normal&nbsp;intercept.&nbsp;That&#39;s&nbsp;the&nbsp;only&nbsp;reaon&nbsp;I&nbsp;need&nbsp;this&nbsp;ssl_bump&nbsp;stuff.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;in&nbsp;simple:&lt;/div&gt;&lt;div&gt;1.&nbsp;UserX&nbsp;tries&nbsp;to&nbsp;access&nbsp;&lt;a&nbsp;href=&quot;http://facebook.com/youtube.com&quot;&nbsp;target=&quot;_blank&quot;&gt;facebook.com/youtube.com&lt;/a&gt;&lt;/div&gt;&lt;div&gt;2.&nbsp;I&nbsp;intercept&nbsp;transparently&nbsp;https&nbsp;traffic &lt;/div&gt;&lt;div&gt;3.&nbsp;I&nbsp;tell&nbsp;squid&nbsp;&quot;don&#39;t&nbsp;allow&nbsp;this&nbsp;user&nbsp;to&nbsp;access&nbsp;&lt;a&nbsp;href=&quot;http://facebook.com&quot;&nbsp;target=&quot;_blank&quot;&gt;facebook.com&lt;/a&gt;&nbsp;at&nbsp;this&nbsp;time,&nbsp;but&nbsp;let&nbsp;them&nbsp;access&nbsp;at&nbsp;some-other-time&lt;/div&gt;&lt;div&gt;4.&nbsp;If&nbsp;time&nbsp;is&nbsp;right,&nbsp;let&nbsp;userX&nbsp;access&nbsp;the&nbsp;site.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;still&nbsp;need&nbsp;to&nbsp;wrap&nbsp;my&nbsp;hear&nbsp;around&nbsp;thise&nbsp;&#39;stare&#39;&nbsp;and&nbsp;&#39;peek&#39;&nbsp;and&nbsp;what&nbsp;happens&nbsp;with&nbsp;them.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex&quot;&gt;&lt;span&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;had&nbsp;to&nbsp;import&nbsp;my&nbsp;CA&nbsp;to&nbsp;all&nbsp;devices&nbsp;(as&nbsp;a&nbsp;trusted&nbsp;CA)&nbsp;on&lt;br&gt;<br>
&lt;/span&gt;&gt;&nbsp;the&nbsp;network&nbsp;so&nbsp;that&nbsp;they&nbsp;don&#39;t&nbsp;get&nbsp;the&nbsp;MITM&nbsp;notification.&nbsp;[...]&nbsp;People&lt;br&gt;<br>
&lt;span&gt;&gt;&nbsp;don&#39;t&nbsp;like&nbsp;intrusive&nbsp;changes.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;&quot;ssl_bump&nbsp;bump&quot;&nbsp;implies&nbsp;intrusiveness.&nbsp;You&nbsp;need&nbsp;to&nbsp;decide&nbsp;whether&lt;br&gt;<br>
bumping&nbsp;connections&nbsp;is&nbsp;important&nbsp;enough&nbsp;to&nbsp;be&nbsp;intrusive.&nbsp;The&nbsp;alternative&lt;br&gt;<br>
is&nbsp;passive&nbsp;monitoring/splicing&nbsp;that&nbsp;does&nbsp;not&nbsp;require&nbsp;intrusive&nbsp;changes&lt;br&gt;<br>
but&nbsp;gives&nbsp;you&nbsp;less&nbsp;control.&nbsp;Pick&nbsp;your&nbsp;poison.&lt;br&gt;<br>
&lt;span&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
Alex.&lt;br&gt;&lt;/font&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;looks&nbsp;like&nbsp;all&nbsp;I&nbsp;need&nbsp;is&nbsp;a&nbsp;setup&nbsp;of&nbsp;passive&nbsp;monitoring,&nbsp;given&nbsp;my&nbsp;explanation&nbsp;above,&nbsp;right? &lt;/div&gt;&lt;div&gt;Don&#39;t&nbsp;bump,&nbsp;just&nbsp;monitor&nbsp;and&nbsp;restrict&nbsp;access&nbsp;to&nbsp;some&nbsp;users&nbsp;based&nbsp;on&nbsp;time.&nbsp;Generally&nbsp;I&nbsp;want&nbsp;to&lt;/div&gt;&lt;div&gt;control&nbsp;access&nbsp;to&nbsp;those&nbsp;sites&nbsp;users&nbsp;usually&nbsp;waste&nbsp;time&nbsp;on&nbsp;during&nbsp;work&nbsp;hours:-)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Best&nbsp;regards,&lt;br&gt;Odhiambo&nbsp;WASHINGTON,&lt;br&gt;Nairobi,KE&lt;br&gt;+254&nbsp;7&nbsp;3200&nbsp;0004/+254&nbsp;7&nbsp;2274&nbsp;3223&lt;br&gt;&quot;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;Oh,&nbsp;the&nbsp;cruft.&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;&quot;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;<br>

</tt>
