<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&lt;div&gt;I&nbsp;try&nbsp;to&nbsp;authenticate&nbsp;a&nbsp;user&nbsp;in&nbsp;AD&nbsp;(windows&nbsp;server&nbsp;2008&nbsp;R2).&lt;/div&gt;&lt;div&gt;When&nbsp;he&nbsp;is&nbsp;in&nbsp;a&nbsp;group&nbsp;Webusers&nbsp;he&nbsp;must&nbsp;authenticated&nbsp;and&nbsp;when&nbsp;I&nbsp;remove&nbsp;the&nbsp;user&nbsp;of&nbsp;this&nbsp;group,&nbsp;he&nbsp;must&nbsp;not&nbsp;authenticated.&lt;/div&gt;&lt;div&gt;And&nbsp;this&nbsp;process&nbsp;doesn&#39;t&nbsp;work&nbsp;because&nbsp;he&nbsp;is&nbsp;always&nbsp;authticated.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Sorry&nbsp;for&nbsp;my&nbsp;english.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;post&nbsp;the&nbsp;squid&nbsp;configuration...&lt;/div&gt;&lt;div&gt;I&nbsp;don&#39;t&nbsp;post&nbsp;the&nbsp;logs&nbsp;because&nbsp;I&nbsp;&#39;m&nbsp;not&nbsp;errors.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;cache_mgr &lt;a&nbsp;href=&quot;mailto:service.informatique@ipl.be&quot;&nbsp;target=&quot;_blank&quot;&gt;service.informatique@&lt;/a&gt;&lt;a&nbsp;href=&quot;http://example.com&quot;&gt;example.com&lt;/a&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;###&nbsp;Negotiate&nbsp;kerberos&nbsp;authentification &lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;auth_param&nbsp;negotiate&nbsp;program&nbsp;/usr/lib/squid3/negotiate_kerberos_auth&nbsp;-s&nbsp;HTTP/&lt;a&nbsp;href=&quot;mailto:rex.example.com@EXAMPLE.COM&quot;&gt;rex.example.com@EXAMPLE.COM&lt;/a&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;auth_param&nbsp;negotiate&nbsp;children&nbsp;20&nbsp;startup=0&nbsp;idle=1&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;auth_param&nbsp;negotiate&nbsp;keep_alive&nbsp;off&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;###&nbsp;ldap&nbsp;authorisation&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;external_acl_type&nbsp;kerbgroup&nbsp;ttl=60&nbsp;children-max=15&nbsp;children-startup=10&nbsp;ipv4&nbsp;%LOGIN&nbsp;/usr/lib/squid3/ext_ldap_group_acl&nbsp;-R&nbsp;-K&nbsp;-b&nbsp;ou=students,dc=server,dc=example,dc=com&nbsp;-D&nbsp;&lt;a&nbsp;href=&quot;mailto:squid@example.com&quot;&gt;squid@example.com&lt;/a&gt;&nbsp;-W&nbsp;/etc/squid3/ldappass.txt&nbsp;-f&nbsp;&quot;(&amp;(objectclass=person)(sAMAccountName=%v)(memberof=cn=%g,ou=students,dc=server,dc=example,dc=com))&quot;&nbsp;-h&nbsp;&lt;a&nbsp;href=&quot;http://dc1.server.example.com&quot;&gt;dc1.server.example.com&lt;/a&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;###&nbsp;acl&nbsp;for&nbsp;proxy&nbsp;auth&nbsp;and&nbsp;ldap&nbsp;authorizations&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;acl&nbsp;auth&nbsp;proxy_auth&nbsp;REQUIRED&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;acl&nbsp;kerbusers&nbsp;external&nbsp;kerbgroup&nbsp;webusers&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;###&nbsp;squid&nbsp;defaults&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;acl&nbsp;localnet&nbsp;src &lt;a&nbsp;href=&quot;http://172.17.0.0/16&quot;&nbsp;target=&quot;_blank&quot;&gt;172.17.0.0/16&lt;/a&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;acl&nbsp;SSL_ports&nbsp;port&nbsp;443&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;80&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #&nbsp;http&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;21&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #&nbsp;ftp&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;443&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;https&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;70&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #&nbsp;gopher&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;210&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;wais&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;1025-65535&nbsp; #&nbsp;unregistered&nbsp;ports&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;280&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;http-mgmt&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;488&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;gss-http&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;591&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;filemaker&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;777&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;multiling&nbsp;http&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;acl&nbsp;CONNECT&nbsp;method&nbsp;CONNECT&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;http_access&nbsp;deny&nbsp;!Safe_ports&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;http_access&nbsp;deny&nbsp;CONNECT&nbsp;!SSL_ports&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;http_access&nbsp;allow&nbsp;localhost&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;###&nbsp;http_access&nbsp;rules&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;http_access&nbsp;allow&nbsp;manager&nbsp;localhost&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;http_access&nbsp;allow&nbsp;auth&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;http_access&nbsp;deny&nbsp;!auth&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;http_access&nbsp;allow&nbsp;kerbusers&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;http_access&nbsp;allow&nbsp;localnet&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;http_access&nbsp;deny&nbsp;manager&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;http_access&nbsp;deny&nbsp;all&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;###&nbsp;logging&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;access_log&nbsp;stdio:/var/log/squid3/access.log&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;cache_store_log&nbsp;stdio:/var/log/squid3/store.log&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;###&nbsp;squid&nbsp;Debian&nbsp;defaults&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;http_port&nbsp;3128&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;cache_effective_user&nbsp;proxy&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;cache_effective_group&nbsp;proxy&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;cache_dir&nbsp;ufs&nbsp;/cache1&nbsp;20000&nbsp;16&nbsp;256&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;cache_dir&nbsp;ufs&nbsp;/cache2&nbsp;20000&nbsp;16&nbsp;256&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;coredump_dir&nbsp;/var/spool/squid3&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;###&nbsp;default&nbsp;squid&nbsp;rules&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;refresh_pattern&nbsp;^ftp:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1440&nbsp; &nbsp; 20%&nbsp; &nbsp; &nbsp;10080&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;refresh_pattern&nbsp;^gopher:&nbsp; &nbsp; &nbsp; &nbsp; 1440&nbsp; &nbsp; 0%&nbsp; &nbsp; &nbsp; 1440&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;refresh_pattern&nbsp;-i&nbsp;(/cgi-bin/|\?)&nbsp;0&nbsp; &nbsp; &nbsp;0%&nbsp; &nbsp; &nbsp; 0&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-size:12.8px&quot;&gt;refresh_pattern&nbsp;.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;20%&nbsp; &nbsp; &nbsp;4320&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
