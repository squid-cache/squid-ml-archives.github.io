<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;Hey&nbsp;guys,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;First&nbsp;take&nbsp;a&nbsp;look&nbsp;at&nbsp;the&nbsp;log:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;root@proxy:/var/log/squid#&nbsp;tail&nbsp;-f&nbsp;access.log&nbsp;|grep<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://download.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-BR/firefox-45.0.1.complete.mar&quot;&gt;http://download.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-BR/firefox-45.0.1.complete.mar&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1463011781.572  &nbsp;8776&nbsp;10.1.3.236&nbsp;TCP_MISS/206&nbsp;300520&nbsp;GET<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://download.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-BR/firefox-45.0.1.complete.mar&quot;&gt;http://download.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-BR/firefox-45.0.1.complete.mar&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;HIER_DIRECT/200.216.8.9&nbsp;application/octet-stream&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1463011851.008  &nbsp;9347&nbsp;10.1.3.236&nbsp;TCP_MISS/206&nbsp;300520&nbsp;GET<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://download.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-BR/firefox-45.0.1.complete.mar&quot;&gt;http://download.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-BR/firefox-45.0.1.complete.mar&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;HIER_DIRECT/200.216.8.32&nbsp;application/octet-stream&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1463011920.683  &nbsp;9645&nbsp;10.1.3.236&nbsp;TCP_MISS/206&nbsp;300520&nbsp;GET<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://download.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-BR/firefox-45.0.1.complete.mar&quot;&gt;http://download.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-BR/firefox-45.0.1.complete.mar&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;HIER_DIRECT/200.216.8.9&nbsp;application/octet-stream&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1463012000.144 &nbsp;19154&nbsp;10.1.3.236&nbsp;TCP_MISS/206&nbsp;300520&nbsp;GET<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://download.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-BR/firefox-45.0.1.complete.mar&quot;&gt;http://download.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-BR/firefox-45.0.1.complete.mar&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;HIER_DIRECT/200.216.8.32&nbsp;application/octet-stream&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1463012072.276 &nbsp;12121&nbsp;10.1.3.236&nbsp;TCP_MISS/206&nbsp;300520&nbsp;GET<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://download.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-BR/firefox-45.0.1.complete.mar&quot;&gt;http://download.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-BR/firefox-45.0.1.complete.mar&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;HIER_DIRECT/200.216.8.32&nbsp;application/octet-stream&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1463012145.643 &nbsp;13358&nbsp;10.1.3.236&nbsp;TCP_MISS/206&nbsp;300520&nbsp;GET<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://download.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-BR/firefox-45.0.1.complete.mar&quot;&gt;http://download.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-BR/firefox-45.0.1.complete.mar&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;HIER_DIRECT/200.216.8.32&nbsp;application/octet-stream&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1463012217.472 &nbsp;11772&nbsp;10.1.3.236&nbsp;TCP_MISS/206&nbsp;300520&nbsp;GET<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://download.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-BR/firefox-45.0.1.complete.mar&quot;&gt;http://download.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-BR/firefox-45.0.1.complete.mar&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;HIER_DIRECT/200.216.8.32&nbsp;application/octet-stream&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1463012294.676 &nbsp;17148&nbsp;10.1.3.236&nbsp;TCP_MISS/206&nbsp;300520&nbsp;GET<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://download.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-BR/firefox-45.0.1.complete.mar&quot;&gt;http://download.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-BR/firefox-45.0.1.complete.mar&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;HIER_DIRECT/200.216.8.32&nbsp;application/octet-stream&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1463012370.131 &nbsp;15272&nbsp;10.1.3.236&nbsp;TCP_MISS/206&nbsp;300520&nbsp;GET<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://download.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-BR/firefox-45.0.1.complete.mar&quot;&gt;http://download.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-BR/firefox-45.0.1.complete.mar&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;HIER_DIRECT/200.216.8.32&nbsp;application/octet-stream&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Now&nbsp;think:&nbsp;An&nbsp;user&nbsp;is&nbsp;just&nbsp;doing&nbsp;a&nbsp;segmented/ranged&nbsp;download,&nbsp;right?<br>
&nbsp;&nbsp;&nbsp;&nbsp;Squid&nbsp;won't&nbsp;cache&nbsp;the&nbsp;file&nbsp;because&nbsp;it&nbsp;is&nbsp;a&nbsp;range-download,&nbsp;not&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;full&nbsp;file&nbsp;download.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;But&nbsp;I&nbsp;WANT&nbsp;squid&nbsp;to&nbsp;cache&nbsp;it.&nbsp;So&nbsp;I&nbsp;decide&nbsp;to&nbsp;use&nbsp;&quot;range_offset_limit<br>
&nbsp;&nbsp;&nbsp;&nbsp;-1&quot;,&nbsp;but&nbsp;then&nbsp;on&nbsp;every&nbsp;GET&nbsp;squid&nbsp;will&nbsp;re-download&nbsp;the&nbsp;file&nbsp;from&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;beginning,&nbsp;opening&nbsp;LOTs&nbsp;of&nbsp;simultaneous&nbsp;connections&nbsp;and&nbsp;using&nbsp;too<br>
&nbsp;&nbsp;&nbsp;&nbsp;much&nbsp;bandwidth,&nbsp;doing&nbsp;just&nbsp;the&nbsp;OPPOSITE&nbsp;it's&nbsp;meant&nbsp;to!&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Is&nbsp;there&nbsp;a&nbsp;smart&nbsp;way&nbsp;to&nbsp;allow&nbsp;squid&nbsp;to&nbsp;download&nbsp;it&nbsp;from&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;beginning&nbsp;to&nbsp;the&nbsp;end&nbsp;(to&nbsp;actually&nbsp;cache&nbsp;it),&nbsp;but&nbsp;only&nbsp;on&nbsp;the&nbsp;FIRST<br>
&nbsp;&nbsp;&nbsp;&nbsp;request/get?&nbsp;Even&nbsp;if&nbsp;it&nbsp;makes&nbsp;the&nbsp;user&nbsp;wait&nbsp;for&nbsp;the&nbsp;full&nbsp;download,<br>
&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;cancel&nbsp;it&nbsp;temporarily,&nbsp;or..&nbsp;whatever!!&nbsp;Anything!!&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Best&nbsp;Regards,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-signature&quot;&nbsp;cols=&quot;72&quot;&gt;--&nbsp;<br>
Heiler&nbsp;Bemerguy&nbsp;-&nbsp;(91)&nbsp;98151-4894<br>
Assessor&nbsp;Técnico&nbsp;-&nbsp;CINBESA&nbsp;(91)&nbsp;3184-1751&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
