<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;Hi&nbsp;Garri,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;That&nbsp;bug&nbsp;report&nbsp;is&nbsp;mine..&nbsp;lol&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;But&nbsp;I&nbsp;couldn't&nbsp;keep&nbsp;testing&nbsp;it&nbsp;to&nbsp;confirm&nbsp;if&nbsp;the&nbsp;problem&nbsp;was<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;about&nbsp;ABORTING&nbsp;downloads&nbsp;or&nbsp;just&nbsp;trying&nbsp;to&nbsp;download&nbsp;what's&nbsp;already<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;being&nbsp;downloaded...&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;When&nbsp;you&nbsp;use&nbsp;quick_abort_min&nbsp;-1,&nbsp;it&nbsp;seems&nbsp;to&nbsp;&quot;fix&quot;&nbsp;the&nbsp;caching<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;issue&nbsp;itself,&nbsp;but&nbsp;it&nbsp;won't&nbsp;prevent&nbsp;the&nbsp;concurrent&nbsp;downloads,&nbsp;which<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sucks&nbsp;up&nbsp;the&nbsp;link..&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;I&nbsp;don't&nbsp;know&nbsp;if&nbsp;it&nbsp;won't&nbsp;happen&nbsp;with&nbsp;aufs/ufs,&nbsp;I'm&nbsp;using&nbsp;only<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rock&nbsp;store.....&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-signature&quot;&nbsp;cols=&quot;72&quot;&gt;--&nbsp;<br>
Heiler&nbsp;Bemerguy&nbsp;-&nbsp;(91)&nbsp;98151-4894<br>
Assessor&nbsp;Técnico&nbsp;-&nbsp;CINBESA&nbsp;(91)&nbsp;3184-1751&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;moz-cite-prefix&quot;&gt;Em&nbsp;12/05/2016&nbsp;01:01,&nbsp;Garri&nbsp;Djavadyan<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;escreveu:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;cite=&quot;mid:1463025679.14398.4.camel@comnet.uz&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;On&nbsp;Wed,&nbsp;2016-05-11&nbsp;at&nbsp;21:37&nbsp;-0300,&nbsp;Heiler&nbsp;Bemerguy&nbsp;wrote:<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;<br>
Hey&nbsp;guys,<br>
First&nbsp;take&nbsp;a&nbsp;look&nbsp;at&nbsp;the&nbsp;log:<br>
root@proxy:/var/log/squid#&nbsp;tail&nbsp;-f&nbsp;access.log&nbsp;|grep&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://download.c&quot;&gt;http://download.c&lt;/a&gt;<br>
dn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-<br>
BR/firefox-45.0.1.complete.mar<br>
1463011781.572  &nbsp;8776&nbsp;10.1.3.236&nbsp;TCP_MISS/206&nbsp;300520&nbsp;GET&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://downl&quot;&gt;http://downl&lt;/a&gt;<br>
oad.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-<br>
BR/firefox-45.0.1.complete.mar&nbsp;-&nbsp;HIER_DIRECT/200.216.8.9<br>
application/octet-stream<br>
1463011851.008  &nbsp;9347&nbsp;10.1.3.236&nbsp;TCP_MISS/206&nbsp;300520&nbsp;GET&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://downl&quot;&gt;http://downl&lt;/a&gt;<br>
oad.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-<br>
BR/firefox-45.0.1.complete.mar&nbsp;-&nbsp;HIER_DIRECT/200.216.8.32<br>
application/octet-stream<br>
1463011920.683  &nbsp;9645&nbsp;10.1.3.236&nbsp;TCP_MISS/206&nbsp;300520&nbsp;GET&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://downl&quot;&gt;http://downl&lt;/a&gt;<br>
oad.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-<br>
BR/firefox-45.0.1.complete.mar&nbsp;-&nbsp;HIER_DIRECT/200.216.8.9<br>
application/octet-stream<br>
1463012000.144 &nbsp;19154&nbsp;10.1.3.236&nbsp;TCP_MISS/206&nbsp;300520&nbsp;GET&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://downl&quot;&gt;http://downl&lt;/a&gt;<br>
oad.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-<br>
BR/firefox-45.0.1.complete.mar&nbsp;-&nbsp;HIER_DIRECT/200.216.8.32<br>
application/octet-stream<br>
1463012072.276 &nbsp;12121&nbsp;10.1.3.236&nbsp;TCP_MISS/206&nbsp;300520&nbsp;GET&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://downl&quot;&gt;http://downl&lt;/a&gt;<br>
oad.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-<br>
BR/firefox-45.0.1.complete.mar&nbsp;-&nbsp;HIER_DIRECT/200.216.8.32<br>
application/octet-stream<br>
1463012145.643 &nbsp;13358&nbsp;10.1.3.236&nbsp;TCP_MISS/206&nbsp;300520&nbsp;GET&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://downl&quot;&gt;http://downl&lt;/a&gt;<br>
oad.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-<br>
BR/firefox-45.0.1.complete.mar&nbsp;-&nbsp;HIER_DIRECT/200.216.8.32<br>
application/octet-stream<br>
1463012217.472 &nbsp;11772&nbsp;10.1.3.236&nbsp;TCP_MISS/206&nbsp;300520&nbsp;GET&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://downl&quot;&gt;http://downl&lt;/a&gt;<br>
oad.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-<br>
BR/firefox-45.0.1.complete.mar&nbsp;-&nbsp;HIER_DIRECT/200.216.8.32<br>
application/octet-stream<br>
1463012294.676 &nbsp;17148&nbsp;10.1.3.236&nbsp;TCP_MISS/206&nbsp;300520&nbsp;GET&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://downl&quot;&gt;http://downl&lt;/a&gt;<br>
oad.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-<br>
BR/firefox-45.0.1.complete.mar&nbsp;-&nbsp;HIER_DIRECT/200.216.8.32<br>
application/octet-stream<br>
1463012370.131 &nbsp;15272&nbsp;10.1.3.236&nbsp;TCP_MISS/206&nbsp;300520&nbsp;GET&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://downl&quot;&gt;http://downl&lt;/a&gt;<br>
oad.cdn.mozilla.net/pub/firefox/releases/45.0.1/update/win32/pt-<br>
BR/firefox-45.0.1.complete.mar&nbsp;-&nbsp;HIER_DIRECT/200.216.8.32<br>
application/octet-stream<br>
Now&nbsp;think:&nbsp;An&nbsp;user&nbsp;is&nbsp;just&nbsp;doing&nbsp;a&nbsp;segmented/ranged&nbsp;download,&nbsp;right?<br>
Squid&nbsp;won't&nbsp;cache&nbsp;the&nbsp;file&nbsp;because&nbsp;it&nbsp;is&nbsp;a&nbsp;range-download,&nbsp;not&nbsp;a&nbsp;full<br>
file&nbsp;download.<br>
But&nbsp;I&nbsp;WANT&nbsp;squid&nbsp;to&nbsp;cache&nbsp;it.&nbsp;So&nbsp;I&nbsp;decide&nbsp;to&nbsp;use&nbsp;&quot;range_offset_limit<br>
-1&quot;,&nbsp;but&nbsp;then&nbsp;on&nbsp;every&nbsp;GET&nbsp;squid&nbsp;will&nbsp;re-download&nbsp;the&nbsp;file&nbsp;from&nbsp;the<br>
beginning,&nbsp;opening&nbsp;LOTs&nbsp;of&nbsp;simultaneous&nbsp;connections&nbsp;and&nbsp;using&nbsp;too<br>
much&nbsp;bandwidth,&nbsp;doing&nbsp;just&nbsp;the&nbsp;OPPOSITE&nbsp;it's&nbsp;meant&nbsp;to!<br>
<br>
Is&nbsp;there&nbsp;a&nbsp;smart&nbsp;way&nbsp;to&nbsp;allow&nbsp;squid&nbsp;to&nbsp;download&nbsp;it&nbsp;from&nbsp;the&nbsp;beginning<br>
to&nbsp;the&nbsp;end&nbsp;(to&nbsp;actually&nbsp;cache&nbsp;it),&nbsp;but&nbsp;only&nbsp;on&nbsp;the&nbsp;FIRST&nbsp;request/get?<br>
Even&nbsp;if&nbsp;it&nbsp;makes&nbsp;the&nbsp;user&nbsp;wait&nbsp;for&nbsp;the&nbsp;full&nbsp;download,&nbsp;or&nbsp;cancel&nbsp;it<br>
temporarily,&nbsp;or..&nbsp;whatever!!&nbsp;Anything!!<br>
<br>
Best&nbsp;Regards,<br>
-- <br>
Heiler&nbsp;Bemerguy&nbsp;-&nbsp;(91)&nbsp;98151-4894<br>
Assessor&nbsp;Técnico&nbsp;-&nbsp;CINBESA&nbsp;(91)&nbsp;3184-1751<br>
_______________________________________________<br>
squid-users&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;<br>
Hi,&nbsp;I&nbsp;believe,&nbsp;you&nbsp;describe&nbsp;the&nbsp;bug &lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://bugs.squid-cache.org/show_bu&quot;&gt;http://bugs.squid-cache.org/show_bu&lt;/a&gt;<br>
g.cgi?id=4469<br>
<br>
I&nbsp;tried&nbsp;to&nbsp;reproduce&nbsp;the&nbsp;problem&nbsp;and&nbsp;have&nbsp;found&nbsp;that&nbsp;the&nbsp;problem<br>
appears&nbsp;only&nbsp;with&nbsp;rock&nbsp;storage&nbsp;configurations.&nbsp;Can&nbsp;you&nbsp;try&nbsp;with<br>
ufs/aufs&nbsp;storage?<br>
_______________________________________________<br>
squid-users&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
