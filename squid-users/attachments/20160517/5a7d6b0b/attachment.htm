<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Below&nbsp;is&nbsp;my&nbsp;squid&nbsp;configuration &lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Squid&nbsp;:&nbsp;3.5.13&lt;/div&gt;&lt;div&gt;OS&nbsp;ubuntu&nbsp;14.04&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;http_port&nbsp;3128&lt;/div&gt;&lt;div&gt;http_port&nbsp;3127&nbsp;intercept&lt;/div&gt;&lt;div&gt;https_port&nbsp;3129&nbsp;intercept&nbsp;ssl-bump&nbsp;generate-host-certificates=on&nbsp;dynamic_cert_mem_cache_size=4MB&nbsp;cert=/etc/squid/ssl_certs/squid.crt&nbsp;key=/etc/squid/ssl_certs/squid.key&nbsp;cipher=ECDHE-RSA-RC4-SHA:ECDHE-RSA-AES128-SHA:DHE-RSA-AES128-SHA:DHE-RSA-CAMELLIA128-SHA:AES128-SHA:RC4-SHA:HIGH:!aNULL:!MD5:!ADH&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;always_direct&nbsp;allow&nbsp;all&lt;/div&gt;&lt;div&gt;sslproxy_cert_error&nbsp;allow&nbsp;all&lt;/div&gt;&lt;div&gt;sslproxy_flags&nbsp;DONT_VERIFY_PEER&lt;/div&gt;&lt;div&gt;acl&nbsp;blocked&nbsp;ssl::server_name&nbsp; &quot;/etc/squid/blocked_https.txt&quot;&lt;/div&gt;&lt;div&gt;acl&nbsp;step1&nbsp;at_step&nbsp;SslBump1&lt;/div&gt;&lt;div&gt;ssl_bump&nbsp;peek&nbsp;step1&lt;/div&gt;&lt;div&gt;ssl_bump&nbsp;terminate&nbsp;blocked&lt;/div&gt;&lt;div&gt;ssl_bump&nbsp;splice&nbsp;all&lt;/div&gt;&lt;div&gt;sslcrtd_program&nbsp;/usr/lib/squid/ssl_crtd&nbsp;-s&nbsp;/var/lib/squid/ssl_db&nbsp;-M&nbsp;4MB&lt;/div&gt;&lt;div&gt;sslcrtd_children&nbsp;16&nbsp;startup=1&nbsp;idle=1&lt;/div&gt;&lt;div&gt;sslproxy_capath&nbsp;/etc/ssl/certs&lt;/div&gt;&lt;div&gt;sslproxy_cert_error&nbsp;allow&nbsp;all&lt;/div&gt;&lt;div&gt;ssl_unclean_shutdown&nbsp;on&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;want&nbsp;to&nbsp;block&nbsp;&lt;a&nbsp;href=&quot;http://facebook.com&quot;&gt;facebook.com&lt;/a&gt;&nbsp;so&nbsp;I&nbsp;have&nbsp;added&nbsp;url&nbsp;in&nbsp;.txt&nbsp;file.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Its&nbsp;not&nbsp;blocking&nbsp;anything.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Please&nbsp;let&nbsp;me&nbsp;know&nbsp;what&nbsp;I&nbsp;have&nbsp;to&nbsp;change&nbsp;in&nbsp;this&nbsp;configuration&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;getting&nbsp;below&nbsp;logs&nbsp;in&nbsp;squid&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;1463478160.585&nbsp; &nbsp; 551&nbsp;192.168.0.66&nbsp;TAG_NONE/200&nbsp;0&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://107.170.47.181:443&quot;&gt;107.170.47.181:443&lt;/a&gt;&nbsp;-&nbsp;HIER_NONE/-&nbsp;-&lt;/div&gt;&lt;div&gt;1463478160.585&nbsp; &nbsp; 550&nbsp;192.168.0.66&nbsp;TAG_NONE/503&nbsp;0&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://freevideodownloader.co:443&quot;&gt;freevideodownloader.co:443&lt;/a&gt;&nbsp;-&nbsp;HIER_NONE/-&nbsp;-&lt;/div&gt;&lt;div&gt;1463478161.147&nbsp; &nbsp; 562&nbsp;192.168.0.66&nbsp;TAG_NONE/200&nbsp;0&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://107.170.47.181:443&quot;&gt;107.170.47.181:443&lt;/a&gt;&nbsp;-&nbsp;HIER_NONE/-&nbsp;-&lt;/div&gt;&lt;div&gt;1463478161.147&nbsp; &nbsp; 561&nbsp;192.168.0.66&nbsp;TAG_NONE/503&nbsp;0&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://freevideodownloader.co:443&quot;&gt;freevideodownloader.co:443&lt;/a&gt;&nbsp;-&nbsp;HIER_NONE/-&nbsp;-&lt;/div&gt;&lt;div&gt;1463478163.982&nbsp; &nbsp; 553&nbsp;192.168.0.66&nbsp;TAG_NONE/200&nbsp;0&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://107.170.47.181:443&quot;&gt;107.170.47.181:443&lt;/a&gt;&nbsp;-&nbsp;HIER_NONE/-&nbsp;-&lt;/div&gt;&lt;div&gt;1463478163.982&nbsp; &nbsp; 552&nbsp;192.168.0.66&nbsp;TAG_NONE/503&nbsp;0&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://freevideodownloader.co:443&quot;&gt;freevideodownloader.co:443&lt;/a&gt;&nbsp;-&nbsp;HIER_NONE/-&nbsp;-&lt;/div&gt;&lt;div&gt;1463478163.994&nbsp; &nbsp; 565&nbsp;192.168.0.66&nbsp;TAG_NONE/200&nbsp;0&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://107.170.47.181:443&quot;&gt;107.170.47.181:443&lt;/a&gt;&nbsp;-&nbsp;HIER_NONE/-&nbsp;-&lt;/div&gt;&lt;div&gt;1463478163.994&nbsp; &nbsp; 564&nbsp;192.168.0.66&nbsp;TAG_NONE/503&nbsp;0&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://freevideodownloader.co:443&quot;&gt;freevideodownloader.co:443&lt;/a&gt;&nbsp;-&nbsp;HIER_NONE/-&nbsp;-&lt;/div&gt;&lt;div&gt;1463478184.338&nbsp;182900&nbsp;192.168.0.66&nbsp;TAG_NONE/200&nbsp;0&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://106.10.137.175:443&quot;&gt;106.10.137.175:443&lt;/a&gt;&nbsp;-&nbsp;HIER_NONE/-&nbsp;-&lt;/div&gt;&lt;div&gt;1463478184.338&nbsp;182898&nbsp;192.168.0.66&nbsp;TCP_TUNNEL/200&nbsp;6040&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://geo.query.yahoo.com:443&quot;&gt;geo.query.yahoo.com:443&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://106.10.137.175&quot;&gt;106.10.137.175&lt;/a&gt;&nbsp;-&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1463478194.373&nbsp; &nbsp; &nbsp;61&nbsp;192.168.0.66&nbsp;TCP_MISS/204&nbsp;233&nbsp;GET&nbsp;&lt;a&nbsp;href=&quot;http://www.gstatic.com/generate_204&quot;&gt;http://www.gstatic.com/generate_204&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://216.58.199.163&quot;&gt;216.58.199.163&lt;/a&gt;&nbsp;-&lt;/div&gt;&lt;div&gt;1463478209.166&nbsp;240232&nbsp;192.168.0.66&nbsp;TAG_NONE/200&nbsp;0&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://74.125.200.239:443&quot;&gt;74.125.200.239:443&lt;/a&gt;&nbsp;-&nbsp;HIER_NONE/-&nbsp;-&lt;/div&gt;&lt;div&gt;1463478209.166&nbsp;240231&nbsp;192.168.0.66&nbsp;TCP_TUNNEL/200&nbsp;5603&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://translate.googleapis.com:443&quot;&gt;translate.googleapis.com:443&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://74.125.200.239&quot;&gt;74.125.200.239&lt;/a&gt;&nbsp;-&lt;/div&gt;&lt;div&gt;1463478209.200&nbsp;240267&nbsp;192.168.0.66&nbsp;TAG_NONE/200&nbsp;0&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://216.58.199.142:443&quot;&gt;216.58.199.142:443&lt;/a&gt;&nbsp;-&nbsp;HIER_NONE/-&nbsp;-&lt;/div&gt;&lt;div&gt;1463478209.200&nbsp;240266&nbsp;192.168.0.66&nbsp;TCP_TUNNEL/200&nbsp;4962&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://clients4.google.com:443&quot;&gt;clients4.google.com:443&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://216.58.199.142&quot;&gt;216.58.199.142&lt;/a&gt;&nbsp;-&lt;/div&gt;&lt;div&gt;1463478213.443&nbsp;181611&nbsp;192.168.0.66&nbsp;TAG_NONE/200&nbsp;0&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://31.13.79.246:443&quot;&gt;31.13.79.246:443&lt;/a&gt;&nbsp;-&nbsp;HIER_NONE/-&nbsp;-&lt;/div&gt;&lt;div&gt;1463478213.443&nbsp;181611&nbsp;192.168.0.66&nbsp;TCP_TUNNEL/200&nbsp;8547&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://graph.facebook.com:443&quot;&gt;graph.facebook.com:443&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://31.13.79.246&quot;&gt;31.13.79.246&lt;/a&gt;&nbsp;-&lt;/div&gt;&lt;div&gt;1463478224.432&nbsp; &nbsp; &nbsp;33&nbsp;192.168.0.66&nbsp;TCP_MISS/204&nbsp;233&nbsp;GET&nbsp;&lt;a&nbsp;href=&quot;http://www.gstatic.com/generate_204&quot;&gt;http://www.gstatic.com/generate_204&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://216.58.199.131&quot;&gt;216.58.199.131&lt;/a&gt;&nbsp;-&lt;/div&gt;&lt;div&gt;1463478231.727&nbsp; &nbsp; 555&nbsp;192.168.0.66&nbsp;TAG_NONE/200&nbsp;0&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://107.170.47.181:443&quot;&gt;107.170.47.181:443&lt;/a&gt;&nbsp;-&nbsp;HIER_NONE/-&nbsp;-&lt;/div&gt;&lt;div&gt;1463478231.727&nbsp; &nbsp; 555&nbsp;192.168.0.66&nbsp;TAG_NONE/503&nbsp;0&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://freevideodownloader.co:443&quot;&gt;freevideodownloader.co:443&lt;/a&gt;&nbsp;-&nbsp;HIER_NONE/-&nbsp;-&lt;/div&gt;&lt;div&gt;1463478232.311&nbsp; &nbsp; 572&nbsp;192.168.0.66&nbsp;TAG_NONE/200&nbsp;0&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://107.170.47.181:443&quot;&gt;107.170.47.181:443&lt;/a&gt;&nbsp;-&nbsp;HIER_NONE/-&nbsp;-&lt;/div&gt;&lt;div&gt;1463478232.311&nbsp; &nbsp; 571&nbsp;192.168.0.66&nbsp;TAG_NONE/503&nbsp;0&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://freevideodownloader.co:443&quot;&gt;freevideodownloader.co:443&lt;/a&gt;&nbsp;-&nbsp;HIER_NONE/-&nbsp;-&lt;/div&gt;&lt;div&gt;1463478246.369&nbsp; 13073&nbsp;192.168.0.66&nbsp;TAG_NONE/200&nbsp;0&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://74.125.200.189:443&quot;&gt;74.125.200.189:443&lt;/a&gt;&nbsp;-&nbsp;HIER_NONE/-&nbsp;-&lt;/div&gt;&lt;div&gt;1463478246.369&nbsp; 13072&nbsp;192.168.0.66&nbsp;TCP_TUNNEL/200&nbsp;4546&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://0.client-channel.google.com:443&quot;&gt;0.client-channel.google.com:443&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://74.125.200.189&quot;&gt;74.125.200.189&lt;/a&gt;&nbsp;-&lt;/div&gt;&lt;div&gt;1463478246.369&nbsp; 13806&nbsp;192.168.0.66&nbsp;TAG_NONE/200&nbsp;0&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://216.58.199.142:443&quot;&gt;216.58.199.142:443&lt;/a&gt;&nbsp;-&nbsp;HIER_NONE/-&nbsp;-&lt;/div&gt;&lt;div&gt;1463478246.369&nbsp; 13805&nbsp;192.168.0.66&nbsp;TCP_TUNNEL/200&nbsp;4604&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://clients5.google.com:443&quot;&gt;clients5.google.com:443&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://216.58.199.142&quot;&gt;216.58.199.142&lt;/a&gt;&nbsp;-&lt;/div&gt;&lt;div&gt;1463478265.935&nbsp;119576&nbsp;192.168.0.66&nbsp;TAG_NONE/200&nbsp;0&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://106.10.199.11:443&quot;&gt;106.10.199.11:443&lt;/a&gt;&nbsp;-&nbsp;HIER_NONE/-&nbsp;-&lt;/div&gt;&lt;div&gt;1463478265.935&nbsp;119576&nbsp;192.168.0.66&nbsp;TCP_TUNNEL/200&nbsp;8586&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://geo.yahoo.com:443&quot;&gt;geo.yahoo.com:443&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://106.10.199.11&quot;&gt;106.10.199.11&lt;/a&gt;&nbsp;-&lt;/div&gt;&lt;div&gt;1463478327.555&nbsp; &nbsp; &nbsp;41&nbsp;192.168.0.66&nbsp;TCP_MISS/200&nbsp;2323&nbsp;GET&nbsp;&lt;a&nbsp;href=&quot;http://www.gstatic.com/chrome/crlset/3006/crl-set-delta-3005-260733898557562236.crx.data&quot;&gt;http://www.gstatic.com/chrome/crlset/3006/crl-set-delta-3005-260733898557562236.crx.data&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://216.58.220.3&quot;&gt;216.58.220.3&lt;/a&gt;&nbsp;text/html&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;May&nbsp;13,&nbsp;2016&nbsp;at&nbsp;4:37&nbsp;PM,&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&nbsp;target=&quot;_blank&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&gt;On&nbsp;13/05/2016&nbsp;5:58&nbsp;p.m.,&nbsp;Reet&nbsp;Vyas&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;Hi&nbsp;Amos/Yuri,&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Currently&nbsp;my&nbsp;squid&nbsp;is&nbsp;configured&nbsp;with&nbsp;ssl&nbsp;bump,&nbsp;now&nbsp;I&nbsp;want&nbsp;to&nbsp;use&nbsp;peek&nbsp;and&lt;br&gt;<br>
&gt;&nbsp;splice.&nbsp;I&nbsp;read&nbsp;in&nbsp;some&nbsp;forum&nbsp;that&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;install&nbsp;certificate&nbsp;on&lt;br&gt;<br>
&gt;&nbsp;client&#39;s&nbsp;machine.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;Splice&nbsp;does&nbsp;not&nbsp;require&nbsp;it.&nbsp;But&nbsp;what&nbsp;you&nbsp;want&nbsp;to&nbsp;do&nbsp;with&nbsp;Squid&nbsp;may&lt;br&gt;<br>
prevent&nbsp;splice&nbsp;being&nbsp;used.&nbsp;So&nbsp;&quot;it&nbsp;depends&quot;&nbsp;...&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;As&nbsp;I&nbsp;have&nbsp;already&nbsp;asked&nbsp;before&nbsp;in&nbsp;mailing&nbsp;list&nbsp;to&nbsp;install&nbsp;SSL&nbsp;certificate&lt;br&gt;<br>
&gt;&nbsp;on&nbsp;Android&nbsp;devices,&nbsp;which&nbsp;is&nbsp;not&nbsp;working.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;So&nbsp;my&nbsp;question&nbsp;is&nbsp;If&nbsp;I&nbsp;want&nbsp;to&nbsp;use&nbsp;peek&nbsp;and&nbsp;splice&nbsp;for&nbsp;example&nbsp;I&nbsp;want&nbsp;https&lt;br&gt;<br>
&gt;&nbsp;filtering&nbsp;for&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt; ...&nbsp;on&nbsp;how&nbsp;you&nbsp;define&nbsp;&quot;filter&quot;.&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;proxy&nbsp;websites&lt;br&gt;<br>
&lt;br&gt;<br>
Not&nbsp;sure&nbsp;what&nbsp;you&nbsp;mean&nbsp;by&nbsp;that&nbsp;term.&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&gt;&nbsp;and&nbsp;I&nbsp;dont&nbsp;want&nbsp;ssl&nbsp;for&nbsp;bank&nbsp;websites&nbsp;and&lt;br&gt;<br>
&gt;&nbsp;facebook&nbsp;youtube&nbsp;and&nbsp;gmail.&nbsp;how&nbsp;will&nbsp;it&nbsp;work?&nbsp;Do&nbsp;i&nbsp;need&nbsp;to&nbsp;install&nbsp;SSL&lt;br&gt;<br>
&gt;&nbsp;certifcate&nbsp;on&nbsp;client&nbsp;or&nbsp;not,&nbsp;I&nbsp;am&nbsp;bit&nbsp;confused&nbsp;with&nbsp;peek&nbsp;and&nbsp;splice&nbsp;thing.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;When&nbsp;you&nbsp;intercept&nbsp;port&nbsp;443&nbsp;normally&nbsp;only&nbsp;the&nbsp;raw-IP&nbsp;is&nbsp;available&nbsp;from&lt;br&gt;<br>
TCP.&nbsp;Peek&nbsp;allows&nbsp;Squid&nbsp;to&nbsp;get&nbsp;the&nbsp;server&nbsp;name&nbsp;the&nbsp;client&nbsp;was&nbsp;trying&nbsp;to&lt;br&gt;<br>
connect&nbsp;to&nbsp;out&nbsp;of&nbsp;the&nbsp;TLS.&nbsp;So&nbsp;that&nbsp;Squid&nbsp;can&nbsp;handle&nbsp;the&nbsp;intercepted&lt;br&gt;<br>
connection&nbsp;as&nbsp;if&nbsp;it&nbsp;had&nbsp;received&nbsp;a&nbsp;CONNECT&nbsp;message&nbsp;(which&nbsp;usually&nbsp;have&lt;br&gt;<br>
server/domain&nbsp;names).&lt;br&gt;<br>
&lt;br&gt;<br>
Splicing&nbsp;can&nbsp;be&nbsp;thought&nbsp;of&nbsp;as&nbsp;handling&nbsp;a&nbsp;intercepted&nbsp;port&nbsp;443&nbsp;connection&lt;br&gt;<br>
as&nbsp;if&nbsp;it&nbsp;were&nbsp;a&nbsp;CONNECT&nbsp;message,&nbsp;with&nbsp;no&nbsp;decryption.&nbsp;It&nbsp;is&nbsp;treated&nbsp;as&nbsp;a&lt;br&gt;<br>
single&nbsp;&quot;thing&quot;,&nbsp;with&nbsp;some&nbsp;limited&nbsp;control&nbsp;possibilities.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
So...&lt;br&gt;<br>
&lt;br&gt;<br>
In&nbsp;order&nbsp;to&nbsp;bump&nbsp;(decrypt)&nbsp;some&nbsp;traffic&nbsp;and&nbsp;splice&nbsp;(not&nbsp;decrypt)&nbsp;other&lt;br&gt;<br>
traffic&nbsp;you&nbsp;need&nbsp;to&nbsp;have&nbsp;a&nbsp;way&nbsp;to&nbsp;decide&nbsp;which&nbsp;type&nbsp;is&nbsp;being&nbsp;dealt&nbsp;with.&lt;br&gt;<br>
That&nbsp;is&nbsp;the&nbsp;peek&nbsp;or&nbsp;stare&nbsp;actions&nbsp;-&nbsp;to&nbsp;get&nbsp;data&nbsp;out&nbsp;of&nbsp;the&nbsp;TLS&nbsp;handshake&lt;br&gt;<br>
for&nbsp;you&nbsp;to&nbsp;use&nbsp;in&nbsp;ACL&nbsp;decisions.&lt;br&gt;<br>
&lt;br&gt;<br>
You&nbsp;might&nbsp;now&nbsp;want&nbsp;to&nbsp;re-read&nbsp;the&nbsp;SslPeekAndSplice&nbsp;documentation&nbsp;again&lt;br&gt;<br>
to&nbsp;see&nbsp;if&nbsp;you&nbsp;understand&nbsp;it&nbsp;better.&nbsp;I&nbsp;skipped&nbsp;a&nbsp;lot&nbsp;of&nbsp;important&nbsp;details&lt;br&gt;<br>
to&nbsp;make&nbsp;the&nbsp;description&nbsp;clear.&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Please&nbsp;let&nbsp;me&nbsp;know&nbsp;is&nbsp;that&nbsp;possible&nbsp;to&nbsp;configure&nbsp;squid&nbsp;3.5.19&nbsp;in&nbsp;such&nbsp;a&nbsp;way&lt;br&gt;<br>
&gt;&nbsp;so&nbsp;that&nbsp;it&nbsp;will&nbsp;bump &nbsp;only&nbsp;proxy&nbsp;websites&nbsp;not&nbsp;FB&nbsp;youtube&nbsp;etc.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;Ah.&nbsp;So&nbsp;what&nbsp;are&nbsp;these&nbsp;&quot;proxy&nbsp;websites&quot;&nbsp;you&nbsp;speak&nbsp;of&nbsp;?&lt;br&gt;<br>
&lt;br&gt;<br>
One&nbsp;thing&nbsp;you&nbsp;need&nbsp;to&nbsp;be&nbsp;clear&nbsp;about&nbsp;is&nbsp;that&nbsp;once&nbsp;the&nbsp;TCP&nbsp;packets&nbsp;enter&lt;br&gt;<br>
Squid&nbsp;they&nbsp;*have*&nbsp;to&nbsp;be&nbsp;&quot;proxied&quot;.&nbsp;There&nbsp;is&nbsp;no&nbsp;way&nbsp;to&nbsp;undo&nbsp;TCP&nbsp;accept()&lt;br&gt;<br>
and&nbsp;read()&nbsp;operations.&nbsp;But&nbsp;there&nbsp;are&nbsp;many&nbsp;ways&nbsp;of&nbsp;handling&nbsp;them&nbsp;that&lt;br&gt;<br>
Squid&nbsp;can&nbsp;do.&lt;br&gt;<br>
&lt;br&gt;<br>
PS.&nbsp;you&nbsp;could&nbsp;post&nbsp;your&nbsp;existing&nbsp;config&nbsp;so&nbsp;we&nbsp;can&nbsp;suggest&nbsp;alterations&nbsp;to&lt;br&gt;<br>
it&nbsp;that&nbsp;will&nbsp;lead&nbsp;to&nbsp;it&nbsp;doing&nbsp;your&nbsp;new&nbsp;policy.&nbsp;That&nbsp;can&nbsp;be&nbsp;another&nbsp;way&lt;br&gt;<br>
to&nbsp;learn&nbsp;how&nbsp;the&nbsp;relevant-to-you&nbsp;part&nbsp;of&nbsp;the&nbsp;features&nbsp;work&nbsp;without&lt;br&gt;<br>
diving&nbsp;into&nbsp;the&nbsp;full&nbsp;complexity&nbsp;of&nbsp;what&nbsp;*might*&nbsp;be&nbsp;doable.&lt;br&gt;<br>
&lt;br&gt;<br>
Amos&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
