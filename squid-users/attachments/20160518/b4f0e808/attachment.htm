<tt>
&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&gt;&nbsp;18.05.16&nbsp;3:11,&nbsp;Robert&nbsp;W&nbsp;Weaver&nbsp;пишет:&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&gt;&gt;&nbsp;The&nbsp;issue&nbsp;is&nbsp;I&nbsp;need&nbsp;to&nbsp;connect&nbsp;to&nbsp;a&nbsp;site<br>
that&nbsp;requires&nbsp;client&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&gt;&gt;&nbsp;authentication.&nbsp;&nbsp;Don't&nbsp;want&nbsp;to&nbsp;put<br>
the&nbsp;key&nbsp;and&nbsp;cert&nbsp;on&nbsp;each&nbsp;individual&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&gt;&gt;&nbsp;user,&nbsp;so&nbsp;instead&nbsp;want&nbsp;the&nbsp;key&nbsp;and&nbsp;cert<br>
on&nbsp;the&nbsp;proxy.&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&gt;&gt;&nbsp;Diagram:&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&gt;&gt;&nbsp;User&nbsp;A&nbsp;---&gt;&nbsp;Squid&nbsp;S&nbsp;---&gt;&nbsp;Server<br>
B&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;^&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;^&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+--&nbsp;TLS&nbsp;client&nbsp;authentication&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+--&nbsp;cleartext<br>
okay&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;On&nbsp;Wed,&nbsp;18&nbsp;May&nbsp;2016&nbsp;17:48:26&nbsp;+1200,&nbsp;Amos&nbsp;Jeffries<br>
&lt;squid3@treenet.co.nz&gt;&nbsp;wrote:&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&nbsp;On&nbsp;18/05/2016&nbsp;10:05&nbsp;a.m.,&nbsp;Yuri&nbsp;Voinov&nbsp;wrote:&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&gt;&nbsp;&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&gt;&nbsp;.....&nbsp;and&nbsp;a&nbsp;bit&nbsp;below&nbsp;in&nbsp;squid.conf.documented<br>
we&nbsp;can&nbsp;see.....&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&gt;&nbsp;&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&gt;&nbsp;#&nbsp;SSL&nbsp;OPTIONS&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&gt;&nbsp;#&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&gt;&nbsp;-----------------------------------------------------------------------------&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&gt;&nbsp;&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&gt;&nbsp;#&nbsp;&nbsp;TAG:&nbsp;sslproxy_client_certificate&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&gt;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;Client&nbsp;SSL&nbsp;Certificate&nbsp;to<br>
use&nbsp;when&nbsp;proxying&nbsp;https://&nbsp;URLs&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&gt;&nbsp;#Default:&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&gt;&nbsp;#&nbsp;none&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&gt;&nbsp;&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&gt;&nbsp;#&nbsp;&nbsp;TAG:&nbsp;sslproxy_client_key&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&gt;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;Client&nbsp;SSL&nbsp;Key&nbsp;to&nbsp;use&nbsp;when<br>
proxying&nbsp;https://&nbsp;URLs&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&gt;&nbsp;#Default:&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&gt;&nbsp;#&nbsp;none&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&gt;&nbsp;&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&gt;&nbsp;Ta-daaaaaaaa!&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&nbsp;&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&nbsp;You&nbsp;are&nbsp;the&nbsp;one&nbsp;getting&nbsp;it&nbsp;wrong&nbsp;here&nbsp;Yuri&nbsp;:-(&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;I&nbsp;am&nbsp;celebrating&nbsp;Yuri's&nbsp;ta&nbsp;dah.&nbsp;&nbsp;The&nbsp;clue&nbsp;to<br>
squid.config.documented&nbsp;was&nbsp;crucial,&nbsp;and&nbsp;the&nbsp;specific&nbsp;hint&nbsp;to&nbsp;sslproxy_client_*<br>
was&nbsp;what&nbsp;was&nbsp;missing.&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;From&nbsp;S&nbsp;to&nbsp;B&nbsp;is&nbsp;now&nbsp;working&nbsp;properly.&nbsp;&nbsp;Squid&nbsp;is<br>
now&nbsp;in&nbsp;the&nbsp;middle,&nbsp;and&nbsp;is&nbsp;performing&nbsp;authentication&nbsp;to&nbsp;server&nbsp;B&nbsp;properly.&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&nbsp;*&nbsp;clientca=&nbsp;is&nbsp;for&nbsp;listening&nbsp;ports.&nbsp;He&nbsp;wants<br>
that&nbsp;conectio&nbsp;to&nbsp;be&nbsp;cleartext.&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&nbsp;*&nbsp;sslproxy_*&nbsp;directives&nbsp;are&nbsp;for&nbsp;generic&nbsp;DIRECT<br>
connections.&nbsp;He&nbsp;wants&nbsp;a&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&nbsp;specific&nbsp;proxy&lt;-&gt;server&nbsp;connection&nbsp;to&nbsp;be<br>
TLS&nbsp;authenticated.&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&nbsp;For&nbsp;the&nbsp;S&lt;-&gt;B&nbsp;connection&nbsp;to&nbsp;use&nbsp;client<br>
certificates.&nbsp;cert=&nbsp;and&nbsp;key=&nbsp;on&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&nbsp;the&nbsp;cache_peer&nbsp;directive&nbsp;defining&nbsp;that&nbsp;link&nbsp;are<br>
correct.&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&nbsp;But&nbsp;there&nbsp;are&nbsp;twe&nbsp;other&nbsp;details&nbsp;that&nbsp;need&nbsp;to<br>
happen&nbsp;for&nbsp;it&nbsp;to&nbsp;work:&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&nbsp;*&nbsp;the&nbsp;server&nbsp;actually&nbsp;challenge&nbsp;for&nbsp;the&nbsp;proxies<br>
'client'&nbsp;cert,&nbsp;and&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&nbsp;*&nbsp;the&nbsp;server&nbsp;trust&nbsp;the&nbsp;CA&nbsp;which&nbsp;signed&nbsp;that&nbsp;cert.&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;This&nbsp;is&nbsp;happening.&nbsp;&nbsp;I'd&nbsp;generated&nbsp;a&nbsp;CSR&nbsp;and&nbsp;had<br>
the&nbsp;CA&nbsp;that&nbsp;is&nbsp;the&nbsp;&quot;owner&quot;&nbsp;of&nbsp;server&nbsp;B&nbsp;sign&nbsp;it&nbsp;for&nbsp;me.&nbsp;&nbsp;We<br>
are&nbsp;cool.&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&nbsp;The&nbsp;world&nbsp;of&nbsp;&quot;not&nbsp;working&quot;&nbsp;is&nbsp;a&nbsp;very<br>
big&nbsp;place.&nbsp;We&nbsp;need&nbsp;more&nbsp;details&nbsp;of&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&nbsp;*how*&nbsp;its&nbsp;not&nbsp;working&nbsp;in&nbsp;order&nbsp;to&nbsp;have&nbsp;any&nbsp;guideposts<br>
towards&nbsp;what&nbsp;the&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&nbsp;problem&nbsp;actually&nbsp;is.&nbsp;As&nbsp;Yuri&nbsp;used&nbsp;to&nbsp;say&nbsp;a&nbsp;lot,<br>
my&nbsp;psychic&nbsp;friend&nbsp;is&nbsp;on&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&nbsp;holiday.&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;It&nbsp;is&nbsp;now&nbsp;working&nbsp;to&nbsp;an&nbsp;acceptable&nbsp;point,&nbsp;although<br>
there&nbsp;is&nbsp;an&nbsp;enhancement&nbsp;that&nbsp;would&nbsp;be&nbsp;nice.&nbsp;&nbsp;Right&nbsp;now,&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;1.&nbsp;&nbsp;A&nbsp;connects&nbsp;to&nbsp;S,&nbsp;requests&nbsp;&lt;/font&gt;&lt;/tt&gt;&lt;a&nbsp;href=https://b/some/image.png&gt;&lt;tt&gt;&lt;font&nbsp;size=2&nbsp;color=blue&gt;https://B/some/image.png&lt;/font&gt;&lt;/tt&gt;&lt;/a&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;2.&nbsp;&nbsp;S&nbsp;connects&nbsp;to&nbsp;B&nbsp;over&nbsp;TLS,&nbsp;performs&nbsp;client<br>
authentication,&nbsp;gets&nbsp;/some/image.png&nbsp;(or&nbsp;pulls&nbsp;from&nbsp;cache)&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;3.&nbsp;&nbsp;A&nbsp;converts&nbsp;to&nbsp;TLS&nbsp;to&nbsp;S,&nbsp;pulls&nbsp;down&nbsp;data.&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;This&nbsp;is&nbsp;fine,&nbsp;its&nbsp;just&nbsp;that&nbsp;there&nbsp;is&nbsp;an&nbsp;unnecessary<br>
encrypt/decrypt&nbsp;between&nbsp;A&nbsp;and&nbsp;S.&nbsp;&nbsp;The&nbsp;connection&nbsp;is&nbsp;inside&nbsp;a&nbsp;controlled<br>
data&nbsp;center&nbsp;(on&nbsp;the&nbsp;same&nbsp;switch,&nbsp;perhaps&nbsp;on&nbsp;the&nbsp;same&nbsp;ESX&nbsp;host)&nbsp;so&nbsp;I'm&nbsp;not<br>
concerned&nbsp;about&nbsp;security&nbsp;--&nbsp;not&nbsp;to&nbsp;mention&nbsp;the&nbsp;cached&nbsp;data&nbsp;isn't&nbsp;especially<br>
sensitive.&nbsp;&nbsp;&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;So&nbsp;this&nbsp;last&nbsp;bit&nbsp;is&nbsp;just&nbsp;an&nbsp;enhancement,&nbsp;a&nbsp;nice&nbsp;to<br>
have.&nbsp;&nbsp;Its&nbsp;the&nbsp;opposite&nbsp;of&nbsp;SSL&nbsp;termination&nbsp;for&nbsp;accelerators,&nbsp;so&nbsp;I<br>
suspect&nbsp;its&nbsp;possible,&nbsp;just&nbsp;don't&nbsp;know&nbsp;how&nbsp;to&nbsp;do&nbsp;it.&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;Coffee&nbsp;(or&nbsp;a&nbsp;favorite&nbsp;beverage)&nbsp;all&nbsp;around!&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;--woody&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;--&nbsp;&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;Doubt&nbsp;is&nbsp;not&nbsp;a&nbsp;pleasant&nbsp;condition,&nbsp;but&nbsp;certainty&nbsp;is<br>
absurd.&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;--&nbsp;Voltaire&lt;/font&gt;&lt;/tt&gt;&lt;br&gt;&lt;BR&gt;<br>

</tt>
