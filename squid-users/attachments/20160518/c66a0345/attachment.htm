<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Scenario&nbsp;: &nbsp;I&nbsp;want&nbsp;to&nbsp;block&nbsp;certain&nbsp;HTTPS&nbsp;website&nbsp;using&nbsp;SSL&nbsp;Bump&nbsp;and&nbsp;without&nbsp;installing&nbsp;any&nbsp;SSL&nbsp;Certificate&nbsp;on&nbsp;Clients&nbsp;End&nbsp;as&nbsp;I&nbsp;will&nbsp;be&nbsp;distributing&nbsp;this&nbsp;Same&nbsp;Network&nbsp;for&nbsp;Mobile&nbsp;Devices&nbsp;so&nbsp;I&nbsp;don&#39;t&nbsp;want&nbsp;to&nbsp;keep&nbsp;installing&nbsp;certificate&nbsp;in&nbsp;each&nbsp;Mobile&nbsp;Device&nbsp;like&nbsp;Android&nbsp;/&nbsp;IOS&nbsp;/&nbsp;Windows&nbsp;etc&nbsp;phones&nbsp;.......&lt;br&gt; &lt;br&gt;&lt;/div&gt;&lt;b&gt;I&nbsp;have&nbsp;installed&nbsp;Squid&nbsp;3.5.13&nbsp;and&nbsp;we&nbsp;have&nbsp;Broadband&nbsp;Connection&nbsp;with&nbsp;speed&nbsp;50&nbsp;Mb/sec.&nbsp;I&nbsp;have&nbsp;gone&nbsp;through&nbsp;lots&nbsp;of&nbsp;document&nbsp;where&nbsp;I&nbsp;found&nbsp;that&nbsp;we&nbsp;can&nbsp;Block&nbsp;Https&nbsp;Traffic&nbsp;without&nbsp;installing&nbsp;Certificate&nbsp;by&nbsp;enabling&nbsp;Peek&nbsp;&amp;&nbsp;Splice&nbsp;feature.&lt;/b&gt;&nbsp;&lt;br&gt;&lt;br&gt;&lt;/div&gt;-------------------&nbsp;Below&nbsp;is&nbsp;the&nbsp;Configuration&nbsp;file&nbsp;of&nbsp;Squid&nbsp;---------------------------------------&lt;br&gt;&lt;br&gt;#&nbsp;-------------------------------------&lt;br&gt;#&nbsp;Access&nbsp;Control&nbsp;Lists&lt;br&gt;#&nbsp;-------------------------------------&lt;br&gt;acl&nbsp;localnet&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://192.168.0.0/24&quot;&gt;192.168.0.0/24&lt;/a&gt;   &nbsp;#&nbsp;RFC1918&nbsp;possible&nbsp;internal&nbsp;network&lt;br&gt;&lt;br&gt;acl&nbsp;SSL_ports&nbsp;port&nbsp;443&lt;br&gt;acl&nbsp;SSL_ports&nbsp;port&nbsp;8443       &nbsp;#&nbsp;Telecom&nbsp;exclusion&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;80       &nbsp;#&nbsp;http&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;21       &nbsp;#&nbsp;ftp&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;443       &nbsp;#&nbsp;https&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;70       &nbsp;#&nbsp;gopher&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;210       &nbsp;#&nbsp;wais&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;280       &nbsp;#&nbsp;http-mgmt&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;488       &nbsp;#&nbsp;gss-http&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;591       &nbsp;#&nbsp;filemaker&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;777       &nbsp;#&nbsp;multiling&nbsp;http&lt;br&gt;&lt;br&gt;#&nbsp;Common&nbsp;methods&lt;br&gt;acl&nbsp;CONNECT&nbsp;method&nbsp;CONNECT&lt;br&gt;acl&nbsp;PURGE&nbsp;method&nbsp;PURGE&lt;br&gt;acl&nbsp;GET&nbsp;method&nbsp;GET&lt;br&gt;&lt;br&gt;#&nbsp;Windows&nbsp;update&nbsp;acls&lt;br&gt;acl&nbsp;windowsupdate&nbsp;dstdomain&nbsp;&lt;a&nbsp;href=&quot;http://sls.update.microsoft.com.akadns.net&quot;&gt;sls.update.microsoft.com.akadns.net&lt;/a&gt;&lt;br&gt;acl&nbsp;windowsupdate&nbsp;dstdomain&nbsp;&lt;a&nbsp;href=&quot;http://windowsupdate.microsoft.com&quot;&gt;windowsupdate.microsoft.com&lt;/a&gt;&lt;br&gt;acl&nbsp;windowsupdate&nbsp;dstdomain&nbsp;.&lt;a&nbsp;href=&quot;http://update.microsoft.com&quot;&gt;update.microsoft.com&lt;/a&gt;&lt;br&gt;acl&nbsp;windowsupdate&nbsp;dstdomain&nbsp;&lt;a&nbsp;href=&quot;http://download.windowsupdate.com&quot;&gt;download.windowsupdate.com&lt;/a&gt;&lt;br&gt;acl&nbsp;windowsupdate&nbsp;dstdomain&nbsp;&lt;a&nbsp;href=&quot;http://redir.metaservices.microsoft.com&quot;&gt;redir.metaservices.microsoft.com&lt;/a&gt;&lt;br&gt;acl&nbsp;windowsupdate&nbsp;dstdomain&nbsp;&lt;a&nbsp;href=&quot;http://images.metaservices.microsoft.com&quot;&gt;images.metaservices.microsoft.com&lt;/a&gt;&lt;br&gt;acl&nbsp;windowsupdate&nbsp;dstdomain&nbsp;&lt;a&nbsp;href=&quot;http://c.microsoft.com&quot;&gt;c.microsoft.com&lt;/a&gt;&lt;br&gt;acl&nbsp;windowsupdate&nbsp;dstdomain&nbsp;&lt;a&nbsp;href=&quot;http://www.download.windowsupdate.com&quot;&gt;www.download.windowsupdate.com&lt;/a&gt;&lt;br&gt;acl&nbsp;windowsupdate&nbsp;dstdomain&nbsp;&lt;a&nbsp;href=&quot;http://wustat.windows.com&quot;&gt;wustat.windows.com&lt;/a&gt;&lt;br&gt;acl&nbsp;windowsupdate&nbsp;dstdomain&nbsp;&lt;a&nbsp;href=&quot;http://crl.microsoft.com&quot;&gt;crl.microsoft.com&lt;/a&gt;&lt;br&gt;acl&nbsp;windowsupdate&nbsp;dstdomain&nbsp;&lt;a&nbsp;href=&quot;http://sls.microsoft.com&quot;&gt;sls.microsoft.com&lt;/a&gt;&lt;br&gt;acl&nbsp;windowsupdate&nbsp;dstdomain&nbsp;&lt;a&nbsp;href=&quot;http://productactivation.one.microsoft.com&quot;&gt;productactivation.one.microsoft.com&lt;/a&gt;&lt;br&gt;acl&nbsp;windowsupdate&nbsp;dstdomain&nbsp;&lt;a&nbsp;href=&quot;http://ntservicepack.microsoft.com&quot;&gt;ntservicepack.microsoft.com&lt;/a&gt;&lt;br&gt;&lt;br&gt;#&nbsp;Windows&nbsp;update&nbsp;methods&lt;br&gt;acl&nbsp;wuCONNECT&nbsp;dstdomain&nbsp;&lt;a&nbsp;href=&quot;http://www.update.microsoft.com&quot;&gt;www.update.microsoft.com&lt;/a&gt;&lt;br&gt;acl&nbsp;wuCONNECT&nbsp;dstdomain&nbsp;&lt;a&nbsp;href=&quot;http://sls.microsoft.com&quot;&gt;sls.microsoft.com&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;#&nbsp;SSL&nbsp;bump&nbsp;acl&lt;br&gt;acl&nbsp;net_bump&nbsp;src&nbsp;&quot;/etc/squid/net.bump&quot;&lt;br&gt;&lt;br&gt;#&nbsp;TLD&nbsp;acl&lt;br&gt;acl&nbsp;block_tld&nbsp;dstdomain&nbsp;&quot;/etc/squid/dstdom.tld&quot;&lt;br&gt;&lt;br&gt;#&nbsp;-------------------------------------&lt;br&gt;#&nbsp;Access&nbsp;parameters&lt;br&gt;#&nbsp;-------------------------------------&lt;br&gt;#&nbsp;Deny&nbsp;requests&nbsp;to&nbsp;unsafe&nbsp;ports&lt;br&gt;http_access&nbsp;deny&nbsp;!Safe_ports&lt;br&gt;#&nbsp;Deny&nbsp;CONNECT&nbsp;to&nbsp;other&nbsp;than&nbsp;SSL&nbsp;ports&lt;br&gt;http_access&nbsp;deny&nbsp;CONNECT&nbsp;!SSL_ports&lt;br&gt;&lt;br&gt;#&nbsp;Only&nbsp;allow&nbsp;cachemgr&nbsp;access&nbsp;from&nbsp;localhost&lt;br&gt;http_access&nbsp;allow&nbsp;localhost&nbsp;manager&lt;br&gt;http_access&nbsp;deny&nbsp;manager&lt;br&gt;http_access&nbsp;deny&nbsp;to_localhost&lt;br&gt;#&nbsp;Allow&nbsp;purge&nbsp;from&nbsp;localhost&lt;br&gt;http_access&nbsp;allow&nbsp;PURGE&nbsp;localhost&lt;br&gt;http_access&nbsp;deny&nbsp;PURGE&lt;br&gt;&lt;br&gt;#&nbsp;Normalize&nbsp;Accept-Encoding&nbsp;to&nbsp;support&nbsp;compression&nbsp;via&nbsp;eCAP&lt;br&gt;request_header_access&nbsp;Accept-Encoding&nbsp;deny&nbsp;all&lt;br&gt;request_header_replace&nbsp;Accept-Encoding&nbsp;gzip;q=1.0,&nbsp;identity;q=0.5,&nbsp;*;q=0&lt;br&gt;#&nbsp;Disable&nbsp;alternate&nbsp;protocols&lt;br&gt;request_header_access&nbsp;Alternate-Protocol&nbsp;deny&nbsp;all&lt;br&gt;reply_header_access&nbsp;Alternate-Protocol&nbsp;deny&nbsp;all&lt;br&gt;#&nbsp;Disable&nbsp;HSTS&lt;br&gt;reply_header_access&nbsp;Strict-Transport-Security&nbsp;deny&nbsp;all&lt;br&gt;reply_header_replace&nbsp;Strict-Transport-Security&nbsp;max-age=0;&nbsp;includeSubDomains&lt;br&gt;#&nbsp;Remove&nbsp;User-Agent&nbsp;from&nbsp;Vary&lt;br&gt;reply_header_access&nbsp;Vary&nbsp;deny&nbsp;all&lt;br&gt;reply_header_replace&nbsp;Vary&nbsp;Accept-Encoding&lt;br&gt;#&nbsp;Workaround&nbsp;4253&lt;br&gt;request_header_access&nbsp;Surrogate-Capability&nbsp;deny&nbsp;all&lt;br&gt;&lt;br&gt;#&nbsp;Block&nbsp;top&nbsp;level&nbsp;domains&lt;br&gt;http_access&nbsp;deny&nbsp;block_tld&lt;br&gt;deny_info&nbsp;TCP_RESET&nbsp;block_tld&lt;br&gt;&lt;br&gt;#&nbsp;Rule&nbsp;allowing&nbsp;access&nbsp;from&nbsp;local&nbsp;networks&lt;br&gt;http_access&nbsp;allow&nbsp;localnet&lt;br&gt;http_access&nbsp;allow&nbsp;localhost&lt;br&gt;&lt;br&gt;&lt;br&gt;#&nbsp;ICP/HTCP&nbsp;access&lt;br&gt;icp_access&nbsp;allow&nbsp;localnet&lt;br&gt;icp_access&nbsp;deny&nbsp;all&lt;br&gt;htcp_access&nbsp;allow&nbsp;localnet&lt;br&gt;htcp_access&nbsp;deny&nbsp;all&lt;br&gt;&lt;br&gt;#&nbsp;302&nbsp;loop&lt;br&gt;acl&nbsp;text_mime&nbsp;rep_mime_type&nbsp;text/html&nbsp;text/plain&lt;br&gt;acl&nbsp;http302&nbsp;http_status&nbsp;302&lt;br&gt;store_miss&nbsp;deny&nbsp;text_mime&nbsp;http302&lt;br&gt;send_hit&nbsp;deny&nbsp;text_mime&nbsp;http302&lt;br&gt;&lt;br&gt;#&nbsp;Windows&nbsp;updates&nbsp;rules&lt;br&gt;http_access&nbsp;allow&nbsp;CONNECT&nbsp;wuCONNECT&nbsp;localnet&lt;br&gt;http_access&nbsp;allow&nbsp;CONNECT&nbsp;wuCONNECT&nbsp;localhost&lt;br&gt;http_access&nbsp;allow&nbsp;windowsupdate&nbsp;localnet&lt;br&gt;http_access&nbsp;allow&nbsp;windowsupdate&nbsp;localhost&lt;br&gt;&lt;br&gt;#&nbsp;SSL&nbsp;bump&nbsp;rules&lt;br&gt;acl&nbsp;DiscoverSNIHost&nbsp;at_step&nbsp;SslBump1&lt;br&gt;#&nbsp;ICQ/MRA&nbsp;must&nbsp;splice&nbsp;first&lt;br&gt;acl&nbsp;NoSSLIntercept&nbsp;ssl::server_name_regex&nbsp;-i&nbsp;&quot;/etc/squid/url.nobump&quot;&lt;br&gt;ssl_bump&nbsp;splice&nbsp;NoSSLIntercept&lt;br&gt;ssl_bump&nbsp;bump&nbsp;net_bump&lt;br&gt;#ssl_bump&nbsp;terminate&nbsp;deny_https_sites&lt;br&gt;#ssl_bump&nbsp;peek&nbsp;all&lt;br&gt;acl&nbsp;tls_s3_server_hello&nbsp;at_step&nbsp;SslBump3&lt;br&gt;&lt;br&gt;#&nbsp;TLS/SSL&nbsp;bumping&nbsp;steps&lt;br&gt;ssl_bump&nbsp;peek  &nbsp;tls_s1_connect     &nbsp;all     &nbsp;#&nbsp;peek&nbsp;at&nbsp;the&nbsp;incoming&nbsp;TLS/SSL&nbsp;connect&nbsp;data&lt;br&gt;ssl_bump&nbsp;splice&nbsp;all                         &nbsp;#&nbsp;splice&nbsp;the&nbsp;stream:&nbsp;pass-through&nbsp;mode&lt;br&gt;&lt;br&gt;#&nbsp;And&nbsp;finally&nbsp;deny&nbsp;all&nbsp;other&nbsp;access&nbsp;to&nbsp;this&nbsp;proxy&lt;br&gt;http_access&nbsp;deny&nbsp;all&lt;br&gt;&lt;br&gt;#&nbsp;-------------------------------------&lt;br&gt;#&nbsp;HTTP&nbsp;parameters&lt;br&gt;#&nbsp;-------------------------------------&lt;br&gt;#&nbsp;Local&nbsp;Privoxy&nbsp;is&nbsp;cache&nbsp;parent&lt;br&gt;cache_peer&nbsp;127.0.0.1&nbsp;parent&nbsp;8118&nbsp;0&nbsp;no-query&nbsp;no-digest&nbsp;default&lt;br&gt;&lt;br&gt;cache_peer_access&nbsp;127.0.0.1&nbsp;deny&nbsp;all&lt;br&gt;&lt;br&gt;#&nbsp;Don&#39;t&nbsp;cache&nbsp;404&nbsp;long&nbsp;time&lt;br&gt;negative_ttl&nbsp;5&nbsp;minutes&lt;br&gt;positive_dns_ttl&nbsp;15&nbsp;hours&lt;br&gt;negative_dns_ttl&nbsp;1&nbsp;minutes&lt;br&gt;&lt;br&gt;#&nbsp;-------------------------------------&lt;br&gt;#&nbsp;Cache&nbsp;parameters&lt;br&gt;#&nbsp;-------------------------------------&lt;br&gt;#&nbsp;dhparams&nbsp;is&nbsp;before&nbsp;squid-3.5.12-20151222-r13967&lt;br&gt;#&nbsp;tls-dh&nbsp;is&nbsp;AFTER&nbsp;squid-3.5.12-20151222-r13967&lt;br&gt;#http_port&nbsp;3126&nbsp;ssl-bump&nbsp;generate-host-certificates=on&nbsp;dynamic_cert_mem_cache_size=4MB&nbsp;cert=/etc/squid/ssl_certs/squid.crt&nbsp;key=/etc/squid/ssl_certs/squid.key&nbsp;options=NO_SSLv3&nbsp;tls-dh=/etc/squid/dhparam.pem&lt;br&gt;http_port&nbsp;3127&lt;br&gt;http_port&nbsp;3128&nbsp;intercept&lt;br&gt;#&nbsp;dhparams&nbsp;is&nbsp;before&nbsp;squid-3.5.12-20151222-r13967&lt;br&gt;#&nbsp;tls-dh&nbsp;is&nbsp;AFTER&nbsp;squid-3.5.12-20151222-r13967&lt;br&gt;https_port&nbsp;3129&nbsp;intercept&nbsp;ssl-bump&nbsp;generate-host-certificates=on&nbsp;dynamic_cert_mem_cache_size=4MB&nbsp;cert=/etc/squid/ssl_certs/squid.crt&nbsp;key=/etc/squid/ssl_certs/squid.key&nbsp;options=NO_SSLv3&nbsp;tls-dh=/etc/squid/dhparam.pem&lt;br&gt;sslproxy_capath&nbsp;/etc/ssl/certs&lt;br&gt;#&nbsp;SINGLE_DH_USE&nbsp;is&nbsp;3.5&nbsp;before&nbsp;squid-3.5.12-20151222-r13967&lt;br&gt;#sslproxy_options&nbsp;NO_SSLv3,SINGLE_DH_USE&lt;br&gt;#&nbsp;SINGLE_ECDH_USE&nbsp;is&nbsp;AFTER&nbsp;squid-3.5.12-20151222-r13967&lt;br&gt;sslproxy_options&nbsp;NO_SSLv3,SINGLE_ECDH_USE&lt;br&gt;sslproxy_cipher&nbsp;EECDH+ECDSA+AESGCM:EECDH+aRSA+AESGCM:EECDH+ECDSA+SHA384:EECDH+ECDSA+SHA256:EECDH+aRSA+SHA384:EECDH+aRSA+SHA256:EECDH+aRSA+RC4:EECDH:EDH+aRSA:HIGH:!RC4:!aNULL:!eNULL:!LOW:!3DES:!MD5:!EXP:!PSK:!SRP:!DSS&lt;br&gt;sslcrtd_program&nbsp;/usr/lib/squid/ssl_crtd&nbsp;-s&nbsp;/var/lib/squid/ssl_db&nbsp;-M&nbsp;4MB&lt;br&gt;&lt;br&gt;#&nbsp;Specify&nbsp;ICP/HTCP&nbsp;explicity&lt;br&gt;icp_port&nbsp;3130&lt;br&gt;htcp_port&nbsp;4827&lt;br&gt;&lt;br&gt;#&nbsp;Cache&nbsp;manager&lt;br&gt;cache_mgr&nbsp;&lt;a&nbsp;href=&quot;mailto:mymail@gmail.com&quot;&gt;mymail@gmail.com&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;#&nbsp;Forces&nbsp;reload-into-ims&lt;br&gt;reload_into_ims&nbsp;on&lt;br&gt;&lt;br&gt;#&nbsp;Hide&nbsp;internal&nbsp;networks&nbsp;details&nbsp;outside&lt;br&gt;via&nbsp;off&lt;br&gt;forwarded_for&nbsp;delete&lt;br&gt;&lt;br&gt;#&nbsp;Do&nbsp;not&nbsp;show&nbsp;Squid&nbsp;version&lt;br&gt;httpd_suppress_version_string&nbsp;on&lt;br&gt;&lt;br&gt;&lt;br&gt;#&nbsp;Prioritization&nbsp;of&nbsp;local&nbsp;hits&lt;br&gt;qos_flows&nbsp;tos&nbsp;local-hit=0x68&lt;br&gt;&lt;br&gt;#&nbsp;Specify&nbsp;local&nbsp;DNS&nbsp;cache&lt;br&gt;dns_nameservers&nbsp;8.8.8.8&lt;br&gt;&lt;br&gt;dns_v4_first&nbsp;on&lt;br&gt;ipcache_size&nbsp;4096&lt;br&gt;&lt;br&gt;&lt;br&gt;#&nbsp;-------------------------------------&lt;br&gt;#&nbsp;Memory&nbsp;parameters&lt;br&gt;#&nbsp;-------------------------------------&lt;br&gt;cache_mem&nbsp;512&nbsp;Mb&lt;br&gt;&lt;br&gt;#memory_pools&nbsp;off&lt;br&gt;&lt;br&gt;maximum_object_size_in_memory&nbsp;1&nbsp;MB&lt;br&gt;&lt;br&gt;#&nbsp;-------------------------------------&lt;br&gt;#&nbsp;Tuning&nbsp;parameters&lt;br&gt;#&nbsp;-------------------------------------&lt;br&gt;memory_replacement_policy&nbsp;heap&nbsp;LRU&lt;br&gt;cache_replacement_policy&nbsp;heap&nbsp;LFUDA&lt;br&gt;&lt;br&gt;store_avg_object_size&nbsp;85&nbsp;KB&lt;br&gt;#&nbsp;Default&nbsp;is&nbsp;20&lt;br&gt;store_objects_per_bucket&nbsp;32&lt;br&gt;&lt;br&gt;#&nbsp;Shutdown&nbsp;delay&nbsp;before&nbsp;terminate&nbsp;connections&lt;br&gt;shutdown_lifetime&nbsp;15&nbsp;second&lt;br&gt;&lt;br&gt;#&nbsp;SMP&lt;br&gt;#workers&nbsp;2&lt;br&gt;&lt;br&gt;#&nbsp;-------------------------------------&lt;br&gt;#&nbsp;Store&nbsp;parameters&lt;br&gt;#&nbsp;-------------------------------------&lt;br&gt;maximum_object_size&nbsp;8&nbsp;Gb&lt;br&gt;&lt;br&gt;cache_dir&nbsp;aufs&nbsp;/usr/local/cache&nbsp;250000&nbsp;16&nbsp;256&lt;br&gt;&lt;br&gt;#&nbsp;-------------------------------------&lt;br&gt;#&nbsp;Process/log&nbsp;parameters&lt;br&gt;#&nbsp;-------------------------------------&lt;br&gt;#logformat&nbsp;my_squid&nbsp;%tl&nbsp;%6tr&nbsp;%&gt;a&nbsp;%Ss/%03&gt;Hs&nbsp;%&lt;st&nbsp;%rm&nbsp;%ru&nbsp;%[un&nbsp;%Sh/%&lt;a&nbsp;%mt&lt;br&gt;#access_log&nbsp;daemon:/data/cache/log/access.log&nbsp;buffer-size=256KB&lt;br&gt;access_log&nbsp;daemon:/var/log/squid/access.log&nbsp;buffer-size=256KB&lt;br&gt;#&nbsp;Don&#39;t&nbsp;log&nbsp;ICP&nbsp;queries&lt;br&gt;log_icp_queries&nbsp;off&lt;br&gt;&lt;br&gt;#&nbsp;Turn&nbsp;off&nbsp;internal&nbsp;log&nbsp;rotation&lt;br&gt;logfile_rotate&nbsp;0&lt;br&gt;&lt;br&gt;cache_log&nbsp;/var/log/squid/cache.log&lt;br&gt;#cache_log&nbsp;/data/cache/log/cache${process_number}.log&lt;br&gt;cache_store_log&nbsp;none&lt;br&gt;&lt;br&gt;#&nbsp;Default&nbsp;is&nbsp;off&lt;br&gt;buffered_logs&nbsp;on&lt;br&gt;&lt;br&gt;coredump_dir&nbsp;/var/core&lt;br&gt;&lt;br&gt;pid_filename&nbsp;/tmp/squid.pid&lt;br&gt;&lt;br&gt;strip_query_terms&nbsp;off&lt;br&gt;&lt;br&gt;#&nbsp;-------------------------------------&lt;br&gt;#&nbsp;Content&nbsp;parameters&lt;br&gt;#&nbsp;-------------------------------------&lt;br&gt;#range_offset_limit&nbsp;none&nbsp;store_rewrite_list&lt;br&gt;#range_offset_limit&nbsp;none&nbsp;store_rewrite_list_web&lt;br&gt;#range_offset_limit&nbsp;none&nbsp;store_rewrite_list_web_cdn&lt;br&gt;#range_offset_limit&nbsp;none&nbsp;adobe_java_updates&lt;br&gt;#range_offset_limit&nbsp;none&nbsp;windowsupdate&lt;br&gt;range_offset_limit&nbsp;none&nbsp;all&lt;br&gt;&lt;br&gt;#&nbsp;Updates:&nbsp;Windows,&nbsp;Adobe,&nbsp;Java&lt;br&gt;refresh_pattern&nbsp;-i&nbsp;microsoft.com.*\.(cab|exe|ms[i|u|f|p]|asf|wm[v|a]|dat|zip)   &nbsp;4320&nbsp;80%&nbsp;43200   &nbsp;reload-into-ims&lt;br&gt;refresh_pattern&nbsp;-i&nbsp;windowsupdate.com.*\.(cab|exe|ms[i|u|f|p]|asf|wm[v|a]|dat|zip)   &nbsp;4320&nbsp;80%&nbsp;43200   &nbsp;reload-into-ims&lt;br&gt;refresh_pattern&nbsp;-i&nbsp;my.windowsupdate.website.com.*\.(cab|exe|ms[i|u|f|p]|asf|wm[v|a]|dat|zip)&nbsp;4320&nbsp;80%&nbsp;43200   &nbsp;reload-into-ims&lt;br&gt;refresh_pattern&nbsp;-i&nbsp;adobe.com.*\.(zip|exe)   &nbsp;4320   &nbsp;80%   &nbsp;43200&nbsp;reload-into-ims&lt;br&gt;refresh_pattern&nbsp;-i&nbsp;java.com.*\.(zip|exe)   &nbsp;4320   &nbsp;80%   &nbsp;43200&nbsp;reload-into-ims&lt;br&gt;refresh_pattern&nbsp;-i&nbsp;sun.com.*\.(zip|exe)       &nbsp;4320   &nbsp;80%   &nbsp;43200&nbsp;reload-into-ims&lt;br&gt;refresh_pattern&nbsp;-i&nbsp;google\.com.*\.(zip|exe)   &nbsp;4320   &nbsp;80%   &nbsp;43200&nbsp;reload-into-ims&lt;br&gt;refresh_pattern&nbsp;-i&nbsp;macromedia\.com.*\.(zip|exe)   &nbsp;4320   &nbsp;80%&nbsp;43200   &nbsp;reload-into-ims&lt;br&gt;#&nbsp;Other&nbsp;setups&nbsp;and&nbsp;updates&lt;br&gt;refresh_pattern&nbsp;-i&nbsp;\.(zip|(g|b)z2?|exe|msi|cvd)$   &nbsp;4320   &nbsp;80%&nbsp;43200   &nbsp;reload-into-ims&lt;br&gt;#&nbsp;Cacle&nbsp;squidinternal&lt;br&gt;refresh_pattern&nbsp;-i&nbsp;video-srv\.youtube\.squidinternal   &nbsp;0   &nbsp;0%   &nbsp;0&lt;br&gt;refresh_pattern&nbsp;-i&nbsp;squidinternal   &nbsp;14400   &nbsp;100%   &nbsp;518400&nbsp;override-expire&nbsp;override-lastmod&nbsp;refresh-ims&nbsp;reload-into-ims&nbsp;ignore-private&nbsp;ignore-auth&nbsp;ignore-must-revalidate&nbsp;store-stale&nbsp;ignore-no-store&lt;br&gt;#&nbsp;Keep&nbsp;swf&nbsp;in&nbsp;cache&lt;br&gt;refresh_pattern&nbsp;-i&nbsp;\.swf$   &nbsp;10080   &nbsp;100%   &nbsp;43200   &nbsp;override-expire&nbsp;reload-into-ims&nbsp;ignore-private&lt;br&gt;#&nbsp;.NET&nbsp;cache&lt;br&gt;refresh_pattern&nbsp;-i&nbsp;\.((a|m)s(h|p)x?)$       &nbsp;10080   &nbsp;100%   &nbsp;43200&nbsp;reload-into-ims&nbsp;ignore-private&lt;br&gt;#&nbsp;Other&nbsp;long-lived&nbsp;items&lt;br&gt;refresh_pattern&nbsp;-i&nbsp;\.(jp(e?g|e|2)|gif|png|bmp|ico|svg|web(p|m)|wm(v|a)|flv|f4f|mp(3|4)|ttf|eot|woff2?|(c|x|j)ss|js(t?|px?))(\?.*)?$&nbsp;14400   &nbsp;100%   &nbsp;518400   &nbsp;override-expire&nbsp;override-lastmod&nbsp;reload-into-ims&nbsp;ignore-private&nbsp;ignore-no-store&nbsp;ignore-must-revalidate&lt;br&gt;refresh_pattern&nbsp;-i&nbsp;\.((cs|d?|m?|p?|r?|s?|w?|x?|z?)h?t?m?(l?)|php(3?|5?)|rss|atom|vr(t|ml))(\?.*)?$&nbsp;10080   &nbsp;100%   &nbsp;86400   &nbsp;override-expire&nbsp;override-lastmod&nbsp;reload-into-ims&nbsp;ignore-private&nbsp;ignore-no-store&nbsp;ignore-must-revalidate&lt;br&gt;#&nbsp;Default&nbsp;patterns&lt;br&gt;refresh_pattern&nbsp;-i&nbsp;(/cgi-bin/|\?)   &nbsp;0   &nbsp;0%   &nbsp;0&lt;br&gt;refresh_pattern   &nbsp;.   &nbsp;0   &nbsp;20%   &nbsp;4320   &nbsp;reload-into-ims&lt;br&gt;&lt;br&gt;&lt;/div&gt;-------------------------&nbsp;Squid&nbsp;Configuration&nbsp;End&nbsp;----------------------------------------------&lt;br&gt;&lt;br&gt;&lt;/div&gt;When&nbsp;we&nbsp;give&nbsp;Network&nbsp;Connection&nbsp;Dirtectly&nbsp;through&nbsp;the&nbsp;Router&nbsp;then&nbsp;Internet&nbsp;is&nbsp;working&nbsp;fine&nbsp;but&nbsp;when&nbsp;we&nbsp;pass&nbsp;the&nbsp;Network&nbsp;through&nbsp;Squid&nbsp;the&nbsp;Internet&nbsp;work&nbsp;very&nbsp;slow&nbsp;.......&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;----------------&nbsp;IPTables&nbsp;---------------------&lt;br&gt;&lt;br&gt;Chain&nbsp;PREROUTING&nbsp;(policy&nbsp;ACCEPT&nbsp;25461&nbsp;packets,&nbsp;3444K&nbsp;bytes)&lt;br&gt; pkts&nbsp;bytes&nbsp;target    &nbsp;prot&nbsp;opt&nbsp;in    &nbsp;out    &nbsp;source              &nbsp;destination        &nbsp;&lt;br&gt; &nbsp;996&nbsp;55869&nbsp;DNAT      &nbsp;tcp &nbsp;-- &nbsp;eth1  &nbsp;*      &nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0/0&quot;&gt;0.0.0.0/0&lt;/a&gt;           &nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0/0&quot;&gt;0.0.0.0/0&lt;/a&gt;           &nbsp;tcp&nbsp;dpt:80&nbsp;to:&lt;a&nbsp;href=&quot;http://192.168.0.200:3128&quot;&gt;192.168.0.200:3128&lt;/a&gt;&lt;br&gt;   &nbsp;0    &nbsp;0&nbsp;REDIRECT  &nbsp;tcp &nbsp;-- &nbsp;eth0  &nbsp;*      &nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0/0&quot;&gt;0.0.0.0/0&lt;/a&gt;           &nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0/0&quot;&gt;0.0.0.0/0&lt;/a&gt;           &nbsp;tcp&nbsp;dpt:80&nbsp;redir&nbsp;ports&nbsp;3128&lt;br&gt; 3597 &nbsp;211K&nbsp;DNAT      &nbsp;tcp &nbsp;-- &nbsp;eth1  &nbsp;*      &nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0/0&quot;&gt;0.0.0.0/0&lt;/a&gt;           &nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0/0&quot;&gt;0.0.0.0/0&lt;/a&gt;           &nbsp;tcp&nbsp;dpt:443&nbsp;to:&lt;a&nbsp;href=&quot;http://192.168.0.200:3129&quot;&gt;192.168.0.200:3129&lt;/a&gt;&lt;br&gt;   &nbsp;0    &nbsp;0&nbsp;REDIRECT  &nbsp;tcp &nbsp;-- &nbsp;eth0  &nbsp;*      &nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0/0&quot;&gt;0.0.0.0/0&lt;/a&gt;           &nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0/0&quot;&gt;0.0.0.0/0&lt;/a&gt;           &nbsp;tcp&nbsp;dpt:443&nbsp;redir&nbsp;ports&nbsp;3129&lt;br&gt;&lt;br&gt;Chain&nbsp;INPUT&nbsp;(policy&nbsp;ACCEPT&nbsp;11351&nbsp;packets,&nbsp;1166K&nbsp;bytes)&lt;br&gt; pkts&nbsp;bytes&nbsp;target    &nbsp;prot&nbsp;opt&nbsp;in    &nbsp;out    &nbsp;source              &nbsp;destination        &nbsp;&lt;br&gt;&lt;br&gt;Chain&nbsp;OUTPUT&nbsp;(policy&nbsp;ACCEPT&nbsp;2490&nbsp;packets,&nbsp;154K&nbsp;bytes)&lt;br&gt; pkts&nbsp;bytes&nbsp;target    &nbsp;prot&nbsp;opt&nbsp;in    &nbsp;out    &nbsp;source              &nbsp;destination        &nbsp;&lt;br&gt;&lt;br&gt;Chain&nbsp;POSTROUTING&nbsp;(policy&nbsp;ACCEPT&nbsp;2490&nbsp;packets,&nbsp;154K&nbsp;bytes)&lt;br&gt; pkts&nbsp;bytes&nbsp;target    &nbsp;prot&nbsp;opt&nbsp;in    &nbsp;out    &nbsp;source              &nbsp;destination        &nbsp;&lt;br&gt;10029&nbsp;1452K&nbsp;MASQUERADE &nbsp;all &nbsp;-- &nbsp;*     &nbsp;eth0   &nbsp;&lt;a&nbsp;href=&quot;http://192.168.0.0/24&quot;&gt;192.168.0.0/24&lt;/a&gt;      &nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0/0&quot;&gt;0.0.0.0/0&lt;/a&gt;&nbsp;&lt;br&gt;&lt;br&gt;&lt;div&gt;---------------------------------------------------------------------------------------------------------------------------------&lt;br&gt;&lt;/div&gt;&lt;div&gt;Access&nbsp;Logs:&nbsp;&lt;br&gt;1463478680.312 &nbsp;33025&nbsp;192.168.0.66&nbsp;TCP_TUNNEL/200&nbsp;3865&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://216.58.199.165:443&quot;&gt;216.58.199.165:443&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://216.58.199.165&quot;&gt;216.58.199.165&lt;/a&gt;&nbsp;-&lt;br&gt;1463478680.317 &nbsp;27194&nbsp;192.168.0.66&nbsp;TCP_TUNNEL/200&nbsp;641&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://216.58.220.4:443&quot;&gt;216.58.220.4:443&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://216.58.220.4&quot;&gt;216.58.220.4&lt;/a&gt;&nbsp;-&lt;br&gt;1463478680.318 &nbsp;27195&nbsp;192.168.0.66&nbsp;TCP_TUNNEL/200&nbsp;872&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://216.58.199.142:443&quot;&gt;216.58.199.142:443&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://216.58.199.142&quot;&gt;216.58.199.142&lt;/a&gt;&nbsp;-&lt;br&gt;1463478680.323 &nbsp;27096&nbsp;192.168.0.66&nbsp;TCP_TUNNEL/200&nbsp;823&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://216.58.199.142:443&quot;&gt;216.58.199.142:443&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://216.58.199.142&quot;&gt;216.58.199.142&lt;/a&gt;&nbsp;-&lt;br&gt;1463478680.376 &nbsp;27266&nbsp;192.168.0.66&nbsp;TCP_TUNNEL/200&nbsp;1912&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://74.125.200.189:443&quot;&gt;74.125.200.189:443&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://74.125.200.189&quot;&gt;74.125.200.189&lt;/a&gt;&nbsp;-&lt;br&gt;1463478680.528  &nbsp;5110&nbsp;192.168.0.66&nbsp;TCP_TUNNEL/200&nbsp;17448&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://125.99.55.72:443&quot;&gt;125.99.55.72:443&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://125.99.55.72&quot;&gt;125.99.55.72&lt;/a&gt;&nbsp;-&lt;br&gt;1463478680.528  &nbsp;4772&nbsp;192.168.0.66&nbsp;TCP_TUNNEL/200&nbsp;1358&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://95.101.34.18:443&quot;&gt;95.101.34.18:443&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://95.101.34.18&quot;&gt;95.101.34.18&lt;/a&gt;&nbsp;-&lt;br&gt;1463478680.528  &nbsp;3707&nbsp;192.168.0.66&nbsp;TCP_TUNNEL/200&nbsp;1172&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://31.13.79.246:443&quot;&gt;31.13.79.246:443&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://31.13.79.246&quot;&gt;31.13.79.246&lt;/a&gt;&nbsp;-&lt;br&gt;1463478680.528  &nbsp;5178&nbsp;192.168.0.66&nbsp;TCP_TUNNEL/200&nbsp;44054&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://184.86.250.32:443&quot;&gt;184.86.250.32:443&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://184.86.250.32&quot;&gt;184.86.250.32&lt;/a&gt;&nbsp;-&lt;br&gt;1463478680.528 &nbsp;29346&nbsp;192.168.0.66&nbsp;TCP_TUNNEL/200&nbsp;439&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://216.58.199.142:443&quot;&gt;216.58.199.142:443&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://216.58.199.142&quot;&gt;216.58.199.142&lt;/a&gt;&nbsp;-&lt;br&gt;1463478680.556  &nbsp;9869&nbsp;192.168.0.66&nbsp;TCP_TUNNEL/200&nbsp;58963&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://216.58.220.3:443&quot;&gt;216.58.220.3:443&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://216.58.220.3&quot;&gt;216.58.220.3&lt;/a&gt;&nbsp;-&lt;br&gt;1463478680.556 &nbsp;31783&nbsp;192.168.0.66&nbsp;TCP_TUNNEL/200&nbsp;1073&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://216.58.220.4:443&quot;&gt;216.58.220.4:443&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://216.58.220.4&quot;&gt;216.58.220.4&lt;/a&gt;&nbsp;-&lt;br&gt;1463478680.584  &nbsp;6543&nbsp;192.168.0.66&nbsp;TCP_TUNNEL/200&nbsp;193204&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://31.13.79.220:443&quot;&gt;31.13.79.220:443&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://31.13.79.220&quot;&gt;31.13.79.220&lt;/a&gt;&nbsp;-&lt;br&gt;1463478680.702   &nbsp;223&nbsp;192.168.0.66&nbsp;TCP_TUNNEL/200&nbsp;206&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://31.13.79.220:443&quot;&gt;31.13.79.220:443&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://31.13.79.220&quot;&gt;31.13.79.220&lt;/a&gt;&nbsp;-&lt;br&gt;1463478681.710  &nbsp;1216&nbsp;192.168.0.66&nbsp;TCP_TUNNEL/200&nbsp;587&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://216.58.199.165:443&quot;&gt;216.58.199.165:443&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://216.58.199.165&quot;&gt;216.58.199.165&lt;/a&gt;&nbsp;-&lt;br&gt;1463478681.775  &nbsp;1369&nbsp;192.168.0.66&nbsp;TCP_TUNNEL/200&nbsp;587&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://74.125.130.189:443&quot;&gt;74.125.130.189:443&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://74.125.130.189&quot;&gt;74.125.130.189&lt;/a&gt;&nbsp;-&lt;br&gt;1463478685.128    &nbsp;37&nbsp;192.168.0.66&nbsp;TCP_TUNNEL/200&nbsp;267&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://125.99.55.75:443&quot;&gt;125.99.55.75:443&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://125.99.55.75&quot;&gt;125.99.55.75&lt;/a&gt;&nbsp;-&lt;br&gt;1463478686.862    &nbsp;40&nbsp;192.168.0.66&nbsp;TCP_REFRESH_MODIFIED/200&nbsp;539&nbsp;GET&nbsp;&lt;a&nbsp;href=&quot;http://kerastasesalonlocator.com/&quot;&gt;http://kerastasesalonlocator.com/&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://103.21.58.154&quot;&gt;103.21.58.154&lt;/a&gt;&nbsp;text/html&lt;br&gt;1463478686.880     &nbsp;5&nbsp;192.168.0.66&nbsp;TCP_MISS_ABORTED/000&nbsp;0&nbsp;GET&nbsp;&lt;a&nbsp;href=&quot;http://kerastasesalonlocator.com/cgi-sys/defaultwebpage.cgi&quot;&gt;http://kerastasesalonlocator.com/cgi-sys/defaultwebpage.cgi&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://103.21.58.154&quot;&gt;103.21.58.154&lt;/a&gt;&nbsp;-&lt;br&gt;-----------------------------------------------------------------------------------------------------------------------------------------&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;We&nbsp;have&nbsp;installed&nbsp;Squid&nbsp;on&nbsp;Ubuntu&nbsp;Server&nbsp;14.04 &nbsp;Ram:&nbsp;32&nbsp;GB&nbsp;HDD:&nbsp;1TB&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Also&nbsp;I&nbsp;am&nbsp;not&nbsp;getting&nbsp;full&nbsp;URL&nbsp;for&nbsp;HTTPS&nbsp;Traffic&nbsp;in&nbsp;Access&nbsp;Logs&nbsp;........&lt;br&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;We&nbsp;have&nbsp;tried&nbsp;to&nbsp;implement&nbsp;Caching&nbsp;DNS&nbsp;Server&nbsp;(Local)&nbsp;but&nbsp;still&nbsp;it&nbsp;didn&#39;t&nbsp;work&nbsp;then&nbsp;we&nbsp;have&nbsp;given&nbsp;the&nbsp;Google&nbsp;Public&nbsp;DNS&nbsp;.......&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Could&nbsp;you&nbsp;please&nbsp;let&nbsp;us&nbsp;know&nbsp;where&nbsp;we&nbsp;are&nbsp;doing&nbsp;mistake&nbsp;.......&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;Regards&lt;br&gt;&lt;/div&gt;&lt;div&gt;Sagar&nbsp;Malve&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
