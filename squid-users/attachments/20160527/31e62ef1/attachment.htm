<tt>
&lt;p&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;<br>
On&nbsp;May&nbsp;27,&nbsp;2016&nbsp;5:43&nbsp;PM,&nbsp;&quot;Amos&nbsp;Jeffries&quot;&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;On&nbsp;27/05/2016&nbsp;8:55&nbsp;p.m.,&nbsp;deepa&nbsp;ganu&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;Hi&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;I&nbsp;am&nbsp;using&nbsp;squid&nbsp;as&nbsp;a&nbsp;reverse.&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;#http_port &nbsp;80&nbsp;accel&nbsp;defaultsite=202.53.13.19&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;https_port&nbsp;443&nbsp;accel &nbsp;cert=/var/www/html/webrtc/imp/teleuniv.net.crt&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;key=/var/www/html/webrtc/imp/teleuniv.net.key&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;cafile=/var/www/html/webrtc/imp/intermediate.crt&nbsp;defaultsite=202.53.13.19&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;no-vhost&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;#this&nbsp;ACL&nbsp;is&nbsp;url&nbsp;path&nbsp;specific&nbsp;which&nbsp;accepts&nbsp;only&nbsp;portal&nbsp;urls&nbsp;and&nbsp;deny&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;others.&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;portal&nbsp;urlpath_regex&nbsp;^/portal6may&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;cache_peer&nbsp;172.20.36.144&nbsp;parent&nbsp;80&nbsp;0&nbsp;no-query&nbsp;originserver&nbsp;name=portalserver&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;cache_peer_access&nbsp;portalserver&nbsp;allow&nbsp;portal&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;cache_peer_access&nbsp;portalserver&nbsp;deny&nbsp;all&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;allow&nbsp;portal&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;cache_peer&nbsp;172.20.36.150&nbsp;parent&nbsp;443&nbsp;0&nbsp;no-query&nbsp;originserver&nbsp;ssl&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;sslflags=DONT_VERIFY_PEER&nbsp;login=PASS&nbsp;connection-auth=off&nbsp;name=teleuniv&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;acl&nbsp;our_sites&nbsp;dstdomain&nbsp;202.53.13.19&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;allow&nbsp;our_sites&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;cache_peer_access&nbsp;teleuniv&nbsp;allow&nbsp;our_sites&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;cache_peer_access&nbsp;teleuniv&nbsp;deny&nbsp;all&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;SO&nbsp;when&nbsp;i&nbsp;try&nbsp;to&nbsp;access&nbsp;the&nbsp;url&nbsp;&lt;a&nbsp;href=&quot;https://202.53.13.19/&quot;&gt;https://202.53.13.19/&lt;/a&gt;&nbsp;I&nbsp;get&nbsp;the&nbsp;following&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;error&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;&quot;The&nbsp;following&nbsp;error&nbsp;was&nbsp;encountered&nbsp;while&nbsp;trying&nbsp;to&nbsp;retrieve&nbsp;the&nbsp;URL:&nbsp;The&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;system&nbsp;returned:&nbsp;(111)&nbsp;Connection&nbsp;refused;&nbsp;The&nbsp;remote&nbsp;host&nbsp;or&nbsp;network&nbsp;may&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;be&nbsp;down.&nbsp;Please&nbsp;try&nbsp;the&nbsp;request&nbsp;again.&quot;&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;It&nbsp;only&nbsp;gives&nbsp;for&nbsp;172.20.36.144&nbsp;not&nbsp;for&nbsp;the&nbsp;urlpath&nbsp;acl.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;You&nbsp;have&nbsp;configured&nbsp;Squid&nbsp;to:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; 1)&nbsp;&quot;no-vhost&quot;&nbsp;-&nbsp;ignore&nbsp;the&nbsp;Host&nbsp;header&nbsp;the&nbsp;client&nbsp;sent&nbsp;indicating&nbsp;what&lt;br&gt;<br>
&gt;&nbsp;domain&nbsp;name&nbsp;it&nbsp;was&nbsp;contacting.&lt;br&gt;<br>
It&nbsp;usually&nbsp;is&nbsp;vhost&nbsp;and&nbsp;the&nbsp;domain&nbsp;name&nbsp;is&nbsp;&lt;a&nbsp;href=&quot;http://teleuniv.com&quot;&gt;teleuniv.com&lt;/a&gt;&nbsp;but&nbsp;for&nbsp;testing&nbsp;purposes&nbsp;we&nbsp;use&nbsp;public&nbsp;IP&nbsp;202.53.13.19&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp; 2)&nbsp;defaultsite=202.53.13.19&nbsp;-&nbsp;use&nbsp;&quot;202.53.13.19&quot;&nbsp;as&nbsp;the&nbsp;domain&nbsp;*name*&lt;br&gt;<br>
&gt;&nbsp;for&nbsp;all&nbsp;requests&nbsp;received&nbsp;through&nbsp;that&nbsp;https_port.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Why&nbsp;would&nbsp;you&nbsp;expect&nbsp;to&nbsp;see&nbsp;anything&nbsp;other&nbsp;than&nbsp;&lt;a&nbsp;href=&quot;https://202.53.13.19&quot;&gt;https://202.53.13.19&lt;/a&gt;&nbsp;in&lt;br&gt;<br>
&gt;&nbsp;the&nbsp;URL&nbsp;when&nbsp;you&nbsp;have&nbsp;configured&nbsp;those?&lt;br&gt;<br>
Didnt&nbsp;understand&nbsp;the&nbsp;above&nbsp;mentioned&nbsp;point&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;But&nbsp;this&nbsp;happens&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;only&nbsp;sometimes.&nbsp;When&nbsp;I&nbsp;physically&nbsp;go&nbsp;to&nbsp;that&nbsp;server&nbsp;(172.20.36.150)&nbsp;and&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;click&nbsp;on&nbsp;the&nbsp;wired&nbsp;connection&nbsp;(one&nbsp;of&nbsp;the&nbsp;LAN&nbsp;options&nbsp;using&nbsp;linux).&nbsp;It&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;works&nbsp;again.&nbsp;I&nbsp;am&nbsp;very&nbsp;confused&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Your&nbsp;use&nbsp;of&nbsp;&quot;physically&quot;&nbsp;seems&nbsp;to&nbsp;be&nbsp;incorrect.&nbsp;You&nbsp;walked&nbsp;up&nbsp;to&nbsp;the&lt;br&gt;<br>
&gt;&nbsp;machine&nbsp;hardware&nbsp;and&nbsp;did&nbsp;what&nbsp;?&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;logged&nbsp;in&nbsp;the&nbsp;machine&nbsp;and&nbsp;click&nbsp;on&nbsp;&quot;wired&nbsp;connection&quot;&lt;br&gt;<br>
&gt;&nbsp;&quot;Clicking&quot;&nbsp;seems&nbsp;to&nbsp;be&nbsp;that&nbsp;you&nbsp;logged&nbsp;in&nbsp;(not&nbsp;physically)&nbsp;and&nbsp;changed&lt;br&gt;<br>
&gt;&nbsp;something&nbsp;which&nbsp;affected&nbsp;how&nbsp;Squid&nbsp;was&nbsp;able&nbsp;to&nbsp;connect&nbsp;to&nbsp;it.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;All&nbsp;traffic&nbsp;with&nbsp;the&nbsp;domain&nbsp;name&nbsp;&quot;202.53.13.19&quot;&nbsp;and&nbsp;not&nbsp;the&nbsp;path&lt;br&gt;<br>
&gt;&nbsp;&quot;/portal6may&quot;&nbsp;gets&nbsp;sent&nbsp;to&nbsp;the&nbsp;second&nbsp;cache_peer&nbsp;(172.20.36.150).&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;So&nbsp;what&nbsp;do&nbsp;you&nbsp;expect&nbsp;to&nbsp;happen&nbsp;when&nbsp;the&nbsp;server&nbsp;172.20.36.150&nbsp;receives&nbsp;a&lt;br&gt;<br>
&gt;&nbsp;request&nbsp;with&nbsp;Host:&nbsp;header&nbsp;domain&nbsp;name&nbsp;set&nbsp;to&nbsp;&quot;202.53.13.19&quot; &nbsp;?&lt;br&gt;<br>
&gt;I&nbsp;didn&#39;t&nbsp;understand&nbsp;the&nbsp;host:&nbsp;header&nbsp;part&nbsp;any&nbsp;references&nbsp;to&nbsp;understand&nbsp;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;It&nbsp;seems&nbsp;like&nbsp;the&nbsp;servers&nbsp;connectivity&nbsp;is&nbsp;a&nbsp;bit&nbsp;flakey&nbsp;and&nbsp;getting&lt;br&gt;<br>
&gt;&nbsp;disconnected&nbsp;occasionally.&nbsp;But&nbsp;the&nbsp;wrong&nbsp;Squid&nbsp;configuration&nbsp;could&nbsp;be&lt;br&gt;<br>
&gt;&nbsp;hiding&nbsp;some&nbsp;other&nbsp;issue.&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;read&nbsp;somewhere&nbsp;it&nbsp;happens&nbsp;when&nbsp;cache&nbsp;is&nbsp;full.&nbsp;Can&nbsp;u&nbsp;tell&nbsp;me&nbsp;what&nbsp;should&nbsp;be&nbsp;cache&nbsp;size&nbsp;if&nbsp;my&nbsp;HDD&nbsp;500&nbsp;gb&nbsp;and&nbsp;32&nbsp;MB&nbsp;RAM&nbsp;&lt;br&gt;<br>
&gt;&nbsp;Amos&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&gt;&nbsp;squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-user&quot;&gt;http://lists.squid-cache.org/listinfo/squid-user&lt;/a&gt;&lt;/p&gt;<br>

</tt>
