<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Wed,&nbsp;Jun&nbsp;1,&nbsp;2016&nbsp;at&nbsp;1:53&nbsp;PM,&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&nbsp;target=&quot;_blank&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;On&nbsp;31/05/2016&nbsp;9:56&nbsp;p.m.,&nbsp;Tomas&nbsp;Mozes&nbsp;wrote:&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt;&gt;&nbsp;On&nbsp;Thu,&nbsp;May&nbsp;26,&nbsp;2016&nbsp;at&nbsp;8:04&nbsp;AM,&nbsp;Amos&nbsp;Jeffries&nbsp;wrote:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;On&nbsp;24/05/2016&nbsp;7:52&nbsp;p.m.,&nbsp;Tomas&nbsp;Mozes&nbsp;wrote:&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp;Hello,&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp;on&nbsp;two&nbsp;different&nbsp;squid&nbsp;servers&nbsp;I&#39;ve&nbsp;observed&nbsp;a&nbsp;crash&nbsp;of&nbsp;pinger.&nbsp;First&nbsp;it&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp;appeared&nbsp;on&nbsp;version&nbsp;3.5.15&nbsp;and&nbsp;later&nbsp;on&nbsp;version&nbsp;3.5.17.&lt;br&gt;<br>
&gt;&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp;Cache.log&nbsp;contains&nbsp;these&nbsp;lines:&lt;br&gt;<br>
&gt;&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp;(pinger):&nbsp;Address.cc:671:&nbsp;void&nbsp;Ip::Address::getAddrInfo(addrinfo*&amp;,&nbsp;int)&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp;const:&nbsp;Assertion&nbsp;`false&#39;&nbsp;failed.&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp;2016/05/14&nbsp;21:55:25&nbsp;kid1|&nbsp;Bad&nbsp;opcode:&nbsp;112&nbsp;from&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp;[6661:6c73:6522:2061:7420:6c69:6e65:2036]&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp;2016/05/14&nbsp;21:59:13&nbsp;kid1|&nbsp;recv:&nbsp;(111)&nbsp;Connection&nbsp;refused&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp;2016/05/14&nbsp;21:59:13&nbsp;kid1|&nbsp;Closing&nbsp;Pinger&nbsp;socket&nbsp;on&nbsp;FD&nbsp;17&lt;br&gt;<br>
&gt;&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp;On&nbsp;both&nbsp;servers,&nbsp;that&nbsp;IPv6&nbsp;address&nbsp;was&nbsp;the&nbsp;same&nbsp;-&lt;br&gt;<br>
&gt;&gt;&gt;&nbsp;6661:6c73:6522:2061:7420:6c69:6e65:2036&lt;br&gt;<br>
&gt;&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;That&nbsp;is&nbsp;the&nbsp;hexadecimal&nbsp;representation&nbsp;of&nbsp;the&nbsp;error:&lt;br&gt;<br>
&gt;&gt; &nbsp;false&quot;&nbsp;at&nbsp;line&nbsp;6&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&gt;&nbsp;Which&nbsp;means&nbsp;that&nbsp;your&nbsp;kernel&nbsp;is&nbsp;producing&nbsp;garbage&nbsp;when&nbsp;asked&nbsp;to&nbsp;resolve&lt;br&gt;<br>
&gt;&gt;&nbsp;an&nbsp;IPv6&nbsp;address&nbsp;or&nbsp;respond&nbsp;to&nbsp;an&nbsp;ICMPv6&nbsp;packet.&lt;br&gt;<br>
&gt;&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Cannot&nbsp;we&nbsp;prevent&nbsp;Squid&nbsp;from&nbsp;crashing&nbsp;in&nbsp;these&nbsp;cases?&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;Squid&nbsp;is&nbsp;not&nbsp;crashing.&nbsp;The&nbsp;pinger&nbsp;is.&nbsp;Squid&nbsp;continues&nbsp;with&nbsp;degraded&lt;br&gt;<br>
service&nbsp;latency.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Yes,&nbsp;sorry,&nbsp;I&nbsp;wasn&#39;t&nbsp;specific.&nbsp;I&nbsp;meant&nbsp;like&nbsp;some&nbsp;part&nbsp;of&nbsp;Squid,&nbsp;not&nbsp;the&nbsp;Squid&nbsp;caching&nbsp;process&nbsp;itself.&lt;br&gt;&lt;br&gt;&nbsp;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;br&gt;<br>
What&nbsp;kind&nbsp;of&nbsp;continued&nbsp;operations&nbsp;would&nbsp;you&nbsp;expect&nbsp;a&nbsp;program&nbsp;to&nbsp;do&nbsp;when&lt;br&gt;<br>
it&nbsp;discovers&nbsp;at&nbsp;least&nbsp;some&nbsp;portion&nbsp;of&nbsp;its&nbsp;RAM&nbsp;has&nbsp;been&nbsp;filled&nbsp;with&lt;br&gt;<br>
garbage&nbsp;by&nbsp;the&nbsp;system&nbsp;kernel?&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;In&nbsp;the&nbsp;worst&nbsp;case&nbsp;-&nbsp;wouldn&#39;t&nbsp;it&nbsp;be&nbsp;possible&nbsp;for&nbsp;the&nbsp;master&nbsp;process&nbsp;to&nbsp;restart&nbsp;it?&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Now&nbsp;cross&nbsp;your&nbsp;fingers&nbsp;and&nbsp;pray&nbsp;that&nbsp;no&nbsp;other&nbsp;programs&nbsp;on&nbsp;your&nbsp;whole&lt;br&gt;<br>
system&nbsp;(network,&nbsp;if&nbsp;you&nbsp;did&nbsp;the&nbsp;same&nbsp;&quot;disable&quot;&nbsp;on&nbsp;other&nbsp;machines)&nbsp;are&lt;br&gt;<br>
behaving&nbsp;badly&nbsp;in&nbsp;secret&nbsp;when&nbsp;given&nbsp;the&nbsp;garbage&nbsp;by&nbsp;the&nbsp;kernel&nbsp;like&lt;br&gt;<br>
Squid&#39;s&nbsp;pinger&nbsp;was.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;You&nbsp;know,&nbsp;the&nbsp;strange&nbsp;thing&nbsp;is&nbsp;I&nbsp;only&nbsp;found&nbsp;those&nbsp;strings&nbsp;on&nbsp;google&nbsp;attached&nbsp;with&nbsp;Squid.&nbsp;No&nbsp;other&nbsp;place.&nbsp;If&nbsp;it&#39;s&nbsp;a&nbsp;general&nbsp;issue&nbsp;in&nbsp;the&nbsp;Linux&nbsp;kernel,&nbsp;then&nbsp;it&#39;s&nbsp;been&nbsp;there&nbsp;for&nbsp;years,&nbsp;unnoticed.&nbsp;And&nbsp;as&nbsp;I&nbsp;mentioned&nbsp;before,&nbsp;it&nbsp;happened&nbsp;on&nbsp;two&nbsp;machines,&nbsp;separate&nbsp;from&nbsp;each&nbsp;other,&nbsp;in&nbsp;completely&nbsp;different&nbsp;data-centers&nbsp;with&nbsp;the&nbsp;same&nbsp;error&nbsp;message.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;would&nbsp;you&nbsp;suggest?&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
Amos&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
