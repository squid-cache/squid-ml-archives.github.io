--- src/client_side.cc	2016-05-25 02:27:13.000000000 +0300
+++ src/client_side.cc	2016-06-04 23:14:16.000000000 +0300
@@ -141,6 +141,7 @@
 #define comm_close comm_lingering_close
 #endif
 
+#include <regex>
 /// dials clientListenerConnectionOpened call
 class ListeningStartedDialer: public CallDialer, public Ipc::StartListeningCb
 {
@@ -4739,6 +4740,24 @@
                 request->vary_headers = vary;
         }
 
+        /* new test in vary header there is unwanted mark deed code wish is marked with %20 tell the browser not to use */
+        /* and its affecting the cache for cache hit %   if you use 2 browser example Firefox and chrome and load object */
+        /* that has vary --> accept-encoding="gzip,%20deflate,%20sdch */
+        /* second browser use the same object link and has different accept-encoding="gzip,%20deflate" */
+        /* as you notice they do not match so result miss and it delete the previous object from the cache */
+        /* the new code should filter out those marked with %20 the different is really big in % hit */ 
+        if (!vary.isEmpty()) {
+            std::regex e ("\\b(,%20)(.*)([,\"]$)");  
+            std::string str1 = std::regex_replace (vary.c_str(),e,"")+"\"";
+            if (str1.find("\"\"") != std::string::npos) {
+               str1.erase(str1.begin() + str1.size() - 1);
+               vary=SBuf(str1);
+            } else {
+               vary=SBuf(str1); 
+            }
+             return VARY_MATCH;
+         }
+
         if (vary.isEmpty()) {
             /* Ouch.. we cannot handle this kind of variance */
             /* XXX This cannot really happen, but just to be complete */
