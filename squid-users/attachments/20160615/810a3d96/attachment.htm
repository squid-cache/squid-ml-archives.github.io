<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Em&nbsp;15/06/2016&nbsp;10:50,&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:nilesh.gavali@tcs.com&quot;&gt;nilesh.gavali@tcs.com&lt;/a&gt;&nbsp;escreveu:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote<br>
cite=&quot;mid:OF29EE7DFD.2BD1A317-ON80257FD3.004390E8-80257FD3.004C0BDD@tcs.com&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;cite&quot;&gt;&lt;font&nbsp;face=&quot;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;Hi&nbsp;Team;&lt;/font&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;font&nbsp;face=&quot;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;I&nbsp;have&nbsp;setup&nbsp;as&nbsp;below-&lt;/font&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;ul&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;&lt;font&nbsp;face=&quot;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;Squid&nbsp;Kerberos<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;authentication&nbsp;with&nbsp;windows<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AD&nbsp;2012r2.&nbsp;-&nbsp;works&nbsp;fine.&lt;/font&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;&lt;font&nbsp;face=&quot;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;Now&nbsp;need&nbsp;to&nbsp;restrict&nbsp;access<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;based&nbsp;on<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AD&nbsp;Group&nbsp;membership.&lt;/font&gt;&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/ul&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;font&nbsp;face=&quot;sans-serif&quot;&nbsp;size=&quot;2&quot;&gt;Below&nbsp;configuration&nbsp;done&nbsp;but&nbsp;no<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;luck.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;when&nbsp;try&nbsp;to&nbsp;access&nbsp;with&nbsp;user&nbsp;who&nbsp;is&nbsp;not&nbsp;part&nbsp;of&nbsp;the&nbsp;group<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mention,&nbsp;still<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;he&nbsp;is&nbsp;able&nbsp;to&nbsp;browse&nbsp;Internet.&lt;/font&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;following&nbsp;works&nbsp;fine&nbsp;for&nbsp;me&nbsp;and&nbsp;in&nbsp;my&nbsp;opinion&nbsp;works&nbsp;better&nbsp;than<br>
&nbsp;&nbsp;&nbsp;&nbsp;LDAP.&nbsp;The&nbsp;authentication&nbsp;is&nbsp;integrated,&nbsp;so&nbsp;it&nbsp;doesn't&nbsp;keep&nbsp;asking<br>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;password&nbsp;(when&nbsp;the&nbsp;current&nbsp;user&nbsp;is&nbsp;a&nbsp;domain&nbsp;account).&nbsp;But&nbsp;you<br>
&nbsp;&nbsp;&nbsp;&nbsp;have&nbsp;to&nbsp;add&nbsp;the&nbsp;Squid&nbsp;server&nbsp;to&nbsp;the&nbsp;domain&nbsp;using&nbsp;'smb.conf',<br>
&nbsp;&nbsp;&nbsp;&nbsp;'krb5.conf'&nbsp;and&nbsp;then&nbsp;'net&nbsp;ads&nbsp;join'.&nbsp;The&nbsp;service&nbsp;'winbind'&nbsp;must&nbsp;be<br>
&nbsp;&nbsp;&nbsp;&nbsp;running&nbsp;too.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;I'm&nbsp;using&nbsp;Squid&nbsp;3.5.19.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;   &nbsp;auth_param&nbsp;ntlm&nbsp;program&nbsp;/usr/bin/ntlm_auth<br>
&nbsp;&nbsp;&nbsp;&nbsp;--helper-protocol=squid-2.5-ntlmssp&nbsp;--domain=MYDOMAIN<br>
&nbsp;&nbsp;&nbsp;&nbsp;--enable-external-acl-helpers=&quot;ext_wbinfo_group_acl&quot;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;   &nbsp;auth_param&nbsp;ntlm&nbsp;children&nbsp;10&nbsp;startup=0&nbsp;idle=2&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;   &nbsp;external_acl_type&nbsp;NTGroup&nbsp;children-startup=10&nbsp;children-idle=2<br>
&nbsp;&nbsp;&nbsp;&nbsp;children-max=50&nbsp;%LOGIN&nbsp;/usr/lib64/squid/ext_wbinfo_group_acl&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;   &nbsp;acl&nbsp;authenticated&nbsp;proxy_auth&nbsp;REQUIRED&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;   &nbsp;acl&nbsp;ad_group&nbsp;external&nbsp;NTGroup&nbsp;MYDOMAIN\AD_Group&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;   &nbsp;acl&nbsp;denied_websites&nbsp;dstdom_regex&nbsp;-i<br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;/etc/squid/denied-websites.txt&quot;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;   &nbsp;http_access&nbsp;deny&nbsp;ad_group&nbsp;denied_websites&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;So&nbsp;all&nbsp;the&nbsp;members&nbsp;of&nbsp;MYDOMAIN\AD_Group&nbsp;won't&nbsp;have&nbsp;access&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;whatever&nbsp;the&nbsp;file&nbsp;contains.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Bruno&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
