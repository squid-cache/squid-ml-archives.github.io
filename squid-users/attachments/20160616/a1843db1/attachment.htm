<tt>
&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;Hello&nbsp;Team/Amos;&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;can&nbsp;you&nbsp;pls...awaiting&nbsp;reply&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;Thanks&nbsp;&amp;&nbsp;Regards&lt;br&gt;<br>
Nilesh&nbsp;Suresh&nbsp;Gavali&lt;br&gt;<br>
&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=1&nbsp;color=#5f5f5f&nbsp;face=&quot;sans-serif&quot;&gt;From:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&lt;/font&gt;&lt;font&nbsp;size=1&nbsp;face=&quot;sans-serif&quot;&gt;Nilesh&nbsp;Gavali/MUM/TCS&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=1&nbsp;color=#5f5f5f&nbsp;face=&quot;sans-serif&quot;&gt;To:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&lt;/font&gt;&lt;font&nbsp;size=1&nbsp;face=&quot;sans-serif&quot;&gt;squid-users@lists.squid-cache.org,<br>
squid3@treenet.co.nz&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=1&nbsp;color=#5f5f5f&nbsp;face=&quot;sans-serif&quot;&gt;Date:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&lt;/font&gt;&lt;font&nbsp;size=1&nbsp;face=&quot;sans-serif&quot;&gt;15/06/2016&nbsp;20:14&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=1&nbsp;color=#5f5f5f&nbsp;face=&quot;sans-serif&quot;&gt;Subject:&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&lt;/font&gt;&lt;font&nbsp;size=1&nbsp;face=&quot;sans-serif&quot;&gt;URL&nbsp;access&nbsp;based<br>
on&nbsp;AD&nbsp;group&nbsp;membership&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;hr&nbsp;noshade&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;Thanks&nbsp;Amos,&nbsp;for&nbsp;reply;&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;My&nbsp;squid&nbsp;and&nbsp;AD&nbsp;kerberos&nbsp;authentication<br>
working&nbsp;as&nbsp;expected.&nbsp;users&nbsp;are&nbsp;getting&nbsp;authenticated&nbsp;and&nbsp;able&nbsp;to&nbsp;access<br>
internet&nbsp;via&nbsp;proxy.&nbsp;access&nbsp;logs&nbsp;also&nbsp;capturing&nbsp;user&nbsp;account&nbsp;details.&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;now&nbsp;I&nbsp;need&nbsp;to&nbsp;restrict&nbsp;user&nbsp;access&nbsp;based<br>
on&nbsp;AD&nbsp;group&nbsp;membership.&nbsp;&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=2&nbsp;face=&quot;sans-serif&quot;&gt;Thanks&nbsp;&amp;&nbsp;Regards&lt;br&gt;<br>
Nilesh&nbsp;Suresh&nbsp;Gavali&lt;br&gt;<br>
&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=1&nbsp;color=#5f5f5f&nbsp;face=&quot;sans-serif&quot;&gt;From:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&lt;/font&gt;&lt;font&nbsp;size=1&nbsp;face=&quot;sans-serif&quot;&gt;squid-users-request@lists.squid-cache.org&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=1&nbsp;color=#5f5f5f&nbsp;face=&quot;sans-serif&quot;&gt;To:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&lt;/font&gt;&lt;font&nbsp;size=1&nbsp;face=&quot;sans-serif&quot;&gt;squid-users@lists.squid-cache.org&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=1&nbsp;color=#5f5f5f&nbsp;face=&quot;sans-serif&quot;&gt;Date:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&lt;/font&gt;&lt;font&nbsp;size=1&nbsp;face=&quot;sans-serif&quot;&gt;15/06/2016&nbsp;18:27&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=1&nbsp;color=#5f5f5f&nbsp;face=&quot;sans-serif&quot;&gt;Subject:&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&lt;/font&gt;&lt;font&nbsp;size=1&nbsp;face=&quot;sans-serif&quot;&gt;squid-users<br>
Digest,&nbsp;Vol&nbsp;22,&nbsp;Issue&nbsp;70&lt;/font&gt;<br>
&lt;br&gt;&lt;font&nbsp;size=1&nbsp;color=#5f5f5f&nbsp;face=&quot;sans-serif&quot;&gt;Sent&nbsp;by:&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&lt;/font&gt;&lt;font&nbsp;size=1&nbsp;face=&quot;sans-serif&quot;&gt;&quot;squid-users&quot;<br>
&lt;squid-users-bounces@lists.squid-cache.org&gt;&lt;/font&gt;<br>
&lt;br&gt;<br>
&lt;hr&nbsp;noshade&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;Send&nbsp;squid-users&nbsp;mailing&nbsp;list&nbsp;submissions&nbsp;to&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
squid-users@lists.squid-cache.org&lt;br&gt;<br>
&lt;br&gt;<br>
To&nbsp;subscribe&nbsp;or&nbsp;unsubscribe&nbsp;via&nbsp;the&nbsp;World&nbsp;Wide&nbsp;Web,&nbsp;visit&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&lt;/font&gt;&lt;/tt&gt;&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/font&gt;&lt;/tt&gt;&lt;/a&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&lt;br&gt;<br>
or,&nbsp;via&nbsp;email,&nbsp;send&nbsp;a&nbsp;message&nbsp;with&nbsp;subject&nbsp;or&nbsp;body&nbsp;'help'&nbsp;to&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
squid-users-request@lists.squid-cache.org&lt;br&gt;<br>
&lt;br&gt;<br>
You&nbsp;can&nbsp;reach&nbsp;the&nbsp;person&nbsp;managing&nbsp;the&nbsp;list&nbsp;at&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
squid-users-owner@lists.squid-cache.org&lt;br&gt;<br>
&lt;br&gt;<br>
When&nbsp;replying,&nbsp;please&nbsp;edit&nbsp;your&nbsp;Subject&nbsp;line&nbsp;so&nbsp;it&nbsp;is&nbsp;more&nbsp;specific&lt;br&gt;<br>
than&nbsp;&quot;Re:&nbsp;Contents&nbsp;of&nbsp;squid-users&nbsp;digest...&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Today's&nbsp;Topics:&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;1.&nbsp;Re:&nbsp;HTTPS&nbsp;issues&nbsp;with&nbsp;squidguard&nbsp;after&nbsp;upgrading&nbsp;from&nbsp;squid&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.7&nbsp;to&nbsp;3.5&nbsp;(Marcus&nbsp;Kool)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;2.&nbsp;URL&nbsp;access&nbsp;based&nbsp;on&nbsp;AD&nbsp;group&nbsp;membership&nbsp;(nilesh.gavali@tcs.com)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;3.&nbsp;Re:&nbsp;URL&nbsp;access&nbsp;based&nbsp;on&nbsp;AD&nbsp;group&nbsp;membership&nbsp;(Amos&nbsp;Jeffries)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;4.&nbsp;Re:&nbsp;Queue&nbsp;incoming&nbsp;requests&nbsp;when&nbsp;fetching&nbsp;from&nbsp;origin&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Alex&nbsp;Rousskov)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;5.&nbsp;Re:&nbsp;URL&nbsp;access&nbsp;based&nbsp;on&nbsp;AD&nbsp;group&nbsp;membership&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Bruno&nbsp;de&nbsp;Paula&nbsp;Larini)&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
----------------------------------------------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Message:&nbsp;1&lt;br&gt;<br>
Date:&nbsp;Wed,&nbsp;15&nbsp;Jun&nbsp;2016&nbsp;09:37:40&nbsp;-0300&lt;br&gt;<br>
From:&nbsp;Marcus&nbsp;Kool&nbsp;&lt;marcus.kool@urlfilterdb.com&gt;&lt;br&gt;<br>
To:&nbsp;reqman&nbsp;&lt;reqman@freemail.gr&gt;&lt;br&gt;<br>
Cc:&nbsp;squid-users@lists.squid-cache.org&lt;br&gt;<br>
Subject:&nbsp;Re:&nbsp;[squid-users]&nbsp;HTTPS&nbsp;issues&nbsp;with&nbsp;squidguard&nbsp;after&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
upgrading&nbsp;from&nbsp;squid&nbsp;2.7&nbsp;to&nbsp;3.5&lt;br&gt;<br>
Message-ID:&nbsp;&lt;57614C14.4010002@urlfilterdb.com&gt;&lt;br&gt;<br>
Content-Type:&nbsp;text/plain;&nbsp;charset=utf-8;&nbsp;format=flowed&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;06/15/2016&nbsp;08:24&nbsp;AM,&nbsp;reqman&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;have&nbsp;been&nbsp;using&nbsp;squidGuard&nbsp;for&nbsp;10+&nbsp;years.&nbsp;Not&nbsp;the&nbsp;best&nbsp;one&nbsp;could&lt;br&gt;<br>
&gt;&nbsp;have,&nbsp;but&nbsp;I&nbsp;am&nbsp;accustomed&nbsp;to&nbsp;its&nbsp;use&nbsp;and&nbsp;idiosyncrasies.&nbsp;Furthermore,&lt;br&gt;<br>
&gt;&nbsp;it&nbsp;is&nbsp;package&nbsp;well&nbsp;supported&nbsp;on&nbsp;FreeBSD.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;You&nbsp;are&nbsp;mentioning&nbsp;ufdbGuard.&nbsp;Are&nbsp;its&nbsp;lists&nbsp;free&nbsp;for&nbsp;government&nbsp;use?&lt;br&gt;<br>
&gt;&nbsp;If&nbsp;not,&nbsp;then&nbsp;I&nbsp;can&nbsp;not&nbsp;use&nbsp;it,&nbsp;since&nbsp;we&nbsp;have&nbsp;very&nbsp;strict&nbsp;purchasing&lt;br&gt;<br>
&gt;&nbsp;requirements,&nbsp;even&nbsp;if&nbsp;it&nbsp;costs&nbsp;$1.&nbsp;And&nbsp;of&nbsp;course,&nbsp;I&nbsp;would&nbsp;have&nbsp;to<br>
go&lt;br&gt;<br>
&gt;&nbsp;through&nbsp;evaluation,&nbsp;the&nbsp;usual&nbsp;learning&nbsp;curve&nbsp;etc.&lt;br&gt;<br>
&lt;br&gt;<br>
ufdbGard&nbsp;is&nbsp;free&nbsp;software.&lt;br&gt;<br>
You&nbsp;can&nbsp;use&nbsp;it&nbsp;with&nbsp;any&nbsp;database&nbsp;you&nbsp;desire...&nbsp;&nbsp;the&nbsp;free&nbsp;ones,&nbsp;your<br>
own&nbsp;or&lt;br&gt;<br>
a&nbsp;commercial&nbsp;one.&lt;br&gt;<br>
&lt;br&gt;<br>
There&nbsp;is&nbsp;little&nbsp;learning&nbsp;curve&nbsp;since&nbsp;it&nbsp;is&nbsp;a&nbsp;fork&nbsp;of&nbsp;squidguard&nbsp;and&nbsp;there&lt;br&gt;<br>
is&nbsp;a&nbsp;Reference&nbsp;Manual&nbsp;and&nbsp;email&nbsp;support&nbsp;from&nbsp;URLfilterDB,&nbsp;even&nbsp;for&nbsp;those&lt;br&gt;<br>
who&nbsp;use&nbsp;a&nbsp;free&nbsp;database.&lt;br&gt;<br>
&lt;br&gt;<br>
Marcus&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;Don't&nbsp;get&nbsp;me&nbsp;wrong&nbsp;here,&nbsp;I'm&nbsp;not&nbsp;saying&nbsp;no.&nbsp;I'm&nbsp;just&nbsp;saying&nbsp;that&nbsp;even&lt;br&gt;<br>
&gt;&nbsp;though&nbsp;it&nbsp;seems&nbsp;to&nbsp;be&nbsp;easy&nbsp;to&nbsp;say&nbsp;&quot;yes&quot;,&nbsp;reality&nbsp;is&nbsp;much<br>
different.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;M.-&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Message:&nbsp;2&lt;br&gt;<br>
Date:&nbsp;Wed,&nbsp;15&nbsp;Jun&nbsp;2016&nbsp;14:50:38&nbsp;+0100&lt;br&gt;<br>
From:&nbsp;nilesh.gavali@tcs.com&lt;br&gt;<br>
To:&nbsp;squid-users@lists.squid-cache.org&lt;br&gt;<br>
Subject:&nbsp;[squid-users]&nbsp;URL&nbsp;access&nbsp;based&nbsp;on&nbsp;AD&nbsp;group&nbsp;membership&lt;br&gt;<br>
Message-ID:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&lt;OF29EE7DFD.2BD1A317-ON80257FD3.004390E8-80257FD3.004C0BDD@tcs.com&gt;&lt;br&gt;<br>
Content-Type:&nbsp;text/plain;&nbsp;charset=&quot;utf-8&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
Hi&nbsp;Team;&lt;br&gt;<br>
I&nbsp;have&nbsp;setup&nbsp;as&nbsp;below-&lt;br&gt;<br>
Squid&nbsp;Kerberos&nbsp;authentication&nbsp;with&nbsp;windows&nbsp;AD&nbsp;2012r2.&nbsp;-&nbsp;works&nbsp;fine.&lt;br&gt;<br>
Now&nbsp;need&nbsp;to&nbsp;restrict&nbsp;access&nbsp;based&nbsp;on&nbsp;AD&nbsp;Group&nbsp;membership.&lt;br&gt;<br>
&lt;br&gt;<br>
Below&nbsp;configuration&nbsp;done&nbsp;but&nbsp;no&nbsp;luck.&nbsp;when&nbsp;try&nbsp;to&nbsp;access&nbsp;with&nbsp;user&nbsp;who<br>
is&nbsp;&lt;br&gt;<br>
not&nbsp;part&nbsp;of&nbsp;the&nbsp;group&nbsp;mention,&nbsp;still&nbsp;he&nbsp;is&nbsp;able&nbsp;to&nbsp;browse&nbsp;Internet.&lt;br&gt;<br>
&lt;br&gt;<br>
================================&lt;br&gt;<br>
#&lt;br&gt;<br>
#&nbsp;Recommended&nbsp;minimum&nbsp;configuration:&lt;br&gt;<br>
#&lt;br&gt;<br>
&lt;br&gt;<br>
#auth_param&nbsp;negotiate&nbsp;program&nbsp;/usr/lib64/squid/squid_kerb_auth&nbsp;-d&nbsp;-s&nbsp;&lt;br&gt;<br>
GSS_C_NO_NAME&lt;br&gt;<br>
auth_param&nbsp;negotiate&nbsp;program&nbsp;/usr/lib64/squid/squid_kerb_auth&nbsp;-s&nbsp;&lt;br&gt;<br>
HTTP/proxy02.abcd.co.uk@abcd.co.uk&nbsp;-d&lt;br&gt;<br>
auth_param&nbsp;negotiate&nbsp;children&nbsp;10&lt;br&gt;<br>
auth_param&nbsp;negotiate&nbsp;keep_alive&nbsp;on&lt;br&gt;<br>
auth_param&nbsp;basic&nbsp;credentialsttl&nbsp;2&nbsp;hours&lt;br&gt;<br>
acl&nbsp;ad_auth&nbsp;proxy_auth&nbsp;REQUIRED&lt;br&gt;<br>
&lt;br&gt;<br>
external_acl_type&nbsp;Domain_Admin&nbsp;%LOGIN&nbsp;/usr/lib64/squid/squid_ldap_group<br>
-b&nbsp;&lt;br&gt;<br>
&quot;dc=abcd,dc=co,dc=uk&quot;&nbsp;-D&nbsp;&quot;cn=Nilesh&nbsp;Gavali,ou=Admin&nbsp;User,ou=TCS<br>
&lt;br&gt;<br>
Users,ou=Staff,dc=abcd,dc=co,dc=uk&quot;&nbsp;-w&nbsp;&quot;123456&quot;&nbsp;-f&nbsp;&lt;br&gt;<br>
&quot;(&amp;(objectclass=person)(sAMAccountName=%v)(memberof=cn=lgInternetAccess,ou=Internet<br>
&lt;br&gt;<br>
Access,ou=Groups,dc=abcd,dc=co,dc=uk))&quot;&nbsp;-h&nbsp;xx.xx.2.101&lt;br&gt;<br>
acl&nbsp;AllowDomainAdmin&nbsp;external&nbsp;Domain_Admin&nbsp;lgInternetAccess&lt;br&gt;<br>
&lt;br&gt;<br>
acl&nbsp;manager&nbsp;proto&nbsp;cache_object&lt;br&gt;<br>
acl&nbsp;localhost&nbsp;src&nbsp;127.0.0.1/32&nbsp;::1&lt;br&gt;<br>
acl&nbsp;to_localhost&nbsp;dst&nbsp;127.0.0.0/8&nbsp;0.0.0.0/32&nbsp;::1&lt;br&gt;<br>
&lt;br&gt;<br>
#&nbsp;Example&nbsp;rule&nbsp;allowing&nbsp;access&nbsp;from&nbsp;your&nbsp;local&nbsp;networks.&lt;br&gt;<br>
#&nbsp;Adapt&nbsp;to&nbsp;list&nbsp;your&nbsp;(internal)&nbsp;IP&nbsp;networks&nbsp;from&nbsp;where&nbsp;browsing&lt;br&gt;<br>
#&nbsp;should&nbsp;be&nbsp;allowed&lt;br&gt;<br>
acl&nbsp;localnet&nbsp;src&nbsp;10.0.0.0/8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;RFC1918&nbsp;possible&nbsp;internal&nbsp;network&lt;br&gt;<br>
acl&nbsp;localnet&nbsp;src&nbsp;172.16.0.0/12&nbsp;&nbsp;#&nbsp;RFC1918&nbsp;possible&nbsp;internal&nbsp;network&lt;br&gt;<br>
acl&nbsp;localnet&nbsp;src&nbsp;192.168.0.0/16&nbsp;#&nbsp;RFC1918&nbsp;possible&nbsp;internal&nbsp;network&lt;br&gt;<br>
acl&nbsp;localnet&nbsp;src&nbsp;fc00::/7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;RFC&nbsp;4193&nbsp;local&nbsp;private<br>
network&nbsp;range&lt;br&gt;<br>
acl&nbsp;localnet&nbsp;src&nbsp;fe80::/10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;RFC&nbsp;4291&nbsp;link-local&nbsp;(directly<br>
plugged)&nbsp;&lt;br&gt;<br>
machines&lt;br&gt;<br>
&lt;br&gt;<br>
acl&nbsp;SSL_ports&nbsp;port&nbsp;443&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;http&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;21&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;ftp&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;443&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;https&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;70&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;gopher&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;210&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;wais&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;1025-65535&nbsp;&nbsp;#&nbsp;unregistered&nbsp;ports&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;280&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;http-mgmt&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;488&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;gss-http&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;591&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;filemaker&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;777&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;multiling&nbsp;http&lt;br&gt;<br>
acl&nbsp;CONNECT&nbsp;method&nbsp;CONNECT&lt;br&gt;<br>
&lt;br&gt;<br>
#&lt;br&gt;<br>
#&nbsp;Recommended&nbsp;minimum&nbsp;Access&nbsp;Permission&nbsp;configuration:&lt;br&gt;<br>
#&lt;br&gt;<br>
#&nbsp;Only&nbsp;allow&nbsp;cachemgr&nbsp;access&nbsp;from&nbsp;localhost&lt;br&gt;<br>
http_access&nbsp;allow&nbsp;manager&nbsp;localhost&lt;br&gt;<br>
http_access&nbsp;deny&nbsp;manager&lt;br&gt;<br>
&lt;br&gt;<br>
#&nbsp;Deny&nbsp;requests&nbsp;to&nbsp;certain&nbsp;unsafe&nbsp;ports&lt;br&gt;<br>
http_access&nbsp;deny&nbsp;!Safe_ports&lt;br&gt;<br>
&lt;br&gt;<br>
#&nbsp;Deny&nbsp;CONNECT&nbsp;to&nbsp;other&nbsp;than&nbsp;secure&nbsp;SSL&nbsp;ports&lt;br&gt;<br>
http_access&nbsp;deny&nbsp;CONNECT&nbsp;!SSL_ports&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
#&nbsp;We&nbsp;strongly&nbsp;recommend&nbsp;the&nbsp;following&nbsp;be&nbsp;uncommented&nbsp;to&nbsp;protect&nbsp;innocent&lt;br&gt;<br>
#&nbsp;web&nbsp;applications&nbsp;running&nbsp;on&nbsp;the&nbsp;proxy&nbsp;server&nbsp;who&nbsp;think&nbsp;the&nbsp;only&lt;br&gt;<br>
#&nbsp;one&nbsp;who&nbsp;can&nbsp;access&nbsp;services&nbsp;on&nbsp;&quot;localhost&quot;&nbsp;is&nbsp;a&nbsp;local&nbsp;user&lt;br&gt;<br>
#http_access&nbsp;deny&nbsp;to_localhost&lt;br&gt;<br>
&lt;br&gt;<br>
#&lt;br&gt;<br>
#&nbsp;INSERT&nbsp;YOUR&nbsp;OWN&nbsp;RULE(S)&nbsp;HERE&nbsp;TO&nbsp;ALLOW&nbsp;ACCESS&nbsp;FROM&nbsp;YOUR&nbsp;CLIENTS&lt;br&gt;<br>
#&lt;br&gt;<br>
#&lt;br&gt;<br>
#&nbsp;Example&nbsp;rule&nbsp;allowing&nbsp;access&nbsp;from&nbsp;your&nbsp;local&nbsp;networks.&lt;br&gt;<br>
#&nbsp;Adapt&nbsp;localnet&nbsp;in&nbsp;the&nbsp;ACL&nbsp;section&nbsp;to&nbsp;list&nbsp;your&nbsp;(internal)&nbsp;IP&nbsp;networks&lt;br&gt;<br>
#&nbsp;from&nbsp;where&nbsp;browsing&nbsp;should&nbsp;be&nbsp;allowed&lt;br&gt;<br>
#http_access&nbsp;allow&nbsp;localnet&lt;br&gt;<br>
#http_access&nbsp;allow&nbsp;localhost&lt;br&gt;<br>
http_access&nbsp;deny&nbsp;!ad_auth&lt;br&gt;<br>
http_access&nbsp;allow&nbsp;ad_auth&lt;br&gt;<br>
http_access&nbsp;deny&nbsp;!AllowDomainAdmin&lt;br&gt;<br>
http_access&nbsp;allow&nbsp;AllowDomainAdmin&lt;br&gt;<br>
&lt;br&gt;<br>
#&nbsp;And&nbsp;finally&nbsp;deny&nbsp;all&nbsp;other&nbsp;access&nbsp;to&nbsp;this&nbsp;proxy&lt;br&gt;<br>
http_access&nbsp;deny&nbsp;all&lt;br&gt;<br>
&lt;br&gt;<br>
#&nbsp;Squid&nbsp;normally&nbsp;listens&nbsp;to&nbsp;port&nbsp;3128&lt;br&gt;<br>
http_port&nbsp;8080&lt;br&gt;<br>
never_direct&nbsp;allow&nbsp;all&lt;br&gt;<br>
&lt;br&gt;<br>
cache_peer&nbsp;xx.xx.2.108&nbsp;parent&nbsp;8080&nbsp;0&nbsp;default&lt;br&gt;<br>
dns_nameservers&nbsp;xx.xx.2.108&lt;br&gt;<br>
&lt;br&gt;<br>
#&nbsp;We&nbsp;recommend&nbsp;you&nbsp;to&nbsp;use&nbsp;at&nbsp;least&nbsp;the&nbsp;following&nbsp;line.&lt;br&gt;<br>
#hierarchy_stoplist&nbsp;cgi-bin&nbsp;?&lt;br&gt;<br>
&lt;br&gt;<br>
#&nbsp;Uncomment&nbsp;and&nbsp;adjust&nbsp;the&nbsp;following&nbsp;to&nbsp;add&nbsp;a&nbsp;disk&nbsp;cache&nbsp;directory.&lt;br&gt;<br>
cache_dir&nbsp;ufs&nbsp;/var/spool/squid&nbsp;2048&nbsp;16&nbsp;256&lt;br&gt;<br>
&lt;br&gt;<br>
#&nbsp;Leave&nbsp;coredumps&nbsp;in&nbsp;the&nbsp;first&nbsp;cache&nbsp;dir&lt;br&gt;<br>
coredump_dir&nbsp;/var/spool/squid&lt;br&gt;<br>
&lt;br&gt;<br>
#&nbsp;Log&nbsp;forwarding&nbsp;to&nbsp;SysLog&lt;br&gt;<br>
access_log&nbsp;syslog:local1.info&lt;br&gt;<br>
&lt;br&gt;<br>
#&nbsp;Add&nbsp;any&nbsp;of&nbsp;your&nbsp;own&nbsp;refresh_pattern&nbsp;entries&nbsp;above&nbsp;these.&lt;br&gt;<br>
refresh_pattern&nbsp;^ftp:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1440&nbsp;&nbsp;&nbsp;&nbsp;20%<br>
&nbsp;&nbsp;&nbsp;&nbsp;10080&lt;br&gt;<br>
refresh_pattern&nbsp;^gopher:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1440&nbsp;&nbsp;&nbsp;&nbsp;0%<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1440&lt;br&gt;<br>
refresh_pattern&nbsp;-i&nbsp;(/cgi-bin/|\?)&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&lt;br&gt;<br>
refresh_pattern&nbsp;.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;20%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4320&lt;br&gt;<br>
=================================================&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Thanks&nbsp;&amp;&nbsp;Regards&lt;br&gt;<br>
Nilesh&nbsp;Suresh&nbsp;Gavali&lt;br&gt;<br>
=====-----=====-----=====&lt;br&gt;<br>
Notice:&nbsp;The&nbsp;information&nbsp;contained&nbsp;in&nbsp;this&nbsp;e-mail&lt;br&gt;<br>
message&nbsp;and/or&nbsp;attachments&nbsp;to&nbsp;it&nbsp;may&nbsp;contain&nbsp;&lt;br&gt;<br>
confidential&nbsp;or&nbsp;privileged&nbsp;information.&nbsp;If&nbsp;you&nbsp;are&nbsp;&lt;br&gt;<br>
not&nbsp;the&nbsp;intended&nbsp;recipient,&nbsp;any&nbsp;dissemination,&nbsp;use,&nbsp;&lt;br&gt;<br>
review,&nbsp;distribution,&nbsp;printing&nbsp;or&nbsp;copying&nbsp;of&nbsp;the&nbsp;&lt;br&gt;<br>
information&nbsp;contained&nbsp;in&nbsp;this&nbsp;e-mail&nbsp;message&nbsp;&lt;br&gt;<br>
and/or&nbsp;attachments&nbsp;to&nbsp;it&nbsp;are&nbsp;strictly&nbsp;prohibited.&nbsp;If&nbsp;&lt;br&gt;<br>
you&nbsp;have&nbsp;received&nbsp;this&nbsp;communication&nbsp;in&nbsp;error,&nbsp;&lt;br&gt;<br>
please&nbsp;notify&nbsp;us&nbsp;by&nbsp;reply&nbsp;e-mail&nbsp;or&nbsp;telephone&nbsp;and&nbsp;&lt;br&gt;<br>
immediately&nbsp;and&nbsp;permanently&nbsp;delete&nbsp;the&nbsp;message&nbsp;&lt;br&gt;<br>
and&nbsp;any&nbsp;attachments.&nbsp;Thank&nbsp;you&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
--------------&nbsp;next&nbsp;part&nbsp;--------------&lt;br&gt;<br>
An&nbsp;HTML&nbsp;attachment&nbsp;was&nbsp;scrubbed...&lt;br&gt;<br>
URL:&nbsp;&lt;&lt;/font&gt;&lt;/tt&gt;&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/pipermail/squid-users/attachments/20160615/a91ac994/attachment-0001.html&quot;&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;http://lists.squid-cache.org/pipermail/squid-users/attachments/20160615/a91ac994/attachment-0001.html&lt;/font&gt;&lt;/tt&gt;&lt;/a&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Message:&nbsp;3&lt;br&gt;<br>
Date:&nbsp;Thu,&nbsp;16&nbsp;Jun&nbsp;2016&nbsp;02:21:54&nbsp;+1200&lt;br&gt;<br>
From:&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;squid3@treenet.co.nz&gt;&lt;br&gt;<br>
To:&nbsp;squid-users@lists.squid-cache.org&lt;br&gt;<br>
Subject:&nbsp;Re:&nbsp;[squid-users]&nbsp;URL&nbsp;access&nbsp;based&nbsp;on&nbsp;AD&nbsp;group&nbsp;membership&lt;br&gt;<br>
Message-ID:&nbsp;&lt;f7557bf2-bae0-e661-8368-6f4497454c89@treenet.co.nz&gt;&lt;br&gt;<br>
Content-Type:&nbsp;text/plain;&nbsp;charset=utf-8&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;16/06/2016&nbsp;1:50&nbsp;a.m.,&nbsp;nilesh.gavali&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;Hi&nbsp;Team;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;have&nbsp;setup&nbsp;as&nbsp;below-&lt;br&gt;<br>
&gt;&nbsp;Squid&nbsp;Kerberos&nbsp;authentication&nbsp;with&nbsp;windows&nbsp;AD&nbsp;2012r2.&nbsp;-&nbsp;works&nbsp;fine.&lt;br&gt;<br>
&gt;&nbsp;Now&nbsp;need&nbsp;to&nbsp;restrict&nbsp;access&nbsp;based&nbsp;on&nbsp;AD&nbsp;Group&nbsp;membership.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;Below&nbsp;configuration&nbsp;done&nbsp;but&nbsp;no&nbsp;luck.&nbsp;when&nbsp;try&nbsp;to&nbsp;access&nbsp;with&nbsp;user<br>
who&nbsp;is&nbsp;&lt;br&gt;<br>
&gt;&nbsp;not&nbsp;part&nbsp;of&nbsp;the&nbsp;group&nbsp;mention,&nbsp;still&nbsp;he&nbsp;is&nbsp;able&nbsp;to&nbsp;browse&nbsp;Internet.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;is&nbsp;because:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;snip&gt;&lt;br&gt;<br>
Step&nbsp;0)&nbsp;check&nbsp;the&nbsp;basic&nbsp;security&nbsp;rules&nbsp;that&nbsp;deny&nbsp;bad&nbsp;behaviour.&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;http_access&nbsp;deny&nbsp;!ad_auth&lt;br&gt;<br>
&lt;br&gt;<br>
Step&nbsp;1)&nbsp;deny&nbsp;with&nbsp;a&nbsp;&quot;require&nbsp;authentication&quot;&nbsp;message&nbsp;if&nbsp;there<br>
are&nbsp;no&lt;br&gt;<br>
valid&nbsp;credentials&nbsp;sent.&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;http_access&nbsp;allow&nbsp;ad_auth&lt;br&gt;<br>
&lt;br&gt;<br>
Step&nbsp;2)&nbsp;allow&nbsp;anyone&nbsp;who&nbsp;has&nbsp;valid&nbsp;credentials&nbsp;to&nbsp;use&nbsp;the&nbsp;proxy.&lt;br&gt;<br>
&lt;br&gt;<br>
...&nbsp;Uh,&nbsp;Stop.&lt;br&gt;<br>
&lt;br&gt;<br>
Users&nbsp;either&nbsp;sent&nbsp;valid&nbsp;credentials&nbsp;[2&nbsp;happened]&nbsp;or&nbsp;they&nbsp;did&nbsp;not&nbsp;[1&lt;br&gt;<br>
happened].&nbsp;There&nbsp;are&nbsp;no&nbsp;other&nbsp;possibilities.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;http_access&nbsp;deny&nbsp;!AllowDomainAdmin&lt;br&gt;<br>
&gt;&nbsp;http_access&nbsp;allow&nbsp;AllowDomainAdmin&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
As&nbsp;explained&nbsp;in&nbsp;the&nbsp;FAQ&lt;br&gt;<br>
&lt;&lt;/font&gt;&lt;/tt&gt;&lt;a&nbsp;href=&quot;http://wiki.squid-cache.org/SquidFaq/SquidAcl#Access_Lists&quot;&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;http://wiki.squid-cache.org/SquidFaq/SquidAcl#Access_Lists&lt;/font&gt;&lt;/tt&gt;&lt;/a&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
Amos&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Message:&nbsp;4&lt;br&gt;<br>
Date:&nbsp;Wed,&nbsp;15&nbsp;Jun&nbsp;2016&nbsp;09:19:52&nbsp;-0600&lt;br&gt;<br>
From:&nbsp;Alex&nbsp;Rousskov&nbsp;&lt;rousskov@measurement-factory.com&gt;&lt;br&gt;<br>
To:&nbsp;Jaap&nbsp;Dam&nbsp;&lt;jaap.dam@gmail.com&gt;,&nbsp;Amos&nbsp;Jeffries&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&lt;squid3@treenet.co.nz&gt;&lt;br&gt;<br>
Cc:&nbsp;squid-users@lists.squid-cache.org&lt;br&gt;<br>
Subject:&nbsp;Re:&nbsp;[squid-users]&nbsp;Queue&nbsp;incoming&nbsp;requests&nbsp;when&nbsp;fetching&nbsp;from&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
origin&lt;br&gt;<br>
Message-ID:&nbsp;&lt;57617218.5050802@measurement-factory.com&gt;&lt;br&gt;<br>
Content-Type:&nbsp;text/plain;&nbsp;charset=utf-8&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;06/14/2016&nbsp;02:51&nbsp;AM,&nbsp;Jaap&nbsp;Dam&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;I've&nbsp;part&nbsp;of&nbsp;the&nbsp;logging&nbsp;as&nbsp;an&nbsp;attachment.&nbsp;I'm&nbsp;requesting&nbsp;a&nbsp;single<br>
URL&lt;br&gt;<br>
&gt;&nbsp;in&nbsp;this&nbsp;log.&nbsp;The&nbsp;log&nbsp;starts&nbsp;with&nbsp;a&nbsp;stale&nbsp;cache&nbsp;of&nbsp;the&nbsp;item.&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
Collapsed&nbsp;forwarding&nbsp;does&nbsp;not&nbsp;apply&nbsp;to&nbsp;cache&nbsp;revalidation&nbsp;requests&nbsp;yet.&lt;br&gt;<br>
Factory&nbsp;is&nbsp;working&nbsp;on&nbsp;implementing&nbsp;collapsed&nbsp;revalidations&nbsp;(in&nbsp;some&lt;br&gt;<br>
environments),&nbsp;but&nbsp;I&nbsp;cannot&nbsp;promise&nbsp;a&nbsp;specific&nbsp;delivery&nbsp;date&nbsp;or&nbsp;that&lt;br&gt;<br>
your&nbsp;particular&nbsp;environment&nbsp;will&nbsp;be&nbsp;covered.&lt;br&gt;<br>
&lt;br&gt;<br>
Alex.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;2016-06-13&nbsp;15:34&nbsp;GMT+02:00&nbsp;Amos&nbsp;Jeffries:&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;14/06/2016&nbsp;12:29&nbsp;a.m.,&nbsp;Jaap&nbsp;Dam&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;Is&nbsp;the&nbsp;collapsed_forwarding&nbsp;directive&nbsp;the&nbsp;correct<br>
one&nbsp;to&nbsp;use&nbsp;for&nbsp;my&lt;br&gt;<br>
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;use-case&nbsp;or&nbsp;am&nbsp;i&nbsp;missing&nbsp;something?&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Yes&nbsp;it&nbsp;is&nbsp;correct&nbsp;so&nbsp;far&nbsp;as&nbsp;I&nbsp;am&nbsp;understanding&nbsp;your<br>
need.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;further&nbsp;debugging&nbsp;about&nbsp;what&nbsp;is&nbsp;going&nbsp;on&nbsp;you&nbsp;will<br>
need&nbsp;the&nbsp;HTTP&lt;br&gt;<br>
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;messages&nbsp;involved.&nbsp;Add&nbsp;the&nbsp;directive&nbsp;&quot;debug_options<br>
11,2&nbsp;20,3&quot;&nbsp;to&nbsp;your&lt;br&gt;<br>
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;config&nbsp;to&nbsp;get&nbsp;them&nbsp;logged&nbsp;in&nbsp;cache.log.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Message:&nbsp;5&lt;br&gt;<br>
Date:&nbsp;Wed,&nbsp;15&nbsp;Jun&nbsp;2016&nbsp;14:27:14&nbsp;-0300&lt;br&gt;<br>
From:&nbsp;Bruno&nbsp;de&nbsp;Paula&nbsp;Larini&nbsp;&lt;bruno.larini@riosoft.com.br&gt;&lt;br&gt;<br>
To:&nbsp;squid-users@lists.squid-cache.org&lt;br&gt;<br>
Subject:&nbsp;Re:&nbsp;[squid-users]&nbsp;URL&nbsp;access&nbsp;based&nbsp;on&nbsp;AD&nbsp;group&nbsp;membership&lt;br&gt;<br>
Message-ID:&nbsp;&lt;eb67a218-c749-aa16-4b00-941bdac1d0a5@riosoft.com.br&gt;&lt;br&gt;<br>
Content-Type:&nbsp;text/plain;&nbsp;charset=&quot;utf-8&quot;;&nbsp;Format=&quot;flowed&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
Em&nbsp;15/06/2016&nbsp;10:50,&nbsp;nilesh.gavali@tcs.com&nbsp;escreveu:&lt;br&gt;<br>
&gt;&nbsp;Hi&nbsp;Team;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;have&nbsp;setup&nbsp;as&nbsp;below-&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&nbsp;&nbsp;*&nbsp;Squid&nbsp;Kerberos&nbsp;authentication&nbsp;with&nbsp;windows&nbsp;AD&nbsp;2012r2.&nbsp;-&nbsp;works<br>
fine.&lt;br&gt;<br>
&gt;&nbsp;&nbsp;&nbsp;*&nbsp;Now&nbsp;need&nbsp;to&nbsp;restrict&nbsp;access&nbsp;based&nbsp;on&nbsp;AD&nbsp;Group&nbsp;membership.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Below&nbsp;configuration&nbsp;done&nbsp;but&nbsp;no&nbsp;luck.&nbsp;when&nbsp;try&nbsp;to&nbsp;access&nbsp;with&nbsp;user<br>
who&nbsp;&lt;br&gt;<br>
&gt;&nbsp;is&nbsp;not&nbsp;part&nbsp;of&nbsp;the&nbsp;group&nbsp;mention,&nbsp;still&nbsp;he&nbsp;is&nbsp;able&nbsp;to&nbsp;browse&nbsp;Internet.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;following&nbsp;works&nbsp;fine&nbsp;for&nbsp;me&nbsp;and&nbsp;in&nbsp;my&nbsp;opinion&nbsp;works&nbsp;better&nbsp;than&nbsp;&lt;br&gt;<br>
LDAP.&nbsp;The&nbsp;authentication&nbsp;is&nbsp;integrated,&nbsp;so&nbsp;it&nbsp;doesn't&nbsp;keep&nbsp;asking&nbsp;for&nbsp;&lt;br&gt;<br>
password&nbsp;(when&nbsp;the&nbsp;current&nbsp;user&nbsp;is&nbsp;a&nbsp;domain&nbsp;account).&nbsp;But&nbsp;you&nbsp;have&nbsp;to&nbsp;&lt;br&gt;<br>
add&nbsp;the&nbsp;Squid&nbsp;server&nbsp;to&nbsp;the&nbsp;domain&nbsp;using&nbsp;'smb.conf',&nbsp;'krb5.conf'&nbsp;and&nbsp;&lt;br&gt;<br>
then&nbsp;'net&nbsp;ads&nbsp;join'.&nbsp;The&nbsp;service&nbsp;'winbind'&nbsp;must&nbsp;be&nbsp;running&nbsp;too.&lt;br&gt;<br>
I'm&nbsp;using&nbsp;Squid&nbsp;3.5.19.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;auth_param&nbsp;ntlm&nbsp;program&nbsp;/usr/bin/ntlm_auth&nbsp;&lt;br&gt;<br>
--helper-protocol=squid-2.5-ntlmssp&nbsp;--domain=MYDOMAIN&nbsp;&lt;br&gt;<br>
--enable-external-acl-helpers=&quot;ext_wbinfo_group_acl&quot;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;auth_param&nbsp;ntlm&nbsp;children&nbsp;10&nbsp;startup=0&nbsp;idle=2&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;external_acl_type&nbsp;NTGroup&nbsp;children-startup=10&nbsp;children-idle=2<br>
&lt;br&gt;<br>
children-max=50&nbsp;%LOGIN&nbsp;/usr/lib64/squid/ext_wbinfo_group_acl&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;acl&nbsp;authenticated&nbsp;proxy_auth&nbsp;REQUIRED&lt;br&gt;<br>
&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;acl&nbsp;ad_group&nbsp;external&nbsp;NTGroup&nbsp;MYDOMAIN\AD_Group&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;acl&nbsp;denied_websites&nbsp;dstdom_regex&nbsp;-i&nbsp;&quot;/etc/squid/denied-websites.txt&quot;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http_access&nbsp;deny&nbsp;ad_group&nbsp;denied_websites&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
So&nbsp;all&nbsp;the&nbsp;members&nbsp;of&nbsp;MYDOMAIN\AD_Group&nbsp;won't&nbsp;have&nbsp;access&nbsp;to&nbsp;whatever&nbsp;&lt;br&gt;<br>
the&nbsp;file&nbsp;contains.&lt;br&gt;<br>
&lt;br&gt;<br>
Bruno&lt;br&gt;<br>
--------------&nbsp;next&nbsp;part&nbsp;--------------&lt;br&gt;<br>
An&nbsp;HTML&nbsp;attachment&nbsp;was&nbsp;scrubbed...&lt;br&gt;<br>
URL:&nbsp;&lt;&lt;/font&gt;&lt;/tt&gt;&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/pipermail/squid-users/attachments/20160615/810a3d96/attachment.html&quot;&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;http://lists.squid-cache.org/pipermail/squid-users/attachments/20160615/810a3d96/attachment.html&lt;/font&gt;&lt;/tt&gt;&lt;/a&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Subject:&nbsp;Digest&nbsp;Footer&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
squid-users@lists.squid-cache.org&lt;br&gt;<br>
&lt;/font&gt;&lt;/tt&gt;&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/font&gt;&lt;/tt&gt;&lt;/a&gt;&lt;tt&gt;&lt;font&nbsp;size=2&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
End&nbsp;of&nbsp;squid-users&nbsp;Digest,&nbsp;Vol&nbsp;22,&nbsp;Issue&nbsp;70&lt;br&gt;<br>
*******************************************&lt;br&gt;<br>
&lt;/font&gt;&lt;/tt&gt;<br>
&lt;br&gt;
</tt>
