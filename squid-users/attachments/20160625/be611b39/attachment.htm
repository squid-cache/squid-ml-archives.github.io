<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hello,&lt;br&gt;I&#39;ve&nbsp;configured&nbsp;squid&nbsp;to&nbsp;filter&nbsp;both&nbsp;HTTP&nbsp;and&nbsp;HTTPS&nbsp;traffic&nbsp;and&nbsp;for&nbsp;the&nbsp;most&nbsp;part&nbsp;the&nbsp;squid&nbsp;server&nbsp;is&nbsp;working&nbsp;correctly,&nbsp;however,&nbsp;I&nbsp;am&nbsp;always&nbsp;unable&nbsp;to&nbsp;login&nbsp;with&nbsp;skype. &nbsp;Skype&nbsp;does&nbsp;send&nbsp;all&nbsp;the&nbsp;requests&nbsp;through&nbsp;the&nbsp;suid&nbsp;server,&nbsp;but&nbsp;looking&nbsp;into&nbsp;the&nbsp;cache.log&nbsp;I&nbsp;always&nbsp;get&nbsp;a&nbsp;Error&nbsp;negotiating&nbsp;SSL&nbsp;connection&nbsp;on&nbsp;FD&nbsp;12:&nbsp;error:1408A0C1:SSL&nbsp;routines:SSL3_GET_CLIENT_HELLO:no&nbsp;shared&nbsp;cipher.&lt;br&gt;If&nbsp;I&nbsp;run:&nbsp;openssl&nbsp;s_client&nbsp;-crlf&nbsp;-connect&nbsp;&lt;a&nbsp;href=&quot;http://157.55.56.164:443&quot;&gt;157.55.56.164:443&lt;/a&gt;&nbsp;I&nbsp;get&nbsp;exactly&nbsp;the&nbsp;same&nbsp;error.&nbsp;However&nbsp;if&nbsp;I&nbsp;run:&nbsp;openssl&nbsp;s_client&nbsp;-crlf&nbsp;-connect&nbsp;&lt;a&nbsp;href=&quot;http://157.55.56.164:443&quot;&gt;157.55.56.164:443&lt;/a&gt;&nbsp;-tls1_2&nbsp;-ssl2&nbsp;I&nbsp;am&nbsp;able&nbsp;to&nbsp;connect.&nbsp;&lt;br&gt;If&nbsp;I&nbsp;disable&nbsp;HTTPS,&nbsp;skype&nbsp;logins&nbsp;with&nbsp;no&nbsp;problems.&lt;br&gt;I&#39;ve&nbsp;searched&nbsp;on&nbsp;the&nbsp;mailing&nbsp;list&nbsp;archive&nbsp;and&nbsp;found&nbsp;that&nbsp;other&nbsp;people&nbsp;have&nbsp;had&nbsp;the&nbsp;same&nbsp;issues&nbsp;but&nbsp;none&nbsp;have&nbsp;been&nbsp;able&nbsp;to&nbsp;fix&nbsp;them.&nbsp;Is&nbsp;this&nbsp;a&nbsp;known&nbsp;issue&nbsp;with&nbsp;squid?&nbsp;Any&nbsp;help&nbsp;would&nbsp;be&nbsp;greatly&nbsp;appreciated.&lt;br&gt;&lt;br&gt;My&nbsp;openssl&nbsp;version&nbsp;is:&nbsp;OpenSSL&nbsp;1.0.1s-freebsd &nbsp;1&nbsp;Mar&nbsp;2016&nbsp;and&nbsp;my&nbsp;squid&nbsp;version&nbsp;is:&nbsp;Squid&nbsp;Cache:&nbsp;Version&nbsp;3.5.19&nbsp;configured&nbsp;with:&nbsp;&#39;--with-default-user=squid&#39;&nbsp;&#39;--bindir=/usr/local/sbin&#39;&nbsp;&#39;--sbindir=/usr/local/sbin&#39;&nbsp;&#39;--datadir=/usr/local/etc/squid&#39;&nbsp;&#39;--libexecdir=/usr/local/libexec/squid&#39;&nbsp;&#39;--localstatedir=/var&#39;&nbsp;&#39;--sysconfdir=/usr/local/etc/squid&#39;&nbsp;&#39;--with-logdir=/var/log/squid&#39;&nbsp;&#39;--with-pidfile=/var/run/squid/squid.pid&#39;&nbsp;&#39;--with-swapdir=/var/squid/cache&#39;&nbsp;&#39;--without-gnutls&#39;&nbsp;&#39;--enable-auth&#39;&nbsp;&#39;--enable-build-info&#39;&nbsp;&#39;--enable-loadable-modules&#39;&nbsp;&#39;--enable-removal-policies=lru&nbsp;heap&#39;&nbsp;&#39;--disable-epoll&#39;&nbsp;&#39;--disable-linux-netfilter&#39;&nbsp;&#39;--disable-linux-tproxy&#39;&nbsp;&#39;--disable-translation&#39;&nbsp;&#39;--disable-arch-native&#39;&nbsp;&#39;--enable-eui&#39;&nbsp;&#39;--enable-cache-digests&#39;&nbsp;&#39;--enable-delay-pools&#39;&nbsp;&#39;--disable-ecap&#39;&nbsp;&#39;--disable-esi&#39;&nbsp;&#39;--enable-follow-x-forwarded-for&#39;&nbsp;&#39;--enable-htcp&#39;&nbsp;&#39;--enable-icap-client&#39;&nbsp;&#39;--enable-icmp&#39;&nbsp;&#39;--enable-ident-lookups&#39;&nbsp;&#39;--enable-ipv6&#39;&nbsp;&#39;--enable-kqueue&#39;&nbsp;&#39;--with-large-files&#39;&nbsp;&#39;--enable-http-violations&#39;&nbsp;&#39;--without-nettle&#39;&nbsp;&#39;--enable-snmp&#39;&nbsp;&#39;--enable-ssl&#39;&nbsp;&#39;--with-openssl=/usr&#39;&nbsp;&#39;LIBOPENSSL_CFLAGS=-I/usr/include&#39;&nbsp;&#39;LIBOPENSSL_LIBS=-lcrypto&nbsp;-lssl&#39;&nbsp;&#39;--enable-ssl-crtd&#39;&nbsp;&#39;--disable-stacktraces&#39;&nbsp;&#39;--disable-ipf-transparent&#39;&nbsp;&#39;--disable-ipfw-transparent&#39;&nbsp;&#39;--enable-pf-transparent&#39;&nbsp;&#39;--with-nat-devpf&#39;&nbsp;&#39;--disable-forw-via-db&#39;&nbsp;&#39;--enable-wccp&#39;&nbsp;&#39;--enable-wccpv2&#39;&nbsp;&#39;--with-mit-krb5=/usr/local&#39;&nbsp;&#39;CFLAGS=-I/usr/local/include&nbsp;-O2&nbsp;-pipe &nbsp;-I/usr/local/include&nbsp;-I/usr/local/include&nbsp;-fstack-protector&nbsp;-DLDAP_DEPRECATED&nbsp;-fno-strict-aliasing&#39;&nbsp;&#39;LDFLAGS=-L/usr/local/lib &nbsp;-pthread&nbsp;-L/usr/local/lib&nbsp;-L/usr/local/lib &nbsp;-Wl,-rpath,/usr/local/lib:/usr/lib&nbsp;-fstack-protector&#39;&nbsp;&#39;LIBS=-lkrb5&nbsp;-lgssapi_krb5&nbsp;&#39;&nbsp;&#39;KRB5CONFIG=/usr/local/bin/krb5-config&#39;&nbsp;&#39;--enable-auth-basic=LDAP&nbsp;SASL&nbsp;DB&nbsp;SMB_LM&nbsp;MSNT-multi-domain&nbsp;NCSA&nbsp;PAM&nbsp;POP3&nbsp;RADIUS&nbsp;fake&nbsp;getpwnam&nbsp;NIS&#39;&nbsp;&#39;--enable-auth-digest=file&#39;&nbsp;&#39;--enable-external-acl-helpers=LDAP_group&nbsp;file_userip&nbsp;time_quota&nbsp;unix_group&nbsp;kerberos_ldap_group&#39;&nbsp;&#39;--enable-auth-negotiate=kerberos&nbsp;wrapper&#39;&nbsp;&#39;--enable-auth-ntlm=fake&nbsp;smb_lm&#39;&nbsp;&#39;--enable-storeio=aufs&nbsp;diskd&nbsp;ufs&#39;&nbsp;&#39;--enable-disk-io=DiskThreads&nbsp;DiskDaemon&nbsp;AIO&nbsp;Blocking&nbsp;IpcIo&nbsp;Mmapped&#39;&nbsp;&#39;--enable-log-daemon-helpers=file&#39;&nbsp;&#39;--enable-url-rewrite-helpers=fake&#39;&nbsp;&#39;--enable-storeid-rewrite-helpers=file&#39;&nbsp;&#39;--prefix=/usr/local&#39;&nbsp;&#39;--mandir=/usr/local/man&#39;&nbsp;&#39;--infodir=/usr/local/info/&#39;&nbsp;&#39;--build=amd64-portbld-freebsd10.3&#39;&nbsp;&#39;build_alias=amd64-portbld-freebsd10.3&#39;&nbsp;&#39;CC=cc&#39;&nbsp;&#39;CPPFLAGS=-I/usr/local/include&#39;&nbsp;&#39;CXX=c++&#39;&nbsp;&#39;CXXFLAGS=-O2&nbsp;-pipe&nbsp;-I/usr/local/include&nbsp;-I/usr/local/include&nbsp;-fstack-protector&nbsp;-DLDAP_DEPRECATED&nbsp;-fno-strict-aliasing&nbsp;&#39;&nbsp;&#39;CPP=cpp&#39;&nbsp;--enable-ltdl-convenience&lt;br&gt;My&nbsp;current&nbsp;configuration&nbsp;is&nbsp;as&nbsp;follows:&lt;br&gt;http_port&nbsp;&lt;a&nbsp;href=&quot;http://175.15.2.239:8080&quot;&gt;175.15.2.239:8080&lt;/a&gt;&nbsp;ssl-bump&nbsp;generate-host-certificates=on&nbsp;dynamic_cert_mem_cache_size=100MB&nbsp;cert=/usr/local/etc/squid/serverkey.pem&nbsp;capath=/usr/local/share/certs/&nbsp;cipher=EECDH+ECDSA+AESGCM:EECDH+aRSA+AESGCM:EECDH+ECDSA+SHA384:EECDH+ECDSA+SHA256:EECDH+aRSA+SHA384:EECDH+aRSA+SHA256:EECDH+aRSA+RC4:EECDH:EDH+aRSA:HIGH:!RC4:!aNULL:!eNULL:!LOW:!3DES:!MD5:!EXP:!PSK:!SRP:!DSS&nbsp;dhparams=/etc/dh-parameters.2048&nbsp;options=NO_SSLv2,NO_SSLv3,SINGLE_DH_USE&lt;br&gt;&lt;br&gt;http_port&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:8080&quot;&gt;127.0.0.1:8080&lt;/a&gt;&nbsp;intercept&nbsp;ssl-bump&nbsp;generate-host-certificates=on&nbsp;dynamic_cert_mem_cache_size=100MB&nbsp;cert=/usr/local/etc/squid/serverkey.pem&nbsp;capath=/usr/local/share/certs/&nbsp;cipher=EECDH+ECDSA+AESGCM:EECDH+aRSA+AESGCM:EECDH+ECDSA+SHA384:EECDH+ECDSA+SHA256:EECDH+aRSA+SHA384:EECDH+aRSA+SHA256:EECDH+aRSA+RC4:EECDH:EDH+aRSA:HIGH:!RC4:!aNULL:!eNULL:!LOW:!3DES:!MD5:!EXP:!PSK:!SRP:!DSS&nbsp;dhparams=/etc/dh-parameters.2048&nbsp;options=NO_SSLv2,NO_SSLv3,SINGLE_DH_USE&lt;br&gt;&lt;br&gt;https_port&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:3129&quot;&gt;127.0.0.1:3129&lt;/a&gt;&nbsp;intercept&nbsp;ssl-bump&nbsp;generate-host-certificates=on&nbsp;dynamic_cert_mem_cache_size=100MB&nbsp;cert=/usr/local/etc/squid/serverkey.pem&nbsp;capath=/usr/local/share/certs/&nbsp;cipher=EECDH+ECDSA+AESGCM:EECDH+aRSA+AESGCM:EECDH+ECDSA+SHA384:EECDH+ECDSA+SHA256:EECDH+aRSA+SHA384:EECDH+aRSA+SHA256:EECDH+aRSA+RC4:EECDH:EDH+aRSA:HIGH:!RC4:!aNULL:!eNULL:!LOW:!3DES:!MD5:!EXP:!PSK:!SRP:!DSS&nbsp;dhparams=/etc/dh-parameters.2048&nbsp;options=NO_SSLv2,NO_SSLv3,SINGLE_DH_USE&lt;br&gt;&lt;br&gt;icp_port&nbsp;0&lt;br&gt;dns_v4_first&nbsp;on&lt;br&gt;pid_filename&nbsp;/var/run/squid/squid.pid&lt;br&gt;cache_effective_user&nbsp;squid&lt;br&gt;cache_effective_group&nbsp;proxy&lt;br&gt;error_default_language&nbsp;en&lt;br&gt;icon_directory&nbsp;/usr/local/etc/squid/icons&lt;br&gt;visible_hostname&nbsp;hidden&lt;br&gt;cache_mgr&nbsp;admin@localhost&lt;br&gt;access_log&nbsp;/var/squid/logs/access.log&lt;br&gt;cache_log&nbsp;/var/squid/logs/cache.log&lt;br&gt;cache_store_log&nbsp;none&lt;br&gt;netdb_filename&nbsp;/var/squid/logs/netdb.state&lt;br&gt;pinger_enable&nbsp;off&lt;br&gt;pinger_program&nbsp;/usr/local/libexec/squid/pinger&lt;br&gt;sslcrtd_program&nbsp;/usr/local/libexec/squid/ssl_crtd&nbsp;-s&nbsp;/var/squid/lib/ssl_db&nbsp;-M&nbsp;4MB&nbsp;-b&nbsp;2048&lt;br&gt;sslcrtd_children&nbsp;50&lt;br&gt;sslproxy_capath&nbsp;/usr/local/share/certs/&lt;br&gt;sslproxy_options&nbsp;NO_SSLv2,NO_SSLv3,SINGLE_DH_USE&lt;br&gt;sslproxy_cipher&nbsp;EECDH+ECDSA+AESGCM:EECDH+aRSA+AESGCM:EECDH+ECDSA+SHA384:EECDH+ECDSA+SHA256:EECDH+aRSA+SHA384:EECDH+aRSA+SHA256:EECDH+aRSA+RC4:EECDH:EDH+aRSA:HIGH:!RC4:!aNULL:!eNULL:!LOW:!3DES:!MD5:!EXP:!PSK:!SRP:!DSS&lt;br&gt;sslproxy_cert_error&nbsp;allow&nbsp;all&lt;br&gt;&lt;br&gt;#SKYPE&nbsp;according&nbsp;to:&nbsp;&lt;a&nbsp;href=&quot;http://wiki.squid-cache.org/ConfigExamples/Chat/Skype&quot;&gt;http://wiki.squid-cache.org/ConfigExamples/Chat/Skype&lt;/a&gt;&lt;br&gt;acl&nbsp;numeric_IPs&nbsp;dstdom_regex&nbsp;^(([0-9]+\.[0-9]+\.[0-9]+\.[0-9]+)|(\[([0-9a-f]+)?:([0-9a-f:]+)?:([0-9a-f]+|0-9\.]+)?\])):443&lt;br&gt;acl&nbsp;Skype_UA&nbsp;browser&nbsp;^skype&lt;br&gt;http_access&nbsp;allow&nbsp;CONNECT&nbsp;localnet&nbsp;numeric_IPS&nbsp;Skype_UA&lt;br&gt;#END&nbsp;SKYPE&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&nbsp;data-smartmail=&quot;gmail_signature&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/div&gt;<br>

</tt>
