<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hello&nbsp;Amos,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;is&nbsp;the&nbsp;via&nbsp;header&nbsp;sent&nbsp;by&nbsp;my&nbsp;local&nbsp;proxy&nbsp;as&nbsp;part&nbsp;of&nbsp;the&nbsp;request. &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;i&gt;Via:&nbsp;1.1&nbsp;ubuntuozgen&nbsp;(squid/3.5.19)&lt;/i&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;&lt;br&gt;&lt;/i&gt;&lt;/div&gt;&lt;div&gt;It&nbsp;is&nbsp;not&nbsp;fqdn&nbsp;but&nbsp;ubuntu&nbsp;concatanated&nbsp;with&nbsp;a&nbsp;Turkish&nbsp;name&nbsp;so&nbsp;it&nbsp;is&nbsp;highly&nbsp;unlikely&nbsp;that&nbsp;yahoo&nbsp;have&nbsp;such&nbsp;named&nbsp;reverse&nbsp;proxy.&nbsp;I&nbsp;could&nbsp;not&nbsp;decrypt&nbsp;the&nbsp;squid&nbsp;&lt;--&gt;&nbsp;flicker&nbsp;traffic&nbsp;yet&nbsp;this&nbsp;is&nbsp;from&nbsp;pcap&nbsp;output&nbsp;from&nbsp;another&nbsp;http&nbsp;site&nbsp;but&nbsp;i&nbsp;think&nbsp;it&nbsp;should&nbsp;be&nbsp;same&nbsp;right?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks.&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Sat,&nbsp;Jun&nbsp;25,&nbsp;2016&nbsp;at&nbsp;3:10&nbsp;PM,&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&nbsp;target=&quot;_blank&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&gt;On&nbsp;25/06/2016&nbsp;6:14&nbsp;p.m.,&nbsp;Rafael&nbsp;Akchurin&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;Hello&nbsp;Amos,&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;Via&nbsp;from&nbsp;mine&nbsp;is:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Via:&quot;http/1.1&nbsp;&lt;a&nbsp;href=&quot;http://fts110.flickr.bf1.yahoo.com&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;fts110.flickr.bf1.yahoo.com&lt;/a&gt;&nbsp;(ApacheTrafficServer&nbsp;[cMs&nbsp;f&nbsp;]),&nbsp;http/1.1&nbsp;&lt;a&nbsp;href=&quot;http://r02.ycpi.ams.yahoo.net&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;r02.ycpi.ams.yahoo.net&lt;/a&gt;&nbsp;(ApacheTrafficServer&nbsp;[cMsSf&nbsp;]),&nbsp;1.1&nbsp;qlproxy&nbsp;(squid/3.3.8)&quot;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Might&nbsp;it&nbsp;be&nbsp;the&nbsp;error&nbsp;when&nbsp;constructing&nbsp;via&nbsp;contents&nbsp;in&nbsp;squid?&nbsp;As&nbsp;it&nbsp;starts&nbsp;with&nbsp;1.1&nbsp;while&nbsp;other&nbsp;constructed&nbsp;by&nbsp;Yahoo&nbsp;all&nbsp;start&nbsp;with&nbsp;http/1.1&nbsp;?&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;I&nbsp;think&nbsp;thats&nbsp;the&nbsp;Via&nbsp;on&nbsp;the&nbsp;reply&nbsp;coming&nbsp;back,&nbsp;not&nbsp;the&nbsp;request&nbsp;going&nbsp;out.&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;that&nbsp;is&nbsp;actually&nbsp;your&nbsp;outgoing&nbsp;Via&nbsp;header&nbsp;*to*&nbsp;Yahoo.&nbsp;Then&nbsp;it&nbsp;says&lt;br&gt;<br>
the&nbsp;message&nbsp;has&nbsp;already&nbsp;been&nbsp;through&nbsp;their&nbsp;service.&nbsp;Thus&nbsp;a&nbsp;loop.&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;Yahoo&nbsp;have&nbsp;any&nbsp;machine&nbsp;whose&nbsp;private&nbsp;hostname&nbsp;is&nbsp;&quot;qlproxy&quot;&nbsp;then&nbsp;your&lt;br&gt;<br>
Via&nbsp;header&nbsp;will&nbsp;match&nbsp;that&nbsp;machine&nbsp;(or&nbsp;qlproxy.*.&lt;a&nbsp;href=&quot;http://yahoo.com&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;yahoo.com&lt;/a&gt;)&nbsp;and&nbsp;again&lt;br&gt;<br>
they&nbsp;will&nbsp;detect&nbsp;a&nbsp;loop.&lt;br&gt;<br>
&lt;br&gt;<br>
==&gt;&nbsp;this&nbsp;will&nbsp;be&nbsp;true&nbsp;on&nbsp;whatever&nbsp;the&nbsp;outgoing&nbsp;Via&nbsp;really&nbsp;is&nbsp;from&nbsp;your&lt;br&gt;<br>
&quot;qlproxy&quot;&nbsp;proxies.&lt;br&gt;<br>
&lt;br&gt;<br>
==&gt;&nbsp;This&nbsp;is&nbsp;one&nbsp;of&nbsp;several&nbsp;reasons&nbsp;why&nbsp;I&nbsp;keep&nbsp;saying&nbsp;the&lt;br&gt;<br>
visible_hostname&nbsp;is&nbsp;*required*&nbsp;to&nbsp;be&nbsp;a&nbsp;FQDN,&nbsp;not&nbsp;a&nbsp;local&nbsp;one-label&nbsp;name.&lt;br&gt;<br>
And&nbsp;why&nbsp;Squid&nbsp;attempts&nbsp;to&nbsp;validate&nbsp;any&nbsp;auto-detected&nbsp;value&nbsp;in&nbsp;DNS&nbsp;before&lt;br&gt;<br>
using&nbsp;them.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
What&nbsp;I&#39;m&nbsp;expecting&nbsp;to&nbsp;see&nbsp;in&nbsp;Ozgur&#39;s&nbsp;header&nbsp;is&nbsp;either&nbsp;&quot;localhost&quot;&nbsp;or&nbsp;a&lt;br&gt;<br>
simple&nbsp;one-label&nbsp;name&nbsp;like&nbsp;yours&nbsp;which&nbsp;might&nbsp;match&nbsp;something&nbsp;inside&nbsp;the&lt;br&gt;<br>
private&nbsp;portion&nbsp;of&nbsp;the&nbsp;recipients&nbsp;CDN&nbsp;network.&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
Amos&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&nbsp;data-smartmail=&quot;gmail_signature&quot;&gt;H&nbsp;Özgür&nbsp;Batur&lt;/div&gt;<br>
&lt;/div&gt;<br>

</tt>
