<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&nbsp;http-equiv=&quot;Content-Type&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;10.1.10.9&nbsp;is&nbsp;the&nbsp;proxy's&nbsp;IP,&nbsp;dude&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;And&nbsp;it&nbsp;is&nbsp;connecting&nbsp;to&nbsp;the&nbsp;same&nbsp;server&nbsp;multiple&nbsp;times&nbsp;because&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client&nbsp;is&nbsp;doing&nbsp;a&nbsp;RANGE&nbsp;download..&nbsp;(windows&nbsp;update&nbsp;to&nbsp;be&nbsp;exact)&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;All&nbsp;GETS&nbsp;are&nbsp;like&nbsp;these:&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;GET<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://au.v4.download.windowsupdate.com/d/msdownload/update/software/defu/2016/06/am_base_7684a3445029744f69529e465ac573f76bd68144.exe&quot;&gt;http://au.v4.download.windowsupdate.com/d/msdownload/update/software/defu/2016/06/am_base_7684a3445029744f69529e465ac573f76bd68144.exe&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HTTP/1.1&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Accept:&nbsp;*/*&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Accept-Encoding:&nbsp;identity&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If-Unmodified-Since:&nbsp;Wed,&nbsp;29&nbsp;Jun&nbsp;2016&nbsp;22:14:50&nbsp;GMT&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;b&gt;Range:&nbsp;bytes=103416560-104234280&lt;/b&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;User-Agent:&nbsp;Microsoft&nbsp;BITS/7.8&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Proxy-Connection:&nbsp;Keep-Alive&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Host:&nbsp;au.v4.download.windowsupdate.com&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;But&nbsp;with&nbsp;an&nbsp;increasing&nbsp;&lt;b&gt;range&nbsp;&lt;/b&gt;every&nbsp;~2&nbsp;secs....&nbsp;and&nbsp;squid<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;will&nbsp;create&nbsp;a&nbsp;new&nbsp;connection&nbsp;to&nbsp;the&nbsp;server&nbsp;everytime&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;Anyway..&nbsp;I'm&nbsp;trying&nbsp;to&nbsp;figure&nbsp;out&nbsp;this&nbsp;by&nbsp;myself&nbsp;for&nbsp;months<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now..Â &nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;In&nbsp;my&nbsp;&quot;test&nbsp;lab&quot;&nbsp;it&nbsp;seems&nbsp;collapsed_forwarding&nbsp;and&nbsp;range-requests<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;are&nbsp;working&nbsp;together..&nbsp;but&nbsp;in&nbsp;this&nbsp;production&nbsp;server&nbsp;I&nbsp;always&nbsp;get<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;behaviour..&nbsp;lots&nbsp;of&nbsp;connections&nbsp;to&nbsp;the&nbsp;same&nbsp;server,&nbsp;and&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get&nbsp;the&nbsp;same&nbsp;file..&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;How&nbsp;to&nbsp;get&nbsp;rid&nbsp;of&nbsp;it&nbsp;without&nbsp;giving&nbsp;up&nbsp;on&nbsp;caching&nbsp;it?&nbsp;lol&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-signature&quot;&nbsp;cols=&quot;72&quot;&gt;--&nbsp;<br>
Best&nbsp;Regards,<br>
<br>
Heiler&nbsp;Bemerguy<br>
Network&nbsp;Manager&nbsp;-&nbsp;CINBESA<br>
55&nbsp;91&nbsp;98151-4894/3184-1751&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;moz-cite-prefix&quot;&gt;Em&nbsp;12/07/2016&nbsp;17:08,&nbsp;joe&nbsp;escreveu:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;cite=&quot;mid:1468354120914-4678468.post@n4.nabble.com&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;root@proxy:~#&nbsp;netstat&nbsp;-n&nbsp;|grep&nbsp;201.30.251.27&nbsp;|grep&nbsp;ESTAB<br>
tcp&nbsp;&nbsp;&nbsp;243802&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;10.1.10.9:27788&nbsp;201.30.251.27:80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ESTABELECIDA<br>
tcp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;10.1.10.9:15343&nbsp;201.30.251.27:80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ESTABELECIDA<br>
tcp&nbsp;&nbsp;&nbsp;&nbsp;14480&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;10.1.10.9:32548&nbsp;201.30.251.27:80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ESTABELECIDA<br>
tcp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;10.1.10.9:25426&nbsp;201.30.251.27:80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ESTABELECIDA<br>
tcp&nbsp;&nbsp;&nbsp;&nbsp;48322&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;10.1.10.9:8560&nbsp;201.30.251.27:80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ESTABELECIDA<br>
tcp&nbsp;&nbsp;&nbsp;329234&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;10.1.10.9:54205&nbsp;201.30.251.27:80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ESTABELECIDA<br>
tcp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;10.1.10.9:1656&nbsp;201.30.251.27:80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ESTABELECIDA<br>
tcp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;993&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;10.1.10.9:50820&nbsp;201.30.251.27:80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ESTABELECIDA<br>
tcp&nbsp;&nbsp;&nbsp;330227&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;10.1.10.9:56519&nbsp;201.30.251.27:80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ESTABELECIDA<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;<br>
10.1.10.9&nbsp;&nbsp;one&nbsp;client&nbsp;ip&nbsp;i&nbsp;cant&nbsp;tell&nbsp;he&nbsp;might&nbsp;be&nbsp;downloading&nbsp;more&nbsp;then&nbsp;one<br>
file<br>
range_offset_limit&nbsp;-1&nbsp;or&nbsp;none&nbsp;it&nbsp;will&nbsp;force&nbsp;range&nbsp;to&nbsp;non&nbsp;range&nbsp;download<br>
<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Look&nbsp;my&nbsp;conf:<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;acl&nbsp;fullDLext&nbsp;urlpath_regex&nbsp;-i&nbsp;<br>
\(exe|ms(i|u|p)|deb|cab|rpm|bin|zip|ax|r(a|p)m|app|pkg|mar|nzp|dat|iop|xpi|dmg|dds|thor|nar|gpf|pdf|appx|appxbundle|esd)<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;ouchhh&nbsp;2&nbsp;much&nbsp;unless&nbsp;you&nbsp;have&nbsp;plenty&nbsp;of&nbsp;bandwith<br>
<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;acl&nbsp;fullDLurl&nbsp;url_regex&nbsp;-i&nbsp;\.microsoft\.com\/filestreamingservice<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;quick_abort_min&nbsp;0&nbsp;KB<br>
quick_abort_max&nbsp;0&nbsp;KB<br>
quick_abort_pct&nbsp;100<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;range_offset_limit&nbsp;-1&nbsp;fullDLext<br>
range_offset_limit&nbsp;-1&nbsp;fullDLurl<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;better&nbsp;to&nbsp;change&nbsp;that&nbsp;to&nbsp;&nbsp;&nbsp;one&nbsp;control&nbsp;i&nbsp;dont&nbsp;know&nbsp;if&nbsp;that&nbsp;will&nbsp;be&nbsp;bad&nbsp;idea&nbsp;<br>
<br>
<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;collapsed_forwarding&nbsp;on<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;this&nbsp;is&nbsp;good&nbsp;if&nbsp;you&nbsp;have&nbsp;other&nbsp;client&nbsp;downloading&nbsp;on&nbsp;same&nbsp;time&nbsp;same&nbsp;file&nbsp;it<br>
has&nbsp;nothing&nbsp;to&nbsp;do&nbsp;with&nbsp;multi&nbsp;connection&nbsp;to&nbsp;the&nbsp;same&nbsp;&nbsp;ip&nbsp;only&nbsp;it&nbsp;will&nbsp;help<br>
saving&nbsp;you&nbsp;example&nbsp;if&nbsp;you&nbsp;have&nbsp;10&nbsp;client&nbsp;downloading&nbsp;at&nbsp;the&nbsp;same&nbsp;time&nbsp;same<br>
file&nbsp;so&nbsp;one&nbsp;download&nbsp;it&nbsp;will&nbsp;be..&nbsp;not&nbsp;10&nbsp;download&nbsp;i&nbsp;dont&nbsp;know&nbsp;if&nbsp;im<br>
mistaking&nbsp;amos&nbsp;or&nbsp;other&nbsp;will&nbsp;answer&nbsp;to&nbsp;that<br>
<br>
<br>
<br>
<br>
<br>
--<br>
View&nbsp;this&nbsp;message&nbsp;in&nbsp;context:&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://squid-web-proxy-cache.1019090.n4.nabble.com/time-based-range-offset-limit-tp4678462p4678468.html&quot;&gt;http://squid-web-proxy-cache.1019090.n4.nabble.com/time-based-range-offset-limit-tp4678462p4678468.html&lt;/a&gt;<br>
Sent&nbsp;from&nbsp;the&nbsp;Squid&nbsp;-&nbsp;Users&nbsp;mailing&nbsp;list&nbsp;archive&nbsp;at&nbsp;Nabble.com.<br>
_______________________________________________<br>
squid-users&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
