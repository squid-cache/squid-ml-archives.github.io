<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Hi,&lt;br&gt;&lt;br&gt;&lt;/div&gt;Using&nbsp;squid&nbsp;squid-3.5.19-1.el7.centos.x86_64,&lt;br&gt;&lt;br&gt;&lt;/div&gt;I&nbsp;obtain&nbsp;a&nbsp;kerberos&nbsp;ticket&nbsp;but&nbsp;I&nbsp;get&nbsp;the&nbsp;following&nbsp;when&nbsp;trying&nbsp;to&nbsp;use&nbsp;the&nbsp;proxy:&lt;br&gt;&lt;br&gt;2016/07/14&nbsp;12:57:03.711&nbsp;kid1|&nbsp;29,4|&nbsp;UserRequest.cc(290)&nbsp;authenticate:&nbsp;No&nbsp;Proxy-Auth&nbsp;header&nbsp;and&nbsp;no&nbsp;working&nbsp;alternative.&nbsp;Requesting&nbsp;auth&nbsp;header.&lt;br&gt;2016/07/14&nbsp;12:57:03.712&nbsp;kid1|&nbsp;29,9|&nbsp;UserRequest.cc(487)&nbsp;addReplyAuthHeader:&nbsp;headertype:46&nbsp;authuser:NULL&lt;br&gt;2016/07/14&nbsp;12:57:03.712&nbsp;kid1|&nbsp;29,9|&nbsp;Config.cc(188)&nbsp;fixHeader:&nbsp;Sending&nbsp;type:46&nbsp;header:&nbsp;&#39;Negotiate&#39;&lt;br&gt;2016/07/14&nbsp;12:57:04.159&nbsp;kid1|&nbsp;29,4|&nbsp;UserRequest.cc(290)&nbsp;authenticate:&nbsp;No&nbsp;Proxy-Auth&nbsp;header&nbsp;and&nbsp;no&nbsp;working&nbsp;alternative.&nbsp;Requesting&nbsp;auth&nbsp;header.&lt;br&gt;2016/07/14&nbsp;12:57:04.159&nbsp;kid1|&nbsp;29,9|&nbsp;UserRequest.cc(487)&nbsp;addReplyAuthHeader:&nbsp;headertype:46&nbsp;authuser:NULL&lt;br&gt;2016/07/14&nbsp;12:57:04.159&nbsp;kid1|&nbsp;29,9|&nbsp;Config.cc(188)&nbsp;fixHeader:&nbsp;Sending&nbsp;type:46&nbsp;header:&nbsp;&#39;Negotiate&#39;&lt;br&gt;&lt;br&gt;&lt;/div&gt;My&nbsp;squid.conf&nbsp;is&nbsp;as&nbsp;follows:&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;acl&nbsp;localnet&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://10.0.0.0/8&quot;&gt;10.0.0.0/8&lt;/a&gt;&lt;br&gt;acl&nbsp;localnet&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://172.16.0.0/12&quot;&gt;172.16.0.0/12&lt;/a&gt;&lt;br&gt;acl&nbsp;localnet&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://192.168.0.0/16&quot;&gt;192.168.0.0/16&lt;/a&gt;&lt;br&gt;acl&nbsp;localnet&nbsp;src&nbsp;fc00::/7      &nbsp;&lt;br&gt;acl&nbsp;localnet&nbsp;src&nbsp;fe80::/10     &nbsp;&lt;br&gt;acl&nbsp;SSL_ports&nbsp;port&nbsp;443&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;80&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;21&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;443&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;70&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;210&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;1025-65535&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;280&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;488&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;591&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;777&lt;br&gt;acl&nbsp;CONNECT&nbsp;method&nbsp;CONNECT&lt;br&gt;acl&nbsp;step1&nbsp;at_step&nbsp;SslBump1&lt;br&gt;acl&nbsp;step2&nbsp;at_step&nbsp;SslBump2&lt;br&gt;acl&nbsp;step3&nbsp;at_step&nbsp;SslBump3&lt;br&gt;acl&nbsp;nobumpSites&nbsp;ssl::server_name&nbsp;&quot;/etc/squid/acls/nobumpSites.txt&quot;&lt;br&gt;http_access&nbsp;deny&nbsp;!Safe_ports&lt;br&gt;http_access&nbsp;deny&nbsp;CONNECT&nbsp;!SSL_ports&lt;br&gt;http_access&nbsp;allow&nbsp;localhost&nbsp;manager&lt;br&gt;http_access&nbsp;deny&nbsp;manager&lt;br&gt;acl&nbsp;social_ips&nbsp;src&nbsp;&quot;/etc/squid/acls/social_ips&quot;&lt;br&gt;acl&nbsp;social_dom&nbsp;dstdomain&nbsp;&quot;/etc/squid/acls/social_dom&quot;&lt;br&gt;auth_param&nbsp;negotiate&nbsp;program&nbsp;/usr/lib64/squid/negotiate_kerberos_auth&nbsp;-d&nbsp;-s&nbsp;HTTP/proxy.example.local@EXAMPLE.LOCAL&lt;br&gt;auth_param&nbsp;negotiate&nbsp;children&nbsp;10&lt;br&gt;auth_param&nbsp;negotiate&nbsp;keep_alive&nbsp;on&lt;br&gt;acl&nbsp;kerb_auth&nbsp;proxy_auth&nbsp;REQUIRED&lt;br&gt;ssl_bump&nbsp;peek&nbsp;step1&nbsp;all        &nbsp;&lt;br&gt;ssl_bump&nbsp;splice &nbsp;nobumpSites  &nbsp;&lt;br&gt;ssl_bump&nbsp;bump                 &nbsp;&lt;br&gt;http_access&nbsp;allow&nbsp;kerb_auth&lt;br&gt;http_access&nbsp;deny&nbsp;social_ips&lt;br&gt;http_access&nbsp;deny&nbsp;social_dom&lt;br&gt;acl&nbsp;numeric_IPs&nbsp;urlpath_regex&nbsp;^[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+&lt;br&gt;acl&nbsp;connect&nbsp;method&nbsp;CONNECT&lt;br&gt;http_access&nbsp;deny&nbsp;connect&nbsp;numeric_IPs&nbsp;all&lt;br&gt;http_access&nbsp;allow&nbsp;localnet&lt;br&gt;http_access&nbsp;allow&nbsp;localhost&lt;br&gt;http_access&nbsp;deny&nbsp;all&lt;br&gt;always_direct&nbsp;allow&nbsp;all&lt;br&gt;sslcrtd_program&nbsp;/usr/lib64/squid/ssl_crtd&nbsp;-s&nbsp;/var/spool/squid_ssldb&nbsp;-M&nbsp;4MB&nbsp;&lt;br&gt;visible_hostname&nbsp;proxy.example.local&lt;br&gt;http_port&nbsp;3128&nbsp;ssl-bump&nbsp;generate-host-certificates=on&nbsp;dynamic_cert_mem_cache_size=6MB&nbsp;cert=/etc/squid/ssl_cert/myCA.pem&lt;br&gt;coredump_dir&nbsp;/var/spool/squid&lt;br&gt;refresh_pattern&nbsp;^ftp:          &nbsp;1440   &nbsp;20%    &nbsp;10080&lt;br&gt;refresh_pattern&nbsp;^gopher:       &nbsp;1440   &nbsp;0%     &nbsp;1440&lt;br&gt;refresh_pattern&nbsp;-i&nbsp;(/cgi-bin/|\?)&nbsp;0    &nbsp;0%     &nbsp;0&lt;br&gt;refresh_pattern&nbsp;.              &nbsp;0      &nbsp;20%    &nbsp;4320&lt;br&gt;url_rewrite_program&nbsp;/usr/sbin/ufdbgclient&nbsp;–l&nbsp;/var/ufdbguard/logs&lt;br&gt;url_rewrite_children&nbsp;64&lt;br&gt;access_log&nbsp;daemon:/var/log/squid/access.log&nbsp;combined&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;And&nbsp;klist&nbsp;output:&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;klist&nbsp;-k&nbsp;/etc/squid/HTTP.keytab&nbsp;&lt;br&gt;&lt;br&gt;Keytab&nbsp;name:&nbsp;FILE:/etc/squid/HTTP.keytab&lt;br&gt;KVNO&nbsp;Principal&lt;br&gt;----&nbsp;--------------------------------------------------------------------------&lt;br&gt;  &nbsp;2&nbsp;host/proxy.example.local@EXAMPLE.LOCAL&lt;br&gt;  &nbsp;2&nbsp;host/proxy.example.local@EXAMPLE.LOCAL&lt;br&gt;  &nbsp;2&nbsp;host/proxy.example.local@EXAMPLE.LOCAL&lt;br&gt;  &nbsp;2&nbsp;host/proxy.example.local@EXAMPLE.LOCAL&lt;br&gt;  &nbsp;2&nbsp;host/proxy.example.local@EXAMPLE.LOCAL&lt;br&gt;  &nbsp;2&nbsp;host/proxy@EXAMPLE.LOCAL&lt;br&gt;  &nbsp;2&nbsp;host/proxy@EXAMPLE.LOCAL&lt;br&gt;  &nbsp;2&nbsp;host/proxy@EXAMPLE.LOCAL&lt;br&gt;  &nbsp;2&nbsp;host/proxy@EXAMPLE.LOCAL&lt;br&gt;  &nbsp;2&nbsp;host/proxy@EXAMPLE.LOCAL&lt;br&gt;  &nbsp;2&nbsp;KANBAN$@EXAMPLE.LOCAL&lt;br&gt;  &nbsp;2&nbsp;KANBAN$@EXAMPLE.LOCAL&lt;br&gt;  &nbsp;2&nbsp;KANBAN$@EXAMPLE.LOCAL&lt;br&gt;  &nbsp;2&nbsp;KANBAN$@EXAMPLE.LOCAL&lt;br&gt;  &nbsp;2&nbsp;KANBAN$@EXAMPLE.LOCAL&lt;br&gt;  &nbsp;2&nbsp;HTTP/proxy.example.local@EXAMPLE.LOCAL&lt;br&gt;  &nbsp;2&nbsp;HTTP/proxy.example.local@EXAMPLE.LOCAL&lt;br&gt;  &nbsp;2&nbsp;HTTP/proxy.example.local@EXAMPLE.LOCAL&lt;br&gt;  &nbsp;2&nbsp;HTTP/proxy.example.local@EXAMPLE.LOCAL&lt;br&gt;  &nbsp;2&nbsp;HTTP/proxy.example.local@EXAMPLE.LOCAL&lt;br&gt;  &nbsp;2&nbsp;HTTP/proxy@EXAMPLE.LOCAL&lt;br&gt;  &nbsp;2&nbsp;HTTP/proxy@EXAMPLE.LOCAL&lt;br&gt;  &nbsp;2&nbsp;HTTP/proxy@EXAMPLE.LOCAL&lt;br&gt;  &nbsp;2&nbsp;HTTP/proxy@EXAMPLE.LOCAL&lt;br&gt;  &nbsp;2&nbsp;HTTP/proxy@EXAMPLE.LOCAL&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;End&nbsp;of&nbsp;output,&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Please&nbsp;could&nbsp;you&nbsp;help&nbsp;me?&nbsp;Am&nbsp;I&nbsp;doing&nbsp;something&nbsp;wrong?&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;in&nbsp;advance!&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&nbsp;data-smartmail=&quot;gmail_signature&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;--&lt;br&gt;Sergio&nbsp;Belkin&lt;br&gt;LPIC-2&nbsp;Certified&nbsp;-&nbsp;&lt;a&nbsp;href=&quot;http://www.lpi.org&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.lpi.org&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
