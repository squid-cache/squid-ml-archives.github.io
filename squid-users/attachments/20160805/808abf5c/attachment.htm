<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;All,&lt;br&gt;&lt;br&gt;I&#39;m&nbsp;Akhaice.&lt;br&gt;#&nbsp;And&nbsp;now,&nbsp;thanks&nbsp;for&nbsp;developers&nbsp;and&nbsp;maintainers&nbsp;at&nbsp;all&nbsp;times.&lt;br&gt;&lt;br&gt;I&#39;m&nbsp;using&nbsp;squid-3.5.16.&lt;br&gt;Recently&nbsp;I&nbsp;upgraded&nbsp;from&nbsp;squid-3.1&nbsp;to&nbsp;squid-3.5.&lt;br&gt;&lt;br&gt;And&nbsp;I&#39;ve&nbsp;been&nbsp;using&nbsp;ICAP&nbsp;Server&nbsp;that&nbsp;has&nbsp;authentication&nbsp;function.&lt;br&gt;&lt;br&gt;I&nbsp;configured&nbsp;that&nbsp;users&nbsp;needed&nbsp;authentication&nbsp;when&nbsp;they&nbsp;access&nbsp;web&nbsp;site.&lt;br&gt;The&nbsp;authentication&nbsp;function&nbsp;were&nbsp;provided&nbsp;by&nbsp;ICAP&nbsp;Server.&lt;br&gt;&lt;br&gt;When&nbsp;ICAP&nbsp;Server&nbsp;return&nbsp;response&nbsp;code&nbsp;407&nbsp;with&nbsp;&quot;Proxy-Authenticate&quot;&nbsp;header,&lt;br&gt;Client&nbsp;browser&nbsp;was&nbsp;not&nbsp;able&nbsp;to&nbsp;receive&nbsp;this&nbsp;header&nbsp;and&nbsp;display&nbsp;authentication&nbsp;dialog.&lt;br&gt;&lt;br&gt;I&nbsp;captured&nbsp;packets&nbsp;in&nbsp;two&nbsp;places.&lt;br&gt;One&nbsp;is&nbsp;between&nbsp;squid&nbsp;and&nbsp;ICAP&nbsp;server.&nbsp;The&nbsp;other&nbsp;is&nbsp;between&nbsp;squid&nbsp;and&nbsp;Client&nbsp;browser.&lt;br&gt;&lt;br&gt;The&nbsp;header&nbsp;information&nbsp;is&nbsp;as&nbsp;follows.&lt;br&gt;==================================================&lt;br&gt;+&nbsp;From&nbsp;ICAP&nbsp;Server&nbsp;to&nbsp;Squid&lt;br&gt;&lt;br&gt;ICAP/1.0&nbsp;200&nbsp;OK&lt;br&gt;Server:&nbsp;TEST-ICAP&lt;br&gt;ISTag:&nbsp;&quot;TEST-ICAP&quot;&lt;br&gt;Date:&nbsp;Thu,&nbsp;04&nbsp;Aug&nbsp;2016&nbsp;03:05:34&nbsp;GMT&lt;br&gt;Cache-Control:&nbsp;no-cache&lt;br&gt;Connection:&nbsp;close&lt;br&gt;Encapsulated:&nbsp;res-hdr=0,&nbsp;res-body=232&lt;br&gt;&lt;br&gt;HTTP/1.1&nbsp;407&nbsp;Proxy&nbsp;Authentication&nbsp;Required&lt;br&gt;Proxy-Connection:&nbsp;close&lt;br&gt;Content-Type:&nbsp;text/html;&nbsp;charset=utf-8&lt;br&gt;Proxy-Authenticate:&nbsp;Basic&nbsp;realm=&quot;TESTAUTH&quot;&lt;br&gt;Pragma:&nbsp;no-cache&lt;br&gt;Expires:&nbsp;Tue,&nbsp;2&nbsp;2001&nbsp;20:00:00&nbsp;GMT&lt;br&gt;Content-Length:&nbsp;2349&lt;br&gt;&lt;br&gt;==================================================&lt;br&gt;+&nbsp;From&nbsp;Squid&nbsp;to&nbsp;Client&nbsp;browser&lt;br&gt;&lt;br&gt;HTTP/1.1&nbsp;407&nbsp;Proxy&nbsp;Authentication&nbsp;Required&lt;br&gt;Date:&nbsp;Thu,&nbsp;04&nbsp;Aug&nbsp;2016&nbsp;03:05:34&nbsp;GMT&lt;br&gt;Content-Type:&nbsp;text/html;&nbsp;charset=utf-8&lt;br&gt;Pragma:&nbsp;no-cache&lt;br&gt;Expires:&nbsp;Tue,&nbsp;2&nbsp;2001&nbsp;20:00:00&nbsp;GMT&lt;br&gt;Content-Length:&nbsp;2349&lt;br&gt;X-Cache:&nbsp;MISS&nbsp;from&nbsp;proxyserver.local&lt;br&gt;Connection:&nbsp;keep-alive&lt;br&gt;==================================================&lt;br&gt;&lt;br&gt;I&nbsp;found&nbsp;that&nbsp;Squid-3.5&nbsp;automatically&nbsp;deleted&nbsp;the&nbsp;Proxy-Authenticate&nbsp;header.&lt;br&gt;&lt;br&gt;Is&nbsp;it&nbsp;the&nbsp;correct&nbsp;behavior&nbsp;on&nbsp;squid-3.5&nbsp;?&lt;br&gt;How&nbsp;can&nbsp;I&nbsp;make&nbsp;client&nbsp;browser&nbsp;get&nbsp;Proxy-Authenticate&nbsp;header?&lt;br&gt;&lt;br&gt;Thank&nbsp;you.&lt;br&gt;&lt;br&gt;John&nbsp;Akhaice&lt;br&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
