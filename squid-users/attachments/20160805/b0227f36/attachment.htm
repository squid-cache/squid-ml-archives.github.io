<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;On&nbsp;Thu,&nbsp;Aug&nbsp;4,&nbsp;2016&nbsp;at&nbsp;10:20&nbsp;AM&nbsp;Alex&nbsp;Rousskov&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:rousskov@measurement-factory.com&quot;&gt;rousskov@measurement-factory.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;On&nbsp;08/03/2016&nbsp;08:45&nbsp;PM,&nbsp;JR&nbsp;Dalrymple&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;To&nbsp;be&nbsp;brutally&nbsp;honest&nbsp;the&nbsp;whole&nbsp;concept&nbsp;is&nbsp;still&nbsp;a&nbsp;bit&nbsp;lost&nbsp;on&nbsp;me&lt;br&gt;<br>
&lt;br&gt;<br>
[rant]Admitting&nbsp;one&#39;s&nbsp;limitations&nbsp;is&nbsp;often&nbsp;the&nbsp;most&nbsp;difficult&nbsp;first&lt;br&gt;<br>
step,&nbsp;but&nbsp;please&nbsp;do&nbsp;not&nbsp;stop&nbsp;here!&nbsp;Suggestions&nbsp;for&nbsp;where&nbsp;to&nbsp;go&nbsp;next:&nbsp;Ask&lt;br&gt;<br>
good&nbsp;questions,&nbsp;do&nbsp;not&nbsp;accept&nbsp;answers&nbsp;you&nbsp;do&nbsp;not&nbsp;fully&nbsp;understand,&lt;br&gt;<br>
provide&nbsp;excellent&nbsp;debugging&nbsp;info,&nbsp;and&nbsp;carefully&nbsp;update&nbsp;Squid&nbsp;wiki&nbsp;as&nbsp;you&lt;br&gt;<br>
master&nbsp;the&nbsp;concept.&nbsp;Repeat&nbsp;as&nbsp;needed.&lt;br&gt;<br>
&lt;br&gt;<br>
IMHO,&nbsp;without&nbsp;solid&nbsp;SslBump&nbsp;understanding&nbsp;and&nbsp;providing&nbsp;good&nbsp;debugging,&lt;br&gt;<br>
you&nbsp;confine&nbsp;yourself&nbsp;to&nbsp;the&nbsp;endless&nbsp;copy-pasting&nbsp;of&nbsp;random&nbsp;config&lt;br&gt;<br>
snippets&nbsp;that&nbsp;usually&nbsp;do&nbsp;something&nbsp;you&nbsp;do&nbsp;not&nbsp;want&nbsp;and&nbsp;do&nbsp;not&nbsp;do&lt;br&gt;<br>
something&nbsp;you&nbsp;do&nbsp;want.&nbsp;Your&nbsp;ability&nbsp;to&nbsp;troubleshoot&nbsp;problems&nbsp;(and&nbsp;there&lt;br&gt;<br>
will&nbsp;be&nbsp;problems!)&nbsp;approaches&nbsp;zero&nbsp;in&nbsp;this&nbsp;case.&lt;br&gt;<br>
&lt;br&gt;<br>
Most&nbsp;Squid-related&nbsp;concepts&nbsp;are&nbsp;easy&nbsp;and&nbsp;can&nbsp;be&nbsp;brute-forced&nbsp;by&lt;br&gt;<br>
trial-and-error.&nbsp;SslBump&nbsp;is&nbsp;different.[/rant]&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;I&#39;m&nbsp;still&nbsp;having&nbsp;issues&nbsp;I&#39;m&nbsp;afraid&nbsp;-&nbsp;albeit&nbsp;different&nbsp;issues.&nbsp;My&nbsp;problem&lt;br&gt;<br>
&gt;&nbsp;now&nbsp;reads&nbsp;a&nbsp;lot&nbsp;like&nbsp;this&nbsp;guys&nbsp;issue:&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;https://www.mail-archive.com/misc@openbsd.org/msg144692.html&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://www.mail-archive.com/misc@openbsd.org/msg144692.html&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
That&nbsp;email&nbsp;thread&nbsp;does&nbsp;not&nbsp;have&nbsp;enough&nbsp;info&nbsp;to&nbsp;know&nbsp;what&nbsp;the&nbsp;problem&lt;br&gt;<br>
really&nbsp;is&nbsp;and&nbsp;contains&nbsp;a&nbsp;seemingly&nbsp;bogus&nbsp;(or&nbsp;at&nbsp;least&nbsp;very&nbsp;poorly&lt;br&gt;<br>
detailed)&nbsp;solution.&nbsp;In&nbsp;other&nbsp;words,&nbsp;this&nbsp;is&nbsp;one&nbsp;of&nbsp;the&nbsp;many&nbsp;SslBump&lt;br&gt;<br>
threads&nbsp;you&nbsp;may&nbsp;be&nbsp;better&nbsp;off&nbsp;ignoring&nbsp;for&nbsp;now.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;My&nbsp;browser&nbsp;just&nbsp;times&nbsp;out&nbsp;and&nbsp;no&lt;br&gt;<br>
&gt;&nbsp;auto-generated&nbsp;certificate&nbsp;is&nbsp;ever&nbsp;generated.&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;ssl_bump&nbsp;stare&nbsp;all&lt;br&gt;<br>
&gt;&nbsp;ssl_bump&nbsp;bump&nbsp;all&lt;br&gt;<br>
&lt;br&gt;<br>
Sounds&nbsp;like&nbsp;a&nbsp;good&nbsp;start&nbsp;to&nbsp;me,&nbsp;provided&nbsp;you&nbsp;_understand_&nbsp;what&nbsp;these&lt;br&gt;<br>
rules&nbsp;do&nbsp;and&nbsp;why&nbsp;this&nbsp;simple&nbsp;configuration&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;the&nbsp;more&lt;br&gt;<br>
complex&nbsp;one!&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;I&#39;ve&lt;br&gt;<br>
&gt;&nbsp;turned&nbsp;off&nbsp;the&nbsp;debugging&nbsp;as&nbsp;I&nbsp;wasn&#39;t&nbsp;getting&nbsp;anything&nbsp;terribly&nbsp;useful&lt;br&gt;<br>
&gt;&nbsp;out&nbsp;of&nbsp;it.&lt;br&gt;<br>
&lt;br&gt;<br>
That&#39;s&nbsp;fine&nbsp;if&nbsp;you&nbsp;want&nbsp;folks&nbsp;to&nbsp;keep&nbsp;guessing&nbsp;what&nbsp;your&nbsp;problem&nbsp;is.&nbsp;If&lt;br&gt;<br>
you&nbsp;want&nbsp;more&nbsp;efficient&nbsp;help,&nbsp;use&nbsp;the&nbsp;latest&nbsp;Squid,&nbsp;isolate&nbsp;the&nbsp;problem&lt;br&gt;<br>
to&nbsp;a&nbsp;single&nbsp;HTTPS&nbsp;transaction,&nbsp;and&nbsp;share&nbsp;the&nbsp;corresponding&nbsp;ALL,9&nbsp;log:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://wiki.squid-cache.org/SquidFaq/BugReporting#Debugging_a_single_transaction&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://wiki.squid-cache.org/SquidFaq/BugReporting#Debugging_a_single_transaction&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
HTH,&lt;br&gt;<br>
&lt;br&gt;<br>
Alex.&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;for&nbsp;the&nbsp;encouragement&nbsp;Alex,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;was&nbsp;doing&nbsp;single&nbsp;transaction&nbsp;debugging&nbsp;all&nbsp;along&nbsp;as&nbsp;this&nbsp;is&nbsp;currently&nbsp;configured&nbsp;in&nbsp;a&nbsp;lab&nbsp;with&nbsp;a&nbsp;single&nbsp;client.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&#39;ve&nbsp;gotten&nbsp;it&nbsp;working&nbsp;at&nbsp;this&nbsp;point,&nbsp;but&nbsp;not&nbsp;due&nbsp;to&nbsp;diligent&nbsp;debugging&nbsp;I&#39;m&nbsp;afraid&nbsp;-&nbsp;more&nbsp;just&nbsp;a&nbsp;lucky&nbsp;shot&nbsp;in&nbsp;the&nbsp;dark.&nbsp;I&nbsp;reconfigured&nbsp;my&nbsp;system&nbsp;and&nbsp;lab&nbsp;network&nbsp;to&nbsp;perform&nbsp;the&nbsp;bump&nbsp;on&nbsp;intercepted&nbsp;traffic.&nbsp;It&nbsp;*just&nbsp;works*.&nbsp;I&nbsp;honestly&nbsp;don&#39;t&nbsp;care&nbsp;to&nbsp;backtrack&nbsp;and&nbsp;debug&nbsp;direct&nbsp;proxy&nbsp;requests&nbsp;as&nbsp;it&nbsp;wasn&#39;t&nbsp;part&nbsp;of&nbsp;my&nbsp;planned&nbsp;end-state&nbsp;anyway.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;For&nbsp;posterity&#39;s&nbsp;sake,&nbsp;here&nbsp;are&nbsp;the&nbsp;relevant&nbsp;parts&nbsp;of&nbsp;my&nbsp;working&nbsp;configuration:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;/etc/pf.conf:&lt;/div&gt;&lt;div&gt;pass&nbsp;in&nbsp;proto&nbsp;tcp&nbsp;to&nbsp;any&nbsp;port&nbsp;80&nbsp;divert-to&nbsp;127.0.0.1&nbsp;port&nbsp;3128&lt;/div&gt;&lt;div&gt;pass&nbsp;in&nbsp;proto&nbsp;tcp&nbsp;to&nbsp;any&nbsp;port&nbsp;443&nbsp;divert-to&nbsp;127.0.0.1&nbsp;port&nbsp;3129&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;squid.conf:&lt;/div&gt;&lt;div&gt;http_port&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:3128&quot;&gt;127.0.0.1:3128&lt;/a&gt;&nbsp;intercept&lt;/div&gt;&lt;div&gt;https_port&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:3129&quot;&gt;127.0.0.1:3129&lt;/a&gt;&nbsp;intercept&nbsp;ssl-bump&nbsp;generate-host-certificates=on&nbsp;dynamic_cert_mem_cache_size=4MB&nbsp;cert=/usr/local/squid/etc/ssl/CA.pem&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;#&nbsp;/usr/local/squid/sbin/squid&nbsp;-v&lt;/div&gt;&lt;div&gt;Squid&nbsp;Cache:&nbsp;Version&nbsp;3.5.20&lt;/div&gt;&lt;div&gt;Service&nbsp;Name:&nbsp;squid&lt;/div&gt;&lt;div&gt;configure&nbsp;options:&nbsp;Â &#39;--enable-icmp&#39;&nbsp;&#39;--enable-delay-pools&#39;&nbsp;&#39;--enable-pf-transparent&#39;&nbsp;&#39;--enable-ssl-crtd&#39;&nbsp;&#39;--enable-auth&#39;&nbsp;&#39;--with-openssl&#39;&nbsp;--enable-ltdl-convenience&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;#&nbsp;uname&nbsp;-a&lt;/div&gt;&lt;div&gt;OpenBSD&nbsp;router.example.local&nbsp;5.9&nbsp;GENERIC#1761&nbsp;amd64&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;again&nbsp;for&nbsp;all&nbsp;your&nbsp;help.&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
