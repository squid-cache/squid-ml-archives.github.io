<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;2016-08-19&nbsp;17:22&nbsp;GMT-03:00&nbsp;Antony&nbsp;Stone&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:Antony.Stone@squid.open.source.it&quot;&nbsp;target=&quot;_blank&quot;&gt;Antony.Stone@squid.open.source.it&lt;/a&gt;&gt;&lt;/span&gt;:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&gt;On&nbsp;Friday&nbsp;19&nbsp;August&nbsp;2016&nbsp;at&nbsp;20:41:11,&nbsp;Jok&nbsp;Thuau&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;On&nbsp;Fri,&nbsp;Aug&nbsp;19,&nbsp;2016&nbsp;at&nbsp;9:33&nbsp;AM,&nbsp;Sergio&nbsp;Belkin&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:sebelk@gmail.com&quot;&gt;sebelk@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;/var/log/squid/access.log&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;192.168.50.41&nbsp;-&nbsp;-&nbsp;[19/Aug/2016:12:19:45&nbsp;-0300]&nbsp;&quot;CONNECT&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;&lt;a&nbsp;href=&quot;http://beap-bc.yahoo.com:443&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;beap-bc.yahoo.com:443&lt;/a&gt;&nbsp;HTTP/1.1&quot;&nbsp;407&nbsp;4634&nbsp;&quot;-&quot;&nbsp;&quot;Mozilla/5.0&nbsp;(Windows&nbsp;NT&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;6.1;&nbsp;WOW64;&nbsp;rv:41.0)&nbsp;Gecko/20100101&nbsp;Firefox/41.0&quot;&nbsp;TCP_DENIED:HIER_NONE&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;This&nbsp;is&nbsp;unauthenticated&nbsp;(notice&nbsp;the&nbsp;&quot;-&nbsp;-&quot;&nbsp;after&nbsp;the&nbsp;IP)&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;192.168.50.41&nbsp;-&nbsp;juan.perez&nbsp;[19/Aug/2016:12:19:45&nbsp;-0300]&nbsp;&quot;CONNECT&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;&lt;a&nbsp;href=&quot;http://beap-bc.yahoo.com:443&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;beap-bc.yahoo.com:443&lt;/a&gt;&nbsp;HTTP/1.1&quot;&nbsp;200&nbsp;0&nbsp;&quot;-&quot;&nbsp;&quot;Mozilla/5.0&nbsp;(Windows&nbsp;NT&nbsp;6.1;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;WOW64;&nbsp;rv:41.0)&nbsp;Gecko/20100101&nbsp;Firefox/41.0&quot;&nbsp;TAG_NONE:HIER_DIRECT&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;This&nbsp;one&nbsp;is&nbsp;authenticated&nbsp;(juan.perez).&nbsp;The&nbsp;code&nbsp;407&nbsp;in&nbsp;the&nbsp;first&nbsp;request&lt;br&gt;<br>
&gt;&nbsp;means&nbsp;&quot;proxy&nbsp;request&nbsp;authentication&quot;.&nbsp;So&nbsp;what&nbsp;happened&nbsp;here&nbsp;is&nbsp;that&nbsp;the&lt;br&gt;<br>
&gt;&nbsp;user&nbsp;browsed,&nbsp;was&nbsp;asked&nbsp;for&nbsp;credentials&nbsp;(and&nbsp;maybe&nbsp;those&nbsp;were&nbsp;provided&lt;br&gt;<br>
&gt;&nbsp;automatically),&nbsp;and&nbsp;then&nbsp;the&nbsp;request&nbsp;was&nbsp;resent&nbsp;with&nbsp;the&nbsp;creds&nbsp;included.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;Given&nbsp;the&nbsp;timestamps&nbsp;(both&nbsp;12:19:45;&nbsp;no&nbsp;time&nbsp;for&nbsp;a&nbsp;human&nbsp;to&nbsp;enter&nbsp;credentials&lt;br&gt;<br>
at&nbsp;a&nbsp;prompt)&nbsp;the&nbsp;browser&nbsp;did&nbsp;this&nbsp;automatically,&nbsp;and&nbsp;invisibly&nbsp;to&nbsp;the&nbsp;user.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Exactly&nbsp;it&nbsp;does&nbsp;so,&nbsp;but&nbsp;I&nbsp;wonder&nbsp;if&nbsp;TCP_DENIED&nbsp;is&nbsp;the&nbsp;proper&nbsp;message&nbsp;here.&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &lt;br&gt;&nbsp;&nbsp;&nbsp;It&#39;s&nbsp;a&nbsp;case&nbsp;of&nbsp;&quot;client&nbsp;must&nbsp;first&nbsp;authenticate&nbsp;itself&nbsp;with&nbsp;the&nbsp;proxy&quot;&nbsp;(&lt;a&nbsp;href=&quot;https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html&quot;&gt;https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html&lt;/a&gt;),&nbsp;perhaps&nbsp;I&#39;m&nbsp;wrong,&nbsp;but&nbsp;would&nbsp;something&nbsp;such&nbsp;as&nbsp;TCP_UNAUTHORIZED&nbsp;be&nbsp;better?&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;However,&nbsp;I&#39;ve&nbsp;found&nbsp;that&nbsp;I&nbsp;can&nbsp;create&nbsp;a&nbsp;rule&nbsp;in&nbsp;order&nbsp;to&nbsp;exclude&nbsp;such&nbsp;a&nbsp;messages&nbsp;in&nbsp;the&nbsp;logs:&lt;br&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://squid-web-proxy-cache.1019090.n4.nabble.com/Too-many-TCP-DENIED-407-when-using-Kerberos-authentication-td4662372.html&quot;&gt;http://squid-web-proxy-cache.1019090.n4.nabble.com/Too-many-TCP-DENIED-407-when-using-Kerberos-authentication-td4662372.html&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;And&nbsp;squid-analyzer&nbsp;has&nbsp;a&nbsp;directive&nbsp;to&nbsp;exclude&nbsp;them&nbsp;too:&lt;br&gt;&lt;br&gt;ExcludedCodes &nbsp;TCP_DENIED/407&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks!&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;<br>
&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
&gt;&nbsp;http_access&nbsp;deny &nbsp;!kerb_auth&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;http_access&nbsp;allow&nbsp;kerb_auth&nbsp;whitelist_ips&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;And&nbsp;here&nbsp;is&nbsp;the&nbsp;config&nbsp;that&nbsp;causes&nbsp;that&nbsp;--&nbsp;it&#39;s&nbsp;totally&nbsp;normal...&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Thanks,&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;span&nbsp;class=&quot;&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;Antony.&lt;br&gt;<br>
&lt;br&gt;<br>
--&lt;br&gt;<br>
&quot;In&nbsp;fact&nbsp;I&nbsp;wanted&nbsp;to&nbsp;be&nbsp;John&nbsp;Cleese&nbsp;and&nbsp;it&nbsp;took&nbsp;me&nbsp;some&nbsp;time&nbsp;to&nbsp;realise&nbsp;that&lt;br&gt;<br>
the&nbsp;job&nbsp;was&nbsp;already&nbsp;taken.&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
 -&nbsp;Douglas&nbsp;Adams&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Please&nbsp;reply&nbsp;to&nbsp;the&nbsp;list;&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; please&nbsp;*don&#39;t*&nbsp;CC&nbsp;me.&lt;/font&gt;&lt;/span&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&nbsp;data-smartmail=&quot;gmail_signature&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;--&lt;br&gt;Sergio&nbsp;Belkin&lt;br&gt;LPIC-2&nbsp;Certified&nbsp;-&nbsp;&lt;a&nbsp;href=&quot;http://www.lpi.org&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.lpi.org&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;<br>

</tt>
