<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hello,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;cache&nbsp;Github&nbsp;zip&nbsp;URL&#39;s&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;effectively&nbsp;cached&nbsp;as&nbsp;a&nbsp;composer(php&nbsp;dependency&nbsp;management&nbsp;tool)&nbsp;uses&nbsp;them&nbsp;and&nbsp;in&nbsp;our&nbsp;local&nbsp;setup&nbsp;(&nbsp;we&nbsp;are&nbsp;about&nbsp;40&nbsp;developers&nbsp;on&nbsp;a&nbsp;Lan&nbsp;and&nbsp;it&nbsp;will&nbsp;really&nbsp;help&nbsp;us&nbsp;managing&nbsp;cache.).&nbsp;My&nbsp;squid&nbsp;version&nbsp;is&nbsp;3.5.12&nbsp;and&nbsp;our&nbsp;squid&nbsp;cache&nbsp;server&nbsp;is&nbsp;ubuntu&nbsp;16.04.&nbsp;Here&nbsp;is&nbsp;squid.conf&nbsp;file&nbsp;we&nbsp;use,&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;https://gist.github.com/hardikdangar/df31d5bce725eff66e06f3abd6e77600&quot;&gt;https://gist.github.com/&lt;wbr&gt;hardikdangar/&lt;wbr&gt;df31d5bce725eff66e06f3abd6e776&lt;wbr&gt;00&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Here&nbsp;is&nbsp;the&nbsp;part&nbsp;which&nbsp;I&nbsp;want&nbsp;to&nbsp;cache,&lt;/div&gt;&lt;div&gt;say&nbsp;for&nbsp;example&nbsp;you&nbsp;want&nbsp;to&nbsp;download&nbsp;repo&nbsp;from&nbsp;GitHub&nbsp;then&nbsp;URL&nbsp;looks&nbsp;like&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;https://github.com/hardikdangar/test/archive/master.zip&quot;&gt;https://github.com/&lt;wbr&gt;hardikdangar/test/archive/&lt;wbr&gt;master.zip&lt;/a&gt;&lt;/div&gt;&lt;div&gt;but&nbsp;it&nbsp;redirects&nbsp;to&nbsp;the&nbsp;following,&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;https://codeload.github.com/hardikdangar/test/zip/master&quot;&gt;https://codeload.github.com/&lt;wbr&gt;hardikdangar/test/zip/master&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;You&nbsp;can&nbsp;see&nbsp;the&nbsp;response&nbsp;parameters&nbsp;via&nbsp;&lt;a&nbsp;href=&quot;http://redbot.org&quot;&gt;redbot.org&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;https://redbot.org/?uri=https%3A%2F%2Fcodeload.github.com%2Fhardikdangar%2Ftest%2Fzip%2Fmaster&quot;&gt;https://redbot.org/?uri=https%&lt;wbr&gt;3A%2F%2Fcodeload.github.com%&lt;wbr&gt;2Fhardikdangar%2Ftest%2Fzip%&lt;wbr&gt;2Fmaster&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp;HTTP/1.1&nbsp;200&nbsp;OK&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;Content-Length:&nbsp;929&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;Access-Control-Allow-Origin:&nbsp;&lt;a&nbsp;href=&quot;https://render.githubusercontent.com&quot;&gt;https://render.&lt;wbr&gt;githubusercontent.com&lt;/a&gt;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;Content-Security-Policy:&nbsp;default-src&nbsp;&#39;none&#39;;&nbsp;style-src&nbsp;&#39;unsafe-inline&#39;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;Strict-Transport-Security:&nbsp;max-age=31536000&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;Vary:&nbsp;Authorization,Accept-Encoding&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;X-Content-Type-Options:&nbsp;nosniff&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;X-Frame-Options:&nbsp;deny&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;X-XSS-Protection:&nbsp;1;&nbsp;mode=block&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;ETag:&nbsp;&quot;&lt;wbr&gt;9ea9838812d6f7bc53763eb1577da0&lt;wbr&gt;4e2fa473d5&quot;&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;Content-Type:&nbsp;application/zip&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;Content-Disposition:&nbsp;attachment;&nbsp;filename=test-master.zip&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;X-Geo-Block-List:&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;Date:&nbsp;Wed,&nbsp;14&nbsp;Sep&nbsp;2016&nbsp;23:24:44&nbsp;GMT&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;X-GitHub-Request-Id:&nbsp;77092BF1:7F40:346461:57D9DC3C&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Now&nbsp;if&nbsp;i&nbsp;do&nbsp;any&nbsp;change&nbsp;to&nbsp;above&nbsp;repository&nbsp;github&nbsp;does&nbsp;change&nbsp;ETAG&nbsp;and&nbsp;if&nbsp;i&nbsp;don&#39;t&nbsp;change&nbsp;anything&nbsp;then&nbsp;ETAG&nbsp;remains&nbsp;the&nbsp;same&nbsp;so&nbsp;i&nbsp;believe&nbsp;we&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;cache&nbsp;those&nbsp;.zip&nbsp;files.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;By&nbsp;default,&nbsp;squid&nbsp;does&nbsp;not&nbsp;cache&nbsp;&lt;a&nbsp;href=&quot;http://codeload.github.com&quot;&gt;codeload.github.com&lt;/a&gt;,&nbsp;to&nbsp;put&nbsp;it&nbsp;into&nbsp;cache,&nbsp;I&nbsp;added,&lt;/div&gt;&lt;div&gt;refresh_pattern&nbsp;&lt;a&nbsp;href=&quot;http://codeload.github.com&quot;&gt;codeload.github.com&lt;/a&gt;&nbsp;900&nbsp;20%&nbsp;4320&nbsp;reload-into-ims&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Now&nbsp;as&nbsp;per&nbsp;my&nbsp;understanding&nbsp;this&nbsp;should&nbsp;check&nbsp;etag&nbsp;as&nbsp;Last-Modified&nbsp;is&nbsp;not&nbsp;provided&nbsp;by&nbsp;github&nbsp;for&nbsp;each&nbsp;new&nbsp;request.&nbsp;This&nbsp;does&nbsp;cache&nbsp;the&nbsp;zip&nbsp;file&nbsp;but&nbsp;what&nbsp;happens&nbsp;is&nbsp;in&nbsp;next&nbsp;request&nbsp;even&nbsp;if&nbsp;i&nbsp;change&nbsp;the&nbsp;content&nbsp;and&nbsp;etag&nbsp;changes&nbsp;squid&nbsp;sends&nbsp;the&nbsp;cached&nbsp;file&nbsp;from&nbsp;its&nbsp;cache&nbsp;instead&nbsp;of&nbsp;downloading&nbsp;new&nbsp;file.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;no&nbsp;clue&nbsp;why&nbsp;this&nbsp;happens.&nbsp;Can&nbsp;anyone&nbsp;help&nbsp;me&nbsp;figure&nbsp;out&nbsp;what&#39;s&nbsp;wrong&nbsp;here?&nbsp;why&nbsp;squid&nbsp;does&nbsp;not&nbsp;detect&nbsp;new&nbsp;etag&nbsp;when&nbsp;repository&nbsp;is&nbsp;updated?&nbsp;why&nbsp;it&nbsp;sends&nbsp;cache&nbsp;file&nbsp;even&nbsp;though&nbsp;there&nbsp;is&nbsp;new&nbsp;file&nbsp;available.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thank&nbsp;you&nbsp;very&nbsp;much&nbsp;in&nbsp;advance&nbsp;for&nbsp;reading&nbsp;upto&nbsp;this&nbsp;point&nbsp;and&nbsp;have&nbsp;a&nbsp;good&nbsp;day. &lt;/div&gt;<br>
&lt;/div&gt;<br>

</tt>
