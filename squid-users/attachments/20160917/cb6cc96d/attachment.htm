<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Amos,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thank&nbsp;you&nbsp;very&nbsp;much&nbsp;for&nbsp;you&nbsp;reply,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;But&nbsp;I&nbsp;would&nbsp;just&nbsp;like&nbsp;to&nbsp;confirm&nbsp;this,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;thought&nbsp;ETAG&nbsp;is&nbsp;something&nbsp;which&nbsp;we&nbsp;can&nbsp;verify&nbsp;like,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-&nbsp;when&nbsp;the&nbsp;server&nbsp;is&nbsp;sending&nbsp;response&nbsp;it&nbsp;sends&nbsp;ETAG.&lt;/div&gt;&lt;div&gt;-&nbsp;squid&nbsp;then&nbsp;decides&nbsp;to&nbsp;cache&nbsp;it&nbsp;with&nbsp;ETAG&lt;/div&gt;&lt;div&gt;-&nbsp;now&nbsp;if&nbsp;somebody&nbsp;tries&nbsp;to&nbsp;fetch&nbsp;the&nbsp;same&nbsp;URL&nbsp;given&nbsp;they&nbsp;are&nbsp;on&nbsp;same&nbsp;squid&nbsp;network,&nbsp;squid&nbsp;will&nbsp;send previously&nbsp;saved&nbsp;copy&nbsp;of&nbsp;the&nbsp;ETag&nbsp;along&nbsp;with&nbsp;the&nbsp;request&nbsp;in&nbsp;a&nbsp;&quot;If-None-Match&quot;&nbsp;field.&lt;/div&gt;&lt;div&gt;- On&nbsp;this&nbsp;subsequent&nbsp;request,&nbsp;the&nbsp;server&nbsp;may&nbsp;now&nbsp;compare&nbsp;the&nbsp;client&#39;s&nbsp;ETag&nbsp;with&nbsp;the&nbsp;ETag&nbsp;for&nbsp;the&nbsp;current&nbsp;version&nbsp;of&nbsp;the&nbsp;resource.&nbsp;If&nbsp;the&nbsp;ETag&nbsp;values&nbsp;match,&nbsp;meaning&nbsp;that&nbsp;the&nbsp;resource&nbsp;has&nbsp;not&nbsp;changed,&nbsp;then&nbsp;the&nbsp;server&nbsp;may&nbsp;send&nbsp;back&nbsp;a&nbsp;very&nbsp;short&nbsp;response&nbsp;with&nbsp;a&nbsp;HTTP&nbsp;304&nbsp;Not&nbsp;Modified&nbsp;status.&nbsp;The&nbsp;304&nbsp;status&nbsp;tells&nbsp;the&nbsp;client&nbsp;that&nbsp;its&nbsp;cached&nbsp;version&nbsp;is&nbsp;still&nbsp;good&nbsp;and&nbsp;that&nbsp;it&nbsp;should&nbsp;use&nbsp;that.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Now&nbsp;comparing&nbsp;this&nbsp;to&nbsp;our&nbsp;GitHub&nbsp;example.&lt;/div&gt;&lt;div&gt;-&nbsp;when&nbsp;we&nbsp;request&nbsp;&lt;a&nbsp;href=&quot;https://codeload.github.com/hardikdangar/test/zip/master&quot;&gt;https://codeload.github.com/hardikdangar/test/zip/master&lt;/a&gt;&nbsp;it&nbsp;has &lt;/div&gt;&lt;div&gt; ETag:&nbsp;&quot;9ea9838812d6f7bc53763eb1577da04e2fa473d5&quot;&lt;/div&gt;&lt;div&gt;-&nbsp;even&nbsp;if&nbsp;you&nbsp;request&nbsp;it&nbsp;after&nbsp;a&nbsp;day&nbsp;ETAG&nbsp;remains&nbsp;the&nbsp;same&nbsp;as&nbsp;long&nbsp;as&nbsp;repository&nbsp;is&nbsp;not&nbsp;changed.&lt;/div&gt;&lt;div&gt;-&nbsp;So&nbsp;when&nbsp;i&nbsp;request&nbsp;that&nbsp;file&nbsp;again&nbsp;squid&nbsp;would&nbsp;not&nbsp;send&nbsp;request&nbsp;with&nbsp;ETAG&nbsp;to&nbsp;server&nbsp;?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;(&nbsp;just&nbsp;to&nbsp;clarify,&nbsp;github&nbsp;does&nbsp;not&nbsp;change&nbsp;ETAG&nbsp;unless&nbsp;you&nbsp;change&nbsp;files&nbsp;in&nbsp;repo).&nbsp;My&nbsp;concern&nbsp;is&nbsp;if&nbsp;ETAG&nbsp;is&nbsp;not&nbsp;changed&nbsp;then&nbsp;we&nbsp;want&nbsp;to&nbsp;use&nbsp;the&nbsp;cache&nbsp;but&nbsp;if&nbsp;its&nbsp;change&nbsp;then&nbsp;we&nbsp;want&nbsp;to&nbsp;download&nbsp;copy&nbsp;of&nbsp;new&nbsp;version.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;now&nbsp;based&nbsp;on&nbsp;your&nbsp;answer&nbsp;you&nbsp;have&nbsp;said&nbsp;it&nbsp;will&nbsp;not&nbsp;request&nbsp;the&nbsp;file&nbsp;again&nbsp;until&nbsp;min&nbsp;time&nbsp;defined&nbsp;in&nbsp;referesh_pattern.&nbsp;what&nbsp;if&nbsp;i&nbsp;set&nbsp;the&nbsp;request&nbsp;min&nbsp;time&nbsp;to&nbsp;be&nbsp;like&nbsp;1&nbsp;minute&nbsp;in&nbsp;referesh_pattern&nbsp;?&nbsp;will&nbsp;it&nbsp;cause&nbsp;squid&nbsp;to&nbsp;check&nbsp;ETAG&nbsp;with&nbsp;server&nbsp;and&nbsp;it&nbsp;will&nbsp;serve&nbsp;cached&nbsp;file&nbsp;as&nbsp;ETAG&nbsp;is&nbsp;not&nbsp;changed.&nbsp;or&nbsp;will&nbsp;it&nbsp;just&nbsp;drop&nbsp;the&nbsp;cached&nbsp;file&nbsp;after&nbsp;a&nbsp;minute&nbsp;and&nbsp;download&nbsp;new&nbsp;file&nbsp;?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Sorry&nbsp;for&nbsp;all&nbsp;of&nbsp;my&nbsp;noob&nbsp;questions&nbsp;but&nbsp;i&nbsp;am&nbsp;just&nbsp;trying&nbsp;to&nbsp;understand&nbsp;squid&nbsp;and&nbsp;its&nbsp;options.&nbsp;it&#39;s&nbsp;really&nbsp;fascinating&nbsp;software&nbsp;and&nbsp;really&nbsp;appreciate&nbsp;your&nbsp;answers&nbsp;here.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thank&nbsp;you&nbsp;very&nbsp;much.&lt;/div&gt;&lt;div&gt;Have&nbsp;a&nbsp;good&nbsp;day.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Sep&nbsp;16,&nbsp;2016&nbsp;at&nbsp;12:39&nbsp;PM,&nbsp;Hardik&nbsp;Dangar&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:hardikdangar+squid@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;hardikdangar+squid@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;pre&nbsp;style=&quot;white-space:pre-wrap;color:rgb(0,0,0)&quot;&gt;&lt;i&gt;Amos,&lt;/i&gt;&lt;/pre&gt;&lt;pre&nbsp;style=&quot;white-space:pre-wrap;color:rgb(0,0,0)&quot;&gt;Thanks&nbsp;for&nbsp;the&nbsp;reply&nbsp;but&nbsp;it&nbsp;seems&nbsp;i&nbsp;am&nbsp;not&nbsp;able&nbsp;to&nbsp;tell&nbsp;you&nbsp;what&nbsp;i&nbsp;want&nbsp;to&nbsp;do.&nbsp;i&nbsp;don&#39;t&nbsp;want&nbsp;to&nbsp;cache&nbsp;repo&nbsp;files.&nbsp;i&nbsp;want&nbsp;to&nbsp;cache&nbsp;.zip&nbsp;files&nbsp;only.&nbsp;&lt;span&nbsp;style=&quot;font-family:arial,sans-serif&quot;&gt;i&nbsp;don&#39;t&nbsp;want&nbsp;.git&nbsp;file&nbsp;to&nbsp;cache&nbsp;but&nbsp;only&nbsp;.zip&nbsp;files&nbsp;which&nbsp;are&nbsp;fetch&nbsp;from&nbsp;&lt;a&nbsp;href=&quot;http://github.com&quot;&nbsp;target=&quot;_blank&quot;&gt;github.com&lt;/a&gt;,&lt;/span&gt;&lt;/pre&gt;&lt;pre&nbsp;style=&quot;white-space:pre-wrap;color:rgb(0,0,0)&quot;&gt;Also&nbsp;you&nbsp;have&nbsp;said&nbsp;things&nbsp;about&nbsp;commits&nbsp;but&nbsp;i&nbsp;am&nbsp;talking&nbsp;about&nbsp;zip&nbsp;file&nbsp;which&nbsp;is&nbsp;given&nbsp;by&nbsp;github&nbsp;via&nbsp;download&nbsp;button&nbsp;or&nbsp;composer&nbsp;fetches&nbsp;those&nbsp;files&nbsp;via&nbsp;command&nbsp;line&nbsp;directly.&nbsp;as&nbsp;soon&nbsp;as&nbsp;someone&nbsp;commits&nbsp;zip&nbsp;file&#39;s&nbsp;ETag&nbsp;is&nbsp;changed&nbsp;when&nbsp;you&nbsp;fetch&nbsp;it.&lt;/pre&gt;&lt;pre&nbsp;style=&quot;white-space:pre-wrap;color:rgb(0,0,0)&quot;&gt;So&nbsp;there&nbsp;is&nbsp;no&nbsp;way&nbsp;to&nbsp;achieve&nbsp;this&nbsp;?&nbsp;Do&nbsp;you&nbsp;think&nbsp;there&nbsp;is&nbsp;a&nbsp;way&nbsp;to&nbsp;achieve&nbsp;this&nbsp;?&lt;/pre&gt;&lt;pre&nbsp;style=&quot;white-space:pre-wrap;color:rgb(0,0,0)&quot;&gt;&lt;br&gt;&lt;/pre&gt;&lt;pre&nbsp;style=&quot;white-space:pre-wrap;color:rgb(0,0,0)&quot;&gt;&lt;blockquote&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;i&gt;Consider:&nbsp;how&nbsp;does&nbsp;Squid&nbsp;know&nbsp;the&nbsp;ETag&nbsp;has&nbsp;changed&nbsp;on&nbsp;the&nbsp;server?&lt;/i&gt;&lt;i&gt;<br>
&lt;/i&gt;&lt;i&gt;What&nbsp;you&nbsp;know&nbsp;about&nbsp;things&nbsp;happening&nbsp;in&nbsp;RL&nbsp;is&nbsp;not&nbsp;what&nbsp;Squid&nbsp;knows.&lt;/i&gt;&lt;i&gt;<br>
&lt;/i&gt;&lt;i&gt;I&nbsp;fact&nbsp;how&nbsp;do&nbsp;*you*&nbsp;know&nbsp;someone&nbsp;else&nbsp;did&nbsp;not&nbsp;commit&nbsp;a&nbsp;change&nbsp;during&lt;br&gt;&lt;/i&gt;&lt;i&gt;that&nbsp;~1&nbsp;second&nbsp;it&nbsp;takes&nbsp;to&nbsp;look&nbsp;at&nbsp;the&nbsp;page&nbsp;and&nbsp;click&nbsp;the&nbsp;download&nbsp;button?&lt;br&gt;&lt;/i&gt;&lt;i&gt;&nbsp;Simply,&nbsp;you&nbsp;don&#39;t,&nbsp;and&nbsp;cannot&nbsp;until&nbsp;the&nbsp;new&nbsp;object&nbsp;has&nbsp;been&nbsp;fetched.&lt;/i&gt;&lt;i&gt;<br>
&lt;/i&gt;&lt;i&gt;Likewise,&nbsp;Squid&nbsp;cannot&nbsp;know&nbsp;if&nbsp;the&nbsp;object&nbsp;is&nbsp;the&nbsp;same&nbsp;until&nbsp;it&nbsp;has&lt;br&gt;&lt;/i&gt;&lt;i&gt;fetched&nbsp;a&nbsp;MISS&nbsp;from&nbsp;the&nbsp;server.&nbsp;Except&nbsp;that&nbsp;Squid&nbsp;does&nbsp;not&nbsp;look&nbsp;at&nbsp;the&lt;br&gt;&lt;/i&gt;&lt;i&gt;previous&nbsp;page&nbsp;content,&nbsp;so&nbsp;it&nbsp;cannot&nbsp;even&nbsp;&#39;see&#39;&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;commit&lt;br&gt;&lt;/i&gt;&lt;i&gt;listed&nbsp;there&nbsp;that&nbsp;might&nbsp;be&nbsp;different&nbsp;since&nbsp;whenever&nbsp;it&nbsp;got&nbsp;the&nbsp;previous&lt;br&gt;&lt;/i&gt;&lt;i&gt;object.&lt;/i&gt;&lt;i&gt;<br>
&lt;/i&gt;&lt;i&gt;There&nbsp;is&nbsp;no&nbsp;Cache-Control&nbsp;or&nbsp;Expires&nbsp;header&nbsp;indicating&nbsp;a&nbsp;specific&lt;br&gt;&lt;/i&gt;&lt;i&gt;storage&nbsp;timeout&nbsp;or&nbsp;revalidation&nbsp;procedure.&nbsp;So&nbsp;refresh_pattern&nbsp;defaults&lt;br&gt;&lt;/i&gt;&lt;i&gt;will&nbsp;be&nbsp;used.&nbsp;These&nbsp;responses&nbsp;will&nbsp;be&nbsp;cached&nbsp;for&nbsp;the&nbsp;refresh_pattern&lt;br&gt;&lt;/i&gt;&lt;i&gt;&#39;Min&#39;&nbsp;duration&nbsp;(900&nbsp;minutes)&nbsp;before&nbsp;being&nbsp;considered&nbsp;for&nbsp;revalidated.&lt;/i&gt;&lt;i&gt;<br>
&lt;/i&gt;&lt;i&gt;NP&nbsp;1:&nbsp;Synthesizing&nbsp;Last-Modified&nbsp;from&nbsp;the&nbsp;Date&nbsp;header&nbsp;is&nbsp;only&nbsp;just&nbsp;being&lt;br&gt;&lt;/i&gt;&lt;i&gt;fixed&nbsp;in&nbsp;Squid&nbsp;the&nbsp;past&nbsp;few&nbsp;weeks,&nbsp;and&nbsp;some&nbsp;parts&nbsp;of&nbsp;it&nbsp;still&nbsp;to&nbsp;be&lt;br&gt;&lt;/i&gt;&lt;i&gt;committed.&nbsp;So&nbsp;I&nbsp;would&nbsp;not&nbsp;expect&nbsp;that&nbsp;response&nbsp;to&nbsp;be&nbsp;revalidated,&nbsp;just&lt;br&gt;&lt;/i&gt;&lt;i&gt;re-fetched&nbsp;fully&nbsp;in&nbsp;older&nbsp;Squid.&lt;/i&gt;&lt;i&gt;<br>
&lt;/i&gt;&lt;i&gt;NP&nbsp;2:&nbsp;The&nbsp;Vary&nbsp;header&nbsp;indicates&nbsp;that&nbsp;every&nbsp;person&nbsp;logged&nbsp;in&nbsp;gets&nbsp;a&lt;br&gt;&lt;/i&gt;&lt;i&gt;differently&nbsp;cached&nbsp;response&nbsp;based&nbsp;on&nbsp;how&nbsp;their&nbsp;credentials&nbsp;are&nbsp;hashed&nbsp;on&lt;br&gt;&lt;/i&gt;&lt;i&gt;each&nbsp;request&nbsp;(in&nbsp;Authorization&nbsp;tokens).&nbsp;So&nbsp;caching&nbsp;these&nbsp;objects&nbsp;will&lt;br&gt;&lt;/i&gt;&lt;i&gt;not&nbsp;help&nbsp;much&nbsp;with&nbsp;many&nbsp;developers&nbsp;involved.&nbsp;It&nbsp;will&nbsp;be&nbsp;of&nbsp;most&nbsp;help&nbsp;for&lt;br&gt;&lt;/i&gt;&lt;i&gt;the&nbsp;anonymous&nbsp;visitors&nbsp;where&nbsp;username&nbsp;is&nbsp;always&nbsp;a&nbsp;generic&nbsp;NIL&nbsp;value.&lt;/i&gt;&lt;i&gt;<br>
&lt;/i&gt;&lt;i&gt;HTH&lt;br&gt;&lt;/i&gt;&lt;i&gt;Amos&lt;/i&gt;&lt;/blockquote&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
