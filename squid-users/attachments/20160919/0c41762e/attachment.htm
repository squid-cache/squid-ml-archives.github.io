<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hello,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;using&nbsp;squid&nbsp;3.5.12(detailed&nbsp;version&nbsp;info&nbsp;is&nbsp;below)&nbsp;on&nbsp;Ubuntu&nbsp;16.04.1&nbsp;LTS&nbsp;server.&nbsp;My&nbsp;squid&nbsp;config&nbsp;is&nbsp;at,&nbsp;&lt;a&nbsp;href=&quot;http://pastebin.com/raw/b8RZ67u9&quot;&gt;http://pastebin.com/raw/&lt;wbr&gt;b8RZ67u9&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;configured&nbsp;squid&nbsp;as&nbsp;intercept&nbsp;proxy&nbsp;bumping&nbsp;all&nbsp;SSL&nbsp;https&nbsp;connections.&nbsp;Setup&nbsp;is&nbsp;working&nbsp;fine&nbsp;for&nbsp;many&nbsp;things&nbsp;like&nbsp;browsing,&lt;/div&gt;&lt;div&gt;even&nbsp;on&nbsp;command&nbsp;line&nbsp;like&nbsp;wget&nbsp;i&nbsp;can&nbsp;download&nbsp;via&nbsp;https&nbsp;as&nbsp;i&nbsp;have&nbsp;installed&nbsp;root&nbsp;certificate&nbsp;within&nbsp;my&nbsp;client&nbsp;os.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;issue&nbsp;is&nbsp;whenever&nbsp;i&nbsp;try&nbsp;to&nbsp;add&nbsp;extra&nbsp;repository&nbsp;via&nbsp;command,&nbsp;i.e.&lt;/div&gt;&lt;div&gt;sudo&nbsp;add-apt-repository&nbsp;ppa:ondrej/php&lt;/div&gt;&lt;div&gt;command&nbsp;fails&nbsp;with&nbsp;output&nbsp;&quot;Cannot&nbsp;add&nbsp;PPA:&nbsp;&#39;ppa:~ondrej/ubuntu/php&#39;.&lt;wbr&gt;ERROR:&nbsp;&#39;~ondrej&#39;&nbsp;user&nbsp;or&nbsp;team&nbsp;does&nbsp;not&nbsp;exist.&quot;&nbsp;and&nbsp;in&nbsp;squid&#39;s&nbsp;cache&nbsp;and&nbsp;access.log&nbsp;following&nbsp;entries&nbsp;can&nbsp;be&nbsp;located&nbsp;for&nbsp;this&nbsp;request,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;==&gt;&nbsp;/var/log/squid/access.log&nbsp;&lt;==&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;1474302162.378&nbsp; &nbsp; 439&nbsp;192.168.1.66&nbsp;TAG_NONE/200&nbsp;0&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://91.189.89.223:443&quot;&gt;91.189.89.223:443&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://91.189.89.223&quot;&gt;91.189.89.223&lt;/a&gt;&nbsp;-&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;==&gt;&nbsp;/var/log/squid/cache.log&nbsp;&lt;==&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;2016/09/19&nbsp;21:52:42&nbsp;kid1|&nbsp;Error&nbsp;negotiating&nbsp;SSL&nbsp;connection&nbsp;on&nbsp;FD&nbsp;21:&nbsp;error:14094418:SSL&nbsp;routines:ssl3_read_bytes:tlsv1&nbsp;alert&nbsp;unknown&nbsp;ca&nbsp;(1/0)&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;2016/09/19&nbsp;21:52:42&nbsp;kid1|&nbsp;hold&nbsp;write&nbsp;on&nbsp;SSL&nbsp;connection&nbsp;on&nbsp;FD&nbsp;22&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;==&gt;&nbsp;/var/log/squid/access.log&nbsp;&lt;==&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;1474302162.885&nbsp; &nbsp; 403&nbsp;192.168.1.66&nbsp;TAG_NONE/200&nbsp;0&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://91.189.89.223:443&quot;&gt;91.189.89.223:443&lt;/a&gt;&nbsp;-&nbsp;ORIGINAL_DST/&lt;a&nbsp;href=&quot;http://91.189.89.223&quot;&gt;91.189.89.223&lt;/a&gt;&nbsp;-&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;==&gt;&nbsp;/var/log/squid/cache.log&nbsp;&lt;==&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;2016/09/19&nbsp;21:52:42&nbsp;kid1|&nbsp;Error&nbsp;negotiating&nbsp;SSL&nbsp;connection&nbsp;on&nbsp;FD&nbsp;21:&nbsp;error:14094418:SSL&nbsp;routines:ssl3_read_bytes:tlsv1&nbsp;alert&nbsp;unknown&nbsp;ca&nbsp;(1/0)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;in&nbsp;the&nbsp;above&nbsp;output&nbsp;192.168.1.66&nbsp;is&nbsp;my&nbsp;client&nbsp;requesting&nbsp;that&nbsp;request&nbsp;and&nbsp;as&nbsp;you&nbsp;can&nbsp;see&nbsp;in&nbsp;cache.log&nbsp;there&nbsp;is&nbsp;certificate&nbsp;negotiation&nbsp;error.&nbsp;I&nbsp;have&nbsp;tried&nbsp;to&nbsp;fiddle&nbsp;with&nbsp;all&nbsp;options&nbsp;provided&nbsp;at&nbsp;&lt;a&nbsp;href=&quot;http://wiki.squid-cache.org/ConfigExamples/Intercept/SslBumpExplicit&quot;&gt;http://wiki.squid-cache.org/&lt;wbr&gt;ConfigExamples/Intercept/&lt;wbr&gt;SslBumpExplicit&lt;/a&gt;&nbsp;but&nbsp;it&nbsp;seems&nbsp;i&nbsp;am&nbsp;out&nbsp;of&nbsp;luck&nbsp;after&nbsp;almost&nbsp;half&nbsp;of&nbsp;my&nbsp;day&nbsp;battling&nbsp;this&nbsp;issue.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Can&nbsp;someone&nbsp;tell&nbsp;me&nbsp;they&nbsp;are&nbsp;successful&nbsp;with&nbsp;this&nbsp;issue?&nbsp;if&nbsp;so&nbsp;can&nbsp;you&nbsp;share&nbsp;your&nbsp;squid.conf&nbsp;relevant&nbsp;section?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;$&nbsp;squid&nbsp;-v&lt;/div&gt;&lt;div&gt;Squid&nbsp;Cache:&nbsp;Version&nbsp;3.5.12&lt;/div&gt;&lt;div&gt;Service&nbsp;Name:&nbsp;squid&lt;/div&gt;&lt;div&gt;Ubuntu&nbsp;linux&lt;/div&gt;&lt;div&gt;configure&nbsp;options:&nbsp; &#39;--build=x86_64-linux-gnu&#39;&nbsp;&#39;--prefix=/usr&#39;&nbsp;&#39;--includedir=${prefix}/&lt;wbr&gt;include&#39;&nbsp;&#39;--mandir=${prefix}/share/man&#39;&nbsp;&#39;--infodir=${prefix}/share/&lt;wbr&gt;info&#39;&nbsp;&#39;--sysconfdir=/etc&#39;&nbsp;&#39;--localstatedir=/var&#39;&nbsp;&#39;--libexecdir=${prefix}/lib/&lt;wbr&gt;squid3&#39;&nbsp;&#39;--srcdir=.&#39;&nbsp;&#39;--disable-maintainer-mode&#39;&nbsp;&#39;--disable-dependency-&lt;wbr&gt;tracking&#39;&nbsp;&#39;--disable-silent-rules&#39;&nbsp;&#39;BUILDCXXFLAGS=-g&nbsp;-O2&nbsp;-fPIE&nbsp;-fstack-protector-strong&nbsp;-Wformat&nbsp;-Werror=format-security&nbsp;-Wl,-Bsymbolic-functions&nbsp;-fPIE&nbsp;-pie&nbsp;-Wl,-z,relro&nbsp;-Wl,-z,now&#39;&nbsp;&#39;--datadir=/usr/share/squid&#39;&nbsp;&#39;--sysconfdir=/etc/squid&#39;&nbsp;&#39;--libexecdir=/usr/lib/squid&#39;&nbsp;&#39;--mandir=/usr/share/man&#39;&nbsp;&#39;--with-openssl&#39;&nbsp;&#39;--enable-ssl-crtd&#39;&nbsp;&#39;--enable-inline&#39;&nbsp;&#39;--disable-arch-native&#39;&nbsp;&#39;--enable-async-io=8&#39;&nbsp;&#39;--enable-storeio=ufs,aufs,&lt;wbr&gt;diskd,rock&#39;&nbsp;&#39;--enable-removal-policies=&lt;wbr&gt;lru,heap&#39;&nbsp;&#39;--enable-delay-pools&#39;&nbsp;&#39;--enable-cache-digests&#39;&nbsp;&#39;--enable-icap-client&#39;&nbsp;&#39;--enable-follow-x-forwarded-&lt;wbr&gt;for&#39;&nbsp;&#39;--enable-auth-basic=DB,fake,&lt;wbr&gt;getpwnam,LDAP,NCSA,NIS,PAM,&lt;wbr&gt;POP3,RADIUS,SASL,SMB&#39;&nbsp;&#39;--enable-auth-digest=file,&lt;wbr&gt;LDAP&#39;&nbsp;&#39;--enable-auth-negotiate=&lt;wbr&gt;kerberos,wrapper&#39;&nbsp;&#39;--enable-auth-ntlm=fake,smb_&lt;wbr&gt;lm&#39;&nbsp;&#39;--enable-external-acl-&lt;wbr&gt;helpers=file_userip,kerberos_&lt;wbr&gt;ldap_group,LDAP_group,session,&lt;wbr&gt;SQL_session,unix_group,wbinfo_&lt;wbr&gt;group&#39;&nbsp;&#39;--enable-url-rewrite-helpers=&lt;wbr&gt;fake&#39;&nbsp;&#39;--enable-eui&#39;&nbsp;&#39;--enable-esi&#39;&nbsp;&#39;--enable-icmp&#39;&nbsp;&#39;--enable-zph-qos&#39;&nbsp;&#39;--enable-ecap&#39;&nbsp;&#39;--disable-translation&#39;&nbsp;&#39;--with-swapdir=/var/spool/&lt;wbr&gt;squid&#39;&nbsp;&#39;--with-logdir=/var/log/squid&#39;&nbsp;&#39;--with-pidfile=/var/run/&lt;wbr&gt;squid.pid&#39;&nbsp;&#39;--with-filedescriptors=65536&#39;&nbsp;&#39;--with-large-files&#39;&nbsp;&#39;--with-default-user=proxy&#39;&nbsp;&#39;--enable-build-info=Ubuntu&nbsp;linux&#39;&nbsp;&#39;--enable-linux-netfilter&#39;&nbsp;&#39;build_alias=x86_64-linux-gnu&#39;&nbsp;&#39;CFLAGS=-g&nbsp;-O2&nbsp;-fPIE&nbsp;-fstack-protector-strong&nbsp;-Wformat&nbsp;-Werror=format-security&nbsp;-Wall&#39;&nbsp;&#39;LDFLAGS=-Wl,-Bsymbolic-&lt;wbr&gt;functions&nbsp;-fPIE&nbsp;-pie&nbsp;-Wl,-z,relro&nbsp;-Wl,-z,now&#39;&nbsp;&#39;CPPFLAGS=-Wdate-time&nbsp;-D_FORTIFY_SOURCE=2&#39;&nbsp;&#39;CXXFLAGS=-g&nbsp;-O2&nbsp;-fPIE&nbsp;-fstack-protector-strong&nbsp;-Wformat&nbsp;-Werror=format-security&#39;&lt;/div&gt;<br>
&lt;/div&gt;<br>

</tt>
