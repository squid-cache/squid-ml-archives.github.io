<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Hello&lt;br&gt;&lt;br&gt;I&#39;ve&nbsp;setup&nbsp;in&nbsp;Squid&nbsp;3.5.21&nbsp;on&nbsp;my&nbsp;gateway&nbsp;:&nbsp;ftp_port&nbsp;&lt;a&nbsp;href=&quot;http://10.0.0.1:2121&quot;&gt;10.0.0.1:2121&lt;/a&gt;&nbsp;intercept&nbsp;and&nbsp;create&nbsp;nat&nbsp;rule&nbsp;to&nbsp;redirect&nbsp;from&nbsp;port&nbsp;21&nbsp;to&nbsp;2121&nbsp;for&nbsp;client&nbsp;source&nbsp;address&nbsp;(for&nbsp;example&nbsp;10.0.0.10)&lt;br&gt;&lt;br&gt;&lt;/div&gt;Then&nbsp;trying&nbsp;to&nbsp;go&nbsp;through&nbsp;browser&nbsp;to&nbsp;&lt;a&nbsp;href=&quot;ftp://ftp.intel.com&quot;&gt;ftp://ftp.intel.com&lt;/a&gt;&nbsp;from&nbsp;client&nbsp;10.0.0.10&lt;br&gt;&lt;br&gt;&lt;/div&gt;And&nbsp;in&nbsp;browser&nbsp;got&nbsp;Password&nbsp;prompt&nbsp;window:&nbsp;i&nbsp;set&nbsp;user&nbsp;anonymous&nbsp;and&nbsp;password&nbsp;a@a&nbsp;&lt;br&gt;&lt;br&gt;&lt;/div&gt;Then&nbsp;got&nbsp;error&nbsp;message&nbsp;501&nbsp;Missing&nbsp;Host.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;In&nbsp;squid&nbsp;log&nbsp;I&nbsp;see:&lt;br&gt;&lt;br&gt;2016/10/03&nbsp;15:34:24.504&nbsp;kid1|&nbsp;20,2|&nbsp;store.cc(949)&nbsp;checkCachable:&nbsp;StoreEntry::checkCachable:&nbsp;NO:&nbsp;not&nbsp;cachable&lt;br&gt;2016/10/03&nbsp;15:34:24.508&nbsp;kid1|&nbsp;33,2|&nbsp;client_side.cc(816)&nbsp;swanSong:&nbsp;local=&lt;a&nbsp;href=&quot;http://10.0.0.1:2121&quot;&gt;10.0.0.1:2121&lt;/a&gt;&nbsp;remote=&lt;a&nbsp;href=&quot;http://10.0.0.10:37016&quot;&gt;10.0.0.10:37016&lt;/a&gt;&nbsp;flags=1&lt;br&gt;2016/10/03&nbsp;15:34:24.508&nbsp;kid1|&nbsp;5,2|&nbsp;TcpAcceptor.cc(220)&nbsp;doAccept:&nbsp;New&nbsp;connection&nbsp;on&nbsp;FD&nbsp;10&lt;br&gt;2016/10/03&nbsp;15:34:24.508&nbsp;kid1|&nbsp;5,2|&nbsp;TcpAcceptor.cc(295)&nbsp;acceptNext:&nbsp;connection&nbsp;on&nbsp;local=&lt;a&nbsp;href=&quot;http://0.0.0.0:2121&quot;&gt;0.0.0.0:2121&lt;/a&gt;&nbsp;remote=[::]&nbsp;FD&nbsp;10&nbsp;flags=9&lt;br&gt;2016/10/03&nbsp;15:34:29.534&nbsp;kid1|&nbsp;33,2|&nbsp;FtpServer.cc(699)&nbsp;parseOneRequest:&nbsp;&gt;&gt;ftp&nbsp;USER&nbsp;anonymous&lt;br&gt;2016/10/03&nbsp;15:34:29.534&nbsp;kid1|&nbsp;20,2|&nbsp;store.cc(949)&nbsp;checkCachable:&nbsp;StoreEntry::checkCachable:&nbsp;NO:&nbsp;not&nbsp;cachable&lt;br&gt;2016/10/03&nbsp;15:34:29.534&nbsp;kid1|&nbsp;20,2|&nbsp;store.cc(949)&nbsp;checkCachable:&nbsp;StoreEntry::checkCachable:&nbsp;NO:&nbsp;not&nbsp;cachable&lt;br&gt;2016/10/03&nbsp;15:34:29.534&nbsp;kid1|&nbsp;20,2|&nbsp;store.cc(949)&nbsp;checkCachable:&nbsp;StoreEntry::checkCachable:&nbsp;NO:&nbsp;not&nbsp;cachable&lt;br&gt;2016/10/03&nbsp;15:34:29.534&nbsp;kid1|&nbsp;88,2|&nbsp;client_side_reply.cc(2005)&nbsp;processReplyAccessResult:&nbsp;The&nbsp;reply&nbsp;for&nbsp;NONE&nbsp;error:ftp-missing-host&nbsp;is&nbsp;ALLOWED,&nbsp;because&nbsp;it&nbsp;matched&nbsp;NO&nbsp;ACL&#39;s&lt;br&gt;2016/10/03&nbsp;15:34:29.534&nbsp;kid1|&nbsp;9,2|&nbsp;FtpServer.cc(1208)&nbsp;writeForwardedReplyAndCall:&nbsp;FTP&nbsp;Client&nbsp;local=&lt;a&nbsp;href=&quot;http://10.0.0.254:2121&quot;&gt;10.0.0.254:2121&lt;/a&gt;&nbsp;remote=&lt;a&nbsp;href=&quot;http://10.0.0.10:37018&quot;&gt;10.0.0.10:37018&lt;/a&gt;&nbsp;FD&nbsp;13&nbsp;flags=1&lt;br&gt;2016/10/03&nbsp;15:34:29.534&nbsp;kid1|&nbsp;9,2|&nbsp;FtpServer.cc(1210)&nbsp;writeForwardedReplyAndCall:&nbsp;FTP&nbsp;Client&nbsp;REPLY:&lt;br&gt;---------&lt;br&gt;501&nbsp;Missing&nbsp;host&lt;br&gt;&lt;br&gt;----------&lt;br&gt;2016/10/03&nbsp;15:34:29.534&nbsp;kid1|&nbsp;20,2|&nbsp;store.cc(949)&nbsp;checkCachable:&nbsp;StoreEntry::checkCachable:&nbsp;NO:&nbsp;not&nbsp;cachable&lt;br&gt;2016/10/03&nbsp;15:34:29.574&nbsp;kid1|&nbsp;33,2|&nbsp;client_side.cc(816)&nbsp;swanSong:&nbsp;local=&lt;a&nbsp;href=&quot;http://10.0.0.1:2121&quot;&gt;10.0.0.1:2121&lt;/a&gt;&nbsp;remote=&lt;a&nbsp;href=&quot;http://10.0.0.10:37018&quot;&gt;10.0.0.10:37018&lt;/a&gt;&nbsp;flags=1&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;Though&nbsp;I&nbsp;can&nbsp;not&nbsp;use&nbsp;native&nbsp;ftp&nbsp;relay&nbsp;to&nbsp;go&nbsp;to&nbsp;ftp&nbsp;servers.&lt;br&gt;&lt;br&gt;&lt;/div&gt;Please,&nbsp;could&nbsp;you&nbsp;help&nbsp;?&lt;br&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
