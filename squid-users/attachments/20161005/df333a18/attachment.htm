<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;Hey&nbsp;Amos,&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;oh,&nbsp;i&nbsp;actually&nbsp;built&nbsp;archive&nbsp;mode&nbsp;squid&nbsp;by&nbsp;getting&nbsp;help&nbsp;at&nbsp;here,&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;a&nbsp;href=&quot;http://bugs.squid-cache.org/show_bug.cgi?id=4604&quot;&nbsp;target=&quot;_blank&quot;&gt;http://bugs.squid-cache.org/&lt;wbr&gt;show_bug.cgi?id=4604&lt;/a&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;I&nbsp;was&nbsp;thinking&nbsp;if&nbsp;we&nbsp;have&nbsp;option&nbsp;vary_mode&nbsp;just&nbsp;like&nbsp;archive&nbsp;mode&nbsp;to&nbsp;set&nbsp;it&nbsp;for&nbsp;particular&nbsp;domain&nbsp;like,&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;acl&nbsp;dlsslgoogle&nbsp;srcdomain&nbsp;&lt;a&nbsp;href=&quot;http://dl-ssl.google.com&quot;&nbsp;target=&quot;_blank&quot;&gt;dl-ssl.google.com&lt;/a&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;vary_mode&nbsp;allow&nbsp;dlsslgoogle&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;Above&nbsp;could&nbsp;work&nbsp;one&nbsp;of&nbsp;the&nbsp;following&nbsp;way,&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;1)&nbsp;We&nbsp;replace&nbsp;Vary&nbsp;header&nbsp;for&nbsp;srcdomain&nbsp;to&nbsp;some&nbsp;suitable&nbsp;option&nbsp;so&nbsp;request&nbsp;can&nbsp;be&nbsp;cached&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;2)&nbsp;This&nbsp;will&nbsp;remove&nbsp;vary&nbsp;header&nbsp;totally&nbsp;for&nbsp;the&nbsp;above&nbsp;domain.&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;3)&nbsp;above&nbsp;will&nbsp;use&nbsp;matching&nbsp;squid&nbsp;refresh&nbsp;pattern&nbsp;for&nbsp;srcdomain&nbsp;and&nbsp;only&nbsp;cache&nbsp;requests&nbsp;forÂ &lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;particular&nbsp;type&nbsp;of&nbsp;file&nbsp;given&nbsp;in&nbsp;refresh_pattern&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;What&nbsp;do&nbsp;you&nbsp;think&nbsp;would&nbsp;be&nbsp;easiar&nbsp;?&nbsp;and&nbsp;how&nbsp;do&nbsp;i&nbsp;work&nbsp;on&nbsp;squid&nbsp;source&nbsp;to&nbsp;do&nbsp;above?&nbsp;any&nbsp;hint&nbsp;is&nbsp;appreciated.&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;One&nbsp;more&nbsp;thing&nbsp;can&nbsp;you&nbsp;tell&nbsp;me&nbsp;if&nbsp;we&nbsp;are&nbsp;already&nbsp;violating&nbsp;http&nbsp;via&nbsp;options&nbsp;like&nbsp;nocache,&nbsp;ignore-no-store&nbsp;ignore-private&nbsp;ignore-reload,&nbsp;why&nbsp;can&#39;t&nbsp;we&nbsp;do&nbsp;the&nbsp;same&nbsp;for&nbsp;Vary&nbsp;header&nbsp;?&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;It&nbsp;seems&nbsp;servers&nbsp;that&nbsp;are&nbsp;notorious&nbsp;have&nbsp;Vary&nbsp;*&nbsp;header&nbsp;as&nbsp;well&nbsp;as&nbsp;at&nbsp;times&nbsp;(github)&nbsp;no&nbsp;Last&nbsp;modified&nbsp;header&nbsp;and&nbsp;these&nbsp;are&nbsp;the&nbsp;biggest&nbsp;bandwidth&nbsp;eaters.&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;Thanks.&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;Hardik&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
