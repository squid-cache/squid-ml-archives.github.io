<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hey&nbsp;Alex,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;totally&nbsp;get&nbsp;that&nbsp;Vary&nbsp;code&nbsp;is&nbsp;different,&nbsp;I&nbsp;have&nbsp;been&nbsp;trying&nbsp;to&nbsp;understand&nbsp;squid&nbsp;code&nbsp;for&nbsp;last&nbsp;few&nbsp;days&nbsp;although&nbsp;my&nbsp;C,&nbsp;C++&nbsp;skills&nbsp;are&nbsp;very&nbsp;limited&nbsp;I&nbsp;am&nbsp;able&nbsp;to&nbsp;understand&nbsp;bits&nbsp;and&nbsp;pieces&nbsp;here&nbsp;and&nbsp;there.&nbsp;I&nbsp;have&nbsp;also&nbsp;read&nbsp;HTTP&nbsp;1.1&nbsp;specs&nbsp;for&nbsp;cache&nbsp;(&nbsp;&lt;a&nbsp;href=&quot;https://tools.ietf.org/html/rfc2616#section-13&quot;&gt;https://tools.ietf.org/html/rfc2616#section-13&lt;/a&gt;&nbsp;)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;After&nbsp;doing&nbsp;fair&nbsp;bit&nbsp;of&nbsp;research&nbsp;I&nbsp;believe&nbsp;we&nbsp;need&nbsp;to&nbsp;two&nbsp;things, &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1)&nbsp;start&nbsp;a&nbsp;campaign&nbsp;to&nbsp;convince&nbsp;webmasters&nbsp;to&nbsp;update&nbsp;their&nbsp;server&nbsp;configs,&nbsp; for&nbsp;that&nbsp;to&nbsp;happen&nbsp;I&nbsp;am&nbsp;doing&nbsp;my&nbsp;research&nbsp;on&nbsp;apache&nbsp;and&nbsp;Nginx&nbsp;servers&nbsp;on&nbsp;how&nbsp;to&nbsp;implement&nbsp;(&nbsp;HTTP&nbsp;1.1&nbsp;spec&nbsp;cache&nbsp;guidelines&nbsp;)&nbsp;and&nbsp;will&nbsp;provide&nbsp;them&nbsp;copy&nbsp;paste&nbsp;configs&nbsp;for&nbsp;all&nbsp;requests&nbsp;or&nbsp;for&nbsp;the&nbsp;file&nbsp;types&nbsp;like&nbsp;deb,apk,rpm,exe(binary&nbsp;files),etc...&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;documenting&nbsp;that&nbsp;here,&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;https://hardikdangar.github.io/thecacheproject/&quot;&gt;https://hardikdangar.github.io/thecacheproject/&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;and&nbsp;once&nbsp;I&nbsp;finish&nbsp;everything&nbsp;I&nbsp;will&nbsp;post&nbsp;everything&nbsp;at&nbsp;the&nbsp;squid-dev list&nbsp;here&nbsp;so&nbsp;all&nbsp;of&nbsp;you&nbsp;can&nbsp;look&nbsp;at&nbsp;it&nbsp;and&nbsp;if&nbsp;you&nbsp;guys&nbsp;approve&nbsp;it,&nbsp;I&nbsp;will&nbsp;personally&nbsp;try&nbsp;to&nbsp;contact&nbsp;the&nbsp;big&nbsp;providers&nbsp;and&nbsp;send&nbsp;them&nbsp;above&nbsp;page&nbsp;with&nbsp;solutions.&nbsp;and&nbsp;will&nbsp;ask&nbsp;community&nbsp;support&nbsp;and&nbsp;will&nbsp;publish&nbsp;it&nbsp;to&nbsp;twitter&nbsp;and&nbsp;other&nbsp;social&nbsp;sites&nbsp;to&nbsp;get&nbsp;support.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;2)&nbsp;I&nbsp;want&nbsp;to&nbsp;build&nbsp;a&nbsp;module&nbsp;which&nbsp;will&nbsp;first&nbsp;handle&nbsp;Vary:&nbsp;*&nbsp;requests&nbsp;and&nbsp;convert&nbsp;it&nbsp;into&nbsp;Vary:&nbsp;Accept-Encoding&nbsp;or&nbsp;something&nbsp;similar&nbsp;but&nbsp;only&nbsp;for&nbsp;the&nbsp;ACL&#39;s&nbsp;specified&nbsp;by&nbsp;cache&nbsp;administrator.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Next,&nbsp;there&nbsp;are&nbsp;use&nbsp;cases&nbsp;like&nbsp;GitHub which&nbsp;are&nbsp;very&nbsp;difficult&nbsp;to&nbsp;handle&nbsp;but&nbsp;I&nbsp;feel&nbsp;there&nbsp;is&nbsp;a&nbsp;way&nbsp;we&nbsp;can&nbsp;handle&nbsp;those&nbsp;use&nbsp;cases&nbsp;so&nbsp;I&nbsp;will&nbsp;build&nbsp;ACL&nbsp;for&nbsp;those.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;For&nbsp;this,&nbsp;i&nbsp;am&nbsp;trying&nbsp;to&nbsp;understand&nbsp;squid&nbsp;code,&nbsp;After&nbsp;looking&nbsp;at&nbsp;dev&nbsp;docs,&nbsp;I&nbsp;understand&nbsp;how&nbsp;the&nbsp;request&nbsp;is&nbsp;handled&nbsp;at clientBeginRequest.&nbsp;But&nbsp;I&nbsp;am&nbsp;very&nbsp;confused&nbsp;at&nbsp;how&nbsp;squid&nbsp;handles&nbsp;the&nbsp;response. &nbsp;I&nbsp;know&nbsp;client_side_reply.cc&nbsp;is&nbsp;the&nbsp;file&nbsp;where&nbsp;the&nbsp;response&nbsp;is&nbsp;handled&nbsp;but&nbsp;I&nbsp;am&nbsp;not&nbsp;sure&nbsp;how StoreEntry::checkCachable()&nbsp;method&nbsp;in&nbsp;store.cc&nbsp;is&nbsp;called&nbsp;before&nbsp;it&nbsp;as&nbsp;that&nbsp;is&nbsp;the&nbsp;method&nbsp;i&nbsp;get&nbsp;in&nbsp;squid&nbsp;logs&nbsp;when&nbsp;the&nbsp;cache&nbsp;is&nbsp;denied.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Basically,&nbsp;I&nbsp;need&nbsp;to&nbsp;know&nbsp;how&nbsp;to&nbsp;debug&nbsp;line&nbsp;by&nbsp;line&nbsp;source&nbsp;for&nbsp;squid.&nbsp;Right&nbsp;now&nbsp;my&nbsp;method&nbsp;of&nbsp;testing&nbsp;involves&nbsp;building&nbsp;squid&nbsp;and&nbsp;adding&nbsp;debug&nbsp;lines&nbsp;and&nbsp;its&nbsp;very&nbsp;slow&nbsp;process&nbsp;as&nbsp;it&nbsp;takes&nbsp;time&nbsp;every&nbsp;time.&nbsp;Can&nbsp;you&nbsp;help&nbsp;me&nbsp;with&nbsp;this&nbsp;?&nbsp;is&nbsp;there&nbsp;a&nbsp;way&nbsp;i&nbsp;could&nbsp;send&nbsp;a&nbsp;request&nbsp;directly&nbsp;to&nbsp;squid&nbsp;source&nbsp;file&nbsp;i.e&nbsp;debug&nbsp;source&nbsp;code&nbsp;line&nbsp;by&nbsp;line&nbsp;?&nbsp;If&nbsp;so&nbsp;what&nbsp;are&nbsp;the&nbsp;tools&nbsp;required&nbsp;and&nbsp;how&nbsp;to&nbsp;set&nbsp;it&nbsp;up&nbsp;?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Again,&nbsp;I&nbsp;am&nbsp;sorry&nbsp;if&nbsp;i&nbsp;am&nbsp;asking&nbsp;too&nbsp;much&nbsp;but&nbsp;my&nbsp;C&nbsp;experience&nbsp;is&nbsp;very&nbsp;limited&nbsp;and&nbsp;i&nbsp;feel&nbsp;like&nbsp;i&nbsp;am&nbsp;asking&nbsp;very&nbsp;naive&nbsp;questions&nbsp;but&nbsp;these&nbsp;are&nbsp;very&nbsp;difficult&nbsp;for&nbsp;me&nbsp;at&nbsp;this&nbsp;stage&nbsp;and&nbsp;i&nbsp;really&nbsp;appreciate&nbsp;all&nbsp;of&nbsp;the&nbsp;squid&nbsp;dev teams&nbsp;who&nbsp;is&nbsp;been&nbsp;answering&nbsp;all&nbsp;of&nbsp;my&nbsp;questions.&nbsp;Thank&nbsp;you&nbsp;very&nbsp;much&nbsp;for&nbsp;that.&lt;/div&gt;&lt;div&gt;--------&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;just&nbsp;want&nbsp;a&nbsp;better&nbsp;cache&nbsp;support&nbsp;for&nbsp;squid&nbsp;and&nbsp;modern&nbsp;day&nbsp;use&nbsp;cases.&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;Oct&nbsp;6,&nbsp;2016&nbsp;at&nbsp;11:25&nbsp;PM,&nbsp;Alex&nbsp;Rousskov&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:rousskov@measurement-factory.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rousskov@measurement-factory.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&gt;On&nbsp;10/06/2016&nbsp;11:14&nbsp;AM,&nbsp;Linda&nbsp;A.&nbsp;Walsh&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;Alex&nbsp;Rousskov&nbsp;wrote:&lt;br&gt;<br>
&gt;&gt;&nbsp;We&nbsp;can,&nbsp;but&nbsp;ignoring&nbsp;Vary&nbsp;requires&nbsp;more/different&nbsp;work&nbsp;than&nbsp;adding&lt;br&gt;<br>
&gt;&gt;&nbsp;another&nbsp;refresh_pattern&nbsp;option.&nbsp;Vary&nbsp;is&nbsp;not&nbsp;a&nbsp;refresh&nbsp;mechanism&nbsp;so&lt;br&gt;<br>
&gt;&gt;&nbsp;different&nbsp;code&nbsp;areas&nbsp;need&nbsp;to&nbsp;be&nbsp;modified&nbsp;to&nbsp;ignore&nbsp;(but&nbsp;still&nbsp;forward!)&lt;br&gt;<br>
&gt;&gt;&nbsp;Vary.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;&quot;&gt;&gt; &nbsp; &nbsp;I&nbsp;can&#39;t&nbsp;say&nbsp;for&nbsp;certain,&nbsp;but&nbsp;I&#39;d&nbsp;give&nbsp;it&nbsp;a&nbsp;75%&nbsp;shot&nbsp;of&nbsp;it&nbsp;being&lt;br&gt;<br>
&gt;&nbsp;used&nbsp;as&nbsp;a&nbsp;forced-refresh&nbsp;pattern&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;The&nbsp;[ab]use&nbsp;cases&nbsp;do&nbsp;not&nbsp;matter&nbsp;here&nbsp;--&nbsp;the&nbsp;_code_&nbsp;handling&nbsp;Vary&nbsp;is&nbsp;very&lt;br&gt;<br>
different&nbsp;from&nbsp;the&nbsp;code&nbsp;handling&nbsp;refresh&nbsp;logic.&nbsp;That&nbsp;difference&nbsp;is&lt;br&gt;<br>
natural&nbsp;and&nbsp;unavoidable&nbsp;because&nbsp;the&nbsp;two&nbsp;protocol&nbsp;mechanisms&nbsp;are&nbsp;very&lt;br&gt;<br>
different,&nbsp;even&nbsp;if&nbsp;they&nbsp;both&nbsp;can&nbsp;be&nbsp;and&nbsp;are&nbsp;used&nbsp;to&nbsp;create&nbsp;the&nbsp;same&nbsp;effect.&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
Alex.&lt;br&gt;<br>
&lt;/font&gt;&lt;/span&gt;&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;<br>
______________________________&lt;wbr&gt;_________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.&lt;wbr&gt;org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/&lt;wbr&gt;listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
