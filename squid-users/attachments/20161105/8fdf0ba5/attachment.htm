<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;Hi&nbsp;All,&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;goal&nbsp;is&nbsp;to&nbsp;configure&nbsp;a&nbsp;reverse&nbsp;proxy&nbsp;for&nbsp;Outlook&nbsp;Anywhere&nbsp;clients&nbsp;using&nbsp;squid.&nbsp;&lt;br&gt;&lt;a&nbsp;href=&quot;http://wiki.squid-cache.org/ConfigExamples/Reverse/ExchangeRpc&quot;&gt;http://wiki.squid-cache.org/ConfigExamples/Reverse/ExchangeRpc&lt;/a&gt;&lt;br&gt;&lt;br&gt;This&nbsp;will&nbsp;replace&nbsp;existing&nbsp;TMG&nbsp;that&nbsp;my&nbsp;client&nbsp;is&nbsp;currently&nbsp;using.&lt;br&gt;&lt;br&gt;However,&nbsp;when&nbsp;I&nbsp;run&nbsp;squid&nbsp;I&nbsp;get&nbsp;an&nbsp;error &nbsp;&quot;No&nbsp;valid&nbsp;signing&nbsp;SSL&nbsp;certificate&nbsp;configured&nbsp;for&nbsp;HTTPS_port&quot;.&lt;br&gt;&lt;br&gt;Before,&nbsp;I&nbsp;was&nbsp;able&nbsp;to&nbsp;get&nbsp;OWA&nbsp;and&nbsp;HTTPS&nbsp;traffic&nbsp;using&nbsp;NGINX&nbsp;as&nbsp;reverse&nbsp;proxy&nbsp;but&nbsp;was&nbsp;getting&nbsp;connection&nbsp;errors&nbsp;when&nbsp;trying&nbsp;to&nbsp;use&nbsp;OutlookAnywhere.&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;now&nbsp;I&nbsp;have&nbsp;been&nbsp;testing&nbsp;Squid&nbsp;but&nbsp;cannot&nbsp;get&nbsp;past&nbsp;the&nbsp;certificate&nbsp;installation&nbsp;which&nbsp;was&nbsp;painless&nbsp;under&nbsp;Nginx.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;Configuration&nbsp;is&nbsp;based&nbsp;on&nbsp;an&nbsp;article&nbsp;below:&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;https://sysadminfixes.wordpress.com/2013/01/25/exchanging-squids/&quot;&gt;https://sysadminfixes.wordpress.com/2013/01/25/exchanging-squids/&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;I&nbsp;have&nbsp;been&nbsp;trying&nbsp;for&nbsp;several&nbsp;days&nbsp;now&nbsp;without&nbsp;much&nbsp;success&nbsp;to&nbsp;configure&nbsp;SSL&nbsp;certificate&nbsp;on&nbsp;my&nbsp;squid&nbsp;server.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;Getting&nbsp;the&nbsp;&quot;&nbsp;...no&nbsp;valid&nbsp;signing&nbsp;certificate&quot;&nbsp;every&nbsp;time.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;found&nbsp;few&nbsp;posts&nbsp;saying&nbsp;that&nbsp;it&nbsp;was&nbsp;not&nbsp;possible&nbsp;to&nbsp;use&nbsp;SSL&nbsp;certificates&nbsp;signed&nbsp;by&nbsp;public&nbsp;CA&nbsp;and&nbsp;self-signed&nbsp;certs&nbsp;must&nbsp;be&nbsp;used.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Can&nbsp;anyone&nbsp;confirm&nbsp;if&nbsp;this&nbsp;is&nbsp;a&nbsp;case?&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;Logs&nbsp;and&nbsp;config&nbsp;files&nbsp;below.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;My&nbsp;domain&nbsp;name&nbsp;has&nbsp;been&nbsp;replaced&nbsp;with&nbsp;&lt;i&gt;&lt;a&nbsp;href=&quot;http://contoso.com&quot;&gt;contoso.com&lt;/a&gt;&lt;/i&gt;&nbsp;for&nbsp;confidentiality&nbsp;sake.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;squid&nbsp;server-&nbsp;srv-&lt;i&gt;&lt;a&nbsp;href=&quot;http://squid.contoso.com&quot;&gt;squid.contoso.com&lt;/a&gt;&lt;/i&gt;&nbsp;/&nbsp;3.3.3.201&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;uname&nbsp;-a&lt;br&gt;Linux&nbsp;srv-squid&nbsp;4.4.0-31-generic&nbsp;#50-Ubuntu&nbsp;SMP&nbsp;Wed&nbsp;Jul&nbsp;13&nbsp;00:07:12&nbsp;UTC&nbsp;2016&nbsp;x86_64&nbsp;x86_64&nbsp;x86_64&nbsp;GNU/Linux&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;exchange&nbsp;server&nbsp;-&nbsp;&lt;a&nbsp;href=&quot;http://exch.contoso.com&quot;&gt;exch.contoso.com&lt;/a&gt;&nbsp;/&nbsp;10.2.2.30&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;SSL&nbsp;certificate:&lt;br&gt;&lt;/div&gt;&lt;div&gt;obtained&nbsp;from&nbsp;StartSSL&nbsp;for&nbsp;&lt;a&nbsp;href=&quot;http://mail.contoso.com&quot;&gt;mail.contoso.com&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;SQUID.CONF&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;div&gt;####&nbsp;START&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;visible_hostname&nbsp;&lt;a&nbsp;href=&quot;http://mail.contoso.com&quot;&gt;mail.contoso.com&lt;/a&gt;&lt;br&gt;redirect_rewrites_host_header&nbsp;off&lt;br&gt;cache_mem&nbsp;32&nbsp;MB&lt;br&gt;maximum_object_size_in_memory&nbsp;128&nbsp;KB&lt;br&gt;#logformat&nbsp;combined&nbsp;%&gt;a&nbsp;%[ui&nbsp;%[un&nbsp;[%tl]&nbsp;&quot;%rm&nbsp;%ru&nbsp;HTTP/%rv&quot;&nbsp;%&gt;Hs&nbsp;%h&quot;&nbsp;&quot;%{User-Agent}&gt;h&quot;&nbsp;%Ss:%Sh&nbsp;###this&nbsp;causes&nbsp;an&nbsp;error&lt;br&gt;access_log&nbsp;/var/log/squid3/access.log&nbsp;&lt;br&gt;cache_log&nbsp;/var/log/squid3/cache.log&lt;br&gt;cache_store_log&nbsp;none&lt;br&gt;cache_mgr&nbsp;nomail_address_given&lt;br&gt;forwarded_for&nbsp;transparent&lt;br&gt;###&nbsp;ignore_expect_100&nbsp;##&nbsp;not&nbsp;available&nbsp;in&nbsp;version&nbsp;3.5&lt;br&gt;ssl_unclean_shutdown&nbsp;on&lt;br&gt;###&nbsp;The&nbsp;most&nbsp;important&nbsp;line&nbsp;&lt;br&gt; ###&nbsp;&quot;cert&quot;&nbsp;should&nbsp;contain&nbsp;Exchange&nbsp;certificate&nbsp;and&nbsp;key&nbsp;&lt;br&gt; ###&nbsp;&quot;sslproxy_cafile&quot;&nbsp;contains&nbsp;CA&nbsp;of&nbsp;root&nbsp;servers&nbsp;-&nbsp;StartSSL&nbsp;?!&lt;br&gt;https_port&nbsp;&lt;a&nbsp;href=&quot;http://mail.contoso.com:443&quot;&gt;mail.contoso.com:443&lt;/a&gt;&nbsp;accel&nbsp;cert=/home/kk/ssl/cert-mail/mail.contoso.com.pem&nbsp;defaultsite=&lt;a&nbsp;href=&quot;http://mail.contoso.com&quot;&gt;mail.contoso.com&lt;/a&gt;&nbsp;key=/home/kk/ssl/cert-mail/mail.contoso.com.key&lt;br&gt;&lt;br&gt;cache_peer&nbsp;exch.kk1.tech&nbsp;parent&nbsp;443&nbsp;0&nbsp;proxy-only&nbsp;no-digest&nbsp;no-query&nbsp;originserver&nbsp;front-end-https=on&nbsp;login=PASS&nbsp;sslflags=DONT_VERIFY_PEER&nbsp;connection-auth=on&nbsp;name=Exchange&lt;br&gt;&lt;br&gt;acl&nbsp;exch_url&nbsp;url_regex&nbsp;-i&nbsp;&lt;a&nbsp;href=&quot;http://mail.contoso.com/owa&quot;&gt;mail.contoso.com/owa&lt;/a&gt;&lt;br&gt;acl&nbsp;exch_url&nbsp;url_regex&nbsp;-i&nbsp;&lt;a&nbsp;href=&quot;http://mail.contoso.com/microsoft-server-activesync&quot;&gt;mail.contoso.com/microsoft-server-activesync&lt;/a&gt;&lt;br&gt;acl&nbsp;exch_url&nbsp;url_regex&nbsp;-i&nbsp;&lt;a&nbsp;href=&quot;http://mail.contoso.com/rpc&quot;&gt;mail.contoso.com/rpc&lt;/a&gt;&lt;br&gt;&lt;br&gt;cache_peer_access&nbsp;Exchange&nbsp;allow&nbsp;exch_url&lt;br&gt;cache_peer_access&nbsp;Exchange&nbsp;deny&nbsp;all&lt;br&gt;never_direct&nbsp;allow&nbsp;exch_url&lt;br&gt;http_access&nbsp;allow&nbsp;exch_url&lt;br&gt;http_access&nbsp;deny&nbsp;all&lt;br&gt;miss_access&nbsp;allow&nbsp;exch_url&lt;br&gt;miss_access&nbsp;deny&nbsp;all&lt;br&gt;deny_info&nbsp;&lt;a&nbsp;href=&quot;https://mail.contoso.com/owa&quot;&gt;https://mail.contoso.com/owa&lt;/a&gt;&nbsp;all&lt;br&gt;&lt;/div&gt;&lt;div&gt;###END&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;ERROR&lt;br&gt;&lt;/div&gt;&lt;div&gt;cache.log&lt;br&gt;2016/11/05&nbsp;08:52:13|&nbsp;storeDirWriteCleanLogs:&nbsp;Starting...&lt;br&gt;2016/11/05&nbsp;08:52:13|  &nbsp;Finished. &nbsp;Wrote&nbsp;0&nbsp;entries.&lt;br&gt;2016/11/05&nbsp;08:52:13|  &nbsp;Took&nbsp;0.00&nbsp;seconds&nbsp;( &nbsp;0.00&nbsp;entries/sec).&lt;br&gt;FATAL:&nbsp;No&nbsp;valid&nbsp;signing&nbsp;SSL&nbsp;certificate&nbsp;configured&nbsp;for&nbsp;HTTPS_port&nbsp;&lt;a&nbsp;href=&quot;http://3.3.3.201:443&quot;&gt;3.3.3.201:443&lt;/a&gt;&lt;br&gt;Squid&nbsp;Cache&nbsp;(Version&nbsp;3.5.22):&nbsp;Terminated&nbsp;abnormally.&lt;br&gt;CPU&nbsp;Usage:&nbsp;0.004&nbsp;seconds&nbsp;=&nbsp;0.000&nbsp;user&nbsp;+&nbsp;0.004&nbsp;sys&lt;br&gt;Maximum&nbsp;Resident&nbsp;Size:&nbsp;46624&nbsp;KB&lt;br&gt;Page&nbsp;faults&nbsp;with&nbsp;physical&nbsp;i/o:&nbsp;0&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;SQUID&nbsp;-&nbsp;compiled&nbsp;from&nbsp;sources&lt;br&gt;&lt;/div&gt;&lt;div&gt;squid&nbsp;-v&lt;br&gt;&lt;/div&gt;&lt;div&gt;Squid&nbsp;Cache:&nbsp;Version&nbsp;3.5.22&lt;br&gt;Service&nbsp;Name:&nbsp;squid&lt;br&gt;configure&nbsp;options: &nbsp;&#39;--prefix=/usr&#39;&nbsp;&#39;--localstatedir=/var&#39;&nbsp;&#39;--libexecdir=/lib/squid3&#39;&nbsp;&#39;--srcdir=.&#39;&nbsp;&#39;--datadir=/share/squid3&#39;&nbsp;&#39;--sysconfdir=/etc/squid3&#39;&nbsp;&#39;--with-logdir=/var/log&#39;&nbsp;&#39;--with-pidfile=/var/run/squid3.pid&#39;&nbsp;&#39;--enable-inline&#39;&nbsp;&#39;--enable-async-io=8&#39;&nbsp;&#39;--enable-storeio=ufs,aufs,diskd&#39;&nbsp;&#39;--enable-removal-policies=lru,heap&#39;&nbsp;&#39;--enable-delay-pools&#39;&nbsp;&#39;--enable-cache-digests&#39;&nbsp;&#39;--enable-underscores&#39;&nbsp;&#39;--enable-icap-client&#39;&nbsp;&#39;--enable-follow-x-forwarded-for&#39;&nbsp;&#39;--enable-basic-auth-helpers=LDAP,MSNT,NCSA,PAM,SASL,SMB,YP,DB,POP3,getpwnam,squid_radius_auth,multi-domain-NTLM&#39;&nbsp;&#39;--enable-ntlm-auth-helpers=smb_lm,&#39;&nbsp;&#39;--enable-digest-auth-helpers=ldap,password&#39;&nbsp;&#39;--enable-negotiate-auth-helpers=squid_kerb_auth&#39;&nbsp;&#39;--enable-external-acl-helpers=&#39;&nbsp;&#39;--enable-arp-acl&#39;&nbsp;&#39;--enable-esi&#39;&nbsp;&#39;--enable-ssl&#39;&nbsp;&#39;--enable-zph-qos&#39;&nbsp;&#39;--enable-wccpv2&#39;&nbsp;&#39;--disable-translation&#39;&nbsp;&#39;--with-logdir=/var/log/squid3&#39;&nbsp;&#39;--with-filedescriptors=65536&#39;&nbsp;&#39;--with-large-files&#39;&nbsp;&#39;--with-default-user=proxy&#39;&nbsp;&#39;--with-ssl&#39;&nbsp;&#39;--disable-ipv6&#39;&nbsp;&#39;--with-openssl&#39;&nbsp;--enable-ltdl-convenience&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Appreciate&nbsp;any&nbsp;feedback&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Konrad&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
