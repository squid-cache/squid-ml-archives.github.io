<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hello&nbsp;all,&lt;br&gt;Apologies&nbsp;for&nbsp;the&nbsp;possibly&nbsp;incorrect&nbsp;format/posting&nbsp;of&nbsp;this&nbsp;query;&nbsp;I&nbsp;am&nbsp;new&nbsp;to&nbsp;this&nbsp;mode&nbsp;of&nbsp;discussion&nbsp;in&nbsp;relation&nbsp;to&nbsp;software.&lt;br&gt;&lt;br&gt;&lt;p&nbsp;style=&quot;box-sizing:border-box;margin-bottom:16px;color:rgb(51,51,51);font-family:-apple-system,blinkmacsystemfont,&quot;segoe&nbsp;ui&quot;,helvetica,arial,sans-serif,&quot;apple&nbsp;color&nbsp;emoji&quot;,&quot;segoe&nbsp;ui&nbsp;emoji&quot;,&quot;segoe&nbsp;ui&nbsp;symbol&quot;;font-size:14px;margin-top:0px&quot;&gt;I&nbsp;am&nbsp;attempting&nbsp;to&nbsp;use&nbsp;Squid,&nbsp;in&nbsp;combination&nbsp;with&nbsp;storeID&nbsp;rewrite,&nbsp;to&nbsp;redirect&nbsp;Steam&nbsp;CDN&nbsp;requests&nbsp;allowing&nbsp;multiple&nbsp;CDN&nbsp;requests&nbsp;to&nbsp;be&nbsp;served&nbsp;from&nbsp;the&nbsp;single&nbsp;Squid&nbsp;cache&nbsp;entry.&lt;br&nbsp;style=&quot;box-sizing:border-box&quot;&gt;Here&#39;s&nbsp;a&nbsp;breakdown&nbsp;of&nbsp;my&nbsp;current&nbsp;versions/configurations:&lt;/p&gt;&lt;blockquote&nbsp;style=&quot;box-sizing:border-box;margin:0px&nbsp;0px&nbsp;16px;padding:0px&nbsp;1em;color:rgb(119,119,119);border-left:0.25em&nbsp;solid&nbsp;rgb(221,221,221);font-family:-apple-system,blinkmacsystemfont,&quot;segoe&nbsp;ui&quot;,helvetica,arial,sans-serif,&quot;apple&nbsp;color&nbsp;emoji&quot;,&quot;segoe&nbsp;ui&nbsp;emoji&quot;,&quot;segoe&nbsp;ui&nbsp;symbol&quot;;font-size:14px&quot;&gt;&lt;p&nbsp;style=&quot;box-sizing:border-box;margin-top:0px;margin-bottom:0px&quot;&gt;OS:&nbsp;IPFire&nbsp;2.19&nbsp;(x86_64)&nbsp;-&nbsp;core103&lt;br&nbsp;style=&quot;box-sizing:border-box&quot;&gt;Kernel:&nbsp;Linux&nbsp;ipfire&nbsp;3.14.65-ipfire &lt;a&nbsp;href=&quot;https://github.com/squid-cache/squid/pull/1&quot;&nbsp;class=&quot;m_1541224772401716373gmail-issue-link&nbsp;m_1541224772401716373gmail-js-issue-link&quot;&nbsp;style=&quot;box-sizing:border-box;background-color:transparent;color:rgb(64,120,192);text-decoration:none&quot;&nbsp;target=&quot;_blank&quot;&gt;#1&lt;/a&gt; SMP&nbsp;Tue&nbsp;Jun&nbsp;14&nbsp;06:21:39&nbsp;GMT&nbsp;2016&nbsp;x86_64&nbsp;GNU/Linux&lt;br&nbsp;style=&quot;box-sizing:border-box&quot;&gt;Squid:&nbsp;3.5.19&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;style=&quot;box-sizing:border-box;margin:0px&nbsp;0px&nbsp;16px;padding:0px&nbsp;1em;color:rgb(119,119,119);border-left:0.25em&nbsp;solid&nbsp;rgb(221,221,221);font-family:-apple-system,blinkmacsystemfont,&quot;segoe&nbsp;ui&quot;,helvetica,arial,sans-serif,&quot;apple&nbsp;color&nbsp;emoji&quot;,&quot;segoe&nbsp;ui&nbsp;emoji&quot;,&quot;segoe&nbsp;ui&nbsp;symbol&quot;;font-size:14px&quot;&gt;&lt;p&nbsp;style=&quot;box-sizing:border-box;margin-top:0px;margin-bottom:0px&quot;&gt;/var/ipfire/proxy/advanced/&lt;wbr&gt;acls/include.acl&lt;br&nbsp;style=&quot;box-sizing:border-box&quot;&gt;&lt;code&nbsp;style=&quot;box-sizing:border-box;font-family:consolas,&quot;liberation&nbsp;mono&quot;,menlo,courier,monospace;font-size:11.9px;padding:0.2em&nbsp;0px;margin:0px;background-color:rgba(0,0,0,0.0392157);border-radius:3px&quot;&gt;#squid.conf&lt;/code&gt;&lt;br&nbsp;style=&quot;box-sizing:border-box&quot;&gt;&lt;code&nbsp;style=&quot;box-sizing:border-box;font-family:consolas,&quot;liberation&nbsp;mono&quot;,menlo,courier,monospace;font-size:11.9px;padding:0.2em&nbsp;0px;margin:0px;background-color:rgba(0,0,0,0.0392157);border-radius:3px&quot;&gt;acl&nbsp;cacheDomain&nbsp;dstdomain&nbsp;.&lt;a&nbsp;href=&quot;http://steampowered.com&quot;&nbsp;target=&quot;_blank&quot;&gt;steampowered.com&lt;/a&gt;&nbsp;.&lt;a&nbsp;href=&quot;http://edgesuite.net&quot;&nbsp;target=&quot;_blank&quot;&gt;edgesuite.net&lt;/a&gt;&nbsp;.&lt;a&nbsp;href=&quot;http://steamstatic.com&quot;&nbsp;target=&quot;_blank&quot;&gt;steamstatic.com&lt;/a&gt;&nbsp;.&lt;a&nbsp;href=&quot;http://steamcontent.com&quot;&nbsp;target=&quot;_blank&quot;&gt;steamcontent.com&lt;/a&gt;&lt;/code&gt;&lt;br&nbsp;style=&quot;box-sizing:border-box&quot;&gt;&lt;code&nbsp;style=&quot;box-sizing:border-box;font-family:consolas,&quot;liberation&nbsp;mono&quot;,menlo,courier,monospace;font-size:11.9px;padding:0.2em&nbsp;0px;margin:0px;background-color:rgba(0,0,0,0.0392157);border-radius:3px&quot;&gt;cache&nbsp;deny&nbsp;!cacheDomain&lt;/code&gt;&lt;br&nbsp;style=&quot;box-sizing:border-box&quot;&gt;&lt;code&nbsp;style=&quot;box-sizing:border-box;font-family:consolas,&quot;liberation&nbsp;mono&quot;,menlo,courier,monospace;font-size:11.9px;padding:0.2em&nbsp;0px;margin:0px;background-color:rgba(0,0,0,0.0392157);border-radius:3px&quot;&gt;store_id_program&nbsp;/usr/lib/squid/storeid_file_&lt;wbr&gt;rewrite&nbsp;/etc/squid/storeid_rewrite.&lt;wbr&gt;conf&lt;/code&gt;&lt;br&nbsp;style=&quot;box-sizing:border-box&quot;&gt;&lt;code&nbsp;style=&quot;box-sizing:border-box;font-family:consolas,&quot;liberation&nbsp;mono&quot;,menlo,courier,monospace;font-size:11.9px;padding:0.2em&nbsp;0px;margin:0px;background-color:rgba(0,0,0,0.0392157);border-radius:3px&quot;&gt;store_id_children&nbsp;10&nbsp;startup=3&nbsp;idle=1&nbsp;concurrency=0&lt;/code&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;style=&quot;box-sizing:border-box;margin:0px&nbsp;0px&nbsp;16px;padding:0px&nbsp;1em;color:rgb(119,119,119);border-left:0.25em&nbsp;solid&nbsp;rgb(221,221,221);font-family:-apple-system,blinkmacsystemfont,&quot;segoe&nbsp;ui&quot;,helvetica,arial,sans-serif,&quot;apple&nbsp;color&nbsp;emoji&quot;,&quot;segoe&nbsp;ui&nbsp;emoji&quot;,&quot;segoe&nbsp;ui&nbsp;symbol&quot;;font-size:14px&quot;&gt;&lt;p&nbsp;style=&quot;box-sizing:border-box;margin-top:0px;margin-bottom:0px&quot;&gt;/etc/squid/storeid_rewrite.&lt;wbr&gt;conf&lt;br&nbsp;style=&quot;box-sizing:border-box&quot;&gt;&lt;code&nbsp;style=&quot;box-sizing:border-box;font-family:consolas,&quot;liberation&nbsp;mono&quot;,menlo,courier,monospace;font-size:11.9px;padding:0.2em&nbsp;0px;margin:0px;background-color:rgba(0,0,0,0.0392157);border-radius:3px&quot;&gt;^http.*steam.*\.com\/(.*)&nbsp;&lt;a&nbsp;href=&quot;http://steamupdates.squid.internal/$1&quot;&nbsp;target=&quot;_blank&quot;&gt;http://steamupdates.squid.&lt;wbr&gt;internal/$1&lt;/a&gt;&lt;/code&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p&nbsp;style=&quot;box-sizing:border-box;margin-top:0px;margin-bottom:16px;color:rgb(51,51,51);font-family:-apple-system,blinkmacsystemfont,&quot;segoe&nbsp;ui&quot;,helvetica,arial,sans-serif,&quot;apple&nbsp;color&nbsp;emoji&quot;,&quot;segoe&nbsp;ui&nbsp;emoji&quot;,&quot;segoe&nbsp;ui&nbsp;symbol&quot;;font-size:14px&quot;&gt;The&nbsp;issue&nbsp;appears&nbsp;to&nbsp;be&nbsp;stemming&nbsp;from&nbsp;how&nbsp;squid&nbsp;and&nbsp;storeID_rewrite&nbsp;interact;&nbsp;currently&nbsp;if&nbsp;I&nbsp;test&nbsp;the&nbsp;storeid_rewrite.conf&nbsp;with&nbsp;the&nbsp;following&nbsp;command:&lt;br&nbsp;style=&quot;box-sizing:border-box&quot;&gt;&lt;code&nbsp;style=&quot;box-sizing:border-box;font-family:consolas,&quot;liberation&nbsp;mono&quot;,menlo,courier,monospace;font-size:11.9px;padding:0.2em&nbsp;0px;margin:0px;background-color:rgba(0,0,0,0.0392157);border-radius:3px&quot;&gt;echo&nbsp;&lt;a&nbsp;href=&quot;http://valve314.steamcontent.com/depot/255711/chunk/a3f17a1be9c7861cbc56d1098b8ede146e114391&quot;&nbsp;target=&quot;_blank&quot;&gt;http://valve314.steamcontent.&lt;wbr&gt;com/depot/255711/chunk/&lt;wbr&gt;a3f17a1be9c7861cbc56d1098b8ede&lt;wbr&gt;146e114391&lt;/a&gt;?&nbsp;|&nbsp;/usr/lib/squid/storeid_file_&lt;wbr&gt;rewrite&nbsp;/etc/squid/storeid_rewrite.&lt;wbr&gt;conf&lt;/code&gt;&lt;br&nbsp;style=&quot;box-sizing:border-box&quot;&gt;I&nbsp;get&nbsp;in&nbsp;return:&lt;br&nbsp;style=&quot;box-sizing:border-box&quot;&gt;&lt;code&nbsp;style=&quot;box-sizing:border-box;font-family:consolas,&quot;liberation&nbsp;mono&quot;,menlo,courier,monospace;font-size:11.9px;padding:0.2em&nbsp;0px;margin:0px;background-color:rgba(0,0,0,0.0392157);border-radius:3px&quot;&gt;OK&nbsp;store-id=&lt;a&nbsp;href=&quot;http://steamupdates.squid.internal/depot/255711/chunk/a3f17a1be9c7861cbc56d1098b8ede146e114391&quot;&nbsp;target=&quot;_blank&quot;&gt;http://steamupdates.&lt;wbr&gt;squid.internal/depot/255711/&lt;wbr&gt;chunk/&lt;wbr&gt;a3f17a1be9c7861cbc56d1098b8ede&lt;wbr&gt;146e114391&lt;/a&gt;?&lt;/code&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;box-sizing:border-box;margin-top:0px;margin-bottom:16px;color:rgb(51,51,51);font-family:-apple-system,blinkmacsystemfont,&quot;segoe&nbsp;ui&quot;,helvetica,arial,sans-serif,&quot;apple&nbsp;color&nbsp;emoji&quot;,&quot;segoe&nbsp;ui&nbsp;emoji&quot;,&quot;segoe&nbsp;ui&nbsp;symbol&quot;;font-size:14px&quot;&gt;This&nbsp;indicates&nbsp;that&nbsp;storeID&nbsp;rewrite&nbsp;is&nbsp;functioning&nbsp;and&nbsp;using&nbsp;my&nbsp;RegEx&nbsp;command&nbsp;to&nbsp;rewrite&nbsp;the&nbsp;URL&nbsp;into&nbsp;one&nbsp;that&nbsp;only&nbsp;contains&nbsp;the&nbsp;unique&nbsp;game&nbsp;and&nbsp;chunk&nbsp;IDs&nbsp;from&nbsp;the&nbsp;URL.&nbsp;The&nbsp;issue&nbsp;is&nbsp;when&nbsp;I&nbsp;test&nbsp;the&nbsp;entire&nbsp;system&nbsp;using&nbsp;the&nbsp;following&nbsp;process&nbsp;I&nbsp;see&nbsp;multiple&nbsp;entries&nbsp;into&nbsp;the&nbsp;squid&nbsp;cache&nbsp;for&nbsp;the&nbsp;specific&nbsp;game&nbsp;chunk&nbsp;ID:&lt;/p&gt;&lt;ul&nbsp;style=&quot;box-sizing:border-box;padding-left:2em;margin-top:0px;margin-bottom:16px;color:rgb(51,51,51);font-family:-apple-system,blinkmacsystemfont,&quot;segoe&nbsp;ui&quot;,helvetica,arial,sans-serif,&quot;apple&nbsp;color&nbsp;emoji&quot;,&quot;segoe&nbsp;ui&nbsp;emoji&quot;,&quot;segoe&nbsp;ui&nbsp;symbol&quot;;font-size:14px&quot;&gt;&lt;li&nbsp;style=&quot;box-sizing:border-box;margin-left:0px&quot;&gt;Remove&nbsp;/var/log/squid/access.log&nbsp;to&nbsp;ensure&nbsp;no&nbsp;previous&nbsp;attempts&nbsp;will&nbsp;appear&nbsp;in&nbsp;test&lt;/li&gt;&lt;li&nbsp;style=&quot;box-sizing:border-box;margin-top:0.25em;margin-left:0px&quot;&gt;Clear&nbsp;the&nbsp;cache&nbsp;through&nbsp;ipFire&nbsp;webUI&lt;/li&gt;&lt;li&nbsp;style=&quot;box-sizing:border-box;margin-top:0.25em;margin-left:0px&quot;&gt;Restart&nbsp;Squid&nbsp;cache&nbsp;service&nbsp;through&nbsp;ipFire&nbsp;webUI&lt;/li&gt;&lt;li&nbsp;style=&quot;box-sizing:border-box;margin-top:0.25em;margin-left:0px&quot;&gt;Download&nbsp;game&nbsp;through&nbsp;Steam&nbsp;interface&lt;/li&gt;&lt;li&nbsp;style=&quot;box-sizing:border-box;margin-top:0.25em;margin-left:0px&quot;&gt;Verify&nbsp;Squid&nbsp;cached&nbsp;the&nbsp;download&nbsp;chunks&nbsp;by&nbsp;grepping&nbsp;through&nbsp;both&nbsp;/var/log/squid/access.log&nbsp;and&nbsp;Squid&nbsp;cache&nbsp;for&nbsp;specific&nbsp;game&nbsp;chunk&nbsp;IDs&nbsp;(this&nbsp;is&nbsp;a&nbsp;spot&nbsp;check&nbsp;at&nbsp;best)&lt;/li&gt;&lt;li&nbsp;style=&quot;box-sizing:border-box;margin-top:0.25em;margin-left:0px&quot;&gt;Change&nbsp;Steam&nbsp;CDN&nbsp;location&nbsp;through&nbsp;Steam&nbsp;UI&lt;/li&gt;&lt;li&nbsp;style=&quot;box-sizing:border-box;margin-top:0.25em;margin-left:0px&quot;&gt;Delete&nbsp;Steam&nbsp;game&nbsp;local&nbsp;content&lt;/li&gt;&lt;li&nbsp;style=&quot;box-sizing:border-box;margin-top:0.25em;margin-left:0px&quot;&gt;Re-download&nbsp;Steam&nbsp;game&lt;/li&gt;&lt;li&nbsp;style=&quot;box-sizing:border-box;margin-top:0.25em;margin-left:0px&quot;&gt;Verify&nbsp;Squid&nbsp;cache&nbsp;using&nbsp;game&nbsp;chunk&nbsp;ID&lt;/li&gt;&lt;/ul&gt;&lt;p&nbsp;style=&quot;box-sizing:border-box;margin-top:0px;margin-bottom:16px;color:rgb(51,51,51);font-family:-apple-system,blinkmacsystemfont,&quot;segoe&nbsp;ui&quot;,helvetica,arial,sans-serif,&quot;apple&nbsp;color&nbsp;emoji&quot;,&quot;segoe&nbsp;ui&nbsp;emoji&quot;,&quot;segoe&nbsp;ui&nbsp;symbol&quot;;font-size:14px&quot;&gt;The&nbsp;command&nbsp;used&nbsp;to&nbsp;grep&nbsp;against&nbsp;the&nbsp;Squid&nbsp;cache&nbsp;and&nbsp;it&#39;s&nbsp;results&nbsp;are&nbsp;as&nbsp;follows:&lt;br&nbsp;style=&quot;box-sizing:border-box&quot;&gt;&lt;code&nbsp;style=&quot;box-sizing:border-box;font-family:consolas,&quot;liberation&nbsp;mono&quot;,menlo,courier,monospace;font-size:11.9px;padding:0.2em&nbsp;0px;margin:0px;background-color:rgba(0,0,0,0.0392157);border-radius:3px&quot;&gt;squidclient&nbsp;-h&nbsp;192.168.1.1&nbsp;cache_object://&lt;a&nbsp;href=&quot;http://192.168.1.1&quot;&nbsp;target=&quot;_blank&quot;&gt;192.168.1.1&lt;/a&gt;&nbsp;mgr:objects&nbsp;|&nbsp;grep&nbsp;f37f9405e2f38417a226eac378ac39&lt;wbr&gt;82223d2966?&lt;/code&gt;&lt;br&nbsp;style=&quot;box-sizing:border-box&quot;&gt;&lt;code&nbsp;style=&quot;box-sizing:border-box;font-family:consolas,&quot;liberation&nbsp;mono&quot;,menlo,courier,monospace;font-size:11.9px;padding:0.2em&nbsp;0px;margin:0px;background-color:rgba(0,0,0,0.0392157);border-radius:3px&quot;&gt;GET&nbsp;&lt;a&nbsp;href=&quot;http://valve608.steamcontent.com/depot/26502/chunk/f37f9405e2f38417a226eac378ac3982223d2966&quot;&nbsp;target=&quot;_blank&quot;&gt;http://valve608.steamcontent.&lt;wbr&gt;com/depot/26502/chunk/&lt;wbr&gt;f37f9405e2f38417a226eac378ac39&lt;wbr&gt;82223d2966&lt;/a&gt;?&lt;/code&gt;&lt;br&nbsp;style=&quot;box-sizing:border-box&quot;&gt;&lt;code&nbsp;style=&quot;box-sizing:border-box;font-family:consolas,&quot;liberation&nbsp;mono&quot;,menlo,courier,monospace;font-size:11.9px;padding:0.2em&nbsp;0px;margin:0px;background-color:rgba(0,0,0,0.0392157);border-radius:3px&quot;&gt;GET&nbsp;&lt;a&nbsp;href=&quot;http://valve313.steamcontent.com/depot/26502/chunk/f37f9405e2f38417a226eac378ac3982223d2966&quot;&nbsp;target=&quot;_blank&quot;&gt;http://valve313.steamcontent.&lt;wbr&gt;com/depot/26502/chunk/&lt;wbr&gt;f37f9405e2f38417a226eac378ac39&lt;wbr&gt;82223d2966&lt;/a&gt;?&lt;/code&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;box-sizing:border-box;margin-top:0px;color:rgb(51,51,51);font-family:-apple-system,blinkmacsystemfont,&quot;segoe&nbsp;ui&quot;,helvetica,arial,sans-serif,&quot;apple&nbsp;color&nbsp;emoji&quot;,&quot;segoe&nbsp;ui&nbsp;emoji&quot;,&quot;segoe&nbsp;ui&nbsp;symbol&quot;;font-size:14px;margin-bottom:0px&quot;&gt;This&nbsp;indicates&nbsp;that&nbsp;at&nbsp;some&nbsp;point&nbsp;in&nbsp;the&nbsp;process,&nbsp;Squid&nbsp;is&nbsp;generating&nbsp;a&nbsp;KEY&nbsp;entry&nbsp;for&nbsp;the&nbsp;chunk&nbsp;based&nbsp;off&nbsp;the&nbsp;original&nbsp;Steam&nbsp;CDN&nbsp;URL&nbsp;and&nbsp;NOT&nbsp;the&nbsp;RegEx&#39;d&nbsp;URL&nbsp;storeID_rewrite&nbsp;is&nbsp;supposedly&nbsp;generating.&lt;br&nbsp;style=&quot;box-sizing:border-box&quot;&gt;I&nbsp;have&nbsp;attempted&nbsp;to&nbsp;determine&nbsp;how&nbsp;Squid&nbsp;is&nbsp;generating&nbsp;it&#39;s&nbsp;KEY&nbsp;entries&nbsp;for&nbsp;the&nbsp;chunks&nbsp;it&nbsp;is&nbsp;storing,&nbsp;but&nbsp;have&nbsp;had&nbsp;no&nbsp;luck&nbsp;(basing&nbsp;attempts&nbsp;off&nbsp;this &lt;a&nbsp;href=&quot;http://www.squid-cache.org/CacheDigest/cache-digest-v5.txt&quot;&nbsp;style=&quot;box-sizing:border-box;background-color:transparent;color:rgb(64,120,192);text-decoration:none&quot;&nbsp;target=&quot;_blank&quot;&gt;white&nbsp;paper&nbsp;entry&lt;/a&gt;)&lt;br&nbsp;style=&quot;box-sizing:border-box&quot;&gt;At&nbsp;this&nbsp;point&nbsp;I&#39;ve&nbsp;exhausted&nbsp;my&nbsp;limited&nbsp;knowledge&nbsp;of&nbsp;how&nbsp;Squid&nbsp;and&nbsp;storeID&nbsp;rewrite&nbsp;function&nbsp;and&nbsp;any&nbsp;assistance&nbsp;would&nbsp;be&nbsp;quite&nbsp;welcome;&nbsp;please&nbsp;let&nbsp;me&nbsp;know&nbsp;if&nbsp;there&#39;s&nbsp;any&nbsp;further&nbsp;info&nbsp;needed&nbsp;to&nbsp;try&nbsp;and&nbsp;crack&nbsp;this&nbsp;walnut&nbsp;open!&lt;/p&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
