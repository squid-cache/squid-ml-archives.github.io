<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;style&nbsp;type=&quot;text/css&quot;&nbsp;style=&quot;display:none;&quot;&gt;&lt;!--&nbsp;P&nbsp;{margin-top:0;margin-bottom:0;}&nbsp;--&gt;&lt;/style&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;dir=&quot;ltr&quot;&gt;<br>
&lt;div&nbsp;id=&quot;divtagdefaultwrapper&quot;&nbsp;style=&quot;font-size:12pt;color:#000000;font-family:Calibri,Arial,Helvetica,sans-serif;&quot;&gt;<br>
&lt;p&gt;I&nbsp;discovered&nbsp;that&nbsp;'squid&nbsp;-k&nbsp;rotate'&nbsp;toggles&nbsp;cache.log&nbsp;output&nbsp;into&nbsp;full&nbsp;debug&nbsp;mode&nbsp;as&nbsp;if&nbsp;I&nbsp;had&nbsp;done&nbsp;'squid&nbsp;-k&nbsp;debug'.&nbsp;&nbsp;Execute&nbsp;a&nbsp;second&nbsp;rotate&nbsp;and&nbsp;it&nbsp;toggles&nbsp;debug&nbsp;off.&nbsp;This&nbsp;only&nbsp;happens&nbsp;when&nbsp;I&nbsp;have&nbsp;an&nbsp;ecap&nbsp;adapter&nbsp;configured.&nbsp;Comment&nbsp;out&nbsp;those&nbsp;lines&nbsp;and<br>
&nbsp;everything&nbsp;works&nbsp;as&nbsp;expected.&nbsp;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&gt;My&nbsp;question&nbsp;is&nbsp;about&nbsp;the&nbsp;debug&nbsp;behavior.&nbsp;I&lt;span&gt;f&nbsp;this&nbsp;isn't&nbsp;a&nbsp;bug&lt;/span&gt;,&nbsp;I'd&nbsp;like&nbsp;to&nbsp;understand&nbsp;the&nbsp;reason&nbsp;rotate&nbsp;would&nbsp;do&nbsp;this.&nbsp;There&nbsp;are&nbsp;no&nbsp;errors&nbsp;when&nbsp;parsing&nbsp;or&nbsp;in&nbsp;normal&nbsp;operation.&nbsp;The&nbsp;ecap&nbsp;adapter&nbsp;works&nbsp;except&nbsp;for&nbsp;a&nbsp;memory&nbsp;leak.<br>
&lt;span&gt;Someone&nbsp;is&nbsp;looking&nbsp;into&nbsp;that.&nbsp;&lt;/span&gt;I've&nbsp;found&nbsp;it&nbsp;necessary&nbsp;to&nbsp;execute&nbsp;a&nbsp;reconfigure&nbsp;to&nbsp;ensure&nbsp;debugging&nbsp;is&nbsp;off.&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&gt;squid.conf&nbsp;has&nbsp;'&lt;span&gt;debug_options&nbsp;ALL,1'.&nbsp;&lt;br&gt;<br>
&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&gt;&lt;span&gt;'squid&nbsp;-k&nbsp;reconfigure'&nbsp;corrects&nbsp;the&nbsp;logging.&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&gt;&lt;span&gt;Tried&nbsp;with&nbsp;logfile_rotate&nbsp;0,&nbsp;1&nbsp;and&nbsp;10.&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&gt;&lt;span&gt;Rotating&nbsp;the&nbsp;log&nbsp;just&nbsp;ends&nbsp;up&nbsp;filling&nbsp;the&nbsp;next&nbsp;log&nbsp;to&nbsp;max&nbsp;and&nbsp;squid&nbsp;halts.&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&gt;&lt;span&gt;I've&nbsp;run&nbsp;3.5.19&nbsp;with&nbsp;same&nbsp;results.&nbsp;Will&nbsp;be&nbsp;trying&nbsp;22&nbsp;when&nbsp;I&nbsp;get&nbsp;a&nbsp;minute.&lt;br&gt;<br>
&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&gt;&lt;span&gt;Any&nbsp;ideas&nbsp;are&nbsp;appreciated.&nbsp;&lt;br&gt;<br>
&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&gt;Version&nbsp;and&nbsp;options:&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;div&gt;squid&nbsp;-v&lt;br&gt;<br>
Squid&nbsp;Cache:&nbsp;Version&nbsp;3.5.17&lt;br&gt;<br>
Service&nbsp;Name:&nbsp;squid&lt;br&gt;<br>
configure&nbsp;options:&nbsp;&nbsp;'--enable-ecap'&nbsp;'--disable-arch-native'&nbsp;'--with-openssl'&nbsp;'--enable-ssl'&nbsp;'--enable-ltdl-convenience'&nbsp;'--enable-linux-netfilter'&nbsp;'--enable-auth'&nbsp;'--with-libcap'&nbsp;'--with-default-user=squid'&nbsp;'--sysconfdir=/etc/squid'&nbsp;'--with-logdir=/var/log/squid'<br>
&nbsp;'--with-swapdir=/var/spool/squid'&nbsp;'--enable-wccpv2'&nbsp;'--enable-ssl-crtd'&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;br&gt;<br>
&lt;p&gt;&lt;/p&gt;<br>
&lt;p&gt;I&nbsp;don't&nbsp;see&nbsp;anything&nbsp;interesting&nbsp;in&nbsp;these&nbsp;first&nbsp;logged&nbsp;lines&nbsp;after&nbsp;executing&nbsp;'squid&nbsp;-k&nbsp;rotate':&lt;/p&gt;<br>
&lt;p&gt;&lt;/p&gt;<br>
&lt;div&gt;2016/11/16&nbsp;21:42:22|&nbsp;Set&nbsp;Current&nbsp;Directory&nbsp;to&nbsp;/var/spool/squid&lt;br&gt;<br>
2016/11/16&nbsp;21:42:22.952&nbsp;kid1|&nbsp;storeDirWriteCleanLogs:&nbsp;Starting...&lt;br&gt;<br>
2016/11/16&nbsp;21:42:22.953&nbsp;kid1|&nbsp;6,5|&nbsp;disk.cc(71)&nbsp;file_open:&nbsp;file_open:&nbsp;FD&nbsp;10&lt;br&gt;<br>
2016/11/16&nbsp;21:42:22.953&nbsp;kid1|&nbsp;51,3|&nbsp;fd.cc(198)&nbsp;fd_open:&nbsp;fd_open()&nbsp;FD&nbsp;10&nbsp;/var/spool/squid/swap.state.clean&lt;br&gt;<br>
2016/11/16&nbsp;21:42:22.953&nbsp;kid1|&nbsp;47,3|&nbsp;ufs/UFSSwapDir.cc(978)&nbsp;writeCleanStart:&nbsp;opened&nbsp;/var/spool/squid/swap.state.clean,&nbsp;FD&nbsp;10&lt;br&gt;<br>
2016/11/16&nbsp;21:42:22.953&nbsp;kid1|&nbsp;6,5|&nbsp;disk.cc(126)&nbsp;file_close:&nbsp;file_close:&nbsp;FD&nbsp;228&nbsp;really&nbsp;closing&lt;br&gt;<br>
&lt;br&gt;<br>
2016/11/16&nbsp;21:42:22.953&nbsp;kid1|&nbsp;51,3|&nbsp;fd.cc(93)&nbsp;fd_close:&nbsp;fd_close&nbsp;FD&nbsp;228&nbsp;/var/spool/squid/swap.state&lt;br&gt;<br>
2016/11/16&nbsp;21:42:22.953&nbsp;kid1|&nbsp;5,5|&nbsp;ModEpoll.cc(116)&nbsp;SetSelect:&nbsp;FD&nbsp;228,&nbsp;type=1,&nbsp;handler=0,&nbsp;client_data=0,&nbsp;timeout=0&lt;br&gt;<br>
2016/11/16&nbsp;21:42:22.953&nbsp;kid1|&nbsp;5,5|&nbsp;ModEpoll.cc(116)&nbsp;SetSelect:&nbsp;FD&nbsp;228,&nbsp;type=2,&nbsp;handler=0,&nbsp;client_data=0,&nbsp;timeout=0&lt;br&gt;<br>
2016/11/16&nbsp;21:42:22.953&nbsp;kid1|&nbsp;47,3|&nbsp;ufs/UFSSwapDir.cc(753)&nbsp;closeLog:&nbsp;Cache&nbsp;Dir&nbsp;#0&nbsp;log&nbsp;closed&nbsp;on&nbsp;FD&nbsp;228&lt;br&gt;<br>
2016/11/16&nbsp;21:42:22.953&nbsp;kid1|&nbsp;21,2|&nbsp;disk.cc(503)&nbsp;xrename:&nbsp;xrename:&nbsp;renaming&nbsp;/var/spool/squid/swap.state.clean&nbsp;to&nbsp;/var/spool/squid/swap.state&lt;br&gt;<br>
2016/11/16&nbsp;21:42:22.953&nbsp;kid1|&nbsp;6,5|&nbsp;disk.cc(71)&nbsp;file_open:&nbsp;file_open:&nbsp;FD&nbsp;12&lt;br&gt;<br>
2016/11/16&nbsp;21:42:22.953&nbsp;kid1|&nbsp;51,3|&nbsp;fd.cc(198)&nbsp;fd_open:&nbsp;fd_open()&nbsp;FD&nbsp;12&nbsp;/var/spool/squid/swap.state.last-clean&lt;br&gt;<br>
2016/11/16&nbsp;21:42:22.954&nbsp;kid1|&nbsp;6,5|&nbsp;disk.cc(126)&nbsp;file_close:&nbsp;file_close:&nbsp;FD&nbsp;12&nbsp;really&nbsp;closing&lt;br&gt;<br>
&lt;br&gt;<br>
2016/11/16&nbsp;21:42:22.954&nbsp;kid1|&nbsp;51,3|&nbsp;fd.cc(93)&nbsp;fd_close:&nbsp;fd_close&nbsp;FD&nbsp;12&nbsp;/var/spool/squid/swap.state.last-clean&lt;br&gt;<br>
2016/11/16&nbsp;21:42:22.954&nbsp;kid1|&nbsp;5,5|&nbsp;ModEpoll.cc(116)&nbsp;SetSelect:&nbsp;FD&nbsp;12,&nbsp;type=1,&nbsp;handler=0,&nbsp;client_data=0,&nbsp;timeout=0&lt;br&gt;<br>
2016/11/16&nbsp;21:42:22.954&nbsp;kid1|&nbsp;5,5|&nbsp;ModEpoll.cc(116)&nbsp;SetSelect:&nbsp;FD&nbsp;12,&nbsp;type=2,&nbsp;handler=0,&nbsp;client_data=0,&nbsp;timeout=0&lt;br&gt;<br>
2016/11/16&nbsp;21:42:22.954&nbsp;kid1|&nbsp;6,5|&nbsp;disk.cc(126)&nbsp;file_close:&nbsp;file_close:&nbsp;FD&nbsp;10&nbsp;really&nbsp;closing&lt;br&gt;<br>
&lt;br&gt;<br>
2016/11/16&nbsp;21:42:22.954&nbsp;kid1|&nbsp;51,3|&nbsp;fd.cc(93)&nbsp;fd_close:&nbsp;fd_close&nbsp;FD&nbsp;10&nbsp;/var/spool/squid/swap.state.clean&lt;br&gt;<br>
2016/11/16&nbsp;21:42:22.954&nbsp;kid1|&nbsp;5,5|&nbsp;ModEpoll.cc(116)&nbsp;SetSelect:&nbsp;FD&nbsp;10,&nbsp;type=1,&nbsp;handler=0,&nbsp;client_data=0,&nbsp;timeout=0&lt;br&gt;<br>
2016/11/16&nbsp;21:42:22.954&nbsp;kid1|&nbsp;5,5|&nbsp;ModEpoll.cc(116)&nbsp;SetSelect:&nbsp;FD&nbsp;10,&nbsp;type=2,&nbsp;handler=0,&nbsp;client_data=0,&nbsp;timeout=0&lt;br&gt;<br>
2016/11/16&nbsp;21:42:22.954&nbsp;kid1|&nbsp;6,5|&nbsp;disk.cc(71)&nbsp;file_open:&nbsp;file_open:&nbsp;FD&nbsp;10&lt;br&gt;<br>
2016/11/16&nbsp;21:42:22.954&nbsp;kid1|&nbsp;51,3|&nbsp;fd.cc(198)&nbsp;fd_open:&nbsp;fd_open()&nbsp;FD&nbsp;10&nbsp;/var/spool/squid/swap.state&lt;br&gt;<br>
2016/11/16&nbsp;21:42:22.954&nbsp;kid1|&nbsp;50,3|&nbsp;ufs/UFSSwapDir.cc(735)&nbsp;openLog:&nbsp;Cache&nbsp;Dir&nbsp;#0&nbsp;log&nbsp;opened&nbsp;on&nbsp;FD&nbsp;10&lt;br&gt;<br>
2016/11/16&nbsp;21:42:22.954&nbsp;kid1|&nbsp;&nbsp;&nbsp;Finished.&nbsp;&nbsp;Wrote&nbsp;3677&nbsp;entries.&lt;br&gt;<br>
&lt;br&gt;<br>
Thanks&nbsp;for&nbsp;any&nbsp;help.&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;br&gt;<br>
&lt;p&gt;&lt;/p&gt;<br>
&lt;/div&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
