<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;The&nbsp;site&nbsp;I&nbsp;was&nbsp;having&nbsp;trouble&nbsp;with&nbsp;was &lt;/span&gt;&lt;a&nbsp;href=&quot;http://video.foxnews.com/&quot;&nbsp;target=&quot;_blank&quot;&nbsp;style=&quot;font-size:12.8px&quot;&gt;video.foxnews.com&lt;/a&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;. &nbsp;The&nbsp;page&nbsp;loads&nbsp;but&nbsp;the&nbsp;actual&nbsp;video&nbsp;hangs&nbsp;with&nbsp;&quot;spinning&nbsp;wheel&nbsp;of&nbsp;death&quot;. &nbsp;I&nbsp;took&nbsp;Amos&nbsp;suggestion&nbsp;and&nbsp;added&nbsp;deny&nbsp;via,&nbsp;request-x-forward&nbsp;and&nbsp;that&nbsp;fixed&nbsp;the&nbsp;issue&nbsp;but&nbsp;I&nbsp;was&nbsp;trying&nbsp;to&nbsp;create&nbsp;the&nbsp;anonymous&nbsp;proxy&nbsp;paranoid&nbsp;setup&nbsp;initially,&nbsp;and&nbsp;Amos&nbsp;suggestion&nbsp;won&#39;t&nbsp;achieve&nbsp;that.&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;Dec&nbsp;19,&nbsp;2016&nbsp;at&nbsp;9:28&nbsp;AM,&nbsp;Robert&nbsp;Watson&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:robert@gillecaluim.com&quot;&nbsp;target=&quot;_blank&quot;&gt;robert@gillecaluim.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;The&nbsp;site&nbsp;I&nbsp;was&nbsp;having&nbsp;trouble&nbsp;with&nbsp;was&nbsp;&lt;a&nbsp;href=&quot;http://video.foxnews.com&quot;&nbsp;target=&quot;_blank&quot;&gt;video.foxnews.com&lt;/a&gt;. &nbsp;I&nbsp;took&nbsp;Amos&nbsp;suggestion&nbsp;and&nbsp;added&nbsp;deny&nbsp;via,&nbsp;request-x-forward&nbsp;and&nbsp;that&nbsp;fixed&nbsp;the&nbsp;issue&nbsp;but&nbsp;I&nbsp;was&nbsp;trying&nbsp;to&nbsp;create&nbsp;the&nbsp;anonymous&nbsp;proxy&nbsp;paranoid&nbsp;setup&nbsp;initially,&nbsp;and&nbsp;Amos&nbsp;suggestion&nbsp;won&#39;t&nbsp;achieve&nbsp;that.&lt;/div&gt;&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Sun,&nbsp;Dec&nbsp;18,&nbsp;2016&nbsp;at&nbsp;2:25&nbsp;PM,&nbsp;Eliezer&nbsp;Croitoru&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:eliezer@ngtech.co.il&quot;&nbsp;target=&quot;_blank&quot;&gt;eliezer@ngtech.co.il&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Hey&nbsp;Robert,&lt;br&gt;<br>
&lt;br&gt;<br>
Can&nbsp;you&nbsp;be&nbsp;more&nbsp;specific?&lt;br&gt;<br>
“Not&nbsp;working”&nbsp;can&nbsp;depend&nbsp;on&nbsp;couple&nbsp;things&nbsp;and&nbsp;on&nbsp;the&nbsp;nature&nbsp;of&nbsp;the&lt;br&gt;<br>
streaming&nbsp;system.&lt;br&gt;<br>
I&nbsp;know&nbsp;that&nbsp;many&nbsp;streaming&nbsp;sites&nbsp;do&nbsp;work&nbsp;under&nbsp;transparent&nbsp;squid&nbsp;so&nbsp;it’s&lt;br&gt;<br>
not&nbsp;really&nbsp;well&nbsp;understood&nbsp;what&nbsp;is&nbsp;not&nbsp;working&nbsp;from&nbsp;the&nbsp;spectrum&nbsp;of&nbsp;options.&lt;br&gt;<br>
Can&nbsp;you&nbsp;give&nbsp;examples&nbsp;for&nbsp;streaming&nbsp;sites&nbsp;that&nbsp;do&nbsp;work&nbsp;and&nbsp;others&nbsp;that&nbsp;do&lt;br&gt;<br>
not?&lt;br&gt;<br>
The&nbsp;first&nbsp;that&nbsp;pops&nbsp;in&nbsp;my&nbsp;mind&nbsp;to&nbsp;test&nbsp;it&nbsp;would&nbsp;be:&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://www.youtube.com/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://www.youtube.com/&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://www.crunchyroll.com/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://www.crunchyroll.com/&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://rutube.ru/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://rutube.ru/&lt;/a&gt;&lt;br&gt;<br>
And&nbsp;many&nbsp;others&nbsp;that&nbsp;are&nbsp;mentioned&nbsp;at:&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://www.unveiltech.com/indexsquidvideobooster.php&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.unveiltech.com/inde&lt;wbr&gt;xsquidvideobooster.php&lt;/a&gt;&nbsp;(under&nbsp;Smart&nbsp;Cache)&lt;br&gt;<br>
&lt;br&gt;<br>
And&nbsp;take&nbsp;Amos&nbsp;suggestion&nbsp;about&nbsp;restricting&nbsp;the&nbsp;headers&nbsp;more&nbsp;selectively.&lt;br&gt;<br>
Depends&nbsp;on&nbsp;your&nbsp;system&nbsp;policy&nbsp;you&nbsp;would&nbsp;be&nbsp;able&nbsp;to&nbsp;find&nbsp;that&nbsp;for&nbsp;most&nbsp;sites&lt;br&gt;<br>
you&nbsp;won’t&nbsp;have&nbsp;any&nbsp;issues&nbsp;letting&nbsp;any&nbsp;headers&nbsp;pass&nbsp;but&nbsp;for&nbsp;selective&nbsp;sites&lt;br&gt;<br>
you&nbsp;would&nbsp;want&nbsp;to&nbsp;take&nbsp;another&nbsp;policy&nbsp;that&nbsp;would&nbsp;be&nbsp;to&nbsp;block&nbsp;in&nbsp;general&nbsp;and&lt;br&gt;<br>
leaving&nbsp;aside&nbsp;the&nbsp;specific&nbsp;headers&nbsp;“allowed”&nbsp;approach.&lt;br&gt;<br>
&lt;br&gt;<br>
Also,&nbsp;have&nbsp;you&nbsp;tried&nbsp;to&nbsp;disable&nbsp;the&nbsp;virus&nbsp;scan&nbsp;to&nbsp;verify&nbsp;if&nbsp;it’s&nbsp;the&lt;br&gt;<br>
culprit&nbsp;for&nbsp;the&nbsp;streaming&nbsp;issue?&lt;br&gt;<br>
&lt;br&gt;<br>
Please&nbsp;give&nbsp;one&nbsp;example&nbsp;so&nbsp;I&nbsp;and&nbsp;maybe&nbsp;others&nbsp;would&nbsp;be&nbsp;able&nbsp;to&nbsp;grasp&nbsp;the&lt;br&gt;<br>
issue&nbsp;in&nbsp;some&nbsp;way.&lt;br&gt;<br>
&lt;br&gt;<br>
Thanks,&lt;br&gt;<br>
Eliezer&lt;br&gt;<br>
&lt;br&gt;<br>
----&lt;br&gt;<br>
Eliezer&nbsp;Croitoru&nbsp;&lt;&lt;a&nbsp;href=&quot;http://ngtech.co.il/lmgtfy/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://ngtech.co.il/lmgtfy/&lt;/a&gt;&gt;&lt;br&gt;<br>
Linux&nbsp;System&nbsp;Administrator&lt;br&gt;<br>
Mobile:&nbsp;&lt;a&nbsp;href=&quot;tel:%2B972-5-28704261&quot;&nbsp;value=&quot;+972528704261&quot;&nbsp;target=&quot;_blank&quot;&gt;+972-5-28704261&lt;/a&gt;&lt;br&gt;<br>
Email:&nbsp;&lt;a&nbsp;href=&quot;mailto:eliezer@ngtech.co.il&quot;&nbsp;target=&quot;_blank&quot;&gt;eliezer@ngtech.co.il&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
From:&nbsp;squid-users&nbsp;[mailto:&lt;a&nbsp;href=&quot;mailto:squid-users-bounces@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users-bounces@li&lt;wbr&gt;sts.squid-cache.org&lt;/a&gt;]&nbsp;On&lt;br&gt;<br>
Behalf&nbsp;Of&nbsp;Robert&nbsp;Watson&lt;br&gt;<br>
Sent:&nbsp;Saturday,&nbsp;December&nbsp;17,&nbsp;2016&nbsp;7:00&nbsp;AM&lt;br&gt;<br>
To:&nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.&lt;wbr&gt;org&lt;/a&gt;&lt;br&gt;<br>
Subject:&nbsp;[squid-users]&nbsp;squid.conf&nbsp;blocking&nbsp;live&nbsp;video&nbsp;stream&lt;br&gt;<br>
&lt;span&gt;&lt;br&gt;<br>
Sorry&nbsp;if&nbsp;this&nbsp;shows&nbsp;up&nbsp;twice&nbsp;on&nbsp;the&nbsp;mailing&nbsp;list...&lt;br&gt;<br>
I&#39;ve&nbsp;setup&nbsp;a&nbsp;transparent&nbsp;proxy&nbsp;squid&nbsp;v3.5.22&nbsp;on&nbsp;a&nbsp;x86_64&nbsp;Arch&nbsp;Linux&nbsp;server.&lt;br&gt;<br>
The&nbsp;transparent&nbsp;proxy&nbsp;is&nbsp;working&nbsp;fine&nbsp;for&nbsp;web&nbsp;page&nbsp;caching&nbsp;but&nbsp;live&nbsp;video&lt;br&gt;<br>
isn&#39;t&nbsp;getting&nbsp;through. &nbsp;I&nbsp;thought&nbsp;it&nbsp;was&nbsp;a&nbsp;netfilter&nbsp;issue&nbsp;but&nbsp;bypassing&nbsp;the&lt;br&gt;<br>
proxy&nbsp;fixes&nbsp;this&nbsp;issue.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;acl&nbsp;localnet&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://10.20.0.0/16&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;10.20.0.0/16&lt;/a&gt;&nbsp;&lt;&lt;a&nbsp;href=&quot;http://10.20.0.0/16&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://10.20.0.0/16&lt;/a&gt;&gt; &nbsp; &nbsp; #&nbsp;RFC1918&nbsp;possible&lt;br&gt;<br>
&lt;span&gt;internal&nbsp;network&lt;br&gt;<br>
acl&nbsp;SSL_ports&nbsp;port&nbsp;443 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;https&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;80 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;http&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;554&nbsp;#&nbsp;rtsp&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;1935 &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;rtmp&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;21 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;ftp&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;443&nbsp;#&nbsp;https&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;1025-65535 &nbsp;#&nbsp;unregistered&nbsp;ports&lt;br&gt;<br>
acl&nbsp;CONNECT&nbsp;method&nbsp;CONNECT&lt;br&gt;<br>
http_access&nbsp;deny&nbsp;!Safe_ports&lt;br&gt;<br>
http_access&nbsp;deny&nbsp;CONNECT&nbsp;!SSL_ports&lt;br&gt;<br>
http_access&nbsp;allow&nbsp;localhost&nbsp;manager&lt;br&gt;<br>
http_access&nbsp;deny&nbsp;manager&lt;br&gt;<br>
http_access&nbsp;deny&nbsp;to_localhost&lt;br&gt;<br>
http_access&nbsp;allow&nbsp;localnet&lt;br&gt;<br>
http_access&nbsp;allow&nbsp;localhost&lt;br&gt;<br>
http_access&nbsp;deny&nbsp;all&lt;br&gt;<br>
&lt;/span&gt;visible_hostname&nbsp;&lt;a&nbsp;href=&quot;http://server.ourhome.net&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;server.ourhome.net&lt;/a&gt;&nbsp;&lt;&lt;a&nbsp;href=&quot;http://server.ourhome.net&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://server.ourhome.net&lt;/a&gt;&gt;&lt;br&gt;<br>
http_port&nbsp;&lt;a&nbsp;href=&quot;http://10.20.30.1:3128&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;10.20.30.1:3128&lt;/a&gt;&nbsp;&lt;&lt;a&nbsp;href=&quot;http://10.20.30.1:3128&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://10.20.30.1:3128&lt;/a&gt;&gt; &nbsp;intercept&lt;br&gt;<br>
disable-pmtu-discovery=transpa&lt;wbr&gt;rent&lt;br&gt;<br>
http_port&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.0:8181&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;127.0.0.0:8181&lt;/a&gt;&nbsp;&lt;&lt;a&nbsp;href=&quot;http://127.0.0.0:8181&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://127.0.0.0:8181&lt;/a&gt;&gt;&lt;br&gt;<br>
&lt;div&nbsp;class=&quot;m_9169695551380365953HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;m_9169695551380365953h5&quot;&gt;coredump_dir&nbsp;/var/cache/squid&lt;br&gt;<br>
refresh_pattern&nbsp;^ftp: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1440 &nbsp; &nbsp;20% &nbsp; &nbsp; 10080&lt;br&gt;<br>
refresh_pattern&nbsp;^gopher: &nbsp; &nbsp; &nbsp; &nbsp;1440 &nbsp; &nbsp;0% &nbsp; &nbsp; &nbsp;1440&lt;br&gt;<br>
refresh_pattern&nbsp;-i&nbsp;(/cgi-bin/|\?)&nbsp;0 &nbsp; &nbsp; 0% &nbsp; &nbsp; &nbsp;0&lt;br&gt;<br>
refresh_pattern&nbsp;. &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp; &nbsp; 20% &nbsp; &nbsp; 4320&lt;br&gt;<br>
#&lt;br&gt;<br>
#&nbsp;Anonymous&nbsp;Proxy&nbsp;settings&lt;br&gt;<br>
include&nbsp;/etc/squid/extra/anonymous.con&lt;wbr&gt;f&lt;br&gt;<br>
#&lt;br&gt;<br>
#&nbsp;Virus&nbsp;scanning&nbsp;via&nbsp;C-ICAP&lt;br&gt;<br>
#&lt;br&gt;<br>
include&nbsp;/etc/squid/extra/c-icap.conf&lt;br&gt;<br>
#&lt;br&gt;<br>
&lt;br&gt;<br>
By&nbsp;the&nbsp;process&nbsp;of&nbsp;elimination&nbsp;I&#39;ve&nbsp;narrowed&nbsp;it&nbsp;down&nbsp;to&nbsp;the&nbsp;anonymous&nbsp;proxy&lt;br&gt;<br>
settings...&lt;br&gt;<br>
anonymous.conf&lt;br&gt;<br>
&lt;br&gt;<br>
forwarded_for&nbsp;off&lt;br&gt;<br>
request_header_access&nbsp;Allow&nbsp;allow&nbsp;all&lt;br&gt;<br>
request_header_access&nbsp;Authorization&nbsp;allow&nbsp;all&lt;br&gt;<br>
request_header_access&nbsp;WWW-Authenticate&nbsp;allow&nbsp;all&lt;br&gt;<br>
request_header_access&nbsp;Proxy-Authorization&nbsp;allow&nbsp;all&lt;br&gt;<br>
request_header_access&nbsp;Proxy-Authenticate&nbsp;allow&nbsp;all&lt;br&gt;<br>
request_header_access&nbsp;Cache-Control&nbsp;allow&nbsp;all&lt;br&gt;<br>
request_header_access&nbsp;Content-Encoding&nbsp;allow&nbsp;all&lt;br&gt;<br>
request_header_access&nbsp;Content-Length&nbsp;allow&nbsp;all&lt;br&gt;<br>
request_header_access&nbsp;Content-Type&nbsp;allow&nbsp;all&lt;br&gt;<br>
request_header_access&nbsp;Date&nbsp;allow&nbsp;all&lt;br&gt;<br>
request_header_access&nbsp;Expires&nbsp;allow&nbsp;all&lt;br&gt;<br>
request_header_access&nbsp;Host&nbsp;allow&nbsp;all&lt;br&gt;<br>
request_header_access&nbsp;If-Modified-Since&nbsp;allow&nbsp;all&lt;br&gt;<br>
request_header_access&nbsp;Last-Modified&nbsp;allow&nbsp;all&lt;br&gt;<br>
request_header_access&nbsp;Location&nbsp;allow&nbsp;all&lt;br&gt;<br>
request_header_access&nbsp;Pragma&nbsp;allow&nbsp;all&lt;br&gt;<br>
request_header_access&nbsp;Accept&nbsp;allow&nbsp;all&lt;br&gt;<br>
request_header_access&nbsp;Accept-Charset&nbsp;allow&nbsp;all&lt;br&gt;<br>
request_header_access&nbsp;Accept-Encoding&nbsp;allow&nbsp;all&lt;br&gt;<br>
request_header_access&nbsp;Accept-Language&nbsp;allow&nbsp;all&lt;br&gt;<br>
request_header_access&nbsp;Content-Language&nbsp;allow&nbsp;all&lt;br&gt;<br>
request_header_access&nbsp;Mime-Version&nbsp;allow&nbsp;all&lt;br&gt;<br>
request_header_access&nbsp;Retry-After&nbsp;allow&nbsp;all&lt;br&gt;<br>
request_header_access&nbsp;Title&nbsp;allow&nbsp;all&lt;br&gt;<br>
request_header_access&nbsp;Connection&nbsp;allow&nbsp;all&lt;br&gt;<br>
request_header_access&nbsp;Proxy-Connection&nbsp;allow&nbsp;all&lt;br&gt;<br>
request_header_access&nbsp;User-Agent&nbsp;allow&nbsp;all&lt;br&gt;<br>
request_header_access&nbsp;Cookie&nbsp;allow&nbsp;all&lt;br&gt;<br>
request_header_access&nbsp;All&nbsp;deny&nbsp;all&lt;br&gt;<br>
&lt;br&gt;<br>
could&nbsp;someone&nbsp;please&nbsp;tell&nbsp;me&nbsp;what&nbsp;request_header_access&nbsp;I&nbsp;need&nbsp;to&nbsp;all,&nbsp;or&lt;br&gt;<br>
how&nbsp;to&nbsp;further&nbsp;trouble&nbsp;shoot&nbsp;this&nbsp;configuration?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
