<tt>
&lt;div&gt;Hello,&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;using&nbsp;Squid&nbsp;3.5.20&nbsp;in&nbsp;intercept&nbsp;mode&nbsp;for&nbsp;HTTP&nbsp;and&nbsp;HTTPS&nbsp;traffic&nbsp;with&nbsp;my&nbsp;OpenBSD&nbsp;6.0&nbsp;firewall.&nbsp;For&nbsp;some&nbsp;internal&nbsp;servers&nbsp;located&nbsp;on&nbsp;two&nbsp;different&nbsp;subdomains&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;access&nbsp;these&nbsp;directly&nbsp;and&nbsp;as&nbsp;such&nbsp;bypass&nbsp;the&nbsp;Squid&nbsp;proxy.&nbsp;Is&nbsp;this&nbsp;possible&nbsp;to&nbsp;achieve&nbsp;that&nbsp;using&nbsp;the&nbsp;an&nbsp;acl&nbsp;and&nbsp;always_direct&nbsp;parameters&nbsp;of&nbsp;Squid?&nbsp;I&nbsp;tried&nbsp;it&nbsp;out&nbsp;but&nbsp;checking&nbsp;the&nbsp;squid&nbsp;access.log&nbsp;file&nbsp;I&nbsp;still&nbsp;see&nbsp;the&nbsp;accesses&nbsp;going&nbsp;through&nbsp;the&nbsp;proxy.&nbsp;You&nbsp;will&nbsp;find&nbsp;below&nbsp;my&nbsp;squid.conf&nbsp;file,&nbsp;you&nbsp;will&nbsp;find&nbsp;the&nbsp;acl/always_direct&nbsp;in&nbsp;the&nbsp;last&nbsp;3&nbsp;lines&nbsp;of&nbsp;my&nbsp;config.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;for&nbsp;your&nbsp;help.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;br&gt;&lt;/div&gt;&lt;div&gt;Mabi&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;acl&nbsp;localnet&nbsp;src&nbsp;10.0.0.0/8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;RFC1918&nbsp;possible&nbsp;internal&nbsp;network&lt;br&gt;&lt;/div&gt;&lt;div&gt;acl&nbsp;localnet&nbsp;src&nbsp;172.16.0.0/12&nbsp;&nbsp;#&nbsp;RFC1918&nbsp;possible&nbsp;internal&nbsp;network&lt;br&gt;&lt;/div&gt;&lt;div&gt;acl&nbsp;localnet&nbsp;src&nbsp;192.168.0.0/16&nbsp;#&nbsp;RFC1918&nbsp;possible&nbsp;internal&nbsp;network&lt;br&gt;&lt;/div&gt;&lt;div&gt;acl&nbsp;localnet&nbsp;src&nbsp;fc00::/7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;RFC&nbsp;4193&nbsp;local&nbsp;private&nbsp;network&nbsp;range&lt;br&gt;&lt;/div&gt;&lt;div&gt;acl&nbsp;localnet&nbsp;src&nbsp;fe80::/10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;RFC&nbsp;4291&nbsp;link-local&nbsp;(directly&nbsp;plugged)&nbsp;machines&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;acl&nbsp;SSL_ports&nbsp;port&nbsp;443&lt;br&gt;&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;http&lt;br&gt;&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;21&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;ftp&lt;br&gt;&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;443&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;https&lt;br&gt;&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;70&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;gopher&lt;br&gt;&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;210&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;wais&lt;br&gt;&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;1025-65535&nbsp;&nbsp;#&nbsp;unregistered&nbsp;ports&lt;br&gt;&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;280&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;http-mgmt&lt;br&gt;&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;488&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;gss-http&lt;br&gt;&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;591&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;filemaker&lt;br&gt;&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;777&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;multiling&nbsp;http&lt;br&gt;&lt;/div&gt;&lt;div&gt;acl&nbsp;CONNECT&nbsp;method&nbsp;CONNECT&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;http_access&nbsp;deny&nbsp;!Safe_ports&lt;br&gt;&lt;/div&gt;&lt;div&gt;http_access&nbsp;deny&nbsp;CONNECT&nbsp;!SSL_ports&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;http_access&nbsp;allow&nbsp;localhost&nbsp;manager&lt;br&gt;&lt;/div&gt;&lt;div&gt;http_access&nbsp;deny&nbsp;manager&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;http_access&nbsp;allow&nbsp;localnet&lt;br&gt;&lt;/div&gt;&lt;div&gt;http_access&nbsp;allow&nbsp;localhost&lt;br&gt;&lt;/div&gt;&lt;div&gt;http_access&nbsp;deny&nbsp;all&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;coredump_dir&nbsp;/var/squid/cache&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;refresh_pattern&nbsp;^ftp:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1440&nbsp;&nbsp;&nbsp;&nbsp;20%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10080&lt;br&gt;&lt;/div&gt;&lt;div&gt;refresh_pattern&nbsp;^gopher:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1440&nbsp;&nbsp;&nbsp;&nbsp;0%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1440&lt;br&gt;&lt;/div&gt;&lt;div&gt;refresh_pattern&nbsp;-i&nbsp;(/cgi-bin/|\?)&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&lt;br&gt;&lt;/div&gt;&lt;div&gt;refresh_pattern&nbsp;.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;20%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4320&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;url_rewrite_program&nbsp;/usr/local/bin/squidGuard&nbsp;-c&nbsp;/etc/squidguard/squidguard.conf&lt;br&gt;&lt;/div&gt;&lt;div&gt;url_rewrite_children&nbsp;19&nbsp;startup=15&nbsp;idle=10&nbsp;concurrency=0&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;http_port&nbsp;127.0.0.1:3129&nbsp;intercept&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;cache_mem&nbsp;1024&nbsp;MB&lt;br&gt;&lt;/div&gt;&lt;div&gt;maximum_object_size_in_memory&nbsp;8&nbsp;MB&lt;br&gt;&lt;/div&gt;&lt;div&gt;cache_dir&nbsp;ufs&nbsp;/var/squid/cache&nbsp;800&nbsp;16&nbsp;64&lt;br&gt;&lt;/div&gt;&lt;div&gt;minimum_object_size&nbsp;3&nbsp;KB&lt;br&gt;&lt;/div&gt;&lt;div&gt;maximum_object_size&nbsp;6&nbsp;MB&lt;br&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;ipcache_size&nbsp;10240&lt;br&gt;&lt;/div&gt;&lt;div&gt;fqdncache_size&nbsp;10240&lt;br&gt;&lt;/div&gt;&lt;div&gt;max_filedescriptors&nbsp;4096&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;https_port&nbsp;127.0.0.1:3130&nbsp;intercept&nbsp;ssl-bump&nbsp;generate-host-certificates=on&nbsp;dynamic_cert_mem_cache_size=4MB&nbsp;cert=/etc/squid/proxy-ca.pem&nbsp;key=/etc/squid/proxy-ca.pem&lt;br&gt;&lt;/div&gt;&lt;div&gt;acl&nbsp;step1&nbsp;at_step&nbsp;SslBump1&lt;br&gt;&lt;/div&gt;&lt;div&gt;ssl_bump&nbsp;peek&nbsp;step1&lt;br&gt;&lt;/div&gt;&lt;div&gt;ssl_bump&nbsp;bump&nbsp;all&lt;br&gt;&lt;/div&gt;&lt;div&gt;sslproxy_cipher&nbsp;EECDH+ECDSA+AESGCM:EECDH+aRSA+AESGCM:EECDH+ECDSA+SHA384:EECDH+ECDSA+SHA256:EECDH+aRSA+SHA384:EECDH+aRSA+SHA256:EECDH+aRSA+RC4:EECDH:EDH+aRSA:HIGH:!RC4:!aNULL:!eNULL:!LOW:!3DES:!MD5:!EXP:!PSK:!SRP:!DSS&lt;br&gt;&lt;/div&gt;&lt;div&gt;sslcrtd_program&nbsp;/usr/local/libexec/squid/ssl_crtd&nbsp;-s&nbsp;/var/squid/ssl_db&nbsp;-M&nbsp;4MB&lt;br&gt;&lt;/div&gt;&lt;div&gt;sslcrtd_children&nbsp;8&nbsp;startup=1&nbsp;idle=1&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;acl&nbsp;local-servers&nbsp;dstdomain&nbsp;.internal.domain.net&lt;br&gt;&lt;/div&gt;&lt;div&gt;acl&nbsp;local-servers&nbsp;dstdomain&nbsp;.dmz.domain.net&lt;br&gt;&lt;/div&gt;&lt;div&gt;always_direct&nbsp;allow&nbsp;local-servers&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;protonmail_signature_block-empty&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;protonmail_signature_block&nbsp;protonmail_signature_block-empty&quot;&gt;&lt;div&nbsp;class=&quot;protonmail_signature_block-user&nbsp;protonmail_signature_block-empty&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;protonmail_signature_block-proton&nbsp;protonmail_signature_block-empty&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;protonmail_signature_block-empty&quot;&gt;&lt;br&gt;&lt;/div&gt;
</tt>
