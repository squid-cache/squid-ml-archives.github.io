<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Dec&nbsp;2,&nbsp;2016&nbsp;at&nbsp;6:27&nbsp;AM,&nbsp;klops&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:lo.kenneth@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;lo.kenneth@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;id=&quot;:46t&quot;&nbsp;class=&quot;a3s&nbsp;aXjCH&nbsp;m158bb78f33698687&quot;&gt;Does&nbsp;this&nbsp;mean&nbsp;the&nbsp;squid&nbsp;box&nbsp;has&nbsp;to&nbsp;be&nbsp;the&nbsp;overall&nbsp;gateway&nbsp;for&nbsp;the&nbsp;internal&lt;br&gt;<br>
network&nbsp;for&nbsp;transparrancy&nbsp;to&nbsp;work?&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;reason&nbsp;the&nbsp;proposed&nbsp;setup&nbsp;the&nbsp;way&nbsp;it&nbsp;is&nbsp;is&nbsp;because&nbsp;AWS&nbsp;VPCÂ &nbsp;service&nbsp;has&lt;br&gt;<br>
a&nbsp;service&nbsp;based&nbsp;NAT&nbsp;gateway&nbsp;which&nbsp;we&nbsp;have&nbsp;not&nbsp;low&nbsp;level&nbsp;control&nbsp;over&nbsp;and&nbsp;it&lt;br&gt;<br>
is&nbsp;the&nbsp;default&nbsp;gateway.&nbsp;We&nbsp;want&nbsp;to&nbsp;only&nbsp;route&nbsp;http/https&nbsp;traffic&nbsp;over&nbsp;to&lt;br&gt;<br>
squid&nbsp;and&nbsp;the&nbsp;rest&nbsp;via&nbsp;their&nbsp;NAT&nbsp;gateway&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;Couldn&#39;t&nbsp;you&nbsp;configure&nbsp;those&nbsp;VPC&nbsp;networks&nbsp;so&nbsp;that&nbsp;the&nbsp;AWS&nbsp;default&nbsp;route&nbsp;is&nbsp;dead&nbsp;by&nbsp;blocking&nbsp;all&nbsp;outbound&nbsp;(ie&nbsp;of&nbsp;no&nbsp;useable&nbsp;value&nbsp;to&nbsp;the&nbsp;EC2&nbsp;hosts)&nbsp;and&nbsp;tell&nbsp;the&nbsp;EC2&nbsp;hosts&nbsp;owners&nbsp;to&nbsp;change&nbsp;their&nbsp;boot&nbsp;scripts&nbsp;to&nbsp;delete&nbsp;the&nbsp;default&nbsp;gateway&nbsp;and&nbsp;replace&nbsp;it&nbsp;with&nbsp;your&nbsp;squid&nbsp;router?&nbsp;(which&nbsp;does&nbsp;have&nbsp;Internet&nbsp;access).&nbsp;That&nbsp;way&nbsp;you&nbsp;are&nbsp;&quot;regaining&nbsp;control&quot;&nbsp;of&nbsp;your&nbsp;network,&nbsp;and&nbsp;EC2&nbsp;owners&nbsp;are&nbsp;&quot;motivated&quot;&nbsp;to&nbsp;Do&nbsp;The&nbsp;Right&nbsp;Thing&nbsp;:-)&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;Then&nbsp;there&#39;d&nbsp;be&nbsp;no&nbsp;need&nbsp;for&nbsp;iptable&nbsp;tricks&nbsp;on&nbsp;the&nbsp;clients.&nbsp;Also&nbsp;means&nbsp;you&nbsp;could&nbsp;apply&nbsp;this&nbsp;to&nbsp;Windows&nbsp;EC2&nbsp;systems&nbsp;too&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;I&#39;m&nbsp;not&nbsp;an&nbsp;AWS&nbsp;guru&nbsp;so&nbsp;I&nbsp;have&nbsp;no&nbsp;idea&nbsp;if&nbsp;that&nbsp;works.&nbsp;I&#39;m&nbsp;assuming&nbsp;a&nbsp;VPC&nbsp;is&nbsp;like&nbsp;a&nbsp;VLAN&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&nbsp;data-smartmail=&quot;gmail_signature&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Cheers&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Jason&nbsp;Haar&lt;/div&gt;&lt;div&gt;Information&nbsp;Security&nbsp;Manager,&nbsp;Trimble&nbsp;Navigation&nbsp;Ltd.&lt;/div&gt;&lt;div&gt;Phone:&nbsp;+1&nbsp;408&nbsp;481&nbsp;8171&lt;/div&gt;&lt;div&gt;PGP&nbsp;Fingerprint:&nbsp;7A2E&nbsp;0407&nbsp;C9A6&nbsp;CAF6&nbsp;2B9F&nbsp;8422&nbsp;C063&nbsp;5EBB&nbsp;FE1D&nbsp;66D1&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;<br>

</tt>
