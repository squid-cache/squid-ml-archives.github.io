<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hi&nbsp;guys,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;an&nbsp;active&nbsp;directory&nbsp;running&nbsp;on&nbsp;windows&nbsp;server&nbsp;2008&nbsp;r2&nbsp;and&nbsp;squid&nbsp;(version&nbsp;3.5.20&nbsp;-&nbsp;CentOS&nbsp;7) authenticating&nbsp;via&nbsp;LDAP&nbsp;(without&nbsp;kerberos). &lt;/div&gt;&lt;div&gt;The&nbsp;ldap&nbsp;authentication&nbsp;is&nbsp;working,&nbsp;the&nbsp;trouble&nbsp;is&nbsp;to&nbsp;create&nbsp;ACLs&nbsp;based&nbsp;on&nbsp;active&nbsp;directory&nbsp;groups.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;OBS:&nbsp;When&nbsp;I&nbsp;run&nbsp;both&nbsp;basic_ldap_auth&nbsp;and&nbsp;ext_ldap_group_acl&nbsp;commands&nbsp;manually&nbsp;as&nbsp;squid&nbsp;user&nbsp;in&nbsp;console&nbsp;to&nbsp;test,&nbsp;I&nbsp;receive&nbsp;&#39;OK&#39;&nbsp;as&nbsp;answer.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;---&gt;&gt;&gt;&nbsp;My&nbsp;squid.conf:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;auth_param&nbsp;basic&nbsp;program&nbsp;/usr/lib64/squid/basic_ldap_auth&nbsp;-P&nbsp;-R&nbsp;-b&nbsp;ou=Users,ou=city,ou=country,dc=company,dc=local&nbsp;-D&nbsp;CN=bindUser,DC=company,DC=local&nbsp;-W&nbsp;PasswdFile&nbsp;-f&nbsp;sAMAccountName=%s&nbsp;-h&nbsp;192.168.1.9&lt;/div&gt;&lt;div&gt;auth_param&nbsp;basic&nbsp;children&nbsp;10&lt;/div&gt;&lt;div&gt;auth_param&nbsp;basic&nbsp;realm&nbsp;XXXXX&lt;/div&gt;&lt;div&gt;auth_param&nbsp;basic&nbsp;credentialsttl&nbsp;10&nbsp;minutes&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;external_acl_type&nbsp;memberof&nbsp;%LOGIN&nbsp;/usr/lib64/squid/ext_ldap_group_acl&nbsp;-P&nbsp;-R&nbsp;-b&nbsp;OU=city,OU=country,DC=company,DC=local&nbsp;-D&nbsp;CN=bindUser,DC=company,DC=local&nbsp;-W&nbsp;PasswdFile&nbsp;-h&nbsp;192.168.1.9&nbsp;-f&nbsp;&#39;(&amp;(objectClass=person)(sAMAccountName=%v)(memberOf=CN=%a,OU=Groups,OU=city,OU=country,dc=company,dc=local))&#39;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail-Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;#Also&nbsp;tried&nbsp;memberOf=CN=%&lt;b&gt;g&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;acl&nbsp;fullaccess&nbsp; external&nbsp;memberof&nbsp;squid_fullaccess&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;acl&nbsp;LdapUsers&nbsp;proxy_auth&nbsp;REQUIRED&lt;/div&gt;&lt;div&gt;http_access&nbsp;allow&nbsp;fullaccess&nbsp;LdapUsers&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;###&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;When&nbsp;I&nbsp;try&nbsp;to&nbsp;authenticate&nbsp;on&nbsp;proxy&nbsp;it&nbsp;still&nbsp;prompting&nbsp;for&nbsp;user/password&nbsp;and&nbsp;any&nbsp;ldap&nbsp;query&nbsp;was&nbsp;done&nbsp;in&nbsp;domain&nbsp;controller&nbsp;looking&nbsp;to&nbsp;check&nbsp;if&nbsp;user&nbsp;is&nbsp;member&nbsp;of&nbsp;squid_fullaccess&nbsp;group.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Can&nbsp;you&nbsp;give&nbsp;me&nbsp;some&nbsp;help&nbsp;please&nbsp;?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Many&nbsp;thanks!&lt;/div&gt;&lt;/div&gt;<br>

</tt>
