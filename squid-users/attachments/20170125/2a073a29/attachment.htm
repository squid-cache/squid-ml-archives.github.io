<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;   &nbsp;Hi&nbsp;all.&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;   &nbsp;I&nbsp;using&nbsp;squid&nbsp;3.4.8&nbsp;over&nbsp;Debian&nbsp;as&nbsp;reverse&nbsp;proxy&nbsp;in&nbsp;order&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;protect&nbsp;with&nbsp;SSL&nbsp;some&nbsp;of&nbsp;our&nbsp;servers.&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;   &nbsp;I&nbsp;have&nbsp;an&nbsp;issue&nbsp;when&nbsp;I&nbsp;try&nbsp;to&nbsp;&quot;redirect&quot;&nbsp;to&nbsp;port&nbsp;443&nbsp;users<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;try&nbsp;to&nbsp;connect&nbsp;to&nbsp;port&nbsp;80.&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;   &nbsp;As&nbsp;is&nbsp;said&nbsp;here<br>
(&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://lists.squid-cache.org/pipermail/squid-users/2016-September/012669.html&quot;&gt;http://lists.squid-cache.org/pipermail/squid-users/2016-September/012669.html&lt;/a&gt;),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;we&nbsp;use&nbsp;this&nbsp;lines&nbsp;in&nbsp;our&nbsp;configuration.&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&gt;[...]<br>
http_port&nbsp;80&nbsp;accel&nbsp;vport<br>
acl&nbsp;HTTP&nbsp;proto&nbsp;HTTP<br>
deny_info&nbsp;301:&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;https://%H%R&quot;&gt;https://%H%R&lt;/a&gt;&nbsp;HTTP<br>
http_access&nbsp;deny&nbsp;HTTP<br>
[...]<br>
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;works&nbsp;and&nbsp;send&nbsp;a&nbsp;301&nbsp;reply&nbsp;to&nbsp;the&nbsp;client,&nbsp;but&nbsp;the&nbsp;problem&nbsp;is&nbsp;that&nbsp;it&nbsp;changes&nbsp;the&nbsp;requested&nbsp;URL.&nbsp;Particularly&nbsp;it&nbsp;changes&nbsp;&quot;&amp;&quot;&nbsp;for&nbsp;&quot;&amp;amp;&quot;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;a&nbsp;real&nbsp;example:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;client&nbsp;request&nbsp;next&nbsp;URL&nbsp;on&nbsp;port&nbsp;80:<br>
<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://masivos.coam.org/Masivos/URLProcesador?id_envio=2689&amp;token=20161202122625195AMVnxAmHS2lwgc5JoFd2HCHi9fBipvoesVlpMWw3RpJ5yratkcx3ucbBRwpHPs1pNouvpP99UuWWxn359pnXnetQKrekCDZjCo65&amp;id=0&amp;semilla=20150710135955907GDEjFCZNveaoPsXs34Npc2JUQWF3PcCFjcAadFbToAFCqfQqX3cS6xeyh5NVEb31tNa4YqtE9pWFFxoqnT6wWhTrbMNEVKp7guyx&amp;email=prueba2@coam.org&quot;&gt;http://masivos.coam.org/Masivos/URLProcesador?id_envio=2689&amp;token=20161202122625195AMVnxAmHS2lwgc5JoFd2HCHi9fBipvoesVlpMWw3RpJ5yratkcx3ucbBRwpHPs1pNouvpP99UuWWxn359pnXnetQKrekCDZjCo65&amp;id=0&amp;semilla=20150710135955907GDEjFCZNveaoPsXs34Npc2JUQWF3PcCFjcAadFbToAFCqfQqX3cS6xeyh5NVEb31tNa4YqtE9pWFFxoqnT6wWhTrbMNEVKp7guyx&amp;email=prueba2@coam.org&lt;/a&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;client&nbsp;receives&nbsp;301&nbsp;error&nbsp;code&nbsp;requesting&nbsp;him&nbsp;to&nbsp;go&nbsp;to:<br>
<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;https://masivos.coam.org/Masivos/URLProcesador?id_envio=2689&amp;amp;token=20161202122625195AMVnxAmHS2lwgc5JoFd2HCHi9fBipvoesVlpMWw3RpJ5yratkcx3ucbBRwpHPs1pNouvpP99UuWWxn359pnXnetQKrekCDZjCo65&amp;amp;id=0&amp;amp;semilla=20150710135955907GDEjFCZNveaoPsXs34Npc2JUQWF3PcCFjcAadFbToAFCqfQqX3cS6xeyh5NVEb31tNa4YqtE9pWFFxoqnT6wWhTrbMNEVKp7guyx&amp;amp;email=prueba2@coam.org&quot;&gt;https://masivos.coam.org/Masivos/URLProcesador?id_envio=2689&amp;amp;token=20161202122625195AMVnxAmHS2lwgc5JoFd2HCHi9fBipvoesVlpMWw3RpJ5yratkcx3ucbBRwpHPs1pNouvpP99UuWWxn359pnXnetQKrekCDZjCo65&amp;amp;id=0&amp;amp;semilla=20150710135955907GDEjFCZNveaoPsXs34Npc2JUQWF3PcCFjcAadFbToAFCqfQqX3cS6xeyh5NVEb31tNa4YqtE9pWFFxoqnT6wWhTrbMNEVKp7guyx&amp;amp;email=prueba2@coam.org&lt;/a&gt;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;   &nbsp;How&nbsp;can&nbsp;I&nbsp;solve&nbsp;that?&nbsp;Is&nbsp;this&nbsp;a&nbsp;bug&nbsp;or&nbsp;something&nbsp;that&nbsp;can&nbsp;be<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;solved&nbsp;changing&nbsp;configuration.&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;   &nbsp;Thank&nbsp;you.&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;moz-signature&quot;&gt;--&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;style&nbsp;type=&quot;text/css&quot;&gt;<br>
body,td,th&nbsp;{font-family:&nbsp;Verdana,&nbsp;Geneva,&nbsp;sans-serif;&nbsp;font-size:&nbsp;11px;&nbsp;color:#16497d;}<br>
a:link&nbsp;{color:&nbsp;#4687a3;&nbsp;text-decoration:&nbsp;none;}<br>
a:visited&nbsp;{color:&nbsp;#4687a3;&nbsp;text-decoration:&nbsp;none;}<br>
a:hover&nbsp;{&nbsp;color:&nbsp;#4687a3;&nbsp;text-decoration:&nbsp;none;}<br>
a:active&nbsp;{&nbsp;color:&nbsp;#4687a3;&nbsp;text-decoration:&nbsp;none;}<br>
#logo&nbsp;&nbsp;{position:absolute;&nbsp;top:0px;&nbsp;right:auto;&nbsp;bottom:auto;&nbsp;left:0px;&nbsp;border:none;}&lt;/style&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Javier&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
