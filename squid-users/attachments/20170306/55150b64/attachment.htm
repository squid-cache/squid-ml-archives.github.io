<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&nbsp;style=&quot;font-size:12.8px&quot;&gt;Greetings,&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;p&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;1em;padding:0px;border:0px;font-size:15px;clear:both;color:rgb(36,39,41);font-family:arial,&quot;helvetica&nbsp;neue&quot;,helvetica,sans-serif&quot;&gt;I&nbsp;have&nbsp;implemented&nbsp;the&nbsp;following &lt;a&nbsp;href=&quot;https://www.digitalocean.com/community/tutorials/how-to-install-squid-proxy-on-centos-6&quot;&nbsp;rel=&quot;nofollow&nbsp;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&nbsp;style=&quot;color:rgb(0,89,153);margin:0px;padding:0px;border-width:0px&nbsp;0px&nbsp;1px;border-top-style:initial;border-right-style:initial;border-bottom-style:dotted;border-left-style:initial;border-top-color:initial;border-right-color:initial;border-bottom-color:rgb(69,69,69);border-left-color:initial;text-decoration:none&quot;&gt;tutorial&lt;/a&gt; from&nbsp;digital&nbsp;ocean&nbsp;which&nbsp;sets&nbsp;up&nbsp;squid&nbsp;with&nbsp;settings&nbsp;to&nbsp;not&nbsp;have&nbsp;my&nbsp;IP&nbsp;address&nbsp;forwarded.&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;1em;padding:0px;border:0px;font-size:15px;clear:both;color:rgb(36,39,41);font-family:arial,&quot;helvetica&nbsp;neue&quot;,helvetica,sans-serif&quot;&gt;I&#39;m&nbsp;finding&nbsp;however&nbsp;that&nbsp;my&nbsp;local&nbsp;IP&nbsp;is&nbsp;still&nbsp;detected&nbsp;when&nbsp;I&nbsp;google&nbsp;what&nbsp;my&nbsp;local&nbsp;ip&nbsp;address&nbsp;is. &nbsp;I&#39;ve&nbsp;configured&nbsp;firefox&nbsp;browser&nbsp;to&nbsp;use&nbsp;the&nbsp;proxy&nbsp;and&nbsp;have&nbsp;confirmed&nbsp;that&nbsp;it&nbsp;is&nbsp;using&nbsp;the&nbsp;proxy.&nbsp;Additionally&nbsp;https&nbsp;goes&nbsp;through&nbsp;the&nbsp;proxy&nbsp;however&nbsp;http&nbsp;is&nbsp;blocked.&nbsp;I&#39;d&nbsp;like&nbsp;to&nbsp;ensure&nbsp;that&nbsp;http&nbsp;is&nbsp;not&nbsp;blocked.&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;1em;padding:0px;border:0px;font-size:15px;clear:both;color:rgb(36,39,41);font-family:arial,&quot;helvetica&nbsp;neue&quot;,helvetica,sans-serif&quot;&gt;What&nbsp;changes&nbsp;do&nbsp;I&nbsp;need&nbsp;to&nbsp;make&nbsp;to&nbsp;get&nbsp;this&nbsp;working&nbsp;as&nbsp;desired?&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;1em;padding:0px;border:0px;font-size:15px;clear:both;color:rgb(36,39,41);font-family:arial,&quot;helvetica&nbsp;neue&quot;,helvetica,sans-serif&quot;&gt;Here&nbsp;is&nbsp;the&nbsp;squid&nbsp;config&nbsp;setup:&lt;/p&gt;&lt;pre&nbsp;style=&quot;white-space:pre-wrap;margin-top:0px;margin-bottom:1em;padding:5px;border:0px;font-size:13px;width:auto;max-height:600px;overflow:auto;font-family:consolas,menlo,monaco,&quot;lucida&nbsp;console&quot;,&quot;liberation&nbsp;mono&quot;,&quot;dejavu&nbsp;sans&nbsp;mono&quot;,&quot;bitstream&nbsp;vera&nbsp;sans&nbsp;mono&quot;,&quot;courier&nbsp;new&quot;,monospace,sans-serif;background-color:rgb(239,240,241);word-wrap:normal;color:rgb(36,39,41)&quot;&gt;&lt;code&nbsp;style=&quot;margin:0px;padding:0px;border:0px;font-family:consolas,menlo,monaco,&quot;lucida&nbsp;console&quot;,&quot;liberation&nbsp;mono&quot;,&quot;dejavu&nbsp;sans&nbsp;mono&quot;,&quot;bitstream&nbsp;vera&nbsp;sans&nbsp;mono&quot;,&quot;courier&nbsp;new&quot;,monospace,sans-serif;white-space:inherit&quot;&gt;[root@CENTOSMASTER&nbsp;~]#&nbsp;cat&nbsp;/etc/squid/squid.conf<br>
#<br>
#&nbsp;Recommended&nbsp;minimum&nbsp;configuration:<br>
#<br>
acl&nbsp;manager&nbsp;proto&nbsp;cache_object<br>
acl&nbsp;localhost&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1/32&quot;&nbsp;target=&quot;_blank&quot;&gt;127.0.0.1/32&lt;/a&gt;&nbsp;::1<br>
acl&nbsp;to_localhost&nbsp;dst&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.0/8&quot;&nbsp;target=&quot;_blank&quot;&gt;127.0.0.0/8&lt;/a&gt;&nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0/32&quot;&nbsp;target=&quot;_blank&quot;&gt;0.0.0.0/32&lt;/a&gt;&nbsp;::1<br>
<br>
#&nbsp;Example&nbsp;rule&nbsp;allowing&nbsp;access&nbsp;from&nbsp;your&nbsp;local&nbsp;networks.<br>
#&nbsp;Adapt&nbsp;to&nbsp;list&nbsp;your&nbsp;(internal)&nbsp;IP&nbsp;networks&nbsp;from&nbsp;where&nbsp;browsing<br>
#&nbsp;should&nbsp;be&nbsp;allowed<br>
acl&nbsp;localnet&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://10.0.0.0/8&quot;&nbsp;target=&quot;_blank&quot;&gt;10.0.0.0/8&lt;/a&gt;&nbsp;#&nbsp;RFC1918&nbsp;possible&nbsp;internal&nbsp;network<br>
acl&nbsp;localnet&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://172.16.0.0/12&quot;&nbsp;target=&quot;_blank&quot;&gt;172.16.0.0/12&lt;/a&gt;&nbsp;&nbsp;#&nbsp;RFC1918&nbsp;possible&nbsp;internal&nbsp;network<br>
acl&nbsp;localnet&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://192.168.0.0/16&quot;&nbsp;target=&quot;_blank&quot;&gt;192.168.0.0/16&lt;/a&gt;&nbsp;#&nbsp;RFC1918&nbsp;possible&nbsp;internal&nbsp;network<br>
acl&nbsp;localnet&nbsp;src&nbsp;fc00::/7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;RFC&nbsp;4193&nbsp;local&nbsp;private&nbsp;network&nbsp;range<br>
acl&nbsp;localnet&nbsp;src&nbsp;fe80::/10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;RFC&nbsp;4291&nbsp;link-local&nbsp;(directly&nbsp;plugged)&nbsp;machines<br>
<br>
acl&nbsp;SSL_ports&nbsp;port&nbsp;443<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;http<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;21&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;ftp<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;443&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;https<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;70&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;gopher<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;210&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;wais<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;1025-65535&nbsp;&nbsp;#&nbsp;unregistered&nbsp;ports<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;280&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;http-mgmt<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;488&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;gss-http<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;591&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;filemaker<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;777&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;multiling&nbsp;http<br>
acl&nbsp;CONNECT&nbsp;method&nbsp;CONNECT<br>
<br>
#<br>
#&nbsp;Recommended&nbsp;minimum&nbsp;Access&nbsp;Permission&nbsp;configuration:<br>
#<br>
#&nbsp;Only&nbsp;allow&nbsp;cachemgr&nbsp;access&nbsp;from&nbsp;localhost<br>
http_access&nbsp;allow&nbsp;manager&nbsp;localhost<br>
http_access&nbsp;deny&nbsp;manager<br>
<br>
#&nbsp;Deny&nbsp;requests&nbsp;to&nbsp;certain&nbsp;unsafe&nbsp;ports<br>
http_access&nbsp;deny&nbsp;!Safe_ports<br>
<br>
#&nbsp;Deny&nbsp;CONNECT&nbsp;to&nbsp;other&nbsp;than&nbsp;secure&nbsp;SSL&nbsp;ports<br>
#http_access&nbsp;deny&nbsp;CONNECT&nbsp;!SSL_ports<br>
<br>
#&nbsp;We&nbsp;strongly&nbsp;recommend&nbsp;the&nbsp;following&nbsp;be&nbsp;uncommented&nbsp;to&nbsp;protect&nbsp;innocent<br>
#&nbsp;web&nbsp;applications&nbsp;running&nbsp;on&nbsp;the&nbsp;proxy&nbsp;server&nbsp;who&nbsp;think&nbsp;the&nbsp;only<br>
#&nbsp;one&nbsp;who&nbsp;can&nbsp;access&nbsp;services&nbsp;on&nbsp;&quot;localhost&quot;&nbsp;is&nbsp;a&nbsp;local&nbsp;user<br>
#http_access&nbsp;deny&nbsp;to_localhost<br>
<br>
#<br>
#&nbsp;INSERT&nbsp;YOUR&nbsp;OWN&nbsp;RULE(S)&nbsp;HERE&nbsp;TO&nbsp;ALLOW&nbsp;ACCESS&nbsp;FROM&nbsp;YOUR&nbsp;CLIENTS<br>
#<br>
<br>
#&nbsp;Example&nbsp;rule&nbsp;allowing&nbsp;access&nbsp;from&nbsp;your&nbsp;local&nbsp;networks.<br>
#&nbsp;Adapt&nbsp;localnet&nbsp;in&nbsp;the&nbsp;ACL&nbsp;section&nbsp;to&nbsp;list&nbsp;your&nbsp;(internal)&nbsp;IP&nbsp;networks<br>
#&nbsp;from&nbsp;where&nbsp;browsing&nbsp;should&nbsp;be&nbsp;allowed<br>
http_access&nbsp;allow&nbsp;localnet<br>
http_access&nbsp;allow&nbsp;localhost<br>
<br>
#&nbsp;And&nbsp;finally&nbsp;deny&nbsp;all&nbsp;other&nbsp;access&nbsp;to&nbsp;this&nbsp;proxy<br>
http_access&nbsp;deny&nbsp;all<br>
<br>
#&nbsp;Squid&nbsp;normally&nbsp;listens&nbsp;to&nbsp;port&nbsp;3128<br>
http_port&nbsp;3128<br>
<br>
#&nbsp;Uncomment&nbsp;and&nbsp;adjust&nbsp;the&nbsp;following&nbsp;to&nbsp;add&nbsp;a&nbsp;disk&nbsp;cache&nbsp;directory.<br>
#cache_dir&nbsp;ufs&nbsp;/var/spool/squid&nbsp;100&nbsp;16&nbsp;256<br>
<br>
#&nbsp;Leave&nbsp;coredumps&nbsp;in&nbsp;the&nbsp;first&nbsp;cache&nbsp;dir<br>
coredump_dir&nbsp;/var/spool/squid<br>
<br>
#&nbsp;Add&nbsp;any&nbsp;of&nbsp;your&nbsp;own&nbsp;refresh_pattern&nbsp;entries&nbsp;above&nbsp;these.<br>
refresh_pattern&nbsp;^ftp:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1440&nbsp;&nbsp;&nbsp;&nbsp;20%&nbsp;10080<br>
refresh_pattern&nbsp;^gopher:&nbsp;&nbsp;&nbsp;&nbsp;1440&nbsp;&nbsp;&nbsp;&nbsp;0%&nbsp;&nbsp;1440<br>
refresh_pattern&nbsp;-i&nbsp;(/cgi-bin/|\?)&nbsp;0&nbsp;0%&nbsp;&nbsp;0<br>
refresh_pattern&nbsp;.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;20%&nbsp;<br>
<br>
via&nbsp;off<br>
forwarded_for&nbsp;off<br>
<br>
request_header_access&nbsp;Allow&nbsp;allow&nbsp;all&nbsp;<br>
request_header_access&nbsp;Authorization&nbsp;allow&nbsp;all&nbsp;<br>
request_header_access&nbsp;WWW-Authenticate&nbsp;allow&nbsp;all&nbsp;<br>
request_header_access&nbsp;Proxy-Authorization&nbsp;allow&nbsp;all&nbsp;<br>
request_header_access&nbsp;Proxy-Authenticate&nbsp;allow&nbsp;all&nbsp;<br>
request_header_access&nbsp;Cache-Control&nbsp;allow&nbsp;all&nbsp;<br>
request_header_access&nbsp;Content-Encoding&nbsp;allow&nbsp;all&nbsp;<br>
request_header_access&nbsp;Content-Length&nbsp;allow&nbsp;all&nbsp;<br>
request_header_access&nbsp;Content-Type&nbsp;allow&nbsp;all&nbsp;<br>
request_header_access&nbsp;Date&nbsp;allow&nbsp;all&nbsp;<br>
request_header_access&nbsp;Expires&nbsp;allow&nbsp;all&nbsp;<br>
request_header_access&nbsp;Host&nbsp;allow&nbsp;all&nbsp;<br>
request_header_access&nbsp;If-Modified-Since&nbsp;allow&nbsp;all&nbsp;<br>
request_header_access&nbsp;Last-Modified&nbsp;allow&nbsp;all&nbsp;<br>
request_header_access&nbsp;Location&nbsp;allow&nbsp;all&nbsp;<br>
request_header_access&nbsp;Pragma&nbsp;allow&nbsp;all&nbsp;<br>
request_header_access&nbsp;Accept&nbsp;allow&nbsp;all&nbsp;<br>
request_header_access&nbsp;Accept-Charset&nbsp;allow&nbsp;all&nbsp;<br>
request_header_access&nbsp;Accept-Encoding&nbsp;allow&nbsp;all&nbsp;<br>
request_header_access&nbsp;Accept-Language&nbsp;allow&nbsp;all&nbsp;<br>
request_header_access&nbsp;Content-Language&nbsp;allow&nbsp;all&nbsp;<br>
request_header_access&nbsp;Mime-Version&nbsp;allow&nbsp;all&nbsp;<br>
request_header_access&nbsp;Retry-After&nbsp;allow&nbsp;all&nbsp;<br>
request_header_access&nbsp;Title&nbsp;allow&nbsp;all&nbsp;<br>
request_header_access&nbsp;Connection&nbsp;allow&nbsp;all&nbsp;<br>
request_header_access&nbsp;Proxy-Connection&nbsp;allow&nbsp;all&nbsp;<br>
request_header_access&nbsp;User-Agent&nbsp;allow&nbsp;all&nbsp;<br>
request_header_access&nbsp;Cookie&nbsp;allow&nbsp;all&nbsp;<br>
request_header_access&nbsp;All&nbsp;deny&nbsp;all&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:12.8px&quot;&gt;I&#39;ve&nbsp;posted&nbsp;the&nbsp;question&nbsp;on&nbsp;stackoverflow&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;a&nbsp;href=&quot;http://serverfault.com/questions/836385/anonymous-squid-setup-on-digital-ocean-centos-6-but-my-ip-still-detected&quot;&nbsp;target=&quot;_blank&quot;&gt;http://serverfault.com/&lt;wbr&gt;questions/836385/anonymous-&lt;wbr&gt;squid-setup-on-digital-ocean-&lt;wbr&gt;centos-6-but-my-ip-still-&lt;wbr&gt;detected&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;Regards&lt;br&gt;&lt;br&gt;&lt;/div&gt;Alex&nbsp;Muir&lt;br&gt;&lt;/div&gt;Chief&nbsp;Data&nbsp;Engineer/Architect&lt;br&gt;&lt;/div&gt;&lt;div&gt;Jahtoe&nbsp;Technology&lt;br&gt;&lt;/div&gt;&lt;a&nbsp;href=&quot;http://tech.jahtoe.com&quot;&nbsp;target=&quot;_blank&quot;&gt;tech.jahtoe.com&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/div&gt;<br>

</tt>
