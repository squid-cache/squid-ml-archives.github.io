<tt>
Ok,&nbsp;I&nbsp;tried&nbsp;that&nbsp;but&nbsp;it&nbsp;didnt&nbsp;work.&nbsp;I&nbsp;can&nbsp;put&nbsp;a&nbsp;conf&nbsp;file&nbsp;here.&nbsp;As&nbsp;a&nbsp;start&nbsp;I&nbsp;am&nbsp;currently&nbsp;in&nbsp;a&nbsp;scenario&nbsp;trying&nbsp;to&nbsp;replace&nbsp;a&nbsp;simple&nbsp;CNTLM&nbsp;HTTP&nbsp;proxy&nbsp;with&nbsp;Squid.&nbsp;I&nbsp;want&nbsp;to&nbsp;configure&nbsp;one&nbsp;account&nbsp;which&nbsp;authenticates&nbsp;with&nbsp;parent&nbsp;proxy&nbsp;send&nbsp;the&nbsp;downstream&nbsp;requests&nbsp;with&nbsp;out&nbsp;taking&nbsp;any&nbsp;creds.&lt;div&nbsp;id=&quot;yMail_cursorElementTracker_1489078781933&quot;&gt;&lt;br&gt;&lt;div&nbsp;id=&quot;ymail_android_signature&quot;&gt;&lt;a&nbsp;href=&quot;https://overview.mail.yahoo.com/mobile/?.src=Android&quot;&gt;Sent&nbsp;from&nbsp;Yahoo&nbsp;Mail&nbsp;on&nbsp;Android&lt;/a&gt;&lt;/div&gt;&nbsp;&lt;br&gt;&nbsp;&lt;blockquote&nbsp;style=&quot;margin:&nbsp;0&nbsp;0&nbsp;20px&nbsp;0;&quot;&gt;&nbsp;&lt;header&nbsp;style=&quot;font-family:Roboto,&nbsp;sans-serif;&nbsp;color:#6D00F6;&quot;&gt;&nbsp;&lt;div&gt;On&nbsp;Thu,&nbsp;Mar&nbsp;9,&nbsp;2017&nbsp;at&nbsp;4:50&nbsp;PM,&nbsp;Amos&nbsp;Jeffries&lt;/div&gt;&lt;div&gt;&lt;squid3@treenet.co.nz&gt;&nbsp;wrote:&lt;/div&gt;&nbsp;&lt;/header&gt;&nbsp;&lt;div&nbsp;style=&quot;padding:&nbsp;10px&nbsp;0&nbsp;0&nbsp;20px;&nbsp;margin:&nbsp;10px&nbsp;0&nbsp;0&nbsp;0;&nbsp;border-left:&nbsp;1px&nbsp;solid&nbsp;#6D00F6;&quot;&gt;&nbsp;On&nbsp;10/03/2017&nbsp;5:19&nbsp;a.m.,&nbsp;S&nbsp;V&nbsp;Hareesh&nbsp;wrote:&lt;div&nbsp;class=&quot;yqt4978479943&nbsp;yQTDBase&quot;&nbsp;id=&quot;yqtfd02078&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;On&nbsp;top&nbsp;of&nbsp;the&nbsp;conf&nbsp;file&nbsp;from&nbsp;default&nbsp;setup&nbsp;on&nbsp;Windows,&nbsp;I&nbsp;added&nbsp;the&nbsp;following&nbsp;line&nbsp;in&nbsp;the&nbsp;conf.&nbsp;I&nbsp;added&nbsp;the&nbsp;dns&nbsp;servers&nbsp;and&nbsp;allowed&nbsp;localhost.&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;cache_peer&nbsp;&lt;corporate_proxy&gt;&nbsp;parent&nbsp;80&nbsp;0&nbsp;default&nbsp;connection-auth=on&nbsp;proxy-only&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;never_direct&nbsp;allow&nbsp;all&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;When&nbsp;I&nbsp;point&nbsp;my&nbsp;browser&nbsp;to&nbsp;this&nbsp;proxy,&nbsp;it&nbsp;gives&nbsp;me&nbsp;407,&nbsp;auth&nbsp;required.&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;Also,&nbsp;configured&nbsp;squid&nbsp;service&nbsp;on&nbsp;windows&nbsp;to&nbsp;run&nbsp;with&nbsp;a&nbsp;service&nbsp;account&nbsp;that&nbsp;has&nbsp;access&nbsp;to&nbsp;Internet/corp&nbsp;proxy.&lt;/div&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;Squid&nbsp;cannot&nbsp;authenticate&nbsp;to&nbsp;a&nbsp;cache_peer&nbsp;using&nbsp;NTLM.&nbsp;It&nbsp;can&nbsp;only&nbsp;do&lt;br&nbsp;clear=&quot;none&quot;&gt;Nagotiate/Kerberos&nbsp;to&nbsp;the&nbsp;parent&nbsp;proxy,&nbsp;and&nbsp;only&nbsp;when&nbsp;&quot;login=NEGOTIATE&quot;&lt;br&nbsp;clear=&quot;none&quot;&gt;is&nbsp;added&nbsp;(with&nbsp;or&nbsp;without&nbsp;a&nbsp;named&nbsp;keytab&nbsp;file).&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;NOTE:&nbsp;'connection-auth=on'&nbsp;is&nbsp;about&nbsp;allowing&nbsp;the&nbsp;browser&nbsp;to&nbsp;use&nbsp;NTLM&nbsp;or&lt;br&nbsp;clear=&quot;none&quot;&gt;Negotiate/Kerberos&nbsp;through&nbsp;the&nbsp;cache_peer.&nbsp;It&nbsp;needs&nbsp;to&nbsp;also&nbsp;have&lt;br&nbsp;clear=&quot;none&quot;&gt;&quot;login=PASSTHRU&quot;&nbsp;if&nbsp;that&nbsp;peer&nbsp;is&nbsp;a&nbsp;proxy&nbsp;(as&nbsp;opposed&nbsp;to&nbsp;a&nbsp;web&nbsp;or&lt;br&nbsp;clear=&quot;none&quot;&gt;Exchange&nbsp;server).&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;See&nbsp;the&nbsp;'AUTHENTICATION&nbsp;OPTIONS'&nbsp;section&nbsp;of&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;&lt;a&nbsp;shape=&quot;rect&quot;&nbsp;href=&quot;http://www.squid-cache.org/Doc/config/cache_peer/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.squid-cache.org/Doc/config/cache_peer/&lt;/a&gt;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;Amos&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;_______________________________________________&lt;br&nbsp;clear=&quot;none&quot;&gt;squid-users&nbsp;mailing&nbsp;list&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;a&nbsp;shape=&quot;rect&quot;&nbsp;ymailto=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;a&nbsp;shape=&quot;rect&quot;&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;div&nbsp;class=&quot;yqt4978479943&nbsp;yQTDBase&quot;&nbsp;id=&quot;yqtfd71688&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;/div&gt;&nbsp;&lt;/div&gt;&nbsp;&lt;/blockquote&gt;&lt;/div&gt;
</tt>
