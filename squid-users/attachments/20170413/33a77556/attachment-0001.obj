 http_port 3128 # this port is what will be used for SSL Proxy on client browser

# should be allowed
acl localnet src 192.168.2.0/24	# RFC1918 possible internal network
acl localnet src 192.168.4.0/24	# RFC1918 possible internal network
acl localnet src 192.168.5.0/24	# RFC1918 possible internal network
acl localnet src 192.168.6.0/24	# RFC1918 possible internal network

acl SSL_ports port 443          # https
acl Safe_ports port 80		# http
acl Safe_ports port 21		# ftp
acl Safe_ports port 443		# https
acl Safe_ports port 70		# gopher
acl Safe_ports port 210		# wais
acl Safe_ports port 1025-65535	# unregistered ports
acl Safe_ports port 280		# http-mgmt
acl Safe_ports port 488		# gss-http
acl Safe_ports port 591		# filemaker
acl Safe_ports port 777		# multiling http
acl Safe_ports port 2000        # PUMIS
acl Safe_ports port 1000        # PUMIS
acl CONNECT method CONNECT

# ******* DELAY POOLS **************
acl WebControl dstdomain .googlevideo.com
acl WebControl dstdomain .facebook.com
acl WebControl dstdomain .dailymotion.com

acl SpecialClients src 192.168.5.0/24 
# General Rule for All unlimited
request_body_max_size 0 KB
delay_pools 2
delay_class 1 2
delay_class 2 2

delay_parameters 1 1250000/1250000 256000/256000
delay_parameters 2 750000/750000 128000/128000

# Limiting YOUTUBE & FACBOOK individual user to  8 * 128.000 Byte/s = 1 Mbit/s and all Available Max upto 6 Mbit/s
delay_access 2 allow WebControl
delay_access 2 deny all
# Limiting Total Bandwidth for individual user to 2 Mb/s and all Available Max upto 10 Mbit/s 
delay_access 1 allow localnet
delay_access 1 deny all

# ********************************** DELAT POOLS END

# Deny CONNECT to other than secure SSL ports
http_access deny !Safe_ports
http_access deny CONNECT !SSL_ports

# Only allow cachemgr access from localhost
http_access allow localhost manager
http_access deny manager


# Example rule allowing access from your local networks.
http_access allow localnet
http_access allow localhost

# http_port 3129 intercept
# https_port 3129 intercept ssl-bump connection-auth=off generate-host-certificates=on dynamic_cert_mem_cache_size=16MB cert=/etc/squid/ssl/squid.pem key=/etc/squid/ssl/squid.key cipher=ECDHE-RSA-RC4-SHA:ECDHE-RSA-AES128-SHA:DHE-RSA-AES128-SHA:DHE-RSA-CAMELLIA128-SHA:AES128-SHA:RC4-SHA:HIGH:!aNULL:!MD5:!ADH


#always_allow all

sslcrtd_program /usr/lib64/squid/ssl_crtd -s /var/lib/squid_ssl_db -M 16MB
sslcrtd_children 50 startup=5 idle=1
ssl_bump server-first all
ssl_bump none localhost

# And finally deny all other access to this proxy
http_access deny all

# Leave coredumps in the first cache dir
coredump_dir /var/spool/squid

# Squid Cache path
cache_dir ufs /var/cache/squid 10000 32 512

# Add any of your own refresh_pattern entries above these.
#
refresh_pattern ^ftp:		1440	20%	10080
refresh_pattern ^gopher:	1440	0%	1440
refresh_pattern -i (/cgi-bin/|\?) 0	0%	0
refresh_pattern .		0	20%	4320
visible_hostname Administrator.Rameez.Pathan
# dns_nameservers 127.0.0.0 192.168.4.12
dns_nameservers 8.8.8.8 4.2.2.2
