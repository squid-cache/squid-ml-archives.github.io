<tt>
&lt;div&gt;I&nbsp;know&nbsp;squid+ecap&nbsp;can&nbsp;modify&nbsp;http&nbsp;response&nbsp;with&nbsp;a&nbsp;relatively&nbsp;fast&nbsp;speed,&nbsp;and&nbsp;I&nbsp;have&nbsp;done&nbsp;that&nbsp;before.&lt;/div&gt;&lt;div&gt;But,&nbsp;in&nbsp;real&nbsp;environment,&nbsp;there&nbsp;is&nbsp;a&nbsp;lot&nbsp;of&nbsp;reqeusts,&nbsp;that&nbsp;don't&nbsp;need&nbsp;processs&nbsp;http&nbsp;response,&nbsp;which&nbsp;would&nbsp;make&nbsp;network&nbsp;slow.&lt;/div&gt;&lt;div&gt;So&nbsp;I&nbsp;am&nbsp;thinking&nbsp;whether&nbsp;I&nbsp;can&nbsp;use&nbsp;libnetfilter_queue&nbsp;to&nbsp;judge&nbsp;that&nbsp;http&nbsp;response&nbsp;has&nbsp;content-type&nbsp;with&nbsp;text/html&nbsp;,&nbsp;if&nbsp;it&nbsp;has&nbsp;such&lt;/div&gt;&lt;div&gt;things,&nbsp;we&nbsp;can&nbsp;redirect&nbsp;the&nbsp;packet&nbsp;to&nbsp;squid&nbsp;or&nbsp;some&nbsp;http&nbsp;parser,&nbsp;then&nbsp;modify&nbsp;it&nbsp;and&nbsp;send&nbsp;it&nbsp;to&nbsp;client.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;don't&nbsp;know&nbsp;whether&nbsp;it&nbsp;can&nbsp;work,&nbsp;if&nbsp;not,&nbsp;can&nbsp;anyone&nbsp;give&nbsp;me&nbsp;some&nbsp;advice.&lt;/div&gt;&lt;div&gt;if&nbsp;it&nbsp;can&nbsp;work&nbsp;like&nbsp;that,&nbsp;how&nbsp;to&nbsp;configure&nbsp;?&lt;/div&gt;&lt;div&gt;Thanks&nbsp;a&nbsp;lot.&lt;/div&gt;&lt;div&gt;&lt;sign&nbsp;signid=&quot;-1&quot;&gt;&lt;/sign&gt;&lt;/div&gt;&lt;div&gt;&lt;qzone&gt;&lt;/qzone&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&lt;/div&gt;&lt;div&gt;&lt;includetail&gt;&lt;!--&lt;![endif]--&gt;&lt;/includetail&gt;&lt;/div&gt;
</tt>
