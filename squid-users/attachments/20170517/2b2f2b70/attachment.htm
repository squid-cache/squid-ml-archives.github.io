<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;dir=&quot;auto&quot;&gt;<br>
&lt;div&gt;Please&nbsp;note&nbsp;if&nbsp;you&nbsp;first&nbsp;let&nbsp;the&nbsp;connect&nbsp;tunnel&nbsp;to&nbsp;succeed&nbsp;(forcing&nbsp;bump)&nbsp;and&nbsp;then&nbsp;block&nbsp;the&nbsp;next&nbsp;coming&nbsp;request&nbsp;through&nbsp;that&nbsp;tunnel&nbsp;-&nbsp;you&nbsp;will&nbsp;get&nbsp;the&nbsp;blocked&nbsp;message&nbsp;displayed.&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;AppleMailSignature&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;AppleMailSignature&quot;&gt;We&nbsp;do&nbsp;it&nbsp;in&nbsp;ICAP&nbsp;(&lt;a&nbsp;href=&quot;https://docs.diladele.com/faq/squid/cannot_connect_to_site_using_https.html&quot;&gt;https://docs.diladele.com/faq/squid/cannot_connect_to_site_using_https.html&lt;/a&gt;)&nbsp;-&nbsp;other&nbsp;community&nbsp;members&nbsp;may&nbsp;know&nbsp;better&nbsp;if<br>
&nbsp;it&nbsp;is&nbsp;possible&nbsp;to&nbsp;do&nbsp;that&nbsp;in&nbsp;Squid&nbsp;directly.&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;AppleMailSignature&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;AppleMailSignature&quot;&gt;Beware&nbsp;of&nbsp;those&nbsp;using&nbsp;your&nbsp;tunnels&nbsp;to&nbsp;pump&nbsp;non&nbsp;http&nbsp;traffic&nbsp;though.&nbsp;Blocking&nbsp;the&nbsp;connect&nbsp;as&nbsp;it&nbsp;is&nbsp;done&nbsp;now&nbsp;in&nbsp;Squid&nbsp;keeps&nbsp;you&nbsp;on&nbsp;safe&nbsp;side.&lt;br&gt;<br>
&lt;br&gt;<br>
Best&nbsp;regards,<br>
&lt;div&gt;Rafael&nbsp;Akchurin&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
Op&nbsp;17&nbsp;mei&nbsp;2017&nbsp;om&nbsp;4:04&nbsp;PM&nbsp;heeft&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&nbsp;het&nbsp;volgende&nbsp;geschreven:&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&lt;div&gt;&lt;span&gt;On&nbsp;17/05/17&nbsp;23:32,&nbsp;chcs&nbsp;wrote:&lt;/span&gt;&lt;br&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;Firefox&nbsp;53.0.2&nbsp;,&nbsp;Chrome&nbsp;58.3029&nbsp;y&nbsp;Opera&nbsp;44&nbsp;display&nbsp;&quot;Proxy&nbsp;Server&nbsp;Refused&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;Connection&quot;&nbsp;page,&nbsp;instead&nbsp;of&nbsp;Squid&nbsp;custom&nbsp;error&nbsp;page,&nbsp;when&nbsp;connect&nbsp;to&nbsp;HTTPS&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;site&nbsp;which&nbsp;blocked&nbsp;by&nbsp;proxy&nbsp;server.&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;For&nbsp;example&nbsp;we&nbsp;try&nbsp;to&nbsp;connect&nbsp;to&nbsp;&lt;a&nbsp;href=&quot;https://www.something.com&quot;&gt;<br>
https://www.something.com&lt;/a&gt;&nbsp;via&nbsp;Squid&nbsp;proxy&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;server&nbsp;which&nbsp;denied&nbsp;with&nbsp;403&nbsp;error&nbsp;this&nbsp;connect&nbsp;and&nbsp;send&nbsp;custom&nbsp;error&nbsp;page&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;with&nbsp;description&nbsp;of&nbsp;problem&nbsp;in&nbsp;older&nbsp;versions&nbsp;it's&nbsp;worked.&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;I'm&nbsp;using&nbsp;pfSense&nbsp;2.4&nbsp;(actual&nbsp;version&nbsp;squid&nbsp;3.5.24).&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;Reproducible:&nbsp;Always&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;Steps&nbsp;to&nbsp;Reproduce:&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;1.&nbsp;Configure&nbsp;Firefox&nbsp;to&nbsp;use&nbsp;proxy&nbsp;server&nbsp;(SSL&nbsp;Proxy).&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;2.&nbsp;HTTPS/SSL&nbsp;Interception&nbsp;,&nbsp;Enable&nbsp;SSL&nbsp;filtering,&nbsp;splice&nbsp;all,&nbsp;CA:&nbsp;Let's&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;Encript&nbsp;autority&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;3.&nbsp;Try&nbsp;to&nbsp;connect&nbsp;to&nbsp;HTTPS&nbsp;site,&nbsp;which&nbsp;will&nbsp;be&nbsp;blocked&nbsp;by&nbsp;proxy&nbsp;server&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;Actual&nbsp;Results:&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;Firefox&nbsp;will&nbsp;display&nbsp;&quot;Page&nbsp;Load&nbsp;Error&quot;&nbsp;with&nbsp;description&nbsp;&quot;Proxy&nbsp;Server&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;Refused&nbsp;Connection.&nbsp;Firefox&nbsp;is&nbsp;configured&nbsp;to&nbsp;use&nbsp;a&nbsp;proxy&nbsp;server&nbsp;that&nbsp;is&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;refusing&nbsp;connections.&quot;&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;If&nbsp;we&nbsp;connect&nbsp;to&nbsp;HTTPS&nbsp;site&nbsp;which&nbsp;not&nbsp;blocked&nbsp;by&nbsp;proxy&nbsp;server&nbsp;OR&nbsp;using&nbsp;CA&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;self-signed&nbsp;issuer&nbsp;,&nbsp;all&nbsp;works&nbsp;fine.&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;Expected&nbsp;Results:&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;Display&nbsp;proxy&nbsp;server&nbsp;error&nbsp;page&nbsp;with&nbsp;deny&nbsp;info.&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;span&gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;span&gt;This&nbsp;is&nbsp;a&nbsp;well-known&nbsp;problem&nbsp;with&nbsp;Browsers,&nbsp;they&nbsp;all&nbsp;refuse&nbsp;to&nbsp;display&nbsp;any&nbsp;response&nbsp;to&nbsp;a&nbsp;CONNECT&nbsp;tunnel&nbsp;message.&lt;/span&gt;&lt;br&gt;<br>
&lt;span&gt;&lt;On&nbsp;17/05/17&nbsp;23:32,&nbsp;chcs&nbsp;wrote:&lt;/span&gt;&lt;br&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;Firefox&nbsp;53.0.2&nbsp;,&nbsp;Chrome&nbsp;58.3029&nbsp;y&nbsp;Opera&nbsp;44&nbsp;display&nbsp;&quot;Proxy&nbsp;Server&nbsp;Refused&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;Connection&quot;&nbsp;page,&nbsp;instead&nbsp;of&nbsp;Squid&nbsp;custom&nbsp;error&nbsp;page,&nbsp;when&nbsp;connect&nbsp;to&nbsp;HTTPS&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;site&nbsp;which&nbsp;blocked&nbsp;by&nbsp;proxy&nbsp;server.&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;For&nbsp;example&nbsp;we&nbsp;try&nbsp;to&nbsp;connect&nbsp;to&nbsp;&lt;a&nbsp;href=&quot;https://www.something.com&quot;&gt;<br>
https://www.something.com&lt;/a&gt;&nbsp;via&nbsp;Squid&nbsp;proxy&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;server&nbsp;which&nbsp;denied&nbsp;with&nbsp;403&nbsp;error&nbsp;this&nbsp;connect&nbsp;and&nbsp;send&nbsp;custom&nbsp;error&nbsp;page&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;with&nbsp;description&nbsp;of&nbsp;problem&nbsp;in&nbsp;older&nbsp;versions&nbsp;it's&nbsp;worked.&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;I'm&nbsp;using&nbsp;pfSense&nbsp;2.4&nbsp;(actual&nbsp;version&nbsp;squid&nbsp;3.5.24).&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;Reproducible:&nbsp;Always&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;Steps&nbsp;to&nbsp;Reproduce:&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;1.&nbsp;Configure&nbsp;Firefox&nbsp;to&nbsp;use&nbsp;proxy&nbsp;server&nbsp;(SSL&nbsp;Proxy).&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;2.&nbsp;HTTPS/SSL&nbsp;Interception&nbsp;,&nbsp;Enable&nbsp;SSL&nbsp;filtering,&nbsp;splice&nbsp;all,&nbsp;CA:&nbsp;Let's&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;Encript&nbsp;autority&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;3.&nbsp;Try&nbsp;to&nbsp;connect&nbsp;to&nbsp;HTTPS&nbsp;site,&nbsp;which&nbsp;will&nbsp;be&nbsp;blocked&nbsp;by&nbsp;proxy&nbsp;server&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;Actual&nbsp;Results:&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;Firefox&nbsp;will&nbsp;display&nbsp;&quot;Page&nbsp;Load&nbsp;Error&quot;&nbsp;with&nbsp;description&nbsp;&quot;Proxy&nbsp;Server&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;Refused&nbsp;Connection.&nbsp;Firefox&nbsp;is&nbsp;configured&nbsp;to&nbsp;use&nbsp;a&nbsp;proxy&nbsp;server&nbsp;that&nbsp;is&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;refusing&nbsp;connections.&quot;&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;If&nbsp;we&nbsp;connect&nbsp;to&nbsp;HTTPS&nbsp;site&nbsp;which&nbsp;not&nbsp;blocked&nbsp;by&nbsp;proxy&nbsp;server&nbsp;OR&nbsp;using&nbsp;CA&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;self-signed&nbsp;issuer&nbsp;,&nbsp;all&nbsp;works&nbsp;fine.&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;Expected&nbsp;Results:&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;span&gt;Display&nbsp;proxy&nbsp;server&nbsp;error&nbsp;page&nbsp;with&nbsp;deny&nbsp;info.&lt;/span&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;span&gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;span&gt;This&nbsp;is&nbsp;a&nbsp;well-known&nbsp;problem&nbsp;with&nbsp;Browsers,&nbsp;they&nbsp;all&nbsp;refuse&nbsp;to&nbsp;display&nbsp;any&nbsp;response&nbsp;to&nbsp;a&nbsp;CONNECT&nbsp;tunnel&nbsp;message.&lt;/span&gt;&lt;br&gt;<br>
&lt;span&gt;&lt;&lt;a&nbsp;href=&quot;http://wiki.squid-cache.org/Features/CustomErrors#Custom_error_pages_not_displayed_for_HTTPS&quot;&gt;http://wiki.squid-cache.org/Features/CustomErrors#Custom_error_pages_not_displayed_for_HTTPS&lt;/a&gt;&gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;span&gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;span&gt;Use&nbsp;of&nbsp;TLS&nbsp;to&nbsp;secure&nbsp;the&nbsp;connection&nbsp;to&nbsp;the&nbsp;proxy&nbsp;does&nbsp;not&nbsp;affect&nbsp;this&nbsp;browser&nbsp;behaviour&nbsp;on&nbsp;HTTPS&nbsp;traffic.&nbsp;The&nbsp;best&nbsp;you&nbsp;can&nbsp;hope&nbsp;for&nbsp;is&nbsp;to&nbsp;make&nbsp;Squid&nbsp;use&nbsp;a&nbsp;511&nbsp;status&nbsp;code&nbsp;with&nbsp;deny_info&nbsp;and&nbsp;hope&nbsp;that&nbsp;it&nbsp;chooses&nbsp;to&nbsp;display&nbsp;something&nbsp;halfway&nbsp;useful.&lt;/span&gt;&lt;br&gt;<br>
&lt;span&gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;span&gt;Amos&lt;/span&gt;&lt;br&gt;<br>
&lt;span&gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;span&gt;_______________________________________________&lt;/span&gt;&lt;br&gt;<br>
&lt;span&gt;squid-users&nbsp;mailing&nbsp;list&lt;/span&gt;&lt;br&gt;<br>
&lt;span&gt;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;span&gt;&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;/blockquote&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
