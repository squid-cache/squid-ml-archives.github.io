<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;text=&quot;#000000&quot;&nbsp;bgcolor=&quot;#FFFFFF&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;moz-cite-prefix&quot;&gt;W&nbsp;dniu&nbsp;17.05.2017&nbsp;o 13:32,&nbsp;chcs&nbsp;pisze:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cite=&quot;mid:1495020726548-4682433.post@n4.nabble.com&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Firefox&nbsp;53.0.2&nbsp;,&nbsp;Chrome&nbsp;58.3029&nbsp;y&nbsp;Opera&nbsp;44&nbsp;display&nbsp;&quot;Proxy&nbsp;Server&nbsp;Refused<br>
Connection&quot;&nbsp;page,&nbsp;instead&nbsp;of&nbsp;Squid&nbsp;custom&nbsp;error&nbsp;page,&nbsp;when&nbsp;connect&nbsp;to&nbsp;HTTPS<br>
site&nbsp;which&nbsp;blocked&nbsp;by&nbsp;proxy&nbsp;server.<br>
For&nbsp;example&nbsp;we&nbsp;try&nbsp;to&nbsp;connect&nbsp;to&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;https://www.something.com&quot;&gt;https://www.something.com&lt;/a&gt;&nbsp;via&nbsp;Squid&nbsp;proxy<br>
server&nbsp;which&nbsp;denied&nbsp;with&nbsp;403&nbsp;error&nbsp;this&nbsp;connect&nbsp;and&nbsp;send&nbsp;custom&nbsp;error&nbsp;page<br>
with&nbsp;description&nbsp;of&nbsp;problem&nbsp;in&nbsp;older&nbsp;versions&nbsp;it's&nbsp;worked.<br>
I'm&nbsp;using&nbsp;pfSense&nbsp;2.4&nbsp;(actual&nbsp;version&nbsp;squid&nbsp;3.5.24).<br>
<br>
Reproducible:&nbsp;Always<br>
<br>
Steps&nbsp;to&nbsp;Reproduce:<br>
1.&nbsp;Configure&nbsp;Firefox&nbsp;to&nbsp;use&nbsp;proxy&nbsp;server&nbsp;(SSL&nbsp;Proxy).<br>
2.&nbsp;HTTPS/SSL&nbsp;Interception&nbsp;,&nbsp;Enable&nbsp;SSL&nbsp;filtering,&nbsp;splice&nbsp;all,&nbsp;CA:&nbsp;Let's<br>
Encript&nbsp;autority<br>
3.&nbsp;Try&nbsp;to&nbsp;connect&nbsp;to&nbsp;HTTPS&nbsp;site,&nbsp;which&nbsp;will&nbsp;be&nbsp;blocked&nbsp;by&nbsp;proxy&nbsp;server<br>
<br>
Actual&nbsp;Results:&nbsp;&nbsp;<br>
Firefox&nbsp;will&nbsp;display&nbsp;&quot;Page&nbsp;Load&nbsp;Error&quot;&nbsp;with&nbsp;description&nbsp;&quot;Proxy&nbsp;Server<br>
Refused&nbsp;Connection.&nbsp;Firefox&nbsp;is&nbsp;configured&nbsp;to&nbsp;use&nbsp;a&nbsp;proxy&nbsp;server&nbsp;that&nbsp;is<br>
refusing&nbsp;connections.&quot;<br>
If&nbsp;we&nbsp;connect&nbsp;to&nbsp;HTTPS&nbsp;site&nbsp;which&nbsp;not&nbsp;blocked&nbsp;by&nbsp;proxy&nbsp;server&nbsp;OR&nbsp;using&nbsp;CA<br>
self-signed&nbsp;issuer&nbsp;,&nbsp;all&nbsp;works&nbsp;fine.<br>
<br>
Expected&nbsp;Results:&nbsp;&nbsp;<br>
Display&nbsp;proxy&nbsp;server&nbsp;error&nbsp;page&nbsp;with&nbsp;deny&nbsp;info.&nbsp;<br>
<br>
<br>
<br>
--<br>
View&nbsp;this&nbsp;message&nbsp;in&nbsp;context:&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-custom-error-page-tp4682433.html&quot;&gt;http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-custom-error-page-tp4682433.html&lt;/a&gt;<br>
Sent&nbsp;from&nbsp;the&nbsp;Squid&nbsp;-&nbsp;Users&nbsp;mailing&nbsp;list&nbsp;archive&nbsp;at&nbsp;Nabble.com.<br>
_______________________________________________<br>
squid-users&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;font&nbsp;size=&quot;-1&quot;&gt;This&nbsp;is&nbsp;intentional&nbsp;Firefox&nbsp;behavior&nbsp;since&nbsp;long<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time&nbsp;ago:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=493699&quot;&gt;https://bugzilla.mozilla.org/show_bug.cgi?id=493699&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Even&nbsp;if&nbsp;this&nbsp;bug&nbsp;is&nbsp;outdated, &nbsp;it&nbsp;is&nbsp;browser&nbsp;thing&nbsp;how&nbsp;to&nbsp;render<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error&nbsp;pages,&nbsp;not&nbsp;squid's&nbsp;fault.&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;You&nbsp;may&nbsp;try&nbsp;to&nbsp;redirect&nbsp;(instead&nbsp;of&nbsp;blocking)&nbsp;your&nbsp;blocked&nbsp;page<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;your&nbsp;custom&nbsp;page&nbsp;that&nbsp;looks&nbsp;exactly &nbsp;like&nbsp;sqid's&nbsp;internal<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error&nbsp;page,&nbsp;but&nbsp;then&nbsp;You&nbsp;will&nbsp;see&nbsp;browser's&nbsp;SSL&nbsp;security<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;warning,&nbsp;since&nbsp;page&nbsp;you&nbsp;have&nbsp;requested&nbsp;was&nbsp;SSL,&nbsp;and&nbsp;your&nbsp;error<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;page&nbsp;is&nbsp;not&nbsp;-&nbsp;the&nbsp;same&nbsp;goes&nbsp;for&nbsp;internal&nbsp;error&nbsp;pages.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Proxies&nbsp;error&nbsp;pages&nbsp;are&nbsp;nowadays&nbsp;usually&nbsp;replaced&nbsp;by&nbsp;browsers<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;due&nbsp;to&nbsp;security&nbsp;reasons&nbsp;in&nbsp;case&nbsp;of&nbsp;SSL&nbsp;pages.&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/font&gt;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;font&nbsp;size=&quot;-1&quot;&gt;If&nbsp;your&nbsp;custom-pretending-to-be-squid's-internal<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;page&nbsp;would&nbsp;be&nbsp;SSL&nbsp;with&nbsp;valid&nbsp;cert,&nbsp;my&nbsp;guess&nbsp;is&nbsp;your&nbsp;problem&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;solved.&nbsp;&lt;/font&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-signature&quot;&nbsp;cols=&quot;72&quot;&gt;--&nbsp;<br>
Greets,&nbsp;Dijx&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
