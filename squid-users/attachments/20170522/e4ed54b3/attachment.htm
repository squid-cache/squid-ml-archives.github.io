<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail-im&quot;&nbsp;style=&quot;font-size:12.8px&quot;&gt;On&nbsp;22/05/17&nbsp;02:51,&nbsp;Ikari&nbsp;C&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;Hi,&nbsp;i&#39;m&nbsp;new&nbsp;in&nbsp;maillist&nbsp;and&nbsp;in&nbsp;Squid&nbsp;configuration,&nbsp;I&nbsp;use&nbsp;Squid&nbsp;3.5&nbsp;version&nbsp;and&nbsp;i&nbsp;read&nbsp;about&nbsp;clientside_mark&nbsp;configuration,&nbsp;but&nbsp;i&nbsp;have&nbsp;a&nbsp;doubt,&nbsp;wich&nbsp;type&nbsp;of &nbsp;ACL&nbsp;is&nbsp;compatible&nbsp;with&nbsp;this&nbsp;option.&nbsp;I&nbsp;want&nbsp;to&nbsp;create&nbsp;a&nbsp;MARK&nbsp;by&nbsp;dstdomain&nbsp;ACL,&nbsp;and&nbsp;use&nbsp;TC&nbsp;configuration&nbsp;to&nbsp;set&nbsp;QOS,&nbsp;it&nbsp;is&nbsp;posible?&nbsp;or&nbsp;only&nbsp;works&nbsp;with&nbsp;SRC&nbsp;ALC&nbsp;type.&lt;br&gt;&lt;br&gt;&lt;br&gt;i&nbsp;want&nbsp;to&nbsp;do&nbsp;this&nbsp;in&nbsp;squid.conf:&lt;br&gt;&lt;br&gt;acl&nbsp;aclname1&nbsp;dstdomain&nbsp;url1&lt;br&gt;acl&nbsp;aclname2&nbsp;dstdomain&nbsp;url2&lt;br&gt;clientside_mark&nbsp;0x3&nbsp;aclname1&lt;br&gt;clientside_mark&nbsp;0x4&nbsp;aclname2&lt;br&gt;&lt;br&gt;the&nbsp;configuration&nbsp;on&nbsp;squid.conf&nbsp;is&nbsp;the&nbsp;default.&lt;br&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;Any&nbsp;of&nbsp;the&nbsp;ACLs&nbsp;which&nbsp;work&nbsp;in&nbsp;http_access&nbsp;should&nbsp;work&nbsp;there&nbsp;too.&lt;/span&gt;&lt;br&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;br&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;However,&nbsp;because&nbsp;HTTP&nbsp;contains&nbsp;message&nbsp;pipelines&nbsp;the&nbsp;arrival&nbsp;time&nbsp;of&nbsp;any&nbsp;given&nbsp;request&nbsp;may&nbsp;be&nbsp;significantly&nbsp;different&nbsp;from&nbsp;the&nbsp;response&nbsp;delivery&nbsp;time.&nbsp;i.e.&nbsp;there&nbsp;may&nbsp;be&nbsp;earlier&nbsp;requested&nbsp;responses&nbsp;using&nbsp;the&nbsp;connection&nbsp;between&nbsp;now&nbsp;(when&nbsp;the&nbsp;MARK&nbsp;gets&nbsp;set&nbsp;by&nbsp;the&nbsp;newly&nbsp;arrived&nbsp;request)&nbsp;and&nbsp;the&nbsp;response&nbsp;you&nbsp;were&nbsp;intending&nbsp;to&nbsp;mark.&nbsp;So&nbsp;it&nbsp;is&nbsp;best&nbsp;to&nbsp;only&nbsp;rely&nbsp;on&nbsp;TCP&nbsp;level&nbsp;things&nbsp;if&nbsp;you&nbsp;can.&lt;/span&gt;&lt;br&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;br&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;Amos&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;style=&quot;font-size:12.8px&quot;&gt;&lt;div&gt;Thanks.&nbsp;i&nbsp;will&nbsp;keep&nbsp;it&nbsp;in&nbsp;mind&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;tested&nbsp;this&nbsp;configuration&nbsp;and&nbsp;squid&nbsp;effectively&nbsp;mark&nbsp;this&nbsp;packages&nbsp;(I&nbsp;saw&nbsp;with&nbsp;iptables&nbsp;--m&nbsp;mark&nbsp;--mark&nbsp;X&nbsp;-j&nbsp;log)&nbsp;but&nbsp;mark&nbsp;also&nbsp;other&nbsp;domain&nbsp;that&nbsp;i&nbsp;have&nbsp;visited&nbsp;inmediately&nbsp;after&nbsp;and&nbsp;they&nbsp;aren&#39;t&nbsp;in&nbsp;the&nbsp;acl,&nbsp;for&nbsp;example,&nbsp;if&nbsp;i&nbsp;put&nbsp;&quot;acl&nbsp;ac1&nbsp;dstdomain&nbsp;.&lt;a&nbsp;href=&quot;http://yahoo.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;yahoo.com&lt;/a&gt;&quot;,&nbsp;squid&nbsp;mark&nbsp;this&nbsp;package,&nbsp;but&nbsp;if&nbsp;i&nbsp;go&nbsp;to &lt;a&nbsp;href=&quot;http://google.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;google.com&lt;/a&gt; squid&nbsp;also&nbsp;mark&nbsp;the&nbsp;google&nbsp;package,&nbsp;but&nbsp;if&nbsp;i&nbsp;go&nbsp;to&nbsp;google&nbsp;first&nbsp;than &lt;a&nbsp;href=&quot;http://yahoo.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;yahoo.com&lt;/a&gt; squid&nbsp;doesn&#39;t&nbsp;mark&nbsp;the&nbsp;package&nbsp;to&nbsp;google,&nbsp;and&nbsp;then&nbsp;i&nbsp;go&nbsp;to&nbsp;yahoo,&nbsp;squid&nbsp;mark&nbsp;the&nbsp;yahoo&nbsp;package,&nbsp;and&nbsp;if&nbsp;i&nbsp;go&nbsp;to&nbsp;visit&nbsp;again&nbsp;google,&nbsp;&quot;squid&quot;&nbsp;mark&nbsp;the&nbsp;package&nbsp;google&nbsp;too.&nbsp;I&nbsp;wanted&nbsp;to&nbsp;create&nbsp;a&nbsp;QOS&nbsp;based&nbsp;by&nbsp;domain&nbsp;whith&nbsp;TC&nbsp;configuration.&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail-yj6qo&nbsp;gmail-ajU&quot;&nbsp;style=&quot;margin:2px&nbsp;0px&nbsp;0px;font-size:12.8px&quot;&gt;&lt;div&nbsp;id=&quot;gmail-:j0&quot;&nbsp;class=&quot;gmail-ajR&quot;&nbsp;tabindex=&quot;0&quot;&gt;&lt;img&nbsp;class=&quot;gmail-ajT&quot;&nbsp;src=&quot;https://ssl.gstatic.com/ui/v1/icons/mail/images/cleardot.gif&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
