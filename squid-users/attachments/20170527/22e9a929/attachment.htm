<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;div&nbsp;style=&quot;color:#000;&nbsp;background-color:#fff;&nbsp;font-family:Helvetica&nbsp;Neue,&nbsp;Helvetica,&nbsp;Arial,&nbsp;Lucida&nbsp;Grande,&nbsp;sans-serif;font-size:13px&quot;&gt;&lt;div&nbsp;id=&quot;yui_3_16_0_ym19_1_1495846827670_2833&quot;&gt;&lt;span&nbsp;id=&quot;yui_3_16_0_ym19_1_1495846827670_2892&quot;&gt;Yes,&nbsp;I&nbsp;sort&nbsp;of&nbsp;pieced&nbsp;together&nbsp;what&nbsp;I&nbsp;found&nbsp;online,&nbsp;which&nbsp;is&nbsp;probably&nbsp;dangerous.&nbsp;&nbsp;I&nbsp;really&nbsp;need&nbsp;to&nbsp;become&nbsp;familiar&nbsp;with&nbsp;how&nbsp;exactly&nbsp;this&nbsp;works&nbsp;for&nbsp;security's&nbsp;sake&nbsp;if&nbsp;nothing&nbsp;else.&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;qtdSeparateBR&quot;&nbsp;id=&quot;yui_3_16_0_ym19_1_1495846827670_2834&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;yahoo_quoted&quot;&nbsp;id=&quot;yui_3_16_0_ym19_1_1495846827670_2943&quot;&nbsp;style=&quot;display:&nbsp;block;&quot;&gt;&nbsp;&nbsp;&lt;div&nbsp;style=&quot;font-family:&nbsp;Helvetica&nbsp;Neue,&nbsp;Helvetica,&nbsp;Arial,&nbsp;Lucida&nbsp;Grande,&nbsp;sans-serif;&nbsp;font-size:&nbsp;13px;&quot;&nbsp;id=&quot;yui_3_16_0_ym19_1_1495846827670_2942&quot;&gt;&nbsp;&lt;div&nbsp;style=&quot;font-family:&nbsp;HelveticaNeue,&nbsp;Helvetica&nbsp;Neue,&nbsp;Helvetica,&nbsp;Arial,&nbsp;Lucida&nbsp;Grande,&nbsp;sans-serif;&nbsp;font-size:&nbsp;16px;&quot;&nbsp;id=&quot;yui_3_16_0_ym19_1_1495846827670_2941&quot;&gt;&nbsp;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;id=&quot;yui_3_16_0_ym19_1_1495846827670_2940&quot;&gt;&nbsp;&lt;font&nbsp;size=&quot;2&quot;&nbsp;face=&quot;Arial&quot;&gt;&nbsp;&lt;hr&nbsp;size=&quot;1&quot;&gt;&nbsp;&lt;b&gt;&lt;span&nbsp;style=&quot;font-weight:bold;&quot;&gt;From:&lt;/span&gt;&lt;/b&gt;&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;squid3@treenet.co.nz&gt;&lt;br&gt;&nbsp;&lt;b&gt;&lt;span&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;To:&lt;/span&gt;&lt;/b&gt;&nbsp;j&nbsp;m&nbsp;&lt;acctforjunk@yahoo.com&gt;;&nbsp;&quot;squid-users@lists.squid-cache.org&quot;&nbsp;&lt;squid-users@lists.squid-cache.org&gt;&nbsp;&lt;br&gt;&nbsp;&lt;b&gt;&lt;span&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;Sent:&lt;/span&gt;&lt;/b&gt;&nbsp;Friday,&nbsp;May&nbsp;26,&nbsp;2017&nbsp;2:53&nbsp;PM&lt;br&gt;&nbsp;&lt;b&gt;&lt;span&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;Subject:&lt;/span&gt;&lt;/b&gt;&nbsp;Re:&nbsp;[squid-users]&nbsp;TCP_DENIED/407&nbsp;accessing&nbsp;webserver&nbsp;on&nbsp;same&nbsp;machine&nbsp;as&nbsp;squid&lt;br&gt;&nbsp;&lt;/font&gt;&nbsp;&lt;/div&gt;&nbsp;&lt;div&nbsp;class=&quot;y_msg_container&quot;&nbsp;id=&quot;yui_3_16_0_ym19_1_1495846827670_2944&quot;&gt;&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;id=&quot;yui_3_16_0_ym19_1_1495846827670_2945&quot;&gt;Ah,&nbsp;your&nbsp;problem&nbsp;seems&nbsp;to&nbsp;be&nbsp;a&nbsp;misunderstanding&nbsp;of&nbsp;how&nbsp;authentication&nbsp;works.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;What&nbsp;Squid&nbsp;receives&nbsp;on&nbsp;messages&nbsp;can&nbsp;have&nbsp;three&nbsp;forms:&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&nbsp;&nbsp;1)&nbsp;no&nbsp;credentials&nbsp;at&nbsp;all&lt;br&nbsp;clear=&quot;none&quot;&gt;&nbsp;&nbsp;2)&nbsp;correct&nbsp;credentials&lt;br&nbsp;clear=&quot;none&quot;&gt;&nbsp;&nbsp;3)&nbsp;invalid&nbsp;credentials&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;Your&nbsp;definition&nbsp;of&nbsp;the&nbsp;auth_users&nbsp;ACL&nbsp;using&nbsp;&quot;REQUIRED&quot;&nbsp;takes&nbsp;care&nbsp;of&nbsp;the&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;(1)&nbsp;situation.&nbsp;Squid&nbsp;will&nbsp;respond&nbsp;with&nbsp;407&nbsp;to&nbsp;get&nbsp;credentials&nbsp;from&nbsp;any&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;client&nbsp;that&nbsp;does&nbsp;not&nbsp;send&nbsp;any.&nbsp;This&nbsp;is&nbsp;what&nbsp;you&nbsp;are&nbsp;seeing&nbsp;on&nbsp;that&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;second&nbsp;log&nbsp;line&nbsp;of&nbsp;your&nbsp;previous&nbsp;post,&nbsp;and&nbsp;the&nbsp;popup&nbsp;in&nbsp;your&nbsp;tests.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;Now&nbsp;the&nbsp;&quot;http_access&nbsp;allow&nbsp;auth_users&quot;&nbsp;line&nbsp;only&nbsp;takes&nbsp;care&nbsp;of&nbsp;situation&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;(2),&nbsp;permitting&nbsp;valid&nbsp;users.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;Which&nbsp;leaves&nbsp;situation&nbsp;(3)&nbsp;undefined.&nbsp;...&nbsp;All&nbsp;other&nbsp;traffic&nbsp;continues&nbsp;on&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;to&nbsp;the&nbsp;next&nbsp;http_access&nbsp;line,&nbsp;which&nbsp;is&nbsp;&quot;allow&nbsp;all&quot;,&nbsp;ouch.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;This&nbsp;is&nbsp;why&nbsp;best&nbsp;practice&nbsp;is&nbsp;to&nbsp;use&nbsp;a&nbsp;&quot;deny&quot;&nbsp;line&nbsp;like&nbsp;so:&lt;br&nbsp;clear=&quot;none&quot;&gt;&nbsp;&nbsp;&nbsp;http_access&nbsp;deny&nbsp;!auth_users&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;...&nbsp;which&nbsp;makes&nbsp;it&nbsp;clear&nbsp;what&nbsp;is&nbsp;happening&nbsp;for&nbsp;every&nbsp;non-authenticated&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;thing,&nbsp;both&nbsp;situation&nbsp;(1)&nbsp;and&nbsp;(2)&nbsp;traffic.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;Rules&nbsp;permitting&nbsp;things&nbsp;through&nbsp;without&nbsp;authenticating&nbsp;go&nbsp;above&nbsp;that&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;http_access&nbsp;line,&nbsp;and&nbsp;things&nbsp;applying&nbsp;to&nbsp;authenticated&nbsp;users&nbsp;go&nbsp;below&nbsp;it.&lt;div&nbsp;class=&quot;yqt6086043234&quot;&nbsp;id=&quot;yqtfd39901&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;Amos&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&nbsp;&lt;/div&gt;&nbsp;&lt;/div&gt;&nbsp;&nbsp;&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
