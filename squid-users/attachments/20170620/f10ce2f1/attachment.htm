<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;for&nbsp;the&nbsp;links.&nbsp;So&nbsp;I&nbsp;tried&nbsp;what&nbsp;you&nbsp;suggested&nbsp;and&nbsp;for&nbsp;testing,&nbsp;I&nbsp;was&nbsp;using&nbsp;this&nbsp;simple&nbsp;config:-&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;http_port&nbsp;8080&lt;/div&gt;&lt;div&gt;auth_param&nbsp;basic&nbsp;program&nbsp;/usr/lib/squid/basic_ncsa_auth&nbsp;/etc/squid/passwords&lt;/div&gt;&lt;div&gt;auth_param&nbsp;basic&nbsp;realm&nbsp;proxy&lt;/div&gt;&lt;div&gt;external_acl_type&nbsp;checkclient&nbsp;children-max=20&nbsp;%MYADDR&nbsp;%LOGIN&nbsp;/usr/local/squidauth.py&lt;/div&gt;&lt;div&gt;acl&nbsp;authenticated&nbsp;external&nbsp;checkclient&lt;/div&gt;&lt;div&gt;http_access&nbsp;allow&nbsp;authenticated&lt;/div&gt;&lt;div&gt;cache&nbsp;deny&nbsp;all&lt;/div&gt;&lt;div&gt;forwarded_for&nbsp;delete&lt;/div&gt;&lt;div&gt;request_header_access&nbsp;Via&nbsp;deny&nbsp;all&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;made&nbsp;sure&nbsp;that&nbsp;the&nbsp;squidauth.py&nbsp;file&nbsp;was&nbsp;executable&nbsp;and&nbsp;when&nbsp;debugging,&nbsp;I&nbsp;found&nbsp;that&nbsp;the&nbsp;helper&nbsp;processes&nbsp;were&nbsp;running.&nbsp;But&nbsp;nothing&nbsp;was&nbsp;getting&nbsp;passed&nbsp;to&nbsp;the&nbsp;helper&nbsp;processes.&nbsp;In&nbsp;the&nbsp;python&nbsp;code,&nbsp;I&nbsp;was&nbsp;running&nbsp;a&nbsp;loop&nbsp;which&nbsp;reads&nbsp;lines&nbsp;from&nbsp;the&nbsp;stdin&nbsp;and&nbsp;parses&nbsp;them&nbsp;and&nbsp;writes&nbsp;output&nbsp;to&nbsp;the&nbsp;stdout.&nbsp;I&nbsp;checked&nbsp;and&nbsp;it&nbsp;wasn&#39;t&nbsp;getting&nbsp;anything&nbsp;from&nbsp;stdin.&nbsp;(I&nbsp;added&nbsp;a&nbsp;line&nbsp;which&nbsp;reads&nbsp;the&nbsp;input&nbsp;line&nbsp;from&nbsp;stdin&nbsp;and&nbsp;sends&nbsp;it&nbsp;to&nbsp;another&nbsp;server&nbsp;through&nbsp;a&nbsp;http&nbsp;request&nbsp;to&nbsp;make&nbsp;sure&nbsp;if&nbsp;it&nbsp;was&nbsp;getting&nbsp;anything&nbsp;from&nbsp;stdin&nbsp;at&nbsp;all)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;But,&nbsp;when&nbsp;I&nbsp;tried&nbsp;to&nbsp;use&nbsp;the&nbsp;proxy(and&nbsp;of&nbsp;course&nbsp;I&nbsp;was&nbsp;using&nbsp;a&nbsp;username&nbsp;and&nbsp;password&nbsp;that&nbsp;was&nbsp;stored&nbsp;in&nbsp;/etc/squid/passwords),&nbsp;I&nbsp;kept&nbsp;getting&nbsp;the&nbsp;error&nbsp;that&nbsp;authentication&nbsp;required,&nbsp;i.e.&nbsp;the&nbsp;server&nbsp;was&nbsp;sending&nbsp;back&nbsp;the&nbsp;header&nbsp;Proxy-Authenticate:&nbsp;Basic&nbsp;realm=&quot;proxy&quot;.&nbsp;I&nbsp;am&nbsp;not&nbsp;sure&nbsp;what&nbsp;I&nbsp;am&nbsp;doing&nbsp;wrong&nbsp;here.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;With&nbsp;regards,&lt;/div&gt;&lt;div&gt;Sonya&nbsp;Roy&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Jun&nbsp;20,&nbsp;2017&nbsp;at&nbsp;2:49&nbsp;AM,&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&nbsp;target=&quot;_blank&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;span&nbsp;class=&quot;gmail-&quot;&gt;On&nbsp;20/06/17&nbsp;09:15,&nbsp;Amos&nbsp;Jeffries&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;<br>
On&nbsp;20/06/17&nbsp;03:20,&nbsp;Sonya&nbsp;Roy&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;<br>
Since&nbsp;you&nbsp;are&nbsp;saying&nbsp;the&nbsp;IP&nbsp;that&nbsp;can&nbsp;be&nbsp;passed&nbsp;to&nbsp;the&nbsp;helpers&nbsp;is&lt;br&gt;<br>
configurable,&nbsp;how&nbsp;would&nbsp;I&nbsp;pass&nbsp;the&nbsp;local&nbsp;IP&nbsp;of&nbsp;the&nbsp;server&nbsp;that&nbsp;the&lt;br&gt;<br>
client&nbsp;connected&nbsp;to?&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;checked&nbsp;out&nbsp;the&nbsp;helpers&nbsp;you&nbsp;mentioned,&nbsp;there&nbsp;they&nbsp;check&nbsp;which&nbsp;IP&nbsp;the&lt;br&gt;<br>
connection&nbsp;is&nbsp;coming&nbsp;from.&nbsp;Not&nbsp;the&nbsp;local&nbsp;IP&nbsp;of&nbsp;the&nbsp;server&nbsp;that&nbsp;the&lt;br&gt;<br>
client&nbsp;is&nbsp;connected&nbsp;to&nbsp;and&nbsp;they&nbsp;are&nbsp;using&nbsp;%SRC&nbsp;for&nbsp;that.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
The&nbsp;external&nbsp;ACL&nbsp;helpers&nbsp;don&#39;t&nbsp;know&nbsp;one&nbsp;IP&nbsp;from&nbsp;any&nbsp;other.&nbsp;They&nbsp;simply&lt;br&gt;<br>
check&nbsp;what&nbsp;is&nbsp;given&nbsp;to&nbsp;them&nbsp;against&nbsp;some&nbsp;form&nbsp;of&nbsp;username+ip&nbsp;mapping.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;&lt;/span&gt;<br>
[&nbsp;with&nbsp;the&nbsp;correct&nbsp;links&nbsp;]&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;span&nbsp;class=&quot;gmail-&quot;&gt;<br>
&lt;br&gt;<br>
In&nbsp;Squid-3.5&nbsp;that&nbsp;would&nbsp;be&nbsp;%MYADDR&lt;br&gt;&lt;/span&gt;<br>
&lt;&lt;a&nbsp;href=&quot;http://www.squid-cache.org/Versions/v3/3.5/cfgman/external_acl_type.html&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.squid-cache.org/Ve&lt;wbr&gt;rsions/v3/3.5/cfgman/external_&lt;wbr&gt;acl_type.html&lt;/a&gt;&gt;.&lt;span&nbsp;class=&quot;gmail-&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
In&nbsp;Squid-4+&nbsp;it&nbsp;would&nbsp;be&nbsp;%&gt;la&lt;br&gt;&lt;/span&gt;<br>
&lt;&lt;a&nbsp;href=&quot;http://www.squid-cache.org/Versions/v3/3.5/cfgman/logformat.html&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.squid-cache.org/Ve&lt;wbr&gt;rsions/v3/3.5/cfgman/logformat&lt;wbr&gt;.html&lt;/a&gt;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;div&nbsp;class=&quot;gmail-HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;gmail-h5&quot;&gt;<br>
&lt;br&gt;<br>
Amos&lt;br&gt;<br>
______________________________&lt;wbr&gt;_________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.&lt;wbr&gt;org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/l&lt;wbr&gt;istinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
