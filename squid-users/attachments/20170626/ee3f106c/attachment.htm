<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Hi,&nbsp;Amos,&lt;br&gt;&lt;/div&gt;We&nbsp;are&nbsp;using&nbsp;squid&nbsp;3.5.&nbsp;for&nbsp;our&nbsp;<br>
server.&nbsp;Recently&nbsp;we&nbsp;have&nbsp;noticed&nbsp;that&nbsp;squid&nbsp;is&nbsp;caching&nbsp;incomplete&nbsp;<br>
objects&nbsp;in&nbsp;case&nbsp;of&nbsp;chunked&nbsp;response.&lt;br&gt;&lt;/div&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;div&gt;We<br>
&nbsp;have&nbsp;gone&nbsp;through&nbsp;the&nbsp;squid&nbsp;code.&nbsp;It&nbsp;looks&nbsp;likes&nbsp;squid&nbsp;is&nbsp;caching&nbsp;<br>
incomplete&nbsp;response&nbsp;in&nbsp;case&nbsp;of&nbsp;EOF&nbsp;from&nbsp;the&nbsp;server&nbsp;even&nbsp;though&nbsp;it&nbsp;does&nbsp;<br>
not&nbsp;receive&nbsp;the&nbsp;last&nbsp;empty&nbsp;chunk.&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&gt;&lt;br&gt;&lt;/div&gt; if&nbsp;(eof)&nbsp;//&nbsp;already&nbsp;reached&nbsp;EOF&lt;br&gt;       &nbsp;return&nbsp;COMPLETE_NONPERSISTENT_MSG;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;As&nbsp;per&nbsp;RFC,&nbsp;&lt;br&gt;&lt;pre&nbsp;class=&quot;gmail-newpage&quot;&gt;&nbsp;&quot;The&nbsp;chunked&nbsp;encoding&nbsp;is&nbsp;ended&nbsp;by&nbsp;any&nbsp;chunk&nbsp;whose&nbsp;size&nbsp;is<br>
&nbsp;&nbsp;&nbsp;zero,&nbsp;followed&nbsp;by&nbsp;the&nbsp;trailer,&nbsp;which&nbsp;is&nbsp;terminated&nbsp;by&nbsp;an&nbsp;empty&nbsp;line.&quot;<br>
<br>
&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;Is&nbsp;this&nbsp;expected?&nbsp;Because&nbsp;of&nbsp;this&nbsp;problem,&nbsp;our&nbsp;server&nbsp;ends&nbsp;up&nbsp;serving&nbsp;bad&nbsp;objects&nbsp;to&nbsp;the&nbsp;user.&lt;/div&gt;&lt;/div&gt;<br>

</tt>
