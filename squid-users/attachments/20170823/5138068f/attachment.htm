<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;bgcolor=&quot;#FFFFFF&quot;&nbsp;text=&quot;#000000&quot;&gt;<br>
&lt;pre&gt;&gt;&gt;&lt;i&gt;&nbsp;Hi&nbsp;all.<br>
&lt;/i&gt;&gt;&lt;i&gt;&gt;&nbsp;<br>
&lt;/i&gt;&gt;&lt;i&gt;&gt;&nbsp;Squid&nbsp;has&nbsp;a&nbsp;strange&nbsp;behavior:&nbsp;suddenly,&nbsp;it&nbsp;stops&nbsp;writing&nbsp;the&nbsp;log&nbsp;files<br>
&lt;/i&gt;&gt;&lt;i&gt;&gt;&nbsp;(access.log&nbsp;and&nbsp;cache.log)&nbsp;for&nbsp;about&nbsp;30&nbsp;seconds&nbsp;clients&nbsp;cannot&nbsp;access&nbsp;the<br>
&lt;/i&gt;&gt;&lt;i&gt;&gt;&nbsp;cache.&nbsp;Because&nbsp;my&nbsp;proxy&nbsp;is&nbsp;using&nbsp;AD&nbsp;auth,&nbsp;I&nbsp;checked&nbsp;the&nbsp;link&nbsp;between&nbsp;them<br>
&lt;/i&gt;&gt;&lt;i&gt;&gt;&nbsp;and&nbsp;is&nbsp;OK.&nbsp;During&nbsp;the&nbsp;time&nbsp;squid&nbsp;&quot;is&nbsp;down&quot;,&nbsp;the&nbsp;number&nbsp;of<br>
&lt;/i&gt;&gt;&lt;i&gt;&gt;&nbsp;ext_wbinfo_group_acl&nbsp;processes&nbsp;starts&nbsp;growing&nbsp;until&nbsp;Squid&nbsp;operates<br>
&lt;/i&gt;&gt;&lt;i&gt;&gt;&nbsp;normally.&nbsp;My&nbsp;squid&nbsp;box&nbsp;has&nbsp;4GB&nbsp;of&nbsp;RAM&nbsp;and&nbsp;enough&nbsp;disk&nbsp;space&nbsp;to&nbsp;store&nbsp;the<br>
&lt;/i&gt;&gt;&lt;i&gt;&gt;&nbsp;cache.<br>
&lt;/i&gt;<br>
&gt;1.&nbsp;Which&nbsp;version&nbsp;of&nbsp;Squid?<br>
Squid&nbsp;3.4.8<br>
<br>
&gt;&nbsp;2.&nbsp;What&nbsp;operating&nbsp;system&nbsp;/&nbsp;version&nbsp;is&nbsp;it&nbsp;running&nbsp;under?<br>
Debian&nbsp;Jessie&nbsp;8.7<br>
<br>
&gt;&nbsp;3.&nbsp;How&nbsp;many&nbsp;clients&nbsp;access&nbsp;this&nbsp;proxy?<br>
About&nbsp;100<br>
<br>
&gt;&nbsp;4.&nbsp;How&nbsp;many&nbsp;requests&nbsp;per&nbsp;{second|minute|hour}&nbsp;are&nbsp;you&nbsp;processing?<br>
<br>
<br>
&gt;&nbsp;5.&nbsp;When&nbsp;you&nbsp;say&nbsp;&quot;enough&nbsp;disk&nbsp;space&nbsp;to&nbsp;store&nbsp;the&nbsp;cache&quot;,&nbsp;what&nbsp;are&nbsp;the&nbsp;details?<br>
50GB<br>
<br>
&gt;&nbsp;6.&nbsp;4Gbytes&nbsp;is&nbsp;not&nbsp;a&nbsp;great&nbsp;deal&nbsp;these&nbsp;days&nbsp;-&nbsp;how&nbsp;much&nbsp;is&nbsp;being&nbsp;used,&nbsp;and&nbsp;do&nbsp;you&nbsp;<br>
have&nbsp;any&nbsp;swap&nbsp;(and&nbsp;is&nbsp;any&nbsp;of&nbsp;that&nbsp;being&nbsp;used)?<br>
Squid&nbsp;uses&nbsp;about&nbsp;50%&nbsp;of&nbsp;the&nbsp;physical&nbsp;memory.&nbsp;8GB&nbsp;of&nbsp;swap.&nbsp;<br>
<br>
&gt;&nbsp;7.&nbsp;How&nbsp;often&nbsp;does&nbsp;the&nbsp;above&nbsp;behaviour&nbsp;occur?<br>
It&nbsp;happens&nbsp;randomly.&nbsp;Maybe&nbsp;twice,&nbsp;three&nbsp;times&nbsp;or&nbsp;maybe&nbsp;nothing&nbsp;happens.<br>
<br>
&gt;&nbsp;8.&nbsp;Does&nbsp;it&nbsp;manifest&nbsp;itself&nbsp;immediately&nbsp;after&nbsp;starting&nbsp;Squid,&nbsp;or&nbsp;is&nbsp;there&nbsp;a&nbsp;<br>
longer&nbsp;period&nbsp;where&nbsp;it&nbsp;works&nbsp;normally&nbsp;before&nbsp;this&nbsp;starts&nbsp;happening?<br>
No.&nbsp;It&nbsp;happens&nbsp;randomly.<br>
<br>
&gt;&nbsp;9.&nbsp;Does&nbsp;it&nbsp;seem&nbsp;to&nbsp;occur&nbsp;after&nbsp;any&nbsp;specific&nbsp;requests&nbsp;have&nbsp;gone&nbsp;through,&nbsp;or&nbsp;when&nbsp;<br>
a&nbsp;specific&nbsp;request&nbsp;gets&nbsp;made?<br>
No.&nbsp;It&nbsp;happens&nbsp;randomly.&nbsp;I&nbsp;couldn't&nbsp;find&nbsp;nothing&nbsp;relevant&nbsp;about&nbsp;the&nbsp;requests.&nbsp;<br>
<br>
&gt;&nbsp;10.&nbsp;What&nbsp;does&nbsp;access_log&nbsp;tell&nbsp;you&nbsp;about&nbsp;the&nbsp;requests&nbsp;immediately&nbsp;before,&nbsp;and&nbsp;<br>
during,&nbsp;the&nbsp;30&nbsp;second&nbsp;holdup?<br>
Nothing.&nbsp;Squid&nbsp;continues&nbsp;responding&nbsp;all&nbsp;the&nbsp;requests&nbsp;normally.<br>
<br>
This&nbsp;is&nbsp;the&nbsp;last&nbsp;request&nbsp;until&nbsp;it&nbsp;holdups:<br>
&lt;b&gt;1503416750.346&nbsp;&nbsp;&nbsp;&nbsp;386&nbsp;192.168.0.2&nbsp;TCP_REFRESH_UNMODIFIED/304&nbsp;235&nbsp;GET&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://www.mysite.com&quot;&gt;http://www.mysite.com&lt;/a&gt;&nbsp;user&nbsp;HIER_DIRECT/www.mysite.com&nbsp;-&lt;/b&gt;<br>
This&nbsp;is&nbsp;the&nbsp;next&nbsp;request:<br>
&lt;b&gt;1503416781.864&nbsp;141376&nbsp;&lt;/b&gt;&lt;b&gt;&lt;b&gt;192.168.0.2&nbsp;&lt;/b&gt;TCP_MISS/200&nbsp;5599&nbsp;CONNECT&nbsp;play.google.com:443&nbsp;user&nbsp;HIER_DIRECT/play.google.com&nbsp;-&lt;/b&gt;<br>
&lt;/pre&gt;<br>
&lt;div&nbsp;class=&quot;moz-signature&quot;&gt;--&nbsp;&lt;br&gt;<br>
&lt;b&gt;@verovan&lt;/b&gt;&lt;/div&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
