<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hi&nbsp;Amos,&lt;br&gt;&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;302&nbsp;and&nbsp;307&nbsp;are&nbsp;not&nbsp;because&nbsp;as&nbsp;their&nbsp;status&nbsp;description&nbsp;indicates&nbsp;they&nbsp;<br>
are&nbsp;*temporary*&nbsp;results.&nbsp;They&nbsp;can&nbsp;only&nbsp;be&nbsp;cached&nbsp;if&nbsp;there&nbsp;are&nbsp;explicit&nbsp;<br>
details&nbsp;from&nbsp;the&nbsp;server&nbsp;indicating&nbsp;for&nbsp;how&nbsp;long.&lt;br&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;/div&gt;You&nbsp;were&nbsp;right.&nbsp;After&nbsp;I&nbsp;added&nbsp;header&nbsp;Cache-Control&nbsp;&quot;max-age=60,&nbsp;must-revalidate&quot;&nbsp;to&nbsp;the&nbsp;redirects,&nbsp;then&nbsp;the&nbsp;response&nbsp;was&nbsp;cached.&nbsp;Thank&nbsp;you&nbsp;for&nbsp;&lt;span&nbsp;id=&quot;gmail-m_6902079747454010218gmail-result_box&quot;&nbsp;class=&quot;gmail-m_6902079747454010218gmail-short_text&quot;&nbsp;lang=&quot;en&quot;&gt;&lt;span&nbsp;class=&quot;gmail-m_6902079747454010218gmail-alt-edited&quot;&gt;clarification.&lt;br&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;301&nbsp;should&nbsp;be&nbsp;cached&nbsp;unless&nbsp;the&nbsp;object&nbsp;would&nbsp;need&nbsp;revalidation&nbsp;immediately.&lt;/blockquote&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;But&nbsp;for&nbsp;301&nbsp;I&nbsp;always&nbsp;get&nbsp;MISS&nbsp;-&nbsp;&lt;span&nbsp;id=&quot;gmail-result_box&quot;&nbsp;class=&quot;gmail-short_text&quot;&nbsp;lang=&quot;en&quot;&gt;&lt;span&nbsp;class=&quot;gmail-&quot;&gt;with&nbsp;and&nbsp;without&nbsp;a&nbsp;cache-control&nbsp;header:&lt;br&gt;&lt;br&gt;&lt;span&nbsp;style=&quot;font-family:monospace,monospace&quot;&gt;$&nbsp;curl&nbsp;-v&nbsp;http:/&lt;a&nbsp;href=&quot;http://test.example.com/img301.jpg&quot;&gt;test.example.com/img301.jpg&lt;/a&gt;&lt;br&gt;&lt;br&gt;&gt;&nbsp;GET&nbsp;/img301.jpg&nbsp;HTTP/1.1&lt;br&gt;&gt;&nbsp;Host:&nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&nbsp;id=&quot;gmail-result_box&quot;&nbsp;class=&quot;gmail-short_text&quot;&nbsp;lang=&quot;en&quot;&gt;&lt;span&nbsp;class=&quot;gmail-&quot;&gt;&lt;span&nbsp;style=&quot;font-family:monospace,monospace&quot;&gt;&lt;span&nbsp;style=&quot;font-family:monospace,monospace&quot;&gt;&lt;span&nbsp;style=&quot;font-family:monospace,monospace&quot;&gt;&lt;a&nbsp;href=&quot;http://test.example.com&quot;&gt;test.example.com&lt;/a&gt;&lt;br&gt;&lt;/span&gt;&lt;/span&gt;&gt;&nbsp;User-Agent:&nbsp;curl/7.50.1&lt;br&gt;&gt;&nbsp;Accept:&nbsp;*/*&lt;br&gt;&gt;&lt;br&gt;&lt;&nbsp;HTTP/1.1&nbsp;301&nbsp;Moved&nbsp;Permanently&lt;br&gt;&lt;&nbsp;Date:&nbsp;Thu,&nbsp;21&nbsp;Sep&nbsp;2017&nbsp;06:44:41&nbsp;GMT&lt;br&gt;&lt;&nbsp;Server:&nbsp;Apache&lt;br&gt;&lt;&nbsp;Cache-Control:&nbsp;max-age=60,&nbsp;must-revalidate&lt;br&gt;&lt;&nbsp;Location:&nbsp;http://&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&nbsp;id=&quot;gmail-result_box&quot;&nbsp;class=&quot;gmail-short_text&quot;&nbsp;lang=&quot;en&quot;&gt;&lt;span&nbsp;class=&quot;gmail-&quot;&gt;&lt;span&nbsp;style=&quot;font-family:monospace,monospace&quot;&gt;&lt;span&nbsp;style=&quot;font-family:monospace,monospace&quot;&gt;&lt;span&nbsp;style=&quot;font-family:monospace,monospace&quot;&gt;&lt;a&nbsp;href=&quot;http://test.example.com&quot;&gt;test.example.com&lt;/a&gt;&lt;/span&gt;&lt;/span&gt;/img.svg&lt;br&gt;&lt;&nbsp;Content-Length:&nbsp;247&lt;br&gt;&lt;&nbsp;Content-Type:&nbsp;text/html;&nbsp;charset=iso-8859-1&lt;br&gt;&lt;&nbsp;X-Cache:&nbsp;MISS&nbsp;from&nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&nbsp;id=&quot;gmail-result_box&quot;&nbsp;class=&quot;gmail-short_text&quot;&nbsp;lang=&quot;en&quot;&gt;&lt;span&nbsp;class=&quot;gmail-&quot;&gt;&lt;span&nbsp;style=&quot;font-family:monospace,monospace&quot;&gt;&lt;span&nbsp;style=&quot;font-family:monospace,monospace&quot;&gt;&lt;squid-proxy&gt;&lt;br&gt;&lt;/span&gt;&lt;&nbsp;X-Cache-Lookup:&nbsp;MISS&nbsp;from&nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&nbsp;id=&quot;gmail-result_box&quot;&nbsp;class=&quot;gmail-short_text&quot;&nbsp;lang=&quot;en&quot;&gt;&lt;span&nbsp;class=&quot;gmail-&quot;&gt;&lt;span&nbsp;style=&quot;font-family:monospace,monospace&quot;&gt;&lt;span&nbsp;style=&quot;font-family:monospace,monospace&quot;&gt;&lt;squid-proxy&gt;&lt;/span&gt;:3128&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;span&nbsp;id=&quot;gmail-result_box&quot;&nbsp;class=&quot;gmail-short_text&quot;&nbsp;lang=&quot;en&quot;&gt;&lt;span&nbsp;class=&quot;gmail-&quot;&gt;I&nbsp;can&#39;t&nbsp;find&nbsp;any&nbsp;information&nbsp;on&nbsp;Squid&nbsp;wiki&nbsp;or&nbsp;via&nbsp;Google&nbsp;if&nbsp;the&nbsp;&lt;/span&gt;&lt;/span&gt;object&nbsp;need&nbsp;revalidation&nbsp;immediately.&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;I&nbsp;use&nbsp;Squid&nbsp;3.4.14&nbsp;from&nbsp;CentOS&nbsp;6&nbsp;package&nbsp;squid34-3.4.14-15.el6.x86_64.&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;With&nbsp;best&nbsp;regards,&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;zigi&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Sep&nbsp;19,&nbsp;2017&nbsp;at&nbsp;5:17&nbsp;PM,&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&nbsp;target=&quot;_blank&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;On&nbsp;20/09/17&nbsp;02:00,&nbsp;kAja&nbsp;Ziegler&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;<br>
Hi&nbsp;all,&lt;br&gt;<br>
&lt;br&gt;<br>
  &nbsp;I&nbsp;want&nbsp;to&nbsp;ask&nbsp;why&nbsp;my&nbsp;Squid&nbsp;does&nbsp;not&nbsp;cache&nbsp;redirects&nbsp;301,&nbsp;302&nbsp;and&nbsp;307.&nbsp;See&nbsp;anomised&nbsp;example&nbsp;below.&nbsp;Even&nbsp;if&nbsp;I&nbsp;call&nbsp;the&nbsp;URL&nbsp;more&nbsp;times&nbsp;or&nbsp;I&nbsp;open&nbsp;it&nbsp;in&nbsp;the&nbsp;browser,&nbsp;I&nbsp;always&nbsp;get&nbsp;MISS&nbsp;independently&nbsp;of&nbsp;the&nbsp;return&nbsp;code&nbsp;301,&nbsp;302&nbsp;or&nbsp;307.&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
302&nbsp;and&nbsp;307&nbsp;are&nbsp;not&nbsp;because&nbsp;as&nbsp;their&nbsp;status&nbsp;description&nbsp;indicates&nbsp;they&nbsp;are&nbsp;*temporary*&nbsp;results.&nbsp;They&nbsp;can&nbsp;only&nbsp;be&nbsp;cached&nbsp;if&nbsp;there&nbsp;are&nbsp;explicit&nbsp;details&nbsp;from&nbsp;the&nbsp;server&nbsp;indicating&nbsp;for&nbsp;how&nbsp;long.&lt;br&gt;<br>
&lt;br&gt;<br>
301&nbsp;should&nbsp;be&nbsp;cached&nbsp;unless&nbsp;the&nbsp;object&nbsp;would&nbsp;need&nbsp;revalidation&nbsp;immediately.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Amos&lt;br&gt;<br>
______________________________&lt;wbr&gt;_________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.&lt;wbr&gt;org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/l&lt;wbr&gt;istinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
