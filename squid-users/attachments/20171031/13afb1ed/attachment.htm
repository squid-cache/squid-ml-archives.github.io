<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Since&nbsp;at&nbsp;home&nbsp;I&nbsp;only&nbsp;have&nbsp;IPv4,&nbsp;I&nbsp;can&#39;t&nbsp;fully&nbsp;disable&nbsp;ipv4&nbsp;on&nbsp;the&nbsp;squid&nbsp;server&nbsp;OS.&nbsp;I&nbsp;think&nbsp;the&nbsp;best&nbsp;option&nbsp;for&nbsp;me&nbsp;would&nbsp;be&nbsp;to&nbsp;configure&nbsp;iptables&nbsp;to&nbsp;reject&nbsp;ipv4&nbsp;on&nbsp;any&nbsp;port&nbsp;other&nbsp;than&nbsp;port&nbsp;&quot;3001&quot;&nbsp;which&nbsp;is&nbsp;what&nbsp;squid&nbsp;is&nbsp;accepting&nbsp;ipv4&nbsp;connections&nbsp;to.&nbsp;Would&nbsp;that&nbsp;be&nbsp;possible&nbsp;with&nbsp;iptables?&lt;br&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Oct&nbsp;31,&nbsp;2017&nbsp;at&nbsp;3:13&nbsp;AM,&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&nbsp;target=&quot;_blank&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;On&nbsp;31/10/17&nbsp;18:34,&nbsp;xpro6000&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
Unfortunately&nbsp;my&nbsp;ISP&nbsp;does&nbsp;not&nbsp;provide&nbsp;an&nbsp;IPv6&nbsp;IP,&nbsp;I&nbsp;need&nbsp;to&nbsp;create&nbsp;an&nbsp;only&nbsp;IPv6&nbsp;network&nbsp;so&nbsp;I&nbsp;can&nbsp;test&nbsp;an&nbsp;iphone&nbsp;app&nbsp;as&nbsp;required&nbsp;by&nbsp;the&nbsp;Apple&nbsp;store&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://developer.apple.com/support/ipv6/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://developer.apple.com/su&lt;wbr&gt;pport/ipv6/&lt;/a&gt;&nbsp;&lt;&lt;a&nbsp;href=&quot;https://developer.apple.com/support/ipv6/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://developer.apple.com/s&lt;wbr&gt;upport/ipv6/&lt;/a&gt;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
Squids&#39;&nbsp;default&nbsp;behaviour&nbsp;is&nbsp;to&nbsp;follow&nbsp;BCP&nbsp;177.&nbsp;So&nbsp;any&nbsp;use&nbsp;of&nbsp;IPv4&nbsp;is&nbsp;a&nbsp;strong&nbsp;indication&nbsp;that&nbsp;the&nbsp;server&nbsp;used&nbsp;by&nbsp;your&nbsp;app&nbsp;is&nbsp;having&nbsp;IPv6&nbsp;connectivity&nbsp;issues.&lt;br&gt;<br>
&lt;br&gt;<br>
see&nbsp;&quot;Limitations&nbsp;of&nbsp;Local&nbsp;Testing&quot;&nbsp;at&nbsp;&lt;&lt;a&nbsp;href=&quot;https://developer.apple.com/library/ios/documentation/NetworkingInternetWeb/Conceptual/NetworkingOverview/UnderstandingandPreparingfortheIPv6Transition/UnderstandingandPreparingfortheIPv6Transition.html#//apple_ref/doc/uid/TP40010220-CH213-SW1&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://developer.apple.com/l&lt;wbr&gt;ibrary/ios/documentation/Netwo&lt;wbr&gt;rkingInternetWeb/Conceptual/&lt;wbr&gt;NetworkingOverview/Understandi&lt;wbr&gt;ngandPreparingfortheIPv6Transi&lt;wbr&gt;tion/UnderstandingandPreparing&lt;wbr&gt;fortheIPv6Transition.html#//&lt;wbr&gt;apple_ref/doc/uid/TP40010220-&lt;wbr&gt;CH213-SW1&lt;/a&gt;&gt;.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
What&nbsp;I&nbsp;did&nbsp;was,&nbsp;I&nbsp;created&nbsp;a&nbsp;VPS&nbsp;with&nbsp;IPv6&nbsp;support,&nbsp;I&nbsp;added&nbsp;the&nbsp;following&nbsp;to&nbsp;squid.conf&lt;br&gt;<br>
&lt;br&gt;<br>
http_port&nbsp;3001&lt;br&gt;<br>
acl&nbsp;port1&nbsp;myport&nbsp;3001&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
Use&nbsp;&quot;myportname&quot;&nbsp;ACL&nbsp;type.&nbsp;&#39;myport&#39;&nbsp;is&nbsp;deprecated.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
tcp_outgoing_address&nbsp;2001:19f1:9232:d4d:b757:3535:1&lt;wbr&gt;910:412e&nbsp;port1&lt;br&gt;<br>
server_persistent_connections&nbsp;off&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
Why&nbsp;disabling&nbsp;persistence?&nbsp;it&nbsp;has&nbsp;nothing&nbsp;to&nbsp;do&nbsp;with&nbsp;IPv4&nbsp;vs&nbsp;IPv6.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;br&gt;<br>
The&nbsp;config&nbsp;above&nbsp;works&nbsp;fine.&nbsp;If&nbsp;the&nbsp;website&nbsp;supports&nbsp;IPv6,&nbsp;it&nbsp;does&nbsp;use&nbsp;that&nbsp;IPv6&nbsp;IP.&nbsp;But&nbsp;Squid&nbsp;uses&nbsp;IPv4&nbsp;if&nbsp;the&nbsp;website&nbsp;does&nbsp;not&nbsp;support&nbsp;IPv6&lt;br&gt;<br>
&lt;br&gt;<br>
Is&nbsp;there&nbsp;anyway&nbsp;to&nbsp;prevent&nbsp;Squid&nbsp;to&nbsp;use&nbsp;IPv4&nbsp;for&nbsp;outgoing&nbsp;connections?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/blockquote&gt;<br>
&lt;br&gt;<br>
IPv4&nbsp;is&nbsp;not&nbsp;yet&nbsp;an&nbsp;optional&nbsp;protocol&nbsp;so&nbsp;technically&nbsp;no.&nbsp;But&nbsp;there&nbsp;are&nbsp;several&nbsp;ways&nbsp;to&nbsp;safely&nbsp;achieve&nbsp;IPv6-only&nbsp;traffic:&lt;br&gt;<br>
&lt;br&gt;<br>
*&nbsp;some&nbsp;DNS&nbsp;resolvers&nbsp;can&nbsp;be&nbsp;configured&nbsp;not&nbsp;to&nbsp;deliver&nbsp;A&nbsp;records.&lt;br&gt;<br>
&lt;br&gt;<br>
*&nbsp;ensure&nbsp;the&nbsp;NIC&nbsp;of&nbsp;the&nbsp;machine&nbsp;running&nbsp;Squid&nbsp;has&nbsp;no&nbsp;IPv4&nbsp;addresses.&lt;br&gt;<br>
&lt;br&gt;<br>
*&nbsp;ensure&nbsp;that&nbsp;IPv4&nbsp;space&nbsp;is&nbsp;all&nbsp;non-routable.&lt;br&gt;<br>
&lt;br&gt;<br>
*&nbsp;ensure&nbsp;your&nbsp;Squid&nbsp;machines&nbsp;firewall&nbsp;is&nbsp;configured&nbsp;to&nbsp;reject&nbsp;(_not_&nbsp;drop)&nbsp;IPv4&nbsp;packets.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Notice&nbsp;how&nbsp;all&nbsp;of&nbsp;those&nbsp;are&nbsp;things&nbsp;you&nbsp;would&nbsp;need&nbsp;to&nbsp;do&nbsp;to&nbsp;make&nbsp;your&nbsp;network&nbsp;*actually*&nbsp;IPv6-only&nbsp;and&nbsp;have&nbsp;nothing&nbsp;directly&nbsp;to&nbsp;do&nbsp;with&nbsp;Squid.&lt;br&gt;<br>
&lt;br&gt;<br>
Amos&lt;br&gt;<br>
______________________________&lt;wbr&gt;_________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.&lt;wbr&gt;org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/l&lt;wbr&gt;istinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
