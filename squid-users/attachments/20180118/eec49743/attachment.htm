<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hello.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;cache_dir&nbsp;max-swap-rate&nbsp;documentation&nbsp;says&nbsp;that&nbsp;swap&nbsp;in&nbsp;requests&nbsp;contribute&nbsp;to&nbsp;measured&nbsp;swap&nbsp;rate.&nbsp;However&nbsp;in&nbsp;our&nbsp;squid&nbsp;4&nbsp;load&nbsp;test&nbsp;we&nbsp;see&nbsp;that&nbsp;read_ops&nbsp;+&nbsp;write_ops&nbsp;significantly&nbsp;exceeds&nbsp;the max-swap-rate&nbsp;we&nbsp;set&nbsp;and&nbsp;squid&nbsp;doesn&#39;t&nbsp;limit&nbsp;it.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;tried&nbsp;to&nbsp;set&nbsp;it&nbsp;to&nbsp;200&nbsp;to&nbsp;confirm&nbsp;that&nbsp;it&nbsp;actually&nbsp;works&nbsp;and&nbsp;saw&nbsp;that&nbsp;it&nbsp;does.&nbsp;Squid&nbsp;started&nbsp;warning&nbsp;about&nbsp;exceeding&nbsp;max-swap-rate.&nbsp;But&nbsp;looks&nbsp;like&nbsp;real&nbsp;limit&nbsp;is&nbsp;higher&nbsp;than&nbsp;the&nbsp;value&nbsp;we&nbsp;set&nbsp;in&nbsp;configuration.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Hardware:&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;AWS&nbsp;GP2&nbsp;EBS&nbsp;(SSD)&nbsp;600GB,&nbsp;1500&nbsp;iops&nbsp;baseline&nbsp;performance,&nbsp;3000&nbsp;iops&nbsp;burstable.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Config:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;cache_dir&nbsp;rock&nbsp;/mnt/services/squid/cache&nbsp;435200&nbsp;swap-timeout=500&nbsp;max-swap-rate=1200&nbsp;slot-size=16384&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;IOPS&nbsp;squid&nbsp;pushes&nbsp;under&nbsp;our&nbsp;load&nbsp;test:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;read&nbsp;~800&nbsp;ops/sec&lt;/div&gt;&lt;div&gt;write&nbsp;~1100&nbsp;ops/sec&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;In&nbsp;summary&nbsp;it&nbsp;gives&nbsp;us&nbsp;~1900&nbsp;ops/sec&nbsp;which&nbsp;exceeds&nbsp;AWS&nbsp;limit&nbsp;of&nbsp;1500&nbsp;ops/sec&nbsp;and&nbsp;after&nbsp;spending&nbsp;too&nbsp;much&nbsp;&quot;burst&nbsp;balance&quot;&nbsp;we&nbsp;started&nbsp;getting&nbsp;throttled&nbsp;from&nbsp;AWS&nbsp;side.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Could&nbsp;you&nbsp;please&nbsp;comment&nbsp;on&nbsp;this&nbsp;behavior?&nbsp;What&nbsp;the&nbsp;limit&nbsp;should&nbsp;we&nbsp;set&nbsp;to&nbsp;stay&nbsp;under&nbsp;1500&nbsp;ops/sec&nbsp;for&nbsp;swap&nbsp;in&nbsp;+&nbsp;swap&nbsp;out&nbsp;operations?&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Squid&nbsp;version:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;Squid&nbsp;Cache:&nbsp;Version&nbsp;4.0.22&lt;/div&gt;&lt;div&gt;Service&nbsp;Name:&nbsp;squid&lt;/div&gt;&lt;div&gt;configure&nbsp;options: &nbsp;&#39;--program-prefix=&#39;&nbsp;&#39;--prefix=/usr&#39;&nbsp;&#39;--exec-prefix=/usr&#39;&nbsp;&#39;--bindir=/usr/sbin&#39;&nbsp;&#39;--sbindir=/usr/sbin&#39;&nbsp;&#39;--sysconfdir=/etc/squid&#39;&nbsp;&#39;--libdir=/usr/lib&#39;&nbsp;&#39;--libexecdir=/usr/lib/squid&#39;&nbsp;&#39;--includedir=/usr/include&#39;&nbsp;&#39;--datadir=/usr/share&#39;&nbsp;&#39;--sharedstatedir=/usr/com&#39;&nbsp;&#39;--localstatedir=/var&#39;&nbsp;&#39;--mandir=/usr/share/man&#39;&nbsp;&#39;--infodir=/usr/share/info&#39;&nbsp;&#39;--enable-epoll&#39;&nbsp;&#39;--enable-removal-policies=heap,lru&#39;&nbsp;&#39;--enable-storeio=aufs,rock&#39;&nbsp;&#39;--enable-delay-pools&#39;&nbsp;&#39;--with-pthreads&#39;&nbsp;&#39;--enable-cache-digests&#39;&nbsp;&#39;--with-large-files&#39;&nbsp;&#39;--with-maxfd=16384&#39;&nbsp;&#39;--enable-htcp&#39;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&gt;With&nbsp;best&nbsp;regards,&nbsp;Ivan&nbsp;Larionov.&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;<br>

</tt>
