## Copyright (C) 1996-2018 The Squid Software Foundation and contributors
##
## Squid software is distributed under GPLv2+ license and includes
## contributions from numerous individuals and organizations.
## Please see the COPYING and CONTRIBUTORS files for details.
##

[Unit]
Description=Squid Web Proxy Server instance %i
Documentation=man:squid(8)
ConditionPathExists=/etc/squid/%i.instance
PartOf=squid.service
ReloadPropagatedFrom=squid.service
Before=squid.service
After=network.target nss-lookup.target

[Service]
Type=forking
PIDFile=/var/run/squid/%i.pid
SyslogIdentifier=squid@%i
ExecStartPre=-/bin/mkdir /var/run/squid
ExecStartPre=/bin/chown -R proxy:proxy /var/run/squid
ExecStartPre=/usr/sbin/squid --foreground -z -n %i
ExecStart=/usr/sbin/squid -sYC -n %i
ExecReload=/usr/sbin/squid -k reconfigure -n %i
ExecStop=/usr/sbin/squid -k shutdown -n %i
KillMode=mixed

[Install]
WantedBy=multi-user.target

