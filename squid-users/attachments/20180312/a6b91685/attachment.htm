<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Seeing&nbsp;a&nbsp;exception&nbsp;followed&nbsp;by&nbsp;termination&nbsp;fairly&nbsp;regularly&nbsp;with&nbsp;Squid--&gt;Icap&nbsp;with&nbsp;this&nbsp;stacktrace&nbsp;on&nbsp;3.5.25. &nbsp; &lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;The&nbsp;problem&nbsp;typically&nbsp;happens&nbsp;when&nbsp;icap&nbsp;has&nbsp;not&nbsp;been&nbsp;started&nbsp;yet&nbsp;and&nbsp;squid&nbsp;is&nbsp;processing&nbsp;some&nbsp;requests&nbsp;and&nbsp;is&nbsp;configured&nbsp;for&nbsp;ICAP&nbsp;adaptation&nbsp;service.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&nbsp;seems&nbsp;like&nbsp;the&nbsp;ICAP&nbsp;Options&nbsp;request&nbsp;goes&nbsp;unanswered&nbsp;(as&nbsp;it&nbsp;would&nbsp;since&nbsp;ICAP&nbsp;is&nbsp;not&nbsp;UP)&nbsp;and&nbsp;we&nbsp;try&nbsp;to&nbsp;shut&nbsp;down&nbsp;the&nbsp;ICAP&nbsp;service&nbsp;but&nbsp;there&#39;s&nbsp;some&nbsp;dangling&nbsp;state&nbsp;with&nbsp;respect&nbsp;to&nbsp;the&nbsp;options &nbsp;requests&nbsp;that&nbsp;were&nbsp;sent.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Appreciate&nbsp;it&nbsp;if&nbsp;someone&nbsp;can&nbsp;comment&nbsp;on&nbsp;whether&nbsp;this&nbsp;is&nbsp;known&nbsp;and&nbsp;fixed&nbsp;before&nbsp;i&nbsp;dig&nbsp;a&nbsp;little&nbsp;deeper. &nbsp; &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;#0 &nbsp;0x00007ff944120428&nbsp;in&nbsp;__GI_raise&nbsp;(sig=sig@entry=6)&nbsp;at&nbsp;../sysdeps/unix/sysv/linux/raise.c:54&lt;/div&gt;&lt;div&gt;#1 &nbsp;0x00007ff94412202a&nbsp;in&nbsp;__GI_abort&nbsp;()&nbsp;at&nbsp;abort.c:89&lt;/div&gt;&lt;div&gt;#2 &nbsp;0x00007ff944a670d5&nbsp;in&nbsp;__gnu_cxx::__verbose_terminate_handler()&nbsp;()&nbsp;from&nbsp;/usr/lib/x86_64-linux-gnu/libstdc++.so.6&lt;/div&gt;&lt;div&gt;#3 &nbsp;0x00007ff944a64cc6&nbsp;in&nbsp;??&nbsp;()&nbsp;from&nbsp;/usr/lib/x86_64-linux-gnu/libstdc++.so.6&lt;/div&gt;&lt;div&gt;#4 &nbsp;0x00007ff944a63bc9&nbsp;in&nbsp;??&nbsp;()&nbsp;from&nbsp;/usr/lib/x86_64-linux-gnu/libstdc++.so.6&lt;/div&gt;&lt;div&gt;#5 &nbsp;0x00007ff944a645b8&nbsp;in&nbsp;__gxx_personality_v0&nbsp;()&nbsp;from&nbsp;/usr/lib/x86_64-linux-gnu/libstdc++.so.6&lt;/div&gt;&lt;div&gt;#6 &nbsp;0x00007ff9444c4f03&nbsp;in&nbsp;??&nbsp;()&nbsp;from&nbsp;/lib/x86_64-linux-gnu/libgcc_s.so.1&lt;/div&gt;&lt;div&gt;#7 &nbsp;0x00007ff9444c5410&nbsp;in&nbsp;_Unwind_RaiseException&nbsp;()&nbsp;from&nbsp;/lib/x86_64-linux-gnu/libgcc_s.so.1&lt;/div&gt;&lt;div&gt;#8 &nbsp;0x00007ff944a64f47&nbsp;in&nbsp;__cxa_throw&nbsp;()&nbsp;from&nbsp;/usr/lib/x86_64-linux-gnu/libstdc++.so.6&lt;/div&gt;&lt;div&gt;#9 &nbsp;0x00000000006f3486&nbsp;in&nbsp;Throw&nbsp;(message=message@entry=0x8ae66e&nbsp;&quot;!theOptionsFetcher&quot;,&nbsp;fileName=fileName@entry=0x8ae647&nbsp;&quot;ServiceRep.cc&quot;,&nbsp;lineNo=lineNo@entry=50,&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;id=149798962)&nbsp;at&nbsp;TextException.cc:93&lt;/div&gt;&lt;div&gt;#10&nbsp;0x00000000008071f9&nbsp;in&nbsp;Adaptation::Icap::ServiceRep::~ServiceRep&nbsp;(this=this@entry=0x1298b58,&nbsp;__in_chrg=&lt;optimized&nbsp;out&gt;,&nbsp;__vtt_parm=&lt;optimized&nbsp;out&gt;)&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;at&nbsp;ServiceRep.cc:50&lt;/div&gt;&lt;div&gt;#11&nbsp;0x00000000008073c9&nbsp;in&nbsp;Adaptation::Icap::ServiceRep::~ServiceRep&nbsp;(this=0x1298b58,&nbsp;__in_chrg=&lt;optimized&nbsp;out&gt;,&nbsp;__vtt_parm=&lt;optimized&nbsp;out&gt;)&nbsp;at&nbsp;ServiceRep.cc:52&lt;/div&gt;&lt;div&gt;#12&nbsp;0x000000000081d6c3&nbsp;in&nbsp;RefCount&lt;Adaptation::Service&gt;::dereference&nbsp;(newP=0x0,&nbsp;this=0x133ef88)&nbsp;at&nbsp;../../../src/base/RefCount.h:79&lt;/div&gt;&lt;div&gt;#13&nbsp;RefCount&lt;Adaptation::Service&gt;::~RefCount&nbsp;(this=0x133ef88,&nbsp;__in_chrg=&lt;optimized&nbsp;out&gt;)&nbsp;at&nbsp;../../../src/base/RefCount.h:35&lt;/div&gt;&lt;div&gt;#14&nbsp;Adaptation::Icap::Launcher::~Launcher&nbsp;(this=0x133ef68,&nbsp;__vtt_parm=0xb5e208&nbsp;&lt;VTT&nbsp;for&nbsp;Adaptation::Icap::OptXactLauncher+8&gt;,&nbsp;__in_chrg=&lt;optimized&nbsp;out&gt;)&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;at&nbsp;Launcher.cc:32&lt;/div&gt;&lt;div&gt;#15&nbsp;0x0000000000830137&nbsp;in&nbsp;Adaptation::Icap::OptXactLauncher::~OptXactLauncher&nbsp;(this=0x133ef68,&nbsp;__in_chrg=&lt;optimized&nbsp;out&gt;,&nbsp;__vtt_parm=&lt;optimized&nbsp;out&gt;)&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;at&nbsp;../../../src/adaptation/icap/OptXact.h:55&lt;/div&gt;&lt;div&gt;#16&nbsp;Adaptation::Icap::OptXactLauncher::~OptXactLauncher&nbsp;(this=0x133ef68,&nbsp;__in_chrg=&lt;optimized&nbsp;out&gt;,&nbsp;__vtt_parm=&lt;optimized&nbsp;out&gt;)&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;at&nbsp;../../../src/adaptation/icap/OptXact.h:55&lt;/div&gt;&lt;div&gt;#17&nbsp;0x00000000006f0666&nbsp;in&nbsp;AsyncJob::callEnd&nbsp;(this=0x133efa8)&nbsp;at&nbsp;AsyncJob.cc:144&lt;/div&gt;&lt;div&gt;#18&nbsp;0x00000000007f4732&nbsp;in&nbsp;JobDialer&lt;Adaptation::Initiator&gt;::dial&nbsp;(this=0x153f2f0,&nbsp;call=...)&nbsp;at&nbsp;../../src/base/AsyncJobCalls.h:181&lt;/div&gt;&lt;div&gt;#19&nbsp;0x00000000006ee331&nbsp;in&nbsp;AsyncCall::make&nbsp;(this=0x153f2c0)&nbsp;at&nbsp;AsyncCall.cc:40&lt;/div&gt;&lt;div&gt;#20&nbsp;0x00000000006f26e5&nbsp;in&nbsp;AsyncCallQueue::fireNext&nbsp;(this=this@entry=0xdc2c60)&nbsp;at&nbsp;AsyncCallQueue.cc:56&lt;/div&gt;&lt;div&gt;#21&nbsp;0x00000000006f2b09&nbsp;in&nbsp;AsyncCallQueue::fire&nbsp;(this=0xdc2c60)&nbsp;at&nbsp;AsyncCallQueue.cc:42&lt;/div&gt;&lt;div&gt;#22&nbsp;0x000000000057def9&nbsp;in&nbsp;EventLoop::dispatchCalls&nbsp;(this=0x7fffca605010)&nbsp;at&nbsp;EventLoop.cc:143&lt;/div&gt;&lt;div&gt;#23&nbsp;EventLoop::runOnce&nbsp;(this=this@entry=0x7fffca605010)&nbsp;at&nbsp;EventLoop.cc:120&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>

</tt>
