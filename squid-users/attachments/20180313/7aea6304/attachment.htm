<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Hi&nbsp;guys.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;is&nbsp;my&nbsp;last&nbsp;attempt&nbsp;before&nbsp;going&nbsp;to&nbsp;authenticated&nbsp;mode.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;searched&nbsp;all&nbsp;over&nbsp;the&nbsp;internet&nbsp;for&nbsp;a&nbsp;way&nbsp;to&nbsp;set&nbsp;up&nbsp;a&nbsp;&quot;transparent&nbsp;squid&quot;&nbsp;but&nbsp;until&nbsp;then&nbsp;the&nbsp;most&nbsp;I&nbsp;can&nbsp;get&nbsp;is&nbsp;an&nbsp;exhausted&nbsp;timeout&nbsp;when&nbsp;I&nbsp;go&nbsp;to&nbsp;an&nbsp;http.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;environment&nbsp;is&nbsp;as&nbsp;follows.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-&nbsp;Box&nbsp;squid&nbsp;3.5.20&lt;/div&gt;&lt;div&gt;-&nbsp;pfSense&nbsp;as&nbsp;the&nbsp;default&nbsp;network&nbsp;gateway.&lt;/div&gt;&lt;div&gt;-&nbsp;Desktop&nbsp;Windows&nbsp;or&nbsp;linux.&lt;/div&gt;&lt;div&gt;-&nbsp;Only&nbsp;one&nbsp;network&nbsp;/24&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;was&nbsp;able&nbsp;to&nbsp;make&nbsp;it&nbsp;work&nbsp;through&nbsp;this&nbsp;documentation:&nbsp;&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/ConfigExamples/Intercept/LinuxRedirect&quot;&gt;https://wiki.squid-cache.org/ConfigExamples/Intercept/LinuxRedirect&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;However&nbsp;this&nbsp;environment&nbsp;requires&nbsp;that&nbsp;the&nbsp;client&nbsp;has&nbsp;configured&nbsp;the&nbsp;gateway&nbsp;ip&nbsp;address&nbsp;of&nbsp;the&nbsp;squid&nbsp;itself.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&nbsp;works.&nbsp;But&nbsp;that&#39;s&nbsp;not&nbsp;what&nbsp;I&nbsp;want.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;NOTE:&nbsp;NAT&nbsp;configuration&nbsp;will&nbsp;only&nbsp;work&nbsp;when&nbsp;used&nbsp;on&nbsp;the&nbsp;squid&nbsp;box.&nbsp;This&nbsp;is&nbsp;required&nbsp;to&nbsp;perform&nbsp;intercept&nbsp;accurately&nbsp;and&nbsp;securely.&nbsp;To&nbsp;intercept&nbsp;from&nbsp;a&nbsp;gateway&nbsp;machine&nbsp;and&nbsp;direct&nbsp;traffic&nbsp;at&nbsp;a&nbsp;separate&nbsp;squid&nbsp;box&nbsp;use&nbsp;policy&nbsp;routing.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;I&nbsp;want&nbsp;is&nbsp;to&nbsp;make&nbsp;a&nbsp;rule&nbsp;in&nbsp;pfsense&nbsp;through&nbsp;policy&nbsp;routing,&nbsp;as&nbsp;it&nbsp;speaks&nbsp;in&nbsp;the&nbsp;documentation.&nbsp;I&#39;ve&nbsp;tried&nbsp;several&nbsp;ways,&nbsp;but&nbsp;every&nbsp;time&nbsp;I&nbsp;try&nbsp;to&nbsp;access&nbsp;the&nbsp;http&nbsp;page&nbsp;it&nbsp;loads&nbsp;until&nbsp;the&nbsp;timeout&nbsp;expires.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;In&nbsp;doc&nbsp;it&nbsp;does&nbsp;not&nbsp;explain&nbsp;directly&nbsp;how&nbsp;to&nbsp;do&nbsp;this&nbsp;rule&nbsp;in&nbsp;pfsense.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;tried&nbsp;through&nbsp;nat&nbsp;port&nbsp;forwarding&nbsp;and&nbsp;through&nbsp;rules&nbsp;in&nbsp;firewall&nbsp;setting&nbsp;in&nbsp;the&nbsp;squid&nbsp;server&nbsp;rule&nbsp;as&nbsp;gateway.&nbsp;But&nbsp;both&nbsp;do&nbsp;not&nbsp;work.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;tried&nbsp;to&nbsp;take&nbsp;as&nbsp;base&nbsp;these&nbsp;two&nbsp;links,&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/ConfigExamples/Intercept/IptablesPolicyRoute&quot;&gt;https://wiki.squid-cache.org/ConfigExamples/Intercept/IptablesPolicyRoute&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/ConfigExamples/Intercept/PfPolicyRoute&quot;&gt;https://wiki.squid-cache.org/ConfigExamples/Intercept/PfPolicyRoute&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;No&nbsp;firewall&nbsp;block&lt;/div&gt;&lt;div&gt;It&#39;s&nbsp;some&nbsp;detail&nbsp;that&#39;s&nbsp;missing&nbsp;either&nbsp;in&nbsp;pfsense&nbsp;or&nbsp;squid.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Please&nbsp;give&nbsp;me&nbsp;a&nbsp;light.&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;gmail_signature&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;style=&quot;color:rgb(51,51,51);font-family:arial,helvetica,sans-serif&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&nbsp;color=&quot;#000000&quot;&nbsp;style=&quot;font-size:small&quot;&gt;Att,&lt;/font&gt;&lt;div&nbsp;style=&quot;font-size:small;color:rgb(34,34,34);font-family:arial,sans-serif&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&nbsp;color=&quot;#000000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:small;color:rgb(34,34,34);font-family:arial,sans-serif&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&nbsp;color=&quot;#000000&quot;&gt;Antonio&nbsp;Emiliano&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&nbsp;color=&quot;#000000&quot;&nbsp;size=&quot;1&quot;&gt;LinkedIn:&lt;/font&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&nbsp;color=&quot;#000000&quot;&nbsp;size=&quot;1&quot;&nbsp;style=&quot;font-size:small&quot;&gt; &lt;/font&gt;&lt;font&nbsp;color=&quot;#000000&quot;&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&nbsp;size=&quot;1&quot;&gt;&lt;a&nbsp;href=&quot;https://www.linkedin.com/in/antonioemiliano&quot;&nbsp;target=&quot;_blank&quot;&gt;https://www.linkedin.com/in/antonioemiliano&lt;/a&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:small&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&nbsp;color=&quot;#000000&quot;&nbsp;size=&quot;1&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:small&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&nbsp;color=&quot;#000000&quot;&nbsp;size=&quot;1&quot;&gt;&quot;Corra,&nbsp;coelho.&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:small&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&nbsp;color=&quot;#000000&quot;&nbsp;size=&quot;1&quot;&gt; Cave&nbsp;um&nbsp;buraco,&nbsp;esqueça&nbsp;o&nbsp;sol,&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-family:&quot;Times&nbsp;New&nbsp;Roman&quot;;font-size:medium&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&nbsp;size=&quot;1&quot;&gt; E&nbsp;quando&nbsp;o&nbsp;trabalho&nbsp;finalmente&nbsp;acabar&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;color:rgb(0,0,0);font-family:&quot;Times&nbsp;New&nbsp;Roman&quot;;font-size:medium&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&nbsp;size=&quot;1&quot;&gt; Não&nbsp;descanse,&nbsp;é&nbsp;hora&nbsp;de&nbsp;cavar&nbsp;outro.&quot;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;<br>

</tt>
