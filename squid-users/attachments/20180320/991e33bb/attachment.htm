<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;text=&quot;#000000&quot;&nbsp;bgcolor=&quot;#FFFFFF&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;Forgot&nbsp;about:&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;My&nbsp;server&nbsp;is&nbsp;&lt;span&nbsp;id=&quot;result_box&quot;&nbsp;class=&quot;&quot;&nbsp;lang=&quot;en&quot;&gt;&lt;span<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class=&quot;&quot;&gt;relatively&nbsp;modest&nbsp;(more&nbsp;resources&nbsp;just&nbsp;do&nbsp;not&nbsp;need<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:))&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;span&nbsp;id=&quot;result_box&quot;&nbsp;class=&quot;&quot;&nbsp;lang=&quot;en&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&gt;Just&nbsp;8<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cores&nbsp;(Xeon&nbsp;2.3&nbsp;GHz),&nbsp;16&nbsp;Gb&nbsp;RAM,&nbsp;SAS&nbsp;HDD's&nbsp;10k&nbsp;RPM&nbsp;(~300&nbsp;Gb&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RAID-10) &nbsp;:)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;span&nbsp;id=&quot;result_box&quot;&nbsp;class=&quot;&quot;&nbsp;lang=&quot;en&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&gt;Overall<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CPU&nbsp;usage&nbsp;is&nbsp;~3%&nbsp;(with&nbsp;SSL&nbsp;Bump).&nbsp;And&nbsp;half&nbsp;of&nbsp;RAM&nbsp;is&nbsp;free&nbsp;:)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;moz-cite-prefix&quot;&gt;20.03.2018&nbsp;23:14,&nbsp;Yuri&nbsp;пишет:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cite=&quot;mid:ff82b209-4ec0-5e33-b2bd-2673b25a2bdd@gmail.com&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;<br>
<br>
20.03.2018&nbsp;23:10,&nbsp;Yuri&nbsp;пишет:<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;<br>
20.03.2018&nbsp;23:03,&nbsp;FredB&nbsp;пишет:<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Hi&nbsp;Yuri,<br>
<br>
200&nbsp;mbits,&nbsp;more&nbsp;or&nbsp;less&nbsp;1000/2000&nbsp;simultaneous&nbsp;users&nbsp;<br>
<br>
I&nbsp;increase&nbsp;children&nbsp;value,&nbsp;because&nbsp;the&nbsp;limit&nbsp;is&nbsp;reached&nbsp;very&nbsp;quickly&nbsp;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Because&nbsp;of&nbsp;SSL&nbsp;processing&nbsp;to&nbsp;slow.&nbsp;Investigate,&nbsp;why.&nbsp;Simple&nbsp;increasing<br>
number&nbsp;of&nbsp;children&nbsp;exghausting&nbsp;your&nbsp;RAM.<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;and&nbsp;only&nbsp;100&nbsp;MB&nbsp;on&nbsp;disk?<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;100&nbsp;MB&nbsp;by&nbsp;process,&nbsp;no&nbsp;?&nbsp;I&nbsp;think&nbsp;I&nbsp;should&nbsp;reduce&nbsp;this&nbsp;value&nbsp;and&nbsp;rather&nbsp;increase&nbsp;the&nbsp;max&nbsp;of&nbsp;children<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;No.&nbsp;This&nbsp;is&nbsp;overall&nbsp;fs&nbsp;limit&nbsp;to&nbsp;store.<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Look&nbsp;on&nbsp;my&nbsp;relatively&nbsp;big&nbsp;server&nbsp;(Squid&nbsp;5.0)&nbsp;config&nbsp;snippet:<br>
<br>
https_port&nbsp;3127&nbsp;intercept&nbsp;ssl-bump&nbsp;generate-host-certificates=on<br>
dynamic_cert_mem_cache_size=10MB&nbsp;cert=/usr/local/squid/etc/rootCA2.crt<br>
key=/usr/local/squid/etc/rootCA2.key<br>
tls-cafile=/usr/local/squid/etc/rootCA12.crt<br>
options=SINGLE_DH_USE:SINGLE_ECDH_USE<br>
tls-dh=secp384r1:/usr/local/squid/etc/dhparam.pem<br>
cipher=HIGH:MEDIUM:RC4:3DES:!aNULL:!eNULL:!LOW:!MD5:!EXP:!PSK:!SRP:!DSS<br>
tls-no-npn&nbsp;sslflags=NO_DEFAULT_CA:VERIFY_CRL_ALL<br>
http_port&nbsp;3128&nbsp;ssl-bump&nbsp;generate-host-certificates=on<br>
dynamic_cert_mem_cache_size=10MB&nbsp;cert=/usr/local/squid/etc/rootCA2.crt<br>
key=/usr/local/squid/etc/rootCA2.key<br>
tls-cafile=/usr/local/squid/etc/rootCA12.crt<br>
options=SINGLE_DH_USE:SINGLE_ECDH_USE<br>
tls-dh=secp384r1:/usr/local/squid/etc/dhparam.pem<br>
cipher=HIGH:MEDIUM:RC4:3DES:!aNULL:!eNULL:!LOW:!MD5:!EXP:!PSK:!SRP:!DSS<br>
tls-no-npn&nbsp;sslflags=NO_DEFAULT_CA:VERIFY_CRL_ALL<br>
tls_outgoing_options&nbsp;cafile=/usr/local/squid/etc/ca-bundle.crt<br>
cipher=HIGH:MEDIUM:RC4:3DES:!aNULL:!eNULL:!LOW:!MD5:!EXP:!PSK:!SRP:!DSS<br>
<br>
#&nbsp;Cert&nbsp;database&nbsp;on&nbsp;ramdisk<br>
sslcrtd_program&nbsp;/usr/local/squid/libexec/security_file_certgen&nbsp;-s<br>
/ramdisk1/ssl_db&nbsp;-M&nbsp;1GB<br>
sslcrtd_children&nbsp;32&nbsp;startup=10&nbsp;idle=5<br>
<br>
Pay&nbsp;attention&nbsp;-&nbsp;I've&nbsp;put&nbsp;SSL&nbsp;db&nbsp;on&nbsp;RAM&nbsp;disk.&nbsp;:)<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Maybe&nbsp;such&nbsp;load&nbsp;is&nbsp;just&nbsp;impossible&nbsp;because&nbsp;I&nbsp;reached&nbsp;a&nbsp;limit&nbsp;with&nbsp;a&nbsp;single&nbsp;core&nbsp;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Hardly.&nbsp;SSL&nbsp;helper&nbsp;children&nbsp;should&nbsp;spread&nbsp;across&nbsp;cores&nbsp;by&nbsp;OS&nbsp;scheduler.<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Perhaps&nbsp;I&nbsp;should&nbsp;retry&nbsp;SMP&nbsp;but&nbsp;unfortunately&nbsp;in&nbsp;the&nbsp;past&nbsp;I&nbsp;had&nbsp;many&nbsp;issues&nbsp;with,&nbsp;and&nbsp;some&nbsp;features&nbsp;I'm&nbsp;using&nbsp;still&nbsp;SMP-unaware&nbsp;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;Squid's&nbsp;SMP&nbsp;itself&nbsp;does&nbsp;not&nbsp;solves&nbsp;SSL&nbsp;Bump&nbsp;issues.&nbsp;It's&nbsp;about&nbsp;different<br>
things,&nbsp;and,&nbsp;IMHO,&nbsp;irrelevant&nbsp;your&nbsp;load&nbsp;profile.<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;_______________________________________________<br>
squid-users&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;wrap=&quot;&quot;&gt;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-signature&quot;&nbsp;cols=&quot;72&quot;&gt;--&nbsp;<br>
&quot;C++&nbsp;seems&nbsp;like&nbsp;a&nbsp;language&nbsp;suitable&nbsp;for&nbsp;firing&nbsp;other&nbsp;people's&nbsp;legs.&quot;<br>
<br>
*****************************<br>
*&nbsp;C++20&nbsp;:&nbsp;Bug&nbsp;to&nbsp;the&nbsp;future&nbsp;*<br>
*****************************&lt;/pre&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
