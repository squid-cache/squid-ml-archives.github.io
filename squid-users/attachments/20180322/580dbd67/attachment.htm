<tt>
&lt;html&nbsp;xmlns:v=&quot;urn:schemas-microsoft-com:vml&quot;&nbsp;xmlns:o=&quot;urn:schemas-microsoft-com:office:office&quot;&nbsp;xmlns:w=&quot;urn:schemas-microsoft-com:office:word&quot;&nbsp;xmlns:m=&quot;http://schemas.microsoft.com/office/2004/12/omml&quot;&nbsp;xmlns=&quot;http://www.w3.org/TR/REC-html40&quot;&gt;<br>
&lt;head&gt;<br>
&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;<br>
&lt;meta&nbsp;name=&quot;Generator&quot;&nbsp;content=&quot;Microsoft&nbsp;Word&nbsp;15&nbsp;(filtered&nbsp;medium)&quot;&gt;<br>
&lt;style&gt;&lt;!--<br>
/*&nbsp;Font&nbsp;Definitions&nbsp;*/<br>
@font-face<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{font-family:&quot;Cambria&nbsp;Math&quot;;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;panose-1:2&nbsp;4&nbsp;5&nbsp;3&nbsp;5&nbsp;4&nbsp;6&nbsp;3&nbsp;2&nbsp;4;}<br>
@font-face<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{font-family:Calibri;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;panose-1:2&nbsp;15&nbsp;5&nbsp;2&nbsp;2&nbsp;2&nbsp;4&nbsp;3&nbsp;2&nbsp;4;}<br>
@font-face<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{font-family:Consolas;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;panose-1:2&nbsp;11&nbsp;6&nbsp;9&nbsp;2&nbsp;2&nbsp;4&nbsp;3&nbsp;2&nbsp;4;}<br>
/*&nbsp;Style&nbsp;Definitions&nbsp;*/<br>
p.MsoNormal,&nbsp;li.MsoNormal,&nbsp;div.MsoNormal<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{margin:0in;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;margin-bottom:.0001pt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-size:11.0pt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-family:&quot;Calibri&quot;,sans-serif;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color:black;}<br>
a:link,&nbsp;span.MsoHyperlink<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{mso-style-priority:99;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color:#0563C1;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text-decoration:underline;}<br>
a:visited,&nbsp;span.MsoHyperlinkFollowed<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{mso-style-priority:99;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color:#954F72;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text-decoration:underline;}<br>
pre<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{mso-style-priority:99;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mso-style-link:&quot;HTML&nbsp;Preformatted&nbsp;Char&quot;;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;margin:0in;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;margin-bottom:.0001pt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-size:10.0pt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-family:&quot;Courier&nbsp;New&quot;;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color:black;}<br>
span.HTMLPreformattedChar<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{mso-style-name:&quot;HTML&nbsp;Preformatted&nbsp;Char&quot;;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mso-style-priority:99;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mso-style-link:&quot;HTML&nbsp;Preformatted&quot;;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-family:Consolas;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color:black;}<br>
p.msonormal0,&nbsp;li.msonormal0,&nbsp;div.msonormal0<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{mso-style-name:msonormal;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mso-margin-top-alt:auto;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;margin-right:0in;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mso-margin-bottom-alt:auto;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;margin-left:0in;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-size:11.0pt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-family:&quot;Calibri&quot;,sans-serif;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color:black;}<br>
span.EmailStyle20<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{mso-style-type:personal;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-family:&quot;Calibri&quot;,sans-serif;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color:windowtext;}<br>
span.gt-baf-word-clickable<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{mso-style-name:gt-baf-word-clickable;}<br>
span.EmailStyle22<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{mso-style-type:personal-reply;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-family:&quot;Calibri&quot;,sans-serif;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color:windowtext;}<br>
.MsoChpDefault<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{mso-style-type:export-only;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-size:10.0pt;}<br>
@page&nbsp;WordSection1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{size:8.5in&nbsp;11.0in;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;margin:1.0in&nbsp;1.0in&nbsp;1.0in&nbsp;1.0in;}<br>
div.WordSection1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{page:WordSection1;}<br>
--&gt;&lt;/style&gt;&lt;!--[if&nbsp;gte&nbsp;mso&nbsp;9]&gt;&lt;xml&gt;<br>
&lt;o:shapedefaults&nbsp;v:ext=&quot;edit&quot;&nbsp;spidmax=&quot;1026&quot;&nbsp;/&gt;<br>
&lt;/xml&gt;&lt;![endif]--&gt;&lt;!--[if&nbsp;gte&nbsp;mso&nbsp;9]&gt;&lt;xml&gt;<br>
&lt;o:shapelayout&nbsp;v:ext=&quot;edit&quot;&gt;<br>
&lt;o:idmap&nbsp;v:ext=&quot;edit&quot;&nbsp;data=&quot;1&quot;&nbsp;/&gt;<br>
&lt;/o:shapelayout&gt;&lt;/xml&gt;&lt;![endif]--&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;bgcolor=&quot;white&quot;&nbsp;lang=&quot;EN-US&quot;&nbsp;link=&quot;#0563C1&quot;&nbsp;vlink=&quot;#954F72&quot;&gt;<br>
&lt;div&nbsp;class=&quot;WordSection1&quot;&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;color:windowtext&quot;&gt;I&nbsp;don’t&nbsp;need&nbsp;it&nbsp;to&nbsp;cache&nbsp;anything&nbsp;–&nbsp;the&nbsp;goal&nbsp;of&nbsp;it&nbsp;is&nbsp;not&nbsp;performance&nbsp;optimization,&nbsp;it&nbsp;is&nbsp;to&nbsp;provide&nbsp;restricted&nbsp;access&nbsp;to&nbsp;the&nbsp;internet.&nbsp;I&nbsp;have&nbsp;1200&nbsp;Mbps&nbsp;of&nbsp;network&nbsp;i/o&nbsp;available&nbsp;to&nbsp;the&nbsp;squid&nbsp;servers&nbsp;and&nbsp;can<br>
&nbsp;confirm&nbsp;I&nbsp;am&nbsp;able&nbsp;to&nbsp;reliably&nbsp;achieve&nbsp;at&nbsp;least&nbsp;800&nbsp;Mbps&nbsp;when&nbsp;I&nbsp;download&nbsp;something&nbsp;directly&nbsp;on&nbsp;the&nbsp;squid&nbsp;server.&nbsp;Additionally,&nbsp;it&nbsp;would&nbsp;be&nbsp;extremely&nbsp;rare&nbsp;that&nbsp;the&nbsp;same&nbsp;file&nbsp;ever&nbsp;would&nbsp;get&nbsp;downloaded&nbsp;more&nbsp;than&nbsp;once,&nbsp;if&nbsp;it&nbsp;ever&nbsp;actually&nbsp;happens.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;color:windowtext&quot;&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;color:windowtext&quot;&gt;By&nbsp;policy&nbsp;none&nbsp;of&nbsp;the&nbsp;servers&nbsp;may&nbsp;have&nbsp;direct&nbsp;internet&nbsp;access.&nbsp;This&nbsp;is&nbsp;to&nbsp;protect&nbsp;the&nbsp;data&nbsp;contained&nbsp;in&nbsp;the&nbsp;environment.&nbsp;Only&nbsp;one&nbsp;4&nbsp;bit&nbsp;subnet&nbsp;has&nbsp;internet&nbsp;access,&nbsp;where&nbsp;the&nbsp;squids&nbsp;are&nbsp;located,&nbsp;and&nbsp;8&nbsp;of&nbsp;the<br>
&nbsp;45&nbsp;servers&nbsp;need&nbsp;restricted&nbsp;internet&nbsp;access.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;color:windowtext&quot;&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;color:windowtext&quot;&gt;This&nbsp;config&nbsp;is&nbsp;complete&nbsp;at&nbsp;least&nbsp;in&nbsp;a&nbsp;base&nbsp;configuration.&nbsp;If&nbsp;I&nbsp;have&nbsp;time&nbsp;in&nbsp;the&nbsp;project&nbsp;I&nbsp;am&nbsp;going&nbsp;to&nbsp;add&nbsp;URI&nbsp;restrictions.&nbsp;The&nbsp;8&nbsp;servers&nbsp;will&nbsp;only&nbsp;need&nbsp;to&nbsp;get&nbsp;to&nbsp;about&nbsp;30-40&nbsp;static&nbsp;URIs&nbsp;in&nbsp;total&nbsp;and&nbsp;want<br>
&nbsp;to&nbsp;block&nbsp;the&nbsp;others,&nbsp;but&nbsp;first&nbsp;I&nbsp;need&nbsp;to&nbsp;get&nbsp;the&nbsp;throughput&nbsp;up.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;color:windowtext&quot;&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;color:windowtext&quot;&gt;I&nbsp;have&nbsp;800&nbsp;Mbps&nbsp;minimum&nbsp;available&nbsp;bandwidth&nbsp;to&nbsp;the&nbsp;squid&nbsp;servers&nbsp;that&nbsp;I&nbsp;can&nbsp;confirm&nbsp;is&nbsp;available&nbsp;in&nbsp;download&nbsp;tests&nbsp;from&nbsp;the&nbsp;squids.&nbsp;I&nbsp;have&nbsp;1200&nbsp;Mbps&nbsp;(these&nbsp;are&nbsp;Azure&nbsp;virtual&nbsp;machines)&nbsp;of&nbsp;bandwidth&nbsp;available<br>
&nbsp;in&nbsp;both&nbsp;directions&nbsp;between&nbsp;the&nbsp;servers&nbsp;that&nbsp;use&nbsp;the&nbsp;squids&nbsp;and&nbsp;the&nbsp;squids.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;color:windowtext&quot;&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;color:windowtext&quot;&gt;However&nbsp;on&nbsp;large&nbsp;files&nbsp;I&nbsp;am&nbsp;only&nbsp;getting&nbsp;115&nbsp;Kbps&nbsp;sustained&nbsp;download&nbsp;speeds.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;color:windowtext&quot;&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;color:windowtext&quot;&gt;Now&nbsp;if&nbsp;squid&nbsp;needs&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;buffer&nbsp;the&nbsp;downloads&nbsp;to&nbsp;cache&nbsp;in&nbsp;order&nbsp;to&nbsp;perform&nbsp;well&nbsp;–&nbsp;I&nbsp;could&nbsp;enable&nbsp;caching&nbsp;if&nbsp;that&nbsp;is&nbsp;the&nbsp;case,&nbsp;but&nbsp;would&nbsp;prefer&nbsp;to&nbsp;not&nbsp;cache&nbsp;anything.&nbsp;I&nbsp;very&nbsp;seriously&nbsp;doubt&nbsp;that&nbsp;I&nbsp;will<br>
&nbsp;ever&nbsp;download&nbsp;the&nbsp;same&nbsp;file&nbsp;two&nbsp;times&nbsp;in&nbsp;this&nbsp;environment&nbsp;as&nbsp;the&nbsp;only&nbsp;thing&nbsp;being&nbsp;downloaded&nbsp;is&nbsp;software&nbsp;updates&nbsp;that&nbsp;are&nbsp;centrally&nbsp;distributed&nbsp;from&nbsp;WSUS,&nbsp;and&nbsp;antivirus&nbsp;definitions&nbsp;that&nbsp;are&nbsp;released&nbsp;about&nbsp;6-10&nbsp;times&nbsp;per&nbsp;day.&nbsp;Most&nbsp;of&nbsp;the&nbsp;traffic&nbsp;is&nbsp;also&nbsp;https,<br>
&nbsp;with&nbsp;very&nbsp;little&nbsp;http.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;color:windowtext&quot;&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;color:windowtext&quot;&gt;Is&nbsp;it&nbsp;the&nbsp;case&nbsp;that&nbsp;I&nbsp;may&nbsp;see&nbsp;better&nbsp;performance&nbsp;if&nbsp;I&nbsp;configure&nbsp;it&nbsp;to&nbsp;cache&nbsp;the&nbsp;files&nbsp;first&nbsp;before&nbsp;sending&nbsp;it&nbsp;to&nbsp;clients?&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;div&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;b&gt;&lt;span&nbsp;style=&quot;font-size:12.0pt;color:windowtext&quot;&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;b&gt;&lt;span&nbsp;style=&quot;font-size:12.0pt;color:windowtext&quot;&gt;Keith&nbsp;Hartley&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;i&gt;&lt;span&nbsp;style=&quot;color:windowtext&quot;&gt;Network&nbsp;Engineer&nbsp;II&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/i&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;a&nbsp;href=&quot;mailto:khartley@geocent.com&quot;&gt;khartley@geocent.com&lt;/a&gt;&lt;span&nbsp;style=&quot;color:windowtext&quot;&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;a&nbsp;href=&quot;http://www.geocent.com&quot;&gt;www.geocent.com&lt;/a&gt;&lt;span&nbsp;style=&quot;color:windowtext&quot;&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;/div&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;color:windowtext&quot;&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;div&gt;<br>
&lt;div&nbsp;style=&quot;border:none;border-top:solid&nbsp;#E1E1E1&nbsp;1.0pt;padding:3.0pt&nbsp;0in&nbsp;0in&nbsp;0in&quot;&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;b&gt;&lt;span&nbsp;style=&quot;color:windowtext&quot;&gt;From:&lt;/span&gt;&lt;/b&gt;&lt;span&nbsp;style=&quot;color:windowtext&quot;&gt;&nbsp;squid-users&nbsp;[mailto:squid-users-bounces@lists.squid-cache.org]<br>
&lt;b&gt;On&nbsp;Behalf&nbsp;Of&nbsp;&lt;/b&gt;Yuri&lt;br&gt;<br>
&lt;b&gt;Sent:&lt;/b&gt;&nbsp;Thursday,&nbsp;March&nbsp;22,&nbsp;2018&nbsp;5:39&nbsp;PM&lt;br&gt;<br>
&lt;b&gt;To:&lt;/b&gt;&nbsp;squid-users@lists.squid-cache.org&lt;br&gt;<br>
&lt;b&gt;Subject:&lt;/b&gt;&nbsp;Re:&nbsp;[squid-users]&nbsp;Squid&nbsp;for&nbsp;windows&nbsp;Very&nbsp;slow&nbsp;downloads&nbsp;of&nbsp;large&nbsp;files&nbsp;through&nbsp;squid&nbsp;with&nbsp;normal&nbsp;uploads&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;div&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;22.03.2018&nbsp;23:10,&nbsp;Keith&nbsp;Hartley&nbsp;пишет:&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;/div&gt;<br>
&lt;blockquote&nbsp;style=&quot;margin-top:5.0pt;margin-bottom:5.0pt&quot;&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;I&nbsp;am&nbsp;using&nbsp;squid&nbsp;3.5&nbsp;for&nbsp;windows&nbsp;as&nbsp;a&nbsp;transparent&nbsp;proxy&nbsp;to&nbsp;provide&nbsp;internet&nbsp;access&nbsp;to&nbsp;7&nbsp;servers&nbsp;in&nbsp;a&nbsp;secure&nbsp;environment&nbsp;that&nbsp;otherwise&nbsp;does&nbsp;not&nbsp;have&nbsp;internet&nbsp;access.&nbsp;I&nbsp;have&nbsp;two&nbsp;squids&nbsp;running&nbsp;behind&nbsp;a&nbsp;load&nbsp;balancer,&nbsp;each&nbsp;one&nbsp;is&nbsp;running<br>
&nbsp;server&nbsp;2016&nbsp;core&nbsp;with&nbsp;2&nbsp;Xeon&nbsp;processors&nbsp;that&nbsp;is&nbsp;either&nbsp;haswell&nbsp;generation&nbsp;with&nbsp;1:1&nbsp;physical&nbsp;processor&nbsp;to&nbsp;virtual&nbsp;processor&nbsp;mapping&nbsp;or&nbsp;a&nbsp;hyper-threading&nbsp;Broadwell&nbsp;generation&nbsp;processor&nbsp;that&nbsp;is&nbsp;1:1&nbsp;logical&nbsp;processor&nbsp;to&nbsp;virtual&nbsp;processor&nbsp;mapping,&nbsp;depending&nbsp;on<br>
&nbsp;how&nbsp;they&nbsp;are&nbsp;provisioned&nbsp;when&nbsp;they&nbsp;get&nbsp;started.&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;Doing&nbsp;a&nbsp;bandwidth&nbsp;test&nbsp;directly&nbsp;in&nbsp;the&nbsp;VM&nbsp;I&nbsp;am&nbsp;able&nbsp;to&nbsp;get&nbsp;internet&nbsp;throughput&nbsp;of&nbsp;800-1200&nbsp;Mbps.&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;Doing&nbsp;a&nbsp;file&nbsp;copy&nbsp;to&nbsp;and&nbsp;from&nbsp;the&nbsp;VM&nbsp;I&nbsp;am&nbsp;able&nbsp;to&nbsp;get&nbsp;1200&nbsp;Mbps&nbsp;lan&nbsp;throughput.&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;In&nbsp;proxied&nbsp;uploads&nbsp;I&nbsp;have&nbsp;observed&nbsp;speeds&nbsp;as&nbsp;high&nbsp;as&nbsp;120&nbsp;Mbps,&nbsp;which&nbsp;is&nbsp;more&nbsp;than&nbsp;enough&nbsp;for&nbsp;what&nbsp;I&nbsp;need&nbsp;and&nbsp;the&nbsp;bottleneck&nbsp;is&nbsp;likely&nbsp;in&nbsp;the&nbsp;backup&nbsp;software&nbsp;rather&nbsp;than&nbsp;squid.&nbsp;Uploads&nbsp;performance&nbsp;I&nbsp;am&nbsp;not&nbsp;worried&nbsp;about&nbsp;where&nbsp;they&nbsp;are&nbsp;at<br>
&nbsp;now&nbsp;–&nbsp;even&nbsp;if&nbsp;I&nbsp;only&nbsp;got&nbsp;20-30&nbsp;Mbps&nbsp;it&nbsp;would&nbsp;be&nbsp;adequate&nbsp;for&nbsp;what&nbsp;I&nbsp;need&nbsp;it&nbsp;for.&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;Downloads&nbsp;however&nbsp;are&nbsp;very&nbsp;slow.&nbsp;Small&nbsp;files&nbsp;do&nbsp;not&nbsp;seem&nbsp;to&nbsp;be&nbsp;impacted.&nbsp;Using&nbsp;the&nbsp;test&nbsp;a&nbsp;thinkbroadband.com/download,&nbsp;files&nbsp;up&nbsp;to&nbsp;20&nbsp;Mb&nbsp;will&nbsp;download&nbsp;at&nbsp;a&nbsp;reasonable&nbsp;20-30&nbsp;Mbps,&nbsp;but&nbsp;when&nbsp;I&nbsp;get&nbsp;to&nbsp;50,&nbsp;it&nbsp;slows&nbsp;down&nbsp;to&nbsp;about&nbsp;17&nbsp;Mbps,&nbsp;and<br>
&nbsp;when&nbsp;I&nbsp;download&nbsp;AD&nbsp;Connect&nbsp;from&nbsp;Microsoft,&nbsp;which&nbsp;is&nbsp;about&nbsp;80&nbsp;Mb,&nbsp;I&nbsp;can&nbsp;see&nbsp;it&nbsp;start&nbsp;at&nbsp;about&nbsp;30&nbsp;Mbps,&nbsp;but&nbsp;eventually&nbsp;goes&nbsp;down&nbsp;to&nbsp;about&nbsp;115&nbsp;kbps&nbsp;and&nbsp;levels&nbsp;off.&nbsp;When&nbsp;I&nbsp;put&nbsp;an&nbsp;IP&nbsp;on&nbsp;the&nbsp;server&nbsp;I&nbsp;am&nbsp;using&nbsp;for&nbsp;testing&nbsp;that&nbsp;proxies&nbsp;through&nbsp;squid,&nbsp;I&nbsp;am&nbsp;able&nbsp;to<br>
&nbsp;download&nbsp;the&nbsp;file&nbsp;at&nbsp;several&nbsp;hundred&nbsp;mbps.&nbsp;&nbsp;When&nbsp;I&nbsp;download&nbsp;the&nbsp;same&nbsp;file&nbsp;on&nbsp;the&nbsp;squid&nbsp;server&nbsp;–&nbsp;I&nbsp;can’t&nbsp;tell&nbsp;exactly&nbsp;what&nbsp;throughput&nbsp;I&nbsp;was&nbsp;getting,&nbsp;but&nbsp;the&nbsp;80&nbsp;Mb&nbsp;file&nbsp;downloaded&nbsp;within&nbsp;5&nbsp;seconds.&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;In&nbsp;both&nbsp;squid&nbsp;servers,&nbsp;other&nbsp;than&nbsp;when&nbsp;the&nbsp;servers&nbsp;were&nbsp;booting,&nbsp;processor&nbsp;activity&nbsp;has&nbsp;not&nbsp;exceeded&nbsp;9%&nbsp;in&nbsp;the&nbsp;last&nbsp;7&nbsp;days&nbsp;but&nbsp;usually&nbsp;sits&nbsp;below&nbsp;2%.&nbsp;Memory&nbsp;usage&nbsp;has&nbsp;not&nbsp;exceeded&nbsp;2&nbsp;Gb,&nbsp;leaving&nbsp;2&nbsp;Gb&nbsp;free.&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;I&nbsp;am&nbsp;using&nbsp;OpenDNS&nbsp;for&nbsp;a&nbsp;DNS&nbsp;source,&nbsp;and&nbsp;have&nbsp;tried&nbsp;changing&nbsp;DNS&nbsp;to&nbsp;level3&nbsp;but&nbsp;it&nbsp;made&nbsp;no&nbsp;performance&nbsp;difference.&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;I&nbsp;think&nbsp;that&nbsp;this&nbsp;may&nbsp;be&nbsp;squid&nbsp;trying&nbsp;to&nbsp;cache&nbsp;something,&nbsp;but&nbsp;had&nbsp;tried&nbsp;to&nbsp;turn&nbsp;all&nbsp;caching&nbsp;off.&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;My&nbsp;cache.log&nbsp;doesn’t&nbsp;really&nbsp;have&nbsp;anything&nbsp;interesting&nbsp;in&nbsp;it&nbsp;that&nbsp;I&nbsp;can&nbsp;see.&nbsp;It’s&nbsp;the&nbsp;same&nbsp;~30&nbsp;or&nbsp;so&nbsp;log&nbsp;entries&nbsp;each&nbsp;time&nbsp;the&nbsp;service&nbsp;starts,&nbsp;and&nbsp;that&nbsp;is&nbsp;about&nbsp;it.&nbsp;Here&nbsp;it&nbsp;is:<br>
&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:27&nbsp;kid1|&nbsp;Set&nbsp;Current&nbsp;Directory&nbsp;to&nbsp;/var/cache/squid&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:27&nbsp;kid1|&nbsp;Starting&nbsp;Squid&nbsp;Cache&nbsp;version&nbsp;3.5.27&nbsp;for&nbsp;x86_64-unknown-cygwin...&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:27&nbsp;kid1|&nbsp;Service&nbsp;Name:&nbsp;squid&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:27&nbsp;kid1|&nbsp;Process&nbsp;ID&nbsp;1164&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:27&nbsp;kid1|&nbsp;Process&nbsp;Roles:&nbsp;worker&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:27&nbsp;kid1|&nbsp;With&nbsp;3200&nbsp;file&nbsp;descriptors&nbsp;available&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:27&nbsp;kid1|&nbsp;Initializing&nbsp;IP&nbsp;Cache...&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:27&nbsp;kid1|&nbsp;parseEtcHosts:&nbsp;/etc/hosts:&nbsp;(2)&nbsp;No&nbsp;such&nbsp;file&nbsp;or&nbsp;directory&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:27&nbsp;kid1|&nbsp;DNS&nbsp;Socket&nbsp;created&nbsp;at&nbsp;[::],&nbsp;FD&nbsp;5&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:27&nbsp;kid1|&nbsp;DNS&nbsp;Socket&nbsp;created&nbsp;at&nbsp;0.0.0.0,&nbsp;FD&nbsp;6&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:27&nbsp;kid1|&nbsp;Adding&nbsp;nameserver&nbsp;208.67.222.222&nbsp;from&nbsp;squid.conf&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:27&nbsp;kid1|&nbsp;Adding&nbsp;nameserver&nbsp;208.67.220.220&nbsp;from&nbsp;squid.conf&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:27&nbsp;kid1|&nbsp;Logfile:&nbsp;opening&nbsp;log&nbsp;daemon:/var/log/squid/access.log&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:27&nbsp;kid1|&nbsp;Logfile&nbsp;Daemon:&nbsp;opening&nbsp;log&nbsp;/var/log/squid/access.log&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:27&nbsp;kid1|&nbsp;WARNING:&nbsp;no_suid:&nbsp;setuid(0):&nbsp;(22)&nbsp;Invalid&nbsp;argument&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:27&nbsp;kid1|&nbsp;Store&nbsp;logging&nbsp;disabled&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:27&nbsp;kid1|&nbsp;Swap&nbsp;maxSize&nbsp;0&nbsp;&#43;&nbsp;262144&nbsp;KB,&nbsp;estimated&nbsp;20164&nbsp;objects&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:27&nbsp;kid1|&nbsp;Target&nbsp;number&nbsp;of&nbsp;buckets:&nbsp;1008&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:27&nbsp;kid1|&nbsp;Using&nbsp;8192&nbsp;Store&nbsp;buckets&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:27&nbsp;kid1|&nbsp;Max&nbsp;Mem&nbsp;&nbsp;size:&nbsp;262144&nbsp;KB&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:27&nbsp;kid1|&nbsp;Max&nbsp;Swap&nbsp;size:&nbsp;0&nbsp;KB&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:27&nbsp;kid1|&nbsp;Using&nbsp;Least&nbsp;Load&nbsp;store&nbsp;dir&nbsp;selection&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:27&nbsp;kid1|&nbsp;Set&nbsp;Current&nbsp;Directory&nbsp;to&nbsp;/var/cache/squid&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:27&nbsp;kid1|&nbsp;Finished&nbsp;loading&nbsp;MIME&nbsp;types&nbsp;and&nbsp;icons.&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:27&nbsp;kid1|&nbsp;HTCP&nbsp;Disabled.&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:27&nbsp;kid1|&nbsp;Squid&nbsp;plugin&nbsp;modules&nbsp;loaded:&nbsp;0&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:27&nbsp;kid1|&nbsp;Adaptation&nbsp;support&nbsp;is&nbsp;off.&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:27&nbsp;kid1|&nbsp;Accepting&nbsp;HTTP&nbsp;Socket&nbsp;connections&nbsp;at&nbsp;local=[::]:3128&nbsp;remote=[::]&nbsp;FD&nbsp;10&nbsp;flags=9&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;2018/03/22&nbsp;09:47:28&nbsp;kid1|&nbsp;storeLateRelease:&nbsp;released&nbsp;0&nbsp;objects&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;And&nbsp;this&nbsp;is&nbsp;my&nbsp;squid.conf:&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#&nbsp;Recommended&nbsp;minimum&nbsp;configuration:&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#&nbsp;Example&nbsp;rule&nbsp;allowing&nbsp;access&nbsp;from&nbsp;your&nbsp;local&nbsp;networks.&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#&nbsp;Adapt&nbsp;to&nbsp;list&nbsp;your&nbsp;(internal)&nbsp;IP&nbsp;networks&nbsp;from&nbsp;where&nbsp;browsing&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#&nbsp;should&nbsp;be&nbsp;allowed&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#acl&nbsp;localnet&nbsp;src&nbsp;10.0.0.0/8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;RFC1918&nbsp;possible&nbsp;internal&nbsp;network&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#acl&nbsp;localnet&nbsp;src&nbsp;172.16.0.0/12&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;RFC1918&nbsp;possible&nbsp;internal&nbsp;network&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#acl&nbsp;localnet&nbsp;src&nbsp;192.168.0.0/16&nbsp;&nbsp;#&nbsp;RFC1918&nbsp;possible&nbsp;internal&nbsp;network&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;acl&nbsp;localnet&nbsp;src&nbsp;fc00::/7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;RFC&nbsp;4193&nbsp;local&nbsp;private&nbsp;network&nbsp;range&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;acl&nbsp;localnet&nbsp;src&nbsp;fe80::/10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;RFC&nbsp;4291&nbsp;link-local&nbsp;(directly&nbsp;plugged)&nbsp;machines&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;acl&nbsp;WSUS&nbsp;src&nbsp;192.168.225.4/32&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;acl&nbsp;BACKUP&nbsp;src&nbsp;192.168.225.11/32&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;acl&nbsp;ADFS&nbsp;src&nbsp;192.168.224.7/32&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;acl&nbsp;ADFS&nbsp;src&nbsp;192.168.228.8/32&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;acl&nbsp;DEVWEB&nbsp;src&nbsp;192.168.226.6/32&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;acl&nbsp;UATWEB&nbsp;src&nbsp;192.168.226.13/32&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;acl&nbsp;PRDWEB&nbsp;src&nbsp;192.168.226.8/32&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;acl&nbsp;PRDWEB&nbsp;src&nbsp;192.168.226.9/32&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;acl&nbsp;SSL_ports&nbsp;port&nbsp;443&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;http&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#acl&nbsp;Safe_ports&nbsp;port&nbsp;21&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;ftp&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;443&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;https&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#acl&nbsp;Safe_ports&nbsp;port&nbsp;70&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;gopher&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#acl&nbsp;Safe_ports&nbsp;port&nbsp;210&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;wais&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#acl&nbsp;Safe_ports&nbsp;port&nbsp;1025-65535&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;unregistered&nbsp;ports&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#acl&nbsp;Safe_ports&nbsp;port&nbsp;280&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;http-mgmt&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#acl&nbsp;Safe_ports&nbsp;port&nbsp;488&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;gss-http&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#acl&nbsp;Safe_ports&nbsp;port&nbsp;591&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;filemaker&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#acl&nbsp;Safe_ports&nbsp;port&nbsp;777&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;multiling&nbsp;http&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;acl&nbsp;CONNECT&nbsp;method&nbsp;CONNECT&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#&nbsp;Recommended&nbsp;minimum&nbsp;Access&nbsp;Permission&nbsp;configuration:&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#&nbsp;Only&nbsp;allow&nbsp;cachemgr&nbsp;access&nbsp;from&nbsp;localhost&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#http_access&nbsp;allow&nbsp;localhost&nbsp;manager&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#http_access&nbsp;deny&nbsp;manager&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#&nbsp;Deny&nbsp;requests&nbsp;to&nbsp;certain&nbsp;unsafe&nbsp;ports&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;http_access&nbsp;deny&nbsp;!Safe_ports&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#&nbsp;Deny&nbsp;CONNECT&nbsp;to&nbsp;other&nbsp;than&nbsp;secure&nbsp;SSL&nbsp;ports&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;http_access&nbsp;deny&nbsp;CONNECT&nbsp;!SSL_ports&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#&nbsp;We&nbsp;strongly&nbsp;recommend&nbsp;the&nbsp;following&nbsp;be&nbsp;uncommented&nbsp;to&nbsp;protect&nbsp;innocent&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#&nbsp;web&nbsp;applications&nbsp;running&nbsp;on&nbsp;the&nbsp;proxy&nbsp;server&nbsp;who&nbsp;think&nbsp;the&nbsp;only&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#&nbsp;one&nbsp;who&nbsp;can&nbsp;access&nbsp;services&nbsp;on&nbsp;&quot;localhost&quot;&nbsp;is&nbsp;a&nbsp;local&nbsp;user&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#http_access&nbsp;deny&nbsp;to_localhost&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#&nbsp;INSERT&nbsp;YOUR&nbsp;OWN&nbsp;RULE(S)&nbsp;HERE&nbsp;TO&nbsp;ALLOW&nbsp;ACCESS&nbsp;FROM&nbsp;YOUR&nbsp;CLIENTS&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#&nbsp;Example&nbsp;rule&nbsp;allowing&nbsp;access&nbsp;from&nbsp;your&nbsp;local&nbsp;networks.&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#&nbsp;Adapt&nbsp;localnet&nbsp;in&nbsp;the&nbsp;ACL&nbsp;section&nbsp;to&nbsp;list&nbsp;your&nbsp;(internal)&nbsp;IP&nbsp;networks&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#&nbsp;from&nbsp;where&nbsp;browsing&nbsp;should&nbsp;be&nbsp;allowed&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;http_access&nbsp;allow&nbsp;localnet&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;http_access&nbsp;allow&nbsp;localhost&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;http_access&nbsp;allow&nbsp;WSUS&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;http_access&nbsp;allow&nbsp;ADFS&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;http_access&nbsp;allow&nbsp;BACKUP&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;http_access&nbsp;allow&nbsp;DEVWEB&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;http_access&nbsp;allow&nbsp;UATWEB&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;http_access&nbsp;allow&nbsp;PRDWEB&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#&nbsp;And&nbsp;finally&nbsp;deny&nbsp;all&nbsp;other&nbsp;access&nbsp;to&nbsp;this&nbsp;proxy&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;http_access&nbsp;deny&nbsp;all&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#&nbsp;Squid&nbsp;normally&nbsp;listens&nbsp;to&nbsp;port&nbsp;3128&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;http_port&nbsp;3128&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#&nbsp;Uncomment&nbsp;the&nbsp;line&nbsp;below&nbsp;to&nbsp;enable&nbsp;disk&nbsp;caching&nbsp;-&nbsp;path&nbsp;format&nbsp;is&nbsp;/cygdrive/&lt;full&nbsp;path&nbsp;to&nbsp;cache&nbsp;folder&gt;,&nbsp;i.e.&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#cache_dir&nbsp;aufs&nbsp;/cygdrive/d/squid/cache&nbsp;3000&nbsp;16&nbsp;256&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;cache&nbsp;deny&nbsp;all&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#&nbsp;Leave&nbsp;coredumps&nbsp;in&nbsp;the&nbsp;first&nbsp;cache&nbsp;dir&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;coredump_dir&nbsp;/var/cache/squid&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;#&nbsp;Add&nbsp;any&nbsp;of&nbsp;your&nbsp;own&nbsp;refresh_pattern&nbsp;entries&nbsp;above&nbsp;these.&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;refresh_pattern&nbsp;^ftp:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1440&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;20%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10080&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;refresh_pattern&nbsp;^gopher:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1440&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1440&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;refresh_pattern&nbsp;-i&nbsp;(/cgi-bin/|\?)&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;refresh_pattern&nbsp;.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;20%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4320&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;dns_nameservers&nbsp;208.67.222.222&nbsp;208.67.220.220&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;max_filedescriptors&nbsp;3200&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;Does&nbsp;anyone&nbsp;see&nbsp;anything&nbsp;I&nbsp;am&nbsp;missing&nbsp;here?&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;/blockquote&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;Yes.&nbsp;In&nbsp;your&nbsp;almost&nbsp;default&nbsp;configuration&nbsp;(it&nbsp;is&nbsp;complete&nbsp;squid.conf?)&nbsp;obvious&nbsp;thing&nbsp;is:&lt;br&gt;<br>
&lt;br&gt;<br>
a)&nbsp;You&nbsp;do&nbsp;not&nbsp;use&nbsp;on-disk&nbsp;cache.&lt;br&gt;<br>
b)&nbsp;You&nbsp;use&nbsp;memory&nbsp;cache&nbsp;by&nbsp;default&nbsp;-&nbsp;i.e.&nbsp;256&nbsp;Mb.&nbsp;&lt;br&gt;<br>
c)&nbsp;You&nbsp;cache&nbsp;nothing&nbsp;due&nbsp;to&nbsp;deny&nbsp;all&nbsp;cache.&nbsp;So,&nbsp;it&nbsp;makes&nbsp;useless&nbsp;cache_mem&nbsp;default.&lt;br&gt;<br>
d)&nbsp;Your&nbsp;configuration&nbsp;technically&nbsp;useless.&nbsp;I&nbsp;see&nbsp;neither&nbsp;proxying&nbsp;parameters,&nbsp;nor&nbsp;caching.&nbsp;Your&nbsp;squid&nbsp;now&nbsp;only&nbsp;additional&nbsp;hop&nbsp;for&nbsp;files.&nbsp;No&nbsp;more.&lt;br&gt;<br>
&lt;br&gt;<br>
So,&nbsp;squid&nbsp;nothing&nbsp;to&nbsp;do&nbsp;here.&nbsp;It&nbsp;simple&nbsp;should&nbsp;retransmit&nbsp;GET&nbsp;(GET?)&nbsp;request&nbsp;to&nbsp;server,&nbsp;and,&nbsp;without&nbsp;any&nbsp;caching/storing,&nbsp;retransmit&nbsp;it&nbsp;to&nbsp;user.&lt;br&gt;<br>
&lt;br&gt;<br>
Still&nbsp;correct?&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;put&nbsp;us&nbsp;directly&nbsp;to&nbsp;raw&nbsp;network&nbsp;IO.&nbsp;Without&nbsp;any&nbsp;buffering&nbsp;(which&nbsp;can&nbsp;be&nbsp;-&nbsp;but&nbsp;don't&nbsp;-&nbsp;your&nbsp;squid).&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;your&nbsp;place,&nbsp;I&nbsp;can&nbsp;start&nbsp;playing&nbsp;around&nbsp;with&nbsp;cache_mem&nbsp;parameter;&nbsp;of&nbsp;course,&nbsp;only&nbsp;after&nbsp;removing&nbsp;cache&nbsp;deny&nbsp;all.&lt;br&gt;<br>
&lt;br&gt;<br>
And&nbsp;after&nbsp;some&nbsp;experiments,&nbsp;may&nbsp;be,&nbsp;will&nbsp;make&nbsp;&lt;span&nbsp;class=&quot;gt-baf-word-clickable&quot;&gt;<br>
decision&lt;/span&gt;&nbsp;about&nbsp;drop&nbsp;out&nbsp;useless&nbsp;Squid's&nbsp;box.&lt;br&gt;<br>
&lt;br&gt;<br>
Seriously,&nbsp;what&nbsp;role&nbsp;of&nbsp;squid's&nbsp;here?&nbsp;Just&nbsp;setup&nbsp;border&nbsp;firewall&nbsp;to&nbsp;your&nbsp;servers&nbsp;to&nbsp;access&nbsp;it&nbsp;to&nbsp;Internet.&nbsp;It&nbsp;will&nbsp;be&nbsp;enough.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;blockquote&nbsp;style=&quot;margin-top:5.0pt;margin-bottom:5.0pt&quot;&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;My&nbsp;access.log&nbsp;doesn’t&nbsp;really&nbsp;have&nbsp;anything&nbsp;interesting&nbsp;in&nbsp;it&nbsp;either,&nbsp;it&nbsp;just&nbsp;looks&nbsp;like&nbsp;it&nbsp;is&nbsp;working&nbsp;normally.&nbsp;I&nbsp;can&nbsp;attach&nbsp;that&nbsp;too&nbsp;if&nbsp;anyone&nbsp;wants&nbsp;to&nbsp;look&nbsp;at&nbsp;it&nbsp;after&nbsp;I&nbsp;redact&nbsp;some&nbsp;of&nbsp;the&nbsp;hosts.&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;b&gt;&lt;span&nbsp;style=&quot;font-size:12.0pt;color:#0072BE&quot;&gt;Keith&nbsp;Hartley&lt;/span&gt;&lt;/b&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;i&gt;Network&nbsp;Engineer&nbsp;II&lt;/i&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;i&gt;MCSE:&nbsp;Productivity,&nbsp;MCSA:&nbsp;Server&nbsp;2008,&nbsp;2012,&nbsp;Office&nbsp;365&nbsp;&lt;/i&gt;<br>
|&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;i&gt;Certified&nbsp;Meraki&nbsp;Network&nbsp;Associate,&nbsp;Security&#43;&lt;/i&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;b&gt;&lt;span&nbsp;style=&quot;font-size:12.0pt&quot;&gt;Geocent,&nbsp;LLC&lt;/span&gt;&lt;/b&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;b&gt;&lt;span&nbsp;style=&quot;color:#8BC541&quot;&gt;o:&lt;/span&gt;&lt;/b&gt;&lt;span&nbsp;style=&quot;color:#8BC541&quot;&gt;<br>
&lt;/span&gt;504-405-3578&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;b&gt;&lt;span&nbsp;style=&quot;color:#8BC541&quot;&gt;a:&lt;/span&gt;&lt;/b&gt;&lt;span&nbsp;style=&quot;color:#8BC541&quot;&gt;<br>
&lt;/span&gt;2219&nbsp;Lakeshore&nbsp;drive&nbsp;Ste&nbsp;300,&nbsp;New&nbsp;Orleans,&nbsp;LA&nbsp;70122&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;b&gt;&lt;span&nbsp;style=&quot;color:#8BC541&quot;&gt;w:&lt;/span&gt;&lt;/b&gt;&lt;span&nbsp;style=&quot;color:#8BC541&quot;&gt;<br>
&lt;/span&gt;&lt;a&nbsp;href=&quot;http://www.geocent.com/&quot;&gt;www.geocent.com&lt;/a&gt;|&lt;b&gt;&lt;span&nbsp;style=&quot;color:#8BC541&quot;&gt;&nbsp;e:&lt;/span&gt;&lt;/b&gt;&lt;span&nbsp;style=&quot;color:#8BC541&quot;&gt;<br>
&lt;/span&gt;&lt;a&nbsp;href=&quot;mailto:khartley@geocent.com&quot;&gt;khartley@geocent.com&lt;/a&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&nbsp;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;div&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;b&gt;&lt;i&gt;&lt;u&gt;&lt;span&nbsp;style=&quot;font-size:8.0pt&quot;&gt;Confidentiality&nbsp;Notice:&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/u&gt;&lt;/i&gt;&lt;/b&gt;&lt;/p&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;style=&quot;font-size:6.0pt&quot;&gt;This&nbsp;email&nbsp;communication&nbsp;may&nbsp;contain&nbsp;confidential&nbsp;information,&nbsp;may&nbsp;be&nbsp;legally&nbsp;privileged,&nbsp;and&nbsp;is&nbsp;intended&nbsp;only&nbsp;for&nbsp;the&nbsp;use&nbsp;of&nbsp;the&nbsp;intended&nbsp;recipients(s)&nbsp;identified.&nbsp;Any&nbsp;unauthorized&nbsp;review,&nbsp;use,&nbsp;distribution,<br>
&nbsp;downloading,&nbsp;or&nbsp;copying&nbsp;of&nbsp;this&nbsp;communication&nbsp;is&nbsp;strictly&nbsp;prohibited.&nbsp;If&nbsp;you&nbsp;are&nbsp;not&nbsp;the&nbsp;intended&nbsp;recipient&nbsp;and&nbsp;have&nbsp;received&nbsp;this&nbsp;message&nbsp;in&nbsp;error,&nbsp;immediately&nbsp;notify&nbsp;the&nbsp;sender&nbsp;by&nbsp;reply&nbsp;email,&nbsp;delete&nbsp;the&nbsp;communication,&nbsp;and&nbsp;destroy&nbsp;all&nbsp;copies.&nbsp;Thank&nbsp;you.&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;<br>
&lt;/div&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;pre&gt;_______________________________________________&lt;o:p&gt;&lt;/o:p&gt;&lt;/pre&gt;<br>
&lt;pre&gt;squid-users&nbsp;mailing&nbsp;list&lt;o:p&gt;&lt;/o:p&gt;&lt;/pre&gt;<br>
&lt;pre&gt;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/pre&gt;<br>
&lt;pre&gt;&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/pre&gt;<br>
&lt;/blockquote&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;o:p&gt;&lt;/o:p&gt;&lt;/p&gt;<br>
&lt;pre&gt;--&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/pre&gt;<br>
&lt;pre&gt;&quot;C&#43;&#43;&nbsp;seems&nbsp;like&nbsp;a&nbsp;language&nbsp;suitable&nbsp;for&nbsp;firing&nbsp;other&nbsp;people's&nbsp;legs.&quot;&lt;o:p&gt;&lt;/o:p&gt;&lt;/pre&gt;<br>
&lt;pre&gt;&lt;o:p&gt;&nbsp;&lt;/o:p&gt;&lt;/pre&gt;<br>
&lt;pre&gt;*****************************&lt;o:p&gt;&lt;/o:p&gt;&lt;/pre&gt;<br>
&lt;pre&gt;*&nbsp;C&#43;&#43;20&nbsp;:&nbsp;Bug&nbsp;to&nbsp;the&nbsp;future&nbsp;*&lt;o:p&gt;&lt;/o:p&gt;&lt;/pre&gt;<br>
&lt;pre&gt;*****************************&lt;o:p&gt;&lt;/o:p&gt;&lt;/pre&gt;<br>
&lt;/div&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
