<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;<br>
&lt;div&gt;&lt;span&nbsp;class=&quot;gmail-im&quot;&gt;&lt;div&gt;&gt;Which&nbsp;is&nbsp;not&nbsp;supported&nbsp;by&nbsp;MSIE,&nbsp;so&nbsp;you&nbsp;are&nbsp;stuck&nbsp;with&nbsp;nothing&nbsp;at&nbsp;all&nbsp;for&lt;br&gt;<br>
&gt;that&nbsp;traffic.&nbsp;:-(<br>
<br>
&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/span&gt;The&nbsp;way&nbsp;things&nbsp;turn&nbsp;out&nbsp;,&nbsp;it&nbsp;seems&nbsp;like&nbsp;I&nbsp;am&nbsp;going&nbsp;to&nbsp;dedicate&nbsp;1&nbsp;or&nbsp;2&nbsp;proxy&nbsp;servers&nbsp;(without&nbsp;authentication)&lt;br&gt; and&nbsp;no&nbsp;tls&nbsp;client&nbsp;to&nbsp;proxy&nbsp;just&nbsp;for&nbsp;the&nbsp;domains&nbsp;that&nbsp;MS,Symantec&nbsp;and&nbsp;other&nbsp;vendors&nbsp;needs&nbsp;for&nbsp;the&nbsp;updates&nbsp;,&lt;br&gt;&lt;/div&gt;&lt;div&gt;and&nbsp;populate&nbsp;that&nbsp;proxies&nbsp;depending&nbsp;on&nbsp;domain&nbsp;in&nbsp;the&nbsp;pac&nbsp;file.&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail-im&quot;&gt;&lt;br&gt;&lt;br&gt;&gt;&nbsp;If&nbsp;the&nbsp;LB&nbsp;are&nbsp;really&nbsp;digging&nbsp;into&nbsp;the&nbsp;traffic&nbsp;sufficiently&nbsp;to&nbsp;see&nbsp;URLs&lt;br&gt;<br>
&gt;(from&nbsp;inside&nbsp;the&nbsp;encryption?)&nbsp;then&nbsp;they&nbsp;are&nbsp;HTTP(S)&nbsp;proxies&nbsp;in&nbsp;their&nbsp;own&lt;br&gt;<br>
&gt;right&nbsp;and&nbsp;need&nbsp;to&nbsp;be&nbsp;accounted&nbsp;for&nbsp;in&nbsp;your&nbsp;TLS-to-proxy&nbsp;plans.<br>
<br>
&lt;br&gt;&lt;br&gt;<br>
&lt;/span&gt;&lt;div&gt;My&nbsp;concern&nbsp;is&nbsp;the&nbsp;traffic&nbsp;client&lt;-&gt;LB&nbsp;which&nbsp;needs&nbsp;to&nbsp;be&nbsp;encypted.&nbsp;&lt;br&gt;&lt;/div&gt;Traffic&nbsp;LB&lt;-&gt;squid&nbsp;is&nbsp;safe.&nbsp;<br>
<br>
&lt;br&gt;&lt;/div&gt;The&nbsp;LB&nbsp;going&nbsp;to&nbsp;be&nbsp;used&nbsp;is&nbsp;HAProxy&nbsp;at&nbsp;layer&nbsp;7&nbsp;with&nbsp;url&nbsp;load&nbsp;balancing&nbsp;for&nbsp;http&nbsp;requests&nbsp;&lt;br&gt;and&nbsp;least&nbsp;connections&nbsp;for&nbsp;https&nbsp;requests&nbsp;.&nbsp;&lt;br&gt;The&nbsp;LB&nbsp;is&nbsp;going&nbsp;to&nbsp;do&nbsp;tls&nbsp;termination&nbsp;(for&nbsp;the&nbsp;client&nbsp;to&nbsp;tls&nbsp;proxy&nbsp;encryption&nbsp;part)&nbsp;for&nbsp;the&nbsp;squids&nbsp;as&nbsp;well&nbsp;.&lt;br&gt; Problem&nbsp;with&nbsp;kerberos&nbsp;is&nbsp;the&nbsp;ticketing&nbsp;mechanism&lt;br&gt; as&nbsp;far&nbsp;as &nbsp;i&nbsp;know&nbsp;it&nbsp;cannot&nbsp;be&nbsp;shared&nbsp;between&nbsp;the&nbsp;squid&nbsp;proxies&nbsp;,&nbsp;&lt;br&gt;so&nbsp;if&nbsp;at&nbsp;first&nbsp;a&nbsp;user&nbsp;authenticates&nbsp;at&nbsp;lets&nbsp;say&nbsp;at&nbsp;cachebox01&nbsp;then&nbsp;every&nbsp;time&nbsp;&lt;br&gt;he&nbsp;changes&nbsp;a&nbsp;cachebox&nbsp;during&nbsp;load&nbsp;balacning&nbsp;it&nbsp;is&nbsp;going&nbsp;to&nbsp;need&nbsp;to&nbsp;authenticate&nbsp;again&nbsp;.&lt;br&gt;Unfortunately&nbsp;src&nbsp;ip&nbsp;tagging&nbsp;cannot&nbsp;be&nbsp;performed&nbsp;as&nbsp;all&nbsp;clients&nbsp;are&nbsp;behind&nbsp;NAT.&nbsp;<br>
<br>
&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Sun,&nbsp;Apr&nbsp;22,&nbsp;2018&nbsp;at&nbsp;3:32&nbsp;PM,&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&nbsp;target=&quot;_blank&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&gt;On&nbsp;22/04/18&nbsp;22:52,&nbsp;Panagiotis&nbsp;Bariamis&nbsp;wrote:&lt;br&gt;<br>
&gt;&gt;LDAP&nbsp;is&nbsp;a&nbsp;database&nbsp;type,&nbsp;it&nbsp;is&nbsp;not&nbsp;specifically&nbsp;tied&nbsp;to&nbsp;the&nbsp;type&nbsp;of&lt;br&gt;<br>
&gt;&gt;credentials&nbsp;used&nbsp;either.&nbsp;For&nbsp;example;&nbsp;have&nbsp;you&nbsp;looked&nbsp;into&nbsp;using&lt;br&gt;<br>
&gt;&gt;Kerberos&nbsp;authentication?&nbsp;this&nbsp;over&nbsp;clear-text&nbsp;is&nbsp;similar&nbsp;or&nbsp;sometimes&lt;br&gt;<br>
&gt;&gt;more&nbsp;secure&nbsp;than&nbsp;TLS.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;Unfortunately&nbsp;administrators&nbsp;of&nbsp;LDAP&nbsp;can&nbsp;only&nbsp;provide&nbsp;basic&lt;br&gt;<br>
&gt;&nbsp;authentication&nbsp;scheme,&nbsp;so&nbsp;I&nbsp;am&nbsp;stuck&nbsp;with&nbsp;TLS&nbsp;proxy&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;Which&nbsp;is&nbsp;not&nbsp;supported&nbsp;by&nbsp;MSIE,&nbsp;so&nbsp;you&nbsp;are&nbsp;stuck&nbsp;with&nbsp;nothing&nbsp;at&nbsp;all&nbsp;for&lt;br&gt;<br>
that&nbsp;traffic.&nbsp;:-(&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
 ,&nbsp;plus&nbsp;there&nbsp;are&nbsp;16&lt;br&gt;<br>
&gt;&nbsp;squid&nbsp;boxes&nbsp;that&nbsp;a&nbsp;layer&nbsp;7&nbsp;load&nbsp;balancer&nbsp;routes&nbsp;the&nbsp;traffic&nbsp;depending&nbsp;on&lt;br&gt;<br>
&gt;&nbsp;the&nbsp;hash&nbsp;of&nbsp;the&nbsp;url&nbsp;,&nbsp;so&nbsp;I&nbsp;think&nbsp;even&nbsp;if&nbsp;the&nbsp;administrators&nbsp;of&nbsp;openldap&lt;br&gt;<br>
&gt;&nbsp;could&nbsp;provide&nbsp;me&nbsp;with&nbsp;kerberos&nbsp;or&nbsp;ntlm&nbsp;authentication&nbsp;I&nbsp;could&nbsp;not&nbsp;load&lt;br&gt;<br>
&gt;&nbsp;balance&nbsp;the&nbsp;traffic&nbsp;based&nbsp;on&nbsp;url&nbsp;.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;If&nbsp;the&nbsp;LB&nbsp;are&nbsp;operating&nbsp;only&nbsp;at&nbsp;the&nbsp;TCP/IP&nbsp;level&nbsp;(most&nbsp;routing&nbsp;LB&nbsp;do)&lt;br&gt;<br>
they&nbsp;will&nbsp;not&nbsp;have&nbsp;any&nbsp;effect&nbsp;on&nbsp;the&nbsp;TLS,&nbsp;HTTP,&nbsp;or&nbsp;HTTP&nbsp;auth&nbsp;layers.&lt;br&gt;<br>
Negotiate&nbsp;and&nbsp;HTTPS&nbsp;will&nbsp;work&nbsp;fine&nbsp;(NTLM&nbsp;is&nbsp;just&nbsp;broken,&nbsp;do&nbsp;not&nbsp;go&nbsp;there&lt;br&gt;<br>
unless&nbsp;forced&nbsp;to).&lt;br&gt;<br>
&lt;br&gt;<br>
OR,&lt;br&gt;<br>
 If&nbsp;the&nbsp;LB&nbsp;are&nbsp;really&nbsp;digging&nbsp;into&nbsp;the&nbsp;traffic&nbsp;sufficiently&nbsp;to&nbsp;see&nbsp;URLs&lt;br&gt;<br>
(from&nbsp;inside&nbsp;the&nbsp;encryption?)&nbsp;then&nbsp;they&nbsp;are&nbsp;HTTP(S)&nbsp;proxies&nbsp;in&nbsp;their&nbsp;own&lt;br&gt;<br>
right&nbsp;and&nbsp;need&nbsp;to&nbsp;be&nbsp;accounted&nbsp;for&nbsp;in&nbsp;your&nbsp;TLS-to-proxy&nbsp;plans.&lt;br&gt;<br>
&lt;br&gt;<br>
It&nbsp;may&nbsp;be&nbsp;that&nbsp;the&nbsp;LB&nbsp;is&nbsp;the&nbsp;entity(s)&nbsp;which&nbsp;need&nbsp;to&nbsp;be&nbsp;sending&nbsp;TLS&nbsp;to&lt;br&gt;<br>
your&nbsp;Squid.&nbsp;With&nbsp;the&nbsp;browsers&nbsp;who&nbsp;can&nbsp;doing&nbsp;TLS&nbsp;to&nbsp;the&nbsp;LB&nbsp;proxy.&nbsp;That&lt;br&gt;<br>
would&nbsp;get&nbsp;a&nbsp;portion&nbsp;LB&lt;-&gt;Squid&nbsp;encrypted&nbsp;for&nbsp;MSIE&nbsp;even&nbsp;if&nbsp;the&nbsp;first&nbsp;bit&lt;br&gt;<br>
cannot.&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
Amos&lt;br&gt;<br>
&lt;/font&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
