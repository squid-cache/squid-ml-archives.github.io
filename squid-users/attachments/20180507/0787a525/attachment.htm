<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Hi&nbsp;all,&nbsp;&lt;br&gt;&lt;br&gt;&lt;/div&gt;I&nbsp;wanted&nbsp;to&nbsp;check&nbsp;with&nbsp;your&nbsp;accumulated&nbsp;wisdom&nbsp;the&nbsp;following&nbsp;squid&nbsp;configuration.&nbsp;&lt;br&gt;&lt;br&gt;&lt;/div&gt;The&nbsp;config&nbsp;is&nbsp;working&nbsp;both&nbsp;for&nbsp;splice&nbsp;or&nbsp;bump&nbsp;(by&nbsp;commenting/uncommenting&nbsp;the&nbsp;respective&nbsp;line)&nbsp;using&nbsp;TPROXY.&nbsp;It&nbsp;is&nbsp;a&nbsp;config&nbsp;ported&nbsp;form&nbsp;an&nbsp;old&nbsp;installation&nbsp;of&nbsp;squid&nbsp;3.1&nbsp;for&nbsp;the&nbsp;new&nbsp;3.5&nbsp;and&nbsp;although&nbsp;I&nbsp;did&nbsp;some&nbsp;cleanup&nbsp;I&nbsp;am&nbsp;wondering&nbsp;if&nbsp;I&nbsp;am&nbsp;misusing&nbsp;any&nbsp;directive&nbsp;or&nbsp;missing&nbsp;any&nbsp;crucial&nbsp;one&nbsp;for&nbsp;better&nbsp;performance&nbsp;or&nbsp;just&nbsp;for&nbsp;sake&nbsp;of&nbsp;cleanliness.&lt;br&gt;&lt;br&gt;&lt;/div&gt;At&nbsp;the&nbsp;moment&nbsp;for&nbsp;filtering&nbsp;I&nbsp;am&nbsp;using&nbsp;squidGuard&nbsp;and&nbsp;considering&nbsp;to&nbsp;go&nbsp;with&nbsp;ufdbGuard&nbsp;instead&nbsp;as&nbsp;pointed&nbsp;from&nbsp;Amos&nbsp;(thanx&nbsp;for&nbsp;that).&lt;br&gt;Â &lt;br&gt;&lt;div&gt;To&nbsp;avoid&nbsp;issues&nbsp;with&nbsp;some&nbsp;sites&nbsp;I&nbsp;am&nbsp;considering&nbsp;to&nbsp;use&nbsp;only&nbsp;splicing,&nbsp;although&nbsp;this&nbsp;has&nbsp;some&nbsp;caveats&nbsp;as&nbsp;bumping&nbsp;also&nbsp;does.&nbsp;I&nbsp;could&nbsp;go&nbsp;with&nbsp;a&nbsp;hybrid&nbsp;approach&nbsp;(splice&nbsp;some&nbsp;and&nbsp;bump&nbsp;all)&nbsp;but&nbsp;this&nbsp;sounds&nbsp;that&nbsp;this&nbsp;will&nbsp;cause&nbsp;periodically&nbsp;more&nbsp;administrative&nbsp;overhead&nbsp;to&nbsp;sort&nbsp;out&nbsp;the&nbsp;sites&nbsp;that&nbsp;need&nbsp;splicing.&nbsp;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;config&nbsp;has&nbsp;also&nbsp;some&nbsp;ACLs&nbsp;as&nbsp;an&nbsp;attempt&nbsp;to&nbsp;block&nbsp;media&nbsp;streaming&nbsp;by&nbsp;those&nbsp;seem&nbsp;to&nbsp;not&nbsp;work.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;hardware&nbsp;running&nbsp;the&nbsp;squid&nbsp;is&nbsp;somehow&nbsp;small&nbsp;with&nbsp;4&nbsp;GB&nbsp;of&nbsp;RAM,&nbsp;4&nbsp;CPU&nbsp;cores&nbsp;and&nbsp;100&nbsp;GB&nbsp;SSD&nbsp;in&nbsp;case&nbsp;one&nbsp;wonders.&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:monospace,monospace&quot;&gt;http_port&nbsp;&lt;a&nbsp;href=&quot;http://192.168.200.1:3128&quot;&gt;192.168.200.1:3128&lt;/a&gt;&nbsp;tproxy&lt;br&gt;https_port&nbsp;&lt;a&nbsp;href=&quot;http://192.168.200.1:3129&quot;&gt;192.168.200.1:3129&lt;/a&gt;&nbsp;tproxy&nbsp;ssl-bump&nbsp;generate-host-certificates=on&nbsp;dynamic_cert_mem_cache_size=4MB&nbsp;cert=/etc/squid/ssl_cert/myCA.pem&lt;br&gt;&lt;br&gt;sslcrtd_program&nbsp;/usr/lib/squid/ssl_crtd&nbsp;-s&nbsp;/usr/local/squid/var/lib/ssl_db&nbsp;-M&nbsp;4MB&lt;br&gt;sslcrtd_children&nbsp;5&lt;br&gt;&lt;br&gt;shutdown_lifetime&nbsp;5&nbsp;seconds&lt;br&gt;&lt;br&gt;#&nbsp;ACL&lt;br&gt;#acl&nbsp;ncsa_users&nbsp;proxy_auth&nbsp;REQUIRED&lt;br&gt;#acl&nbsp;all&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0/0.0.0.0&quot;&gt;0.0.0.0/0.0.0.0&lt;/a&gt;&lt;br&gt;acl&nbsp;manager&nbsp;proto&nbsp;cache_object&lt;br&gt;acl&nbsp;localhost&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://192.168.200.1/32&quot;&gt;192.168.200.1/32&lt;/a&gt;&lt;br&gt;&lt;br&gt;acl&nbsp;SSL_ports&nbsp;port&nbsp;443&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;80&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;21&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;443&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;10080&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;10443&lt;br&gt;acl&nbsp;SSL&nbsp;method&nbsp;CONNECT&lt;br&gt;acl&nbsp;CONNECT&nbsp;method&nbsp;CONNECT&nbsp;#&nbsp;multiling&nbsp;http&lt;br&gt;#acl&nbsp;block_url&nbsp;dstdomain&nbsp;&quot;/etc/squid/block_url.squid&quot;&lt;br&gt;#acl&nbsp;allow_url&nbsp;dstdomain&nbsp;&quot;/etc/squid/allow_url.squid&quot;&lt;br&gt;acl&nbsp;ELAN&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://192.168.200.0/24&quot;&gt;192.168.200.0/24&lt;/a&gt;&lt;br&gt;&lt;br&gt;acl&nbsp;QUERY&nbsp;urlpath_regex&nbsp;cgi-bin&nbsp;\?&lt;br&gt;&lt;br&gt;#&nbsp;SSL&lt;br&gt;always_direct&nbsp;allow&nbsp;all&lt;br&gt;&lt;br&gt;#&nbsp;Video&nbsp;Streaming&nbsp;ACLs&lt;br&gt;acl&nbsp;media&nbsp;rep_mime_type&nbsp;^.*mms.*&lt;br&gt;acl&nbsp;media&nbsp;rep_mime_type&nbsp;^.*ms-hdr.*&lt;br&gt;acl&nbsp;media&nbsp;rep_mime_type&nbsp;^.*x-fcs.*&lt;br&gt;acl&nbsp;media&nbsp;rep_mime_type&nbsp;^.*x-ms-asf.*&lt;br&gt;acl&nbsp;media2&nbsp;urlpath_regex&nbsp;dvrplayer&nbsp;mediastream&nbsp;mms://&lt;br&gt;acl&nbsp;media2&nbsp;urlpath_regex&nbsp;\.asf$&nbsp;\.afx$&nbsp;\.flv$&nbsp;\.swf$&lt;br&gt;acl&nbsp;flashvideo&nbsp;rep_mime_type&nbsp;-i&nbsp;video/flv&lt;br&gt;acl&nbsp;flashvideo&nbsp;rep_mime_type&nbsp;-i&nbsp;video/x-flv&lt;br&gt;acl&nbsp;shockwave&nbsp;rep_mime_type&nbsp;-i&nbsp;^application/x-shockwave-flash$&lt;br&gt;acl&nbsp;x-type&nbsp;req_mime_type&nbsp;-i&nbsp;^application/octet-stream$&lt;br&gt;acl&nbsp;x-type&nbsp;req_mime_type&nbsp;-i&nbsp;application/octet-stream&lt;br&gt;acl&nbsp;x-type&nbsp;req_mime_type&nbsp;-i&nbsp;^application/x-mplayer2$&lt;br&gt;acl&nbsp;x-type&nbsp;req_mime_type&nbsp;-i&nbsp;application/x-mplayer2&lt;br&gt;acl&nbsp;x-type&nbsp;req_mime_type&nbsp;-i&nbsp;^application/x-oleobject$&lt;br&gt;acl&nbsp;x-type&nbsp;req_mime_type&nbsp;-i&nbsp;application/x-oleobject&lt;br&gt;acl&nbsp;x-type&nbsp;req_mime_type&nbsp;-i&nbsp;application/x-pncmd&lt;br&gt;acl&nbsp;x-type&nbsp;req_mime_type&nbsp;-i&nbsp;^video/x-ms-asf$&lt;br&gt;acl&nbsp;x-type2&nbsp;rep_mime_type&nbsp;-i&nbsp;^application/octet-stream$&lt;br&gt;acl&nbsp;x-type2&nbsp;rep_mime_type&nbsp;-i&nbsp;application/octet-stream&lt;br&gt;acl&nbsp;x-type2&nbsp;rep_mime_type&nbsp;-i&nbsp;^application/x-mplayer2$&lt;br&gt;acl&nbsp;x-type2&nbsp;rep_mime_type&nbsp;-i&nbsp;application/x-mplayer2&lt;br&gt;acl&nbsp;x-type2&nbsp;rep_mime_type&nbsp;-i&nbsp;^application/x-oleobject$&lt;br&gt;acl&nbsp;x-type2&nbsp;rep_mime_type&nbsp;-i&nbsp;application/x-oleobject&lt;br&gt;acl&nbsp;x-type2&nbsp;rep_mime_type&nbsp;-i&nbsp;application/x-pncmd&lt;br&gt;acl&nbsp;x-type2&nbsp;rep_mime_type&nbsp;-i&nbsp;^video/x-ms-asf$&lt;br&gt;&lt;br&gt;#&nbsp;Block&nbsp;Media&nbsp;Streaming&lt;br&gt;http_reply_access&nbsp;deny&nbsp;flashvideo&lt;br&gt;http_reply_access&nbsp;deny&nbsp;shockwave&lt;br&gt;http_reply_access&nbsp;deny&nbsp;media&lt;br&gt;http_reply_access&nbsp;deny&nbsp;media2&lt;br&gt;http_reply_access&nbsp;deny&nbsp;x-type&lt;br&gt;http_reply_access&nbsp;deny&nbsp;x-type2&lt;br&gt;&lt;br&gt;#&lt;br&gt;http_access&nbsp;deny&nbsp;manager&lt;br&gt;http_access&nbsp;deny&nbsp;!Safe_ports&lt;br&gt;http_access&nbsp;deny&nbsp;CONNECT&nbsp;!SSL_ports&lt;br&gt;#http_access&nbsp;deny&nbsp;block_url&lt;br&gt;#http_access&nbsp;allow&nbsp;allow_url&lt;br&gt;http_access&nbsp;allow&nbsp;LAN&lt;br&gt;http_access&nbsp;allow&nbsp;ELAN&lt;br&gt;&lt;br&gt;http_access&nbsp;allow&nbsp;localhost&lt;br&gt;#http_access&nbsp;allow&nbsp;ncsa_users&lt;br&gt;http_reply_access&nbsp;allow&nbsp;all&lt;br&gt;&lt;br&gt;deny_info&nbsp;ERR_CUSTOM&nbsp;LAN&nbsp;ELAN&nbsp;media&nbsp;media2&nbsp;flashvideo&nbsp;shockwave&nbsp;x-type&nbsp;x-type2&lt;br&gt;error_directory&nbsp;/usr/share/squid-langpack/en&lt;br&gt;&lt;br&gt;#icp_access&nbsp;allow&nbsp;all&lt;br&gt;&lt;br&gt;#&nbsp;Logging&lt;br&gt;logfile_daemon&nbsp;/usr/lib/squid/log_db_daemon&lt;br&gt;access_log&nbsp;daemon:/&lt;a&nbsp;href=&quot;http://127.0.0.1/squid_log/access_log/squid/squid&quot;&gt;127.0.0.1/squid_log/access_log/squid/squid&lt;/a&gt;&nbsp;squid&lt;br&gt;icap_log&nbsp;stdio:/var/log/squid/icap.log&nbsp;squid&lt;br&gt;cache_store_log&nbsp;stdio:/var/log/squid/store.log&lt;br&gt;&lt;br&gt;#&nbsp;DNS&lt;br&gt;dns_nameservers&nbsp;127.0.0.1&lt;br&gt;positive_dns_ttl&nbsp;8&nbsp;hours&lt;br&gt;negative_dns_ttl&nbsp;30&nbsp;seconds&lt;br&gt;ipcache_size&nbsp;2048&lt;br&gt;ipcache_low&nbsp;95&lt;br&gt;ipcache_high&nbsp;97&lt;br&gt;fqdncache_size&nbsp;2048&lt;br&gt;&lt;br&gt;#&nbsp;Leave&nbsp;coredumps&nbsp;in&nbsp;the&nbsp;first&nbsp;cache&nbsp;dir&lt;br&gt;coredump_dir&nbsp;/var/spool/squid&lt;br&gt;cache_dir&nbsp;ufs&nbsp;/var/spool/squid&nbsp;10240&nbsp;16&nbsp;256&lt;br&gt;minimum_object_size&nbsp;0&nbsp;KB&lt;br&gt;maximum_object_size&nbsp;30&nbsp;MB&lt;br&gt;maximum_object_size_in_memory&nbsp;1024&nbsp;KB&lt;br&gt;&lt;br&gt;#&nbsp;HTTPS&nbsp;filtering&lt;br&gt;acl&nbsp;step1&nbsp;at_step&nbsp;SslBump1&lt;br&gt;&lt;br&gt;ssl_bump&nbsp;peek&nbsp;step1&lt;br&gt;ssl_bump&nbsp;splice&nbsp;all&lt;br&gt;#ssl_bump&nbsp;bump&nbsp;all&lt;br&gt;&lt;br&gt;#&nbsp;SquidGuard&lt;br&gt;url_rewrite_program&nbsp;/usr/bin/squidGuard&nbsp;-c&nbsp;/etc/squidguard/squidGuard.conf&lt;br&gt;url_rewrite_children&nbsp;5&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;Your&nbsp;input&nbsp;is&nbsp;highly&nbsp;appreciated.&lt;br&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;Alex&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
