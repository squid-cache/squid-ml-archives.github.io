<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hi&nbsp;Amos,&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Mon,&nbsp;May&nbsp;7,&nbsp;2018&nbsp;at&nbsp;7:30&nbsp;PM,&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&nbsp;target=&quot;_blank&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&gt;On&nbsp;08/05/18&nbsp;00:24,&nbsp;Alex&nbsp;K&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;Hi&nbsp;all,&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;wanted&nbsp;to&nbsp;check&nbsp;with&nbsp;your&nbsp;accumulated&nbsp;wisdom&nbsp;the&nbsp;following&nbsp;squid&lt;br&gt;<br>
&gt;&nbsp;configuration.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;config&nbsp;is&nbsp;working&nbsp;both&nbsp;for&nbsp;splice&nbsp;or&nbsp;bump&nbsp;(by&lt;br&gt;<br>
&gt;&nbsp;commenting/uncommenting&nbsp;the&nbsp;respective&nbsp;line)&nbsp;using&nbsp;TPROXY.&nbsp;It&nbsp;is&nbsp;a&lt;br&gt;<br>
&gt;&nbsp;config&nbsp;ported&nbsp;form&nbsp;an&nbsp;old&nbsp;installation&nbsp;of&nbsp;squid&nbsp;3.1&nbsp;for&nbsp;the&nbsp;new&nbsp;3.5&nbsp;and&lt;br&gt;<br>
&gt;&nbsp;although&nbsp;I&nbsp;did&nbsp;some&nbsp;cleanup&nbsp;I&nbsp;am&nbsp;wondering&nbsp;if&nbsp;I&nbsp;am&nbsp;misusing&nbsp;any&lt;br&gt;<br>
&gt;&nbsp;directive&nbsp;or&nbsp;missing&nbsp;any&nbsp;crucial&nbsp;one&nbsp;for&nbsp;better&nbsp;performance&nbsp;or&nbsp;just&nbsp;for&lt;br&gt;<br>
&gt;&nbsp;sake&nbsp;of&nbsp;cleanliness.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;At&nbsp;the&nbsp;moment&nbsp;for&nbsp;filtering&nbsp;I&nbsp;am&nbsp;using&nbsp;squidGuard&nbsp;and&nbsp;considering&nbsp;to&nbsp;go&lt;br&gt;<br>
&gt;&nbsp;with&nbsp;ufdbGuard&nbsp;instead&nbsp;as&nbsp;pointed&nbsp;from&nbsp;Amos&nbsp;(thanx&nbsp;for&nbsp;that).&lt;br&gt;<br>
&gt;&nbsp; &lt;br&gt;<br>
&gt;&nbsp;To&nbsp;avoid&nbsp;issues&nbsp;with&nbsp;some&nbsp;sites&nbsp;I&nbsp;am&nbsp;considering&nbsp;to&nbsp;use&nbsp;only&nbsp;splicing,&lt;br&gt;<br>
&gt;&nbsp;although&nbsp;this&nbsp;has&nbsp;some&nbsp;caveats&nbsp;as&nbsp;bumping&nbsp;also&nbsp;does.&nbsp;I&nbsp;could&nbsp;go&nbsp;with&nbsp;a&lt;br&gt;<br>
&gt;&nbsp;hybrid&nbsp;approach&nbsp;(splice&nbsp;some&nbsp;and&nbsp;bump&nbsp;all)&nbsp;but&nbsp;this&nbsp;sounds&nbsp;that&nbsp;this&lt;br&gt;<br>
&gt;&nbsp;will&nbsp;cause&nbsp;periodically&nbsp;more&nbsp;administrative&nbsp;overhead&nbsp;to&nbsp;sort&nbsp;out&nbsp;the&lt;br&gt;<br>
&gt;&nbsp;sites&nbsp;that&nbsp;need&nbsp;splicing.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;config&nbsp;has&nbsp;also&nbsp;some&nbsp;ACLs&nbsp;as&nbsp;an&nbsp;attempt&nbsp;to&nbsp;block&nbsp;media&nbsp;streaming&nbsp;by&lt;br&gt;<br>
&gt;&nbsp;those&nbsp;seem&nbsp;to&nbsp;not&nbsp;work.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;The&nbsp;ACL&nbsp;checking&nbsp;for&nbsp;mms://&nbsp;URL&nbsp;will&nbsp;not&nbsp;work&nbsp;because&nbsp;MMS&nbsp;protocol&nbsp;is&lt;br&gt;<br>
not&nbsp;HTTP.&nbsp;Any&nbsp;client&nbsp;using&nbsp;that&nbsp;protocol&nbsp;will&nbsp;not&nbsp;be&nbsp;going&nbsp;through&lt;br&gt;<br>
Squid.&nbsp;So&nbsp;quite&nbsp;likely&nbsp;none&nbsp;of&nbsp;the&nbsp;other&nbsp;checks&nbsp;will&nbsp;work&nbsp;for&nbsp;its&lt;br&gt;<br>
non-proxied&nbsp;traffic&nbsp;either.&lt;br&gt;<br>
&lt;br&gt;<br>
&quot;working&quot;&nbsp;can&nbsp;also&nbsp;depend&nbsp;on&nbsp;what&nbsp;you&nbsp;are&nbsp;looking&nbsp;at.&nbsp;Your&nbsp;rules&nbsp;are&lt;br&gt;<br>
only&nbsp;blocking&nbsp;*reply*&nbsp;access.&nbsp;Which&nbsp;means&nbsp;only&nbsp;that&nbsp;the&nbsp;client&nbsp;does&nbsp;not&lt;br&gt;<br>
get&nbsp;the&nbsp;response&nbsp;delivered.&nbsp;It&nbsp;still&nbsp;gets&nbsp;fetched&nbsp;from&nbsp;the&nbsp;server&nbsp;-&lt;br&gt;<br>
maybe&nbsp;in&nbsp;full.&nbsp;So&nbsp;checking&nbsp;your&nbsp;logs&nbsp;etc&nbsp;can&nbsp;still&nbsp;show&nbsp;things&nbsp;arriving&lt;br&gt;<br>
and&nbsp;lots&nbsp;of&nbsp;bandwidth&nbsp;usage.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;urlpath&nbsp;and&nbsp;req_mime_type&nbsp;can&nbsp;be&nbsp;checked&nbsp;in&nbsp;http_access&nbsp;instead&nbsp;to&lt;br&gt;<br>
block&nbsp;those&nbsp;requests&nbsp;from&nbsp;ever&nbsp;happening.&nbsp;That&nbsp;MAY&nbsp;work&nbsp;better,&nbsp;but&nbsp;no&lt;br&gt;<br>
guarantees.&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;hardware&nbsp;running&nbsp;the&nbsp;squid&nbsp;is&nbsp;somehow&nbsp;small&nbsp;with&nbsp;4&nbsp;GB&nbsp;of&nbsp;RAM,&nbsp;4&nbsp;CPU&lt;br&gt;<br>
&gt;&nbsp;cores&nbsp;and&nbsp;100&nbsp;GB&nbsp;SSD&nbsp;in&nbsp;case&nbsp;one&nbsp;wonders.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;http_port&nbsp;&lt;a&nbsp;href=&quot;http://192.168.200.1:3128&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;192.168.200.1:3128&lt;/a&gt;&nbsp;tproxy&lt;br&gt;<br>
&gt;&nbsp;https_port&nbsp;&lt;a&nbsp;href=&quot;http://192.168.200.1:3129&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;192.168.200.1:3129&lt;/a&gt;&nbsp;tproxy&nbsp;\&lt;br&gt;<br>
&gt; &nbsp; ssl-bump&nbsp;generate-host-certificates=on&nbsp;dynamic_cert_mem_cache_size=&lt;wbr&gt;4MB&nbsp;\&lt;br&gt;<br>
&gt; &nbsp; cert=/etc/squid/ssl_cert/myCA.&lt;wbr&gt;pem&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;sslcrtd_program&nbsp;/usr/lib/squid/ssl_crtd&nbsp;-s&lt;br&gt;<br>
&gt;&nbsp;/usr/local/squid/var/lib/ssl_&lt;wbr&gt;db&nbsp;-M&nbsp;4MB&lt;br&gt;<br>
&gt;&nbsp;sslcrtd_children&nbsp;5&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;shutdown_lifetime&nbsp;5&nbsp;seconds&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;#&nbsp;ACL&lt;br&gt;<br>
&gt;&nbsp;#acl&nbsp;ncsa_users&nbsp;proxy_auth&nbsp;REQUIRED&lt;br&gt;<br>
&gt;&nbsp;#acl&nbsp;all&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://0.0.0.0/0.0.0.0&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;0.0.0.0/0.0.0.0&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;manager&nbsp;proto&nbsp;cache_object&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;&#39;manager&#39;&nbsp;ACL&nbsp;is&nbsp;now&nbsp;built-in,&nbsp;and&nbsp;has&nbsp;a&nbsp;different&nbsp;type&nbsp;signature.&nbsp;The&lt;br&gt;<br>
above&nbsp;needs&nbsp;to&nbsp;be&nbsp;removed.&nbsp;Same&nbsp;with&nbsp;&#39;all&#39;.&nbsp;It&nbsp;is&nbsp;not&nbsp;a&nbsp;good&nbsp;idea&nbsp;to&lt;br&gt;<br>
leave&nbsp;them&nbsp;even&nbsp;commented&nbsp;out&nbsp;because&nbsp;the&nbsp;old&nbsp;definitions&nbsp;are&nbsp;no&nbsp;longer&lt;br&gt;<br>
true.&lt;br&gt;<br>
&lt;br&gt;<br>
ok,&nbsp;removed&nbsp;these&nbsp;entries&nbsp;(&lt;span&nbsp;class=&quot;gmail-&quot;&gt;ncsa_users&lt;/span&gt;,&nbsp;all,&nbsp;manager)&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&gt;&nbsp;acl&nbsp;localhost&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://192.168.200.1/32&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;192.168.200.1/32&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
192.168.200.1&nbsp;is&nbsp;assigned&nbsp;to&nbsp;your&nbsp;lo&nbsp;interface?&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;Yes,&nbsp;this&nbsp;is&nbsp;the&nbsp;IP&nbsp;of&nbsp;one&nbsp;of&nbsp;the&nbsp;interfaces&nbsp;of&nbsp;the&nbsp;device&nbsp;at&nbsp;the&nbsp;network&nbsp;where&nbsp;the&nbsp;users&nbsp;use&nbsp;squid&nbsp;to&nbsp;reach&nbsp;Internet. &nbsp;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;SSL_ports&nbsp;port&nbsp;443&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;Safe_ports&nbsp;port&nbsp;80&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;Safe_ports&nbsp;port&nbsp;21&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;Safe_ports&nbsp;port&nbsp;443&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;Safe_ports&nbsp;port&nbsp;10080&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;Safe_ports&nbsp;port&nbsp;10443&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;SSL&nbsp;method&nbsp;CONNECT&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;The&nbsp;above&nbsp;can&nbsp;be&nbsp;quite&nbsp;deceptive,&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;I&nbsp;removed&nbsp;port&nbsp;21&nbsp;as&nbsp;I&nbsp;don&#39;t&nbsp;think&nbsp;I&nbsp;am&nbsp;using&nbsp;FTP.&nbsp;&lt;br&gt; &lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;CONNECT&nbsp;method&nbsp;CONNECT&nbsp;#&nbsp;multiling&nbsp;http&lt;br&gt;<br>
&gt;&nbsp;#acl&nbsp;block_url&nbsp;dstdomain&nbsp;&quot;/etc/squid/block_url.squid&quot;&lt;br&gt;<br>
&gt;&nbsp;#acl&nbsp;allow_url&nbsp;dstdomain&nbsp;&quot;/etc/squid/allow_url.squid&quot;&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;ELAN&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://192.168.200.0/24&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;192.168.200.0/24&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;QUERY&nbsp;urlpath_regex&nbsp;cgi-bin&nbsp;\?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;The&nbsp;QUERY&nbsp;is&nbsp;not&nbsp;being&nbsp;used.&nbsp;It&nbsp;is&nbsp;also&nbsp;no&nbsp;longer&nbsp;necessary&nbsp;so&nbsp;can&nbsp;be&lt;br&gt;<br>
removed.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;Removed.&nbsp;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;#&nbsp;SSL&lt;br&gt;<br>
&gt;&nbsp;always_direct&nbsp;allow&nbsp;all&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;That&nbsp;should&nbsp;not&nbsp;be.&nbsp;You&nbsp;do&nbsp;not&nbsp;have&nbsp;any&nbsp;cache_peer&nbsp;configured.&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;div&gt;Removed&lt;br&gt; &lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;#&nbsp;Video&nbsp;Streaming&nbsp;ACLs&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;media&nbsp;rep_mime_type&nbsp;^.*mms.*&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;media&nbsp;rep_mime_type&nbsp;^.*ms-hdr.*&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;media&nbsp;rep_mime_type&nbsp;^.*x-fcs.*&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;media&nbsp;rep_mime_type&nbsp;^.*x-ms-asf.*&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;media2&nbsp;urlpath_regex&nbsp;dvrplayer&nbsp;mediastream&nbsp;mms://&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;media2&nbsp;urlpath_regex&nbsp;\.asf$&nbsp;\.afx$&nbsp;\.flv$&nbsp;\.swf$&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;flashvideo&nbsp;rep_mime_type&nbsp;-i&nbsp;video/flv&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;flashvideo&nbsp;rep_mime_type&nbsp;-i&nbsp;video/x-flv&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;shockwave&nbsp;rep_mime_type&nbsp;-i&nbsp;^application/x-shockwave-&lt;wbr&gt;flash$&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;x-type&nbsp;req_mime_type&nbsp;-i&nbsp;^application/octet-stream$&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;x-type&nbsp;req_mime_type&nbsp;-i&nbsp;application/octet-stream&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;All&nbsp;the&nbsp;lines&nbsp;like&nbsp;the&nbsp;two&nbsp;above&nbsp;are&nbsp;duplicates.&lt;br&gt;<br>
The&nbsp;&quot;^foo$&quot;&nbsp;pattern&nbsp;is&nbsp;a&nbsp;sub-set&nbsp;of&nbsp;&quot;foo&quot;&nbsp;pattern.&lt;br&gt;<br>
&lt;div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;Removed&nbsp;duplicates&nbsp;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;x-type&nbsp;req_mime_type&nbsp;-i&nbsp;^application/x-mplayer2$&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;x-type&nbsp;req_mime_type&nbsp;-i&nbsp;application/x-mplayer2&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;x-type&nbsp;req_mime_type&nbsp;-i&nbsp;^application/x-oleobject$&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;x-type&nbsp;req_mime_type&nbsp;-i&nbsp;application/x-oleobject&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;x-type&nbsp;req_mime_type&nbsp;-i&nbsp;application/x-pncmd&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;x-type&nbsp;req_mime_type&nbsp;-i&nbsp;^video/x-ms-asf$&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;x-type2&nbsp;rep_mime_type&nbsp;-i&nbsp;^application/octet-stream$&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;x-type2&nbsp;rep_mime_type&nbsp;-i&nbsp;application/octet-stream&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;x-type2&nbsp;rep_mime_type&nbsp;-i&nbsp;^application/x-mplayer2$&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;x-type2&nbsp;rep_mime_type&nbsp;-i&nbsp;application/x-mplayer2&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;x-type2&nbsp;rep_mime_type&nbsp;-i&nbsp;^application/x-oleobject$&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;x-type2&nbsp;rep_mime_type&nbsp;-i&nbsp;application/x-oleobject&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;x-type2&nbsp;rep_mime_type&nbsp;-i&nbsp;application/x-pncmd&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;x-type2&nbsp;rep_mime_type&nbsp;-i&nbsp;^video/x-ms-asf$&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;#&nbsp;Block&nbsp;Media&nbsp;Streaming&lt;br&gt;<br>
&gt;&nbsp;http_reply_access&nbsp;deny&nbsp;flashvideo&lt;br&gt;<br>
&gt;&nbsp;http_reply_access&nbsp;deny&nbsp;shockwave&lt;br&gt;<br>
&gt;&nbsp;http_reply_access&nbsp;deny&nbsp;media&lt;br&gt;<br>
&gt;&nbsp;http_reply_access&nbsp;deny&nbsp;media2&lt;br&gt;<br>
&gt;&nbsp;http_reply_access&nbsp;deny&nbsp;x-type&lt;br&gt;<br>
&gt;&nbsp;http_reply_access&nbsp;deny&nbsp;x-type2&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;#&lt;br&gt;<br>
&gt;&nbsp;http_access&nbsp;deny&nbsp;manager&lt;br&gt;<br>
&gt;&nbsp;http_access&nbsp;deny&nbsp;!Safe_ports&lt;br&gt;<br>
&gt;&nbsp;http_access&nbsp;deny&nbsp;CONNECT&nbsp;!SSL_ports&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;FYI:&nbsp;current&nbsp;best-practice&nbsp;recommendation&nbsp;is&nbsp;to&nbsp;place&nbsp;the&nbsp;manager&nbsp;access&lt;br&gt;<br>
line&nbsp;down&nbsp;here&nbsp;after&nbsp;the&nbsp;faster&nbsp;port&nbsp;checks.&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/blockquote&gt;&lt;div&gt;Placed&nbsp;the&nbsp;manager&nbsp;line&nbsp;after&nbsp;the &nbsp;&quot;http_access&nbsp;deny&nbsp;CONNECT&nbsp;!SSL_ports&quot;.&nbsp;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;span&nbsp;class=&quot;&quot;&gt;<br>
&gt;&nbsp;#http_access&nbsp;deny&nbsp;block_url&lt;br&gt;<br>
&gt;&nbsp;#http_access&nbsp;allow&nbsp;allow_url&lt;br&gt;<br>
&gt;&nbsp;http_access&nbsp;allow&nbsp;LAN&lt;br&gt;<br>
&gt;&nbsp;http_access&nbsp;allow&nbsp;ELAN&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;http_access&nbsp;allow&nbsp;localhost&lt;br&gt;<br>
&gt;&nbsp;#http_access&nbsp;allow&nbsp;ncsa_users&lt;br&gt;<br>
&gt;&nbsp;http_reply_access&nbsp;allow&nbsp;all&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;This&nbsp;http_reply_access&nbsp;line&nbsp;should&nbsp;be&nbsp;up&nbsp;with&nbsp;the&nbsp;others&nbsp;so&nbsp;it&nbsp;does&nbsp;not&lt;br&gt;<br>
fool&nbsp;anyone&nbsp;into&nbsp;thinking&nbsp;its&nbsp;placement&nbsp;here&nbsp;with&nbsp;the&nbsp;http_access&nbsp;lines&lt;br&gt;<br>
has&nbsp;any&nbsp;meaning.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt;Moved&nbsp;it&nbsp;at&nbsp;http_reply&nbsp;block&nbsp;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;div&gt;&lt;div&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;deny_info&nbsp;ERR_CUSTOM&nbsp;LAN&nbsp;ELAN&nbsp;media&nbsp;media2&nbsp;flashvideo&nbsp;shockwave&nbsp;x-type&lt;br&gt;<br>
&gt;&nbsp;x-type2&lt;br&gt;<br>
&gt;&nbsp;error_directory&nbsp;/usr/share/squid-langpack/en&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;#icp_access&nbsp;allow&nbsp;all&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;#&nbsp;Logging&lt;br&gt;<br>
&gt;&nbsp;logfile_daemon&nbsp;/usr/lib/squid/log_db_daemon&lt;br&gt;<br>
&gt;&nbsp;access_log&nbsp;daemon:/&lt;a&nbsp;href=&quot;http://127.0.0.1/squid_log/access_log/squid/squid&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;127.0.0.1/squid_log/&lt;wbr&gt;access_log/squid/squid&lt;/a&gt;&nbsp;squid&lt;br&gt;<br>
&gt;&nbsp;icap_log&nbsp;stdio:/var/log/squid/icap.log&nbsp;squid&lt;br&gt;<br>
&gt;&nbsp;cache_store_log&nbsp;stdio:/var/log/squid/store.log&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;#&nbsp;DNS&lt;br&gt;<br>
&gt;&nbsp;dns_nameservers&nbsp;127.0.0.1&lt;br&gt;<br>
&gt;&nbsp;positive_dns_ttl&nbsp;8&nbsp;hours&lt;br&gt;<br>
&gt;&nbsp;negative_dns_ttl&nbsp;30&nbsp;seconds&lt;br&gt;<br>
&gt;&nbsp;ipcache_size&nbsp;2048&lt;br&gt;<br>
&gt;&nbsp;ipcache_low&nbsp;95&lt;br&gt;<br>
&gt;&nbsp;ipcache_high&nbsp;97&lt;br&gt;<br>
&gt;&nbsp;fqdncache_size&nbsp;2048&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;#&nbsp;Leave&nbsp;coredumps&nbsp;in&nbsp;the&nbsp;first&nbsp;cache&nbsp;dir&lt;br&gt;<br>
&gt;&nbsp;coredump_dir&nbsp;/var/spool/squid&lt;br&gt;<br>
&gt;&nbsp;cache_dir&nbsp;ufs&nbsp;/var/spool/squid&nbsp;10240&nbsp;16&nbsp;256&lt;br&gt;<br>
&gt;&nbsp;minimum_object_size&nbsp;0&nbsp;KB&lt;br&gt;<br>
&gt;&nbsp;maximum_object_size&nbsp;30&nbsp;MB&lt;br&gt;<br>
&gt;&nbsp;maximum_object_size_in_memory&nbsp;1024&nbsp;KB&lt;br&gt;<br>
&gt; &nbsp;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;<br>
&gt;&nbsp;#&nbsp;HTTPS&nbsp;filtering&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;step1&nbsp;at_step&nbsp;SslBump1&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;ssl_bump&nbsp;peek&nbsp;step1&lt;br&gt;<br>
&gt;&nbsp;ssl_bump&nbsp;splice&nbsp;all&lt;br&gt;<br>
&gt;&nbsp;#ssl_bump&nbsp;bump&nbsp;all&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;#&nbsp;SquidGuard&lt;br&gt;<br>
&gt;&nbsp;url_rewrite_program&nbsp;/usr/bin/squidGuard&nbsp;-c&nbsp;/etc/squidguard/squidGuard.&lt;wbr&gt;conf&lt;br&gt;<br>
&gt;&nbsp;url_rewrite_children&nbsp;5&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;Your&nbsp;input&nbsp;is&nbsp;highly&nbsp;appreciated.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;Alex&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&gt;&nbsp;______________________________&lt;wbr&gt;_________________&lt;br&gt;<br>
&gt;&nbsp;squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.&lt;wbr&gt;org&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/&lt;wbr&gt;listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
______________________________&lt;wbr&gt;_________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.&lt;wbr&gt;org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/&lt;wbr&gt;listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
