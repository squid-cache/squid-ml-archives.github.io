<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Hello&nbsp;my&nbsp;setup&nbsp;is&nbsp;as&nbsp;follows&nbsp;:&lt;br&gt;&lt;/div&gt;Freebsd&nbsp;11&nbsp;Heimdal&nbsp;Kerberos&nbsp;Server&nbsp;and&nbsp;DNS&nbsp;properly&nbsp;configured&nbsp;(testlab&nbsp;enviroment&nbsp;for&nbsp;&lt;a&nbsp;href=&quot;http://example.com&quot;&gt;example.com&lt;/a&gt;&nbsp;domain)&nbsp;&lt;br&gt;&lt;/div&gt;Freebsd&nbsp;11&nbsp;squid&nbsp;proxy&nbsp;server&nbsp;&lt;br&gt;&lt;/div&gt;Windows&nbsp;Client&nbsp;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;I&nbsp;have&nbsp;created&nbsp;a&nbsp;keytab&nbsp;from&nbsp;the&nbsp;Kerberos&nbsp;Server&nbsp;for&nbsp;http/&lt;a&nbsp;href=&quot;http://squid.example.com&quot;&gt;squid.example.com&lt;/a&gt;&lt;br&gt;&lt;/div&gt;Proxy&nbsp;server&nbsp;machine&nbsp;has&nbsp;no&nbsp;problem&nbsp;kinit&nbsp;ing&nbsp;with&nbsp;the&nbsp;keytab&nbsp;file&nbsp;and&nbsp;gets&nbsp;a&nbsp;ticket&nbsp;&lt;br&gt;&lt;br&gt;#&nbsp;klist&lt;br&gt;Credentials&nbsp;cache:&nbsp;FILE:/tmp/krb5cc_0&lt;br&gt;       &nbsp;Principal:&nbsp;http/&lt;a&nbsp;href=&quot;mailto:squid.example.com@EXAMPLE.COM&quot;&gt;squid.example.com@EXAMPLE.COM&lt;/a&gt;&lt;br&gt;&lt;br&gt; &nbsp;Issued               &nbsp;Expires              &nbsp;Principal&lt;br&gt;May &nbsp;9&nbsp;15:38:36&nbsp;2018 &nbsp;May&nbsp;10&nbsp;01:38:37&nbsp;2018 &nbsp;krbtgt/&lt;a&nbsp;href=&quot;mailto:EXAMPLE.COM@EXAMPLE.COM&quot;&gt;EXAMPLE.COM@EXAMPLE.COM&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;My&nbsp;squid.conf&nbsp;is&nbsp;as&nbsp;follows&nbsp;concerning&nbsp;the&nbsp;authentication&nbsp;:&lt;br&gt;auth_param&nbsp;negotiate&nbsp;program&nbsp;/usr/local/libexec/squid/negotiate_kerberos_auth&lt;br&gt;auth_param&nbsp;negotiate&nbsp;children&nbsp;10&nbsp;startup=1&lt;br&gt;auth_param&nbsp;negotiate&nbsp;keep_alive&nbsp;on&lt;br&gt;&lt;br&gt;&lt;/div&gt;Trying&nbsp;to&nbsp;use&nbsp;:&lt;br&gt; #&nbsp;/usr/local/libexec/squid/negotiate_kerberos_auth_test&nbsp;&lt;a&nbsp;href=&quot;http://squid.example.com&quot;&gt;squid.example.com&lt;/a&gt;&nbsp;&lt;br&gt;|&nbsp;awk&nbsp;&#39;{sub(/Token:/,&quot;YR&quot;);&nbsp;print&nbsp;$0}END{print&nbsp;&quot;QQ&quot;}&#39;&nbsp;&lt;br&gt;|&nbsp;/usr/local/libexec/squid/negotiate_kerberos_auth&nbsp;-r&nbsp;-s&nbsp;http/&lt;a&nbsp;href=&quot;http://squid.example.com&quot;&gt;squid.example.com&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;fails&nbsp;with&nbsp;:&lt;br&gt;|&nbsp;negotiate_kerberos_auth_test:&nbsp;gss_init_sec_context()&nbsp;failed: &nbsp;An&nbsp;unsupported&nbsp;mechanism&nbsp;was&nbsp;requested.&nbsp;unknown&nbsp;mech-code&nbsp;0&nbsp;for&nbsp;mech&nbsp;unknown&lt;br&gt;BH&nbsp;gss_accept_sec_context()&nbsp;failed: &nbsp;A&nbsp;token&nbsp;was&nbsp;invalid.&nbsp;unknown&nbsp;mech-code&nbsp;0&nbsp;for&nbsp;mech&nbsp;unknown&lt;br&gt;BH&nbsp;quit&nbsp;command&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;Any&nbsp;ideas&nbsp;?&lt;br&gt;&lt;br&gt;&lt;/div&gt;Thank&nbsp;you&nbsp;,&nbsp;&lt;br&gt;&lt;/div&gt;Bariamis&nbsp;Panagiotis&nbsp;&lt;br&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
