<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;After&nbsp;proceeding&nbsp;with&nbsp;using&nbsp;the&nbsp;shipped&nbsp;service&nbsp;file,&nbsp;then&nbsp;systemctl&nbsp;daemon-reload&nbsp;I&nbsp;do&nbsp;not&nbsp;experience&nbsp;any&nbsp;stuck&nbsp;reboots&nbsp;at&nbsp;the&nbsp;moment.&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Alex&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Sat,&nbsp;Jun&nbsp;9,&nbsp;2018&nbsp;at&nbsp;4:30&nbsp;PM,&nbsp;Alex&nbsp;K&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:rightkicktech@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;rightkicktech@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Getting&nbsp;back&nbsp;to&nbsp;this,&nbsp;I&nbsp;face&nbsp;also&nbsp;issues&nbsp;that&nbsp;seems&nbsp;to&nbsp;be&nbsp;related&nbsp;with&nbsp;how&nbsp;systemd&nbsp;handles&nbsp;squid.&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Frequently&nbsp;when&nbsp;I&nbsp;try&nbsp;restart&nbsp;the&nbsp;VM&nbsp;the&nbsp;VM&nbsp;is&nbsp;stuch&nbsp;at&nbsp;stopping&nbsp;squid&nbsp;and&nbsp;it&nbsp;never&nbsp;restarts.&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Checking&nbsp;the&nbsp;differences&nbsp;between&nbsp;the&nbsp;autogenerated&nbsp;service&nbsp;file&nbsp;and&nbsp;the&nbsp;one&nbsp;shipped&nbsp;with&nbsp;squid&nbsp;I&nbsp;see:&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:monospace,monospace&quot;&gt;diff&nbsp;/run/systemd/generator.late/&lt;wbr&gt;squid.service&nbsp;squid3-3.5.23/tools/systemd/&lt;wbr&gt;squid.service&lt;br&gt;1c1,6&lt;br&gt;&lt;&nbsp;#&nbsp;Automatically&nbsp;generated&nbsp;by&nbsp;systemd-sysv-generator&lt;br&gt;---&lt;br&gt;&gt;&nbsp;##&nbsp;Copyright&nbsp;(C)&nbsp;1996-2016&nbsp;The&nbsp;Squid&nbsp;Software&nbsp;Foundation&nbsp;and&nbsp;contributors&lt;br&gt;&gt;&nbsp;##&lt;br&gt;&gt;&nbsp;##&nbsp;Squid&nbsp;software&nbsp;is&nbsp;distributed&nbsp;under&nbsp;GPLv2+&nbsp;license&nbsp;and&nbsp;includes&lt;br&gt;&gt;&nbsp;##&nbsp;contributions&nbsp;from&nbsp;numerous&nbsp;individuals&nbsp;and&nbsp;organizations.&lt;br&gt;&gt;&nbsp;##&nbsp;Please&nbsp;see&nbsp;the&nbsp;COPYING&nbsp;and&nbsp;CONTRIBUTORS&nbsp;files&nbsp;for&nbsp;details.&lt;br&gt;&gt;&nbsp;##&lt;br&gt;4,14c9,10&lt;br&gt;&lt;&nbsp;Documentation=man:systemd-&lt;wbr&gt;sysv-generator(8)&lt;br&gt;&lt;&nbsp;SourcePath=/etc/init.d/squid&lt;br&gt;&lt;&nbsp;Description=LSB:&nbsp;Squid&nbsp;HTTP&nbsp;Proxy&nbsp;version&nbsp;3.x&lt;br&gt;&lt;&nbsp;Before=multi-user.target&lt;br&gt;&lt;&nbsp;Before=multi-user.target&lt;br&gt;&lt;&nbsp;Before=multi-user.target&lt;br&gt;&lt;&nbsp;Before=graphical.target&lt;br&gt;&lt;&nbsp;After=network-online.target&lt;br&gt;&lt;&nbsp;After=remote-fs.target&lt;br&gt;&lt;&nbsp;After=nss-lookup.target&lt;br&gt;&lt;&nbsp;Wants=network-online.target&lt;br&gt;---&lt;br&gt;&gt;&nbsp;Description=Squid&nbsp;Web&nbsp;Proxy&nbsp;Server&lt;br&gt;&gt;&nbsp;After=network.target&lt;br&gt;17,20c13,15&lt;br&gt;&lt;&nbsp;Type=forking&lt;br&gt;&lt;&nbsp;Restart=no&lt;br&gt;&lt;&nbsp;TimeoutSec=5min&lt;br&gt;&lt;&nbsp;IgnoreSIGPIPE=no&lt;br&gt;---&lt;br&gt;&gt;&nbsp;Type=simple&lt;br&gt;&gt;&nbsp;ExecStart=/usr/sbin/squid&nbsp;-sYC&nbsp;-N&lt;br&gt;&gt;&nbsp;ExecReload=/bin/kill&nbsp;-HUP&nbsp;$MAINPID&lt;br&gt;22,28c17,19&lt;br&gt;&lt;&nbsp;GuessMainPID=no&lt;br&gt;&lt;&nbsp;RemainAfterExit=no&lt;br&gt;&lt;&nbsp;PIDFile=/var/run/squid.pid&lt;br&gt;&lt;&nbsp;SuccessExitStatus=5&nbsp;6&lt;br&gt;&lt;&nbsp;ExecStart=/etc/init.d/squid&nbsp;start&lt;br&gt;&lt;&nbsp;ExecStop=/etc/init.d/squid&nbsp;stop&lt;br&gt;&lt;&nbsp;ExecReload=/etc/init.d/squid&nbsp;reload&lt;br&gt;---&lt;br&gt;&gt;&lt;br&gt;&gt;&nbsp;[Install]&lt;br&gt;&gt;&nbsp;WantedBy=multi-user.target&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;do&nbsp;I&nbsp;just&nbsp;overwrite&nbsp;the <br>
&lt;span&nbsp;style=&quot;font-family:monospace,monospace&quot;&gt;squid.service&lt;/span&gt;<br>
<br>
of&nbsp;the&nbsp;system&nbsp;with&nbsp;the&nbsp;one&nbsp;shipped&nbsp;with&nbsp;squid?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanx,&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Alex&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;h5&quot;&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Thu,&nbsp;May&nbsp;10,&nbsp;2018&nbsp;at&nbsp;5:09&nbsp;AM,&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&nbsp;target=&quot;_blank&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;span&gt;On&nbsp;10/05/18&nbsp;11:53,&nbsp;Roberto&nbsp;Carna&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;Dear,&nbsp;I&nbsp;have&nbsp;Squid/Dansguardian&nbsp;in&nbsp;a&nbsp;Debian&nbsp;9&nbsp;server.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;My&nbsp;Squid&nbsp;packages&nbsp;is&nbsp;from&nbsp;Debian&nbsp;repo,&nbsp;it&nbsp;is&nbsp;the&nbsp;stable&nbsp;version:&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;squid &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3.5.23-5+deb9u1&lt;br&gt;<br>
&lt;/span&gt;...&lt;br&gt;<br>
&lt;span&gt;&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;But&nbsp;when&nbsp;I&nbsp;read&nbsp;I&nbsp;notice&nbsp;two&nbsp;curious&nbsp;lines:&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;systemd[1]:&nbsp;squid.service:&nbsp;PID&nbsp;file&nbsp;/var/run/squid.pid&nbsp;not&nbsp;readable&lt;br&gt;<br>
&gt;&nbsp;(yet?)&nbsp;after&nbsp;start:&nbsp;No&nbsp;such&nbsp;file&nbsp;or&nbsp;directory&lt;br&gt;<br>
&gt;&nbsp;systemd[1]:&nbsp;squid.service:&nbsp;Supervising&nbsp;process&nbsp;895&nbsp;which&nbsp;is&nbsp;not&nbsp;our&lt;br&gt;<br>
&gt;&nbsp;child.&nbsp;We&#39;ll&nbsp;most&nbsp;likely&nbsp;not&nbsp;notice&nbsp;when&nbsp;it&nbsp;exits.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;Is&nbsp;it&nbsp;normal&nbsp;or&nbsp;do&nbsp;I&nbsp;have&nbsp;to&nbsp;solve&nbsp;these?&nbsp;I&nbsp;repeat&nbsp;Squid&nbsp;is&nbsp;running&nbsp;OK...&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;systemd&nbsp;cannot&nbsp;cope&nbsp;with&nbsp;daemons&nbsp;like&nbsp;Squid-3.&nbsp;All&nbsp;you&nbsp;can&nbsp;do&nbsp;for&nbsp;now&nbsp;is&lt;br&gt;<br>
ensure&nbsp;that&nbsp;you&nbsp;use&nbsp;the&nbsp;init.d&nbsp;scripts&nbsp;to&nbsp;manage&nbsp;Squid.&nbsp;Do&nbsp;not&nbsp;use&nbsp;the&lt;br&gt;<br>
&quot;service&nbsp;...&quot;&nbsp;commands&nbsp;provided&nbsp;by&nbsp;systemd.&lt;br&gt;<br>
&lt;br&gt;<br>
Squid-4&nbsp;packages&nbsp;that&nbsp;resolve&nbsp;these&nbsp;issues&nbsp;are&nbsp;in&nbsp;Debian&nbsp;experimental&lt;br&gt;<br>
awaiting&nbsp;an&nbsp;official&nbsp;upstream&nbsp;stable&nbsp;release.&lt;br&gt;<br>
 NP:&nbsp;the&nbsp;major&nbsp;bugs&nbsp;preventing&nbsp;upstream&nbsp;stable&nbsp;are&nbsp;not&nbsp;affecting&nbsp;the&lt;br&gt;<br>
Debian&nbsp;package&nbsp;features.&nbsp;You&nbsp;can&nbsp;use&nbsp;the&nbsp;Squid-4&nbsp;package&nbsp;now&nbsp;if&nbsp;you&nbsp;wish&lt;br&gt;<br>
by&nbsp;adding&nbsp;that&nbsp;&quot;experimental&quot;&nbsp;repository&nbsp;to&nbsp;your&nbsp;apt&nbsp;sources.list,&lt;br&gt;<br>
update&nbsp;apt,&nbsp;then&nbsp;install/upgrade&nbsp;Squid&nbsp;with&nbsp;&quot;apt-get&nbsp;-t&nbsp;experimental&lt;br&gt;<br>
install&nbsp;squid&quot;.&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;m_5988062355989875360HOEnZb&quot;&gt;&lt;font&nbsp;color=&quot;#888888&quot;&gt;&lt;br&gt;<br>
Amos&lt;br&gt;<br>
&lt;/font&gt;&lt;/span&gt;&lt;div&nbsp;class=&quot;m_5988062355989875360HOEnZb&quot;&gt;&lt;div&nbsp;class=&quot;m_5988062355989875360h5&quot;&gt;______________________________&lt;wbr&gt;_________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.&lt;wbr&gt;org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/l&lt;wbr&gt;istinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
