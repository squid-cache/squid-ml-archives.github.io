<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Tue,&nbsp;Aug&nbsp;7,&nbsp;2018&nbsp;at&nbsp;11:26&nbsp;AM,&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&nbsp;target=&quot;_blank&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;span&nbsp;class=&quot;gmail-&quot;&gt;On&nbsp;07/08/18&nbsp;19:45,&nbsp;Alex&nbsp;K&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;Hi&nbsp;all,&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;observed&nbsp;the&nbsp;following&nbsp;warning&nbsp;at&nbsp;squid&nbsp;cache&nbsp;logs:&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;WARNING!&nbsp;Your&nbsp;cache&nbsp;is&nbsp;running&nbsp;out&nbsp;of&nbsp;filedescriptors&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;Googling&nbsp;around&nbsp;I&nbsp;tried&nbsp;to&nbsp;increase&nbsp;the&nbsp;default&nbsp;file&nbsp;descriptors&nbsp;of&nbsp;the&lt;br&gt;<br>
&gt;&nbsp;system&nbsp;(I&nbsp;am&nbsp;runnign&nbsp;Debian9&nbsp;x64&nbsp;bit),&nbsp;by&nbsp;setting&nbsp;at&nbsp;/etc/sysctl.conf:&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&lt;/span&gt;...&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;gmail-&quot;&gt;&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;am&nbsp;running&nbsp;a&nbsp;compiled&nbsp;version&nbsp;3.5.23.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;am&nbsp;not&nbsp;sure&nbsp;I&nbsp;have&nbsp;done&nbsp;the&nbsp;correct&nbsp;steps&nbsp;or&nbsp;if&nbsp;I&nbsp;need&nbsp;to&nbsp;tweak&nbsp;the&lt;br&gt;<br>
&gt;&nbsp;ulimits&nbsp;also.&lt;br&gt;<br>
&gt;&nbsp;Any&nbsp;experience&nbsp;from&nbsp;your&nbsp;side?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/span&gt;The&nbsp;init&nbsp;script&nbsp;installed&nbsp;with&nbsp;Squid&nbsp;3.x&nbsp;on&nbsp;Debian&nbsp;sets&nbsp;the&nbsp;limit&nbsp;to&nbsp;64K&lt;br&gt;<br>
file&nbsp;descriptors. &lt;/blockquote&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;<br>
&lt;br&gt;<br>
What&nbsp;is&nbsp;Squid&nbsp;startup&nbsp;logging&nbsp;for&nbsp;file&nbsp;descriptors&nbsp;available?&lt;br&gt;<br>
 Probably&nbsp;in&nbsp;the&nbsp;system&nbsp;/var/log/messages&nbsp;log,&nbsp;if&nbsp;not&nbsp;cache.log.&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;After&nbsp;having&nbsp;set&nbsp;the&nbsp;parameter&nbsp;at&nbsp;squid.conf&nbsp;I&nbsp;get:&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:monospace,monospace&quot;&gt;With&nbsp;65535&nbsp;file&nbsp;descriptors&nbsp;available&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Without&nbsp;settings&nbsp;it&nbsp;I&nbsp;get:&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:monospace,monospace&quot;&gt;With&nbsp;4096&nbsp;file&nbsp;descriptors&nbsp;available&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Which&nbsp;seems&nbsp;to&nbsp;be&nbsp;the&nbsp;value&nbsp;I&nbsp;have&nbsp;set&nbsp;at&nbsp;/etc/systemd/system.conf&nbsp;and&nbsp;/etc/systemd/user.conf:&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:monospace,monospace&quot;&gt;DefaultLimitNOFILE=4096&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Setting&nbsp;such&nbsp;values&nbsp;at&nbsp;/etc/security/limits.conf&nbsp;as&nbsp;below,&nbsp;doesn&#39;t&nbsp;seem&nbsp;to&nbsp;affect&nbsp;anything:&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:monospace,monospace&quot;&gt;proxy           &nbsp;soft   &nbsp;nofile         &nbsp;4096&lt;br&gt;proxy           &nbsp;hard   &nbsp;nofile         &nbsp;1048576&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Without&nbsp;settings&nbsp;any&nbsp;limits&nbsp;I&nbsp;get:&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:monospace,monospace&quot;&gt;With&nbsp;1024&nbsp;file&nbsp;descriptors&nbsp;available&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;which&nbsp;seems&nbsp;to&nbsp;be&nbsp;reflecting&nbsp;the&nbsp;default&nbsp;value&nbsp;reported&nbsp;from&nbsp;ulimit&nbsp;-a.&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;<br>
&lt;br&gt;<br>
Amos&lt;br&gt;<br>
______________________________&lt;wbr&gt;_________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.&lt;wbr&gt;org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/&lt;wbr&gt;listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
