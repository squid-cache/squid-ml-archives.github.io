<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;text=&quot;#000000&quot;&nbsp;bgcolor=&quot;#FFFFFF&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;Hello&nbsp;there.&nbsp;I&nbsp;have&nbsp;a&nbsp;transparent&nbsp;squid&nbsp;at&nbsp;my&nbsp;home&nbsp;to&nbsp;speed&nbsp;up<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;browsing&nbsp;by&nbsp;caching&nbsp;stuff. &nbsp;And&nbsp;it&nbsp;works&nbsp;well&nbsp;for&nbsp;HTTP.&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&nbsp;For&nbsp;HTTPS,&nbsp;I&nbsp;was&nbsp;only&nbsp;able&nbsp;to&nbsp;get&nbsp;it&nbsp;to&nbsp;&quot;peek&quot;&nbsp;and&nbsp;I'd&nbsp;like&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;able&nbsp;to&nbsp;bump&nbsp;the&nbsp;connections.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;I&nbsp;installed&nbsp;the&nbsp;server&nbsp;certificate&nbsp;on&nbsp;the&nbsp;client,&nbsp;but&nbsp;still,&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;browser&nbsp;(firefox)&nbsp;keeps&nbsp;complaining:&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;Your&nbsp;connection&nbsp;is&nbsp;not&nbsp;secure&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;owner&nbsp;of&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;http://www.facebook.com&quot;&gt;www.facebook.com&lt;/a&gt;&nbsp;has&nbsp;configured&nbsp;their&nbsp;website<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;improperly.&nbsp;To&nbsp;protect&nbsp;your&nbsp;information&nbsp;from&nbsp;being&nbsp;stolen,&nbsp;Firefox<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;has&nbsp;not&nbsp;connected&nbsp;to&nbsp;this&nbsp;website.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;site&nbsp;uses&nbsp;HTTP&nbsp;Strict&nbsp;Transport&nbsp;Security&nbsp;(HSTS)&nbsp;to&nbsp;specify<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;Firefox&nbsp;may&nbsp;only&nbsp;connect&nbsp;to&nbsp;it&nbsp;securely.&nbsp;As&nbsp;a&nbsp;result,&nbsp;it&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;possible&nbsp;to&nbsp;add&nbsp;an&nbsp;exception&nbsp;for&nbsp;this&nbsp;certificate.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Here&nbsp;is&nbsp;what&nbsp;I&nbsp;have:&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;serverIsBank&nbsp;is&nbsp;a&nbsp;list&nbsp;of&nbsp;domains&nbsp;that&nbsp;are&nbsp;banks&nbsp;essentially.&nbsp;They<br>
&nbsp;&nbsp;&nbsp;&nbsp;seem&nbsp;more&nbsp;picky.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;ssl_bump&nbsp;splice&nbsp;serverIsBank&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;ssl_bump&nbsp;peek&nbsp;all&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;ssl_bump&nbsp;bump&nbsp;all   &nbsp;#&nbsp;this&nbsp;does&nbsp;not&nbsp;work,&nbsp;it&nbsp;gives&nbsp;the&nbsp;error<br>
&nbsp;&nbsp;&nbsp;&nbsp;above..&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;https_port&nbsp;3129&nbsp;intercept&nbsp;ssl-bump&nbsp;\&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;       &nbsp;generate-host-certificates=on<br>
&nbsp;&nbsp;&nbsp;&nbsp;dynamic_cert_mem_cache_size=4MB&nbsp;\&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;       &nbsp;cert=/etc/squid/ssl_cert/tk2ca.pem<br>
&nbsp;&nbsp;&nbsp;&nbsp;key=/etc/squid/ssl_cert/tk2ca.pem&nbsp;\&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;      &nbsp;sslflags=NO_SESSION_REUSE&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;tls_outgoing_options&nbsp;cafile=/etc/pki/tls/certs/ca-bundle.crt&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;sslproxy_cert_adapt&nbsp;setCommonName&nbsp;ssl::certDomainMismatch&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;sslproxy_cert_error&nbsp;allow&nbsp;all&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;sslcrtd_program &nbsp;/usr/lib64/squid/security_file_certgen &nbsp;-s<br>
&nbsp;&nbsp;&nbsp;&nbsp;/var/lib/ssl_db&nbsp;-M&nbsp;$&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;sslcrtd_children&nbsp;50&nbsp;startup=5&nbsp;idle=5&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Thanks,&nbsp;-turgut<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
