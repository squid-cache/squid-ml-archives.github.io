<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;div&nbsp;class=&quot;ydp51a6497yahoo-style-wrap&quot;&nbsp;style=&quot;font-family:Helvetica&nbsp;Neue,&nbsp;Helvetica,&nbsp;Arial,&nbsp;sans-serif;font-size:13px;&quot;&gt;&lt;div&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Hello&nbsp;!&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thank&nbsp;you&nbsp;very&nbsp;much&nbsp;Alex&nbsp;and&nbsp;Amos&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;2&nbsp;real&nbsp;cores&nbsp;so&nbsp;it&nbsp;will&nbsp;be&nbsp;good.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;on&nbsp;&lt;a&nbsp;href=&quot;http://www.squid-cache.org/Doc/config/cache_dir/&quot;&nbsp;rel=&quot;nofollow&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.squid-cache.org/Doc/config/cache_dir/&lt;/a&gt;&nbsp;&nbsp;(a&lt;span&gt;vailable&nbsp;in:&nbsp;4&nbsp;&nbsp;&nbsp;3.5&nbsp;&nbsp;&nbsp;3.4&nbsp;&nbsp;&nbsp;3.3&nbsp;&nbsp;&nbsp;3.2&nbsp;&nbsp;&nbsp;2.7&nbsp;&nbsp;&nbsp;3.1&nbsp;&nbsp;&nbsp;3.0&nbsp;&nbsp;&nbsp;2.6)&nbsp;&nbsp;&lt;/span&gt;&nbsp;:&lt;/div&gt;&lt;div&gt;&lt;span&gt;&quot;In&nbsp;SMP&nbsp;configurations,&nbsp;cache_dir&nbsp;must&nbsp;not&nbsp;precede&nbsp;the&nbsp;workers&nbsp;option&nbsp;and&nbsp;should&nbsp;use&nbsp;configuration&nbsp;macros&nbsp;or&nbsp;conditionals&nbsp;to&nbsp;give&nbsp;each&nbsp;worker&nbsp;interested&nbsp;in&nbsp;disk&nbsp;caching&nbsp;a&nbsp;dedicated&nbsp;cache&nbsp;directory&quot;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Perhaps&nbsp;it&nbsp;would&nbsp;be&nbsp;good&nbsp;to&nbsp;specify&nbsp;for&nbsp;which&nbsp;version&nbsp;and&nbsp;which&nbsp;cache_dir&nbsp;type&nbsp;this&nbsp;note&nbsp;is&nbsp;for.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Best&nbsp;regards&nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;div&nbsp;id=&quot;yahoo_quoted_9675696877&quot;&nbsp;class=&quot;yahoo_quoted&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;style=&quot;font-family:'Helvetica&nbsp;Neue',&nbsp;Helvetica,&nbsp;Arial,&nbsp;sans-serif;font-size:13px;color:#26282a;&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Le&nbsp;mercredi&nbsp;10&nbsp;octobre&nbsp;2018&nbsp;à&nbsp;19:38:55&nbsp;UTC+2,&nbsp;Alex&nbsp;Rousskov&nbsp;&lt;rousskov@measurement-factory.com&gt;&nbsp;a&nbsp;écrit&nbsp;:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;On&nbsp;10/10/2018&nbsp;09:10&nbsp;AM,&nbsp;Amos&nbsp;Jeffries&nbsp;wrote:&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;On&nbsp;11/10/18&nbsp;3:01&nbsp;AM,&nbsp;juju&nbsp;wrote:&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&gt;&nbsp;Hello,&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&gt;&nbsp;Sorry&nbsp;if&nbsp;this&nbsp;question&nbsp;has&nbsp;already&nbsp;been&nbsp;posted&nbsp;(&nbsp;I&nbsp;can't&nbsp;check&nbsp;as&nbsp;the&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&gt;&nbsp;&quot;Search&nbsp;Function&quot;&nbsp;is&nbsp;currently&nbsp;not&nbsp;working&nbsp;)&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&gt;&nbsp;I'm&nbsp;running&nbsp;squid-3.5.20&nbsp;on&nbsp;Amazon&nbsp;Linux&nbsp;2018.03.&nbsp;2&nbsp;cores&nbsp;with&nbsp;8&nbsp;GB&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&gt;&nbsp;My&nbsp;squid&nbsp;is&nbsp;currently&nbsp;working&nbsp;but&nbsp;only&nbsp;on&nbsp;1&nbsp;core.&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&gt;&nbsp;I&nbsp;which&nbsp;to&nbsp;use&nbsp;the&nbsp;2&nbsp;cores.&nbsp;I&nbsp;understood&nbsp;that&nbsp;I&nbsp;have&nbsp;to&nbsp;use&nbsp;workers&nbsp;in&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&gt;&nbsp;squid.conf&nbsp;with&nbsp;separate&nbsp;cache&nbsp;directory.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;This&nbsp;is&nbsp;not&nbsp;quite&nbsp;correct.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;Per-worker&nbsp;configuration&nbsp;is&nbsp;only&nbsp;required&nbsp;for&nbsp;features&nbsp;which&nbsp;are&nbsp;not&nbsp;yet&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;SMP-aware.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;Just&nbsp;a&nbsp;couple&nbsp;of&nbsp;additional&nbsp;clarifications,&nbsp;not&nbsp;contradicting&nbsp;what&nbsp;Amos&lt;br&nbsp;clear=&quot;none&quot;&gt;has&nbsp;said:&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;The&nbsp;rock&nbsp;cache&nbsp;type&nbsp;*is*&nbsp;SMP-aware,&nbsp;so&nbsp;one&nbsp;directory&nbsp;can&nbsp;be&nbsp;shared&nbsp;by&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;workers.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&quot;can&nbsp;be&quot;&nbsp;and&nbsp;&quot;must&nbsp;be&quot;.&nbsp;We&nbsp;do&nbsp;not&nbsp;support&nbsp;worker-specific&nbsp;cache_dirs.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;In&nbsp;case&nbsp;of&nbsp;rock&nbsp;cache_dirs,&nbsp;I&nbsp;do&nbsp;not&nbsp;know&nbsp;for&nbsp;sure&nbsp;what&nbsp;would&nbsp;happen&nbsp;if&lt;br&nbsp;clear=&quot;none&quot;&gt;cache_dirs&nbsp;are&nbsp;configured&nbsp;on&nbsp;a&nbsp;per-worker&nbsp;basis,&nbsp;but&nbsp;I&nbsp;suspect&nbsp;that&lt;br&nbsp;clear=&quot;none&quot;&gt;there&nbsp;will&nbsp;be&nbsp;no&nbsp;disker&nbsp;processes&nbsp;to&nbsp;serve&nbsp;them.&nbsp;At&nbsp;best,&nbsp;you&nbsp;will&nbsp;get&lt;br&nbsp;clear=&quot;none&quot;&gt;no&nbsp;disk&nbsp;caching&nbsp;at&nbsp;all.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;The&nbsp;UFS/AUFS/diskd&nbsp;cache&nbsp;types&nbsp;are&nbsp;not&nbsp;SMP-aware&nbsp;yet,&nbsp;so&nbsp;they&nbsp;do&nbsp;need&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;separate&nbsp;directories&nbsp;per-worker&nbsp;currently.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;...&nbsp;but&nbsp;worker-specific&nbsp;cache_dirs&nbsp;are&nbsp;not&nbsp;supported,&nbsp;will&nbsp;violate&nbsp;HTTP&lt;br&nbsp;clear=&quot;none&quot;&gt;rules,&nbsp;etc.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;Since&nbsp;you&nbsp;are&nbsp;using&nbsp;only&nbsp;rock&nbsp;type&nbsp;caches&nbsp;you&nbsp;do&nbsp;not&nbsp;have&nbsp;to&nbsp;do&nbsp;anything&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;special&nbsp;for&nbsp;SMP&nbsp;to&nbsp;work.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;...&nbsp;with&nbsp;your&nbsp;simple&nbsp;configuration&nbsp;that&nbsp;does&nbsp;not&nbsp;use&nbsp;SMP-unaware&nbsp;features.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;In&nbsp;fact,&nbsp;with&nbsp;rock&nbsp;cache_dirs,&nbsp;you&nbsp;do&nbsp;not&nbsp;even&nbsp;have&nbsp;to&nbsp;specify&nbsp;multiple&lt;br&nbsp;clear=&quot;none&quot;&gt;workers&nbsp;to&nbsp;get&nbsp;SMP&nbsp;Squid&nbsp;--&nbsp;by&nbsp;default,&nbsp;Squid&nbsp;will&nbsp;run&nbsp;in&nbsp;SMP&nbsp;mode&nbsp;if&lt;br&nbsp;clear=&quot;none&quot;&gt;you&nbsp;have&nbsp;one&nbsp;worker&nbsp;(default)&nbsp;and&nbsp;at&nbsp;least&nbsp;one&nbsp;rock&nbsp;cache_dir.&nbsp;However,&lt;br&nbsp;clear=&quot;none&quot;&gt;multiple&nbsp;workers&nbsp;may&nbsp;be&nbsp;necessary&nbsp;to&nbsp;better&nbsp;utilize&nbsp;multicore&nbsp;CPUs.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;Beware&nbsp;of&nbsp;hyperthreading:&nbsp;Do&nbsp;not&nbsp;expect&nbsp;two&nbsp;workers,&nbsp;each&nbsp;showing&nbsp;80+%&lt;br&nbsp;clear=&quot;none&quot;&gt;CPU&nbsp;utilization&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;share&nbsp;a&nbsp;single&nbsp;physical&nbsp;CPU&nbsp;core&lt;br&nbsp;clear=&quot;none&quot;&gt;efficiently.&nbsp;I&nbsp;do&nbsp;not&nbsp;know&nbsp;whether&nbsp;your&nbsp;two&nbsp;cores&nbsp;are&nbsp;hyperthreaded&nbsp;or&nbsp;real.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;N.B.&nbsp;To&nbsp;search&nbsp;the&nbsp;mailing&nbsp;list&nbsp;archives,&nbsp;consider&nbsp;using&nbsp;your&nbsp;favorite&lt;br&nbsp;clear=&quot;none&quot;&gt;search&nbsp;engine.&nbsp;Many&nbsp;would&nbsp;accept&nbsp;a&nbsp;site:lists.squid-cache.org&nbsp;restriction.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;Alex.&lt;div&nbsp;class=&quot;yqt5642172020&quot;&nbsp;id=&quot;yqtfd50807&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;_______________________________________________&lt;br&nbsp;clear=&quot;none&quot;&gt;squid-users&nbsp;mailing&nbsp;list&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;a&nbsp;shape=&quot;rect&quot;&nbsp;ymailto=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;a&nbsp;shape=&quot;rect&quot;&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
