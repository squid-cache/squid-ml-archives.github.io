<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;I&nbsp;think&nbsp;I&nbsp;know&nbsp;what&nbsp;the&nbsp;issue&nbsp;is&nbsp;which&nbsp;can&nbsp;give&nbsp;us&nbsp;a&nbsp;clue&nbsp;to&nbsp;what&nbsp;is&nbsp;going&nbsp;on.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;blockquote&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;40px;border:none;padding:0px&quot;&gt;&lt;div&gt;&lt;div&nbsp;style=&quot;font-size:small;background-color:rgb(255,255,255);text-decoration-style:initial;text-decoration-color:initial&quot;&gt;&lt;font&nbsp;size=&quot;1&quot;&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&gt;2018/10/15&nbsp;15:05:45.083&nbsp;kid1|&nbsp;RegexData.cc(71)&nbsp;match:&nbsp;aclRegexData::match:&nbsp;checking&nbsp;&#39;&lt;a&nbsp;href=&quot;http://wiki.squid-cache.org:443/&quot;&nbsp;target=&quot;_blank&quot;&nbsp;style=&quot;color:rgb(17,85,204)&quot;&gt;wiki.squid-cache.org:443&lt;/a&gt;&#39;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:small;background-color:rgb(255,255,255);text-decoration-style:initial;text-decoration-color:initial&quot;&gt;&lt;font&nbsp;size=&quot;1&quot;&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&gt;2018/10/15&nbsp;15:05:45.084&nbsp;kid1|&nbsp;RegexData.cc(82)&nbsp;match:&nbsp;aclRegexData::match:&nbsp;looking&nbsp;for&nbsp;&#39;(^&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/SquidFaq/SquidAcl.*)%7C(squid-cache.org/SquidFaq/SquidAcl.*&quot;&nbsp;target=&quot;_blank&quot;&nbsp;style=&quot;color:rgb(17,85,204)&quot;&gt;https://wiki.squid-cache.org/SquidFaq/SquidAcl.*)|(squid-cache.org/SquidFaq/SquidAcl.*&lt;/a&gt;)&#39;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:small;background-color:rgb(255,255,255);text-decoration-style:initial;text-decoration-color:initial&quot;&gt;&lt;font&nbsp;size=&quot;1&quot;&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&gt;2018/10/15&nbsp;15:05:45.084&nbsp;kid1|&nbsp;Acl.cc(321)&nbsp;checklistMatches:&nbsp;ACL::ChecklistMatches:&nbsp;result&nbsp;for&nbsp;&#39;whitelist&#39;&nbsp;is&nbsp;0&lt;/font&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;above&nbsp;seems&nbsp;to&nbsp;be&nbsp;applying&nbsp;the&nbsp;regex&nbsp;to&nbsp;&quot;&lt;a&nbsp;href=&quot;http://wiki.squid-cache.org:443&quot;&gt;wiki.squid-cache.org:443&lt;/a&gt;&quot;&nbsp;instead&nbsp;of&nbsp;to&nbsp;&quot;&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/SquidFaq/SquidAcl&quot;&gt;https://wiki.squid-cache.org/SquidFaq/SquidAcl&lt;/a&gt;&quot;.&nbsp;I&nbsp;added&nbsp;the&nbsp;regex&nbsp;&quot;.*squid-cache.org.*&quot;&nbsp;to&nbsp;my&nbsp;list&nbsp;of&nbsp;regular&nbsp;expressions&nbsp;and&nbsp;now&nbsp;I&nbsp;see&nbsp;this.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;blockquote&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;40px;border:none;padding:0px&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&nbsp;size=&quot;1&quot;&gt;2018/10/15&nbsp;15:16:03.641&nbsp;kid1|&nbsp;RegexData.cc(71)&nbsp;match:&nbsp;aclRegexData::match:&nbsp;checking&nbsp;&#39;&lt;a&nbsp;href=&quot;http://wiki.squid-cache.org:443&quot;&gt;wiki.squid-cache.org:443&lt;/a&gt;&#39;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&nbsp;size=&quot;1&quot;&gt;2018/10/15&nbsp;15:16:03.641&nbsp;kid1|&nbsp;RegexData.cc(82)&nbsp;match:&nbsp;aclRegexData::match:&nbsp;looking&nbsp;for&nbsp;&#39;(^https?://[^/]+/&lt;a&nbsp;href=&quot;http://wiki.squid-cache.org/SquidFaq/SquidAcl.*)|(squid-cache.org.*&quot;&gt;wiki.squid-cache.org/SquidFaq/SquidAcl.*)|(squid-cache.org.*&lt;/a&gt;)&#39;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&nbsp;size=&quot;1&quot;&gt;2018/10/15&nbsp;15:16:03.641&nbsp;kid1|&nbsp;RegexData.cc(93)&nbsp;match:&nbsp;aclRegexData::match:&nbsp;match&nbsp;&#39;(^https?://[^/]+/&lt;a&nbsp;href=&quot;http://wiki.squid-cache.org/SquidFaq/SquidAcl.*)|(squid-cache.org.*&quot;&gt;wiki.squid-cache.org/SquidFaq/SquidAcl.*)|(squid-cache.org.*&lt;/a&gt;)&#39;&nbsp;found&nbsp;in&nbsp;&#39;&lt;a&nbsp;href=&quot;http://wiki.squid-cache.org:443&quot;&gt;wiki.squid-cache.org:443&lt;/a&gt;&#39;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&nbsp;size=&quot;1&quot;&gt;2018/10/15&nbsp;15:16:03.641&nbsp;kid1|&nbsp;Acl.cc(321)&nbsp;checklistMatches:&nbsp;ACL::ChecklistMatches:&nbsp;result&nbsp;for&nbsp;&#39;whitelist&#39;&nbsp;is&nbsp;1&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any&nbsp;idea&nbsp;why&nbsp;url_regex&nbsp;wouldn&#39;t&nbsp;try&nbsp;to&nbsp;match&nbsp;the&nbsp;full&nbsp;url&nbsp;and&nbsp;instead&nbsp;only&nbsp;matches&nbsp;on&nbsp;the&nbsp;subdomain,&nbsp;host&nbsp;domain,&nbsp;and&nbsp;port?Â &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/SquidFaq/SquidAcl&quot;&gt;Squid&nbsp;FAQ&lt;/a&gt;&nbsp;says&nbsp;the&nbsp;following:&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;blockquote&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;40px;border:none;padding:0px&quot;&gt;&lt;div&gt;&lt;div&nbsp;style=&quot;font-size:small;background-color:rgb(255,255,255);text-decoration-style:initial;text-decoration-color:initial&quot;&gt;&lt;strong&nbsp;style=&quot;color:rgb(0,0,0);font-family:Arial,&quot;Lucida&nbsp;Grande&quot;,sans-serif;font-size:13.6px;text-align:left;background-color:rgb(255,255,255);text-decoration-style:initial;text-decoration-color:initial&quot;&gt;url_regex&lt;/strong&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);font-family:Arial,&quot;Lucida&nbsp;Grande&quot;,sans-serif;font-size:13.6px;text-align:left;background-color:rgb(255,255,255);text-decoration-style:initial;text-decoration-color:initial;float:none;display:inline&quot;&gt;:&nbsp;URL&nbsp;regular&nbsp;expression&nbsp;pattern&nbsp;matching&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;font-size:small;background-color:rgb(255,255,255);text-decoration-style:initial;text-decoration-color:initial&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);font-family:Arial,&quot;Lucida&nbsp;Grande&quot;,sans-serif;font-size:13.6px;text-align:left;background-color:rgb(255,255,255);text-decoration-style:initial;text-decoration-color:initial;float:none;display:inline&quot;&gt;&lt;strong&nbsp;style=&quot;text-decoration-style:initial;text-decoration-color:initial&quot;&gt;urlpath_regex&lt;/strong&gt;&lt;span&nbsp;style=&quot;text-decoration-style:initial;text-decoration-color:initial;float:none;display:inline&quot;&gt;:&nbsp;URL-path&nbsp;regular&nbsp;expression&nbsp;pattern&nbsp;matching,&nbsp;leaves&nbsp;out&nbsp;the&nbsp;protocol&nbsp;and&nbsp;hostname&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;with&nbsp;this&nbsp;example&nbsp;given&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;blockquote&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;40px;border:none;padding:0px&quot;&gt;&lt;div&gt;acl&nbsp;special_url&nbsp;url_regex&nbsp;^&lt;a&nbsp;href=&quot;http://www.squid-cache.org/Doc/FAQ/$&quot;&gt;http://www.squid-cache.org/Doc/FAQ/$&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;seems&nbsp;to&nbsp;be&nbsp;the&nbsp;case&nbsp;between&nbsp;3.3.8&nbsp;(default&nbsp;on&nbsp;ubuntu&nbsp;14.04)&nbsp;and&nbsp;3.5.12&nbsp;(default&nbsp;on&nbsp;ubuntu&nbsp;16.04).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Is&nbsp;there&nbsp;another&nbsp;configuration&nbsp;that&nbsp;forces&nbsp;url_regex&nbsp;to&nbsp;match&nbsp;the&nbsp;entire&nbsp;url?&nbsp;or&nbsp;should&nbsp;I&nbsp;use&nbsp;a&nbsp;different&nbsp;acl&nbsp;type?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Best,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;On&nbsp;Mon,&nbsp;Oct&nbsp;15,&nbsp;2018&nbsp;at&nbsp;11:11&nbsp;AM&nbsp;RB&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:ronthecon@gmail.com&quot;&gt;ronthecon@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hi&nbsp;Matus,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;for&nbsp;responding&nbsp;so&nbsp;quickly.&nbsp;I&nbsp;uploaded&nbsp;my&nbsp;configurations&nbsp;here&nbsp;if&nbsp;that&nbsp;is&nbsp;more&nbsp;helpful:&nbsp;&lt;a&nbsp;href=&quot;https://bit.ly/2NF4zNb&quot;&nbsp;target=&quot;_blank&quot;&gt;https://bit.ly/2NF4zNb&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;config&nbsp;that&nbsp;I&nbsp;previously&nbsp;shared&nbsp;is&nbsp;called&nbsp;squid_corp.conf.&nbsp;I&nbsp;also&nbsp;noticed&nbsp;that&nbsp;if&nbsp;I&nbsp;don&#39;t&nbsp;use&nbsp;regular&nbsp;expressions&nbsp;and&nbsp;instead&nbsp;use&nbsp;domains,&nbsp;it&nbsp;works&nbsp;correctly:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;blockquote&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;40px;border:none;padding:0px&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#24292e&quot;&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&nbsp;size=&quot;1&quot;&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;#&nbsp;acl&nbsp;whitelist&nbsp;url_regex&nbsp;&quot;/vagrant/squid_sites.txt&quot;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;color:rgb(36,41,46);white-space:pre-wrap;background-color:rgb(255,255,255);text-decoration-style:initial;text-decoration-color:initial;float:none;display:inline&quot;&gt;&lt;span&nbsp;style=&quot;text-decoration-style:initial;text-decoration-color:initial;float:none;display:inline&quot;&gt;&lt;font&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&nbsp;size=&quot;1&quot;&gt;acl&nbsp;whitelist&nbsp;url_regex&nbsp;.&lt;a&nbsp;href=&quot;http://squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-cache.org&lt;/a&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;style=&quot;font-size:small;background-color:rgb(255,255,255);text-decoration-style:initial;text-decoration-color:initial&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Every&nbsp;time&nbsp;my&nbsp;squid.conf&nbsp;or&nbsp;my&nbsp;squid_sites.txt&nbsp;is&nbsp;modified,&nbsp;I&nbsp;restart&nbsp;the&nbsp;squid&nbsp;service&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;blockquote&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;40px;border:none;padding:0px&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;style=&quot;background-color:rgb(255,255,255);text-decoration-style:initial;text-decoration-color:initial&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&nbsp;size=&quot;1&quot;&gt;sudo&nbsp;service&nbsp;squid3&nbsp;restart&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;style=&quot;font-size:small;background-color:rgb(255,255,255);text-decoration-style:initial;text-decoration-color:initial&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Then&nbsp;I&nbsp;use&nbsp;curl&nbsp;to&nbsp;test&nbsp;and&nbsp;now&nbsp;the&nbsp;url&nbsp;works.Â &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;blockquote&nbsp;style=&quot;background-color:rgb(255,255,255);text-decoration-style:initial;text-decoration-color:initial;margin:0px&nbsp;0px&nbsp;0px&nbsp;40px;border:none;padding:0px&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;style=&quot;font-size:small&quot;&gt;&lt;font&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&nbsp;size=&quot;1&quot;&nbsp;color=&quot;#000000&quot;&nbsp;style=&quot;background-color:rgb(255,255,255)&quot;&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap;float:none;display:inline&quot;&gt;$&nbsp;curl&nbsp;-sSL&nbsp;--proxy&nbsp;localhost:3128&nbsp;-D&nbsp;-&nbsp;&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/SquidFaq/SquidAcl&quot;&nbsp;target=&quot;_blank&quot;&gt;https://wiki.squid-cache.org/SquidFaq/SquidAcl&lt;/a&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap;float:none;display:inline&quot;&gt;&nbsp;-o&nbsp;/dev/null&nbsp;&lt;/span&gt;&lt;span&nbsp;class=&quot;gmail-m_51934750093289444gmail-pl-k&quot;&nbsp;style=&quot;box-sizing:border-box;white-space:pre-wrap&quot;&gt;2&gt;&amp;1&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;style=&quot;background-color:rgb(255,255,255)&quot;&nbsp;color=&quot;#000000&quot;&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&nbsp;size=&quot;1&quot;&gt;&lt;span&nbsp;class=&quot;gmail-m_51934750093289444gmail-pl-k&quot;&nbsp;style=&quot;box-sizing:border-box;white-space:pre-wrap&quot;&gt;&lt;div&gt;HTTP/1.1&nbsp;200&nbsp;Connection&nbsp;established&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;HTTP/1.1&nbsp;200&nbsp;OK&lt;/div&gt;&lt;div&gt;Date:&nbsp;Mon,&nbsp;15&nbsp;Oct&nbsp;2018&nbsp;14:47:33&nbsp;GMT&lt;/div&gt;&lt;div&gt;Server:&nbsp;Apache/2.4.7&nbsp;(Ubuntu)&lt;/div&gt;&lt;div&gt;Vary:&nbsp;Cookie,User-Agent,Accept-Encoding&lt;/div&gt;&lt;div&gt;Content-Length:&nbsp;101912&lt;/div&gt;&lt;div&gt;Cache-Control:&nbsp;max-age=3600&lt;/div&gt;&lt;div&gt;Expires:&nbsp;Mon,&nbsp;15&nbsp;Oct&nbsp;2018&nbsp;15:47:33&nbsp;GMT&lt;/div&gt;&lt;div&gt;Content-Type:&nbsp;text/html;&nbsp;charset=utf-8&lt;/div&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;But&nbsp;this&nbsp;does&nbsp;not&nbsp;allow&nbsp;me&nbsp;to&nbsp;get&nbsp;more&nbsp;granular.&nbsp;I&nbsp;can&nbsp;only&nbsp;allow&nbsp;all&nbsp;subdomains&nbsp;and&nbsp;paths&nbsp;for&nbsp;the&nbsp;domain&nbsp;&lt;a&nbsp;href=&quot;http://squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-cache.org&lt;/a&gt;&nbsp;but&nbsp;I&#39;m&nbsp;unable&nbsp;to&nbsp;only&nbsp;allow&nbsp;the&nbsp;regular&nbsp;expressions&nbsp;if&nbsp;I&nbsp;put&nbsp;them&nbsp;inline&nbsp;or&nbsp;put&nbsp;them&nbsp;in&nbsp;squid_sites.txt.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;blockquote&nbsp;style=&quot;background-color:rgb(255,255,255);text-decoration-style:initial;text-decoration-color:initial;margin:0px&nbsp;0px&nbsp;0px&nbsp;40px;border:none;padding:0px&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#24292e&quot;&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&lt;font&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&nbsp;size=&quot;1&quot;&gt;#&nbsp;acl&nbsp;whitelist&nbsp;url_regex&nbsp;&quot;/vagrant/squid_sites.txt&quot;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;color:rgb(36,41,46);white-space:pre-wrap;background-color:rgb(255,255,255);text-decoration-style:initial;text-decoration-color:initial;float:none;display:inline&quot;&gt;&lt;span&nbsp;style=&quot;text-decoration-style:initial;text-decoration-color:initial;float:none;display:inline&quot;&gt;&lt;font&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&nbsp;size=&quot;1&quot;&gt;acl&nbsp;whitelist&nbsp;url_regex&nbsp;&lt;span&nbsp;style=&quot;color:rgb(34,34,34);white-space:normal;background-color:rgb(255,255,255);text-decoration-style:initial;text-decoration-color:initial;float:none;display:inline&quot;&gt;^&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/SquidFaq/SquidAcl.*&quot;&nbsp;target=&quot;_blank&quot;&gt;https://wiki.squid-cache.org/SquidFaq/SquidAcl.*&lt;/a&gt;&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;color:rgb(36,41,46);white-space:pre-wrap;background-color:rgb(255,255,255);text-decoration-style:initial;text-decoration-color:initial;float:none;display:inline&quot;&gt;&lt;span&nbsp;style=&quot;text-decoration-style:initial;text-decoration-color:initial;float:none;display:inline&quot;&gt;&lt;span&nbsp;style=&quot;background-color:rgb(255,255,255);text-decoration-style:initial;text-decoration-color:initial;float:none;display:inline&quot;&gt;&lt;font&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&nbsp;size=&quot;1&quot;&gt;acl&nbsp;whitelist&nbsp;url_regex&nbsp;&lt;span&nbsp;style=&quot;color:rgb(34,34,34);white-space:normal;text-decoration-style:initial;text-decoration-color:initial;float:none;display:inline&quot;&gt;.*&lt;a&nbsp;href=&quot;http://squid-cache.org/SquidFaq/SquidAcl.*&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-cache.org/SquidFaq/SquidAcl.*&lt;/a&gt;&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;I&nbsp;put&nbsp;them&nbsp;inline&nbsp;like&nbsp;I&nbsp;have&nbsp;above,&nbsp;when&nbsp;I&nbsp;restarted&nbsp;squid&nbsp;it&nbsp;says&nbsp;the&nbsp;following&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;blockquote&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;40px;border:none;padding:0px&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;font&nbsp;size=&quot;1&quot;&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&gt;2018/10/15&nbsp;14:54:48&nbsp;kid1|&nbsp;strtokFile:&nbsp;.*&lt;a&nbsp;href=&quot;http://squid-cache.org/SquidFaq/SquidAcl.*&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-cache.org/SquidFaq/SquidAcl.*&lt;/a&gt;&nbsp;not&nbsp;found&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;I&nbsp;put&nbsp;the&nbsp;expressions&nbsp;in&nbsp;the&nbsp;squid_sites.txt&nbsp;the&nbsp;above&nbsp;&quot;not&nbsp;found&quot;&nbsp;message&nbsp;isn&#39;t&nbsp;shown&nbsp;and&nbsp;this&nbsp;is&nbsp;the&nbsp;debug&nbsp;output&nbsp;in&nbsp;/var/log/squid3/cache.log&nbsp;(full&nbsp;outputÂ &lt;a&nbsp;href=&quot;https://pastebin.com/NVwRxVmQ&quot;&nbsp;target=&quot;_blank&quot;&gt;https://pastebin.com/NVwRxVmQ&lt;/a&gt;).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;blockquote&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;40px;border:none;padding:0px&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;size=&quot;1&quot;&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&gt;2018/10/15&nbsp;15:05:45.083&nbsp;kid1|&nbsp;Checklist.cc(275)&nbsp;matchNode:&nbsp;0x7fb0068da2b8&nbsp;matched=1&nbsp;async=0&nbsp;finished=0&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;size=&quot;1&quot;&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&gt;2018/10/15&nbsp;15:05:45.083&nbsp;kid1|&nbsp;Acl.cc(336)&nbsp;matches:&nbsp;ACLList::matches:&nbsp;checking&nbsp;whitelist&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;size=&quot;1&quot;&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&gt;2018/10/15&nbsp;15:05:45.083&nbsp;kid1|&nbsp;Acl.cc(319)&nbsp;checklistMatches:&nbsp;ACL::checklistMatches:&nbsp;checking&nbsp;&#39;whitelist&#39;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;size=&quot;1&quot;&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&gt;2018/10/15&nbsp;15:05:45.083&nbsp;kid1|&nbsp;RegexData.cc(71)&nbsp;match:&nbsp;aclRegexData::match:&nbsp;checking&nbsp;&#39;&lt;a&nbsp;href=&quot;http://wiki.squid-cache.org:443&quot;&nbsp;target=&quot;_blank&quot;&gt;wiki.squid-cache.org:443&lt;/a&gt;&#39;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;size=&quot;1&quot;&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&gt;2018/10/15&nbsp;15:05:45.084&nbsp;kid1|&nbsp;RegexData.cc(82)&nbsp;match:&nbsp;aclRegexData::match:&nbsp;looking&nbsp;for&nbsp;&#39;(^&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/SquidFaq/SquidAcl.*)%7C(squid-cache.org/SquidFaq/SquidAcl.*&quot;&nbsp;target=&quot;_blank&quot;&gt;https://wiki.squid-cache.org/SquidFaq/SquidAcl.*)|(squid-cache.org/SquidFaq/SquidAcl.*&lt;/a&gt;)&#39;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;size=&quot;1&quot;&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&gt;2018/10/15&nbsp;15:05:45.084&nbsp;kid1|&nbsp;Acl.cc(321)&nbsp;checklistMatches:&nbsp;ACL::ChecklistMatches:&nbsp;result&nbsp;for&nbsp;&#39;whitelist&#39;&nbsp;is&nbsp;0&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;size=&quot;1&quot;&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&gt;2018/10/15&nbsp;15:05:45.084&nbsp;kid1|&nbsp;Acl.cc(349)&nbsp;matches:&nbsp;whitelist&nbsp;mismatched.&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;size=&quot;1&quot;&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&gt;2018/10/15&nbsp;15:05:45.084&nbsp;kid1|&nbsp;Acl.cc(354)&nbsp;matches:&nbsp;whitelist&nbsp;result&nbsp;is&nbsp;false&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;it&#39;s&nbsp;failing&nbsp;the&nbsp;regular&nbsp;expression&nbsp;check.&nbsp;If&nbsp;I&nbsp;use&nbsp;grep&nbsp;to&nbsp;verify&nbsp;if&nbsp;the&nbsp;regex&nbsp;works,&nbsp;it&nbsp;does.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;blockquote&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;40px;border:none;padding:0px&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&nbsp;size=&quot;1&quot;&gt;$&nbsp;echo&nbsp;&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/SquidFaq/SquidAcl&quot;&nbsp;target=&quot;_blank&quot;&gt;https://wiki.squid-cache.org/SquidFaq/SquidAcl&lt;/a&gt;&nbsp;|&nbsp;grep&nbsp;&quot;^&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/SquidFaq/SquidAcl.*&quot;&nbsp;target=&quot;_blank&quot;&gt;https://wiki.squid-cache.org/SquidFaq/SquidAcl.*&lt;/a&gt;&quot;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;monospace,&nbsp;monospace&quot;&nbsp;size=&quot;1&quot;&gt;&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/SquidFaq/SquidAcl&quot;&nbsp;target=&quot;_blank&quot;&gt;https://wiki.squid-cache.org/SquidFaq/SquidAcl&lt;/a&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:small;background-color:rgb(255,255,255);text-decoration-style:initial;text-decoration-color:initial;float:none;display:inline&quot;&gt;&gt;&nbsp;are&nbsp;you&nbsp;aware&nbsp;that&nbsp;you&nbsp;can&nbsp;only&nbsp;see&nbsp;CONNECT&nbsp;in&nbsp;https&nbsp;requests,&nbsp;unless&nbsp;using&lt;/span&gt;&lt;br&nbsp;style=&quot;font-size:small;background-color:rgb(255,255,255);text-decoration-style:initial;text-decoration-color:initial&quot;&gt;&lt;span&nbsp;style=&quot;font-size:small;background-color:rgb(255,255,255);text-decoration-style:initial;text-decoration-color:initial;float:none;display:inline&quot;&gt;ssl_bump?&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Ah&nbsp;interesting.&nbsp;Are&nbsp;you&nbsp;saying&nbsp;that&nbsp;my&nbsp;https&nbsp;connections&nbsp;will&nbsp;always&nbsp;fail&nbsp;unless&nbsp;I&nbsp;use&nbsp;ssl_bump&nbsp;to&nbsp;decrypt&nbsp;https&nbsp;to&nbsp;http&nbsp;connections?&nbsp;How&nbsp;would&nbsp;this&nbsp;work&nbsp;correctly&nbsp;in&nbsp;production?&nbsp;Does&nbsp;squid&nbsp;proxy&nbsp;only&nbsp;block&nbsp;urls&nbsp;if&nbsp;it&nbsp;detects&nbsp;http?&nbsp;How&nbsp;do&nbsp;you&nbsp;configure&nbsp;ssl_bump&nbsp;to&nbsp;work&nbsp;in&nbsp;this&nbsp;case?&nbsp;and&nbsp;is&nbsp;that&nbsp;viable&nbsp;in&nbsp;production?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:small;background-color:rgb(255,255,255);text-decoration-style:initial;text-decoration-color:initial;float:none;display:inline&quot;&gt;&gt;&nbsp;of&nbsp;course&nbsp;it&nbsp;matches&nbsp;all,&nbsp;everything&nbsp;should&nbsp;match&nbsp;&quot;all&quot;.&lt;/span&gt;&lt;br&nbsp;style=&quot;font-size:small;background-color:rgb(255,255,255);text-decoration-style:initial;text-decoration-color:initial&quot;&gt;&lt;span&nbsp;style=&quot;font-size:small;background-color:rgb(255,255,255);text-decoration-style:initial;text-decoration-color:initial;float:none;display:inline&quot;&gt;&gt;&nbsp;I&nbsp;more&nbsp;wonder&nbsp;why&nbsp;doesn&#39;t&nbsp;it&nbsp;match&nbsp;&quot;http_access&nbsp;allow&nbsp;localhost&quot;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&gt;Â &lt;span&nbsp;style=&quot;font-size:small;background-color:rgb(255,255,255);text-decoration-style:initial;text-decoration-color:initial;float:none;display:inline&quot;&gt;have&nbsp;you&nbsp;reloaded&nbsp;squid&nbsp;config&nbsp;after&nbsp;changing&nbsp;it?&lt;/span&gt;&lt;br&nbsp;style=&quot;font-size:small;background-color:rgb(255,255,255);text-decoration-style:initial;text-decoration-color:initial&quot;&gt;&lt;span&nbsp;style=&quot;font-size:small;background-color:rgb(255,255,255);text-decoration-style:initial;text-decoration-color:initial;float:none;display:inline&quot;&gt;&gt;&nbsp;Did&nbsp;squid&nbsp;confirm&nbsp;it?&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Would&nbsp;you&nbsp;have&nbsp;an&nbsp;example&nbsp;of&nbsp;one&nbsp;entire&nbsp;config&nbsp;file&nbsp;that&nbsp;would&nbsp;work&nbsp;to&nbsp;whitelist&nbsp;an&nbsp;http/https&nbsp;url&nbsp;using&nbsp;a&nbsp;regular&nbsp;expression?&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Best,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;On&nbsp;Mon,&nbsp;Oct&nbsp;15,&nbsp;2018&nbsp;at&nbsp;4:49&nbsp;AM&nbsp;Matus&nbsp;UHLAR&nbsp;-&nbsp;fantomas&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:uhlar@fantomas.sk&quot;&nbsp;target=&quot;_blank&quot;&gt;uhlar@fantomas.sk&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;KOn&nbsp;15.10.18&nbsp;01:04,&nbsp;RB&nbsp;wrote:&lt;br&gt;<br>
&gt;I&#39;m&nbsp;trying&nbsp;to&nbsp;deny&nbsp;all&nbsp;urls&nbsp;except&nbsp;for&nbsp;only&nbsp;whitelisted&nbsp;regular&lt;br&gt;<br>
&gt;expressions.&nbsp;I&nbsp;have&nbsp;only&nbsp;this&nbsp;regular&nbsp;expression&nbsp;in&nbsp;my&nbsp;file&lt;br&gt;<br>
&gt;&quot;squid_sites.txt&quot;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;^&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/SquidFaq/SquidAcl.*&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://wiki.squid-cache.org/SquidFaq/SquidAcl.*&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
are&nbsp;you&nbsp;aware&nbsp;that&nbsp;you&nbsp;can&nbsp;only&nbsp;see&nbsp;CONNECT&nbsp;in&nbsp;https&nbsp;requests,&nbsp;unless&nbsp;using&lt;br&gt;<br>
ssl_bump?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;acl&nbsp;bastion&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://10.5.0.0/1&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;10.5.0.0/1&lt;/a&gt;&lt;br&gt;<br>
&gt;acl&nbsp;whitelist&nbsp;url_regex&nbsp;&quot;/vagrant/squid_sites.txt&quot;&lt;br&gt;<br>
[...]&lt;br&gt;<br>
&gt;http_access&nbsp;allow&nbsp;manager&nbsp;localhost&lt;br&gt;<br>
&gt;http_access&nbsp;deny&nbsp;manager&lt;br&gt;<br>
&gt;http_access&nbsp;deny&nbsp;!Safe_ports&lt;br&gt;<br>
&gt;http_access&nbsp;allow&nbsp;localhost&lt;br&gt;<br>
&gt;http_access&nbsp;allow&nbsp;purge&nbsp;localhost&lt;br&gt;<br>
&gt;http_access&nbsp;deny&nbsp;purge&lt;br&gt;<br>
&gt;http_access&nbsp;deny&nbsp;CONNECT&nbsp;!SSL_ports&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;http_access&nbsp;allow&nbsp;bastion&nbsp;whitelist&lt;br&gt;<br>
&gt;http_access&nbsp;deny&nbsp;bastion&nbsp;all&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;I&nbsp;tried&nbsp;enabling&nbsp;debugging&nbsp;and&nbsp;tailing&nbsp;/var/log/squid3/cache.log&nbsp;but&nbsp;my&lt;br&gt;<br>
&gt;curl&nbsp;statement&nbsp;keeps&nbsp;matching&nbsp;&quot;all&quot;.&lt;br&gt;<br>
&lt;br&gt;<br>
of&nbsp;course&nbsp;it&nbsp;matches&nbsp;all,&nbsp;everything&nbsp;should&nbsp;match&nbsp;&quot;all&quot;.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;more&nbsp;wonder&nbsp;why&nbsp;doesn&#39;t&nbsp;it&nbsp;match&nbsp;&quot;http_access&nbsp;allow&nbsp;localhost&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;$&nbsp;curl&nbsp;-sSL&nbsp;--proxy&nbsp;localhost:3128&nbsp;-D&nbsp;-&nbsp;&quot;&lt;br&gt;<br>
&gt;&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/SquidFaq/SquidAcl&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://wiki.squid-cache.org/SquidFaq/SquidAcl&lt;/a&gt;&quot;&nbsp;-o&nbsp;/dev/null&nbsp;2&gt;&amp;1&nbsp;|&nbsp;grep&lt;br&gt;<br>
&gt;Squid&lt;br&gt;<br>
&gt;X-Squid-Error:&nbsp;ERR_ACCESS_DENIED&nbsp;0&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;Any&nbsp;ideas&nbsp;what&nbsp;I&#39;m&nbsp;doing&nbsp;wrong?&lt;br&gt;<br>
&lt;br&gt;<br>
have&nbsp;you&nbsp;reloaded&nbsp;squid&nbsp;config&nbsp;after&nbsp;changing&nbsp;it?&lt;br&gt;<br>
Did&nbsp;squid&nbsp;confirm&nbsp;it?&lt;br&gt;<br>
&lt;br&gt;<br>
--&nbsp;&lt;br&gt;<br>
Matus&nbsp;UHLAR&nbsp;-&nbsp;fantomas,&nbsp;&lt;a&nbsp;href=&quot;mailto:uhlar@fantomas.sk&quot;&nbsp;target=&quot;_blank&quot;&gt;uhlar@fantomas.sk&lt;/a&gt;&nbsp;;&nbsp;&lt;a&nbsp;href=&quot;http://www.fantomas.sk/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.fantomas.sk/&lt;/a&gt;&lt;br&gt;<br>
Warning:&nbsp;I&nbsp;wish&nbsp;NOT&nbsp;to&nbsp;receive&nbsp;e-mail&nbsp;advertising&nbsp;to&nbsp;this&nbsp;address.&lt;br&gt;<br>
Varovanie:&nbsp;na&nbsp;tuto&nbsp;adresu&nbsp;chcem&nbsp;NEDOSTAVAT&nbsp;akukolvek&nbsp;reklamnu&nbsp;postu.&lt;br&gt;<br>
It&#39;s&nbsp;now&nbsp;safe&nbsp;to&nbsp;throw&nbsp;off&nbsp;your&nbsp;computer.&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
