<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Squid&nbsp;3.5.25&nbsp;does&nbsp;not&nbsp;seem&nbsp;to&nbsp;recognise&nbsp;the&nbsp;408&nbsp;request&nbsp;timeout&nbsp;error&nbsp;code&nbsp;from&nbsp;ICAP.&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;The&nbsp;more&nbsp;troublesome&nbsp;issue&nbsp;for&nbsp;me&nbsp;is&nbsp;the&nbsp;exception&nbsp;it&nbsp;generates&nbsp;and&nbsp;then&nbsp;declares&nbsp;ICAP&nbsp;down&nbsp;after&nbsp;a&nbsp;certain&nbsp;number&nbsp;of&nbsp;such&nbsp;exceptions. &nbsp;  &lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;don&#39;t&nbsp;want&nbsp;to&nbsp;disable&nbsp;the&nbsp;failure&nbsp;limit&nbsp;entirely&nbsp;given&nbsp;that&nbsp;we&nbsp;can&nbsp;often&nbsp;have&nbsp;genuine&nbsp;failures&nbsp;that&nbsp;squid&nbsp;needs&nbsp;to&nbsp;detect. &nbsp; &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;What&nbsp;i&#39;d&nbsp;like&nbsp;to&nbsp;see&nbsp;is&nbsp;squid&nbsp;should&nbsp;not&nbsp;throw&nbsp;an&nbsp;exception&nbsp;in&nbsp;this&nbsp;case. &nbsp; The&nbsp;timeout&nbsp;is&nbsp;somewhat&nbsp;aggressive&nbsp;but&nbsp;works&nbsp;with&nbsp;an&nbsp;earlier&nbsp;version&nbsp;of&nbsp;ICAP&nbsp;(0.1.x). &nbsp;The&nbsp;one&nbsp;i&#39;m&nbsp;testing&nbsp;is&nbsp;0.5.3.&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any&nbsp;suggestions? &nbsp;I&nbsp;tried&nbsp;looking&nbsp;at&nbsp;squid&nbsp;3.5.26&nbsp;through&nbsp;3.5.28&nbsp;but&nbsp;i&nbsp;don&#39;t&nbsp;see&nbsp;any&nbsp;support&nbsp;for&nbsp;408&nbsp;timeout&nbsp;there&nbsp;(maybe&nbsp;i&nbsp;missed&nbsp;it?).  &lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;div&gt;Debug&nbsp;Logs:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;2018/10/29&nbsp;20:20:25.656|&nbsp;93,5|&nbsp;ModXact.cc(654)&nbsp;parseMore:&lt;/div&gt;&lt;div&gt;ICAP/1.0&nbsp;408&nbsp;Request&nbsp;timeout^M&lt;/div&gt;&lt;div&gt;Server:&nbsp;C-ICAP/0.5.3^M&lt;/div&gt;&lt;div&gt;Connection:&nbsp;close^M&lt;/div&gt;&lt;div&gt;ISTag:&nbsp;CI0001-XXXXXXXXX^M&lt;/div&gt;&lt;div&gt;^M&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;2018/10/29&nbsp;20:20:25.656|&nbsp;93,5|&nbsp;ModXact.cc(749)&nbsp;parseHeaders:&nbsp;parse&nbsp;ICAP&nbsp;headers&lt;/div&gt;&lt;div&gt;2018/10/29&nbsp;20:20:25.656|&nbsp;93,5|&nbsp;ModXact.cc(1079)&nbsp;parseHead:&nbsp;have&nbsp;98&nbsp;head&nbsp;bytes&nbsp;to&nbsp;parse;&nbsp;state:&nbsp;0&lt;/div&gt;&lt;div&gt;2018/10/29&nbsp;20:20:25.656|&nbsp;93,5|&nbsp;ModXact.cc(1094)&nbsp;parseHead:&nbsp;parse&nbsp;success,&nbsp;consume&nbsp;98&nbsp;bytes,&nbsp;return&nbsp;true&lt;/div&gt;&lt;div&gt;2018/10/29&nbsp;20:20:25.656|&nbsp;93,5|&nbsp;ModXact.cc(785)&nbsp;parseIcapHead:&nbsp;found&nbsp;connection&nbsp;close&lt;/div&gt;&lt;div&gt;2018/10/29&nbsp;20:20:25.656|&nbsp;93,5|&nbsp;ModXact.cc(815)&nbsp;parseIcapHead:&nbsp;ICAP&nbsp;status&nbsp;408&lt;/div&gt;&lt;div&gt;2018/10/29&nbsp;20:20:25.656|&nbsp;93,3|&nbsp;../../../src/base/AsyncJobCalls.h(177)&nbsp;dial:&nbsp;Adaptation::Icap::Xaction::noteCommRead&nbsp;threw&nbsp;exception:&nbsp;Unsupported&nbsp;ICAP&nbsp;status&nbsp;code&lt;/div&gt;&lt;div&gt;2018/10/29&nbsp;20:20:25.656|&nbsp;11,5|&nbsp;HttpRequest.cc(472)&nbsp;detailError:&nbsp;current&nbsp;error&nbsp;details:&nbsp;35/396407234&lt;/div&gt;&lt;div&gt;2018/10/29&nbsp;20:20:25.656|&nbsp;93,4|&nbsp;Xaction.cc(514)&nbsp;setOutcome:&nbsp;ICAP_ERR_OTHER&lt;/div&gt;&lt;div&gt;2018/10/29&nbsp;20:20:25.656|&nbsp;93,4|&nbsp;ServiceRep.cc(80)&nbsp;noteFailure: &nbsp;failure&nbsp;4&nbsp;out&nbsp;of&nbsp;10&nbsp;allowed&nbsp;in&nbsp;0sec&nbsp;[up,fail4]&lt;/div&gt;&lt;div&gt;...&lt;/div&gt;&lt;div&gt;&lt;div&gt;2018/10/29&nbsp;20:21:06.981|&nbsp;93,5|&nbsp;ModXact.cc(815)&nbsp;parseIcapHead:&nbsp;ICAP&nbsp;status&nbsp;408&lt;/div&gt;&lt;div&gt;2018/10/29&nbsp;20:21:06.981|&nbsp;93,3|&nbsp;../../../src/base/AsyncJobCalls.h(177)&nbsp;dial:&nbsp;Adaptation::Icap::Xaction::noteCommRead&nbsp;threw&nbsp;exception:&nbsp;Unsupported&nbsp;ICAP&nbsp;status&nbsp;code&lt;/div&gt;&lt;div&gt;2018/10/29&nbsp;20:21:06.981|&nbsp;11,5|&nbsp;HttpRequest.cc(472)&nbsp;detailError:&nbsp;current&nbsp;error&nbsp;details:&nbsp;35/396407234&lt;/div&gt;&lt;div&gt;2018/10/29&nbsp;20:21:06.981|&nbsp;93,4|&nbsp;Xaction.cc(514)&nbsp;setOutcome:&nbsp;ICAP_ERR_OTHER&lt;/div&gt;&lt;div&gt;2018/10/29&nbsp;20:21:06.981|&nbsp;93,4|&nbsp;ServiceRep.cc(80)&nbsp;noteFailure: &nbsp;failure&nbsp;11&nbsp;out&nbsp;of&nbsp;10&nbsp;allowed&nbsp;in&nbsp;0sec&nbsp;[up,fail11]&lt;/div&gt;&lt;div&gt;2018/10/29&nbsp;20:21:06.981|&nbsp;suspending&nbsp;ICAP&nbsp;service&nbsp;for&nbsp;too&nbsp;many&nbsp;failures&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_signature&quot;&gt;regards,&lt;br&gt;Arun&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
