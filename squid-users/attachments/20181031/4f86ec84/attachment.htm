<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&gt;As&nbsp;with&nbsp;any&nbsp;timeout,&nbsp;it&nbsp;is&nbsp;impossible&nbsp;to&nbsp;say&nbsp;in&nbsp;general&nbsp;which&nbsp;side&nbsp;of&lt;/div&gt;&gt;the&nbsp;connection&nbsp;is&nbsp;at&nbsp;fault.&nbsp;This&nbsp;case&nbsp;has&nbsp;at&nbsp;least&nbsp;three&nbsp;sides:&nbsp;It&nbsp;could&lt;br&gt;&gt;be&nbsp;the&nbsp;HTTP&nbsp;agent,&nbsp;Squid,&nbsp;and/or&nbsp;the&nbsp;ICAP&nbsp;service.&nbsp;Did&nbsp;one&nbsp;of&nbsp;them&nbsp;stall&lt;br&gt;&gt;the&nbsp;transaction?&nbsp;Or&nbsp;was&nbsp;the&nbsp;ICAP&nbsp;service&nbsp;just&nbsp;too&nbsp;impatient?&nbsp;See&nbsp;option&lt;br&gt;&gt;#4&nbsp;below.&lt;div&gt;I&#39;ve&nbsp;tried&nbsp;to&nbsp;track&nbsp;this&nbsp;down. &nbsp; There&nbsp;are&nbsp;some &nbsp;persistent&nbsp;sockets&nbsp;used&nbsp;by&nbsp;SaaS&nbsp;apps&nbsp;for&nbsp;APIs&nbsp;(otservice&nbsp;api&nbsp;from&nbsp;google&nbsp;sites)&nbsp;and&nbsp;sometimes&nbsp;the&nbsp;HTTP&nbsp;response&nbsp;takes&nbsp;a&nbsp;long&nbsp;time&nbsp;to&nbsp;trickle&nbsp;in. &nbsp;I&nbsp;have&nbsp;seen&nbsp;upto&nbsp;25&nbsp;seconds&nbsp;for&nbsp;the&nbsp;response&nbsp;body&nbsp;to&nbsp;trickle&nbsp;in&nbsp;after&nbsp;the&nbsp;response&nbsp;header. &nbsp; I&nbsp;don&#39;t&nbsp;know&nbsp;yet&nbsp;if&nbsp;this&nbsp;is&nbsp;due&nbsp;to&nbsp;network&nbsp;delays&nbsp;but&nbsp;given&nbsp;that&nbsp;it&nbsp;happens&nbsp;only&nbsp;for&nbsp;this&nbsp;particular&nbsp;uri&nbsp;I&#39;m&nbsp;theorizing&nbsp;that&nbsp;this&nbsp;is&nbsp;how&nbsp;it&nbsp;works. &nbsp; &nbsp;I&nbsp;can&nbsp;whitelist&nbsp;the&nbsp;one&nbsp;i&nbsp;am&nbsp;aware&nbsp;of&nbsp;that&nbsp;is&nbsp;causing&nbsp;this&nbsp;issue&nbsp;but&nbsp;again&nbsp;the&nbsp;concern&nbsp;is&nbsp;what&nbsp;about&nbsp;others&nbsp;that&nbsp;might&nbsp;throw&nbsp;this&nbsp;exception. &nbsp; &nbsp;The&nbsp;timeout&nbsp;at&nbsp;10&nbsp;seconds&nbsp;is&nbsp;somewhat&nbsp;aggressive&nbsp;so&nbsp;moving&nbsp;that&nbsp;up&nbsp;should&nbsp;help&nbsp;but&nbsp;some&nbsp;code&nbsp;changes&nbsp;in&nbsp;either&nbsp;squid&nbsp;or&nbsp;icap&nbsp;as&nbsp;suggested&nbsp;look&nbsp;necessary.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;&gt;Please&nbsp;note&nbsp;that&nbsp;ICAP&nbsp;is&nbsp;a&nbsp;protocol,&nbsp;not&nbsp;a&nbsp;product/software&nbsp;name.&nbsp;It&lt;br&gt;&lt;/div&gt;&gt;probably&nbsp;does&nbsp;not&nbsp;matter&nbsp;what&nbsp;ICAP&nbsp;service&nbsp;you&nbsp;are&nbsp;using&nbsp;though.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;Correct. &nbsp;I&nbsp;was&nbsp;referring&nbsp;to&nbsp;the&nbsp;c-icap&nbsp;implementation.&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;On&nbsp;Wed,&nbsp;Oct&nbsp;31,&nbsp;2018&nbsp;at&nbsp;5:00&nbsp;AM&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:squid-users-request@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users-request@lists.squid-cache.org&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Send&nbsp;squid-users&nbsp;mailing&nbsp;list&nbsp;submissions&nbsp;to&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
To&nbsp;subscribe&nbsp;or&nbsp;unsubscribe&nbsp;via&nbsp;the&nbsp;World&nbsp;Wide&nbsp;Web,&nbsp;visit&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
or,&nbsp;via&nbsp;email,&nbsp;send&nbsp;a&nbsp;message&nbsp;with&nbsp;subject&nbsp;or&nbsp;body&nbsp;&#39;help&#39;&nbsp;to&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users-request@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users-request@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
You&nbsp;can&nbsp;reach&nbsp;the&nbsp;person&nbsp;managing&nbsp;the&nbsp;list&nbsp;at&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users-owner@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users-owner@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
When&nbsp;replying,&nbsp;please&nbsp;edit&nbsp;your&nbsp;Subject&nbsp;line&nbsp;so&nbsp;it&nbsp;is&nbsp;more&nbsp;specific&lt;br&gt;<br>
than&nbsp;&quot;Re:&nbsp;Contents&nbsp;of&nbsp;squid-users&nbsp;digest...&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Today&#39;s&nbsp;Topics:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; 1. &lt;br&gt;<br>
On&nbsp;10/30/18&nbsp;6:45&nbsp;PM,&nbsp;Arunabha&nbsp;Saha&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;Squid&nbsp;3.5.25&nbsp;does&nbsp;not&nbsp;seem&nbsp;to&nbsp;recognise&nbsp;the&nbsp;408&nbsp;request&nbsp;timeout&nbsp;error&lt;br&gt;<br>
&gt;&nbsp;code&nbsp;from&nbsp;ICAP.&lt;br&gt;<br>
&lt;br&gt;<br>
Squid&nbsp;effectively&nbsp;recognizes&nbsp;ICAP&nbsp;408&nbsp;response&nbsp;as&nbsp;an&nbsp;ICAP&nbsp;transaction&lt;br&gt;<br>
error&nbsp;response&nbsp;and&nbsp;blames&nbsp;the&nbsp;ICAP&nbsp;service&nbsp;for&nbsp;that&nbsp;error.&nbsp;That&lt;br&gt;<br>
(minimal)&nbsp;support&nbsp;can&nbsp;be&nbsp;improved,&nbsp;of&nbsp;course.&nbsp;See&nbsp;options&nbsp;#1&nbsp;and&nbsp;#3&nbsp;below.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;br&gt;<br>
Needless&nbsp;to&nbsp;say,&nbsp;treating&nbsp;all&nbsp;ICAP&nbsp;service&nbsp;timeouts&nbsp;as&nbsp;if&nbsp;nothing&nbsp;bad&lt;br&gt;<br>
happened&nbsp;would&nbsp;break&nbsp;some&nbsp;existing&nbsp;Squid&nbsp;deployments&nbsp;(while&nbsp;possibly&lt;br&gt;<br>
fixing&nbsp;yours).&nbsp;A&nbsp;proper&nbsp;general&nbsp;solution&nbsp;(option&nbsp;#3&nbsp;below)&nbsp;would&nbsp;most&lt;br&gt;<br>
likely&nbsp;require&nbsp;making&nbsp;Squid&nbsp;behavior&nbsp;configurable.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;more&nbsp;troublesome&nbsp;issue&nbsp;for&nbsp;me&nbsp;is&nbsp;the&nbsp;exception&nbsp;it&nbsp;generates&nbsp;and&nbsp;then&lt;br&gt;<br>
&gt;&nbsp;declares&nbsp;ICAP&nbsp;down&nbsp;after&nbsp;a&nbsp;certain&nbsp;number&nbsp;of&nbsp;such&nbsp;exceptions. &nbsp;  &lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;don&#39;t&nbsp;want&nbsp;to&nbsp;disable&nbsp;the&nbsp;failure&nbsp;limit&nbsp;entirely&nbsp;given&nbsp;that&nbsp;we&nbsp;can&lt;br&gt;<br>
&gt;&nbsp;often&nbsp;have&nbsp;genuine&nbsp;failures&nbsp;that&nbsp;squid&nbsp;needs&nbsp;to&nbsp;detect. &nbsp; &lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;What&nbsp;i&#39;d&nbsp;like&nbsp;to&nbsp;see&nbsp;is&nbsp;squid&nbsp;should&nbsp;not&nbsp;throw&nbsp;an&nbsp;exception&nbsp;in&nbsp;this&lt;br&gt;<br>
&gt;&nbsp;case.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;&quot;exception&quot;&nbsp;is&nbsp;a&nbsp;minor&nbsp;low-level/technical&nbsp;detail.&nbsp;What&nbsp;you&nbsp;really&lt;br&gt;<br>
want&nbsp;to&nbsp;see&nbsp;is&nbsp;Squid&nbsp;blaming&nbsp;itself&nbsp;(rather&nbsp;than&nbsp;the&nbsp;ICAP&nbsp;service)&nbsp;for&lt;br&gt;<br>
the&nbsp;problem.&nbsp;Squid&nbsp;indeed&nbsp;lacks&nbsp;that&nbsp;kind&nbsp;of&nbsp;functionality,&nbsp;but&nbsp;it&nbsp;can&lt;br&gt;<br>
be&nbsp;added&nbsp;if&nbsp;really&nbsp;needed.&nbsp;See&nbsp;options&nbsp;#1&nbsp;and&nbsp;#3&nbsp;below.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;timeout&nbsp;is&nbsp;somewhat&nbsp;aggressive&nbsp;but&nbsp;works&nbsp;with&nbsp;an&nbsp;earlier&lt;br&gt;<br>
&gt;&nbsp;version&nbsp;of&nbsp;ICAP&nbsp;(0.1.x). &nbsp;The&nbsp;one&nbsp;i&#39;m&nbsp;testing&nbsp;is&nbsp;0.5.3.&lt;br&gt;<br>
&lt;br&gt;<br>
Please&nbsp;note&nbsp;that&nbsp;ICAP&nbsp;is&nbsp;a&nbsp;protocol,&nbsp;not&nbsp;a&nbsp;product/software&nbsp;name.&nbsp;It&lt;br&gt;<br>
probably&nbsp;does&nbsp;not&nbsp;matter&nbsp;what&nbsp;ICAP&nbsp;service&nbsp;you&nbsp;are&nbsp;using&nbsp;though.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;Any&nbsp;suggestions?&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;can&nbsp;suggest&nbsp;a&nbsp;few&nbsp;options,&nbsp;in&nbsp;no&nbsp;particular&nbsp;order:&lt;br&gt;<br>
&lt;br&gt;<br>
1.&nbsp;Modify&nbsp;your&nbsp;Squid&nbsp;to&nbsp;treat&nbsp;408&nbsp;differently.&lt;br&gt;<br>
2.&nbsp;Modify&nbsp;your&nbsp;ICAP&nbsp;service&nbsp;to&nbsp;stop&nbsp;sending&nbsp;ICAP&nbsp;408&nbsp;responses&nbsp;to&nbsp;Squid.&lt;br&gt;<br>
3.&nbsp;Add&nbsp;proper&nbsp;ICAP&nbsp;timeout&nbsp;support&nbsp;feature&nbsp;to&nbsp;Squid.&lt;br&gt;<br>
4.&nbsp;Investigate&nbsp;why&nbsp;your&nbsp;ICAP&nbsp;service&nbsp;times&nbsp;out.&nbsp;If&nbsp;you&nbsp;are&nbsp;lucky,&nbsp;you&lt;br&gt;<br>
 &nbsp; may&nbsp;be&nbsp;able&nbsp;to&nbsp;fix&nbsp;or&nbsp;work&nbsp;around&nbsp;the&nbsp;problem&nbsp;by&nbsp;adjusting&nbsp;Squid&lt;br&gt;<br>
 &nbsp; and/or&nbsp;your&nbsp;ICAP&nbsp;service&nbsp;configuration.&lt;br&gt;<br>
&lt;br&gt;<br>
For&nbsp;option&nbsp;#1,&nbsp;Adaptation::Icap::ModXact::parseIcapHead()&nbsp;may&nbsp;be&nbsp;a&nbsp;good&lt;br&gt;<br>
starting&nbsp;point.&lt;br&gt;<br>
&lt;br&gt;<br>
For&nbsp;options&nbsp;#1&nbsp;and&nbsp;#3,&nbsp;see&nbsp;also&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/SquidFaq/AboutSquid#How_to_add_a_new_Squid_feature.2C_enhance.2C_of_fix_something.3F&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://wiki.squid-cache.org/SquidFaq/AboutSquid#How_to_add_a_new_Squid_feature.2C_enhance.2C_of_fix_something.3F&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
In&nbsp;most&nbsp;cases,&nbsp;option&nbsp;#4&nbsp;is&nbsp;the&nbsp;best&nbsp;first&nbsp;step&nbsp;but&nbsp;YMMV.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
HTH,&lt;br&gt;<br>
&lt;br&gt;<br>
Alex.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Message:&nbsp;2&lt;br&gt;<br>
Date:&nbsp;Tue,&nbsp;30&nbsp;Oct&nbsp;2018&nbsp;23:59:18&nbsp;-0500&nbsp;(CDT)&lt;br&gt;<br>
From:&nbsp;Sid&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:SIDDH05@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;SIDDH05@gmail.com&lt;/a&gt;&gt;&lt;br&gt;<br>
To:&nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
Subject:&nbsp;Re:&nbsp;[squid-users]&nbsp;Squid&nbsp;4.3:&nbsp;SSL&nbsp;Bump&nbsp;fails&nbsp;to&nbsp;send&nbsp;client&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;certificate&lt;br&gt;<br>
Message-ID:&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:1540961958277-0.post@n4.nabble.com&quot;&nbsp;target=&quot;_blank&quot;&gt;1540961958277-0.post@n4.nabble.com&lt;/a&gt;&gt;&lt;br&gt;<br>
Content-Type:&nbsp;text/plain;&nbsp;charset=us-ascii&lt;br&gt;<br>
&lt;br&gt;<br>
Thank&nbsp;you&nbsp;Alex&nbsp;for&nbsp;the&nbsp;reply.&lt;br&gt;<br>
&lt;br&gt;<br>
Alex:&nbsp;1.&nbsp;Servers&nbsp;never&nbsp;send&nbsp;SNI.&nbsp;Clients&nbsp;usually&nbsp;send&nbsp;SNI.&nbsp;Squid&nbsp;should&lt;br&gt;<br>
forward&nbsp;SNI&nbsp;it&nbsp;received&nbsp;from&nbsp;the&nbsp;client&nbsp;to&nbsp;the&nbsp;server,&nbsp;provided&nbsp;the&nbsp;client&lt;br&gt;<br>
actually&nbsp;sent&nbsp;SNI.&nbsp;Did&nbsp;your&nbsp;client&nbsp;send&nbsp;SNI?&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
Sid:&nbsp;I&nbsp;can&nbsp;see&nbsp;in&nbsp;Client&nbsp;Hello&nbsp;IP&nbsp;Address&nbsp;being&nbsp;sent&nbsp;by&nbsp;Client;&nbsp;so&nbsp;there&nbsp;is&lt;br&gt;<br>
no&nbsp;SNI&nbsp;from&nbsp;client&nbsp;itself.&lt;br&gt;<br>
&lt;br&gt;<br>
Alex:&nbsp;2.&nbsp;Bugs&nbsp;notwithstanding,&nbsp;the&nbsp;implied&nbsp;order&nbsp;of&nbsp;events&nbsp;is&nbsp;not&nbsp;what&lt;br&gt;<br>
actually&nbsp;happens:&nbsp;Squid,&nbsp;as&nbsp;configured,&nbsp;does&nbsp;_not_&nbsp;forward&nbsp;anything&nbsp;from&nbsp;the&lt;br&gt;<br>
server&nbsp;certificate&nbsp;to&nbsp;the&nbsp;client.&nbsp;Squid,&nbsp;as&nbsp;configured,&nbsp;generates&nbsp;a&lt;br&gt;<br>
certificate&nbsp;based&nbsp;on&nbsp;client-supplied&nbsp;information&nbsp;(not&nbsp;server-supplied&lt;br&gt;<br>
information).&nbsp;After&nbsp;sending&nbsp;that&nbsp;generated&nbsp;certificate&nbsp;to&nbsp;the&nbsp;client,&nbsp;Squid&lt;br&gt;<br>
establishes&nbsp;a&nbsp;TLS&nbsp;connection&nbsp;with&nbsp;the&nbsp;server.&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
Sid:&nbsp;Thank&nbsp;you&nbsp;for&nbsp;explanation.&lt;br&gt;<br>
&lt;br&gt;<br>
Alex:&nbsp;For&nbsp;an&nbsp;accurate&nbsp;picture,&nbsp;in&nbsp;addition&nbsp;to&nbsp;Squid-server&nbsp;and&nbsp;server-Squid&lt;br&gt;<br>
traffic,&nbsp;look&nbsp;at&nbsp;what&nbsp;Squid&nbsp;has&nbsp;received&nbsp;from&nbsp;the&nbsp;client&nbsp;and&nbsp;what&nbsp;Squid&nbsp;sent&lt;br&gt;<br>
to&nbsp;the&nbsp;client,&nbsp;all&nbsp;in&nbsp;actual&nbsp;order.&lt;br&gt;<br>
&lt;br&gt;<br>
Sid:&nbsp;I&nbsp;took&nbsp;wireshark&nbsp;on&nbsp;Squid&nbsp;server&nbsp;(centOS&nbsp;7);&nbsp;I&nbsp;took&nbsp;2&nbsp;wiresharks&lt;br&gt;<br>
between&nbsp;Client&nbsp;&amp;&nbsp;Squid&nbsp;and&nbsp;then&nbsp;between&nbsp;Squid&nbsp;&amp;&nbsp;Server.&nbsp;I&nbsp;can&nbsp;see&nbsp;client&lt;br&gt;<br>
being&nbsp;sent&nbsp;fake&nbsp;cert&nbsp;generated&nbsp;by&nbsp;Squid&nbsp;&amp;&nbsp;client&nbsp;responds&nbsp;with&nbsp;&quot;Client&nbsp;key&lt;br&gt;<br>
Exchange&quot;,&nbsp;&quot;Change&nbsp;cipher&nbsp;spec&quot;,&nbsp;&quot;Encrypted&nbsp;Handshake&nbsp;Message&quot;.&nbsp;But&nbsp;I&nbsp;can&#39;t&lt;br&gt;<br>
see&nbsp;actual&nbsp;client&nbsp;certificate&nbsp;sent&nbsp;to&nbsp;Squid.&nbsp;Is&nbsp;there&nbsp;a&nbsp;way&nbsp;to&nbsp;decypt&nbsp;in&lt;br&gt;<br>
Wireshark.&nbsp;In&nbsp;Wireshark&nbsp;between&nbsp;Squid&nbsp;&amp;&nbsp;Server&nbsp;I&nbsp;can&nbsp;see&nbsp;Squid&nbsp;responding&lt;br&gt;<br>
with&nbsp;&quot;61&nbsp;Alert&nbsp;(Level:&nbsp;Fatal,&nbsp;Description:&nbsp;Internal&nbsp;Error)&quot;.&lt;br&gt;<br>
&lt;br&gt;<br>
Alex:&nbsp;Is&nbsp;your&nbsp;Squid&nbsp;configured&nbsp;to&nbsp;trust&nbsp;those&nbsp;internal&nbsp;CAs?&nbsp;If&nbsp;not,&nbsp;Squid&lt;br&gt;<br>
would&nbsp;not&nbsp;be&nbsp;able&nbsp;to&nbsp;validate&nbsp;the&nbsp;server&nbsp;certificate.&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
Sid:&nbsp;I&nbsp;have&nbsp;added&nbsp;those&nbsp;chained&nbsp;certificates&nbsp;as&nbsp;following&nbsp;in&nbsp;squid.conf&lt;br&gt;<br>
tls_outgoing_options&nbsp;cafile=/usr/local/squid/etc/UCAppsCA.pem&lt;br&gt;<br>
sslproxy_foreign_intermediate_certs&nbsp;/usr/local/squid/etc/UCAppsCA.pem&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
--&lt;br&gt;<br>
Sent&nbsp;from:&nbsp;&lt;a&nbsp;href=&quot;http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-Users-f1019091.html&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-Users-f1019091.html&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Message:&nbsp;3&lt;br&gt;<br>
Date:&nbsp;Wed,&nbsp;31&nbsp;Oct&nbsp;2018&nbsp;05:27:20&nbsp;-0500&nbsp;(CDT)&lt;br&gt;<br>
From:&nbsp;uppsalanet&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:fredrik@pipemore.se&quot;&nbsp;target=&quot;_blank&quot;&gt;fredrik@pipemore.se&lt;/a&gt;&gt;&lt;br&gt;<br>
To:&nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
Subject:&nbsp;Re:&nbsp;[squid-users]&nbsp;redirect&nbsp;based&nbsp;on&nbsp;url&nbsp;(302)&lt;br&gt;<br>
Message-ID:&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:1540981640859-0.post@n4.nabble.com&quot;&nbsp;target=&quot;_blank&quot;&gt;1540981640859-0.post@n4.nabble.com&lt;/a&gt;&gt;&lt;br&gt;<br>
Content-Type:&nbsp;text/plain;&nbsp;charset=us-ascii&lt;br&gt;<br>
&lt;br&gt;<br>
Hi&nbsp;Amos,&lt;br&gt;<br>
Is&nbsp;there&nbsp;a&nbsp;git&nbsp;that&nbsp;I&nbsp;can&nbsp;use&nbsp;to&nbsp;push&nbsp;stuff&nbsp;up?&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;think&nbsp;you&nbsp;need&nbsp;to&nbsp;split&nbsp;the&nbsp;string&nbsp;in&nbsp;an&nbsp;other&nbsp;way,&nbsp;look&nbsp;into&nbsp;this&lt;br&gt;<br>
example:&lt;br&gt;<br>
#!/usr/bin/perl&lt;br&gt;<br>
use&nbsp;strict;&lt;br&gt;<br>
use&nbsp;warnings;&lt;br&gt;<br>
&lt;br&gt;<br>
$|=1;&lt;br&gt;<br>
while&nbsp;(&lt;&gt;)&nbsp;{&lt;br&gt;<br>
 &nbsp; &nbsp; my&nbsp;$string&nbsp;=&nbsp;$_;&lt;br&gt;<br>
 &nbsp; &nbsp; print&nbsp;&quot;Received&nbsp;&#39;\$_&#39;&nbsp;=&nbsp;&quot;.$_.&quot;\n&quot;; &nbsp; &nbsp; &nbsp; &lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; $string&nbsp;=~&nbsp;m/^(\d+)\s(.*)$/;&lt;br&gt;<br>
 &nbsp; &nbsp; print&nbsp;&quot;After&nbsp;regexp&nbsp;&#39;\$string&#39;&nbsp;=&nbsp;&quot;.$string.&quot;\n&quot;;&lt;br&gt;<br>
 &nbsp; &nbsp; print&nbsp;&quot;After&nbsp;regexp&nbsp;&#39;\$1&#39;&nbsp;=&nbsp;&quot;.$1.&quot;\n&quot;; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;br&gt;<br>
 &nbsp; &nbsp; print&nbsp;&quot;After&nbsp;regexp&nbsp;&#39;\$2&#39;&nbsp;=&nbsp;&quot;.$2.&quot;\n&quot;;&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; ###&nbsp;Original&nbsp;split&nbsp;from&nbsp;sorce&nbsp;###&lt;br&gt;<br>
 &nbsp; &nbsp; ###&nbsp;This&nbsp;doesn&#39;t&nbsp;split&nbsp;anything&nbsp;looks&nbsp;like&nbsp;elements&nbsp;of&nbsp;an&nbsp;array?&lt;br&gt;<br>
 &nbsp; &nbsp; #my&nbsp;($cid,&nbsp;$uid)&nbsp;=&nbsp;($1,&nbsp;$2);&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; &nbsp; ###&nbsp;Split&nbsp;the&nbsp;string&nbsp;###&lt;br&gt;<br>
 &nbsp; &nbsp; ###&nbsp;Those&nbsp;two&nbsp;split&nbsp;based&nbsp;on&nbsp;one&nbsp;or&nbsp;more&nbsp;spaces&lt;br&gt;<br>
 &nbsp; &nbsp; #my&nbsp;($cid,&nbsp;$uid)&nbsp;=&nbsp;split(/\s+/&nbsp;,$_);&lt;br&gt;<br>
 &nbsp; &nbsp; my&nbsp;($cid,&nbsp;$uid)&nbsp;=&nbsp;split;&lt;br&gt;<br>
 &nbsp; &nbsp; $cid&nbsp;=~&nbsp;s/%(..)/pack(&quot;H*&quot;,&nbsp;$1)/ge;&lt;br&gt;<br>
 &nbsp; &nbsp; $uid&nbsp;=~&nbsp;s/%(..)/pack(&quot;H*&quot;,&nbsp;$1)/ge;&lt;br&gt;<br>
 &nbsp; &nbsp; print&nbsp;&quot;After&nbsp;split&nbsp;\$cid&nbsp;=&nbsp;&quot;.$cid.&quot;\n&quot;;&lt;br&gt;<br>
 &nbsp; &nbsp; print&nbsp;&quot;After&nbsp;split&nbsp;\$uid&nbsp;=&nbsp;&quot;.$uid.&quot;\n&quot;;&lt;br&gt;<br>
}&lt;br&gt;<br>
&lt;br&gt;<br>
Output&nbsp;from&nbsp;above&nbsp;with&nbsp;intake&nbsp;value&nbsp;&#39;*130.238.000.00&nbsp;&lt;a&nbsp;href=&quot;http://muse.jhu.edu&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;muse.jhu.edu&lt;/a&gt;&nbsp;-*&#39;:&lt;br&gt;<br>
Received&nbsp;&#39;$_&#39;&nbsp;=&nbsp;130.238.000.00&nbsp;&lt;a&nbsp;href=&quot;http://muse.jhu.edu&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;muse.jhu.edu&lt;/a&gt;&nbsp;-&lt;br&gt;<br>
After&nbsp;regexp&nbsp;&#39;$string&#39;&nbsp;=&nbsp;130.238.000.00&nbsp;&lt;a&nbsp;href=&quot;http://muse.jhu.edu&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;muse.jhu.edu&lt;/a&gt;&nbsp;-&lt;br&gt;<br>
/Use&nbsp;of&nbsp;uninitialized&nbsp;value&nbsp;$1&nbsp;in&nbsp;concatenation&nbsp;(.)&nbsp;or&nbsp;string&nbsp;at&lt;br&gt;<br>
./&lt;a&nbsp;href=&quot;http://sed_test_reg.pl&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;sed_test_reg.pl&lt;/a&gt;&nbsp;line&nbsp;13,&nbsp;&lt;&gt;&nbsp;line&nbsp;1.&lt;br&gt;<br>
After&nbsp;regexp&nbsp;&#39;$1&#39;&nbsp;=&nbsp;&lt;br&gt;<br>
Use&nbsp;of&nbsp;uninitialized&nbsp;value&nbsp;$2&nbsp;in&nbsp;concatenation&nbsp;(.)&nbsp;or&nbsp;string&nbsp;at&lt;br&gt;<br>
./&lt;a&nbsp;href=&quot;http://sed_test_reg.pl&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;sed_test_reg.pl&lt;/a&gt;&nbsp;line&nbsp;14,&nbsp;&lt;&gt;&nbsp;line&nbsp;1.&lt;br&gt;<br>
After&nbsp;regexp&nbsp;&#39;$2&#39;&nbsp;=&nbsp;/&lt;br&gt;<br>
*After&nbsp;split&nbsp;$cid&nbsp;=&nbsp;130.238.000.00&lt;br&gt;<br>
After&nbsp;split&nbsp;$uid&nbsp;=&nbsp;&lt;a&nbsp;href=&quot;http://muse.jhu.edu&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;muse.jhu.edu&lt;/a&gt;*&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers&lt;br&gt;<br>
Fredrik&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
--&lt;br&gt;<br>
Sent&nbsp;from:&nbsp;&lt;a&nbsp;href=&quot;http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-Users-f1019091.html&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-Users-f1019091.html&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Subject:&nbsp;Digest&nbsp;Footer&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
End&nbsp;of&nbsp;squid-users&nbsp;Digest,&nbsp;Vol&nbsp;50,&nbsp;Issue&nbsp;75&lt;br&gt;<br>
*******************************************&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;m_2831788150584372882gmail_signature&quot;&nbsp;data-smartmail=&quot;gmail_signature&quot;&gt;regards,&lt;br&gt;Arun&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
