<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;div&gt;I&#39;m&nbsp;working&nbsp;on&nbsp;an&nbsp;AWS&nbsp;implementation&nbsp;to&nbsp;load&nbsp;balance&nbsp;a&nbsp;farm&nbsp;of&nbsp;squid&nbsp;instances.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;AWS&nbsp;supports&nbsp;Proxy&nbsp;Protocol&nbsp;V2&nbsp;through&nbsp;TCP&nbsp;Network&nbsp;Load&nbsp;Balancer.&lt;/div&gt;&lt;div&gt;Based&nbsp;on&nbsp;tests,&nbsp;NLB&nbsp;support&nbsp;a&nbsp;forked&nbsp;version&nbsp;of&nbsp;PPv2&nbsp;wherein&nbsp;using&nbsp;&quot;2.2.7&nbsp;Reserved&nbsp;types&nbsp;ranges&quot;&nbsp;(&lt;a&nbsp;href=&quot;https://www.haproxy.org/download/1.8/doc/proxy-protocol.txt&quot;&gt;https://www.haproxy.org/download/1.8/doc/proxy-protocol.txt&lt;/a&gt;)&nbsp;which&nbsp;needs&nbsp;a&nbsp;custom&nbsp;parser&nbsp;to&nbsp;parse&nbsp;this&nbsp;information.&lt;/div&gt;&lt;div&gt;Even&nbsp;though&nbsp;above&nbsp;doc&nbsp;states&nbsp;that&nbsp;Squid&nbsp;now&nbsp;supports&nbsp;PPv2,&nbsp;it&nbsp;doesn&#39;t&nbsp;look&nbsp;like&nbsp;it&nbsp;can&nbsp;decode&nbsp;the&nbsp;Reserved&nbsp;type&nbsp;ranges.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;There&nbsp;is&nbsp;a&nbsp;public&nbsp;Github&nbsp;repo &lt;a&nbsp;href=&quot;https://github.com/aws/elastic-load-balancing-tools/tree/master/proprot&quot;&gt;https://github.com/aws/elastic-load-balancing-tools/tree/master/proprot&lt;/a&gt;&nbsp;to&nbsp;decode&nbsp;this&nbsp;information&nbsp;manually.&lt;/div&gt;&lt;div&gt;Structure&nbsp;of&nbsp;the&nbsp;binary&nbsp;header&nbsp;is&nbsp;there &lt;a&nbsp;href=&quot;https://github.com/aws/elastic-load-balancing-tools/tree/master/proprot/tst/com/amazonaws/proprot&quot;&gt;https://github.com/aws/elastic-load-balancing-tools/tree/master/proprot/tst/com/amazonaws/proprot&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Unfortunately&nbsp;it&nbsp;doesn&#39;t&nbsp;look&nbsp;like&nbsp;Squid&nbsp;natively&nbsp;supports&nbsp;this&nbsp;functionality.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any&nbsp;chance&nbsp;to&nbsp;have&nbsp;it&nbsp;on&nbsp;a&nbsp;next&nbsp;update?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thank&nbsp;you.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
