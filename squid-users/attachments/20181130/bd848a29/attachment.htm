<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;So&nbsp;thats&nbsp;exactly&nbsp;what&nbsp;I&nbsp;did. &lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;div&gt;#Rules&nbsp;for&nbsp;Peer&nbsp;group&nbsp;-&nbsp;list&nbsp;1 &lt;/div&gt;&lt;div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; cache_peer_access&nbsp;peerA1&nbsp;allow&nbsp;port_8080&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; cache_peer_access&nbsp;peerA2&nbsp;allow&nbsp;port_8080&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; cache_peer_access&nbsp;peerA3&nbsp;allow&nbsp;port_8080&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; cache_peer_access&nbsp;peerA4&nbsp;allow&nbsp;port_8080&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;#cache_peer&lt;/div&gt;&lt;div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;cache_peer&nbsp;192.168.1.2&nbsp;parent&nbsp;8800&nbsp;0&nbsp;round-robin&nbsp;no-query&nbsp;name=peerA1&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;cache_peer&nbsp;192.168.2.2&nbsp;parent&nbsp;8800&nbsp;0&nbsp;round-robin&nbsp;no-query&nbsp;name=peerA2&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;cache_peer&nbsp;192.168.2.5&nbsp;parent&nbsp;8800&nbsp;0&nbsp;round-robin&nbsp;no-query&nbsp;name=peerA3&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;cache_peer&nbsp;192.168.2.6 &nbsp;parent&nbsp;8800&nbsp;0&nbsp;round-robin&nbsp;no-query&nbsp;name=peerA4&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Then&nbsp;this&nbsp;is&nbsp;the&nbsp;error&nbsp;I&nbsp;get&nbsp;when&nbsp;I&nbsp;start&nbsp;the&nbsp;service &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;Nov&nbsp;30&nbsp;18:38:11&nbsp;ubuntu&nbsp;systemd[1]:&nbsp;Starting&nbsp;LSB:&nbsp;Squid&nbsp;HTTP&nbsp;Proxy&nbsp;version&nbsp;3.x...&lt;/div&gt;&lt;div&gt;Nov&nbsp;30&nbsp;18:38:11&nbsp;ubuntu&nbsp;squid[13974]:&nbsp;Bungled&nbsp;/etc/squid/squid.conf&nbsp;line&nbsp;3148:&nbsp;cache_peer_access&nbsp;peerA1&nbsp;allow&nbsp;port_8080&lt;/div&gt;&lt;div&gt;Nov&nbsp;30&nbsp;18:38:11&nbsp;ubuntu&nbsp;squid[13980]:&nbsp;Bungled&nbsp;/etc/squid/squid.conf&nbsp;line&nbsp;3148:&nbsp;cache_peer_access&nbsp;peerA1&nbsp;allow&nbsp;port_8080&lt;/div&gt;&lt;div&gt;Nov&nbsp;30&nbsp;18:38:11&nbsp;ubuntu&nbsp;squid[13957]: &nbsp;*&nbsp;FATAL:&nbsp;Bungled&nbsp;/etc/squid/squid.conf&nbsp;line&nbsp;3148:&nbsp;cache_peer_access&nbsp;peerA1&nbsp;allow&nbsp;port_8080&lt;/div&gt;&lt;div&gt;Nov&nbsp;30&nbsp;18:38:11&nbsp;ubuntu&nbsp;systemd[1]:&nbsp;squid.service:&nbsp;Control&nbsp;process&nbsp;exited,&nbsp;code=exited&nbsp;status=3&lt;/div&gt;&lt;div&gt;Nov&nbsp;30&nbsp;18:38:11&nbsp;ubuntu&nbsp;systemd[1]:&nbsp;squid.service:&nbsp;Failed&nbsp;with&nbsp;result&nbsp;&#39;exit-code&#39;.&lt;/div&gt;&lt;div&gt;Nov&nbsp;30&nbsp;18:38:11&nbsp;ubuntu&nbsp;systemd[1]:&nbsp;Failed&nbsp;to&nbsp;start&nbsp;LSB:&nbsp;Squid&nbsp;HTTP&nbsp;Proxy&nbsp;version&nbsp;3.x.&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;On&nbsp;Thu,&nbsp;Nov&nbsp;29,&nbsp;2018&nbsp;at&nbsp;10:44&nbsp;AM&nbsp;Alex&nbsp;Rousskov&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:rousskov@measurement-factory.com&quot;&gt;rousskov@measurement-factory.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;On&nbsp;11/29/18&nbsp;7:57&nbsp;AM,&nbsp;Wire&nbsp;Cutter&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;I’ve&nbsp;created&nbsp;4&nbsp;ports&nbsp;for&nbsp;clients&nbsp;to&nbsp;talk&nbsp;to,&nbsp;then&nbsp;created&nbsp;ACL&nbsp;lists&nbsp;for&lt;br&gt;<br>
&gt;&nbsp;those&nbsp;ports. &nbsp;From&nbsp;there&nbsp;I’ve&nbsp;tried&nbsp;(and&nbsp;failed)&nbsp;to&nbsp;create&nbsp;naming&nbsp;groups&lt;br&gt;<br>
&gt;&nbsp;for&nbsp;cacheing&nbsp;peers,&nbsp;then&nbsp;added&nbsp;those&nbsp;to&nbsp;ACLs&nbsp;and&nbsp;it&nbsp;fails.&nbsp;Any&nbsp;ideas?&lt;br&gt;<br>
&lt;br&gt;<br>
Use&nbsp;cache_peer_access&nbsp;to&nbsp;allow&nbsp;http_port&nbsp;X&nbsp;traffic&nbsp;(and&nbsp;only&nbsp;that&lt;br&gt;<br>
traffic)&nbsp;to&nbsp;peer&nbsp;group&nbsp;Y:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;#&nbsp;rules&nbsp;for&nbsp;peer&nbsp;group&nbsp;A&lt;br&gt;<br>
 &nbsp;cache_peer_access&nbsp;peerA1&nbsp;allow&nbsp;receivedOnPortForPeersA&lt;br&gt;<br>
 &nbsp;cache_peer_access&nbsp;peerA2&nbsp;allow&nbsp;receivedOnPortForPeersA&lt;br&gt;<br>
 &nbsp;cache_peer_access&nbsp;peerA3&nbsp;allow&nbsp;receivedOnPortForPeersA&lt;br&gt;<br>
 &nbsp;...&lt;br&gt;<br>
 &nbsp;#&nbsp;rules&nbsp;for&nbsp;peer&nbsp;group&nbsp;B&lt;br&gt;<br>
 &nbsp;cache_peer_access&nbsp;peerB1&nbsp;allow&nbsp;receivedOnPortForPeersB&lt;br&gt;<br>
 &nbsp;cache_peer_access&nbsp;peerB2&nbsp;allow&nbsp;receivedOnPortForPeersB&lt;br&gt;<br>
 &nbsp;...&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Depending&nbsp;on&nbsp;your&nbsp;traffic&nbsp;and&nbsp;needs,&nbsp;you&nbsp;may&nbsp;also&nbsp;need&nbsp;to&nbsp;allow&lt;br&gt;<br>
non-hierarchical&nbsp;requests&nbsp;to&nbsp;go&nbsp;to&nbsp;peer:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;nonhierarchical_direct&nbsp;off&lt;br&gt;<br>
&lt;br&gt;<br>
and/or&nbsp;to&nbsp;prohibit&nbsp;direct&nbsp;connections&nbsp;for&nbsp;portX:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;never_direct&nbsp;allow&nbsp;receivedOnPortForPeersA&lt;br&gt;<br>
 &nbsp;never_direct&nbsp;allow&nbsp;receivedOnPortForPeersB&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Once&nbsp;you&nbsp;get&nbsp;this&nbsp;working,&nbsp;please&nbsp;make&nbsp;Squid&nbsp;documentation&nbsp;improvements&lt;br&gt;<br>
that&nbsp;would&nbsp;have&nbsp;allowed&nbsp;you&nbsp;to&nbsp;figure&nbsp;this&nbsp;out&nbsp;on&nbsp;your&nbsp;own.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
HTH,&lt;br&gt;<br>
&lt;br&gt;<br>
Alex.&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_signature&quot;&nbsp;data-smartmail=&quot;gmail_signature&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:small&quot;&gt;_________________________________________________________________________________&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-size:small&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;span&nbsp;style=&quot;font-size:small&quot;&gt;This&nbsp;transmission&nbsp;may&nbsp;contain&nbsp;information&nbsp;that&nbsp;is&nbsp;privileged,&nbsp;confidential&nbsp;and&nbsp;exempt&nbsp;from&nbsp;disclosure&nbsp;under&nbsp;applicable&nbsp;law. &nbsp;If&nbsp;you&nbsp;are&nbsp;not&nbsp;the&nbsp;intended&nbsp;recipient,&nbsp;you&nbsp;are&nbsp;hereby&nbsp;notified&nbsp;that&nbsp;any&nbsp;disclosure,&nbsp;copying,&nbsp;distribution,&nbsp;or&nbsp;use&nbsp;of&nbsp;the&nbsp;information&nbsp;contained&nbsp;herein&nbsp;(including&nbsp;any&nbsp;reliance&nbsp;thereon)&nbsp;is&nbsp;STRICTLY&nbsp;PROHIBITED. &nbsp;If&nbsp;you&nbsp;received&nbsp;this&nbsp;transmission&nbsp;in&nbsp;error,&nbsp;please&nbsp;immediately&nbsp;contact&nbsp;the&nbsp;sender&nbsp;and&nbsp;destroy&nbsp;the&nbsp;material&nbsp;in&nbsp;its&nbsp;entirety,&nbsp;whether&nbsp;in&nbsp;electronic&nbsp;or&nbsp;hard&nbsp;copy&nbsp;format. &lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
