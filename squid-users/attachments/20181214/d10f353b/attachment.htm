<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&gt;I&nbsp;was&nbsp;able&nbsp;to&nbsp;get&nbsp;https&nbsp;working&nbsp;over&nbsp;the&nbsp;http&nbsp;connect&nbsp;tunnel,&nbsp;but&nbsp;I&nbsp;was&nbsp;still&nbsp;having&nbsp;issues&nbsp;with&nbsp;my&nbsp;client&nbsp;application&nbsp;connecting&nbsp;over&nbsp;the&nbsp;proxy.&nbsp;After&nbsp;some&nbsp;research&nbsp;it&nbsp;so&nbsp;happens&nbsp;that&nbsp;we&nbsp;have&nbsp;implemented&nbsp;the&nbsp;HTTPS&nbsp;proxy&nbsp;on&nbsp;the&nbsp;client&nbsp;side&nbsp;with&nbsp;libcurl.&nbsp;(implementing&nbsp;this&nbsp;-&nbsp;&quot;&lt;a&nbsp;href=&quot;https://daniel.haxx.se/blog/2016/11/26/https-proxy-with-curl/&quot;&nbsp;target=&quot;_blank&quot;&gt;https://daniel.haxx.se/blog/2016/11/26/https-proxy-with-curl/&lt;/a&gt;&quot;&lt;/font&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&gt;).&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&gt;So&nbsp;now&nbsp;my&nbsp;use&nbsp;case&nbsp;for&nbsp;the&nbsp;squid&nbsp;proxy&nbsp;is&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;accept&nbsp;a&nbsp;HTTPS_proxy&nbsp;request&nbsp;from&nbsp;the&nbsp;client&nbsp;and&nbsp;tunnel&nbsp;it&nbsp;forward&nbsp;to&nbsp;the&nbsp;destination&nbsp;server.&nbsp;For&nbsp;that&nbsp;I&nbsp;copied&nbsp;over&nbsp;the&nbsp;CA&nbsp;bundle&nbsp;from&nbsp;the&nbsp;client&nbsp;into&nbsp;the&nbsp;proxy&nbsp;server&nbsp;and&nbsp;pointed&nbsp;the&nbsp;&quot;tls-cert&quot;&nbsp;option&nbsp;to&nbsp;that&nbsp;file&nbsp;--&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&gt;https_port&nbsp;3128&nbsp;tls-cert=/etc/squid/ssl_cert/ca-bundle.crt&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&gt;I&nbsp;get&nbsp;the&nbsp;following&nbsp;error&nbsp;when&nbsp;starting&nbsp;the&nbsp;squid&nbsp;server&nbsp;--&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&lt;i&gt;Dec&nbsp;14&nbsp;10:03:42&nbsp;squid[131539]:&nbsp;&lt;b&nbsp;style=&quot;background-color:rgb(255,255,0)&quot;&gt;FATAL:&nbsp;No&nbsp;valid&nbsp;signing&nbsp;certificate&nbsp;configured&nbsp;for&nbsp;HTTPS_port&nbsp;[::]:3128&lt;/b&gt;&lt;/i&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&gt;How&nbsp;do&nbsp;I&nbsp;get&nbsp;this&nbsp;to&nbsp;work&nbsp;without&nbsp;having&nbsp;to&nbsp;create&nbsp;self-signed&nbsp;certs&nbsp;on&nbsp;the&nbsp;proxy&nbsp;server&nbsp;and&nbsp;importing&nbsp;that&nbsp;into&nbsp;the&nbsp;client&nbsp;ca-bundle. &lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&gt;Am&nbsp;I&nbsp;missing&nbsp;any&nbsp;config&nbsp;steps&nbsp;in&nbsp;the&nbsp;squid.conf&nbsp;file?&nbsp;I&nbsp;think&nbsp;I&nbsp;have&nbsp;misunderstood&nbsp;the&nbsp;function&nbsp;of&nbsp;the&nbsp;&quot;tls-cert&quot;&nbsp;and&nbsp;&quot;tls-cafile&quot;&nbsp;options&nbsp;in&nbsp;the&nbsp;https_port&nbsp;line. &lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&gt;Thanks&nbsp;again&nbsp;for&nbsp;all&nbsp;the&nbsp;help!&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&gt;Subhish&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&lt;font&nbsp;face=&quot;tahoma,&nbsp;sans-serif&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;On&nbsp;Wed,&nbsp;Dec&nbsp;12,&nbsp;2018&nbsp;at&nbsp;6:53&nbsp;PM&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&nbsp;target=&quot;_blank&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;On&nbsp;13/12/18&nbsp;12:50&nbsp;pm,&nbsp;Subhish&nbsp;Pillai&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;Thanks&nbsp;Alex,&nbsp;that&nbsp;was&nbsp;very&nbsp;helpful.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;Based&nbsp;on&nbsp;your&nbsp;explanation,&nbsp;I&nbsp;just&nbsp;want&nbsp;to&nbsp;use&nbsp;squid&nbsp;as&nbsp;a&nbsp;blind&nbsp;TCP&lt;br&gt;<br>
&gt;&nbsp;tunnel&nbsp;carrying&nbsp;the&nbsp;HTTPS&nbsp;connection&nbsp;from&nbsp;client&nbsp;to&nbsp;app&nbsp;server. &lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;In&nbsp;that&nbsp;case,&nbsp;I&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;use&nbsp;ssl_bump&nbsp;feature&nbsp;and&nbsp;the&nbsp;ssl_crtd&lt;br&gt;<br>
&gt;&nbsp;program&nbsp;for&nbsp;certificate&nbsp;management,&nbsp;is&nbsp;that&nbsp;correct?&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
Going&nbsp;by&nbsp;the&nbsp;description&nbsp;you&nbsp;gave&nbsp;of&nbsp;the&nbsp;client&nbsp;configuration,&nbsp;it&nbsp;should&nbsp;be.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;Would&nbsp;this&nbsp;config&nbsp;file&nbsp;work&nbsp;to&nbsp;setup&nbsp;the&nbsp;TCP&nbsp;tunnel&nbsp;--&lt;br&gt;<br>
&lt;br&gt;<br>
...&lt;br&gt;<br>
&gt;&nbsp;##&nbsp;Allow&nbsp;server&nbsp;side&nbsp;certificate&nbsp;errors&nbsp;such&nbsp;as&nbsp;untrusted&nbsp;certificates,&lt;br&gt;<br>
&gt;&nbsp;otherwise&nbsp;the&nbsp;connection&nbsp;is&nbsp;closed&nbsp;for&nbsp;such&nbsp;errors&lt;br&gt;<br>
&gt;&nbsp;sslproxy_cert_error&nbsp;allow&nbsp;all&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;##&nbsp;Accept&nbsp;certificates&nbsp;that&nbsp;fail&nbsp;verification&nbsp;(should&nbsp;only&nbsp;be&nbsp;needed&nbsp;if&lt;br&gt;<br>
&gt;&nbsp;using&nbsp;&#39;sslproxy_cert_error&nbsp;allow&nbsp;all&#39;)&lt;br&gt;<br>
&gt;&nbsp;sslproxy_flags&nbsp;DONT_VERIFY_PEER&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
These&nbsp;sslproxy_*&nbsp;options&nbsp;only&nbsp;apply&nbsp;when&nbsp;Squid&nbsp;is&nbsp;actively&nbsp;performing&lt;br&gt;<br>
TLS&nbsp;to&nbsp;upstream&nbsp;servers.&nbsp;They&nbsp;have&nbsp;no&nbsp;place&nbsp;in&nbsp;the&nbsp;&quot;blind&nbsp;tunnel&quot;&nbsp;situation.&lt;br&gt;<br>
(They&nbsp;also&nbsp;are&nbsp;deprecated&nbsp;in&nbsp;Squid-4,&nbsp;replaced&nbsp;by&nbsp;the&lt;br&gt;<br>
tls_outgoing_options&nbsp;directive&lt;br&gt;<br>
&lt;&lt;a&nbsp;href=&quot;http://www.squid-cache.org/Doc/config/tls_outgoing_options/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.squid-cache.org/Doc/config/tls_outgoing_options/&lt;/a&gt;&gt;).&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;the&nbsp;client&nbsp;software&nbsp;is&nbsp;sending&nbsp;CONNECT&nbsp;requests&nbsp;containing&nbsp;the&nbsp;HTTPS&lt;br&gt;<br>
traffic,&nbsp;then&nbsp;there&nbsp;is&nbsp;absolutely&nbsp;nothing&nbsp;your&nbsp;config&nbsp;needs&nbsp;to&nbsp;do&nbsp;than&lt;br&gt;<br>
let&nbsp;them&nbsp;send&nbsp;those&nbsp;requests&nbsp;to&nbsp;the&nbsp;proxy&nbsp;(as&nbsp;the&nbsp;default&nbsp;config&nbsp;does).&lt;br&gt;<br>
&lt;br&gt;<br>
You&nbsp;do&nbsp;not&nbsp;even&nbsp;need&nbsp;Squid&nbsp;to&nbsp;be&nbsp;built&nbsp;with&nbsp;TLS/SSL&nbsp;support.&nbsp;That&nbsp;is&nbsp;the&lt;br&gt;<br>
meaning&nbsp;of&nbsp;&quot;blind&quot;&nbsp;in&nbsp;this&nbsp;setup.&lt;br&gt;<br>
&lt;br&gt;<br>
Amos&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail-m_-9032843994425435451gmail-m_513477958693775190gmail-m_1414858013399683177gmail-m_-8572090553610267571gmail_signature&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;p&nbsp;style=&quot;font-size:12.8px;margin:0in&nbsp;0in&nbsp;0.0001pt;background-image:initial;background-position:initial;background-repeat:initial&quot;&gt;&lt;b&gt;&lt;span&nbsp;style=&quot;font-size:10pt;font-family:Arial,sans-serif&quot;&gt;Subhish&nbsp;Pillai&lt;/span&gt;&lt;/b&gt;&lt;span&nbsp;style=&quot;font-size:9.5pt;font-family:Arial,sans-serif&quot;&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;font-size:12.8px;margin:0in&nbsp;0in&nbsp;0.0001pt;background-image:initial;background-position:initial;background-repeat:initial&quot;&gt;&lt;font&nbsp;color=&quot;#444444&quot;&gt;&lt;span&nbsp;style=&quot;font-size:8pt;font-family:Arial,sans-serif&quot;&gt;R&amp;D&nbsp;Software&nbsp;Quality&nbsp;Engineer&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:Arial,sans-serif;font-size:9.5pt&quot;&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;font-size:12.8px;margin:0in&nbsp;0in&nbsp;0.0001pt;background-image:initial;background-position:initial;background-repeat:initial&quot;&gt;&lt;font&nbsp;color=&quot;#444444&quot;&gt;&lt;span&nbsp;style=&quot;font-size:8pt;font-family:Arial,sans-serif&quot;&gt;Broadcom&nbsp;|&nbsp;Brocade&nbsp;Storage&nbsp;Networking&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:9.5pt;font-family:Arial,sans-serif&quot;&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;margin:0in&nbsp;0in&nbsp;0.0001pt;background-image:initial;background-position:initial;background-repeat:initial&quot;&gt;&lt;span&nbsp;style=&quot;font-size:8pt;color:rgb(68,68,68);font-family:Arial,sans-serif&quot;&gt;T (720)&nbsp;462-2900&lt;/span&gt;&lt;br&gt;&lt;/p&gt;&lt;p&nbsp;style=&quot;font-size:12.8px;margin:0in&nbsp;0in&nbsp;0.0001pt;background-image:initial;background-position:initial;background-repeat:initial&quot;&gt;&lt;img&nbsp;src=&quot;https://broadcom.okta.com/bc/image/fileStoreRecord?id=fs09tph49bX08lpVi0x7&quot;&nbsp;width=&quot;200&quot;&nbsp;height=&quot;33&quot;&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
