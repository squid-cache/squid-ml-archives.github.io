<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=UTF-8&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;text=&quot;#000000&quot;&nbsp;bgcolor=&quot;#FFFFFF&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;moz-text-html&quot;&nbsp;lang=&quot;x-unicode&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;Hi&nbsp;all,&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;I'm&nbsp;testing&nbsp;squid&nbsp;4.5&nbsp;and&nbsp;facing&nbsp;two&nbsp;issues&nbsp;with&nbsp;intermediate<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CA&nbsp;download&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;At&nbsp;first&nbsp;there&nbsp;is&nbsp;no&nbsp;source&nbsp;IP&nbsp;and&nbsp;I&nbsp;don't&nbsp;know&nbsp;how&nbsp;to&nbsp;allow<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;kind&nbsp;of&nbsp;requests&nbsp;with&nbsp;an&nbsp;identification&nbsp;acl&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;de2&quot;&gt;172.23.0.9&nbsp;-&nbsp;user2&nbsp;[15/Jan/2019:16:34:51&nbsp;+0100]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;CONNECT&nbsp;bugs.squid-cache.org:443&nbsp;HTTP/1.1&quot;&nbsp;407&nbsp;4442&nbsp;447<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TCP_DENIED:HIER_NONE&nbsp;&quot;Mozilla/5.0&nbsp;(Windows&nbsp;NT&nbsp;6.1;&nbsp;WOW64;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rv:64.0)&nbsp;Gecko/20100101&nbsp;Firefox/64.0&quot;&nbsp;-&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;de1&quot;&gt;-&nbsp;-&nbsp;-&nbsp;[15/Jan/2019:16:34:51&nbsp;+0100]&nbsp;&quot;GET&nbsp;&lt;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class=&quot;moz-txt-link-freetext&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;href=&quot;http://cert.int-x3.letsencrypt.org/&quot;&gt;http://cert.int-x3.letsencrypt.org/&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HTTP/1.1&quot;&nbsp;407&nbsp;3536&nbsp;0&nbsp;TCP_DENIED:HIER_NONE&nbsp;&quot;-&quot;&nbsp;-&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.23.0.9&nbsp;-&nbsp;user2&nbsp;[15/Jan/2019:16:34:51&nbsp;+0100]&nbsp;&quot;CONNECT<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bugs.squid-cache.org:443&nbsp;HTTP/1.1&quot;&nbsp;200&nbsp;0&nbsp;447&nbsp;NONE:HIER_DIRECT<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Mozilla/5.0&nbsp;(Windows&nbsp;NT&nbsp;6.1;&nbsp;WOW64;&nbsp;rv:64.0)&nbsp;Gecko/20100101<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Firefox/64.0&quot;&nbsp;bump<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;As&nbsp;you&nbsp;can&nbsp;see&nbsp;the&nbsp;request&nbsp;to&nbsp;letsencrypt&nbsp;is&nbsp;denied&nbsp;because&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;basic&nbsp;authentication&nbsp;is&nbsp;needed,&nbsp;how&nbsp;I&nbsp;can&nbsp;do&nbsp;a&nbsp;global&nbsp;ACL&nbsp;allow<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;requests&nbsp;from&nbsp;squid&nbsp;?&nbsp;I&nbsp;tested&nbsp;127.0.0.1,local&nbsp;addresses&nbsp;but<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;without&nbsp;any&nbsp;success&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;So&nbsp;for&nbsp;testing&nbsp;purpose&nbsp;I&nbsp;removed&nbsp;my&nbsp;identification&nbsp;rules&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;Now&nbsp;Squid&nbsp;can&nbsp;get&nbsp;the&nbsp;certificate&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;de1&quot;&gt;-&nbsp;-&nbsp;-&nbsp;[15/Jan/2019:16:33:43&nbsp;+0100]&nbsp;&quot;GET&nbsp;&lt;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class=&quot;moz-txt-link-freetext&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;href=&quot;http://cert.int-x3.letsencrypt.org/&quot;&gt;http://cert.int-x3.letsencrypt.org/&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HTTP/1.1&quot;&nbsp;200&nbsp;9737&nbsp;0&nbsp;NONE:HIER_NONE&nbsp;&quot;-&quot;&nbsp;-&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;de1&quot;&gt;172.23.0.9&nbsp;-&nbsp;-&nbsp;[15/Jan/2019:16:33:43&nbsp;+0100]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;CONNECT&nbsp;bugs.squid-cache.org:443&nbsp;HTTP/1.1&quot;&nbsp;200&nbsp;0&nbsp;447<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NONE:HIER_DIRECT&nbsp;&quot;Mozilla/5.0&nbsp;(Windows&nbsp;NT&nbsp;6.1;&nbsp;WOW64;&nbsp;rv:64.0)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gecko/20100101&nbsp;Firefox/64.0&quot;&nbsp;bump&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;de1&quot;&gt;172.23.0.9&nbsp;-&nbsp;-&nbsp;[15/Jan/2019:16:33:43&nbsp;+0100]&nbsp;&quot;GET<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;href=&quot;https://bugs.squid-cache.org/&quot;&gt;https://bugs.squid-cache.org/&lt;/a&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HTTP/1.1&quot;&nbsp;503&nbsp;353&nbsp;349&nbsp;NONE:HIER_NONE&nbsp;&quot;Mozilla/5.0&nbsp;(Windows&nbsp;NT<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6.1;&nbsp;WOW64;&nbsp;rv:64.0)&nbsp;Gecko/20100101&nbsp;Firefox/64.0&quot;&nbsp;-&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;Cache.log&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;ssl3_get_server_certificate:certificate&nbsp;verify&nbsp;failed&nbsp;(1/-1/0)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;I'm&nbsp;missing&nbsp;something?&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;Thanks&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;FredB&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
