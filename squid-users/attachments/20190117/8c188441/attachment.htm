<tt>
&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;Transitional//EN&quot;<br>
&quot;http://www.w3.org/TR/REC-html40/loose.dtd&quot;&gt;<br>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;<br>
&lt;title&gt;&lt;/title&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;style=&quot;font-family:Arial;font-size:14px&quot;&gt;<br>
&lt;p&gt;Hello&nbsp;squid&nbsp;users.&lt;/p&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;I&nbsp;have&nbsp;configured&nbsp;squid&nbsp;for&nbsp;ntlm&nbsp;authentication&nbsp;and&nbsp;it&nbsp;seems&nbsp;to&nbsp;work&nbsp;well.&nbsp;All&nbsp;needed&nbsp;browsers&nbsp;(ff,&nbsp;ie,&nbsp;chrome)&nbsp;work&nbsp;and&nbsp;programs&nbsp;like&nbsp;teamviewer&nbsp;or&nbsp;&quot;heise&nbsp;register&quot;&nbsp;do&nbsp;work&nbsp;too.&nbsp;But&nbsp;now&nbsp;I&nbsp;notice,&nbsp;that&nbsp;other&nbsp;programs&nbsp;like&nbsp;Sage&nbsp;HR,&nbsp;Dakota,&nbsp;Sfirm&nbsp;and&nbsp;Elster&nbsp;have&nbsp;problems&nbsp;with&nbsp;authentication.&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;With&nbsp;wireshark&nbsp;I&nbsp;see&nbsp;the&nbsp;following:&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;(Stage1)&nbsp;Browsers,&nbsp;Teamviewer,&nbsp;etc&nbsp;starting&nbsp;request&nbsp;to&nbsp;squid&nbsp;and&nbsp;squid&nbsp;returns&nbsp;&quot;407&nbsp;Proxy&nbsp;Authentication&nbsp;Required&quot;.&nbsp;&lt;/div&gt;<br>
&lt;div&gt;(Stage2)&nbsp;After&nbsp;that&nbsp;the&nbsp;client&nbsp;begins&nbsp;a&nbsp;new&nbsp;request&nbsp;for&nbsp;negotiation&nbsp;and&nbsp;sends&nbsp;the&nbsp;credentials.&nbsp;The&nbsp;connection&nbsp;works.&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;But...&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;(Stage1)&nbsp;Sage&nbsp;HR,&nbsp;Sfirm,&nbsp;etc.&nbsp;starts&nbsp;request&nbsp;to&nbsp;squid&nbsp;and&nbsp;squid&nbsp;returns&nbsp;&quot;407&nbsp;Proxy&nbsp;Authentication&nbsp;Required&quot;.&nbsp;&lt;/div&gt;<br>
&lt;div&gt;After&nbsp;that&nbsp;the&nbsp;client&nbsp;begins&nbsp;a&nbsp;new&nbsp;request&nbsp;but&nbsp;the&nbsp;same&nbsp;without&nbsp;credentials&nbsp;and&nbsp;negotiation.&nbsp;Of&nbsp;course,&nbsp;the&nbsp;proxy&nbsp;refuses&nbsp;the&nbsp;connection&nbsp;again.&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;I&nbsp;have&nbsp;no&nbsp;idea&nbsp;why&nbsp;the&nbsp;client&nbsp;software&nbsp;doesn&acute;t&nbsp;start&nbsp;stage2&nbsp;and&nbsp;no&nbsp;idea&nbsp;to&nbsp;find&nbsp;out&nbsp;why.&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;Here&nbsp;is&nbsp;my&nbsp;configuration&nbsp;for&nbsp;ntlm-auth:&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;auth_param&nbsp;negotiate&nbsp;program&nbsp;/usr/lib/squid/negotiate_wrapper_auth&nbsp;-d&nbsp;--ntlm&nbsp;/usr/bin/ntlm_auth&nbsp;--diagnostics&nbsp;--helper-protocol=squid-2.5-ntlmssp&nbsp;--domain=mydomain&nbsp;--kerberos&nbsp;/usr/lib/squid3/squid_kerb_auth&nbsp;-d&nbsp;-s&nbsp;GSS_C_NO_NAME&lt;/div&gt;<br>
&lt;div&gt;auth_param&nbsp;negotiate&nbsp;children&nbsp;10&lt;/div&gt;<br>
&lt;div&gt;auth_param&nbsp;negotiate&nbsp;keep_alive&nbsp;off&lt;/div&gt;<br>
&lt;div&gt;acl&nbsp;auth&nbsp;proxy_auth&nbsp;REQUIRED&lt;/div&gt;<br>
&lt;div&gt;http_access&nbsp;allow&nbsp;auth&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;Thank&nbsp;you&nbsp;for&nbsp;helping&nbsp;me!#&lt;br&gt;<br>
&lt;br&gt;<br>
Silvester&lt;/div&gt;<br>
&lt;div&gt;<br>
&lt;h4&nbsp;style=&quot;line-height:&nbsp;1;&quot;&gt;&lt;b&gt;&lt;span&nbsp;style=&quot;font-family:Verdana;font-size:x-small;color:#7b7e7d&quot;&gt;Silvester&nbsp;Langen&lt;/span&gt;&lt;/b&gt;&lt;br&gt;<br>
&lt;span&nbsp;style=&quot;font-family:Verdana;font-size:x-small;color:#7b7e7d&quot;&gt;Fachinformatiker&nbsp;-&nbsp;Systemintegration&lt;br&gt;<br>
Auf&nbsp;dem&nbsp;Leuchtenberg&nbsp;78&lt;/span&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;span&nbsp;style=&quot;font-family:Verdana;font-size:x-small;color:#7b7e7d&quot;&gt;41517&nbsp;Grevenbroich&lt;/span&gt;&lt;/h4&gt;<br>
&lt;p&gt;&lt;span&nbsp;style=&quot;display:inline-block;width:4em&quot;&gt;Mobil:&lt;/span&gt;&nbsp;0170&nbsp;69&nbsp;66&nbsp;580&lt;br&gt;<br>
&lt;span&nbsp;style=&quot;display:inline-block;width:4em&quot;&gt;Tel:&lt;/span&gt;&nbsp;02181&nbsp;21&nbsp;555&nbsp;01&lt;br&gt;<br>
&lt;span&nbsp;style=&quot;display:inline-block;width:4em&quot;&gt;Web:&lt;/span&gt;&nbsp;&lt;a&nbsp;href=&quot;https://silvesterlangen.de&quot;&nbsp;target=&quot;_blank&quot;&nbsp;title=&quot;FollowYourEyes&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(255,102,0)&quot;&gt;silvesterlangen.de&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;<br>
&lt;p&gt;Zertifizierter&nbsp;MCSA,&nbsp;MCSE,&nbsp;LPIC-1&lt;/p&gt;<br>
&lt;/div&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;
</tt>
