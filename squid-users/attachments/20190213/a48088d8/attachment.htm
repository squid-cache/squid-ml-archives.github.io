<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;style&nbsp;type=&quot;text/css&quot;&nbsp;style=&quot;display:none;&quot;&gt;&lt;!--&nbsp;P&nbsp;{margin-top:0;margin-bottom:0;}&nbsp;--&gt;&lt;/style&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;dir=&quot;ltr&quot;&gt;<br>
&lt;div&nbsp;id=&quot;divtagdefaultwrapper&quot;&nbsp;style=&quot;font-size:12pt;color:#000000;font-family:Calibri,Helvetica,sans-serif;&quot;&nbsp;dir=&quot;ltr&quot;&gt;<br>
&lt;p&gt;Hello&nbsp;everybody,&lt;/p&gt;<br>
&lt;p&gt;I'm&nbsp;trying&nbsp;to&nbsp;compile&nbsp;Squid&nbsp;4.4&nbsp;with&nbsp;OpenSSL&nbsp;1.1.1a&nbsp;and&nbsp;I'm&nbsp;getting&nbsp;compilation&nbsp;errors&nbsp;like&nbsp;this&nbsp;one&nbsp;:&lt;/p&gt;<br>
&lt;p&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&gt;&lt;/p&gt;<br>
&lt;div&gt;In&nbsp;file&nbsp;included&nbsp;from&nbsp;../../src/security/Context.h:15:0,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;../../src/security/forward.h:13,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;../../src/SquidConfig.h:21,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;old_api.cc:24:&lt;br&gt;<br>
../../compat/openssl.h:121:2:&nbsp;error:&nbsp;#error&nbsp;missing&nbsp;both&nbsp;OpenSSL&nbsp;API&nbsp;features&nbsp;EVP_PKEY_up_ref&nbsp;(v1.1)&nbsp;and&nbsp;CRYPTO_LOCK_EVP_PKEY&nbsp;(v1.0)&lt;br&gt;<br>
&nbsp;#error&nbsp;missing&nbsp;both&nbsp;OpenSSL&nbsp;API&nbsp;features&nbsp;EVP_PKEY_up_ref&nbsp;(v1.1)&nbsp;and&nbsp;CRYPTO_LOCK_EVP_PKEY&nbsp;(v1.0)&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;If&nbsp;I&nbsp;compile&nbsp;with&nbsp;the&nbsp;deprecated&nbsp;OpenSSL&nbsp;1.0.2&nbsp;branch&nbsp;it&nbsp;works&nbsp;but&nbsp;I&nbsp;don't&nbsp;want&nbsp;to&nbsp;use&nbsp;this&nbsp;branch.&nbsp;My&nbsp;goal&nbsp;is&nbsp;to&nbsp;offload&nbsp;SSL-Bump&nbsp;with&nbsp;hardware&nbsp;that&nbsp;needs&nbsp;OpenSSL&nbsp;1.1.1.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;I'm&nbsp;looking&nbsp;for&nbsp;a&nbsp;solution&nbsp;for&nbsp;a&nbsp;couple&nbsp;of&nbsp;days&nbsp;and&nbsp;I&nbsp;found&nbsp;absolutely&nbsp;nothing&nbsp;that&nbsp;helps&nbsp;in&nbsp;Squid&nbsp;documentation,&nbsp;source&nbsp;code&nbsp;and&nbsp;Google.&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;p&gt;&lt;/p&gt;<br>
&lt;p&gt;According&nbsp;to&nbsp;the&nbsp;&quot;CompilingSquid&quot;&nbsp;FAQ&nbsp;it&nbsp;should&nbsp;be&nbsp;feasible&nbsp;with&nbsp;Squid-4.&nbsp;Page<br>
&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/SquidFaq/CompilingSquid&quot;&nbsp;class=&quot;OWAAutoLink&quot;&nbsp;id=&quot;LPlnk399510&quot;&nbsp;previewremoved=&quot;true&quot;&gt;<br>
https://wiki.squid-cache.org/SquidFaq/CompilingSquid&lt;/a&gt;&nbsp;says&nbsp;following&nbsp;:&lt;/p&gt;<br>
&lt;div&gt;However,&nbsp;please&nbsp;note&nbsp;that&nbsp;&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/Squid-3.5&quot;&gt;Squid-3.5&lt;/a&gt;&nbsp;is&nbsp;not&nbsp;compatible&nbsp;with&nbsp;OpenSSL&nbsp;v1.1&#43;.&nbsp;As&nbsp;of&nbsp;Debian&nbsp;Squeeze,&nbsp;or&nbsp;Ubuntu&nbsp;Zesty&nbsp;the<br>
&lt;strong&gt;libssl1.0-dev&lt;/strong&gt;&nbsp;package&nbsp;must&nbsp;be&nbsp;used&nbsp;instead.&nbsp;This&nbsp;is&nbsp;resolved&nbsp;in&nbsp;the<br>
&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/Squid-4&quot;&gt;Squid-4&lt;/a&gt;&nbsp;packages.&nbsp;&lt;/div&gt;<br>
&lt;p&gt;&lt;/p&gt;<br>
&lt;p&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&gt;The&nbsp;configure&nbsp;script&nbsp;is&nbsp;run&nbsp;with&nbsp;following&nbsp;parameters&nbsp;:&lt;/p&gt;<br>
&lt;p&gt;&lt;/p&gt;<br>
&lt;div&gt;./configure&nbsp;LDFLAGS=-ldl&nbsp;--prefix=/usr&nbsp;--includedir=/usr/include&nbsp;--datadir=/usr/share&nbsp;--bindir=/usr/sbin&nbsp;--libexecdir=/usr/lib/squid&nbsp;-localstatedir=/var&nbsp;--sysconfdir=/etc/squid&nbsp;--with-default-user=squid&nbsp;--with-openssl=/usr/local/ssl-1.1.1a/&nbsp;--enable-ssl<br>
&nbsp;--enable-ssl-crtd&nbsp;--enable-linux-netfilter&nbsp;--enable-snmp&nbsp;--enable-useragent-log&nbsp;--enable-referer-log&nbsp;--enable-cachemgr&nbsp;--enable-truncate&nbsp;--enable-underscores&nbsp;--enable-stacktrace&nbsp;--enable-async-io=160&nbsp;--enable-poll&nbsp;--enable-icmp&nbsp;--enable-ipfw-transparent&nbsp;--enable-forw-via-db<br>
&nbsp;--enable-cache-digests&nbsp;--with-included-ltdl&nbsp;--enable-ltdl-convenience&nbsp;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;br&gt;<br>
&lt;p&gt;&lt;/p&gt;<br>
&lt;p&gt;Can&nbsp;somebody&nbsp;tell&nbsp;me&nbsp;what's&nbsp;wrong&nbsp;?&lt;/p&gt;<br>
&lt;p&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&gt;Regards&lt;/p&gt;<br>
&lt;p&gt;&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&gt;Yann&lt;br&gt;<br>
&lt;/p&gt;<br>
&lt;p&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/p&gt;<br>
&lt;/div&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
