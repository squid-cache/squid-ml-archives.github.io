<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=gb2312&quot;&gt;<br>
&lt;style&nbsp;type=&quot;text/css&quot;&nbsp;style=&quot;display:none;&quot;&gt;&nbsp;P&nbsp;{margin-top:0;margin-bottom:0;}&nbsp;&lt;/style&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;dir=&quot;ltr&quot;&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
&lt;span&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;Calibri,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;Hi&nbsp;All,&lt;/span&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;signature&quot;&gt;<br>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Calibri,Helvetica,sans-serif;&nbsp;font-size:12pt;&nbsp;color:rgb(0,0,0)&quot;&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Calibri,Helvetica,sans-serif;&nbsp;font-size:12pt;&nbsp;color:rgb(0,0,0)&quot;&gt;<br>
Recently,&nbsp;I&nbsp;tried&nbsp;to&nbsp;configure&nbsp;a&nbsp;squid&nbsp;(4.5&nbsp;on&nbsp;CentOS&nbsp;7)&nbsp;proxy&nbsp;service&nbsp;with&nbsp;Microsoft&nbsp;Windows&nbsp;2012&nbsp;Active&nbsp;Directory&nbsp;authentication,&nbsp;but&nbsp;got&nbsp;a&nbsp;problem&nbsp;with&nbsp;&quot;--require-membership-of&quot;&nbsp;option.&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Calibri,Helvetica,sans-serif;&nbsp;font-size:12pt;&nbsp;color:rgb(0,0,0)&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:Calibri,Helvetica,sans-serif;&nbsp;background-color:rgb(255,255,255);&nbsp;display:inline!important&quot;&gt;----------------------------------------------------------------------------------------------&lt;/span&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Calibri,Helvetica,sans-serif;&nbsp;font-size:12pt;&nbsp;color:rgb(0,0,0)&quot;&gt;<br>
When&nbsp;I&nbsp;use&nbsp;&quot;auth_param&nbsp;basic&nbsp;program&nbsp;/usr/bin/ntlm_auth&nbsp;--helper-protocol=squid-2.5-basic&quot;&nbsp;&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Calibri,Helvetica,sans-serif;&nbsp;font-size:12pt;&nbsp;color:rgb(0,0,0)&quot;&gt;<br>
Everything&nbsp;goes&nbsp;will,&nbsp;I&nbsp;can&nbsp;use&nbsp;my&nbsp;AD&nbsp;username&nbsp;and&nbsp;password&nbsp;to&nbsp;login&nbsp;and&nbsp;surf&nbsp;the&nbsp;internet&nbsp;by&nbsp;squid&nbsp;proxy&nbsp;services.&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Calibri,Helvetica,sans-serif;&nbsp;font-size:12pt;&nbsp;color:rgb(0,0,0)&quot;&gt;<br>
----------------------------------------------------------------------------------------------&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Calibri,Helvetica,sans-serif;&nbsp;font-size:12pt;&nbsp;color:rgb(0,0,0)&quot;&gt;<br>
But&nbsp;if&nbsp;I&nbsp;use&nbsp;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);&nbsp;font-family:Calibri,Helvetica,sans-serif;&nbsp;font-size:12pt&quot;&gt;&quot;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);&nbsp;font-family:Calibri,Helvetica,sans-serif;&nbsp;font-size:12pt&quot;&gt;auth_param&nbsp;basic&nbsp;program&nbsp;/usr/bin/ntlm_auth&nbsp;--helper-protocol=squid-2.5-basic&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);&nbsp;font-family:Calibri,Helvetica,sans-serif;&nbsp;font-size:12pt&quot;&gt;--require-membership-of='IBM\Domain<br>
&nbsp;Users'&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);&nbsp;font-family:Calibri,Helvetica,sans-serif;&nbsp;font-size:12pt&quot;&gt;&quot;&nbsp;&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Calibri,Helvetica,sans-serif;&nbsp;font-size:12pt;&nbsp;color:rgb(0,0,0)&quot;&gt;<br>
OR&nbsp;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);&nbsp;font-family:Calibri,Helvetica,sans-serif;&nbsp;font-size:12pt&quot;&gt;&quot;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);&nbsp;font-family:Calibri,Helvetica,sans-serif;&nbsp;font-size:12pt&quot;&gt;auth_param&nbsp;ntlm&nbsp;program&nbsp;/usr/bin/ntlm_auth&nbsp;--helper-protocol=squid-2.5-ntlmssp&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);&nbsp;font-family:Calibri,Helvetica,sans-serif;&nbsp;font-size:12pt&quot;&gt;--require-membership-of='IBM\Domain<br>
&nbsp;Users'&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);&nbsp;font-family:Calibri,Helvetica,sans-serif;&nbsp;font-size:12pt&quot;&gt;&quot;&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Calibri,Helvetica,sans-serif;&nbsp;font-size:12pt;&nbsp;color:rgb(0,0,0)&quot;&gt;<br>
Then&nbsp;always&nbsp;gets&nbsp;&quot;1550654743.129&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;192.168.0.1&nbsp;TCP_DENIED/407&nbsp;4252&nbsp;CONNECT&nbsp;www.youtube.com:443&nbsp;-&nbsp;HIER_NONE/-&nbsp;text/html&quot;,&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Calibri,Helvetica,sans-serif;&nbsp;font-size:12pt;&nbsp;color:rgb(0,0,0)&quot;&gt;<br>
Internet&nbsp;Explorer&nbsp;ask&nbsp;me&nbsp;to&nbsp;login&nbsp;again&nbsp;and&nbsp;again&nbsp;and&nbsp;again...&nbsp;I&nbsp;am&nbsp;sure&nbsp;I&nbsp;used&nbsp;correct&nbsp;domain,&nbsp;username&nbsp;and&nbsp;password,&nbsp;but&nbsp;everything&nbsp;is&nbsp;not&nbsp;work.&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Calibri,Helvetica,sans-serif;&nbsp;font-size:12pt;&nbsp;color:rgb(0,0,0)&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:Calibri,Helvetica,sans-serif;&nbsp;background-color:rgb(255,255,255);&nbsp;display:inline!important&quot;&gt;----------------------------------------------------------------------------------------------&lt;/span&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Calibri,Helvetica,sans-serif;&nbsp;font-size:12pt;&nbsp;color:rgb(0,0,0)&quot;&gt;<br>
And&nbsp;I&nbsp;have&nbsp;tested&nbsp;run&nbsp;ntlm_auth&nbsp;directly,&nbsp;it&nbsp;looks&nbsp;successfully.&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Calibri,Helvetica,sans-serif;&nbsp;font-size:12pt;&nbsp;color:rgb(0,0,0)&quot;&gt;<br>
&quot;&lt;span&gt;ntlm_auth&nbsp;--require-membership-of='IBM\Domain&nbsp;Users'&nbsp;--username=Administrators&nbsp;--password=123456&lt;br&gt;<br>
&lt;/span&gt;&lt;span&gt;NT_STATUS_OK:&nbsp;The&nbsp;operation&nbsp;completed&nbsp;successfully.&nbsp;(0x0)&lt;/span&gt;&quot;&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Calibri,Helvetica,sans-serif;&nbsp;font-size:12pt;&nbsp;color:rgb(0,0,0)&quot;&gt;<br>
&lt;span&nbsp;style=&quot;font-family:Calibri,Helvetica,sans-serif;&nbsp;background-color:rgb(255,255,255);&nbsp;display:inline!important&quot;&gt;----------------------------------------------------------------------------------------------&lt;/span&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Calibri,Helvetica,sans-serif;&nbsp;font-size:12pt;&nbsp;color:rgb(0,0,0)&quot;&gt;<br>
I&nbsp;have&nbsp;no&nbsp;idea&nbsp;what&nbsp;I&nbsp;have&nbsp;missed&nbsp;or&nbsp;made&nbsp;mistake,&nbsp;could&nbsp;someone&nbsp;can&nbsp;help.&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Calibri,Helvetica,sans-serif;&nbsp;font-size:12pt;&nbsp;color:rgb(0,0,0)&quot;&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Calibri,Helvetica,sans-serif;&nbsp;font-size:12pt;&nbsp;color:rgb(0,0,0)&quot;&gt;<br>
Thanks!&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:Calibri,Helvetica,sans-serif;&nbsp;font-size:12pt;&nbsp;color:rgb(0,0,0)&quot;&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;x_signature&quot;&gt;&lt;font&nbsp;color=&quot;#808080&quot;&nbsp;face=&quot;Comic&nbsp;Sans&nbsp;MS&quot;&nbsp;size=&quot;1&quot;&nbsp;style=&quot;font-size:8pt&quot;&gt;Best&nbsp;regards.&lt;/font&gt;&lt;font&nbsp;color=&quot;#808080&quot;&nbsp;face=&quot;Comic&nbsp;Sans&nbsp;MS&quot;&nbsp;style=&quot;&quot;&gt;&lt;br&gt;<br>
&lt;/font&gt;&lt;b&gt;&lt;font&nbsp;color=&quot;#000000&quot;&nbsp;face=&quot;Comic&nbsp;Sans&nbsp;MS&quot;&nbsp;style=&quot;&quot;&gt;&lt;font&nbsp;style=&quot;&quot;&gt;TOM&lt;/font&gt;&lt;/font&gt;&lt;/b&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
