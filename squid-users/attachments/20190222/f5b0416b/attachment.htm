<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;<br>
&lt;style&nbsp;type=&quot;text/css&quot;&nbsp;style=&quot;display:none;&quot;&gt;&nbsp;P&nbsp;{margin-top:0;margin-bottom:0;}&nbsp;&lt;/style&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;dir=&quot;ltr&quot;&gt;<br>
&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;<br>
&lt;/div&gt;<br>
Hi&nbsp;All,<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;Thanks&nbsp;a&nbsp;lot!&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;Issue&nbsp;has&nbsp;been&nbsp;solved,&nbsp;hope&nbsp;it's&nbsp;useful&nbsp;for&nbsp;other&nbsp;people&nbsp;if&nbsp;they&nbsp;encounter&nbsp;the&nbsp;same&nbsp;situation&nbsp;as&nbsp;me.&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;--------------------------------------------&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;--require-membership-of=&quot;IBM\Domain&nbsp;Users&quot;&nbsp;with&nbsp;Quotation&nbsp;Mark&nbsp;is&nbsp;not&nbsp;supported,&nbsp;has&nbsp;to&nbsp;be&nbsp;removed&nbsp;as:&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;--require-membership-of=IBM\Domain_Users&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;But&nbsp;what&nbsp;if&nbsp;Domain&nbsp;Group&nbsp;must&nbsp;has&nbsp;a&nbsp;space,&nbsp;use&nbsp;SID&nbsp;to&nbsp;instead&nbsp;of&nbsp;Domain&nbsp;Group&nbsp;Name&nbsp;:&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;--require-membership-of=S-1-5-21-1386769244-779028218-18449361&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;--------------------------------------------&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;debug:&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;To&nbsp;reduce&nbsp;unnecessary&nbsp;logs,&nbsp;it's&nbsp;good&nbsp;to&nbsp;set&nbsp;debug&nbsp;level&nbsp;as&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;debug_options&nbsp;29,9&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;To&nbsp;get&nbsp;SID&nbsp;by&nbsp;winbind&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;wbinfo&nbsp;-n&nbsp;&quot;IBM\Domain&nbsp;Users&quot;&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;To&nbsp;test&nbsp;ntlm_auth<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;ntlm_auth&nbsp;--username=Administrator&nbsp;--require-membership-of=&quot;IBM\Domain_Users&quot;&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;OR&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;ntlm_auth&nbsp;--username=Administrator&nbsp;--require-membership-of=IBM\\Domain_Users&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;OR&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;ntlm_auth&nbsp;--username=Administrator&nbsp;--require-membership-of=&quot;S-1-5-21-1386769244-779028218-18449361&quot;&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;OR&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;ntlm_auth&nbsp;--username=Administrator&nbsp;--require-membership-of=S-1-5-21-1386769244-779028218-18449361&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;EmojiFont,Calibri,Helvetica,sans-serif,'Apple&nbsp;Color&nbsp;Emoji','Segoe&nbsp;UI&nbsp;Emoji',&nbsp;NotoColorEmoji,'Segoe&nbsp;UI&nbsp;Symbol','Android&nbsp;Emoji',EmojiSymbols;&nbsp;font-size:&nbsp;12pt;&quot;&gt;<br>
To&nbsp;join&nbsp;computer&nbsp;as&nbsp;a&nbsp;Domain&nbsp;Member&nbsp;without&nbsp;modify&nbsp;krb5.conf&nbsp;manually.&nbsp;&lt;span&nbsp;title=&quot;:ÂæÆÁ¨ë:&quot;&nbsp;id=&quot;üôÇ&quot;&gt;<br>
üôÇ&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;realm&nbsp;join&nbsp;--user=Administrators&nbsp;ibm.local&nbsp;-v&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;EmojiFont,Calibri,Helvetica,sans-serif,'Apple&nbsp;Color&nbsp;Emoji','Segoe&nbsp;UI&nbsp;Emoji',&nbsp;NotoColorEmoji,'Segoe&nbsp;UI&nbsp;Symbol','Android&nbsp;Emoji',EmojiSymbols;&nbsp;font-size:&nbsp;12pt;&quot;&gt;<br>
But&nbsp;Samba&nbsp;need&nbsp;to&nbsp;be&nbsp;configured&nbsp;manually.&nbsp;&lt;span&nbsp;title=&quot;:ÂæÆÂæÆÁö±Áúâ:&quot;&nbsp;id=&quot;üôÅ&quot;&gt;üôÅ&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;--------------------------------------------&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;Working&nbsp;for&nbsp;me&nbsp;on&nbsp;CentOS7&nbsp;&#43;&nbsp;Squid4.5&nbsp;&#43;&nbsp;Windows&nbsp;AD<br>
&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;color=&quot;#808080&quot;&nbsp;face=&quot;Comic&nbsp;Sans&nbsp;MS&quot;&nbsp;size=&quot;1&quot;&nbsp;style=&quot;font-size:&nbsp;8pt;&quot;&gt;Best&nbsp;regards.&lt;/font&gt;&lt;font&nbsp;color=&quot;#808080&quot;&nbsp;face=&quot;Comic&nbsp;Sans&nbsp;MS&quot;&gt;&lt;br&gt;<br>
&lt;/font&gt;&lt;b&gt;&lt;font&nbsp;color=&quot;#000000&quot;&nbsp;face=&quot;Comic&nbsp;Sans&nbsp;MS&quot;&gt;&lt;font&gt;TOM&lt;/font&gt;&lt;/font&gt;&lt;font&nbsp;face=&quot;Comic&nbsp;Sans&nbsp;MS&quot;&gt;.WANG&lt;/font&gt;&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;signature&quot;&gt;&lt;br&gt;<br>
&lt;div&gt;<br>
&lt;div&nbsp;id=&quot;appendonsend&quot;&gt;&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;Calibri,Helvetica,sans-serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;hr&nbsp;tabindex=&quot;-1&quot;&nbsp;style=&quot;width:&nbsp;98%;&nbsp;display:&nbsp;inline-block;&quot;&gt;<br>
&lt;div&nbsp;id=&quot;divRplyFwdMsg&quot;&nbsp;dir=&quot;ltr&quot;&gt;&lt;font&nbsp;color=&quot;#000000&quot;&nbsp;face=&quot;Calibri,&nbsp;sans-serif&quot;&nbsp;style=&quot;font-size:&nbsp;11pt;&quot;&gt;&lt;b&gt;Âèë‰ª∂‰∫∫:&lt;/b&gt;&nbsp;squid-users&nbsp;&lt;squid-users-bounces@lists.squid-cache.org&gt;&nbsp;‰ª£Ë°®&nbsp;L.P.H.&nbsp;van&nbsp;Belle&nbsp;&lt;belle@bazuin.nl&gt;&lt;br&gt;<br>
&lt;b&gt;ÂèëÈÄÅÊó∂Èó¥:&lt;/b&gt;&nbsp;2019Âπ¥2Êúà21Êó•&nbsp;10:14&lt;br&gt;<br>
&lt;b&gt;Êî∂‰ª∂‰∫∫:&lt;/b&gt;&nbsp;squid-users@lists.squid-cache.org&lt;br&gt;<br>
&lt;b&gt;‰∏ªÈ¢ò:&lt;/b&gt;&nbsp;Re:&nbsp;[squid-users]&nbsp;The&nbsp;issue&nbsp;NTLM_AUTH&nbsp;with&nbsp;--require-membership-of&lt;/font&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;BodyFragment&quot;&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;style=&quot;font-size:&nbsp;11pt;&quot;&gt;<br>
&lt;div&nbsp;class=&quot;PlainText&quot;&gt;I&nbsp;think&nbsp;you&nbsp;problem&nbsp;has&nbsp;todo&nbsp;NT1.&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;assum&nbsp;you&nbsp;already&nbsp;tried&nbsp;the&nbsp;setting&nbsp;in&nbsp;smb.conf&nbsp;:&nbsp;&nbsp;&lt;br&gt;<br>
ntlm&nbsp;auth&nbsp;=&nbsp;&nbsp;ntlmv1-permitted&nbsp;&lt;br&gt;<br>
(which&nbsp;is&nbsp;the&nbsp;alias&nbsp;for&nbsp;yes)&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
And&nbsp;which&nbsp;samba/ntlm_auth&nbsp;version&nbsp;it&nbsp;this?&nbsp;Standard&nbsp;centos?&nbsp;&lt;br&gt;<br>
I&nbsp;must&nbsp;say&nbsp;i&nbsp;noob&nbsp;in&nbsp;Centos,&nbsp;so&nbsp;i'll&nbsp;shown&nbsp;you&nbsp;what&nbsp;i&nbsp;know&nbsp;from&nbsp;debian.&nbsp;&lt;br&gt;<br>
And&nbsp;it&nbsp;might&nbsp;be&nbsp;better&nbsp;to&nbsp;switch&nbsp;to&nbsp;kerberos&nbsp;auth.&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;know&nbsp;there&nbsp;are&nbsp;problems&nbsp;with&nbsp;the&nbsp;groups&nbsp;in&nbsp;ntlm_auth&nbsp;and&nbsp;its&nbsp;detection.&lt;br&gt;<br>
If&nbsp;i&nbsp;recall&nbsp;right,&nbsp;a&nbsp;patch&nbsp;passed&nbsp;recently,&nbsp;so&nbsp;waiting&nbsp;for&nbsp;that&nbsp;on&nbsp;the&nbsp;next&nbsp;samba&nbsp;version.<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;use&nbsp;the&nbsp;following.&lt;br&gt;<br>
&lt;br&gt;<br>
auth_param&nbsp;negotiate&nbsp;program&nbsp;/usr/lib/squid/negotiate_wrapper_auth&nbsp;\&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;--kerberos&nbsp;/usr/lib/squid/negotiate_kerberos_auth&nbsp;-s&nbsp;HTTP/$(hostname&nbsp;-f)@MY_REALM&nbsp;\&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;--ntlm&nbsp;/usr/bin/ntlm_auth&nbsp;--helper-protocol=gss-spnego&nbsp;--domain=NTDOM&lt;br&gt;<br>
&lt;br&gt;<br>
With&nbsp;ldap&nbsp;fallback&lt;br&gt;<br>
auth_param&nbsp;basic&nbsp;program&nbsp;/usr/lib/squid/basic_ldap_auth&nbsp;-R&nbsp;-v&nbsp;3&nbsp;\&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-b&nbsp;&quot;ou=Office,dc=some,dc=domain,dc=tld&quot;&nbsp;\&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-D&nbsp;ldap-bind@MY_REALM&nbsp;\&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-W&nbsp;/etc/squid/private/ldap-bind&nbsp;\&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-f&nbsp;sAMAccountName=%s&nbsp;\&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-H&nbsp;ldaps://dc1.FQDN&nbsp;\&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-H&nbsp;ldaps://dc2.FQDN&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;ldap-bind&nbsp;account,&nbsp;needs,&nbsp;no&nbsp;pre-check&nbsp;on&nbsp;kerberos&nbsp;auth&nbsp;and&nbsp;disable&nbsp;passwd&nbsp;expire.<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;group&nbsp;part,&nbsp;now&nbsp;im&nbsp;not&nbsp;using&nbsp;it&nbsp;myself&nbsp;but&nbsp;per&nbsp;example.&nbsp;Should&nbsp;be&nbsp;something&nbsp;like&nbsp;this.<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Basicly&nbsp;its&nbsp;:&nbsp;&lt;br&gt;<br>
Search&nbsp;for&nbsp;%LOGIN&nbsp;from&nbsp;this&nbsp;point&nbsp;:&nbsp;DC=office,DC=some,DC=domain,DC=tld&nbsp;&nbsp;And&nbsp;get&nbsp;person-%a&nbsp;from&nbsp;group&nbsp;Proxygroups&lt;br&gt;<br>
&lt;br&gt;<br>
external_acl_type&nbsp;ldapgroup&nbsp;%LOGIN&nbsp;/usr/lib/squid/squid_ldap_group&nbsp;-b&nbsp;DC=office,DC=some,DC=domain,DC=tld&nbsp;\&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-f&nbsp;(&amp;(objectclass=person)(cn=%v)(groupMembership=cn=%a,ou=Proxygroups,DC=office,DC=some,DC=domain,DC=tld))&nbsp;\&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-D&nbsp;ldap-bind@MY_REALM&nbsp;\&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-W&nbsp;/etc/squid/private/ldap-bind&nbsp;\&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-H&nbsp;ldaps://dc1.FQDN&nbsp;\&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-H&nbsp;ldaps://dc2.FQDN&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
external_acl_type&nbsp;AD_Group&nbsp;%LOGIN&nbsp;/usr/lib64/squid/squid_ldap_group&nbsp;-b&nbsp;DC=office,DC=some,DC=domain,DC=tld&nbsp;\&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-s&nbsp;sub&nbsp;\&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-R&nbsp;-v3&nbsp;\&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-D&nbsp;ldap-bind@MY_REALM&nbsp;\&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-W&nbsp;/etc/squid/private/ldap-bind&nbsp;\&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-f&nbsp;&quot;(&amp;(objectclass=person)(userPrincipalName=%v)(memberof=cn=%a,ou=Proxygroups,DC=office,DC=some,DC=domain,DC=tld))&quot;&nbsp;\&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-H&nbsp;ldaps://dc1.FQDN&nbsp;\&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-H&nbsp;ldaps://dc2.FQDN&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;Hope&nbsp;this&nbsp;helps&nbsp;a&nbsp;bit.&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
Greetz,&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
Louis&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;-----Oorspronkelijk&nbsp;bericht-----&lt;br&gt;<br>
&gt;&nbsp;Van:&nbsp;squid-users&nbsp;&lt;br&gt;<br>
&gt;&nbsp;[&lt;a&nbsp;href=&quot;mailto:squid-users-bounces@lists.squid-cache.org&quot;&gt;mailto:squid-users-bounces@lists.squid-cache.org&lt;/a&gt;]&nbsp;Namens<br>
&lt;br&gt;<br>
&gt;&nbsp;Amos&nbsp;Jeffries&lt;br&gt;<br>
&gt;&nbsp;Verzonden:&nbsp;donderdag&nbsp;21&nbsp;februari&nbsp;2019&nbsp;10:18&lt;br&gt;<br>
&gt;&nbsp;Aan:&nbsp;squid-users@lists.squid-cache.org&lt;br&gt;<br>
&gt;&nbsp;Onderwerp:&nbsp;Re:&nbsp;[squid-users]&nbsp;The&nbsp;issue&nbsp;NTLM_AUTH&nbsp;with&nbsp;&lt;br&gt;<br>
&gt;&nbsp;--require-membership-of&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;On&nbsp;21/02/19&nbsp;9:35&nbsp;pm,&nbsp;WANG&nbsp;TOM&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;--------------------------------------------------------------&lt;br&gt;<br>
&gt;&nbsp;--------------------------------&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;And&nbsp;I&nbsp;have&nbsp;tested&nbsp;run&nbsp;ntlm_auth&nbsp;directly,&nbsp;it&nbsp;looks&nbsp;successfully.&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;&quot;ntlm_auth&nbsp;--require-membership-of='IBM\Domain&nbsp;Users'&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;--username=Administrators&nbsp;--password=123456&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;NT_STATUS_OK:&nbsp;The&nbsp;operation&nbsp;completed&nbsp;successfully.&nbsp;(0x0)&quot;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;--------------------------------------------------------------&lt;br&gt;<br>
&gt;&nbsp;--------------------------------&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;I&nbsp;have&nbsp;no&nbsp;idea&nbsp;what&nbsp;I&nbsp;have&nbsp;missed&nbsp;or&nbsp;made&nbsp;mistake,&nbsp;could&nbsp;&lt;br&gt;<br>
&gt;&nbsp;someone&nbsp;can&nbsp;help.&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;Very&nbsp;likely&nbsp;that&nbsp;whitespace&nbsp;in&nbsp;the&nbsp;parameter&nbsp;string.&nbsp;Squid&nbsp;does&nbsp;not&lt;br&gt;<br>
&gt;&nbsp;support&nbsp;double-quote&nbsp;encoding&nbsp;of&nbsp;most&nbsp;parameters.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;That&nbsp;means&nbsp;the&nbsp;helper&nbsp;will&nbsp;be&nbsp;passed&nbsp;two&nbsp;different&nbsp;environment&lt;br&gt;<br>
&gt;&nbsp;arguments.&nbsp;&nbsp;One&nbsp;being&nbsp;&quot;--require-membership-of='IBM\Domain&quot;.&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;second&nbsp;being&nbsp;&quot;Users'&quot;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;IIRC&nbsp;you&nbsp;can&nbsp;probably&nbsp;%-encode&nbsp;that&nbsp;(as&nbsp;&quot;IBM\Domain%20Users&quot;).&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;If&nbsp;not&nbsp;that&nbsp;then&nbsp;you&nbsp;are&nbsp;going&nbsp;to&nbsp;have&nbsp;to&nbsp;debug&nbsp;what&nbsp;the&nbsp;&lt;br&gt;<br>
&gt;&nbsp;helper&nbsp;is&nbsp;doing.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;NP:&nbsp;This&nbsp;helper&nbsp;is&nbsp;provided&nbsp;by&nbsp;Samba,&nbsp;it&nbsp;is&nbsp;not&nbsp;part&nbsp;of&nbsp;Squid.&nbsp;So&lt;br&gt;<br>
&gt;&nbsp;questions&nbsp;about&nbsp;its&nbsp;abilities&nbsp;and&nbsp;encodings&nbsp;supported&nbsp;are&nbsp;a&nbsp;&lt;br&gt;<br>
&gt;&nbsp;question&nbsp;for&lt;br&gt;<br>
&gt;&nbsp;their&nbsp;help&nbsp;channels.&nbsp;Someone&nbsp;here&nbsp;_might_&nbsp;know,&nbsp;but&nbsp;do&nbsp;not&nbsp;&lt;br&gt;<br>
&gt;&nbsp;count&nbsp;on&nbsp;that.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;Amos&lt;br&gt;<br>
&gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&gt;&nbsp;squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&gt;&nbsp;squid-users@lists.squid-cache.org&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
squid-users@lists.squid-cache.org&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
