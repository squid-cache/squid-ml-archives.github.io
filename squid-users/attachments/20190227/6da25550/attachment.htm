<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;div&gt;Hi,&nbsp;is&nbsp;there&nbsp;any&nbsp;way&nbsp;to&nbsp;get&nbsp;the&nbsp;port&nbsp;number&nbsp;of&nbsp;the&nbsp;connecting&nbsp;client&nbsp;available&nbsp;to&nbsp;the&nbsp;adapter&nbsp;through&nbsp;ECAP&nbsp;interface?&nbsp;Not&nbsp;just&nbsp;the&nbsp;IP&nbsp;but&nbsp;the&nbsp;port&nbsp;number&nbsp;as&nbsp;well.&nbsp;I&nbsp;found&nbsp;that&nbsp;I&nbsp;can&nbsp;do&nbsp;that&nbsp;by&nbsp;a&nbsp;tiny&nbsp;change&nbsp;but&nbsp;it&nbsp;has&nbsp;to&nbsp;be&nbsp;int&nbsp;he&nbsp;squid&nbsp;source:&lt;/div&gt;&lt;div&gt;In&nbsp;adaptation\ecap\XActionRep.cc,&nbsp;method&nbsp;&lt;span&gt;clientIpValue&lt;/span&gt;:&lt;/div&gt;&lt;div&gt;I&nbsp;added&nbsp;the&nbsp;sprintf:&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;div&gt;sprintf(&amp;ntoabuf[strlen(ntoabuf)],&nbsp;&quot;:%d&quot;,&nbsp;client_addr.port());&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;libecap::Area::FromTempBuffer(ntoabuf,&nbsp;strlen(ntoabuf));&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;adapter&nbsp;then&nbsp;has&nbsp;access&nbsp;to&nbsp;the&nbsp;client's&nbsp;connecting&nbsp;port.&nbsp;I&nbsp;use&nbsp;that&nbsp;information&nbsp;to&nbsp;then&nbsp;look&nbsp;up&nbsp;the&nbsp;PID&nbsp;of&nbsp;the&nbsp;connecting&nbsp;process&nbsp;and&nbsp;hence&nbsp;user,&nbsp;using&nbsp;a&nbsp;Windows&nbsp;dll&nbsp;and&nbsp;method&nbsp;with&nbsp;increased&nbsp;privs.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;is&nbsp;there&nbsp;any&nbsp;existing&nbsp;way&nbsp;to&nbsp;get&nbsp;that&nbsp;port&nbsp;without&nbsp;a&nbsp;squid&nbsp;change?&nbsp;And&nbsp;if&nbsp;not&nbsp;then&nbsp;would&nbsp;the&nbsp;team&nbsp;be&nbsp;amenable&nbsp;to&nbsp;my&nbsp;joining&nbsp;as&nbsp;a&nbsp;dev&nbsp;contributor&nbsp;and&nbsp;submitting&nbsp;that?&nbsp;It&nbsp;could&nbsp;be&nbsp;as&nbsp;a&nbsp;separate&nbsp;value/option&nbsp;so&nbsp;as&nbsp;to&nbsp;not&nbsp;break&nbsp;any&nbsp;existing&nbsp;apps&nbsp;relying&nbsp;on&nbsp;that&nbsp;particular&nbsp;string&nbsp;just&nbsp;having&nbsp;the&nbsp;IP.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Russel&nbsp;McDonald&lt;/div&gt;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;ydpb2a7e191yahoo-style-wrap&quot;&nbsp;style=&quot;font-family:Helvetica&nbsp;Neue,&nbsp;Helvetica,&nbsp;Arial,&nbsp;sans-serif;font-size:16px;&quot;&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
