<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hello,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Very&nbsp;big&nbsp;fan&nbsp;of&nbsp;Squid&nbsp;software,&nbsp;trying&nbsp;to&nbsp;get&nbsp;to&nbsp;know&nbsp;it&nbsp;better.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;A&nbsp;current&nbsp;use&nbsp;case&nbsp;of&nbsp;mine&nbsp;that&nbsp;I&nbsp;require&nbsp;is&nbsp;would&nbsp;be&nbsp;for&nbsp;squid&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;block&nbsp;as&nbsp;it&nbsp;currently&nbsp;does&nbsp;via&nbsp;acl&nbsp;url_regex&nbsp;badurl,&nbsp;just&nbsp;that&nbsp;not&nbsp;from&nbsp;a&nbsp;string&nbsp;inside&nbsp;the&nbsp;configuration&nbsp;file&nbsp;or&nbsp;a&nbsp;file&nbsp;containing&nbsp;the&nbsp;strings&nbsp;on&nbsp;the&nbsp;OS,&nbsp;but&nbsp;from&nbsp;a&nbsp;MySQL&nbsp;database.&nbsp;(Imagine&nbsp;a&nbsp;simple&nbsp;table&nbsp;=&nbsp;sites,&nbsp;with&nbsp;rows&nbsp;=&nbsp;badurl1,&nbsp;badurl2,&nbsp;badurl3.&nbsp;If&nbsp;client&nbsp;matches&nbsp;badurl1&nbsp;they&nbsp;get&nbsp;blockpage)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1.1)&nbsp;Would&nbsp;this&nbsp;be&nbsp;possible? &lt;br&gt;1.2)&nbsp;Would&nbsp;this&nbsp;be&nbsp;&#39;&#39;efficient&#39;&#39;?&nbsp;(imagining&nbsp;a&nbsp;lot&nbsp;of&nbsp;various&nbsp;traffic&nbsp;and&nbsp;for&nbsp;each&nbsp;one&nbsp;querying&nbsp;the&nbsp;DB)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;And&nbsp;another&nbsp;question&nbsp;- &lt;/div&gt;&lt;div&gt;I&#39;m&nbsp;attempting&nbsp;to&nbsp;write&nbsp;a&nbsp;prototype&nbsp;for&nbsp;a&nbsp;helper&nbsp;in&nbsp;python&lt;br&gt;&lt;div&gt;&lt;br&gt;ext_py_acl:&lt;/div&gt;&lt;div&gt;#!/usr/bin/python&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;import&nbsp;sys&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;while&nbsp;True:&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;line&nbsp;=&nbsp;sys.stdin.readline()&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;if&nbsp;(line.find(&quot;badstring&quot;)&nbsp;==&nbsp;-1):&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp;sys.stdout.write(&nbsp;&#39;ERR\n&#39;&nbsp;)&lt;/div&gt;&lt;div&gt; &nbsp; &nbsp;else:&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;sys.stdout.write(&nbsp;&#39;OK\n&#39;&nbsp;)&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;squid.conf:&lt;br&gt;external_acl_type&nbsp;blockscript&nbsp;%URI&nbsp;/usr/local/squid/libexec/ext_py_acl &lt;/div&gt;&lt;div&gt; &lt;br&gt;&lt;/div&gt;&lt;div&gt;2.1)&nbsp;When&nbsp;running&nbsp;this&nbsp;not&nbsp;with&nbsp;squid&nbsp;I&nbsp;pass&nbsp;random&nbsp;strings&nbsp;and&nbsp;it&nbsp;gives&nbsp;me&nbsp;OK&nbsp;via&nbsp;stdout&nbsp;and&nbsp;if&nbsp;i&nbsp;pass&nbsp;on&nbsp;something&nbsp;with&nbsp;&#39;badstring&#39;&nbsp;I&nbsp;receive&nbsp;an&nbsp;ERR&nbsp;-&nbsp;according&nbsp;to&nbsp;all&nbsp;the&nbsp;docs&nbsp;i&#39;ve&nbsp;read&nbsp;-&nbsp;should&nbsp;work&nbsp;on&nbsp;squid.&lt;/div&gt;&lt;div&gt;What&nbsp;actually&nbsp;happens&nbsp;is&nbsp;the&nbsp;helper&nbsp;processes&nbsp;begin&nbsp;spawning,&nbsp;1/5,&nbsp;then&nbsp;another&nbsp;1/5,&nbsp;until&nbsp;they&nbsp;fill&nbsp;up&nbsp;to&nbsp;5/5&nbsp;(tried&nbsp;setting&nbsp;max&nbsp;to&nbsp;50&nbsp;-&nbsp;they&nbsp;filled&nbsp;up&nbsp;to&nbsp;50)&nbsp;and&nbsp;seem&nbsp;to&nbsp;somehow&nbsp;hang. &lt;br&gt;When&nbsp;passing&nbsp;-k&nbsp;shutdown&nbsp;to&nbsp;squid&nbsp;I&nbsp;see&nbsp;some&nbsp;weird&nbsp;gibberish&nbsp;logs&nbsp;e.g.:&lt;br&gt;&lt;div&gt;[Errno&nbsp;32]&nbsp;Broken&nbsp;pipe[Errno&nbsp;32]&nbsp;Broken&nbsp;pipesys.stdout.write(&nbsp;&#39;ERR\n&#39;&nbsp;)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Could&nbsp;someone&nbsp;advise&nbsp;on&nbsp;how&nbsp;to&nbsp;troubleshoot&nbsp;this&nbsp;further&nbsp;and&nbsp;get&nbsp;the&nbsp;helpers&nbsp;running?&nbsp;Or&nbsp;is&nbsp;there&nbsp;something&nbsp;im&nbsp;lacking&nbsp;here?&lt;br&gt;&lt;br&gt;Regards,&lt;/div&gt;&lt;div&gt;Lukas&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
