<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;there, &lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&#39;m&nbsp;hosting&nbsp;two&nbsp;squid&nbsp;servers&nbsp;(Version&nbsp;4.6)&nbsp;on&nbsp;CentOS&nbsp;in&nbsp;Azure,&nbsp;which&nbsp;are&nbsp;placed&nbsp;behing&nbsp;an&nbsp;Azure&nbsp;load&nbsp;balancer. &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;LB&nbsp;has&nbsp;a&nbsp;health&nbsp;probe&nbsp;which&nbsp;constantly&nbsp;polls&nbsp;the&nbsp;squid&nbsp;servers&nbsp;on&nbsp;port&nbsp;3128.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;In&nbsp;the&nbsp;access.log,&nbsp;I&nbsp;can&nbsp;find&nbsp;a&nbsp;whole&nbsp;lot&nbsp;of&nbsp;entries&nbsp;like:&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1557738944.935 &nbsp; &nbsp; &nbsp;0&nbsp;168.63.129.16&nbsp;NONE/000&nbsp;0&nbsp;NONE&nbsp;error:transaction-end-before-headers&nbsp;-&nbsp;HIER_NONE/-&nbsp;-&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Basically,&nbsp;the&nbsp;log&nbsp;gets&nbsp;flooded&nbsp;with&nbsp;this&nbsp;every&nbsp;few&nbsp;seconds.&nbsp;The&nbsp;source&nbsp;IP&nbsp;168.63.129.16&nbsp;is&nbsp;a&nbsp;platform&nbsp;IP&nbsp;of&nbsp;the&nbsp;Azure&nbsp;software-defined&nbsp;network,&nbsp;in&nbsp;this&nbsp;case&nbsp;it&nbsp;is&nbsp;the&nbsp;source&nbsp;of&nbsp;the&nbsp;LB&nbsp;health&nbsp;probe. &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;tried&nbsp;to&nbsp;filter&nbsp;these&nbsp;log&nbsp;entries&nbsp;by&nbsp;using&nbsp;the&nbsp;access_log&nbsp;directive.&nbsp;E.g.:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Option&nbsp;1)&lt;/div&gt;&lt;div&gt;&lt;div&gt;acl&nbsp;azurelb&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://168.63.129.16/32&quot;&gt;168.63.129.16/32&lt;/a&gt;&lt;/div&gt;&lt;div&gt;access_log&nbsp;none&nbsp;azurelb&lt;/div&gt;&lt;div&gt;access_log&nbsp;daemon:/var/log/squid/access.log&nbsp;squid&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Option&nbsp;2) &nbsp;(read&nbsp;about&nbsp;a&nbsp;bug&nbsp;in&nbsp;an&nbsp;older&nbsp;3.x&nbsp;version,&nbsp;which&nbsp;can&nbsp;be&nbsp;worked&nbsp;around&nbsp;by&nbsp;using&nbsp;this)&lt;/div&gt;&lt;div&gt;acl&nbsp;azurelb&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://168.63.129.16/32&quot;&gt;168.63.129.16/32&lt;/a&gt;&lt;/div&gt;&lt;div&gt;access_log&nbsp;daemon:/var/log/squid/access.log&nbsp;squid&nbsp;!azurelb  &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Option&nbsp;3)&lt;/div&gt;&lt;div&gt;&lt;div&gt;acl&nbsp;azurelbprobe&nbsp;url_regex&nbsp;^error:transaction-end-before-headers  &lt;br&gt;&lt;/div&gt;&lt;div&gt;access_log&nbsp;none&nbsp;azurelbprobe  &lt;br&gt;&lt;/div&gt;&lt;div&gt;access_log&nbsp;daemon:/var/log/squid/access.log&nbsp;squid &lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;None&nbsp;of&nbsp;this&nbsp;worked.&nbsp;I&nbsp;still&nbsp;get&nbsp;the&nbsp;same&nbsp;entries&nbsp;in&nbsp;access.log. &lt;/div&gt;&lt;div&gt;Any&nbsp;suggestion&nbsp;or&nbsp;hint&nbsp;will&nbsp;be&nbsp;appreciated.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;&amp;&nbsp;regards&lt;br&gt;Henning&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
