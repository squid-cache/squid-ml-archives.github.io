<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hi&nbsp;all,&lt;/div&gt;&lt;div&gt;   &nbsp;I&#39;m&nbsp;trying&nbsp;to&nbsp;install&nbsp;a&nbsp;brand&nbsp;new&nbsp;Squid&nbsp;4.7&nbsp;on&nbsp;an&nbsp;Arch&nbsp;GNU/Linux&nbsp;(Kernel&nbsp;5.0.7),&nbsp;authorizing&nbsp;its&nbsp;users&nbsp;against&nbsp;Active&nbsp;Directory,&nbsp;based&nbsp;on&nbsp;a&nbsp;Windows&nbsp;2008&nbsp;R2&nbsp;Domain.&lt;/div&gt;&lt;div&gt;   &nbsp;I&nbsp;configured&nbsp;samba4&nbsp;on&nbsp;the&nbsp;Arch&nbsp;machine,&nbsp;and&nbsp;it&nbsp;looks&nbsp;working&nbsp;well.&nbsp;wbinfo&nbsp;commands&nbsp;get&nbsp;executed&nbsp;and&nbsp;with&nbsp;correct&nbsp;output.&lt;/div&gt;&lt;div&gt;   &nbsp;But&nbsp;when&nbsp;using&nbsp;the&nbsp;Squid,&nbsp;I&nbsp;get&nbsp;all&nbsp;the&nbsp;time&nbsp;messages&nbsp;like:&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;Set&nbsp;Current&nbsp;Directory&nbsp;to&nbsp;/var/spool/squid&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;Starting&nbsp;Squid&nbsp;Cache&nbsp;version&nbsp;4.7&nbsp;for&nbsp;x86_64-pc-linux-gnu...&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;Service&nbsp;Name:&nbsp;squid&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;Process&nbsp;ID&nbsp;7584&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;Process&nbsp;Roles:&nbsp;worker&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;With&nbsp;1024&nbsp;file&nbsp;descriptors&nbsp;available&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;Initializing&nbsp;IP&nbsp;Cache...&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;DNS&nbsp;Socket&nbsp;created&nbsp;at&nbsp;[::],&nbsp;FD&nbsp;7&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;DNS&nbsp;Socket&nbsp;created&nbsp;at&nbsp;0.0.0.0,&nbsp;FD&nbsp;10&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;Adding&nbsp;domain&nbsp;ciabernal.local&nbsp;from&nbsp;/etc/resolv.conf&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;Adding&nbsp;domain&nbsp;ciabernal.local&nbsp;from&nbsp;/etc/resolv.conf&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;Adding&nbsp;nameserver&nbsp;192.168.32.5&nbsp;from&nbsp;/etc/resolv.conf&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;helperOpenServers:&nbsp;Starting&nbsp;0/10&nbsp;&#39;negotiate_wrapper&#39;&nbsp;processes&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;helperStatefulOpenServers:&nbsp;No&nbsp;&#39;negotiate_wrapper&#39;&nbsp;processes&nbsp;needed.&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;helperOpenServers:&nbsp;Starting&nbsp;0/10&nbsp;&#39;ntlm_auth&#39;&nbsp;processes&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;helperStatefulOpenServers:&nbsp;No&nbsp;&#39;ntlm_auth&#39;&nbsp;processes&nbsp;needed.&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;helperOpenServers:&nbsp;Starting&nbsp;0/10&nbsp;&#39;basic_ldap_auth&#39;&nbsp;processes&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;helperOpenServers:&nbsp;No&nbsp;&#39;basic_ldap_auth&#39;&nbsp;processes&nbsp;needed.&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;helperOpenServers:&nbsp;Starting&nbsp;0/5&nbsp;&#39;ext_ldap_group_acl&#39;&nbsp;processes&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;helperOpenServers:&nbsp;No&nbsp;&#39;ext_ldap_group_acl&#39;&nbsp;processes&nbsp;needed.&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;Logfile:&nbsp;opening&nbsp;log&nbsp;/var/log/squid/access.log&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;WARNING:&nbsp;log&nbsp;name&nbsp;now&nbsp;starts&nbsp;with&nbsp;a&nbsp;module&nbsp;name.&nbsp;Use&nbsp;&#39;stdio:/var/log/squid/access.log&#39;&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;Local&nbsp;cache&nbsp;digest&nbsp;enabled;&nbsp;rebuild/rewrite&nbsp;every&nbsp;3600/3600&nbsp;sec&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;Store&nbsp;logging&nbsp;disabled&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;Swap&nbsp;maxSize&nbsp;0&nbsp;+&nbsp;262144&nbsp;KB,&nbsp;estimated&nbsp;20164&nbsp;objects&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;Target&nbsp;number&nbsp;of&nbsp;buckets:&nbsp;1008&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;Using&nbsp;8192&nbsp;Store&nbsp;buckets&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;Max&nbsp;Mem&nbsp; size:&nbsp;262144&nbsp;KB&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;Max&nbsp;Swap&nbsp;size:&nbsp;0&nbsp;KB&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;Using&nbsp;Least&nbsp;Load&nbsp;store&nbsp;dir&nbsp;selection&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;Set&nbsp;Current&nbsp;Directory&nbsp;to&nbsp;/var/spool/squid&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;Finished&nbsp;loading&nbsp;MIME&nbsp;types&nbsp;and&nbsp;icons.&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;HTCP&nbsp;Disabled.&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;Squid&nbsp;plugin&nbsp;modules&nbsp;loaded:&nbsp;0&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;Adaptation&nbsp;support&nbsp;is&nbsp;off.&lt;br&gt;2019/05/27&nbsp;04:08:12&nbsp;kid1|&nbsp;Accepting&nbsp;HTTP&nbsp;Socket&nbsp;connections&nbsp;at&nbsp;local=[::]:3128&nbsp;remote=[::]&nbsp;FD&nbsp;12&nbsp;flags=9&lt;br&gt;2019/05/27&nbsp;04:08:13&nbsp;kid1|&nbsp;storeLateRelease:&nbsp;released&nbsp;0&nbsp;objects&lt;br&gt;2019/05/27&nbsp;04:08:22&nbsp;kid1|&nbsp;Starting&nbsp;new&nbsp;negotiateauthenticator&nbsp;helpers...&lt;br&gt;2019/05/27&nbsp;04:08:22&nbsp;kid1|&nbsp;helperOpenServers:&nbsp;Starting&nbsp;1/10&nbsp;&#39;negotiate_wrapper&#39;&nbsp;processes&lt;br&gt;negotiate_kerberos_auth.cc(489):&nbsp;pid=7586&nbsp;:2019/05/27&nbsp;04:08:22|&nbsp;negotiate_kerberos_auth:&nbsp;INFO:&nbsp;Starting&nbsp;version&nbsp;3.1.0sq&lt;br&gt;negotiate_kerberos_auth.cc(548):&nbsp;pid=7586&nbsp;:2019/05/27&nbsp;04:08:22|&nbsp;negotiate_kerberos_auth:&nbsp;INFO:&nbsp;Setting&nbsp;keytab&nbsp;to&nbsp;FILE:/etc/krb5.keytab&lt;br&gt;negotiate_kerberos_auth.cc(572):&nbsp;pid=7586&nbsp;:2019/05/27&nbsp;04:08:22|&nbsp;negotiate_kerberos_auth:&nbsp;INFO:&nbsp;Changed&nbsp;keytab&nbsp;to&nbsp;MEMORY:negotiate_kerberos_auth_7586&lt;br&gt;directory_create_or_exist_strict:&nbsp;invalid&nbsp;ownership&nbsp;on&nbsp;directory&nbsp;/var/cache/samba/msg.lock&lt;br&gt;cmdline_messaging_context:&nbsp;Unable&nbsp;to&nbsp;initialize&nbsp;messaging&nbsp;context.&lt;br&gt;lp_load_ex:&nbsp;refreshing&nbsp;parameters&lt;br&gt;Initialising&nbsp;global&nbsp;parameters&lt;br&gt;rlimit_max:&nbsp;increasing&nbsp;rlimit_max&nbsp;(1024)&nbsp;to&nbsp;minimum&nbsp;Windows&nbsp;limit&nbsp;(16384)&lt;br&gt;Processing&nbsp;section&nbsp;&quot;[Global]&quot;&lt;br&gt;GENSEC&nbsp;backend&nbsp;&#39;gssapi_spnego&#39;&nbsp;registered&lt;br&gt;GENSEC&nbsp;backend&nbsp;&#39;gssapi_krb5&#39;&nbsp;registered&lt;br&gt;GENSEC&nbsp;backend&nbsp;&#39;gssapi_krb5_sasl&#39;&nbsp;registered&lt;br&gt;GENSEC&nbsp;backend&nbsp;&#39;spnego&#39;&nbsp;registered&lt;br&gt;GENSEC&nbsp;backend&nbsp;&#39;schannel&#39;&nbsp;registered&lt;br&gt;GENSEC&nbsp;backend&nbsp;&#39;naclrpc_as_system&#39;&nbsp;registered&lt;br&gt;GENSEC&nbsp;backend&nbsp;&#39;sasl-EXTERNAL&#39;&nbsp;registered&lt;br&gt;GENSEC&nbsp;backend&nbsp;&#39;ntlmssp&#39;&nbsp;registered&lt;br&gt;GENSEC&nbsp;backend&nbsp;&#39;ntlmssp_resume_ccache&#39;&nbsp;registered&lt;br&gt;GENSEC&nbsp;backend&nbsp;&#39;http_basic&#39;&nbsp;registered&lt;br&gt;GENSEC&nbsp;backend&nbsp;&#39;http_ntlm&#39;&nbsp;registered&lt;br&gt;GENSEC&nbsp;backend&nbsp;&#39;http_negotiate&#39;&nbsp;registered&lt;br&gt;GENSEC&nbsp;backend&nbsp;&#39;krb5&#39;&nbsp;registered&lt;br&gt;GENSEC&nbsp;backend&nbsp;&#39;fake_gssapi_krb5&#39;&nbsp;registered&lt;br&gt;Got&nbsp;NTLMSSP&nbsp;neg_flags=0xe2088297&lt;br&gt;Got&nbsp;user=[user01]&nbsp;domain=[mydomain]&nbsp;workstation=[MYPC]&nbsp;len1=24&nbsp;len2=304&lt;br&gt;Login&nbsp;for&nbsp;user&nbsp;[mydomain]\[user01]@[MYPC]&nbsp;failed&nbsp;due&nbsp;to&nbsp;[Reading&nbsp;winbind&nbsp;reply&nbsp;failed!]&lt;br&gt;GENSEC&nbsp;login&nbsp;failed:&nbsp;NT_STATUS_UNSUCCESSFUL&lt;br&gt;2019/05/27&nbsp;04:08:22&nbsp;kid1|&nbsp;ERROR:&nbsp;Negotiate&nbsp;Authentication&nbsp;validating&nbsp;user.&nbsp;Result:&nbsp;{result=BH,&nbsp;notes={message:&nbsp;NT_STATUS_UNSUCCESSFUL&nbsp;NT_STATUS_UNSUCCESSFUL;&nbsp;}}&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;   &nbsp;Some&nbsp;questions&nbsp;I&nbsp;have:&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1)&nbsp;About&nbsp;the&nbsp;message:&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
directory_create_or_exist_strict:&nbsp;invalid&nbsp;ownership&nbsp;on&nbsp;directory&nbsp;/var/cache/samba/msg.lock&lt;br&gt;cmdline_messaging_context:&nbsp;Unable&nbsp;to&nbsp;initialize&nbsp;messaging&nbsp;context.&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;   &nbsp;Checking&nbsp;the&nbsp;permissions,&nbsp;it&nbsp;has&nbsp;755,&nbsp;so&nbsp;I&nbsp;really&nbsp;do&nbsp;not&nbsp;understand&nbsp;why&nbsp;it´s&nbsp;showing&nbsp;this.&nbsp;Don&#39;t&nbsp;know&nbsp;if&nbsp;there&nbsp;is&nbsp;some&nbsp;ownership&nbsp;rule&nbsp;or&nbsp;something&nbsp;like&nbsp;this...&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;2)&nbsp;About&nbsp;the&nbsp;message:&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
Login&nbsp;for&nbsp;user&nbsp;[mydomain]\[user01]@[MYPC]&nbsp;failed&nbsp;due&nbsp;to&nbsp;[Reading&nbsp;winbind&nbsp;reply&nbsp;failed!]&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;   &nbsp;I&nbsp;tried&nbsp;debugging&nbsp;Samba,&nbsp;but&nbsp;see&nbsp;no&nbsp;message&nbsp;indicating&nbsp;something&nbsp;here.&nbsp;Any&nbsp;help&nbsp;would&nbsp;be&nbsp;really&nbsp;appreciated.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;3)&nbsp;Is&nbsp;there&nbsp;any&nbsp;example&nbsp;configuration&nbsp;for&nbsp;Squid&nbsp;4&nbsp;+&nbsp;Samba&nbsp;4&nbsp;+&nbsp;Active&nbsp;Directory?&nbsp;Sorry&nbsp;for&nbsp;this,&nbsp;but&nbsp;I&nbsp;see&nbsp;tons&nbsp;of&nbsp;information&nbsp;about&nbsp;Active&nbsp;Directory&nbsp;for&nbsp;Samba&nbsp;4&nbsp;and&nbsp;Squid3,&nbsp;but&nbsp;not&nbsp;much&nbsp;about&nbsp;the&nbsp;configuration&nbsp;I&#39;m&nbsp;trying&nbsp;to&nbsp;have.&lt;/div&gt;&lt;div&gt;   &nbsp;I&nbsp;see&nbsp;several&nbsp;differences,&nbsp;for&nbsp;instance:&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1)&nbsp;Use&nbsp;of&nbsp;&quot;negotiate_wrapper&quot;.&lt;/div&gt;&lt;div&gt;2)&nbsp;Several&nbsp;aspects&nbsp;of&nbsp;files&nbsp;located&nbsp;on&nbsp;/var/lib/squid,&nbsp;where&nbsp;I&nbsp;do&nbsp;not&nbsp;see&nbsp;the&nbsp;equivalence&nbsp;between&nbsp;them&nbsp;and&nbsp;the&nbsp;ones&nbsp;listed&nbsp;for&nbsp;Squid3,&nbsp;and&nbsp;visible&nbsp;on&nbsp;tons&nbsp;of&nbsp;documentation.&lt;/div&gt;&lt;div&gt;3)&nbsp;Some&nbsp;docs&nbsp;say&nbsp;NTLM&nbsp;is&nbsp;deprecated,&nbsp;some&nbsp;are&nbsp;still&nbsp;showing&nbsp;ntlm_auth&nbsp;on&nbsp;config&nbsp;files.&nbsp;This&nbsp;is&nbsp;why&nbsp;I&nbsp;really&nbsp;need&nbsp;to&nbsp;see&nbsp;if&nbsp;there&nbsp;is&nbsp;any&nbsp;example&nbsp;for&nbsp;this&nbsp;config...&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;   &nbsp;Thanks&nbsp;a&nbsp;lot&nbsp;in&nbsp;advance&nbsp;for&nbsp;your&nbsp;time&nbsp;and&nbsp;attention,&nbsp;and&nbsp;best&nbsp;regards.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_signature&quot;&nbsp;data-smartmail=&quot;gmail_signature&quot;&gt;HeCSa&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
