<tt>
<br>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.0&nbsp;Transitional//EN&quot;&gt;<br>
&lt;HTML&gt;&lt;HEAD&gt;<br>
&lt;META&nbsp;content=&quot;text/html;&nbsp;charset=us-ascii&quot;&nbsp;http-equiv=Content-Type&gt;<br>
&lt;META&nbsp;name=GENERATOR&nbsp;content=&quot;MSHTML&nbsp;11.00.10570.1001&quot;&gt;&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;DIV&nbsp;dir=ltr&nbsp;align=left&gt;&lt;SPAN&nbsp;class=117325706-29052019&gt;&lt;FONT&nbsp;color=#0000ff&nbsp;<br>
size=2&nbsp;face=Arial&gt;Hai,&nbsp;&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&nbsp;align=left&gt;&lt;SPAN&nbsp;class=117325706-29052019&gt;&lt;FONT&nbsp;color=#0000ff&nbsp;<br>
size=2&nbsp;face=Arial&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&nbsp;align=left&gt;&lt;SPAN&nbsp;class=117325706-29052019&gt;&lt;FONT&nbsp;color=#0000ff&nbsp;<br>
size=2&nbsp;face=Arial&gt;You&nbsp;are&nbsp;probely&nbsp;missing&nbsp;in&nbsp;you&nbsp;smb.conf:&nbsp;&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&nbsp;align=left&gt;&lt;SPAN&nbsp;class=117325706-29052019&gt;&lt;FONT&nbsp;color=#0000ff&nbsp;<br>
size=2&nbsp;face=Arial&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&nbsp;align=left&gt;&lt;SPAN&nbsp;class=117325706-29052019&gt;&lt;FONT&nbsp;color=#0000ff&nbsp;<br>
size=2&nbsp;face=Arial&gt;ntlm&nbsp;auth&nbsp;=&nbsp;yes&nbsp;&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&nbsp;align=left&gt;&lt;SPAN&nbsp;class=117325706-29052019&gt;&lt;FONT&nbsp;color=#0000ff&nbsp;<br>
size=2&nbsp;face=Arial&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&nbsp;align=left&gt;&lt;SPAN&nbsp;class=117325706-29052019&gt;&lt;/SPAN&gt;&lt;SPAN&nbsp;<br>
class=117325706-29052019&gt;&lt;FONT&nbsp;color=#0000ff&nbsp;size=2&nbsp;<br>
face=Arial&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&nbsp;align=left&gt;&lt;SPAN&nbsp;class=117325706-29052019&gt;&lt;FONT&nbsp;color=#0000ff&nbsp;<br>
size=2&nbsp;face=Arial&gt;Greetz,&nbsp;&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&nbsp;align=left&gt;&lt;SPAN&nbsp;class=117325706-29052019&gt;&lt;FONT&nbsp;color=#0000ff&nbsp;<br>
size=2&nbsp;face=Arial&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&nbsp;align=left&gt;&lt;SPAN&nbsp;class=117325706-29052019&gt;&lt;FONT&nbsp;color=#0000ff&nbsp;<br>
size=2&nbsp;face=Arial&gt;Louis&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&nbsp;align=left&gt;&lt;SPAN&nbsp;class=117325706-29052019&gt;&lt;FONT&nbsp;color=#0000ff&nbsp;<br>
size=2&nbsp;face=Arial&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&nbsp;&lt;/DIV&gt;&lt;BR&gt;<br>
&lt;BLOCKQUOTE&nbsp;<br>
style=&quot;PADDING-LEFT:&nbsp;5px;&nbsp;MARGIN-LEFT:&nbsp;5px;&nbsp;BORDER-LEFT:&nbsp;#0000ff&nbsp;2px&nbsp;solid;&nbsp;MARGIN-RIGHT:&nbsp;0px&quot;&nbsp;<br>
dir=ltr&gt;<br>
&nbsp;&nbsp;&lt;DIV&nbsp;lang=nl&nbsp;class=OutlookMessageHeader&nbsp;dir=ltr&nbsp;align=left&gt;<br>
&nbsp;&nbsp;&lt;HR&nbsp;tabIndex=-1&gt;<br>
&nbsp;&nbsp;&lt;FONT&nbsp;size=2&nbsp;face=Tahoma&gt;&lt;B&gt;Van:&lt;/B&gt;&nbsp;squid-users&nbsp;<br>
&nbsp;&nbsp;[mailto:squid-users-bounces@lists.squid-cache.org]&nbsp;&lt;B&gt;Namens&nbsp;&lt;/B&gt;Ilias&nbsp;<br>
&nbsp;&nbsp;Clifton&lt;BR&gt;&lt;B&gt;Verzonden:&lt;/B&gt;&nbsp;woensdag&nbsp;29&nbsp;mei&nbsp;2019&nbsp;6:42&lt;BR&gt;&lt;B&gt;Aan:&lt;/B&gt;&nbsp;<br>
&nbsp;&nbsp;squid-users@lists.squid-cache.org&lt;BR&gt;&lt;B&gt;Onderwerp:&lt;/B&gt;&nbsp;[squid-users]&nbsp;LDAP&nbsp;<br>
&nbsp;&nbsp;authentication&nbsp;from&nbsp;android&nbsp;and&nbsp;iphones&lt;BR&gt;&lt;/FONT&gt;&lt;BR&gt;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&nbsp;style=&quot;FONT-SIZE:&nbsp;12px;&nbsp;FONT-FAMILY:&nbsp;Verdana&quot;&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;Hi&nbsp;All,&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;I&nbsp;have&nbsp;Squid&nbsp;3.5.27&nbsp;running&nbsp;on&nbsp;Ubuntu&nbsp;18.04.2,&nbsp;and&nbsp;have&nbsp;been&nbsp;unsuccesfull&nbsp;<br>
&nbsp;&nbsp;in&nbsp;being&nbsp;able&nbsp;to&nbsp;authenticate&nbsp;users&nbsp;via&nbsp;ldap&nbsp;(kerberos&nbsp;is&nbsp;working&nbsp;well)&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;Currently&nbsp;it's&nbsp;iphone&nbsp;and&nbsp;android&nbsp;users&nbsp;that&nbsp;are&nbsp;having&nbsp;the&nbsp;issue&nbsp;-&nbsp;all&nbsp;<br>
&nbsp;&nbsp;other&nbsp;users&nbsp;are&nbsp;authenticating&nbsp;via&nbsp;kerberos.&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;In&nbsp;squid.conf,&nbsp;I&nbsp;have:&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;auth_param&nbsp;basic&nbsp;program&nbsp;/usr/lib/squid/basic_ldap_auth&nbsp;-d&nbsp;-R&nbsp;-b&nbsp;<br>
&nbsp;&nbsp;&quot;OU=users,DC=domain,DC=com&quot;&nbsp;-D&nbsp;squid@domain.com&nbsp;-W&nbsp;/etc/squid/ldappass.txt&nbsp;-f&nbsp;<br>
&nbsp;&nbsp;sAMAccountName=%s&nbsp;-h&nbsp;dc.domain.com&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;When&nbsp;a&nbsp;user&nbsp;attempts&nbsp;to&nbsp;browse&nbsp;via&nbsp;the&nbsp;proxy,&nbsp;I&nbsp;see&nbsp;in&nbsp;access.log:&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;1559096820.116&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;10.99.88.77&nbsp;TCP_DENIED/407&nbsp;2248&nbsp;GET&nbsp;<br>
&nbsp;&nbsp;&lt;A&nbsp;href=&quot;http://www.google.com&quot;&nbsp;target=_blank&gt;http://www.google.com&lt;/A&gt;&nbsp;-&nbsp;<br>
&nbsp;&nbsp;HIER_NONE/-&nbsp;text/html&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;And&nbsp;the&nbsp;user&nbsp;is&nbsp;prompted&nbsp;for&nbsp;a&nbsp;username&nbsp;and&nbsp;password..&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;I&nbsp;then&nbsp;see&nbsp;in&nbsp;cache.log:&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;basic_ldap_auth.cc(691):&nbsp;pid=32625&nbsp;:user&nbsp;filter&nbsp;<br>
&nbsp;&nbsp;'sAMAccountName=username',&nbsp;searchbase&nbsp;<br>
&nbsp;&nbsp;'OU=users,DC=domain,DC=com'&lt;BR&gt;basic_ldap_auth.cc(746):&nbsp;pid=32625&nbsp;:attempting&nbsp;<br>
&nbsp;&nbsp;to&nbsp;authenticate&nbsp;user&nbsp;'CN=Users&nbsp;Fullname,OU=users,DC=domain,DC=com'&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;But&nbsp;the&nbsp;user&nbsp;just&nbsp;keeps&nbsp;getting&nbsp;prompted&nbsp;for&nbsp;username&nbsp;and&nbsp;password&nbsp;over&nbsp;<br>
&nbsp;&nbsp;and&nbsp;over,&nbsp;and&nbsp;I&nbsp;continue&nbsp;to&nbsp;see:&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;1559096820.116&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;10.99.88.77&nbsp;TCP_DENIED/407&nbsp;2248&nbsp;GET&nbsp;<br>
&nbsp;&nbsp;&lt;A&nbsp;href=&quot;http://www.google.com&quot;&nbsp;target=_blank&gt;http://www.google.com&lt;/A&gt;&nbsp;-&nbsp;<br>
&nbsp;&nbsp;HIER_NONE/-&nbsp;text/html&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;If&nbsp;I&nbsp;run&nbsp;the&nbsp;following&nbsp;on&nbsp;the&nbsp;command&nbsp;line,&nbsp;it&nbsp;appears&nbsp;to&nbsp;authenticate&nbsp;<br>
&nbsp;&nbsp;correctly:&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;/usr/lib/squid/basic_ldap_auth&nbsp;-d&nbsp;-R&nbsp;-b&nbsp;&quot;OU=users,DC=domain,DC=com&quot;&nbsp;-D&nbsp;<br>
&nbsp;&nbsp;squid@domain.com&nbsp;-W&nbsp;/etc/squid/ldappass.txt&nbsp;-f&nbsp;sAMAccountName=%s&nbsp;-h&nbsp;<br>
&nbsp;&nbsp;dc.domain.com&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;username&nbsp;password&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;basic_ldap_auth.cc(691):&nbsp;pid=32625&nbsp;:user&nbsp;filter&nbsp;<br>
&nbsp;&nbsp;'sAMAccountName=username',&nbsp;searchbase&nbsp;<br>
&nbsp;&nbsp;'OU=users,DC=domain,DC=com'&lt;BR&gt;basic_ldap_auth.cc(746):&nbsp;pid=32625&nbsp;:attempting&nbsp;<br>
&nbsp;&nbsp;to&nbsp;authenticate&nbsp;user&nbsp;'CN=Users&nbsp;Fullname,OU=users,DC=domain,DC=com'&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;OK&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;What&nbsp;else&nbsp;can&nbsp;I&nbsp;do&nbsp;for&nbsp;troubleshooting?&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&nbsp;&nbsp;&lt;DIV&gt;&nbsp;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/BLOCKQUOTE&gt;&lt;/BODY&gt;&lt;/HTML&gt;<br>

</tt>
