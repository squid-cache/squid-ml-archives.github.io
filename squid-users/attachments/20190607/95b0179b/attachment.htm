<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hello!&lt;/div&gt;&lt;div&gt;We&nbsp;are&nbsp;planning&nbsp;to&nbsp;use&nbsp;squid&nbsp;as&nbsp;a&nbsp;<br>
forward&nbsp;egress&nbsp;proxy&nbsp;to&nbsp;whitelist&nbsp;domains.&nbsp;In&nbsp;general,&nbsp;we&nbsp;configured&nbsp;it&nbsp;<br>
to&nbsp;whitelist/blacklist&nbsp;domains&nbsp;based&nbsp;on&nbsp;the&nbsp;examples&nbsp;in&nbsp;the&nbsp;site&nbsp;and&nbsp;<br>
this&nbsp;seems&nbsp;to&nbsp;work&nbsp;with&nbsp;peek&nbsp;and&nbsp;splice&nbsp;on&nbsp;our&nbsp;preliminary&nbsp;tests&nbsp;as&nbsp;a&nbsp;<br>
transparent&nbsp;egress&nbsp;proxy.&nbsp;We&#39;re&nbsp;doing&nbsp;this&nbsp;with&nbsp;an&nbsp;AWS&nbsp;VPC&nbsp;using&nbsp;the&nbsp;standard&nbsp;techniques&nbsp;documented&nbsp;in&nbsp;their&nbsp;blogs&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;had&nbsp;a&nbsp;few&nbsp;questions&nbsp;about&nbsp;the&nbsp;setup&nbsp;for&nbsp;some&nbsp;additional&nbsp;features&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;We<br>
&nbsp;want&nbsp;to&nbsp;have&nbsp;the&nbsp;ability&nbsp;to&nbsp;connection&nbsp;pool&nbsp;certain&nbsp;HTTPS&nbsp;calls&nbsp;going&nbsp;<br>
externally&nbsp;within&nbsp;from&nbsp;within&nbsp;squid.&nbsp;This&nbsp;would&nbsp;be&nbsp;specifically&nbsp;for&nbsp;some<br>
&nbsp;external&nbsp;partners&nbsp;that&nbsp;we&nbsp;know&nbsp;have&nbsp;slow&nbsp;connection&nbsp;setup&nbsp;time&nbsp;and&nbsp;or&nbsp;<br>
in&nbsp;case&nbsp;of&nbsp;misbehaving&nbsp;libraries.&lt;/li&gt;&lt;li&gt;WIth&nbsp;&quot;peek&nbsp;and&nbsp;splice&quot;&nbsp;method&nbsp;for&nbsp;HTTPS,&nbsp;this&nbsp;<br>
doesn&#39;t&nbsp;make&nbsp;sense,&nbsp;since&nbsp;it&#39;s&nbsp;a&nbsp;TCP&nbsp;tunnel&nbsp;basically.&nbsp;There&nbsp;shouldn&#39;t&nbsp;<br>
be&nbsp;a&nbsp;way&nbsp;to&nbsp;replay&nbsp;the&nbsp;handshake,&nbsp;hence&nbsp;it&#39;s&nbsp;impossible&nbsp;to&nbsp;pool&nbsp;at&nbsp;the&nbsp;squid&nbsp;layer.&lt;br&gt;&lt;/li&gt;&lt;li&gt;We&nbsp;need&nbsp;to&nbsp;consider&nbsp;<br>
&#39;bump&#39;&nbsp;for&nbsp;some&nbsp;use&nbsp;cases&nbsp;along&nbsp;with&nbsp;our&nbsp;own&nbsp;intermediate&nbsp;CA,&nbsp;which&nbsp;<br>
we&#39;re&nbsp;ok&nbsp;with,&nbsp;since&nbsp;we&nbsp;can&nbsp;choose&nbsp;the&nbsp;domains&nbsp;to&nbsp;&#39;splice&#39;&nbsp;and&nbsp;domains&nbsp;<br>
to&nbsp;&#39;bump&#39;/&lt;/li&gt;&lt;li&gt;The&nbsp;biggest&nbsp;reason&nbsp;we&nbsp;care&nbsp;about&nbsp;TLS&nbsp;termination&nbsp;with&nbsp;<br>
bump&nbsp;is&nbsp;because&nbsp;we&nbsp;think&nbsp;it&nbsp;might&nbsp;give&nbsp;us&nbsp;performance&nbsp;benefits&nbsp;along&nbsp;<br>
some&nbsp;critical&nbsp;code&nbsp;paths&nbsp;&lt;b&gt;due&nbsp;to&nbsp;connection&nbsp;pooling&nbsp;to&nbsp;some&nbsp;slow&nbsp;upstreams&nbsp;within&nbsp;squid.&lt;/b&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;Does&nbsp;squid&nbsp;automatically&nbsp;do&nbsp;this&nbsp;or&nbsp;does&nbsp;it&nbsp;need&nbsp;some&nbsp;extra&nbsp;config.&nbsp;I&nbsp;was&nbsp;looking&nbsp;at&nbsp;&#39;server_connections&#39;&nbsp;config&nbsp;var.&nbsp;[Currently&nbsp;we&nbsp;roughly&nbsp;follow&nbsp;the&nbsp;config&nbsp;in&nbsp;the&nbsp;&lt;a&nbsp;href=&quot;https://aws.amazon.com/blogs/security/how-to-add-dns-filtering-to-your-nat-instance-with-squid/&quot;&gt;AWS&nbsp;Guide]&lt;/a&gt;&lt;br&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Another<br>
&nbsp;thing&nbsp;we&nbsp;cared&nbsp;about&nbsp;,&nbsp;with&nbsp;a&nbsp;much&nbsp;lower&nbsp;priority,&nbsp;was&nbsp;HTTP/2&nbsp;translation.&nbsp;We&nbsp;would&nbsp;like&nbsp;to&nbsp;reap&nbsp;the&nbsp;<br>
benefits&nbsp;of&nbsp;HTTP/2&nbsp;on&nbsp;external&nbsp;services&nbsp;that&nbsp;do&nbsp;support&nbsp;it&nbsp;and&nbsp;we&nbsp;connect&nbsp;to,&nbsp;but&nbsp;our&nbsp;<br>
application&nbsp;does&nbsp;not&nbsp;yet&nbsp;have&nbsp;any&nbsp;production-safe&nbsp;http2&nbsp;clients(python).&lt;/div&gt;&lt;div&gt;Is&nbsp;there&nbsp;any&nbsp;roadmap&nbsp;for&nbsp;when&nbsp;that&nbsp;will&nbsp;land&nbsp;on&nbsp;<br>
Squid&nbsp;master?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;y&#39;all&lt;/div&gt;&lt;div&gt;-&nbsp;Srikanth&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Platform&nbsp;and&nbsp;Online&nbsp;Frameworks.&nbsp;Affirm&nbsp;Inc.&lt;div&nbsp;class=&quot;gmail-adL&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
