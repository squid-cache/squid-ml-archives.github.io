<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;div&nbsp;class=&quot;ydp802d3e98yahoo-style-wrap&quot;&nbsp;style=&quot;font-family:Helvetica&nbsp;Neue,&nbsp;Helvetica,&nbsp;Arial,&nbsp;sans-serif;font-size:16px;&quot;&gt;&lt;div&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;Thanks&nbsp;Amos!&lt;br&gt;&lt;/div&gt;&lt;div&gt;Comments&nbsp;inline&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;div&nbsp;id=&quot;ydp25779dc1yahoo_quoted_2193787580&quot;&nbsp;class=&quot;ydp25779dc1yahoo_quoted&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;style=&quot;font-family:'Helvetica&nbsp;Neue',&nbsp;Helvetica,&nbsp;Arial,&nbsp;sans-serif;font-size:13px;color:#26282a;&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;Monday,&nbsp;June&nbsp;24,&nbsp;2019,&nbsp;9:06:41&nbsp;a.m.&nbsp;EDT,&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;squid3@treenet.co.nz&gt;&nbsp;wrote:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;On&nbsp;24/06/19&nbsp;5:04&nbsp;am,&nbsp;&lt;a&nbsp;shape=&quot;rect&quot;&nbsp;href=&quot;mailto:julien412@yahoo.fr&quot;&nbsp;rel=&quot;nofollow&quot;&nbsp;target=&quot;_blank&quot;&gt;julien412@yahoo.fr&lt;/a&gt;&nbsp;wrote:&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;Hello,&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;I'm&nbsp;trying&nbsp;to&nbsp;use&nbsp;Squid&nbsp;with&nbsp;Splash&nbsp;page&nbsp;and&nbsp;followed&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;a&nbsp;shape=&quot;rect&quot;&nbsp;href=&quot;https://wiki.squid-cache.org/ConfigExamples/Portal/Splash&nbsp;&quot;&nbsp;rel=&quot;nofollow&quot;&nbsp;target=&quot;_blank&quot;&gt;https://wiki.squid-cache.org/ConfigExamples/Portal/Splash&nbsp;&lt;/a&gt;but&nbsp;I've&nbsp;got&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;an&nbsp;issue&nbsp;with&nbsp;a&nbsp;redirection&nbsp;loop.&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;Connecting&nbsp;to&nbsp;any&nbsp;web&nbsp;site&nbsp;redirects&nbsp;to&nbsp;splash&nbsp;page&nbsp;but&nbsp;splash&nbsp;page&nbsp;is&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;redirected&nbsp;to&nbsp;itself&nbsp;in&nbsp;infinite&nbsp;loop&nbsp;until&nbsp;squid&nbsp;breaks&nbsp;it.&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;This&nbsp;happens&nbsp;on&nbsp;Centos7/Squid&nbsp;3.5.20,&nbsp;Ubuntu&nbsp;bionic/3.5.27&nbsp;or&nbsp;4.4&nbsp;source&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;build.&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;Installed&nbsp;with&nbsp;ansible&nbsp;role&nbsp;with&nbsp;travis&nbsp;testing&nbsp;failing&nbsp;on&nbsp;redirection&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;a&nbsp;shape=&quot;rect&quot;&nbsp;href=&quot;https://travis-ci.org/juju4/ansible-squid/jobs/549377518&quot;&nbsp;rel=&quot;nofollow&quot;&nbsp;target=&quot;_blank&quot;&gt;https://travis-ci.org/juju4/ansible-squid/jobs/549377518&lt;/a&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;This&nbsp;part&nbsp;should&nbsp;not&nbsp;happen&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&lt;&nbsp;HTTP/1.1&nbsp;302&nbsp;Found&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&lt;&nbsp;Server:&nbsp;squid/3.5.27&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&lt;&nbsp;Mime-Version:&nbsp;1.0&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&lt;&nbsp;Date:&nbsp;Sun,&nbsp;23&nbsp;Jun&nbsp;2019&nbsp;15:04:22&nbsp;GMT&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&lt;&nbsp;Content-Type:&nbsp;text/html;charset=utf-8&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&lt;&nbsp;Content-Length:&nbsp;0&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&lt;&nbsp;Location:&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;a&nbsp;shape=&quot;rect&quot;&nbsp;href=&quot;http://localhost/splash.php?url=http%3A%2F%2Flocalhost%2Fsplash.php%3Furl%3Dhttp%253A%252F%252Fwww.google.com%252F&quot;&nbsp;rel=&quot;nofollow&quot;&nbsp;target=&quot;_blank&quot;&gt;http://localhost/splash.php?url=http%3A%2F%2Flocalhost%2Fsplash.php%3Furl%3Dhttp%253A%252F%252Fwww.google.com%252F&lt;/a&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&lt;&nbsp;X-Squid-Error:&nbsp;403&nbsp;Access&nbsp;Denied&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&lt;&nbsp;X-Cache:&nbsp;MISS&nbsp;from&nbsp;default-splash-ubuntu-1804-1561301803&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&lt;&nbsp;X-Cache-Lookup:&nbsp;NONE&nbsp;from&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;default-splash-ubuntu-1804-1561301803:3128&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+&lt;&nbsp;Connection:&nbsp;keep-alive&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;Config&nbsp;extract&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;external_acl_type&nbsp;splash_page&nbsp;ttl=60&nbsp;concurrency=100&nbsp;%SRC&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;/usr/lib/squid/ext_session_acl&nbsp;-t&nbsp;7200&nbsp;-b&nbsp;/var/lib/squid/session.db&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;acl&nbsp;existing_users&nbsp;external&nbsp;splash_page&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deny_info&nbsp;&lt;a&nbsp;shape=&quot;rect&quot;&nbsp;href=&quot;http://localhost/splash.php?url=%s&nbsp;&quot;&nbsp;rel=&quot;nofollow&quot;&nbsp;target=&quot;_blank&quot;&gt;http://localhost/splash.php?url=%s&nbsp;&lt;/a&gt;existing_users&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http_access&nbsp;deny&nbsp;!existing_users&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;Any&nbsp;advices?&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;Couple&nbsp;of&nbsp;things:&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;*&nbsp;this&nbsp;is&nbsp;a&nbsp;localhost&nbsp;URL.&nbsp;The&nbsp;client&nbsp;is&nbsp;expected&nbsp;to&nbsp;contact&nbsp;*its*&lt;br&nbsp;clear=&quot;none&quot;&gt;localhost,&nbsp;not&nbsp;use&nbsp;the&nbsp;proxy&nbsp;for&nbsp;the&nbsp;followup&nbsp;request.&nbsp;But&nbsp;that&nbsp;is&nbsp;not&lt;br&nbsp;clear=&quot;none&quot;&gt;related&nbsp;to&nbsp;the&nbsp;loop&nbsp;here.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;[J]&nbsp;Agreed.&nbsp;this&nbsp;line&nbsp;is&nbsp;commented&nbsp;to&nbsp;allow&nbsp;testing&nbsp;from&nbsp;localhost&nbsp;with&nbsp;splash&nbsp;page:&lt;span&gt;&nbsp;`http_access&nbsp;allow&nbsp;localhost`&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;*&nbsp;you&nbsp;need&nbsp;to&nbsp;check&nbsp;access.log&nbsp;to&nbsp;see&nbsp;whether&nbsp;the&nbsp;client&nbsp;src-IP&nbsp;is&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;div&gt;changing&nbsp;between&nbsp;requests.&nbsp;If&nbsp;it&nbsp;does&nbsp;that&nbsp;is&nbsp;the&nbsp;cause&nbsp;of&nbsp;the&nbsp;loop.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;[J]&nbsp;It&nbsp;does&nbsp;not.&nbsp;I&nbsp;tested&nbsp;on&nbsp;private&nbsp;environment&nbsp;with&nbsp;different&nbsp;systems&nbsp;and&nbsp;src-IP&nbsp;stays&nbsp;the&nbsp;same&nbsp;as&nbsp;expected.&lt;br&gt;&lt;/div&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&nbsp;-&nbsp;the&nbsp;test&nbsp;is&nbsp;broken:&nbsp;it&nbsp;configures&nbsp;Squid&nbsp;to&nbsp;send&nbsp;data&nbsp;to&lt;br&nbsp;clear=&quot;none&quot;&gt;access_custom.log&nbsp;*instead*&nbsp;of&nbsp;access.log,&nbsp;then&nbsp;tries&nbsp;to&nbsp;use&nbsp;the&nbsp;empty&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;div&gt;access.log&nbsp;as&nbsp;the&nbsp;test&nbsp;log&nbsp;output.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;[J]&nbsp;I&nbsp;don't&nbsp;see&nbsp;any&nbsp;test&nbsp;on&nbsp;access.log.&nbsp;travis&nbsp;after_script&nbsp;includes&nbsp;access.log&nbsp;for&nbsp;convenience&nbsp;and&nbsp;missing&nbsp;access_custom.log&nbsp;which&nbsp;is&nbsp;the&nbsp;one&nbsp;relevant&nbsp;here.&nbsp;no&nbsp;serverspec&nbsp;tests&lt;br&gt;&lt;/div&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;*&nbsp;please&nbsp;add&nbsp;&quot;-d&quot;&nbsp;to&nbsp;the&nbsp;session&nbsp;helper&nbsp;command&nbsp;line&nbsp;options.&nbsp;That&lt;br&nbsp;clear=&quot;none&quot;&gt;should&nbsp;show&nbsp;what&nbsp;the&nbsp;helper&nbsp;is&nbsp;doing&nbsp;to&nbsp;declare&nbsp;&quot;no&nbsp;session&quot;&nbsp;when&nbsp;the&lt;br&nbsp;clear=&quot;none&quot;&gt;client&nbsp;feeds&nbsp;back&nbsp;the&nbsp;splash&nbsp;URL&nbsp;to&nbsp;the&nbsp;proxy.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;[J]&nbsp;tried&nbsp;both&nbsp;line&nbsp;below&nbsp;but&nbsp;does&nbsp;not&nbsp;seem&nbsp;to&nbsp;work&lt;/div&gt;&lt;div&gt;`&lt;span&gt;external_acl_type&nbsp;splash_page&nbsp;ttl=60&nbsp;concurrency=100&nbsp;%SRC&nbsp;/usr/lib/squid/ext_session_acl&nbsp;-t&nbsp;7200&nbsp;-b&nbsp;/var/lib/squid/session.db&nbsp;-d`&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;`&lt;span&gt;external_acl_type&nbsp;splash_page&nbsp;ttl=60&nbsp;concurrency=100&nbsp;%SRC&nbsp;<br>
/usr/lib/squid/ext_session_acl&nbsp;-d&nbsp;-t&nbsp;7200&nbsp;-b&nbsp;/var/lib/squid/session.db`&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;=&gt;&nbsp;from&nbsp;cache.log&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;2019/06/24&nbsp;14:03:01&nbsp;kid1|&nbsp;helperOpenServers:&nbsp;Starting&nbsp;1/5&nbsp;'ext_session_acl'&nbsp;processes&lt;br&gt;(ext_session_acl):&nbsp;invalid&nbsp;option&nbsp;--&nbsp;'d'&lt;br&gt;Usage:&nbsp;(ext_session_acl)&nbsp;[-t|-T&nbsp;session_timeout]&nbsp;[-b&nbsp;dbpath]&nbsp;[-a]&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-t&nbsp;sessiontimeout&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Idle&nbsp;timeout&nbsp;after&nbsp;which&nbsp;sessions&nbsp;will&nbsp;be&nbsp;forgotten&nbsp;(user&nbsp;activity&nbsp;will&nbsp;reset)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-T&nbsp;sessiontimeout&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fixed&nbsp;timeout&nbsp;after&nbsp;which&nbsp;sessions&nbsp;will&nbsp;be&nbsp;forgotten&nbsp;(regardless&nbsp;of&nbsp;user&nbsp;activity)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-b&nbsp;dbpath&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Path&nbsp;where&nbsp;persistent&nbsp;session&nbsp;database&nbsp;will&nbsp;be&nbsp;kept&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-a&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Active&nbsp;mode&nbsp;requiring&nbsp;LOGIN&nbsp;argument&nbsp;to&nbsp;start&nbsp;a&nbsp;session&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;/div&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;PS.&nbsp;If&nbsp;I&nbsp;am&nbsp;reading&nbsp;the&nbsp;PR&nbsp;which&nbsp;is&nbsp;being&nbsp;tested&nbsp;-&nbsp;it&nbsp;looks&nbsp;like&nbsp;it&lt;br&nbsp;clear=&quot;none&quot;&gt;changes&nbsp;the&nbsp;check&nbsp;from&nbsp;one&nbsp;which&nbsp;checks;&lt;br&nbsp;clear=&quot;none&quot;&gt;&nbsp;-&nbsp;the&nbsp;Location&nbsp;URL&nbsp;being&nbsp;redirected&nbsp;to&nbsp;the&nbsp;splash&nbsp;page&nbsp;=&gt;&nbsp;OK&lt;br&nbsp;clear=&quot;none&quot;&gt;&nbsp;-&nbsp;the&nbsp;Location&nbsp;URL&nbsp;looping&nbsp;=&gt;&nbsp;BAD&lt;br&nbsp;clear=&quot;none&quot;&gt;&nbsp;-&nbsp;all&nbsp;non-splash&nbsp;URLs&nbsp;=&gt;&nbsp;BAD&lt;div&nbsp;class=&quot;ydp25779dc1yqt8265623546&quot;&nbsp;id=&quot;ydp25779dc1yqtfd21229&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;to;&lt;/div&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&nbsp;-&nbsp;the&nbsp;Location&nbsp;has&nbsp;*any*&nbsp;URL&nbsp;which&nbsp;includes&nbsp;the&nbsp;splash&nbsp;page&nbsp;=&gt;&nbsp;OK&lt;br&nbsp;clear=&quot;none&quot;&gt;&nbsp;&nbsp;&nbsp;(corollary:&nbsp;-&nbsp;the&nbsp;Location&nbsp;URL&nbsp;looping&nbsp;=&gt;&nbsp;OK&nbsp;!!)&lt;br&nbsp;clear=&quot;none&quot;&gt;&nbsp;-&nbsp;all&nbsp;non-splash&nbsp;URLs&nbsp;=&gt;&nbsp;BAD&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;Squid&nbsp;is&nbsp;only&nbsp;failing&nbsp;this&nbsp;test&nbsp;because&nbsp;v3.5&nbsp;eventually&nbsp;rejects&nbsp;one&nbsp;of&lt;br&nbsp;clear=&quot;none&quot;&gt;the&nbsp;8KB+&nbsp;long&nbsp;URLs&nbsp;generated&nbsp;by&nbsp;the&nbsp;loop.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;There&nbsp;are&nbsp;problems&nbsp;with&nbsp;the&nbsp;underlying&nbsp;helper&nbsp;tests&nbsp;too:&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&nbsp;&nbsp;&nbsp;describe&nbsp;command('echo&nbsp;10.0.0.1&nbsp;concurrency=100&nbsp;|&nbsp;...&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;==&gt;&nbsp;&nbsp;&quot;10.0.0.1&quot;&nbsp;is&nbsp;an&nbsp;invalid&nbsp;concurrency&nbsp;channel&nbsp;number.&nbsp;Channel&nbsp;IDs&lt;br&nbsp;clear=&quot;none&quot;&gt;are&nbsp;integer&nbsp;values&nbsp;in&nbsp;current&nbsp;helpers.&nbsp;If&nbsp;your&nbsp;squid.conf&nbsp;contains&lt;br&nbsp;clear=&quot;none&quot;&gt;&quot;concurrency=100&quot;&nbsp;the&nbsp;channel-ID&nbsp;delivered&nbsp;to&nbsp;the&nbsp;helper&nbsp;will&nbsp;be&nbsp;an&lt;br&nbsp;clear=&quot;none&quot;&gt;integer&nbsp;between&nbsp;0&nbsp;and&nbsp;99&nbsp;(inclusive).&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;==&gt;&nbsp;&nbsp;&quot;concurrency=100&quot;&nbsp;is&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;session&nbsp;you&nbsp;just&nbsp;asked&nbsp;the&lt;br&nbsp;clear=&quot;none&quot;&gt;helper&nbsp;to&nbsp;create.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;==&gt;&nbsp;combined&nbsp;the&nbsp;above&nbsp;problems&nbsp;mean&nbsp;your&nbsp;helper&nbsp;test&nbsp;is&nbsp;not&nbsp;testing&nbsp;the&lt;br&nbsp;clear=&quot;none&quot;&gt;same&nbsp;type&nbsp;of&nbsp;sessions&nbsp;as&nbsp;your&nbsp;other&nbsp;tests&nbsp;are&nbsp;trying&nbsp;to&nbsp;use.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;Luckily&nbsp;the&nbsp;session&nbsp;helper&nbsp;does&nbsp;not&nbsp;actually&nbsp;care&nbsp;what&nbsp;the&nbsp;session&nbsp;name&lt;br&nbsp;clear=&quot;none&quot;&gt;values&nbsp;are,&nbsp;they&nbsp;are&nbsp;just&nbsp;opaque&nbsp;strings&nbsp;-&nbsp;hashed&nbsp;and&nbsp;stored&nbsp;for&nbsp;&quot;-t&nbsp;N&quot;&lt;br&nbsp;clear=&quot;none&quot;&gt;seconds.&nbsp;So&nbsp;this&nbsp;still&nbsp;tests&nbsp;that&nbsp;the&nbsp;helper&nbsp;works,&nbsp;just&nbsp;not&nbsp;in&nbsp;the&nbsp;way&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;div&gt;apparently&nbsp;intended.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;[J]&nbsp;so,&nbsp;should&nbsp;be&nbsp;just&nbsp;an&nbsp;integer&nbsp;like&nbsp;that?&lt;br&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&nbsp;&nbsp;describe&nbsp;command('echo&nbsp;42&nbsp;concurrency=100&nbsp;|&nbsp;...&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;/div&gt;&lt;div&gt;[J]&nbsp;concurrency&nbsp;was&nbsp;just&nbsp;to&nbsp;avoid&nbsp;this&lt;/div&gt;&lt;div&gt;&lt;div&gt;#&nbsp;echo&nbsp;10&nbsp;|&nbsp;/usr/lib/squid/ext_session_acl&nbsp;-t&nbsp;7200&nbsp;-b&nbsp;/var/lib/squid/session.db&lt;br&gt;&lt;div&gt;FATAL:&nbsp;/usr/lib/squid/ext_session_acl&nbsp;is&nbsp;concurrent&nbsp;and&nbsp;requires&nbsp;the&nbsp;concurrency&nbsp;option&nbsp;to&nbsp;be&nbsp;specified.&lt;/div&gt;&lt;div&gt;[J]&nbsp;so&nbsp;the&nbsp;right&nbsp;test&nbsp;would&nbsp;be?&nbsp;both&nbsp;seems&nbsp;to&nbsp;work.&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&nbsp;&nbsp;&nbsp;describe&nbsp;command('echo&nbsp;42&nbsp;test&nbsp;concurrency=100&nbsp;|&nbsp;...&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;or&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&nbsp;&nbsp;&nbsp;describe&nbsp;command('echo&nbsp;42&nbsp;test&nbsp;|&nbsp;...&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;Amos&lt;br&nbsp;clear=&quot;none&quot;&gt;_______________________________________________&lt;br&nbsp;clear=&quot;none&quot;&gt;squid-users&nbsp;mailing&nbsp;list&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;a&nbsp;shape=&quot;rect&quot;&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;rel=&quot;nofollow&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;a&nbsp;shape=&quot;rect&quot;&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;nofollow&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;div&nbsp;class=&quot;ydp25779dc1yqt8265623546&quot;&nbsp;id=&quot;ydp25779dc1yqtfd33234&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
