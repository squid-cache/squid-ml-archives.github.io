<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;I&nbsp;am&nbsp;in&nbsp;the&nbsp;process&nbsp;of&nbsp;upgrading&nbsp;our&nbsp;Squid&nbsp;proxy&nbsp;server&nbsp;from&nbsp;3.1&nbsp;(on&nbsp;RHEL6)&nbsp;to&nbsp;3.3&nbsp;(on&nbsp;RHEL7).&nbsp;It&nbsp;is&nbsp;configured&nbsp;as&nbsp;a&nbsp;explicit&nbsp;(not&nbsp;transparent)&nbsp;proxy&nbsp;that&nbsp;listens&nbsp;on&nbsp;port&nbsp;3128.&nbsp;Clients&nbsp;are&nbsp;explicitly&nbsp;configured&nbsp;to&nbsp;use&nbsp;the&nbsp;proxy.&lt;br&gt;&lt;br&gt;On&nbsp;the&nbsp;3.3&nbsp;system&nbsp;with&nbsp;the&nbsp;same&nbsp;squid.conf&nbsp;as&nbsp;the&nbsp;3.1&nbsp;system&nbsp;(I&nbsp;have&nbsp;made&nbsp;changes&nbsp;to&nbsp;fix&nbsp;warnings),&nbsp;the&nbsp;system&nbsp;is&nbsp;able&nbsp;to&nbsp;proxy&nbsp;internal&nbsp;(*.&lt;a&nbsp;href=&quot;http://ncsu.edu&quot;&gt;ncsu.edu&lt;/a&gt;)&nbsp;http&nbsp;traffic&nbsp;and&nbsp;https&nbsp;traffic.&nbsp;Anything&nbsp;https&nbsp;outside&nbsp;the&nbsp;&lt;a&nbsp;href=&quot;http://ncsu.edu&quot;&gt;ncsu.edu&lt;/a&gt;&nbsp;domain&nbsp;fails.&nbsp;&lt;br&gt;&lt;br&gt;The&nbsp;system&nbsp;(which&nbsp;does&nbsp;not&nbsp;use&nbsp;caching)&nbsp;was&nbsp;configured&nbsp;to&nbsp;log&nbsp;https&nbsp;transactions&nbsp;as&nbsp;such&nbsp;:&lt;br&gt;&lt;br&gt;1565183014.309&nbsp; &nbsp; 230&nbsp;127.0.0.1&nbsp;TCP_MISS/200&nbsp;62539&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://entrepreneurship.ncsu.edu:443&quot;&gt;entrepreneurship.ncsu.edu:443&lt;/a&gt;&nbsp;-&nbsp;DIRECT/&lt;a&nbsp;href=&quot;http://152.1.227.116&quot;&gt;152.1.227.116&lt;/a&gt;&nbsp;-&lt;br&gt;&lt;br&gt;which&nbsp;requires&nbsp;SSL&nbsp;Bumping&nbsp;(I&nbsp;believe),&nbsp;though&nbsp;there&nbsp;is&nbsp;no&nbsp;reference&nbsp;in&nbsp;the&nbsp;current&nbsp;configs&nbsp;to&nbsp;the&nbsp;use&nbsp;of&nbsp;SSL&nbsp;bumping&nbsp;.&lt;br&gt;&lt;br&gt;I&nbsp;used&nbsp;curl&nbsp;to&nbsp;test&nbsp;the&nbsp;new&nbsp;proxy.&nbsp;When&nbsp;I&nbsp;attempt&nbsp;to&nbsp;proxy&nbsp;an&nbsp;external&nbsp;https&nbsp;connection,&nbsp;this&nbsp;is&nbsp;the&nbsp;result&nbsp;:&lt;br&gt;&lt;br&gt;$&nbsp;curl&nbsp;--proxy&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:3128&quot;&gt;http://127.0.0.1:3128&lt;/a&gt;&nbsp;&lt;a&nbsp;href=&quot;https://www.google.com&quot;&gt;https://www.google.com&lt;/a&gt;&lt;br&gt;curl:&nbsp;(56)&nbsp;Received&nbsp;HTTP&nbsp;code&nbsp;503&nbsp;from&nbsp;proxy&nbsp;after&nbsp;CONNECT&lt;br&gt;&lt;br&gt;Proxying&nbsp;internal&nbsp;(&lt;a&nbsp;href=&quot;http://ncsu.edu&quot;&gt;ncsu.edu&lt;/a&gt;)&nbsp;connections&nbsp;this&nbsp;way&nbsp;is&nbsp;working&nbsp;correctly&nbsp;for&nbsp;http&nbsp;and&nbsp;https&lt;br&gt;&lt;br&gt;When&nbsp;I&nbsp;change&nbsp;my&nbsp;squid.conf&nbsp;from&nbsp;:&lt;br&gt;&lt;br&gt;http_port&nbsp;3128&lt;div&gt;&lt;br&gt;to &lt;/div&gt;&lt;div&gt;&lt;br&gt;http_port&nbsp;3128&nbsp;ssl-bump&nbsp;\&lt;br&gt; &nbsp; cert=/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem&nbsp;\&lt;br&gt; &nbsp; generate-host-certificates=on&nbsp;dynamic_cert_mem_cache_size=4MB&lt;br&gt;&lt;br&gt;I&nbsp;now&nbsp;get&nbsp;the&nbsp;following&nbsp;error&nbsp;&lt;br&gt;&lt;br&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;squid[5796]:&nbsp;FATAL:&nbsp;No&nbsp;valid&nbsp;signing&nbsp;SSL&nbsp;certificate&nbsp;configured&nbsp;for&nbsp;HTTP_port&nbsp;[::]:3128&lt;/blockquote&gt;&lt;br&gt;The&nbsp;certs&nbsp;on&nbsp;the&nbsp;new&nbsp;server&nbsp;are&nbsp;newer,&nbsp;but&nbsp;otherwise&nbsp;appear&nbsp;to&nbsp;be&nbsp;correct. &lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Are&nbsp;there&nbsp;changes&nbsp;in&nbsp;the&nbsp;SSL&nbsp;bump&nbsp;config&nbsp;between&nbsp;3.1&nbsp;and&nbsp;3.3&nbsp;that&nbsp;would&nbsp;cause&nbsp;this&nbsp;kind&nbsp;of&nbsp;failure?&nbsp;Where&nbsp;should&nbsp;I&nbsp;be&nbsp;looking&nbsp;for&nbsp;the&nbsp;problem?&lt;br&gt;&lt;br&gt;No&nbsp;previous&nbsp;experience&nbsp;with&nbsp;squid&nbsp;until&nbsp;this&nbsp;project.&nbsp;I&#39;ve&nbsp;been&nbsp;doing&nbsp;much&nbsp;RTM&nbsp;(including&nbsp;the&nbsp;O&#39;Reilly&nbsp;Squid&nbsp;book)&nbsp;searching&nbsp;online&nbsp;and&nbsp;debugging&nbsp;these&nbsp;past&nbsp;few&nbsp;days.&nbsp;Suggestions&nbsp;appreciated.&lt;br&gt;&lt;br&gt;Thanks,&lt;br&gt;Tom&lt;br&gt;&lt;br&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_signature&quot;&nbsp;data-smartmail=&quot;gmail_signature&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;font&nbsp;size=&quot;1&quot;&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;Thomas&nbsp;Karches&lt;br&gt;NCSU&nbsp;OIT&nbsp;CSI&nbsp;- Systems&nbsp;Specialist&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;size=&quot;1&quot;&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;M.E&nbsp;Student&nbsp;-&nbsp;STEM&nbsp;Education&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;size=&quot;1&quot;&nbsp;face=&quot;arial,&nbsp;helvetica,&nbsp;sans-serif&quot;&gt;Hillsborough&nbsp;319&nbsp;/&nbsp;919.515.5508&lt;/font&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
