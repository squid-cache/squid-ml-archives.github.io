<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;All&lt;br&gt;&lt;br&gt;&lt;div&gt;We&nbsp;are&nbsp;trying&nbsp;to&nbsp;run&nbsp;Squid&nbsp;4.8,&nbsp;compiled&nbsp;with&nbsp;OpenSSL&nbsp;1.1.1&nbsp;(see&nbsp;[1])&nbsp;on&nbsp;Ubuntu&nbsp;18.04&nbsp;as&nbsp;a&nbsp;transparent&nbsp;proxy&nbsp;for&nbsp;the&nbsp;purpose&nbsp;of&nbsp;egress&nbsp;filtering&nbsp;of&nbsp;HTTPS&nbsp;traffic&nbsp;using&nbsp;SNI&nbsp;(see&nbsp;config&nbsp;in&nbsp;[2]).&nbsp;It&nbsp;it&nbsp;works&nbsp;correctly&nbsp;when&nbsp;contacting&nbsp;some&nbsp;addresses&nbsp;(e.g.&nbsp;&lt;a&nbsp;href=&quot;https://www.ubuntu.com&quot;&gt;https://www.ubuntu.com&lt;/a&gt;)&nbsp;but&nbsp;not&nbsp;others&nbsp;(e.g.&nbsp;&lt;a&nbsp;href=&quot;https://www.google.com&quot;&gt;https://www.google.com&lt;/a&gt;).&nbsp;When&nbsp;we&nbsp;contact&nbsp;<br>
&lt;a&nbsp;href=&quot;https://www.google.com&quot;&gt;https://www.google.com&lt;/a&gt;&nbsp;using&nbsp;TLS1.2&nbsp;we&nbsp;get&nbsp;the&nbsp;error&nbsp;in&nbsp;the&nbsp;logs:&lt;/div&gt;&lt;div&gt;2019/09/15&nbsp;10:33:09&nbsp;kid1|&nbsp;ERROR:&nbsp;negotiating&nbsp;TLS&nbsp;on&nbsp;FD&nbsp;19:&nbsp;error:1425F175:SSL&nbsp;routines:ssl_choose_client_version:inappropriate&nbsp;fallback&nbsp;(1/-1/0)&lt;/div&gt;&lt;div&gt;and&nbsp;the&nbsp;page&nbsp;returned&nbsp;to&nbsp;the&nbsp;client&nbsp;contains&nbsp;ERR_SECURE_CONNECT_FAIL.&nbsp;When&nbsp;TLS1.3&nbsp;is&nbsp;used,&nbsp;the&nbsp;connections&nbsp;are&nbsp;made&nbsp;correctly,&nbsp;however&nbsp;my&nbsp;application&nbsp;is&nbsp;constrained&nbsp;to&nbsp;java8&nbsp;&amp;&nbsp;tomcat8&nbsp;which&nbsp;does&nbsp;not&nbsp;support&nbsp;TLS1.3.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Connections&nbsp;are&nbsp;made&nbsp;using&nbsp;curl&nbsp;or&nbsp;openssl&nbsp;s_client.&nbsp;For&nbsp;example:&lt;/div&gt;openssl&nbsp;s_client&nbsp;-tls1_2&nbsp; -CAfile&nbsp;squid.crt&nbsp;-connect&nbsp;&lt;a&nbsp;href=&quot;http://www.google.com:443&quot;&gt;www.google.com:443&lt;/a&gt;&nbsp;-tlsextdebug&lt;br&gt;[237/1854]CONNECTED(00000005)&lt;br&gt;TLS&nbsp;server&nbsp;extension&nbsp;&quot;renegotiation&nbsp;info&quot;&nbsp;(id=65281),&nbsp;len=1&lt;br&gt;0000&nbsp;-&nbsp;00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .&lt;br&gt;TLS&nbsp;server&nbsp;extension&nbsp;&quot;EC&nbsp;point&nbsp;formats&quot;&nbsp;(id=11),&nbsp;len=4&lt;br&gt;0000&nbsp;-&nbsp;03&nbsp;00&nbsp;01&nbsp;02&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;....&lt;br&gt;TLS&nbsp;server&nbsp;extension&nbsp;&quot;session&nbsp;ticket&quot;&nbsp;(id=35),&nbsp;len=0&lt;br&gt;TLS&nbsp;server&nbsp;extension&nbsp;&quot;extended&nbsp;master&nbsp;secret&quot;&nbsp;(id=23),&nbsp;len=0&lt;br&gt;depth=1&nbsp;C&nbsp;=&nbsp;GB,&nbsp;ST&nbsp;=&nbsp;London,&nbsp;L&nbsp;=&nbsp;squid,&nbsp;O&nbsp;=&nbsp;squid,&nbsp;CN&nbsp;=&nbsp;squid&lt;br&gt;verify&nbsp;return:1&lt;br&gt;depth=0&nbsp;CN&nbsp;=&nbsp;&lt;a&nbsp;href=&quot;http://www.google.com&quot;&gt;www.google.com&lt;/a&gt;&lt;br&gt;verify&nbsp;return:1&lt;br&gt;---&lt;br&gt;Certificate&nbsp;chain&lt;br&gt; 0&nbsp;s:CN&nbsp;=&nbsp;&lt;a&nbsp;href=&quot;http://www.google.com&quot;&gt;www.google.com&lt;/a&gt;&lt;br&gt; &nbsp; i:C&nbsp;=&nbsp;GB,&nbsp;ST&nbsp;=&nbsp;London,&nbsp;L&nbsp;=&nbsp;squid,&nbsp;O&nbsp;=&nbsp;squid,&nbsp;CN&nbsp;=&nbsp;squid&lt;br&gt; 1&nbsp;s:C&nbsp;=&nbsp;GB,&nbsp;ST&nbsp;=&nbsp;London,&nbsp;L&nbsp;=&nbsp;squid,&nbsp;O&nbsp;=&nbsp;squid,&nbsp;CN&nbsp;=&nbsp;squid&lt;br&gt; &nbsp; i:C&nbsp;=&nbsp;GB,&nbsp;ST&nbsp;=&nbsp;London,&nbsp;L&nbsp;=&nbsp;squid,&nbsp;O&nbsp;=&nbsp;squid,&nbsp;CN&nbsp;=&nbsp;squid&lt;br&gt; 2&nbsp;s:C&nbsp;=&nbsp;GB,&nbsp;ST&nbsp;=&nbsp;London,&nbsp;L&nbsp;=&nbsp;squid,&nbsp;O&nbsp;=&nbsp;squid,&nbsp;CN&nbsp;=&nbsp;squid&lt;br&gt; &nbsp; i:C&nbsp;=&nbsp;GB,&nbsp;ST&nbsp;=&nbsp;London,&nbsp;L&nbsp;=&nbsp;squid,&nbsp;O&nbsp;=&nbsp;squid,&nbsp;CN&nbsp;=&nbsp;squid&lt;br&gt;&lt;div&gt;etc&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Attached&nbsp;are&nbsp;pcap&nbsp;files&nbsp;showing&nbsp;first&nbsp;a&nbsp;bad&nbsp;connection&nbsp;to&nbsp;google&nbsp;and&nbsp;then&nbsp;a&nbsp;working&nbsp;connection&nbsp;to&nbsp;ubuntu.&nbsp;Looking&nbsp;at&nbsp;the&nbsp;pcap&nbsp;files&nbsp;the&nbsp;difference&nbsp;in&nbsp;the&nbsp;google&nbsp;and&nbsp;ubuntu&nbsp;server&nbsp;hello&nbsp;lies&nbsp;in&nbsp;the&nbsp;extensions&nbsp;and&nbsp;the&nbsp;cypher:&lt;br&gt;&lt;/div&gt;&lt;div&gt;Google:&lt;/div&gt;Handshake&nbsp;Protocol:&nbsp;Server&nbsp;Hello&lt;br&gt; &nbsp; &nbsp;Handshake&nbsp;Type:&nbsp;Server&nbsp;Hello&nbsp;(2)&lt;br&gt; &nbsp; &nbsp;Length:&nbsp;59&lt;br&gt; &nbsp; &nbsp;Version:&nbsp;TLS&nbsp;1.2&nbsp;(0x0303)&lt;br&gt; &nbsp; &nbsp;Random:&nbsp;5d7e05552e1fdea260f67e0bdf413f6a9837fbaffdebeb35…&lt;br&gt; &nbsp; &nbsp;Session&nbsp;ID&nbsp;Length:&nbsp;0&lt;br&gt; &nbsp; &nbsp;Cipher&nbsp;Suite:&nbsp;TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256&nbsp;(0xcca9)&lt;br&gt; &nbsp; &nbsp;Compression&nbsp;Method:&nbsp;null&nbsp;(0)&lt;br&gt; &nbsp; &nbsp;Extensions&nbsp;Length:&nbsp;19&lt;br&gt; &nbsp; &nbsp;Extension:&nbsp;extended_master_secret&nbsp;(len=0)&lt;br&gt; &nbsp; &nbsp;Extension:&nbsp;renegotiation_info&nbsp;(len=1)&lt;br&gt; &nbsp; &nbsp;Extension:&nbsp;ec_point_formats&nbsp;(len=2)&lt;br&gt;&lt;div&gt; &nbsp; &nbsp;Extension:&nbsp;session_ticket&nbsp;(len=0)&lt;/div&gt;&lt;div&gt;Ubuntu:&lt;/div&gt;&lt;div&gt;Handshake&nbsp;Protocol:&nbsp;Server&nbsp;Hello&lt;br&gt; &nbsp; &nbsp;Handshake&nbsp;Type:&nbsp;Server&nbsp;Hello&nbsp;(2)&lt;br&gt; &nbsp; &nbsp;Length:&nbsp;61&lt;br&gt; &nbsp; &nbsp;Version:&nbsp;TLS&nbsp;1.2&nbsp;(0x0303)&lt;br&gt; &nbsp; &nbsp;Random:&nbsp;7ec2c3a2554bac610e0290ac1f160c3ed185bdd1159e377c…&lt;br&gt; &nbsp; &nbsp;Session&nbsp;ID&nbsp;Length:&nbsp;0&lt;br&gt; &nbsp; &nbsp;Cipher&nbsp;Suite:&nbsp;TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256&nbsp;(0xc02f)&lt;br&gt; &nbsp; &nbsp;Compression&nbsp;Method:&nbsp;null&nbsp;(0)&lt;br&gt; &nbsp; &nbsp;Extensions&nbsp;Length:&nbsp;21&lt;br&gt; &nbsp; &nbsp;Extension:&nbsp;server_name&nbsp;(len=0)&lt;br&gt; &nbsp; &nbsp;Extension:&nbsp;renegotiation_info&nbsp;(len=1)&lt;br&gt; &nbsp; &nbsp;Extension:&nbsp;ec_point_formats&nbsp;(len=4)&lt;br&gt; &nbsp; &nbsp;Extension:&nbsp;session_ticket&nbsp;(len=0)&lt;/div&gt;&lt;div&gt;Differences&nbsp;are&nbsp;that&nbsp;Google&nbsp;supplies&nbsp;<br>
extended_master_secretand&nbsp;Ubuntu&nbsp;supplies&nbsp;<br>
server_name&nbsp;extensions.&nbsp;The&nbsp;cyphers&nbsp;chosen&nbsp;by&nbsp;the&nbsp;server&nbsp;is&nbsp;also&nbsp;different.&nbsp;Enabling&nbsp;debug&nbsp;using&nbsp;squid&nbsp;-k&nbsp;debug&nbsp;indicates&nbsp;that&nbsp;this&nbsp;is&nbsp;the&nbsp;likely&nbsp;problematic&nbsp;area:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;2019/09/15&nbsp;11:21:02.486&nbsp;kid1|&nbsp;83,5|&nbsp;PeerConnector.cc(712)&nbsp;checkForMissingCertificates:&nbsp;SSL&nbsp;server&nbsp;sent&nbsp;2&nbsp;certificates&lt;br&gt;2019/09/15&nbsp;11:21:02.486&nbsp;kid1|&nbsp;83,7|&nbsp;AsyncCall.cc(26)&nbsp;AsyncCall:&nbsp;The&nbsp;AsyncCall&nbsp;Security::PeerConnector::negotiate&nbsp;constructed,&nbsp;this=0x560d937c94b0&nbsp;[call515701]2019/09/15&nbsp;11:21:02.486&nbsp;kid1|&nbsp;83,7|&nbsp;AsyncCall.cc(93)&nbsp;ScheduleCall:&nbsp;PeerConnector.cc(391)&nbsp;will&nbsp;call&nbsp;Security::PeerConnector::negotiate()&nbsp;[call515701]&lt;br&gt;2019/09/15&nbsp;11:21:02.486&nbsp;kid1|&nbsp;83,7|&nbsp;AsyncJob.cc(154)&nbsp;callEnd:&nbsp;Ssl::PeekingPeerConnector&nbsp;status&nbsp;out:&nbsp;[&nbsp;FD&nbsp;19&nbsp;job24663]&lt;br&gt;2019/09/15&nbsp;11:21:02.486&nbsp;kid1|&nbsp;83,7|&nbsp;AsyncCallQueue.cc(57)&nbsp;fireNext:&nbsp;leaving&nbsp;Security::PeerConnector::negotiate()&lt;br&gt;2019/09/15&nbsp;11:21:02.486&nbsp;kid1|&nbsp;83,7|&nbsp;AsyncCallQueue.cc(55)&nbsp;fireNext:&nbsp;entering&nbsp;Security::PeerConnector::negotiate()&lt;br&gt;2019/09/15&nbsp;11:21:02.486&nbsp;kid1|&nbsp;83,7|&nbsp;AsyncCall.cc(38)&nbsp;make:&nbsp;make&nbsp;call&nbsp;Security::PeerConnector::negotiate&nbsp;[call515701]&lt;br&gt;2019/09/15&nbsp;11:21:02.486&nbsp;kid1|&nbsp;83,7|&nbsp;AsyncJob.cc(123)&nbsp;callStart:&nbsp;Ssl::PeekingPeerConnector&nbsp;status&nbsp;in:&nbsp;[&nbsp;FD&nbsp;19&nbsp;job24663]&lt;br&gt;2019/09/15&nbsp;11:21:02.486&nbsp;kid1|&nbsp;83,5|&nbsp;PeerConnector.cc(188)&nbsp;negotiate:&nbsp;SSL_connect&nbsp;session=0x560d93835950&lt;br&gt;2019/09/15&nbsp;11:21:02.486&nbsp;kid1|&nbsp;83,7|&nbsp;bio.cc(356)&nbsp;giveBuffered:&nbsp;5&lt;=5&nbsp;bytes&nbsp;to&nbsp;OpenSSL&lt;br&gt;2019/09/15&nbsp;11:21:02.486&nbsp;kid1|&nbsp;83,7|&nbsp;bio.cc(356)&nbsp;giveBuffered:&nbsp;63&lt;=63&nbsp;bytes&nbsp;to&nbsp;OpenSSL&lt;br&gt;2019/09/15&nbsp;11:21:02.486&nbsp;kid1|&nbsp;83,7|&nbsp;bio.cc(164)&nbsp;stateChanged:&nbsp;FD&nbsp;19&nbsp;now:&nbsp;0x1001&nbsp;TWCH&nbsp;(SSLv3/TLS&nbsp;write&nbsp;client&nbsp;hello)&lt;br&gt;2019/09/15&nbsp;11:21:02.486&nbsp;kid1|&nbsp;83,7|&nbsp;bio.cc(471)&nbsp;write:&nbsp;postpone&nbsp;writing&nbsp;7&nbsp;bytes&nbsp;to&nbsp;SSL&nbsp;FD&nbsp;19&lt;br&gt;2019/09/15&nbsp;11:21:02.486&nbsp;kid1|&nbsp;83,7|&nbsp;bio.cc(164)&nbsp;stateChanged:&nbsp;FD&nbsp;19&nbsp;now:&nbsp;0x4008&nbsp;SSLERR&nbsp;(error)&lt;br&gt;2019/09/15&nbsp;11:21:02.486&nbsp;kid1|&nbsp;83,7|&nbsp;bio.cc(164)&nbsp;stateChanged:&nbsp;FD&nbsp;19&nbsp;now:&nbsp;0x1002&nbsp;SSLERR&nbsp;(error)&lt;br&gt;2019/09/15&nbsp;11:21:02.486&nbsp;kid1|&nbsp;83,5|&nbsp;NegotiationHistory.cc(83)&nbsp;retrieveNegotiatedInfo:&nbsp;SSL&nbsp;connection&nbsp;info&nbsp;on&nbsp;FD&nbsp;19&nbsp;SSL&nbsp;version&nbsp;NONE/0.0&nbsp;negotiated&nbsp;cipher&lt;br&gt;2019/09/15&nbsp;11:21:02.486&nbsp;kid1|&nbsp;ERROR:&nbsp;negotiating&nbsp;TLS&nbsp;on&nbsp;FD&nbsp;19:&nbsp;error:1425F175:SSL&nbsp;routines:ssl_choose_client_version:inappropriate&nbsp;fallback&nbsp;(1/-1/0)&lt;br&gt;2019/09/15&nbsp;11:21:02.486&nbsp;kid1|&nbsp;83,5|&nbsp;PeerConnector.cc(570)&nbsp;callBack:&nbsp;TLS&nbsp;setup&nbsp;ended&nbsp;for&nbsp;local=&lt;a&nbsp;href=&quot;http://10.20.251.235:37882&quot;&gt;10.20.251.235:37882&lt;/a&gt;&nbsp;remote=&lt;a&nbsp;href=&quot;http://216.58.210.196:443&quot;&gt;216.58.210.196:443&lt;/a&gt;&nbsp;FD&nbsp;19&nbsp;flags=1&lt;br&gt;&lt;br&gt;&lt;div&gt;I&nbsp;am&nbsp;not&nbsp;sure&nbsp;how&nbsp;to&nbsp;resolve&nbsp;this&nbsp;issue.&nbsp;I&nbsp;am&nbsp;guessing&nbsp;that&nbsp;there&nbsp;is&nbsp;something&nbsp;in&nbsp;the&nbsp;response&nbsp;from&nbsp;Google&nbsp;that&nbsp;is&nbsp;causing&nbsp;OpenSSL&nbsp;to&nbsp;reject&nbsp;the&nbsp;connections.&nbsp;From&nbsp;what&nbsp;I&nbsp;can&nbsp;see,&nbsp;there&nbsp;is&nbsp;no&nbsp;evidence&nbsp;of&nbsp;a&nbsp;downgrade&nbsp;being&nbsp;attempted,&nbsp;which&nbsp;is&nbsp;what&nbsp;the&nbsp;inappropriate&nbsp;fallback&nbsp;error&nbsp;message&nbsp;might&nbsp;indicate.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any&nbsp;advice/guidance&nbsp;greatfully&nbsp;recieved.&lt;/div&gt;&lt;div&gt;John&lt;br&gt;&nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;[1]&nbsp;OpenSSL&nbsp;and&nbsp;<br>
Squid&nbsp;versions&lt;/div&gt;&lt;div&gt;openssl&nbsp;version&lt;br&gt;OpenSSL&nbsp;1.1.1&nbsp; 11&nbsp;Sep&nbsp;2018&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;squid&nbsp;-v&lt;br&gt;Squid&nbsp;Cache:&nbsp;Version&nbsp;4.8&lt;br&gt;Service&nbsp;Name:&nbsp;squid&lt;br&gt;Ubuntu&nbsp;linux&lt;br&gt;This&nbsp;binary&nbsp;uses&nbsp;OpenSSL&nbsp;1.1.1&nbsp; 11&nbsp;Sep&nbsp;2018.&nbsp;For&nbsp;legal&nbsp;restrictions&nbsp;on&nbsp;distribution&nbsp;see&nbsp;&lt;a&nbsp;href=&quot;https://www.openssl.org/source/license.html&quot;&gt;https://www.openssl.org/source/license.html&lt;/a&gt;&lt;br&gt;configure&nbsp;options:&nbsp; &#39;--build=x86_64-linux-gnu&#39;&nbsp;&#39;--prefix=/usr&#39;&nbsp;&#39;--includedir=${prefix}/include&#39;&nbsp;&#39;--mandir=${prefix}/share/man&#39;&nbsp;&#39;--infodir=${prefix}/share/info&#39;&nbsp;&#39;--$&lt;br&gt;ysconfdir=/etc&#39;&nbsp;&#39;--localstatedir=/var&#39;&nbsp;&#39;--libexecdir=${prefix}/lib/squid&#39;&nbsp;&#39;--srcdir=.&#39;&nbsp;&#39;--disable-maintainer-mode&#39;&nbsp;&#39;--disable-dependency-tracking&#39;&nbsp;&#39;--disable-silen$&lt;br&gt;-rules&#39;&nbsp;&#39;BUILDCXXFLAGS=-g&nbsp;-O2&nbsp;-fdebug-prefix-map=/home/builder/diladele/squid-ubuntu/src/ubuntu18/scripts.squid4/build/squid/squid-4.8=.&nbsp;-fstack-protector-strong&nbsp;-$&lt;br&gt;format&nbsp;-Werror=format-security&nbsp;-Wdate-time&nbsp;-D_FORTIFY_SOURCE=2&nbsp;-Wl,-Bsymbolic-functions&nbsp;-Wl,-z,relro&nbsp;-Wl,-z,now&nbsp;-Wl,--as-needed&nbsp;-latomic&#39;&nbsp;&#39;BUILDCXX=x86_64-linux-gn$&lt;br&gt;-g++&#39;&nbsp;&#39;--with-build-environment=default&#39;&nbsp;&#39;--enable-build-info=Ubuntu&nbsp;linux&#39;&nbsp;&#39;--datadir=/usr/share/squid&#39;&nbsp;&#39;--sysconfdir=/etc/squid&#39;&nbsp;&#39;--libexecdir=/usr/lib/squid&#39;&nbsp;&#39;-$&lt;br&gt;mandir=/usr/share/man&#39;&nbsp;&#39;--enable-inline&#39;&nbsp;&#39;--disable-arch-native&#39;&nbsp;&#39;--enable-async-io=8&#39;&nbsp;&#39;--enable-storeio=ufs,aufs,diskd,rock&#39;&nbsp;&#39;--enable-removal-policies=lru,heap&#39;&nbsp;$&lt;br&gt;--enable-delay-pools&#39;&nbsp;&#39;--enable-cache-digests&#39;&nbsp;&#39;--enable-icap-client&#39;&nbsp;&#39;--enable-ssl&#39;&nbsp;&#39;--enable-ssl-crtd&#39;&nbsp;&#39;--with-openssl&#39;&nbsp;&#39;--enable-follow-x-forwarded-for&#39;&nbsp;&#39;--enab$&lt;br&gt;e-auth-basic=DB,fake,getpwnam,LDAP,NCSA,NIS,PAM,POP3,RADIUS,SASL,SMB&#39;&nbsp;&#39;--enable-auth-digest=file,LDAP&#39;&nbsp;&#39;--enable-auth-negotiate=kerberos,wrapper&#39;&nbsp;&#39;--enable-auth-ntl&lt;br&gt;m=fake,SMB_LM&#39;&nbsp;&#39;--enable-external-acl-helpers=file_userip,kerberos_ldap_group,LDAP_group,session,SQL_session,time_quota,unix_group,wbinfo_group&#39;&nbsp;&#39;--enable-security-&lt;br&gt;cert-validators=fake&#39;&nbsp;&#39;--enable-storeid-rewrite-helpers=file&#39;&nbsp;&#39;--enable-url-rewrite-helpers=fake&#39;&nbsp;&#39;--enable-eui&#39;&nbsp;&#39;--enable-esi&#39;&nbsp;&#39;--enable-icmp&#39;&nbsp;&#39;--enable-zph-qos&#39;&nbsp;&#39;&lt;br&gt;--enable-ecap&#39;&nbsp;&#39;--disable-translation&#39;&nbsp;&#39;--with-swapdir=/var/spool/squid&#39;&nbsp;&#39;--with-logdir=/var/log/squid&#39;&nbsp;&#39;--with-pidfile=/var/run/squid.pid&#39;&nbsp;&#39;--with-filedescriptors=&lt;br&gt;65536&#39;&nbsp;&#39;--with-large-files&#39;&nbsp;&#39;--with-default-user=proxy&#39;&nbsp;&#39;--with-gnutls&#39;&nbsp;&#39;--enable-linux-netfilter&#39;&nbsp;&#39;build_alias=x86_64-linux-gnu&#39;&nbsp;&#39;CC=x86_64-linux-gnu-gcc&#39;&nbsp;&#39;CFLAGS=&lt;br&gt;-g&nbsp;-O2&nbsp;-fdebug-prefix-map=/home/builder/diladele/squid-ubuntu/src/ubuntu18/scripts.squid4/build/squid/squid-4.8=.&nbsp;-fstack-protector-strong&nbsp;-Wformat&nbsp;-Werror=format-s&lt;br&gt;ecurity&nbsp;-Wall&#39;&nbsp;&#39;LDFLAGS=-Wl,-Bsymbolic-functions&nbsp;-Wl,-z,relro&nbsp;-Wl,-z,now&nbsp;-Wl,--as-needed&nbsp;-latomic&#39;&nbsp;&#39;CPPFLAGS=-Wdate-time&nbsp;-D_FORTIFY_SOURCE=2&#39;&nbsp;&#39;CXX=x86_64-linux-gnu-&lt;br&gt;g++&#39;&nbsp;&#39;CXXFLAGS=-g&nbsp;-O2&nbsp;-fdebug-prefix-map=/home/builder/diladele/squid-ubuntu/src/ubuntu18/scripts.squid4/build/squid/squid-4.8=.&nbsp;-fstack-protector-strong&nbsp;-Wformat&nbsp;-&lt;br&gt;&lt;div&gt;Werror=format-security&#39;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;[2]&nbsp;Configuration&nbsp;squid.conf&lt;/div&gt;visible_hostname&nbsp;squid&lt;br&gt;max_filedesc&nbsp;4096&lt;br&gt;&lt;br&gt;http_port&nbsp;3128&lt;br&gt;#Handling&nbsp;HTTP&nbsp;requests&lt;br&gt;http_port&nbsp;3129&nbsp;intercept&lt;br&gt;include&nbsp;/etc/squid/http_sites.conf&lt;br&gt;http_access&nbsp;allow&nbsp;allowed_http_sites&lt;br&gt;&lt;br&gt;#Handling&nbsp;HTTPS&nbsp;requests&lt;br&gt;https_port&nbsp;3130&nbsp;cert=/etc/squid/ssl/squid.pem&nbsp;ssl-bump&nbsp;intercept&lt;br&gt;acl&nbsp;SSL_port&nbsp;port&nbsp;443http_access&nbsp;allow&nbsp;SSL_port&lt;br&gt;#&nbsp;Allows&nbsp;access&nbsp;to&nbsp;&lt;a&nbsp;href=&quot;http://www.google.com&quot;&gt;www.google.com&lt;/a&gt;&nbsp;and&nbsp;&lt;a&nbsp;href=&quot;http://www.ubuntu.com&quot;&gt;www.ubuntu.com&lt;/a&gt;&lt;br&gt;include&nbsp;/etc/squid/https_sites.conf&lt;br&gt;&lt;br&gt;#&nbsp;TLS&nbsp;peek-and-splice&nbsp;configuration&lt;br&gt;acl&nbsp;step1&nbsp;at_step&nbsp;SslBump1&lt;br&gt;acl&nbsp;step2&nbsp;at_step&nbsp;SslBump2&lt;br&gt;acl&nbsp;step3&nbsp;at_step&nbsp;SslBump3&lt;br&gt;ssl_bump&nbsp;peek&nbsp;step1&nbsp;all&lt;br&gt;ssl_bump&nbsp;peek&nbsp;step2&nbsp;allowed_https_sites&lt;br&gt;ssl_bump&nbsp;splice&nbsp;step3&nbsp;allowed_https_sitesssl_bump&nbsp;terminate&nbsp;step2&nbsp;all&lt;br&gt;http_access&nbsp;deny&nbsp;all&lt;/div&gt;&lt;/div&gt;<br>

</tt>
