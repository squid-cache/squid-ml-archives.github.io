<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;We&nbsp;would&nbsp;like&nbsp;to&nbsp;add&nbsp;some&nbsp;logic&nbsp;to&nbsp;our&nbsp;custom&nbsp;made&nbsp;ICAP&nbsp;server,&nbsp;one&nbsp;of&nbsp;these&nbsp;logics&nbsp;is&nbsp;to&nbsp;analyze&nbsp;up&nbsp;to&nbsp;10MB&nbsp;of&nbsp;data&nbsp;of&nbsp;a&nbsp;given&nbsp;file&nbsp;and&nbsp;if&nbsp;the&nbsp;file&nbsp;is&nbsp;larger&nbsp;than&nbsp;that,&nbsp;squid&nbsp;should&nbsp;not&nbsp;keep&nbsp;sending&nbsp;it&nbsp;to&nbsp;icap,&nbsp;basically,&nbsp;a&nbsp;204&nbsp;message&nbsp;should&nbsp;be&nbsp;returned.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;We&nbsp;understand&nbsp;this&nbsp;is&nbsp;not&nbsp;possible&nbsp;with&nbsp;Transfer-Complete&nbsp;OPTION,&nbsp;because&nbsp;that&nbsp;will&nbsp;send&nbsp;the&nbsp;whole&nbsp;file&nbsp;to&nbsp;the&nbsp;ICAP&nbsp;server,&nbsp;no&nbsp;matter&nbsp;the&nbsp;size.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;And&nbsp;while&nbsp;Transfer-Preview&nbsp;may&nbsp;be&nbsp;good&nbsp;for&nbsp;this,&nbsp;squid&nbsp;has&nbsp;a&nbsp;cap&nbsp;of&nbsp;64K&nbsp;of&nbsp;preview&nbsp;size&nbsp;that&nbsp;limit&nbsp;us&nbsp;in&nbsp;the&nbsp;aspect.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Is&nbsp;there&nbsp;a&nbsp;way&nbsp;to&nbsp;extend&nbsp;this&nbsp;limit?&nbsp;Modifying&nbsp;the&nbsp;source&nbsp;code&nbsp;perhaps?&lt;/div&gt;&lt;div&gt;If&nbsp;so,&nbsp;what&nbsp;are&nbsp;the&nbsp;disadvantages&nbsp;of&nbsp;doing&nbsp;so?&nbsp;Would&nbsp;it&nbsp;require&nbsp;more&nbsp;RAM&nbsp;per&nbsp;response&nbsp;or&nbsp;is&nbsp;RAM&nbsp;dynamically&nbsp;allocated&nbsp;as&nbsp;the&nbsp;file&nbsp;is&nbsp;being&nbsp;received?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;&lt;/div&gt;<br>

</tt>
