<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;Hi&nbsp;Amos,&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;Thanks&nbsp;a&nbsp;lot&nbsp;for&nbsp;giving&nbsp;some&nbsp;amazing&nbsp;insights..&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;So&nbsp;currently&nbsp;I&nbsp;am&nbsp;using&nbsp;Squid&nbsp;to&nbsp;achieve&nbsp;2&nbsp;things&nbsp;:&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;a)&nbsp;Content&nbsp;Filtering&nbsp;-&nbsp;by&nbsp;checking&nbsp;the&nbsp;url&nbsp;against&nbsp;an&nbsp;external&nbsp;db&nbsp;and&nbsp;allow&nbsp;and&nbsp;block&nbsp;it&nbsp;accordingly.&nbsp;(using&nbsp;url_rewriter). &lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;b)&nbsp;To&nbsp;popup&nbsp;captive&nbsp;portal&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;1)&nbsp;Regarding&nbsp;the&nbsp;use&nbsp;of&nbsp;4&nbsp;ports&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;Using&nbsp;iptables,&nbsp;I&nbsp;am&nbsp;redirecting&nbsp;the&nbsp;non&nbsp;authenticated&nbsp;users&nbsp;to&nbsp;ports &lt;span&nbsp;class=&quot;gmail_default&quot;&gt;&lt;/span&gt;<br>
<br>
&lt;span&nbsp;class=&quot;gmail_default&quot;&gt;&lt;/span&gt;3132 &nbsp; &amp; &lt;span&nbsp;class=&quot;gmail_default&quot;&gt;&lt;/span&gt;&lt;span&nbsp;class=&quot;gmail_default&quot;&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:Arial,Helvetica,sans-serif;font-size:small&quot;&gt;3133.&nbsp;And&nbsp;then&nbsp;in&nbsp;squid&nbsp;i&nbsp;am&nbsp;checking&nbsp;the&nbsp;port&nbsp;on&nbsp;which&nbsp;I&nbsp;have&nbsp;received&nbsp;the&nbsp;request&nbsp;from.&nbsp;If&nbsp;its&nbsp;the&nbsp;above&nbsp;ports,&nbsp;then&nbsp;I&nbsp;run&nbsp;the&nbsp;captive&nbsp;portal&nbsp;flow&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial,Helvetica,sans-serif;font-size:small&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial,Helvetica,sans-serif;font-size:small&quot;&gt;Once&nbsp;the&nbsp;user&nbsp;is&nbsp;authenticated&nbsp;,&nbsp;then&nbsp;I&nbsp;redirect&nbsp;their&nbsp;traffic&nbsp;to&nbsp;ports &lt;/span&gt;&lt;span&nbsp;class=&quot;gmail_default&quot;&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-family:Arial,Helvetica,sans-serif;font-size:small&quot;&gt;3129&nbsp;and&nbsp;3131,&nbsp;and&nbsp;for&nbsp;those&nbsp;ports&nbsp;I&nbsp;run&nbsp;the&nbsp;content&nbsp;policy&nbsp;flow.&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial,Helvetica,sans-serif;font-size:small&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial,Helvetica,sans-serif;font-size:small&quot;&gt;I&nbsp;am&nbsp;not&nbsp;sure&nbsp;if&nbsp;this&nbsp;is&nbsp;the&nbsp;right&nbsp;way&nbsp;of&nbsp;choosing&nbsp;the&nbsp;flow.&nbsp;Please&nbsp;advise&nbsp;if&nbsp;there&nbsp;is&nbsp;any&nbsp;other&nbsp;way&nbsp;to&nbsp;run&nbsp;two&nbsp;different&nbsp;flows&nbsp;with&nbsp;one&nbsp;squid.&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial,Helvetica,sans-serif;font-size:small&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial,Helvetica,sans-serif;font-size:small&quot;&gt;2)&nbsp;Actually&nbsp;3128&nbsp;port&nbsp;is&nbsp;there&nbsp;in&nbsp;the&nbsp;config..&nbsp;missed&nbsp;to&nbsp;attach&nbsp;that.. &lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial,Helvetica,sans-serif;font-size:small&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;&quot;&gt;3)&nbsp;Right&nbsp;now&nbsp;I&nbsp;have&nbsp;configured&nbsp;firewall&nbsp;to&nbsp;only&nbsp;allow&nbsp;these&nbsp;4&nbsp;ports&nbsp;on&nbsp;the&nbsp;INPUT&nbsp;chain,&nbsp;so&nbsp;I&nbsp;am&nbsp;not&nbsp;expecting&nbsp;traffic&nbsp;to&nbsp;come&nbsp;from&nbsp;any&nbsp;other&nbsp;ports.&nbsp;In&nbsp;that&nbsp;case,&nbsp;is&nbsp;it&nbsp;okay&nbsp;if&nbsp;I&nbsp;have&nbsp;removed&nbsp;the&nbsp;default&nbsp;config&nbsp;and&nbsp;kept &nbsp;&quot;http_access&nbsp;allow&nbsp;all&quot;&nbsp;??&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;&quot;&gt;The&nbsp;only&nbsp;issue&nbsp;is&nbsp;that&nbsp;the&nbsp;attacker&nbsp;now&nbsp;has&nbsp;4&nbsp;ports&nbsp;to&nbsp;run&nbsp;attacks&nbsp;on.&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;&quot;&gt;4) &lt;span&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;/span&gt;&gt;&nbsp;on_unsupported_protocol&nbsp;tunnel&nbsp;all &lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;&quot;&gt;I&nbsp;had&nbsp;added&nbsp;this&nbsp;when&nbsp;I&nbsp;faced&nbsp;issue&nbsp;with&nbsp;one&nbsp;of&nbsp;the&nbsp;Apps,&nbsp;Whatsapp&nbsp;which&nbsp;send&nbsp;the&nbsp;http&nbsp;traffic&nbsp;on&nbsp;https&nbsp;port.&nbsp;If&nbsp;I&nbsp;replace&nbsp;that&nbsp;with&nbsp;&lt;b&gt;respond&lt;/b&gt;,&nbsp;I&nbsp;guess&nbsp;Whatsapp&nbsp;will&nbsp;become&nbsp;unusable..&nbsp;right&nbsp;?&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;&quot;&gt;5) &lt;span&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;/span&gt;ipcache_size&nbsp;&amp; &lt;span&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;/span&gt;fqdncache_size. &lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;&quot;&gt;I&nbsp;was&nbsp;too&nbsp;concerned&nbsp;about&nbsp;the&nbsp;memory&nbsp;usage&nbsp;but&nbsp;I&nbsp;believe&nbsp;it&nbsp;does&nbsp;more&nbsp;bad&nbsp;than&nbsp;good. &nbsp;I&nbsp;will&nbsp;increase&nbsp;them&nbsp;to&nbsp;their&nbsp;defaults. &lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;&quot;&gt;6) &lt;span&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;/span&gt;cache_mem&nbsp;0&nbsp;MB&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;&quot;&gt;The&nbsp;default&nbsp;cache&nbsp;memory&nbsp;is&nbsp;quite&nbsp;huge&nbsp;(256&nbsp;MB).&nbsp;That&nbsp;is&nbsp;approx&nbsp;the&nbsp;total&nbsp;usable&nbsp;memory&nbsp;I&nbsp;have&nbsp;on&nbsp;the&nbsp;AP.&nbsp;In&nbsp;that&nbsp;case,&nbsp;what&nbsp;do&nbsp;you&nbsp;think&nbsp;should&nbsp;be&nbsp;a&nbsp;good&nbsp;starting&nbsp;point&nbsp;in&nbsp;case&nbsp;I&nbsp;keep&nbsp;it&nbsp;to&nbsp;a&nbsp;non&nbsp;zero&nbsp;value&nbsp;?&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;&quot;&gt;7)&nbsp;memory_pools&nbsp;off&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;&quot;&gt;Again,&nbsp;I&nbsp;was&nbsp;too&nbsp;concerned&nbsp;about&nbsp;memory&nbsp;use&nbsp;and&nbsp;I&nbsp;got&nbsp;scared&nbsp;because&nbsp;of&nbsp;this&nbsp;comment &lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;&quot;&gt;------<br>
<br>
------<br>
<br>
------<br>
<br>
------<br>
<br>
------<br>
<br>
------<br>
<br>
------<br>
<br>
------<br>
<br>
------<br>
<br>
------<br>
<br>
------<br>
<br>
------<br>
<br>
------<br>
<br>
------<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(30,30,30);font-family:courier;font-size:12px&quot;&gt;If&nbsp;set,&nbsp;Squid&nbsp;will&nbsp;keep&nbsp;pools&nbsp;of&nbsp;allocated&nbsp;(but&nbsp;unused)&nbsp;memory&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(30,30,30);font-family:courier;font-size:12px&quot;&gt; available&nbsp;for&nbsp;future&nbsp;use.&nbsp;&nbsp;If&nbsp;memory&nbsp;is&nbsp;a&nbsp;premium&nbsp;on&nbsp;your&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(30,30,30);font-family:courier;font-size:12px&quot;&gt; system&nbsp;and&nbsp;you&nbsp;believe&nbsp;your&nbsp;malloc&nbsp;library&nbsp;outperforms&nbsp;Squid &lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(30,30,30);font-family:courier;font-size:12px&quot;&gt; routines,&nbsp;disable&nbsp;this.&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(30,30,30);font-family:courier;font-size:12px&quot;&gt;-------&lt;/span&gt;------<br>
<br>
------<br>
<br>
<br>
------<br>
<br>
<br>
------<br>
<br>
<br>
------<br>
<br>
<br>
------<br>
<br>
<br>
------<br>
<br>
<br>
------<br>
<br>
<br>
------<br>
<br>
<br>
------<br>
<br>
<br>
------<br>
<br>
<br>
------<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
 &lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;&quot;&gt;But&nbsp;I&nbsp;believe&nbsp;some&nbsp;memory&nbsp;in&nbsp;exchange&nbsp;of&nbsp;performance&nbsp;is&nbsp;OK.&nbsp;So&nbsp;I&nbsp;am&nbsp;going&nbsp;to&nbsp;enable&nbsp;it.&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;&quot;&gt;8)&nbsp;The&nbsp;reason&nbsp;for&nbsp;keeping&nbsp;a&nbsp;single&nbsp;url_rewrite&nbsp;process&nbsp;has&nbsp;got&nbsp;to&nbsp;do&nbsp;with&nbsp;caching&nbsp;of&nbsp;the&nbsp;external&nbsp;content&nbsp;policy&nbsp;api&nbsp;replies&nbsp;which&nbsp;is&nbsp;mainly&nbsp;to&nbsp;avoid&nbsp;making&nbsp;external&nbsp;calls&nbsp;if&nbsp;the&nbsp;cache&nbsp;is&nbsp;available.&nbsp;If&nbsp;I&nbsp;have&nbsp;multiple&nbsp;processes,&nbsp;the&nbsp;cache&nbsp;will&nbsp;get&nbsp;divided&nbsp;amongst&nbsp;multiple&nbsp;processes&nbsp;depending&nbsp;on&nbsp;which&nbsp;one&nbsp;has&nbsp;made&nbsp;the&nbsp;call.&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;&quot;&gt;9) &lt;span&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;/span&gt;max_filedesc&nbsp;5120.&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;&quot;&gt;I&nbsp;had&nbsp;kept&nbsp;this&nbsp;number&nbsp;bigger&nbsp;because&nbsp;we&nbsp;were&nbsp;getting&nbsp;&quot;out&nbsp;of&nbsp;file&nbsp;descriptors&nbsp;error&quot;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;&quot;&gt;10)&nbsp;Above&nbsp;all,&nbsp;the&nbsp;best&nbsp;thing&nbsp;would&nbsp;be&nbsp;a&nbsp;way&nbsp;to&nbsp;differentiate&nbsp;between&nbsp;a&nbsp;high&nbsp;traffic&nbsp;flow&nbsp;of&nbsp;http(s)&nbsp;requests&nbsp;coming&nbsp;in&nbsp;from&nbsp;legitimate&nbsp;users&nbsp;vs&nbsp;a&nbsp;high&nbsp;traffic&nbsp;flow&nbsp;generated&nbsp;by&nbsp;an&nbsp;attacker&nbsp;with&nbsp;a&nbsp;simple&nbsp;script. &lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_default&quot;&gt;&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_signature&quot;&nbsp;data-smartmail=&quot;gmail_signature&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;--&lt;div&gt;Thank&nbsp;You&lt;/div&gt;&lt;div&gt;Chirayu&nbsp;Patel&lt;/div&gt;&lt;div&gt;Truecom&nbsp;Telesoft &lt;/div&gt;&lt;div&gt;+91&nbsp;8758484287&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Sat,&nbsp;21&nbsp;Sep&nbsp;2019&nbsp;at&nbsp;17:33,&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:squid-users-request@lists.squid-cache.org&quot;&gt;squid-users-request@lists.squid-cache.org&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;Send&nbsp;squid-users&nbsp;mailing&nbsp;list&nbsp;submissions&nbsp;to&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
To&nbsp;subscribe&nbsp;or&nbsp;unsubscribe&nbsp;via&nbsp;the&nbsp;World&nbsp;Wide&nbsp;Web,&nbsp;visit&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
or,&nbsp;via&nbsp;email,&nbsp;send&nbsp;a&nbsp;message&nbsp;with&nbsp;subject&nbsp;or&nbsp;body&nbsp;&#39;help&#39;&nbsp;to&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users-request@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users-request@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
You&nbsp;can&nbsp;reach&nbsp;the&nbsp;person&nbsp;managing&nbsp;the&nbsp;list&nbsp;at&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users-owner@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users-owner@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
When&nbsp;replying,&nbsp;please&nbsp;edit&nbsp;your&nbsp;Subject&nbsp;line&nbsp;so&nbsp;it&nbsp;is&nbsp;more&nbsp;specific&lt;br&gt;<br>
than&nbsp;&quot;Re:&nbsp;Contents&nbsp;of&nbsp;squid-users&nbsp;digest...&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Today&#39;s&nbsp;Topics:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp; 1.&nbsp;Re:&nbsp;&lt;span&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;/span&gt;Protecting&nbsp;squid&nbsp;against&nbsp;ddos&nbsp;attacks&nbsp;(Amos&nbsp;Jeffries)&lt;br&gt;<br>
 &nbsp; 2.&nbsp;Re:&nbsp;Help&nbsp;with&nbsp;HTTPS&nbsp;SQUID&nbsp;3.1.23&nbsp;https&nbsp;proxy&nbsp;not &nbsp;working&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp;(KleinEdith)&lt;br&gt;<br>
 &nbsp; 3.&nbsp;Re:&nbsp;Help&nbsp;with&nbsp;HTTPS&nbsp;SQUID&nbsp;3.1.23&nbsp;https&nbsp;proxy&nbsp;not&nbsp;working&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp;(Matus&nbsp;UHLAR&nbsp;-&nbsp;fantomas)&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
----------------------------------------------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Message:&nbsp;1&lt;br&gt;<br>
Date:&nbsp;Sat,&nbsp;21&nbsp;Sep&nbsp;2019&nbsp;12:19:18&nbsp;+1200&lt;br&gt;<br>
From:&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&nbsp;target=&quot;_blank&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&lt;br&gt;<br>
To:&nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
Subject:&nbsp;Re:&nbsp;[squid-users]&nbsp;Protecting&nbsp;squid&nbsp;against&nbsp;ddos&nbsp;attacks&lt;br&gt;<br>
Message-ID:&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:835c4d02-4246-8c65-f9ce-cf91c7dd9e92@treenet.co.nz&quot;&nbsp;target=&quot;_blank&quot;&gt;835c4d02-4246-8c65-f9ce-cf91c7dd9e92@treenet.co.nz&lt;/a&gt;&gt;&lt;br&gt;<br>
Content-Type:&nbsp;text/plain;&nbsp;charset=utf-8&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;21/09/19&nbsp;1:03&nbsp;am,&nbsp;Chirayu&nbsp;Patel&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;--&gt;&nbsp;I&nbsp;have&nbsp;installed&nbsp;squid&nbsp;in&nbsp;a&nbsp;wifi&nbsp;access&nbsp;point&nbsp;which&nbsp;will&nbsp;in&nbsp;many&lt;br&gt;<br>
&gt;&nbsp;cases&nbsp;behave&nbsp;as&nbsp;an&nbsp;edge&nbsp;gateway&nbsp;as&nbsp;well..&nbsp;So&nbsp;basically&nbsp;it&nbsp;itself&nbsp;is&nbsp;the&lt;br&gt;<br>
&gt;&nbsp;firewall.&nbsp;There&nbsp;is&nbsp;nothing&nbsp;in&nbsp;front&nbsp;to&nbsp;protect&nbsp;it.&lt;br&gt;<br>
&gt;&nbsp;--&gt;&nbsp;There&nbsp;are&nbsp;4&nbsp;ports&nbsp;that&nbsp;are&nbsp;opened..&nbsp;If&nbsp;someone&nbsp;decides&nbsp;to&nbsp;do&nbsp;a&nbsp;DDOS&lt;br&gt;<br>
&gt;&nbsp;attack&nbsp;on&nbsp;them,&nbsp;what&nbsp;options&nbsp;do&nbsp;I&nbsp;have&nbsp;to&nbsp;protect&nbsp;against&nbsp;them.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Pretty&nbsp;much&nbsp;the&nbsp;exact&nbsp;opposite&nbsp;of&nbsp;what&nbsp;you&nbsp;have&nbsp;this&nbsp;proxy&nbsp;configured&nbsp;to&lt;br&gt;<br>
be&nbsp;doing.&lt;br&gt;<br>
&lt;br&gt;<br>
Right&nbsp;now&nbsp;you&nbsp;have&nbsp;it&nbsp;setup&nbsp;to&nbsp;allow&nbsp;all&nbsp;traffic&nbsp;*from*&nbsp;anywhere&nbsp;*to*&lt;br&gt;<br>
anywhere,&nbsp;with&nbsp;no&nbsp;controls,&nbsp;no&nbsp;logging,&nbsp;and&nbsp;no&nbsp;report&nbsp;to&nbsp;any&nbsp;backend&lt;br&gt;<br>
where&nbsp;the&nbsp;traffic&nbsp;originated.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Squid&nbsp;default&nbsp;configuration&nbsp;comes&nbsp;with&nbsp;some&nbsp;DoS&nbsp;protections&nbsp;as&lt;br&gt;<br>
recommended&nbsp;config,&nbsp;some&nbsp;are&nbsp;built-in&nbsp;and&nbsp;always&nbsp;working.&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;This&nbsp;is&nbsp;my&nbsp;squid&nbsp;config&nbsp;file&nbsp;:&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;------------------------------------------&lt;br&gt;<br>
&gt;&nbsp;http_port&nbsp;&lt;span&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;/span&gt;&lt;span&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;/span&gt;3129&nbsp;intercept&lt;br&gt;<br>
&gt;&nbsp;https_port&nbsp;3131&nbsp;intercept&nbsp;ssl-bump&nbsp;cert=/etc/ray/certificates/myCA.pem&nbsp;\&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp;generate-host-certificates=off&nbsp;dynamic_cert_mem_cache_size=2MB&lt;br&gt;<br>
&gt;&nbsp;##&nbsp;For&nbsp;Captive&nbsp;Portal&nbsp; &nbsp; &lt;br&gt;<br>
&gt;&nbsp;http_port&nbsp;&lt;span&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;/span&gt;3132&nbsp;intercept&lt;br&gt;<br>
&gt;&nbsp;https_port&nbsp;&lt;span&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;/span&gt;3133&nbsp;intercept&nbsp;ssl-bump&nbsp;cert=/etc/ray/certificates/myCA.pem&nbsp;\&lt;br&gt;<br>
&gt;&nbsp; &nbsp; &nbsp;generate-host-certificates=off&nbsp;dynamic_cert_mem_cache_size=1MB&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
That&nbsp;comment&nbsp;&quot;For&nbsp;Captive&nbsp;Portal&quot;&nbsp;is&nbsp;out&nbsp;of&nbsp;place.&nbsp;Interception&nbsp;*is*&lt;br&gt;<br>
captive&nbsp;portal,&nbsp;so&nbsp;all&nbsp;your&nbsp;ports&nbsp;above&nbsp;are&nbsp;captive&nbsp;portal&nbsp;ports.&lt;br&gt;<br>
&lt;br&gt;<br>
Usually&nbsp;you&nbsp;would&nbsp;only&nbsp;need&nbsp;one&nbsp;port&nbsp;of&nbsp;each&nbsp;type.&nbsp;Including&nbsp;the&lt;br&gt;<br>
forward-proxy&nbsp;port&nbsp;(3128&nbsp;with&nbsp;no&nbsp;mode&nbsp;flag,&nbsp;which&nbsp;you&nbsp;are&nbsp;missing).&lt;br&gt;<br>
&lt;br&gt;<br>
For&nbsp;DoS&nbsp;and&nbsp;DDoS&nbsp;protection,&nbsp;having&nbsp;more&nbsp;ports&nbsp;receiving&nbsp;traffic&nbsp;does&lt;br&gt;<br>
help&nbsp;by&nbsp;allowing&nbsp;more&nbsp;TCP&nbsp;port&nbsp;numbers&nbsp;to&nbsp;be&nbsp;available&nbsp;for&nbsp;use.&nbsp;But&nbsp;you&lt;br&gt;<br>
need&nbsp;firewall&nbsp;rules&nbsp;to&nbsp;spread&nbsp;the&nbsp;traffic&nbsp;load&nbsp;across&nbsp;those&nbsp;ports.&nbsp;See&lt;br&gt;<br>
the&nbsp;&quot;Frontend&nbsp;Alternative&nbsp;1&quot;&nbsp;section&nbsp;of&lt;br&gt;<br>
 &lt;&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/ConfigExamples/ExtremeCarpFrontend&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://wiki.squid-cache.org/ConfigExamples/ExtremeCarpFrontend&lt;/a&gt;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
For&nbsp;the&nbsp;best&nbsp;DDoS&nbsp;protection&nbsp;Squid&nbsp;can&nbsp;offer&nbsp;you&nbsp;would&nbsp;have&nbsp;a&lt;br&gt;<br>
multi-machine&nbsp;setup&nbsp;like&nbsp;that&nbsp;config&nbsp;page&nbsp;is&nbsp;part&nbsp;of.&nbsp;The&nbsp;particular&lt;br&gt;<br>
Squid&nbsp;you&nbsp;have&nbsp;right&nbsp;now&nbsp;though&nbsp;can&nbsp;gain&nbsp;from&nbsp;just&nbsp;having&nbsp;the&nbsp;port&nbsp;load&lt;br&gt;<br>
balancing&nbsp;part.&nbsp;You&nbsp;can&nbsp;extend&nbsp;the&nbsp;backend&nbsp;part&nbsp;on&nbsp;other&nbsp;machines&nbsp;later&lt;br&gt;<br>
if&nbsp;you&nbsp;want&nbsp;/&nbsp;need.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;#&nbsp;TLS/SSL&nbsp;bumping&nbsp;definitions&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;tls_s1_connect&nbsp;at_step&nbsp;SslBump1&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;/span&gt;&gt;&nbsp;acl&nbsp;tls_s2_client_hello&nbsp;at_step&nbsp;SslBump2&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;tls_s3_server_hello&nbsp;at_step&nbsp;SslBump3&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
Unusued&nbsp;ACLs&nbsp;still&nbsp;consume&nbsp;memory.&nbsp;Not&nbsp;much,&nbsp;but&nbsp;still&nbsp;thats&nbsp;memory.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;#&nbsp;TLS/SSL&nbsp;bumping&nbsp;steps&lt;br&gt;<br>
&gt;&nbsp;ssl_bump&nbsp;peek&nbsp;tls_s1_connect&nbsp;all&nbsp;#&nbsp;peek&nbsp;at&nbsp;TLS/SSL&nbsp;connect&nbsp;data&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;&quot;all&quot;&nbsp;on&nbsp;the&nbsp;above&nbsp;line&nbsp;is&nbsp;unnecessary&nbsp;and&nbsp;a&nbsp;waste&nbsp;of&nbsp;CPU&nbsp;cycles&nbsp;on&lt;br&gt;<br>
ever&nbsp;next&nbsp;connection.&nbsp;Remove&nbsp;it.&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;ssl_bump&nbsp;splice&nbsp;all&nbsp;#&nbsp;splice:&nbsp;no&nbsp;active&nbsp;bumping&lt;br&gt;<br>
&lt;span&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;/span&gt;&gt;&nbsp;on_unsupported_protocol&nbsp;tunnel&nbsp;all&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;tunnel&nbsp;action&nbsp;causes&nbsp;Squid&nbsp;to&nbsp;setup&nbsp;a&nbsp;server&nbsp;connection.&nbsp;That&nbsp;costs&lt;br&gt;<br>
2x&nbsp;TCP&nbsp;ports,&nbsp;2x&nbsp;FDs,&nbsp;client&nbsp;I/O,&nbsp;server&nbsp;I/O,&nbsp;CPU&nbsp;cycles&nbsp;to&nbsp;perform&nbsp;all&lt;br&gt;<br>
the&nbsp;I/O,&nbsp;and&nbsp;memory&nbsp;for&nbsp;all&nbsp;the&nbsp;state&nbsp;and&nbsp;I/O&nbsp;buffers&lt;br&gt;<br>
&lt;br&gt;<br>
While&nbsp;this&nbsp;may&nbsp;give&nbsp;you&nbsp;good&nbsp;service&nbsp;for&nbsp;weird&nbsp;client&nbsp;traffic.&nbsp;If&nbsp;your&lt;br&gt;<br>
DDoS&nbsp;risk&nbsp;is&nbsp;high,&nbsp;it&nbsp;may&nbsp;be&nbsp;better&nbsp;to&nbsp;use&nbsp;&quot;respond&quot;&nbsp;instead&nbsp;and&nbsp;an&nbsp;ACL&lt;br&gt;<br>
with&nbsp;&quot;deny_info&nbsp;TCP_RESET&nbsp;attached&quot;.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;pinger_enable&nbsp;off&lt;br&gt;<br>
&gt;&nbsp;digest_generation&nbsp;off&lt;br&gt;<br>
&gt;&nbsp;netdb_filename&nbsp;none&lt;br&gt;<br>
&gt;&nbsp;&lt;span&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;/span&gt;ipcache_size&nbsp;128&lt;br&gt;<br>
&lt;br&gt;<br>
ipcache&nbsp;being&nbsp;larger&nbsp;will&nbsp;help&nbsp;your&nbsp;high-traffic&nbsp;periods&nbsp;by&nbsp;helping&lt;br&gt;<br>
reduce&nbsp;delays&nbsp;on&nbsp;traffic&nbsp;you&nbsp;let&nbsp;through&nbsp;the&nbsp;proxy.&lt;br&gt;<br>
&lt;br&gt;<br>
DDoS&nbsp;can&nbsp;reduce&nbsp;that&nbsp;benefit.&nbsp;But&nbsp;that&nbsp;is&nbsp;only&nbsp;a&nbsp;*visual*&nbsp;effect,&nbsp;there&lt;br&gt;<br>
is&nbsp;no&nbsp;more&nbsp;resource&nbsp;consumption&nbsp;than&nbsp;the&nbsp;DDoS&nbsp;would&nbsp;cause&nbsp;with&nbsp;a&nbsp;smaller&lt;br&gt;<br>
ipcache&nbsp;size.&lt;br&gt;<br>
&lt;br&gt;<br>
So&nbsp;reducing&nbsp;this&nbsp;cache&nbsp;size&nbsp;only&nbsp;slows&nbsp;your&nbsp;normal&nbsp;peak&nbsp;traffic&nbsp;at&nbsp;times&lt;br&gt;<br>
when&nbsp;it&nbsp;needs&nbsp;fastest&nbsp;service.&nbsp;That&nbsp;is&nbsp;a&nbsp;tradeoff&nbsp;against&nbsp;your&nbsp;AP&lt;br&gt;<br>
machines&nbsp;memory&nbsp;available.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;&lt;span&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;/span&gt;fqdncache_size&nbsp;128&lt;br&gt;<br>
&lt;br&gt;<br>
Large&nbsp;fqdncache&nbsp;for&nbsp;intercept&nbsp;proxies&nbsp;helps&nbsp;retain&nbsp;valid&nbsp;Host&nbsp;header&lt;br&gt;<br>
records&nbsp;longer&nbsp;and&nbsp;reduce&nbsp;delays&nbsp;receiving&nbsp;new&nbsp;messages.&nbsp;So&nbsp;larger&nbsp;here&lt;br&gt;<br>
is&nbsp;better&nbsp;protection,&nbsp;against&nbsp;both&nbsp;normal&nbsp;traffic&nbsp;problems&nbsp;and&nbsp;DDoS.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;via&nbsp;off&lt;br&gt;<br>
&gt;&nbsp;forwarded_for&nbsp;transparent&lt;br&gt;<br>
&gt;&nbsp;httpd_suppress_version_string&nbsp;on&lt;br&gt;<br>
&gt;&nbsp;cache&nbsp;deny&nbsp;all&lt;br&gt;<br>
&gt;&nbsp;&lt;span&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;/span&gt;cache_mem&nbsp;0&nbsp;MB&lt;br&gt;<br>
&lt;br&gt;<br>
Using&nbsp;memory&nbsp;to&nbsp;store&nbsp;objects&nbsp;recently&nbsp;used&nbsp;gives&nbsp;100x&nbsp;speed&nbsp;increase&lt;br&gt;<br>
(aka&nbsp;DoS&nbsp;handling&nbsp;capacity).&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;though&nbsp;is&nbsp;a&nbsp;tradeoff&nbsp;with&nbsp;the&nbsp;memory&nbsp;you&nbsp;have&nbsp;available.&nbsp;Whether&lt;br&gt;<br>
that&nbsp;speed&nbsp;gain&nbsp;is&nbsp;nanoseconds,&nbsp;milliseconds&nbsp;or&nbsp;whole&nbsp;seconds&nbsp;depends&nbsp;on&lt;br&gt;<br>
your&nbsp;network&nbsp;speeds.&lt;br&gt;<br>
&lt;br&gt;<br>
FYI:&nbsp;The&nbsp;model&nbsp;of&nbsp;a&nbsp;frontend&nbsp;LB&nbsp;with&nbsp;backend&nbsp;cache&nbsp;machine&nbsp;(like&nbsp;that&lt;br&gt;<br>
CARP&nbsp;setup&nbsp;earlier)&nbsp;is&nbsp;designed&nbsp;to&nbsp;reduce&nbsp;that&nbsp;speed&nbsp;difference&nbsp;so&nbsp;both&lt;br&gt;<br>
the&nbsp;resource&nbsp;consumption&nbsp;and&nbsp;speed&nbsp;gain&nbsp;cache&nbsp;gives&nbsp;is&nbsp;primarily&lt;br&gt;<br>
happening&nbsp;at&nbsp;the&nbsp;backends&nbsp;-&nbsp;which&nbsp;are&nbsp;very&nbsp;close&nbsp;in&nbsp;the&nbsp;network&nbsp;so&lt;br&gt;<br>
minimal&nbsp;extra&nbsp;delay&nbsp;for&nbsp;the&nbsp;frontend&nbsp;LB.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;&lt;span&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;/span&gt;memory_pools&nbsp;off&lt;br&gt;<br>
&lt;br&gt;<br>
Only&nbsp;if&nbsp;you&nbsp;have&nbsp;to.&nbsp;The&nbsp;memory&nbsp;usage&nbsp;patterns&nbsp;of&nbsp;high-traffic&nbsp;software&lt;br&gt;<br>
like&nbsp;Squid&nbsp;is&nbsp;quite&nbsp;different&nbsp;from&nbsp;what&nbsp;most&nbsp;OS&nbsp;malloc&nbsp;are&nbsp;optimized&lt;br&gt;<br>
for.&nbsp;The&nbsp;memory&nbsp;pools&nbsp;in&nbsp;Squid&nbsp;are&nbsp;optimized&nbsp;to&nbsp;reduce&nbsp;that&nbsp;to&nbsp;a&nbsp;number&lt;br&gt;<br>
of&nbsp;larger&nbsp;more&nbsp;consistently&nbsp;sized&nbsp;allocations.&lt;br&gt;<br>
&lt;br&gt;<br>
Without&nbsp;these&nbsp;pools&nbsp;memory&nbsp;allocation&nbsp;cycles&nbsp;add&nbsp;a&nbsp;bit&nbsp;of&nbsp;speed&lt;br&gt;<br>
reduction&nbsp;to&nbsp;the&nbsp;proxy,&nbsp;and&nbsp;worse&nbsp;can&nbsp;easily&nbsp;lead&nbsp;to&nbsp;memory&lt;br&gt;<br>
fragmentation&nbsp;issues.&nbsp;Normal&nbsp;traffic&nbsp;speeds&nbsp;these&nbsp;effects&nbsp;are&nbsp;not&nbsp;easily&lt;br&gt;<br>
noticed,&nbsp;but&nbsp;under&nbsp;DoS&nbsp;or&nbsp;DDoS&nbsp;conditions&nbsp;they&nbsp;can&nbsp;drag&nbsp;the&nbsp;entire&lt;br&gt;<br>
machine&nbsp;to&nbsp;a&nbsp;crawl&nbsp;if&nbsp;not&nbsp;a&nbsp;complete&nbsp;halt&nbsp;on&nbsp;low-memory&nbsp;systems&nbsp;(like&lt;br&gt;<br>
yours?).&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;shutdown_lifetime&nbsp;0&nbsp;seconds&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;#logfile_daemon&nbsp;/dev/null&lt;br&gt;<br>
&gt;&nbsp;access_log&nbsp;none&lt;br&gt;<br>
&lt;br&gt;<br>
A&nbsp;bit&nbsp;part&nbsp;of&nbsp;DoS&nbsp;or&nbsp;DDoS&nbsp;protection&nbsp;is&nbsp;identifying&nbsp;the&nbsp;attack&nbsp;as&nbsp;it&lt;br&gt;<br>
starts.&nbsp;That&nbsp;requires&nbsp;the&nbsp;information&nbsp;about&nbsp;what&nbsp;traffic&nbsp;is&nbsp;happening&nbsp;to&lt;br&gt;<br>
go&nbsp;somewhere&nbsp;for&nbsp;processing.&lt;br&gt;<br>
&lt;br&gt;<br>
Even&nbsp;if&nbsp;you&nbsp;have&nbsp;something&nbsp;else&nbsp;doing&nbsp;deep&nbsp;packet&nbsp;inspection&nbsp;I&nbsp;would&lt;br&gt;<br>
enable&nbsp;logs.&nbsp;Use&nbsp;one&nbsp;of&nbsp;the&nbsp;network&nbsp;logging&nbsp;modules&nbsp;to&nbsp;send&nbsp;them&nbsp;to&lt;br&gt;<br>
another&nbsp;machine&nbsp;if&nbsp;necessary&nbsp;for&nbsp;processing.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;#acl&nbsp;good_url&nbsp;dstdomain&nbsp;.&lt;a&nbsp;href=&quot;http://yahoo.com&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;yahoo.com&lt;/a&gt;&nbsp;&lt;&lt;a&nbsp;href=&quot;http://yahoo.com&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://yahoo.com&lt;/a&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;http_access&nbsp;allow&nbsp;all&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
See&nbsp;the&nbsp;&quot;default&nbsp;config&quot;&nbsp;section&nbsp;of&lt;br&gt;<br>
&lt;&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/Squid-3.5&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://wiki.squid-cache.org/Squid-3.5&lt;/a&gt;&gt;.&nbsp;The&nbsp;default&nbsp;rules&nbsp;are&lt;br&gt;<br>
primarily&nbsp;DoS&nbsp;protections&nbsp;these&nbsp;days,&nbsp;with&nbsp;some&nbsp;other&nbsp;nasty&nbsp;attacks&lt;br&gt;<br>
(potentially&nbsp;leading&nbsp;to&nbsp;DDoS&nbsp;indirectly)&nbsp;as&nbsp;well.&lt;br&gt;<br>
&lt;br&gt;<br>
You&nbsp;need&nbsp;those&nbsp;rules,&nbsp;and&nbsp;you&nbsp;need&nbsp;a&nbsp;clear&nbsp;policy&nbsp;on&nbsp;what&nbsp;traffic&nbsp;you&lt;br&gt;<br>
allow&nbsp;through&nbsp;the&nbsp;proxy&nbsp;(from&nbsp;where,&nbsp;to&nbsp;where).&nbsp;Once&nbsp;you&nbsp;have&nbsp;that&nbsp;in&lt;br&gt;<br>
place&nbsp;you&nbsp;can&nbsp;reasonably&nbsp;consider&nbsp;what&nbsp;DoS/DDoS&nbsp;risk&nbsp;is&nbsp;left&nbsp;to&nbsp;deal&lt;br&gt;<br>
with.&nbsp;So&nbsp;long&nbsp;as&nbsp;your&nbsp;policy&nbsp;and&nbsp;rule&nbsp;is&nbsp;&quot;http_access&nbsp;allow&nbsp;all&quot;&nbsp;you&nbsp;can&lt;br&gt;<br>
be&nbsp;DoS&#39;ed&nbsp;by&nbsp;a&nbsp;&lt;span&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;/span&gt;single&nbsp;38&nbsp;byte&nbsp;HTTP&nbsp;request&nbsp;message&nbsp;-&nbsp;at&nbsp;least&nbsp;the&nbsp;proxy&lt;br&gt;<br>
killed&nbsp;completely,&nbsp;possibly&nbsp;the&nbsp;whole&nbsp;machine.&lt;br&gt;<br>
 (FYI&nbsp;the&nbsp;other&nbsp;protection&nbsp;against&nbsp;this&nbsp;attack&nbsp;is&nbsp;the&nbsp;Via&nbsp;header,&nbsp;which&lt;br&gt;<br>
you&nbsp;have&nbsp;disabled).&lt;span&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;url_rewrite_program&nbsp;/tmp/squid/urlcat_server_start.sh&lt;br&gt;<br>
&gt;&nbsp;#url_rewrite_bypass&nbsp;on&lt;br&gt;<br>
&gt;&nbsp;url_rewrite_children&nbsp;1&nbsp;startup=1&nbsp;idle=1&nbsp;concurrency=30&nbsp;queue-size=10000&lt;br&gt;<br>
&gt;&nbsp;on-persistent-overload=ERR&lt;br&gt;<br>
&lt;br&gt;<br>
Having&nbsp;only&nbsp;one&nbsp;helper&nbsp;may&nbsp;be&nbsp;a&nbsp;source&nbsp;of&nbsp;problems&nbsp;under&nbsp;any&nbsp;conditions.&lt;br&gt;<br>
The&nbsp;ERR&nbsp;will&nbsp;help,&nbsp;but&nbsp;ideally&nbsp;you&nbsp;don&#39;t&nbsp;want&nbsp;to&nbsp;reach&nbsp;that&nbsp;state.&lt;br&gt;<br>
&lt;br&gt;<br>
Consider&nbsp;whether&nbsp;the&nbsp;thing&nbsp;this&nbsp;helper&nbsp;is&nbsp;doing&nbsp;can&nbsp;be&nbsp;done&nbsp;by&nbsp;ACLs&nbsp;and&lt;br&gt;<br>
deny_info&nbsp;instead.&nbsp;That&nbsp;would&nbsp;avoid&nbsp;all&nbsp;the&nbsp;helper&nbsp;delays&nbsp;or&nbsp;I/O&lt;br&gt;<br>
resource&nbsp;needs,&nbsp;and&nbsp;any&nbsp;clients&nbsp;getting&nbsp;those&nbsp;ERR&nbsp;error&nbsp;pages.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;#url_rewrite_access&nbsp;allow&nbsp;all&lt;br&gt;<br>
&gt;&nbsp;#url_rewrite_extras&nbsp;&quot;%&gt;a/%&gt;A&nbsp;%un&nbsp;%&gt;rm&nbsp;bump_mode=%ssl::bump_mode&lt;br&gt;<br>
&gt;&nbsp;sni=\&quot;%ssl::&gt;sni\&quot;&nbsp;referer=\&quot;%{Referer}&gt;h\&quot;&quot;&lt;br&gt;<br>
&gt;&nbsp;url_rewrite_extras&nbsp;&quot;%&gt;a&nbsp;%lp&nbsp;%ssl::&gt;sni&quot;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&lt;span&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;/span&gt;max_filedesc&nbsp;5120&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;is&nbsp;the&nbsp;most&nbsp;direct&nbsp;measure&nbsp;of&nbsp;how&nbsp;large&nbsp;a&nbsp;DoS&nbsp;has&nbsp;to&nbsp;be&nbsp;to&nbsp;kill&lt;br&gt;<br>
your&nbsp;traffic.&nbsp;The&nbsp;smaller&nbsp;it&nbsp;is&nbsp;the&nbsp;fewer&nbsp;connections&nbsp;the&nbsp;DoS&nbsp;needs&nbsp;to&nbsp;open.&lt;br&gt;<br>
&lt;br&gt;<br>
There&nbsp;is&nbsp;a&nbsp;tradeoff&nbsp;though&nbsp;between&nbsp;the&nbsp;memory&nbsp;each&nbsp;of&nbsp;these&nbsp;needs&nbsp;to&lt;br&gt;<br>
allocate&nbsp;(~500&nbsp;bytes&nbsp;just&nbsp;to&nbsp;exist,&nbsp;up&nbsp;to&nbsp;256KB&nbsp;when&nbsp;in&nbsp;use)&nbsp;vs&nbsp;the&lt;br&gt;<br>
memory&nbsp;your&nbsp;machine&nbsp;has&nbsp;available.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;reduction&nbsp;of&nbsp;that&nbsp;&quot;in&nbsp;use&quot;&nbsp;time&nbsp;also&nbsp;matters&nbsp;as&nbsp;one&nbsp;might&nbsp;expect.&lt;br&gt;<br>
Which&nbsp;is&nbsp;where&nbsp;the&nbsp;cache_mem&nbsp;speedup&nbsp;comes&nbsp;in,&nbsp;to&nbsp;answer&nbsp;repeat&nbsp;queries&lt;br&gt;<br>
(eg&nbsp;those&nbsp;seen&nbsp;in&nbsp;a&nbsp;classical&nbsp;DoS)&nbsp;at&nbsp;orders&nbsp;of&nbsp;magnitude&nbsp;higher&nbsp;speed&lt;br&gt;<br>
than&nbsp;the&nbsp;backend&nbsp;network&nbsp;can&nbsp;provide&nbsp;the&nbsp;same&nbsp;answer.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;coredump_dir&nbsp;/tmp&lt;br&gt;<br>
&gt;&nbsp;client_lifetime&nbsp;30&nbsp;minutes&lt;br&gt;<br>
&gt;&nbsp;read_ahead_gap&nbsp;8&nbsp;KB&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Additional&nbsp;to&nbsp;all&nbsp;the&nbsp;above,&nbsp;you&nbsp;can&nbsp;setup&nbsp;a&nbsp;&quot;&lt;span&nbsp;class=&quot;gmail_default&quot;&nbsp;style=&quot;font-family:verdana,sans-serif;font-size:x-small&quot;&gt;&lt;/span&gt;deny_info&nbsp;TCP_RESET&nbsp;...&quot;&lt;br&gt;<br>
for&nbsp;any&nbsp;ACLs&nbsp;which&nbsp;does&nbsp;a&nbsp;deny&nbsp;action&nbsp;in&nbsp;your&nbsp;rules.&nbsp;That&nbsp;will&nbsp;prevent&lt;br&gt;<br>
Squid&nbsp;generating&nbsp;an&nbsp;error&nbsp;page&nbsp;and&nbsp;consuming&nbsp;bandwidth&nbsp;to&nbsp;deliver&nbsp;it&lt;br&gt;<br>
when&nbsp;that&nbsp;ACL&nbsp;blocks&nbsp;access.&lt;br&gt;<br>
&lt;br&gt;<br>
There&nbsp;is&nbsp;a&nbsp;tradeoff&nbsp;between&nbsp;annoying&nbsp;clients&nbsp;who&nbsp;no&nbsp;longer&nbsp;know&nbsp;why&lt;br&gt;<br>
their&nbsp;connection&nbsp;ended,&nbsp;but&nbsp;under&nbsp;DoS&nbsp;or&nbsp;DDoS&nbsp;it&nbsp;is&nbsp;a&nbsp;huge&nbsp;bandwidth&nbsp;saver.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Amos&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Message:&nbsp;2&lt;br&gt;<br>
Date:&nbsp;Sat,&nbsp;21&nbsp;Sep&nbsp;2019&nbsp;02:51:05&nbsp;-0500&nbsp;(CDT)&lt;br&gt;<br>
From:&nbsp;KleinEdith&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:SEO.Workwide@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;SEO.Workwide@gmail.com&lt;/a&gt;&gt;&lt;br&gt;<br>
To:&nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
Subject:&nbsp;Re:&nbsp;[squid-users]&nbsp;Help&nbsp;with&nbsp;HTTPS&nbsp;SQUID&nbsp;3.1.23&nbsp;https&nbsp;proxy&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;not &nbsp; &nbsp; working&lt;br&gt;<br>
Message-ID:&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:1569052265880-0.post@n4.nabble.com&quot;&nbsp;target=&quot;_blank&quot;&gt;1569052265880-0.post@n4.nabble.com&lt;/a&gt;&gt;&lt;br&gt;<br>
Content-Type:&nbsp;text/plain;&nbsp;charset=UTF-8&lt;br&gt;<br>
&lt;br&gt;<br>
Squid&nbsp;as&nbsp;the&nbsp;https&nbsp;proxy&nbsp;not&nbsp;working&lt;br&gt;<br>
&lt;br&gt;<br>
#&nbsp;Example&nbsp;rule&nbsp;allowing&nbsp;access&nbsp;from&nbsp;your&nbsp;local&nbsp;networks.&lt;br&gt;<br>
#&nbsp;Adapt&nbsp;to&nbsp;list&nbsp;your&nbsp;(internal)&nbsp;IP&nbsp;networks&nbsp;from&nbsp;where&nbsp;browsing&lt;br&gt;<br>
#&nbsp;should&nbsp;be&nbsp;allowed&lt;br&gt;<br>
acl&nbsp;localnet&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://10.0.0.0/8&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;10.0.0.0/8&lt;/a&gt;&nbsp;#&nbsp;RFC1918&nbsp;possible&nbsp;internal&nbsp;network&lt;br&gt;<br>
acl&nbsp;localnet&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://172.16.0.0/12&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;172.16.0.0/12&lt;/a&gt; &nbsp;#&nbsp;RFC1918&nbsp;possible&nbsp;internal&nbsp;network&lt;br&gt;<br>
acl&nbsp;localnet&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://192.168.0.0/16&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;192.168.0.0/16&lt;/a&gt;&nbsp;#&nbsp;RFC1918&nbsp;possible&nbsp;internal&nbsp;network&lt;br&gt;<br>
#acl&nbsp;localnet&nbsp;src&nbsp;fc00::/7 &nbsp; &nbsp; &nbsp; #&nbsp;RFC&nbsp;4193&nbsp;local&nbsp;private&nbsp;network&nbsp;range&lt;br&gt;<br>
#acl&nbsp;localnet&nbsp;src&nbsp;fe80::/10 &nbsp; &nbsp; &nbsp;#&nbsp;RFC&nbsp;4291&nbsp;link-local&nbsp;(directly&nbsp;plugged)&lt;br&gt;<br>
machines&lt;br&gt;<br>
acl&nbsp;localnet&nbsp;src&nbsp;10.0.0.188&nbsp;#&nbsp;David&nbsp;Computer&lt;br&gt;<br>
acl&nbsp;SSL_ports&nbsp;port&nbsp;443&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;80 &nbsp; &nbsp; &nbsp;#&nbsp;http&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;21 &nbsp; &nbsp; &nbsp;#&nbsp;ftp&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;443 &nbsp; &nbsp; #&nbsp;https&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;70 &nbsp; &nbsp; &nbsp;#&nbsp;gopher&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;210 &nbsp; &nbsp; #&nbsp;wais&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;1025-65535 &nbsp;#&nbsp;unregistered&nbsp;ports&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;280 &nbsp; &nbsp; #&nbsp;http-mgmt&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;488 &nbsp; &nbsp; #&nbsp;gss-http&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;591 &nbsp; &nbsp; #&nbsp;filemaker&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;777 &nbsp; &nbsp; #&nbsp;multiling&nbsp;http&lt;br&gt;<br>
acl&nbsp;CONNECT&nbsp;method&nbsp;CONNECT&lt;br&gt;<br>
&lt;br&gt;<br>
acl&nbsp;bad_urls&nbsp;dstdomain&nbsp;&quot;/etc/squid/blacklisted_sites.acl&quot;&lt;br&gt;<br>
acl&nbsp;good_url&nbsp;dstdomain&nbsp;&quot;/etc/squid/good_sites.acl&quot;&lt;br&gt;<br>
#http_access&nbsp;deny&nbsp;bad_url&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;can´t&nbsp;connect&nbsp;to:&lt;br&gt;<br>
&lt;br&gt;<br>
Outlook.com&nbsp;&lt;&lt;a&nbsp;href=&quot;https://outlook.live.com&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://outlook.live.com&lt;/a&gt;&gt; &nbsp; &lt;br&gt;<br>
Yahoo.com&nbsp;&lt;&lt;a&nbsp;href=&quot;https://www.yahoo.com/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://www.yahoo.com/&lt;/a&gt;&gt; &nbsp;&lt;br&gt;<br>
SuCarroRD.com&nbsp;&lt;&lt;a&nbsp;href=&quot;https://sucarrord.com/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://sucarrord.com/&lt;/a&gt;&gt; &nbsp;&lt;br&gt;<br>
Gmail.com&nbsp;&lt;&lt;a&nbsp;href=&quot;http://gmail.com/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://gmail.com/&lt;/a&gt;&gt; &nbsp;&lt;br&gt;<br>
Bing&nbsp;&lt;&lt;a&nbsp;href=&quot;https://www.bing.com/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://www.bing.com/&lt;/a&gt;&gt; &nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
And&nbsp;more.&nbsp;I&nbsp;need&nbsp;help&nbsp;please&nbsp;to&nbsp;fix&nbsp;this&nbsp;problem&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
--&lt;br&gt;<br>
Sent&nbsp;from:&nbsp;&lt;a&nbsp;href=&quot;http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-Users-f1019091.html&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://squid-web-proxy-cache.1019090.n4.nabble.com/Squid-Users-f1019091.html&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Message:&nbsp;3&lt;br&gt;<br>
Date:&nbsp;Sat,&nbsp;21&nbsp;Sep&nbsp;2019&nbsp;10:07:31&nbsp;+0200&lt;br&gt;<br>
From:&nbsp;Matus&nbsp;UHLAR&nbsp;-&nbsp;fantomas&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:uhlar@fantomas.sk&quot;&nbsp;target=&quot;_blank&quot;&gt;uhlar@fantomas.sk&lt;/a&gt;&gt;&lt;br&gt;<br>
To:&nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
Subject:&nbsp;Re:&nbsp;[squid-users]&nbsp;Help&nbsp;with&nbsp;HTTPS&nbsp;SQUID&nbsp;3.1.23&nbsp;https&nbsp;proxy&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;not&nbsp;working&lt;br&gt;<br>
Message-ID:&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:20190921080731.GB29045@fantomas.sk&quot;&nbsp;target=&quot;_blank&quot;&gt;20190921080731.GB29045@fantomas.sk&lt;/a&gt;&gt;&lt;br&gt;<br>
Content-Type:&nbsp;text/plain;&nbsp;charset=iso-8859-2;&nbsp;format=flowed&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;21.09.19&nbsp;02:51,&nbsp;KleinEdith&nbsp;wrote:&lt;br&gt;<br>
&gt;Squid&nbsp;as&nbsp;the&nbsp;https&nbsp;proxy&nbsp;not&nbsp;working&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;#&nbsp;Example&nbsp;rule&nbsp;allowing&nbsp;access&nbsp;from&nbsp;your&nbsp;local&nbsp;networks.&lt;br&gt;<br>
&gt;#&nbsp;Adapt&nbsp;to&nbsp;list&nbsp;your&nbsp;(internal)&nbsp;IP&nbsp;networks&nbsp;from&nbsp;where&nbsp;browsing&lt;br&gt;<br>
&gt;#&nbsp;should&nbsp;be&nbsp;allowed&lt;br&gt;<br>
&gt;acl&nbsp;localnet&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://10.0.0.0/8&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;10.0.0.0/8&lt;/a&gt;&nbsp;#&nbsp;RFC1918&nbsp;possible&nbsp;internal&nbsp;network&lt;br&gt;<br>
&gt;acl&nbsp;localnet&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://172.16.0.0/12&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;172.16.0.0/12&lt;/a&gt; &nbsp;#&nbsp;RFC1918&nbsp;possible&nbsp;internal&nbsp;network&lt;br&gt;<br>
&gt;acl&nbsp;localnet&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://192.168.0.0/16&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;192.168.0.0/16&lt;/a&gt;&nbsp;#&nbsp;RFC1918&nbsp;possible&nbsp;internal&nbsp;network&lt;br&gt;<br>
&gt;#acl&nbsp;localnet&nbsp;src&nbsp;fc00::/7 &nbsp; &nbsp; &nbsp; #&nbsp;RFC&nbsp;4193&nbsp;local&nbsp;private&nbsp;network&nbsp;range&lt;br&gt;<br>
&gt;#acl&nbsp;localnet&nbsp;src&nbsp;fe80::/10 &nbsp; &nbsp; &nbsp;#&nbsp;RFC&nbsp;4291&nbsp;link-local&nbsp;(directly&nbsp;plugged)&lt;br&gt;<br>
&gt;machines&lt;br&gt;<br>
&gt;acl&nbsp;localnet&nbsp;src&nbsp;10.0.0.188&nbsp;#&nbsp;David&nbsp;Computer&lt;br&gt;<br>
&gt;acl&nbsp;SSL_ports&nbsp;port&nbsp;443&lt;br&gt;<br>
&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;80 &nbsp; &nbsp; &nbsp;#&nbsp;http&lt;br&gt;<br>
&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;21 &nbsp; &nbsp; &nbsp;#&nbsp;ftp&lt;br&gt;<br>
&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;443 &nbsp; &nbsp; #&nbsp;https&lt;br&gt;<br>
&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;70 &nbsp; &nbsp; &nbsp;#&nbsp;gopher&lt;br&gt;<br>
&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;210 &nbsp; &nbsp; #&nbsp;wais&lt;br&gt;<br>
&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;1025-65535 &nbsp;#&nbsp;unregistered&nbsp;ports&lt;br&gt;<br>
&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;280 &nbsp; &nbsp; #&nbsp;http-mgmt&lt;br&gt;<br>
&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;488 &nbsp; &nbsp; #&nbsp;gss-http&lt;br&gt;<br>
&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;591 &nbsp; &nbsp; #&nbsp;filemaker&lt;br&gt;<br>
&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;777 &nbsp; &nbsp; #&nbsp;multiling&nbsp;http&lt;br&gt;<br>
&gt;acl&nbsp;CONNECT&nbsp;method&nbsp;CONNECT&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;acl&nbsp;bad_urls&nbsp;dstdomain&nbsp;&quot;/etc/squid/blacklisted_sites.acl&quot;&lt;br&gt;<br>
&gt;acl&nbsp;good_url&nbsp;dstdomain&nbsp;&quot;/etc/squid/good_sites.acl&quot;&lt;br&gt;<br>
&gt;#http_access&nbsp;deny&nbsp;bad_url&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;I&nbsp;can´t&nbsp;connect&nbsp;to:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;Outlook.com&nbsp;&lt;&lt;a&nbsp;href=&quot;https://outlook.live.com&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://outlook.live.com&lt;/a&gt;&gt;&lt;br&gt;<br>
&gt;Yahoo.com&nbsp;&lt;&lt;a&nbsp;href=&quot;https://www.yahoo.com/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://www.yahoo.com/&lt;/a&gt;&gt;&lt;br&gt;<br>
&gt;SuCarroRD.com&nbsp;&lt;&lt;a&nbsp;href=&quot;https://sucarrord.com/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://sucarrord.com/&lt;/a&gt;&gt;&lt;br&gt;<br>
&gt;Gmail.com&nbsp;&lt;&lt;a&nbsp;href=&quot;http://gmail.com/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://gmail.com/&lt;/a&gt;&gt;&lt;br&gt;<br>
&gt;Bing&nbsp;&lt;&lt;a&nbsp;href=&quot;https://www.bing.com/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://www.bing.com/&lt;/a&gt;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
You&nbsp;haven&#39;t&nbsp;post&nbsp;whole&nbsp;squid&nbsp;config,&nbsp;did&nbsp;you?&lt;br&gt;<br>
If&nbsp;you&nbsp;did,&nbsp;you&nbsp;definitely&nbsp;need&nbsp;to&nbsp;llow&nbsp;some&nbsp;access&nbsp;(for&nbsp;limited&nbsp;set&nbsp;of&lt;br&gt;<br>
IPs),&nbsp;because&nbsp;the&nbsp;default&nbsp;is&nbsp;deny.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
--&nbsp;&lt;br&gt;<br>
Matus&nbsp;UHLAR&nbsp;-&nbsp;fantomas,&nbsp;&lt;a&nbsp;href=&quot;mailto:uhlar@fantomas.sk&quot;&nbsp;target=&quot;_blank&quot;&gt;uhlar@fantomas.sk&lt;/a&gt;&nbsp;;&nbsp;&lt;a&nbsp;href=&quot;http://www.fantomas.sk/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.fantomas.sk/&lt;/a&gt;&lt;br&gt;<br>
Warning:&nbsp;I&nbsp;wish&nbsp;NOT&nbsp;to&nbsp;receive&nbsp;e-mail&nbsp;advertising&nbsp;to&nbsp;this&nbsp;address.&lt;br&gt;<br>
Varovanie:&nbsp;na&nbsp;tuto&nbsp;adresu&nbsp;chcem&nbsp;NEDOSTAVAT&nbsp;akukolvek&nbsp;reklamnu&nbsp;postu.&lt;br&gt;<br>
The&nbsp;early&nbsp;bird&nbsp;may&nbsp;get&nbsp;the&nbsp;worm,&nbsp;but&nbsp;the&nbsp;second&nbsp;mouse&nbsp;gets&nbsp;the&nbsp;cheese.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
Subject:&nbsp;Digest&nbsp;Footer&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
------------------------------&lt;br&gt;<br>
&lt;br&gt;<br>
End&nbsp;of&nbsp;squid-users&nbsp;Digest,&nbsp;Vol&nbsp;61,&nbsp;Issue&nbsp;28&lt;br&gt;<br>
*******************************************&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
