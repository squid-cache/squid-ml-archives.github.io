<tt>
&lt;div&nbsp;dir=&quot;auto&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Thu,&nbsp;Oct&nbsp;3,&nbsp;2019,&nbsp;2:07&nbsp;AM&nbsp;Erick&nbsp;Perez&nbsp;-&nbsp;Quadrian&nbsp;Enterprises&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:eperez@quadrianweb.com&quot;&gt;eperez@quadrianweb.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;On&nbsp;Thu,&nbsp;Oct&nbsp;3,&nbsp;2019&nbsp;at&nbsp;12:45&nbsp;AM&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&nbsp;target=&quot;_blank&quot;&nbsp;rel=&quot;noreferrer&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;On&nbsp;3/10/19&nbsp;5:55&nbsp;pm,&nbsp;Erick&nbsp;Perez&nbsp;-&nbsp;Quadrian&nbsp;Enterprises&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;On&nbsp;Wed,&nbsp;Oct&nbsp;2,&nbsp;2019&nbsp;at&nbsp;10:47&nbsp;PM&nbsp;Erick&nbsp;Perez&nbsp;-&nbsp;Quadrian&nbsp;Enterprises&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;Hi,&nbsp;maybe&nbsp;somebody&nbsp;here&nbsp;experienced&nbsp;the&nbsp;same&nbsp;issues&nbsp;while&nbsp;working&nbsp;with&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;WPAD&nbsp;files.&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;I&nbsp;have&nbsp;a&nbsp;working&nbsp;Centos&nbsp;7.6/SQUID&nbsp;v4.8&nbsp;that&nbsp;works&nbsp;as&nbsp;expected.&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;It&nbsp;works&nbsp;as&nbsp;long&nbsp;as&nbsp;I&nbsp;manually&nbsp;configure&nbsp;the&nbsp;proxy&nbsp;in&nbsp;the&nbsp;network&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;settings&nbsp;of&nbsp;each&nbsp;workstation&nbsp;(windows)&nbsp;firefox&nbsp;browser&nbsp;69.0.1&nbsp;(64bit)&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;and&nbsp;the&nbsp;same&nbsp;behavior&nbsp;with&nbsp;IE&nbsp;and&nbsp;Chrome.&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;if&nbsp;I&nbsp;open&nbsp;&lt;a&nbsp;href=&quot;http://squid_fqdn/wpad.dat&quot;&nbsp;rel=&quot;noreferrer&nbsp;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://squid_fqdn/wpad.dat&lt;/a&gt;&nbsp;the&nbsp;file&nbsp;gets&nbsp;downloaded&nbsp;and&nbsp;has&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;all&nbsp;the&nbsp;info.&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;apache&nbsp;logs&nbsp;show&nbsp;me&nbsp;the&nbsp;client&nbsp;is&nbsp;properly&nbsp;connecting&nbsp;and&nbsp;requesting&nbsp;the&nbsp;file.&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;the&nbsp;wpad.dat&nbsp;has&nbsp;two&nbsp;lines&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;That&nbsp;is&nbsp;one&nbsp;problem.&nbsp;The&nbsp;PAC&nbsp;file&nbsp;is&nbsp;supposed&nbsp;to&nbsp;define&nbsp;a&nbsp;fully&nbsp;formed&lt;br&gt;<br>
&gt;&nbsp;function&nbsp;like&nbsp;so:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;function&nbsp;FindProxyForURL(url,&nbsp;host)&nbsp;{&lt;br&gt;<br>
&gt; &nbsp; if&nbsp;(isPlainHostName(host))&nbsp;return&nbsp;&quot;DIRECT&quot;;&lt;br&gt;<br>
&gt; &nbsp; &nbsp; return&nbsp;&quot;PROXY&nbsp;squid_fqdn:8080&quot;;}&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;You&nbsp;also&nbsp;need&nbsp;to&nbsp;ensure&nbsp;the&nbsp;web&nbsp;server&nbsp;is&nbsp;producing&nbsp;the&nbsp;HTTP&nbsp;response&lt;br&gt;<br>
&gt;&nbsp;with&nbsp;a&nbsp;&quot;Content-Type:&nbsp;application/x-ns-proxy-autoconfig&quot;&nbsp;header&nbsp;or&nbsp;it&lt;br&gt;<br>
&gt;&nbsp;will&nbsp;fail.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;see&nbsp;&lt;&lt;a&nbsp;href=&quot;http://findproxyforurl.com/&quot;&nbsp;rel=&quot;noreferrer&nbsp;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://findproxyforurl.com/&lt;/a&gt;&gt;&nbsp;for&nbsp;more&nbsp;info&nbsp;about&nbsp;WPAD/PAC.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Amos&lt;br&gt;<br>
&gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&gt;&nbsp;squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&nbsp;rel=&quot;noreferrer&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&nbsp;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
So&nbsp;sorry&nbsp;Amos,&lt;br&gt;<br>
actually&nbsp;the&nbsp;function&nbsp;is&nbsp;implemented&nbsp;properly.&nbsp;I&nbsp;just&nbsp;didnt&nbsp;paste&nbsp;it&lt;br&gt;<br>
And&nbsp;yes,&nbsp;wireshark&nbsp;shows&nbsp;me&nbsp;HTTP/1.1&nbsp;200&nbsp;OK&nbsp;(application/x-ns-proxy-autoconfig)&lt;br&gt;<br>
I&nbsp;followed&nbsp;this&nbsp;document:&nbsp;&lt;a&nbsp;href=&quot;https://www.giantstride.eu/proxy-autodiscovery/&quot;&nbsp;rel=&quot;noreferrer&nbsp;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://www.giantstride.eu/proxy-autodiscovery/&lt;/a&gt;&lt;br&gt;<br>
I&nbsp;created&nbsp;wpad&nbsp;CNAME&nbsp;in&nbsp;DNS&nbsp;that&nbsp;points&nbsp;to&nbsp;squidfqdn&lt;br&gt;<br>
I&nbsp;created&nbsp;option&nbsp;252&nbsp;in&nbsp;DHCP&lt;br&gt;<br>
and&nbsp;also&nbsp;unblocked&nbsp;wpad&nbsp;block&nbsp;in&nbsp;DNS&nbsp;according&nbsp;to&nbsp;same&nbsp;document&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://www.giantstride.eu/proxy-autodiscovery/&quot;&nbsp;rel=&quot;noreferrer&nbsp;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://www.giantstride.eu/proxy-autodiscovery/&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
--&nbsp;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
---------------------&lt;br&gt;<br>
Erick&nbsp;Perez&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;Well,&nbsp;I&nbsp;believe&nbsp;it&nbsp;is&nbsp;because&nbsp;is&nbsp;3:26am&nbsp;here&nbsp;and&nbsp;I&nbsp;am&nbsp;tired.&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;The&nbsp;issue&nbsp;was&nbsp;that&nbsp;Wpad.dat&nbsp;file&nbsp;was&nbsp;not&nbsp;being&nbsp;processed&nbsp;properly.&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;So,&nbsp;I&nbsp;opened&nbsp;another&nbsp;wpad&nbsp;from&nbsp;a&nbsp;working&nbsp;implementation&nbsp;and&nbsp;compared&nbsp;it. &lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;They&nbsp;were&nbsp;the&nbsp;same&nbsp;EXCEPT&nbsp;that&nbsp;my&nbsp;non&nbsp;working&nbsp;file&nbsp;had&nbsp;some&nbsp;&quot;white&nbsp;spaces&quot;&nbsp;at&nbsp;the&nbsp;end.&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt; It&nbsp;makes&nbsp;no&nbsp;sense&nbsp;for&nbsp;me&nbsp;(I&#39;m&nbsp;mostly&nbsp;a&nbsp;Windows&nbsp;guy)&nbsp;but&nbsp;I&nbsp;removed&nbsp;the&nbsp;empty&nbsp;spaces&nbsp;and&nbsp;the&nbsp;file&nbsp;was&nbsp;loaded&nbsp;and&nbsp;interpreted&nbsp;correctly.&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;I&#39;m&nbsp;not&nbsp;sure&nbsp;if&nbsp;the&nbsp;problem&nbsp;is&nbsp;that&nbsp;Apache&nbsp;was&nbsp;serving&nbsp;the&nbsp;file&nbsp;with&nbsp;some&nbsp;issues&nbsp;or&nbsp;if&nbsp;the&nbsp;browser&nbsp;was&nbsp;misinterpreting&nbsp;the&nbsp;file.&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;But&nbsp;it&nbsp;is&nbsp;working&nbsp;now.&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
