<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;span&nbsp;id=&quot;gmail-docs-internal-guid-33ab3e53-7fff-ec46-2f7e-50016dc4f88d&quot;&gt;&lt;p&nbsp;dir=&quot;ltr&quot;&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt&quot;&gt;&lt;span&nbsp;style=&quot;font-size:11pt;font-family:Arial;color:rgb(0,0,0);background-color:transparent;font-variant-numeric:normal;font-variant-east-asian:normal;vertical-align:baseline;white-space:pre-wrap&quot;&gt;I&#39;ve&nbsp;been&nbsp;banging&nbsp;my&nbsp;head&nbsp;on&nbsp;this&nbsp;one&nbsp;for&nbsp;a&nbsp;while.&nbsp;I&nbsp;am&nbsp;setting&nbsp;up&nbsp;parental&nbsp;controls&nbsp;on&nbsp;my&nbsp;network&nbsp;using&nbsp;squidguard.&nbsp;I&nbsp;have&nbsp;a&nbsp;raspberry&nbsp;pi&nbsp;running&nbsp;squid&nbsp;4.6&nbsp;and&nbsp;the&nbsp;router&nbsp;has&nbsp;a&nbsp;policy&nbsp;that&nbsp;sends&nbsp;all&nbsp;web&nbsp;traffic&nbsp;from&nbsp;my&nbsp;children&#39;s&nbsp;computers&nbsp;to&nbsp;squid.&lt;/span&gt;&lt;/p&gt;&lt;br&gt;&lt;p&nbsp;dir=&quot;ltr&quot;&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt&quot;&gt;&lt;span&nbsp;style=&quot;font-size:11pt;font-family:Arial;color:rgb(0,0,0);background-color:transparent;font-variant-numeric:normal;font-variant-east-asian:normal;vertical-align:baseline;white-space:pre-wrap&quot;&gt;Everything&nbsp;works&nbsp;correctly&nbsp;for&nbsp;HTTP&nbsp;connections&nbsp;but&nbsp;I&nbsp;cannot&nbsp;get&nbsp;HTTPS&nbsp;to&nbsp;stop&nbsp;bumping.&nbsp;I&nbsp;want&nbsp;to&nbsp;splice&nbsp;all&nbsp;HTTPS&nbsp;connections&nbsp;in&nbsp;order&nbsp;to&nbsp;filter&nbsp;with&nbsp;squidguard&nbsp;but&nbsp;I&nbsp;do&nbsp;not&nbsp;want&nbsp;to&nbsp;ever&nbsp;bump&nbsp;(because&nbsp;it&nbsp;causes&nbsp;browser&nbsp;errors&nbsp;in&nbsp;chrome&nbsp;for&nbsp;a&nbsp;lot&nbsp;of&nbsp;sites). &lt;/span&gt;&lt;/p&gt;&lt;br&gt;&lt;p&nbsp;dir=&quot;ltr&quot;&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt&quot;&gt;&lt;span&nbsp;style=&quot;font-size:11pt;font-family:Arial;color:rgb(0,0,0);background-color:transparent;font-variant-numeric:normal;font-variant-east-asian:normal;vertical-align:baseline;white-space:pre-wrap&quot;&gt;I&#39;ve&nbsp;tried&nbsp;many,&nbsp;many&nbsp;different&nbsp;settings&nbsp;and&nbsp;I&nbsp;always&nbsp;get&nbsp;traffic&nbsp;bumped.&nbsp;Here&nbsp;is&nbsp;an&nbsp;example:&lt;/span&gt;&lt;/p&gt;&lt;br&gt;&lt;p&nbsp;dir=&quot;ltr&quot;&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt&quot;&gt;&lt;span&nbsp;style=&quot;font-size:11pt;font-family:Arial;color:rgb(0,0,0);background-color:transparent;font-variant-numeric:normal;font-variant-east-asian:normal;vertical-align:baseline;white-space:pre-wrap&quot;&gt;http_port&nbsp;3128&nbsp;intercept &lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;dir=&quot;ltr&quot;&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt&quot;&gt;&lt;span&nbsp;style=&quot;font-size:11pt;font-family:Arial;color:rgb(0,0,0);background-color:transparent;font-variant-numeric:normal;font-variant-east-asian:normal;vertical-align:baseline;white-space:pre-wrap&quot;&gt;https_port&nbsp;3129&nbsp;intercept&nbsp;tls-cert=/etc/squid/ssl_cert/myCA.pem&nbsp;tls-key=/etc/squid/ssl_cert/myCA.pem&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;dir=&quot;ltr&quot;&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt&quot;&gt;&lt;span&nbsp;style=&quot;font-size:11pt;font-family:Arial;color:rgb(0,0,0);background-color:transparent;font-variant-numeric:normal;font-variant-east-asian:normal;vertical-align:baseline;white-space:pre-wrap&quot;&gt;...&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;dir=&quot;ltr&quot;&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt&quot;&gt;&lt;span&nbsp;style=&quot;font-size:11pt;font-family:Arial;color:rgb(0,0,0);background-color:transparent;font-variant-numeric:normal;font-variant-east-asian:normal;vertical-align:baseline;white-space:pre-wrap&quot;&gt;ssl_bump&nbsp;peek&nbsp;step1&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;dir=&quot;ltr&quot;&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt&quot;&gt;&lt;span&nbsp;style=&quot;font-size:11pt;font-family:Arial;color:rgb(0,0,0);background-color:transparent;font-variant-numeric:normal;font-variant-east-asian:normal;vertical-align:baseline;white-space:pre-wrap&quot;&gt;ssl_bump&nbsp;peek&nbsp;step2&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;dir=&quot;ltr&quot;&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt&quot;&gt;&lt;span&nbsp;style=&quot;font-size:11pt;font-family:Arial;color:rgb(0,0,0);background-color:transparent;font-variant-numeric:normal;font-variant-east-asian:normal;vertical-align:baseline;white-space:pre-wrap&quot;&gt;ssl_bump&nbsp;splice&nbsp;step2&lt;/span&gt;&lt;/p&gt;&lt;br&gt;&lt;p&nbsp;dir=&quot;ltr&quot;&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt&quot;&gt;&lt;span&nbsp;style=&quot;font-size:11pt;font-family:Arial;color:rgb(0,0,0);background-color:transparent;font-variant-numeric:normal;font-variant-east-asian:normal;vertical-align:baseline;white-space:pre-wrap&quot;&gt;I&#39;ve&nbsp;tried&nbsp;setting&nbsp;debug_options&nbsp;to&nbsp;9&nbsp;but&nbsp;cannot&nbsp;see&nbsp;anything&nbsp;useful&nbsp;in&nbsp;the&nbsp;logs&nbsp;to&nbsp;indicate&nbsp;why&nbsp;it&nbsp;is&nbsp;not&nbsp;splicing.&nbsp;I&nbsp;always&nbsp;just&nbsp;see&nbsp;the&nbsp;full&nbsp;set&nbsp;of&nbsp;request&nbsp;headers&nbsp;in&nbsp;the&nbsp;logs&nbsp;for&nbsp;HTTPS&nbsp;connections,&nbsp;indicating&nbsp;that&nbsp;the&nbsp;connection&nbsp;is&nbsp;bumped. &lt;/span&gt;&lt;/p&gt;&lt;br&gt;&lt;p&nbsp;dir=&quot;ltr&quot;&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt&quot;&gt;&lt;span&nbsp;style=&quot;font-size:11pt;font-family:Arial;color:rgb(0,0,0);background-color:transparent;font-variant-numeric:normal;font-variant-east-asian:normal;vertical-align:baseline;white-space:pre-wrap&quot;&gt;One&nbsp;thing&nbsp;I&nbsp;did&nbsp;notice&nbsp;is&nbsp;that&nbsp;the&nbsp;ssl&nbsp;logformat&nbsp;options&nbsp;do&nbsp;not&nbsp;work.&nbsp;I&nbsp;get&nbsp;errors&nbsp;like&nbsp;this&nbsp;on&nbsp;restart:&lt;/span&gt;&lt;/p&gt;&lt;br&gt;&lt;p&nbsp;dir=&quot;ltr&quot;&nbsp;style=&quot;line-height:1.38;margin-top:0pt;margin-bottom:0pt&quot;&gt;&lt;span&nbsp;style=&quot;font-size:11pt;font-family:Arial;color:rgb(0,0,0);background-color:transparent;font-variant-numeric:normal;font-variant-east-asian:normal;vertical-align:baseline;white-space:pre-wrap&quot;&gt;FATAL:&nbsp;Can&#39;t&nbsp;parse&nbsp;configuration&nbsp;token:&nbsp;&#39;%ssl::&gt;sni&#39;&lt;/span&gt;&lt;/p&gt;&lt;/span&gt;&lt;br&nbsp;class=&quot;gmail-Apple-interchange-newline&quot;&gt;&lt;/div&gt;<br>

</tt>
