<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;style&nbsp;type=&quot;text/css&quot;&nbsp;style=&quot;display:none;&quot;&gt;&nbsp;P&nbsp;{margin-top:0;margin-bottom:0;}&nbsp;&lt;/style&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;dir=&quot;ltr&quot;&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;Arial,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
Hello,&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;Arial,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
I&nbsp;want&nbsp;to&nbsp;start&nbsp;saying&nbsp;I'm&nbsp;new&nbsp;working&nbsp;with&nbsp;squid&nbsp;so&nbsp;&lt;span&gt;bear&nbsp;with&nbsp;&lt;em&gt;me&lt;/em&gt;&lt;/span&gt;.&nbsp;We&nbsp;are&nbsp;at&nbsp;my&nbsp;company&nbsp;trying&nbsp;to&nbsp;use&nbsp;squid&nbsp;as&nbsp;egress&nbsp;solution&nbsp;for&nbsp;our&nbsp;servers&nbsp;running&nbsp;in&nbsp;AWS.&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;Arial,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
We&nbsp;need&nbsp;to&nbsp;have&nbsp;a&nbsp;whitelisting&nbsp;function&nbsp;in&nbsp;place.&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;Arial,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;Arial,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
HTTP&nbsp;works&nbsp;fine&nbsp;but&nbsp;not&nbsp;HTTPS.&nbsp;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;Arial,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;Arial,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
When&nbsp;trying&nbsp;to&nbsp;run&nbsp;curl&nbsp;from&nbsp;another&nbsp;server&nbsp;using&nbsp;squid&nbsp;to&nbsp;access&nbsp;internet&nbsp;we&nbsp;receive&nbsp;this&nbsp;message:&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;font-family:&nbsp;Calibri,&nbsp;Arial,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
&lt;span&nbsp;style=&quot;color:&nbsp;rgb(200,&nbsp;38,&nbsp;19);&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(200,&nbsp;38,&nbsp;19);&quot;&gt;&lt;b&gt;#curl&nbsp;https://microsoft.com&lt;/b&gt;&lt;/span&gt;&lt;span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/span&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(200,&nbsp;38,&nbsp;19);&quot;&gt;&lt;b&gt;curl:&nbsp;(60)&nbsp;SSL&nbsp;certificate&nbsp;problem:&nbsp;self&nbsp;signed&nbsp;certificate&nbsp;in&nbsp;certificate&nbsp;chain&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(200,&nbsp;38,&nbsp;19);&quot;&gt;&lt;b&gt;More&nbsp;details&nbsp;here:&nbsp;https://curl.haxx.se/docs/sslcerts.html&lt;/b&gt;&lt;/span&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(200,&nbsp;38,&nbsp;19);&quot;&gt;&lt;b&gt;curl&nbsp;failed&nbsp;to&nbsp;verify&nbsp;the&nbsp;legitimacy&nbsp;of&nbsp;the&nbsp;server&nbsp;and&nbsp;therefore&nbsp;could&nbsp;not&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(200,&nbsp;38,&nbsp;19);&quot;&gt;&lt;b&gt;establish&nbsp;a&nbsp;secure&nbsp;connection&nbsp;to&nbsp;it.&nbsp;To&nbsp;learn&nbsp;more&nbsp;about&nbsp;this&nbsp;situation&nbsp;and&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(200,&nbsp;38,&nbsp;19);&quot;&gt;&lt;b&gt;how&nbsp;to&nbsp;fix&nbsp;it,&nbsp;please&nbsp;visit&nbsp;the&nbsp;web&nbsp;page&nbsp;mentioned&nbsp;above.&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;When&nbsp;checking&nbsp;the&nbsp;squid&nbsp;cache&nbsp;log&nbsp;file&nbsp;this&nbsp;is&nbsp;showing:&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;&lt;b&gt;&lt;span&gt;#&nbsp;tail&nbsp;-f&nbsp;/var/log/squid/cache.log&lt;br&gt;<br>
&lt;/span&gt;&lt;/b&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;100,&nbsp;192);&quot;&gt;&lt;b&gt;2019/11/20&nbsp;08:25:01&nbsp;kid1|&nbsp;HTCP&nbsp;Disabled.&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;100,&nbsp;192);&quot;&gt;&lt;b&gt;2019/11/20&nbsp;08:25:01&nbsp;kid1|&nbsp;Squid&nbsp;plugin&nbsp;modules&nbsp;loaded:&nbsp;0&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;100,&nbsp;192);&quot;&gt;&lt;b&gt;2019/11/20&nbsp;08:25:01&nbsp;kid1|&nbsp;Adaptation&nbsp;support&nbsp;is&nbsp;off.&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;100,&nbsp;192);&quot;&gt;&lt;b&gt;2019/11/20&nbsp;08:25:01&nbsp;kid1|&nbsp;Accepting&nbsp;HTTP&nbsp;Socket&nbsp;connections&nbsp;at&nbsp;local=[::]:3128&nbsp;remote=[::]&nbsp;FD&nbsp;23&nbsp;flags=9&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;100,&nbsp;192);&quot;&gt;&lt;b&gt;2019/11/20&nbsp;08:25:01&nbsp;kid1|&nbsp;Accepting&nbsp;NAT&nbsp;intercepted&nbsp;HTTP&nbsp;Socket&nbsp;connections&nbsp;at&nbsp;local=[::]:3129&nbsp;remote=[::]&nbsp;FD&nbsp;24&nbsp;flags=41&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;100,&nbsp;192);&quot;&gt;&lt;b&gt;2019/11/20&nbsp;08:25:01&nbsp;kid1|&nbsp;Accepting&nbsp;NAT&nbsp;intercepted&nbsp;SSL&nbsp;bumped&nbsp;HTTPS&nbsp;Socket&nbsp;connections&nbsp;at&nbsp;local=[::]:3130&nbsp;remote=[::]&nbsp;FD&nbsp;25&nbsp;flags=41&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;100,&nbsp;192);&quot;&gt;&lt;b&gt;2019/11/20&nbsp;08:25:02&nbsp;kid1|&nbsp;storeLateRelease:&nbsp;released&nbsp;0&nbsp;objects&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;100,&nbsp;192);&quot;&gt;&lt;b&gt;security_file_certgen&nbsp;helper&nbsp;database&nbsp;'/var/spool/squid/ssl_db'&nbsp;failed:&nbsp;Failed&nbsp;to&nbsp;open&nbsp;file&nbsp;/var/spool/squid/ssl_db/index.txt&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;100,&nbsp;192);&quot;&gt;&lt;b&gt;2019/11/20&nbsp;08:25:10&nbsp;kid1|&nbsp;Error&nbsp;negotiating&nbsp;SSL&nbsp;connection&nbsp;on&nbsp;FD&nbsp;12:&nbsp;error:00000001:lib(0):func(0):reason(1)&nbsp;(1/0)&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;100,&nbsp;192);&quot;&gt;&lt;b&gt;2019/11/20&nbsp;08:25:12&nbsp;kid1|&nbsp;Error&nbsp;negotiating&nbsp;SSL&nbsp;connection&nbsp;on&nbsp;FD&nbsp;12:&nbsp;error:00000001:lib(0):func(0):reason(1)&nbsp;(1/0)&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;100,&nbsp;192);&quot;&gt;&lt;b&gt;2019/11/20&nbsp;08:25:14&nbsp;kid1|&nbsp;Error&nbsp;negotiating&nbsp;SSL&nbsp;connection&nbsp;on&nbsp;FD&nbsp;12:&nbsp;error:00000001:lib(0):func(0):reason(1)&nbsp;(1/0)&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;100,&nbsp;192);&quot;&gt;&lt;b&gt;2019/11/20&nbsp;08:25:19&nbsp;kid1|&nbsp;Error&nbsp;negotiating&nbsp;SSL&nbsp;connection&nbsp;on&nbsp;FD&nbsp;12:&nbsp;error:00000001:lib(0):func(0):reason(1)&nbsp;(1/0)&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;100,&nbsp;192);&quot;&gt;&lt;b&gt;2019/11/20&nbsp;08:25:19&nbsp;kid1|&nbsp;Error&nbsp;negotiating&nbsp;SSL&nbsp;connection&nbsp;on&nbsp;FD&nbsp;12:&nbsp;error:00000001:lib(0):func(0):reason(1)&nbsp;(1/0)&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;b&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;100,&nbsp;192);&quot;&gt;2019/11/20&nbsp;08:25:20&nbsp;kid1|&nbsp;Error&nbsp;negotiating&nbsp;SSL&nbsp;connection&nbsp;on&nbsp;FD&nbsp;12:&nbsp;error:00000001:lib(0):func(0):reason(1)&nbsp;(1/0)&lt;/span&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;The&nbsp;squid.conf&nbsp;looks&nbsp;like&nbsp;this:&lt;/div&gt;<br>
&lt;div&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;b&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;#acl&nbsp;localnet&nbsp;src&nbsp;10.0.0.0/8&lt;/span&gt;&lt;span&gt;&lt;br&gt;<br>
&lt;/span&gt;&lt;/b&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;visible_hostname&nbsp;centos-squid-4.1&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;acl&nbsp;SSL_ports&nbsp;port&nbsp;443&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;80&nbsp;#&nbsp;http&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;21&nbsp;#&nbsp;ftp&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;443&nbsp;#&nbsp;https&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;70&nbsp;#&nbsp;gopher&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;210&nbsp;#&nbsp;wais&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;1025-65535&nbsp;#&nbsp;unregistered&nbsp;ports&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;280&nbsp;#&nbsp;http-mgmt&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;488&nbsp;#&nbsp;gss-http&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;591&nbsp;#&nbsp;filemaker&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;777&nbsp;#&nbsp;multiling&nbsp;http&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;acl&nbsp;CONNECT&nbsp;method&nbsp;CONNECT&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;acl&nbsp;allowed_http_sites&nbsp;dstdomain&nbsp;.microsoft.com&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;acl&nbsp;allowed_http_sites&nbsp;dstdomain&nbsp;.google.com&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;acl&nbsp;allowed_http_sites&nbsp;dstdomain&nbsp;.redhat.com&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;http_access&nbsp;allow&nbsp;allowed_http_sites&nbsp;Safe_ports&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;http_port&nbsp;3128&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;http_port&nbsp;3129&nbsp;intercept&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;#SSL&nbsp;Settings&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;acl&nbsp;allowed_https_sites&nbsp;dstdomain&nbsp;.microsoft.com&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;http_access&nbsp;allow&nbsp;CONNECT&nbsp;allowed_https_sites&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;options=SINGLE_DH_USE,SINGLE_ECDH_USE&nbsp;tls-dh=/etc/squid/dhparam.pem&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;https_port&nbsp;3130&nbsp;intercept&nbsp;ssl-bump&nbsp;generate-host-certificates=on&nbsp;cert=/etc/squid/fredrik_cert/squid.pem&nbsp;key=/etc/squid/fredrik_cert/squid.key&nbsp;options=SINGLE_DH_USE,SINGLE_ECDH_USE&nbsp;tls-dh=/etc/squid/dhparam&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;.pem&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;#&nbsp;And&nbsp;finally&nbsp;deny&nbsp;all&nbsp;other&nbsp;access&nbsp;to&nbsp;this&nbsp;proxy&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;http_access&nbsp;deny&nbsp;all&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;http_access&nbsp;deny&nbsp;!Safe_ports&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;http_access&nbsp;deny&nbsp;CONNECT&nbsp;!SSL_ports&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;#&nbsp;Leave&nbsp;coredumps&nbsp;in&nbsp;the&nbsp;first&nbsp;cache&nbsp;dir&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;coredump_dir&nbsp;/var/spool/squid&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;#&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;#&nbsp;Add&nbsp;any&nbsp;of&nbsp;your&nbsp;own&nbsp;refresh_pattern&nbsp;entries&nbsp;above&nbsp;these.&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;#&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;refresh_pattern&nbsp;^ftp:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1440&nbsp;&nbsp;&nbsp;&nbsp;20%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10080&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;refresh_pattern&nbsp;^gopher:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1440&nbsp;&nbsp;&nbsp;&nbsp;0%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1440&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;refresh_pattern&nbsp;-i&nbsp;(/cgi-bin/|\?)&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;#refresh_pattern&nbsp;.&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;acl&nbsp;step1&nbsp;at_step&nbsp;SslBump1&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;acl&nbsp;step2&nbsp;at_step&nbsp;SslBump2&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;acl&nbsp;step3&nbsp;at_step&nbsp;SslBump3&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;ssl_bump&nbsp;peek&nbsp;step1&nbsp;all&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;ssl_bump&nbsp;peek&nbsp;step2&nbsp;allowed_https_sites&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;ssl_bump&nbsp;splice&nbsp;step2&nbsp;allowed_https_sites&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;ssl_bump&nbsp;splice&nbsp;step3&nbsp;allowed_https_sites&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;ssl_bump&nbsp;terminate&nbsp;step2&nbsp;all&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;cache_mem&nbsp;1024&nbsp;MB&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;sslcrtd_program&nbsp;/usr/lib64/squid/security_file_certgen&nbsp;-s&nbsp;/var/spool/squid/ssl_db&nbsp;-M&nbsp;16MB&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;b&gt;sslcrtd_children&nbsp;10&lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;b&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;ssl_bump&nbsp;bump&nbsp;all&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;<br>
&lt;b&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;b&gt;Please&nbsp;assist&nbsp;me!&nbsp;&lt;br&gt;<br>
&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;b&gt;Nick&lt;/b&gt;&lt;br&gt;<br>
&lt;b&gt;&lt;span&nbsp;style=&quot;color:&nbsp;rgb(12,&nbsp;136,&nbsp;42);&quot;&gt;&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;b&gt;&lt;span&gt;&lt;/span&gt;&lt;/b&gt;&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
