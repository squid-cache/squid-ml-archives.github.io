<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Amos,&lt;div&gt;Thanks&nbsp;for&nbsp;your&nbsp;explanation.&lt;/div&gt;&lt;div&gt;Could&nbsp;you&nbsp;instruct&nbsp;me&nbsp;how&nbsp;to&nbsp;install&nbsp;squid&nbsp;v5&nbsp;based&nbsp;on&nbsp;CentOS&nbsp;7?&lt;/div&gt;&lt;div&gt;Based&nbsp;on&nbsp;url &lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/SquidFaq/BinaryPackages#KnowledgeBase.2FCentOS.Stable_Repository_Package_.28like_epel-release.29&quot;&gt;https://wiki.squid-cache.org/SquidFaq/BinaryPackages#KnowledgeBase.2FCentOS.Stable_Repository_Package_.28like_epel-release.29&lt;/a&gt;,&nbsp;CentOS&nbsp;seems&nbsp;not&nbsp;support&nbsp;squid&nbsp;v5.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;BR,&lt;/div&gt;&lt;div&gt;Michael&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;Amos&nbsp;Jeffries&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&nbsp;於&nbsp;2020年3月20日&nbsp;週五&nbsp;下午5:29寫道：&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;On&nbsp;20/03/20&nbsp;8:27&nbsp;pm,&nbsp;Michael&nbsp;Chen&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;Hi&nbsp;Amos,&lt;br&gt;<br>
&gt;&nbsp;May&nbsp;I&nbsp;know&nbsp;which&nbsp;function&nbsp;Squid&nbsp;v3.5.28&nbsp;cannot&nbsp;do&nbsp;for&nbsp;my&nbsp;scenario?&lt;br&gt;<br>
&gt;&nbsp;Because&nbsp;Squid&nbsp;v3.5&nbsp;still&nbsp;has&nbsp;command&nbsp;of&nbsp;cache_peer&nbsp;and&nbsp;ssl&nbsp;.....&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
TLS&nbsp;is&nbsp;a&nbsp;volatile&nbsp;environment,&nbsp;with&nbsp;many&nbsp;changes&nbsp;going&nbsp;on&nbsp;constantly.&lt;br&gt;<br>
Squid-3&nbsp;has&nbsp;been&nbsp;deprecated&nbsp;since&nbsp;2018&nbsp;and&nbsp;is&nbsp;far&nbsp;behind&nbsp;in&nbsp;support&lt;br&gt;<br>
needed&nbsp;for&nbsp;current&nbsp;TLS&nbsp;practices.&lt;br&gt;<br>
&lt;br&gt;<br>
Especially&nbsp;when&nbsp;bumping&nbsp;you&nbsp;should&nbsp;always&nbsp;have&nbsp;the&nbsp;latest&nbsp;Squid&nbsp;version.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;first&nbsp;bit&nbsp;can&nbsp;be&nbsp;tested&nbsp;with&nbsp;Squid-3.&nbsp;It&nbsp;is&nbsp;just&nbsp;about&nbsp;getting&nbsp;a&lt;br&gt;<br>
secure&nbsp;connection&nbsp;to&nbsp;the&nbsp;peer,&nbsp;any&nbsp;Squid&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;do&nbsp;that.&lt;br&gt;<br>
&lt;br&gt;<br>
Ensure&nbsp;that&nbsp;the&nbsp;peer&nbsp;proxy&nbsp;is&nbsp;delivering&nbsp;its&nbsp;CA&nbsp;*chain*&nbsp;properly.&lt;br&gt;<br>
 *&nbsp;All&nbsp;the&nbsp;intermediates&nbsp;should&nbsp;be&nbsp;supplied&nbsp;during&nbsp;the&nbsp;server&nbsp;handshake.&lt;br&gt;<br>
 *&nbsp;cache_peer&nbsp;should&nbsp;only&nbsp;need&nbsp;the&nbsp;root&nbsp;CA&nbsp;for&nbsp;that&nbsp;chain.&nbsp;Configured&nbsp;in&lt;br&gt;<br>
the&nbsp;sslca=&nbsp;or&nbsp;tls-ca=&nbsp;option.&lt;br&gt;<br>
&lt;br&gt;<br>
At&nbsp;this&nbsp;point&nbsp;your&nbsp;Squid&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;pass&nbsp;traffic&nbsp;to&nbsp;the&nbsp;peer.&lt;br&gt;<br>
Test&nbsp;that&nbsp;with&nbsp;regular&nbsp;http://&nbsp;URL&nbsp;requests&nbsp;to&nbsp;your&nbsp;Squid.&nbsp;*Not*&nbsp;HTTPS&lt;br&gt;<br>
or&nbsp;bumped&nbsp;traffic.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
You&nbsp;can&nbsp;test&nbsp;this&nbsp;following&nbsp;with&nbsp;Squid-3,&nbsp;but&nbsp;do&nbsp;not&nbsp;expect&nbsp;it&nbsp;to&nbsp;work&lt;br&gt;<br>
very&nbsp;well.&nbsp;Squid-4&nbsp;is&nbsp;better&nbsp;in&nbsp;a&nbsp;lot&nbsp;of&nbsp;cases,&nbsp;but&nbsp;still&nbsp;not&nbsp;completely.&lt;br&gt;<br>
&lt;br&gt;<br>
Your&nbsp;ssl_bump&nbsp;rules&nbsp;should&nbsp;peek&nbsp;at&nbsp;the&nbsp;client&nbsp;cert,&nbsp;then&nbsp;stare&nbsp;at&nbsp;the&lt;br&gt;<br>
server&nbsp;cert,&nbsp;then&nbsp;bump&nbsp;the&nbsp;crypto.&nbsp;Like&nbsp;so:&lt;br&gt;<br>
&lt;br&gt;<br>
 ssl_bump&nbsp;peek &nbsp;step1&lt;br&gt;<br>
 ssl_bump&nbsp;stare&nbsp;all&lt;br&gt;<br>
 ssl_bump&nbsp;bump &nbsp;all&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Amos&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
