<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&lt;div&gt;I&nbsp;would&nbsp;like&nbsp;to&nbsp;proxy&nbsp;chaining&nbsp;squid&nbsp;to&nbsp;parent&nbsp;proxy&nbsp;on&nbsp;the&nbsp;cloud,&nbsp;Netskope&nbsp;proxy.&lt;/div&gt;&lt;div&gt;First&nbsp;of&nbsp;all,&nbsp;I&nbsp;configure&nbsp;http_port&nbsp;3128&nbsp;ssl-bump,&nbsp;without&nbsp;proxy&nbsp;chaining&nbsp;to&nbsp;parent&nbsp;proxy.&nbsp;And&nbsp;it&nbsp;works&nbsp;fine.&nbsp;However,&nbsp;my&nbsp;next&nbsp;step&nbsp;to&nbsp;add&nbsp;cache_peer&nbsp;to&nbsp;parent&nbsp;proxy&nbsp;with&nbsp;Netskope&nbsp;certificates&nbsp;loaded.&nbsp;It&nbsp;failed&nbsp;and&nbsp;shows&nbsp;sslv3&nbsp;certificate&nbsp;unknown.&lt;/div&gt;&lt;div&gt;Below&nbsp;are&nbsp;my&nbsp;configuration&nbsp;and&nbsp;test&nbsp;results:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;The&nbsp;first &lt;span&nbsp;style=&quot;font-family:Calibri,sans-serif;font-size:12pt&quot;&gt;Test&nbsp;without&nbsp;proxy&nbsp;chaining&nbsp;to&nbsp;Netskope&nbsp;(just&nbsp;ssl-bump&nbsp;on&nbsp;squid&nbsp;proxy):&nbsp;normally&nbsp;access&nbsp;internet&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;My&nbsp;config:&lt;/div&gt;&lt;div&gt;&lt;i&gt;&lt;font&nbsp;color=&quot;#0000ff&quot;&gt;http_port&nbsp;3128&nbsp;ssl-bump&nbsp;cert=/etc/squid/ssl_cert/myCA9.pem&nbsp;key=/etc/squid/ssl_cert/myCA9.pem&nbsp;generate-host-certification=on&nbsp;dynamic_cert_mem_cache_size=4MB&lt;/font&gt;&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;&lt;font&nbsp;color=&quot;#0000ff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;&lt;font&nbsp;color=&quot;#0000ff&quot;&gt;acl&nbsp;step1&nbsp;at_step&nbsp;SslBump1&lt;/font&gt;&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;&lt;font&nbsp;color=&quot;#0000ff&quot;&gt;ssl_bump&nbsp;peek&nbsp;step1&lt;/font&gt;&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;&lt;font&nbsp;color=&quot;#0000ff&quot;&gt;ssl_bump&nbsp;bump&nbsp;all&lt;/font&gt;&lt;/i&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;margin:0cm&nbsp;0cm&nbsp;0.0001pt;font-size:12pt;font-family:Calibri,sans-serif&quot;&gt;&lt;span&nbsp;lang=&quot;EN-US&quot;&gt;Cache.log:&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;margin:0cm&nbsp;0cm&nbsp;0.0001pt;font-size:12pt;font-family:Calibri,sans-serif&quot;&gt;&lt;span&nbsp;lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/p&gt;&lt;div&gt;&lt;img&nbsp;src=&quot;https://mail.google.com/mail/u/0?ui=2&amp;ik=a4e50e1cfb&amp;attid=0.4&amp;permmsgid=msg-a:r7647512108327512728&amp;th=170f5ff99c58736d&amp;view=fimg&amp;sz=s0-l75-ft&amp;attbid=ANGjdJ-ShuGsMjmZN6Ie9v6bUw5eFSsSM-JjnCDlAJC6mSuErNdKPPNR882F9YVGd_0J3M4HneVKeaKZd5umCPsVHpVy18v8LehY6b3BymDXNBL5vA5Ry3tiDU8d9gk&amp;disp=emb&amp;realattid=ii_k7zlrndy3&quot;&nbsp;alt=&quot;image.png&quot;&nbsp;width=&quot;472&quot;&nbsp;height=&quot;341&quot;&nbsp;class=&quot;gmail-CToWUd&nbsp;gmail-a6T&quot;&nbsp;tabindex=&quot;0&quot;&nbsp;style=&quot;cursor:&nbsp;pointer;&nbsp;outline:&nbsp;0px;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt; &nbsp;normally&nbsp;access &lt;a&nbsp;href=&quot;https://translate.google.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;https://translate.google.com&lt;/a&gt;  &lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;gmail-Apple-interchange-newline&quot;&gt;The&nbsp;second&nbsp;test&nbsp;is&nbsp;squid&nbsp;proxy&nbsp;chaining&nbsp;to&nbsp;Netskope&nbsp;(with&nbsp;ssl &nbsp;enabled):&nbsp;Result&nbsp;is&nbsp;failed&nbsp;to&nbsp;access&nbsp;internet&nbsp;(HTTP/HTTPS)&lt;/div&gt;&lt;div&gt;My&nbsp;config:&nbsp;(where&nbsp;I&nbsp;put&nbsp;Netskope&nbsp;intermediate&nbsp;&amp;&nbsp;root&nbsp;certs&nbsp;on&nbsp;/etc/squid/ssl_cert/)&lt;/div&gt;&lt;div&gt;&lt;i&gt;&lt;font&nbsp;color=&quot;#0000ff&quot;&gt;http_port&nbsp;3128&nbsp;ssl-bump&nbsp;cert=/etc/squid/ssl_cert/myCA9.pem&nbsp;key=/etc/squid/ssl_cert/myCA9.pem&nbsp;generate-host-certification=on&nbsp;dynamic_cert_mem_cache_size=4MB&lt;/font&gt;&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;&lt;font&nbsp;color=&quot;#0000ff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;&lt;font&nbsp;color=&quot;#0000ff&quot;&gt;cache_peer &lt;a&nbsp;href=&quot;http://pxc-sasesg-tpe.eu.goskope.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;pxc-sasesg-tpe.eu.goskope.com&lt;/a&gt; parent&nbsp;8080&nbsp;0&nbsp;no-query&nbsp;default ssl&nbsp;sslpath=/etc/squid/ssl_cert/&nbsp;sslcafile=/etc/squid/ssl_cert/cacert-2020-01-01.pem&nbsp;login=PASSTHRU&nbsp;ssloptions=NO_SSLv2&nbsp;sslflags=DONT_VERIFY_DOMAIN&lt;/font&gt;&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;&lt;font&nbsp;color=&quot;#0000ff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;&lt;font&nbsp;color=&quot;#0000ff&quot;&gt;never_direct&nbsp;allow&nbsp;all&lt;/font&gt;&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;&lt;font&nbsp;color=&quot;#0000ff&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;&lt;font&nbsp;color=&quot;#0000ff&quot;&gt;acl&nbsp;step1&nbsp;at_step&nbsp;SslBump1&lt;/font&gt;&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;&lt;font&nbsp;color=&quot;#0000ff&quot;&gt;ssl_bump&nbsp;peek&nbsp;step1&lt;/font&gt;&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;&lt;font&nbsp;color=&quot;#0000ff&quot;&gt;ssl_bump&nbsp;bump&nbsp;all&lt;/font&gt;&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;margin:0cm&nbsp;0cm&nbsp;0.0001pt;font-size:12pt;font-family:Calibri,sans-serif&quot;&gt;&lt;span&nbsp;lang=&quot;EN-US&quot;&gt;Cache.log&nbsp;once&nbsp;squid&nbsp;restart, &lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:12pt&quot;&gt;It&nbsp;shows&nbsp;“&nbsp;sslv3&nbsp;alert&nbsp;certificate&nbsp;unknown”&lt;/span&gt;&lt;/p&gt;&lt;div&gt;&lt;img&nbsp;src=&quot;https://mail.google.com/mail/u/0?ui=2&amp;ik=a4e50e1cfb&amp;attid=0.1&amp;permmsgid=msg-a:r7647512108327512728&amp;th=170f5ff99c58736d&amp;view=fimg&amp;sz=s0-l75-ft&amp;attbid=ANGjdJ9FxhILwZC9jBZz9aTlPXG-ClM92aeOtdt5nPt9U8oUmnth4Rpw2s9V0eWZKMHRbogE7c3CNE4NDSUiy0_QYjuxMwCYYCbtCE3tDg797HrM0tnycS1TuexsOFc&amp;disp=emb&amp;realattid=ii_k7zlnxsa0&quot;&nbsp;alt=&quot;image.png&quot;&nbsp;width=&quot;472&quot;&nbsp;height=&quot;339&quot;&nbsp;class=&quot;gmail-CToWUd&nbsp;gmail-a6T&quot;&nbsp;tabindex=&quot;0&quot;&nbsp;style=&quot;cursor:&nbsp;pointer;&nbsp;outline:&nbsp;0px;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;margin:0cm&nbsp;0cm&nbsp;0.0001pt;font-size:12pt;font-family:Calibri,sans-serif&quot;&gt;&lt;span&nbsp;lang=&quot;EN-US&quot;&gt;CANNOT&nbsp;access &lt;a&nbsp;href=&quot;https://translate.google.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;https://translate.google.com&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Do&nbsp;you&nbsp;see&nbsp;anything&nbsp;wrong?&lt;/div&gt;&lt;div&gt;BR,&lt;/div&gt;&lt;div&gt;Michael&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
