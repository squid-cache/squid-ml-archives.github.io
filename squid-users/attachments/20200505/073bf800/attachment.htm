<tt>
&lt;div&nbsp;dir=&quot;auto&quot;&gt;Thanks&nbsp;Amos,&lt;div&nbsp;dir=&quot;auto&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;so&nbsp;how&nbsp;would&nbsp;I&nbsp;allow&nbsp;these&nbsp;urls&nbsp;with&nbsp;a&nbsp;wild&nbsp;card&nbsp;then &lt;div&nbsp;dir=&quot;auto&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;&lt;a&nbsp;href=&quot;Http://domain.com/path/1/to/any/where&quot;&gt;Http://domain.com/path/1/to/any/where&lt;/a&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;&lt;span&nbsp;style=&quot;font-family:sans-serif&quot;&gt;&lt;a&nbsp;href=&quot;Http://domain.com/path/2/to/any/where&quot;&gt;Http://domain.com/path/2/to/any/where&lt;/a&gt;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;Would&nbsp;I&nbsp;do&nbsp;this&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;&lt;span&nbsp;style=&quot;font-family:sans-serif&quot;&gt;&lt;a&nbsp;href=&quot;Http://domain.com/path/*&quot;&gt;Http://domain.com/path/*&lt;/a&gt;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;&lt;span&nbsp;style=&quot;font-family:sans-serif&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;&lt;span&nbsp;style=&quot;font-family:sans-serif&quot;&gt;Thanks,&lt;/span&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;&lt;font&nbsp;face=&quot;sans-serif&quot;&gt;Rob&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Tue,&nbsp;5&nbsp;May&nbsp;2020,&nbsp;14:04&nbsp;Amos&nbsp;Jeffries,&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;On&nbsp;6/05/20&nbsp;12:42&nbsp;am,&nbsp;robert&nbsp;k&nbsp;Wild&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;cool&nbsp;thanks&nbsp;Amos&nbsp;:)&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;if&nbsp;your&nbsp;interested&nbsp;these&nbsp;are&nbsp;my&nbsp;lines&nbsp;in&nbsp;my&nbsp;config&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;#allow&nbsp;special&nbsp;URL&nbsp;paths&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;special_url&nbsp;url_regex&nbsp;&quot;/usr/local/squid/etc/urlspecial.txt&quot;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;#deny&nbsp;MIME&nbsp;types&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;mimetype&nbsp;rep_mime_type&nbsp;&quot;/usr/local/squid/etc/mimedeny.txt&quot;&lt;br&gt;<br>
&gt;&nbsp;http_reply_access&nbsp;allow&nbsp;special_url&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;above&nbsp;is&nbsp;wrong.&nbsp;It&nbsp;is&nbsp;allowing&nbsp;by&nbsp;URL,&nbsp;regardless&nbsp;of&nbsp;the&nbsp;mime&nbsp;type.&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;http_reply_access&nbsp;deny&nbsp;mimetype&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
That&nbsp;is&nbsp;the&nbsp;opposite&nbsp;of&nbsp;your&nbsp;stated&nbsp;requirement.&nbsp;It&nbsp;will&nbsp;*prevent*&nbsp;the&lt;br&gt;<br>
mime&nbsp;type&nbsp;check&nbsp;from&nbsp;identifying&nbsp;downloads&nbsp;in&nbsp;the&nbsp;special_url.&lt;br&gt;<br>
&lt;br&gt;<br>
A&nbsp;better&nbsp;way&nbsp;to&nbsp;write&nbsp;the&nbsp;above&nbsp;policy&nbsp;would&nbsp;be:&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;http_reply_access&nbsp;deny&nbsp;!special_url&nbsp;mimetype&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Also,&nbsp;be&nbsp;aware&nbsp;that&nbsp;http_reply_access&nbsp;denial&nbsp;only&nbsp;prevents&nbsp;the&nbsp;download&lt;br&gt;<br>
reaching&nbsp;the&nbsp;client.&nbsp;It&nbsp;still&nbsp;has&nbsp;to&nbsp;be&nbsp;fully&nbsp;downloaded&nbsp;by&nbsp;Squid&nbsp;-&nbsp;lots&lt;br&gt;<br>
of&nbsp;bandwidth&nbsp;and&nbsp;processing&nbsp;cycles&nbsp;wasted.&lt;br&gt;<br>
 If&nbsp;you&nbsp;are&nbsp;blocking&nbsp;traffic&nbsp;by&nbsp;URL&nbsp;do&nbsp;that&nbsp;in&nbsp;http_access&nbsp;instead.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;urlspecial.txt&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;http://updater.maxon.net/server_test&quot;&nbsp;rel=&quot;noreferrer&nbsp;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://updater.maxon.net/server_test&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;http://updater.maxon.net/customer/R21.0/updates15&quot;&nbsp;rel=&quot;noreferrer&nbsp;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://updater.maxon.net/customer/R21.0/updates15&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;http://updater.maxon.net/customer/general/updates15&quot;&nbsp;rel=&quot;noreferrer&nbsp;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://updater.maxon.net/customer/general/updates15&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;^&lt;a&nbsp;href=&quot;http://ccmdl.adobe.com/AdobeProducts/KCCC/1/win64/packages/.*&quot;&nbsp;rel=&quot;noreferrer&nbsp;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://ccmdl.adobe.com/AdobeProducts/KCCC/1/win64/packages/.*&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;^&lt;a&nbsp;href=&quot;http://ccmdl.adobe.com/AdobeProducts/KCCC/1/osx10/packages/.*&quot;&nbsp;rel=&quot;noreferrer&nbsp;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://ccmdl.adobe.com/AdobeProducts/KCCC/1/osx10/packages/.*&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;^&lt;a&nbsp;href=&quot;http://www.eztitles.com/download.php&quot;&nbsp;rel=&quot;noreferrer&nbsp;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.eztitles.com/download.php&lt;/a&gt;?&lt;br&gt;<br>
&gt;&nbsp;^&lt;a&nbsp;href=&quot;https://attachments.office.net/owa/.*&quot;&nbsp;rel=&quot;noreferrer&nbsp;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://attachments.office.net/owa/.*&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
Do&nbsp;not&nbsp;put&nbsp;.*&nbsp;on&nbsp;the&nbsp;end&nbsp;of&nbsp;regex&nbsp;patterns.&nbsp;That&nbsp;only&nbsp;forces&nbsp;the&nbsp;regex&lt;br&gt;<br>
library&nbsp;to&nbsp;scan&nbsp;longer&nbsp;than&nbsp;necessary&nbsp;and&nbsp;waste&nbsp;memory.&lt;br&gt;<br>
&lt;br&gt;<br>
Also&nbsp;this&nbsp;pattern:&lt;br&gt;<br>
&lt;br&gt;<br>
 ^&lt;a&nbsp;href=&quot;http://www.eztitles.com/download.php&quot;&nbsp;rel=&quot;noreferrer&nbsp;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.eztitles.com/download.php&lt;/a&gt;?&lt;br&gt;<br>
&lt;br&gt;<br>
actually&nbsp;means:&lt;br&gt;<br>
&lt;br&gt;<br>
 ^&lt;a&nbsp;href=&quot;http://www.eztitles.com/download.ph&quot;&nbsp;rel=&quot;noreferrer&nbsp;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.eztitles.com/download.ph&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
(&#39;?&#39;&nbsp;is&nbsp;a&nbsp;regex&nbsp;special&nbsp;character.&nbsp;Like&nbsp;&#39;*&#39;&nbsp;it&nbsp;is&nbsp;deceptively&nbsp;harmful&nbsp;at&lt;br&gt;<br>
the&nbsp;start&nbsp;or&nbsp;end&nbsp;of&nbsp;a&nbsp;pattern)&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Amos&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&nbsp;rel=&quot;noreferrer&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&nbsp;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
