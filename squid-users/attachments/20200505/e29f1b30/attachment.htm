<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail-post&nbsp;gmail-has-merged&quot;&nbsp;id=&quot;gmail-c94320&quot;&nbsp;style=&quot;color:rgb(0,0,0);font-family:proxima-nova,&quot;Helvetica&nbsp;Neue&quot;,HelveticaNeue,Helvetica,Arial,sans-serif;font-size:15px;white-space:pre-line&quot;&gt;&lt;div&nbsp;class=&quot;gmail-post-body&quot;&nbsp;style=&quot;padding:15px&nbsp;0px&nbsp;3px&nbsp;51px;margin:0px&nbsp;25px;border-top:1px&nbsp;solid&nbsp;rgba(233,233,233,0.6);min-height:36px&quot;&gt;&lt;div&nbsp;class=&quot;gmail-post_text&quot;&nbsp;name=&quot;text&quot;&nbsp;style=&quot;white-space:pre-wrap;color:rgb(47,47,47);margin:0px&quot;&gt;Hi&nbsp;All,&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail-post_text&quot;&nbsp;name=&quot;text&quot;&nbsp;style=&quot;white-space:pre-wrap;color:rgb(47,47,47);margin:0px&quot;&gt;Thanks&nbsp;for&nbsp;providing&nbsp;the&nbsp;information.&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail-post_text&quot;&nbsp;name=&quot;text&quot;&nbsp;style=&quot;white-space:pre-wrap;color:rgb(47,47,47);margin:0px&quot;&gt;<br>
The&nbsp;issue&nbsp;is&nbsp;not&nbsp;related&nbsp;to&nbsp;the&nbsp;server&nbsp;certificate&nbsp;SNI.&nbsp;It&#39;s&nbsp;related&nbsp;to&nbsp;exposing&nbsp;a&nbsp;few&nbsp;other&nbsp;sensitive&nbsp;data&nbsp;points&nbsp;such&nbsp;as&nbsp;the&nbsp;domain&nbsp;which&nbsp;is&nbsp;clearly&nbsp;exposed&nbsp;in&nbsp;the&nbsp;CONNECT&nbsp;header.&nbsp;This&nbsp;would&nbsp;be&nbsp;exposed&nbsp;regardless&nbsp;of&nbsp;TLS&nbsp;1.3.&nbsp;Also,&nbsp;there&nbsp;are&nbsp;other&nbsp;headers&nbsp;that&nbsp;are&nbsp;sensitive&nbsp;and&nbsp;outside&nbsp;the&nbsp;encrypted&nbsp;payload&nbsp;including&nbsp;User-Agent&nbsp;and&nbsp;Proxy-Authorization.&nbsp;The&nbsp;Proxy-Authorization&nbsp;is&nbsp;of&nbsp;concern&nbsp;here.&nbsp;Most&nbsp;modern&nbsp;browsers&nbsp;now&nbsp;support&nbsp;PAC&nbsp;with&nbsp;HTTPS&nbsp;versus&nbsp;PROXY.&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail-post_text&quot;&nbsp;name=&quot;text&quot;&nbsp;style=&quot;white-space:pre-wrap;color:rgb(47,47,47);margin:0px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail-post_text&quot;&nbsp;name=&quot;text&quot;&nbsp;style=&quot;white-space:pre-wrap;color:rgb(47,47,47);margin:0px&quot;&gt;The&nbsp;Proxy-Authorization&nbsp;can&nbsp;carry&nbsp;the&nbsp;Basic&nbsp;Auth&nbsp;(and&nbsp;NTLM)&nbsp;credentials&nbsp;which&nbsp;is&nbsp;of&nbsp;concern&nbsp;currently&nbsp;since&nbsp;all&nbsp;users&nbsp;are&nbsp;mobile.&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail-post_text&quot;&nbsp;name=&quot;text&quot;&nbsp;style=&quot;white-space:pre-wrap;color:rgb(47,47,47);margin:0px&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail-post_text&quot;&nbsp;name=&quot;text&quot;&nbsp;style=&quot;white-space:pre-wrap;color:rgb(47,47,47);margin:0px&quot;&gt;Being&nbsp;proactive&nbsp;before&nbsp;this&nbsp;become&nbsp;a&nbsp;problem&nbsp;at&nbsp;causes&nbsp;unnecessary&nbsp;exposure.<br>
Zoom&nbsp;had&nbsp;a&nbsp;lot&nbsp;of&nbsp;issues&nbsp;and&nbsp;wouldn&#39;t&nbsp;want&nbsp;this&nbsp;to&nbsp;affect&nbsp;squid&nbsp;or&nbsp;squid&nbsp;users.<br>
<br>
<br>
<br>
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Tue,&nbsp;May&nbsp;5,&nbsp;2020&nbsp;at&nbsp;11:33&nbsp;AM&nbsp;Alex&nbsp;Rousskov&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:rousskov@measurement-factory.com&quot;&gt;rousskov@measurement-factory.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;On&nbsp;5/5/20&nbsp;10:18&nbsp;AM,&nbsp;Ryan&nbsp;Le&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;Is&nbsp;there&nbsp;plans&nbsp;to&nbsp;support&nbsp;explicit&nbsp;forward&nbsp;proxy&nbsp;over&nbsp;HTTPS&nbsp;to&nbsp;the&nbsp;proxy&lt;br&gt;<br>
&gt;&nbsp;with&nbsp;ssl-bump?&lt;br&gt;<br>
&lt;br&gt;<br>
There&nbsp;have&nbsp;been&nbsp;a&nbsp;few&nbsp;requests&nbsp;for&nbsp;TLS-inside-TLS&nbsp;support,&nbsp;but&nbsp;I&nbsp;am&nbsp;not&lt;br&gt;<br>
aware&nbsp;of&nbsp;any&nbsp;actual&nbsp;sponsors&nbsp;or&nbsp;features&nbsp;on&nbsp;the&nbsp;road&nbsp;map.&nbsp;It&nbsp;is&nbsp;a&lt;br&gt;<br>
complicated&nbsp;project,&nbsp;even&nbsp;though&nbsp;each&nbsp;of&nbsp;its&nbsp;two&nbsp;components&nbsp;already&lt;br&gt;<br>
works&nbsp;today.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;We&nbsp;would&nbsp;like&nbsp;to&nbsp;use&nbsp;https_port&nbsp;ssl-bump&nbsp;without&nbsp;using&nbsp;the&lt;br&gt;<br>
&gt;&nbsp;intercept&nbsp;or&nbsp;tproxy&nbsp;option.&nbsp;Clients&nbsp;will&nbsp;use&nbsp;PAC&nbsp;with&nbsp;a&nbsp;HTTPS&nbsp;directive&lt;br&gt;<br>
&gt;&nbsp;rather&nbsp;than&nbsp;a&nbsp;PROXY&nbsp;directive.&nbsp;The&nbsp;goal&nbsp;is&nbsp;to&nbsp;also&nbsp;encrypted&nbsp;the&nbsp;CONNECT&lt;br&gt;<br>
&gt;&nbsp;header&nbsp;which&nbsp;exposes&nbsp;the&nbsp;domain&nbsp;in&nbsp;plain&nbsp;text&nbsp;while&nbsp;it&nbsp;traverses&nbsp;to&nbsp;the&lt;br&gt;<br>
&gt;&nbsp;proxy.&lt;br&gt;<br>
&lt;br&gt;<br>
Yes,&nbsp;it&nbsp;is&nbsp;a&nbsp;valid&nbsp;use&nbsp;case&nbsp;(that&nbsp;few&nbsp;people&nbsp;understand).&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;Felipe:&nbsp;you&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;use&nbsp;ssl-bump&nbsp;with&nbsp;explicit&nbsp;https&nbsp;proxy.&lt;br&gt;<br>
&lt;br&gt;<br>
Popular&nbsp;browsers&nbsp;barely&nbsp;support&nbsp;HTTPS&nbsp;proxies&nbsp;and&nbsp;refuse&nbsp;to&nbsp;delegate&nbsp;TLS&lt;br&gt;<br>
handling&nbsp;to&nbsp;them.&nbsp;Thus,&nbsp;a&nbsp;connection&nbsp;to&nbsp;a&nbsp;secure&nbsp;origin&nbsp;server&nbsp;will&nbsp;be&lt;br&gt;<br>
encrypted&nbsp;by&nbsp;the&nbsp;browser&nbsp;and&nbsp;sent&nbsp;over&nbsp;an&nbsp;encrypted&nbsp;channel&nbsp;through&nbsp;the&lt;br&gt;<br>
HTTPS&nbsp;proxy&nbsp;--&nbsp;TLS-inside-TLS.&nbsp;If&nbsp;you&nbsp;want&nbsp;to&nbsp;look&nbsp;inside&nbsp;that&nbsp;browser&lt;br&gt;<br>
connection,&nbsp;you&nbsp;have&nbsp;to&nbsp;remove&nbsp;both&nbsp;TLS&nbsp;layers.&nbsp;To&nbsp;remove&nbsp;the&nbsp;outer&lt;br&gt;<br>
layer,&nbsp;you&nbsp;need&nbsp;an&nbsp;https_port&nbsp;in&nbsp;a&nbsp;forward&nbsp;proxy&nbsp;configuration.&nbsp;To&lt;br&gt;<br>
remove&nbsp;the&nbsp;inner&nbsp;layer,&nbsp;you&nbsp;need&nbsp;SslBump.&nbsp;The&nbsp;combination&nbsp;is&nbsp;not&nbsp;yet&lt;br&gt;<br>
supported.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;Matus:&nbsp;people&nbsp;will&nbsp;still&nbsp;be&nbsp;able&nbsp;to&nbsp;see&nbsp;SNI&nbsp;SSL&nbsp;header.&lt;br&gt;<br>
&lt;br&gt;<br>
...&nbsp;but&nbsp;not&nbsp;the&nbsp;origin&nbsp;server&nbsp;SNI.&nbsp;Only&nbsp;the&nbsp;proxy&nbsp;SNI&nbsp;is&nbsp;exposed&nbsp;in&nbsp;this&lt;br&gt;<br>
use&nbsp;case,&nbsp;and&nbsp;that&nbsp;exposure&nbsp;is&nbsp;usually&nbsp;not&nbsp;a&nbsp;problem.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Cheers,&lt;br&gt;<br>
&lt;br&gt;<br>
Alex.&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
