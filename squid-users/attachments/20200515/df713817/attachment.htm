<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=UTF-8&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;text=&quot;#464646&quot;&nbsp;bgcolor=&quot;#FFFFFF&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;Thanks&nbsp;alex,&nbsp;made&nbsp;this&nbsp;one&nbsp;on&nbsp;squid&nbsp;4.10&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;font&nbsp;face=&quot;Arial&quot;&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;acl&nbsp;TestFinger&nbsp;&lt;/font&gt;&lt;font&nbsp;face=&quot;Arial&quot;&gt;&lt;font&nbsp;face=&quot;Arial&quot;&gt;server_cert_fingerprint<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;77:F6:8D:C1:0A:DF:94:8B:43:1F:8E:0E:91:5E:0C:32:42:8B:99:C9&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/font&gt;&lt;/font&gt;&lt;font&nbsp;face=&quot;Arial&quot;&gt;&lt;font&nbsp;face=&quot;Arial&quot;&gt;&lt;font<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;face=&quot;Arial&quot;&gt;acl&nbsp;ssl_step1&nbsp;at_step&nbsp;SslBump1&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;acl&nbsp;ssl_step2&nbsp;at_step&nbsp;SslBump2&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;acl&nbsp;ssl_step3&nbsp;at_step&nbsp;SslBump3&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssl_bump&nbsp;peek&nbsp;ssl_step2&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssl_bump&nbsp;splice&nbsp;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;font&nbsp;face=&quot;Arial&quot;&gt;&lt;font<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;face=&quot;Arial&quot;&gt;&lt;font&nbsp;face=&quot;Arial&quot;&gt;&lt;font&nbsp;face=&quot;Arial&quot;&gt;&lt;font<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;face=&quot;Arial&quot;&gt;&lt;font&nbsp;face=&quot;Arial&quot;&gt;&nbsp;ssl_step3&nbsp;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;TestFinger&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssl_bump&nbsp;stare&nbsp;ssl_step2&nbsp;all&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssl_bump&nbsp;bump&nbsp;all&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;But&nbsp;no&nbsp;luck,&nbsp;website&nbsp;still&nbsp;decrypted.&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;moz-cite-prefix&quot;&gt;Le&nbsp;13/05/2020&nbsp;à&nbsp;21:33,&nbsp;Alex&nbsp;Rousskov&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;écrit :&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cite=&quot;mid:45902ecb-f05f-9189-a3a2-caa8fd9dd19b@measurement-factory.com&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-quote-pre&quot;&nbsp;wrap=&quot;&quot;&gt;On&nbsp;5/12/20&nbsp;7:42&nbsp;AM,&nbsp;David&nbsp;Touzeau&nbsp;wrote:<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-quote-pre&quot;&nbsp;wrap=&quot;&quot;&gt;ssl_bump&nbsp;peek&nbsp;ssl_step1<br>
ssl_bump&nbsp;splice&nbsp;TestFinger<br>
ssl_bump&nbsp;stare&nbsp;ssl_step2&nbsp;all<br>
ssl_bump&nbsp;bump&nbsp;all<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-quote-pre&quot;&nbsp;wrap=&quot;&quot;&gt;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-quote-pre&quot;&nbsp;wrap=&quot;&quot;&gt;Seems&nbsp;TestFinger&nbsp;Acls&nbsp;did&nbsp;not&nbsp;matches&nbsp;in&nbsp;any&nbsp;case<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-quote-pre&quot;&nbsp;wrap=&quot;&quot;&gt;<br>
You&nbsp;are&nbsp;trying&nbsp;to&nbsp;use&nbsp;step3&nbsp;information&nbsp;(i.e.,&nbsp;the&nbsp;server&nbsp;certificate)<br>
during&nbsp;SslBump&nbsp;step2:&nbsp;The&nbsp;&quot;splice&nbsp;TestFinger&quot;&nbsp;line&nbsp;is&nbsp;tested&nbsp;during<br>
step2&nbsp;and&nbsp;mismatches&nbsp;because&nbsp;the&nbsp;server&nbsp;certificate&nbsp;is&nbsp;still&nbsp;unknown<br>
during&nbsp;that&nbsp;step.&nbsp;That&nbsp;mismatch&nbsp;results&nbsp;in&nbsp;Squid&nbsp;staring&nbsp;during&nbsp;step2.<br>
The&nbsp;&quot;splice&nbsp;TestFinger&quot;&nbsp;line&nbsp;is&nbsp;not&nbsp;tested&nbsp;during&nbsp;step3&nbsp;because&nbsp;splicing<br>
is&nbsp;not&nbsp;possible&nbsp;after&nbsp;staring.&nbsp;Thus,&nbsp;Squid&nbsp;reaches&nbsp;&quot;bump&nbsp;all&quot;&nbsp;and&nbsp;bumps.<br>
<br>
For&nbsp;a&nbsp;detailed&nbsp;description&nbsp;of&nbsp;what&nbsp;happens&nbsp;(and&nbsp;what&nbsp;information&nbsp;is<br>
available)&nbsp;during&nbsp;each&nbsp;SslBump&nbsp;step,&nbsp;please&nbsp;see<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;https://wiki.squid-cache.org/Features/SslPeekAndSplice&quot;&gt;https://wiki.squid-cache.org/Features/SslPeekAndSplice&lt;/a&gt;<br>
<br>
Also,&nbsp;if&nbsp;you&nbsp;are&nbsp;running&nbsp;v4.9&nbsp;or&nbsp;earlier,&nbsp;please&nbsp;upgrade.&nbsp;We&nbsp;fixed&nbsp;one<br>
server_cert_fingerprint&nbsp;bug,&nbsp;and&nbsp;that&nbsp;fix&nbsp;became&nbsp;a&nbsp;part&nbsp;of&nbsp;the&nbsp;v4.10<br>
release&nbsp;(commit&nbsp;e0eca4c).<br>
<br>
<br>
HTH,<br>
<br>
Alex.<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
