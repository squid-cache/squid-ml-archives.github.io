<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=UTF-8&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&gt;<br>
&lt;div&gt;Hi,&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Here's&nbsp;one&nbsp;more&nbsp;clue&nbsp;(thank's&nbsp;wireshark):&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-&gt;&nbsp;When&nbsp;I&nbsp;try&nbsp;to&nbsp;surf&nbsp;on&nbsp;the&nbsp;Net&nbsp;with&nbsp;client's&nbsp;firefox&nbsp;configued&nbsp;(manual&nbsp;proxy&nbsp;configuration)&nbsp;with&nbsp;the&nbsp;ip&nbsp;and&nbsp;port&nbsp;of&nbsp;the&nbsp;parent&nbsp;proxy,&nbsp;it's&nbsp;ok&nbsp;:&lt;br&gt;&lt;/div&gt;&lt;div&gt;58&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5.940721294&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.16.103.101&nbsp;&nbsp;172.16.103.254&nbsp;&nbsp;HTTP&nbsp;&nbsp;&nbsp;&nbsp;255&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://www.google.com:443&quot;&gt;www.google.com:443&lt;/a&gt;&nbsp;HTTP/1.1&lt;br&gt;&lt;/div&gt;&lt;div&gt;62&nbsp;&nbsp;&nbsp;&nbsp;6.046854511&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.16.103.254&nbsp;&nbsp;172.16.103.101&nbsp;&nbsp;HTTP&nbsp;&nbsp;&nbsp;&nbsp;75&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HTTP/1.1&nbsp;200&nbsp;Connection&nbsp;established&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-&gt;&nbsp;When&nbsp;I&nbsp;configure&nbsp;firefox&nbsp;to&nbsp;use&nbsp;system&nbsp;proxy&nbsp;settings&nbsp;,&nbsp;it&nbsp;doesn't&nbsp;work:&lt;br&gt;&lt;/div&gt;&lt;div&gt;35&nbsp;&nbsp;4.798844976&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.16.103.101&nbsp;&nbsp;172.16.103.254&nbsp;&nbsp;HTTP&nbsp;&nbsp;&nbsp;&nbsp;265&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GET&nbsp;&lt;a&nbsp;href=&quot;http://172.16.103.254:3128/squid-internal-dynamic/netdb&quot;&gt;http://172.16.103.254:3128/squid-internal-dynamic/netdb&lt;/a&gt;&nbsp;HTTP/1.1&lt;br&gt;&lt;/div&gt;&lt;div&gt;47&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.800699191&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;172.16.103.254&nbsp;&nbsp;172.16.103.101&nbsp;&nbsp;HTTP&nbsp;&nbsp;&nbsp;&nbsp;890&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HTTP/1.1&nbsp;403&nbsp;Forbidden&nbsp;&nbsp;(text/html)&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;think&nbsp;I'm&nbsp;going&nbsp;to&nbsp;disable&nbsp;&nbsp;netdb&nbsp;by&nbsp;adding&nbsp;&nbsp;no-netdb-exchange&nbsp;in&nbsp;my&nbsp;conf.&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;And&nbsp;by&nbsp;the&nbsp;way,&nbsp;what's&nbsp;the&nbsp;difference&nbsp;between&nbsp;CONNECT&nbsp;and&nbsp;GET&nbsp;?&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Yannick&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;--&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&nbsp;Envoi&nbsp;sécurisé&nbsp;avec&nbsp;Tutanota.&nbsp;Obtenez&nbsp;votre&nbsp;propre&nbsp;adresse&nbsp;email&nbsp;chiffrée&nbsp;:&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&nbsp;https://tutanota.com&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;26&nbsp;juin&nbsp;2020&nbsp;à&nbsp;07:11&nbsp;de&nbsp;squid3@treenet.co.nz:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;tutanota_quote&quot;&nbsp;style=&quot;border-left:&nbsp;1px&nbsp;solid&nbsp;#93A3B8;&nbsp;padding-left:&nbsp;10px;&nbsp;margin-left:&nbsp;5px;&quot;&gt;&lt;div&gt;On&nbsp;24/06/20&nbsp;7:27&nbsp;am,&nbsp;yannick.rousseau@tutanota.com&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&gt;&lt;div&gt;Hi,&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I'm&nbsp;using&nbsp;squid&nbsp;(4.6)&nbsp;on&nbsp;my&nbsp;server&nbsp;(debianedu&nbsp;buster&nbsp;LTSP),&nbsp;and&nbsp;I'm&lt;br&gt;&lt;/div&gt;&lt;div&gt;trying&nbsp;to&nbsp;configure&nbsp;a&nbsp;parent&nbsp;proxy.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;At&nbsp;first,&nbsp;when&nbsp;I&nbsp;configure&nbsp;the&nbsp;client's&nbsp;firefox&nbsp;(manual&nbsp;proxy&lt;br&gt;&lt;/div&gt;&lt;div&gt;configuration)&nbsp;with&nbsp;the&nbsp;ip&nbsp;and&nbsp;port&nbsp;of&nbsp;the&nbsp;parent&nbsp;proxy,&nbsp;it's&nbsp;ok,&nbsp;I&nbsp;can&lt;br&gt;&lt;/div&gt;&lt;div&gt;surf&nbsp;on&nbsp;the&nbsp;internet.&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;But&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;configure&nbsp;my&nbsp;server's&nbsp;Squid&nbsp;Proxy&nbsp;to&nbsp;forward&nbsp;to&nbsp;a&lt;br&gt;&lt;/div&gt;&lt;div&gt;parent&nbsp;proxy&nbsp;(172.16.103.254:3128)&lt;br&gt;&lt;/div&gt;&lt;div&gt;-&gt;&nbsp;So&nbsp;I&nbsp;add&nbsp;these&nbsp;two&nbsp;lines&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;squid.conf:&lt;br&gt;&lt;/div&gt;&lt;div&gt;cache_peer&nbsp;172.16.103.254&nbsp;parent&nbsp;3128&nbsp;0&nbsp;no-query&nbsp;no-digest&lt;br&gt;&lt;/div&gt;&lt;div&gt;never_direct&nbsp;allow&nbsp;all&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-&gt;&nbsp;And&nbsp;restart&nbsp;squid.&nbsp;It&nbsp;seems&nbsp;to&nbsp;be&nbsp;ok:&lt;br&gt;&lt;/div&gt;&lt;div&gt;#&nbsp;cat&nbsp;/var/log/squid/cache.log&lt;br&gt;&lt;/div&gt;&lt;div&gt;(.....)&lt;br&gt;&lt;/div&gt;&lt;div&gt;2020/06/23&nbsp;09:51:12&nbsp;kid1|&nbsp;Configuring&nbsp;Parent&nbsp;172.16.103.254/3128/0&lt;br&gt;&lt;/div&gt;&lt;div&gt;(....)&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;-&gt;&nbsp;Then&nbsp;I&nbsp;configure&nbsp;firefox&nbsp;to&nbsp;use&nbsp;system&nbsp;proxy&nbsp;settings,&nbsp;but&nbsp;when&nbsp;I&nbsp;try&lt;br&gt;&lt;/div&gt;&lt;div&gt;to&nbsp;google&nbsp;something&nbsp;or&nbsp;visit&nbsp;debian-fr.org,&nbsp;it&nbsp;doesn't&nbsp;work&nbsp;(no&nbsp;reponse&lt;br&gt;&lt;/div&gt;&lt;div&gt;from&nbsp;the&nbsp;proxy).&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;That&nbsp;is&nbsp;odd.&nbsp;The&nbsp;log&nbsp;shows&nbsp;a&nbsp;403&nbsp;response&nbsp;being&nbsp;delivered&nbsp;by&nbsp;the&nbsp;parent&lt;br&gt;&lt;/div&gt;&lt;div&gt;proxy&nbsp;and&nbsp;delivered&nbsp;to&nbsp;Firefox.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Browsers&nbsp;refuse&nbsp;to&nbsp;display&nbsp;proxy&nbsp;responses&nbsp;on&nbsp;CONNECT&nbsp;requests.&nbsp;So&nbsp;the&lt;br&gt;&lt;/div&gt;&lt;div&gt;first&nbsp;is&nbsp;expected.&nbsp;But&nbsp;the&nbsp;second&nbsp;one&nbsp;using&nbsp;http://&nbsp;should&nbsp;be&nbsp;shown.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;blockquote&gt;&lt;div&gt;But&nbsp;my&nbsp;squid's&nbsp;configuration&nbsp;seems&nbsp;to&nbsp;be&nbsp;ok:&lt;br&gt;&lt;/div&gt;&lt;div&gt;#&nbsp;cat&nbsp;/var/log/squid/access.log&lt;br&gt;&lt;/div&gt;&lt;div&gt;(....)&lt;br&gt;&lt;/div&gt;&lt;div&gt;1592921221.753&nbsp;&nbsp;&nbsp;&nbsp;138&nbsp;10.0.2.2&nbsp;TCP_TUNNEL/403&nbsp;361&lt;br&gt;&lt;/div&gt;&lt;div&gt;CONNECT&nbsp;www.google.com:443&nbsp;&lt;http://www.google.com:443/&gt;&nbsp;-&lt;br&gt;&lt;/div&gt;&lt;div&gt;FIRSTUP_PARENT/172.16.103.254&nbsp;-&lt;br&gt;&lt;/div&gt;&lt;div&gt;1592921275.641&nbsp;&nbsp;&nbsp;&nbsp;521&nbsp;10.0.2.2&nbsp;TCP_MISS/403&nbsp;4289&lt;br&gt;&lt;/div&gt;&lt;div&gt;GET&nbsp;http://www.debian-fr.org/&nbsp;-&nbsp;FIRSTUP_PARENT/172.16.103.254&nbsp;text/html&lt;br&gt;&lt;/div&gt;&lt;div&gt;1592921275.692&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;10.0.2.2&nbsp;TCP_HIT/200&nbsp;13072&nbsp;GET&lt;br&gt;&lt;/div&gt;&lt;div&gt;(...)&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Is&nbsp;it&nbsp;possible&nbsp;that&nbsp;the&nbsp;squid&nbsp;parent&nbsp;refuse&nbsp;to&nbsp;have&nbsp;&quot;a&nbsp;child&quot;&nbsp;?&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Maybe.&nbsp;You&nbsp;will&nbsp;need&nbsp;to&nbsp;know&nbsp;the&nbsp;parent&nbsp;proxy&nbsp;configuration&nbsp;to&nbsp;tell&lt;br&gt;&lt;/div&gt;&lt;div&gt;that.&nbsp;All&nbsp;that&nbsp;is&nbsp;visible&nbsp;from&nbsp;the&nbsp;detail&nbsp;you&nbsp;have&nbsp;shown&nbsp;is&nbsp;that&nbsp;parent&lt;br&gt;&lt;/div&gt;&lt;div&gt;proxy&nbsp;has&nbsp;forbidden&nbsp;the&nbsp;requests&nbsp;it&nbsp;is&nbsp;receiving.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Amos&lt;br&gt;&lt;/div&gt;&lt;div&gt;_______________________________________________&lt;br&gt;&lt;/div&gt;&lt;div&gt;squid-users&nbsp;mailing&nbsp;list&lt;br&gt;&lt;/div&gt;&lt;div&gt;squid-users@lists.squid-cache.org&lt;br&gt;&lt;/div&gt;&lt;div&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;br&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
