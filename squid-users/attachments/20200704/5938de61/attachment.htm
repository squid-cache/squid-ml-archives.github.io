<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=iso-2022-jp&quot;&gt;<br>
&lt;/head&gt;<br>
&lt;body&gt;<br>
&lt;div&nbsp;dir=&quot;auto&quot;&nbsp;style=&quot;direction:&nbsp;ltr;&nbsp;margin:&nbsp;0;&nbsp;padding:&nbsp;0;&nbsp;font-family:&nbsp;sans-serif;&nbsp;font-size:&nbsp;11pt;&nbsp;color:&nbsp;black;&nbsp;&quot;&gt;<br>
How&nbsp;do&nbsp;I&nbsp;unsubscribe&nbsp;from&nbsp;this?&nbsp;Been&nbsp;a&nbsp;good&nbsp;couple&nbsp;years,&nbsp;but&nbsp;I'd&nbsp;appreciate&nbsp;some&nbsp;help&nbsp;:)&lt;span&nbsp;id=&quot;ms-outlook-android-cursor&quot;&gt;&lt;/span&gt;&lt;/div&gt;<br>
&lt;hr&nbsp;style=&quot;display:inline-block;width:98%&quot;&nbsp;tabindex=&quot;-1&quot;&gt;<br>
&lt;div&nbsp;id=&quot;divRplyFwdMsg&quot;&nbsp;dir=&quot;ltr&quot;&gt;&lt;font&nbsp;face=&quot;Calibri,&nbsp;sans-serif&quot;&nbsp;style=&quot;font-size:11pt&quot;&nbsp;color=&quot;#000000&quot;&gt;&lt;b&gt;From:&lt;/b&gt;&nbsp;squid-users&nbsp;&lt;squid-users-bounces@lists.squid-cache.org&gt;&nbsp;on&nbsp;behalf&nbsp;of&nbsp;橋本紘希&nbsp;&lt;hsmtkk@gmail.com&gt;&lt;br&gt;<br>
&lt;b&gt;Sent:&lt;/b&gt;&nbsp;Friday,&nbsp;July&nbsp;3,&nbsp;2020&nbsp;7:49:57&nbsp;PM&lt;br&gt;<br>
&lt;b&gt;To:&lt;/b&gt;&nbsp;squid-users@lists.squid-cache.org&nbsp;&lt;squid-users@lists.squid-cache.org&gt;&lt;br&gt;<br>
&lt;b&gt;Subject:&lt;/b&gt;&nbsp;[squid-users]&nbsp;squid&nbsp;5.0.3&nbsp;Segment&nbsp;Violation&nbsp;when&nbsp;using&nbsp;ssl&nbsp;bump&nbsp;and&nbsp;cache&nbsp;peer&lt;/font&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;BodyFragment&quot;&gt;&lt;font&nbsp;size=&quot;2&quot;&gt;&lt;span&nbsp;style=&quot;font-size:11pt;&quot;&gt;<br>
&lt;div&nbsp;class=&quot;PlainText&quot;&gt;I&nbsp;have&nbsp;a&nbsp;problem&nbsp;with&nbsp;squid&nbsp;5.0.3.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;would&nbsp;like&nbsp;to&nbsp;use&nbsp;&quot;Peering&nbsp;support&nbsp;for&nbsp;SSL-Bump&quot;&nbsp;introduced&nbsp;in&nbsp;squid&nbsp;5.&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://squid.mirror.colo-serv.net/archive/5/squid-5.0.2-RELEASENOTES.html#ss2.6&quot;&gt;http://squid.mirror.colo-serv.net/archive/5/squid-5.0.2-RELEASENOTES.html#ss2.6&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;configured&nbsp;this&nbsp;environment&nbsp;using&nbsp;docker-compose.&lt;br&gt;<br>
client&nbsp;-&gt;&nbsp;childproxy&nbsp;-&gt;&nbsp;parentproxy&nbsp;-&gt;&nbsp;server&lt;br&gt;<br>
&lt;br&gt;<br>
When&nbsp;I&nbsp;communicated&nbsp;client&nbsp;to&nbsp;server&nbsp;via&nbsp;childproxy&nbsp;and&nbsp;parentproxy,&lt;br&gt;<br>
&quot;Segment&nbsp;Violation&quot;&nbsp;happened&nbsp;and&nbsp;squid&nbsp;exited&nbsp;abnormally.&lt;br&gt;<br>
&lt;br&gt;<br>
Do&nbsp;I&nbsp;need&nbsp;any&nbsp;extra&nbsp;configuration&nbsp;to&nbsp;use&nbsp;&quot;Peering&nbsp;support&nbsp;for&nbsp;SSL-Bump&quot;&nbsp;feature?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
*&nbsp;squid&nbsp;--version&nbsp;output&lt;br&gt;<br>
Squid&nbsp;Cache:&nbsp;Version&nbsp;5.0.3&lt;br&gt;<br>
Service&nbsp;Name:&nbsp;squid&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;binary&nbsp;uses&nbsp;OpenSSL&nbsp;1.1.1g&nbsp;&nbsp;21&nbsp;Apr&nbsp;2020.&nbsp;For&nbsp;legal&nbsp;restrictions&lt;br&gt;<br>
on&nbsp;distribution&nbsp;see&nbsp;&lt;a&nbsp;href=&quot;https://www.openssl.org/source/license.html&quot;&gt;https://www.openssl.org/source/license.html&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
configure&nbsp;options:&nbsp;&nbsp;'--prefix=/usr/local/squid'&nbsp;'--enable-ssl-crtd'&lt;br&gt;<br>
'--disable-optimizations'&nbsp;'--with-openssl=/usr/local/openssl'&lt;br&gt;<br>
--enable-ltdl-convenience&lt;br&gt;<br>
&lt;br&gt;<br>
*&nbsp;executed&nbsp;command&nbsp;and&nbsp;its&nbsp;output&lt;br&gt;<br>
&lt;br&gt;<br>
$&nbsp;docker&nbsp;exec&nbsp;client&nbsp;curl&nbsp;-k&nbsp;-x&nbsp;childproxy:3128&nbsp;&lt;a&nbsp;href=&quot;https://server/hello.html&quot;&gt;<br>
https://server/hello.html&lt;/a&gt;&lt;br&gt;<br>
&nbsp;&nbsp;%&nbsp;Total&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;Received&nbsp;%&nbsp;Xferd&nbsp;&nbsp;Average&nbsp;Speed&nbsp;&nbsp;&nbsp;Time&nbsp;&nbsp;&nbsp;&nbsp;Time&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Time&nbsp;&nbsp;Current&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dload&nbsp;&nbsp;Upload&nbsp;&nbsp;&nbsp;Total&nbsp;&nbsp;&nbsp;Spent&nbsp;&nbsp;&nbsp;&nbsp;Left&nbsp;&nbsp;Speed&lt;br&gt;<br>
&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;--:--:--&nbsp;--:--:--&nbsp;--:--:--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&lt;br&gt;<br>
curl:&nbsp;(35)&nbsp;OpenSSL&nbsp;SSL_connect:&nbsp;SSL_ERROR_SYSCALL&nbsp;in&nbsp;connection&nbsp;to&nbsp;server:443&lt;br&gt;<br>
&lt;br&gt;<br>
*&nbsp;error&nbsp;log&lt;br&gt;<br>
&lt;br&gt;<br>
childproxy&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;2020/07/03&nbsp;22:55:53&nbsp;kid1|&nbsp;FATAL:&nbsp;Received&nbsp;Segment&lt;br&gt;<br>
Violation...dying.&lt;br&gt;<br>
childproxy&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;current&nbsp;master&nbsp;transaction:&nbsp;master53&lt;br&gt;<br>
childproxy&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;2020/07/03&nbsp;22:55:53&nbsp;kid1|&nbsp;Closing&nbsp;HTTP(S)&nbsp;port&nbsp;0.0.0.0:3128&lt;br&gt;<br>
childproxy&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;current&nbsp;master&nbsp;transaction:&nbsp;master53&lt;br&gt;<br>
childproxy&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;2020/07/03&nbsp;22:55:53&nbsp;kid1|&nbsp;storeDirWriteCleanLogs:&nbsp;Starting...&lt;br&gt;<br>
childproxy&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;current&nbsp;master&nbsp;transaction:&nbsp;master53&lt;br&gt;<br>
childproxy&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;2020/07/03&nbsp;22:55:53&nbsp;kid1|&nbsp;&nbsp;&nbsp;Finished.&nbsp;&nbsp;Wrote&nbsp;0&nbsp;entries.&lt;br&gt;<br>
childproxy&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;current&nbsp;master&nbsp;transaction:&nbsp;master53&lt;br&gt;<br>
childproxy&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;2020/07/03&nbsp;22:55:53&nbsp;kid1|&nbsp;&nbsp;&nbsp;Took&nbsp;0.00&nbsp;seconds&nbsp;(&nbsp;&nbsp;0.00&lt;br&gt;<br>
entries/sec).&lt;br&gt;<br>
childproxy&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;current&nbsp;master&nbsp;transaction:&nbsp;master53&lt;br&gt;<br>
childproxy&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;CPU&nbsp;Usage:&nbsp;0.235&nbsp;seconds&nbsp;=&nbsp;0.106&nbsp;user&nbsp;&#43;&nbsp;0.129&nbsp;sys&lt;br&gt;<br>
childproxy&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Maximum&nbsp;Resident&nbsp;Size:&nbsp;600336&nbsp;KB&lt;br&gt;<br>
childproxy&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Page&nbsp;faults&nbsp;with&nbsp;physical&nbsp;i/o:&nbsp;0&lt;br&gt;<br>
&lt;br&gt;<br>
*&nbsp;core&nbsp;dump&nbsp;backtrace&lt;br&gt;<br>
&lt;br&gt;<br>
#0&nbsp;&nbsp;0x00007f8b433da387&nbsp;in&nbsp;raise&nbsp;()&nbsp;from&nbsp;/lib64/libc.so.6&lt;br&gt;<br>
#1&nbsp;&nbsp;0x00007f8b433dba78&nbsp;in&nbsp;abort&nbsp;()&nbsp;from&nbsp;/lib64/libc.so.6&lt;br&gt;<br>
#2&nbsp;&nbsp;0x000000000088b4bc&nbsp;in&nbsp;death&nbsp;(sig=11)&nbsp;at&nbsp;tools.cc:359&lt;br&gt;<br>
#3&nbsp;&nbsp;&lt;signal&nbsp;handler&nbsp;called&gt;&lt;br&gt;<br>
#4&nbsp;&nbsp;0x00000000009dbd12&nbsp;in&nbsp;Comm::Connection::getPeer&nbsp;(this=0x0)&nbsp;at&lt;br&gt;<br>
Connection.cc:102&lt;br&gt;<br>
#5&nbsp;&nbsp;0x00000000009dbed8&nbsp;in&nbsp;Comm::Connection::connectTimeout&nbsp;(this=0x0,&lt;br&gt;<br>
fwdStart=1593816953)&nbsp;at&nbsp;Connection.cc:143&lt;br&gt;<br>
#6&nbsp;&nbsp;0x00000000007b1332&nbsp;in&nbsp;FwdState::connectingTimeout&nbsp;(this=0x2870a48,&lt;br&gt;<br>
conn=...)&nbsp;at&nbsp;FwdState.cc:1381&lt;br&gt;<br>
#7&nbsp;&nbsp;0x00000000007ae351&nbsp;in&nbsp;FwdState::establishTunnelThruProxy&lt;br&gt;<br>
(this=0x2870a48,&nbsp;conn=...)&nbsp;at&nbsp;FwdState.cc:850&lt;br&gt;<br>
#8&nbsp;&nbsp;0x00000000007adba5&nbsp;in&nbsp;FwdState::__lambda2::operator()&lt;br&gt;<br>
(__closure=0x7ffead0888f0)&nbsp;at&nbsp;FwdState.cc:836&lt;br&gt;<br>
#9&nbsp;&nbsp;0x00000000007b1ca7&nbsp;in&lt;br&gt;<br>
FwdState::advanceDestination&lt;FwdState::noteConnection(HappyConnOpener::Answer&amp;)::__lambda2&gt;(const&lt;br&gt;<br>
char&nbsp;*,&nbsp;const&nbsp;Comm::ConnectionPointer&nbsp;&amp;,&nbsp;const&nbsp;FwdState::__lambda2&nbsp;&amp;)&lt;br&gt;<br>
(this=0x2870a48,&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;stepDescription=0xb487f0&nbsp;&quot;establish&nbsp;tunnel&nbsp;through&nbsp;proxy&quot;,&lt;br&gt;<br>
conn=...,&nbsp;startStep=...)&nbsp;at&nbsp;FwdState.cc:777&lt;br&gt;<br>
#10&nbsp;0x00000000007ae1ca&nbsp;in&nbsp;FwdState::noteConnection&nbsp;(this=0x2870a48,&lt;br&gt;<br>
answer=...)&nbsp;at&nbsp;FwdState.cc:837&lt;br&gt;<br>
#11&nbsp;0x00000000007b5f64&nbsp;in&nbsp;HappyConnOpener::CbDialer&lt;FwdState&gt;::dial&lt;br&gt;<br>
(this=0x2871af8)&nbsp;at&nbsp;HappyConnOpener.h:120&lt;br&gt;<br>
#12&nbsp;0x00000000007b56ed&nbsp;in&lt;br&gt;<br>
AsyncCallT&lt;HappyConnOpener::CbDialer&lt;FwdState&gt;&nbsp;&gt;::fire&lt;br&gt;<br>
(this=0x2871ac0)&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;at&nbsp;../src/base/AsyncCall.h:150&lt;br&gt;<br>
#13&nbsp;0x000000000096c293&nbsp;in&nbsp;AsyncCall::make&nbsp;(this=0x2871ac0)&nbsp;at&nbsp;AsyncCall.cc:44&lt;br&gt;<br>
#14&nbsp;0x000000000096cfca&nbsp;in&nbsp;AsyncCallQueue::fireNext&nbsp;(this=0x23b6ec0)&nbsp;at&lt;br&gt;<br>
AsyncCallQueue.cc:60&lt;br&gt;<br>
#15&nbsp;0x000000000096cd43&nbsp;in&nbsp;AsyncCallQueue::fire&nbsp;(this=0x23b6ec0)&nbsp;at&lt;br&gt;<br>
AsyncCallQueue.cc:43&lt;br&gt;<br>
#16&nbsp;0x000000000079afbf&nbsp;in&nbsp;EventLoop::dispatchCalls&lt;br&gt;<br>
(this=0x7ffead088c80)&nbsp;at&nbsp;EventLoop.cc:144&lt;br&gt;<br>
#17&nbsp;0x000000000079aee7&nbsp;in&nbsp;EventLoop::runOnce&nbsp;(this=0x7ffead088c80)&nbsp;at&lt;br&gt;<br>
EventLoop.cc:121&lt;br&gt;<br>
#18&nbsp;0x000000000079ad4e&nbsp;in&nbsp;EventLoop::run&nbsp;(this=0x7ffead088c80)&nbsp;at&lt;br&gt;<br>
EventLoop.cc:83&lt;br&gt;<br>
#19&nbsp;0x000000000081ce58&nbsp;in&nbsp;SquidMain&nbsp;(argc=3,&nbsp;argv=0x7ffead088fb8)&nbsp;at&lt;br&gt;<br>
main.cc:1716&lt;br&gt;<br>
#20&nbsp;0x000000000081c2c3&nbsp;in&nbsp;SquidMainSafe&nbsp;(argc=3,&nbsp;argv=0x7ffead088fb8)&lt;br&gt;<br>
at&nbsp;main.cc:1403&lt;br&gt;<br>
#21&nbsp;0x000000000081c296&nbsp;in&nbsp;main&nbsp;(argc=3,&nbsp;argv=0x7ffead088fb8)&nbsp;at&nbsp;main.cc:1391&lt;br&gt;<br>
&lt;br&gt;<br>
*&nbsp;I&nbsp;submitted&nbsp;all&nbsp;my&nbsp;configs&nbsp;and&nbsp;logs&nbsp;to&nbsp;my&nbsp;github&nbsp;page.&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://github.com/hsmtkk/squid5_sslbump_cachepeer/issues/1&quot;&gt;https://github.com/hsmtkk/squid5_sslbump_cachepeer/issues/1&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Best&nbsp;regards,&lt;br&gt;<br>
Kouki&nbsp;Hashimoto&lt;br&gt;<br>
hsmtkk@gmail.com&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
