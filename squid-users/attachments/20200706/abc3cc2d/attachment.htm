<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hi&nbsp;Amos,&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;tried&nbsp;the&nbsp;configuration&nbsp;that&nbsp;you&nbsp;suggested&nbsp;but&nbsp;I&#39;m&nbsp;getting&nbsp;below&nbsp;error.&nbsp;It&nbsp;seems&nbsp;the&nbsp;requests&nbsp;are&nbsp;not&nbsp;getting&nbsp;forward&nbsp;to&nbsp;cache_peer.&nbsp;I&#39;m&nbsp;unable&nbsp;to&nbsp;figure&nbsp;out&nbsp;what&nbsp;is&nbsp;the&nbsp;cause&nbsp;of&nbsp;the&nbsp;issue.&nbsp;If&nbsp;I&nbsp;revert&nbsp;it&nbsp;to&nbsp;my&nbsp;previous&nbsp;configuration&nbsp;I&#39;m&nbsp;not&nbsp;seeing&nbsp;any&nbsp;issue&nbsp;withÂ &nbsp;cache_peer&#39;s.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;**&nbsp;Establish&nbsp;HTTP&nbsp;proxy&nbsp;tunnel&nbsp;to&nbsp;&lt;a&nbsp;href=&quot;http://www.google.com:443&quot;&gt;www.google.com:443&lt;/a&gt;&lt;br&gt;*&nbsp;Proxy&nbsp;auth&nbsp;using&nbsp;Basic&nbsp;with&nbsp;user&nbsp;&#39;username1&#39;&lt;br&gt;&gt;&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://www.google.com:443&quot;&gt;www.google.com:443&lt;/a&gt;&nbsp;HTTP/1.1&lt;br&gt;&gt;&nbsp;Host:&nbsp;&lt;a&nbsp;href=&quot;http://www.google.com:443&quot;&gt;www.google.com:443&lt;/a&gt;&lt;br&gt;&gt;&nbsp;Proxy-Authorization:&nbsp;Basic&nbsp;bGluZTE6dGVzdGluZw==&lt;br&gt;&gt;&nbsp;User-Agent:&nbsp;curl/7.58.0&lt;br&gt;&gt;&nbsp;Proxy-Connection:&nbsp;Keep-Alive&lt;br&gt;&gt;&nbsp;&lt;br&gt;&lt;&nbsp;HTTP/1.1&nbsp;503&nbsp;Service&nbsp;Unavailable&lt;br&gt;&lt;&nbsp;Server:&nbsp;squid/3.5.27&lt;br&gt;&lt;&nbsp;Mime-Version:&nbsp;1.0&lt;br&gt;&lt;&nbsp;Date:&nbsp;Mon,&nbsp;06&nbsp;Jul&nbsp;2020&nbsp;10:24:28&nbsp;GMT&lt;br&gt;&lt;&nbsp;Content-Type:&nbsp;text/html;charset=utf-8&lt;br&gt;&lt;&nbsp;Content-Length:&nbsp;3905&lt;br&gt;&lt;&nbsp;X-Squid-Error:&nbsp;ERR_CANNOT_FORWARD&nbsp;0&lt;br&gt;&lt;&nbsp;Vary:&nbsp;Accept-Language&lt;br&gt;&lt;&nbsp;Content-Language:&nbsp;en&lt;br&gt;&lt;&nbsp;&lt;br&gt;*&nbsp;Received&nbsp;HTTP&nbsp;code&nbsp;503&nbsp;from&nbsp;proxy&nbsp;after&nbsp;CONNECT&lt;br&gt;*&nbsp;CONNECT&nbsp;phase&nbsp;completed!&lt;br&gt;*&nbsp;Closing&nbsp;connection&nbsp;0&lt;br&gt;curl:&nbsp;(56)&nbsp;Received&nbsp;HTTP&nbsp;code&nbsp;503&nbsp;from&nbsp;proxy&nbsp;after&nbsp;CONNECT&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Thu,&nbsp;Jul&nbsp;2,&nbsp;2020&nbsp;at&nbsp;6:29&nbsp;PM&nbsp;Prem&nbsp;Chand&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:premchand142@gmail.com&quot;&gt;premchand142@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hi&nbsp;Amos,&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;for&nbsp;the&nbsp;response.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;However,&nbsp;what&nbsp;do&nbsp;you&nbsp;want&nbsp;to&nbsp;happen&nbsp;when&nbsp;that&nbsp;user&#39;s&nbsp;dedicated&nbsp;peer&nbsp;is&nbsp;unavailable?&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Can&nbsp;it&nbsp;be&nbsp;routed&nbsp;to&nbsp;another&nbsp;peer&nbsp;if&nbsp;a&nbsp;dedicated&nbsp;peer&nbsp;is&nbsp;unavailable?&nbsp;because&nbsp;each&nbsp;peer&nbsp;is&nbsp;accessed&nbsp;by&nbsp;a&nbsp;different&nbsp;username&nbsp;and&nbsp;password.&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;option&nbsp;to&nbsp;route&nbsp;then&nbsp;I&nbsp;will&nbsp;keep&nbsp;a&nbsp;backup&nbsp;peer(Peer4)&nbsp;so&nbsp;if&nbsp;any&nbsp;one&nbsp;of&nbsp;the&nbsp;peers(Peer1,Peer2,Peer3)&nbsp;is&nbsp;unavailable&nbsp;it&nbsp;can&nbsp;route&nbsp;to&nbsp;the&nbsp;backup&nbsp;peer&nbsp;and&nbsp;once&nbsp;the&nbsp;unavailable&nbsp;peer&nbsp;become&nbsp;available&nbsp;then&nbsp;traffic&nbsp;should&nbsp;auto&nbsp;route&nbsp;to&nbsp;them&nbsp;from&nbsp;backup&nbsp;peer.&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;there&nbsp;is&nbsp;no&nbsp;option&nbsp;that&nbsp;fits&nbsp;as&nbsp;I&nbsp;explained&nbsp;above&nbsp;then&nbsp;I&nbsp;want&nbsp;to&nbsp;stop&nbsp;all&nbsp;access&nbsp;for&nbsp;them.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Are&nbsp;you&nbsp;wanting&nbsp;to&nbsp;keep&nbsp;this&nbsp;behaviour?&lt;/div&gt;&lt;div&gt;I&nbsp;don&#39;t&nbsp;want&nbsp;to&nbsp;use&nbsp;the&nbsp;round-robin&nbsp;behaviour.&nbsp;I&nbsp;want&nbsp;to&nbsp;route&nbsp;requests&nbsp;to&nbsp;dedicated&nbsp;Peer/Client.&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Thu,&nbsp;Jul&nbsp;2,&nbsp;2020&nbsp;at&nbsp;3:19&nbsp;PM&nbsp;Prem&nbsp;Chand&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:premchand142@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;premchand142@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Hi,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;I&nbsp;need&nbsp;to&nbsp;redirect&nbsp;my&nbsp;clients&nbsp;requests&nbsp;to&nbsp;different&nbsp;Cache_peers&nbsp;using&nbsp;username&nbsp;and&nbsp;passwords&nbsp;through&nbsp;my&nbsp;proxy.&nbsp;Below&nbsp;is&nbsp;the&nbsp;rough&nbsp;sketch.&nbsp;Can&nbsp;someone&nbsp;suggest&nbsp;to&nbsp;me&nbsp;how&nbsp;I&nbsp;can&nbsp;achieve&nbsp;this?&lt;br&gt;&lt;br&gt;Client1(Username1:password1)&nbsp;-&gt;Proxy:443&nbsp;-&gt;&nbsp;Cache_peer:3218&nbsp;&lt;br&gt;Client&nbsp;2(Username2:password2)-&gt;Proxy:443-&gt;&nbsp;Cache_peer:3219&lt;/div&gt;&lt;div&gt;.&lt;/div&gt;&lt;div&gt;.&lt;/div&gt;&lt;div&gt;.&lt;/div&gt;&lt;div&gt;.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;is&nbsp;my&nbsp;current&nbsp;configuration,&nbsp;I&#39;m&nbsp;doing&nbsp;round&nbsp;robin&nbsp;through&nbsp;cache_peers&nbsp;when&nbsp;authenticated&nbsp;with&nbsp;a&nbsp;single&nbsp;username&nbsp;and&nbsp;password&nbsp;in&nbsp;/etc/squid/squidpasswdfile&nbsp;file&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;auth_param&nbsp;basic&nbsp;program&nbsp;/usr/lib64/squid/ncsa_auth&nbsp;/etc/squid/squidpasswdfile&lt;br&gt;auth_param&nbsp;basic&nbsp;realm&nbsp;proxy&lt;br&gt;acl&nbsp;auth_users&nbsp;proxy_auth&nbsp;REQUIRED&nbsp;&lt;br&gt;http_access&nbsp;allow&nbsp;auth_users&lt;br&gt;http_access&nbsp;deny&nbsp;all&lt;br&gt;cache_peer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Peer1&nbsp;&nbsp;&nbsp;parent&nbsp;&nbsp;3218&nbsp;0&nbsp;round-robin&nbsp;no-query&nbsp;weight=1&nbsp;connect-fail-limit=1&lt;br&gt;cache_peer&nbsp;&nbsp;&nbsp;Peer2&nbsp;&nbsp;&nbsp;parent&nbsp;&nbsp;3219&nbsp;0&nbsp;round-robin&nbsp;no-query&nbsp;weight=1&nbsp;connect-fail-limit=1&nbsp;&lt;br&gt;cache_peer&nbsp;&nbsp;Peer3&nbsp;&nbsp;&nbsp;parent&nbsp;&nbsp;3219&nbsp;0&nbsp;round-robin&nbsp;no-query&nbsp;weight=1&nbsp;connect-fail-limit=1&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;&amp;&nbsp;Regards&lt;/div&gt;&lt;div&gt;Premchand.&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;prem&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;--&nbsp;&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_signature&quot;&gt;prem&lt;/div&gt;<br>

</tt>
