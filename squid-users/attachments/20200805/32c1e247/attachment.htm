<tt>
&lt;div&nbsp;dir=&quot;auto&quot;&gt;I&nbsp;think&nbsp;that&nbsp;the&nbsp;mgr:info&nbsp;or&nbsp;another&nbsp;page&nbsp;there&nbsp;contains&nbsp;the&nbsp;amount&nbsp;of&nbsp;requests&nbsp;per&nbsp;second&nbsp;etc.&lt;div&nbsp;dir=&quot;auto&quot;&gt;also&nbsp;netstat&nbsp;or&nbsp;ss&nbsp;-ntp&nbsp;might&nbsp;give&nbsp;some&nbsp;basic&nbsp;understanding&nbsp;about&nbsp;this&nbsp;server&nbsp;size.&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;are&nbsp;you&nbsp;using&nbsp;dynamic&nbsp;memory&nbsp;on&nbsp;the&nbsp;hyper-v&nbsp;hypervisor?&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;Eliezer&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Wed,&nbsp;Aug&nbsp;5,&nbsp;2020,&nbsp;19:59&nbsp;Ivan&nbsp;Bulatovic&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:ivan.bulatovic@gmail.com&quot;&gt;ivan.bulatovic@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;Hi&nbsp;Alex,&lt;br&gt;<br>
&lt;br&gt;<br>
Thank&nbsp;you&nbsp;very&nbsp;much&nbsp;for&nbsp;your&nbsp;help.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;opened&nbsp;a&nbsp;bug&nbsp;on&nbsp;&lt;a&nbsp;href=&quot;http://bugs.squid-cache.org&quot;&nbsp;rel=&quot;noreferrer&nbsp;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;bugs.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
(&lt;a&nbsp;href=&quot;https://bugs.squid-cache.org/show_bug.cgi?id=5071&quot;&nbsp;rel=&quot;noreferrer&nbsp;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://bugs.squid-cache.org/show_bug.cgi?id=5071&lt;/a&gt;).&lt;br&gt;<br>
&lt;br&gt;<br>
Best&nbsp;regards,&lt;br&gt;<br>
Ivan&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;Mon,&nbsp;Aug&nbsp;3,&nbsp;2020&nbsp;at&nbsp;10:02&nbsp;PM&nbsp;Alex&nbsp;Rousskov&lt;br&gt;<br>
&lt;&lt;a&nbsp;href=&quot;mailto:rousskov@measurement-factory.com&quot;&nbsp;target=&quot;_blank&quot;&nbsp;rel=&quot;noreferrer&quot;&gt;rousskov@measurement-factory.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;On&nbsp;8/3/20&nbsp;9:11&nbsp;AM,&nbsp;Ivan&nbsp;Bulatovic&nbsp;wrote:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;Looks&nbsp;like&nbsp;squid&nbsp;has&nbsp;some&nbsp;serious&nbsp;memory&nbsp;issues&nbsp;when&nbsp;under&nbsp;heavy&nbsp;load&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;(90&nbsp;servers&nbsp;that&nbsp;crawl&nbsp;Internet&nbsp;sites).&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt; &nbsp; &nbsp; &nbsp; &nbsp; Maximum&nbsp;Resident&nbsp;Size:&nbsp;41500720&nbsp;KB&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;If&nbsp;the&nbsp;above&nbsp;(unreliable)&nbsp;report&nbsp;matches&nbsp;your&nbsp;observations&nbsp;using&nbsp;system&lt;br&gt;<br>
&gt;&nbsp;tools&nbsp;like&nbsp;&quot;top&quot;,&nbsp;then&nbsp;it&nbsp;is&nbsp;indeed&nbsp;likely&nbsp;that&nbsp;your&nbsp;Squid&nbsp;is&nbsp;suffering&lt;br&gt;<br>
&gt;&nbsp;from&nbsp;a&nbsp;memory&nbsp;leak&nbsp;--&nbsp;41GB&nbsp;is&nbsp;usually&nbsp;too&nbsp;much&nbsp;for&nbsp;most&nbsp;non-caching&lt;br&gt;<br>
&gt;&nbsp;Squid&nbsp;instances.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Identifying&nbsp;the&nbsp;leak&nbsp;may&nbsp;take&nbsp;some&nbsp;time,&nbsp;and&nbsp;I&nbsp;am&nbsp;not&nbsp;volunteering&nbsp;to&nbsp;do&lt;br&gt;<br>
&gt;&nbsp;the&nbsp;necessary&nbsp;legwork&nbsp;personally,&nbsp;but&nbsp;the&nbsp;Squid&nbsp;Project&nbsp;does&nbsp;fix&lt;br&gt;<br>
&gt;&nbsp;virtually&nbsp;all&nbsp;runtime&nbsp;leaks&nbsp;that&nbsp;we&nbsp;know&nbsp;about.&nbsp;If&nbsp;you&nbsp;want&nbsp;to&nbsp;speed&nbsp;up&lt;br&gt;<br>
&gt;&nbsp;the&nbsp;process,&nbsp;one&nbsp;of&nbsp;the&nbsp;best&nbsp;things&nbsp;you&nbsp;can&nbsp;do&nbsp;is&nbsp;to&nbsp;run&nbsp;Squid&nbsp;under&lt;br&gt;<br>
&gt;&nbsp;valgrind&nbsp;with&nbsp;a&nbsp;good&nbsp;suppression&nbsp;file.&nbsp;This&nbsp;requires&nbsp;building&nbsp;Squid&nbsp;with&lt;br&gt;<br>
&gt;&nbsp;a&nbsp;special&nbsp;./configure&nbsp;option.&nbsp;Several&nbsp;testing&nbsp;iterations&nbsp;may&nbsp;be&lt;br&gt;<br>
&gt;&nbsp;necessary.&nbsp;If&nbsp;you&nbsp;are&nbsp;willing&nbsp;to&nbsp;do&nbsp;this,&nbsp;please&nbsp;file&nbsp;a&nbsp;bug&nbsp;report&nbsp;and&lt;br&gt;<br>
&gt;&nbsp;somebody&nbsp;will&nbsp;guide&nbsp;you&nbsp;through&nbsp;the&nbsp;steps.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;It&nbsp;just&nbsp;eats&nbsp;up&nbsp;memory,&nbsp;and&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;does&nbsp;not&nbsp;free&nbsp;it&nbsp;up&nbsp;even&nbsp;days&nbsp;after&nbsp;it&nbsp;is&nbsp;being&nbsp;used&nbsp;(with&nbsp;no&nbsp;load&nbsp;on&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;the&nbsp;proxy&nbsp;for&nbsp;days).&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Some&nbsp;memory&nbsp;retention&nbsp;is&nbsp;expected&nbsp;by&nbsp;default.&nbsp;See&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;http://www.squid-cache.org/Doc/config/memory_pools/&quot;&nbsp;rel=&quot;noreferrer&nbsp;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.squid-cache.org/Doc/config/memory_pools/&lt;/a&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Unfortunately,&nbsp;AFAICT,&nbsp;your&nbsp;mgr:mem&nbsp;output&nbsp;does&nbsp;not&nbsp;show&nbsp;any&nbsp;obvious&lt;br&gt;<br>
&gt;&nbsp;leaks&nbsp;--&nbsp;all&nbsp;numbers&nbsp;are&nbsp;very&nbsp;small.&nbsp;If&nbsp;something&nbsp;is&nbsp;leaking&nbsp;a&nbsp;lot,&nbsp;then&lt;br&gt;<br>
&gt;&nbsp;it&nbsp;is&nbsp;probably&nbsp;not&nbsp;pooled&nbsp;by&nbsp;Squid.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;HTH,&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Alex.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;On&nbsp;Mon,&nbsp;Jul&nbsp;20,&nbsp;2020&nbsp;at&nbsp;10:46&nbsp;PM&nbsp;Ivan&nbsp;Bulatovic&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;Hi&nbsp;all,&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;configure&nbsp;squid&nbsp;to&nbsp;run&nbsp;as&nbsp;a&nbsp;forward&nbsp;proxy&nbsp;with&nbsp;no&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;caching&nbsp;(cache&nbsp;deny&nbsp;all)&nbsp;with&nbsp;an&nbsp;option&nbsp;to&nbsp;choose&nbsp;the&nbsp;outgoing&nbsp;IP&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;address&nbsp;based&nbsp;on&nbsp;the&nbsp;username.&nbsp;So&nbsp;all&nbsp;squid&nbsp;has&nbsp;to&nbsp;do&nbsp;is&nbsp;to&nbsp;use&nbsp;a&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;certain&nbsp;outgoing&nbsp;IP&nbsp;address&nbsp;for&nbsp;a&nbsp;certain&nbsp;user,&nbsp;return&nbsp;the&nbsp;data&nbsp;from&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;the&nbsp;server&nbsp;to&nbsp;that&nbsp;user&nbsp;and&nbsp;cache&nbsp;nothing.&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;For&nbsp;that&nbsp;I&nbsp;created&nbsp;a&nbsp;special&nbsp;authentication&nbsp;helper&nbsp;and&nbsp;used&nbsp;the&nbsp;ACLs&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;and&nbsp;tcp_outgoing_address&nbsp;to&nbsp;create&nbsp;a&nbsp;lot&nbsp;of&nbsp;users&nbsp;and&nbsp;outgoing&nbsp;IP&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;addresses&nbsp;(about&nbsp;260&nbsp;at&nbsp;the&nbsp;moment).&nbsp;Example&nbsp;(not&nbsp;the&nbsp;real&nbsp;IP&nbsp;I&nbsp;use,&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;of&nbsp;course):&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;acl&nbsp;use_IP1&nbsp;proxy_auth&nbsp;user1&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;tcp_outgoing_address&nbsp;1.2.3.4 &nbsp; use_IP1&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;I&nbsp;also&nbsp;configured&nbsp;the&nbsp;squid&nbsp;to&nbsp;use&nbsp;4&nbsp;workers,&nbsp;but&nbsp;this&nbsp;happens&nbsp;even&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;when&nbsp;I&nbsp;use&nbsp;only&nbsp;one&nbsp;worker&nbsp;(default)&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;And&nbsp;this&nbsp;works.&nbsp;However,&nbsp;under&nbsp;heavy&nbsp;load,&nbsp;Squid&nbsp;eats&nbsp;all&nbsp;of&nbsp;the&nbsp;RAM&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;and&nbsp;then&nbsp;starts&nbsp;going&nbsp;to&nbsp;swap.&nbsp;And&nbsp;the&nbsp;memory&nbsp;usage&nbsp;does&nbsp;not&nbsp;drop&nbsp;when&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;I&nbsp;remove&nbsp;all&nbsp;the&nbsp;load&nbsp;from&nbsp;squid&nbsp;(I&nbsp;shut&nbsp;down&nbsp;all&nbsp;clients).&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;I&nbsp;left&nbsp;it&nbsp;to&nbsp;see&nbsp;if&nbsp;the&nbsp;memory&nbsp;will&nbsp;be&nbsp;freed&nbsp;but&nbsp;even&nbsp;after&nbsp;leaving&nbsp;it&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;for&nbsp;an&nbsp;hour&nbsp;the&nbsp;info&nbsp;page&nbsp;reports&nbsp;this:&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;Cache&nbsp;information&nbsp;for&nbsp;squid:&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; &nbsp; &nbsp; &nbsp; Hits&nbsp;as&nbsp;%&nbsp;of&nbsp;all&nbsp;requests: &nbsp; &nbsp; &nbsp;5min:&nbsp;0.0%,&nbsp;60min:&nbsp;0.0%&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; &nbsp; &nbsp; &nbsp; Hits&nbsp;as&nbsp;%&nbsp;of&nbsp;bytes&nbsp;sent: &nbsp; &nbsp; &nbsp; &nbsp;5min:&nbsp;0.0%,&nbsp;60min:&nbsp;1.1%&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; &nbsp; &nbsp; &nbsp; Memory&nbsp;hits&nbsp;as&nbsp;%&nbsp;of&nbsp;hit&nbsp;requests: &nbsp; &nbsp; &nbsp; 5min:&nbsp;0.0%,&nbsp;60min:&nbsp;0.0%&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; &nbsp; &nbsp; &nbsp; Disk&nbsp;hits&nbsp;as&nbsp;%&nbsp;of&nbsp;hit&nbsp;requests:&nbsp;5min:&nbsp;0.0%,&nbsp;60min:&nbsp;100.0%&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; &nbsp; &nbsp; &nbsp; Storage&nbsp;Swap&nbsp;size: &nbsp; &nbsp; &nbsp;0&nbsp;KB&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; &nbsp; &nbsp; &nbsp; Storage&nbsp;Swap&nbsp;capacity: &nbsp; 0.0%&nbsp;used,&nbsp;100.0%&nbsp;free&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; &nbsp; &nbsp; &nbsp; Storage&nbsp;Mem&nbsp;size: &nbsp; &nbsp; &nbsp; 0&nbsp;KB&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; &nbsp; &nbsp; &nbsp; Storage&nbsp;Mem&nbsp;capacity: &nbsp; &nbsp;0.0%&nbsp;used,&nbsp;100.0%&nbsp;free&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; &nbsp; &nbsp; &nbsp; Mean&nbsp;Object&nbsp;Size: &nbsp; &nbsp; &nbsp; 0.00&nbsp;KB&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; &nbsp; &nbsp; &nbsp; Requests&nbsp;given&nbsp;to&nbsp;unlinkd: &nbsp; &nbsp; &nbsp;0&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;Resource&nbsp;usage&nbsp;for&nbsp;squid:&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; &nbsp; &nbsp; &nbsp; UP&nbsp;Time: &nbsp; &nbsp; &nbsp; &nbsp;255334.875&nbsp;seconds&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; &nbsp; &nbsp; &nbsp; CPU&nbsp;Time: &nbsp; &nbsp; &nbsp; 7122.436&nbsp;seconds&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; &nbsp; &nbsp; &nbsp; CPU&nbsp;Usage: &nbsp; &nbsp; &nbsp;2.79%&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; &nbsp; &nbsp; &nbsp; CPU&nbsp;Usage,&nbsp;5&nbsp;minute&nbsp;avg: &nbsp; &nbsp; &nbsp; &nbsp;0.05%&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; &nbsp; &nbsp; &nbsp; CPU&nbsp;Usage,&nbsp;60&nbsp;minute&nbsp;avg: &nbsp; &nbsp; &nbsp; 37.66%&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; &nbsp; &nbsp; &nbsp; Maximum&nbsp;Resident&nbsp;Size:&nbsp;41500720&nbsp;KB&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; &nbsp; &nbsp; &nbsp; Page&nbsp;faults&nbsp;with&nbsp;physical&nbsp;i/o:&nbsp;1003410&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;And&nbsp;here&nbsp;is&nbsp;the&nbsp;listing&nbsp;of&nbsp;free&nbsp;and&nbsp;top&nbsp;commands&nbsp;(with&nbsp;no&nbsp;load&nbsp;on&nbsp;the&nbsp;server):&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;#&nbsp;free&nbsp;-h&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; total &nbsp; &nbsp; &nbsp; &nbsp;used &nbsp; &nbsp; &nbsp; &nbsp;free &nbsp; &nbsp; &nbsp;shared &nbsp;buff/cache &nbsp; available&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;Mem: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;11G &nbsp; &nbsp; &nbsp; &nbsp; 10G &nbsp; &nbsp; &nbsp; &nbsp;791M &nbsp; &nbsp; &nbsp; &nbsp;676K &nbsp; &nbsp; &nbsp; &nbsp;491M &nbsp; &nbsp; &nbsp; &nbsp;1.0G&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;Swap: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 11G &nbsp; &nbsp; &nbsp; &nbsp;5.5G &nbsp; &nbsp; &nbsp; &nbsp;6.5G&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;#&nbsp;top&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;top&nbsp;-&nbsp;14:12:32&nbsp;up&nbsp;3&nbsp;days, &nbsp;1:30, &nbsp;1&nbsp;user, &nbsp;load&nbsp;average:&nbsp;0.00,&nbsp;0.00,&nbsp;0.00&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;Tasks:&nbsp;177&nbsp;total, &nbsp; 1&nbsp;running,&nbsp;102&nbsp;sleeping, &nbsp; 0&nbsp;stopped, &nbsp; 0&nbsp;zombie&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;%Cpu0 &nbsp;: &nbsp;0.0&nbsp;us, &nbsp;0.0&nbsp;sy, &nbsp;0.0&nbsp;ni,100.0&nbsp;id, &nbsp;0.0&nbsp;wa, &nbsp;0.0&nbsp;hi, &nbsp;0.0&nbsp;si, &nbsp;0.0&nbsp;st&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;%Cpu1 &nbsp;: &nbsp;0.0&nbsp;us, &nbsp;0.0&nbsp;sy, &nbsp;0.0&nbsp;ni,100.0&nbsp;id, &nbsp;0.0&nbsp;wa, &nbsp;0.0&nbsp;hi, &nbsp;0.0&nbsp;si, &nbsp;0.0&nbsp;st&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;%Cpu2 &nbsp;: &nbsp;0.0&nbsp;us, &nbsp;0.3&nbsp;sy, &nbsp;0.0&nbsp;ni,&nbsp;99.7&nbsp;id, &nbsp;0.0&nbsp;wa, &nbsp;0.0&nbsp;hi, &nbsp;0.0&nbsp;si, &nbsp;0.0&nbsp;st&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;%Cpu3 &nbsp;: &nbsp;0.0&nbsp;us, &nbsp;0.0&nbsp;sy, &nbsp;0.0&nbsp;ni,100.0&nbsp;id, &nbsp;0.0&nbsp;wa, &nbsp;0.0&nbsp;hi, &nbsp;0.0&nbsp;si, &nbsp;0.0&nbsp;st&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;%Cpu4 &nbsp;: &nbsp;0.0&nbsp;us, &nbsp;0.0&nbsp;sy, &nbsp;0.0&nbsp;ni,100.0&nbsp;id, &nbsp;0.0&nbsp;wa, &nbsp;0.0&nbsp;hi, &nbsp;0.0&nbsp;si, &nbsp;0.0&nbsp;st&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;%Cpu5 &nbsp;: &nbsp;0.0&nbsp;us, &nbsp;0.0&nbsp;sy, &nbsp;0.0&nbsp;ni,100.0&nbsp;id, &nbsp;0.0&nbsp;wa, &nbsp;0.0&nbsp;hi, &nbsp;0.0&nbsp;si, &nbsp;0.0&nbsp;st&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;%Cpu6 &nbsp;: &nbsp;0.0&nbsp;us, &nbsp;0.0&nbsp;sy, &nbsp;0.0&nbsp;ni,100.0&nbsp;id, &nbsp;0.0&nbsp;wa, &nbsp;0.0&nbsp;hi, &nbsp;0.0&nbsp;si, &nbsp;0.0&nbsp;st&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;%Cpu7 &nbsp;: &nbsp;0.0&nbsp;us, &nbsp;0.0&nbsp;sy, &nbsp;0.0&nbsp;ni,100.0&nbsp;id, &nbsp;0.0&nbsp;wa, &nbsp;0.0&nbsp;hi, &nbsp;0.0&nbsp;si, &nbsp;0.0&nbsp;st&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;KiB&nbsp;Mem&nbsp;:&nbsp;91.2/12251688&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;[|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; &nbsp; &nbsp; &nbsp; ]&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;KiB&nbsp;Swap:&nbsp;45.8/12582904&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;[||||||||||||||||||||||||||||||||||||||||||||||&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ]&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; &nbsp;PID&nbsp;USER &nbsp; &nbsp; &nbsp;PR &nbsp;NI &nbsp; &nbsp;VIRT &nbsp; &nbsp;RES &nbsp; &nbsp;SHR&nbsp;S &nbsp;%CPU&nbsp;%MEM &nbsp; &nbsp; TIME+&nbsp;COMMAND&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; 7851&nbsp;proxy &nbsp; &nbsp; 20 &nbsp; 0&nbsp;6946872&nbsp;2.514g &nbsp; 8084&nbsp;S &nbsp; 0.0&nbsp;21.5 &nbsp;29:43.74&nbsp;squid&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; 7832&nbsp;proxy &nbsp; &nbsp; 20 &nbsp; 0&nbsp;6711480&nbsp;2.464g &nbsp; 8040&nbsp;S &nbsp; 0.0&nbsp;21.1 &nbsp;29:58.17&nbsp;squid&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; 7814&nbsp;proxy &nbsp; &nbsp; 20 &nbsp; 0&nbsp;6834928&nbsp;2.454g &nbsp;10024&nbsp;S &nbsp; 0.0&nbsp;21.0 &nbsp;29:47.56&nbsp;squid&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; 7843&nbsp;proxy &nbsp; &nbsp; 20 &nbsp; 0&nbsp;6906252&nbsp;2.436g &nbsp; 8208&nbsp;S &nbsp; 0.0&nbsp;20.8 &nbsp;29:15.60&nbsp;squid&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; 1329&nbsp;root &nbsp; &nbsp; &nbsp;20 &nbsp; 0&nbsp;2416672&nbsp;167272 &nbsp;12680&nbsp;S &nbsp; 0.0 &nbsp;1.4&nbsp;136:18.57&nbsp;metricbeat&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; 1321&nbsp;root &nbsp; &nbsp; &nbsp;20 &nbsp; 0&nbsp;1831804 &nbsp;48364 &nbsp;11648&nbsp;S &nbsp; 0.0 &nbsp;0.4 &nbsp;14:32.10&nbsp;filebeat&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; &nbsp;474&nbsp;root &nbsp; &nbsp; &nbsp;19 &nbsp;-1 &nbsp;127796 &nbsp;17576 &nbsp;17144&nbsp;S &nbsp; 0.0 &nbsp;0.1 &nbsp; 0:27.01&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;systemd-journal&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; 7811&nbsp;proxy &nbsp; &nbsp; 20 &nbsp; 0 &nbsp;549384 &nbsp;14168 &nbsp; 8372&nbsp;S &nbsp; 0.0 &nbsp;0.1 &nbsp; 0:20.87&nbsp;squid&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; 1166&nbsp;root &nbsp; &nbsp; &nbsp;20 &nbsp; 0&nbsp;1749724 &nbsp;10596 &nbsp; 4468&nbsp;S &nbsp; 0.0 &nbsp;0.1 &nbsp; 0:31.83&nbsp;snapd&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp;43940&nbsp;proxy &nbsp; &nbsp; 20 &nbsp; 0 &nbsp; 28884 &nbsp; 9608 &nbsp; 5384&nbsp;S &nbsp; 0.0 &nbsp;0.1 &nbsp; 0:00.14&nbsp;python3&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp;43941&nbsp;proxy &nbsp; &nbsp; 20 &nbsp; 0 &nbsp; 28884 &nbsp; 9552 &nbsp; 5328&nbsp;S &nbsp; 0.0 &nbsp;0.1 &nbsp; 0:00.10&nbsp;python3&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp;43939&nbsp;proxy &nbsp; &nbsp; 20 &nbsp; 0 &nbsp; 28884 &nbsp; 9524 &nbsp; 5308&nbsp;S &nbsp; 0.0 &nbsp;0.1 &nbsp; 0:00.12&nbsp;python3&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp;43938&nbsp;proxy &nbsp; &nbsp; 20 &nbsp; 0 &nbsp; 28884 &nbsp; 9452 &nbsp; 5232&nbsp;S &nbsp; 0.0 &nbsp;0.1 &nbsp; 0:00.16&nbsp;python3&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp;48848&nbsp;root &nbsp; &nbsp; &nbsp;20 &nbsp; 0 &nbsp;105688 &nbsp; 6960 &nbsp; 5968&nbsp;S &nbsp; 0.0 &nbsp;0.1 &nbsp; 0:00.02&nbsp;sshd&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp;48974&nbsp;janitor &nbsp; 20 &nbsp; 0 &nbsp;108120 &nbsp; 5380 &nbsp; 4372&nbsp;S &nbsp; 0.0 &nbsp;0.0 &nbsp; 0:00.00&nbsp;sshd&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt; &nbsp; &nbsp; &nbsp;1&nbsp;root &nbsp; &nbsp; &nbsp;20 &nbsp; 0 &nbsp; 86360 &nbsp; 4364 &nbsp; 2488&nbsp;S &nbsp; 0.0 &nbsp;0.0 &nbsp;32:46.22&nbsp;systemd&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;...&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;...&nbsp;lines&nbsp;ommited&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;...&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;In&nbsp;the&nbsp;attachment&nbsp;you&nbsp;can&nbsp;find&nbsp;the&nbsp;printout&nbsp;from&nbsp;squidclient&nbsp;mgr:info&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;and&nbsp;squidclient&nbsp;mgr:mem.&nbsp;These&nbsp;are&nbsp;both&nbsp;taken&nbsp;at&nbsp;the&nbsp;moment&nbsp;when&nbsp;there&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;is&nbsp;no&nbsp;more&nbsp;load&nbsp;on&nbsp;the&nbsp;proxy.&nbsp;I&nbsp;also&nbsp;included&nbsp;my&nbsp;squid.conf&nbsp;file&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;(minus&nbsp;the&nbsp;two&nbsp;files&nbsp;where&nbsp;acls&nbsp;are&nbsp;defined&nbsp;and&nbsp;outgoing&nbsp;IP&nbsp;addresses,&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;these&nbsp;two&nbsp;contain&nbsp;only&nbsp;acl&nbsp;and&nbsp;tcp_outgoing_address&nbsp;lines&nbsp;as&nbsp;in&nbsp;the&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;example&nbsp;above).&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;Machine&nbsp;info:&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;OS:&nbsp;Ubuntu&nbsp;18.04&nbsp;with&nbsp;latest&nbsp;updates&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;Squid&nbsp;version&nbsp;4.12&nbsp;(from&nbsp;diladele&nbsp;repository)&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;Hardware:&nbsp;Hyper-V&nbsp;virtual&nbsp;machine&nbsp;with&nbsp;8&nbsp;vCPU,&nbsp;12GB&nbsp;of&nbsp;RAM&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;I&nbsp;can&nbsp;not&nbsp;understand&nbsp;what&nbsp;is&nbsp;eating&nbsp;all&nbsp;of&nbsp;the&nbsp;memory,&nbsp;if&nbsp;I&nbsp;disabled&nbsp;the&nbsp;cache.&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;Maybe&nbsp;I&nbsp;configured&nbsp;something&nbsp;wrong&nbsp;but&nbsp;I&nbsp;can&nbsp;not&nbsp;find&nbsp;what.&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;Thank&nbsp;you&nbsp;for&nbsp;any&nbsp;help&nbsp;you&nbsp;can&nbsp;provide.&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;Best&nbsp;regards,&lt;br&gt;<br>
&gt;&nbsp;&gt;&gt;&nbsp;Ivan&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&nbsp;rel=&quot;noreferrer&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&nbsp;&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&nbsp;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&nbsp;rel=&quot;noreferrer&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&nbsp;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
