<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Thank&nbsp;you,&nbsp;Amos,&nbsp;for&nbsp;the&nbsp;clarification.&lt;br&gt;After&nbsp;making&nbsp;time&nbsp;for&nbsp;me&nbsp;to&nbsp;test&nbsp;some&nbsp;more&nbsp;with&nbsp;fast&nbsp;acl&#39;s&nbsp;I&nbsp;noticed&nbsp;that&nbsp;it&nbsp;still&nbsp;didn&#39;t&nbsp;work.&nbsp;So&nbsp;after&nbsp;some&nbsp;more&nbsp;research&nbsp;I&nbsp;found&nbsp;out&nbsp;that&nbsp;the&nbsp;problem&nbsp;is&nbsp;already&nbsp;reported&nbsp;as&nbsp;&quot;Bug&nbsp;4913&nbsp;-&nbsp;Delay&nbsp;Pools&nbsp;don&#39;t&nbsp;work&nbsp;for&nbsp;Tunneled&nbsp;traffic&quot;&nbsp;which&nbsp;is&nbsp;exactly&nbsp;the&nbsp;problem&nbsp;I&nbsp;was&nbsp;having.&nbsp;HTTP&nbsp;traffic&nbsp;is&nbsp;correctly&nbsp;limited&nbsp;in&nbsp;my&nbsp;tests.&lt;br&gt;For&nbsp;the&nbsp;time&nbsp;being&nbsp;I&nbsp;will&nbsp;see&nbsp;if&nbsp;I&nbsp;can&nbsp;limit&nbsp;it&nbsp;in&nbsp;another&nbsp;way&nbsp;until&nbsp;I&nbsp;can&nbsp;fix&nbsp;it.&lt;br&gt;&lt;br&gt;Best&nbsp;regards&lt;br&gt;Gabriel&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;El&nbsp;mar.,&nbsp;28&nbsp;de&nbsp;jul.&nbsp;de&nbsp;2020&nbsp;a&nbsp;la(s)&nbsp;10:26,&nbsp;Amos&nbsp;Jeffries&nbsp;(&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;)&nbsp;escribió:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;On&nbsp;28/07/20&nbsp;8:41&nbsp;am,&nbsp;Service&nbsp;MV&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;Hi&nbsp;everybody!&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;read&nbsp;in&nbsp;the&nbsp;squid&nbsp;mailing&nbsp;lists&nbsp;that&nbsp;delay_pools&nbsp;doesn&#39;t&nbsp;work&nbsp;in&nbsp;v4.x,&lt;br&gt;<br>
&gt;&nbsp;but&nbsp;in&nbsp;the&nbsp;documentation&nbsp;I&nbsp;don&#39;t&nbsp;see&nbsp;anything&nbsp;about&nbsp;it.&lt;br&gt;<br>
&lt;br&gt;<br>
*&nbsp;Delay&nbsp;pools&nbsp;is&nbsp;a&nbsp;fairly&nbsp;major&nbsp;feature.&lt;br&gt;<br>
&lt;br&gt;<br>
*&nbsp;&quot;Dont&nbsp;work&quot;&nbsp;is&nbsp;a&nbsp;very&nbsp;vague&nbsp;claim.&lt;br&gt;<br>
&lt;br&gt;<br>
*&nbsp;mailing&nbsp;list&nbsp;threads&nbsp;are&nbsp;typically&nbsp;started&nbsp;by&nbsp;people&nbsp;who&nbsp;don&#39;t&nbsp;know&lt;br&gt;<br>
how&nbsp;to&nbsp;use&nbsp;a&nbsp;feature&nbsp;properly&nbsp;and&nbsp;having&nbsp;trouble&nbsp;because&nbsp;of&nbsp;that&lt;br&gt;<br>
misunderstanding.&lt;br&gt;<br>
&lt;br&gt;<br>
*&nbsp;4.x&nbsp;is&nbsp;an&nbsp;entire&nbsp;series&nbsp;of&nbsp;releases&nbsp;with&nbsp;many&nbsp;bug&nbsp;fixes&nbsp;across&nbsp;the&lt;br&gt;<br>
(ongoing)&nbsp;year(s)&nbsp;long&nbsp;lifecycle.&lt;br&gt;<br>
&lt;br&gt;<br>
Draw&nbsp;your&nbsp;own&nbsp;conclusion&nbsp;about&nbsp;the&nbsp;accuracy&nbsp;of&nbsp;such&nbsp;statement&nbsp;on&nbsp;the&lt;br&gt;<br>
mailing&nbsp;list.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;know&nbsp;if&nbsp;in&nbsp;my&nbsp;SQUID&nbsp;4.11&nbsp;configuration&nbsp;with&nbsp;Kerberos&nbsp;+&lt;br&gt;<br>
&gt;&nbsp;LDAP&nbsp;authentication&nbsp;I&nbsp;can&nbsp;setup&nbsp;a&nbsp;delay_pools&nbsp;to&nbsp;limit&nbsp;large&nbsp;downloads&lt;br&gt;<br>
&gt;&nbsp;of&nbsp;any&nbsp;authenticated&nbsp;user.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
Yes.&nbsp;That&nbsp;should&nbsp;be&nbsp;entirely&nbsp;possible.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;This&nbsp;is&nbsp;my&nbsp;test&nbsp;configuration&nbsp;that&nbsp;I&nbsp;try&nbsp;to&nbsp;do,&nbsp;but&nbsp;I&nbsp;cannot&nbsp;limit&nbsp;the&lt;br&gt;<br>
&gt;&nbsp;downloads.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;squid.conf&lt;br&gt;<br>
...&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;auth&nbsp;proxy_auth&nbsp;REQUIRED&lt;br&gt;<br>
&gt;&nbsp;delay_pools&nbsp;1&lt;br&gt;<br>
&gt;&nbsp;delay_class&nbsp;1&nbsp;2&lt;br&gt;<br>
&gt;&nbsp;delay_parameters&nbsp;1&nbsp;64000/64000&nbsp;64000/64000&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;delay_access&nbsp;1&nbsp;allow&nbsp;auth&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;first&nbsp;problem&nbsp;is&nbsp;here.&nbsp;proxy_auth&nbsp;ACL&nbsp;is&nbsp;a&nbsp;&quot;slow&quot;&nbsp;type&nbsp;and&lt;br&gt;<br>
delay_access&nbsp;only&nbsp;supports&nbsp;&quot;fast&quot;&nbsp;types.&lt;br&gt;<br>
&lt;br&gt;<br>
Squid-4&nbsp;provides&nbsp;transaction&nbsp;annotations&nbsp;feature&nbsp;that&nbsp;can&nbsp;bridge&nbsp;this&lt;br&gt;<br>
gap.&nbsp;It&nbsp;is&nbsp;a&nbsp;fast&nbsp;type&nbsp;ACL&nbsp;that&nbsp;checks&nbsp;for&nbsp;annotations&nbsp;set&nbsp;by&nbsp;helper&lt;br&gt;<br>
lookups&nbsp;etc.&lt;br&gt;<br>
&lt;br&gt;<br>
 &nbsp;acl&nbsp;hasUsername&nbsp;note&nbsp;user&lt;br&gt;<br>
 &nbsp;delay_access&nbsp;1&nbsp;allow&nbsp;hasUser&lt;br&gt;<br>
 &nbsp;delay_access&nbsp;1&nbsp;deny&nbsp;all&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;http_access&nbsp;allow&nbsp;auth&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;should&nbsp;be&nbsp;down&nbsp;just&nbsp;above&nbsp;the&nbsp;&quot;http_access&nbsp;deny&nbsp;all&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;SSL_ports&nbsp;port&nbsp;443&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;Safe_ports&nbsp;port&nbsp;80&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;CONNECT&nbsp;method&nbsp;CONNECT&lt;br&gt;<br>
&gt;&nbsp;http_access&nbsp;deny&nbsp;!Safe_ports&lt;br&gt;<br>
&gt;&nbsp;http_access&nbsp;deny&nbsp;CONNECT&nbsp;!SSL_ports&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;http_access&nbsp;deny&nbsp;all&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
Amos&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
