<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;div&nbsp;class=&quot;yahoo-style-wrap&quot;&nbsp;style=&quot;font-family:Helvetica&nbsp;Neue,&nbsp;Helvetica,&nbsp;Arial,&nbsp;sans-serif;font-size:13px;&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;data-setdir=&quot;false&quot;&gt;Eeehhhh,&nbsp;you&nbsp;were&nbsp;right.&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;data-setdir=&quot;false&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;data-setdir=&quot;false&quot;&gt;It&nbsp;was&nbsp;a&nbsp;configuration&nbsp;directive.&nbsp;Even&nbsp;though&nbsp;putting&nbsp;'http_access&nbsp;deny&nbsp;all'&nbsp;didn't&nbsp;fix&nbsp;the&nbsp;issue,&nbsp;I&nbsp;was&nbsp;able&nbsp;to&nbsp;make&nbsp;the&nbsp;loop&nbsp;run&nbsp;by&nbsp;commenting&nbsp;out&nbsp;the&nbsp;following&nbsp;configuration&nbsp;directives:&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;data-setdir=&quot;false&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;data-setdir=&quot;false&quot;&gt;&lt;div&gt;acl&nbsp;authenticated&nbsp;proxy_auth&nbsp;REQUIRED&lt;br&gt;http_access&nbsp;allow&nbsp;authenticated&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;data-setdir=&quot;false&quot;&gt;Completely&nbsp;didn't&nbsp;realize&nbsp;they&nbsp;were&nbsp;preventing&nbsp;Squid&nbsp;from&nbsp;passing&nbsp;input&nbsp;into&nbsp;the&nbsp;script.&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;data-setdir=&quot;false&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;data-setdir=&quot;false&quot;&gt;Thanks&nbsp;Alex!&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;data-setdir=&quot;false&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;data-setdir=&quot;false&quot;&gt;Adrian&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;id=&quot;yahoo_quoted_1360197551&quot;&nbsp;class=&quot;yahoo_quoted&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;style=&quot;font-family:'Helvetica&nbsp;Neue',&nbsp;Helvetica,&nbsp;Arial,&nbsp;sans-serif;font-size:13px;color:#26282a;&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;Saturday,&nbsp;September&nbsp;26,&nbsp;2020,&nbsp;10:17:53&nbsp;AM&nbsp;CDT,&nbsp;Alex&nbsp;Rousskov&nbsp;&lt;rousskov@measurement-factory.com&gt;&nbsp;wrote:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;On&nbsp;9/25/20&nbsp;4:28&nbsp;PM,&nbsp;Ajb&nbsp;B&nbsp;wrote:&lt;div&nbsp;class=&quot;yqt3060622981&quot;&nbsp;id=&quot;yqtfd94481&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;So&nbsp;I&nbsp;have&nbsp;a&nbsp;external_acl_type&nbsp;helper&nbsp;script&nbsp;and&nbsp;it's&nbsp;not&nbsp;reading&nbsp;input&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;from&nbsp;Squid.&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;Here&nbsp;it&nbsp;is:&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;redis-cli&nbsp;HSET&nbsp;'test'&nbsp;data&nbsp;'SCRIPT&nbsp;DID&nbsp;RUN'&nbsp;&gt;/dev/null&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;while&nbsp;read&nbsp;-s&nbsp;line;&nbsp;do&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;redis-cli&nbsp;HSET&nbsp;'test'&nbsp;data&nbsp;'LOOP&nbsp;STARTED&nbsp;'&nbsp;&gt;/dev/null&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&nbsp;&nbsp;printf&nbsp;'%s\n'&nbsp;'OK'&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;done&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;And&nbsp;here&nbsp;are&nbsp;my&nbsp;Squid&nbsp;configuration&nbsp;directives:&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;external_acl_type&nbsp;ex_parent_proxy&nbsp;%LOGIN&nbsp;/etc/squid/squid-access-control.sh&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;parent_proxy_1&nbsp;external&nbsp;ex_parent_proxy&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;http_access&nbsp;allow&nbsp;parent_proxy_1&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;When&nbsp;I&nbsp;test&nbsp;it&nbsp;out,&nbsp;the&nbsp;'SCRIPT&nbsp;DID&nbsp;RUN'&nbsp;value&nbsp;does&nbsp;get&nbsp;set&nbsp;in&nbsp;the&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;database.&nbsp;However,&nbsp;'LOOP&nbsp;STARTED'&nbsp;does&nbsp;not.&nbsp;Any&nbsp;idea&nbsp;why?&lt;/div&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;Perhaps&nbsp;access&nbsp;is&nbsp;granted&nbsp;(or&nbsp;denied)&nbsp;by&nbsp;an&nbsp;earlier&nbsp;http_access&nbsp;rule?&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;If&nbsp;no&nbsp;test&nbsp;transactions&nbsp;are&nbsp;currently&nbsp;denied,&nbsp;then,&nbsp;to&nbsp;test&nbsp;the&nbsp;above&lt;br&nbsp;clear=&quot;none&quot;&gt;theory,&nbsp;you&nbsp;can&nbsp;add&nbsp;an&nbsp;&quot;http_access&nbsp;deny&nbsp;all&quot;&nbsp;rule&nbsp;immediately&lt;br&nbsp;clear=&quot;none&quot;&gt;before/above&nbsp;your&nbsp;&quot;http_access&nbsp;allow&nbsp;parent_proxy_1&quot;&nbsp;rule&nbsp;and&nbsp;see&lt;br&nbsp;clear=&quot;none&quot;&gt;whether&nbsp;Squid&nbsp;starts&nbsp;denying&nbsp;any&nbsp;test&nbsp;transactions.&nbsp;If&nbsp;it&nbsp;does&nbsp;not,&nbsp;the&lt;br&nbsp;clear=&quot;none&quot;&gt;theory&nbsp;is&nbsp;probably&nbsp;correct.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;Alex.&lt;div&nbsp;class=&quot;yqt3060622981&quot;&nbsp;id=&quot;yqtfd96959&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
