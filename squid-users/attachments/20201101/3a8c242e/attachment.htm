<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Thanks&nbsp;Amos!&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;updated&nbsp;&quot;auth_param&nbsp;basic&nbsp;credentialsttl&quot;&nbsp;according&nbsp;to&nbsp;your&nbsp;advice&nbsp;and&nbsp;it&nbsp;is&nbsp;working&nbsp;great.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;still&nbsp;having&nbsp;issues&nbsp;with&nbsp;the&nbsp;&quot;&lt;span&nbsp;style=&quot;color:rgb(80,0,80)&quot;&gt;tcp_outgoing_address&nbsp;192.168.8.12&nbsp;acl_for_user3002&quot;&nbsp;part,&nbsp;you&nbsp;mentioned:&lt;/span&gt;&lt;/div&gt;&gt;&nbsp;For&nbsp;ACLs&nbsp;with&nbsp;values&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;change&nbsp;often&nbsp;it&nbsp;is&nbsp;best&nbsp;to&nbsp;use&lt;br&gt;&gt;&nbsp;an&nbsp;external_acl_type&nbsp;helper&nbsp;that&nbsp;manages&nbsp;the&nbsp;updates&nbsp;or&nbsp;fetches&nbsp;from&lt;br&gt;&gt;&nbsp;somewhere&nbsp;the&nbsp;updates&nbsp;are&nbsp;handled&nbsp;without&nbsp;a&nbsp;reload.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;script&nbsp;updates&nbsp;the&nbsp;authenticator successfully,&nbsp;but&nbsp;when&nbsp;I&nbsp;update&nbsp;&quot;&lt;span&nbsp;style=&quot;color:rgb(80,0,80)&quot;&gt;acl&nbsp;acl_for_user3002&nbsp;proxy_auth&nbsp;user2&quot;&nbsp;to&nbsp;the&nbsp;new&nbsp;username&nbsp;I&nbsp;have&nbsp;to&nbsp;reconfigure&nbsp;to&nbsp;take&nbsp;effect.&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;read&nbsp;online&nbsp;for&nbsp;hours&nbsp;but&nbsp;to&nbsp;my&nbsp;best&nbsp;understanding&nbsp;external_acl_type&nbsp;are&nbsp;for&nbsp;auth&nbsp;and&nbsp;access&nbsp;control,&nbsp;but&nbsp;they&nbsp;don&#39;t&nbsp;work&nbsp;for&nbsp;my&nbsp;needs&nbsp;I&nbsp;believe.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Is&nbsp;there&nbsp;any&nbsp;way&nbsp;to&nbsp;use external_acl_type&nbsp;in&nbsp;a&nbsp;way&nbsp;I&nbsp;don&#39;t&nbsp;understand&nbsp;to&nbsp;solve&nbsp;this&nbsp;problem?&nbsp;Do&nbsp;I&nbsp;have&nbsp;to&nbsp;reconfigure&nbsp;every&nbsp;time I&nbsp;make&nbsp;changes&nbsp;to&nbsp;an&nbsp;ACL&nbsp;in&nbsp;squid.conf?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;again&nbsp;for&nbsp;your&nbsp;help.&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Sat,&nbsp;Oct&nbsp;31,&nbsp;2020&nbsp;at&nbsp;5:48&nbsp;PM&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;On&nbsp;31/10/20&nbsp;1:34&nbsp;pm,&nbsp;roee&nbsp;klinger&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;﻿&lt;br&gt;<br>
&gt;&nbsp;Hey,&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;have&nbsp;Squid&nbsp;configured&nbsp;to&nbsp;send&nbsp;users&nbsp;to&nbsp;different&nbsp;outgoing&nbsp;interface&nbsp;like&nbsp;so:&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;..&lt;br&gt;<br>
&gt;&nbsp;auth_param&nbsp;basic&nbsp;program&nbsp;/usr/lib/squid/basic_ncsa_auth&nbsp;/etc/squid/htpassword&lt;br&gt;<br>
&gt;&nbsp;acl&nbsp;acl_for_user3002&nbsp;proxy_auth&nbsp;user2&lt;br&gt;<br>
&gt;&nbsp;tcp_outgoing_address&nbsp;192.168.8.12&nbsp;acl_for_user3002&lt;br&gt;<br>
&gt;&nbsp;http_port&nbsp;3002&nbsp;name=3002&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
No&nbsp;need&nbsp;to&nbsp;name&nbsp;a&nbsp;*_port&nbsp;like&nbsp;this.&nbsp;The&nbsp;default&nbsp;name&nbsp;is&nbsp;the&nbsp;first&nbsp;&lt;br&gt;<br>
parameter&nbsp;string&nbsp;(&quot;3002&quot;&nbsp;on&nbsp;this&nbsp;line).&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;http_access&nbsp;allow&nbsp;authenticated&lt;br&gt;<br>
&gt;&nbsp;..&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;When&nbsp;I&nbsp;wanted&nbsp;to&nbsp;change&nbsp;the&nbsp;username:password&nbsp;for&nbsp;user2,&nbsp;I&nbsp;run&nbsp;a&nbsp;bash&nbsp;script&nbsp;to&nbsp;change&nbsp;it&nbsp;in&nbsp;squid.conf&nbsp;and&nbsp;also&nbsp;in&nbsp;htpassword&nbsp;and&nbsp;then&nbsp;I&nbsp;run&nbsp;&quot;squid&nbsp;-k&nbsp;reconfigure&quot;,&nbsp;if&nbsp;I&nbsp;don&#39;t&nbsp;reconfigure&nbsp;the&nbsp;old&nbsp;user&nbsp;still&nbsp;has&nbsp;access&nbsp;to&nbsp;the&nbsp;proxy&nbsp;and&nbsp;the&nbsp;new&nbsp;one&nbsp;doesn&#39;t&nbsp;for&nbsp;about&nbsp;30&nbsp;minutes.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
No&nbsp;need&nbsp;to&nbsp;restart&nbsp;for&nbsp;that&nbsp;change.&nbsp;The&nbsp;helper&nbsp;you&nbsp;have&nbsp;there&nbsp;will&nbsp;&lt;br&gt;<br>
automatically&nbsp;detect&nbsp;changes&nbsp;to&nbsp;the&nbsp;htpassword&nbsp;file&nbsp;and&nbsp;reload&nbsp;it.&lt;br&gt;<br>
&lt;br&gt;<br>
It&nbsp;is&nbsp;a&nbsp;little&nbsp;odd&nbsp;that&nbsp;the&nbsp;new&nbsp;user&nbsp;was&nbsp;not&nbsp;able&nbsp;to&nbsp;authenticate.&nbsp;Check&nbsp;&lt;br&gt;<br>
that&nbsp;your&nbsp;test&nbsp;did&nbsp;not&nbsp;lookup&nbsp;and&nbsp;cache&nbsp;a&nbsp;non-existence&nbsp;result&nbsp;for&nbsp;them&nbsp;&lt;br&gt;<br>
prior&nbsp;to&nbsp;being&nbsp;added.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;delay&nbsp;is&nbsp;due&nbsp;to&nbsp;the&nbsp;credentials&nbsp;being&nbsp;valid&nbsp;for&nbsp;a&nbsp;period&nbsp;of&nbsp;time.&nbsp;To&nbsp;&lt;br&gt;<br>
reduce&nbsp;workload&nbsp;on&nbsp;the&nbsp;auth&nbsp;system&nbsp;Squid&nbsp;caches&nbsp;credential&nbsp;details&nbsp;for&nbsp;a&nbsp;&lt;br&gt;<br>
while.&lt;br&gt;<br>
&lt;br&gt;<br>
Set&nbsp;&quot;auth_param&nbsp;basic&nbsp;credentialsttl&nbsp;&quot;&nbsp;to&nbsp;shorter&nbsp;values&nbsp;to&nbsp;reduce&nbsp;the&nbsp;&lt;br&gt;<br>
delay&nbsp;(default&nbsp;is&nbsp;2hrs).&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;am&nbsp;expecting&nbsp;to&nbsp;have&nbsp;100s&nbsp;of&nbsp;users&nbsp;soon&nbsp;that&nbsp;will&nbsp;change&nbsp;credentials&nbsp;often,&nbsp;and&nbsp;also&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;blacklist&nbsp;websites&nbsp;often&nbsp;and&nbsp;on&nbsp;the&nbsp;fly,&nbsp;so&nbsp;I&nbsp;was&nbsp;searching&nbsp;for&nbsp;a&nbsp;better&nbsp;way&nbsp;to&nbsp;manage&nbsp;this&nbsp;without&nbsp;reconfiguring&nbsp;every&nbsp;time,&nbsp;since&nbsp;sometimes&nbsp;a&nbsp;reconfigure&nbsp;can&nbsp;take&nbsp;up&nbsp;to&nbsp;10-15&nbsp;seconds.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;helper&nbsp;does&nbsp;not&nbsp;need&nbsp;a&nbsp;reconfigure&nbsp;at&nbsp;all&nbsp;as&nbsp;far&nbsp;as&nbsp;I&nbsp;can&nbsp;tell&nbsp;from&nbsp;&lt;br&gt;<br>
the&nbsp;code.&lt;br&gt;<br>
&lt;br&gt;<br>
All&nbsp;the&nbsp;reconfigure&nbsp;was&nbsp;doing&nbsp;for&nbsp;you&nbsp;previously&nbsp;was&nbsp;triggering&nbsp;an&nbsp;early&nbsp;&lt;br&gt;<br>
prune&nbsp;of&nbsp;the&nbsp;records&nbsp;in&nbsp;the&nbsp;credentials&nbsp;cache.&nbsp;Probably&nbsp;why&nbsp;you&nbsp;saw&nbsp;&lt;br&gt;<br>
about&nbsp;30min&nbsp;delay&nbsp;instead&nbsp;of&nbsp;about&nbsp;2hrs.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;am&nbsp;new&nbsp;to&nbsp;Squid&nbsp;and&nbsp;wasn&#39;t&nbsp;able&nbsp;to&nbsp;find&nbsp;any&nbsp;info&nbsp;on&nbsp;this,&nbsp;am&nbsp;I&nbsp;doing&nbsp;this&nbsp;currently&nbsp;or&nbsp;there&nbsp;is&nbsp;a&nbsp;better&nbsp;way&nbsp;to&nbsp;change&nbsp;users/ACLs&nbsp;on&nbsp;the&nbsp;fly&nbsp;without&nbsp;reloading&nbsp;Squid?&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
Config&nbsp;changes&nbsp;in&nbsp;squid.conf&nbsp;itself&nbsp;needs&nbsp;a&nbsp;reconfigure&nbsp;or&nbsp;sometimes&nbsp;a&nbsp;&lt;br&gt;<br>
restart.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
For&nbsp;auth&nbsp;and&nbsp;ACLs&nbsp;whose&nbsp;values&nbsp;that&nbsp;come&nbsp;into&nbsp;Squid&nbsp;from&nbsp;a&nbsp;helper&nbsp;it&nbsp;&lt;br&gt;<br>
depends&nbsp;on&nbsp;the&nbsp;helper&nbsp;itself.&nbsp;Most&nbsp;can&nbsp;auto-detect&nbsp;changes&nbsp;to&nbsp;their&nbsp;&lt;br&gt;<br>
background&nbsp;databases&nbsp;and&nbsp;not&nbsp;need&nbsp;anything&nbsp;from&nbsp;Squid&nbsp;to&nbsp;update&nbsp;the&nbsp;&lt;br&gt;<br>
outputs.&nbsp;All&nbsp;helpers&nbsp;do&nbsp;have&nbsp;some&nbsp;form&nbsp;of&nbsp;caching&nbsp;of&nbsp;their&nbsp;results&nbsp;by&nbsp;&lt;br&gt;<br>
Squid,&nbsp;so&nbsp;there&nbsp;are&nbsp;settings&nbsp;in&nbsp;squid.conf&nbsp;to&nbsp;tune&nbsp;that&nbsp;to&nbsp;your&nbsp;needs&nbsp;-&nbsp;&lt;br&gt;<br>
as&nbsp;you&nbsp;can&nbsp;see&nbsp;from&nbsp;the&nbsp;auth&nbsp;issue&nbsp;above.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
For&nbsp;ACLs&nbsp;with&nbsp;values&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;change&nbsp;often&nbsp;it&nbsp;is&nbsp;best&nbsp;to&nbsp;use&nbsp;&lt;br&gt;<br>
an&nbsp;external_acl_type&nbsp;helper&nbsp;that&nbsp;manages&nbsp;the&nbsp;updates&nbsp;or&nbsp;fetches&nbsp;from&nbsp;&lt;br&gt;<br>
somewhere&nbsp;the&nbsp;updates&nbsp;are&nbsp;handled&nbsp;without&nbsp;a&nbsp;reload.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Amos&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
