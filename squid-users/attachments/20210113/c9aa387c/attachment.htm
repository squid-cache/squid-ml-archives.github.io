<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;line-break:&nbsp;after-white-space;&quot;&nbsp;class=&quot;&quot;&gt;Hi&nbsp;Alex,&lt;div&nbsp;class=&quot;&quot;&gt;Thanks&nbsp;for&nbsp;the&nbsp;help.&nbsp;Comments&nbsp;inline.&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;On&nbsp;Jan&nbsp;13,&nbsp;2021,&nbsp;at&nbsp;2:23&nbsp;PM,&nbsp;Alex&nbsp;Rousskov&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:rousskov@measurement-factory.com&quot;&nbsp;class=&quot;&quot;&gt;rousskov@measurement-factory.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;On&nbsp;1/13/21&nbsp;4:33&nbsp;PM,&nbsp;Greg&nbsp;Hulands&nbsp;wrote:&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;I&nbsp;am&nbsp;setting&nbsp;up&nbsp;squid&nbsp;5.0.3&nbsp;and&nbsp;during&nbsp;testing&nbsp;I&nbsp;have&nbsp;found&nbsp;some&nbsp;&lt;br&nbsp;class=&quot;&quot;&gt;websites&nbsp;fail&nbsp;to&nbsp;have&nbsp;their&nbsp;certificates&nbsp;generated&nbsp;correctly.&nbsp;I&nbsp;am&lt;br&nbsp;class=&quot;&quot;&gt;able&nbsp;to&nbsp;go&nbsp;to&nbsp;sites&nbsp;like&nbsp;&lt;a&nbsp;href=&quot;http://YouTube.com&quot;&nbsp;class=&quot;&quot;&gt;YouTube.com&lt;/a&gt;&nbsp;and&nbsp;have&nbsp;the&nbsp;certificates&nbsp;for&lt;br&nbsp;class=&quot;&quot;&gt;that&nbsp;be&nbsp;generated&nbsp;correctly,&nbsp;but&nbsp;when&nbsp;I&nbsp;try&nbsp;to&nbsp;go&nbsp;to&nbsp;some&nbsp;others,&lt;br&nbsp;class=&quot;&quot;&gt;like&nbsp;&lt;a&nbsp;href=&quot;http://arstechnica.com&quot;&nbsp;class=&quot;&quot;&gt;arstechnica.com&lt;/a&gt;,&nbsp;they&nbsp;fail&nbsp;to&nbsp;generate&nbsp;and&nbsp;return&nbsp;the&nbsp;CA&nbsp;cert&lt;br&nbsp;class=&quot;&quot;&gt;that&nbsp;squid&nbsp;is&nbsp;using&nbsp;to&nbsp;sign&nbsp;certificates&nbsp;with.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/blockquote&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Just&nbsp;to&nbsp;double&nbsp;check:&nbsp;Are&nbsp;you&nbsp;sure&nbsp;that&nbsp;the&nbsp;certificate&nbsp;the&nbsp;client&nbsp;gets&lt;br&nbsp;class=&quot;&quot;&gt;is&nbsp;the&nbsp;configured&nbsp;CA&nbsp;certificate?&nbsp;For&nbsp;example,&nbsp;do&nbsp;the&nbsp;two&nbsp;certificates&lt;br&nbsp;class=&quot;&quot;&gt;have&nbsp;the&nbsp;same&nbsp;fingerprint?&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;Yes,&nbsp;I&nbsp;verified&nbsp;it’s&nbsp;the&nbsp;same&nbsp;certificate&nbsp;-&nbsp;fingerprints&nbsp;are&nbsp;a&nbsp;match.&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;I&nbsp;turned&nbsp;the&nbsp;logging&nbsp;up&nbsp;on&nbsp;certificate&nbsp;stuff&nbsp;to&nbsp;5&nbsp;and&nbsp;have&nbsp;the&nbsp;cache&nbsp;log&lt;br&nbsp;class=&quot;&quot;&gt;from&nbsp;trying&nbsp;to&nbsp;make&nbsp;a&nbsp;request&lt;br&nbsp;class=&quot;&quot;&gt;here:&nbsp;&lt;a&nbsp;href=&quot;https://gist.github.com/ghulands/f89b49bf180bfac86c98c46c4260f1eb&quot;&nbsp;class=&quot;&quot;&gt;https://gist.github.com/ghulands/f89b49bf180bfac86c98c46c4260f1eb&lt;/a&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/blockquote&gt;&lt;br&nbsp;class=&quot;&quot;&gt;The&nbsp;posted&nbsp;snippet&nbsp;shows&nbsp;successful&nbsp;TLS&nbsp;negotiation&nbsp;with&nbsp;the&nbsp;origin&lt;br&nbsp;class=&quot;&quot;&gt;server&nbsp;(FD&nbsp;23)&nbsp;and&nbsp;a&nbsp;subsequently&nbsp;failed&nbsp;negotiation&nbsp;with&nbsp;the&nbsp;client&nbsp;(FD&lt;br&nbsp;class=&quot;&quot;&gt;21).&nbsp;The&nbsp;latter&nbsp;may&nbsp;have&nbsp;failed&nbsp;because&nbsp;the&nbsp;client&nbsp;did&nbsp;not&nbsp;like&nbsp;the&lt;br&nbsp;class=&quot;&quot;&gt;certificate&nbsp;generated&nbsp;by&nbsp;Squid,&nbsp;but&nbsp;I&nbsp;did&nbsp;not&nbsp;check&nbsp;the&nbsp;exact&nbsp;failure&lt;br&nbsp;class=&quot;&quot;&gt;reason&nbsp;carefully.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;The&nbsp;snippet&nbsp;has&nbsp;no&nbsp;information&nbsp;about&nbsp;Squid&nbsp;sending&nbsp;the&nbsp;(generated)&lt;br&nbsp;class=&quot;&quot;&gt;certificates&nbsp;to&nbsp;the&nbsp;client,&nbsp;but&nbsp;Squid&nbsp;appears&nbsp;to&nbsp;receive&nbsp;some&nbsp;generated&lt;br&nbsp;class=&quot;&quot;&gt;certificate&nbsp;from&nbsp;the&nbsp;helper&nbsp;(crtGenRq3180846).&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;*&nbsp;If&nbsp;you&nbsp;are&nbsp;sure&nbsp;that&nbsp;the&nbsp;client&nbsp;gets&nbsp;a&nbsp;wrong&nbsp;certificate&nbsp;from&nbsp;Squid,&lt;br&nbsp;class=&quot;&quot;&gt;then&nbsp;I&nbsp;recommend&nbsp;posting&nbsp;an&nbsp;ALL,9&nbsp;log&nbsp;of&nbsp;the&nbsp;problematic&nbsp;transaction.&lt;br&nbsp;class=&quot;&quot;&gt;With&nbsp;some&nbsp;luck,&nbsp;we&nbsp;may&nbsp;be&nbsp;able&nbsp;to&nbsp;see&nbsp;what&nbsp;went&nbsp;wrong&nbsp;with&nbsp;certificate&lt;br&nbsp;class=&quot;&quot;&gt;generation&nbsp;(or&nbsp;virgin&nbsp;certificate&nbsp;validation??).&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;put&nbsp;the&nbsp;ALL,9&nbsp;log&nbsp;here&nbsp;&lt;a&nbsp;href=&quot;https://gist.github.com/ghulands/4a689db93fc87f9e7f69174f292f1914&quot;&nbsp;class=&quot;&quot;&gt;https://gist.github.com/ghulands/4a689db93fc87f9e7f69174f292f1914&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;can&nbsp;see&nbsp;it&nbsp;generates&nbsp;the&nbsp;certificate&nbsp;correctly,&nbsp;but&nbsp;couldn’t&nbsp;identify&nbsp;why&nbsp;it&nbsp;didn’t&nbsp;return&nbsp;the&nbsp;cert&nbsp;to&nbsp;the&nbsp;client.&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;*&nbsp;Otherwise,&nbsp;I&nbsp;recommend&nbsp;double&nbsp;checking&nbsp;what&nbsp;certificate&nbsp;the&nbsp;client&lt;br&nbsp;class=&quot;&quot;&gt;gets.&nbsp;If&nbsp;the&nbsp;client&nbsp;gets&nbsp;the&nbsp;correct&nbsp;generated&nbsp;certificate,&nbsp;then&nbsp;the&lt;br&nbsp;class=&quot;&quot;&gt;problem&nbsp;is&nbsp;not&nbsp;in&nbsp;certificate&nbsp;validation&nbsp;or&nbsp;generation.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Posting&nbsp;the&nbsp;certificate&nbsp;that&nbsp;the&nbsp;client&nbsp;actually&nbsp;gets&nbsp;may&nbsp;help&nbsp;a&nbsp;lot&lt;br&nbsp;class=&quot;&quot;&gt;with&nbsp;the&nbsp;triage&nbsp;as&nbsp;well.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;The&nbsp;certificate&nbsp;that&nbsp;gets&nbsp;returned&nbsp;is&nbsp;in&nbsp;the&nbsp;logs&nbsp;as&nbsp;it’s&nbsp;the&nbsp;CA&nbsp;cert.&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;&lt;div&gt;Greg&lt;/div&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;HTH,&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;Alex.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
