<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Thank&nbsp;you&nbsp;very&nbsp;much,&nbsp;that&nbsp;really&nbsp;helped!&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Mon,&nbsp;Jan&nbsp;18,&nbsp;2021&nbsp;at&nbsp;6:48&nbsp;PM&nbsp;Alex&nbsp;Rousskov&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:rousskov@measurement-factory.com&quot;&gt;rousskov@measurement-factory.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;On&nbsp;1/18/21&nbsp;6:45&nbsp;AM,&nbsp;Moti&nbsp;Berger&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;If&nbsp;the&nbsp;ICAP&nbsp;server&nbsp;sets&nbsp;&#39;Preview:&nbsp;0&#39;&nbsp;in&nbsp;the&nbsp;OPTIONS&nbsp;it&nbsp;means&nbsp;that&nbsp;when&lt;br&gt;<br>
&gt;&nbsp;the&nbsp;ICAP&nbsp;client&nbsp;sends&nbsp;a&nbsp;request,&nbsp;it&nbsp;should&nbsp;not&nbsp;contain&nbsp;the&nbsp;body.&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;above&nbsp;summary&nbsp;may&nbsp;mislead&nbsp;many&nbsp;readers.&nbsp;I&nbsp;would&nbsp;describe&nbsp;the&lt;br&gt;<br>
protocol&nbsp;operation&nbsp;differently:&lt;br&gt;<br>
&lt;br&gt;<br>
*&nbsp;Preview&nbsp;in&nbsp;an&nbsp;OPTIONS&nbsp;response&nbsp;indicates&nbsp;that&nbsp;the&nbsp;server&nbsp;supports&lt;br&gt;<br>
Preview&nbsp;in&nbsp;general&nbsp;and&nbsp;specifies&nbsp;the&nbsp;maximum&nbsp;Preview&nbsp;size&nbsp;the&nbsp;client&lt;br&gt;<br>
should&nbsp;use&nbsp;(e.g.,&nbsp;Preview:0&nbsp;limits&nbsp;Preview&nbsp;to&nbsp;HTTP&nbsp;headers).&lt;br&gt;<br>
&lt;br&gt;<br>
*&nbsp;The&nbsp;Preview&nbsp;mode&nbsp;for&nbsp;a&nbsp;specific&nbsp;REQMOD&nbsp;or&nbsp;RESPMOD&nbsp;transaction&nbsp;is&lt;br&gt;<br>
signaled&nbsp;in&nbsp;the&nbsp;corresponding&nbsp;REQMOD&nbsp;or&nbsp;RESPMOD&nbsp;request&nbsp;(not&nbsp;a&nbsp;previous&lt;br&gt;<br>
OPTIONS&nbsp;response)&nbsp;by&nbsp;adding&nbsp;a&nbsp;Preview:N&nbsp;ICAP&nbsp;request&nbsp;header&nbsp;(Preview:0&lt;br&gt;<br>
specifies&nbsp;a&nbsp;headers-only&nbsp;Preview&nbsp;for&nbsp;the&nbsp;current&nbsp;transaction).&lt;br&gt;<br>
&lt;br&gt;<br>
*&nbsp;The&nbsp;REQMOD&nbsp;or&nbsp;RESPMOD&nbsp;transaction&nbsp;with&nbsp;a&nbsp;Preview:0&nbsp;request&nbsp;header&nbsp;is&lt;br&gt;<br>
split&nbsp;into&nbsp;two&nbsp;phases.&nbsp;During&nbsp;the&nbsp;first&nbsp;phase,&nbsp;the&nbsp;client&nbsp;must&nbsp;not&nbsp;send&lt;br&gt;<br>
the&nbsp;virgin&nbsp;body.&nbsp;During&nbsp;the&nbsp;second&nbsp;phase,&nbsp;if&nbsp;any,&nbsp;the&nbsp;client&nbsp;must&nbsp;send&lt;br&gt;<br>
the&nbsp;virgin&nbsp;body.&nbsp;Both&nbsp;phases&nbsp;comprise&nbsp;a&nbsp;single&nbsp;ICAP&nbsp;transaction,&nbsp;with&nbsp;a&lt;br&gt;<br>
single&nbsp;ICAP&nbsp;request&nbsp;and&nbsp;a&nbsp;single&nbsp;ICAP&nbsp;response.&nbsp;Thus,&nbsp;one&nbsp;cannot&nbsp;say&lt;br&gt;<br>
that&nbsp;this&nbsp;transaction&nbsp;(as&nbsp;a&nbsp;whole)&nbsp;&quot;should&nbsp;not&nbsp;contain&nbsp;a&nbsp;body&quot;.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;This&nbsp;is&nbsp;the&nbsp;REQMOD&nbsp;request:&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt; &nbsp; &nbsp; F..n...DREQMOD&nbsp;icap://censor-req.proxy:14590/request&nbsp;ICAP/1.0&lt;br&gt;<br>
&gt; &nbsp; &nbsp; Host:&nbsp;censor-req.proxy:14590&lt;br&gt;<br>
&gt; &nbsp; &nbsp; Date:&nbsp;Mon,&nbsp;18&nbsp;Jan&nbsp;2021&nbsp;11:34:54&nbsp;GMT&lt;br&gt;<br>
&gt; &nbsp; &nbsp; Encapsulated:&nbsp;req-hdr=0,&nbsp;req-body=222&lt;br&gt;<br>
&gt; &nbsp; &nbsp; Preview:&nbsp;0&lt;br&gt;<br>
&gt; &nbsp; &nbsp; Allow:&nbsp;204,&nbsp;trailers&lt;br&gt;<br>
&gt; &nbsp; &nbsp; X-custom-header:&nbsp;data&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt; &nbsp; &nbsp; POST&nbsp;&lt;a&nbsp;href=&quot;http://www.dst-server.com:22222/v1/test&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.dst-server.com:22222/v1/test&lt;/a&gt;&nbsp;HTTP/1.1&lt;br&gt;<br>
&gt; &nbsp; &nbsp; User-Agent:&nbsp;python-requests/2.25.1&lt;br&gt;<br>
&gt; &nbsp; &nbsp; Accept-Encoding:&nbsp;gzip,&nbsp;deflate&lt;br&gt;<br>
&gt; &nbsp; &nbsp; Accept:&nbsp;*/*&lt;br&gt;<br>
&gt; &nbsp; &nbsp; Content-Length:&nbsp;10&lt;br&gt;<br>
&gt; &nbsp; &nbsp; Content-Type:&nbsp;application/json&lt;br&gt;<br>
&gt; &nbsp; &nbsp; Host:&nbsp;&lt;a&nbsp;href=&quot;http://www.dst-server.com:22222&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;www.dst-server.com:22222&lt;/a&gt;&nbsp;&lt;&lt;a&nbsp;href=&quot;http://www.dst-server.com:22222&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.dst-server.com:22222&lt;/a&gt;&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;ICAP&nbsp;&#39;Encapsulated&#39;&nbsp;header&nbsp;has&nbsp;a&nbsp;req-body&nbsp;even&nbsp;though&nbsp;no&nbsp;&#39;body&#39;&lt;br&gt;<br>
&gt;&nbsp;should&nbsp;be&nbsp;in&nbsp;this&nbsp;request.&lt;br&gt;<br>
&lt;br&gt;<br>
Not&nbsp;exactly.&nbsp;The&nbsp;request&nbsp;may&nbsp;not&nbsp;be&nbsp;over&nbsp;at&nbsp;this&nbsp;point.&nbsp;Please&nbsp;see&nbsp;my&lt;br&gt;<br>
third&nbsp;bullet&nbsp;above&nbsp;for&nbsp;details.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;ICAP&nbsp;server&nbsp;has&nbsp;no&nbsp;way&nbsp;to&nbsp;encapsulate&nbsp;the&nbsp;HTTP&nbsp;request&nbsp;body&nbsp;if&nbsp;it&lt;br&gt;<br>
&gt;&nbsp;didn&#39;t&nbsp;get&nbsp;it.&lt;br&gt;<br>
&lt;br&gt;<br>
To&nbsp;get&nbsp;the&nbsp;request&nbsp;body&nbsp;in&nbsp;Preview:0&nbsp;mode,&nbsp;the&nbsp;ICAP&nbsp;server&nbsp;must&nbsp;respond&lt;br&gt;<br>
with&nbsp;ICAP&nbsp;100&nbsp;(Continue).&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;want&nbsp;to&nbsp;avoid&nbsp;sending&nbsp;the&nbsp;body&nbsp;because&nbsp;the&nbsp;adaptation&nbsp;is&nbsp;body&nbsp;agnostic.&lt;br&gt;<br>
&lt;br&gt;<br>
Yes,&nbsp;I&nbsp;know,&nbsp;but&nbsp;you&nbsp;have&nbsp;to&nbsp;work&nbsp;within&nbsp;the&nbsp;ICAP&nbsp;protocol&nbsp;boundaries.&lt;br&gt;<br>
ICAP&nbsp;simply&nbsp;does&nbsp;not&nbsp;optimize&nbsp;your&nbsp;use&nbsp;case!&nbsp;After&nbsp;you&nbsp;have&nbsp;the&nbsp;basics&lt;br&gt;<br>
working&nbsp;well,&nbsp;you&nbsp;can&nbsp;invest&nbsp;in&nbsp;implementing&nbsp;a&nbsp;use-original-body&nbsp;ICAP&lt;br&gt;<br>
extension[1]&nbsp;that,&nbsp;in&nbsp;_some_&nbsp;cases,&nbsp;can&nbsp;prevent&nbsp;the&nbsp;body&nbsp;exchange&nbsp;while&lt;br&gt;<br>
adapting&nbsp;HTTP&nbsp;headers.&lt;br&gt;<br>
&lt;br&gt;<br>
Alternatively,&nbsp;you&nbsp;can&nbsp;use&nbsp;an&nbsp;existing&nbsp;(extendible)&nbsp;ICAP&nbsp;server&nbsp;to&nbsp;do&lt;br&gt;<br>
the&nbsp;legwork&nbsp;for&nbsp;you&nbsp;[2].&nbsp;Many&nbsp;individuals&nbsp;and&nbsp;companies&nbsp;have&nbsp;learned&nbsp;the&lt;br&gt;<br>
hard&nbsp;way&nbsp;that&nbsp;implementing&nbsp;an&nbsp;ICAP&nbsp;service&nbsp;correctly&nbsp;from&nbsp;scratch&nbsp;is&lt;br&gt;<br>
very&nbsp;difficult&nbsp;and&nbsp;often&nbsp;prohibitively&nbsp;expensive.&lt;br&gt;<br>
&lt;br&gt;<br>
[1]&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://www.icap-forum.org/documents/specification/draft-icap-ext-partial-content-07.txt&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.icap-forum.org/documents/specification/draft-icap-ext-partial-content-07.txt&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
[2]&nbsp;&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/Features/ICAP#ICAP_Servers&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://wiki.squid-cache.org/Features/ICAP#ICAP_Servers&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
HTH,&lt;br&gt;<br>
&lt;br&gt;<br>
Alex.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;On&nbsp;Sun,&nbsp;Jan&nbsp;17,&nbsp;2021&nbsp;at&nbsp;11:34&nbsp;PM&nbsp;Alex&nbsp;Rousskov&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt; &nbsp; &nbsp; On&nbsp;1/17/21&nbsp;3:08&nbsp;PM,&nbsp;Moti&nbsp;Berger&nbsp;wrote:&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &gt;&nbsp;What&nbsp;should&nbsp;the&nbsp;ICAP&nbsp;response&nbsp;look&nbsp;like?&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt; &nbsp; &nbsp; The&nbsp;vast&nbsp;majority&nbsp;off&nbsp;ICAP&nbsp;responses&nbsp;containing&nbsp;an&nbsp;HTTP&nbsp;POST&nbsp;message&lt;br&gt;<br>
&gt; &nbsp; &nbsp; will&nbsp;look&nbsp;like&nbsp;ICAP&nbsp;header&nbsp;+&nbsp;HTTP&nbsp;header&nbsp;+&nbsp;HTTP&nbsp;body.&nbsp;Please&nbsp;see&nbsp;RFC&lt;br&gt;<br>
&gt; &nbsp; &nbsp; 3507&nbsp;and&nbsp;its&nbsp;errata&nbsp;for&nbsp;examples&nbsp;of&nbsp;and&nbsp;discussion&nbsp;about&nbsp;those&nbsp;three&lt;br&gt;<br>
&gt; &nbsp; &nbsp; components.&nbsp;It&nbsp;should&nbsp;help&nbsp;avoid&nbsp;guessing&nbsp;and&nbsp;developing&nbsp;by&nbsp;examples&lt;br&gt;<br>
&gt; &nbsp; &nbsp; (which&nbsp;usually&nbsp;leads&nbsp;to&nbsp;bugs,&nbsp;especially&nbsp;where&nbsp;ICAP&nbsp;is&nbsp;involved).&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &gt;&nbsp;What&nbsp;I&nbsp;do&nbsp;is&nbsp;to&nbsp;reply&nbsp;like&nbsp;this:&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &gt;&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &gt; &nbsp; &nbsp; (dI./M..ICAP/1.0&nbsp;200&nbsp;OK&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &gt; &nbsp; &nbsp; ISTag:&nbsp;&quot;SjIzlRA4te41axxcDOoiSl6rBRg4ZK&quot;&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &gt; &nbsp; &nbsp; Date:&nbsp;Sun,&nbsp;17&nbsp;Jan&nbsp;2021&nbsp;19:34:12&nbsp;GMT&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &gt; &nbsp; &nbsp; Server:&nbsp;BaseICAP/1.0&nbsp;Python/3.6.12&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &gt; &nbsp; &nbsp; Encapsulated:&nbsp;req-hdr=0,&nbsp;req-body=360&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &gt;&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &gt; &nbsp; &nbsp; POST&nbsp;&lt;a&nbsp;href=&quot;http://www.dst-server.com:22222/v1/test&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.dst-server.com:22222/v1/test&lt;/a&gt;&nbsp;HTTP/1.1&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &gt; &nbsp; &nbsp; x-new-header:&nbsp;{&quot;key&quot;:&nbsp;&quot;value&quot;}&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &gt; &nbsp; &nbsp; user-agent:&nbsp;python-requests/2.25.1&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &gt; &nbsp; &nbsp; accept-encoding:&nbsp;gzip,&nbsp;deflate&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &gt; &nbsp; &nbsp; accept:&nbsp;*/*&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &gt; &nbsp; &nbsp; content-length:&nbsp;16&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &gt; &nbsp; &nbsp; content-type:&nbsp;application/json&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &gt; &nbsp; &nbsp; host:&nbsp;&lt;a&nbsp;href=&quot;http://www.dst-server.com:22222&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;www.dst-server.com:22222&lt;/a&gt;&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &lt;&lt;a&nbsp;href=&quot;http://www.dst-server.com:22222&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.dst-server.com:22222&lt;/a&gt;&gt;&nbsp;&lt;&lt;a&nbsp;href=&quot;http://www.dst-server.com:22222&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.dst-server.com:22222&lt;/a&gt;&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt; &nbsp; &nbsp; FYI:&nbsp;The&nbsp;above&nbsp;incomplete&nbsp;ICAP&nbsp;response&nbsp;promises&nbsp;an&nbsp;HTTP&nbsp;request&nbsp;body,&lt;br&gt;<br>
&gt; &nbsp; &nbsp; both&nbsp;on&nbsp;the&nbsp;ICAP&nbsp;level&nbsp;(req-body)&nbsp;and&nbsp;on&nbsp;the&nbsp;HTTP&nbsp;level&nbsp;(content-length:&lt;br&gt;<br>
&gt; &nbsp; &nbsp; 16).&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &gt;&nbsp;As&nbsp;I&nbsp;said,&nbsp;I&nbsp;use&nbsp;&#39;Preview:&nbsp;0&#39;&nbsp;since&nbsp;I&nbsp;don&#39;t&nbsp;mind&nbsp;the&nbsp;body.&nbsp;The&lt;br&gt;<br>
&gt; &nbsp; &nbsp; question&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &gt;&nbsp;is&nbsp;whether&nbsp;declaring&nbsp;the&nbsp;body&nbsp;starts&nbsp;at&nbsp;X&nbsp;(req-body=X)&nbsp;is&nbsp;OK&nbsp;even&lt;br&gt;<br>
&gt; &nbsp; &nbsp; though&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &gt;&nbsp;I&nbsp;don&#39;t&nbsp;have&nbsp;a&nbsp;body&nbsp;to&nbsp;send?&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt; &nbsp; &nbsp; It&nbsp;is&nbsp;not&nbsp;OK&nbsp;not&nbsp;to&nbsp;send&nbsp;the&nbsp;body.&nbsp;Encapsulated:req-body&nbsp;does&nbsp;more&nbsp;than&lt;br&gt;<br>
&gt; &nbsp; &nbsp; declaring&nbsp;where&nbsp;the&nbsp;encapsulated&nbsp;headers&nbsp;end.&nbsp;It&nbsp;also&nbsp;promises&nbsp;an&lt;br&gt;<br>
&gt; &nbsp; &nbsp; embedded&nbsp;HTTP&nbsp;body&nbsp;after&nbsp;those&nbsp;headers.&nbsp;You&nbsp;must&nbsp;encapsulate&nbsp;the&nbsp;body&nbsp;if&lt;br&gt;<br>
&gt; &nbsp; &nbsp; the&nbsp;HTTP&nbsp;message&nbsp;should&nbsp;have&nbsp;one.&nbsp;You&nbsp;cannot&nbsp;adapt&nbsp;the&nbsp;header&nbsp;of&nbsp;an&nbsp;HTTP&lt;br&gt;<br>
&gt; &nbsp; &nbsp; message&nbsp;with&nbsp;a&nbsp;body&nbsp;without&nbsp;also&nbsp;sending&nbsp;the&nbsp;HTTP&nbsp;body&nbsp;(virgin&nbsp;or&lt;br&gt;<br>
&gt; &nbsp; &nbsp; adapted).&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt; &nbsp; &nbsp; Preview&nbsp;is&nbsp;pretty&nbsp;much&nbsp;irrelevant&nbsp;in&nbsp;this&nbsp;context&nbsp;--&nbsp;the&nbsp;ICAP&nbsp;protocol&lt;br&gt;<br>
&gt; &nbsp; &nbsp; does&nbsp;not&nbsp;care&nbsp;how&nbsp;the&nbsp;ICAP&nbsp;service&nbsp;gets&nbsp;the&nbsp;HTTP&nbsp;body&nbsp;to&nbsp;include&nbsp;in&nbsp;the&lt;br&gt;<br>
&gt; &nbsp; &nbsp; ICAP&nbsp;response.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt; &nbsp; &nbsp; There&nbsp;are&nbsp;unofficial&nbsp;ICAP&nbsp;extensions&nbsp;that&nbsp;make&nbsp;it&nbsp;possible&nbsp;to&nbsp;tell&nbsp;the&lt;br&gt;<br>
&gt; &nbsp; &nbsp; ICAP&nbsp;client&nbsp;to&nbsp;reuse&nbsp;the&nbsp;body&nbsp;it&nbsp;has&nbsp;buffered&nbsp;while&nbsp;adapting&nbsp;the&nbsp;header,&lt;br&gt;<br>
&gt; &nbsp; &nbsp; but&nbsp;you&nbsp;should&nbsp;get&nbsp;the&nbsp;baseline&nbsp;case&nbsp;working&nbsp;before&nbsp;bothering&nbsp;with&nbsp;those&lt;br&gt;<br>
&gt; &nbsp; &nbsp; extensions&nbsp;--&nbsp;they&nbsp;are&nbsp;optimizations&nbsp;that&nbsp;are&nbsp;not&nbsp;applicable&nbsp;to&nbsp;some&lt;br&gt;<br>
&gt; &nbsp; &nbsp; transactions.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &gt;&nbsp;I&nbsp;think&nbsp;having&nbsp;req-null=X&nbsp;is&nbsp;bad&nbsp;since&nbsp;it&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &gt;&nbsp;probably&nbsp;tells&nbsp;squid&nbsp;that&nbsp;I&nbsp;decided&nbsp;the&nbsp;adapted&nbsp;request should&nbsp;have&nbsp;no&lt;br&gt;<br>
&gt; &nbsp; &nbsp; &gt;&nbsp;body,&nbsp;but&nbsp;that&#39;s&nbsp;only&nbsp;a&nbsp;guess.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt; &nbsp; &nbsp; If&nbsp;you&nbsp;meant&nbsp;to&nbsp;say&nbsp;&quot;null-body&quot;,&nbsp;then&nbsp;you&nbsp;guessed&nbsp;correctly&nbsp;--&nbsp;null-body&lt;br&gt;<br>
&gt; &nbsp; &nbsp; means&nbsp;the&nbsp;adapted&nbsp;HTTP&nbsp;message&nbsp;has&nbsp;no&nbsp;body.&nbsp;That&nbsp;is&nbsp;not&nbsp;what&nbsp;you&nbsp;want&nbsp;to&lt;br&gt;<br>
&gt; &nbsp; &nbsp; say&nbsp;when&nbsp;adapting&nbsp;most&nbsp;HTTP&nbsp;POST&nbsp;messages.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt; &nbsp; &nbsp; HTH,&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt; &nbsp; &nbsp; Alex.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
