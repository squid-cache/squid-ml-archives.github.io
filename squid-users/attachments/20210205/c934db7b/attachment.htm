<tt>
&lt;HTML&gt;&lt;HEAD&gt;<br>
&lt;META&nbsp;content=&quot;text/html;&nbsp;charset=UTF-8&quot;&nbsp;http-equiv=content-type&gt;&lt;/HEAD&gt;<br>
&lt;BODY&nbsp;dir=ltr&gt;<br>
&lt;DIV&nbsp;dir=ltr&gt;<br>
&lt;DIV&nbsp;style=&quot;FONT-SIZE:&nbsp;10pt;&nbsp;FONT-FAMILY:&nbsp;'Arial';&nbsp;COLOR:&nbsp;#000000&quot;&gt;<br>
&lt;DIV&gt;What&nbsp;does&nbsp;he&nbsp;cache&nbsp;log&nbsp;show&nbsp;&nbsp;?&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;Markus&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;<br>
style=&quot;BORDER-TOP-COLOR:&nbsp;#000000;&nbsp;BORDER-BOTTOM-COLOR:&nbsp;#000000;&nbsp;PADDING-LEFT:&nbsp;5px;&nbsp;MARGIN-LEFT:&nbsp;5px;&nbsp;BORDER-LEFT:&nbsp;#000000&nbsp;4px&nbsp;solid;&nbsp;BORDER-RIGHT-COLOR:&nbsp;#000000&quot;&gt;<br>
&lt;DIV&nbsp;<br>
style='FONT-SIZE:&nbsp;small;&nbsp;TEXT-DECORATION:&nbsp;none;&nbsp;FONT-FAMILY:&nbsp;&quot;Calibri&quot;;&nbsp;FONT-WEIGHT:&nbsp;normal;&nbsp;COLOR:&nbsp;#000000;&nbsp;FONT-STYLE:&nbsp;normal;&nbsp;DISPLAY:&nbsp;inline'&gt;<br>
&lt;DIV&gt;&quot;Alex&nbsp;Gutiérrez&quot;&nbsp;&lt;alex@esines.cu&gt;&nbsp;wrote&nbsp;in&nbsp;message&nbsp;<br>
news:acd33a78-c0dc-d539-1028-ed1c700dbc59@esines.cu...&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;<br>
style=&quot;BORDER-TOP-COLOR:&nbsp;#000000;&nbsp;BORDER-BOTTOM-COLOR:&nbsp;#000000;&nbsp;PADDING-LEFT:&nbsp;5px;&nbsp;MARGIN-LEFT:&nbsp;5px;&nbsp;BORDER-LEFT:&nbsp;#000000&nbsp;4px&nbsp;solid;&nbsp;BORDER-RIGHT-COLOR:&nbsp;#000000&quot;&gt;<br>
&lt;DIV&nbsp;<br>
style='FONT-SIZE:&nbsp;small;&nbsp;TEXT-DECORATION:&nbsp;none;&nbsp;FONT-FAMILY:&nbsp;&quot;Calibri&quot;;&nbsp;FONT-WEIGHT:&nbsp;normal;&nbsp;COLOR:&nbsp;#000000;&nbsp;FONT-STYLE:&nbsp;normal;&nbsp;DISPLAY:&nbsp;inline'&gt;<br>
&lt;P&gt;HI&nbsp;community,&nbsp;reciently&nbsp;I&nbsp;install&nbsp;an&nbsp;old&nbsp;UBT&nbsp;18.04&nbsp;with&nbsp;squid&nbsp;3.&nbsp;I&nbsp;use&nbsp;to&nbsp;<br>
authenticate&nbsp;my&nbsp;users&nbsp;kerberos.&lt;/P&gt;<br>
&lt;P&gt;Everithing&nbsp;seem´s&nbsp;great,&nbsp;but&nbsp;my&nbsp;all&nbsp;my&nbsp;users&nbsp;are&nbsp;able&nbsp;to&nbsp;use&nbsp;the&nbsp;proxy,&nbsp;<br>
instead&nbsp;of&nbsp;the&nbsp;few&nbsp;in&nbsp;the&nbsp;&lt;B&gt;conexion&lt;/B&gt;&nbsp;group.&lt;/P&gt;<br>
&lt;P&gt;Can&nbsp;anyone&nbsp;be&nbsp;so&nbsp;nice&nbsp;to&nbsp;tell&nbsp;me&nbsp;what´s&nbsp;wrong&nbsp;on&nbsp;my&nbsp;config?&lt;/P&gt;<br>
&lt;P&gt;Thanks&nbsp;in&nbsp;advance.&lt;/P&gt;<br>
&lt;P&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&gt;httpd_suppress_version_string&nbsp;on&lt;BR&gt;visible_hostname&nbsp;Proxy&lt;BR&gt;via&nbsp;<br>
off&lt;BR&gt;forwarded_for&nbsp;off&lt;BR&gt;follow_x_forwarded_for&nbsp;deny&nbsp;all&lt;BR&gt;error_directory&nbsp;<br>
/usr/share/squid_error&lt;BR&gt;acl&nbsp;SSL_ports&nbsp;port&nbsp;443&lt;BR&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;21&nbsp;#&nbsp;<br>
ftp&lt;BR&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;80&nbsp;#&nbsp;http&lt;BR&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;81&nbsp;#&nbsp;<br>
http_cubaindustria&lt;BR&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;70&nbsp;#&nbsp;gopher&lt;BR&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;210&nbsp;<br>
#&nbsp;wais&lt;BR&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;280&nbsp;#&nbsp;http-mgmt&lt;BR&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;443&nbsp;#&nbsp;<br>
https&lt;BR&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;488&nbsp;#&nbsp;gss-http&lt;BR&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;591&nbsp;#&nbsp;<br>
filemaker&lt;BR&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;777&nbsp;#&nbsp;multiling&nbsp;http&lt;BR&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;<br>
1025-65535&nbsp;#&nbsp;unregistered&nbsp;ports&lt;BR&gt;acl&nbsp;CONNECT&nbsp;method&nbsp;<br>
CONNECT&lt;BR&gt;#################&lt;BR&gt;#sqstat&lt;BR&gt;#################&lt;BR&gt;acl&nbsp;webserver&nbsp;<br>
src&nbsp;proxy.esines.cu&lt;BR&gt;http_access&nbsp;allow&nbsp;manager&nbsp;webserver&lt;BR&gt;http_access&nbsp;deny&nbsp;<br>
manager&lt;BR&gt;##########################################&lt;BR&gt;#&nbsp;Logs:&lt;BR&gt;access_log&nbsp;<br>
/var/log/squid/access.log&nbsp;squid&nbsp;!manager&lt;BR&gt;logformat&nbsp;squid&nbsp;%ts.%03tu&nbsp;%6tr&nbsp;<br>
%&gt;a&nbsp;%Ss/%03&gt;Hs&nbsp;%&lt;st&nbsp;%rm&nbsp;%ru&nbsp;%un&nbsp;%Sh/%&lt;A&nbsp;<br>
%mt&lt;BR&gt;log_uses_indirect_client&nbsp;<br>
on&lt;BR&gt;##########################################&lt;BR&gt;#No&nbsp;Permitimos&nbsp;los&nbsp;puertos&nbsp;<br>
inseguros&lt;BR&gt;http_access&nbsp;deny&nbsp;!Safe_ports&lt;BR&gt;http_access&nbsp;deny&nbsp;CONNECT&nbsp;<br>
!SSL_ports&lt;BR&gt;##########################################&lt;BR&gt;#permitir&nbsp;todo&nbsp;lo&nbsp;<br>
que&nbsp;sea&nbsp;de&nbsp;cuba&lt;BR&gt;##########################################&lt;BR&gt;acl&nbsp;cuba&nbsp;<br>
dstdomain&nbsp;.cu&lt;BR&gt;http_access&nbsp;allow&nbsp;cuba&nbsp;<br>
all&lt;BR&gt;########################################################&lt;BR&gt;#auth&nbsp;<br>
kerberos&nbsp;de&nbsp;<br>
windows#&lt;BR&gt;########################################################&lt;BR&gt;auth_param&nbsp;<br>
negotiate&nbsp;program&nbsp;/usr/lib/squid/negotiate_kerberos_auth&nbsp;-d&nbsp;-s&nbsp;&lt;A&nbsp;<br>
class=moz-txt-link-abbreviated&gt;HTTP/proxy.esines.cu@ESINES.CU&lt;/A&gt;&nbsp;-k&nbsp;<br>
/etc/squid/proxy.keytab&lt;BR&gt;external_acl_type&nbsp;Group&nbsp;ipv4&nbsp;children-startup=10&nbsp;<br>
children-max=15&nbsp;ttl=300&nbsp;negative_ttl=60&nbsp;%LOGIN&nbsp;<br>
/usr/lib/squid/ext_kerberos_ldap_group_acl&nbsp;-a&nbsp;-D&nbsp;ESINES.CU&lt;BR&gt;external_acl_type&nbsp;<br>
Group&nbsp;%LOGIN&nbsp;/usr/lib/squid/ext_kerberos_ldap_group_acl&nbsp;-g&nbsp;&lt;A&nbsp;<br>
class=moz-txt-link-abbreviated&gt;conexion@ESINES.CU&lt;/A&gt;&lt;BR&gt;acl&nbsp;auth&nbsp;proxy_auth&nbsp;<br>
REQUIRED&lt;BR&gt;acl&nbsp;GrupoInternet&nbsp;external&nbsp;Group&lt;BR&gt;http_access&nbsp;allow&nbsp;auth&nbsp;<br>
GrupoInternet&lt;BR&gt;http_access&nbsp;deny&nbsp;!auth&lt;BR&gt;http_access&nbsp;allow&nbsp;<br>
auth&lt;BR&gt;authenticate_ip_ttl&nbsp;600&nbsp;seconds&lt;BR&gt;acl&nbsp;multilogin&nbsp;max_user_ip&nbsp;-s&nbsp;<br>
1&lt;BR&gt;http_access&nbsp;deny&nbsp;<br>
multilogin&lt;BR&gt;########################################################&lt;BR&gt;#definicion&nbsp;<br>
de&nbsp;horarios#&lt;BR&gt;########################################################&lt;BR&gt;acl&nbsp;<br>
horafb&nbsp;time&nbsp;MTWHF&nbsp;09:00-12:00&nbsp;<br>
14:00-16:00&lt;BR&gt;########################################################&lt;BR&gt;#No&nbsp;<br>
permitir&nbsp;navegacion&nbsp;por&nbsp;<br>
ip&lt;BR&gt;########################################################&lt;BR&gt;acl&nbsp;<br>
bloquear_ip&nbsp;url_regex&nbsp;<br>
[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}&lt;BR&gt;http_access&nbsp;deny&nbsp;<br>
bloquear_ip&lt;BR&gt;########################################################&lt;BR&gt;#declaracion&nbsp;<br>
de&nbsp;acl&nbsp;no&nbsp;<br>
básicas#&lt;BR&gt;########################################################&lt;BR&gt;acl&nbsp;<br>
lista-negra&nbsp;dstdomain&nbsp;-n&nbsp;&quot;/etc/squid/lista-negra&quot;&lt;BR&gt;acl&nbsp;sociales&nbsp;dstdomain&nbsp;-n&nbsp;<br>
&quot;/etc/squid/sociales&quot;&lt;BR&gt;acl&nbsp;pcinternet&nbsp;src&nbsp;<br>
&quot;/etc/squid/ip-internet&quot;&lt;BR&gt;http_access&nbsp;deny&nbsp;lista-negra&lt;BR&gt;http_access&nbsp;deny&nbsp;<br>
sociales&nbsp;<br>
horafb&lt;BR&gt;#########################################################################&lt;BR&gt;#proxy&nbsp;<br>
padre&lt;BR&gt;#########################################################################&lt;BR&gt;cache_peer&nbsp;<br>
proxyservicio.etecsa.cu&nbsp;parent&nbsp;3040&nbsp;<br>
0&lt;BR&gt;#########################################################################&lt;BR&gt;#nunca&nbsp;<br>
permitimos&nbsp;conexiones&nbsp;directas,&nbsp;siempre&nbsp;a&nbsp;traves&nbsp;del&nbsp;<br>
proxy&lt;BR&gt;#########################################################################&lt;BR&gt;never_direct&nbsp;<br>
allow&nbsp;<br>
all&lt;BR&gt;#######################################################################&lt;BR&gt;#&nbsp;<br>
puerto&nbsp;en&nbsp;que&nbsp;el&nbsp;proxy&nbsp;escuchara&nbsp;a&nbsp;los&nbsp;clientes&lt;BR&gt;http_port&nbsp;<br>
8569&lt;BR&gt;#########################################################################&lt;BR&gt;#########################################################################&lt;BR&gt;#Cache&nbsp;<br>
#&lt;BR&gt;#########################################################################&lt;BR&gt;delay_initial_bucket_level&nbsp;<br>
75&lt;BR&gt;maximum_object_size&nbsp;32&nbsp;MB&lt;BR&gt;#cache_dir&nbsp;aufs&nbsp;/var/cache/squid&nbsp;10240&nbsp;16&nbsp;<br>
256&lt;BR&gt;cache_dir&nbsp;aufs&nbsp;/var/squid&nbsp;1024&nbsp;16&nbsp;256&lt;BR&gt;cache_mem&nbsp;256&nbsp;<br>
MB&lt;BR&gt;cache_store_log&nbsp;/var/squid/cache_store.log&lt;BR&gt;coredump_dir&nbsp;<br>
/var/squid/dump&lt;BR&gt;minimum_expiry_time&nbsp;550&nbsp;<br>
seconds&lt;BR&gt;############################&lt;BR&gt;#uso&nbsp;<br>
cache&lt;BR&gt;###########################&lt;BR&gt;client_db&nbsp;off&lt;BR&gt;offline_mode&nbsp;<br>
off&lt;BR&gt;cache_swap_low&nbsp;93&lt;BR&gt;cache_swap_high&nbsp;97&lt;BR&gt;cache_replacement_policy&nbsp;heap&nbsp;<br>
LUDFA&lt;BR&gt;memory_replacement_policy&nbsp;heap&nbsp;GDSF&lt;BR&gt;maximum_object_size_in_memory&nbsp;<br>
512&nbsp;KB&lt;BR&gt;half_closed_clients&nbsp;<br>
off&lt;BR&gt;###############################################################################&lt;BR&gt;#&nbsp;<br>
establecemos&nbsp;los&nbsp;archivos&nbsp;de&nbsp;volcado&nbsp;en&nbsp;/var/cache/squid/&lt;BR&gt;coredump_dir&nbsp;<br>
/var/squid/&lt;BR&gt;###############################################################################&lt;BR&gt;#Establecemos&nbsp;<br>
los&nbsp;patrones&nbsp;de&nbsp;refrescamiento&nbsp;de&nbsp;la&nbsp;cache&nbsp;#&lt;BR&gt;#patron&nbsp;de&nbsp;refrescamiento&nbsp;--&nbsp;<br>
tipo&nbsp;de&nbsp;archivo&nbsp;--&nbsp;tiempo&nbsp;del&nbsp;objeto&nbsp;--&nbsp;%de&nbsp;<br>
refresc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
amiento&nbsp;--&nbsp;tiempo&nbsp;#&lt;BR&gt;#1440&nbsp;minutos&nbsp;equivalen&nbsp;a&nbsp;24&nbsp;horas&nbsp;<br>
#&lt;BR&gt;################################&lt;BR&gt;#Refrescamiento&nbsp;de&nbsp;la&nbsp;<br>
cache&lt;BR&gt;################################&lt;BR&gt;refresh_pattern&nbsp;^ftp:&nbsp;1440&nbsp;20%&nbsp;<br>
4320&lt;BR&gt;refresh_pattern&nbsp;^gopher:&nbsp;1440&nbsp;0%&nbsp;4320&lt;BR&gt;refresh_pattern&nbsp;-i&nbsp;<br>
\.(gif|png|jpg|jpeg|ico)$&nbsp;1440&nbsp;90%&nbsp;4320&nbsp;override-expire&nbsp;<br>
ignor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
e-no-store&nbsp;ignore-private&lt;BR&gt;refresh_pattern&nbsp;-i&nbsp;<br>
\.(iso|avi|wav|mp3|mp4|mpeg|swf|flv|x-flv)$&nbsp;1440&nbsp;90%&nbsp;43200&nbsp;<br>
ov&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
erride-expire&nbsp;ignore-no-store&nbsp;ignore-private&lt;BR&gt;refresh_pattern&nbsp;-i&nbsp;<br>
\.(deb|exe|zip|tar|tgz|ram|rar|bin|ppt|doc|tiff|pdf|xls|docx|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
xlsx|pptx)$&nbsp;1440&nbsp;90%&nbsp;4320&nbsp;override-expire&nbsp;ignore-no-store&nbsp;<br>
ignore-private&lt;BR&gt;refresh_pattern&nbsp;-i&nbsp;\.index.(html|htm)$&nbsp;1440&nbsp;70%&nbsp;<br>
4320&lt;BR&gt;refresh_pattern&nbsp;-i&nbsp;\.(html|htm|css|js)$&nbsp;1440&nbsp;70%&nbsp;4320&lt;BR&gt;refresh_pattern&nbsp;<br>
.&nbsp;1440&nbsp;40%&nbsp;<br>
4320&lt;BR&gt;######################################################&lt;BR&gt;##cuanto&nbsp;el&nbsp;<br>
squid&nbsp;intenta&nbsp;cachear&nbsp;en&nbsp;mi&nbsp;nombre&lt;BR&gt;read_ahead_gap&nbsp;200&nbsp;KB&lt;BR&gt;quick_abort_min&nbsp;<br>
1024&nbsp;KB&lt;BR&gt;quick_abort_max&nbsp;16&nbsp;KB&lt;BR&gt;quick_abort_pct&nbsp;<br>
95&lt;BR&gt;###############################################################################&lt;BR&gt;#defino&nbsp;<br>
las&nbsp;piscinas&nbsp;de&nbsp;<br>
retardo&lt;BR&gt;###############################################################################&lt;BR&gt;delay_pools&nbsp;<br>
2&lt;BR&gt;&lt;BR&gt;#Canal&nbsp;1&nbsp;advertising&lt;BR&gt;delay_class&nbsp;1&nbsp;2&lt;BR&gt;delay_access&nbsp;1&nbsp;allow&nbsp;<br>
sociales&nbsp;!GrupoInternet&lt;BR&gt;delay_access&nbsp;1&nbsp;deny&nbsp;all&lt;BR&gt;delay_parameters&nbsp;1&nbsp;<br>
32768/16348&nbsp;16348/16348&lt;BR&gt;&lt;BR&gt;#Canal&nbsp;1&nbsp;sociales&lt;BR&gt;delay_class&nbsp;2&nbsp;<br>
1&lt;BR&gt;delay_access&nbsp;2&nbsp;allow&nbsp;pcinternet&lt;BR&gt;delay_access&nbsp;2&nbsp;deny&nbsp;<br>
all&lt;BR&gt;delay_parameters&nbsp;2&nbsp;65536/32768&lt;BR&gt;&lt;BR&gt;&lt;/P&gt;&lt;PRE&nbsp;class=moz-signature&nbsp;cols=&quot;72&quot;&gt;--&nbsp;<br>
Saludos&nbsp;cordiales<br>
<br>
Lic.&nbsp;Alex&nbsp;Gutiérrez&nbsp;Martínez<br>
<br>
&lt;/PRE&gt;<br>
&lt;P&gt;<br>
&lt;HR&gt;<br>
_______________________________________________&lt;BR&gt;squid-users&nbsp;mailing&nbsp;<br>
list&lt;BR&gt;squid-users@lists.squid-cache.org&lt;BR&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;BR&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/BODY&gt;&lt;/HTML&gt;<br>

</tt>
