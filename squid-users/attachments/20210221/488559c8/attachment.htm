<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Hello,&lt;br&gt;&lt;br&gt;&lt;/div&gt;I&nbsp;am&nbsp;a&nbsp;little&nbsp;puzzled&nbsp;by&nbsp;something.&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;using&nbsp;squid&nbsp;4.11&nbsp;in&nbsp;a&nbsp;docker&nbsp;container.&lt;/div&gt;So&nbsp;I&nbsp;am&nbsp;setting&nbsp;things&nbsp;up&nbsp;so&nbsp;that&nbsp;I&nbsp;have&nbsp;two&nbsp;docker&nbsp;containers,&nbsp;a&nbsp;squid&nbsp;container&nbsp;and&nbsp;an&nbsp;e2guardian&nbsp;container,&nbsp;where&nbsp;the&nbsp;e2guardian&nbsp;is&nbsp;an&nbsp;ICAP&nbsp;service.&nbsp;I&nbsp;am&nbsp;connecting&nbsp;these&nbsp;two&nbsp;containers&nbsp;to&nbsp;the&nbsp;same&nbsp;network&nbsp;and&nbsp;giving&nbsp;them&nbsp;names&nbsp;squid&nbsp;and&nbsp;e2guardian,&nbsp;respectively.&lt;br&gt;&lt;br&gt;&lt;/div&gt;I&nbsp;added&nbsp;the&nbsp;following&nbsp;lines&nbsp;to&nbsp;my&nbsp;squid&nbsp;config:&lt;br&gt;&lt;b&gt;icap_service&nbsp;service_req&nbsp;reqmod_precache&nbsp;bypass=0&nbsp;icap://e2guardian:1344/request&lt;br&gt;&lt;/b&gt;&lt;div&gt;&lt;b&gt;icap_service&nbsp;service_resp&nbsp;respmod_precache&nbsp;bypass=0&nbsp;icap://e2guardian:1344/response&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;But&nbsp;when&nbsp;I&nbsp;try&nbsp;to&nbsp;access&nbsp;I&nbsp;get&nbsp;an&nbsp;ICAP&nbsp;error,&nbsp;and&nbsp;the&nbsp;following&nbsp;log&nbsp;message:&lt;/div&gt;&lt;div&gt;&lt;b&gt;essential&nbsp;ICAP&nbsp;service&nbsp;is&nbsp;down&nbsp;after&nbsp;an&nbsp;options&nbsp;fetch&nbsp;failure:&nbsp;icap://e2guardian:1344/request&nbsp;[down,!opt]&lt;/b&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;I&nbsp;exec&nbsp;into&nbsp;the&nbsp;docker&nbsp;container&nbsp;and&nbsp;ping&nbsp;e2guardian,&nbsp;it&nbsp;resolves&nbsp;fine.&nbsp;If&nbsp;I&nbsp;take&nbsp;the&nbsp;IP&nbsp;address&nbsp;of&nbsp;the&nbsp;docker&nbsp;container&nbsp;and&nbsp;add&nbsp;it&nbsp;to&nbsp;that&nbsp;ICAP&nbsp;line&nbsp;in&nbsp;my&nbsp;squid.conf,&nbsp;it&nbsp;works&nbsp;just&nbsp;fine.&nbsp;But&nbsp;I&nbsp;don&#39;t&nbsp;want&nbsp;to&nbsp;have&nbsp;to&nbsp;do&nbsp;this&nbsp;obviously&nbsp;because&nbsp;I&nbsp;don&#39;t&nbsp;know&nbsp;what&nbsp;the&nbsp;IP&nbsp;of&nbsp;the&nbsp;docker&nbsp;container&nbsp;will&nbsp;be&nbsp;when&nbsp;it&nbsp;comes&nbsp;up.&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;should&nbsp;also&nbsp;mention&nbsp;that&nbsp;if&nbsp;I&nbsp;manually&nbsp;add&nbsp;the&nbsp;docker&nbsp;IP&nbsp;to&nbsp;my&nbsp;/etc/hosts&nbsp;file&nbsp;on&nbsp;the&nbsp;squid&nbsp;container&nbsp;and&nbsp;give&nbsp;it&nbsp;the&nbsp;hostname&nbsp;of&nbsp;e2guardian,&nbsp;it&nbsp;&lt;i&gt;still&lt;/i&gt;&nbsp;doesn&#39;t&nbsp;work.&nbsp;This&nbsp;inclines&nbsp;me&nbsp;to&nbsp;believe&nbsp;that,&nbsp;for&nbsp;some&nbsp;reason,&nbsp;no&nbsp;name&nbsp;resolution&nbsp;of&nbsp;any&nbsp;kind&nbsp;is&nbsp;performed&nbsp;when&nbsp;resolving&nbsp;the&nbsp;ICAP&nbsp;service.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;problem&nbsp;looks&nbsp;very&nbsp;similar&nbsp;to&nbsp;the&nbsp;following&nbsp;problem:&lt;br&gt;&lt;a&nbsp;href=&quot;https://squid-users.squid-cache.narkive.com/YZLtJNiW/dns-lookup-fails-initially-for-fqdn-in-squid&quot;&gt;https://squid-users.squid-cache.narkive.com/YZLtJNiW/dns-lookup-fails-initially-for-fqdn-in-squid&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Except&nbsp;that&nbsp;in&nbsp;my&nbsp;case&nbsp;it&nbsp;never&nbsp;comes&nbsp;up&nbsp;even&nbsp;after&nbsp;the&nbsp;three&nbsp;minutes,&nbsp;and&nbsp;it&nbsp;doesn&#39;t&nbsp;work&nbsp;either&nbsp;if&nbsp;I&nbsp;add&nbsp;e2guardian&nbsp;to&nbsp;my&nbsp;/etc/hosts&nbsp;file.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;should&nbsp;also&nbsp;mention&nbsp;that&nbsp;I&nbsp;am&nbsp;waiting&nbsp;at&nbsp;least&nbsp;three&nbsp;seconds&nbsp;after&nbsp;the&nbsp;e2guardian&nbsp;container&nbsp;comes&nbsp;up&nbsp;before&nbsp;I&nbsp;start&nbsp;the&nbsp;squid&nbsp;container.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Can&nbsp;someone&nbsp;help&nbsp;me&nbsp;diagnose&nbsp;this?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
