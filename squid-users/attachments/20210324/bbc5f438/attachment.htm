<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hi,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Probably,&nbsp;me&nbsp;missing&nbsp;on&nbsp;something&nbsp;silly&nbsp;or&nbsp;it&nbsp;can&#39;t&nbsp;be&nbsp;done&nbsp;but&nbsp;I&nbsp;don&#39;t&nbsp;know&nbsp;why&nbsp;but&nbsp;squid&nbsp;won&#39;t&nbsp;<br>
return&nbsp;the&nbsp;cached&nbsp;version&nbsp;even&nbsp;when&nbsp;I&nbsp;turn&nbsp;all&nbsp;override&nbsp;options&nbsp;ON&nbsp;in&nbsp;<br>
refresh_pattern.&nbsp;It&#39;s&nbsp;an&nbsp;API&nbsp;call&nbsp;where&nbsp;we&nbsp;call&nbsp;many&nbsp;of&nbsp;the&nbsp;same&nbsp;<br>
requests&nbsp;and&nbsp;by&nbsp;knowing&nbsp;it&nbsp;we&nbsp;would&nbsp;like&nbsp;to&nbsp;stop&nbsp;those&nbsp;calls&nbsp;to&nbsp;go&nbsp;out&nbsp;<br>
if&nbsp;it&#39;s&nbsp;already&nbsp;been&nbsp;sent&nbsp;once.&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:monospace&quot;&gt;With&nbsp;debug,&nbsp;I&nbsp;can&nbsp;see&nbsp;the&nbsp;rule&nbsp;is&nbsp;matched&nbsp;and&nbsp;the&nbsp;cache&nbsp;is&nbsp;fresh&nbsp;but&nbsp;still&nbsp;in&nbsp;access.log&nbsp;is&nbsp;TCP_REFRESH_MODIFIED&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:monospace&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:monospace&quot;&gt;squid&nbsp;conf:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:monospace&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);background-color:rgb(255,255,255)&quot;&gt;refresh_pattern<br>
&nbsp;-i&nbsp;&lt;URL&gt;&nbsp;4320&nbsp;80%&nbsp;129600&nbsp;override-lastmod&nbsp;override-expire&nbsp;<br>
ignore-reload&nbsp;ignore-no-store&nbsp;ignore-private&nbsp;store-stale&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:monospace&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:monospace&quot;&gt;curl&nbsp;headers:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:monospace&quot;&gt;&lt;span&nbsp;style=&quot;font-family:monospace&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(0,0,0);background-color:rgb(255,255,255)&quot;&gt;curl&nbsp;--insecure&nbsp;--verbose&nbsp;--request&nbsp;GET&nbsp;--url&nbsp;&#39;URL&lt;/span&gt;&#39;&nbsp;&gt;/dev/null<br>
&lt;br&gt;*&nbsp;TCP_NODELAY&nbsp;set<br>
&lt;br&gt;*&nbsp;ALPN,&nbsp;offering&nbsp;h2<br>
&lt;br&gt;*&nbsp;ALPN,&nbsp;offering&nbsp;http/1.1<br>
&lt;br&gt;*&nbsp;successfully&nbsp;set&nbsp;certificate&nbsp;verify&nbsp;locations:<br>
&lt;br&gt;*&nbsp;  CAfile:&nbsp;/etc/ssl/certs/ca-certificates.crt<br>
&lt;br&gt;&nbsp; CApath:&nbsp;/etc/ssl/certs<br>
&lt;br&gt;}&nbsp;[5&nbsp;bytes&nbsp;data]<br>
&lt;br&gt;*&nbsp;TLSv1.3&nbsp;(OUT),&nbsp;TLS&nbsp;handshake,&nbsp;Client&nbsp;hello&nbsp;(1):<br>
&lt;br&gt;}&nbsp;[512&nbsp;bytes&nbsp;data]<br>
&lt;br&gt;*&nbsp;TLSv1.3&nbsp;(IN),&nbsp;TLS&nbsp;handshake,&nbsp;Server&nbsp;hello&nbsp;(2):<br>
&lt;br&gt;{&nbsp;[122&nbsp;bytes&nbsp;data]<br>
&lt;br&gt;*&nbsp;TLSv1.3&nbsp;(IN),&nbsp;TLS&nbsp;handshake,&nbsp;Encrypted&nbsp;Extensions&nbsp;(8):<br>
&lt;br&gt;{&nbsp;[6&nbsp;bytes&nbsp;data]<br>
&lt;br&gt;*&nbsp;TLSv1.3&nbsp;(IN),&nbsp;TLS&nbsp;handshake,&nbsp;Certificate&nbsp;(11):<br>
&lt;br&gt;{&nbsp;[1956&nbsp;bytes&nbsp;data]<br>
&lt;br&gt;*&nbsp;TLSv1.3&nbsp;(IN),&nbsp;TLS&nbsp;handshake,&nbsp;CERT&nbsp;verify&nbsp;(15):<br>
&lt;br&gt;{&nbsp;[78&nbsp;bytes&nbsp;data]<br>
&lt;br&gt;*&nbsp;TLSv1.3&nbsp;(IN),&nbsp;TLS&nbsp;handshake,&nbsp;Finished&nbsp;(20):<br>
&lt;br&gt;{&nbsp;[52&nbsp;bytes&nbsp;data]<br>
&lt;br&gt;*&nbsp;TLSv1.3&nbsp;(OUT),&nbsp;TLS&nbsp;change&nbsp;cipher,&nbsp;Change&nbsp;cipher&nbsp;spec&nbsp;(1):<br>
&lt;br&gt;}&nbsp;[1&nbsp;bytes&nbsp;data]<br>
&lt;br&gt;*&nbsp;TLSv1.3&nbsp;(OUT),&nbsp;TLS&nbsp;handshake,&nbsp;Finished&nbsp;(20):<br>
&lt;br&gt;}&nbsp;[52&nbsp;bytes&nbsp;data]<br>
&lt;br&gt;*&nbsp;SSL&nbsp;connection&nbsp;using&nbsp;TLSv1.3&nbsp;/&nbsp;TLS_AES_256_GCM_SHA384<br>
&lt;br&gt;&lt;br&gt;&gt;&nbsp;GET&nbsp;URL&nbsp;HTTP/1.1<br>
&lt;br&gt;&gt;&nbsp;Host:&nbsp;URL&lt;br&gt;&gt;&nbsp;User-Agent:&nbsp;curl/7.68.0<br>
&lt;br&gt;&gt;&nbsp;Accept:&nbsp;*/*<br>
&lt;br&gt;&gt;<br>
&lt;br&gt;{&nbsp;[5&nbsp;bytes&nbsp;data]<br>
&lt;br&gt;*&nbsp;TLSv1.3&nbsp;(IN),&nbsp;TLS&nbsp;handshake,&nbsp;Newsession&nbsp;Ticket&nbsp;(4):<br>
&lt;br&gt;{&nbsp;[217&nbsp;bytes&nbsp;data]<br>
&lt;br&gt;*&nbsp;TLSv1.3&nbsp;(IN),&nbsp;TLS&nbsp;handshake,&nbsp;Newsession&nbsp;Ticket&nbsp;(4):<br>
&lt;br&gt;{&nbsp;[217&nbsp;bytes&nbsp;data]<br>
&lt;br&gt;*&nbsp;old&nbsp;SSL&nbsp;session&nbsp;ID&nbsp;is&nbsp;stale,&nbsp;removing<br>
&lt;br&gt;{&nbsp;[5&nbsp;bytes&nbsp;data]<br>
&lt;br&gt;*&nbsp;Mark&nbsp;bundle&nbsp;as&nbsp;not&nbsp;supporting&nbsp;multiuse<br>
&lt;br&gt;&lt;&nbsp;HTTP/1.1&nbsp;200&nbsp;OK<br>
&lt;br&gt;&lt;&nbsp;Cache-Control:&nbsp;no-cache<br>
&lt;br&gt;&lt;&nbsp;Content-Type:&nbsp;application/json<br>
&lt;br&gt;&lt;&nbsp;X-Cloud-Trace-Context:&nbsp;d3c27833b8b4312ce31a2dbae7e12fd0<br>
&lt;br&gt;&lt;&nbsp;Date:&nbsp;Wed,&nbsp;24&nbsp;Mar&nbsp;2021&nbsp;15:04:34&nbsp;GMT<br>
&lt;br&gt;&lt;&nbsp;Server:&nbsp;Google&nbsp;Frontend<br>
&lt;br&gt;&lt;&nbsp;Content-Length:&nbsp;7950<br>
&lt;br&gt;&lt;&nbsp;X-Cache:&nbsp;MISS&nbsp;from&nbsp;server&lt;br&gt;&lt;&nbsp;X-Cache-Lookup:&nbsp;HIT&nbsp;from&nbsp;server&lt;br&gt;&lt;&nbsp;Via:&nbsp;1.1&nbsp;server&nbsp;(squid/4.14)<br>
&lt;br&gt;&lt;&nbsp;Connection:&nbsp;keep-alive<br>
&lt;br&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:monospace&quot;&gt;&lt;span&nbsp;style=&quot;font-family:monospace&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:monospace&quot;&gt;&lt;span&nbsp;style=&quot;font-family:monospace&quot;&gt;access&nbsp;log:&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:monospace&quot;&gt;&lt;span&nbsp;style=&quot;font-family:monospace&quot;&gt;243&nbsp;172.16.230.249&nbsp;TCP_REFRESH_MODIFIED/200&nbsp;8328&nbsp;GET&nbsp;URL&nbsp;-&nbsp;<br>
ORIGINAL_DST/IP&nbsp;application/json&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:monospace&quot;&gt;&lt;span&nbsp;style=&quot;font-family:monospace&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:monospace&quot;&gt;&lt;span&nbsp;style=&quot;font-family:monospace&quot;&gt;cache&nbsp;log:&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;table&nbsp;id=&quot;gmail-m_1284902802012111177gmail-grid-log&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&nbsp;style=&quot;width:11em&quot;&gt;2021-03-24T15:04:34&lt;/td&gt;&lt;td&nbsp;style=&quot;width:2em&quot;&gt;squid&lt;/td&gt;&lt;td&gt;.710<br>
&nbsp;kid1|&nbsp;11,3|&nbsp;http.cc(982)&nbsp;haveParsedReplyHeaders:&nbsp;decided:&nbsp;cache&nbsp;<br>
positively&nbsp;and&nbsp;share&nbsp;because&nbsp;refresh&nbsp;check&nbsp;returned&nbsp;cacheable;&nbsp;HTTP&nbsp;<br>
status&nbsp;200&nbsp;e:=p2V/0x34868914670*3&lt;/td&gt;&lt;td&nbsp;style=&quot;width:2em&quot;&gt; &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&nbsp;style=&quot;width:11em&quot;&gt;2021-03-24T15:04:34&lt;/td&gt;&lt;td&nbsp;style=&quot;width:2em&quot;&gt;squid&lt;/td&gt;&lt;td&gt;.710&nbsp;kid1|&nbsp;22,3|&nbsp;refresh.cc(470)&nbsp;refreshCheck:&nbsp;returning&nbsp;FRESH_MIN_RULE&lt;/td&gt;&lt;td&nbsp;style=&quot;width:2em&quot;&gt; &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&nbsp;style=&quot;width:11em&quot;&gt;2021-03-24T15:04:34&lt;/td&gt;&lt;td&nbsp;style=&quot;width:2em&quot;&gt;squid&lt;/td&gt;&lt;td&gt;.710&nbsp;kid1|&nbsp;22,3|&nbsp;refresh.cc(455)&nbsp;refreshCheck:&nbsp;Object&nbsp;isn&#39;t&nbsp;stale..&lt;/td&gt;&lt;td&nbsp;style=&quot;width:2em&quot;&gt; &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&nbsp;style=&quot;width:11em&quot;&gt;2021-03-24T15:04:34&lt;/td&gt;&lt;td&nbsp;style=&quot;width:2em&quot;&gt;squid&lt;/td&gt;&lt;td&gt;.710&nbsp;kid1|&nbsp;22,3|&nbsp;refresh.cc(327)&nbsp;refreshCheck:&nbsp;Staleness&nbsp;=&nbsp;-1&lt;/td&gt;&lt;td&nbsp;style=&quot;width:2em&quot;&gt; &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&nbsp;style=&quot;width:11em&quot;&gt;2021-03-24T15:04:34&lt;/td&gt;&lt;td&nbsp;style=&quot;width:2em&quot;&gt;squid&lt;/td&gt;&lt;td&gt;.710&nbsp;kid1|&nbsp;22,3|&nbsp;refresh.cc(199)&nbsp;refreshStaleness:&nbsp;FRESH:&nbsp;age&nbsp;(60&nbsp;sec)&nbsp;is&nbsp;less&nbsp;than&nbsp;configured&nbsp;minimum&nbsp;(259200&nbsp;sec)&lt;/td&gt;&lt;td&nbsp;style=&quot;width:2em&quot;&gt; &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&nbsp;style=&quot;width:11em&quot;&gt;2021-03-24T15:04:34&lt;/td&gt;&lt;td&nbsp;style=&quot;width:2em&quot;&gt;squid&lt;/td&gt;&lt;td&gt;.710&nbsp;kid1|&nbsp;22,3|&nbsp;refresh.cc(166)&nbsp;refreshStaleness:&nbsp;No&nbsp;explicit&nbsp;expiry&nbsp;given,&nbsp;using&nbsp;heuristics&nbsp;to&nbsp;determine&nbsp;freshness&lt;/td&gt;&lt;td&nbsp;style=&quot;width:2em&quot;&gt; &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&nbsp;style=&quot;width:11em&quot;&gt;2021-03-24T15:04:34&lt;/td&gt;&lt;td&nbsp;style=&quot;width:2em&quot;&gt;squid&lt;/td&gt;&lt;td&gt;.710&nbsp;kid1|&nbsp;22,3|&nbsp;refresh.cc(307)&nbsp;refreshCheck:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;entry-&gt;timestamp:&nbsp;&nbsp;&nbsp;&nbsp;Wed,&nbsp;24&nbsp;Mar&nbsp;2021&nbsp;15:04:34&nbsp;GMT&lt;/td&gt;&lt;td&nbsp;style=&quot;width:2em&quot;&gt; &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&nbsp;style=&quot;width:11em&quot;&gt;2021-03-24T15:04:34&lt;/td&gt;&lt;td&nbsp;style=&quot;width:2em&quot;&gt;squid&lt;/td&gt;&lt;td&gt;.710&nbsp;kid1|&nbsp;22,3|&nbsp;refresh.cc(305)&nbsp;refreshCheck:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_time:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Wed,&nbsp;24&nbsp;Mar&nbsp;2021&nbsp;15:05:34&nbsp;GMT&lt;/td&gt;&lt;td&nbsp;style=&quot;width:2em&quot;&gt; &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&nbsp;style=&quot;width:11em&quot;&gt;2021-03-24T15:04:34&lt;/td&gt;&lt;td&nbsp;style=&quot;width:2em&quot;&gt;squid&lt;/td&gt;&lt;td&gt;.710&nbsp;kid1|&nbsp;22,3|&nbsp;refresh.cc(303)&nbsp;refreshCheck:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;age:&nbsp;&nbsp;&nbsp;&nbsp;60&lt;/td&gt;&lt;td&nbsp;style=&quot;width:2em&quot;&gt; &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&nbsp;style=&quot;width:11em&quot;&gt;2021-03-24T15:04:34&lt;/td&gt;&lt;td&nbsp;style=&quot;width:2em&quot;&gt;squid&lt;/td&gt;&lt;td&gt;.710&nbsp;kid1|&nbsp;22,3|&nbsp;refresh.cc(301)&nbsp;refreshCheck:&nbsp;Matched&nbsp;&#39;URL&nbsp;259200&nbsp;80%%&nbsp;7776000&#39;&lt;/td&gt;&lt;td&nbsp;style=&quot;width:2em&quot;&gt; &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&nbsp;style=&quot;width:11em&quot;&gt;2021-03-24T15:04:34&lt;/td&gt;&lt;td&nbsp;style=&quot;width:2em&quot;&gt;squid&lt;/td&gt;&lt;td&gt;.710<br>
&nbsp;kid1|&nbsp;22,3|&nbsp;refresh.cc(279)&nbsp;refreshCheck:&nbsp;checking&nbsp;freshness&nbsp;of&nbsp;URI:&nbsp;<br>
&lt;a&nbsp;href=&quot;https://URL&quot;&nbsp;target=&quot;_blank&quot;&gt;https://URL&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
