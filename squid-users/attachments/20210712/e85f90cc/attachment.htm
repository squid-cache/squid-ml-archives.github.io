<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;I&nbsp;have&nbsp;the&nbsp;following&nbsp;problem&nbsp;on&nbsp;my&nbsp;Squid&nbsp;4.6&nbsp;on&nbsp;Debian&nbsp;10.&lt;br&gt;&lt;br&gt;Squid&nbsp;does&nbsp;not&nbsp;redirect&nbsp;the&nbsp;user&nbsp;to&nbsp;the&nbsp;error&nbsp;page&nbsp;when&nbsp;blocking&nbsp;an&nbsp;HTTPS&nbsp;url.&nbsp;On&nbsp;HTTP&nbsp;it&nbsp;works&nbsp;correctly.&lt;br&gt;&lt;br&gt;I&nbsp;don&#39;t&nbsp;use&nbsp;transparent&nbsp;proxy.&nbsp;The&nbsp;proxy&nbsp;is&nbsp;manually&nbsp;configured&nbsp;in&nbsp;the&nbsp;web&nbsp;browser.&lt;br&gt;&lt;br&gt;Here&nbsp;is&nbsp;my&nbsp;squid.conf&nbsp;configuration&nbsp;file:&lt;br&gt;&lt;br&gt;http_port&nbsp;3128&lt;br&gt;cache_mem&nbsp;256&nbsp;MB&lt;br&gt;cache_swap_low&nbsp;90&lt;br&gt;cache_swap_high&nbsp;95&lt;br&gt;&lt;br&gt;maximum_object_size&nbsp;512&nbsp;MB&lt;br&gt;minimum_object_size&nbsp;0&nbsp;KB&lt;br&gt;maximum_object_size_in_memory&nbsp;128&nbsp;KB&lt;br&gt;&lt;br&gt;access_log&nbsp;/var/log/squid/access.log&lt;br&gt;cache_log&nbsp;/var/log/squid/cache.log&lt;br&gt;&lt;br&gt;error_directory&nbsp;/usr/share/squid/errors/pt-br&lt;br&gt;cache_mgr&nbsp;&lt;a&nbsp;href=&quot;mailto:rede@empresa.com.br&quot;&gt;rede@empresa.com.br&lt;/a&gt;&lt;br&gt;&lt;br&gt;cache_replacement_policy&nbsp;heap&nbsp;LFUDA&lt;br&gt;memory_replacement_policy&nbsp;heap&nbsp;LFUDA&lt;br&gt;&lt;br&gt;fqdncache_size&nbsp;1024&lt;br&gt;&lt;br&gt;refresh_pattern&nbsp;^ftp:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1440&nbsp; &nbsp; 20%&nbsp; &nbsp; &nbsp;10080&lt;br&gt;refresh_pattern&nbsp;^gopher:&nbsp; &nbsp; &nbsp; &nbsp; 1440&nbsp; &nbsp; 0%&nbsp; &nbsp; &nbsp; 1440&lt;br&gt;refresh_pattern&nbsp;-i&nbsp;(/cgi-bin/|\?)&nbsp;0&nbsp; &nbsp; &nbsp;0%&nbsp; &nbsp; &nbsp; 0&lt;br&gt;refresh_pattern&nbsp;.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;20%&nbsp; &nbsp; &nbsp;4320&lt;br&gt;&lt;br&gt;#Prioriza&nbsp;resolucao&nbsp;DNS&nbsp;IPv4&lt;br&gt;dns_v4_first&nbsp;on&lt;br&gt;&lt;br&gt;cache_dir&nbsp;aufs&nbsp;/var/spool/squid&nbsp;600&nbsp;16&nbsp;256&lt;br&gt;&lt;br&gt;visible_hostname&nbsp;&quot;Monitoramento-de-Acesso-a-Internet&quot;&lt;br&gt;&lt;br&gt;###&nbsp;acls&lt;br&gt;acl&nbsp;SSL_ports&nbsp; port&nbsp;443&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;21&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;ftp&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;70&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;gopher&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;80&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;http&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;88&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;kerberos&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;123&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #&nbsp;ntp&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;210&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #&nbsp;wais&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;280&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #&nbsp;http-mgmt&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;3456&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;Siafi&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;389&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #&nbsp;ldap&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;443&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #&nbsp;https&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;488&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #&nbsp;gss-http&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;563&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #&nbsp;snews&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;591&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #&nbsp;filemaker&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;777&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #&nbsp;multiling&nbsp;http&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;3001&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;imprenssa&nbsp;nacional&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;8080&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;http&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;8443&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;http&lt;br&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;1025-65535&nbsp; &nbsp;#&nbsp;unregistered&nbsp;ports&lt;br&gt;acl&nbsp;CONNECT&nbsp;method&nbsp;CONNECT&lt;br&gt;&lt;br&gt;acl&nbsp;sistemas-bloqueados&nbsp;dstdomain&nbsp;&quot;/etc/squid/acls/sistemas-bloqueados&quot;&lt;br&gt;http_access&nbsp;deny&nbsp;sistemas-bloqueados&nbsp;&lt;br&gt;&lt;br&gt;##&nbsp;Negotiate&nbsp;kerberos/NTLM&nbsp;module&lt;br&gt;auth_param&nbsp;negotiate&nbsp;program&nbsp;/usr/lib/squid/negotiate_wrapper_auth&nbsp;--ntlm&nbsp;/usr/bin/ntlm_auth&nbsp;--helper-protocol=squid-2.5-ntlmssp&nbsp;--use-cached-creds&nbsp;--kerberos&nbsp;/usr/lib/squid/negotiate_kerberos_auth&nbsp;-s&nbsp;GSS_C_NO_NAME&lt;br&gt;auth_param&nbsp;negotiate&nbsp;children&nbsp;200&nbsp;startup=15&nbsp;idle=5&lt;br&gt;auth_param&nbsp;negotiate&nbsp;keep_alive&nbsp;on&lt;br&gt;&lt;br&gt;##&nbsp;NTLM&nbsp;Auth&lt;br&gt;auth_param&nbsp;ntlm&nbsp;program&nbsp;/usr/bin/ntlm_auth&nbsp;--use-cached-creds&nbsp;--helper-protocol=squid-2.5-ntlmssp&lt;br&gt;auth_param&nbsp;ntlm&nbsp;children&nbsp;110&nbsp;startup=5&nbsp;idle=5&lt;br&gt;auth_param&nbsp;ntlm&nbsp;keep_alive&nbsp;on&lt;br&gt;auth_param&nbsp;basic&nbsp;realm&nbsp;&quot;Squid&nbsp;Proxy&quot;&lt;br&gt;&lt;br&gt;#&nbsp;Incorpora&nbsp;as&nbsp;regras&nbsp;do&nbsp;SquidGuard&lt;br&gt;#redirect_program&nbsp;/usr/bin/squidGuard&lt;br&gt;#redirect_children&nbsp;20&lt;br&gt;#redirector_bypass&nbsp;on&lt;br&gt;&lt;br&gt;acl&nbsp;ntlm_users&nbsp;proxy_auth&nbsp;REQUIRED&lt;br&gt;http_access&nbsp;allow&nbsp;ntlm_users&lt;br&gt;http_access&nbsp;deny&nbsp;all&lt;br&gt;&lt;br&gt;###&nbsp;LAN&nbsp;#####&lt;br&gt;acl&nbsp;rede_usuarios&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://192.168.0.0/16&quot;&gt;192.168.0.0/16&lt;/a&gt;&lt;br&gt;&lt;br&gt;###&nbsp;Regras&nbsp;Padrao&nbsp;do&nbsp;Squid&lt;br&gt;#http_access&nbsp;deny&nbsp;manager&lt;br&gt;http_access&nbsp;deny&nbsp;!Safe_ports&lt;br&gt;http_access&nbsp;deny&nbsp;CONNECT&nbsp;!SSL_ports&lt;br&gt;&lt;br&gt;http_access&nbsp;allow&nbsp;localhost&lt;br&gt;#libera&nbsp;a&nbsp;resposta&nbsp;a&nbsp;partir&nbsp;do&nbsp;proxy&lt;br&gt;http_reply_access&nbsp;allow&nbsp;all&nbsp;&lt;br&gt;#acl&nbsp;manager&nbsp;proto&nbsp;cache_object&lt;br&gt;&lt;br&gt;###&nbsp;Allow&nbsp;LAN&lt;br&gt;http_access&nbsp;allow&nbsp;rede_usuarios&lt;br&gt;&lt;br&gt;#cache_effective_user&nbsp;proxy&lt;br&gt;coredump_dir&nbsp;/var/spool/squid&lt;br&gt;&lt;br&gt;#&nbsp;SquidGuard&lt;br&gt;url_rewrite_program&nbsp;/usr/bin/squidGuard&lt;br&gt;redirector_bypass&nbsp;on&lt;br&gt;&lt;br&gt;&lt;br&gt;As&nbsp;I&nbsp;don&#39;t&nbsp;use&nbsp;proxy&nbsp;transparence,&nbsp;is&nbsp;it&nbsp;necessary&nbsp;to&nbsp;create&nbsp;SSL&nbsp;certificate&nbsp;for&nbsp;my&nbsp;Proxy&nbsp;server?&lt;br&gt;&lt;br&gt;Can&nbsp;anybody&nbsp;help&nbsp;me?&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Márcio&nbsp;Bacci&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
