<tt>
&lt;div&nbsp;dir=&quot;rtl&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;By&nbsp;the&nbsp;help&nbsp;of&nbsp;God.&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Sorry, &lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;I&nbsp;thought&nbsp;I&nbsp;sent&nbsp;it&nbsp;in&nbsp;the&nbsp;last&nbsp;email.&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;I&nbsp;found&nbsp;out&nbsp;what&nbsp;was&nbsp;the&nbsp;problem,&nbsp;I&nbsp;built&nbsp;squid&nbsp;without&nbsp;libcap.&nbsp;:/&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Anyway&nbsp;sorry&nbsp;for&nbsp;the&nbsp;time&nbsp;loss,&nbsp;and&nbsp;thanks&nbsp;for&nbsp;your&nbsp;help.&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Regards,&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Ben&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;rtl&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;‫בתאריך&nbsp;יום&nbsp;ג׳,&nbsp;13&nbsp;ביולי&nbsp;2021&nbsp;ב-13:48&nbsp;מאת&nbsp;‪Eliezer&nbsp;Croitoru‬‏&nbsp;&lt;‪&lt;a&nbsp;href=&quot;mailto:ngtech1ltd@gmail.com&quot;&gt;ngtech1ltd@gmail.com&lt;/a&gt;‬‏&gt;:‬&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;Hey&nbsp;Ben,&lt;br&gt;<br>
&lt;br&gt;<br>
Still&nbsp;waiting&nbsp;for&nbsp;the&nbsp;relevant&nbsp;output.&lt;br&gt;<br>
Once&nbsp;I&nbsp;will&nbsp;have&nbsp;the&nbsp;relevant&nbsp;details&nbsp;I&nbsp;will&nbsp;probably&nbsp;be&nbsp;able&nbsp;to&nbsp;verify&nbsp;how&nbsp;and&nbsp;what&nbsp;is&nbsp;the&nbsp;issue.&lt;br&gt;<br>
&lt;br&gt;<br>
Eliezer&lt;br&gt;<br>
&lt;br&gt;<br>
-----Original&nbsp;Message-----&lt;br&gt;<br>
From:&nbsp;Eliezer&nbsp;Croitoru&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:ngtech1ltd@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;ngtech1ltd@gmail.com&lt;/a&gt;&gt;&nbsp;&lt;br&gt;<br>
Sent:&nbsp;Thursday,&nbsp;July&nbsp;8,&nbsp;2021&nbsp;12:04&nbsp;AM&lt;br&gt;<br>
To:&nbsp;&#39;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&#39;&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&gt;&lt;br&gt;<br>
Cc:&nbsp;&#39;Ben&nbsp;Goz&#39;&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:ben.goz87@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;ben.goz87@gmail.com&lt;/a&gt;&gt;&lt;br&gt;<br>
Subject:&nbsp;RE:&nbsp;[squid-users]&nbsp;TPROXY&nbsp;Error&lt;br&gt;<br>
&lt;br&gt;<br>
Hey&nbsp;Ben,&lt;br&gt;<br>
&lt;br&gt;<br>
You&nbsp;are&nbsp;missing&nbsp;the&nbsp;critical&nbsp;output&nbsp;of&nbsp;the&nbsp;full&nbsp;command:&lt;br&gt;<br>
Ip&nbsp;route&nbsp;show&nbsp;table&nbsp;100&lt;br&gt;<br>
&lt;br&gt;<br>
What&nbsp;you&nbsp;posted&nbsp;was:&lt;br&gt;<br>
&gt;&nbsp;5. &nbsp;the&nbsp;output&nbsp;of&nbsp;&#39;ip&nbsp;route&nbsp;show&nbsp;table&nbsp;100&#39;&lt;br&gt;<br>
$&nbsp;ip&nbsp;route&nbsp;show&lt;br&gt;<br>
default&nbsp;via&nbsp;8.13.140.14&nbsp;dev&nbsp;bond0.212&nbsp;proto&nbsp;static&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://1.21.213.0/24&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;1.21.213.0/24&lt;/a&gt;&nbsp;dev&nbsp;bond0.213&nbsp;proto&nbsp;kernel&nbsp;scope&nbsp;link&nbsp;src&nbsp;1.21.213.1&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://8.11.39.248/30&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;8.11.39.248/30&lt;/a&gt;&nbsp;dev&nbsp;enx00e04c3600d3&nbsp;proto&nbsp;kernel&nbsp;scope&nbsp;link&nbsp;src&nbsp;8.11.39.250&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://8.13.140.0/28&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;8.13.140.0/28&lt;/a&gt;&nbsp;dev&nbsp;bond0.212&nbsp;proto&nbsp;kernel&nbsp;scope&nbsp;link&nbsp;src&nbsp;8.13.140.1&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://8.13.144.0/20&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;8.13.144.0/20&lt;/a&gt;&nbsp;via&nbsp;1.21.213.254&nbsp;dev&nbsp;bond0.213&lt;br&gt;<br>
8.13.148.1&nbsp;via&nbsp;1.21.213.254&nbsp;dev&nbsp;bond0.213&lt;br&gt;<br>
##&lt;br&gt;<br>
&lt;br&gt;<br>
It&#39;s&nbsp;important&nbsp;to&nbsp;see&nbsp;the&nbsp;relevant&nbsp;routing&nbsp;table.&lt;br&gt;<br>
The&nbsp;linux&nbsp;Kernel&nbsp;have&nbsp;couple&nbsp;routing&nbsp;tables&nbsp;which&nbsp;each&nbsp;can&nbsp;contain&nbsp;different&nbsp;routing/forwarding&nbsp;table.&lt;br&gt;<br>
If&nbsp;you&nbsp;want&nbsp;to&nbsp;understand&nbsp;a&nbsp;bit&nbsp;more&nbsp;you&nbsp;might&nbsp;be&nbsp;able&nbsp;to&nbsp;try&nbsp;and&nbsp;lookup&nbsp;for&nbsp;FIB.&lt;br&gt;<br>
(&nbsp;take&nbsp;a&nbsp;peek&nbsp;at:&nbsp;&lt;a&nbsp;href=&quot;http://linux-ip.net/html/routing-tables.html&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://linux-ip.net/html/routing-tables.html&lt;/a&gt;)&lt;br&gt;<br>
&lt;br&gt;<br>
Eliezer&lt;br&gt;<br>
&lt;br&gt;<br>
-----Original&nbsp;Message-----&lt;br&gt;<br>
From:&nbsp;Ben&nbsp;Goz&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:ben.goz87@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;ben.goz87@gmail.com&lt;/a&gt;&gt;&nbsp;&lt;br&gt;<br>
Sent:&nbsp;Wednesday,&nbsp;July&nbsp;7,&nbsp;2021&nbsp;3:36&nbsp;PM&lt;br&gt;<br>
To:&nbsp;Eliezer&nbsp;Croitoru&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:ngtech1ltd@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;ngtech1ltd@gmail.com&lt;/a&gt;&gt;;&nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
Subject:&nbsp;Re:&nbsp;[squid-users]&nbsp;TPROXY&nbsp;Error&lt;br&gt;<br>
&lt;br&gt;<br>
By&nbsp;the&nbsp;help&nbsp;of&nbsp;God.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Hi&nbsp;Eliezer,&lt;br&gt;<br>
&lt;br&gt;<br>
Thanks&nbsp;for&nbsp;your&nbsp;help.&lt;br&gt;<br>
&lt;br&gt;<br>
Please&nbsp;let&nbsp;me&nbsp;know&nbsp;if&nbsp;you&nbsp;need&nbsp;more&nbsp;information.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
Regards,&lt;br&gt;<br>
&lt;br&gt;<br>
Ben&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;07/07/2021&nbsp;14:01,&nbsp;Eliezer&nbsp;Croitoru&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;Hey&nbsp;Ben,&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;want&nbsp;to&nbsp;try&nbsp;and&nbsp;reset&nbsp;this&nbsp;issue&nbsp;because&nbsp;I&nbsp;am&nbsp;missing&nbsp;some&nbsp;technical&lt;br&gt;<br>
&gt;&nbsp;details.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;1.&nbsp;What&nbsp;Linux&nbsp;Distro&nbsp;and&nbsp;what&nbsp;version&nbsp;are&nbsp;you&nbsp;using?&#39;&lt;br&gt;<br>
Ubuntu&nbsp;20.04&lt;br&gt;<br>
&gt;&nbsp;2.&nbsp;the&nbsp;output&nbsp;of&nbsp;&#39;ip&nbsp;address&#39;&lt;br&gt;<br>
$&nbsp;ip&nbsp;address&lt;br&gt;<br>
1:&nbsp;lo:&nbsp;&lt;LOOPBACK,UP,LOWER_UP&gt;&nbsp;mtu&nbsp;65536&nbsp;qdisc&nbsp;noqueue&nbsp;state&nbsp;UNKNOWN&nbsp;&lt;br&gt;<br>
group&nbsp;default&nbsp;qlen&nbsp;1000&lt;br&gt;<br>
 &nbsp; &nbsp; link/loopback&nbsp;00:00:00:00:00:00&nbsp;brd&nbsp;00:00:00:00:00:00&lt;br&gt;<br>
 &nbsp; &nbsp; inet&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1/8&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;127.0.0.1/8&lt;/a&gt;&nbsp;scope&nbsp;host&nbsp;lo&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;valid_lft&nbsp;forever&nbsp;preferred_lft&nbsp;forever&lt;br&gt;<br>
 &nbsp; &nbsp; inet6&nbsp;::1/128&nbsp;scope&nbsp;host&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;valid_lft&nbsp;forever&nbsp;preferred_lft&nbsp;forever&lt;br&gt;<br>
2:&nbsp;ens1f0:&nbsp;&lt;BROADCAST,MULTICAST,SLAVE,UP,LOWER_UP&gt;&nbsp;mtu&nbsp;1500&nbsp;qdisc&nbsp;mq&nbsp;&lt;br&gt;<br>
master&nbsp;bond0&nbsp;state&nbsp;UP&nbsp;group&nbsp;default&nbsp;qlen&nbsp;1000&lt;br&gt;<br>
 &nbsp; &nbsp; link/ether&nbsp;ba:59:58:58:23:2b&nbsp;brd&nbsp;ff:ff:ff:ff:ff:ff&lt;br&gt;<br>
3:&nbsp;ens1f1:&nbsp;&lt;BROADCAST,MULTICAST,SLAVE,UP,LOWER_UP&gt;&nbsp;mtu&nbsp;1500&nbsp;qdisc&nbsp;mq&nbsp;&lt;br&gt;<br>
master&nbsp;bond0&nbsp;state&nbsp;UP&nbsp;group&nbsp;default&nbsp;qlen&nbsp;1000&lt;br&gt;<br>
 &nbsp; &nbsp; link/ether&nbsp;ba:59:58:58:23:2b&nbsp;brd&nbsp;ff:ff:ff:ff:ff:ff&lt;br&gt;<br>
4:&nbsp;usb0:&nbsp;&lt;BROADCAST,MULTICAST&gt;&nbsp;mtu&nbsp;1500&nbsp;qdisc&nbsp;noop&nbsp;state&nbsp;DOWN&nbsp;group&nbsp;&lt;br&gt;<br>
default&nbsp;qlen&nbsp;1000&lt;br&gt;<br>
 &nbsp; &nbsp; link/ether&nbsp;ca:13:59:65:c2:56&nbsp;brd&nbsp;ff:ff:ff:ff:ff:ff&lt;br&gt;<br>
5:&nbsp;enx00e04c3600d3:&nbsp;&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;&nbsp;mtu&nbsp;1500&nbsp;qdisc&nbsp;&lt;br&gt;<br>
fq_codel&nbsp;state&nbsp;UP&nbsp;group&nbsp;default&nbsp;qlen&nbsp;1000&lt;br&gt;<br>
 &nbsp; &nbsp; link/ether&nbsp;00:e0:4c:36:00:d3&nbsp;brd&nbsp;ff:ff:ff:ff:ff:ff&lt;br&gt;<br>
 &nbsp; &nbsp; inet&nbsp;&lt;a&nbsp;href=&quot;http://8.11.39.250/30&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;8.11.39.250/30&lt;/a&gt;&nbsp;brd&nbsp;8.11.39.251&nbsp;scope&nbsp;global&nbsp;enx00e04c3600d3&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;valid_lft&nbsp;forever&nbsp;preferred_lft&nbsp;forever&lt;br&gt;<br>
 &nbsp; &nbsp; inet6&nbsp;fe80::2e0:4cff:fe36:d3/64&nbsp;scope&nbsp;link&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;valid_lft&nbsp;forever&nbsp;preferred_lft&nbsp;forever&lt;br&gt;<br>
6:&nbsp;bond0:&nbsp;&lt;BROADCAST,MULTICAST,MASTER,UP,LOWER_UP&gt;&nbsp;mtu&nbsp;1500&nbsp;qdisc&nbsp;&lt;br&gt;<br>
noqueue&nbsp;state&nbsp;UP&nbsp;group&nbsp;default&nbsp;qlen&nbsp;1000&lt;br&gt;<br>
 &nbsp; &nbsp; link/ether&nbsp;ba:59:58:58:23:2b&nbsp;brd&nbsp;ff:ff:ff:ff:ff:ff&lt;br&gt;<br>
 &nbsp; &nbsp; inet6&nbsp;fe80::b859:58ff:fe58:232b/64&nbsp;scope&nbsp;link&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;valid_lft&nbsp;forever&nbsp;preferred_lft&nbsp;forever&lt;br&gt;<br>
7:&nbsp;bond0.212@bond0:&nbsp;&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;&nbsp;mtu&nbsp;1500&nbsp;qdisc&nbsp;&lt;br&gt;<br>
noqueue&nbsp;state&nbsp;UP&nbsp;group&nbsp;default&nbsp;qlen&nbsp;1000&lt;br&gt;<br>
 &nbsp; &nbsp; link/ether&nbsp;ba:59:58:58:23:2b&nbsp;brd&nbsp;ff:ff:ff:ff:ff:ff&lt;br&gt;<br>
 &nbsp; &nbsp; inet&nbsp;&lt;a&nbsp;href=&quot;http://8.13.140.1/28&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;8.13.140.1/28&lt;/a&gt;&nbsp;brd&nbsp;8.13.140.15&nbsp;scope&nbsp;global&nbsp;bond0.212&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;valid_lft&nbsp;forever&nbsp;preferred_lft&nbsp;forever&lt;br&gt;<br>
 &nbsp; &nbsp; inet6&nbsp;fe80::b859:58ff:fe58:232b/64&nbsp;scope&nbsp;link&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;valid_lft&nbsp;forever&nbsp;preferred_lft&nbsp;forever&lt;br&gt;<br>
8:&nbsp;bond0.213@bond0:&nbsp;&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;&nbsp;mtu&nbsp;1500&nbsp;qdisc&nbsp;&lt;br&gt;<br>
noqueue&nbsp;state&nbsp;UP&nbsp;group&nbsp;default&nbsp;qlen&nbsp;1000&lt;br&gt;<br>
 &nbsp; &nbsp; link/ether&nbsp;ba:59:58:58:23:2b&nbsp;brd&nbsp;ff:ff:ff:ff:ff:ff&lt;br&gt;<br>
 &nbsp; &nbsp; inet&nbsp;&lt;a&nbsp;href=&quot;http://1.21.213.1/24&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;1.21.213.1/24&lt;/a&gt;&nbsp;brd&nbsp;1.21.213.255&nbsp;scope&nbsp;global&nbsp;bond0.213&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;valid_lft&nbsp;forever&nbsp;preferred_lft&nbsp;forever&lt;br&gt;<br>
 &nbsp; &nbsp; inet6&nbsp;fe80::b859:58ff:fe58:232b/64&nbsp;scope&nbsp;link&lt;br&gt;<br>
 &nbsp; &nbsp; &nbsp; &nbsp;valid_lft&nbsp;forever&nbsp;preferred_lft&nbsp;forever&lt;br&gt;<br>
&gt;&nbsp;3.&nbsp;the&nbsp;output&nbsp;of&nbsp;&#39;ip&nbsp;rule&#39;&lt;br&gt;<br>
$&nbsp;ip&nbsp;rule&lt;br&gt;<br>
0: &nbsp; &nbsp;from&nbsp;all&nbsp;lookup&nbsp;local&lt;br&gt;<br>
32762: &nbsp; &nbsp;from&nbsp;all&nbsp;fwmark&nbsp;0x1&nbsp;lookup&nbsp;100&lt;br&gt;<br>
32763: &nbsp; &nbsp;from&nbsp;all&nbsp;fwmark&nbsp;0x1&nbsp;lookup&nbsp;100&lt;br&gt;<br>
32764: &nbsp; &nbsp;from&nbsp;all&nbsp;fwmark&nbsp;0x1&nbsp;lookup&nbsp;100&lt;br&gt;<br>
32765: &nbsp; &nbsp;from&nbsp;all&nbsp;fwmark&nbsp;0x1&nbsp;lookup&nbsp;100&lt;br&gt;<br>
32766: &nbsp; &nbsp;from&nbsp;all&nbsp;lookup&nbsp;main&lt;br&gt;<br>
32767: &nbsp; &nbsp;from&nbsp;all&nbsp;lookup&nbsp;default&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;4. &nbsp;the&nbsp;output&nbsp;of&nbsp;&#39;ip&nbsp;route&nbsp;show&#39;&lt;br&gt;<br>
&lt;br&gt;<br>
$&nbsp;ip&nbsp;route&nbsp;show&lt;br&gt;<br>
default&nbsp;via&nbsp;8.13.140.14&nbsp;dev&nbsp;bond0.212&nbsp;proto&nbsp;static&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://1.21.213.0/24&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;1.21.213.0/24&lt;/a&gt;&nbsp;dev&nbsp;bond0.213&nbsp;proto&nbsp;kernel&nbsp;scope&nbsp;link&nbsp;src&nbsp;1.21.213.1&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://8.11.39.248/30&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;8.11.39.248/30&lt;/a&gt;&nbsp;dev&nbsp;enx00e04c3600d3&nbsp;proto&nbsp;kernel&nbsp;scope&nbsp;link&nbsp;src&nbsp;8.11.39.250&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://8.13.140.0/28&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;8.13.140.0/28&lt;/a&gt;&nbsp;dev&nbsp;bond0.212&nbsp;proto&nbsp;kernel&nbsp;scope&nbsp;link&nbsp;src&nbsp;8.13.140.1&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://8.13.144.0/20&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;8.13.144.0/20&lt;/a&gt;&nbsp;via&nbsp;1.21.213.254&nbsp;dev&nbsp;bond0.213&lt;br&gt;<br>
8.13.148.1&nbsp;via&nbsp;1.21.213.254&nbsp;dev&nbsp;bond0.213&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;5. &nbsp;the&nbsp;output&nbsp;of&nbsp;&#39;ip&nbsp;route&nbsp;show&nbsp;table&nbsp;100&#39;&lt;br&gt;<br>
$&nbsp;ip&nbsp;route&nbsp;show&lt;br&gt;<br>
default&nbsp;via&nbsp;8.13.140.14&nbsp;dev&nbsp;bond0.212&nbsp;proto&nbsp;static&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://1.21.213.0/24&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;1.21.213.0/24&lt;/a&gt;&nbsp;dev&nbsp;bond0.213&nbsp;proto&nbsp;kernel&nbsp;scope&nbsp;link&nbsp;src&nbsp;1.21.213.1&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://8.11.39.248/30&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;8.11.39.248/30&lt;/a&gt;&nbsp;dev&nbsp;enx00e04c3600d3&nbsp;proto&nbsp;kernel&nbsp;scope&nbsp;link&nbsp;src&nbsp;8.11.39.250&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://8.13.140.0/28&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;8.13.140.0/28&lt;/a&gt;&nbsp;dev&nbsp;bond0.212&nbsp;proto&nbsp;kernel&nbsp;scope&nbsp;link&nbsp;src&nbsp;8.13.140.1&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://8.13.144.0/20&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;8.13.144.0/20&lt;/a&gt;&nbsp;via&nbsp;1.21.213.254&nbsp;dev&nbsp;bond0.213&lt;br&gt;<br>
8.13.148.1&nbsp;via&nbsp;1.21.213.254&nbsp;dev&nbsp;bond0.213&lt;br&gt;<br>
&gt;&nbsp;6.&nbsp;the&nbsp;output&nbsp;of&nbsp;&#39;iptables-save&#39;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
$&nbsp;sudo&nbsp;iptables-save&lt;br&gt;<br>
#&nbsp;Generated&nbsp;by&nbsp;iptables-save&nbsp;v1.8.4&nbsp;on&nbsp;Wed&nbsp;Jul &nbsp;7&nbsp;12:25:05&nbsp;2021&lt;br&gt;<br>
*mangle&lt;br&gt;<br>
:PREROUTING&nbsp;ACCEPT&nbsp;[72898710:6084386298]&lt;br&gt;<br>
:INPUT&nbsp;ACCEPT&nbsp;[0:0]&lt;br&gt;<br>
:FORWARD&nbsp;ACCEPT&nbsp;[0:0]&lt;br&gt;<br>
:OUTPUT&nbsp;ACCEPT&nbsp;[0:0]&lt;br&gt;<br>
:POSTROUTING&nbsp;ACCEPT&nbsp;[0:0]&lt;br&gt;<br>
:DIVERT&nbsp;-&nbsp;[0:0]&lt;br&gt;<br>
-A&nbsp;PREROUTING&nbsp;-p&nbsp;tcp&nbsp;-m&nbsp;socket&nbsp;-j&nbsp;DIVERT&lt;br&gt;<br>
-A&nbsp;PREROUTING&nbsp;-i&nbsp;bond0.213&nbsp;-p&nbsp;tcp&nbsp;-m&nbsp;tcp&nbsp;--dport&nbsp;80&nbsp;-j&nbsp;TPROXY&nbsp;--on-port&nbsp;&lt;br&gt;<br>
15644&nbsp;--on-ip&nbsp;0.0.0.0&nbsp;--tproxy-mark&nbsp;0x1/0x1&lt;br&gt;<br>
-A&nbsp;PREROUTING&nbsp;-i&nbsp;bond0.213&nbsp;-p&nbsp;tcp&nbsp;-m&nbsp;tcp&nbsp;--dport&nbsp;443&nbsp;-j&nbsp;TPROXY&nbsp;--on-port&nbsp;&lt;br&gt;<br>
15645&nbsp;--on-ip&nbsp;0.0.0.0&nbsp;--tproxy-mark&nbsp;0x1/0x1&lt;br&gt;<br>
-A&nbsp;INPUT&nbsp;-j&nbsp;ACCEPT&lt;br&gt;<br>
-A&nbsp;FORWARD&nbsp;-j&nbsp;ACCEPT&lt;br&gt;<br>
-A&nbsp;OUTPUT&nbsp;-j&nbsp;ACCEPT&lt;br&gt;<br>
-A&nbsp;POSTROUTING&nbsp;-j&nbsp;ACCEPT&lt;br&gt;<br>
-A&nbsp;DIVERT&nbsp;-j&nbsp;MARK&nbsp;--set-xmark&nbsp;0x1/0xffffffff&lt;br&gt;<br>
-A&nbsp;DIVERT&nbsp;-j&nbsp;ACCEPT&lt;br&gt;<br>
COMMIT&lt;br&gt;<br>
#&nbsp;Completed&nbsp;on&nbsp;Wed&nbsp;Jul &nbsp;7&nbsp;12:25:05&nbsp;2021&lt;br&gt;<br>
#&nbsp;Generated&nbsp;by&nbsp;iptables-save&nbsp;v1.8.4&nbsp;on&nbsp;Wed&nbsp;Jul &nbsp;7&nbsp;12:25:05&nbsp;2021&lt;br&gt;<br>
*nat&lt;br&gt;<br>
:PREROUTING&nbsp;ACCEPT&nbsp;[26338415:1392747531]&lt;br&gt;<br>
:INPUT&nbsp;ACCEPT&nbsp;[820462:44161193]&lt;br&gt;<br>
:OUTPUT&nbsp;ACCEPT&nbsp;[1053:92773]&lt;br&gt;<br>
:POSTROUTING&nbsp;ACCEPT&nbsp;[25514534:1348449899]&lt;br&gt;<br>
-A&nbsp;PREROUTING&nbsp;-i&nbsp;eth1&nbsp;-p&nbsp;udp&nbsp;-m&nbsp;udp&nbsp;--dport&nbsp;53&nbsp;-j&nbsp;REDIRECT&nbsp;--to-ports&nbsp;53&lt;br&gt;<br>
-A&nbsp;PREROUTING&nbsp;-i&nbsp;eth1&nbsp;-p&nbsp;tcp&nbsp;-m&nbsp;tcp&nbsp;--dport&nbsp;53&nbsp;-j&nbsp;REDIRECT&nbsp;--to-ports&nbsp;53&lt;br&gt;<br>
COMMIT&lt;br&gt;<br>
#&nbsp;Completed&nbsp;on&nbsp;Wed&nbsp;Jul &nbsp;7&nbsp;12:25:05&nbsp;2021&lt;br&gt;<br>
#&nbsp;Generated&nbsp;by&nbsp;iptables-save&nbsp;v1.8.4&nbsp;on&nbsp;Wed&nbsp;Jul &nbsp;7&nbsp;12:25:05&nbsp;2021&lt;br&gt;<br>
*filter&lt;br&gt;<br>
:INPUT&nbsp;ACCEPT&nbsp;[5045387:2170630036]&lt;br&gt;<br>
:FORWARD&nbsp;ACCEPT&nbsp;[72544426:6194710400]&lt;br&gt;<br>
:OUTPUT&nbsp;ACCEPT&nbsp;[2471930:252759773]&lt;br&gt;<br>
COMMIT&lt;br&gt;<br>
#&nbsp;Completed&nbsp;on&nbsp;Wed&nbsp;Jul &nbsp;7&nbsp;12:25:05&nbsp;20&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;7.&nbsp;the&nbsp;output&nbsp;of&nbsp;&#39;nft&nbsp;-nn&nbsp;list&nbsp;ruleset&#39;&nbsp;(if&nbsp;exists&nbsp;on&nbsp;the&nbsp;OS)&lt;br&gt;<br>
Doesn&#39;t&nbsp;exists.&lt;br&gt;<br>
&gt;&nbsp;8.&nbsp;the&nbsp;output&nbsp;of&nbsp;your&nbsp;squid.conf&lt;br&gt;<br>
$&nbsp;cat&nbsp;squid.conf&lt;br&gt;<br>
#&lt;br&gt;<br>
#&nbsp;Recommended&nbsp;minimum&nbsp;configuration:&lt;br&gt;<br>
#&lt;br&gt;<br>
&lt;br&gt;<br>
#&nbsp;Example&nbsp;rule&nbsp;allowing&nbsp;access&nbsp;from&nbsp;your&nbsp;local&nbsp;networks.&lt;br&gt;<br>
#&nbsp;Adapt&nbsp;to&nbsp;list&nbsp;your&nbsp;(internal)&nbsp;IP&nbsp;networks&nbsp;from&nbsp;where&nbsp;browsing&lt;br&gt;<br>
#&nbsp;should&nbsp;be&nbsp;allowed&lt;br&gt;<br>
acl&nbsp;localnet&nbsp;src&nbsp;0.0.0.1-0.255.255.255 &nbsp; &nbsp;#&nbsp;RFC&nbsp;1122&nbsp;&quot;this&quot;&nbsp;network&nbsp;(LAN)&lt;br&gt;<br>
acl&nbsp;localnet&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://10.0.0.0/8&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;10.0.0.0/8&lt;/a&gt; &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;RFC&nbsp;1918&nbsp;local&nbsp;private&nbsp;network&nbsp;(LAN)&lt;br&gt;<br>
acl&nbsp;localnet&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://100.64.0.0/10&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;100.64.0.0/10&lt;/a&gt; &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;RFC&nbsp;6598&nbsp;shared&nbsp;address&nbsp;space&nbsp;(CGN)&lt;br&gt;<br>
acl&nbsp;localnet&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://169.254.0.0/16&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;169.254.0.0/16&lt;/a&gt; &nbsp; &nbsp; #&nbsp;RFC&nbsp;3927&nbsp;link-local&nbsp;(directly&nbsp;&lt;br&gt;<br>
plugged)&nbsp;machines&lt;br&gt;<br>
acl&nbsp;localnet&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://172.16.0.0/12&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;172.16.0.0/12&lt;/a&gt; &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;RFC&nbsp;1918&nbsp;local&nbsp;private&nbsp;network&nbsp;(LAN)&lt;br&gt;<br>
acl&nbsp;localnet&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://192.168.0.0/16&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;192.168.0.0/16&lt;/a&gt; &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;RFC&nbsp;1918&nbsp;local&nbsp;private&nbsp;network&nbsp;&lt;br&gt;<br>
(LAN)&lt;br&gt;<br>
acl&nbsp;localnet&nbsp;src&nbsp;fc00::/7 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #&nbsp;RFC&nbsp;4193&nbsp;local&nbsp;private&nbsp;network&nbsp;range&lt;br&gt;<br>
acl&nbsp;localnet&nbsp;src&nbsp;fe80::/10 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;RFC&nbsp;4291&nbsp;link-local&nbsp;(directly&nbsp;&lt;br&gt;<br>
plugged)&nbsp;machines&lt;br&gt;<br>
&lt;br&gt;<br>
acl&nbsp;SSL_ports&nbsp;port&nbsp;443&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;80 &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;http&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;21 &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;ftp&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;443 &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;https&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;70 &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;gopher&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;210 &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;wais&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;1025-65535 &nbsp; &nbsp;#&nbsp;unregistered&nbsp;ports&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;280 &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;http-mgmt&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;488 &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;gss-http&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;591 &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;filemaker&lt;br&gt;<br>
acl&nbsp;Safe_ports&nbsp;port&nbsp;777 &nbsp; &nbsp; &nbsp; &nbsp;#&nbsp;multiling&nbsp;http&lt;br&gt;<br>
acl&nbsp;CONNECT&nbsp;method&nbsp;CONNECT&lt;br&gt;<br>
&lt;br&gt;<br>
#&lt;br&gt;<br>
#&nbsp;Recommended&nbsp;minimum&nbsp;Access&nbsp;Permission&nbsp;configuration:&lt;br&gt;<br>
#&lt;br&gt;<br>
#&nbsp;Deny&nbsp;requests&nbsp;to&nbsp;certain&nbsp;unsafe&nbsp;ports&lt;br&gt;<br>
http_access&nbsp;deny&nbsp;!Safe_ports&lt;br&gt;<br>
&lt;br&gt;<br>
#&nbsp;Deny&nbsp;CONNECT&nbsp;to&nbsp;other&nbsp;than&nbsp;secure&nbsp;SSL&nbsp;ports&lt;br&gt;<br>
http_access&nbsp;deny&nbsp;CONNECT&nbsp;!SSL_ports&lt;br&gt;<br>
&lt;br&gt;<br>
#&nbsp;Only&nbsp;allow&nbsp;cachemgr&nbsp;access&nbsp;from&nbsp;localhost&lt;br&gt;<br>
http_access&nbsp;allow&nbsp;localhost&nbsp;manager&lt;br&gt;<br>
http_access&nbsp;deny&nbsp;manager&lt;br&gt;<br>
&lt;br&gt;<br>
#&nbsp;We&nbsp;strongly&nbsp;recommend&nbsp;the&nbsp;following&nbsp;be&nbsp;uncommented&nbsp;to&nbsp;protect&nbsp;innocent&lt;br&gt;<br>
#&nbsp;web&nbsp;applications&nbsp;running&nbsp;on&nbsp;the&nbsp;proxy&nbsp;server&nbsp;who&nbsp;think&nbsp;the&nbsp;only&lt;br&gt;<br>
#&nbsp;one&nbsp;who&nbsp;can&nbsp;access&nbsp;services&nbsp;on&nbsp;&quot;localhost&quot;&nbsp;is&nbsp;a&nbsp;local&nbsp;user&lt;br&gt;<br>
#http_access&nbsp;deny&nbsp;to_localhost&lt;br&gt;<br>
&lt;br&gt;<br>
#&lt;br&gt;<br>
#&nbsp;INSERT&nbsp;YOUR&nbsp;OWN&nbsp;RULE(S)&nbsp;HERE&nbsp;TO&nbsp;ALLOW&nbsp;ACCESS&nbsp;FROM&nbsp;YOUR&nbsp;CLIENTS&lt;br&gt;<br>
#&lt;br&gt;<br>
&lt;br&gt;<br>
#&nbsp;Example&nbsp;rule&nbsp;allowing&nbsp;access&nbsp;from&nbsp;your&nbsp;local&nbsp;networks.&lt;br&gt;<br>
#&nbsp;Adapt&nbsp;localnet&nbsp;in&nbsp;the&nbsp;ACL&nbsp;section&nbsp;to&nbsp;list&nbsp;your&nbsp;(internal)&nbsp;IP&nbsp;networks&lt;br&gt;<br>
#&nbsp;from&nbsp;where&nbsp;browsing&nbsp;should&nbsp;be&nbsp;allowed&lt;br&gt;<br>
http_access&nbsp;allow&nbsp;localnet&lt;br&gt;<br>
http_access&nbsp;allow&nbsp;localhost&lt;br&gt;<br>
&lt;br&gt;<br>
#&nbsp;And&nbsp;finally&nbsp;deny&nbsp;all&nbsp;other&nbsp;access&nbsp;to&nbsp;this&nbsp;proxy&lt;br&gt;<br>
#http_access&nbsp;deny&nbsp;all&lt;br&gt;<br>
&lt;br&gt;<br>
http_access&nbsp;allow&nbsp;all&lt;br&gt;<br>
&lt;br&gt;<br>
#&nbsp;Squid&nbsp;normally&nbsp;listens&nbsp;to&nbsp;port&nbsp;3128&lt;br&gt;<br>
http_port&nbsp;15643&lt;br&gt;<br>
http_port&nbsp;15644&nbsp;tproxy&lt;br&gt;<br>
https_port&nbsp;15645&nbsp;ssl-bump&nbsp;tproxy&nbsp;generate-host-certificates=on&nbsp;&lt;br&gt;<br>
options=ALL&nbsp;dynamic_cert_mem_cache_size=4MB&nbsp;&lt;br&gt;<br>
cert=/usr/local/squid/etc/ssl_cert/myCA.pem&nbsp;&lt;br&gt;<br>
dhparams=/usr/local/squid/etc/dhparam.pem&lt;br&gt;<br>
always_direct&nbsp;allow&nbsp;all&lt;br&gt;<br>
acl&nbsp;DiscoverSNIHost&nbsp;at_step&nbsp;SslBump1&lt;br&gt;<br>
acl&nbsp;NoSSLInterceptRegexp_always&nbsp;ssl::server_name_regex&nbsp;-i&nbsp;xxx&lt;br&gt;<br>
acl&nbsp;NoSSLIntercept&nbsp;ssl::server_name &nbsp;&quot;xxx&quot;&lt;br&gt;<br>
acl&nbsp;NoSSLInterceptRegexp&nbsp;ssl::server_name_regex&nbsp;-i&nbsp;&quot;xxx&quot;&lt;br&gt;<br>
ssl_bump&nbsp;splice&nbsp;NoSSLInterceptRegexp_always&lt;br&gt;<br>
ssl_bump&nbsp;splice&nbsp;NoSSLIntercept&lt;br&gt;<br>
ssl_bump&nbsp;splice&nbsp;NoSSLInterceptRegexp&lt;br&gt;<br>
ssl_bump&nbsp;peek&nbsp;DiscoverSNIHost&lt;br&gt;<br>
ssl_bump&nbsp;bump&nbsp;all&lt;br&gt;<br>
sslcrtd_program&nbsp;/usr/local/squid/libexec/security_file_certgen&nbsp;-s&nbsp;&lt;br&gt;<br>
/var/lib/ssl_db&nbsp;-M&nbsp;4MB&lt;br&gt;<br>
sslcrtd_children&nbsp;32&nbsp;startup=15&nbsp;idle=3&lt;br&gt;<br>
#sslproxy_capath&nbsp;/etc/ssl/certs&lt;br&gt;<br>
&lt;br&gt;<br>
#&nbsp;Uncomment&nbsp;and&nbsp;adjust&nbsp;the&nbsp;following&nbsp;to&nbsp;add&nbsp;a&nbsp;disk&nbsp;cache&nbsp;directory.&lt;br&gt;<br>
#cache_dir&nbsp;ufs&nbsp;/usr/local/squid/var/cache/squid&nbsp;100&nbsp;16&nbsp;256&lt;br&gt;<br>
&lt;br&gt;<br>
#&nbsp;Leave&nbsp;coredumps&nbsp;in&nbsp;the&nbsp;first&nbsp;cache&nbsp;dir&lt;br&gt;<br>
coredump_dir&nbsp;/usr/local/squid/var/cache/squid&lt;br&gt;<br>
&lt;br&gt;<br>
#&lt;br&gt;<br>
#&nbsp;Add&nbsp;any&nbsp;of&nbsp;your&nbsp;own&nbsp;refresh_pattern&nbsp;entries&nbsp;above&nbsp;these.&lt;br&gt;<br>
#&lt;br&gt;<br>
refresh_pattern&nbsp;^ftp: &nbsp; &nbsp; &nbsp; &nbsp;1440 &nbsp; &nbsp;20% &nbsp; &nbsp;10080&lt;br&gt;<br>
refresh_pattern&nbsp;^gopher: &nbsp; &nbsp;1440 &nbsp; &nbsp;0% &nbsp; &nbsp;1440&lt;br&gt;<br>
refresh_pattern&nbsp;-i&nbsp;(/cgi-bin/|\?)&nbsp;0 &nbsp; &nbsp;0% &nbsp; &nbsp;0&lt;br&gt;<br>
refresh_pattern&nbsp;. &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp; &nbsp;20% &nbsp; &nbsp;4320&lt;br&gt;<br>
&lt;br&gt;<br>
range_offset_limit&nbsp;-1&lt;br&gt;<br>
&lt;br&gt;<br>
dns_v4_first&nbsp;on&lt;br&gt;<br>
forwarded_for&nbsp;off&lt;br&gt;<br>
cache&nbsp;deny&nbsp;all&lt;br&gt;<br>
&gt;&nbsp;9.&nbsp;the&nbsp;output&nbsp;of&nbsp;&#39;squid&nbsp;-v&#39;&lt;br&gt;<br>
$&nbsp;./squid&nbsp;-v&lt;br&gt;<br>
Squid&nbsp;Cache:&nbsp;Version&nbsp;4.15&lt;br&gt;<br>
Service&nbsp;Name:&nbsp;squid&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;binary&nbsp;uses&nbsp;OpenSSL&nbsp;1.1.1f &nbsp;31&nbsp;Mar&nbsp;2020.&nbsp;For&nbsp;legal&nbsp;restrictions&nbsp;on&nbsp;&lt;br&gt;<br>
distribution&nbsp;see&nbsp;&lt;a&nbsp;href=&quot;https://www.openssl.org/source/license.html&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://www.openssl.org/source/license.html&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
configure&nbsp;options: &nbsp;&#39;--with-openssl&#39;&nbsp;&#39;--enable-ssl-crtd&#39;&nbsp;&#39;--enable-ecap&#39;&nbsp;&lt;br&gt;<br>
&#39;--enable-linux-netfilter&#39;&nbsp;--enable-ltdl-convenience&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;10.&nbsp;the&nbsp;output&nbsp;of&nbsp;&#39;uname&nbsp;-a&#39;&lt;br&gt;<br>
uname&nbsp;-a&lt;br&gt;<br>
Linux&nbsp;xxx&nbsp;5.4.0-77-generic&nbsp;#86-Ubuntu&nbsp;SMP&nbsp;Thu&nbsp;Jun&nbsp;17&nbsp;02:35:03&nbsp;UTC&nbsp;2021&nbsp;&lt;br&gt;<br>
x86_64&nbsp;x86_64&nbsp;x86_64&nbsp;GNU/Linux&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Once&nbsp;we&nbsp;will&nbsp;have&nbsp;all&nbsp;the&nbsp;above&nbsp;details&nbsp;(reducing/modifying&nbsp;any&nbsp;private&lt;br&gt;<br>
&gt;&nbsp;details)&nbsp;we&nbsp;can&nbsp;try&nbsp;to&nbsp;maybe&nbsp;help&nbsp;you.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Eliezer&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;-----Original&nbsp;Message-----&lt;br&gt;<br>
&gt;&nbsp;From:&nbsp;squid-users&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:squid-users-bounces@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users-bounces@lists.squid-cache.org&lt;/a&gt;&gt;&nbsp;On&nbsp;Behalf&nbsp;Of&lt;br&gt;<br>
&gt;&nbsp;Ben&nbsp;Goz&lt;br&gt;<br>
&gt;&nbsp;Sent:&nbsp;Wednesday,&nbsp;June&nbsp;30,&nbsp;2021&nbsp;3:16&nbsp;PM&lt;br&gt;<br>
&gt;&nbsp;To:&nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;Subject:&nbsp;[squid-users]&nbsp;TPROXY&nbsp;Error&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt; &nbsp; By&nbsp;the&nbsp;help&nbsp;of&nbsp;God.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Hi&nbsp;All,&lt;br&gt;<br>
&gt;&nbsp;I&#39;m&nbsp;trying&nbsp;to&nbsp;configure&nbsp;squid&nbsp;as&nbsp;a&nbsp;transparent&nbsp;proxy&nbsp;using&nbsp;TPROXY.&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;machine&nbsp;I&#39;m&nbsp;using&nbsp;has&nbsp;2&nbsp;NICs,&nbsp;one&nbsp;for&nbsp;input&nbsp;and&nbsp;the&nbsp;other&nbsp;one&nbsp;for&lt;br&gt;<br>
&gt;&nbsp;output&nbsp;traffic.&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;TPROXY&nbsp;iptables&nbsp;rules&nbsp;are&nbsp;configured&nbsp;on&nbsp;the&nbsp;input&nbsp;NIC.&lt;br&gt;<br>
&gt;&nbsp;It&nbsp;looks&nbsp;like&nbsp;iptables&nbsp;TPROXY&nbsp;redirect&nbsp;works&nbsp;but&nbsp;squid&nbsp;prints&nbsp;out&nbsp;the&lt;br&gt;<br>
&gt;&nbsp;following&nbsp;error:&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;ERROR:&nbsp;NAT/TPROXY&nbsp;lookup&nbsp;failed&nbsp;to&nbsp;locate&nbsp;original&nbsp;IPs&nbsp;on&lt;br&gt;<br>
&gt;&nbsp;local=xxx:443&nbsp;remote=xxx:49471&nbsp;FD&nbsp;14&nbsp;flags=17&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;think&nbsp;I&nbsp;loaded&nbsp;all&nbsp;TPROXY&nbsp;required&nbsp;kernel&nbsp;modules.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;ip&nbsp;forwarding&nbsp;works&nbsp;fine&nbsp;without&nbsp;the&nbsp;iptables&nbsp;rules.&nbsp;and&nbsp;I&nbsp;don&#39;t&lt;br&gt;<br>
&gt;&nbsp;see&nbsp;any&nbsp;squid&nbsp;ERROR&nbsp;on&nbsp;getsockopt&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Please&nbsp;let&nbsp;me&nbsp;know&nbsp;what&nbsp;I&#39;m&nbsp;missing?&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;Thanks,&lt;br&gt;<br>
&gt;&nbsp;Ben&lt;br&gt;<br>
&gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&gt;&nbsp;squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
