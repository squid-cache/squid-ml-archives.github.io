<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hi&nbsp;Amos,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Upgrading&nbsp;to&nbsp;Squid&nbsp;4.1&nbsp;resolved&nbsp;the&nbsp;issue.&nbsp;I&nbsp;had&nbsp;to&nbsp;run&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&gt;/usr/lib64/squid/security_file_certgen&nbsp;-c&nbsp;-s&nbsp;/var/spool/squid/ssl_db&nbsp;-M&nbsp;4MB&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;to&nbsp;get&nbsp;squid&nbsp;to&nbsp;start.&nbsp;But&nbsp;after&nbsp;that&nbsp;all&nbsp;worked&nbsp;well.&nbsp;We&#39;ll&nbsp;do&nbsp;a&nbsp;bit&nbsp;more&nbsp;testing&nbsp;before&nbsp;we&nbsp;roll&nbsp;out&nbsp;to&nbsp;our&nbsp;production&nbsp;servers.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;very&nbsp;much&nbsp;for&nbsp;your&nbsp;help.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_signature&quot;&nbsp;data-smartmail=&quot;gmail_signature&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;style=&quot;margin-left:0pt&quot;&nbsp;align=&quot;left&quot;&gt;&lt;table&nbsp;style=&quot;border:none;border-collapse:collapse&quot;&gt;&lt;colgroup&gt;&lt;col&nbsp;width=&quot;181&quot;&gt;&lt;col&nbsp;width=&quot;229&quot;&gt;&lt;/colgroup&gt;&lt;tbody&gt;&lt;tr&nbsp;style=&quot;height:0pt&quot;&gt;&lt;td&nbsp;style=&quot;border-left:solid&nbsp;#ffffff&nbsp;1pt;border-right:solid&nbsp;#4a86e8&nbsp;1pt;border-bottom:solid&nbsp;#ffffff&nbsp;1pt;border-top:solid&nbsp;#ffffff&nbsp;1pt;vertical-align:top;padding:5pt&nbsp;5pt&nbsp;5pt&nbsp;5pt;overflow:hidden&quot;&gt;&lt;p&nbsp;dir=&quot;ltr&quot;&nbsp;style=&quot;line-height:1.2;margin-top:0pt;margin-bottom:0pt&quot;&gt;&lt;span&nbsp;style=&quot;font-size:11pt;font-family:Arial;color:#000000;background-color:transparent;font-weight:400;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;white-space:pre;white-space:pre-wrap&quot;&gt;&lt;span&nbsp;style=&quot;border:none;display:inline-block;overflow:hidden;width:167px;height:130px&quot;&gt;&lt;img&nbsp;src=&quot;https://lh4.googleusercontent.com/PjzOtuo8wRwonOYtyjVEsTHphPFdwgM8H79UkQ5H--uLWS_Wje0pIvRFGgiiaYF8CohhfacA5LpIBIck7fEou91YR_e95GyEd53ubLzjKbgTVaqvhdESRKKiWZqDxUYAmOApJr47&quot;&nbsp;style=&quot;margin-left:0px;margin-top:0px&quot;&nbsp;width=&quot;167&quot;&nbsp;height=&quot;130&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td&nbsp;style=&quot;border-left:solid&nbsp;#4a86e8&nbsp;1pt;border-right:solid&nbsp;#ffffff&nbsp;1pt;border-bottom:solid&nbsp;#ffffff&nbsp;1pt;border-top:solid&nbsp;#ffffff&nbsp;1pt;vertical-align:top;padding:5pt&nbsp;5pt&nbsp;5pt&nbsp;5pt;overflow:hidden&quot;&gt;&lt;p&nbsp;dir=&quot;ltr&quot;&nbsp;style=&quot;line-height:1.728;margin-top:0pt;margin-bottom:0pt&quot;&gt;&lt;span&nbsp;style=&quot;font-size:11.5pt;font-family:Arial;color:#2e80b5;background-color:transparent;font-weight:700;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;white-space:pre;white-space:pre-wrap&quot;&gt;David&nbsp;Mills&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;dir=&quot;ltr&quot;&nbsp;style=&quot;line-height:1.728;margin-top:0pt;margin-bottom:0pt&quot;&gt;&lt;span&nbsp;style=&quot;font-size:9pt;font-family:Arial;color:#000000;background-color:transparent;font-weight:400;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;white-space:pre;white-space:pre-wrap&quot;&gt;Senior&nbsp;DevOps&nbsp;Engineer&lt;/span&gt;&lt;/p&gt;&lt;br&gt;&lt;p&nbsp;dir=&quot;ltr&quot;&nbsp;style=&quot;line-height:1.44;margin-right:5pt;margin-top:0pt;margin-bottom:5pt&quot;&gt;&lt;span&nbsp;style=&quot;font-size:9pt;font-family:Arial;color:#3388cc;background-color:transparent;font-weight:400;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;white-space:pre;white-space:pre-wrap&quot;&gt; &lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:9pt;font-family:Arial;color:#000000;background-color:transparent;font-weight:400;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;white-space:pre;white-space:pre-wrap&quot;&gt;E:&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:9pt;font-family:Arial;color:#2e80b5;background-color:transparent;font-weight:400;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;white-space:pre;white-space:pre-wrap&quot;&gt;&lt;a&nbsp;href=&quot;mailto:david.mills@acusensus.com&quot;&nbsp;target=&quot;_blank&quot;&gt;david.mills@acusensus.com&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;dir=&quot;ltr&quot;&nbsp;style=&quot;line-height:1.44;margin-right:5pt;margin-top:0pt;margin-bottom:5pt&quot;&gt;&lt;span&nbsp;style=&quot;font-size:9pt;font-family:Arial;color:#3388cc;background-color:transparent;font-weight:400;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;white-space:pre;white-space:pre-wrap&quot;&gt; &lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:9pt;font-family:Arial;color:#000000;background-color:transparent;font-weight:400;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;white-space:pre;white-space:pre-wrap&quot;&gt;M:&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:9pt;font-family:Arial;color:#3388cc;background-color:transparent;font-weight:400;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;white-space:pre;white-space:pre-wrap&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:9pt;font-family:Arial;color:#2e80b5;background-color:transparent;font-weight:400;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;white-space:pre;white-space:pre-wrap&quot;&gt;+61&nbsp;411&nbsp;513&nbsp;404&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;dir=&quot;ltr&quot;&nbsp;style=&quot;line-height:1.44;margin-top:0pt;margin-bottom:0pt&quot;&gt;&lt;span&nbsp;style=&quot;font-size:9pt;font-family:Arial;color:#000000;background-color:transparent;font-weight:400;font-style:normal;font-variant:normal;text-decoration:none;vertical-align:baseline;white-space:pre;white-space:pre-wrap&quot;&gt; W:&lt;/span&gt;&lt;a&nbsp;href=&quot;http://acusensus.com/&quot;&nbsp;style=&quot;text-decoration:none&quot;&nbsp;target=&quot;_blank&quot;&gt;&lt;span&nbsp;style=&quot;font-size:9pt;font-family:Arial;color:#000000;background-color:transparent;font-weight:400;font-style:normal;font-variant:normal;text-decoration:underline;vertical-align:baseline;white-space:pre;white-space:pre-wrap&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:9pt;font-family:Arial;color:#1155cc;background-color:transparent;font-weight:400;font-style:normal;font-variant:normal;text-decoration:underline;vertical-align:baseline;white-space:pre;white-space:pre-wrap&quot;&gt;acusensus.com&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Sun,&nbsp;18&nbsp;Jul&nbsp;2021&nbsp;at&nbsp;16:45,&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;On&nbsp;16/07/21&nbsp;4:38&nbsp;pm,&nbsp;David&nbsp;Mills&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;Hi&nbsp;Amos,&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;sorry&nbsp;for&nbsp;the&nbsp;big&nbsp;delay&nbsp;here&nbsp;-&nbsp;I&#39;ve&nbsp;had&nbsp;lots&nbsp;of&nbsp;other&nbsp;things&nbsp;to&nbsp;attend&nbsp;&lt;br&gt;<br>
&gt;&nbsp;to.&nbsp;It&nbsp;turned&nbsp;on&nbsp;the&nbsp;logging&nbsp;you&nbsp;suggested.&nbsp;For&nbsp;a&nbsp;failed&nbsp;&quot;apt&nbsp;update&quot;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;attempt&nbsp;on&nbsp;the&nbsp;client&nbsp;I&nbsp;get&nbsp;the&nbsp;following&nbsp;attached&nbsp;access.log&nbsp;and&nbsp;cache.log.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;Are&nbsp;any&nbsp;of&nbsp;the&nbsp;lines&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt; &nbsp; &nbsp; 2021/07/16&nbsp;04:28:01.423&nbsp;kid1|&nbsp;83,5|&nbsp;bio.cc(396)&nbsp;adjustSSL:&nbsp;Extension&lt;br&gt;<br>
&gt; &nbsp; &nbsp; 13&nbsp;does&nbsp;not&nbsp;supported!&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt; &nbsp; &nbsp; ...&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt; &nbsp; &nbsp; 20212021/07/16&nbsp;04:28:32.465&nbsp;kid1|&nbsp;83,2|&nbsp;client_side.cc(3749)&lt;br&gt;<br>
&gt; &nbsp; &nbsp; Squid_SSL_accept:&nbsp;Error&nbsp;negotiating&nbsp;SSL&nbsp;connection&nbsp;on&nbsp;FD&nbsp;11:&nbsp;Aborted&lt;br&gt;<br>
&gt; &nbsp; &nbsp; by&nbsp;client:&nbsp;5&lt;br&gt;<br>
&gt; &nbsp; &nbsp; ...&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt; &nbsp; &nbsp; 2021/07/16&nbsp;04:28:02.452&nbsp;kid1|&nbsp;Error&nbsp;negotiating&nbsp;SSL&nbsp;on&nbsp;FD&nbsp;17:&lt;br&gt;<br>
&gt; &nbsp; &nbsp; error:140920F8:SSL&nbsp;routines:ssl3_get_server_hello:unknown&nbsp;cipher&lt;br&gt;<br>
&gt; &nbsp; &nbsp; returned&nbsp;(1/-1/0)&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt; &nbsp; &nbsp; ...&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt; &nbsp; &nbsp; 2021/07/16&nbsp;04:28:01.413&nbsp;kid1|&nbsp;83,2|&nbsp;client_side.cc(4293)&lt;br&gt;<br>
&gt; &nbsp; &nbsp; clientPeekAndSpliceSSL:&nbsp;SSL_accept&nbsp;failed.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;important?&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
Very.&nbsp;It&nbsp;means&nbsp;the&nbsp;libssl&nbsp;Squid&nbsp;is&nbsp;built&nbsp;with&nbsp;and&nbsp;using&nbsp;is&nbsp;not&nbsp;able&nbsp;to&nbsp;&lt;br&gt;<br>
understand&nbsp;the&nbsp;TLS&nbsp;the&nbsp;server&nbsp;is&nbsp;sending.&lt;br&gt;<br>
&lt;br&gt;<br>
Squid-4&nbsp;should&nbsp;be&nbsp;more&nbsp;tolerant&nbsp;of&nbsp;this&nbsp;particular&nbsp;issue,&nbsp;or&nbsp;at&nbsp;least&nbsp;&lt;br&gt;<br>
able&nbsp;to&nbsp;follow&nbsp;the&nbsp;on_unsupported_protocol&nbsp;directive&nbsp;when&nbsp;it&nbsp;is&nbsp;encountered.&lt;br&gt;<br>
&lt;br&gt;<br>
Older&nbsp;Squid&nbsp;depend&nbsp;more&nbsp;directly&nbsp;on&nbsp;the&nbsp;library&nbsp;TLS&nbsp;parsing&nbsp;-&nbsp;which&nbsp;&lt;br&gt;<br>
cannot&nbsp;handle&nbsp;unknown&nbsp;values&nbsp;well.&lt;br&gt;<br>
&lt;br&gt;<br>
Amos&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>
<br>
&lt;br&gt;<br>
&lt;font&nbsp;size=&quot;2&quot;&gt;DISCLAIMER:&nbsp;Acusensus&nbsp;puts&nbsp;the&nbsp;privacy&nbsp;and&nbsp;security&nbsp;of&nbsp;its&nbsp;clients,&nbsp;its&nbsp;data&nbsp;and&nbsp;information&nbsp;at&nbsp;the&nbsp;core&nbsp;of&nbsp;everything&nbsp;we&nbsp;do.&nbsp;The&nbsp;information&nbsp;contained&nbsp;in&nbsp;this&nbsp;email&nbsp;(including&nbsp;attachments)&nbsp;is&nbsp;intended&nbsp;only&nbsp;for&nbsp;the&nbsp;use&nbsp;of&nbsp;the&nbsp;person(s)&nbsp;to&nbsp;whom&nbsp;it&nbsp;is&nbsp;addressed&nbsp;to,&nbsp;as&nbsp;it&nbsp;may&nbsp;be&nbsp;confidential&nbsp;and&nbsp;contain&nbsp;legally&nbsp;privileged&nbsp;information.&nbsp;If&nbsp;you&nbsp;have&nbsp;received&nbsp;this&nbsp;email&nbsp;in&nbsp;error,&nbsp;please&nbsp;delete&nbsp;all&nbsp;copies&nbsp;and&nbsp;notify&nbsp;the&nbsp;sender&nbsp;immediately.&nbsp;Any&nbsp;views&nbsp;or&nbsp;opinions&nbsp;presented&nbsp;are<br>
solely&nbsp;those&nbsp;of&nbsp;the&nbsp;author&nbsp;and&nbsp;do&nbsp;not&nbsp;necessarily&nbsp;represent&nbsp;the&nbsp;views&nbsp;of&nbsp;Acusensus<br>
Pty&nbsp;Ltd.&nbsp;Please&nbsp;consider&nbsp;the&nbsp;environment<br>
before&nbsp;printing&nbsp;this&nbsp;email.&lt;/font&gt;
</tt>
