<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Thank&nbsp;you&nbsp;Alex,&nbsp;for&nbsp;the&nbsp;detailed&nbsp;response,&nbsp;I&nbsp;will&nbsp;keep&nbsp;that&nbsp;info&nbsp;in&nbsp;mind&nbsp;while&nbsp;testing.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;I&nbsp;can&nbsp;convenience&nbsp;the&nbsp;team&nbsp;to&nbsp;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;increase&nbsp;the&nbsp;&quot;&lt;span&nbsp;style=&quot;color:rgb(30,30,30)&quot;&gt;auth_param&nbsp;basic&nbsp;credentialsttl&quot;&nbsp;to&nbsp;around&nbsp;60&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(30,30,30)&quot;&gt;minutes,&nbsp;we&nbsp;should&nbsp;have&nbsp;absolutely no&nbsp;problem,&nbsp;please&nbsp;correct&nbsp;me if&nbsp;I&nbsp;am&nbsp;wrong.&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(30,30,30)&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#1e1e1e&quot;&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;As&nbsp;per&nbsp;my&nbsp;understanding,&nbsp;even&nbsp;if&nbsp;the&nbsp;DB&nbsp;server&nbsp;is&nbsp;all&nbsp;the&nbsp;way&nbsp;across&nbsp;the&nbsp;world,&nbsp;and&nbsp;we&nbsp;have&nbsp;an&nbsp;added&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#1e1e1e&quot;&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;response&nbsp;time&nbsp;of&nbsp;1&nbsp;second&nbsp;that&nbsp;occurs&nbsp;only&nbsp;once &lt;/font&gt;&lt;span&nbsp;style=&quot;color:rgb(30,30,30);font-family:arial,sans-serif&quot;&gt;every&nbsp;60&nbsp;minutes,&nbsp;that&nbsp;would&nbsp;have&nbsp;almost&nbsp;0&nbsp;impact&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;color:rgb(30,30,30);font-family:arial,sans-serif&quot;&gt;on&nbsp;the&nbsp;&lt;/span&gt;performance&lt;span&nbsp;style=&quot;color:rgb(30,30,30);font-family:arial,sans-serif&quot;&gt; and&nbsp;resources&nbsp;used&nbsp;by&nbsp;Squid.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;color:rgb(30,30,30);font-family:arial,sans-serif&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;color:rgb(30,30,30);font-family:arial,sans-serif&quot;&gt;My&nbsp;only&nbsp;concern&nbsp;is&nbsp;for&nbsp;407s,&nbsp;do&nbsp;users&nbsp;that&nbsp;get&nbsp;407&nbsp;are&nbsp;also&nbsp;cached?&lt;/span&gt;&lt;/div&gt;&lt;div&gt;In&nbsp;case&nbsp;that&nbsp;they&nbsp;do&nbsp;get&nbsp;cached,&nbsp;that&nbsp;would&nbsp;mean&nbsp;that&nbsp;if&nbsp;I&nbsp;send&nbsp;one&nbsp;request&lt;/div&gt;&lt;div&gt;using&nbsp;some&nbsp;username,&nbsp;it&nbsp;gets&nbsp;407,&nbsp;and&nbsp;then&nbsp;I&nbsp;add&nbsp;the&nbsp;username&nbsp;to&nbsp;the&nbsp;DB,&lt;/div&gt;&lt;div&gt;it&nbsp;will&nbsp;still&nbsp;not&nbsp;work&nbsp;for&nbsp;60&nbsp;minutes.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;However,&nbsp;if&nbsp;it&nbsp;is&nbsp;not&nbsp;cached,&nbsp;that&nbsp;could&nbsp;potentially cause&nbsp;big&nbsp;resources&nbsp;usage&nbsp;as&nbsp;well,&lt;/div&gt;&lt;div&gt;since&nbsp;every&nbsp;407&nbsp;request&nbsp;takes&nbsp;around&nbsp;1&nbsp;second&nbsp;to&nbsp;resolve,&nbsp;and&nbsp;we&nbsp;have&nbsp;a&nbsp;lot&nbsp;of&nbsp;those.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Anyway,&nbsp;it&nbsp;seems&nbsp;that&nbsp;no&nbsp;matter&nbsp;if&nbsp;407&nbsp;are&nbsp;cached&nbsp;or&nbsp;not,&nbsp;it&nbsp;will&nbsp;cause&nbsp;some&nbsp;issues&lt;/div&gt;&lt;div&gt;if&nbsp;the&nbsp;DB&nbsp;response&nbsp;takes&nbsp;around&nbsp;1&nbsp;second&nbsp;unless&nbsp;I&nbsp;am&nbsp;overestimating&nbsp;the&nbsp;resource &lt;/div&gt;&lt;div&gt;use&nbsp;of&nbsp;these&nbsp;requests.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;would&nbsp;love&nbsp;to&nbsp;hear&nbsp;your&nbsp;thoughts&nbsp;on&nbsp;that&nbsp;solution,&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;&lt;div&gt;Roee&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Sat,&nbsp;Aug&nbsp;28,&nbsp;2021&nbsp;at&nbsp;10:33&nbsp;PM&nbsp;Alex&nbsp;Rousskov&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:rousskov@measurement-factory.com&quot;&gt;rousskov@measurement-factory.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;On&nbsp;8/28/21&nbsp;2:59&nbsp;PM,&nbsp;roee&nbsp;klinger&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;have&nbsp;multiple&nbsp;Squid&nbsp;servers&nbsp;installed&nbsp;in&nbsp;different&nbsp;data&nbsp;centers&nbsp;across&lt;br&gt;<br>
&gt;&nbsp;different&nbsp;cloud&nbsp;providers,&nbsp;and&nbsp;they&nbsp;all&nbsp;need&nbsp;to&nbsp;authenticate users&nbsp;using&lt;br&gt;<br>
&gt;&nbsp;a single&nbsp;database&nbsp;(MySQL)&nbsp;on&nbsp;a&nbsp;separate&nbsp;server,&nbsp;which&nbsp;is&nbsp;also&nbsp;on&nbsp;a&lt;br&gt;<br>
&gt;&nbsp;different&nbsp;cloud&nbsp;provider on&nbsp;a&nbsp;different&nbsp;data&nbsp;center.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;have&nbsp;already&nbsp;written&nbsp;an&nbsp;external&nbsp;authentication script&nbsp;that&nbsp;reads&nbsp;from&lt;br&gt;<br>
&gt;&nbsp;MySQL&nbsp;and&nbsp;everything&nbsp;is&nbsp;working fine,&nbsp;however,&nbsp;I&nbsp;have&nbsp;some&lt;br&gt;<br>
&gt;&nbsp;performance concerns,&nbsp;since&nbsp;the&nbsp;DB&nbsp;is&nbsp;located&nbsp;externally&nbsp;and&nbsp;in&nbsp;a&lt;br&gt;<br>
&gt;&nbsp;different&nbsp;region&nbsp;of&nbsp;the&nbsp;world&nbsp;from&nbsp;the&nbsp;Squid&nbsp;server.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;made&nbsp;some&nbsp;speed&nbsp;tests&nbsp;to&nbsp;see&nbsp;how&nbsp;long&nbsp;it&nbsp;takes&nbsp;to&nbsp;query&nbsp;the&nbsp;DB&nbsp;as&lt;br&gt;<br>
&gt;&nbsp;Squid&nbsp;would:&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;if&nbsp;the&nbsp;database&nbsp;is&nbsp;located&nbsp;on&nbsp;the&nbsp;same&nbsp;machine&nbsp;as&nbsp;Squid:&lt;br&gt;<br>
&gt;&nbsp;1.067-millisecond&nbsp;average&nbsp;query&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;if&nbsp;the&nbsp;database&nbsp;is&nbsp;located&nbsp;on&nbsp;the&nbsp;same&nbsp;datacenter&nbsp;as&nbsp;Squid:&lt;br&gt;<br>
&gt;&nbsp;2.67-millisecond&nbsp;average&nbsp;query&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;if&nbsp;the&nbsp;database&nbsp;is&nbsp;located&nbsp;on&nbsp;a&nbsp;different&nbsp;datacenter&nbsp;than&nbsp;Squid&lt;br&gt;<br>
&gt;&nbsp;(different&nbsp;country&nbsp;as&nbsp;well):&nbsp;38.9-millisecond&nbsp;average&nbsp;query&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;Now&nbsp;I&nbsp;am&nbsp;wondering,&nbsp;is 36-millisecond&nbsp;average&nbsp;added&nbsp;query&nbsp;time&nbsp;a&nbsp;big&lt;br&gt;<br>
&gt;&nbsp;deal&nbsp;when&nbsp;dealing&nbsp;with&nbsp;HTTP/S&nbsp;traffic?&nbsp;how&nbsp;significant&nbsp;is&nbsp;this&nbsp;added&lt;br&gt;<br>
&gt;&nbsp;time&nbsp;to&nbsp;Squid&nbsp;and&nbsp;will&nbsp;performance get&nbsp;hurt&nbsp;drastically?&lt;br&gt;<br>
&lt;br&gt;<br>
*&nbsp;When&nbsp;you&nbsp;look&nbsp;at&nbsp;a&nbsp;single&nbsp;HTTP&nbsp;transaction,&nbsp;adding&nbsp;36ms&nbsp;is&nbsp;usually&nbsp;not&lt;br&gt;<br>
a&nbsp;big&nbsp;deal:&nbsp;Humans&nbsp;are&nbsp;incapable&nbsp;of&nbsp;discerning&nbsp;such&nbsp;delays&nbsp;and&lt;br&gt;<br>
automatons&nbsp;that&nbsp;need&nbsp;true&nbsp;real-time&nbsp;performance&nbsp;are&nbsp;unlikely&nbsp;to&nbsp;go&lt;br&gt;<br>
through&nbsp;your&nbsp;Squids.&lt;br&gt;<br>
&lt;br&gt;<br>
*&nbsp;Additional&nbsp;36ms&nbsp;added&nbsp;to&nbsp;mean&nbsp;transaction&nbsp;response&nbsp;time&nbsp;create&lt;br&gt;<br>
significant&nbsp;perceived&nbsp;delays&nbsp;for&nbsp;sites/services&nbsp;that&nbsp;load&nbsp;lots&nbsp;of&lt;br&gt;<br>
resources&nbsp;_sequentially,_&nbsp;especially&nbsp;if&nbsp;such&nbsp;a&nbsp;site/service&nbsp;has&nbsp;lighting&lt;br&gt;<br>
fast&nbsp;response&nbsp;times&nbsp;without&nbsp;those&nbsp;extra&nbsp;delays.&nbsp;For&nbsp;example,&nbsp;without&lt;br&gt;<br>
authentication&nbsp;caching&nbsp;and&nbsp;similar&nbsp;optimizations,&nbsp;a&nbsp;cumulative&nbsp;extra&lt;br&gt;<br>
delay&nbsp;of&nbsp;100&nbsp;sequential&nbsp;transactions&nbsp;(that&nbsp;would&nbsp;normally&nbsp;take,&nbsp;say,&lt;br&gt;<br>
300ms&nbsp;total)&nbsp;would&nbsp;be&nbsp;3.6&nbsp;seconds&nbsp;--&nbsp;something&nbsp;many&nbsp;humans&nbsp;will&nbsp;be&lt;br&gt;<br>
annoyed&nbsp;with!&lt;br&gt;<br>
&lt;br&gt;<br>
*&nbsp;Additional&nbsp;36ms&nbsp;added&nbsp;to&nbsp;mean&nbsp;transaction&nbsp;response&nbsp;time&nbsp;can&nbsp;kill&lt;br&gt;<br>
performance&nbsp;of&nbsp;a&nbsp;Squid&nbsp;instance&nbsp;that&nbsp;is&nbsp;operating&nbsp;at&nbsp;the&nbsp;limit&nbsp;of&nbsp;some&lt;br&gt;<br>
resource&nbsp;capacity.&lt;br&gt;<br>
&lt;br&gt;<br>
For&nbsp;example,&nbsp;imagine&nbsp;that,&nbsp;without&nbsp;authentication&nbsp;delays,&nbsp;your&nbsp;Squid&lt;br&gt;<br>
transactions&nbsp;have&nbsp;10ms&nbsp;mean&nbsp;response&nbsp;time,&nbsp;and&nbsp;your&nbsp;Squid&nbsp;instance&nbsp;is&lt;br&gt;<br>
dealing&nbsp;with&nbsp;10&#39;000&nbsp;requests&nbsp;per&nbsp;second&nbsp;load.&nbsp;That&nbsp;combination&nbsp;results&lt;br&gt;<br>
in&nbsp;just&nbsp;100&nbsp;concurrent&nbsp;requests&nbsp;(10&#39;000r/s&nbsp;*&nbsp;0.01s&nbsp;=&nbsp;100r).&nbsp;If&nbsp;you&nbsp;add&lt;br&gt;<br>
36ms&nbsp;to&nbsp;that&nbsp;10ms&nbsp;response&nbsp;time,&nbsp;your&nbsp;Squid&nbsp;would&nbsp;have&nbsp;to&nbsp;deal&nbsp;with&nbsp;460&lt;br&gt;<br>
concurrent&nbsp;requests&nbsp;(10&#39;000r/s&nbsp;*&nbsp;0.046s&nbsp;=&nbsp;460r)&nbsp;--&nbsp;a&nbsp;360%&nbsp;increase&nbsp;in&lt;br&gt;<br>
concurrency&nbsp;levels&nbsp;and&nbsp;associated&nbsp;resource&nbsp;consumption.&nbsp;Such&nbsp;an&nbsp;increase&lt;br&gt;<br>
is&nbsp;likely&nbsp;to&nbsp;maim&nbsp;any&nbsp;Squid&nbsp;that&nbsp;was&nbsp;operating&nbsp;without&nbsp;significant&nbsp;spare&lt;br&gt;<br>
resources.&lt;br&gt;<br>
&lt;br&gt;<br>
For&nbsp;an&nbsp;opposite&nbsp;example,&nbsp;imagine&nbsp;that,&nbsp;without&nbsp;authentication&nbsp;delays,&lt;br&gt;<br>
your&nbsp;Squid&nbsp;transactions&nbsp;have&nbsp;1&nbsp;second&nbsp;mean&nbsp;response&nbsp;time,&nbsp;and&nbsp;your&nbsp;Squid&lt;br&gt;<br>
instance&nbsp;is&nbsp;dealing&nbsp;with&nbsp;10&#39;000&nbsp;requests&nbsp;per&nbsp;second&nbsp;load.&nbsp;That&lt;br&gt;<br>
combination&nbsp;results&nbsp;in&nbsp;10&#39;000&nbsp;concurrent&nbsp;requests.&nbsp;If&nbsp;you&nbsp;add&nbsp;36ms&nbsp;to&lt;br&gt;<br>
that&nbsp;1s&nbsp;response&nbsp;time,&nbsp;your&nbsp;Squid&nbsp;would&nbsp;have&nbsp;to&nbsp;deal&nbsp;with&nbsp;10&#39;360&lt;br&gt;<br>
concurrent&nbsp;requests&nbsp;--&nbsp;a&nbsp;mere&nbsp;3.6%&nbsp;increase&nbsp;in&nbsp;concurrency&nbsp;levels&nbsp;and&lt;br&gt;<br>
associated&nbsp;resource&nbsp;consumption.&lt;br&gt;<br>
&lt;br&gt;<br>
Keep&nbsp;in&nbsp;mind&nbsp;that&nbsp;as&nbsp;Squid&nbsp;approaches&nbsp;resource&nbsp;limits,&nbsp;things&nbsp;usually&lt;br&gt;<br>
get&nbsp;_exponentially_&nbsp;worse.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;impact&nbsp;of&nbsp;additional&nbsp;authentication&nbsp;delays&nbsp;should&nbsp;be&nbsp;fairly&nbsp;easy&nbsp;to&lt;br&gt;<br>
model/test.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
HTH,&lt;br&gt;<br>
&lt;br&gt;<br>
Alex.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;know&nbsp;there&nbsp;is&nbsp;some&nbsp;caching&nbsp;going&nbsp;on&nbsp;the&nbsp;Squid&nbsp;side,&nbsp;but&nbsp;I&nbsp;had&nbsp;to&nbsp;set&lt;br&gt;<br>
&gt;&nbsp;the&nbsp;caching&nbsp;to&nbsp;really&nbsp;low&nbsp;values&nbsp;(around&nbsp;15s),&nbsp;as&nbsp;per&nbsp;the&nbsp;requirement&nbsp;I&lt;br&gt;<br>
&gt;&nbsp;was&nbsp;given.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;If&nbsp;I&nbsp;will&nbsp;have&nbsp;no&nbsp;other&nbsp;choice,&nbsp;I&nbsp;will&nbsp;simply&nbsp;replicate&nbsp;the&nbsp;DB&nbsp;table&lt;br&gt;<br>
&gt;&nbsp;from&nbsp;the&nbsp;DB&nbsp;server&nbsp;to&nbsp;the&nbsp;Squid&nbsp;server,&nbsp;but&nbsp;I&nbsp;prefer&nbsp;not&nbsp;to&nbsp;do&nbsp;that,&nbsp;as&lt;br&gt;<br>
&gt;&nbsp;it&nbsp;will&nbsp;require&nbsp;installing&nbsp;MySQL&nbsp;on&nbsp;all&nbsp;the&nbsp;Squid&nbsp;servers&nbsp;(or&nbsp;some&nbsp;other&lt;br&gt;<br>
&gt;&nbsp;DB,&nbsp;but&nbsp;then&nbsp;I&nbsp;have&nbsp;to&nbsp;do&nbsp;replication&nbsp;from&nbsp;different&nbsp;DBs).&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;Thanks.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&gt;&nbsp;squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
