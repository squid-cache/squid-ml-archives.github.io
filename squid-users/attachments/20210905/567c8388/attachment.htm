<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Thanks! &lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Márcio&nbsp;Bacci&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;Em&nbsp;dom.,&nbsp;5&nbsp;de&nbsp;set.&nbsp;de&nbsp;2021&nbsp;às&nbsp;15:25,&nbsp;Eliezer&nbsp;Croitoru&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:ngtech1ltd@gmail.com&quot;&gt;ngtech1ltd@gmail.com&lt;/a&gt;&gt;&nbsp;escreveu:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;lang=&quot;EN-US&quot;&nbsp;style=&quot;overflow-wrap:&nbsp;break-word;&quot;&gt;&lt;div&nbsp;class=&quot;gmail-m_-5965917568948289115WordSection1&quot;&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;From:&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;a&nbsp;href=&quot;https://serverfault.com/a/717273/227456&quot;&nbsp;target=&quot;_blank&quot;&gt;https://serverfault.com/a/717273/227456&lt;/a&gt;&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;u&gt;&lt;/u&gt; &lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;background:white;vertical-align:baseline&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10pt;color:rgb(35,38,41)&quot;&gt;2&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;background:white;vertical-align:baseline&quot;&gt;&lt;span&nbsp;style=&quot;font-size:11.5pt;color:rgb(35,38,41)&quot;&gt;The&nbsp;number&nbsp;of&nbsp;file&nbsp;descriptors&nbsp;is&nbsp;set&nbsp;in&nbsp;the&nbsp;systemd&nbsp;unit&nbsp;file.&nbsp;By&nbsp;default&nbsp;this&nbsp;is&nbsp;16384,&nbsp;as&nbsp;you&nbsp;can&nbsp;see&nbsp;in &lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:10pt;color:rgb(35,38,41);border:1pt&nbsp;none&nbsp;windowtext;padding:0in&quot;&gt;/usr/lib/systemd/system/squid.service&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:11.5pt;color:rgb(35,38,41)&quot;&gt;.&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;background:white;vertical-align:baseline&quot;&gt;&lt;span&nbsp;style=&quot;font-size:11.5pt;color:rgb(35,38,41)&quot;&gt;To&nbsp;override&nbsp;this,&nbsp;create&nbsp;a&nbsp;locally&nbsp;overriding &lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:10pt;color:rgb(35,38,41);border:1pt&nbsp;none&nbsp;windowtext;padding:0in&quot;&gt;/etc/systemd/system/squid.service&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:11.5pt;color:rgb(35,38,41)&quot;&gt; which&nbsp;changes&nbsp;the&nbsp;amount&nbsp;of&nbsp;file&nbsp;descriptors.&nbsp;It&nbsp;should&nbsp;look&nbsp;something&nbsp;like&nbsp;this:&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;background:white;vertical-align:baseline&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10pt;color:rgb(35,38,41);border:1pt&nbsp;none&nbsp;windowtext;padding:0in&quot;&gt;.include&nbsp;/usr/lib/systemd/system/squid.service&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;background:white;vertical-align:baseline&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10pt;color:rgb(35,38,41);border:1pt&nbsp;none&nbsp;windowtext;padding:0in&quot;&gt;&lt;u&gt;&lt;/u&gt; &lt;u&gt;&lt;/u&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;background:white;vertical-align:baseline&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10pt;color:rgb(35,38,41);border:1pt&nbsp;none&nbsp;windowtext;padding:0in&quot;&gt;[Service]&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;background:white;vertical-align:baseline&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10pt;color:rgb(35,38,41);border:1pt&nbsp;none&nbsp;windowtext;padding:0in&quot;&gt;LimitNOFILE=65536&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;background:white;vertical-align:baseline&quot;&gt;&lt;span&nbsp;style=&quot;font-size:11.5pt;color:rgb(35,38,41)&quot;&gt;Do&nbsp;not&nbsp;edit&nbsp;the&nbsp;default&nbsp;file &lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:10pt;color:rgb(35,38,41);border:1pt&nbsp;none&nbsp;windowtext;padding:0in&quot;&gt;/usr/lib/systemd/system/squid.service&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:11.5pt;color:rgb(35,38,41)&quot;&gt;,&nbsp;as&nbsp;it&nbsp;will&nbsp;be&nbsp;restored&nbsp;whenever&nbsp;the&nbsp;package&nbsp;is&nbsp;updated.&nbsp;That&nbsp;is&nbsp;why&nbsp;we&nbsp;put&nbsp;it&nbsp;in&nbsp;a&nbsp;local&nbsp;file&nbsp;to&nbsp;override&nbsp;defaults.&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;background:white;vertical-align:baseline&quot;&gt;&lt;span&nbsp;style=&quot;font-size:11.5pt;color:rgb(35,38,41)&quot;&gt;After&nbsp;creating&nbsp;this&nbsp;file,&nbsp;tell&nbsp;systemd&nbsp;about&nbsp;it:&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;background:white;vertical-align:baseline&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10pt;color:rgb(35,38,41);border:1pt&nbsp;none&nbsp;windowtext;padding:0in&quot;&gt;systemctl&nbsp;daemon-reload&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;background:white;vertical-align:baseline&quot;&gt;&lt;span&nbsp;style=&quot;font-size:11.5pt;color:rgb(35,38,41)&quot;&gt;and&nbsp;then&nbsp;restart&nbsp;squid.&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&nbsp;style=&quot;background:white;vertical-align:baseline&quot;&gt;&lt;span&nbsp;style=&quot;font-size:10pt;color:rgb(35,38,41);border:1pt&nbsp;none&nbsp;windowtext;padding:0in&quot;&gt;systemctl&nbsp;restart&nbsp;squid&lt;/span&gt;&lt;span&nbsp;style=&quot;font-size:10pt;color:rgb(35,38,41)&quot;&gt;&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;u&gt;&lt;/u&gt; &lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;u&gt;&lt;/u&gt; &lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;Eliezer&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;u&gt;&lt;/u&gt; &lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;u&gt;&lt;/u&gt; &lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;u&gt;&lt;/u&gt; &lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;div&nbsp;style=&quot;border-right:none;border-bottom:none;border-left:none;border-top:1pt&nbsp;solid&nbsp;rgb(225,225,225);padding:3pt&nbsp;0in&nbsp;0in&quot;&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;b&gt;From:&lt;/b&gt;&nbsp;NgTech&nbsp;LTD&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:ngtech1ltd@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;ngtech1ltd@gmail.com&lt;/a&gt;&gt;&nbsp;&lt;br&gt;&lt;b&gt;Sent:&lt;/b&gt;&nbsp;Tuesday,&nbsp;August&nbsp;31,&nbsp;2021&nbsp;6:11&nbsp;PM&lt;br&gt;&lt;b&gt;To:&lt;/b&gt;&nbsp;Marcio&nbsp;B.&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:marciobacci@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;marciobacci@gmail.com&lt;/a&gt;&gt;&lt;br&gt;&lt;b&gt;Cc:&lt;/b&gt;&nbsp;Squid&nbsp;Users&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&gt;&lt;br&gt;&lt;b&gt;Subject:&lt;/b&gt;&nbsp;Re:&nbsp;[squid-users]&nbsp;Squid&nbsp;performance&nbsp;issues&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;u&gt;&lt;/u&gt; &lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;div&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;Hey&nbsp;Marcio,&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;div&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;u&gt;&lt;/u&gt; &lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;You&nbsp;will&nbsp;need&nbsp;to&nbsp;add&nbsp;a&nbsp;systemd&nbsp;service&nbsp;file&nbsp;that&nbsp;extends&nbsp;the&nbsp;current&nbsp;one&nbsp;with&nbsp;more&nbsp;FileDescriptors.&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;u&gt;&lt;/u&gt; &lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;I&nbsp;cannot&nbsp;guide&nbsp;now&nbsp;I&nbsp;do&nbsp;hope&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;write&nbsp;later.&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;u&gt;&lt;/u&gt; &lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;If&nbsp;anyone&nbsp;is&nbsp;able&nbsp;to&nbsp;help&nbsp;faster&nbsp;go&nbsp;ahead.&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;u&gt;&lt;/u&gt; &lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;Eliezer&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;u&gt;&lt;/u&gt; &lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;u&gt;&lt;/u&gt; &lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;div&gt;&lt;div&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;lang=&quot;HE&quot;&nbsp;dir=&quot;RTL&quot;&gt;בתאריך&nbsp;יום&nbsp;ג׳,&nbsp;31&nbsp;באוג׳&nbsp;2021,&nbsp;18:05,&nbsp;מאת&lt;/span&gt;&lt;span&nbsp;dir=&quot;LTR&quot;&gt;&lt;/span&gt;&lt;span&nbsp;dir=&quot;LTR&quot;&gt;&lt;/span&gt;&lt;span&nbsp;dir=&quot;LTR&quot;&gt;&lt;/span&gt;&lt;span&nbsp;dir=&quot;LTR&quot;&gt;&lt;/span&gt;&nbsp;Marcio&nbsp;B.&nbsp;&lt;span&nbsp;dir=&quot;RTL&quot;&gt;&lt;/span&gt;&lt;span&nbsp;dir=&quot;RTL&quot;&gt;&lt;/span&gt;&lt;span&nbsp;lang=&quot;HE&quot;&nbsp;dir=&quot;RTL&quot;&gt;&lt;span&nbsp;dir=&quot;RTL&quot;&gt;&lt;/span&gt;&lt;span&nbsp;dir=&quot;RTL&quot;&gt;&lt;/span&gt;‏&lt;/span&gt;&lt;span&nbsp;dir=&quot;LTR&quot;&gt;&lt;/span&gt;&lt;span&nbsp;dir=&quot;LTR&quot;&gt;&lt;/span&gt;&lt;span&nbsp;dir=&quot;LTR&quot;&gt;&lt;/span&gt;&lt;span&nbsp;dir=&quot;LTR&quot;&gt;&lt;/span&gt;&lt;&lt;a&nbsp;href=&quot;mailto:marciobacci@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;marciobacci@gmail.com&lt;/a&gt;&gt;:&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;/div&gt;&lt;blockquote&nbsp;style=&quot;border-top:none;border-right:none;border-bottom:none;border-left:1pt&nbsp;solid&nbsp;rgb(204,204,204);padding:0in&nbsp;0in&nbsp;0in&nbsp;6pt;margin-left:4.8pt;margin-right:0in&quot;&gt;&lt;div&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;Hi,&lt;br&gt;&lt;br&gt;I&nbsp;implemented&nbsp;a&nbsp;Squid&nbsp;server&nbsp;in&nbsp;version&nbsp;4.6&nbsp;on&nbsp;Debian&nbsp;and&nbsp;tested&nbsp;it&nbsp;for&nbsp;about&nbsp;40&nbsp;days.&nbsp;However&nbsp;I&nbsp;put&nbsp;it&nbsp;into&nbsp;production&nbsp;today&nbsp;and&nbsp;Internet&nbsp;browsing&nbsp;was&nbsp;extremely&nbsp;slow.&lt;br&gt;&lt;br&gt;In&nbsp;/var/log/syslog&nbsp;I&#39;m&nbsp;getting&nbsp;the&nbsp;following&nbsp;messages:&lt;br&gt;&lt;br&gt;Aug&nbsp;31&nbsp;11:29:19&nbsp;srvproxy&nbsp;squid[4041]:&nbsp;WARNING!&nbsp;Your&nbsp;cache&nbsp;is&nbsp;running&nbsp;out&nbsp;of&nbsp;filedescriptors&lt;br&gt;&lt;br&gt;Aug&nbsp;31&nbsp;11:29:35&nbsp;srvproxy&nbsp;squid[4041]:&nbsp;WARNING!&nbsp;Your&nbsp;cache&nbsp;is&nbsp;running&nbsp;out&nbsp;of&nbsp;filedescriptors&lt;br&gt;&lt;br&gt;Aug&nbsp;31&nbsp;11:29:51&nbsp;srvproxy&nbsp;squid[4041]:&nbsp;WARNING!&nbsp;Your&nbsp;cache&nbsp;is&nbsp;running&nbsp;out&nbsp;of&nbsp;filedescriptors&lt;br&gt;&lt;br&gt;&lt;br&gt;I&nbsp;searched&nbsp;the&nbsp;Internet,&nbsp;but&nbsp;I&nbsp;only&nbsp;found&nbsp;very&nbsp;old&nbsp;information&nbsp;and&nbsp;referring&nbsp;files&nbsp;that&nbsp;don&#39;t&nbsp;exist&nbsp;on&nbsp;my&nbsp;Squid&nbsp;Server.&lt;br&gt;&lt;br&gt;The&nbsp;only&nbsp;thing&nbsp;I&nbsp;did&nbsp;was&nbsp;add&nbsp;the&nbsp;following&nbsp;value&nbsp;to&nbsp;the&nbsp;/etc/security/limits.conf&nbsp;file:&lt;br&gt;&lt;br&gt;*-nofile&nbsp;65535&lt;br&gt;&lt;br&gt;however&nbsp;this&nbsp;did&nbsp;not&nbsp;solve.&lt;br&gt;&lt;br&gt;Does&nbsp;anyone&nbsp;have&nbsp;any&nbsp;idea&nbsp;how&nbsp;I&nbsp;could&nbsp;solve&nbsp;this&nbsp;problem?&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;div&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;u&gt;&lt;/u&gt; &lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;Regards,&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;u&gt;&lt;/u&gt; &lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;Márcio&nbsp;Bacci&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;_______________________________________________&lt;br&gt;squid-users&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
