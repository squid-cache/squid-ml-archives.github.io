<tt>
&lt;html&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=UTF-8&quot;&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&nbsp;text=&quot;#464646&quot;&nbsp;bgcolor=&quot;#FFFFFF&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;font&nbsp;face=&quot;Arial&quot;&gt;Thanks,&nbsp;i&nbsp;will&nbsp;try&nbsp;in&nbsp;this&nbsp;way&lt;/font&gt;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;moz-cite-prefix&quot;&gt;Le&nbsp;16/09/2021&nbsp;à&nbsp;21:03,&nbsp;Alex&nbsp;Rousskov&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;écrit :&lt;br&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cite=&quot;mid:f209f952-ad33-8a4c-21ca-fe6e020b21b8@measurement-factory.com&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-quote-pre&quot;&nbsp;wrap=&quot;&quot;&gt;On&nbsp;9/16/21&nbsp;2:52&nbsp;PM,&nbsp;David&nbsp;Touzeau&nbsp;wrote:<br>
<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-quote-pre&quot;&nbsp;wrap=&quot;&quot;&gt;It&nbsp;is&nbsp;true&nbsp;that&nbsp;it&nbsp;would&nbsp;be&nbsp;possible&nbsp;to&nbsp;use&nbsp;an&nbsp;external_acl&nbsp;in&nbsp;the<br>
http_reply_access.<br>
<br>
Do&nbsp;you&nbsp;think&nbsp;that&nbsp;adding&nbsp;it&nbsp;in&nbsp;this&nbsp;position&nbsp;I&nbsp;would&nbsp;be&nbsp;able&nbsp;to&nbsp;use<br>
squid's&nbsp;resolution&nbsp;results&nbsp;?<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-quote-pre&quot;&nbsp;wrap=&quot;&quot;&gt;<br>
Yes,&nbsp;bugs&nbsp;notwithstanding,&nbsp;an&nbsp;external&nbsp;ACL&nbsp;evaluated&nbsp;at<br>
http_reply_access&nbsp;time&nbsp;should&nbsp;have&nbsp;access&nbsp;to&nbsp;%&lt;a.<br>
<br>
HTH,<br>
<br>
Alex.<br>
<br>
<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-quote-pre&quot;&nbsp;wrap=&quot;&quot;&gt;Le&nbsp;16/09/2021&nbsp;à&nbsp;19:43,&nbsp;Alex&nbsp;Rousskov&nbsp;a&nbsp;écrit :<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-quote-pre&quot;&nbsp;wrap=&quot;&quot;&gt;On&nbsp;9/16/21&nbsp;1:30&nbsp;PM,&nbsp;David&nbsp;Touzeau&nbsp;wrote:<br>
<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-quote-pre&quot;&nbsp;wrap=&quot;&quot;&gt;I'm&nbsp;turning&nbsp;to&nbsp;create&nbsp;a&nbsp;DNS&nbsp;resolution&nbsp;dev&nbsp;and&nbsp;I'm&nbsp;giving&nbsp;up&nbsp;looking<br>
retreive&nbsp;this&nbsp;information&nbsp;through&nbsp;Squid.<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-quote-pre&quot;&nbsp;wrap=&quot;&quot;&gt;Please&nbsp;note&nbsp;that&nbsp;if&nbsp;you&nbsp;do&nbsp;your&nbsp;own&nbsp;DNS&nbsp;resolution,&nbsp;then&nbsp;Squid&nbsp;DNS<br>
resolution&nbsp;results&nbsp;will&nbsp;probably&nbsp;mismatch&nbsp;your&nbsp;results&nbsp;in&nbsp;some&nbsp;cases.<br>
There&nbsp;have&nbsp;been&nbsp;many&nbsp;complaints&nbsp;about&nbsp;associated&nbsp;problems&nbsp;from&nbsp;folks<br>
that&nbsp;went&nbsp;this&nbsp;route...<br>
<br>
I&nbsp;am&nbsp;not&nbsp;sure&nbsp;what&nbsp;you&nbsp;are&nbsp;trying&nbsp;to&nbsp;do&nbsp;with&nbsp;that&nbsp;a&nbsp;%&lt;a-based&nbsp;external<br>
ACL&nbsp;in&nbsp;Squid,&nbsp;so&nbsp;it&nbsp;is&nbsp;difficult&nbsp;to&nbsp;narrow&nbsp;down&nbsp;the&nbsp;solution&nbsp;search<br>
scope,&nbsp;but&nbsp;Squid&nbsp;does&nbsp;support&nbsp;slow&nbsp;ACLs&nbsp;in&nbsp;certain&nbsp;directives&nbsp;used&nbsp;when<br>
talking&nbsp;to&nbsp;origin&nbsp;servers&nbsp;or&nbsp;peers&nbsp;(after&nbsp;built-in&nbsp;DNS&nbsp;resolution&nbsp;and<br>
destination&nbsp;selection)&nbsp;so&nbsp;perhaps&nbsp;there&nbsp;is&nbsp;a&nbsp;way&nbsp;to&nbsp;do&nbsp;what&nbsp;you&nbsp;want<br>
without&nbsp;Squid&nbsp;modifications.<br>
<br>
If&nbsp;there&nbsp;is&nbsp;not,&nbsp;it&nbsp;would&nbsp;not&nbsp;be&nbsp;difficult&nbsp;to&nbsp;add&nbsp;a&nbsp;post-resolution<br>
directive&nbsp;that&nbsp;supports&nbsp;slow&nbsp;ACLs&nbsp;IMO,&nbsp;but,&nbsp;again,&nbsp;that&nbsp;requires&nbsp;more<br>
knowledge&nbsp;of&nbsp;the&nbsp;use&nbsp;case&nbsp;--&nbsp;there&nbsp;are&nbsp;several&nbsp;places&nbsp;where&nbsp;such&nbsp;a<br>
directive&nbsp;can&nbsp;be&nbsp;added.<br>
<br>
<br>
Cheers,<br>
<br>
Alex.<br>
<br>
<br>
<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-quote-pre&quot;&nbsp;wrap=&quot;&quot;&gt;Le&nbsp;16/09/2021&nbsp;à&nbsp;19:13,&nbsp;Amos&nbsp;Jeffries&nbsp;a&nbsp;écrit :<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-quote-pre&quot;&nbsp;wrap=&quot;&quot;&gt;On&nbsp;17/09/21&nbsp;2:42&nbsp;am,&nbsp;David&nbsp;Touzeau&nbsp;wrote:<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-quote-pre&quot;&nbsp;wrap=&quot;&quot;&gt;Thanks&nbsp;Amos&nbsp;for&nbsp;quick&nbsp;answer.<br>
<br>
Can&nbsp;you&nbsp;take&nbsp;away&nbsp;any&nbsp;hope&nbsp;of&nbsp;a&nbsp;workaround&nbsp;with&nbsp;Squid&nbsp;?<br>
<br>
This&nbsp;makes&nbsp;me&nbsp;plan&nbsp;having&nbsp;to&nbsp;develop&nbsp;a&nbsp;function&nbsp;that&nbsp;has&nbsp;to&nbsp;perform<br>
DNS&nbsp;resolution&nbsp;inside&nbsp;the&nbsp;helper&nbsp;with&nbsp;the&nbsp;performance&nbsp;consequences<br>
that&nbsp;this&nbsp;will&nbsp;impose.<br>
<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-quote-pre&quot;&nbsp;wrap=&quot;&quot;&gt;I&nbsp;would&nbsp;be&nbsp;looking&nbsp;at&nbsp;a&nbsp;design&nbsp;where&nbsp;a&nbsp;helper&nbsp;classifies&nbsp;requests&nbsp;and<br>
using&nbsp;that&nbsp;later&nbsp;on&nbsp;when&nbsp;the&nbsp;server&nbsp;is&nbsp;known&nbsp;to&nbsp;match&nbsp;up&nbsp;the&nbsp;IP&nbsp;vs&nbsp;the<br>
classification.&nbsp;I'm&nbsp;struggling&nbsp;to&nbsp;think&nbsp;of&nbsp;a&nbsp;flow&nbsp;that&nbsp;works<br>
efficiently&nbsp;though.<br>
<br>
Amos<br>
_______________________________________________<br>
squid-users&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-quote-pre&quot;&nbsp;wrap=&quot;&quot;&gt;_______________________________________________<br>
squid-users&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;<br>
<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-quote-pre&quot;&nbsp;wrap=&quot;&quot;&gt;_______________________________________________<br>
squid-users&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;class=&quot;moz-txt-link-abbreviated&quot;&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;<br>
&lt;a&nbsp;class=&quot;moz-txt-link-freetext&quot;&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-quote-pre&quot;&nbsp;wrap=&quot;&quot;&gt;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;pre&nbsp;class=&quot;moz-quote-pre&quot;&nbsp;wrap=&quot;&quot;&gt;<br>
&lt;/pre&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/blockquote&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
