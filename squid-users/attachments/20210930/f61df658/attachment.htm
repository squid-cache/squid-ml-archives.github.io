<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Alex,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;a&nbsp;lot&nbsp;for&nbsp;the&nbsp;clarification&nbsp;on&nbsp;the&nbsp;config&nbsp;for&nbsp;running&nbsp;multiple&nbsp;workers&nbsp;with&nbsp;version&nbsp;5.1,&nbsp;its&nbsp;a&nbsp;lot&nbsp;simpler&nbsp;now&nbsp;with&nbsp;just&nbsp;the&nbsp;&quot;workers&quot;&nbsp;config!&nbsp;I&nbsp;have been&nbsp;able&nbsp;to&nbsp;resolve&nbsp;the&nbsp;&quot;&lt;span&nbsp;style=&quot;color:rgb(80,0,80)&quot;&gt;commBind&nbsp;Cannot&nbsp;bind&nbsp;socket&nbsp;FD&quot; &lt;/span&gt;error&nbsp;by&nbsp;ensuring&nbsp;the&nbsp;var/run/squid&nbsp;folder&nbsp;is&nbsp;created&nbsp;with&nbsp;write&nbsp;permissions.&nbsp;I&nbsp;have&nbsp;a&nbsp;docker&nbsp;container&nbsp;(ubuntu)&nbsp;with&nbsp;squid&nbsp;configured&nbsp;with&nbsp;the --localstatedir&nbsp;option&nbsp;prior&nbsp;to&nbsp;build&nbsp;(as&nbsp;the&nbsp;installation&nbsp;is&nbsp;at&nbsp;/squid),&nbsp;I&nbsp;have&nbsp;managed&nbsp;to&nbsp;fix&nbsp;it&nbsp;with&nbsp;some&nbsp;changes&nbsp;to&nbsp;the&nbsp;docker&nbsp;entrypoint&nbsp;script&nbsp;and&nbsp;am&nbsp;able&nbsp;to&nbsp;run&nbsp;16&nbsp;kid&nbsp;processes&nbsp;on&nbsp;my&nbsp;test&nbsp;server.&nbsp;However,&nbsp;I&nbsp;am&nbsp;still&nbsp;trying&nbsp;to&nbsp;get&nbsp;the&nbsp;container&nbsp;working&nbsp;in&nbsp;a&nbsp;nomad&nbsp;job&nbsp;(which&nbsp;was&nbsp;fine&nbsp;with&nbsp;version&nbsp;4.13&nbsp;with&nbsp;almost&nbsp;the&nbsp;same&nbsp;config&nbsp;but&nbsp;w/o&nbsp;additional&nbsp;workers).&nbsp;I&nbsp;havent been&nbsp;able&nbsp;to&nbsp;extract&nbsp;the&nbsp;cache&nbsp;log&nbsp;when&nbsp;run&nbsp;inside&nbsp;nomad&nbsp;so&nbsp;far,&nbsp;will&nbsp;try&nbsp;again&nbsp;and&nbsp;post&nbsp;here&nbsp;if&nbsp;I&nbsp;need&nbsp;further assistance&nbsp;on&nbsp;that.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;BTW,&nbsp;when&nbsp;I&nbsp;attempt&nbsp;to&nbsp;use&nbsp;the&nbsp;following&nbsp;config&nbsp;with&nbsp;5.1&nbsp;the&nbsp;cache&nbsp;log&nbsp;says&nbsp;that&nbsp;I&nbsp;need&nbsp;to&nbsp;run &lt;span&nbsp;style=&quot;font-family:&quot;Helvetica&nbsp;Neue&quot;;font-size:13px&quot;&gt;&#39;squid&nbsp;-z&#39;&nbsp;to&nbsp;create&nbsp;the&nbsp;swap&nbsp;directories.&nbsp;Is&nbsp;that&nbsp;something&nbsp;I&nbsp;would&nbsp;need&nbsp;to&nbsp;add&nbsp;to&nbsp;my&nbsp;Docker&nbsp;build&nbsp;steps&nbsp;so&nbsp;that&nbsp;it&nbsp;is&nbsp;set&nbsp;up before the&nbsp;squid&nbsp;server&nbsp;is&nbsp;run? &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Helvetica&nbsp;Neue&quot;;font-size:13px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Helvetica&nbsp;Neue&quot;;font-size:13px&quot;&gt;Thanks&nbsp;again&nbsp;for&nbsp;the&nbsp;config&nbsp;examples&nbsp;and&nbsp;pointers. &lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Helvetica&nbsp;Neue&quot;;font-size:13px&quot;&gt;Praveen&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;font-family:&quot;Helvetica&nbsp;Neue&quot;;font-size:13px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;<br>
<br>
<br>
<br>
<br>
<br>
&lt;div&gt;&quot;cache_dir&nbsp;ufs&nbsp;/squid/var/cache/squid&nbsp;400000&nbsp;16&nbsp;256&quot;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
<br>
<br>
<br>
<br>
<br>
&lt;p&nbsp;class=&quot;gmail-p1&quot;&nbsp;style=&quot;margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;font-size:13px;line-height:normal;font-family:&quot;Helvetica&nbsp;Neue&quot;&quot;&gt;2021/09/30&nbsp;22:27:39&nbsp;kid3|&nbsp;Swap&nbsp;maxSize&nbsp;409600000&nbsp;+&nbsp;262144&nbsp;KB,&nbsp;estimated&nbsp;31527857&nbsp;objects&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;gmail-p1&quot;&nbsp;style=&quot;margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;font-size:13px;line-height:normal;font-family:&quot;Helvetica&nbsp;Neue&quot;&quot;&gt;2021/09/30&nbsp;22:27:39&nbsp;kid4|&nbsp;storeDirWriteCleanLogs:&nbsp;Operation&nbsp;aborted.&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;gmail-p1&quot;&nbsp;style=&quot;margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;font-size:13px;line-height:normal;font-family:&quot;Helvetica&nbsp;Neue&quot;&quot;&gt;2021/09/30&nbsp;22:27:39&nbsp;kid3|&nbsp;Target&nbsp;number&nbsp;of&nbsp;buckets:&nbsp;1576392&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;gmail-p1&quot;&nbsp;style=&quot;margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;font-size:13px;line-height:normal;font-family:&quot;Helvetica&nbsp;Neue&quot;&quot;&gt;2021/09/30&nbsp;22:27:39&nbsp;kid3|&nbsp;Using&nbsp;2097152&nbsp;Store&nbsp;buckets&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;gmail-p1&quot;&nbsp;style=&quot;margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;font-size:13px;line-height:normal;font-family:&quot;Helvetica&nbsp;Neue&quot;&quot;&gt;2021/09/30&nbsp;22:27:39&nbsp;kid4|&nbsp;FATAL:&nbsp;&lt;span&nbsp;class=&quot;gmail-Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&lt;/span&gt;Failed&nbsp;to&nbsp;verify&nbsp;one&nbsp;of&nbsp;the&nbsp;swap&nbsp;directories,&nbsp;Check&nbsp;cache.log&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;gmail-p1&quot;&nbsp;style=&quot;margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;font-size:13px;line-height:normal;font-family:&quot;Helvetica&nbsp;Neue&quot;&quot;&gt;&lt;span&nbsp;class=&quot;gmail-Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;for&nbsp;details.&lt;span&nbsp;class=&quot;gmail-Apple-converted-space&quot;&gt; &nbsp;&lt;/span&gt;Run&nbsp;&#39;squid&nbsp;-z&#39;&nbsp;to&nbsp;create&nbsp;swap&nbsp;directories&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;gmail-p1&quot;&nbsp;style=&quot;margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;font-size:13px;line-height:normal;font-family:&quot;Helvetica&nbsp;Neue&quot;&quot;&gt;&lt;span&nbsp;class=&quot;gmail-Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;if&nbsp;needed,&nbsp;or&nbsp;if&nbsp;running&nbsp;Squid&nbsp;for&nbsp;the&nbsp;first&nbsp;time.&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;gmail-p1&quot;&nbsp;style=&quot;margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;font-size:13px;line-height:normal;font-family:&quot;Helvetica&nbsp;Neue&quot;&quot;&gt;2021/09/30&nbsp;22:27:39&nbsp;kid3|&nbsp;Max&nbsp;Mem&lt;span&nbsp;class=&quot;gmail-Apple-converted-space&quot;&gt; &nbsp;&lt;/span&gt;size:&nbsp;262144&nbsp;KB&nbsp;[shared]&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;gmail-p1&quot;&nbsp;style=&quot;margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;font-size:13px;line-height:normal;font-family:&quot;Helvetica&nbsp;Neue&quot;&quot;&gt;2021/09/30&nbsp;22:27:39&nbsp;kid3|&nbsp;Max&nbsp;Swap&nbsp;size:&nbsp;409600000&nbsp;KB&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;gmail-p1&quot;&nbsp;style=&quot;margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;font-size:13px;line-height:normal;font-family:&quot;Helvetica&nbsp;Neue&quot;&quot;&gt;2021/09/30&nbsp;22:27:39&nbsp;kid3|&nbsp;ERROR:&nbsp;/squid/var/cache/squid/00:&nbsp;(2)&nbsp;No&nbsp;such&nbsp;file&nbsp;or&nbsp;directory&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;gmail-p1&quot;&nbsp;style=&quot;margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;font-size:13px;line-height:normal;font-family:&quot;Helvetica&nbsp;Neue&quot;&quot;&gt;2021/09/30&nbsp;22:27:39&nbsp;kid3|&nbsp;Not&nbsp;currently&nbsp;OK&nbsp;to&nbsp;rewrite&nbsp;swap&nbsp;log.&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;gmail-p1&quot;&nbsp;style=&quot;margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;font-size:13px;line-height:normal;font-family:&quot;Helvetica&nbsp;Neue&quot;&quot;&gt;2021/09/30&nbsp;22:27:39&nbsp;kid4|&nbsp;Squid&nbsp;Cache&nbsp;(Version&nbsp;5.1):&nbsp;Terminated&nbsp;abnormally.&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;gmail-p1&quot;&nbsp;style=&quot;margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;font-size:13px;line-height:normal;font-family:&quot;Helvetica&nbsp;Neue&quot;&quot;&gt;2021/09/30&nbsp;22:27:39&nbsp;kid3|&nbsp;storeDirWriteCleanLogs:&nbsp;Operation&nbsp;aborted.&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;gmail-p1&quot;&nbsp;style=&quot;margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;font-size:13px;line-height:normal;font-family:&quot;Helvetica&nbsp;Neue&quot;&quot;&gt;2021/09/30&nbsp;22:27:39&nbsp;kid3|&nbsp;FATAL:&nbsp;&lt;span&nbsp;class=&quot;gmail-Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&lt;/span&gt;Failed&nbsp;to&nbsp;verify&nbsp;one&nbsp;of&nbsp;the&nbsp;swap&nbsp;directories,&nbsp;Check&nbsp;cache.log&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;gmail-p1&quot;&nbsp;style=&quot;margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;font-size:13px;line-height:normal;font-family:&quot;Helvetica&nbsp;Neue&quot;&quot;&gt;&lt;span&nbsp;class=&quot;gmail-Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;for&nbsp;details.&lt;span&nbsp;class=&quot;gmail-Apple-converted-space&quot;&gt; &nbsp;&lt;/span&gt;Run&nbsp;&#39;squid&nbsp;-z&#39;&nbsp;to&nbsp;create&nbsp;swap&nbsp;directories&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;gmail-p1&quot;&nbsp;style=&quot;margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;font-size:13px;line-height:normal;font-family:&quot;Helvetica&nbsp;Neue&quot;&quot;&gt;&lt;span&nbsp;class=&quot;gmail-Apple-tab-span&quot;&nbsp;style=&quot;white-space:pre&quot;&gt;&nbsp;&nbsp;&lt;/span&gt;if&nbsp;needed,&nbsp;or&nbsp;if&nbsp;running&nbsp;Squid&nbsp;for&nbsp;the&nbsp;first&nbsp;time.&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;gmail-p1&quot;&nbsp;style=&quot;margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;font-size:13px;line-height:normal;font-family:&quot;Helvetica&nbsp;Neue&quot;&quot;&gt;2021/09/30&nbsp;22:27:39&nbsp;kid2|&nbsp;Store&nbsp;logging&nbsp;disabled&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;gmail-p1&quot;&nbsp;style=&quot;margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;font-size:13px;line-height:normal;font-family:&quot;Helvetica&nbsp;Neue&quot;&quot;&gt;2021/09/30&nbsp;22:27:39&nbsp;kid3|&nbsp;Squid&nbsp;Cache&nbsp;(Version&nbsp;5.1):&nbsp;Terminated&nbsp;abnormally.&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;gmail-p2&quot;&nbsp;style=&quot;margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;font-size:13px;line-height:normal;font-family:&quot;Helvetica&nbsp;Neue&quot;;min-height:15px&quot;&gt;&lt;br&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;gmail-p2&quot;&nbsp;style=&quot;margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;font-size:13px;line-height:normal;font-family:&quot;Helvetica&nbsp;Neue&quot;;min-height:15px&quot;&gt;&lt;br&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;gmail-p2&quot;&nbsp;style=&quot;margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;font-size:13px;line-height:normal;font-family:&quot;Helvetica&nbsp;Neue&quot;;min-height:15px&quot;&gt;&lt;br&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;gmail-p1&quot;&nbsp;style=&quot;margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;font-size:13px;line-height:normal;font-family:&quot;Helvetica&nbsp;Neue&quot;&quot;&gt;root@testhost:/squid#&nbsp;ls&nbsp;-l&nbsp;/squid/var/cache/&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;gmail-p1&quot;&nbsp;style=&quot;margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;font-size:13px;line-height:normal;font-family:&quot;Helvetica&nbsp;Neue&quot;&quot;&gt;total&nbsp;4&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;gmail-p1&quot;&nbsp;style=&quot;margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;font-size:13px;line-height:normal;font-family:&quot;Helvetica&nbsp;Neue&quot;&quot;&gt;drwxr-xr-x&nbsp;2&nbsp;root&nbsp;root&nbsp;4096&nbsp;Sep&nbsp;30&nbsp;17:52&nbsp;squid&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Thu,&nbsp;Sep&nbsp;30,&nbsp;2021&nbsp;at&nbsp;6:30&nbsp;AM&nbsp;Alex&nbsp;Rousskov&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:rousskov@measurement-factory.com&quot;&gt;rousskov@measurement-factory.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;On&nbsp;9/30/21&nbsp;2:49&nbsp;AM,&nbsp;Praveen&nbsp;Ponakanti&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;am&nbsp;trying to&nbsp;use&nbsp;the&nbsp;squid&nbsp;cache&nbsp;as&nbsp;an&nbsp;outbound&nbsp;HTTP/S&nbsp;proxy&nbsp;service&lt;br&gt;<br>
&gt;&nbsp;for&nbsp;our&nbsp;production&nbsp;network&nbsp;and&nbsp;would&nbsp;like&nbsp;to&nbsp;scale&nbsp;up&nbsp;the&nbsp;request&nbsp;per&lt;br&gt;<br>
&gt;&nbsp;sec&nbsp;by&nbsp;running&nbsp;it&nbsp;on&nbsp;multi-core&nbsp;systems. &lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;have&nbsp;searched&nbsp;up&nbsp;the&nbsp;archives&nbsp;and&nbsp;config&nbsp;docs,&nbsp;but&nbsp;couldn&#39;t find&lt;br&gt;<br>
&gt;&nbsp;anything&nbsp;more&nbsp;recent&nbsp;than&nbsp;the&nbsp;below&nbsp;on&nbsp;setting up&nbsp;SMP&nbsp;workers. &lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/ConfigExamples/SmpCarpCluster&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://wiki.squid-cache.org/ConfigExamples/SmpCarpCluster&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/ConfigExamples/MultiCpuSystem&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://wiki.squid-cache.org/ConfigExamples/MultiCpuSystem&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;two&nbsp;old&nbsp;exotic&nbsp;configurations&nbsp;above&nbsp;are&nbsp;not&nbsp;what&nbsp;you&nbsp;should&nbsp;be&lt;br&gt;<br>
starting&nbsp;with&nbsp;when&nbsp;thinking&nbsp;about&nbsp;SMP&nbsp;support&nbsp;in&nbsp;modern&nbsp;Squids.&nbsp;The&nbsp;best&lt;br&gt;<br>
starting&nbsp;points&nbsp;I&nbsp;know&nbsp;about&nbsp;are&lt;br&gt;<br>
&lt;br&gt;<br>
*&nbsp;&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/Features/SmpScale&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://wiki.squid-cache.org/Features/SmpScale&lt;/a&gt;&lt;br&gt;<br>
*&nbsp;&lt;a&nbsp;href=&quot;http://www.squid-cache.org/Doc/config/workers/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.squid-cache.org/Doc/config/workers/&lt;/a&gt;&lt;br&gt;<br>
*&nbsp;&lt;a&nbsp;href=&quot;http://www.squid-cache.org/Doc/config/cpu_affinity_map/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.squid-cache.org/Doc/config/cpu_affinity_map/&lt;/a&gt;&lt;br&gt;<br>
*&nbsp;http(s)_port&nbsp;worker-queues&nbsp;option&lt;br&gt;<br>
&lt;br&gt;<br>
That&nbsp;Feature&nbsp;wiki&nbsp;page&nbsp;does&nbsp;not&nbsp;get&nbsp;many&nbsp;updates&nbsp;these&nbsp;days;&nbsp;if&nbsp;there&nbsp;is&lt;br&gt;<br>
a&nbsp;conflict&nbsp;between&nbsp;information&nbsp;sources,&nbsp;the&nbsp;directive&nbsp;documentation&nbsp;in&lt;br&gt;<br>
your&nbsp;squid.conf.documented&nbsp;may&nbsp;have&nbsp;more&nbsp;recent&nbsp;information.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;*&nbsp;Can&nbsp;someone&nbsp;please&nbsp;let&nbsp;me&nbsp;know&nbsp;if&nbsp;the&nbsp;config&nbsp;examples&nbsp;in&nbsp;those&nbsp;docs&lt;br&gt;<br>
&gt;&nbsp;still&nbsp;apply&nbsp;to&nbsp;the&nbsp;latest&nbsp;version&nbsp;5.1.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;bet&nbsp;those&nbsp;use&nbsp;cases&nbsp;themselves&nbsp;do&nbsp;not&nbsp;apply&nbsp;well&nbsp;to&nbsp;your&nbsp;situation.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;*&nbsp;Do&nbsp;we&nbsp;still&nbsp;need&nbsp;the&nbsp;combination&nbsp;of&nbsp;squid,&nbsp;frontend,&nbsp;backend.conf&lt;br&gt;<br>
&gt;&nbsp;files,&nbsp;or&nbsp;is&nbsp;it&nbsp;enabled&nbsp;simply&nbsp;with&nbsp;the&nbsp;&quot;workers&quot;&nbsp;line&nbsp;in&nbsp;the&nbsp;main&lt;br&gt;<br>
&gt;&nbsp;config&nbsp;file? &lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;workers&nbsp;directive&nbsp;does&nbsp;not&nbsp;require&nbsp;multiple&nbsp;Squid&nbsp;instances&nbsp;(with&lt;br&gt;<br>
multiple&nbsp;configuration&nbsp;files,&nbsp;etc.).&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;*&nbsp;When&nbsp;I&nbsp;attempt&nbsp;to&nbsp;run&nbsp;the&nbsp;squid&nbsp;server&nbsp;with&nbsp;&quot;workers&nbsp;4&quot;&nbsp;in&nbsp;the&lt;br&gt;<br>
&gt;&nbsp;squid.conf,&nbsp;I&nbsp;get&nbsp;the&nbsp;following&nbsp;error&nbsp;(one&nbsp;for&nbsp;each&nbsp;kid)&nbsp;and&nbsp;the&nbsp;main&lt;br&gt;<br>
&gt;&nbsp;process&nbsp;does&nbsp;not&nbsp;bind&nbsp;to&nbsp;the&nbsp;&quot;http_port&nbsp;3128&quot;.&nbsp;I&nbsp;see&nbsp;several&nbsp;UDP&nbsp;ports&lt;br&gt;<br>
&gt;&nbsp;opened&nbsp;up&nbsp;for&nbsp;each&nbsp;kid&nbsp;process.&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;2021/09/29&nbsp;00:44:10&nbsp;kid5|&nbsp;commBind&nbsp;Cannot&nbsp;bind&nbsp;socket&nbsp;FD&nbsp;11&nbsp;to&nbsp;[::]:&nbsp;(2)&nbsp;No&nbsp;such&nbsp;file&nbsp;or&nbsp;directory&lt;br&gt;<br>
&lt;br&gt;<br>
Unfortunately,&nbsp;I&nbsp;cannot&nbsp;tell&nbsp;exactly&nbsp;what&nbsp;went&nbsp;wrong&nbsp;based&nbsp;on&nbsp;that&lt;br&gt;<br>
low-level&nbsp;message&nbsp;alone,&nbsp;but&nbsp;it&nbsp;could&nbsp;be&nbsp;a&nbsp;variant&nbsp;of&nbsp;[1].&nbsp;If&nbsp;you&nbsp;cannot&lt;br&gt;<br>
figure&nbsp;it&nbsp;out&nbsp;after&nbsp;checking&nbsp;[1]&nbsp;suggestions,&nbsp;consider&nbsp;sharing&nbsp;&quot;squid&lt;br&gt;<br>
-X&quot;&nbsp;startup&nbsp;cache.log&nbsp;for&nbsp;analysis.&nbsp;There&nbsp;is&lt;br&gt;<br>
&lt;br&gt;<br>
[1]&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/Features/SmpScale#Cannot_bind_socket_FD_NN_to_.5B::.5D:_.2813.29_Permission_denied&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://wiki.squid-cache.org/Features/SmpScale#Cannot_bind_socket_FD_NN_to_.5B::.5D:_.2813.29_Permission_denied&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;UDP&nbsp;ports&nbsp;you&nbsp;are&nbsp;seeing&nbsp;are&nbsp;probably&nbsp;for&nbsp;the&nbsp;internal&nbsp;DNS&nbsp;resolver&lt;br&gt;<br>
which&nbsp;is&nbsp;not&nbsp;SMP-aware.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;*&nbsp;Does&nbsp;anyone&nbsp;have&nbsp;recommendations&nbsp;on&nbsp;the&nbsp;maximum&nbsp;number&nbsp;of&nbsp;workers&nbsp;to&lt;br&gt;<br>
&gt;&nbsp;use&nbsp;on&nbsp;a&nbsp;64&nbsp;core&nbsp;host&nbsp;(assuming&nbsp;no&nbsp;other&nbsp;CPU&nbsp;intensive&nbsp;apps&nbsp;are&nbsp;running&lt;br&gt;<br>
&gt;&nbsp;on&nbsp;the&nbsp;same&nbsp;host).&nbsp;Caching&nbsp;is&nbsp;not&nbsp;a&nbsp;must&nbsp;for&nbsp;our&nbsp;initial&nbsp;deployment,&nbsp;so&lt;br&gt;<br>
&gt;&nbsp;we&nbsp;are&nbsp;fine&nbsp;disabling&nbsp;caching.&lt;br&gt;<br>
&lt;br&gt;<br>
28-30.&nbsp;See&nbsp;the&nbsp;following&nbsp;wiki&nbsp;section&nbsp;for&nbsp;the&nbsp;corresponding&nbsp;rules&nbsp;of&lt;br&gt;<br>
thumb:&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/Features/SmpScale#How_to_configure_SMP_Squid_for_top_performance.3F&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://wiki.squid-cache.org/Features/SmpScale#How_to_configure_SMP_Squid_for_top_performance.3F&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
HTH,&lt;br&gt;<br>
&lt;br&gt;<br>
Alex.&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
