<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=us-ascii&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;line-break:&nbsp;after-white-space;&quot;&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;Hey,&lt;/span&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;I&nbsp;am&nbsp;trying&nbsp;to&nbsp;establish&nbsp;a&nbsp;caching&nbsp;squid&nbsp;proxy&nbsp;-&nbsp;5.5&nbsp;openssl&nbsp;-&nbsp;&nbsp;(&nbsp;to&nbsp;be&nbsp;used&nbsp;with&nbsp;our&nbsp;CI/CD&nbsp;system&nbsp;and&nbsp;cache&nbsp;npm&nbsp;modules&nbsp;(we&nbsp;configure&nbsp;http_proxy&nbsp;in&nbsp;our&nbsp;npm&nbsp;configuration).&lt;/span&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;I've&nbsp;created&nbsp;a&nbsp;configuration&nbsp;with&nbsp;ssl&nbsp;bump-ing&nbsp;and&nbsp;aggressive&nbsp;npm&nbsp;module&nbsp;caching.&nbsp;When&nbsp;a&nbsp;client&nbsp;starts&nbsp;fetching&nbsp;the&nbsp;modules&nbsp;through&nbsp;proxy,&nbsp;everything&nbsp;works&nbsp;fine&nbsp;however&nbsp;quite&nbsp;soon&nbsp;the&nbsp;connections&nbsp;start&nbsp;stalling&nbsp;and&nbsp;all&nbsp;end&nbsp;up&nbsp;timeouting.&lt;/span&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;The&nbsp;logs&nbsp;show&nbsp;that&nbsp;clients&nbsp;did&nbsp;issue&nbsp;a&nbsp;CONNECT,&nbsp;however&nbsp;the&nbsp;connections&nbsp;are&nbsp;stuck&nbsp;(and&nbsp;eventually&nbsp;timeout)&nbsp;and&nbsp;netstat&nbsp;is&nbsp;showing&nbsp;exactly&nbsp;10&nbsp;connections&nbsp;in&nbsp;SYN_SENT&nbsp;state&nbsp;towards&nbsp;npm&nbsp;registry.&nbsp;I&nbsp;am&nbsp;kinda&nbsp;puzzled,&nbsp;where&nbsp;this&nbsp;number&nbsp;comes&nbsp;from.&lt;/span&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;I&nbsp;am&nbsp;wondering&nbsp;whether&nbsp;npm&nbsp;registry&nbsp;starts&nbsp;throttling&nbsp;me&nbsp;or&nbsp;I&nbsp;am&nbsp;hitting&nbsp;some&nbsp;networking&nbsp;issue&nbsp;or&nbsp;squid&nbsp;misconfiguration.&lt;/span&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;Does&nbsp;anyone&nbsp;has&nbsp;any&nbsp;idea&nbsp;what&nbsp;could&nbsp;be&nbsp;the&nbsp;issue?&nbsp;(or&nbsp;if&nbsp;someone&nbsp;is&nbsp;using&nbsp;squid&nbsp;for&nbsp;npm&nbsp;module&nbsp;caching,&nbsp;are&nbsp;you&nbsp;willing&nbsp;to&nbsp;share&nbsp;your&nbsp;working&nbsp;squid.conf&nbsp;;))?&lt;/span&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;Big&nbsp;thank&nbsp;you&nbsp;in&nbsp;advance,&nbsp;br,&nbsp;Jernej&lt;/span&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;The&nbsp;&quot;relevant&quot;&nbsp;parts&nbsp;of&nbsp;my&nbsp;configurations&nbsp;are:&lt;/span&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;acl&nbsp;intermediate_fetching&nbsp;transaction_initiator&nbsp;certificate-fetching&lt;/span&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;http_access&nbsp;allow&nbsp;intermediate_fetching&lt;/span&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;http_port&nbsp;80&nbsp;ssl-bump&nbsp;generate-host-certificates=on&nbsp;dynamic_cert_mem_cache_size=20MB&nbsp;tls-cert=/etc/squid/certs/squid-self-signed.crt&nbsp;tls-key=/etc/squid/certs/squid-self-signed.key&nbsp;cipher=HIGH:MEDIUM:!LOW:!RC4:!SEED:!IDEA:!3DES:!MD5:!EXP:!PSK:!DSS&nbsp;options=NO_TLSv1,NO_SSLv3,SINGLE_DH_USE,SINGLE_ECDH_USE&nbsp;tls-dh=prime256v1:/etc/squid/certs/squid-self-signed_dhparam.pem&nbsp;disable-pmtu-discovery=transparent&lt;/span&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;sslcrtd_program&nbsp;/usr/lib/squid/security_file_certgen&nbsp;-s&nbsp;/var/spool/squid/ssl_db&nbsp;-M&nbsp;20MB&lt;/span&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;sslcrtd_children&nbsp;8&lt;/span&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;ssl_bump&nbsp;server-first&nbsp;all&lt;/span&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;sslproxy_cert_error&nbsp;deny&nbsp;all&lt;/span&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;forwarded_for&nbsp;delete&lt;/span&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;via&nbsp;off&lt;/span&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;request_header_access&nbsp;X-Forwarded-For&nbsp;deny&nbsp;all&lt;/span&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;request_header_access&nbsp;Via&nbsp;&nbsp;deny&nbsp;all&lt;/span&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;#&nbsp;dns&lt;/span&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;positive_dns_ttl&nbsp;31&nbsp;seconds&lt;/span&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;negative_dns_ttl&nbsp;30&nbsp;seconds&lt;/span&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;httpd_suppress_version_string&nbsp;on&lt;/span&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;connect_timeout&nbsp;10&nbsp;seconds&lt;/span&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;squid&nbsp;-v:&nbsp;&lt;/span&gt;&lt;a&nbsp;href=&quot;https://pastebin.com/KRywK3rN&quot;&nbsp;class=&quot;&quot;&gt;https://pastebin.com/KRywK3rN&lt;/a&gt;&lt;br&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;&lt;span&nbsp;style=&quot;caret-color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&nbsp;class=&quot;&quot;&gt;Full&nbsp;config:&nbsp;&lt;/span&gt;&lt;a&nbsp;href=&quot;https://pastebin.com/xsgS5J38&quot;&nbsp;class=&quot;&quot;&gt;https://pastebin.com/xsgS5J38&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
