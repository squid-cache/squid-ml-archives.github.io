<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hello&nbsp;all,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;now&nbsp;compiled&nbsp;and&nbsp;installed&nbsp;squid&nbsp;4.17&nbsp;as&nbsp;a&nbsp;transition&nbsp;solution&nbsp;on&nbsp;ubuntu&nbsp;22.04.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Can&nbsp;someone&nbsp;support&nbsp;me&nbsp;regarding&nbsp;my&nbsp;question&nbsp;about&nbsp;compiling&nbsp;squid&nbsp;5.6&nbsp;on&nbsp;ubuntu&nbsp;22.04?&lt;/div&gt;&lt;div&gt;Since&nbsp;my&nbsp;previous&nbsp;attempts&nbsp;also&nbsp;have&nbsp;the&nbsp;&quot;memory&nbsp;leak&quot;&nbsp;on&nbsp;ubuntu&nbsp;22.04&nbsp;and&nbsp;squid&nbsp;5.6&nbsp;problem&nbsp;again.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Kind&nbsp;regards&nbsp;Ronny&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;----------&nbsp;Forwarded&nbsp;message&nbsp;---------&lt;br&gt;Von:&nbsp;&lt;strong&nbsp;class=&quot;gmail_sendername&quot;&nbsp;dir=&quot;auto&quot;&gt;Ronny&nbsp;Preiss&lt;/strong&gt;&nbsp;&lt;span&nbsp;dir=&quot;auto&quot;&gt;&lt;&lt;a&nbsp;href=&quot;mailto:ronny.preiss@gmail.com&quot;&gt;ronny.preiss@gmail.com&lt;/a&gt;&gt;&lt;/span&gt;&lt;br&gt;Date:&nbsp;Mo.,&nbsp;11.&nbsp;Juli&nbsp;2022&nbsp;um&nbsp;08:54 Uhr&lt;br&gt;Subject:&nbsp;Sqid&nbsp;uses&nbsp;all&nbsp;RAM&nbsp;/&nbsp;killed&nbsp;by&nbsp;OOM&lt;br&gt;To:&nbsp;&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hello&nbsp;all,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;the&nbsp;following&nbsp;problem&nbsp;with&nbsp;squid&nbsp;5.2&nbsp;on&nbsp;ubuntu&nbsp;22.04.&lt;/div&gt;&lt;div&gt;Squid&nbsp;consumes&nbsp;all&nbsp;ram&nbsp;and&nbsp;the&nbsp;entire&nbsp;SWAP.&nbsp;When&nbsp;swap&nbsp;and&nbsp;ram&nbsp;are&nbsp;completely&nbsp;full,&nbsp;the&nbsp;OOM&nbsp;killer&nbsp;strikes&nbsp;and&nbsp;terminates&nbsp;the&nbsp;process.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;We&nbsp;use&nbsp;three&nbsp;internal&nbsp;child&nbsp;proxy&nbsp;servers&nbsp;with&nbsp;keepalived&nbsp;and&nbsp;haproxy&nbsp;as&nbsp;load&nbsp;balancers.&nbsp;From&nbsp;our&nbsp;ISP&nbsp;we&nbsp;use&nbsp;a&nbsp;parent&nbsp;upstream&nbsp;proxy&nbsp;for&nbsp;external&nbsp;internet&nbsp;traffic.&lt;br&gt;&lt;/div&gt;&lt;div&gt;As&nbsp;an&nbsp;operating&nbsp;system&nbsp;we&nbsp;have&nbsp;so&nbsp;far&nbsp;Ubuntu&nbsp;20.04.4&nbsp;with&nbsp;squid&nbsp;4.1&nbsp;in&nbsp;use.&nbsp;This&nbsp;constellation&nbsp;works&nbsp;flawlessly.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Now&nbsp;I&nbsp;want&nbsp;to&nbsp;update&nbsp;the&nbsp;Server&nbsp;to&nbsp;Ubuntu&nbsp;22.04&nbsp;and&nbsp;squid&nbsp;5.2.&nbsp;But&nbsp;with&nbsp;Ubuntu&nbsp;22.04&nbsp;and&nbsp;squid&nbsp;5.2&nbsp;the&nbsp;above&nbsp;mentioned&nbsp;problem&nbsp;with&nbsp;the&nbsp;OOM&nbsp;Killer&nbsp;occurs.&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;new&nbsp;machine&nbsp;has&nbsp;only&nbsp;the&nbsp;OS&nbsp;and&nbsp;squid&nbsp;installed.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Who&nbsp;can&nbsp;help&nbsp;me&nbsp;with&nbsp;a&nbsp;solution?&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;With&nbsp;kind&nbsp;regards&lt;/div&gt;&lt;div&gt;Ronny&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Attached&nbsp;the&nbsp;squid&nbsp;configuration&nbsp;and&nbsp;the&nbsp;VMWare&nbsp;specs.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;###&nbsp;VM&nbsp;Specs&nbsp;###&lt;/div&gt;&lt;div&gt;OS:&nbsp;Ubuntu&nbsp;22.04&nbsp;Server&lt;/div&gt;&lt;div&gt;CPU:&nbsp;4x&nbsp;(Intel(R)&nbsp;Xeon(R)&nbsp;CPU&nbsp;E5-2690&nbsp;v3&nbsp;@&nbsp;2.60GHz)&lt;/div&gt;&lt;div&gt;RAM:&nbsp;4&nbsp;GB&lt;/div&gt;&lt;div&gt;VMWare:&nbsp;ESXi&nbsp;7.0&nbsp;U2&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;###&nbsp;CONFIG&nbsp;###&lt;/div&gt;&lt;div&gt;acl&nbsp;&lt;a&nbsp;href=&quot;http://10.172.128.0/18&quot;&nbsp;target=&quot;_blank&quot;&gt;10.172.xxx.xxx/18&lt;/a&gt;&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://10.172.128.0/18&quot;&nbsp;target=&quot;_blank&quot;&gt;10.172.xxx.xxx/18&lt;/a&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;acl&nbsp;&lt;a&nbsp;href=&quot;http://172.16.0.0/12&quot;&nbsp;target=&quot;_blank&quot;&gt;172.16.xxx.xxx/12&lt;/a&gt;&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://172.16.0.0/12&quot;&nbsp;target=&quot;_blank&quot;&gt;172.16.xxx.xxx/12&lt;/a&gt;&lt;/div&gt;&lt;div&gt;acl&nbsp;&lt;a&nbsp;href=&quot;http://192.168.0.0/16&quot;&nbsp;target=&quot;_blank&quot;&gt;192.168.xxx.xxx/16&lt;/a&gt;&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://192.168.0.0/16&quot;&nbsp;target=&quot;_blank&quot;&gt;192.168.xxx.xxx/16&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;80&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;21&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;443&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;70&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;210&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;1025-65535&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;280&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;488&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;591&lt;/div&gt;&lt;div&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;777&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;http_access&nbsp;allow&nbsp;&lt;a&nbsp;href=&quot;http://10.172.128.0/18&quot;&nbsp;target=&quot;_blank&quot;&gt;10.172.xxx.xxx/18&lt;/a&gt;&nbsp;Safe_ports&lt;/div&gt;&lt;div&gt;http_access&nbsp;allow&nbsp;&lt;a&nbsp;href=&quot;http://172.16.0.0/12&quot;&nbsp;target=&quot;_blank&quot;&gt;172.16.xxx.xxx/12&lt;/a&gt;&nbsp;Safe_ports&lt;/div&gt;&lt;div&gt;http_access&nbsp;allow&nbsp;&lt;a&nbsp;href=&quot;http://192.168.0.0/16&quot;&nbsp;target=&quot;_blank&quot;&gt;192.168.xxx.xxx/16&lt;/a&gt;&nbsp;Safe_ports&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;http_access&nbsp;allow&nbsp;localhost&nbsp;manager&lt;br&gt;&lt;/div&gt;&lt;div&gt;http_access&nbsp;allow&nbsp;localhost&lt;/div&gt;&lt;div&gt;http_access&nbsp;deny&nbsp;manager&lt;/div&gt;&lt;div&gt;http_access&nbsp;deny&nbsp;all&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;include&nbsp;/etc/squid/conf.d/*&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;http_port&nbsp;&lt;a&nbsp;href=&quot;http://10.172.128.34:3128&quot;&nbsp;target=&quot;_blank&quot;&gt;10.172.xxx.xxx:3128&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;cache_peer&nbsp;10.210.xxx.xxx&nbsp;parent&nbsp;8080&nbsp;0&lt;br&gt;&lt;/div&gt;&lt;div&gt;cache_dir&nbsp;ufs&nbsp;/var/spool/squid&nbsp;3000&nbsp;16&nbsp;256&lt;/div&gt;&lt;div&gt;cache_effective_user&nbsp;proxy&lt;br&gt;&lt;/div&gt;&lt;div&gt;cache_effective_group&nbsp;proxy&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;coredump_dir&nbsp;/var/spool/squid&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;refresh_pattern&nbsp;^ftp: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1440 &nbsp; &nbsp;20% &nbsp; &nbsp; 10080&lt;/div&gt;&lt;div&gt;refresh_pattern&nbsp;^gopher: &nbsp; &nbsp; &nbsp; &nbsp;1440 &nbsp; &nbsp;0% &nbsp; &nbsp; &nbsp;1440&lt;/div&gt;&lt;div&gt;refresh_pattern&nbsp;-i&nbsp;(/cgi-bin/|\?)&nbsp;0 &nbsp; &nbsp; 0% &nbsp; &nbsp; &nbsp;0&lt;/div&gt;&lt;div&gt;refresh_pattern&nbsp;\/(Packages|Sources)(|\.bz2|\.gz|\.xz)$&nbsp;0&nbsp;0%&nbsp;0&nbsp;refresh-ims&lt;/div&gt;&lt;div&gt;refresh_pattern&nbsp;\/Release(|\.gpg)$&nbsp;0&nbsp;0%&nbsp;0&nbsp;refresh-ims&lt;/div&gt;&lt;div&gt;refresh_pattern&nbsp;\/InRelease$&nbsp;0&nbsp;0%&nbsp;0&nbsp;refresh-ims&lt;/div&gt;&lt;div&gt;refresh_pattern&nbsp;\/(Translation-.*)(|\.bz2|\.gz|\.xz)$&nbsp;0&nbsp;0%&nbsp;0&nbsp;refresh-ims&lt;/div&gt;&lt;div&gt;refresh_pattern&nbsp;. &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp; &nbsp; 20% &nbsp; &nbsp; 4320&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;never_direct&nbsp;allow&nbsp;all&lt;/div&gt;&lt;div&gt;max_filedescriptors&nbsp;40960&lt;br&gt;&lt;/div&gt;&lt;div&gt;dns_nameservers&nbsp;10.244.xxx.xxx&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;###&nbsp;DMESG&nbsp;###&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;[256929.150801]&nbsp;oom-kill:constraint=CONSTRAINT_NONE,nodemask=(null),cpuset=/,mems_allowed=0,global_oom,task_memcg=/system.slice/squid.service,task=squid,pid=26390,uid=13&lt;/div&gt;&lt;div&gt;[256929.150822]&nbsp;Out&nbsp;of&nbsp;memory:&nbsp;Killed&nbsp;process&nbsp;26390&nbsp;(squid)&nbsp;total-vm:9691764kB,&nbsp;anon-rss:3657748kB,&nbsp;file-rss:2320kB,&nbsp;shmem-rss:0kB,&nbsp;UID:13&nbsp;pgtables:18932kB&nbsp;oom_score_adj:0&lt;/div&gt;&lt;div&gt;[256929.510641]&nbsp;oom_reaper:&nbsp;reaped&nbsp;process&nbsp;26390&nbsp;(squid),&nbsp;now&nbsp;anon-rss:0kB,&nbsp;file-rss:0kB,&nbsp;shmem-rss:0kB&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
