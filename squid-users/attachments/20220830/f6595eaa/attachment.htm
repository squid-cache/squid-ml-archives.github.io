<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;I&#39;m&nbsp;still&nbsp;not&nbsp;having&nbsp;any&nbsp;luck. &nbsp;I&#39;d&nbsp;like&nbsp;to&nbsp;just&nbsp;leave&nbsp;it&nbsp;open&nbsp;and&nbsp;I&nbsp;understand&nbsp;that&nbsp;it&nbsp;could&nbsp;be&nbsp;abused. &nbsp;My&nbsp;&quot;CURL&quot;&nbsp;results&nbsp;are;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;curl&nbsp;-v&nbsp;--proxy &lt;a&nbsp;href=&quot;http://squid_server:3128/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://SQUID_SERVER:3128&lt;/a&gt; -I &lt;a&nbsp;href=&quot;http://www.example.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.example.com&lt;/a&gt;&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;*&nbsp;About&nbsp;to&nbsp;connect()&nbsp;to&nbsp;proxy&nbsp;SQUID_SERVER&nbsp;port&nbsp;3128&nbsp;(#0)&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;*  &nbsp;Trying&nbsp;xxx.xxx.xxx.xxx...&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;*&nbsp;Connected&nbsp;to&nbsp;SQUID_SERVER&nbsp;(xxx.xxx.xxx.xxx)&nbsp;port&nbsp;3128&nbsp;(#0)&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&gt;&nbsp;HEAD &lt;a&nbsp;href=&quot;http://www.example.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.example.com/&lt;/a&gt; HTTP/1.1&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&gt;&nbsp;User-Agent:&nbsp;curl/7.29.0&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&gt;&nbsp;Host: &lt;a&nbsp;href=&quot;http://www.example.com/&quot;&nbsp;target=&quot;_blank&quot;&gt;www.example.com&lt;/a&gt;&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&gt;&nbsp;Accept:&nbsp;*/*&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&gt;&nbsp;Proxy-Connection:&nbsp;Keep-Alive&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&gt;&lt;u&gt;&lt;/u&gt; &lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;*&nbsp;Empty&nbsp;reply&nbsp;from&nbsp;server&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;*&nbsp;Connection&nbsp;#0&nbsp;to&nbsp;host&nbsp;SQUID_SERVER&nbsp;left&nbsp;intact&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;curl:&nbsp;(52)&nbsp;Empty&nbsp;reply&nbsp;from&nbsp;server&lt;/p&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;is&nbsp;my&nbsp;configuration;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;dns_v4_first&nbsp;on&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;never_direct&nbsp;allow&nbsp;all&lt;br&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;sslproxy_cert_error&nbsp;allow&nbsp;all&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt; &lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;http_port&nbsp;3128&nbsp;intercept&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;acl&nbsp;all&nbsp;src&nbsp;all&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;http_access&nbsp;allow&nbsp;all&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt; &lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;443&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;lang=&quot;FR&quot;&gt;acl&nbsp;Safe_ports&nbsp;port&nbsp;80         &nbsp;#&nbsp;http&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;lang=&quot;FR&quot;&gt;http_access&nbsp;deny&nbsp;!Safe_ports&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;lang=&quot;FR&quot;&gt;&lt;u&gt;&lt;/u&gt; &lt;u&gt;&lt;/u&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;lang=&quot;FR&quot;&gt;acl&nbsp;http&nbsp;proto&nbsp;http&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;span&nbsp;lang=&quot;FR&quot;&gt;acl&nbsp;port_80&nbsp;port&nbsp;80&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;acl&nbsp;port_443&nbsp;port&nbsp;443&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;acl&nbsp;CONNECT&nbsp;method&nbsp;CONNECT&lt;u&gt;&lt;/u&gt;&lt;u&gt;&lt;/u&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;u&gt;&lt;/u&gt;&lt;br&gt;&lt;/p&gt;&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;debug_options&nbsp;ALL,1&nbsp;33,2&nbsp;28,9&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Wed,&nbsp;Aug&nbsp;17,&nbsp;2022&nbsp;at&nbsp;2:01&nbsp;PM&nbsp;Alex&nbsp;Rousskov&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:rousskov@measurement-factory.com&quot;&gt;rousskov@measurement-factory.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;On&nbsp;8/15/22&nbsp;21:49,&nbsp;Marcelo&nbsp;wrote:&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;How&nbsp;can&nbsp;I&nbsp;transfer&nbsp;connection&nbsp;information&nbsp;from&nbsp;one&nbsp;squid&nbsp;server&nbsp;to&nbsp;another?&lt;br&gt;<br>
&lt;br&gt;<br>
Use&nbsp;cache_peer&nbsp;login=PASSTHRU&nbsp;or&nbsp;login=PASS.&nbsp;Other&nbsp;login=...&nbsp;options&nbsp;may&nbsp;&lt;br&gt;<br>
also&nbsp;be&nbsp;of&nbsp;interest.&nbsp;See&nbsp;cache_peer&nbsp;documentation&nbsp;in&nbsp;your&nbsp;&lt;br&gt;<br>
squid.conf.documented&nbsp;for&nbsp;details&nbsp;and&nbsp;caveats.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
HTH,&lt;br&gt;<br>
&lt;br&gt;<br>
Alex.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;&nbsp;Example:&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;An&nbsp;user&nbsp;connects&nbsp;to&nbsp;Squid&nbsp;One&nbsp;(Squid&nbsp;One&nbsp;IP&nbsp;192.1.1.1)&nbsp;through&nbsp;port&nbsp;4000&nbsp;&lt;br&gt;<br>
&gt;&nbsp;using&nbsp;usr/pw&nbsp;credentials.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;Squid&nbsp;One&nbsp;authenticates&nbsp;it&nbsp;via&nbsp;SQL&nbsp;DB.&nbsp;This&nbsp;part&nbsp;is&nbsp;already&nbsp;working&nbsp;fine.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;Squid&nbsp;One&nbsp;verifies&nbsp;if&nbsp;destination&nbsp;website&nbsp;is&nbsp;in&nbsp;dst&nbsp;domain&nbsp;list.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;If&nbsp;yes&nbsp;Squid&nbsp;One&nbsp;routes&nbsp;it&nbsp;to&nbsp;Route&nbsp;A.&nbsp;End&nbsp;of&nbsp;story.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;If&nbsp;no&nbsp;Squid&nbsp;One&nbsp;routes&nbsp;it&nbsp;to&nbsp;Squid&nbsp;Two.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;But&nbsp;Squid&nbsp;One&nbsp;must&nbsp;inform&nbsp;Squid&nbsp;Two&nbsp;who&nbsp;is&nbsp;the&nbsp;user&nbsp;and&nbsp;witch&nbsp;port&nbsp;he&nbsp;&lt;br&gt;<br>
&gt;&nbsp;asked&nbsp;to&nbsp;connect.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;Why?&nbsp;Because&nbsp;Squid&nbsp;Two&nbsp;must&nbsp;use&nbsp;this&nbsp;info&nbsp;as&nbsp;if&nbsp;the&nbsp;user&nbsp;itself&nbsp;is&nbsp;&lt;br&gt;<br>
&gt;&nbsp;connecting&nbsp;to&nbsp;Squid&nbsp;Two.&lt;br&gt;<br>
&gt;&nbsp;Why,&nbsp;again?&nbsp;Because&nbsp;Squid&nbsp;Two&nbsp;will&nbsp;use&nbsp;this&nbsp;info&nbsp;to&nbsp;route&nbsp;this&nbsp;user&nbsp;to&nbsp;&lt;br&gt;<br>
&gt;&nbsp;the&nbsp;correct&nbsp;route.&nbsp;This&nbsp;part&nbsp;is&nbsp;also&nbsp;done.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;My&nbsp;doubt&nbsp;is,&nbsp;is&nbsp;there&nbsp;a&nbsp;way&nbsp;to&nbsp;make&nbsp;Squid&nbsp;Two&nbsp;“thinks”&nbsp;that&nbsp;user&nbsp;is&nbsp;&lt;br&gt;<br>
&gt;&nbsp;connecting&nbsp;direct&nbsp;to&nbsp;Squid&nbsp;Two,&nbsp;so&nbsp;that,&nbsp;Squid&nbsp;Two&nbsp;can&nbsp;use&nbsp;user/port&nbsp;&lt;br&gt;<br>
&gt;&nbsp;information&nbsp;to&nbsp;route&nbsp;this&nbsp;poor&nbsp;little&nbsp;guy.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;It’s&nbsp;a&nbsp;bit&nbsp;hard&nbsp;to&nbsp;explain&nbsp;it&nbsp;through&nbsp;email.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;Best&nbsp;Regards.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;Marcelo.&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;&lt;br&gt;<br>
&gt;&nbsp;_______________________________________________&lt;br&gt;<br>
&gt;&nbsp;squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&gt;&nbsp;&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
