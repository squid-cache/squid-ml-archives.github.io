<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;line-break:&nbsp;after-white-space;&quot;&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;line-break:&nbsp;after-white-space;&quot;&nbsp;class=&quot;&quot;&gt;Hi,&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;I’ve&nbsp;got&nbsp;DLAP&nbsp;auth&nbsp;working&nbsp;against&nbsp;FreeIPA,&nbsp;but&nbsp;now&nbsp;I’m&nbsp;trying&nbsp;to&nbsp;get&nbsp;LDAP&nbsp;group&nbsp;all&nbsp;controls&nbsp;working.&nbsp;Initially&nbsp;I&nbsp;used&nbsp;the&nbsp;local&nbsp;unix&nbsp;group&nbsp;filter,&nbsp;which&nbsp;works&nbsp;great&nbsp;as&nbsp;the&nbsp;machine&nbsp;running&nbsp;Squid&nbsp;is&nbsp;able&nbsp;to&nbsp;query&nbsp;group&nbsp;membership&nbsp;through&nbsp;pam.&nbsp;But&nbsp;then&nbsp;I&nbsp;found&nbsp;that&nbsp;nested&nbsp;group&nbsp;membership&nbsp;didn’t&nbsp;work.&nbsp;So&nbsp;now&nbsp;I’m&nbsp;trying&nbsp;to&nbsp;query&nbsp;group&nbsp;membership&nbsp;via&nbsp;LDAP&nbsp;and&nbsp;failing&nbsp;miserably.&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;My&nbsp;config:&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;auth_param&nbsp;basic&nbsp;program&nbsp;/usr/lib/squid/basic_ldap_auth&nbsp;-v&nbsp;3&nbsp;-b&nbsp;&quot;cn=users,cn=accounts,dc=DOMAIN,dc=COM&quot;&nbsp;-D&nbsp;&quot;uid=squid-ldap,cn=sysaccounts,cn=etc,dc=DOMAIN,dc=COM&quot;&nbsp;-W&nbsp;&quot;/etc/squid/squid-ldap.cred&quot;&nbsp;-u&nbsp;uid&nbsp;-H&nbsp;&lt;a&nbsp;href=&quot;ldaps://ipa.domain.com:636&quot;&nbsp;class=&quot;&quot;&gt;LDAPS://ipa.domain.com:636&lt;/a&gt;&lt;br&nbsp;class=&quot;&quot;&gt;[…]&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;external_acl_type&nbsp;ldap_group&nbsp;%LOGIN&nbsp;/usr/lib/squid/ext_ldap_group_acl&nbsp;-v&nbsp;3&nbsp;-b&nbsp;&quot;cn=groups,cn=accounts,dc=DOMAIN,dc=COM&quot;&nbsp;-D&nbsp;&quot;uid=squid-ldap,cn=sysaccounts,cn=etc,dc=DOMAIN,dc=COM&quot;&nbsp;-W&nbsp;&quot;/etc/squid/squid-ldap.cred&quot;&nbsp;-f&nbsp;&quot;(&amp;(cn=%g)(member=uid=%u))&quot;&nbsp;-H&nbsp;&lt;a&nbsp;href=&quot;ldaps://ipa.domain.com:636&quot;&nbsp;class=&quot;&quot;&gt;LDAPS://ipa.domain.com:636&lt;/a&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;This&nbsp;ldap&nbsp;search&nbsp;works&nbsp;fine:&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;div&nbsp;class=&quot;&quot;&gt;user@ipa:~$&nbsp;ldapsearch&nbsp;-x&nbsp;-D&nbsp;'cn=Directory&nbsp;Manager'&nbsp;-W&nbsp;-b&nbsp;&quot;cn=groups,cn=accounts,dc=DOMAIN,dc=COM&quot;&nbsp;'(&amp;(cn=proxy)(member=uid=user,*))'&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;Enter&nbsp;LDAP&nbsp;Password:&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;#&nbsp;extended&nbsp;LDIF&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;#&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;#&nbsp;LDAPv3&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;#&nbsp;base&nbsp;&lt;cn=groups,cn=accounts,dc=DOMAIN,dc=COM&gt;&nbsp;with&nbsp;scope&nbsp;subtree&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;#&nbsp;filter:&nbsp;(&amp;(cn=proxy)(member=uid=user,*))&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;#&nbsp;requesting:&nbsp;ALL&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;#&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;#&nbsp;proxy,&nbsp;groups,&nbsp;accounts,&nbsp;&lt;a&nbsp;href=&quot;http://ipnexia.com&quot;&nbsp;class=&quot;&quot;&gt;ipnexia.com&lt;/a&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;dn:&nbsp;cn=proxy,cn=groups,cn=accounts,dc=ipnexia,dc=com&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;member:&nbsp;uid=user,cn=users,cn=accounts,dc=ipnexia,dc=com&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;memberOf:&nbsp;cn=proxyuser,cn=groups,cn=accounts,dc=ipnexia,dc=com&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;cn:&nbsp;proxy&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;objectClass:&nbsp;top&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;objectClass:&nbsp;groupofnames&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;objectClass:&nbsp;nestedgroup&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;objectClass:&nbsp;ipausergroup&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;objectClass:&nbsp;ipaobject&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;objectClass:&nbsp;GroupOfUniqueNames&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;objectClass:&nbsp;posixgroup&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;ipaUniqueID:&nbsp;******&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;gidNumber:&nbsp;******&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;#&nbsp;search&nbsp;result&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;search:&nbsp;2&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;result:&nbsp;0&nbsp;Success&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;#&nbsp;numResponses:&nbsp;2&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;#&nbsp;numEntries:&nbsp;1&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;So&nbsp;how&nbsp;am&nbsp;I&nbsp;meant&nbsp;to&nbsp;set&nbsp;the&nbsp;filter&nbsp;of&nbsp;ext_ldap_group_acl?&nbsp;Most&nbsp;FreeIPA&nbsp;and&nbsp;Squid&nbsp;information&nbsp;centers&nbsp;around&nbsp;using&nbsp;Kerberos&nbsp;(and&nbsp;SSO)&nbsp;but&nbsp;the&nbsp;clients&nbsp;I’m&nbsp;dealing&nbsp;with&nbsp;here&nbsp;are&nbsp;not&nbsp;tied&nbsp;to&nbsp;FreeIPA&nbsp;thus&nbsp;Kerberos&nbsp;is&nbsp;not&nbsp;an&nbsp;option.&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;br&nbsp;class=&quot;&quot;&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;&quot;&gt;&lt;a&nbsp;href=&quot;https://docs.oracle.com/cd/E88353_01/html/E72487/ext-ldap-group-acl-8.html&quot;&nbsp;class=&quot;&quot;&gt;https://docs.oracle.com/cd/E88353_01/html/E72487/ext-ldap-group-acl-8.html&lt;/a&gt;&nbsp;&lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
