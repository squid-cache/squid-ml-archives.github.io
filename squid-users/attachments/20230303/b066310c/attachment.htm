<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hi,&nbsp;I\m&nbsp;trying&nbsp;to&nbsp;store&nbsp;logs&nbsp;in&nbsp;a&nbsp;mysql&nbsp;server&nbsp;8.0&nbsp;database&nbsp;from&nbsp;squid&nbsp;5.7&nbsp;in&nbsp;Debian&nbsp;11.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;idea&nbsp;is&nbsp;store&nbsp;all&nbsp;logs&nbsp;in&nbsp;/var/log/squid/&nbsp;dir,&nbsp;and&nbsp;logs&nbsp;from&nbsp;specifics&nbsp;urls,&nbsp;domains&nbsp;and&nbsp;sites&nbsp;store&nbsp;in&nbsp;mysql&nbsp;database&nbsp;(&#39;access_log_internet&#39;&nbsp;table)&nbsp;to&nbsp;restrict&nbsp;those&nbsp;users&nbsp;that&nbsp;overcuote&nbsp;an&nbsp;specific&nbsp;amount&nbsp;of&nbsp;MB.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;The&nbsp;config:&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;access_log&nbsp;/var/log/squid/nav_basica-access.log&nbsp;squid&nbsp;dominios&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;<br>
access_log&nbsp;/var/log/squid/nav_basica-access.log&nbsp;squid&nbsp;dominios_parciales&nbsp;&lt;br&gt;&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;<br>
access_log&nbsp;/var/log/squid/nav_basica-access.log&nbsp;squid&nbsp;sitios&nbsp;&lt;br&gt;&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;<br>
access_log&nbsp;/var/log/squid/nav_basica-access.log&nbsp;squid&nbsp;dominio_cu&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;<br>
access_log&nbsp;/var/log/squid/internet-access.log&nbsp;squid&nbsp;!dominios&nbsp;!dominios_parciales&nbsp;!sitios&nbsp;!dominio_cu&lt;/i&gt;<br>
<br>
<br>
<br>
&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;logfile_daemon&nbsp;/usr/lib/squid/log_db_daemon&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;i&gt;access_log&nbsp;daemon:/&lt;a&nbsp;href=&quot;http://192.168.56.2:3306/squidmgr/access_log_internet/squidmgr/squidmgrsquid&quot;&gt;192.168.56.2:3306/squidmgr/access_log_internet/squidmgr/squidmgrsquid&lt;/a&gt;&nbsp;!dominios&nbsp;!dominios_parciales&nbsp;!sitios&nbsp;!dominio_cu&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;when&nbsp;try&nbsp;start&nbsp;squid,&nbsp;it&#39;s&nbsp;fail:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;i&gt;Dec&nbsp;31&nbsp;19:00:00&nbsp;1969Use&nbsp;of&nbsp;uninitialized&nbsp;value&nbsp;$DBI::errstr&nbsp;in&nbsp;concatenation&nbsp;(.)&nbsp;or&nbsp;string&nbsp;at&nbsp;/usr/lib/squid/log_db_daemon&nbsp;line&nbsp;403.&lt;br&gt;Dec&nbsp;31&nbsp;19:00:00&nbsp;1969Cannot&nbsp;connect&nbsp;to&nbsp;database:&nbsp; at&nbsp;/usr/lib/squid/log_db_daemon&nbsp;line&nbsp;403.&lt;br&gt;Dec&nbsp;31&nbsp;19:33:43&nbsp;1969/03/03&nbsp;14:10:32|&nbsp;pinger:&nbsp;Initialising&nbsp;ICMP&nbsp;pinger&nbsp;...&lt;br&gt;Dec&nbsp;31&nbsp;19:33:43&nbsp;1969/03/03&nbsp;14:10:32|&nbsp;pinger:&nbsp;ICMP&nbsp;socket&nbsp;opened.&lt;br&gt;Dec&nbsp;31&nbsp;19:33:43&nbsp;1969/03/03&nbsp;14:10:32|&nbsp;pinger:&nbsp;ICMPv6&nbsp;socket&nbsp;opened&lt;br&gt;Dec&nbsp;31&nbsp;19:33:43&nbsp;1969/03/03&nbsp;14:10:32|&nbsp;Pinger&nbsp;exiting.&lt;br&gt;Dec&nbsp;31&nbsp;19:33:43&nbsp;1969/03/03&nbsp;14:10:32&nbsp;kid1|&nbsp;logfileHandleWrite:&nbsp;daemon:/&lt;a&nbsp;href=&quot;http://192.168.56.1:3306/squidmgr/access_log_internet/squidmgr/squidmgr&quot;&gt;192.168.56.1:3306/squidmgr/access_log_internet/squidmgr/squidmgr&lt;/a&gt;:&nbsp;error&nbsp;writing&lt;br&gt; ((32)&nbsp;Broken&nbsp;pipe)&lt;br&gt;Dec&nbsp;31&nbsp;19:33:43&nbsp;1969/03/03&nbsp;14:10:32&nbsp;kid1|&nbsp;Closing&nbsp;HTTP(S)&nbsp;port&nbsp;&lt;a&nbsp;href=&quot;http://192.168.56.2:8080&quot;&gt;192.168.56.2:8080&lt;/a&gt;&lt;br&gt;Dec&nbsp;31&nbsp;19:33:43&nbsp;1969/03/03&nbsp;14:10:32&nbsp;kid1|&nbsp;storeDirWriteCleanLogs:&nbsp;Starting...&lt;br&gt;Dec&nbsp;31&nbsp;19:33:43&nbsp;1969/03/03&nbsp;14:10:32&nbsp;kid1|&nbsp; &nbsp;Finished. &nbsp;Wrote&nbsp;134&nbsp;entries.&lt;br&gt;Dec&nbsp;31&nbsp;19:33:43&nbsp;1969/03/03&nbsp;14:10:32&nbsp;kid1|&nbsp; &nbsp;Took&nbsp;0.00&nbsp;seconds&nbsp;(308045.98&nbsp;entries/sec).&lt;br&gt;Dec&nbsp;31&nbsp;19:33:43&nbsp;1969/03/03&nbsp;14:10:32&nbsp;kid1|&nbsp;FATAL:&nbsp;I&nbsp;don&#39;t&nbsp;handle&nbsp;this&nbsp;error&nbsp;well!&lt;br&gt;Dec&nbsp;31&nbsp;19:33:43&nbsp;1969/03/03&nbsp;14:10:32&nbsp;kid1|&nbsp;Squid&nbsp;Cache&nbsp;(Version&nbsp;5.7):&nbsp;Terminated&nbsp;abnormally.&lt;br&gt;Dec&nbsp;31&nbsp;19:00:00&nbsp;1969CPU&nbsp;Usage:&nbsp;0.161&nbsp;seconds&nbsp;=&nbsp;0.132&nbsp;user&nbsp;+&nbsp;0.029&nbsp;sys&lt;br&gt;Dec&nbsp;31&nbsp;19:00:00&nbsp;1969Maximum&nbsp;Resident&nbsp;Size:&nbsp;109440&nbsp;KB&lt;br&gt;Dec&nbsp;31&nbsp;19:00:00&nbsp;1969Page&nbsp;faults&nbsp;with&nbsp;physical&nbsp;i/o:&nbsp;0&lt;br&gt;Dec&nbsp;31&nbsp;19:33:43&nbsp;1969/03/03&nbsp;14:10:32&nbsp;kid1|&nbsp;Closing&nbsp;Pinger&nbsp;socket&nbsp;on&nbsp;FD&nbsp;66&lt;br&gt;Dec&nbsp;31&nbsp;19:33:43&nbsp;1969/03/03&nbsp;14:10:32|&nbsp;Removing&nbsp;PID&nbsp;file&nbsp;(/run/squid.pid)&lt;/i&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
