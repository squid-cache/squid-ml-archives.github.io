<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Oh....&nbsp;Guys&nbsp;!&nbsp;you&nbsp;are&nbsp;wizards.....&lt;br&gt;Works&nbsp;like&nbsp;I&nbsp;wanted.. &lt;br&gt;&lt;br&gt;One&nbsp;more&nbsp;may&nbsp;be&nbsp;last&nbsp;thing: &nbsp;-&nbsp;I&nbsp;found&nbsp;the&nbsp;strange&nbsp;behavior &nbsp;-&nbsp;if&nbsp;I&nbsp;make&nbsp;changes&nbsp;at&nbsp;my&nbsp;ext&nbsp;ACL&nbsp;script&nbsp;(its&nbsp;python&nbsp;)&nbsp;and&nbsp;then&nbsp;&quot;squid&nbsp;-k&nbsp;reconfigure&quot; &nbsp;then&nbsp;I&nbsp;can&nbsp;see&nbsp;that&nbsp;my&nbsp;script&nbsp;appears in&nbsp;the&nbsp;&quot;TOP&quot;&nbsp;of&nbsp;process&nbsp;and&nbsp;loads&nbsp;CPU&nbsp;to&nbsp;100%,&nbsp;if&nbsp;to&nbsp;restart&nbsp;the&nbsp;squid&nbsp;at&nbsp;whole&nbsp;&quot;systemctl&nbsp;restart&nbsp;squid&quot;&nbsp;-&nbsp;all&nbsp;OK&nbsp;again. &lt;br&gt;If&nbsp;you&nbsp;could&nbsp;to&nbsp;check&nbsp;this&nbsp;at&nbsp;your&nbsp;end&nbsp;-&nbsp;will&nbsp;be&nbsp;great&nbsp;! &lt;br&gt;&lt;br&gt;Thanks&nbsp;again! &lt;br&gt;&lt;br&gt;Alexg &lt;br&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;вс,&nbsp;23&nbsp;апр.&nbsp;2023 г.&nbsp;в&nbsp;16:36,&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;&gt;:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;On&nbsp;23/04/2023&nbsp;5:27&nbsp;pm,&nbsp;Alexeyяр&nbsp;Gruzdov&nbsp;wrote:&lt;br&gt;<br>
&gt;&nbsp;Hello&nbsp;Guys!&lt;br&gt;<br>
&gt;&nbsp;Thank&nbsp;you&nbsp;very&nbsp;much!&nbsp;For&nbsp;now&nbsp;all&nbsp;works&nbsp;like&nbsp;I&nbsp;needed!&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;But&nbsp;I&nbsp;have&nbsp;an&nbsp;one&nbsp;more&nbsp; questions&nbsp;about&nbsp;how&nbsp;I&nbsp;could&nbsp;to&nbsp;use&nbsp;the&nbsp;kv-pair:&lt;br&gt;<br>
...&lt;br&gt;<br>
&gt;&nbsp;and&nbsp;then&nbsp;ACL&nbsp;with&nbsp;“note&nbsp;proxy&nbsp;all&nbsp;“&lt;br&gt;<br>
&gt;&nbsp;But&nbsp;how&nbsp;the&nbsp;kv-pair&nbsp;must&nbsp;to&nbsp;be&nbsp;looked&nbsp;for&nbsp;this&nbsp;my&nbsp;tag&nbsp;?&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;I&nbsp;have&nbsp;tried&nbsp;to&nbsp;get&nbsp;answer&nbsp;from&nbsp;my&nbsp;ext&nbsp;script&nbsp;like&lt;br&gt;<br>
&gt;&nbsp;“OK”&lt;br&gt;<br>
&gt;&nbsp;“proxy=all”&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;But&nbsp;looks&nbsp;like&nbsp;it’s&nbsp;not&nbsp;correct&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;part&nbsp;of&nbsp;the&nbsp;instructions&nbsp;were&nbsp;missed:&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/Features/AddonHelpers#helper-protocols&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://wiki.squid-cache.org/Features/AddonHelpers#helper-protocols&lt;/a&gt;&lt;br&gt;<br>
&quot;&lt;br&gt;<br>
For&nbsp;every&nbsp;line&nbsp;sent&nbsp;by&nbsp;Squid&nbsp;exactly&nbsp;one&nbsp;line&nbsp;is&nbsp;expected&nbsp;back.&nbsp;Some&nbsp;&lt;br&gt;<br>
script&nbsp;language&nbsp;such&nbsp;as&nbsp;perl&nbsp;and&nbsp;python&nbsp;need&nbsp;to&nbsp;be&nbsp;careful&nbsp;about&nbsp;the&nbsp;&lt;br&gt;<br>
number&nbsp;of&nbsp;newlines&nbsp;in&nbsp;their&nbsp;output.&lt;br&gt;<br>
&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;your&nbsp;helper&nbsp;received&nbsp;something&nbsp;like&nbsp;this&nbsp;(with&nbsp;concurrency&nbsp;channel-id&nbsp;&lt;br&gt;<br>
&quot;1&quot;):&lt;br&gt;<br>
&lt;br&gt;<br>
  &quot;1&nbsp;bob&nbsp;192.0.2.1&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
It&nbsp;should&nbsp;produce&nbsp;a&nbsp;line&nbsp;like:&lt;br&gt;<br>
  &nbsp;&quot;1&nbsp;OK&nbsp;proxy=all&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
If&nbsp;no&nbsp;concurrency&nbsp;channel-id&nbsp;is&nbsp;received,&nbsp;then&nbsp;output&nbsp;is&nbsp;the&nbsp;same&nbsp;but&nbsp;&lt;br&gt;<br>
without&nbsp;sending&nbsp;channel-id&nbsp;back&nbsp;and&nbsp;MUST&nbsp;be&nbsp;sent&nbsp;in&nbsp;same&nbsp;order&nbsp;as&nbsp;received.&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;do&nbsp;recommend&nbsp;using&nbsp;concurrency.&nbsp;It&nbsp;can&nbsp;help&nbsp;further&nbsp;debug&nbsp;issues&nbsp;with&nbsp;&lt;br&gt;<br>
helpers&nbsp;responding&nbsp;incorrectly.&lt;br&gt;<br>
&lt;br&gt;<br>
HTH&lt;br&gt;<br>
Amos&lt;br&gt;<br>
&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
