<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;pre&nbsp;class=&quot;gmail-bz_comment_text&quot;&nbsp;id=&quot;gmail-comment_text_0&quot;&nbsp;style=&quot;white-space:pre-wrap;width:50em;color:rgb(0,0,0)&quot;&gt;&lt;span&nbsp;style=&quot;font-family:Arial,Helvetica,sans-serif&quot;&gt;Hi&nbsp;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;pre&nbsp;class=&quot;gmail-bz_comment_text&quot;&nbsp;id=&quot;gmail-comment_text_0&quot;&nbsp;style=&quot;white-space:pre-wrap;width:50em;color:rgb(0,0,0)&quot;&gt;&lt;font&nbsp;face=&quot;arial,&nbsp;sans-serif&quot;&gt;We&nbsp;recently&nbsp;shifted&nbsp;to&nbsp;squid&nbsp;5.9&nbsp;and&nbsp;started&nbsp;seeing&nbsp;errors&nbsp;in&nbsp;Transparent&nbsp;mode<br>
<br>
SECURITY&nbsp;ALERT:&nbsp;Host&nbsp;header&nbsp;forgery&nbsp;detected&nbsp;on&nbsp;conn3615903&nbsp;local=&lt;a&nbsp;href=&quot;http://44.242.184.237:443&quot;&gt;44.242.184.237:443&lt;/a&gt;&nbsp;remote=&lt;a&nbsp;href=&quot;http://10.109.176.240:8990&quot;&gt;10.109.176.240:8990&lt;/a&gt;&nbsp;FD&nbsp;28029&nbsp;flags=17&nbsp;(local&nbsp;IP&nbsp;does&nbsp;not&nbsp;match&nbsp;any&nbsp;domain&nbsp;IP)<br>
<br>
Previously&nbsp;we&nbsp;were&nbsp;using&nbsp;&lt;a&nbsp;href=&quot;https://github.com/NethServer/dev/issues/5348&quot;&nbsp;style=&quot;color:rgb(0,51,153)&quot;&gt;https://github.com/NethServer/dev/issues/5348&lt;/a&gt;.&nbsp;In&nbsp;addition&nbsp;we&nbsp;are&nbsp;using&nbsp;client_dst_passthru&nbsp;off.&nbsp;When&nbsp;building&nbsp;5.9,&nbsp;the&nbsp;patch&nbsp;was&nbsp;not&nbsp;applied&nbsp;cleanly&nbsp;and&nbsp;we&nbsp;wanted&nbsp;to&nbsp;check&nbsp;if&nbsp;things&nbsp;worked&nbsp;without&nbsp;this&nbsp;patch.&nbsp;They&nbsp;did&nbsp;not&nbsp;work.<br>
<br>
I&nbsp;did&nbsp;check&nbsp;the&nbsp;forum&nbsp;responses&nbsp;&nbsp;&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/KnowledgeBase/HostHeaderForgery&quot;&nbsp;style=&quot;color:rgb(0,51,153)&quot;&gt;https://wiki.squid-cache.org/KnowledgeBase/HostHeaderForgery&lt;/a&gt;.&nbsp;and&nbsp;&lt;a&nbsp;href=&quot;https://docs.diladele.com/faq/squid/host_header_forgery.html&quot;&nbsp;style=&quot;color:rgb(0,51,153)&quot;&gt;https://docs.diladele.com/faq/squid/host_header_forgery.html&lt;/a&gt;.&nbsp;We&nbsp;already&nbsp;support&nbsp;explicit&nbsp;proxy&nbsp;but&nbsp;that&nbsp;is&nbsp;not&nbsp;always&nbsp;an&nbsp;option.&nbsp;We&nbsp;can&nbsp;create&nbsp;another&nbsp;patch&nbsp;to&nbsp;circumvent&nbsp;issues&nbsp;like&nbsp;&nbsp;in&nbsp;&lt;a&nbsp;href=&quot;https://github.com/NethServer/dev/issues/5348&quot;&nbsp;style=&quot;color:rgb(0,51,153)&quot;&gt;https://github.com/NethServer/dev/issues/5348&lt;/a&gt;.&nbsp;But&nbsp;I&nbsp;wanted&nbsp;to&nbsp;know&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;plan&nbsp;to&nbsp;make&nbsp;this&nbsp;check&nbsp;optional&nbsp;or&nbsp;there&nbsp;is&nbsp;some&nbsp;way&nbsp;we&nbsp;can&nbsp;workaround&nbsp;this&nbsp;problem&nbsp;without&nbsp;changing&nbsp;the&nbsp;code.&nbsp;Without&nbsp;this&nbsp;support,&nbsp;how&nbsp;can&nbsp;intercept&nbsp;mode&nbsp;work&nbsp;for&nbsp;any&nbsp;website&nbsp;which&nbsp;is&nbsp;behind&nbsp;a&nbsp;loadbalancer&nbsp;with&nbsp;multiple&nbsp;IPs.<br>
<br>
Regards<br>
Sachin&lt;/font&gt;&lt;/pre&gt;&lt;/div&gt;<br>

</tt>
