<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;very&nbsp;clever,&nbsp;so&nbsp;you&nbsp;bunch&nbsp;all&nbsp;the&nbsp;acls&nbsp;up&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
acl&nbsp;NoSSLInterceptAnyOf&nbsp;any-of&nbsp;NoSSLInterceptDstDom&nbsp;NoSSLInterceptDstDomFile&nbsp;NoSSLInterceptRegEx&nbsp;NoSSLInterceptRegExFile&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;the&nbsp;key&nbsp;word&nbsp;is&nbsp;&quot;any-of&quot;&nbsp;ie&nbsp;if&nbsp;the&nbsp;url&nbsp;hits&nbsp;any&nbsp;one&nbsp;do&nbsp;that&nbsp;first&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;what&nbsp;about&nbsp;instead&nbsp;of&nbsp;making&nbsp;it&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
ssl::server_name_regex&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;i&nbsp;make&nbsp;it&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;<br>
&lt;strong&gt;dstdom_regex&lt;/strong&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Thu,&nbsp;29&nbsp;Jun&nbsp;2023&nbsp;at&nbsp;01:38,&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:ngtech1ltd@gmail.com&quot;&gt;ngtech1ltd@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;Hey&nbsp;Rob,&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;first&nbsp;thing&nbsp;is&nbsp;to&nbsp;allow&nbsp;the&nbsp;domain&nbsp;in&nbsp;the&nbsp;http_acces&nbsp;just&nbsp;to&nbsp;be&nbsp;sure&nbsp;and&nbsp;use&nbsp;a&nbsp;basic&nbsp;deny&nbsp;all&nbsp;bottom&nbsp;line.&lt;br&gt;<br>
Let&nbsp;me&nbsp;try&nbsp;to&nbsp;simplify&nbsp;your&nbsp;squid.conf&lt;br&gt;<br>
In&nbsp;a&nbsp;link:&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://gist.github.com/elico/b49f4a28d4b5db5ba882b10d40872d5e&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://gist.github.com/elico/b49f4a28d4b5db5ba882b10d40872d5e&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
In&nbsp;plain&nbsp;text:&lt;br&gt;<br>
##&nbsp;START&nbsp;OF&nbsp;FILE&lt;br&gt;<br>
#&nbsp;SSL&nbsp;Interception &nbsp;basic&nbsp;rules&lt;br&gt;<br>
acl&nbsp;DiscoverSNIHost&nbsp;at_step&nbsp;SslBump1&lt;br&gt;<br>
&lt;br&gt;<br>
acl&nbsp;NoSSLInterceptRegEx&nbsp;ssl::server_name_regex&nbsp;(^|.*\.)redshift3d\.com$&lt;br&gt;<br>
acl&nbsp;NoSSLInterceptRegExFile&nbsp;ssl::server_name_regex&nbsp;&quot;/usr/local/squid/etc/no-intercept-ssl-regex.txt&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
acl&nbsp;NoSSLInterceptDstDom&nbsp;ssl::server_name&nbsp;.&lt;a&nbsp;href=&quot;http://redshift3d.com&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;redshift3d.com&lt;/a&gt;&lt;br&gt;<br>
acl&nbsp;NoSSLInterceptDstDomFile&nbsp;ssl::server_name&nbsp;&quot;/usr/local/squid/etc/no-intercept-ssl-dstdom.txt&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
##&nbsp;Any&nbsp;of&nbsp;will&nbsp;test&nbsp;what&nbsp;ever&nbsp;rule&nbsp;match&nbsp;first&nbsp;in&nbsp;a&nbsp;first&nbsp;match/hit&nbsp;fasion&lt;br&gt;<br>
acl&nbsp;NoSSLInterceptAnyOf&nbsp;any-of&nbsp;NoSSLInterceptDstDom&nbsp;NoSSLInterceptDstDomFile&nbsp;NoSSLInterceptRegEx&nbsp;NoSSLInterceptRegExFile&lt;br&gt;<br>
&lt;br&gt;<br>
ssl_bump&nbsp;peek&nbsp;DiscoverSNIHost&lt;br&gt;<br>
ssl_bump&nbsp;splice&nbsp;NoSSLInterceptAnyOf&lt;br&gt;<br>
ssl_bump&nbsp;bump&nbsp;all&lt;br&gt;<br>
&lt;br&gt;<br>
#SSL&nbsp;Bump&nbsp;port&lt;br&gt;<br>
http_port&nbsp;3128&nbsp;ssl-bump&nbsp;cert=/usr/local/squid/etc/ssl_cert/myCA.pem&nbsp;generate-host-certificates=on&nbsp;dynamic_cert_mem_cache_size=4MB&lt;br&gt;<br>
sslcrtd_program&nbsp;/usr/local/squid/libexec/security_file_certgen&nbsp;-s&nbsp;/var/lib/ssl_db&nbsp;-M&nbsp;4MB&lt;br&gt;<br>
&lt;br&gt;<br>
##&nbsp;http_access&nbsp;acls,&nbsp;will&nbsp;apply&nbsp;on&nbsp;incomming&nbsp;requests&nbsp;and&nbsp;not&nbsp;on&nbsp;responses&lt;br&gt;<br>
acl&nbsp;special_url_regex&nbsp;url_regex&nbsp;https?://(^|.*\.)redshift3d\.com\/&lt;br&gt;<br>
acl&nbsp;special_url_regex_file&nbsp;url_regex&nbsp;&quot;/usr/local/squid/etc/special_url_regex.txt&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
acl&nbsp;special_url_dst_dom&nbsp;dstdomain&nbsp;.&lt;a&nbsp;href=&quot;http://redshift3d.com&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;redshift3d.com&lt;/a&gt;&lt;br&gt;<br>
acl&nbsp;special_url_dst_dom_file&nbsp;dstdomain&nbsp;&quot;/usr/local/squid/etc/special_url_dstdom.txt&quot;&lt;br&gt;<br>
&lt;br&gt;<br>
acl&nbsp;special_url_any_of&nbsp;any-of&nbsp;special_url_dst_dom&nbsp;special_url_dst_dom_file&nbsp;special_url_regex&nbsp;special_url_regex_file&lt;br&gt;<br>
&lt;br&gt;<br>
acl&nbsp;localnet&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://192.168.0.0/16&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;192.168.0.0/16&lt;/a&gt;&lt;br&gt;<br>
acl&nbsp;localnet&nbsp;src&nbsp;&lt;a&nbsp;href=&quot;http://10.0.0.0/8&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;10.0.0.0/8&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
http_access&nbsp;allow&nbsp;localnet&nbsp;special_url_any_of&lt;br&gt;<br>
http_access&nbsp;deny&nbsp;all&lt;br&gt;<br>
##&nbsp;END&nbsp;OF&nbsp;FILE&lt;br&gt;<br>
&lt;br&gt;<br>
 Once&nbsp;the&nbsp;above&nbsp;will&nbsp;work&nbsp;try&nbsp;to&nbsp;add&nbsp;other&nbsp;http_access&nbsp;rule&nbsp;like&nbsp;reply&nbsp;access&nbsp;rules&lt;br&gt;<br>
&lt;br&gt;<br>
Let&nbsp;me&nbsp;know&nbsp;what&nbsp;happens,&lt;br&gt;<br>
Eliezer&lt;br&gt;<br>
&lt;br&gt;<br>
From:&nbsp;robert&nbsp;k&nbsp;Wild&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:robertkwild@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;robertkwild@gmail.com&lt;/a&gt;&gt;&nbsp;&lt;br&gt;<br>
Sent:&nbsp;Tuesday,&nbsp;June&nbsp;27,&nbsp;2023&nbsp;09:36&lt;br&gt;<br>
To:&nbsp;&lt;a&nbsp;href=&quot;mailto:ngtech1ltd@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;ngtech1ltd@gmail.com&lt;/a&gt;&lt;br&gt;<br>
Cc:&nbsp;Squid&nbsp;Users&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&gt;&lt;br&gt;<br>
Subject:&nbsp;Re:&nbsp;[squid-users]&nbsp;make&nbsp;URL&nbsp;bypass&nbsp;squid&nbsp;proxy&lt;br&gt;<br>
&lt;br&gt;<br>
Hi&nbsp;Eliezer,&lt;br&gt;<br>
&lt;br&gt;<br>
this&nbsp;is&nbsp;a&nbsp;snippet&nbsp;of&nbsp;my&nbsp;whitelist&nbsp;and&nbsp;no&nbsp;intercept&nbsp;SSL&nbsp;config&lt;br&gt;<br>
&lt;br&gt;<br>
#SSL&nbsp;Interception&lt;br&gt;<br>
acl&nbsp;DiscoverSNIHost&nbsp;at_step&nbsp;SslBump1&lt;br&gt;<br>
acl&nbsp;NoSSLIntercept&nbsp;ssl::server_name_regex&nbsp;&quot;/usr/local/squid/etc/interceptssl.txt&quot;&lt;br&gt;<br>
ssl_bump&nbsp;peek&nbsp;DiscoverSNIHost&lt;br&gt;<br>
ssl_bump&nbsp;splice&nbsp;NoSSLIntercept&lt;br&gt;<br>
ssl_bump&nbsp;bump&nbsp;all&lt;br&gt;<br>
#&lt;br&gt;<br>
#SSL&nbsp;Bump&lt;br&gt;<br>
http_port&nbsp;3128&nbsp;ssl-bump&nbsp;cert=/usr/local/squid/etc/ssl_cert/myCA.pem&nbsp;generate-host-certificates=on&nbsp;dynamic_cert_mem_cache_size=4MB&lt;br&gt;<br>
sslcrtd_program&nbsp;/usr/local/squid/libexec/security_file_certgen&nbsp;-s&nbsp;/var/lib/ssl_db&nbsp;-M&nbsp;4MB&lt;br&gt;<br>
#&lt;br&gt;<br>
#deny&nbsp;up&nbsp;MIME&nbsp;types&lt;br&gt;<br>
acl&nbsp;upmime&nbsp;req_mime_type&nbsp;&quot;/usr/local/squid/etc/mimedeny.txt&quot;&lt;br&gt;<br>
#&lt;br&gt;<br>
#deny&nbsp;URL&nbsp;links&lt;br&gt;<br>
acl&nbsp;url_links&nbsp;url_regex&nbsp;&quot;/usr/local/squid/etc/linksurl.txt&quot;&lt;br&gt;<br>
#&lt;br&gt;<br>
#allow&nbsp;special&nbsp;URL&nbsp;paths&lt;br&gt;<br>
acl&nbsp;special_url&nbsp;url_regex&nbsp;&quot;/usr/local/squid/etc/urlspecial.txt&quot;&lt;br&gt;<br>
#&lt;br&gt;<br>
#deny&nbsp;down&nbsp;MIME&nbsp;types&lt;br&gt;<br>
acl&nbsp;downmime&nbsp;rep_mime_type&nbsp;&quot;/usr/local/squid/etc/mimedeny.txt&quot;&lt;br&gt;<br>
#&lt;br&gt;<br>
http_reply_access&nbsp;allow&nbsp;special_url&lt;br&gt;<br>
http_reply_access&nbsp;deny&nbsp;downmime&lt;br&gt;<br>
#http_access&nbsp;deny&nbsp;upmime&lt;br&gt;<br>
#http_access&nbsp;deny&nbsp;url_links&lt;br&gt;<br>
#&lt;br&gt;<br>
#HTTP_HTTPS&nbsp;whitelist&nbsp;websites&lt;br&gt;<br>
acl&nbsp;whitelist&nbsp;ssl::server_name_regex&nbsp;&quot;/usr/local/squid/etc/urlwhite.txt&quot;&lt;br&gt;<br>
#&lt;br&gt;<br>
http_access&nbsp;allow&nbsp;activation&nbsp;whitelist&lt;br&gt;<br>
http_access&nbsp;deny&nbsp;all&lt;br&gt;<br>
&lt;br&gt;<br>
so&nbsp;basically&nbsp;no&nbsp;SSL&nbsp;interception&lt;br&gt;<br>
&lt;br&gt;<br>
#SSL&nbsp;Interception&lt;br&gt;<br>
acl&nbsp;DiscoverSNIHost&nbsp;at_step&nbsp;SslBump1&lt;br&gt;<br>
acl&nbsp;NoSSLIntercept&nbsp;ssl::server_name_regex&nbsp;&quot;/usr/local/squid/etc/interceptssl.txt&quot;&lt;br&gt;<br>
ssl_bump&nbsp;peek&nbsp;DiscoverSNIHost&lt;br&gt;<br>
ssl_bump&nbsp;splice&nbsp;NoSSLIntercept&lt;br&gt;<br>
ssl_bump&nbsp;bump&nbsp;all&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
and&nbsp;whitelisting&lt;br&gt;<br>
&lt;br&gt;<br>
#HTTP_HTTPS&nbsp;whitelist&nbsp;websites&lt;br&gt;<br>
acl&nbsp;whitelist&nbsp;ssl::server_name_regex&nbsp;&quot;/usr/local/squid/etc/urlwhite.txt&quot;&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
in&nbsp;both&nbsp;txt&nbsp;files&nbsp;ie&lt;br&gt;<br>
&lt;br&gt;<br>
/usr/local/squid/etc/interceptssl.txt&nbsp;&lt;br&gt;<br>
/usr/local/squid/etc/urlwhite.txt&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
i&nbsp;have&nbsp;a&nbsp;URL&nbsp;that&nbsp;first&nbsp;i&nbsp;have&nbsp;to&nbsp;whitelist&nbsp;and&nbsp;then&nbsp;if&nbsp;i&nbsp;want&nbsp;squid&nbsp;not&nbsp;to&nbsp;inspect&nbsp;the&nbsp;url&nbsp;traffic&nbsp;i&nbsp;put&nbsp;it&nbsp;in&nbsp;the&nbsp;SSL&nbsp;interception&nbsp;(i&nbsp;do&nbsp;this&nbsp;as&nbsp;some&nbsp;websites&nbsp;dont&nbsp;like&nbsp;MITM&nbsp;)&lt;br&gt;<br>
&lt;br&gt;<br>
but&nbsp;even&nbsp;putting&nbsp;the&nbsp;URL&nbsp;in&nbsp;question&nbsp;in&nbsp;both&nbsp;files&nbsp;im&nbsp;still&nbsp;having&nbsp;issues&nbsp;with&nbsp;this&nbsp;website&nbsp;ie&nbsp;its&nbsp;still&nbsp;being&nbsp;detected&nbsp;that&nbsp;its&nbsp;passing&nbsp;through&nbsp;a&nbsp;proxy&lt;br&gt;<br>
&lt;br&gt;<br>
thanks,&lt;br&gt;<br>
rob&lt;br&gt;<br>
&lt;br&gt;<br>
On&nbsp;Mon,&nbsp;26&nbsp;Jun&nbsp;2023&nbsp;at&nbsp;23:35,&nbsp;&lt;mailto:&lt;a&nbsp;href=&quot;mailto:ngtech1ltd@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;ngtech1ltd@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;<br>
Hey&nbsp;Robert,&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;am&nbsp;not&nbsp;sure&nbsp;what&nbsp;forward&nbsp;proxy&nbsp;setup&nbsp;you&nbsp;have&nbsp;there.&lt;br&gt;<br>
A&nbsp;simple&nbsp;forward&nbsp;proxy?&lt;br&gt;<br>
What&nbsp;tool&nbsp;are&nbsp;you&nbsp;using&nbsp;for&nbsp;whitelisting?&lt;br&gt;<br>
You&nbsp;can&nbsp;use&nbsp;an&nbsp;external&nbsp;acl&nbsp;helper&nbsp;to&nbsp;allow&nbsp;dynamic&nbsp;updates&nbsp;of&nbsp;the&nbsp;whitelists&nbsp;or&lt;br&gt;<br>
to&nbsp;periodic&nbsp;update&nbsp;your&nbsp;lists&nbsp;and&nbsp;reload.&lt;br&gt;<br>
It&nbsp;will&nbsp;depend&nbsp;on&nbsp;the&nbsp;size&nbsp;of&nbsp;your&nbsp;lists.&lt;br&gt;<br>
What&nbsp;OS&nbsp;are&nbsp;you&nbsp;using&nbsp;for&nbsp;your&nbsp;squid&nbsp;proxy?&lt;br&gt;<br>
&lt;br&gt;<br>
More&nbsp;details&nbsp;will&nbsp;help&nbsp;us&nbsp;help&nbsp;you.&lt;br&gt;<br>
&lt;br&gt;<br>
Eliezer&lt;br&gt;<br>
&lt;br&gt;<br>
From:&nbsp;squid-users&nbsp;&lt;mailto:&lt;a&nbsp;href=&quot;mailto:squid-users-bounces@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users-bounces@lists.squid-cache.org&lt;/a&gt;&gt;&nbsp;On&nbsp;Behalf&nbsp;Of&nbsp;robert&nbsp;k&nbsp;Wild&lt;br&gt;<br>
Sent:&nbsp;Monday,&nbsp;June&nbsp;26,&nbsp;2023&nbsp;22:25&lt;br&gt;<br>
To:&nbsp;Squid&nbsp;Users&nbsp;&lt;mailto:&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&gt;&lt;br&gt;<br>
Subject:&nbsp;[squid-users]&nbsp;make&nbsp;URL&nbsp;bypass&nbsp;squid&nbsp;proxy&lt;br&gt;<br>
&lt;br&gt;<br>
hi&nbsp;all,&lt;br&gt;<br>
&lt;br&gt;<br>
i&nbsp;have&nbsp;set&nbsp;up&nbsp;squid&nbsp;for&nbsp;url&nbsp;whitelisting&nbsp;and&nbsp;no&nbsp;intercept&nbsp;SSL&nbsp;(see&nbsp;below)&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://wiki.squid-cache.org/ConfigExamples/Caching/AdobeProducts&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://wiki.squid-cache.org/ConfigExamples/Caching/AdobeProducts&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;<br>
but&nbsp;some&nbsp;websites&nbsp;i&nbsp;want&nbsp;the&nbsp;client&nbsp;to&nbsp;bypass&nbsp;the&nbsp;squid&nbsp;proxy&nbsp;and&nbsp;go&nbsp;straight&nbsp;to&nbsp;the&nbsp;website&nbsp;as&nbsp;i&nbsp;think&nbsp;this&nbsp;is&nbsp;why&nbsp;a&nbsp;url&nbsp;isnt&nbsp;working&nbsp;even&nbsp;when&nbsp;i&nbsp;add&nbsp;the&nbsp;url&nbsp;to&nbsp;both&nbsp;files&nbsp;ie&nbsp;urlwhite&nbsp;and&nbsp;no&nbsp;intercept&nbsp;SSL&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
thanks,&lt;br&gt;<br>
rob&lt;br&gt;<br>
&lt;br&gt;<br>
--&nbsp;&lt;br&gt;<br>
Regards,&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
Robert&nbsp;K&nbsp;Wild.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
--&nbsp;&lt;br&gt;<br>
Regards,&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
Robert&nbsp;K&nbsp;Wild.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;br&gt;&lt;span&nbsp;class=&quot;gmail_signature_prefix&quot;&gt;--&nbsp;&lt;/span&gt;&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_signature&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Regards,&nbsp;&lt;br&gt;&lt;br&gt;Robert&nbsp;K&nbsp;Wild.&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
