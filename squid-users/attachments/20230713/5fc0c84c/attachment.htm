<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Rafael,&lt;div&gt; &nbsp;that&nbsp;code&nbsp;was&nbsp;moved&nbsp;to&nbsp;a&nbsp;RegisteredRunner&nbsp;in&nbsp;commit&nbsp;09490bb867d0b3f00a29911a65c715108e95b782&nbsp;.&lt;/div&gt;&lt;div&gt;I&#39;m&nbsp;not&nbsp;sure&nbsp;why&nbsp;it&nbsp;is&nbsp;not&nbsp;working&nbsp;for&nbsp;you;&nbsp;what is&nbsp;the&nbsp;output&nbsp;of&nbsp;&#39;squid&nbsp;-v&#39;&nbsp;to&nbsp;get&nbsp;configure&nbsp;options?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;&lt;div&gt; &nbsp;Francesco&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Thu,&nbsp;Jul&nbsp;13,&nbsp;2023&nbsp;at&nbsp;1:38 PM&nbsp;Rafael&nbsp;Akchurin&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:rafael.akchurin@diladele.com&quot;&gt;rafael.akchurin@diladele.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;Good&nbsp;day&nbsp;everyone,&lt;br&gt;<br>
&lt;br&gt;<br>
We&nbsp;are&nbsp;now&nbsp;trying&nbsp;to&nbsp;move&nbsp;the&nbsp;configuration&nbsp;with&nbsp;was&nbsp;valid&nbsp;and&nbsp;working&nbsp;in&nbsp;Squid&nbsp;5.7&nbsp;to&nbsp;Squid&nbsp;6.1&nbsp;and&nbsp;hitting&nbsp;the&nbsp;following&nbsp;error:&lt;br&gt;<br>
Unknown&nbsp;authentication&nbsp;scheme&nbsp;&#39;ntlm&#39;&lt;br&gt;<br>
&lt;br&gt;<br>
The&nbsp;problem&nbsp;seem&nbsp;to&nbsp;be&nbsp;with&nbsp;the&nbsp;following&nbsp;configuration&nbsp;we&nbsp;use&nbsp;(output&nbsp;from&nbsp;squid&nbsp;-k&nbsp;parse).&lt;br&gt;<br>
&lt;br&gt;<br>
023/07/13&nbsp;13:34:04|&nbsp;Processing:&nbsp;auth_param&nbsp;ntlm&nbsp;program&nbsp;/opt/websafety/bin/wsauth&nbsp;--dc1addr=dc1.diladele.lan&nbsp;--dc1port=389&lt;br&gt;<br>
2023/07/13&nbsp;13:34:04|&nbsp;ERROR:&nbsp;Failure&nbsp;while&nbsp;parsing&nbsp;Config&nbsp;File:&nbsp;Unknown&nbsp;authentication&nbsp;scheme&nbsp;&#39;ntlm&#39;.&lt;br&gt;<br>
2023/07/13&nbsp;13:34:04|&nbsp;FATAL:&nbsp;Bungled&nbsp;/opt/websafety/etc/squid/authentication.conf&nbsp;line&nbsp;231:&nbsp;auth_param&nbsp;ntlm&nbsp;program&nbsp;/opt/websafety/bin/wsauth&nbsp;--dc1addr=dc1.diladele.lan&nbsp;--dc1port=389&lt;br&gt;<br>
2023/07/13&nbsp;13:34:04|&nbsp;Squid&nbsp;Cache&nbsp;(Version&nbsp;6.1):&nbsp;Terminated&nbsp;abnormally.&lt;br&gt;<br>
&lt;br&gt;<br>
Comparing&nbsp;the&nbsp;contents&nbsp;of&nbsp;squid-5.9/src/AuthReg.cc&nbsp;and&nbsp;squid-6.1/src/AuthReg.cc&nbsp;it&nbsp;seems&nbsp;the&nbsp;support&nbsp;for&nbsp;NTLM&nbsp;authentication&nbsp;was&nbsp;indeed&nbsp;removed&nbsp;from&nbsp;the&nbsp;codebase&nbsp;(see&nbsp;below).&lt;br&gt;<br>
&lt;br&gt;<br>
May&nbsp;I&nbsp;ask&nbsp;if&nbsp;the&nbsp;NTLM&nbsp;scheme&nbsp;is&nbsp;not&nbsp;needed&nbsp;at&nbsp;all&nbsp;now&nbsp;and&nbsp;we&nbsp;should&nbsp;continue&nbsp;using&nbsp;only&nbsp;Negotiate&nbsp;scheme&nbsp;(letting&nbsp;it&nbsp;handle&nbsp;the&nbsp;NTLM&nbsp;as&nbsp;usual)?&lt;br&gt;<br>
&lt;br&gt;<br>
Best&nbsp;regards,&lt;br&gt;<br>
Rafael&nbsp;Akchurin&lt;br&gt;<br>
Diladele&nbsp;B.V.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
In&nbsp;5.0&nbsp;the&nbsp;AuthReg.cc&nbsp;was&lt;br&gt;<br>
&lt;br&gt;<br>
/**&lt;br&gt;<br>
*&nbsp;Initialize&nbsp;the&nbsp;authentication&nbsp;modules&nbsp;(if&nbsp;any)&lt;br&gt;<br>
*&nbsp;This&nbsp;is&nbsp;required&nbsp;once,&nbsp;before&nbsp;any&nbsp;configuration&nbsp;actions&nbsp;are&nbsp;taken.&lt;br&gt;<br>
*/&lt;br&gt;<br>
void&lt;br&gt;<br>
Auth::Init()&lt;br&gt;<br>
{&lt;br&gt;<br>
 &nbsp; &nbsp;debugs(29,DBG_IMPORTANT,&quot;Startup:&nbsp;Initializing&nbsp;Authentication&nbsp;Schemes&nbsp;...&quot;);&lt;br&gt;<br>
#if&nbsp;HAVE_AUTH_MODULE_BASIC&lt;br&gt;<br>
 &nbsp; &nbsp;static&nbsp;const&nbsp;char&nbsp;*basic_type&nbsp;=&nbsp;Auth::Basic::Scheme::GetInstance()-&gt;type();&lt;br&gt;<br>
 &nbsp; &nbsp;debugs(29,DBG_IMPORTANT,&quot;Startup:&nbsp;Initialized&nbsp;Authentication&nbsp;Scheme&nbsp;&#39;&quot;&nbsp;&lt;&lt;&nbsp;basic_type&nbsp;&lt;&lt;&nbsp;&quot;&#39;&quot;);&lt;br&gt;<br>
#endif&lt;br&gt;<br>
#if&nbsp;HAVE_AUTH_MODULE_DIGEST&lt;br&gt;<br>
 &nbsp; &nbsp;static&nbsp;const&nbsp;char&nbsp;*digest_type&nbsp;=&nbsp;Auth::Digest::Scheme::GetInstance()-&gt;type();&lt;br&gt;<br>
 &nbsp; &nbsp;debugs(29,DBG_IMPORTANT,&quot;Startup:&nbsp;Initialized&nbsp;Authentication&nbsp;Scheme&nbsp;&#39;&quot;&nbsp;&lt;&lt;&nbsp;digest_type&nbsp;&lt;&lt;&nbsp;&quot;&#39;&quot;);&lt;br&gt;<br>
#endif&lt;br&gt;<br>
#if&nbsp;HAVE_AUTH_MODULE_NEGOTIATE&lt;br&gt;<br>
 &nbsp; &nbsp;static&nbsp;const&nbsp;char&nbsp;*negotiate_type&nbsp;=&nbsp;Auth::Negotiate::Scheme::GetInstance()-&gt;type();&lt;br&gt;<br>
 &nbsp; &nbsp;debugs(29,DBG_IMPORTANT,&quot;Startup:&nbsp;Initialized&nbsp;Authentication&nbsp;Scheme&nbsp;&#39;&quot;&nbsp;&lt;&lt;&nbsp;negotiate_type&nbsp;&lt;&lt;&nbsp;&quot;&#39;&quot;);&lt;br&gt;<br>
#endif&lt;br&gt;<br>
#if&nbsp;HAVE_AUTH_MODULE_NTLM&lt;br&gt;<br>
 &nbsp; &nbsp;static&nbsp;const&nbsp;char&nbsp;*ntlm_type&nbsp;=&nbsp;Auth::Ntlm::Scheme::GetInstance()-&gt;type();&lt;br&gt;<br>
 &nbsp; &nbsp;debugs(29,DBG_IMPORTANT,&quot;Startup:&nbsp;Initialized&nbsp;Authentication&nbsp;Scheme&nbsp;&#39;&quot;&nbsp;&lt;&lt;&nbsp;ntlm_type&nbsp;&lt;&lt;&nbsp;&quot;&#39;&quot;);&lt;br&gt;<br>
#endif&lt;br&gt;<br>
 &nbsp; &nbsp;debugs(29,DBG_IMPORTANT,&quot;Startup:&nbsp;Initialized&nbsp;Authentication.&quot;);&lt;br&gt;<br>
}&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
In&nbsp;6.1&nbsp;it&nbsp;is&nbsp;now&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
/**&lt;br&gt;<br>
*&nbsp;Initialize&nbsp;the&nbsp;authentication&nbsp;modules&nbsp;(if&nbsp;any)&lt;br&gt;<br>
*&nbsp;This&nbsp;is&nbsp;required&nbsp;once,&nbsp;before&nbsp;any&nbsp;configuration&nbsp;actions&nbsp;are&nbsp;taken.&lt;br&gt;<br>
*/&lt;br&gt;<br>
void&lt;br&gt;<br>
Auth::Init()&lt;br&gt;<br>
{&lt;br&gt;<br>
 &nbsp; &nbsp;debugs(29,&nbsp;2,&nbsp;&quot;Initializing&nbsp;Authentication&nbsp;Schemes&nbsp;...&quot;);&lt;br&gt;<br>
#if&nbsp;HAVE_AUTH_MODULE_BASIC&lt;br&gt;<br>
 &nbsp; &nbsp;static&nbsp;const&nbsp;char&nbsp;*basic_type&nbsp;=&nbsp;Auth::Basic::Scheme::GetInstance()-&gt;type();&lt;br&gt;<br>
 &nbsp; &nbsp;debugs(29,&nbsp;2,&nbsp;&quot;Initialized&nbsp;Authentication&nbsp;Scheme&nbsp;&#39;&quot;&nbsp;&lt;&lt;&nbsp;basic_type&nbsp;&lt;&lt;&nbsp;&quot;&#39;&quot;);&lt;br&gt;<br>
#endif&lt;br&gt;<br>
#if&nbsp;HAVE_AUTH_MODULE_DIGEST&lt;br&gt;<br>
 &nbsp; &nbsp;static&nbsp;const&nbsp;char&nbsp;*digest_type&nbsp;=&nbsp;Auth::Digest::Scheme::GetInstance()-&gt;type();&lt;br&gt;<br>
 &nbsp; &nbsp;debugs(29,&nbsp;2,&nbsp;&quot;Initialized&nbsp;Authentication&nbsp;Scheme&nbsp;&#39;&quot;&nbsp;&lt;&lt;&nbsp;digest_type&nbsp;&lt;&lt;&nbsp;&quot;&#39;&quot;);&lt;br&gt;<br>
#endif&lt;br&gt;<br>
#if&nbsp;HAVE_AUTH_MODULE_NEGOTIATE&lt;br&gt;<br>
 &nbsp; &nbsp;static&nbsp;const&nbsp;char&nbsp;*negotiate_type&nbsp;=&nbsp;Auth::Negotiate::Scheme::GetInstance()-&gt;type();&lt;br&gt;<br>
 &nbsp; &nbsp;debugs(29,&nbsp;2,&nbsp;&quot;Initialized&nbsp;Authentication&nbsp;Scheme&nbsp;&#39;&quot;&nbsp;&lt;&lt;&nbsp;negotiate_type&nbsp;&lt;&lt;&nbsp;&quot;&#39;&quot;);&lt;br&gt;<br>
#endif&lt;br&gt;<br>
}&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;&lt;br&nbsp;clear=&quot;all&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;span&nbsp;class=&quot;gmail_signature_prefix&quot;&gt;--&nbsp;&lt;/span&gt;&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_signature&quot;&gt; &nbsp; &nbsp;Francesco&lt;/div&gt;<br>

</tt>
