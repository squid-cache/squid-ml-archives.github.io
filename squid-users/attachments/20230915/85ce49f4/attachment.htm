<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=iso-8859-2&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;6.5.7654.12&quot;&gt;<br>
&lt;TITLE&gt;RE:&nbsp;[squid-users]&nbsp;Squid&nbsp;BUG:&nbsp;assurance&nbsp;failed:&nbsp;tok.skip(WellKnownUrlPathPrefix())&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;!--&nbsp;Converted&nbsp;from&nbsp;text/plain&nbsp;format&nbsp;--&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Ok&nbsp;-&nbsp;thanks&nbsp;for&nbsp;your&nbsp;reply.&nbsp;But&nbsp;this&nbsp;does&nbsp;not&nbsp;clarify&nbsp;it&nbsp;fully.&nbsp;You&nbsp;said&nbsp;cachemgr.cgi&nbsp;auto-detects&nbsp;the&nbsp;existence&nbsp;of&nbsp;MGR_INDEX&nbsp;template.&nbsp;But&nbsp;what&nbsp;is&nbsp;it&nbsp;supposed&nbsp;to&nbsp;do&nbsp;if&nbsp;none&nbsp;is&nbsp;found?&nbsp;Just&nbsp;displaying&nbsp;the&nbsp;message&nbsp;about&nbsp;missing&nbsp;MGR_INDEX?&nbsp;Or&nbsp;doing&nbsp;the&nbsp;old&nbsp;style&nbsp;&quot;Cache&nbsp;Manager&nbsp;menu&quot;?&nbsp;I&nbsp;have&nbsp;applied&nbsp;Alex's&nbsp;&nbsp;patch&nbsp;to&nbsp;re-enable&nbsp;cache_object&nbsp;URI&nbsp;and&nbsp;now&nbsp;it&nbsp;obviously&nbsp;works&nbsp;-&nbsp;both&nbsp;cache_object&nbsp;and&nbsp;squid-internal-mgr.&nbsp;I&nbsp;mean&nbsp;-&nbsp;squidclient&nbsp;from&nbsp;debian&nbsp;packages&nbsp;(v4.6)&nbsp;works&nbsp;and&nbsp;the&nbsp;one&nbsp;compiled&nbsp;with&nbsp;squid&nbsp;v6.3&nbsp;works&nbsp;too.&nbsp;Because&nbsp;of&nbsp;my&nbsp;old&nbsp;network&nbsp;NOC&nbsp;system&nbsp;a&nbsp;use&nbsp;a&nbsp;very&nbsp;old&nbsp;cachemgr&nbsp;(in&nbsp;fact&nbsp;version&nbsp;index.cgi/3.1.16)&nbsp;to&nbsp;ask&nbsp;the&nbsp;current&nbsp;v6.3&nbsp;squid&nbsp;for&nbsp;its&nbsp;data&nbsp;and&nbsp;now&nbsp;it&nbsp;works&nbsp;too.&lt;BR&gt;<br>
But&nbsp;as&nbsp;I&nbsp;said&nbsp;previously&nbsp;-&nbsp;the&nbsp;current&nbsp;cachemgr.cgi&nbsp;displays&nbsp;&quot;Internal&nbsp;Error:&nbsp;Missing&nbsp;Template&nbsp;MGR_INDEX&quot;&nbsp;without&nbsp;MGR_INDEX&nbsp;file&nbsp;and&nbsp;the&nbsp;content&nbsp;of&nbsp;the&nbsp;MGR_INDEX&nbsp;file&nbsp;while&nbsp;it&nbsp;is&nbsp;present.&nbsp;As&nbsp;I&nbsp;found&nbsp;out&nbsp;-&nbsp;it&nbsp;does&nbsp;not&nbsp;like&nbsp;files&nbsp;with&nbsp;content&nbsp;with&nbsp;some&nbsp;tags&nbsp;or&nbsp;javascript&nbsp;references&nbsp;etc.&nbsp;Have&nbsp;not&nbsp;ruled&nbsp;it&nbsp;out&nbsp;-&nbsp;but&nbsp;the&nbsp;MGR_INDEX&nbsp;file&nbsp;provided&nbsp;in&nbsp;the&nbsp;&lt;A&nbsp;HREF=&quot;https://github.com/yadij/cachemgr.js/&quot;&gt;https://github.com/yadij/cachemgr.js/&lt;/A&gt;&nbsp;&nbsp;project&nbsp;just&nbsp;makes&nbsp;the&nbsp;mentioned&nbsp;assert&nbsp;fail&nbsp;in&nbsp;the&nbsp;membuf.cc.&lt;BR&gt;<br>
&lt;BR&gt;<br>
Note&nbsp;-&nbsp;I&nbsp;do&nbsp;not&nbsp;like&nbsp;the&nbsp;fact&nbsp;it's&nbsp;looking&nbsp;for&nbsp;the&nbsp;MGR_INDEX&nbsp;file&nbsp;upon&nbsp;start&nbsp;or&nbsp;reconfigure&nbsp;-&nbsp;as&nbsp;it&nbsp;makes&nbsp;the&nbsp;changes&nbsp;more&nbsp;stressful&nbsp;while&nbsp;I&nbsp;have&nbsp;to&nbsp;call&nbsp;reconfigure&nbsp;on&nbsp;the&nbsp;working&nbsp;squid.&lt;BR&gt;<br>
&lt;BR&gt;<br>
LL&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
-----Pùvodní&nbsp;zpráva-----&lt;BR&gt;<br>
Od:&nbsp;squid-users&nbsp;za&nbsp;u¾ivatele&nbsp;Amos&nbsp;Jeffries&lt;BR&gt;<br>
Odesláno:&nbsp;pá&nbsp;15.9.2023&nbsp;03:46&lt;BR&gt;<br>
Komu:&nbsp;squid-users@lists.squid-cache.org&lt;BR&gt;<br>
Pøedmìt:&nbsp;Re:&nbsp;[squid-users]&nbsp;Squid&nbsp;BUG:&nbsp;assurance&nbsp;failed:&nbsp;tok.skip(WellKnownUrlPathPrefix())&lt;BR&gt;<br>
&lt;BR&gt;<br>
On&nbsp;15/09/23&nbsp;09:55,&nbsp;Alex&nbsp;Rousskov&nbsp;wrote:&lt;BR&gt;<br>
&gt;&nbsp;On&nbsp;2023-09-14&nbsp;06:40,&nbsp;Louèanský&nbsp;Luká¹&nbsp;wrote:&lt;BR&gt;<br>
&gt;&lt;BR&gt;<br>
&gt;&gt;&nbsp;But&nbsp;-&nbsp;could&nbsp;someone&nbsp;(or&nbsp;you)&nbsp;clarify&nbsp;the&nbsp;next&nbsp;one&nbsp;for&nbsp;me?&nbsp;I've&nbsp;read&lt;BR&gt;<br>
&gt;&gt;&nbsp;some&nbsp;questions&nbsp;about&nbsp;the&nbsp;&quot;new&quot;&nbsp;cachemgr.cgi&nbsp;and&nbsp;the&nbsp;MGR_INDEX&nbsp;template.&lt;BR&gt;<br>
&gt;&lt;BR&gt;<br>
&gt;&nbsp;Sorry,&nbsp;I&nbsp;cannot&nbsp;help&nbsp;with&nbsp;cachemgr.cgi&nbsp;without&nbsp;heroic&nbsp;efforts.&nbsp;IMHO,&lt;BR&gt;<br>
&gt;&nbsp;Squid&nbsp;Project&nbsp;should&nbsp;remove&nbsp;cachemgr.cgi&nbsp;feature&nbsp;instead&nbsp;of&nbsp;supporting&lt;BR&gt;<br>
&gt;&nbsp;it.&nbsp;I&nbsp;hope&nbsp;that&nbsp;somebody&nbsp;else&nbsp;will&nbsp;help&nbsp;you&nbsp;with&nbsp;it.&lt;BR&gt;<br>
&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
FYI,&nbsp;the&nbsp;cachemgr.cgi&nbsp;provided&nbsp;by&nbsp;current&nbsp;Squid&nbsp;tries&nbsp;to&nbsp;auto-detect&nbsp;the&lt;BR&gt;<br>
existence&nbsp;of&nbsp;a&nbsp;working&nbsp;MGR_INDEX&nbsp;and&nbsp;simply&nbsp;provides&nbsp;a&nbsp;URL&nbsp;to&nbsp;that&lt;BR&gt;<br>
instead&nbsp;of&nbsp;doing&nbsp;the&nbsp;&quot;old&quot;&nbsp;CGI&nbsp;interface&nbsp;things.&lt;BR&gt;<br>
&lt;BR&gt;<br>
The&nbsp;reasons&nbsp;to&nbsp;use&nbsp;it&nbsp;are:&lt;BR&gt;<br>
&nbsp;&nbsp;1)&nbsp;when&nbsp;managing&nbsp;very&nbsp;outdated&nbsp;Squid&nbsp;versions,&nbsp;or&lt;BR&gt;<br>
&nbsp;&nbsp;2)&nbsp;managing&nbsp;Squid&nbsp;which&nbsp;have&nbsp;not&nbsp;yet&nbsp;had&nbsp;a&nbsp;tool&nbsp;providing&nbsp;MGR_INDEX&lt;BR&gt;<br>
installed&nbsp;yet.&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
The&nbsp;recent&nbsp;changes&nbsp;to&nbsp;squidclient&nbsp;&quot;mgr:&quot;&nbsp;support&nbsp;and&nbsp;the&nbsp;cache_object://&lt;BR&gt;<br>
&nbsp;&nbsp;URL&nbsp;scheme&nbsp;have&nbsp;had&nbsp;a&nbsp;few&nbsp;issues.&nbsp;I&nbsp;am&nbsp;currently&nbsp;setting&nbsp;up&nbsp;a&nbsp;test&lt;BR&gt;<br>
environment&nbsp;to&nbsp;analyze&nbsp;and&nbsp;re-document&nbsp;the&nbsp;new/current&nbsp;situation.&lt;BR&gt;<br>
Hopefully&nbsp;some&nbsp;detailed&nbsp;info&nbsp;can&nbsp;be&nbsp;added&nbsp;to&nbsp;the&nbsp;wiki&nbsp;in&nbsp;the&nbsp;coming&nbsp;days.&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
HTH&lt;BR&gt;<br>
Amos&lt;BR&gt;<br>
_______________________________________________&lt;BR&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;BR&gt;<br>
squid-users@lists.squid-cache.org&lt;BR&gt;<br>
&lt;A&nbsp;HREF=&quot;https://lists.squid-cache.org/listinfo/squid-users&quot;&gt;https://lists.squid-cache.org/listinfo/squid-users&lt;/A&gt;&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
