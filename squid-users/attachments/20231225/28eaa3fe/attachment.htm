<tt>
&lt;div&nbsp;dir=&quot;auto&quot;&gt;This&nbsp;may&nbsp;be&nbsp;normal.&nbsp;A&nbsp;proxy&nbsp;cache&nbsp;like&nbsp;Squid&nbsp;moves&nbsp;objects&nbsp;closer&nbsp;to&nbsp;the&nbsp;clients,&nbsp;reduces&nbsp;upstream&nbsp;traffic&nbsp;and&nbsp;multiplexes&nbsp;transactions.&nbsp;All&nbsp;of&nbsp;which&nbsp;increase&nbsp;the&nbsp;traffic&nbsp;bandwidth&nbsp;efficiency.&nbsp;Allowing&nbsp;clients&nbsp;to&nbsp;receive&nbsp;their&nbsp;downloaded&nbsp;content&nbsp;faster,&nbsp;and&nbsp;thus&nbsp;users&nbsp;can&nbsp;browse&nbsp;through&nbsp;more&nbsp;pages&nbsp;faster.&lt;div&gt;&lt;br&gt;&lt;div&gt;This&nbsp;type&nbsp;of&nbsp;user&nbsp;traffic&nbsp;increase&nbsp;can&nbsp;be&nbsp;just&nbsp;the&nbsp;result&nbsp;of&nbsp;users&nbsp;doing&nbsp;more.&lt;/div&gt;&lt;div&gt;Notice&nbsp;that&nbsp;the&nbsp;WAN/eth0&nbsp;traffic&nbsp;has&nbsp;decreased&nbsp;by&nbsp;~30%&nbsp;despite&nbsp;this&nbsp;LAN&nbsp;increase.&lt;/div&gt;&lt;div&gt;You&nbsp;can&nbsp;check&nbsp;the&nbsp;Hit&nbsp;Ratio&nbsp;in&nbsp;squid&nbsp;mgr:info&nbsp;report&nbsp;lines&nbsp;up&nbsp;with&nbsp;the&nbsp;increased&nbsp;efficiency.&nbsp;&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers,&nbsp;&lt;br&gt;Amos&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;line-height:1.5&quot;&gt;&lt;br&gt;&lt;br&gt;--------&nbsp;Original&nbsp;message&nbsp;--------&lt;br&gt;From:&nbsp;Ben&nbsp;Goz&lt;br&gt;Date:&nbsp;Mon,&nbsp;25&nbsp;Dec&nbsp;2023,&nbsp;04:11&lt;br&gt;&lt;blockquote&gt;&lt;div&nbsp;dir=&quot;rtl&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;This&nbsp;is&nbsp;basically&nbsp;the&nbsp;network&nbsp;topology&nbsp;that&nbsp;I'm&nbsp;using:&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&nbsp;adsl&nbsp;&lt;--&gt;&nbsp;vrf&nbsp;&lt;--&gt;&nbsp;&lt;eth1&gt;&nbsp;[squid/icap&nbsp;machine]&nbsp;&lt;eth0&gt;&nbsp;&lt;--&gt;&nbsp;vrf&nbsp;&lt;--&gt;&nbsp;&lt;internet&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;When&nbsp;traffic&nbsp;goes&nbsp;via&nbsp;squid&nbsp;I&nbsp;see&nbsp;that&nbsp;eth1&nbsp;(The&nbsp;one&nbsp;closes&nbsp;to&nbsp;adsl&nbsp;users)&nbsp;is&nbsp;very&nbsp;high&nbsp;this&nbsp;is&nbsp;from&nbsp;sar&nbsp;output:&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Average:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IFACE&nbsp;&nbsp;&nbsp;rxpck/s&nbsp;&nbsp;&nbsp;txpck/s&nbsp;&nbsp;&nbsp;&nbsp;rxkB/s&nbsp;&nbsp;&nbsp;&nbsp;txkB/s&nbsp;&nbsp;&nbsp;rxcmp/s&nbsp;&nbsp;&nbsp;txcmp/s&nbsp;&nbsp;rxmcst/s&nbsp;&nbsp;&nbsp;%ifutil&lt;br&gt;Average:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo&nbsp;&nbsp;&nbsp;4191.83&nbsp;&nbsp;&nbsp;4191.83&nbsp;&nbsp;16976.00&nbsp;&nbsp;16976.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.00&lt;br&gt;Average:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eth0&nbsp;&nbsp;&nbsp;2921.48&nbsp;&nbsp;&nbsp;1224.57&nbsp;&nbsp;&nbsp;3432.46&nbsp;&nbsp;&nbsp;&nbsp;485.77&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.28&lt;br&gt;Average:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eth1&nbsp;&nbsp;&nbsp;7558.70&nbsp;&nbsp;11544.74&nbsp;&nbsp;&nbsp;&nbsp;920.91&nbsp;&nbsp;&lt;b&gt;14447.44&lt;/b&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1.18&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;When&nbsp;traffic&nbsp;doesn't&nbsp;go&nbsp;via&nbsp;squid&nbsp;this&nbsp;is&nbsp;the&nbsp;output:&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Average:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IFACE&nbsp;&nbsp;&nbsp;rxpck/s&nbsp;&nbsp;&nbsp;txpck/s&nbsp;&nbsp;&nbsp;&nbsp;rxkB/s&nbsp;&nbsp;&nbsp;&nbsp;txkB/s&nbsp;&nbsp;&nbsp;rxcmp/s&nbsp;&nbsp;&nbsp;txcmp/s&nbsp;&nbsp;rxmcst/s&nbsp;&nbsp;&nbsp;%ifutil&lt;br&gt;Average:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;19.10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;19.10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.25&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.25&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.00&lt;br&gt;Average:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eth0&nbsp;&nbsp;&nbsp;3666.40&nbsp;&nbsp;&nbsp;2133.70&nbsp;&nbsp;&nbsp;4608.70&nbsp;&nbsp;&nbsp;&nbsp;409.59&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.38&lt;br&gt;Average:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eth1&nbsp;&nbsp;&nbsp;2213.40&nbsp;&nbsp;&nbsp;3741.10&nbsp;&nbsp;&nbsp;&nbsp;424.38&nbsp;&nbsp;&nbsp;&lt;b&gt;4613.08&lt;/b&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.38&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;I'm&nbsp;can't&nbsp;tell&nbsp;for&nbsp;sure&nbsp;that&nbsp;this&nbsp;is&nbsp;related&nbsp;but&nbsp;I&nbsp;saw&nbsp;several&nbsp;times&nbsp;the&nbsp;kernel&nbsp;prints:&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;TCP:&nbsp;out&nbsp;of&nbsp;memory&nbsp;--&nbsp;consider&nbsp;tuning&nbsp;tcp_mem&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;The&nbsp;squid&nbsp;version&nbsp;I'm&nbsp;using&nbsp;is:&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;/usr/local/squid/sbin/squid&nbsp;-v&lt;br&gt;Squid&nbsp;Cache:&nbsp;Version&nbsp;6.5-VCS&lt;br&gt;Service&nbsp;Name:&nbsp;squid&lt;br&gt;&lt;br&gt;This&nbsp;binary&nbsp;uses&nbsp;OpenSSL&nbsp;3.0.2&nbsp;15&nbsp;Mar&nbsp;2022.&nbsp;configure&nbsp;options:&nbsp;&nbsp;'--with-large-files'&nbsp;'--with-openssl'&nbsp;'--enable-ssl'&nbsp;'--enable-ssl-crtd'&nbsp;'--enable-icap-client'&nbsp;'--enable-linux-netfilter'&nbsp;'--disable-ident-lookups'&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;And&nbsp;I&nbsp;turned&nbsp;off&nbsp;persistence&nbsp;from&nbsp;client,&nbsp;icap&nbsp;and&nbsp;server&nbsp;sessions.&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;What&nbsp;could&nbsp;be&nbsp;the&nbsp;problem?&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Thanks,&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Ben&nbsp;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;
</tt>
