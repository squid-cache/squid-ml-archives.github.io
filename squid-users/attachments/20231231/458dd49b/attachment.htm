<tt>
&lt;div&nbsp;dir=&quot;rtl&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;By&nbsp;the&nbsp;help&nbsp;of&nbsp;God.&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Sorry&nbsp;I&nbsp;forgot&nbsp;to&nbsp;say&nbsp;that&nbsp;cache&nbsp;is&nbsp;disabled&nbsp;in&nbsp;this&nbsp;setup&nbsp;and&nbsp;the&nbsp;increasing traffic&nbsp;rate&nbsp;on&nbsp;the&nbsp;clients&nbsp;side&nbsp;can&nbsp;cause&nbsp;a&nbsp;bottle neck&nbsp;as&nbsp;it&nbsp;reaches&nbsp;the&nbsp;maximum&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;rates&nbsp;that&nbsp;the&nbsp;customers have.&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Is&nbsp;there&nbsp;any&nbsp;option&nbsp;to&nbsp;limit&nbsp;the&nbsp;traffic?&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;rtl&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;‫בתאריך&nbsp;יום&nbsp;ו׳,&nbsp;29&nbsp;בדצמ׳&nbsp;2023&nbsp;ב-13:15&nbsp;מאת&nbsp;‪‪Amos&nbsp;Jeffries‬‬‏&nbsp;&lt;‪&lt;a&nbsp;href=&quot;mailto:squid3@treenet.co.nz&quot;&gt;squid3@treenet.co.nz&lt;/a&gt;‬‏&gt;:‬&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;auto&quot;&gt;This&nbsp;may&nbsp;be&nbsp;normal.&nbsp;A&nbsp;proxy&nbsp;cache&nbsp;like&nbsp;Squid&nbsp;moves&nbsp;objects&nbsp;closer&nbsp;to&nbsp;the&nbsp;clients,&nbsp;reduces&nbsp;upstream&nbsp;traffic&nbsp;and&nbsp;multiplexes&nbsp;transactions.&nbsp;All&nbsp;of&nbsp;which&nbsp;increase&nbsp;the&nbsp;traffic&nbsp;bandwidth&nbsp;efficiency.&nbsp;Allowing&nbsp;clients&nbsp;to&nbsp;receive&nbsp;their&nbsp;downloaded&nbsp;content&nbsp;faster,&nbsp;and&nbsp;thus&nbsp;users&nbsp;can&nbsp;browse&nbsp;through&nbsp;more&nbsp;pages&nbsp;faster.&lt;div&gt;&lt;br&gt;&lt;div&gt;This&nbsp;type&nbsp;of&nbsp;user&nbsp;traffic&nbsp;increase&nbsp;can&nbsp;be&nbsp;just&nbsp;the&nbsp;result&nbsp;of&nbsp;users&nbsp;doing&nbsp;more.&lt;/div&gt;&lt;div&gt;Notice&nbsp;that&nbsp;the&nbsp;WAN/eth0&nbsp;traffic&nbsp;has&nbsp;decreased&nbsp;by&nbsp;~30%&nbsp;despite&nbsp;this&nbsp;LAN&nbsp;increase.&lt;/div&gt;&lt;div&gt;You&nbsp;can&nbsp;check&nbsp;the&nbsp;Hit&nbsp;Ratio&nbsp;in&nbsp;squid&nbsp;mgr:info&nbsp;report&nbsp;lines&nbsp;up&nbsp;with&nbsp;the&nbsp;increased&nbsp;efficiency. &lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers, &lt;br&gt;Amos&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;line-height:1.5&quot;&gt;&lt;br&gt;&lt;br&gt;--------&nbsp;Original&nbsp;message&nbsp;--------&lt;br&gt;From:&nbsp;Ben&nbsp;Goz&lt;br&gt;Date:&nbsp;Mon,&nbsp;25&nbsp;Dec&nbsp;2023,&nbsp;04:11&lt;br&gt;&lt;blockquote&gt;&lt;div&nbsp;dir=&quot;rtl&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi,&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;This&nbsp;is&nbsp;basically&nbsp;the&nbsp;network&nbsp;topology&nbsp;that&nbsp;I&#39;m&nbsp;using:&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt; adsl&nbsp;&lt;--&gt;&nbsp;vrf&nbsp;&lt;--&gt;&nbsp;&lt;eth1&gt;&nbsp;[squid/icap&nbsp;machine]&nbsp;&lt;eth0&gt;&nbsp;&lt;--&gt;&nbsp;vrf&nbsp;&lt;--&gt;&nbsp;&lt;internet&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;When&nbsp;traffic&nbsp;goes&nbsp;via&nbsp;squid&nbsp;I&nbsp;see&nbsp;that&nbsp;eth1&nbsp;(The&nbsp;one&nbsp;closes&nbsp;to&nbsp;adsl&nbsp;users)&nbsp;is&nbsp;very&nbsp;high&nbsp;this&nbsp;is&nbsp;from&nbsp;sar&nbsp;output:&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Average:&nbsp; &nbsp; &nbsp; &nbsp; IFACE&nbsp; &nbsp;rxpck/s&nbsp; &nbsp;txpck/s&nbsp; &nbsp; rxkB/s&nbsp; &nbsp; txkB/s&nbsp; &nbsp;rxcmp/s&nbsp; &nbsp;txcmp/s&nbsp; rxmcst/s&nbsp; &nbsp;%ifutil&lt;br&gt;Average:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lo&nbsp; &nbsp;4191.83&nbsp; &nbsp;4191.83&nbsp; 16976.00&nbsp; 16976.00&nbsp; &nbsp; &nbsp; 0.00&nbsp; &nbsp; &nbsp; 0.00&nbsp; &nbsp; &nbsp; 0.00&nbsp; &nbsp; &nbsp; 0.00&lt;br&gt;Average:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;eth0&nbsp; &nbsp;2921.48&nbsp; &nbsp;1224.57&nbsp; &nbsp;3432.46&nbsp; &nbsp; 485.77&nbsp; &nbsp; &nbsp; 0.00&nbsp; &nbsp; &nbsp; 0.00&nbsp; &nbsp; &nbsp; 0.00&nbsp; &nbsp; &nbsp; 0.28&lt;br&gt;Average:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;eth1&nbsp; &nbsp;7558.70&nbsp; 11544.74&nbsp; &nbsp; 920.91&nbsp; &lt;b&gt;14447.44&lt;/b&gt;&nbsp; &nbsp; &nbsp; 0.00&nbsp; &nbsp; &nbsp; 0.00&nbsp; &nbsp; &nbsp; 0.00&nbsp; &nbsp; &nbsp; 1.18&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;When&nbsp;traffic&nbsp;doesn&#39;t&nbsp;go&nbsp;via&nbsp;squid&nbsp;this&nbsp;is&nbsp;the&nbsp;output:&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Average:&nbsp; &nbsp; &nbsp; &nbsp; IFACE&nbsp; &nbsp;rxpck/s&nbsp; &nbsp;txpck/s&nbsp; &nbsp; rxkB/s&nbsp; &nbsp; txkB/s&nbsp; &nbsp;rxcmp/s&nbsp; &nbsp;txcmp/s&nbsp; rxmcst/s&nbsp; &nbsp;%ifutil&lt;br&gt;Average:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lo&nbsp; &nbsp; &nbsp;19.10&nbsp; &nbsp; &nbsp;19.10&nbsp; &nbsp; &nbsp; 2.25&nbsp; &nbsp; &nbsp; 2.25&nbsp; &nbsp; &nbsp; 0.00&nbsp; &nbsp; &nbsp; 0.00&nbsp; &nbsp; &nbsp; 0.00&nbsp; &nbsp; &nbsp; 0.00&lt;br&gt;Average:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;eth0&nbsp; &nbsp;3666.40&nbsp; &nbsp;2133.70&nbsp; &nbsp;4608.70&nbsp; &nbsp; 409.59&nbsp; &nbsp; &nbsp; 0.00&nbsp; &nbsp; &nbsp; 0.00&nbsp; &nbsp; &nbsp; 0.00&nbsp; &nbsp; &nbsp; 0.38&lt;br&gt;Average:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;eth1&nbsp; &nbsp;2213.40&nbsp; &nbsp;3741.10&nbsp; &nbsp; 424.38&nbsp; &nbsp;&lt;b&gt;4613.08&lt;/b&gt;&nbsp; &nbsp; &nbsp; 0.00&nbsp; &nbsp; &nbsp; 0.00&nbsp; &nbsp; &nbsp; 0.00&nbsp; &nbsp; &nbsp; 0.38&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;I&#39;m&nbsp;can&#39;t&nbsp;tell&nbsp;for&nbsp;sure&nbsp;that&nbsp;this&nbsp;is&nbsp;related&nbsp;but&nbsp;I&nbsp;saw&nbsp;several&nbsp;times&nbsp;the&nbsp;kernel&nbsp;prints:&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;TCP:&nbsp;out&nbsp;of&nbsp;memory&nbsp;--&nbsp;consider&nbsp;tuning&nbsp;tcp_mem&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;The&nbsp;squid&nbsp;version&nbsp;I&#39;m&nbsp;using&nbsp;is:&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;/usr/local/squid/sbin/squid&nbsp;-v&lt;br&gt;Squid&nbsp;Cache:&nbsp;Version&nbsp;6.5-VCS&lt;br&gt;Service&nbsp;Name:&nbsp;squid&lt;br&gt;&lt;br&gt;This&nbsp;binary&nbsp;uses&nbsp;OpenSSL&nbsp;3.0.2&nbsp;15&nbsp;Mar&nbsp;2022.&nbsp;configure&nbsp;options:&nbsp; &#39;--with-large-files&#39;&nbsp;&#39;--with-openssl&#39;&nbsp;&#39;--enable-ssl&#39;&nbsp;&#39;--enable-ssl-crtd&#39;&nbsp;&#39;--enable-icap-client&#39;&nbsp;&#39;--enable-linux-netfilter&#39;&nbsp;&#39;--disable-ident-lookups&#39;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;And&nbsp;I&nbsp;turned&nbsp;off&nbsp;persistence&nbsp;from&nbsp;client,&nbsp;icap&nbsp;and&nbsp;server&nbsp;sessions.&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;What&nbsp;could&nbsp;be&nbsp;the&nbsp;problem?&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Thanks,&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Ben &lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
