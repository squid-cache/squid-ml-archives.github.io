<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;&lt;/head&gt;&lt;body&nbsp;style=&quot;overflow-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;line-break:&nbsp;after-white-space;&quot;&gt;I&nbsp;think&nbsp;they&nbsp;also&nbsp;did&nbsp;fail&nbsp;silently&nbsp;in&nbsp;the&nbsp;older&nbsp;version&nbsp;because&nbsp;the&nbsp;error&nbsp;logs&nbsp;were&nbsp;not&nbsp;present&nbsp;for&nbsp;previous&nbsp;packages&nbsp;that&nbsp;I&nbsp;used.&nbsp;At&nbsp;one&nbsp;point&nbsp;all&nbsp;error&nbsp;logs&nbsp;were&nbsp;removed&nbsp;in&nbsp;a&nbsp;package&nbsp;and&nbsp;I&nbsp;had&nbsp;to&nbsp;create&nbsp;a&nbsp;linker&nbsp;file&nbsp;to&nbsp;see&nbsp;the&nbsp;basic&nbsp;errors.&nbsp;Squid&nbsp;6.6&nbsp;comes&nbsp;with&nbsp;the&nbsp;error&nbsp;logs&nbsp;I&nbsp;could&nbsp;not&nbsp;see,&nbsp;previously&nbsp;5.8&nbsp;and&nbsp;prior&nbsp;it&nbsp;would&nbsp;create&nbsp;many&nbsp;blank&nbsp;logs&nbsp;that&nbsp;had&nbsp;no&nbsp;information.&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;In&nbsp;5.8&nbsp;the&nbsp;squid&nbsp;-k&nbsp;parse&nbsp;did&nbsp;not&nbsp;show&nbsp;the&nbsp;&lt;/div&gt;&lt;div&gt;&lt;pre&nbsp;style=&quot;box-sizing:&nbsp;border-box;&nbsp;overflow:&nbsp;auto;&nbsp;font-family:&nbsp;Menlo,&nbsp;Monaco,&nbsp;Consolas,&nbsp;&quot;Courier&nbsp;New&quot;,&nbsp;monospace;&nbsp;font-size:&nbsp;13px;&nbsp;padding:&nbsp;9.5px;&nbsp;margin-top:&nbsp;0px;&nbsp;margin-bottom:&nbsp;10px;&nbsp;line-height:&nbsp;1.428571;&nbsp;color:&nbsp;rgb(51,&nbsp;51,&nbsp;51);&nbsp;word-break:&nbsp;break-all;&nbsp;overflow-wrap:&nbsp;break-word;&nbsp;background-color:&nbsp;rgb(245,&nbsp;245,&nbsp;245);&nbsp;border:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;border-radius:&nbsp;4px;&nbsp;caret-color:&nbsp;rgb(51,&nbsp;51,&nbsp;51);&quot;&gt;WARNING:&nbsp;Failed&nbsp;to&nbsp;decode&nbsp;EC&nbsp;parameters&nbsp;'/etc/dh-parameters.2048'.&nbsp;error:1E08010C:DECODER&nbsp;routines::unsupported&lt;/pre&gt;However&nbsp;it&nbsp;did&nbsp;show&nbsp;this&nbsp;in&nbsp;5.8,&nbsp;5.9,&nbsp;&nbsp;and&nbsp;now&nbsp;in&nbsp;6.6&nbsp;if&nbsp;I&nbsp;delete&nbsp;the&nbsp;options&nbsp;it&nbsp;no&nbsp;longer&nbsp;lists&nbsp;the&nbsp;error.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;pre&nbsp;style=&quot;box-sizing:&nbsp;border-box;&nbsp;overflow:&nbsp;auto;&nbsp;font-family:&nbsp;Menlo,&nbsp;Monaco,&nbsp;Consolas,&nbsp;&quot;Courier&nbsp;New&quot;,&nbsp;monospace;&nbsp;font-size:&nbsp;13px;&nbsp;padding:&nbsp;9.5px;&nbsp;margin-top:&nbsp;0px;&nbsp;margin-bottom:&nbsp;10px;&nbsp;line-height:&nbsp;1.428571;&nbsp;color:&nbsp;rgb(51,&nbsp;51,&nbsp;51);&nbsp;word-break:&nbsp;break-all;&nbsp;overflow-wrap:&nbsp;break-word;&nbsp;background-color:&nbsp;rgb(245,&nbsp;245,&nbsp;245);&nbsp;border:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;border-radius:&nbsp;4px;&nbsp;caret-color:&nbsp;rgb(51,&nbsp;51,&nbsp;51);&quot;&gt;2024/04/10&nbsp;14:21:48|&nbsp;ERROR:&nbsp;Unsupported&nbsp;TLS&nbsp;option&nbsp;SINGLE_DH_USE<br>
2024/04/10&nbsp;14:21:48|&nbsp;ERROR:&nbsp;Unsupported&nbsp;TLS&nbsp;option&nbsp;SINGLE_ECDH_USE&lt;/pre&gt;&lt;div&gt;It&nbsp;works&nbsp;I&nbsp;can&nbsp;block&nbsp;URLS&nbsp;that&nbsp;is&nbsp;what&nbsp;I&nbsp;am&nbsp;confused&nbsp;about&nbsp;it&nbsp;shows&nbsp;hit&nbsp;304&nbsp;and&nbsp;refreshes&nbsp;in&nbsp;5.9&nbsp;however&nbsp;6.6&nbsp;it&nbsp;kick&nbsp;abandons&nbsp;my&nbsp;connections&nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;5.8&nbsp;is&nbsp;my&nbsp;everything&nbsp;bagel&nbsp;version&nbsp;it&nbsp;just&nbsp;works&nbsp;however&nbsp;like&nbsp;you&nbsp;said&nbsp;is&nbsp;the&nbsp;errors&nbsp;not&nbsp;showing&nbsp;as&nbsp;it&nbsp;is&nbsp;slow&nbsp;at&nbsp;times&nbsp;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;On&nbsp;Apr&nbsp;10,&nbsp;2024,&nbsp;at&nbsp;14:13,&nbsp;Alex&nbsp;Rousskov&nbsp;&lt;rousskov@measurement-factory.com&gt;&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;div&gt;&lt;div&gt;On&nbsp;2024-04-10&nbsp;16:22,&nbsp;Jonathan&nbsp;Lee&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Could&nbsp;it&nbsp;be&nbsp;related&nbsp;to&nbsp;this&nbsp;??&lt;br&gt;&quot;WARNING:&nbsp;Failed&nbsp;to&nbsp;decode&nbsp;EC&nbsp;parameters&nbsp;'/etc/dh-parameters.2048'.&nbsp;error:1E08010C:DECODER&nbsp;routines::unsupported‚Äù&lt;br&gt;&lt;/blockquote&gt;&lt;br&gt;I&nbsp;do&nbsp;not&nbsp;know&nbsp;the&nbsp;answer&nbsp;to&nbsp;your&nbsp;question.&nbsp;I&nbsp;speculate&nbsp;that&nbsp;it&nbsp;could&nbsp;be&nbsp;related:&nbsp;Depending&nbsp;on&nbsp;various&nbsp;factors,&nbsp;without&nbsp;those&nbsp;DH&nbsp;parameters,&nbsp;Squid&nbsp;may&nbsp;not&nbsp;be&nbsp;able&nbsp;to&nbsp;communicate&nbsp;with&nbsp;clients.&nbsp;See&nbsp;WARNING&nbsp;in&nbsp;tls-dh&nbsp;description&nbsp;in&nbsp;squid.conf.documented.&lt;br&gt;&lt;br&gt;I&nbsp;know&nbsp;that&nbsp;others&nbsp;are&nbsp;reporting&nbsp;similar&nbsp;WARNINGs&nbsp;during&nbsp;v6&nbsp;upgrades&nbsp;and&nbsp;dislike&nbsp;the&nbsp;letters&nbsp;&quot;EC&quot;&nbsp;those&nbsp;messages&nbsp;use.&nbsp;I&nbsp;am&nbsp;not&nbsp;going&nbsp;to&nbsp;debate&nbsp;the&nbsp;best&nbsp;choice&nbsp;of&nbsp;letters&nbsp;for&nbsp;this&nbsp;message,&nbsp;but&nbsp;I&nbsp;can&nbsp;tell&nbsp;you&nbsp;that,&nbsp;in&nbsp;the&nbsp;cases&nbsp;I&nbsp;investigated,&nbsp;the&nbsp;message&nbsp;was&nbsp;caused&nbsp;by&nbsp;a&nbsp;mismatch&nbsp;between&nbsp;squid.conf&nbsp;tls-dh=...&nbsp;option&nbsp;value&nbsp;and&nbsp;DH&nbsp;parameter&nbsp;file&nbsp;contents:&lt;br&gt;&lt;br&gt;*&nbsp;To&nbsp;Squid,&nbsp;tls-dh=curve:filename&nbsp;format&nbsp;implies&nbsp;that&nbsp;the&nbsp;keytype&nbsp;is&nbsp;&quot;EC&quot;.&nbsp;These&nbsp;two&nbsp;letters&nbsp;are&nbsp;then&nbsp;fed&nbsp;to&nbsp;an&nbsp;OpenSSL&nbsp;function&nbsp;that&nbsp;configures&nbsp;related&nbsp;TLS&nbsp;state.&nbsp;OpenSSL&nbsp;then&nbsp;fails&nbsp;if&nbsp;tls-dh&nbsp;filename&nbsp;contains&nbsp;DH&nbsp;parameters&nbsp;produced&nbsp;with&nbsp;&quot;openssl&nbsp;dhparam&quot;&nbsp;command.&nbsp;I&nbsp;have&nbsp;seen&nbsp;these&nbsp;failures&nbsp;in&nbsp;tests.&lt;br&gt;&lt;br&gt;*&nbsp;To&nbsp;Squid,&nbsp;tls-dh=filename&nbsp;format&nbsp;(i.e.&nbsp;format&nbsp;without&nbsp;the&nbsp;curve&nbsp;name&nbsp;prefix)&nbsp;implies&nbsp;that&nbsp;the&nbsp;keytype&nbsp;is&nbsp;&quot;DC&quot;.&nbsp;These&nbsp;two&nbsp;letters&nbsp;are&nbsp;then&nbsp;fed&nbsp;to&nbsp;an&nbsp;OpenSSL&nbsp;function&nbsp;that&nbsp;configured&nbsp;related&nbsp;TLS&nbsp;state.&nbsp;OpenSSL&nbsp;then&nbsp;probably&nbsp;fails&nbsp;if&nbsp;tls-dh&nbsp;filename&nbsp;contains&nbsp;DH&nbsp;parameters&nbsp;produced&nbsp;with&nbsp;&quot;openssl&nbsp;ecparam&quot;&nbsp;command.&nbsp;I&nbsp;have&nbsp;not&nbsp;tested&nbsp;this&nbsp;use&nbsp;case.&lt;br&gt;&lt;br&gt;*&nbsp;The&nbsp;failing&nbsp;checks&nbsp;and&nbsp;their&nbsp;messages&nbsp;are&nbsp;specific&nbsp;to&nbsp;Squids&nbsp;built&nbsp;with&nbsp;OpenSSL&nbsp;v3.&nbsp;It&nbsp;is&nbsp;possible&nbsp;that&nbsp;Squids&nbsp;built&nbsp;with&nbsp;OpenSSL&nbsp;v1&nbsp;just&nbsp;silently&nbsp;fail&nbsp;(at&nbsp;runtime),&nbsp;but&nbsp;I&nbsp;have&nbsp;not&nbsp;checked&nbsp;that&nbsp;theory.&lt;br&gt;&lt;br&gt;&lt;br&gt;FWIW,&nbsp;this&nbsp;poorly&nbsp;categorized&nbsp;message&nbsp;indicates&nbsp;a&nbsp;configuration&nbsp;_error_.&nbsp;AFAICT,&nbsp;Squid&nbsp;code&nbsp;should&nbsp;be&nbsp;adjusted&nbsp;to&nbsp;_quit_&nbsp;(i.e.&nbsp;reject&nbsp;bad&nbsp;configuration)&nbsp;after&nbsp;discovering&nbsp;this&nbsp;error&nbsp;instead&nbsp;of&nbsp;continuing&nbsp;as&nbsp;if&nbsp;nothing&nbsp;bad&nbsp;happened.&lt;br&gt;&lt;br&gt;I&nbsp;recommend&nbsp;addressing&nbsp;the&nbsp;underlying&nbsp;cause,&nbsp;even&nbsp;if&nbsp;this&nbsp;message&nbsp;is&nbsp;unrelated&nbsp;to&nbsp;SQUID_TLS_ERR_ACCEPT+TLS_LIB_ERR=A000417.&lt;br&gt;&lt;br&gt;&lt;br&gt;HTH,&lt;br&gt;&lt;br&gt;Alex.&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;On&nbsp;Apr&nbsp;10,&nbsp;2024,&nbsp;at&nbsp;08:38,&nbsp;Alex&nbsp;Rousskov&nbsp;&lt;rousskov@measurement-factory.com&gt;&nbsp;wrote:&lt;br&gt;&lt;br&gt;On&nbsp;2024-04-10&nbsp;10:50,&nbsp;Jonathan&nbsp;Lee&nbsp;wrote:&lt;br&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;I&nbsp;am&nbsp;getting&nbsp;the&nbsp;following&nbsp;error&nbsp;in&nbsp;6.6&nbsp;after&nbsp;a&nbsp;upgrade&nbsp;from&nbsp;5.8&nbsp;does&nbsp;anyone&nbsp;know&nbsp;what&nbsp;this&nbsp;is&nbsp;caused&nbsp;by?&lt;br&gt;SQUID_TLS_ERR_ACCEPT+TLS_LIB_ERR=A000417+TLS_IO_ERR&lt;br&gt;&lt;/blockquote&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;$&nbsp;openssl&nbsp;errstr&nbsp;A000417&lt;br&gt;&nbsp;&nbsp;&nbsp;error:0A000417:SSL&nbsp;routines::sslv3&nbsp;alert&nbsp;illegal&nbsp;parameter&lt;br&gt;&lt;br&gt;I&nbsp;think&nbsp;I&nbsp;have&nbsp;seen&nbsp;that&nbsp;error&nbsp;code&nbsp;before,&nbsp;but&nbsp;I&nbsp;do&nbsp;not&nbsp;recall&nbsp;the&nbsp;exact&nbsp;circumstances.&nbsp;Sorry!&nbsp;The&nbsp;error&nbsp;happens&nbsp;when&nbsp;Squid&nbsp;tries&nbsp;to&nbsp;accept&nbsp;(or&nbsp;peek&nbsp;at)&nbsp;a&nbsp;TLS&nbsp;connection&nbsp;from&nbsp;the&nbsp;client.&nbsp;Might&nbsp;be&nbsp;prohibited&nbsp;TLS&nbsp;version/feature,&nbsp;TLS&nbsp;greasing,&nbsp;or&nbsp;non-TLS&nbsp;traffic?&nbsp;Try&nbsp;examining&nbsp;client&nbsp;TLS&nbsp;Hello&nbsp;packet(s)&nbsp;in&nbsp;Wireshark.&lt;br&gt;&lt;br&gt;Alex.&lt;br&gt;&lt;br&gt;_______________________________________________&lt;br&gt;squid-users&nbsp;mailing&nbsp;list&lt;br&gt;squid-users@lists.squid-cache.org&lt;br&gt;https://lists.squid-cache.org/listinfo/squid-users&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
