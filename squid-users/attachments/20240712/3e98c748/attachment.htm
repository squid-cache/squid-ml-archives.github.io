<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;&lt;/head&gt;&lt;body&nbsp;dir=&quot;auto&quot;&gt;Sorry&nbsp;that&nbsp;test&nbsp;was&nbsp;on&nbsp;the&nbsp;5.8&nbsp;version&nbsp;I&nbsp;am&nbsp;using&nbsp;that&nbsp;boot&nbsp;environment&nbsp;right&nbsp;now.&nbsp;All&nbsp;others&nbsp;were&nbsp;on&nbsp;6.6&nbsp;does&nbsp;6.6&nbsp;support&nbsp;no&nbsp;IP&nbsp;port&nbsp;combo?&lt;br&nbsp;id=&quot;lineBreakAtBeginningOfSignature&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Sent&nbsp;from&nbsp;my&nbsp;iPhone&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;On&nbsp;Jul&nbsp;12,&nbsp;2024,&nbsp;at&nbsp;09:16,&nbsp;Jonathan&nbsp;Lee&nbsp;&lt;jonathanlee571@gmail.com&gt;&nbsp;wrote:&lt;br&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;﻿&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&gt;tested&nbsp;with&nbsp;removal&nbsp;of&nbsp;IP&nbsp;and&nbsp;port&nbsp;failed&nbsp;If&nbsp;I&nbsp;leave&nbsp;port&nbsp;I&nbsp;get&nbsp;this&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;pre&nbsp;style=&quot;box-sizing:&nbsp;border-box;&nbsp;overflow:&nbsp;auto;&nbsp;font-family:&nbsp;Menlo,&nbsp;Monaco,&nbsp;Consolas,&nbsp;&quot;Courier&nbsp;New&quot;,&nbsp;monospace;&nbsp;font-size:&nbsp;13px;&nbsp;padding:&nbsp;9.5px;&nbsp;margin-top:&nbsp;0px;&nbsp;margin-bottom:&nbsp;10px;&nbsp;line-height:&nbsp;1.428571;&nbsp;color:&nbsp;rgb(51,&nbsp;51,&nbsp;51);&nbsp;word-break:&nbsp;break-all;&nbsp;overflow-wrap:&nbsp;break-word;&nbsp;background-color:&nbsp;rgb(245,&nbsp;245,&nbsp;245);&nbsp;border:&nbsp;1px&nbsp;solid&nbsp;rgb(204,&nbsp;204,&nbsp;204);&nbsp;border-radius:&nbsp;4px;&nbsp;caret-color:&nbsp;rgb(51,&nbsp;51,&nbsp;51);&quot;&gt;2024/07/12&nbsp;09:15:17|&nbsp;Processing:&nbsp;http_port&nbsp;:3128&nbsp;intercept&nbsp;ssl-bump&nbsp;generate-host-certificates=on&nbsp;dynamic_cert_mem_cache_size=20MB&nbsp;cert=/usr/local/etc/squid/serverkey.pem&nbsp;cafile=/usr/local/share/certs/ca-root-nss.crt&nbsp;capath=/usr/local/share/certs/&nbsp;cipher=EECDH+ECDSA+AESGCM:EECDH+aRSA+AESGCM:EECDH+ECDSA+SHA384:EECDH+ECDSA+SHA256:EECDH+aRSA+SHA384:EECDH+aRSA+SHA256:EECDH+aRSA+RC4:EECDH:EDH+aRSA:HIGH:!RC4:!aNULL:!eNULL:!LOW:!3DES:!MD5:!EXP:!PSK:!SRP:!DSS&nbsp;tls-dh=prime256v1:/etc/dh-parameters.2048&nbsp;options=NO_SSLv3,SINGLE_DH_USE,SINGLE_ECDH_USE<br>
2024/07/12&nbsp;09:15:17|&nbsp;FATAL:&nbsp;http_port:&nbsp;failed&nbsp;to&nbsp;resolve&nbsp;Host/IP:<br>
2024/07/12&nbsp;09:15:17|&nbsp;Not&nbsp;currently&nbsp;OK&nbsp;to&nbsp;rewrite&nbsp;swap&nbsp;log.<br>
2024/07/12&nbsp;09:15:17|&nbsp;storeDirWriteCleanLogs:&nbsp;Operation&nbsp;aborted.<br>
2024/07/12&nbsp;09:15:17|&nbsp;FATAL:&nbsp;Bungled&nbsp;/usr/local/etc/squid/squid.conf&nbsp;line&nbsp;6:&nbsp;http_port&nbsp;:3128&nbsp;intercept&nbsp;ssl-bump&nbsp;generate-host-certificates=on&nbsp;dynamic_cert_mem_cache_size=20MB&nbsp;cert=/usr/local/etc/squid/serverkey.pem&nbsp;cafile=/usr/local/share/certs/ca-root-nss.crt&nbsp;capath=/usr/local/share/certs/&nbsp;cipher=EECDH+ECDSA+AESGCM:EECDH+aRSA+AESGCM:EECDH+ECDSA+SHA384:EECDH+ECDSA+SHA256:EECDH+aRSA+SHA384:EECDH+aRSA+SHA256:EECDH+aRSA+RC4:EECDH:EDH+aRSA:HIGH:!RC4:!aNULL:!eNULL:!LOW:!3DES:!MD5:!EXP:!PSK:!SRP:!DSS&nbsp;tls-dh=prime256v1:/etc/dh-parameters.2048&nbsp;options=NO_SSLv3,SINGLE_DH_USE,SINGLE_ECDH_USE<br>
2024/07/12&nbsp;09:15:17|&nbsp;Squid&nbsp;Cache&nbsp;(Version&nbsp;5.8):&nbsp;Terminated&nbsp;abnormally.&lt;/pre&gt;&lt;div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;On&nbsp;Jul&nbsp;12,&nbsp;2024,&nbsp;at&nbsp;09:09,&nbsp;Jonathan&nbsp;Lee&nbsp;&lt;jonathanlee571@gmail.com&gt;&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;div&gt;&lt;div&gt;Thanks&nbsp;I&nbsp;fixed&nbsp;the&nbsp;firewall&nbsp;rules,&nbsp;I&nbsp;am&nbsp;trying&nbsp;tproxy&nbsp;and&nbsp;it&nbsp;seems&nbsp;to&nbsp;help&nbsp;with&nbsp;speed&nbsp;right&nbsp;now.&nbsp;&lt;br&gt;Sent&nbsp;from&nbsp;my&nbsp;iPhone&lt;br&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;On&nbsp;Jul&nbsp;12,&nbsp;2024,&nbsp;at&nbsp;04:57,&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;squid3@treenet.co.nz&gt;&nbsp;wrote:&lt;br&gt;&lt;br&gt;﻿On&nbsp;12/07/24&nbsp;11:50,&nbsp;Jonathan&nbsp;Lee&nbsp;wrote:&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;I&nbsp;recommend&nbsp;changing&nbsp;your&nbsp;main&nbsp;port&nbsp;to&nbsp;this:&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;http_port&nbsp;3128&nbsp;ssl-bump&nbsp;....&lt;br&gt;&lt;/blockquote&gt;This&nbsp;is&nbsp;set&nbsp;to&nbsp;this&nbsp;when&nbsp;it&nbsp;processes&lt;br&gt;http_port&nbsp;192.168.1.1:3128&nbsp;ssl-bump&nbsp;generate-host-certificates=on&nbsp;dynamic_cert_mem_cache_size=20MB&nbsp;cert=/usr/local/etc/squid/serverkey.pem&nbsp;cafile=/usr/local/share/certs/ca-root-nss.crt&nbsp;capath=/usr/local/share/certs/&nbsp;cipher=EECDH+ECDSA+AESGCM:EECDH+aRSA+AESGCM:EECDH+ECDSA+SHA384:EECDH+ECDSA+SHA256:EECDH+aRSA+SHA384:EECDH+aRSA+SHA256:EECDH+aRSA+RC4:EECDH:EDH+aRSA:!RC4:!aNULL:!eNULL:!LOW:!3DES:!SHA1:!MD5:!EXP:!PSK:!SRP:!DSS&nbsp;tls-dh=prime256v1:/etc/dh-parameters.2048&nbsp;options=NO_SSLv3,NO_TLSv1,SINGLE_DH_USE,SINGLE_ECDH_USE&lt;br&gt;&lt;/blockquote&gt;&lt;br&gt;The&nbsp;key&nbsp;thing&nbsp;here&nbsp;was&nbsp;the&nbsp;removal&nbsp;of&nbsp;the&nbsp;IP&nbsp;address.&nbsp;So&nbsp;that&nbsp;Squid&nbsp;received&nbsp;both&nbsp;the&nbsp;192.168.*.*&nbsp;and&nbsp;the&nbsp;127.0.0.*&nbsp;traffic&nbsp;without&nbsp;needing&nbsp;separate&nbsp;http_port&nbsp;lines.&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;and&nbsp;receiving&nbsp;the&nbsp;intercepted&nbsp;traffic&nbsp;on:&lt;br&gt;&lt;br&gt;&nbsp;http_port&nbsp;3129&nbsp;intercept&nbsp;ssl-bump&nbsp;…&lt;br&gt;&lt;/blockquote&gt;Do&nbsp;you&nbsp;mean&nbsp;https?&lt;br&gt;&lt;/blockquote&gt;&lt;br&gt;Sorry.&nbsp;I&nbsp;missed&nbsp;that&nbsp;you&nbsp;had&nbsp;an&nbsp;https_port&nbsp;using&nbsp;3129&nbsp;already.&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;https_port&nbsp;127.0.0.1:3129&nbsp;intercept&nbsp;ssl-bump&nbsp;generate-host-certificates=on&nbsp;dynamic_cert_mem_cache_size=20MB&nbsp;cert=/usr/local/etc/squid/serverkey.pem&nbsp;cafile=/usr/local/share/certs/ca-root-nss.crt&nbsp;capath=/usr/local/share/certs/&nbsp;cipher=EECDH+ECDSA+AESGCM:EECDH+aRSA+AESGCM:EECDH+ECDSA+SHA384:EECDH+ECDSA+SHA256:EECDH+aRSA+SHA384:EECDH+aRSA+SHA256:EECDH+aRSA+RC4:EECDH:EDH+aRSA:!RC4:!aNULL:!eNULL:!LOW:!3DES:!SHA1:!MD5:!EXP:!PSK:!SRP:!DSS&nbsp;tls-dh=prime256v1:/etc/dh-parameters.2048&nbsp;options=NO_SSLv3,NO_TLSv1,SINGLE_DH_USE,SINGLE_ECDH_USE&lt;br&gt;Https&nbsp;uses&nbsp;that&nbsp;port&nbsp;3129&lt;br&gt;What&nbsp;should&nbsp;I&nbsp;adapt&lt;br&gt;http_port&lt;br&gt;https_port?&lt;br&gt;&lt;/blockquote&gt;&lt;br&gt;Both.&lt;br&gt;&lt;br&gt;FYI,&nbsp;there&nbsp;are&nbsp;two&nbsp;issues:&lt;br&gt;&lt;br&gt;1)&nbsp;listening&nbsp;on&nbsp;IP&nbsp;127.0.0.1.&nbsp;Inside&nbsp;the&nbsp;OS&nbsp;there&nbsp;are&nbsp;different&nbsp;devices&nbsp;for&nbsp;localhost&nbsp;(lo)&nbsp;and&nbsp;WAN&nbsp;(eg.&nbsp;eth0).&nbsp;NAT&nbsp;is&nbsp;problematic&nbsp;already&nbsp;without&nbsp;introducing&nbsp;any&nbsp;tricky&nbsp;behaviours&nbsp;from&nbsp;bridging&nbsp;those&nbsp;&quot;private&quot;&nbsp;(lo)&nbsp;and&nbsp;&quot;public&quot;&nbsp;WAN&nbsp;devices.&lt;br&gt;&lt;br&gt;The&nbsp;simplest&nbsp;solution&nbsp;is&nbsp;just&nbsp;not&nbsp;to&nbsp;put&nbsp;any&nbsp;IP&nbsp;address&nbsp;on&nbsp;the&nbsp;squid.conf&nbsp;*port&nbsp;line(s)&nbsp;with&nbsp;intercept&nbsp;options.&nbsp;The&nbsp;OS&nbsp;will&nbsp;select&nbsp;one&nbsp;appropriate&nbsp;for&nbsp;whatever&nbsp;device&nbsp;and&nbsp;tell&nbsp;Squid&nbsp;on&nbsp;a&nbsp;per-connection&nbsp;basis.&lt;br&gt;&lt;br&gt;The&nbsp;more&nbsp;difficult&nbsp;way&nbsp;is&nbsp;to&nbsp;put&nbsp;one&nbsp;of&nbsp;the&nbsp;machines&nbsp;&quot;global&quot;&nbsp;(WAN&nbsp;or&nbsp;LAN)&nbsp;IP&nbsp;addresses.&nbsp;In&nbsp;your&nbsp;case&nbsp;192.168.1.1.&nbsp;With&nbsp;most&nbsp;connections&nbsp;being&nbsp;from&nbsp;the&nbsp;LAN&nbsp;that&nbsp;minimizes&nbsp;the&nbsp;possible&nbsp;problems.&lt;br&gt;&lt;br&gt;&lt;br&gt;2)&nbsp;listening&nbsp;on&nbsp;a&nbsp;well-known&nbsp;proxy&nbsp;port&nbsp;3128&nbsp;for&nbsp;intercepted&nbsp;traffic.&lt;br&gt;&lt;br&gt;There&nbsp;is&nbsp;malware&nbsp;in&nbsp;existence&nbsp;that&nbsp;scans&nbsp;for&nbsp;at&nbsp;least&nbsp;port&nbsp;3128&nbsp;(likely&nbsp;1080,&nbsp;8080&nbsp;etc&nbsp;common&nbsp;proxy&nbsp;ports)&nbsp;being&nbsp;used&nbsp;by&nbsp;proxies&nbsp;like&nbsp;yours&nbsp;and&nbsp;abuses&nbsp;them.&nbsp;As&nbsp;a&nbsp;result&nbsp;at&nbsp;least&nbsp;one&nbsp;popular&nbsp;antivirus&nbsp;network&nbsp;scanner&nbsp;(from&nbsp;Trend)&nbsp;does&nbsp;the&nbsp;same&nbsp;scan&nbsp;to&nbsp;detect&nbsp;insecure&nbsp;proxies.&lt;br&gt;&lt;br&gt;The&nbsp;worst&nbsp;thing&nbsp;about&nbsp;this&nbsp;situation&nbsp;is&nbsp;that&nbsp;the&nbsp;NAT&nbsp;very&nbsp;effectively&nbsp;hides&nbsp;the&nbsp;malware.&nbsp;So&nbsp;it&nbsp;is&nbsp;extremely&nbsp;hard&nbsp;to&nbsp;see&nbsp;whether&nbsp;it&nbsp;is&nbsp;happening&nbsp;to&nbsp;you.&lt;br&gt;&lt;br&gt;&lt;br&gt;I&nbsp;am&nbsp;not&nbsp;sure&nbsp;what&nbsp;UI&nbsp;you&nbsp;are&nbsp;using&nbsp;to&nbsp;show&nbsp;those&nbsp;firewall&nbsp;rules&nbsp;in&nbsp;your&nbsp;other&nbsp;email.&nbsp;However&nbsp;the&nbsp;one&nbsp;that&nbsp;had&nbsp;ALLOW&nbsp;for&nbsp;the&nbsp;port&nbsp;range&nbsp;3128-3129&nbsp;worries&nbsp;me.&nbsp;AFAIK&nbsp;that&nbsp;should&nbsp;only&nbsp;be&nbsp;for&nbsp;3128&nbsp;and&nbsp;a&nbsp;separate&nbsp;rule&nbsp;somewhere&nbsp;else&nbsp;to&nbsp;drop&nbsp;the&nbsp;intercepted&nbsp;port&nbsp;3129&nbsp;traffic&nbsp;pre-NAT.&lt;br&gt;&lt;br&gt;&lt;br&gt;HTH&lt;br&gt;Amos&lt;br&gt;_______________________________________________&lt;br&gt;squid-users&nbsp;mailing&nbsp;list&lt;br&gt;squid-users@lists.squid-cache.org&lt;br&gt;https://lists.squid-cache.org/listinfo/squid-users&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
