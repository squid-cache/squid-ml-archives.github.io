<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;the&nbsp;following&nbsp;configuration:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;http_port&nbsp;3128&nbsp;ssl-bump&nbsp;generate-host-certificates=on&nbsp;tls-cert=/etc/squid/ssl/myCA.pem&lt;br&gt;ssl_bump&nbsp;bump&nbsp;all&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;#&nbsp;BMCs&nbsp;return&nbsp;Cache-Control:&nbsp;private&lt;br&gt;&lt;/div&gt;&lt;div&gt;reply_header_access&nbsp;Cache-Control&nbsp;deny&nbsp;all&lt;br&gt;&lt;/div&gt;&lt;div&gt;reply_header_add&nbsp;Cache-Control&nbsp; &quot;public,&nbsp;max-age=1800&quot;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;follow_x_forwarded_for&nbsp;allow&nbsp;all&lt;br&gt;http_access&nbsp;allow&nbsp;all&lt;br&gt;include&nbsp;/etc/squid/conf.d/*.conf&lt;br&gt;host_verify_strict&nbsp;off&lt;br&gt;tls_outgoing_options&nbsp;min-version=1.0&nbsp;flags=DONT_VERIFY_PEER,DONT_VERIFY_DOMAIN&lt;br&gt;sslproxy_cert_error&nbsp;allow&nbsp;all&lt;br&gt;&lt;br&gt;sslcrtd_program&nbsp;/usr/lib/squid/security_file_certgen&nbsp;-s&nbsp;/var/spool/squid/ssl_db&nbsp;-M&nbsp;4MB&lt;br&gt;sslcrtd_children&nbsp;5&lt;br&gt;&lt;br&gt;cache_mem&nbsp;8192&nbsp;MB&lt;br&gt;cache_dir&nbsp;rock&nbsp;/cm/squid/squid&nbsp;8192&lt;br&gt;&lt;br&gt;buffered_logs&nbsp;on&lt;br&gt;access_log&nbsp;daemon:/var/log/squid/access.log&nbsp;logformat=squid&lt;br&gt;logfile_daemon&nbsp;/usr/lib/squid/log_file_daemon&lt;br&gt;cache_store_log&nbsp;daemon:/var/log/squid/store.log&lt;br&gt;log_mime_hdrs&nbsp;on&lt;br&gt;coredump_dir&nbsp;/var/spool/squid&lt;br&gt;shutdown_lifetime&nbsp;2&nbsp;seconds&lt;br&gt;max_filedesc&nbsp;4096&lt;br&gt;workers&nbsp;4&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;A&nbsp;curl&nbsp;will&nbsp;note&nbsp;the&nbsp;resource&nbsp;is&nbsp;stale&nbsp;(with&nbsp;new&nbsp;host),&nbsp;but&nbsp;I&nbsp;never&nbsp;get&nbsp;a&nbsp;cache&nbsp;hit&nbsp;on&nbsp;subsequent&nbsp;retries:&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Store&nbsp;log:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1728502393.992&nbsp;RELEASE&nbsp;-1&nbsp;FFFFFFFF&nbsp;02000000000000003A632F0003000000&nbsp; 200&nbsp;1728502382&nbsp; &nbsp; &nbsp; &nbsp; -1&nbsp; &nbsp; &nbsp; &nbsp; -1&nbsp;application/json&nbsp;1182/1182&nbsp;GET&nbsp;&lt;a&nbsp;href=&quot;https://10.170.31.77/redfish/v1/Oem/Supermicro/HGX_H100/Systems/HGX_Baseboard_0/Processors/GPU_SXM_4/ProcessorMetrics&quot;&gt;https://10.170.31.77/redfish/v1/Oem/Supermicro/HGX_H100/Systems/HGX_Baseboard_0/Processors/GPU_SXM_4/ProcessorMetrics&lt;/a&gt;&lt;br&gt;1728502395.674&nbsp;RELEASE&nbsp;-1&nbsp;FFFFFFFF&nbsp;02000000000000003B632F0002000000&nbsp; 200&nbsp;1728502384&nbsp; &nbsp; &nbsp; &nbsp; -1&nbsp; &nbsp; &nbsp; &nbsp; -1&nbsp;application/json&nbsp;1182/1182&nbsp;GET&nbsp;&lt;a&nbsp;href=&quot;https://10.170.31.77/redfish/v1/Oem/Supermicro/HGX_H100/Systems/HGX_Baseboard_0/Processors/GPU_SXM_4/ProcessorMetrics&quot;&gt;https://10.170.31.77/redfish/v1/Oem/Supermicro/HGX_H100/Systems/HGX_Baseboard_0/Processors/GPU_SXM_4/ProcessorMetrics&lt;/a&gt;&lt;br&gt;1728502408.317&nbsp;RELEASE&nbsp;00&nbsp;00056924&nbsp;04000000000000003C632F0001000000&nbsp; 200&nbsp;1728420588&nbsp; &nbsp; &nbsp; &nbsp; -1&nbsp;1728422388&nbsp;application/json&nbsp;1189/1189&nbsp;GET&nbsp;&lt;a&nbsp;href=&quot;https://10.170.31.81/redfish/v1/Oem/Supermicro/HGX_H100/Systems/HGX_Baseboard_0/Processors/GPU_SXM_4/ProcessorMetrics&quot;&gt;https://10.170.31.81/redfish/v1/Oem/Supermicro/HGX_H100/Systems/HGX_Baseboard_0/Processors/GPU_SXM_4/ProcessorMetrics&lt;/a&gt;&lt;br&gt;1728502408.318&nbsp;RELEASE&nbsp;-1&nbsp;FFFFFFFF&nbsp;03000000000000003C632F0001000000&nbsp; 200&nbsp;1728502404&nbsp; &nbsp; &nbsp; &nbsp; -1&nbsp; &nbsp; &nbsp; &nbsp; -1&nbsp;application/json&nbsp;1179/1179&nbsp;GET&nbsp;&lt;a&nbsp;href=&quot;https://10.170.31.81/redfish/v1/Oem/Supermicro/HGX_H100/Systems/HGX_Baseboard_0/Processors/GPU_SXM_4/ProcessorMetrics&quot;&gt;https://10.170.31.81/redfish/v1/Oem/Supermicro/HGX_H100/Systems/HGX_Baseboard_0/Processors/GPU_SXM_4/ProcessorMetrics&lt;/a&gt;&lt;br&gt;1728502417.161&nbsp;RELEASE&nbsp;-1&nbsp;FFFFFFFF&nbsp;05000000000000003C632F0001000000&nbsp; 200&nbsp;1728502413&nbsp; &nbsp; &nbsp; &nbsp; -1&nbsp; &nbsp; &nbsp; &nbsp; -1&nbsp;application/json&nbsp;1179/1179&nbsp;GET&nbsp;&lt;a&nbsp;href=&quot;https://10.170.31.81/redfish/v1/Oem/Supermicro/HGX_H100/Systems/HGX_Baseboard_0/Processors/GPU_SXM_4/ProcessorMetrics&quot;&gt;https://10.170.31.81/redfish/v1/Oem/Supermicro/HGX_H100/Systems/HGX_Baseboard_0/Processors/GPU_SXM_4/ProcessorMetrics&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Response&nbsp;headers:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;HTTP/1.1&nbsp;200&nbsp;Connection&nbsp;established&lt;br&gt;&lt;br&gt;HTTP/1.1&nbsp;200&nbsp;OK&lt;br&gt;Link:&nbsp;&lt;&lt;a&nbsp;href=&quot;http://redfish.dmtf.org/schemas/v1/Z.v1_5_2.json&quot;&gt;http://redfish.dmtf.org/schemas/v1/Z.v1_5_2.json&lt;/a&gt;&gt;;&nbsp;rel=describedby&lt;br&gt;Allow:&nbsp;GET&lt;br&gt;Content-Length:&nbsp;1179&lt;br&gt;Content-Type:&nbsp;application/json;&nbsp;charset=UTF-8&lt;br&gt;Strict-Transport-Security:&nbsp;max-age=31536000;&nbsp;includeSubdomains&lt;br&gt;X-XSS-Protection:&nbsp;1;&nbsp;mode=block&lt;br&gt;Content-Security-Policy:&nbsp;default-src&nbsp;&#39;self&#39;;connect-src&nbsp;&#39;self&#39;&nbsp;ws:&nbsp;wss:;frame-src&nbsp;&#39;self&#39;;img-src&nbsp;&#39;self&#39;&nbsp;data:;object-src&nbsp;&#39;self&#39;;font-src&nbsp;&#39;self&#39;&nbsp;data:;script-src&nbsp;&#39;self&#39;&nbsp;&#39;unsafe-inline&#39;&nbsp;&#39;unsafe-eval&#39;;style-src&nbsp;&#39;self&#39;&nbsp;&#39;unsafe-inline&#39;;worker-src&nbsp;&#39;self&#39;&nbsp;blob:;&lt;br&gt;X-Frame-Options:&nbsp;SAMEORIGIN&lt;br&gt;X-Content-Type-Options:&nbsp;nosniff&lt;br&gt;OData-Version:&nbsp;4.0&lt;br&gt;Date:&nbsp;Wed,&nbsp;09&nbsp;Oct&nbsp;2024&nbsp;19:35:50&nbsp;GMT&lt;br&gt;Cache-Status:&nbsp;squid;detail=mismatch&lt;br&gt;Via:&nbsp;1.1&nbsp;squid&nbsp;(squid/6.10)&lt;br&gt;Connection:&nbsp;keep-alive&lt;br&gt;Cache-Control:&nbsp;public,&nbsp;max-age=1800&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;I&nbsp;use&nbsp;a&nbsp;cache&nbsp;peer&nbsp;with&nbsp;MITMPROXY,&nbsp;squid&nbsp;will&nbsp;cache&nbsp;the&nbsp;results&nbsp;however&nbsp;this&nbsp;is&nbsp;inefficient&nbsp;and&nbsp;slow.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;span&nbsp;class=&quot;gmail_signature_prefix&quot;&gt;--&nbsp;&lt;/span&gt;&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_signature&quot;&nbsp;data-smartmail=&quot;gmail_signature&quot;&gt;Bryan&nbsp;Seitz&lt;br&gt;&lt;a&nbsp;href=&quot;mailto:seitzbg@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;seitzbg@gmail.com&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;<br>

</tt>
