<tt>
&lt;html&nbsp;xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;<br>
&lt;head&gt;<br>
&lt;title&gt;&lt;/title&gt;<br>
&lt;/head&gt;<br>
&lt;body&gt;<br>
&lt;div&nbsp;name=&quot;messageBodySection&quot;&gt;<br>
&lt;div&nbsp;dir=&quot;auto&quot;&gt;&#160;&nbsp;&#160;I&nbsp;wanted&nbsp;to&nbsp;note&nbsp;that&nbsp;since&nbsp;these&nbsp;are&nbsp;BMCs&nbsp;they&nbsp;require&nbsp;basic&nbsp;auth&nbsp;headers&nbsp;to&nbsp;return&nbsp;their&nbsp;response.&nbsp;I&nbsp;noticed&nbsp;that&nbsp;the&nbsp;ignore-auth&nbsp;option&nbsp;was&nbsp;removed&nbsp;awhile&nbsp;ago.&#160;&#160;Is&nbsp;my&nbsp;only&nbsp;option&nbsp;to&nbsp;go&nbsp;back&nbsp;to&nbsp;Squid&nbsp;3.5&nbsp;?&lt;br&nbsp;/&gt;<br>
&lt;br&nbsp;/&gt;<br>
TIA,&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;name=&quot;messageSignatureSection&quot;&gt;&lt;br&nbsp;/&gt;<br>
Bryan&nbsp;Seitz&lt;/div&gt;<br>
&lt;div&nbsp;name=&quot;messageReplySection&quot;&gt;On&nbsp;Oct&nbsp;11,&nbsp;2024&nbsp;at&nbsp;4:17â€¯AM&nbsp;-0400,&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;squid3@treenet.co.nz&gt;,&nbsp;wrote:&lt;br&nbsp;/&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;On&nbsp;11/10/24&nbsp;11:08,&nbsp;Bryan&nbsp;Seitz&nbsp;wrote:&lt;br&nbsp;/&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;style=&quot;border-left-color:&nbsp;grey;&nbsp;border-left-width:&nbsp;thin;&nbsp;border-left-style:&nbsp;solid;&nbsp;margin:&nbsp;5px&nbsp;5px;padding-left:&nbsp;10px;&quot;&gt;I&nbsp;removed&nbsp;the&nbsp;header&nbsp;mods&nbsp;and&nbsp;changed&nbsp;the&nbsp;refresh&nbsp;pattern&nbsp;to:&lt;br&nbsp;/&gt;<br>
&lt;br&nbsp;/&gt;<br>
refresh_pattern&nbsp;.&nbsp;&#160;&nbsp;&#160;&nbsp;&#160;&nbsp;&#160;&nbsp;&#160;&nbsp;&#160;&nbsp;&#160;&nbsp;15&nbsp;&#160;&nbsp;&#160;&nbsp;&#160;20%&nbsp;&#160;&nbsp;&#160;&nbsp;1800&nbsp;&#160;&nbsp;&#160;override-expire&lt;br&nbsp;/&gt;<br>
ignore-no-cache&nbsp;ignore-no-store&nbsp;ignore-private&lt;br&nbsp;/&gt;<br>
&lt;br&nbsp;/&gt;<br>
And&nbsp;I&nbsp;always&nbsp;get&nbsp;TCP_MISS.&#160;&nbsp;Any&nbsp;other&nbsp;thoughts?&lt;br&nbsp;/&gt;&lt;/blockquote&gt;<br>
&lt;br&nbsp;/&gt;<br>
Ah,&nbsp;I&nbsp;believe&nbsp;it&nbsp;would&nbsp;be&nbsp;best&nbsp;to&nbsp;get&nbsp;a&nbsp;baseline&nbsp;of&nbsp;what&nbsp;Squid&nbsp;default&lt;br&nbsp;/&gt;<br>
behaviour&nbsp;is&nbsp;like&nbsp;in&nbsp;your&nbsp;environment.&nbsp;So&nbsp;we&nbsp;can&nbsp;identify&nbsp;what/how&nbsp;you&lt;br&nbsp;/&gt;<br>
need&nbsp;to&nbsp;improve&nbsp;it.&lt;br&nbsp;/&gt;<br>
&lt;br&nbsp;/&gt;<br>
&lt;br&nbsp;/&gt;<br>
Firstly,&nbsp;FYI;&nbsp;this&nbsp;is&nbsp;what&nbsp;those&nbsp;controls&nbsp;**actually**&nbsp;do&nbsp;in&nbsp;current&lt;br&nbsp;/&gt;<br>
Squid&nbsp;..&lt;br&nbsp;/&gt;<br>
&lt;br&nbsp;/&gt;<br>
*&nbsp;override-expires&nbsp;...&nbsp;forces&nbsp;Squid&nbsp;to&nbsp;handle&nbsp;all&nbsp;responses&nbsp;to&nbsp;act&nbsp;as&lt;br&nbsp;/&gt;<br>
if&nbsp;they&nbsp;received&nbsp;&quot;Cache-Control:&nbsp;max-age=900&quot;&nbsp;(15&nbsp;min)&nbsp;...&nbsp;store,&nbsp;but&lt;br&nbsp;/&gt;<br>
revalidate&nbsp;180+&nbsp;seconds&nbsp;(20%&nbsp;of&nbsp;15min)&nbsp;later.&lt;br&nbsp;/&gt;<br>
Result:&nbsp;Anything&nbsp;that&nbsp;could&nbsp;cache&nbsp;longer&nbsp;than&nbsp;15min&nbsp;becomes&nbsp;a&lt;br&nbsp;/&gt;<br>
REFRESH_MISS&nbsp;or&nbsp;MISS,&nbsp;instead&nbsp;of&nbsp;HIT.&lt;br&nbsp;/&gt;<br>
Squid&nbsp;default:&nbsp;**do**&nbsp;cache.&nbsp;Revalidate&lt;br&nbsp;/&gt;<br>
*&nbsp;after(&quot;Date&quot;+&quot;CC:&nbsp;max-age=N&quot;)&nbsp;timestamp,&nbsp;otherwise&lt;br&nbsp;/&gt;<br>
*&nbsp;after&nbsp;&quot;Expires&quot;&nbsp;timestamp,&nbsp;otherwise&lt;br&nbsp;/&gt;<br>
*&nbsp;after&nbsp;(&quot;Date&quot;&nbsp;+1800&nbsp;minutes)&nbsp;timestamp.&lt;br&nbsp;/&gt;<br>
&lt;br&nbsp;/&gt;<br>
*&nbsp;ignore-no-cache&nbsp;...&nbsp;the&nbsp;standardized&nbsp;&quot;CC:&nbsp;no-cache&quot;&nbsp;is&nbsp;badly&nbsp;named,&lt;br&nbsp;/&gt;<br>
it&nbsp;tells&nbsp;Squid&nbsp;what&nbsp;**can**&nbsp;be&nbsp;cached.&lt;br&nbsp;/&gt;<br>
Result:&nbsp;Squid&nbsp;will&nbsp;discard&nbsp;many&nbsp;stored&nbsp;objects&nbsp;and&nbsp;perform&nbsp;a&nbsp;MISS&lt;br&nbsp;/&gt;<br>
instead.&lt;br&nbsp;/&gt;<br>
Squid&nbsp;default:&nbsp;**do**&nbsp;cache&nbsp;&quot;CC:private&quot;&nbsp;responses,&nbsp;revalidate&nbsp;on&lt;br&nbsp;/&gt;<br>
HIT.&nbsp;Log&nbsp;as&nbsp;REFRESH.&lt;br&nbsp;/&gt;<br>
&lt;br&nbsp;/&gt;<br>
*&nbsp;ignore-no-store&nbsp;...&nbsp;force&nbsp;everything&nbsp;marked&nbsp;&quot;CC:&nbsp;no-store&quot;&nbsp;to&nbsp;be&nbsp;stored.&lt;br&nbsp;/&gt;<br>
Result:&nbsp;cache&nbsp;fills&nbsp;with&nbsp;non-reusable&nbsp;objects.&nbsp;Leaving&nbsp;not&nbsp;much&nbsp;room&lt;br&nbsp;/&gt;<br>
for&nbsp;actual&nbsp;HIT&nbsp;objects.&lt;br&nbsp;/&gt;<br>
Squid&nbsp;default:&nbsp;store&nbsp;only&nbsp;objects&nbsp;with&nbsp;can&nbsp;result&nbsp;in&nbsp;more&nbsp;HITs.&lt;br&nbsp;/&gt;<br>
&lt;br&nbsp;/&gt;<br>
*&nbsp;ignore-private&nbsp;...&nbsp;force&nbsp;everything&nbsp;with&nbsp;&quot;CC:&nbsp;private&quot;&nbsp;to&nbsp;be&nbsp;discarded.&lt;br&nbsp;/&gt;<br>
Result:&nbsp;same&nbsp;as&nbsp;&quot;ignore-no-store&quot;.&lt;br&nbsp;/&gt;<br>
Squid&nbsp;default:&nbsp;**do**&nbsp;cache&nbsp;&quot;CC:private&quot;&nbsp;responses,&nbsp;revalidate&nbsp;on&nbsp;HIT.&lt;br&nbsp;/&gt;<br>
&lt;br&nbsp;/&gt;<br>
Note&nbsp;that&nbsp;both&nbsp;HIT&nbsp;and&nbsp;REFRESH&nbsp;mean&nbsp;the&nbsp;object&nbsp;**was**&nbsp;cached.&lt;br&nbsp;/&gt;<br>
&lt;br&nbsp;/&gt;<br>
&lt;br&nbsp;/&gt;<br>
You&nbsp;said&nbsp;that&nbsp;the&nbsp;access.log&nbsp;now&nbsp;contains&nbsp;MISS.&nbsp;Would&nbsp;that&nbsp;be&nbsp;just&lt;br&nbsp;/&gt;<br>
&quot;MISS&quot;&nbsp;or&nbsp;&quot;REFRESH&quot;&nbsp;+&nbsp;&quot;MISS&quot;&nbsp;(actually&nbsp;a&nbsp;HIT,&nbsp;but&nbsp;a&nbsp;new&nbsp;object&nbsp;was&nbsp;given&lt;br&nbsp;/&gt;<br>
by&nbsp;the&nbsp;server&nbsp;and&nbsp;replaced&nbsp;the&nbsp;pre-stored&nbsp;object).&lt;br&nbsp;/&gt;<br>
&lt;br&nbsp;/&gt;<br>
&lt;br&nbsp;/&gt;<br>
Can&nbsp;you&nbsp;show&nbsp;a&nbsp;pair&nbsp;of&nbsp;request&nbsp;headers&nbsp;from&nbsp;the&nbsp;client,&nbsp;with&nbsp;matching&lt;br&nbsp;/&gt;<br>
response&nbsp;from&nbsp;the&nbsp;server?&nbsp;You&nbsp;can&nbsp;use&nbsp;&quot;debug_options&nbsp;11,2&quot;&nbsp;in&nbsp;recent&lt;br&nbsp;/&gt;<br>
Squid&nbsp;versions&nbsp;to&nbsp;get&nbsp;a&nbsp;cache.log&nbsp;trace&nbsp;of&nbsp;the&nbsp;HTTP&nbsp;transactions.&lt;br&nbsp;/&gt;<br>
&lt;br&nbsp;/&gt;<br>
That&nbsp;might&nbsp;help&nbsp;us&nbsp;spot&nbsp;something&nbsp;more&nbsp;specific.&nbsp;The&nbsp;config&nbsp;change&nbsp;makes&lt;br&nbsp;/&gt;<br>
the&nbsp;earlier&nbsp;given&nbsp;ones&nbsp;obsolete.&lt;br&nbsp;/&gt;<br>
&lt;br&nbsp;/&gt;<br>
&lt;br&nbsp;/&gt;<br>
HTH&lt;br&nbsp;/&gt;<br>
Amos&lt;br&nbsp;/&gt;<br>
&lt;br&nbsp;/&gt;<br>
&lt;br&nbsp;/&gt;<br>
_______________________________________________&lt;br&nbsp;/&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&nbsp;/&gt;<br>
squid-users@lists.squid-cache.org&lt;br&nbsp;/&gt;<br>
https://lists.squid-cache.org/listinfo/squid-users&lt;br&nbsp;/&gt;&lt;/blockquote&gt;<br>
&lt;/div&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
