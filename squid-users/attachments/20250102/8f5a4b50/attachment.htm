<tt>
&lt;html&gt;<br>
&lt;head&gt;<br>
&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=Windows-1252&quot;&gt;<br>
&lt;style&nbsp;type=&quot;text/css&quot;&nbsp;style=&quot;display:none;&quot;&gt;&nbsp;P&nbsp;{margin-top:0;margin-bottom:0;}&nbsp;&lt;/style&gt;<br>
&lt;/head&gt;<br>
&lt;body&nbsp;dir=&quot;ltr&quot;&gt;<br>
&lt;div&nbsp;class=&quot;elementToProof&quot;&nbsp;style=&quot;text-align:&nbsp;left;&nbsp;text-indent:&nbsp;0px;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;margin:&nbsp;1em&nbsp;0px;&nbsp;font-family:&nbsp;Aptos,&nbsp;Aptos_EmbeddedFont,&nbsp;Aptos_MSFontService,&nbsp;Calibri,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
Dear&nbsp;Squid&nbsp;Support&nbsp;Team,&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;text-align:&nbsp;left;&nbsp;text-indent:&nbsp;0px;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;margin:&nbsp;1em&nbsp;0px;&nbsp;font-family:&nbsp;Aptos,&nbsp;Aptos_EmbeddedFont,&nbsp;Aptos_MSFontService,&nbsp;Calibri,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
I&nbsp;am&nbsp;currently&nbsp;configuring&nbsp;Squid&nbsp;with&nbsp;&lt;b&gt;Kerberos&nbsp;authentication&lt;/b&gt;&nbsp;and&nbsp;would&nbsp;like&nbsp;to&nbsp;integrate<br>
&lt;b&gt;Active&nbsp;Directory&nbsp;(AD)&nbsp;group-based&nbsp;access&nbsp;control&lt;/b&gt;.&nbsp;My&nbsp;Kerberos&nbsp;authentication&nbsp;is&nbsp;working,&nbsp;and&nbsp;I&nbsp;can&nbsp;access&nbsp;AD&nbsp;successfully&nbsp;from&nbsp;my&nbsp;Ubuntu&nbsp;server.&nbsp;Below&nbsp;is&nbsp;my&nbsp;current&nbsp;Squid&nbsp;configuration:&lt;/div&gt;<br>
&lt;pre&nbsp;style=&quot;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&quot;&gt;&lt;div&nbsp;style=&quot;direction:&nbsp;ltr;&nbsp;text-align:&nbsp;left;&nbsp;text-indent:&nbsp;0px;&nbsp;white-space:&nbsp;pre-wrap;&nbsp;margin:&nbsp;0px;&nbsp;font-family:&nbsp;Aptos,&nbsp;Aptos_EmbeddedFont,&nbsp;Aptos_MSFontService,&nbsp;Calibri,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;&lt;code&gt;#&nbsp;Kerberos&nbsp;authentication<br>
auth_param&nbsp;negotiate&nbsp;program&nbsp;/usr/lib/squid/negotiate_kerberos_auth<br>
auth_param&nbsp;negotiate&nbsp;children&nbsp;10<br>
auth_param&nbsp;negotiate&nbsp;keep_alive&nbsp;on<br>
<br>
#&nbsp;ACL's<br>
acl&nbsp;kerberos-auth&nbsp;proxy_auth&nbsp;REQUIRED<br>
http_access&nbsp;allow&nbsp;kerberos-auth<br>
<br>
#&nbsp;General&nbsp;access<br>
http_access&nbsp;allow&nbsp;localhost<br>
http_access&nbsp;deny&nbsp;all<br>
<br>
#&nbsp;Proxy&nbsp;settings<br>
http_port&nbsp;3128<br>
cache_dir&nbsp;ufs&nbsp;/var/spool/squid&nbsp;100&nbsp;16&nbsp;256<br>
coredump_dir&nbsp;/var/spool/squid<br>
&lt;/code&gt;&lt;/div&gt;&lt;/pre&gt;<br>
&lt;div&nbsp;style=&quot;text-align:&nbsp;left;&nbsp;text-indent:&nbsp;0px;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;margin:&nbsp;0px;&nbsp;font-family:&nbsp;Aptos,&nbsp;Aptos_EmbeddedFont,&nbsp;Aptos_MSFontService,&nbsp;Calibri,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
&lt;b&gt;What&nbsp;Works:&lt;/b&gt;&lt;/div&gt;<br>
&lt;ol&nbsp;start=&quot;1&quot;&nbsp;style=&quot;text-align:&nbsp;left;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&quot;&gt;<br>
&lt;li&nbsp;style=&quot;font-family:&nbsp;Aptos,&nbsp;Aptos_EmbeddedFont,&nbsp;Aptos_MSFontService,&nbsp;Calibri,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
Kerberos&nbsp;authentication&nbsp;is&nbsp;successfully&nbsp;validating&nbsp;users,&nbsp;and&nbsp;authenticated&nbsp;requests&nbsp;are&nbsp;being&nbsp;allowed&nbsp;through&nbsp;the&nbsp;proxy.&lt;/li&gt;&lt;li&nbsp;style=&quot;font-family:&nbsp;Aptos,&nbsp;Aptos_EmbeddedFont,&nbsp;Aptos_MSFontService,&nbsp;Calibri,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
My&nbsp;Ubuntu&nbsp;server&nbsp;is&nbsp;connected&nbsp;to&nbsp;AD,&nbsp;and&nbsp;I&nbsp;can&nbsp;query&nbsp;AD&nbsp;successfully&nbsp;using&nbsp;&lt;code&gt;<br>
ldapsearch&lt;/code&gt;.&lt;/li&gt;&lt;/ol&gt;<br>
&lt;div&nbsp;style=&quot;text-align:&nbsp;left;&nbsp;text-indent:&nbsp;0px;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;margin:&nbsp;0px;&nbsp;font-family:&nbsp;Aptos,&nbsp;Aptos_EmbeddedFont,&nbsp;Aptos_MSFontService,&nbsp;Calibri,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
&lt;b&gt;What&nbsp;I&nbsp;Need&nbsp;Assistance&nbsp;With:&lt;/b&gt;&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;text-align:&nbsp;left;&nbsp;text-indent:&nbsp;0px;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;margin:&nbsp;1em&nbsp;0px;&nbsp;font-family:&nbsp;Aptos,&nbsp;Aptos_EmbeddedFont,&nbsp;Aptos_MSFontService,&nbsp;Calibri,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
I&nbsp;want&nbsp;to&nbsp;integrate&nbsp;&lt;b&gt;AD&nbsp;group-based&nbsp;ACLs&lt;/b&gt;&nbsp;to&nbsp;control&nbsp;user&nbsp;access&nbsp;based&nbsp;on&nbsp;their&nbsp;group&nbsp;membership&nbsp;in&nbsp;Active&nbsp;Directory.&nbsp;Specifically:&lt;/div&gt;<br>
&lt;ol&nbsp;start=&quot;1&quot;&nbsp;style=&quot;text-align:&nbsp;left;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&quot;&gt;<br>
&lt;li&nbsp;style=&quot;font-family:&nbsp;Aptos,&nbsp;Aptos_EmbeddedFont,&nbsp;Aptos_MSFontService,&nbsp;Calibri,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
Restrict&nbsp;access&nbsp;for&nbsp;users&nbsp;in&nbsp;certain&nbsp;groups&nbsp;(e.g.,&nbsp;&lt;code&gt;Blocked&lt;/code&gt;&nbsp;group).&lt;/li&gt;&lt;li&nbsp;style=&quot;font-family:&nbsp;Aptos,&nbsp;Aptos_EmbeddedFont,&nbsp;Aptos_MSFontService,&nbsp;Calibri,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
Allow&nbsp;limited&nbsp;or&nbsp;filtered&nbsp;access&nbsp;for&nbsp;users&nbsp;in&nbsp;other&nbsp;groups&nbsp;(e.g.,&nbsp;&lt;code&gt;Restricted&lt;/code&gt;&nbsp;or<br>
&lt;code&gt;Filtered&lt;/code&gt;&nbsp;groups).&lt;/li&gt;&lt;li&nbsp;style=&quot;font-family:&nbsp;Aptos,&nbsp;Aptos_EmbeddedFont,&nbsp;Aptos_MSFontService,&nbsp;Calibri,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
Provide&nbsp;full&nbsp;internet&nbsp;access&nbsp;for&nbsp;users&nbsp;in&nbsp;a&nbsp;&lt;code&gt;FullAccess&lt;/code&gt;&nbsp;group.&lt;/li&gt;&lt;/ol&gt;<br>
&lt;div&nbsp;style=&quot;text-align:&nbsp;left;&nbsp;text-indent:&nbsp;0px;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;margin:&nbsp;0px;&nbsp;font-family:&nbsp;Aptos,&nbsp;Aptos_EmbeddedFont,&nbsp;Aptos_MSFontService,&nbsp;Calibri,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
&lt;b&gt;Questions:&lt;/b&gt;&lt;/div&gt;<br>
&lt;ol&nbsp;start=&quot;1&quot;&nbsp;style=&quot;text-align:&nbsp;left;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&quot;&gt;<br>
&lt;li&nbsp;style=&quot;font-family:&nbsp;Aptos,&nbsp;Aptos_EmbeddedFont,&nbsp;Aptos_MSFontService,&nbsp;Calibri,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
What&nbsp;is&nbsp;the&nbsp;best&nbsp;way&nbsp;to&nbsp;combine&nbsp;Kerberos&nbsp;authentication&nbsp;with&nbsp;AD&nbsp;group-based&nbsp;access&nbsp;control&nbsp;in&nbsp;Squid?&lt;/li&gt;&lt;li&nbsp;style=&quot;font-family:&nbsp;Aptos,&nbsp;Aptos_EmbeddedFont,&nbsp;Aptos_MSFontService,&nbsp;Calibri,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
Should&nbsp;I&nbsp;use&nbsp;the&nbsp;&lt;code&gt;external_acl_type&lt;/code&gt;&nbsp;helper&nbsp;with&nbsp;LDAP&nbsp;queries,&nbsp;or&nbsp;is&nbsp;there&nbsp;a&nbsp;better&nbsp;way,&nbsp;such&nbsp;as&nbsp;leveraging<br>
&lt;code&gt;note&lt;/code&gt;&nbsp;ACLs&nbsp;and&nbsp;group&nbsp;annotations&nbsp;from&nbsp;the&nbsp;Kerberos&nbsp;helper?&lt;/li&gt;&lt;li&nbsp;style=&quot;font-family:&nbsp;Aptos,&nbsp;Aptos_EmbeddedFont,&nbsp;Aptos_MSFontService,&nbsp;Calibri,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
Are&nbsp;there&nbsp;specific&nbsp;configuration&nbsp;examples&nbsp;or&nbsp;optimizations&nbsp;you&nbsp;recommend&nbsp;to&nbsp;achieve&nbsp;this&nbsp;setup?&lt;/li&gt;&lt;/ol&gt;<br>
&lt;div&nbsp;style=&quot;text-align:&nbsp;left;&nbsp;text-indent:&nbsp;0px;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;margin:&nbsp;0px;&nbsp;font-family:&nbsp;Aptos,&nbsp;Aptos_EmbeddedFont,&nbsp;Aptos_MSFontService,&nbsp;Calibri,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
&lt;b&gt;Additional&nbsp;Information:&lt;/b&gt;&lt;/div&gt;<br>
&lt;ul&nbsp;style=&quot;text-align:&nbsp;left;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&quot;&gt;<br>
&lt;li&nbsp;style=&quot;font-family:&nbsp;Aptos,&nbsp;Aptos_EmbeddedFont,&nbsp;Aptos_MSFontService,&nbsp;Calibri,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
I&nbsp;am&nbsp;new&nbsp;to&nbsp;configuring&nbsp;Squid&nbsp;and&nbsp;AD&nbsp;integration&nbsp;and&nbsp;have&nbsp;very&nbsp;little&nbsp;experience&nbsp;with&nbsp;these&nbsp;systems.&nbsp;If&nbsp;possible,&nbsp;I&nbsp;would&nbsp;greatly&nbsp;appreciate&nbsp;clear&nbsp;and&nbsp;beginner-friendly&nbsp;guidance.&lt;/li&gt;&lt;li&nbsp;style=&quot;font-family:&nbsp;Aptos,&nbsp;Aptos_EmbeddedFont,&nbsp;Aptos_MSFontService,&nbsp;Calibri,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
I&nbsp;have&nbsp;tested&nbsp;&lt;code&gt;ldapsearch&lt;/code&gt;&nbsp;and&nbsp;confirmed&nbsp;that&nbsp;I&nbsp;can&nbsp;retrieve&nbsp;user&nbsp;attributes,&nbsp;including<br>
&lt;code&gt;memberof&lt;/code&gt;,&nbsp;from&nbsp;AD.&lt;/li&gt;&lt;li&nbsp;style=&quot;font-family:&nbsp;Aptos,&nbsp;Aptos_EmbeddedFont,&nbsp;Aptos_MSFontService,&nbsp;Calibri,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
Despite&nbsp;extensive&nbsp;searching&nbsp;online,&nbsp;I&nbsp;couldn’t&nbsp;find&nbsp;a&nbsp;complete&nbsp;configuration&nbsp;example&nbsp;for&nbsp;integrating&nbsp;Kerberos&nbsp;authentication&nbsp;and&nbsp;AD&nbsp;group-based&nbsp;ACLs.&nbsp;If&nbsp;such&nbsp;an&nbsp;example&nbsp;exists,&nbsp;could&nbsp;you&nbsp;share&nbsp;it&nbsp;or&nbsp;guide&nbsp;me&nbsp;in&nbsp;creating&nbsp;one?&lt;/li&gt;&lt;/ul&gt;<br>
&lt;div&nbsp;style=&quot;text-align:&nbsp;left;&nbsp;text-indent:&nbsp;0px;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;margin:&nbsp;1em&nbsp;0px;&nbsp;font-family:&nbsp;Aptos,&nbsp;Aptos_EmbeddedFont,&nbsp;Aptos_MSFontService,&nbsp;Calibri,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
Thank&nbsp;you&nbsp;in&nbsp;advance&nbsp;for&nbsp;your&nbsp;assistance.&nbsp;Please&nbsp;let&nbsp;me&nbsp;know&nbsp;if&nbsp;additional&nbsp;details&nbsp;or&nbsp;logs&nbsp;are&nbsp;needed.&lt;/div&gt;<br>
&lt;div&nbsp;style=&quot;text-align:&nbsp;left;&nbsp;text-indent:&nbsp;0px;&nbsp;background-color:&nbsp;rgb(255,&nbsp;255,&nbsp;255);&nbsp;margin:&nbsp;1em&nbsp;0px;&nbsp;font-family:&nbsp;Aptos,&nbsp;Aptos_EmbeddedFont,&nbsp;Aptos_MSFontService,&nbsp;Calibri,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
Best&nbsp;regards,&lt;/div&gt;<br>
&lt;div&nbsp;class=&quot;elementToProof&quot;&nbsp;style=&quot;font-family:&nbsp;Aptos,&nbsp;Aptos_EmbeddedFont,&nbsp;Aptos_MSFontService,&nbsp;Calibri,&nbsp;Helvetica,&nbsp;sans-serif;&nbsp;font-size:&nbsp;12pt;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&quot;&gt;<br>
&lt;br&gt;<br>
&lt;/div&gt;<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
