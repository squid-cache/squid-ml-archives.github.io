<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&nbsp;gmail_quote_container&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Fri,&nbsp;Jan&nbsp;3,&nbsp;2025&nbsp;at&nbsp;8:23 AM&nbsp;Jonathan&nbsp;Lee&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:jonathanlee571@gmail.com&quot;&gt;jonathanlee571@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;Hello&nbsp;fellow&nbsp;Squid&nbsp;Users,&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;understand&nbsp;this&nbsp;directive&nbsp;is&nbsp;removed&nbsp;in&nbsp;Squid7&nbsp;again&nbsp;I&nbsp;am&nbsp;still&nbsp;trying&nbsp;to&nbsp;understand&nbsp;more&nbsp;about&nbsp;what&nbsp;it&nbsp;did&nbsp;and&nbsp;does&nbsp;in&nbsp;the&nbsp;older&nbsp;versions&nbsp;of&nbsp;software.&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
pipeline_prefetch&nbsp;historically&nbsp;was&nbsp;on&nbsp;or&nbsp;off&nbsp;for&nbsp;settings&nbsp;however&nbsp;today&nbsp;it&nbsp;is&nbsp;n+1&nbsp;or&nbsp;a&nbsp;numerical&nbsp;value&nbsp;for&nbsp;the&nbsp;variable&nbsp;n.&lt;br&gt;<br>
&lt;br&gt;<br>
My&nbsp;question&nbsp;is&nbsp;after&nbsp;many&nbsp;trial&nbsp;and&nbsp;errors&nbsp;what&nbsp;is&nbsp;a&nbsp;good&nbsp;range&nbsp;to&nbsp;use&nbsp;for&nbsp;a&nbsp;4GB&nbsp;memory&nbsp;system,&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
I&nbsp;have&nbsp;attempted&nbsp;many&nbsp;different&nbsp;n&nbsp;values&nbsp;some&nbsp;being&nbsp;100,&nbsp;200,&nbsp;300,&nbsp;5,&nbsp;10&nbsp;etc&nbsp;it&nbsp;appears&nbsp;to&nbsp;work&nbsp;well&nbsp;with&nbsp;100&nbsp;or&nbsp;maybe&nbsp;it&nbsp;was&nbsp;my&nbsp;other&nbsp;changes&nbsp;with&nbsp;&lt;br&gt;<br>
using&nbsp;the&nbsp;directive&nbsp;read_ahead_gap&nbsp;64&nbsp;KB&nbsp;and&nbsp;testing&nbsp;16&nbsp;and&nbsp;32&nbsp;&lt;br&gt;<br>
&lt;br&gt;<br>
what&nbsp;is&nbsp;a&nbsp;good&nbsp;solid&nbsp;go&nbsp;go&nbsp;juice&nbsp;number&nbsp;for&nbsp;pipeline_prefetch?&nbsp;I&nbsp;do&nbsp;notice&nbsp;massive&nbsp;increases&nbsp;in&nbsp;facebook&nbsp;loads&nbsp;when&nbsp;I&nbsp;have&nbsp;it&nbsp;at&nbsp;100&nbsp;however&nbsp;decreased&nbsp;performance&nbsp;with&nbsp;news&nbsp;websites.&nbsp;It&nbsp;is&nbsp;like&nbsp;a&nbsp;can’t&nbsp;win&nbsp;directive&nbsp;for&nbsp;me.&nbsp;Finally&nbsp;I&nbsp;thought&nbsp;best&nbsp;to&nbsp;ask.&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;HTTP&nbsp;is&nbsp;a&nbsp;request-response&nbsp;protocol,&nbsp;and&nbsp;HTTP/1.1&nbsp;uses&nbsp;a&nbsp;single&nbsp;TCP&nbsp;connection&nbsp;to&nbsp;issue&nbsp;several requests&nbsp;via&nbsp;the&nbsp;&quot;keep-alive&quot;&nbsp;feature.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;way&nbsp;it&nbsp;is&nbsp;supposed&nbsp;to&nbsp;work&nbsp;is:&lt;/div&gt;&lt;div&gt;-&nbsp;client&nbsp;opens&nbsp;TCP&nbsp;connection&lt;/div&gt;&lt;div&gt;-&nbsp;client&nbsp;sends&nbsp;request&nbsp;#1&nbsp;on&nbsp;connection&lt;/div&gt;&lt;div&gt;-&nbsp;server&nbsp;sends&nbsp;response&nbsp;#1&nbsp;on&nbsp;connection&lt;/div&gt;&lt;div&gt;-&nbsp;client&nbsp;sends&nbsp;request&nbsp;#2&nbsp;on&nbsp;connection&lt;/div&gt;&lt;div&gt;-&nbsp;server&nbsp;sends&nbsp;response&nbsp;#2&nbsp;on&nbsp;connection&lt;/div&gt;&lt;div&gt;-&nbsp;...&lt;/div&gt;&lt;div&gt;-&nbsp;client&nbsp;or&nbsp;server&nbsp;closes&nbsp;TCP&nbsp;connection&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;There&nbsp;are&nbsp;several&nbsp;reasons&nbsp;why&nbsp;a&nbsp;connection&nbsp;might&nbsp;be&nbsp;closed.&nbsp;Among&nbsp;them,&nbsp;axplicit&nbsp;decision&nbsp;by&nbsp;the&nbsp;client&nbsp;or&nbsp;server&nbsp;for&nbsp;instance&nbsp;due&nbsp;to&nbsp;wanting&nbsp;to&nbsp;terminate&nbsp;the&nbsp;process&nbsp;to&nbsp;avoid&nbsp;leaking&nbsp;too&nbsp;much&nbsp;memory,&nbsp;or&nbsp;an&nbsp;inactivity&nbsp;timeout,&nbsp;or&nbsp;because&nbsp;the&nbsp;server&nbsp;doesn&#39;t&nbsp;know&nbsp;in&nbsp;advance&nbsp;how&nbsp;long&nbsp;a&nbsp;response&nbsp;is&nbsp;going&nbsp;to&nbsp;be,&nbsp;so&nbsp;the&nbsp;only&nbsp;way&nbsp;to&nbsp;terminate&nbsp;the&nbsp;response&nbsp;is&nbsp;by&nbsp;closing&nbsp;the&nbsp;connection.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Sometimes&nbsp;however&nbsp;the&nbsp;client&nbsp;knows&nbsp;in&nbsp;advance&nbsp;several&nbsp;resources&nbsp;it&nbsp;wants&nbsp;to&nbsp;fetch,&nbsp;and&nbsp;sometimes&nbsp;it&nbsp;will&nbsp;perform&nbsp;these&nbsp;requests&nbsp;optimistically,&nbsp;without&nbsp;waiting&nbsp;for&nbsp;the&nbsp;previous&nbsp;responses.&nbsp;The&nbsp;flow&nbsp;in&nbsp;this&nbsp;case&nbsp;can&nbsp;look&nbsp;like:&lt;/div&gt;&lt;div&gt;-&nbsp;client&nbsp;opens&nbsp;TCP&nbsp;connection&lt;/div&gt;&lt;div&gt;-&nbsp;client&nbsp;sends&nbsp;request&nbsp;#1&nbsp;on&nbsp;connection&lt;/div&gt;&lt;div&gt;-&nbsp;client&nbsp;sends&nbsp;request&nbsp;#2&nbsp;on&nbsp;connection&lt;/div&gt;&lt;div&gt;-&nbsp;server&nbsp;sends&nbsp;response&nbsp;#1&nbsp;on&nbsp;connection&lt;/div&gt;&lt;div&gt;-&nbsp;server&nbsp;sends&nbsp;response&nbsp;#2&nbsp;on&nbsp;connection&lt;/div&gt;&lt;div&gt;-&nbsp;...&lt;/div&gt;&lt;div&gt;-&nbsp;client&nbsp;or&nbsp;server&nbsp;closes&nbsp;TCP&nbsp;connection&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;pipeline_prefetch&nbsp;instructs&nbsp;squid&nbsp;to&nbsp;try&nbsp;and&nbsp;detect&nbsp;these&nbsp;events,&nbsp;and&nbsp;to&nbsp;optimistically&nbsp;start&nbsp;processing&nbsp;requests&nbsp;before&nbsp;having&nbsp;completed&nbsp;the&nbsp;previous&nbsp;responses.&nbsp;This&nbsp;can&nbsp;in&nbsp;theory&nbsp;help&nbsp;reduce&nbsp;page&nbsp;rendering&nbsp;latency,&nbsp;but&nbsp;it&nbsp;comes&nbsp;with&nbsp;several&nbsp;drawbacks:&lt;/div&gt;&lt;div&gt;-&nbsp;the&nbsp;feature&nbsp;triggers&nbsp;bugs&nbsp;in&nbsp;Squid&nbsp;-&nbsp;see &lt;a&nbsp;href=&quot;https://joshua.hu/squid-security-audit-35-0days-45-exploits&quot;&gt;https://joshua.hu/squid-security-audit-35-0days-45-exploits&lt;/a&gt;&lt;/div&gt;&lt;div&gt;-&nbsp;the&nbsp;feature&nbsp;can&nbsp;actually&nbsp;harm&nbsp;performance:&nbsp;if&nbsp;squid&nbsp;needs&nbsp;to&nbsp;close&nbsp;the&nbsp;TCP&nbsp;connection&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;response&nbsp;#1,&nbsp;but&nbsp;has&nbsp;already&nbsp;downloaded&nbsp;uncacheable&nbsp;content&nbsp;for&nbsp;request&nbsp;#2,&nbsp;that&nbsp;content&nbsp;has&nbsp;to&nbsp;be&nbsp;discarded&lt;/div&gt;&lt;div&gt;-&nbsp;modern&nbsp;web&nbsp;clients&nbsp;adopt&nbsp;complex&nbsp;optimization&nbsp;strategies&nbsp;when&nbsp;picking&nbsp;what&nbsp;resources&nbsp;to&nbsp;download,&nbsp;making&nbsp;this&nbsp;optimization&nbsp;less&nbsp;and&nbsp;less&nbsp;relevant&lt;/div&gt;&lt;div&gt;-&nbsp;that&#39;s&nbsp;the&nbsp;reason&nbsp;why&nbsp;it&nbsp;was&nbsp;dropped&nbsp;as&nbsp;a&nbsp;feature:&nbsp;its&nbsp;benefit&nbsp;is&nbsp;doubtful,&nbsp;the&nbsp;drawbacks&nbsp;are&nbsp;known&nbsp;and&nbsp;measurable,&nbsp;the&nbsp;complexity&nbsp;it&nbsp;adds&nbsp;to&nbsp;squid&nbsp;is&nbsp;significant.&nbsp;We&nbsp;developers&nbsp;would&nbsp;rather&nbsp;clean&nbsp;the&nbsp;slate&nbsp;and&nbsp;work&nbsp;on&nbsp;supporting&nbsp;http/2&nbsp;which&nbsp;makes&nbsp;this&nbsp;whole&nbsp;problem&nbsp;go&nbsp;away&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;<br>
I&nbsp;do&nbsp;understand&nbsp;it&nbsp;is&nbsp;no&nbsp;longer&nbsp;recommended&nbsp;to&nbsp;be&nbsp;used&nbsp;this&nbsp;is&nbsp;simply&nbsp;for&nbsp;speed&nbsp;and&nbsp;the&nbsp;system&nbsp;is&nbsp;secure&nbsp;behind&nbsp;a&nbsp;firewall.&lt;/blockquote&gt;&lt;div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&#39;d&nbsp;just&nbsp;recommend&nbsp;to&nbsp;not&nbsp;use&nbsp;it&nbsp;:)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;--&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_signature&quot;&gt; &nbsp; &nbsp;Francesco&lt;/div&gt;&lt;/div&gt;<br>

</tt>
