<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&nbsp;gmail_quote_container&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Fri,&nbsp;Jan&nbsp;10,&nbsp;2025&nbsp;at&nbsp;5:39 PM&nbsp;Jonathan&nbsp;Lee&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:jonathanlee571@gmail.com&quot;&gt;jonathanlee571@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;Thanks&nbsp;for&nbsp;the&nbsp;reply &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;span&nbsp;style=&quot;background-color:rgb(255,249,149)&quot;&gt;What&nbsp;OS&nbsp;are&nbsp;you&nbsp;using?&nbsp;How&nbsp;many&nbsp;CPU&nbsp;cores&nbsp;do&nbsp;you&nbsp;want&nbsp;to&nbsp;dedicate&nbsp;to&nbsp;Squid?&nbsp;How&nbsp;much&nbsp;memory?&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;using&nbsp;FreeBSD&nbsp;variant&nbsp;4GB&nbsp;ram&nbsp;2&nbsp;CPUs&nbsp;pfSense&nbsp;plus&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;table&nbsp;style=&quot;font-variant-caps:normal;border-collapse:collapse;border-spacing:0px;background:white;width:1138px;max-width:100%;margin-bottom:0px;font-family:Roboto,sans-serif;font-size:14px;line-height:20px;color:rgb(51,51,51)&quot;&gt;&lt;tbody&nbsp;style=&quot;box-sizing:border-box&quot;&gt;&lt;tr&nbsp;style=&quot;box-sizing:border-box;background-color:rgb(249,249,249)&quot;&gt;&lt;td&nbsp;colspan=&quot;2&quot;&nbsp;style=&quot;box-sizing:border-box;padding:6px&nbsp;4px&nbsp;6px&nbsp;10px;line-height:1.42857;vertical-align:top;border-top:1px&nbsp;solid&nbsp;rgb(224,224,224);word-break:break-all&quot;&gt;Starting&nbsp;CPU&nbsp;1&nbsp;(1)&lt;/td&gt;&lt;/tr&gt;&lt;tr&nbsp;style=&quot;box-sizing:border-box&quot;&gt;&lt;td&nbsp;colspan=&quot;2&quot;&nbsp;style=&quot;box-sizing:border-box;padding:6px&nbsp;4px&nbsp;6px&nbsp;10px;line-height:1.42857;vertical-align:top;border-top:1px&nbsp;solid&nbsp;rgb(224,224,224);word-break:break-all&quot;&gt;FreeBSD/SMP:&nbsp;Multiprocessor&nbsp;System&nbsp;Detected:&nbsp;2&nbsp;CPUs&lt;/td&gt;&lt;/tr&gt;&lt;tr&nbsp;style=&quot;box-sizing:border-box;background-color:rgb(249,249,249)&quot;&gt;&lt;td&nbsp;colspan=&quot;2&quot;&nbsp;style=&quot;box-sizing:border-box;padding:6px&nbsp;4px&nbsp;6px&nbsp;10px;line-height:1.42857;vertical-align:top;border-top:1px&nbsp;solid&nbsp;rgb(224,224,224);word-break:break-all&quot;&gt;cpulist0:&nbsp;&lt;Open&nbsp;Firmware&nbsp;CPU&nbsp;Group&gt;&nbsp;on&nbsp;ofwbus0&lt;/td&gt;&lt;/tr&gt;&lt;tr&nbsp;style=&quot;box-sizing:border-box&quot;&gt;&lt;td&nbsp;colspan=&quot;2&quot;&nbsp;style=&quot;box-sizing:border-box;padding:6px&nbsp;4px&nbsp;6px&nbsp;10px;line-height:1.42857;vertical-align:top;border-top:1px&nbsp;solid&nbsp;rgb(224,224,224);word-break:break-all&quot;&gt;cpu0:&nbsp;&lt;Open&nbsp;Firmware&nbsp;CPU&gt;&nbsp;on&nbsp;cpulist0&lt;/td&gt;&lt;/tr&gt;&lt;tr&nbsp;style=&quot;box-sizing:border-box;background-color:rgb(245,245,245)&quot;&gt;&lt;td&nbsp;colspan=&quot;2&quot;&nbsp;style=&quot;box-sizing:border-box;padding:6px&nbsp;4px&nbsp;6px&nbsp;10px;line-height:1.42857;vertical-align:top;border-top:1px&nbsp;solid&nbsp;rgb(224,224,224);word-break:break-all&quot;&gt;cpu1:&nbsp;&lt;Open&nbsp;Firmware&nbsp;CPU&gt;&nbsp;on&nbsp;cpulist0&lt;/td&gt;&lt;/tr&gt;&lt;tr&nbsp;style=&quot;box-sizing:border-box&quot;&gt;&lt;td&nbsp;colspan=&quot;2&quot;&nbsp;style=&quot;box-sizing:border-box;padding:6px&nbsp;4px&nbsp;6px&nbsp;10px;line-height:1.42857;vertical-align:top;border-top:1px&nbsp;solid&nbsp;rgb(224,224,224);word-break:break-all&quot;&gt;e6000sw0:&nbsp;CPU&nbsp;port&nbsp;at&nbsp;5&lt;/td&gt;&lt;/tr&gt;&lt;tr&nbsp;style=&quot;box-sizing:border-box;background-color:rgb(249,249,249)&quot;&gt;&lt;td&nbsp;colspan=&quot;2&quot;&nbsp;style=&quot;box-sizing:border-box;padding:6px&nbsp;4px&nbsp;6px&nbsp;10px;line-height:1.42857;vertical-align:top;border-top:1px&nbsp;solid&nbsp;rgb(224,224,224);word-break:break-all&quot;&gt;CPU&nbsp;0:&nbsp;ARM&nbsp;Cortex-A53&nbsp;r0p4&nbsp;affinity:&nbsp;0&lt;/td&gt;&lt;/tr&gt;&lt;tr&nbsp;style=&quot;box-sizing:border-box&quot;&gt;&lt;td&nbsp;colspan=&quot;2&quot;&nbsp;style=&quot;box-sizing:border-box;padding:6px&nbsp;4px&nbsp;6px&nbsp;10px;line-height:1.42857;vertical-align:top;border-top:1px&nbsp;solid&nbsp;rgb(224,224,224);word-break:break-all&quot;&gt;CPU&nbsp;1:&nbsp;ARM&nbsp;Cortex-A53&nbsp;r0p4&nbsp;affinity:&nbsp;1&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt; &lt;/div&gt;&lt;div&gt;I&nbsp;do&nbsp;not&nbsp;know&nbsp;how&nbsp;to&nbsp;dedicate&nbsp;specific&nbsp;CPU&nbsp;cores&nbsp;to&nbsp;Squid&nbsp;I&nbsp;do&nbsp;not&nbsp;think&nbsp;I&nbsp;can&nbsp;with&nbsp;pfSense&nbsp;plus.&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;It&#39;s&nbsp;more&nbsp;about&nbsp;how&nbsp;many&nbsp;squid&nbsp;workers&nbsp;to&nbsp;start.&nbsp;Then&nbsp;the&nbsp;OS&nbsp;will&nbsp;do&nbsp;the&nbsp;allocation&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;span&nbsp;style=&quot;background-color:rgb(255,249,149)&quot;&gt;What&nbsp;filesystem&nbsp;are&nbsp;you&nbsp;using?&nbsp;For&nbsp;modern&nbsp;filesystems&nbsp;(ext4,&nbsp;btrfs,&nbsp;apfs)&nbsp;this parameter&nbsp;is&nbsp;much&nbsp;less&nbsp;meaningful&nbsp;than&nbsp;10&nbsp;years&nbsp;ago&nbsp;as&nbsp;they&nbsp;store&nbsp;directories&nbsp;as&nbsp;trees&nbsp;instead&nbsp;of&nbsp;lists.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;pre&nbsp;style=&quot;box-sizing:border-box;overflow:auto;font-family:Menlo,Monaco,Consolas,&quot;Courier&nbsp;New&quot;,monospace;font-size:13px;padding:9.5px;margin-top:0px;margin-bottom:10px;line-height:1.42857;color:rgb(51,51,51);word-break:break-all;background-color:rgb(245,245,245);border:1px&nbsp;solid&nbsp;rgb(204,204,204);border-radius:4px&quot;&gt;=&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;250069679&nbsp;&nbsp;ada0&nbsp;&nbsp;MBR&nbsp;&nbsp;(119G)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;532480&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;efi&nbsp;&nbsp;(260M)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;532481&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;131072&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;&nbsp;fat32&nbsp;&nbsp;(64M)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;663553&nbsp;&nbsp;249406127&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3&nbsp;&nbsp;freebsd&nbsp;&nbsp;[active]&nbsp;&nbsp;(119G)<br>
<br>
=&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;249406127&nbsp;&nbsp;ada0s3&nbsp;&nbsp;BSD&nbsp;&nbsp;(119G)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;16&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;free&nbsp;-&nbsp;&nbsp;(8.0K)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;16&nbsp;&nbsp;235528175&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;freebsd-zfs&nbsp;&nbsp;(112G)<br>
&nbsp;&nbsp;235528191&nbsp;&nbsp;&nbsp;13877248&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;&nbsp;freebsd-swap&nbsp;&nbsp;(6.6G)<br>
&nbsp;&nbsp;249405439&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;688&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;free&nbsp;-&nbsp;&nbsp;(344K)<br>
<br>
=&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;40&nbsp;&nbsp;500118112&nbsp;&nbsp;nda0&nbsp;&nbsp;GPT&nbsp;&nbsp;(238G)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;40&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2008&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;free&nbsp;-&nbsp;&nbsp;(1.0M)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2048&nbsp;&nbsp;&nbsp;16777216&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;freebsd-swap&nbsp;&nbsp;(8.0G)<br>
&nbsp;&nbsp;&nbsp;16779264&nbsp;&nbsp;482344960&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;&nbsp;freebsd-ufs&nbsp;&nbsp;(230G)<br>
&nbsp;&nbsp;499124224&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;993928&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;free&nbsp;-&nbsp;&nbsp;(485M)&lt;/pre&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;ada0&nbsp;is&nbsp;for&nbsp;the&nbsp;host&nbsp;os &lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;background-color:rgb(0,249,0)&quot;&gt;nda0&nbsp;is&nbsp;my&nbsp;cache&nbsp;is&nbsp;uses&nbsp;freebsd-ufs&lt;/span&gt;&nbsp;I&nbsp;use&nbsp;the&nbsp;command &lt;span&nbsp;style=&quot;color:rgb(51,51,51);font-family:Roboto,sans-serif;font-size:14px;background-color:rgb(0,249,0)&quot;&gt;&lt;b&gt;mount_msdosfs&nbsp;/dev/nda0p2&nbsp;/nvme/&lt;/b&gt;&lt;/span&gt;&lt;font&nbsp;color=&quot;#333333&quot;&nbsp;face=&quot;Roboto,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:14px&quot;&gt;&lt;b&nbsp;style=&quot;background-color:rgb(0,249,0)&quot;&gt;LOGS_Octane&lt;/b&gt; &lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;huh?&nbsp;From&nbsp;the&nbsp;output&nbsp;above,&nbsp;it&nbsp;would&nbsp;seem&nbsp;that&nbsp;nda0&nbsp;is&nbsp;using&nbsp;FreeBD&nbsp;UFS,&nbsp;not&nbsp;msdos.&lt;/div&gt;&lt;div&gt;Might&nbsp;be&nbsp;related&nbsp;to&nbsp;the&nbsp;partition&nbsp;table&nbsp;type&nbsp;you&#39;re&nbsp;using?&nbsp;I&#39;m&nbsp;not&nbsp;a&nbsp;freebsd&nbsp;expert&nbsp;tho&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;white-space:pre-wrap&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/span&gt;The&nbsp;only&nbsp;way&nbsp;to&nbsp;mount&nbsp;the&nbsp;NVMe&nbsp;drive&nbsp;I&nbsp;have&nbsp;found&nbsp;is&nbsp;with&nbsp;mount_msdosfs&nbsp;maybe&nbsp;this&nbsp;causes&nbsp;a&nbsp;slow&nbsp;down&nbsp;I&nbsp;do&nbsp;not&nbsp;know&nbsp;but&nbsp;I&nbsp;can&nbsp;write&nbsp;and&nbsp;save&nbsp;to&nbsp;the&nbsp;drive&nbsp;this&nbsp;way.&nbsp;it&nbsp;is&nbsp;on&nbsp;nda0p2&nbsp;230GB &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;pre&nbsp;style=&quot;box-sizing:border-box;overflow:auto;font-family:Menlo,Monaco,Consolas,&quot;Courier&nbsp;New&quot;,monospace;font-size:13px;padding:9.5px;margin-top:0px;margin-bottom:10px;line-height:1.42857;color:rgb(51,51,51);word-break:break-all;background-color:rgb(245,245,245);border:1px&nbsp;solid&nbsp;rgb(204,204,204);border-radius:4px&quot;&gt;Geom&nbsp;name:&nbsp;nda0<br>
modified:&nbsp;false<br>
state:&nbsp;OK<br>
fwheads:&nbsp;255<br>
fwsectors:&nbsp;63<br>
last:&nbsp;500118151<br>
first:&nbsp;40<br>
entries:&nbsp;128<br>
scheme:&nbsp;GPT<br>
Providers:<br>
1.&nbsp;Name:&nbsp;nda0p1<br>
&nbsp;&nbsp;&nbsp;Mediasize:&nbsp;8589934592&nbsp;(8.0G)<br>
&nbsp;&nbsp;&nbsp;Sectorsize:&nbsp;512<br>
&nbsp;&nbsp;&nbsp;Stripesize:&nbsp;0<br>
&nbsp;&nbsp;&nbsp;Stripeoffset:&nbsp;1048576<br>
&nbsp;&nbsp;&nbsp;Mode:&nbsp;r1w1e2<br>
&nbsp;&nbsp;&nbsp;efimedia:&nbsp;HD(1,GPT,04d31fb2-c0fd-11ef-8536-90ec770dda25,0x800,0x1000000)<br>
&nbsp;&nbsp;&nbsp;rawuuid:&nbsp;04d31fb2-c0fd-11ef-8536-90ec770dda25<br>
&nbsp;&nbsp;&nbsp;rawtype:&nbsp;516e7cb5-6ecf-11d6-8ff8-00022d09712b<br>
&nbsp;&nbsp;&nbsp;label:&nbsp;swapUSB<br>
&nbsp;&nbsp;&nbsp;length:&nbsp;8589934592<br>
&nbsp;&nbsp;&nbsp;offset:&nbsp;1048576<br>
&nbsp;&nbsp;&nbsp;type:&nbsp;freebsd-swap<br>
&nbsp;&nbsp;&nbsp;index:&nbsp;1<br>
&nbsp;&nbsp;&nbsp;end:&nbsp;16779263<br>
&nbsp;&nbsp;&nbsp;start:&nbsp;2048<br>
2.&nbsp;Name:&nbsp;nda0p2<br>
&nbsp;&nbsp;&nbsp;Mediasize:&nbsp;246960619520&nbsp;(230G)<br>
&nbsp;&nbsp;&nbsp;Sectorsize:&nbsp;512<br>
&nbsp;&nbsp;&nbsp;Stripesize:&nbsp;0<br>
&nbsp;&nbsp;&nbsp;Stripeoffset:&nbsp;8590983168<br>
&nbsp;&nbsp;&nbsp;Mode:&nbsp;r1w1e1<br>
&nbsp;&nbsp;&nbsp;efimedia:&nbsp;HD(2,GPT,d84dfc00-cb1c-11ef-afd9-90ec770dda25,0x1000800,0x1cc00000)<br>
&nbsp;&nbsp;&nbsp;rawuuid:&nbsp;d84dfc00-cb1c-11ef-afd9-90ec770dda25<br>
&nbsp;&nbsp;&nbsp;rawtype:&nbsp;516e7cb6-6ecf-11d6-8ff8-00022d09712b<br>
&nbsp;&nbsp;&nbsp;label:&nbsp;LOG<br>
&nbsp;&nbsp;&nbsp;length:&nbsp;246960619520<br>
&nbsp;&nbsp;&nbsp;offset:&nbsp;8590983168<br>
&nbsp;&nbsp;&nbsp;type:&nbsp;freebsd-ufs<br>
&nbsp;&nbsp;&nbsp;index:&nbsp;2<br>
&nbsp;&nbsp;&nbsp;end:&nbsp;499124223<br>
&nbsp;&nbsp;&nbsp;start:&nbsp;16779264<br>
Consumers:<br>
1.&nbsp;Name:&nbsp;nda0<br>
&nbsp;&nbsp;&nbsp;Mediasize:&nbsp;256060514304&nbsp;(238G)<br>
&nbsp;&nbsp;&nbsp;Sectorsize:&nbsp;512<br>
&nbsp;&nbsp;&nbsp;Mode:&nbsp;r2w2e5&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;color=&quot;#333333&quot;&nbsp;face=&quot;Roboto,&nbsp;sans-serif&quot;&gt;&lt;span&nbsp;style=&quot;font-size:14px;background-color:rgb(255,247,107)&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;span&nbsp;style=&quot;background-color:rgb(255,247,107)&quot;&gt;my&nbsp;memory&nbsp;replacement&nbsp;policy&nbsp;is&nbsp;LRU&nbsp;for&nbsp;memory&nbsp;cache&nbsp;it&nbsp;seems&nbsp;to&nbsp;run&nbsp;better&nbsp;with&nbsp;that,&nbsp;my&nbsp;options&nbsp;for&nbsp;memory&nbsp;replacement&nbsp;policy&nbsp;are&nbsp;HEAP&nbsp;GDSF&nbsp;I&nbsp;assume&nbsp;any&nbsp;HEAP&nbsp;will&nbsp;require&nbsp;more&nbsp;memory,&nbsp;HEAP&nbsp;LFUDF,&nbsp;HEAP&nbsp;LRU&nbsp;and&nbsp;just&nbsp;LRU.&lt;/span&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;background-color:rgb(255,247,107)&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;style=&quot;background-color:rgb(255,247,107)&quot;&gt;I&nbsp;think&nbsp;so&nbsp;but&nbsp;shouldn&#39;t&nbsp;be&nbsp;significantly&nbsp;more&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&nbsp;style=&quot;text-align:left&quot;&gt;Should&nbsp;I&nbsp;change &lt;span&nbsp;style=&quot;color:rgb(51,51,51);font-family:Roboto,sans-serif;text-align:right;background-color:rgb(0,253,255)&quot;&gt;Memory&nbsp;Replacement&nbsp;Policy&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(51,51,51);font-family:Roboto,sans-serif;font-size:14px;font-weight:700;text-align:right;background-color:rgb(255,255,255)&quot;&gt;&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(51,51,51);font-family:Roboto,sans-serif;text-align:right;background-color:rgb(255,255,255)&quot;&gt;from&nbsp;LRU &lt;/span&gt;to&nbsp;&lt;span&nbsp;style=&quot;background-color:rgb(0,253,255)&quot;&gt;HEAP&nbsp;LRU&lt;/span&gt;?&nbsp;I&nbsp;have&nbsp;tried&nbsp;every&nbsp;one&nbsp;again&nbsp;there&nbsp;is&nbsp;also&nbsp;the &lt;span&nbsp;style=&quot;color:rgb(51,51,51);font-family:Roboto,sans-serif;text-align:right;background-color:rgb(0,253,255)&quot;&gt;Cache&nbsp;Replacement&nbsp;Policy:&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;text-align:right;background-color:rgb(255,255,255)&quot;&gt;&lt;font&nbsp;color=&quot;#333333&quot;&nbsp;face=&quot;Roboto,&nbsp;sans-serif&quot;&gt;Currently&nbsp;set&nbsp;to&nbsp;HEAP&nbsp;LFUDA&nbsp;Should&nbsp;memory&nbsp;replacement&nbsp;policy&nbsp;and&nbsp;cache&nbsp;replacement&nbsp;policy&nbsp;&lt;/font&gt;&lt;/span&gt;&lt;span&nbsp;style=&quot;color:rgb(51,51,51);font-family:Roboto,sans-serif;text-align:right;background-color:rgb(255,255,255)&quot;&gt;both&nbsp;be&nbsp;the&nbsp;same,&nbsp;and&nbsp;or&nbsp;does&nbsp;one&nbsp;cause&nbsp;any&nbsp;performance&nbsp;issues&nbsp;with&nbsp;the&nbsp;other?&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;They&nbsp;should&nbsp;not&nbsp;be&nbsp;too&nbsp;different&nbsp;in&nbsp;terms&nbsp;of&nbsp;memory&nbsp;useage.&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;div&nbsp;style=&quot;text-align:left&quot;&gt;&lt;span&nbsp;style=&quot;color:rgb(51,51,51);font-family:Roboto,sans-serif;text-align:right;background-color:rgb(255,255,255)&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;Current&nbsp;Config &lt;/div&gt;&lt;div&gt;&lt;pre&nbsp;id=&quot;m_8374767743893344320pconf&quot;&nbsp;name=&quot;pconf&quot;&nbsp;readonly&nbsp;style=&quot;box-sizing:border-box;overflow:auto;font-family:Menlo,Monaco,Consolas,&quot;Courier&nbsp;New&quot;,monospace;font-size:13px;padding:9.5px;margin-top:0px;margin-bottom:10px;line-height:1.42857;color:rgb(51,51,51);word-break:break-all;border:1px&nbsp;solid&nbsp;rgb(204,204,204);border-radius:4px&quot;&gt;&lt;span&nbsp;style=&quot;background-color:rgb(245,245,245)&quot;&gt;#&nbsp;This&nbsp;file&nbsp;is&nbsp;automatically&nbsp;generated&nbsp;by&nbsp;pfSense<br>
#&nbsp;Do&nbsp;not&nbsp;edit&nbsp;manually&nbsp;!<br>
<br>
http_port&nbsp;&lt;a&nbsp;href=&quot;http://192.168.1.1:3128&quot;&nbsp;target=&quot;_blank&quot;&gt;192.168.1.1:3128&lt;/a&gt;&nbsp;ssl-bump&nbsp;generate-host-certificates=on&nbsp;dynamic_cert_mem_cache_size=20MB&nbsp;cert=/usr/local/etc/squid/serverkey.pem&nbsp;cafile=/usr/local/share/certs/ca-root-nss.crt&nbsp;capath=/usr/local/share/certs/&nbsp;cipher=EECDH+ECDSA+AESGCM:EECDH+aRSA+AESGCM:EECDH+ECDSA+SHA384:EECDH+ECDSA+SHA256:EECDH+aRSA+SHA384:EECDH+aRSA+SHA256:EECDH+aRSA+RC4:EECDH:EDH+aRSA:HIGH:!RC4:!aNULL:!eNULL:!LOW:!3DES:!MD5:!EXP:!PSK:!SRP:!DSS&nbsp;tls-dh=prime256v1:/etc/dh-parameters.2048&nbsp;options=NO_SSLv3,SINGLE_DH_USE,SINGLE_ECDH_USE<br>
<br>
http_port&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:3128&quot;&nbsp;target=&quot;_blank&quot;&gt;127.0.0.1:3128&lt;/a&gt;&nbsp;intercept&nbsp;ssl-bump&nbsp;generate-host-certificates=on&nbsp;dynamic_cert_mem_cache_size=20MB&nbsp;cert=/usr/local/etc/squid/serverkey.pem&nbsp;cafile=/usr/local/share/certs/ca-root-nss.crt&nbsp;capath=/usr/local/share/certs/&nbsp;cipher=EECDH+ECDSA+AESGCM:EECDH+aRSA+AESGCM:EECDH+ECDSA+SHA384:EECDH+ECDSA+SHA256:EECDH+aRSA+SHA384:EECDH+aRSA+SHA256:EECDH+aRSA+RC4:EECDH:EDH+aRSA:HIGH:!RC4:!aNULL:!eNULL:!LOW:!3DES:!MD5:!EXP:!PSK:!SRP:!DSS&nbsp;tls-dh=prime256v1:/etc/dh-parameters.2048&nbsp;options=NO_SSLv3,SINGLE_DH_USE,SINGLE_ECDH_USE<br>
<br>
https_port&nbsp;&lt;a&nbsp;href=&quot;http://127.0.0.1:3129&quot;&nbsp;target=&quot;_blank&quot;&gt;127.0.0.1:3129&lt;/a&gt;&nbsp;intercept&nbsp;ssl-bump&nbsp;generate-host-certificates=on&nbsp;dynamic_cert_mem_cache_size=20MB&nbsp;cert=/usr/local/etc/squid/serverkey.pem&nbsp;cafile=/usr/local/share/certs/ca-root-nss.crt&nbsp;capath=/usr/local/share/certs/&nbsp;cipher=EECDH+ECDSA+AESGCM:EECDH+aRSA+AESGCM:EECDH+ECDSA+SHA384:EECDH+ECDSA+SHA256:EECDH+aRSA+SHA384:EECDH+aRSA+SHA256:EECDH+aRSA+RC4:EECDH:EDH+aRSA:HIGH:!RC4:!aNULL:!eNULL:!LOW:!3DES:!MD5:!EXP:!PSK:!SRP:!DSS&nbsp;tls-dh=prime256v1:/etc/dh-parameters.2048&nbsp;options=NO_SSLv3,SINGLE_DH_USE,SINGLE_ECDH_USE<br>
<br>
icp_port&nbsp;0<br>
digest_generation&nbsp;off<br>
dns_v4_first&nbsp;on<br>
pid_filename&nbsp;/var/run/squid/squid.pid<br>
cache_effective_user&nbsp;squid<br>
cache_effective_group&nbsp;proxy<br>
error_default_language&nbsp;en<br>
icon_directory&nbsp;/usr/local/etc/squid/icons<br>
visible_hostname&nbsp;Lee_Family.home.arpa<br>
cache_mgr&nbsp;&lt;a&nbsp;href=&quot;mailto:jonathanlee571@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;jonathanlee571@gmail.com&lt;/a&gt;<br>
access_log&nbsp;/nvme/LOGS_Optane/Squid_Logs/access.log<br>
cache_log&nbsp;/nvme/LOGS_Optane/Squid_Logs/cache.log<br>
cache_store_log&nbsp;none<br>
netdb_filename&nbsp;/nvme/LOGS_Optane/Squid_Logs/netdb.state<br>
pinger_enable&nbsp;on<br>
pinger_program&nbsp;/usr/local/libexec/squid/pinger<br>
sslcrtd_program&nbsp;/usr/local/libexec/squid/security_file_certgen&nbsp;-s&nbsp;/var/squid/lib/ssl_db&nbsp;-M&nbsp;4MB&nbsp;-b&nbsp;2048<br>
tls_outgoing_options&nbsp;cafile=/usr/local/share/certs/ca-root-nss.crt<br>
tls_outgoing_options&nbsp;capath=/usr/local/share/certs/<br>
tls_outgoing_options&nbsp;options=NO_SSLv3,SINGLE_DH_USE,SINGLE_ECDH_USE<br>
tls_outgoing_options&nbsp;cipher=EECDH+ECDSA+AESGCM:EECDH+aRSA+AESGCM:EECDH+ECDSA+SHA384:EECDH+ECDSA+SHA256:EECDH+aRSA+SHA384:EECDH+aRSA+SHA256:EECDH+aRSA+RC4:EECDH:EDH+aRSA:HIGH:!RC4:!aNULL:!eNULL:!LOW:!3DES:!MD5:!EXP:!PSK:!SRP:!DSS<br>
sslcrtd_children&nbsp;10<br>
<br>
logfile_rotate&nbsp;10<br>
debug_options&nbsp;rotate=10<br>
shutdown_lifetime&nbsp;3&nbsp;seconds<br>
#&nbsp;Allow&nbsp;local&nbsp;network(s)&nbsp;on&nbsp;interface(s)<br>
acl&nbsp;localnet&nbsp;src&nbsp;&nbsp;&lt;a&nbsp;href=&quot;http://192.168.1.0/27&quot;&nbsp;target=&quot;_blank&quot;&gt;192.168.1.0/27&lt;/a&gt;<br>
forwarded_for&nbsp;delete<br>
via&nbsp;off<br>
httpd_suppress_version_string&nbsp;on<br>
uri_whitespace&nbsp;strip<br>
<br>
acl&nbsp;block_hours&nbsp;time&nbsp;00:30-05:00<br>
ssl_bump&nbsp;terminate&nbsp;all&nbsp;block_hours<br>
http_access&nbsp;deny&nbsp;all&nbsp;block_hours<br>
icp_port&nbsp;0<br>
htcp_port&nbsp;0<br>
snmp_port&nbsp;0<br>
icp_access&nbsp;deny&nbsp;all<br>
htcp_access&nbsp;deny&nbsp;all<br>
snmp_access&nbsp;deny&nbsp;all<br>
acl&nbsp;getmethod&nbsp;method&nbsp;GET<br>
acl&nbsp;to_ipv6&nbsp;dst&nbsp;ipv6<br>
acl&nbsp;from_ipv6&nbsp;src&nbsp;ipv6<br>
<br>
#tls_outgoing_options&nbsp;cipher=HIGH:MEDIUM:!RC4:!aNULL:!eNULL:!LOW:!3DES:!MD5:!EXP:!PSK:!SRP:!DSS<br>
tls_outgoing_options&nbsp;options=NO_SSLv3,NO_TLSv1,NO_TLSv1_1,NO_TICKET,SINGLE_DH_USE,SINGLE_ECDH_USE<br>
#tls_outgoing_options&nbsp;default-ca=on<br>
<br>
acl&nbsp;HttpAccess&nbsp;dstdomain&nbsp;&#39;/usr/local/pkg/http.access&#39;<br>
acl&nbsp;windowsupdate&nbsp;dstdomain&nbsp;&#39;/usr/local/pkg/windowsupdate&#39;<br>
#acl&nbsp;rewritedoms&nbsp;dstdomain&nbsp;&#39;/usr/local/pkg/desdom&#39;<br>
<br>
#store_id_program&nbsp;/usr/local/libexec/squid/storeid_file_rewrite&nbsp;/var/squid/storeid/storeid_rewrite.txt<br>
#store_id_children&nbsp;10&nbsp;startup=5&nbsp;idle=1&nbsp;concurrency=0<br>
#always_direct&nbsp;allow&nbsp;all<br>
#store_id_access&nbsp;deny&nbsp;connect<br>
#store_id_access&nbsp;deny&nbsp;!getmethod<br>
#store_id_access&nbsp;allow&nbsp;rewritedoms<br>
#store_id_access&nbsp;deny&nbsp;all<br>
<br>
refresh_all_ims&nbsp;on<br>
reload_into_ims&nbsp;on<br>
max_stale&nbsp;20&nbsp;years<br>
minimum_expiry_time&nbsp;0<br>
<br>
#refresh_pattern&nbsp;-i&nbsp;^http.*squid.internal.*&nbsp;43200&nbsp;100%&nbsp;79900&nbsp;override-expire&nbsp;override-lastmod&nbsp;ignore-reload&nbsp;ignore-no-store&nbsp;ignore-must-revalidate&nbsp;ignore-private&nbsp;ignore-auth<br>
<br>
refresh_pattern&nbsp;-i&nbsp;&lt;a&nbsp;href=&quot;http://windowsupdate.com/.*.(cab%7Cexe%7Cms%5Bi%7Cu%7Cf%7Cp%5D%7C%5Bap%5Dsf%7Cwm%5Bv%7Ca%5D%7Cdat%7Czip%7Cpsf)&quot;&nbsp;target=&quot;_blank&quot;&gt;windowsupdate.com/.*.(cab|exe|ms[i|u|f|p]|[ap]sf|wm[v|a]|dat|zip|psf)&lt;/a&gt;&nbsp;43200&nbsp;80%&nbsp;129600&nbsp;reload-into-ims<br>
refresh_pattern&nbsp;-i&nbsp;&lt;a&nbsp;href=&quot;http://microsoft.com/.*.(cab%7Cexe%7Cms%5Bi%7Cu%7Cf%7Cp%5D%7C%5Bap%5Dsf%7Cwm%5Bv%7Ca%5D%7Cdat%7Czip%7Cpsf)&quot;&nbsp;target=&quot;_blank&quot;&gt;microsoft.com/.*.(cab|exe|ms[i|u|f|p]|[ap]sf|wm[v|a]|dat|zip|psf)&lt;/a&gt;&nbsp;43200&nbsp;80%&nbsp;129600&nbsp;reload-into-ims<br>
refresh_pattern&nbsp;-i&nbsp;&lt;a&nbsp;href=&quot;http://windows.com/.*.(cab%7Cexe%7Cms%5Bi%7Cu%7Cf%7Cp%5D%7C%5Bap%5Dsf%7Cwm%5Bv%7Ca%5D%7Cdat%7Czip%7Cpsf)&quot;&nbsp;target=&quot;_blank&quot;&gt;windows.com/.*.(cab|exe|ms[i|u|f|p]|[ap]sf|wm[v|a]|dat|zip|psf)&lt;/a&gt;&nbsp;43200&nbsp;80%&nbsp;129600&nbsp;reload-into-ims<br>
refresh_pattern&nbsp;-i&nbsp;&lt;a&nbsp;href=&quot;http://microsoft.com.akadns.net/.*.(cab%7Cexe%7Cms%5Bi%7Cu%7Cf%7Cp%5D%7C%5Bap%5Dsf%7Cwm%5Bv%7Ca%5D%7Cdat%7Czip%7Cpsf)&quot;&nbsp;target=&quot;_blank&quot;&gt;microsoft.com.akadns.net/.*.(cab|exe|ms[i|u|f|p]|[ap]sf|wm[v|a]|dat|zip|psf)&lt;/a&gt;&nbsp;43200&nbsp;80%&nbsp;129600&nbsp;reload-into-ims<br>
refresh_pattern&nbsp;-i&nbsp;&lt;a&nbsp;href=&quot;http://deploy.akamaitechnologies.com/.*.(cab%7Cexe%7Cms%5Bi%7Cu%7Cf%7Cp%5D%7C%5Bap%5Dsf%7Cwm%5Bv%7Ca%5D%7Cdat%7Czip%7Cpsf)&quot;&nbsp;target=&quot;_blank&quot;&gt;deploy.akamaitechnologies.com/.*.(cab|exe|ms[i|u|f|p]|[ap]sf|wm[v|a]|dat|zip|psf)&lt;/a&gt;&nbsp;43200&nbsp;80%&nbsp;129600&nbsp;reload-into-ims<br>
<br>
<br>
acl&nbsp;https_login&nbsp;url_regex&nbsp;-i&nbsp;^https.*(login|Login).*<br>
cache&nbsp;deny&nbsp;https_login<br>
<br>
#range_offset_limit&nbsp;512&nbsp;MB&nbsp;windowsupdate<br>
range_offset_limit&nbsp;0&nbsp;!windowsupdate<br>
quick_abort_min&nbsp;-1&nbsp;KB<br>
<br>
&lt;/span&gt;&lt;span&nbsp;style=&quot;background-color:rgb(0,253,255)&quot;&gt;cache_mem&nbsp;64&nbsp;MB<br>
maximum_object_size_in_memory&nbsp;256&nbsp;KB<br>
memory_replacement_policy&nbsp;lru<br>
cache_replacement_policy&nbsp;heap&nbsp;LFUDA<br>
minimum_object_size&nbsp;0&nbsp;KB<br>
maximum_object_size&nbsp;512&nbsp;MB<br>
&lt;/span&gt;&lt;span&nbsp;style=&quot;background-color:rgb(148,227,254)&quot;&gt;cache_dir&nbsp;aufs&nbsp;/nvme/LOGS_Optane/Squid_Cache&nbsp;32000&nbsp;16&nbsp;256&lt;/span&gt;&lt;span&nbsp;style=&quot;background-color:rgb(245,245,245)&quot;&gt;<br>
offline_mode&nbsp;off<br>
cache_swap_low&nbsp;90<br>
cache_swap_high&nbsp;95<br>
acl&nbsp;donotcache&nbsp;dstdomain&nbsp;&#39;/var/squid/acl/donotcache.acl&#39;<br>
cache&nbsp;deny&nbsp;donotcache<br>
cache&nbsp;allow&nbsp;all<br>
#&nbsp;Add&nbsp;any&nbsp;of&nbsp;your&nbsp;own&nbsp;refresh_pattern&nbsp;entries&nbsp;above&nbsp;these.<br>
refresh_pattern&nbsp;^ftp:&nbsp;&nbsp;&nbsp;&nbsp;1440&nbsp;&nbsp;20%&nbsp;&nbsp;10080<br>
refresh_pattern&nbsp;^gopher:&nbsp;&nbsp;1440&nbsp;&nbsp;0%&nbsp;&nbsp;1440<br>
refresh_pattern&nbsp;-i&nbsp;(/cgi-bin/|?)&nbsp;0&nbsp;&nbsp;0%&nbsp;&nbsp;0<br>
refresh_pattern&nbsp;.&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;20%&nbsp;&nbsp;4320<br>
<br>
<br>
#Remote&nbsp;proxies<br>
<br>
<br>
#&nbsp;Setup&nbsp;some&nbsp;default&nbsp;acls<br>
#&nbsp;ACLs&nbsp;all,&nbsp;manager,&nbsp;localhost,&nbsp;and&nbsp;to_localhost&nbsp;are&nbsp;predefined.<br>
acl&nbsp;allsrc&nbsp;src&nbsp;all<br>
acl&nbsp;safeports&nbsp;port&nbsp;21&nbsp;70&nbsp;80&nbsp;210&nbsp;280&nbsp;443&nbsp;488&nbsp;563&nbsp;591&nbsp;631&nbsp;777&nbsp;901&nbsp;8080&nbsp;3128&nbsp;3129&nbsp;1025-65535&nbsp;<br>
acl&nbsp;sslports&nbsp;port&nbsp;443&nbsp;563&nbsp;8080&nbsp;5223&nbsp;2197<br>
<br>
acl&nbsp;purge&nbsp;method&nbsp;PURGE<br>
acl&nbsp;connect&nbsp;method&nbsp;CONNECT<br>
<br>
#&nbsp;Define&nbsp;protocols&nbsp;used&nbsp;for&nbsp;redirects<br>
acl&nbsp;HTTP&nbsp;proto&nbsp;HTTP<br>
acl&nbsp;HTTPS&nbsp;proto&nbsp;HTTPS<br>
<br>
#&nbsp;SslBump&nbsp;Peek&nbsp;and&nbsp;Splice<br>
#&nbsp;&lt;a&nbsp;href=&quot;http://wiki.squid-cache.org/Features/SslPeekAndSplice&quot;&nbsp;target=&quot;_blank&quot;&gt;http://wiki.squid-cache.org/Features/SslPeekAndSplice&lt;/a&gt;<br>
#&nbsp;&lt;a&nbsp;href=&quot;http://wiki.squid-cache.org/ConfigExamples/Intercept/SslBumpExplicit&quot;&nbsp;target=&quot;_blank&quot;&gt;http://wiki.squid-cache.org/ConfigExamples/Intercept/SslBumpExplicit&lt;/a&gt;<br>
#&nbsp;Match&nbsp;against&nbsp;the&nbsp;current&nbsp;step&nbsp;during&nbsp;ssl_bump&nbsp;evaluation&nbsp;[fast]<br>
#&nbsp;Never&nbsp;matches&nbsp;and&nbsp;should&nbsp;not&nbsp;be&nbsp;used&nbsp;outside&nbsp;the&nbsp;ssl_bump&nbsp;context.<br>
#<br>
#&nbsp;At&nbsp;each&nbsp;SslBump&nbsp;step,&nbsp;Squid&nbsp;evaluates&nbsp;ssl_bump&nbsp;directives&nbsp;to&nbsp;find<br>
#&nbsp;the&nbsp;next&nbsp;bumping&nbsp;action&nbsp;(e.g.,&nbsp;peek&nbsp;or&nbsp;splice).&nbsp;Valid&nbsp;SslBump&nbsp;step<br>
#&nbsp;values&nbsp;and&nbsp;the&nbsp;corresponding&nbsp;ssl_bump&nbsp;evaluation&nbsp;moments&nbsp;are:<br>
#&nbsp;&nbsp;&nbsp;SslBump1:&nbsp;After&nbsp;getting&nbsp;TCP-level&nbsp;and&nbsp;HTTP&nbsp;CONNECT&nbsp;info.<br>
#&nbsp;&nbsp;&nbsp;SslBump2:&nbsp;After&nbsp;getting&nbsp;TLS&nbsp;Client&nbsp;Hello&nbsp;info.<br>
#&nbsp;&nbsp;&nbsp;SslBump3:&nbsp;After&nbsp;getting&nbsp;TLS&nbsp;Server&nbsp;Hello&nbsp;info.<br>
#&nbsp;These&nbsp;ACLs&nbsp;exist&nbsp;even&nbsp;when&nbsp;&#39;SSL/MITM&nbsp;Mode&#39;&nbsp;is&nbsp;set&nbsp;to&nbsp;&#39;Custom&#39;&nbsp;so&nbsp;that<br>
#&nbsp;they&nbsp;can&nbsp;be&nbsp;used&nbsp;there&nbsp;for&nbsp;custom&nbsp;configuration.<br>
acl&nbsp;step1&nbsp;at_step&nbsp;SslBump1<br>
acl&nbsp;step2&nbsp;at_step&nbsp;SslBump2<br>
acl&nbsp;step3&nbsp;at_step&nbsp;SslBump3<br>
acl&nbsp;banned_hosts&nbsp;src&nbsp;&#39;/var/squid/acl/banned_hosts.acl&#39;<br>
acl&nbsp;blacklist&nbsp;dstdom_regex&nbsp;-i&nbsp;&#39;/var/squid/acl/blacklist.acl&#39;<br>
http_access&nbsp;allow&nbsp;manager&nbsp;localhost<br>
<br>
http_access&nbsp;deny&nbsp;manager<br>
http_access&nbsp;allow&nbsp;purge&nbsp;localhost<br>
http_access&nbsp;deny&nbsp;purge<br>
http_access&nbsp;deny&nbsp;!safeports<br>
http_access&nbsp;deny&nbsp;CONNECT&nbsp;!sslports<br>
<br>
#&nbsp;Always&nbsp;allow&nbsp;localhost&nbsp;connections<br>
http_access&nbsp;allow&nbsp;localhost<br>
<br>
quick_abort_min&nbsp;0&nbsp;KB<br>
quick_abort_max&nbsp;0&nbsp;KB<br>
quick_abort_pct&nbsp;95<br>
request_body_max_size&nbsp;0&nbsp;KB<br>
&lt;/span&gt;&lt;span&nbsp;style=&quot;background-color:rgb(255,147,0)&quot;&gt;delay_pools&nbsp;1<br>
delay_class&nbsp;1&nbsp;2<br>
delay_parameters&nbsp;1&nbsp;-1/-1&nbsp;-1/-1<br>
delay_initial_bucket_level&nbsp;100<br>
delay_access&nbsp;1&nbsp;allow&nbsp;allsrc&lt;/span&gt;&lt;span&nbsp;style=&quot;background-color:rgb(245,245,245)&quot;&gt;<br>
<br>
#&nbsp;Reverse&nbsp;Proxy&nbsp;settings<br>
<br>
deny_info&nbsp;TCP_RESET&nbsp;allsrc<br>
<br>
#&nbsp;Package&nbsp;Integration<br>
url_rewrite_program&nbsp;/usr/local/bin/squidGuard&nbsp;-c&nbsp;/usr/local/etc/squidGuard/squidGuard.conf<br>
url_rewrite_bypass&nbsp;off<br>
url_rewrite_children&nbsp;25&nbsp;startup=12&nbsp;idle=8&nbsp;concurrency=0<br>
<br>
#&nbsp;Custom&nbsp;options&nbsp;before&nbsp;auth<br>
#host_verify_strict&nbsp;on<br>
<br>
#&nbsp;These&nbsp;hosts&nbsp;are&nbsp;banned<br>
http_access&nbsp;deny&nbsp;banned_hosts<br>
#&nbsp;Block&nbsp;access&nbsp;to&nbsp;blacklist&nbsp;domains<br>
http_access&nbsp;deny&nbsp;blacklist<br>
#&nbsp;List&nbsp;of&nbsp;domains&nbsp;allowed&nbsp;to&nbsp;logging&nbsp;in&nbsp;to&nbsp;Google&nbsp;services<br>
request_header_access&nbsp;X-GoogApps-Allowed-Domains&nbsp;deny&nbsp;all<br>
request_header_add&nbsp;X-GoogApps-Allowed-Domains&nbsp;consumer_accounts<br>
#&nbsp;Set&nbsp;YouTube&nbsp;safesearch&nbsp;restriction<br>
acl&nbsp;youtubedst&nbsp;dstdomain&nbsp;-n&nbsp;&lt;a&nbsp;href=&quot;http://www.youtube.com&quot;&nbsp;target=&quot;_blank&quot;&gt;www.youtube.com&lt;/a&gt;&nbsp;&lt;a&nbsp;href=&quot;http://m.youtube.com&quot;&nbsp;target=&quot;_blank&quot;&gt;m.youtube.com&lt;/a&gt;&nbsp;&lt;a&nbsp;href=&quot;http://youtubei.googleapis.com&quot;&nbsp;target=&quot;_blank&quot;&gt;youtubei.googleapis.com&lt;/a&gt;&nbsp;&lt;a&nbsp;href=&quot;http://youtube.googleapis.com&quot;&nbsp;target=&quot;_blank&quot;&gt;youtube.googleapis.com&lt;/a&gt;&nbsp;&lt;a&nbsp;href=&quot;http://www.youtube-nocookie.com&quot;&nbsp;target=&quot;_blank&quot;&gt;www.youtube-nocookie.com&lt;/a&gt;<br>
request_header_access&nbsp;YouTube-Restrict&nbsp;deny&nbsp;all<br>
request_header_add&nbsp;YouTube-Restrict&nbsp;none&nbsp;youtubedst<br>
#&nbsp;Custom&nbsp;SSL/MITM&nbsp;options&nbsp;before&nbsp;auth<br>
acl&nbsp;wpad&nbsp;urlpath_regex&nbsp;^/wpad.dat$<br>
acl&nbsp;wpad&nbsp;urlpath_regex&nbsp;^/proxy.pac$<br>
acl&nbsp;wpad&nbsp;urlpath_regex&nbsp;^/wpad.da$<br>
deny_info&nbsp;TCP_RESET&nbsp;wpad<br>
#deny_info&nbsp;200:/etc/squid/wpad.dat&nbsp;wpad<br>
reply_header_access&nbsp;Content-Type&nbsp;deny&nbsp;wpad<br>
http_access&nbsp;deny&nbsp;wpad<br>
http_access&nbsp;deny&nbsp;!safeports<br>
http_access&nbsp;deny&nbsp;CONNECT&nbsp;!sslports<br>
cachemgr_passwd&nbsp;disable&nbsp;offline_toggle&nbsp;reconfigure&nbsp;shutdown<br>
cachemgr_passwd&nbsp;redacted&nbsp;all<br>
eui_lookup&nbsp;on<br>
acl&nbsp;no_miss&nbsp;url_regex&nbsp;-i&nbsp;&lt;a&nbsp;href=&quot;http://gateway.facebook.com/ws/realtime&quot;&nbsp;target=&quot;_blank&quot;&gt;gateway.facebook.com/ws/realtime&lt;/a&gt;?<br>
acl&nbsp;no_miss&nbsp;url_regex&nbsp;-i&nbsp;&lt;a&nbsp;href=&quot;http://web-chat-e2ee.facebook.com/ws/chat&quot;&nbsp;target=&quot;_blank&quot;&gt;web-chat-e2ee.facebook.com/ws/chat&lt;/a&gt;<br>
acl&nbsp;CONNECT&nbsp;method&nbsp;CONNECT<br>
acl&nbsp;wuCONNECT&nbsp;dstdomain&nbsp;&lt;a&nbsp;href=&quot;http://www.update.microsoft.com&quot;&nbsp;target=&quot;_blank&quot;&gt;www.update.microsoft.com&lt;/a&gt;<br>
acl&nbsp;wuCONNECT&nbsp;dstdomain&nbsp;&lt;a&nbsp;href=&quot;http://sls.microsoft.com&quot;&nbsp;target=&quot;_blank&quot;&gt;sls.microsoft.com&lt;/a&gt;<br>
http_access&nbsp;allow&nbsp;CONNECT&nbsp;wuCONNECT&nbsp;localnet<br>
http_access&nbsp;allow&nbsp;CONNECT&nbsp;wuCONNECT&nbsp;localhost<br>
http_access&nbsp;allow&nbsp;CONNECT&nbsp;windowsupdate&nbsp;localnet<br>
http_access&nbsp;allow&nbsp;CONNECT&nbsp;windowsupdate&nbsp;localhost<br>
http_access&nbsp;allow&nbsp;CONNECT&nbsp;HttpAccess&nbsp;localnet<br>
http_access&nbsp;allow&nbsp;CONNECT&nbsp;HttpAccess&nbsp;localhost<br>
http_access&nbsp;deny&nbsp;to_ipv6<br>
http_access&nbsp;deny&nbsp;from_ipv6<br>
<br>
acl&nbsp;BrokenButTrustedServers&nbsp;dstdomain&nbsp;&#39;/usr/local/pkg/dstdom.broken&#39;<br>
acl&nbsp;DomainMismatch&nbsp;ssl_error&nbsp;SQUID_X509_V_ERR_DOMAIN_MISMATCH<br>
sslproxy_cert_error&nbsp;allow&nbsp;BrokenButTrustedServers&nbsp;DomainMismatch<br>
sslproxy_cert_error&nbsp;deny&nbsp;all<br>
<br>
acl&nbsp;splice_only_ip&nbsp;src&nbsp;192.168.1.8&nbsp;<br>
acl&nbsp;splice_only_ip&nbsp;src&nbsp;192.168.1.10&nbsp;<br>
acl&nbsp;splice_only_ip&nbsp;src&nbsp;192.168.1.11&nbsp;<br>
acl&nbsp;splice_only_ip&nbsp;src&nbsp;192.168.1.15&nbsp;<br>
acl&nbsp;splice_only_ip&nbsp;src&nbsp;192.168.1.16&nbsp;<br>
::::&nbsp;=&nbsp;redacted&nbsp;mac&nbsp;address<br>
acl&nbsp;splice_only_mac&nbsp;arp&nbsp;:::::<br>
acl&nbsp;splice_only_mac&nbsp;arp&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;background-color:rgb(245,245,245)&quot;&gt;:::::&lt;/span&gt;&lt;span&nbsp;style=&quot;background-color:rgb(245,245,245)&quot;&gt;<br>
acl&nbsp;splice_only_mac&nbsp;arp&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;background-color:rgb(245,245,245)&quot;&gt;:::::&lt;/span&gt;&lt;span&nbsp;style=&quot;background-color:rgb(245,245,245)&quot;&gt;<br>
acl&nbsp;splice_only_mac&nbsp;arp&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;background-color:rgb(245,245,245)&quot;&gt;:::::&lt;/span&gt;&lt;span&nbsp;style=&quot;background-color:rgb(245,245,245)&quot;&gt;<br>
acl&nbsp;splice_only_mac&nbsp;arp&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;background-color:rgb(245,245,245)&quot;&gt;:::::&lt;/span&gt;&lt;span&nbsp;style=&quot;background-color:rgb(245,245,245)&quot;&gt;<br>
<br>
acl&nbsp;NoSSLIntercept&nbsp;ssl::server_name_regex&nbsp;-i&nbsp;&#39;/usr/local/pkg/reg.url.nobump&#39;<br>
acl&nbsp;NoBumpDNS&nbsp;dstdomain&nbsp;-n&nbsp;&#39;/usr/local/pkg/dns.nobump&#39;<br>
acl&nbsp;SSL_Intercept_Terminate&nbsp;dstdomain&nbsp;-n&nbsp;&#39;/usr/local/pkg/url.bump&#39;<br>
<br>
acl&nbsp;active_use&nbsp;annotate_client&nbsp;active=true<br>
<br>
acl&nbsp;bump_only_ip&nbsp;src&nbsp;192.168.1.3&nbsp;<br>
acl&nbsp;bump_only_ip&nbsp;src&nbsp;192.168.1.4&nbsp;<br>
acl&nbsp;bump_only_ip&nbsp;src&nbsp;192.168.1.5&nbsp;<br>
#acl&nbsp;bump_only_ip&nbsp;src&nbsp;192.168.1.6&nbsp;<br>
acl&nbsp;bump_only_ip&nbsp;src&nbsp;192.168.1.9&nbsp;<br>
acl&nbsp;bump_only_ip&nbsp;src&nbsp;192.168.1.13&nbsp;<br>
<br>
acl&nbsp;bump_only_mac&nbsp;arp&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;background-color:rgb(245,245,245)&quot;&gt;:::::&lt;/span&gt;&lt;span&nbsp;style=&quot;background-color:rgb(245,245,245)&quot;&gt;<br>
acl&nbsp;bump_only_mac&nbsp;arp&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;background-color:rgb(245,245,245)&quot;&gt;:::::&lt;/span&gt;&lt;span&nbsp;style=&quot;background-color:rgb(245,245,245)&quot;&gt;<br>
acl&nbsp;bump_only_mac&nbsp;arp&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;background-color:rgb(245,245,245)&quot;&gt;:::::&lt;/span&gt;&lt;span&nbsp;style=&quot;background-color:rgb(245,245,245)&quot;&gt;<br>
acl&nbsp;bump_only_mac&nbsp;arp&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;background-color:rgb(245,245,245)&quot;&gt;:::::&lt;/span&gt;&lt;span&nbsp;style=&quot;background-color:rgb(245,245,245)&quot;&gt;<br>
acl&nbsp;bump_only_mac&nbsp;arp&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;background-color:rgb(245,245,245)&quot;&gt;:::::&lt;/span&gt;&lt;span&nbsp;style=&quot;background-color:rgb(245,245,245)&quot;&gt;<br>
#acl&nbsp;bump_only_mac&nbsp;arp&nbsp;&lt;/span&gt;&lt;span&nbsp;style=&quot;background-color:rgb(245,245,245)&quot;&gt;:::::&lt;/span&gt;&lt;span&nbsp;style=&quot;background-color:rgb(245,245,245)&quot;&gt;<br>
<br>
coredump_dir&nbsp;/nvme/LOGS_Optane/Squid_Dump<br>
<br>
acl&nbsp;splice_group&nbsp;any-of&nbsp;https_login&nbsp;NoBumpDNS&nbsp;NoSSLIntercept<br>
acl&nbsp;splice_only_local_group&nbsp;all-of&nbsp;splice_only_mac&nbsp;splice_only_ip<br>
acl&nbsp;splice_main&nbsp;any-of&nbsp;splice_group&nbsp;splice_only_local_group<br>
acl&nbsp;bump_main&nbsp;all-of&nbsp;bump_only_mac&nbsp;bump_only_ip<br>
<br>
ssl_bump&nbsp;peek&nbsp;step1<br>
ssl_bump&nbsp;terminate&nbsp;SSL_Intercept_Terminate<br>
miss_access&nbsp;deny&nbsp;no_miss&nbsp;active_use<br>
ssl_bump&nbsp;splice&nbsp;splice_main&nbsp;active_use<br>
ssl_bump&nbsp;bump&nbsp;bump_main&nbsp;active_use<br>
acl&nbsp;activated&nbsp;note&nbsp;active_use&nbsp;true<br>
ssl_bump&nbsp;terminate&nbsp;!activated<br>
<br>
#&nbsp;Setup&nbsp;allowed&nbsp;ACLs<br>
#&nbsp;Allow&nbsp;local&nbsp;network(s)&nbsp;on&nbsp;interface(s)<br>
http_access&nbsp;allow&nbsp;localnet<br>
#&nbsp;Default&nbsp;block&nbsp;all&nbsp;to&nbsp;be&nbsp;sure<br>
http_access&nbsp;deny&nbsp;allsrc<br>
&lt;/span&gt;&lt;/pre&gt;&lt;div&gt;Does&nbsp;delay&nbsp;pool&nbsp;setting&nbsp;cause&nbsp;any&nbsp;issues?&nbsp;They&nbsp;seem&nbsp;to&nbsp;be&nbsp;default&nbsp;values&nbsp;one&nbsp;pool. &lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;you&nbsp;need&nbsp;them,&nbsp;you&nbsp;need&nbsp;them.&lt;/div&gt;&lt;div&gt;There&nbsp;doesn&#39;t&nbsp;seem&nbsp;to&nbsp;be&nbsp;anything&nbsp;obviously&nbsp;wrong&nbsp;with&nbsp;the&nbsp;highlighted&nbsp;parts&nbsp;of&nbsp;your&nbsp;config,&nbsp;except&nbsp;maybe&nbsp;that&nbsp;the&nbsp;memory&nbsp;cache&nbsp;is&nbsp;tiny.&lt;/div&gt;&lt;div&gt;How&nbsp;much&nbsp;RAM&nbsp;is&nbsp;the&nbsp;OS&nbsp;reporting&nbsp;that&nbsp;squid&nbsp;is&nbsp;using&nbsp;after&nbsp;a&nbsp;few&nbsp;hours&nbsp;or&nbsp;days&nbsp;of&nbsp;use?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;span&nbsp;class=&quot;gmail_signature_prefix&quot;&gt;--&nbsp;&lt;/span&gt;&lt;br&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_signature&quot;&gt; &nbsp; &nbsp;Francesco&lt;/div&gt;&lt;/div&gt;<br>

</tt>
