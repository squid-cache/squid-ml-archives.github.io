<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&gt;&gt;<br>
When&nbsp;you&nbsp;enter&nbsp;&quot;&lt;a&nbsp;href=&quot;https://www.example.com:8888/test.php&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://www.example.com:8888/test.php&lt;/a&gt;&quot;&nbsp;to&nbsp;your&nbsp;browser,&nbsp;it&nbsp;&lt;br&gt;<br>
&gt;&gt;asks&nbsp;proxy&nbsp;server&nbsp;to&nbsp;&quot;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://www.example.com:8888&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;www.example.com:8888&lt;/a&gt;&quot;&nbsp;and&nbsp;browser&nbsp;handles&nbsp;the&nbsp;&lt;br&gt;&lt;div&gt;<br>
&gt;&gt;SSL&nbsp;negotiation&nbsp;and&nbsp;further&nbsp;communication&nbsp;itself.&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;what&nbsp;you&nbsp;are&nbsp;saying&nbsp;It&#39;s&nbsp;very&nbsp;interesting,&nbsp;<br>
infact&nbsp;previously&nbsp;I&nbsp;understood<br>
CONNECT<br>
method&nbsp;was&nbsp;invoked&nbsp;both&nbsp;by&nbsp;http&nbsp;and&nbsp;by&nbsp;https&nbsp;protocols.&lt;/div&gt;&lt;div&gt;You&nbsp;are&nbsp;saying&nbsp;CONNECT&nbsp;method&nbsp;is&nbsp;invoked&nbsp;only&nbsp;if&nbsp;protocol&nbsp;is&nbsp;https,&nbsp;while&nbsp;if&nbsp;you&nbsp;type&nbsp;http://site:port,&nbsp;no&nbsp;<br>
CONNECT&nbsp;method&nbsp;<br>
<br>
is&nbsp;invoked. &lt;/div&gt;&lt;div&gt;Right&nbsp;?&nbsp;&nbsp;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&nbsp;gmail_quote_container&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;Il&nbsp;giorno&nbsp;mar&nbsp;29&nbsp;apr&nbsp;2025&nbsp;alle&nbsp;ore&nbsp;16:36&nbsp;Matus&nbsp;UHLAR&nbsp;-&nbsp;fantomas&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:uhlar@fantomas.sk&quot;&gt;uhlar@fantomas.sk&lt;/a&gt;&gt;&nbsp;ha&nbsp;scritto:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;On&nbsp;29.04.25&nbsp;08:54,&nbsp;Renzo&nbsp;Marengo&nbsp;wrote:&lt;br&gt;<br>
&gt;When&nbsp;client&nbsp;uses&nbsp;CONNECT&nbsp;directive&nbsp;I&nbsp;understand&nbsp;that&nbsp;proxy&nbsp;establishes&lt;br&gt;<br>
&gt;tunnel&nbsp;to&nbsp;destination&nbsp;host&nbsp;on&nbsp;specified&nbsp;port&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;e.g.&lt;br&gt;<br>
&gt;&lt;a&nbsp;href=&quot;http://www.example.com:8888/test.php&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.example.com:8888/test.php&lt;/a&gt;&lt;br&gt;<br>
&gt;&lt;a&nbsp;href=&quot;https://www.example.com:8888/test.php&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://www.example.com:8888/test.php&lt;/a&gt;&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;1.&nbsp;I&nbsp;don&#39;t&nbsp;understand&nbsp;if&nbsp;this&nbsp;occurs&nbsp;both&nbsp;in&nbsp;presence&nbsp;of&nbsp;http&nbsp;and&nbsp;https&lt;br&gt;<br>
&gt;requests,&nbsp;The&nbsp;request&nbsp;(using&nbsp;CONNECT&nbsp;method)&nbsp;can&nbsp;be&nbsp;http&nbsp;or&nbsp;https&nbsp;?&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
When&nbsp;you&nbsp;enter&nbsp;&quot;&lt;a&nbsp;href=&quot;http://www.example.com:8888/test.php&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.example.com:8888/test.php&lt;/a&gt;&quot;&nbsp;into&nbsp;your&nbsp;browser,&nbsp;&lt;br&gt;<br>
your&nbsp;browser&nbsp;asks&nbsp;proxy&nbsp;server&nbsp;for&nbsp;&quot;&lt;a&nbsp;href=&quot;http://www.example.com:8888/test.php&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.example.com:8888/test.php&lt;/a&gt;&quot;&lt;br&gt;<br>
-&nbsp;it&nbsp;delegates&nbsp;fetching&nbsp;the&nbsp;content&nbsp;to&nbsp;proxy.&lt;br&gt;<br>
&lt;br&gt;<br>
When&nbsp;you&nbsp;enter&nbsp;&quot;&lt;a&nbsp;href=&quot;https://www.example.com:8888/test.php&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://www.example.com:8888/test.php&lt;/a&gt;&quot;&nbsp;to&nbsp;your&nbsp;browser,&nbsp;it&nbsp;&lt;br&gt;<br>
asks&nbsp;proxy&nbsp;server&nbsp;to&nbsp;&quot;CONNET&nbsp;&lt;a&nbsp;href=&quot;http://www.example.com:8888&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;www.example.com:8888&lt;/a&gt;&quot;&nbsp;and&nbsp;browser&nbsp;handles&nbsp;the&nbsp;&lt;br&gt;<br>
SSL&nbsp;negotiation&nbsp;and&nbsp;further&nbsp;communication&nbsp;itself.&lt;br&gt;<br>
&lt;br&gt;<br>
This&nbsp;way,&nbsp;you&nbsp;can&nbsp;tunnel&nbsp;different&nbsp;protocols&nbsp;through&nbsp;the&nbsp;proxy,&nbsp;not&nbsp;just&nbsp;&lt;br&gt;<br>
HTTP&nbsp;(squid&nbsp;must&nbsp;be&nbsp;able&nbsp;to&nbsp;allow&nbsp;it,&nbsp;the&nbsp;destination&nbsp;ports&nbsp;are&nbsp;usually&nbsp;&lt;br&gt;<br>
restricted&nbsp;via&nbsp;&quot;https_port&quot;&nbsp;acl).&lt;br&gt;<br>
&lt;br&gt;<br>
&gt;2. &nbsp;if&nbsp;In&nbsp;both&nbsp;cases&nbsp;CONNECT&nbsp;method&nbsp;is&nbsp;invoked&nbsp;but&nbsp;how&nbsp;I&nbsp;can&nbsp;discover&lt;br&gt;<br>
&gt;protocol&nbsp;(http,&nbsp;https)&nbsp;looking&nbsp;for&nbsp;inside&nbsp;access.log&nbsp;?&lt;br&gt;<br>
&gt;A.B.C.D&nbsp;TCP_TUNNEL/200&nbsp;7085&nbsp;CONNECT&nbsp;&lt;a&nbsp;href=&quot;http://mtalk.google.com:5228&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;mtalk.google.com:5228&lt;/a&gt;&nbsp;-&nbsp;HIER_DIRECT/&lt;br&gt;<br>
&gt;142.251.18.188&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;I&nbsp;see&nbsp;only&nbsp;info&nbsp;about&nbsp;destination&nbsp;host&nbsp;and&nbsp;port&nbsp;but&nbsp;no&nbsp;http/https&nbsp;protocol&lt;br&gt;<br>
&gt;is&nbsp;referenced.&lt;br&gt;<br>
&lt;br&gt;<br>
&lt;br&gt;<br>
In&nbsp;this&nbsp;case,&nbsp;client&nbsp;A.B.C.D&nbsp;asked&nbsp;the&nbsp;proxy&nbsp;to&nbsp;&quot;CONNECT&nbsp;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://mtalk.google.com:5228&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;mtalk.google.com:5228&lt;/a&gt;&quot;&nbsp;and&nbsp;the&nbsp;proxy&nbsp;fullfilled&nbsp;the&nbsp;request.&lt;br&gt;<br>
In&nbsp;case&nbsp;of&nbsp;CONNECT&nbsp;requests,&nbsp;the&nbsp;proxy&nbsp;has&nbsp;no&nbsp;idea&nbsp;what&nbsp;data&nbsp;flow&nbsp;through&nbsp;&lt;br&gt;<br>
the&nbsp;server.&nbsp;Afaik&nbsp;&lt;a&nbsp;href=&quot;http://mtalk.google.com:5228&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;mtalk.google.com:5228&lt;/a&gt;&nbsp;is&nbsp;used&nbsp;for&nbsp;google/firebase&nbsp;cloud&nbsp;&lt;br&gt;<br>
messaging.&lt;br&gt;<br>
&lt;br&gt;<br>
--&nbsp;&lt;br&gt;<br>
Matus&nbsp;UHLAR&nbsp;-&nbsp;fantomas,&nbsp;&lt;a&nbsp;href=&quot;mailto:uhlar@fantomas.sk&quot;&nbsp;target=&quot;_blank&quot;&gt;uhlar@fantomas.sk&lt;/a&gt;&nbsp;;&nbsp;&lt;a&nbsp;href=&quot;http://www.fantomas.sk/&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;http://www.fantomas.sk/&lt;/a&gt;&lt;br&gt;<br>
Warning:&nbsp;I&nbsp;wish&nbsp;NOT&nbsp;to&nbsp;receive&nbsp;e-mail&nbsp;advertising&nbsp;to&nbsp;this&nbsp;address.&lt;br&gt;<br>
Varovanie:&nbsp;na&nbsp;tuto&nbsp;adresu&nbsp;chcem&nbsp;NEDOSTAVAT&nbsp;akukolvek&nbsp;reklamnu&nbsp;postu.&lt;br&gt;<br>
 &nbsp; &nbsp;One&nbsp;OS&nbsp;to&nbsp;rule&nbsp;them&nbsp;all,&nbsp;One&nbsp;OS&nbsp;to&nbsp;find&nbsp;them,&lt;br&gt;<br>
One&nbsp;OS&nbsp;to&nbsp;bring&nbsp;them&nbsp;all&nbsp;and&nbsp;into&nbsp;darkness&nbsp;bind&nbsp;them&lt;br&gt;<br>
_______________________________________________&lt;br&gt;<br>
squid-users&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;target=&quot;_blank&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;br&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
