<tt>
&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;div&nbsp;class=&quot;ydp14f4e1d6yahoo-style-wrap&quot;&nbsp;style=&quot;font-family:Helvetica&nbsp;Neue,&nbsp;Helvetica,&nbsp;Arial,&nbsp;sans-serif;font-size:16px;&quot;&gt;&lt;div&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;div&gt;Hi&nbsp;Amos,&lt;br&gt;&lt;br&gt;Thank&nbsp;for&nbsp;your&nbsp;replied.&nbsp;&lt;br&gt;&lt;br&gt;&gt;&nbsp;FTR;&nbsp;the&nbsp;login&nbsp;prompt&nbsp;is&nbsp;not&nbsp;coming&nbsp;from&nbsp;Squid.&nbsp;The&nbsp;client&nbsp;Browser&lt;br&gt;&gt;&nbsp;decides&nbsp;where&nbsp;to&nbsp;get&nbsp;credentials&nbsp;from&nbsp;-&nbsp;the&nbsp;popup&nbsp;is&nbsp;one&nbsp;source,&nbsp;current&lt;br&gt;&gt;&nbsp;machine&nbsp;login&nbsp;another,&nbsp;there&nbsp;may&nbsp;be&nbsp;sources&nbsp;as&nbsp;well.&lt;br&gt;&lt;br&gt;Our&nbsp;laptop&nbsp;is&nbsp;joined&nbsp;domain.&nbsp;I&nbsp;thought&nbsp;browser&nbsp;will&nbsp;use&nbsp;AD&nbsp;ticket&nbsp;TGT,&nbsp;(which&nbsp;I&nbsp;can&nbsp;view&nbsp;by&nbsp;klist)?&nbsp;not&nbsp;like&nbsp;this?&lt;br&gt;&lt;br&gt;&gt;&nbsp;Since&nbsp;you&nbsp;are&nbsp;SSL-Bump'ing&nbsp;traffic&nbsp;-&nbsp;whatever&nbsp;result&nbsp;the&nbsp;initial&nbsp;CONNECT&lt;br&gt;&gt;&nbsp;request&nbsp;credentials&nbsp;were&nbsp;given&nbsp;when&nbsp;the&nbsp;TLS&nbsp;began&nbsp;will&nbsp;be&nbsp;used&nbsp;until&lt;br&gt;&gt;&nbsp;that&nbsp;TLS&nbsp;connection&nbsp;closes.&lt;br&gt;&lt;br&gt;I&nbsp;configure&nbsp;Bumping&nbsp;github&nbsp;website&nbsp;only,&nbsp;the&nbsp;rest&nbsp;of&nbsp;the&nbsp;traffic&nbsp;not&nbsp;decrypt.&lt;br&gt;&lt;br&gt;&gt;&nbsp;Secondly&nbsp;the&nbsp;auth&nbsp;helper&nbsp;&quot;negative-ttl=900&quot;&nbsp;(from&nbsp;config&nbsp;below)&nbsp;value&lt;br&gt;&gt;&nbsp;will&nbsp;make&nbsp;Squid&nbsp;only&nbsp;check&nbsp;for&nbsp;different&nbsp;results&nbsp;on&nbsp;new&nbsp;connections&lt;br&gt;&gt;&nbsp;started&nbsp;900+&nbsp;seconds&nbsp;after&nbsp;the&nbsp;first&nbsp;one&nbsp;was&nbsp;rejected.&lt;br&gt;&lt;br&gt;squid-cache&nbsp;by&nbsp;default&nbsp;is&nbsp;one&nbsp;hour,&nbsp;so&nbsp;I&nbsp;think&nbsp;I&nbsp;configure&nbsp;15&nbsp;mins,&nbsp;which&nbsp;less&nbsp;compare&nbsp;to&nbsp;one&nbsp;hour,&nbsp;not&nbsp;sure&nbsp;whether&nbsp;correct&nbsp;or&nbsp;not.&lt;br&gt;&lt;br&gt;&gt;&nbsp;Do&nbsp;you&nbsp;still&nbsp;actually&nbsp;**need**&nbsp;NTLM&nbsp;?&lt;br&gt;&gt;&nbsp;It&nbsp;has&nbsp;been&nbsp;deprecated&nbsp;for&nbsp;19&nbsp;years&nbsp;already,&nbsp;and&nbsp;Windows&nbsp;software&nbsp;has&lt;br&gt;&gt;&nbsp;progressively&nbsp;been&nbsp;removing&nbsp;the&nbsp;ability&nbsp;to&nbsp;use&nbsp;it.&lt;br&gt;&lt;br&gt;Yes,&nbsp;we&nbsp;are&nbsp;using&nbsp;Kerberos,&nbsp;NTLM&nbsp;and&nbsp;basic&nbsp;are&nbsp;for&nbsp;those&nbsp;legacy&nbsp;application,&nbsp;I&nbsp;think.&lt;br&gt;&lt;br&gt;&gt;&nbsp;The&nbsp;Kerberos&nbsp;auth&nbsp;helper&nbsp;bundled&nbsp;with&nbsp;Squid&nbsp;delivers&nbsp;&quot;group=&quot;&lt;br&gt;&gt;&nbsp;annotations&nbsp;back&nbsp;to&nbsp;Squid&nbsp;that&nbsp;can&nbsp;be&nbsp;quickly&nbsp;checked&nbsp;instead&nbsp;of&nbsp;using&lt;br&gt;&gt;&nbsp;extra&nbsp;helper&nbsp;lookups.&lt;br&gt;&lt;br&gt;you&nbsp;mean&nbsp;i&nbsp;can&nbsp;use&nbsp;this&nbsp;helper:&nbsp;ext_kerberos_ldap_group_acl,&nbsp;am&nbsp;I&nbsp;right?&nbsp;I&nbsp;will&nbsp;try&nbsp;out,&nbsp;since&nbsp;ChatGPT&nbsp;also&nbsp;mention&nbsp;auth&nbsp;faster&nbsp;compare&nbsp;to&nbsp;ext_wbinfo_group_acl.&lt;br&gt;&lt;br&gt;Question:&nbsp;Is&nbsp;this&nbsp;main&nbsp;problem?&lt;br&gt;&lt;br&gt;&gt;&nbsp;FYI,&nbsp;notice&nbsp;that&nbsp;Squid&nbsp;is&nbsp;automatically&nbsp;including&nbsp;all&nbsp;the&nbsp;config&nbsp;files&lt;br&gt;&gt;&nbsp;in&nbsp;the&nbsp;directory&nbsp;/etc/squid/conf.d/&lt;br&gt;&lt;br&gt;yes,&nbsp;it&nbsp;is&nbsp;just&nbsp;a&nbsp;easier&nbsp;manage&nbsp;for&nbsp;me.&lt;br&gt;&lt;br&gt;I&nbsp;have&nbsp;go&nbsp;through&nbsp;your&nbsp;replied&nbsp;several&nbsp;times&nbsp;and&nbsp;I&nbsp;try&nbsp;to&nbsp;digest.&nbsp;&lt;br&gt;My&nbsp;main&nbsp;problem&nbsp;here&nbsp;is&nbsp;that&nbsp;when&nbsp;user&nbsp;hit&nbsp;around&nbsp;200++,&nbsp;user&nbsp;will&nbsp;prompt&nbsp;out&nbsp;proxy&nbsp;login&nbsp;dialog&nbsp;box&nbsp;ask&nbsp;user&nbsp;to&nbsp;login.&lt;br&gt;&lt;br&gt;Is&nbsp;there&nbsp;anyway&nbsp;to&nbsp;find&nbsp;out&nbsp;issues?&nbsp;&lt;br&gt;&lt;br&gt;Thanks.&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;div&nbsp;id=&quot;yahoo_quoted_0161845343&quot;&nbsp;class=&quot;yahoo_quoted&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;style=&quot;font-family:'Helvetica&nbsp;Neue',&nbsp;Helvetica,&nbsp;Arial,&nbsp;sans-serif;font-size:13px;color:#26282a;&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;On&nbsp;Friday,&nbsp;June&nbsp;13,&nbsp;2025&nbsp;at&nbsp;06:09:49&nbsp;PM&nbsp;GMT+8,&nbsp;Amos&nbsp;Jeffries&nbsp;&lt;squid3@treenet.co.nz&gt;&nbsp;wrote:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;On&nbsp;13/06/25&nbsp;20:08,&nbsp;wong237ma&nbsp;wrote:&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;Hi,&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;I&nbsp;had&nbsp;successfully&nbsp;setup&nbsp;squid-openssl&nbsp;(6.10)&nbsp;in&nbsp;Ubuntu&nbsp;24.04.02&nbsp;LTS,&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;staging&nbsp;and&nbsp;production.&nbsp;I&nbsp;refer&nbsp;to&nbsp;this&nbsp;squid&nbsp;wiki:&nbsp;&lt;a&nbsp;shape=&quot;rect&quot;&nbsp;href=&quot;https://wiki.squid-&quot;&nbsp;target=&quot;_blank&quot;&gt;https://wiki.squid-&lt;/a&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;cache.org/ConfigExamples/Authenticate/WindowsActiveDirectory.&nbsp;I&nbsp;had&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;setup&nbsp;Squid-cache&nbsp;authenticate&nbsp;against&nbsp;Activi&nbsp;Directory&nbsp;via&nbsp;kerberos.&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;For&nbsp;proxy&nbsp;user&nbsp;access&nbsp;to&nbsp;staging,&nbsp;windows&nbsp;users&nbsp;(joined&nbsp;AD)&nbsp;no&nbsp;issue&nbsp;on&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;authentication.&nbsp;I&nbsp;test&nbsp;users&nbsp;authenticate&nbsp;seemlessly&nbsp;without&nbsp;any&nbsp;prompt.&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;Our&nbsp;office&nbsp;user&nbsp;around&nbsp;600.&nbsp;when&nbsp;I&nbsp;turn&nbsp;on&nbsp;production&nbsp;proxy.&nbsp;At&nbsp;morning&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;9am,&nbsp;when&nbsp;user&nbsp;number&nbsp;hit&nbsp;around&nbsp;100,&nbsp;no&nbsp;issue&nbsp;raise.&nbsp;when&nbsp;user&nbsp;number&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;hit&nbsp;around&nbsp;250++,&nbsp;windows&nbsp;users,&nbsp;the&nbsp;browser&nbsp;start&nbsp;to&nbsp;prompt&nbsp;user&nbsp;login,&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;FTR;&nbsp;the&nbsp;login&nbsp;prompt&nbsp;is&nbsp;not&nbsp;coming&nbsp;from&nbsp;Squid.&nbsp;The&nbsp;client&nbsp;Browser&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;decides&nbsp;where&nbsp;to&nbsp;get&nbsp;credentials&nbsp;from&nbsp;-&nbsp;the&nbsp;popup&nbsp;is&nbsp;one&nbsp;source,&nbsp;current&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;machine&nbsp;login&nbsp;another,&nbsp;there&nbsp;may&nbsp;be&nbsp;sources&nbsp;as&nbsp;well.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;Most&nbsp;often&nbsp;in&nbsp;situations&nbsp;like&nbsp;this,&nbsp;the&nbsp;ActiveDirectory&nbsp;or&nbsp;network&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;cannot&nbsp;cope&nbsp;with&nbsp;the&nbsp;number&nbsp;of&nbsp;concurrent&nbsp;credential&nbsp;verification&nbsp;Squid&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;is&nbsp;needing&nbsp;to&nbsp;perform.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;Alternatively&nbsp;it&nbsp;may&nbsp;just&nbsp;be&nbsp;the&nbsp;clients&nbsp;Browser(s)&nbsp;deciding&nbsp;that&nbsp;login&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;has&nbsp;failed&nbsp;and&nbsp;giving&nbsp;up&nbsp;before&nbsp;authentication&nbsp;completes&nbsp;-&nbsp;when&nbsp;the&nbsp;high&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;load&nbsp;makes&nbsp;verification&nbsp;slow.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;even&nbsp;domain&nbsp;credential&nbsp;are&nbsp;correct,&nbsp;but&nbsp;seem&nbsp;not&nbsp;work,&nbsp;after&nbsp;that&nbsp;user&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;cannot&nbsp;surf&nbsp;any&nbsp;website.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;There&nbsp;will&nbsp;be&nbsp;a&nbsp;timeouts&nbsp;controlling&nbsp;this.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;Since&nbsp;you&nbsp;are&nbsp;SSL-Bump'ing&nbsp;traffic&nbsp;-&nbsp;whatever&nbsp;result&nbsp;the&nbsp;initial&nbsp;CONNECT&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;request&nbsp;credentials&nbsp;were&nbsp;given&nbsp;when&nbsp;the&nbsp;TLS&nbsp;began&nbsp;will&nbsp;be&nbsp;used&nbsp;until&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;that&nbsp;TLS&nbsp;connection&nbsp;closes.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;Secondly&nbsp;the&nbsp;auth&nbsp;helper&nbsp;&quot;negative-ttl=900&quot;&nbsp;(from&nbsp;config&nbsp;below)&nbsp;value&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;will&nbsp;make&nbsp;Squid&nbsp;only&nbsp;check&nbsp;for&nbsp;different&nbsp;results&nbsp;on&nbsp;new&nbsp;connections&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;started&nbsp;900+&nbsp;seconds&nbsp;after&nbsp;the&nbsp;first&nbsp;one&nbsp;was&nbsp;rejected.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;How&nbsp;to&nbsp;troubleshoot&nbsp;this&nbsp;issue?&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;I&nbsp;use&nbsp;squidclient&nbsp;to&nbsp;monitor&nbsp;external_acl,&nbsp;negotiateauthenticator,&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;ntlmauthenticator,&nbsp;basicauthenticator,&nbsp;so&nbsp;far&nbsp;no&nbsp;requests&nbsp;timedout.&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;I&nbsp;also&nbsp;monitor&nbsp;cache.log&nbsp;with&nbsp;filtering&nbsp;&quot;FATAL:|WARNING:|&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;squidaio_queue_request:|SECURITY&nbsp;ALERT:&quot;&nbsp;didn't&nbsp;find&nbsp;any&nbsp;specifc&nbsp;error.&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;You&nbsp;are&nbsp;unlikely&nbsp;to&nbsp;find&nbsp;anything&nbsp;in&nbsp;the&nbsp;Squid&nbsp;logs.&nbsp;Unless&nbsp;one&nbsp;of&nbsp;the&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;auth&nbsp;helpers&nbsp;is&nbsp;having&nbsp;issues&nbsp;with&nbsp;its&nbsp;access&nbsp;to&nbsp;your&nbsp;ActiveDirectory&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;server.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;Can&nbsp;help&nbsp;to&nbsp;identify,&nbsp;wonder&nbsp;user&nbsp;still&nbsp;got&nbsp;domain&nbsp;login&nbsp;prompt&nbsp;from,&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;e.g.&nbsp;internet&nbsp;browser,&nbsp;like&nbsp;chrome,&nbsp;edge&nbsp;or&nbsp;firefox,&nbsp;outlook&nbsp;and&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;microsoft&nbsp;teams,&nbsp;etc.&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;Appciate&nbsp;any&nbsp;help.&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;Thanks.&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;attach&nbsp;my&nbsp;squid.conf:&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;=======================================&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;##&nbsp;negotiate&nbsp;kerberos&nbsp;and&nbsp;ntlm&nbsp;authentication&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;auth_param&nbsp;negotiate&nbsp;program&nbsp;/usr/lib/squid/negotiate_wrapper_auth&nbsp;-d&nbsp;--&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;ntlm&nbsp;/usr/bin/ntlm_auth&nbsp;--diagnostics&nbsp;--helper-protocol=squid-2.5-&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;ntlmssp&nbsp;--domain=MYCOMPANY&nbsp;--kerberos&nbsp;/usr/lib/squid/&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;negotiate_kerberos_auth&nbsp;-d&nbsp;-s&nbsp;GSS_C_NO_NAME&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;auth_param&nbsp;negotiate&nbsp;children&nbsp;3000&nbsp;startup=500&nbsp;idle=200&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;auth_param&nbsp;negotiate&nbsp;keep_alive&nbsp;on&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;authenticate_ttl&nbsp;15&nbsp;minutes&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;##&nbsp;pure&nbsp;ntlm&nbsp;authentication&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;auth_param&nbsp;ntlm&nbsp;program&nbsp;/usr/bin/ntlm_auth&nbsp;--diagnostics&nbsp;--helper-&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;protocol=squid-2.5-ntlmssp&nbsp;--domain=MYCOMPANY&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;auth_param&nbsp;ntlm&nbsp;children&nbsp;500&nbsp;startup=50&nbsp;idle=10&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;auth_param&nbsp;ntlm&nbsp;keep_alive&nbsp;off&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;Do&nbsp;you&nbsp;still&nbsp;actually&nbsp;**need**&nbsp;NTLM&nbsp;?&lt;br&nbsp;clear=&quot;none&quot;&gt;It&nbsp;has&nbsp;been&nbsp;deprecated&nbsp;for&nbsp;19&nbsp;years&nbsp;already,&nbsp;and&nbsp;Windows&nbsp;software&nbsp;has&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;progressively&nbsp;been&nbsp;removing&nbsp;the&nbsp;ability&nbsp;to&nbsp;use&nbsp;it.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;You&nbsp;may&nbsp;be&nbsp;able&nbsp;to&nbsp;get&nbsp;some&nbsp;metrics&nbsp;out&nbsp;of&nbsp;ActiveDirectory,&nbsp;or&nbsp;the&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;server&nbsp;it&nbsp;runs&nbsp;on&nbsp;to&nbsp;measure&nbsp;how&nbsp;many&nbsp;logins&nbsp;are&nbsp;NTLM&nbsp;vs&nbsp;Kerberos.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;###&nbsp;provide&nbsp;basic&nbsp;authentication&nbsp;via&nbsp;ldap&nbsp;for&nbsp;clients&nbsp;not&nbsp;authenticated&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;via&nbsp;kerberos/ntlm&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;auth_param&nbsp;basic&nbsp;program&nbsp;/usr/lib/squid/basic_ldap_auth&nbsp;-R&nbsp;-b&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&quot;dc=mycompany,dc=com&quot;&nbsp;-D&nbsp;&lt;a&nbsp;shape=&quot;rect&quot;&nbsp;ymailto=&quot;mailto:squidproxyuser@mycompany.com&quot;&nbsp;href=&quot;mailto:squidproxyuser@mycompany.com&quot;&gt;squidproxyuser@mycompany.com&lt;/a&gt;&nbsp;-W&nbsp;/etc/squid/&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;ldappass.txt&nbsp;-f&nbsp;sAMAccountName=%s&nbsp;-h&nbsp;mycompanydc.mycompany.com&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;auth_param&nbsp;basic&nbsp;children&nbsp;500&nbsp;startup=50&nbsp;idle=10&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;auth_param&nbsp;basic&nbsp;realm&nbsp;Internet&nbsp;Proxy&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;auth_param&nbsp;basic&nbsp;credentialsttl&nbsp;1&nbsp;minute&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;#external_acl_type&nbsp;hebadgroup&nbsp;%LOGIN&nbsp;/usr/lib/squid/ext_wbinfo_group_acl&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;external_acl_type&nbsp;hebadgroup&nbsp;children-max=1000&nbsp;&nbsp;children-startup=50&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;children-idle=10&nbsp;ttl=900&nbsp;negative_ttl=900&nbsp;%LOGIN&nbsp;/usr/lib/squid/&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;ext_wbinfo_group_acl&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;The&nbsp;Kerberos&nbsp;auth&nbsp;helper&nbsp;bundled&nbsp;with&nbsp;Squid&nbsp;delivers&nbsp;&quot;group=&quot;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;annotations&nbsp;back&nbsp;to&nbsp;Squid&nbsp;that&nbsp;can&nbsp;be&nbsp;quickly&nbsp;checked&nbsp;instead&nbsp;of&nbsp;using&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;extra&nbsp;helper&nbsp;lookups.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;Find&nbsp;the&nbsp;SSID&nbsp;in&nbsp;ActiveDirectory&nbsp;for&nbsp;the&nbsp;group&nbsp;(eg&nbsp;&quot;sq_whatsapp&quot;)&nbsp;and&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;replace&nbsp;your:&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&nbsp;&nbsp;acl&nbsp;grpwhatsapp&nbsp;external&nbsp;...&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;with&nbsp;this&nbsp;(where&nbsp;&quot;SSID&quot;&nbsp;is&nbsp;the&nbsp;string&nbsp;from&nbsp;ActiveDirectory):&lt;br&nbsp;clear=&quot;none&quot;&gt;&nbsp;&nbsp;&nbsp;acl&nbsp;grpwhatsapp&nbsp;note&nbsp;group&nbsp;SSID&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;same&nbsp;for&nbsp;the&nbsp;other&nbsp;groups&nbsp;this&nbsp;helper&nbsp;is&nbsp;used&nbsp;for.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;http_port&nbsp;3128&nbsp;ssl-bump&nbsp;generate-host-certificates=on&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;dynamic_cert_mem_cache_size=20MB&nbsp;tls-cert=/etc/squid/cert/squid.crt&nbsp;tls-&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;key=/etc/squid/cert/ca.key&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;sslcrtd_program&nbsp;/usr/lib/squid/security_file_certgen&nbsp;-s&nbsp;/var/lib/squid/&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;ssl_db&nbsp;-M&nbsp;20MB&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;sslcrtd_children&nbsp;50&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;localnet&nbsp;src&nbsp;0.0.0.1-0.255.255.255&nbsp;&nbsp;#&nbsp;RFC&nbsp;1122&nbsp;&quot;this&quot;&nbsp;network&nbsp;(LAN)&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;localnet&nbsp;src&nbsp;10.0.0.0/8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;RFC&nbsp;1918&nbsp;local&nbsp;private&nbsp;network&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;(LAN)&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;localnet&nbsp;src&nbsp;100.64.0.0/10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;RFC&nbsp;6598&nbsp;shared&nbsp;address&nbsp;space&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;(CGN)&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;localnet&nbsp;src&nbsp;169.254.0.0/16&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;RFC&nbsp;3927&nbsp;link-local&nbsp;(directly&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;plugged)&nbsp;machines&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;localnet&nbsp;src&nbsp;172.16.0.0/12&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;RFC&nbsp;1918&nbsp;local&nbsp;private&nbsp;network&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;(LAN)&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;localnet&nbsp;src&nbsp;192.168.0.0/16&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;RFC&nbsp;1918&nbsp;local&nbsp;private&nbsp;network&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;(LAN)&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;localnet&nbsp;src&nbsp;fc00::/7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;RFC&nbsp;4193&nbsp;local&nbsp;private&nbsp;network&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;range&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;localnet&nbsp;src&nbsp;fe80::/10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;RFC&nbsp;4291&nbsp;link-local&nbsp;(directly&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;plugged)&nbsp;machines&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;SSL_ports&nbsp;port&nbsp;443&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;Safe_ports&nbsp;port&nbsp;80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;http&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;Safe_ports&nbsp;port&nbsp;21&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;ftp&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;Safe_ports&nbsp;port&nbsp;443&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;https&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;Safe_ports&nbsp;port&nbsp;70&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;gopher&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;Safe_ports&nbsp;port&nbsp;210&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;wais&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;Safe_ports&nbsp;port&nbsp;1025-65535&nbsp;&nbsp;#&nbsp;unregistered&nbsp;ports&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;Safe_ports&nbsp;port&nbsp;280&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;http-mgmt&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;Safe_ports&nbsp;port&nbsp;488&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;gss-http&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;Safe_ports&nbsp;port&nbsp;591&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;filemaker&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;Safe_ports&nbsp;port&nbsp;777&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;multiling&nbsp;http&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;direct_access&nbsp;dstdomain&nbsp;openshiftapps.com&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;cache&nbsp;deny&nbsp;direct_access&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;Hmm.&nbsp;calling&nbsp;that&nbsp;ACL&nbsp;&quot;direct_access&quot;&nbsp;implies&nbsp;that&nbsp;whoever&nbsp;designed&nbsp;it&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;thinks&nbsp;the&nbsp;&quot;cache&quot;&nbsp;directive&nbsp;has&nbsp;something&nbsp;to&nbsp;do&nbsp;with&nbsp;accessing&nbsp;things.&lt;br&nbsp;clear=&quot;none&quot;&gt;It&nbsp;does&nbsp;not.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;The&nbsp;above&nbsp;two&nbsp;config&nbsp;lines&nbsp;prevent&nbsp;Squid&nbsp;from&nbsp;_storing_&nbsp;any&nbsp;traffic&nbsp;when&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;the&nbsp;domain&nbsp;is&nbsp;exactly&nbsp;the&nbsp;string&nbsp;&quot;openshiftapps.com&quot;&nbsp;(emphasis&nbsp;on&nbsp;the&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;exact&nbsp;part,&nbsp;&quot;www.openshiftapps.com&quot;&nbsp;and&nbsp;similar&nbsp;will&nbsp;**not**&nbsp;match&nbsp;that&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;ACL&nbsp;definition).&nbsp;So&nbsp;nothing&nbsp;from&nbsp;there&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;produce&nbsp;HIT&nbsp;or&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;REFRESH&nbsp;type&nbsp;responses.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;urlwhatsapp&nbsp;dstdomain&nbsp;.whatsapp.com&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;grpwhatsapp&nbsp;external&nbsp;adgroup&nbsp;sq_whatsapp&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;grpgithub&nbsp;external&nbsp;adgroup&nbsp;SSLVPN-GitHub-CoPilot&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;#&nbsp;Enable&nbsp;Proxy&nbsp;Authentication&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;aduser&nbsp;proxy_auth&nbsp;REQUIRED&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;#&nbsp;Domains&nbsp;for&nbsp;SSL&nbsp;Bump&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;url_sslbump&nbsp;dstdomain&nbsp;.github.com&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;#&nbsp;Define&nbsp;SSL&nbsp;Bump&nbsp;steps&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;step1&nbsp;at_step&nbsp;SslBump1&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;step2&nbsp;at_step&nbsp;SslBump2&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;acl&nbsp;step3&nbsp;at_step&nbsp;SslBump3&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;#&nbsp;SSL&nbsp;Bump&nbsp;rules&nbsp;for&nbsp;specific&nbsp;traffic&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;ssl_bump&nbsp;peek&nbsp;step1&nbsp;all&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;ssl_bump&nbsp;bump&nbsp;step2&nbsp;url_sslbump&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;ssl_bump&nbsp;splice&nbsp;all&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Splice&nbsp;(do&nbsp;not&nbsp;bump)&nbsp;all&nbsp;other&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;traffic&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;sslproxy_cert_error&nbsp;allow&nbsp;url_sslbump&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;#http_access&nbsp;deny&nbsp;!Safe_ports&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;#http_access&nbsp;deny&nbsp;CONNECT&nbsp;!SSL_ports&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;http_access&nbsp;allow&nbsp;localhost&nbsp;manager&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;http_access&nbsp;deny&nbsp;manager&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;http_access&nbsp;allow&nbsp;localhost&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;http_access&nbsp;deny&nbsp;to_localhost&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;http_access&nbsp;deny&nbsp;to_linklocal&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;include&nbsp;/etc/squid/conf.d/*.conf&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;#&nbsp;Access&nbsp;control&nbsp;for&nbsp;GitHub&nbsp;Copilot&nbsp;Group&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;include&nbsp;/etc/squid/github.conf&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;FYI,&nbsp;notice&nbsp;that&nbsp;Squid&nbsp;is&nbsp;automatically&nbsp;including&nbsp;all&nbsp;the&nbsp;config&nbsp;files&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;in&nbsp;the&nbsp;directory&nbsp;/etc/squid/conf.d/&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;You&nbsp;should&nbsp;only&nbsp;need&nbsp;to&nbsp;drop&nbsp;the&nbsp;file&nbsp;github.conf&nbsp;into&nbsp;that&nbsp;directory&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;and&nbsp;not&nbsp;include&nbsp;it&nbsp;here.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;http_access&nbsp;allow&nbsp;urlwhatsapp&nbsp;grpwhatsapp&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;http_access&nbsp;deny&nbsp;urlwhatsapp&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;&gt;&nbsp;http_access&nbsp;allow&nbsp;aduser&lt;br&nbsp;clear=&quot;none&quot;&gt;&nbsp;&gt;&nbsp;http_access&nbsp;deny&nbsp;all&lt;br&nbsp;clear=&quot;none&quot;&gt;&nbsp;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;Login&nbsp;should&nbsp;happen&nbsp;before&nbsp;any&nbsp;of&nbsp;the&nbsp;ACLs&nbsp;that&nbsp;check&nbsp;group&nbsp;memberships&nbsp;&lt;br&nbsp;clear=&quot;none&quot;&gt;or&nbsp;other&nbsp;auth&nbsp;related&nbsp;things.&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;When&nbsp;done&nbsp;that&nbsp;way&nbsp;it&nbsp;should&nbsp;look&nbsp;something&nbsp;like&nbsp;this:&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&nbsp;&nbsp;&nbsp;#&nbsp;require&nbsp;credentials&nbsp;to&nbsp;both&nbsp;exist&nbsp;and&nbsp;be&nbsp;valid&lt;br&nbsp;clear=&quot;none&quot;&gt;&nbsp;&nbsp;&nbsp;acl&nbsp;login&nbsp;proxy_auth&nbsp;REQUIRED&lt;br&nbsp;clear=&quot;none&quot;&gt;&nbsp;&nbsp;&nbsp;http_access&nbsp;deny&nbsp;!login&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&nbsp;&nbsp;&nbsp;#&nbsp;ACLs&nbsp;that&nbsp;use&nbsp;login&nbsp;credentials&nbsp;or&nbsp;login&nbsp;related&nbsp;details&lt;br&nbsp;clear=&quot;none&quot;&gt;&nbsp;&nbsp;&nbsp;http_access&nbsp;allow&nbsp;group_A&nbsp;somewhere&lt;br&nbsp;clear=&quot;none&quot;&gt;&nbsp;&nbsp;&nbsp;http_access&nbsp;deny&nbsp;group_B&lt;br&nbsp;clear=&quot;none&quot;&gt;&nbsp;&nbsp;&nbsp;...&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&nbsp;&nbsp;&nbsp;#&nbsp;maybe&nbsp;allow&nbsp;any&nbsp;LAN&nbsp;clients&nbsp;not&nbsp;denied&nbsp;above.&lt;br&nbsp;clear=&quot;none&quot;&gt;&nbsp;&nbsp;&nbsp;http_access&nbsp;allow&nbsp;localnet&lt;div&nbsp;class=&quot;yqt5129434926&quot;&nbsp;id=&quot;yqtfd32527&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&nbsp;&nbsp;&nbsp;http_access&nbsp;deny&nbsp;all&lt;/div&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;HTH&lt;br&nbsp;clear=&quot;none&quot;&gt;Amos&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;_______________________________________________&lt;br&nbsp;clear=&quot;none&quot;&gt;squid-users&nbsp;mailing&nbsp;list&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;a&nbsp;shape=&quot;rect&quot;&nbsp;ymailto=&quot;mailto:squid-users@lists.squid-cache.org&quot;&nbsp;href=&quot;mailto:squid-users@lists.squid-cache.org&quot;&gt;squid-users@lists.squid-cache.org&lt;/a&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;a&nbsp;shape=&quot;rect&quot;&nbsp;href=&quot;https://lists.squid-cache.org/listinfo/squid-users&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.squid-cache.org/listinfo/squid-users&lt;/a&gt;&lt;div&nbsp;class=&quot;yqt5129434926&quot;&nbsp;id=&quot;yqtfd20906&quot;&gt;&lt;br&nbsp;clear=&quot;none&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
