<tt>
&lt;HTML&nbsp;xmlns:o&gt;&lt;HEAD&gt;<br>
&lt;META&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&nbsp;http-equiv=Content-Type&gt;<br>
&lt;META&nbsp;name=Generator&nbsp;content=&quot;Microsoft&nbsp;Word&nbsp;15&nbsp;(filtered&nbsp;medium)&quot;&gt;<br>
&lt;STYLE&gt;v\:*&nbsp;{behavior:url(#default#VML);}<br>
o\:*&nbsp;{behavior:url(#default#VML);}<br>
w\:*&nbsp;{behavior:url(#default#VML);}<br>
.shape&nbsp;{behavior:url(#default#VML);}<br>
&lt;/STYLE&gt;<br>
<br>
&lt;STYLE&gt;@font-face<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{font-family:&quot;Cambria&nbsp;Math&quot;;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;panose-1:2&nbsp;4&nbsp;5&nbsp;3&nbsp;5&nbsp;4&nbsp;6&nbsp;3&nbsp;2&nbsp;4;}@font-face<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{font-family:Aptos;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;panose-1:2&nbsp;11&nbsp;0&nbsp;4&nbsp;2&nbsp;2&nbsp;2&nbsp;2&nbsp;2&nbsp;4;}p.MsoNormal,&nbsp;li.MsoNormal,&nbsp;div.MsoNormal<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{margin:0cm;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-size:11.0pt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-family:&quot;Aptos&quot;,sans-serif;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mso-ligatures:standardcontextual;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mso-fareast-language:EN-US;}a:link,&nbsp;span.MsoHyperlink<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{mso-style-priority:99;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color:#467886;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text-decoration:underline;}span.EmailStyle17<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{mso-style-type:personal-compose;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-family:&quot;Aptos&quot;,sans-serif;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color:windowtext;}.MsoChpDefault<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{mso-style-type:export-only;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-size:11.0pt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mso-fareast-language:EN-US;}div.WordSection1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{page:WordSection1;}&lt;/STYLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&nbsp;lang=EN-GB&nbsp;style=&quot;WORD-WRAP:&nbsp;break-word&quot;&nbsp;dir=ltr&nbsp;vLink=#96607d&nbsp;<br>
link=#467886&gt;<br>
&lt;DIV&nbsp;dir=ltr&gt;<br>
&lt;DIV&nbsp;style=&quot;FONT-SIZE:&nbsp;10pt;&nbsp;FONT-FAMILY:&nbsp;'Arial';&nbsp;COLOR:&nbsp;#000000&quot;&gt;<br>
&lt;DIV&gt;Hi&nbsp;Mark,&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;Be&nbsp;aware&nbsp;that&nbsp;Browsers&nbsp;may&nbsp;behave&nbsp;differently&nbsp;when&nbsp;using&nbsp;<br>
CNAMES.&nbsp;&nbsp;&nbsp;Some&nbsp;Browser&nbsp;uses&nbsp;the&nbsp;HTTP/&lt;CNAME&gt;&nbsp;ticket&nbsp;and&nbsp;some&nbsp;use&nbsp;<br>
HTTP/&lt;NAME&nbsp;of&nbsp;reverse&nbsp;lookup&nbsp;of&nbsp;the&nbsp;CNAME&nbsp;IP&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;e.g.&nbsp;if&nbsp;proxy.example.com&nbsp;is&nbsp;a&nbsp;cname&nbsp;for&nbsp;server1.example.com&nbsp;<br>
on&nbsp;192.168.1.2&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;You&nbsp;may&nbsp;need&nbsp;tickets&nbsp;for&nbsp;both&nbsp;i.e.&nbsp;HTTP/proxy.example.com&nbsp;AND&nbsp;<br>
HTTP/server1.example.com&nbsp;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&nbsp;&nbsp;If&nbsp;you&nbsp;use&nbsp;GSLB&nbsp;or&nbsp;other&nbsp;load&nbsp;balancing&nbsp;techniques&nbsp;make&nbsp;sure&nbsp;<br>
all&nbsp;server&nbsp;keys&nbsp;plus&nbsp;the&nbsp;GSLB&nbsp;and&nbsp;CNAME&nbsp;keys&nbsp;are&nbsp;included&nbsp;in&nbsp;the&nbsp;keytab&nbsp;on&nbsp;all&nbsp;<br>
servers&nbsp;supporting&nbsp;the&nbsp;GSLB&nbsp;or&nbsp;CNAME..&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;Markus&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;<br>
style=&quot;BORDER-TOP-COLOR:&nbsp;#000000;&nbsp;BORDER-BOTTOM-COLOR:&nbsp;#000000;&nbsp;PADDING-LEFT:&nbsp;5px;&nbsp;MARGIN-LEFT:&nbsp;5px;&nbsp;BORDER-LEFT:&nbsp;#000000&nbsp;4px&nbsp;solid;&nbsp;BORDER-RIGHT-COLOR:&nbsp;#000000&quot;&gt;<br>
&lt;DIV&nbsp;<br>
style='FONT-SIZE:&nbsp;small;&nbsp;TEXT-DECORATION:&nbsp;none;&nbsp;FONT-FAMILY:&nbsp;&quot;Calibri&quot;;&nbsp;FONT-WEIGHT:&nbsp;normal;&nbsp;COLOR:&nbsp;#000000;&nbsp;FONT-STYLE:&nbsp;normal;&nbsp;DISPLAY:&nbsp;inline'&gt;<br>
&lt;DIV&gt;&quot;Mark&nbsp;Cairney&quot;&nbsp;&lt;Mark.Cairney@ed.ac.uk&gt;&nbsp;wrote&nbsp;in&nbsp;message&nbsp;<br>
news:6a32534a-d605-474f-9cca-79d3735385b4@ed.ac.uk...&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;<br>
style=&quot;BORDER-TOP-COLOR:&nbsp;#000000;&nbsp;BORDER-BOTTOM-COLOR:&nbsp;#000000;&nbsp;PADDING-LEFT:&nbsp;5px;&nbsp;MARGIN-LEFT:&nbsp;5px;&nbsp;BORDER-LEFT:&nbsp;#000000&nbsp;4px&nbsp;solid;&nbsp;BORDER-RIGHT-COLOR:&nbsp;#000000&quot;&gt;<br>
&lt;DIV&nbsp;<br>
style='FONT-SIZE:&nbsp;small;&nbsp;TEXT-DECORATION:&nbsp;none;&nbsp;FONT-FAMILY:&nbsp;&quot;Calibri&quot;;&nbsp;FONT-WEIGHT:&nbsp;normal;&nbsp;COLOR:&nbsp;#000000;&nbsp;FONT-STYLE:&nbsp;normal;&nbsp;DISPLAY:&nbsp;inline'&gt;<br>
&lt;DIV&nbsp;class=WordSection1&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Hi,&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;I’ve&nbsp;been&nbsp;trying&nbsp;to&nbsp;get&nbsp;Kerberos&nbsp;Authentication&nbsp;against&nbsp;AD&nbsp;<br>
working&nbsp;but&nbsp;have&nbsp;been&nbsp;seeing&nbsp;inconsistent&nbsp;results/behaviour&nbsp;across&nbsp;multiple&nbsp;Oses&nbsp;<br>
and&nbsp;I’m&nbsp;not&nbsp;sure&nbsp;if&nbsp;the&nbsp;issue&nbsp;lies&nbsp;with&nbsp;the&nbsp;DNS&nbsp;configuration,&nbsp;Kerberos&nbsp;itself&nbsp;<br>
or&nbsp;with&nbsp;the&nbsp;Squid&nbsp;config:&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&lt;/o:p&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;THE&nbsp;DNS&nbsp;setup&nbsp;is&nbsp;as&nbsp;follows:&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&lt;/o:p&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;test.squid.cluster.&nbsp;<br>
3600&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
CNAME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
test-squid-cluster.dyn-zone.&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;test-squid-cluster.dyn-zone.&nbsp;60&nbsp;IN&nbsp;A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
1.2.3.4&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&lt;/o:p&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Where&nbsp;1.2.3.4&nbsp;is&nbsp;the&nbsp;IP&nbsp;of&nbsp;one&nbsp;of&nbsp;the&nbsp;servers&nbsp;in&nbsp;the&nbsp;cluster.&nbsp;<br>
The&nbsp;intention&nbsp;is&nbsp;to&nbsp;have&nbsp;multiple&nbsp;Squid&nbsp;servers&nbsp;behind&nbsp;a&nbsp;single&nbsp;DNS&nbsp;name&nbsp;for&nbsp;<br>
high-availability.&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&lt;/o:p&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;This&nbsp;is&nbsp;what&nbsp;I’m&nbsp;seeing&nbsp;in&nbsp;the&nbsp;cache&nbsp;log&nbsp;with&nbsp;my&nbsp;current&nbsp;<br>
setup:&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&lt;/o:p&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Windows:&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;negotiate_kerberos_auth.cc(182):&nbsp;pid=668789&nbsp;:2025/06/16&nbsp;<br>
16:03:01|&nbsp;negotiate_kerb&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;eros_auth:&nbsp;ERROR:&nbsp;gss_accept_sec_context()&nbsp;failed:&nbsp;<br>
Unspecified&nbsp;GSS&nbsp;failure.&nbsp;&nbsp;Min&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;or&nbsp;code&nbsp;may&nbsp;provide&nbsp;more&nbsp;information.&nbsp;Cannot&nbsp;find&nbsp;key&nbsp;for&nbsp;<br>
HTTP/&nbsp;test-squid-cluster.dyn-zone@REALM&nbsp;kvno&nbsp;2&nbsp;in&nbsp;keytab&nbsp;(request&nbsp;ticket&nbsp;server&nbsp;<br>
HTTP/test.squid.cluster@REALM&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&lt;/o:p&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Rocky&nbsp;Linux:&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;curl&nbsp;-ik&nbsp;-vvv&nbsp;-L&nbsp;--proxy-negotiate&nbsp;-U&nbsp;:&nbsp;-b&nbsp;~/cookiejar.txt&nbsp;-c&nbsp;<br>
~/cookiejar.txt&nbsp;-x&nbsp;&lt;A&nbsp;class=moz-txt-link-rfc2396E&nbsp;href=&quot;test.squid.cluster:3128&quot;&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;&quot;test.squid.cluster:3128&quot;&lt;/A&gt;&nbsp;&lt;A&nbsp;<br>
class=moz-txt-link-freetext&nbsp;href=&quot;https://www.bbc.co.uk&quot;&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;https://www.bbc.co.uk&lt;/A&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&lt;/o:p&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;negotiate_kerberos_auth.cc(182):&nbsp;pid=668789&nbsp;:2025/06/17&nbsp;<br>
08:51:52|&nbsp;negotiate_kerb&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;eros_auth:&nbsp;ERROR:&nbsp;gss_accept_sec_context()&nbsp;failed:&nbsp;<br>
Unspecified&nbsp;GSS&nbsp;failure.&nbsp;&nbsp;Min&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;2025/06/17&nbsp;08:51:52|&nbsp;negotiate_kerberos_auth:&nbsp;INFO:&nbsp;User&nbsp;not&nbsp;<br>
authenticated&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;2025/06/17&nbsp;08:51:52.964&nbsp;kid1|&nbsp;ERROR:&nbsp;Negotiate&nbsp;Authentication&nbsp;<br>
validating&nbsp;user.&nbsp;R&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;esult:&nbsp;{result=BH,&nbsp;notes={message:&nbsp;gss_accept_sec_context()&nbsp;<br>
failed:&nbsp;Unspecified&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;er&nbsp;&lt;A&nbsp;moz-do-not-send=&quot;true&quot;&gt;HTTP/server1@&lt;/A&gt;REALM);&nbsp;<br>
}}&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&lt;/o:p&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;klist&nbsp;-e&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Ticket&nbsp;cache:&nbsp;&lt;A&nbsp;class=moz-txt-link-freetext&nbsp;<br>
href=&quot;file:///tmp/krb5cc_138460_vF4BWcMsZu&quot;&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;FILE:/tmp/krb5cc_138460_vF4BWcMsZu&lt;/A&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Default&nbsp;principal:&nbsp;&lt;A&nbsp;class=moz-txt-link-freetext&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;ext6033@ED.AC.UK&lt;/A&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;17/06/25&nbsp;08:51:44&nbsp;&nbsp;17/06/25&nbsp;18:51:24&nbsp;&nbsp;<br>
krbtgt/REALM@REALM&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Etype&nbsp;(skey,&nbsp;tkt):&nbsp;<br>
aes256-cts-hmac-sha1-96,&nbsp;aes256-cts-hmac-sha1-96&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;17/06/25&nbsp;08:51:52&nbsp;&nbsp;17/06/25&nbsp;18:51:24&nbsp;&nbsp;<br>
HTTP/server@&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Etype&nbsp;(skey,&nbsp;tkt):&nbsp;<br>
aes256-cts-hmac-sha1-96,&nbsp;aes256-cts-hmac-sha1-96&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ticket&nbsp;server:&nbsp;<br>
server/REALM@REALM&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&lt;/o:p&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;With&nbsp;the&nbsp;same&nbsp;behaviour&nbsp;if&nbsp;I&nbsp;use&nbsp;the&nbsp;Dynamic&nbsp;Zone&nbsp;record&nbsp;in&nbsp;<br>
the&nbsp;curl&nbsp;command&nbsp;i.e.&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;curl&nbsp;-ik&nbsp;-vvv&nbsp;-L&nbsp;--proxy-negotiate&nbsp;-U&nbsp;:&nbsp;-b&nbsp;~/cookiejar.txt&nbsp;-c&nbsp;<br>
~/cookiejar.txt&nbsp;-x&nbsp;&lt;A&nbsp;class=moz-txt-link-rfc2396E&nbsp;<br>
href=&quot;test-squid-cluster.dyn-zone:3128&quot;&nbsp;moz-do-not-send=&quot;true&quot;&gt;&quot;&nbsp;<br>
test-squid-cluster.dyn-zone:3128&quot;&lt;/A&gt;&nbsp;&lt;A&nbsp;class=moz-txt-link-freetext&nbsp;<br>
href=&quot;https://www.bbc.co.uk&quot;&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;https://www.bbc.co.uk&lt;/A&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&lt;/o:p&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;Ubuntu&nbsp;24.04&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;curl&nbsp;-ik&nbsp;-vvv&nbsp;-L&nbsp;--proxy-negotiate&nbsp;-U&nbsp;:&nbsp;-b&nbsp;<br>
~/cookiejar.txt&nbsp;-c&nbsp;~/cookiejar.txt&nbsp;-x&nbsp;&lt;A&nbsp;class=moz-txt-link-rfc2396E&nbsp;<br>
href=&quot;test.squid.cluster:3128&quot;&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;&quot;test.squid.cluster:3128&quot;&lt;/A&gt;&nbsp;&lt;A&nbsp;<br>
class=moz-txt-link-rfc2396E&nbsp;href=&quot;https://www.bbc.co.uk&quot;&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;&quot;https://www.bbc.co.uk&quot;&lt;/A&gt;&nbsp;works&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&lt;/o:p&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;negotiate_kerberos_auth.cc(815):&nbsp;pid=668789&nbsp;:2025/06/18&nbsp;<br>
09:11:17|&nbsp;negotiate_kerberos_auth:&nbsp;DEBUG:&nbsp;OK&nbsp;<br>
token=oYG3MIG0oAMKAQChCwYJKoZIhvcSAQICooGfBIGcYIGZBgkqhkiG9xIBAgICAG+BiTCBhqADAgEFoQMCAQ+iejB4oAMCARKicQRvJ1BxA5rnZjKbfBVE0YqUlnYx7oLguj09HLH4SJRumUjWWXh99B/4X72vpFqCXeOKmvzSDlWG0Io1ZjQxNOxqni4sFx8exojIzg4aIWKAcYB21OHr9m0T9dfymDVoV61Cofyq38fUaN5Loen9YX0h&nbsp;<br>
user=account&lt;BR&gt;2025/06/18&nbsp;09:11:17|&nbsp;negotiate_kerberos_auth:&nbsp;INFO:&nbsp;User&nbsp;account&nbsp;<br>
authenticated&lt;BR&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&lt;/o:p&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;klist&nbsp;-e&lt;BR&gt;Ticket&nbsp;cache:&nbsp;&lt;A&nbsp;class=moz-txt-link-freetext&nbsp;<br>
href=&quot;file:///tmp/krb5cc_1001_7KsHEg&quot;&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;FILE:/tmp/krb5cc_1001_7KsHEg&lt;/A&gt;&lt;BR&gt;Default&nbsp;principal:&nbsp;<br>
account@REALM&lt;BR&gt;&lt;BR&gt;Valid&nbsp;starting&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
Expires&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
Service&nbsp;principal&lt;BR&gt;06/18/25&nbsp;09:10:09&nbsp;&nbsp;06/18/25&nbsp;19:10:09&nbsp;&nbsp;<br>
krbtgt/REALM@REALM&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;renew&nbsp;until&nbsp;06/19/25&nbsp;09:09:36,&nbsp;Etype&nbsp;<br>
(skey,&nbsp;tkt):&nbsp;aes256-cts-hmac-sha1-96,&nbsp;aes256-cts-hmac-sha1-96&nbsp;&lt;BR&gt;06/18/25&nbsp;<br>
09:11:17&nbsp;&nbsp;06/18/25&nbsp;19:10:09&nbsp;&nbsp;<br>
HTTP/test-squid-cluster.dyn-zone@&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;renew&nbsp;until&nbsp;06/19/25&nbsp;<br>
09:09:36,&nbsp;Etype&nbsp;(skey,&nbsp;tkt):&nbsp;aes256-cts-hmac-sha1-96,&nbsp;aes256-cts-hmac-sha1-96&nbsp;<br>
&lt;BR&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;BR&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;curl&nbsp;-ik&nbsp;-vvv&nbsp;-L&nbsp;--proxy-negotiate&nbsp;-U&nbsp;:&nbsp;-b&nbsp;<br>
~/cookiejar.txt&nbsp;-c&nbsp;~/cookiejar.txt&nbsp;-x&nbsp;&lt;A&nbsp;class=moz-txt-link-rfc2396E&nbsp;<br>
href=&quot;test-squid-cluster.dyn-zone:3128&quot;&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;&quot;test-squid-cluster.dyn-zone:3128&quot;&lt;/A&gt;&nbsp;&lt;A&nbsp;<br>
class=moz-txt-link-rfc2396E&nbsp;href=&quot;https://www.bbc.co.uk&quot;&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;&quot;https://www.bbc.co.uk&quot;&lt;/A&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&lt;/o:p&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;Works&nbsp;as&nbsp;well&lt;BR&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;klist&nbsp;-e&lt;BR&gt;Ticket&nbsp;cache:&nbsp;&lt;A&nbsp;class=moz-txt-link-freetext&nbsp;<br>
href=&quot;file:///tmp/krb5cc_1001_7KsHEg&quot;&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;FILE:/tmp/krb5cc_1001_7KsHEg&lt;/A&gt;&lt;BR&gt;Default&nbsp;principal:&nbsp;<br>
account@REALM&lt;BR&gt;&lt;BR&gt;Valid&nbsp;starting&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
Expires&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
Service&nbsp;principal&lt;BR&gt;06/18/25&nbsp;09:17:11&nbsp;&nbsp;06/18/25&nbsp;19:17:11&nbsp;&nbsp;<br>
krbtgt/REAM@REALM&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;renew&nbsp;until&nbsp;06/19/25&nbsp;09:16:55,&nbsp;Etype&nbsp;<br>
(skey,&nbsp;tkt):&nbsp;aes256-cts-hmac-sha1-96,&nbsp;aes256-cts-hmac-sha1-96&nbsp;&lt;BR&gt;06/18/25&nbsp;<br>
09:17:38&nbsp;&nbsp;06/18/25&nbsp;19:17:11&nbsp;&nbsp;<br>
HTTP/test-squid-cluster.dyn-zone@&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;renew&nbsp;until&nbsp;06/19/25&nbsp;<br>
09:16:55,&nbsp;Etype&nbsp;(skey,&nbsp;tkt):&nbsp;aes256-cts-hmac-sha1-96,&nbsp;aes256-cts-hmac-sha1-96&nbsp;<br>
&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;Ticket&nbsp;server:&nbsp;&lt;A&nbsp;<br>
class=&quot;moz-txt-link-abbreviated&nbsp;moz-txt-link-freetext&quot;&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;HTTP/test-exams-cache.www-dyn.ed.ac.uk@ED.AC.UK&lt;/A&gt;&lt;BR&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&lt;/o:p&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Mac&nbsp;(Sequoia&nbsp;15.5)&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;curl&nbsp;-ik&nbsp;-vvv&nbsp;-L&nbsp;--proxy-negotiate&nbsp;-U&nbsp;:&nbsp;-b&nbsp;~/cookiejar.txt&nbsp;-c&nbsp;<br>
~/cookiejar.txt&nbsp;-x&nbsp;&lt;A&nbsp;class=moz-txt-link-rfc2396E&nbsp;<br>
href=&quot;test.squid.cluster.dyn-zone:3128&quot;&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;&quot;test.squid.cluster.dyn-zone:3128&quot;&lt;/A&gt;&nbsp;&lt;A&nbsp;<br>
class=moz-txt-link-freetext&nbsp;href=&quot;https://www.bbc.co.uk&quot;&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;https://www.bbc.co.uk&lt;/A&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&lt;/o:p&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;2025/06/17&nbsp;09:32:26|&nbsp;negotiate_kerberos_auth:&nbsp;INFO:&nbsp;User&nbsp;not&nbsp;<br>
authenticated&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;2025/06/17&nbsp;09:32:26.600&nbsp;kid1|&nbsp;ERROR:&nbsp;Negotiate&nbsp;Authentication&nbsp;<br>
validating&nbsp;user.&nbsp;R&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;esult:&nbsp;{result=BH,&nbsp;notes={message:&nbsp;gss_accept_sec_context()&nbsp;<br>
failed:&nbsp;Unspecified&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;GSS&nbsp;failure.&nbsp;&nbsp;Minor&nbsp;code&nbsp;may&nbsp;provide&nbsp;more&nbsp;information.&nbsp;<br>
Cannot&nbsp;find&nbsp;key&nbsp;for&nbsp;HTTP/&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;test-squid-cluster.dyn-zone@REALM&nbsp;kvno&nbsp;2&nbsp;in&nbsp;keytab&nbsp;(request&nbsp;<br>
ticket&nbsp;serv&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;er&nbsp;&lt;A&nbsp;class=moz-txt-link-freetext&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;HTTP/test.squid.cluster@&lt;/A&gt;REALM);&nbsp;}}&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&lt;/o:p&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;klist&nbsp;-v&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Server:&nbsp;&lt;A&nbsp;class=moz-txt-link-freetext&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;HTTP/test.squid.cluster@&lt;/A&gt;REALM&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Client:&nbsp;account@REALM&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Ticket&nbsp;etype:&nbsp;aes256-cts-hmac-sha1-96,&nbsp;kvno&nbsp;2&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Ticket&nbsp;length:&nbsp;1690&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Auth&nbsp;time:&nbsp;&nbsp;Jun&nbsp;17&nbsp;09:32:17&nbsp;2025&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Start&nbsp;time:&nbsp;Jun&nbsp;17&nbsp;09:32:26&nbsp;2025&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;End&nbsp;time:&nbsp;&nbsp;&nbsp;Jun&nbsp;17&nbsp;19:31:56&nbsp;2025&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Ticket&nbsp;flags:&nbsp;enc-pa-rep,&nbsp;pre-authent,&nbsp;<br>
forwardable&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Addresses:&nbsp;addressless&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&lt;/o:p&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;curl&nbsp;-ik&nbsp;-vvv&nbsp;-L&nbsp;--proxy-negotiate&nbsp;-U&nbsp;:&nbsp;-b&nbsp;~/cookiejar.txt&nbsp;-c&nbsp;<br>
~/cookiejar.txt&nbsp;-x&nbsp;&lt;A&nbsp;class=moz-txt-link-rfc2396E&nbsp;<br>
href=&quot;test-squid-cluster.dyn.zone:3128&quot;&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;&quot;test-squid-cluster.dyn.zone:3128&quot;&lt;/A&gt;&nbsp;&lt;A&nbsp;<br>
class=moz-txt-link-freetext&nbsp;href=&quot;https://www.bbc.co.uk&quot;&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;https://www.bbc.co.uk&lt;/A&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&lt;/o:p&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Successful:&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;2025/06/17&nbsp;09:36:38|&nbsp;negotiate_kerberos_auth:&nbsp;INFO:&nbsp;User&nbsp;<br>
account&nbsp;authenticated&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;2025/06/17&nbsp;09:36:38.165&nbsp;kid1|&nbsp;82,2|&nbsp;external_acl.cc(700)&nbsp;<br>
aclMatchExternal:&nbsp;ldap_group&nbsp;=&nbsp;ALLOWED&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&lt;/o:p&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Klist&nbsp;-v&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Server:&nbsp;&lt;A&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;krbtgt/REALM@&lt;/A&gt;REALM&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Client:&nbsp;account@REALM&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Ticket&nbsp;etype:&nbsp;aes256-cts-hmac-sha1-96,&nbsp;kvno&nbsp;11&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Ticket&nbsp;length:&nbsp;1683&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Auth&nbsp;time:&nbsp;&nbsp;Jun&nbsp;17&nbsp;09:36:31&nbsp;2025&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;End&nbsp;time:&nbsp;&nbsp;&nbsp;Jun&nbsp;17&nbsp;19:36:23&nbsp;2025&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Ticket&nbsp;flags:&nbsp;enc-pa-rep,&nbsp;pre-authent,&nbsp;initial,&nbsp;<br>
forwardable&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Addresses:&nbsp;addressless&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&lt;/o:p&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Server:&nbsp;&lt;A&nbsp;class=moz-txt-link-freetext&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;HTTP/test-squid-cluster.dyn.zone@&lt;/A&gt;REALM&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Client:&nbsp;&lt;A&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;account@&lt;/A&gt;REALM&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Ticket&nbsp;etype:&nbsp;aes256-cts-hmac-sha1-96,&nbsp;kvno&nbsp;1&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Ticket&nbsp;length:&nbsp;1698&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Auth&nbsp;time:&nbsp;&nbsp;Jun&nbsp;17&nbsp;09:36:31&nbsp;2025&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Start&nbsp;time:&nbsp;Jun&nbsp;17&nbsp;09:36:38&nbsp;2025&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;End&nbsp;time:&nbsp;&nbsp;&nbsp;Jun&nbsp;17&nbsp;19:36:23&nbsp;2025&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Ticket&nbsp;flags:&nbsp;enc-pa-rep,&nbsp;pre-authent,&nbsp;<br>
forwardable&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Addresses:&nbsp;addressless&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&lt;/o:p&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;The&nbsp;relevant&nbsp;parts&nbsp;of&nbsp;the&nbsp;squid.conf&nbsp;are:&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&lt;/o:p&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;http_port&nbsp;3128&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;cache_mem&nbsp;256&nbsp;mb&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;maximum_object_size_in_memory&nbsp;512&nbsp;KB&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;maximum_object_size&nbsp;2048&nbsp;mb&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;cache_dir&nbsp;ufs&nbsp;/var/spool/squid&nbsp;51200&nbsp;16&nbsp;256&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;debug_options&nbsp;ALL,2&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;visible_hostname&nbsp;test-squid-cluster.dyn.zone&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;unique_hostname&nbsp;server1&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&lt;/o:p&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;refresh_pattern&nbsp;<br>
.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;20%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4320&nbsp;<br>
ignore-reload&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;auth_param&nbsp;basic&nbsp;children&nbsp;10&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;auth_param&nbsp;negotiate&nbsp;program&nbsp;<br>
/usr/lib64/squid/negotiate_kerberos_auth&nbsp;-k&nbsp;/etc/squid/HTTP.keytab&nbsp;-s&nbsp;&lt;A&nbsp;<br>
class=moz-txt-link-freetext&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;HTTP/test-squid-cluster.dyn.zone@&lt;/A&gt;REALM&nbsp;-d&nbsp;-i&nbsp;<br>
-r&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&lt;/o:p&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;(We&nbsp;also&nbsp;have&nbsp;LDAP&nbsp;basic&nbsp;auth&nbsp;configured&nbsp;as&nbsp;a&nbsp;fallback&nbsp;which&nbsp;<br>
works&nbsp;as&nbsp;expected&nbsp;but&nbsp;modern&nbsp;Windows&nbsp;clients&nbsp;no&nbsp;longer&nbsp;support&nbsp;basic&nbsp;auth&nbsp;for&nbsp;<br>
proxy&nbsp;servers).&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;o:p&gt;&lt;/o:p&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;klist&nbsp;-k&nbsp;/etc/squid/HTTP.keytab&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;Keytab&nbsp;name:&nbsp;&lt;A&nbsp;class=moz-txt-link-freetext&nbsp;<br>
href=&quot;file:///etc/squid/HTTP.keytab&quot;&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;FILE:/etc/squid/HTTP.keytab&lt;/A&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;KVNO&nbsp;Principal&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;----&nbsp;<br>
--------------------------------------------------------------------------&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&nbsp;&nbsp;&nbsp;1&nbsp;&lt;A&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;TESTSQUIDCACHE@&lt;/A&gt;REALM&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&nbsp;&nbsp;&nbsp;1&nbsp;&lt;A&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;TESTSQUIDCACHE@&lt;/A&gt;REALM&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&nbsp;&nbsp;&nbsp;1&nbsp;&lt;A&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;TESTSQUIDCACHE@&lt;/A&gt;REALM&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&nbsp;&nbsp;&nbsp;1&nbsp;&lt;A&nbsp;class=moz-txt-link-freetext&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;HTTP/test-squid-cache.dyn.zone@&lt;/A&gt;REALM&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&nbsp;&nbsp;&nbsp;1&nbsp;&lt;A&nbsp;class=moz-txt-link-freetext&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;HTTP/test-squid-cache.dyn.zone@&lt;/A&gt;REALM&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&nbsp;&nbsp;&nbsp;1&nbsp;&lt;A&nbsp;class=moz-txt-link-freetext&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;HTTP/test-squid-cache.dyn.zone@&lt;/A&gt;REALM&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;<br>
&lt;DIV&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;SPAN&nbsp;<br>
style=&quot;COLOR:&nbsp;#212121;&nbsp;mso-ligatures:&nbsp;none;&nbsp;mso-fareast-language:&nbsp;en-gb&quot;&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;SPAN&nbsp;<br>
style=&quot;COLOR:&nbsp;#212121;&nbsp;mso-ligatures:&nbsp;none;&nbsp;mso-fareast-language:&nbsp;en-gb&quot;&gt;/etc/hosts&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;SPAN&nbsp;<br>
style=&quot;COLOR:&nbsp;#212121;&nbsp;mso-ligatures:&nbsp;none;&nbsp;mso-fareast-language:&nbsp;en-gb&quot;&gt;1.2.3.4&nbsp;<br>
server1.cache&nbsp;server1&nbsp;test-squid-cache.dyn.zone&nbsp;<br>
test.squid.cluster&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;SPAN&nbsp;<br>
style=&quot;COLOR:&nbsp;#212121;&nbsp;mso-ligatures:&nbsp;none;&nbsp;mso-fareast-language:&nbsp;en-gb&quot;&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;SPAN&nbsp;<br>
style=&quot;COLOR:&nbsp;#212121;&nbsp;mso-ligatures:&nbsp;none;&nbsp;mso-fareast-language:&nbsp;en-gb&quot;&gt;Finally&nbsp;<br>
the&nbsp;keytab&nbsp;was&nbsp;generated&nbsp;using&nbsp;msktutil&nbsp;e.g.&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;SPAN&nbsp;<br>
style=&quot;COLOR:&nbsp;#212121;&nbsp;mso-ligatures:&nbsp;none;&nbsp;mso-fareast-language:&nbsp;en-gb&quot;&gt;msktutil&nbsp;<br>
-c&nbsp;-h&nbsp;test-squid-cache.dyn.zone&nbsp;-b&nbsp;'OU=Managed-Linux,OU=Infrastructure'&nbsp;<br>
--computer-name&nbsp;TESTSQUIDCACHE&nbsp;-s&nbsp;HTTP/test-squid-cache.dyn.zone&nbsp;-k&nbsp;<br>
/etc/squid/HTTP.keytab&nbsp;--server&nbsp;domain.controller&nbsp;--realm&nbsp;REALM&nbsp;<br>
--use-service-account&nbsp;--dont-expire-password&nbsp;--upn&nbsp;&lt;A&nbsp;<br>
class=moz-txt-link-freetext&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;HTTP/test-squid-cache.dyn.zone@REALM&lt;/A&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;SPAN&nbsp;<br>
style=&quot;COLOR:&nbsp;#212121;&nbsp;mso-ligatures:&nbsp;none;&nbsp;mso-fareast-language:&nbsp;en-gb&quot;&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;SPAN&nbsp;<br>
style=&quot;COLOR:&nbsp;#212121;&nbsp;mso-ligatures:&nbsp;none;&nbsp;mso-fareast-language:&nbsp;en-gb&quot;&gt;This&nbsp;<br>
works&nbsp;fairly&nbsp;well/reliably&nbsp;if&nbsp;we&nbsp;use&nbsp;a&nbsp;keytab&nbsp;containing&nbsp;the&nbsp;HTTP/fqdn&nbsp;of&nbsp;the&nbsp;<br>
server&nbsp;itself&nbsp;i.e.&nbsp;HTTP/server1&nbsp;AND&nbsp;connect&nbsp;using&nbsp;curl&nbsp;using&nbsp;the&nbsp;FQDN&nbsp;of&nbsp;server1&nbsp;<br>
but&nbsp;we&nbsp;need&nbsp;resiliency&nbsp;and&nbsp;high-availability&nbsp;so&nbsp;having&nbsp;a&nbsp;single-host&nbsp;service&nbsp;<br>
would&nbsp;be&nbsp;a&nbsp;last&nbsp;resort.&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;SPAN&nbsp;<br>
style=&quot;COLOR:&nbsp;#212121;&nbsp;mso-ligatures:&nbsp;none;&nbsp;mso-fareast-language:&nbsp;en-gb&quot;&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;SPAN&nbsp;<br>
style=&quot;COLOR:&nbsp;#212121;&nbsp;mso-ligatures:&nbsp;none;&nbsp;mso-fareast-language:&nbsp;en-gb&quot;&gt;Any&nbsp;<br>
ideas&nbsp;on&nbsp;where&nbsp;I’m&nbsp;going&nbsp;wrong&nbsp;or&nbsp;what&nbsp;I&nbsp;need&nbsp;to&nbsp;add&nbsp;in&nbsp;terms&nbsp;of&nbsp;DNS/keytab&nbsp;<br>
entries?&nbsp;Also&nbsp;some&nbsp;of&nbsp;the&nbsp;clients&nbsp;attempt&nbsp;to&nbsp;use&nbsp;key&nbsp;versions&nbsp;which&nbsp;have&nbsp;never&nbsp;<br>
been&nbsp;issued&nbsp;e.g.&nbsp;kvno&nbsp;4?&nbsp;&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;SPAN&nbsp;<br>
style=&quot;COLOR:&nbsp;#212121;&nbsp;mso-ligatures:&nbsp;none;&nbsp;mso-fareast-language:&nbsp;en-gb&quot;&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&nbsp;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;SPAN&nbsp;<br>
style=&quot;COLOR:&nbsp;#212121;&nbsp;mso-ligatures:&nbsp;none;&nbsp;mso-fareast-language:&nbsp;en-gb&quot;&gt;Kind&nbsp;<br>
regards,&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;SPAN&nbsp;<br>
style=&quot;COLOR:&nbsp;#212121;&nbsp;mso-ligatures:&nbsp;none;&nbsp;mso-fareast-language:&nbsp;en-gb&quot;&gt;Mark&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/P&gt;<br>
&lt;P&nbsp;class=MsoNormal&gt;&lt;SPAN&nbsp;<br>
style=&quot;COLOR:&nbsp;#212121;&nbsp;mso-ligatures:&nbsp;none;&nbsp;mso-fareast-language:&nbsp;en-gb&quot;&gt;--&lt;BR&gt;/****************************&lt;BR&gt;&lt;BR&gt;Mark&nbsp;<br>
Cairney&lt;BR&gt;ITI&nbsp;Enterprise&nbsp;Services&lt;BR&gt;Information&nbsp;Services&lt;BR&gt;University&nbsp;of&nbsp;<br>
Edinburgh&lt;BR&gt;&lt;BR&gt;Tel:&nbsp;0131&nbsp;650&nbsp;6565&lt;BR&gt;Email:&nbsp;&lt;/SPAN&gt;&lt;U&gt;&lt;SPAN&nbsp;<br>
style=&quot;COLOR:&nbsp;#0078d7;&nbsp;mso-ligatures:&nbsp;none;&nbsp;mso-fareast-language:&nbsp;en-gb&quot;&gt;&lt;A&nbsp;<br>
class=moz-txt-link-freetext&nbsp;<br>
moz-do-not-send=&quot;true&quot;&gt;Mark.Cairney@ed.ac.uk&lt;/A&gt;&lt;/SPAN&gt;&lt;/U&gt;&lt;SPAN&nbsp;<br>
style=&quot;COLOR:&nbsp;#212121;&nbsp;mso-ligatures:&nbsp;none;&nbsp;mso-fareast-language:&nbsp;en-gb&quot;&gt;&lt;BR&gt;&lt;BR&gt;*******************************/&lt;BR&gt;&lt;BR&gt;The&nbsp;<br>
University&nbsp;of&nbsp;Edinburgh&nbsp;is&nbsp;a&nbsp;charitable&nbsp;body,&nbsp;registered&nbsp;in&nbsp;Scotland,&nbsp;with&nbsp;<br>
registration&nbsp;number&nbsp;SC005336.&lt;/SPAN&gt;&lt;!--[if&nbsp;!vml]--&gt;&lt;IMG&nbsp;<br>
style=&quot;HEIGHT:&nbsp;0.333in;&nbsp;WIDTH:&nbsp;0.333in&quot;&nbsp;alt=signature_2526785256&nbsp;<br>
src=&quot;cid:378E760B59F348FCA60BF8CBB549AAAB@Ultrabook1&quot;&nbsp;width=32&nbsp;height=32&nbsp;<br>
v:shapes=&quot;Rectangle_x0020_1&quot;&gt;&lt;!--[endif]--&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/P&gt;&lt;/DIV&gt;&lt;/DIV&gt;<br>
&lt;P&gt;<br>
&lt;HR&gt;<br>
_______________________________________________&lt;BR&gt;squid-users&nbsp;mailing&nbsp;<br>
list&lt;BR&gt;squid-users@lists.squid-cache.org&lt;BR&gt;https://lists.squid-cache.org/listinfo/squid-users&lt;BR&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/BODY&gt;&lt;/HTML&gt;<br>

</tt>
